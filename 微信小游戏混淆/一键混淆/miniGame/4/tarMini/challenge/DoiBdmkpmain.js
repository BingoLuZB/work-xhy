;"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.default=void 0;require("./qapRbf1cjs/qe7aVFrQlibs/weapp-adapter");var _v4fNs7yJResourceLoader=_interopRequireDefault(require("./qapRbf1cjs/QycaeVLxbase/v4fNs7yJResourceLoader"));var _zS8jO7xgDirector=_interopRequireDefault(require("./qapRbf1cjs/zS8jO7xgDirector"));var _JowmRIGiDataStore=_interopRequireDefault(require("./qapRbf1cjs/QycaeVLxbase/JowmRIGiDataStore"));function _interopRequireDefault(a){return a&&a.__esModule?a:{default:a}}function _instanceof(a,b){if(b!=null&&typeof Symbol!=="undefined"&&b[Symbol.hasInstance]){return b[Symbol.hasInstance](a)}else{return a instanceof b}}function _classCallCheck(a,b){if(!_instanceof(a,b)){throw new TypeError("Cannot call a class as a function");}}function _defineProperties(a,b){for(var i=0;i<b.length;i++){var c=b[i];c.enumerable=c.enumerable||false;c.configurable=true;if("value"in c)c.writable=true;Object.defineProperty(a,c.key,c)}}function _createClass(a,b,c){if(b)_defineProperties(a.prototype,b);if(c)_defineProperties(a,c);return a}var screenWidth=window.innerWidth;var screenHeight=window.innerHeight;var ratio=wx.getSystemInfoSync().pixelRatio;var Main=function(){function Main(){var b=this;_classCallCheck(this,Main);this.canvas=canvas;this.ctx=this.canvas.getContext('2d');canvas.width=screenWidth*ratio;canvas.height=screenHeight*ratio;this.ctx.scale(ratio,ratio);var c=wx.getOpenDataContext();var d=c.canvas;d.width=screenWidth*ratio;d.height=screenHeight*ratio;_JowmRIGiDataStore.default.getInstance().sharedCanvas=d;this.dataStore=_JowmRIGiDataStore.default.getInstance();this.director=_zS8jO7xgDirector.default.getInstance(this.ctx);var e=_v4fNs7yJResourceLoader.default.create();e.onLoaded(function(a){return b.onResourceFirstLoaded(a)});this.director=_zS8jO7xgDirector.default.getInstance()}_createClass(Main,[{key:"onResourceFirstLoaded",value:function onResourceFirstLoaded(a){this.dataStore.canvas=this.canvas;this.dataStore.ctx=this.ctx;this.dataStore.res=a;this.dataStore.director=this.director;this.dataStore.score=0;this.init()}},{key:"init",value:function init(){this.director.run(this.ctx);this.setShare()}},{key:"setShare",value:function setShare(){wx.showShareMenu({withShareTicket:true});wx.onShareAppMessage(function(){return{title:'测试一下你有多少分',imageUrl:'https://h5.icefoxgame.com/h5Sdk/v1/question/homepage.png',query:'key1=1&key2=2',success:function success(a){if(_JowmRIGiDataStore.default.getInstance().currentCanvas==='questionCanvas'){_JowmRIGiDataStore.default.getInstance().ctx.drawImage(_JowmRIGiDataStore.default.getInstance().offScreenCanvas,0,0,screenWidth,screenHeight)}if(a.shareTickets){var b=a.shareTickets[0];_JowmRIGiDataStore.default.getInstance().shareTicket=b}},fail:function fail(a){}}})}}]);return Main}();exports.default=Main;;