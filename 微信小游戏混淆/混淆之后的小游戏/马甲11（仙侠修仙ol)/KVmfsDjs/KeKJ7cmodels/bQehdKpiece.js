var a7_0x322b=['move','position','update','render','drawImage','https://h5.kunyufun.com/h5Sdk/v1/waistcoatImg/sliding_puzzle/wrap.png','contentWidth','contentPadding','stage','contentPaddingTop','floor','index','visible','puzzleImg','width','img','src','swidth','sheight','height','oldX','oldY','newX','newY','ani','wrapperImg'];(function(_0x2e09ea,_0x49b44e){var _0x305af9=function(_0x5b3b88){while(--_0x5b3b88){_0x2e09ea['push'](_0x2e09ea['shift']());}};_0x305af9(++_0x49b44e);}(a7_0x322b,0xbb));var a7_0x1bb7=function(_0x1b569a,_0xbef6c0){_0x1b569a=_0x1b569a-0x0;var _0x71433c=a7_0x322b[_0x1b569a];return _0x71433c;};import a7_0xb0cc0b from'../p3vKahdatabus';import a7_0x33e06f from'../nkpjxzlibs/LDGfUtbezier';const PIECE_WRAPPER_SRC=a7_0x1bb7('0x0');const PIECE_WRAPPER_WIDTH=0x12c;const PIECE_WRAPPER_HEIGHT=0x12c;const ANI_SPEED=0.2;let databus=new a7_0xb0cc0b();let easeInOut=a7_0x33e06f(0.42,0x0,0.58,0x1);function getPositionXY(position){let width=databus[a7_0x1bb7('0x1')]/databus['stage'];let result={};result['x']=databus[a7_0x1bb7('0x2')]+position%databus[a7_0x1bb7('0x3')]*width;result['y']=databus[a7_0x1bb7('0x4')]+Math[a7_0x1bb7('0x5')](position/databus[a7_0x1bb7('0x3')])*width;return result;}export default class Piece{constructor(index=0x0,position=0x0){this[a7_0x1bb7('0x6')]=index;this['position']=position;this[a7_0x1bb7('0x7')]=!![];let cut=databus[a7_0x1bb7('0x8')][a7_0x1bb7('0x9')]/databus['stage'];let width=databus['contentWidth']/databus[a7_0x1bb7('0x3')];this['img']=new Image();this[a7_0x1bb7('0xa')][a7_0x1bb7('0xb')]=databus[a7_0x1bb7('0x8')]['src'];this['sx']=index%databus[a7_0x1bb7('0x3')]*cut;this['sy']=Math['floor'](index/databus['stage'])*cut;this[a7_0x1bb7('0xc')]=cut;this[a7_0x1bb7('0xd')]=cut;let positionXY=getPositionXY(position);this['x']=positionXY['x'];this['y']=positionXY['y'];this['width']=width;this[a7_0x1bb7('0xe')]=width;this[a7_0x1bb7('0xf')]=positionXY['x'];this[a7_0x1bb7('0x10')]=positionXY['y'];this[a7_0x1bb7('0x11')]=positionXY['x'];this[a7_0x1bb7('0x12')]=positionXY['y'];this[a7_0x1bb7('0x13')]=0x1;this[a7_0x1bb7('0x14')]=new Image();this[a7_0x1bb7('0x14')][a7_0x1bb7('0xb')]=PIECE_WRAPPER_SRC;}[a7_0x1bb7('0x15')](position=0x0){this[a7_0x1bb7('0x13')]=0x0;this[a7_0x1bb7('0x16')]=position;let positionXY=getPositionXY(position);this[a7_0x1bb7('0x11')]=positionXY['x'];this[a7_0x1bb7('0x12')]=positionXY['y'];this[a7_0x1bb7('0xf')]=this['x'];this[a7_0x1bb7('0x10')]=this['y'];}[a7_0x1bb7('0x17')](){if(this[a7_0x1bb7('0x13')]>=0x1){this[a7_0x1bb7('0x13')]=0x1;this['x']=this[a7_0x1bb7('0x11')];this['y']=this[a7_0x1bb7('0x12')];return;}this['ani']+=ANI_SPEED;this['x']=this[a7_0x1bb7('0xf')]+(this[a7_0x1bb7('0x11')]-this[a7_0x1bb7('0xf')])*easeInOut(this[a7_0x1bb7('0x13')]);this['y']=this['oldY']+(this[a7_0x1bb7('0x12')]-this[a7_0x1bb7('0x10')])*easeInOut(this[a7_0x1bb7('0x13')]);}[a7_0x1bb7('0x18')](ctx){if(!this[a7_0x1bb7('0x7')]){return;}ctx[a7_0x1bb7('0x19')](this['img'],this['sx'],this['sy'],this[a7_0x1bb7('0xc')],this['sheight'],this['x'],this['y'],this[a7_0x1bb7('0x9')],this['height']);ctx[a7_0x1bb7('0x19')](this[a7_0x1bb7('0x14')],this['x'],this['y'],this[a7_0x1bb7('0x9')],this[a7_0x1bb7('0xe')]);}}