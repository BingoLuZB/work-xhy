var a11_0xcab5=['emptyleft','lookright','emptyright','innerHeight','#000','rgba(238,\x20228,\x20218,\x200.35)','size','startTiles','restart','ctx','update','restartArr','addnum','board','boardarr','push','showModal','温馨提示','confirm','floor','random','length','substr','fillRoundRect','leftpad','beginPath','fillStyle','#fff','bold\x203rem\x20Arial','toppad','rgb(','lookup','down','left','lookleft','right','num_color','text','textBaseline','middle','fillText','emptyup','move','lookdown','emptydown','addscores'];(function(_0x2efc57,_0x774dab){var _0x58d77b=function(_0x274a4b){while(--_0x274a4b){_0x2efc57['push'](_0x2efc57['shift']());}};_0x58d77b(++_0x774dab);}(a11_0xcab5,0x1cf));var a11_0x4ba1=function(_0x34fa04,_0x37ce11){_0x34fa04=_0x34fa04-0x0;var _0xdda802=a11_0xcab5[_0x34fa04];return _0xdda802;};import a11_0x4c27e4 from'../base/sprite.js';let instance;const screenWidth=window['innerWidth'];const screenHeight=window[a11_0x4ba1('0x0')];const START_X=0x0;const START_Y=0x0;const GRID_CONTAINER_STYLE=a11_0x4ba1('0x1');const GRID_CONTAINER_WIDTH=screenWidth*0.8;const GRID_CONTAINER_RADIUS=GRID_CONTAINER_WIDTH*0x1/0x4b;const GRID_CELL_STYLE=a11_0x4ba1('0x2');const GRID_CELL_WIDTH=GRID_CONTAINER_WIDTH*0x1/0x5;const GRID_CELL_SPACE=GRID_CONTAINER_WIDTH*0x1/0x19;const GRID_CELL_RADIUS=GRID_CONTAINER_WIDTH*0x1/0x4b;export default class GameManager extends a11_0x4c27e4{constructor(_0x272cda,_0x27d813){super(GRID_CONTAINER_STYLE,GRID_CONTAINER_WIDTH,GRID_CONTAINER_WIDTH);if(instance){return instance;}this[a11_0x4ba1('0x3')]=_0x27d813;this[a11_0x4ba1('0x4')]=0x2;this[a11_0x4ba1('0x5')](_0x272cda);this[a11_0x4ba1('0x6')]=_0x272cda;instance=this;}[a11_0x4ba1('0x7')](_0x38b5c2){}[a11_0x4ba1('0x5')](_0x1ab80d){this[a11_0x4ba1('0x8')]();this[a11_0x4ba1('0x9')](_0x1ab80d);}['restartArr'](){this[a11_0x4ba1('0xa')]=new Array();for(var _0x17ec9b=0x0;_0x17ec9b<this['size'];_0x17ec9b++){this['board'][_0x17ec9b]=new Array();for(var _0x10f98e=0x0;_0x10f98e<this[a11_0x4ba1('0x3')];_0x10f98e++){this[a11_0x4ba1('0xa')][_0x17ec9b][_0x10f98e]=0x0;}}}[a11_0x4ba1('0xb')](){var _0xaf7e07=[];for(var _0x5c2b07=0x0;_0x5c2b07<this[a11_0x4ba1('0x3')];_0x5c2b07++){for(var _0x30c43d=0x0;_0x30c43d<this[a11_0x4ba1('0x3')];_0x30c43d++){if(this[a11_0x4ba1('0xa')][_0x5c2b07][_0x30c43d]==0x0){_0xaf7e07[a11_0x4ba1('0xc')](_0x30c43d+'-'+_0x5c2b07);}}}return _0xaf7e07;}[a11_0x4ba1('0x9')](_0x439570){var _0x3b523e=this[a11_0x4ba1('0xb')]();if(_0x3b523e['length']==0x0){wx[a11_0x4ba1('0xd')]({'title':a11_0x4ba1('0xe'),'content':'game\x20over!','success':function(_0x27c7d0){if(_0x27c7d0[a11_0x4ba1('0xf')]){}}});return;}var _0x5d34a=Math[a11_0x4ba1('0x10')](Math[a11_0x4ba1('0x11')]()*_0x3b523e[a11_0x4ba1('0x12')]);var _0x562e33=_0x3b523e[_0x5d34a];var _0x3871b2=parseInt(_0x562e33[a11_0x4ba1('0x13')](0x0,0x1));var _0x5ae4a1=parseInt(_0x562e33[a11_0x4ba1('0x13')](0x2,0x1));var _0x39be32=Math['random']()>=0.5?0x4:0x2;this['board'][_0x5ae4a1][_0x3871b2]=_0x39be32;this[a11_0x4ba1('0x14')](_0x439570,this[a11_0x4ba1('0x15')](_0x3871b2),this['toppad'](_0x5ae4a1),GRID_CELL_WIDTH,GRID_CELL_WIDTH,GRID_CELL_RADIUS,this['num_color'](_0x39be32));_0x439570[a11_0x4ba1('0x16')]();_0x439570[a11_0x4ba1('0x17')]=a11_0x4ba1('0x18');_0x439570['textAlign']='center';_0x439570['textBaseline']='middle';_0x439570['font']=a11_0x4ba1('0x19');_0x439570['fillText'](_0x39be32,this['leftpad'](_0x3871b2)+GRID_CELL_WIDTH/0x2,this[a11_0x4ba1('0x1a')](_0x5ae4a1)+GRID_CELL_WIDTH/0x2);_0x439570['closePath']();}['num_color'](_0x34d46d){return a11_0x4ba1('0x1b')+(0xf0-0xa*_0x34d46d)+','+(0xfa-0x5*_0x34d46d)+','+(0xfa-_0x34d46d)+')';}[a11_0x4ba1('0x15')](_0x3f1866){return(_0x3f1866+0x1)*GRID_CELL_SPACE+GRID_CELL_WIDTH*_0x3f1866;}['toppad'](_0x8a577c){return(_0x8a577c+0x1)*GRID_CELL_SPACE+GRID_CELL_WIDTH*_0x8a577c;}['up'](){for(var _0x15da7a=0x1;_0x15da7a<this['size'];_0x15da7a++){for(var _0x3b5570=0x0;_0x3b5570<this[a11_0x4ba1('0x3')];_0x3b5570++){if(this[a11_0x4ba1('0xa')][_0x15da7a][_0x3b5570]!=0x0){this[a11_0x4ba1('0x1c')](_0x3b5570,_0x15da7a);}}}}[a11_0x4ba1('0x1d')](){for(var _0x46a861=0x2;_0x46a861>=0x0;_0x46a861--){for(var _0x36d661=0x0;_0x36d661<this[a11_0x4ba1('0x3')];_0x36d661++){if(this[a11_0x4ba1('0xa')][_0x46a861][_0x36d661]!=0x0){this['lookdown'](_0x36d661,_0x46a861);}}}}[a11_0x4ba1('0x1e')](){for(var _0x1834e6=0x0;_0x1834e6<this[a11_0x4ba1('0x3')];_0x1834e6++){for(var _0x1f0cc2=0x1;_0x1f0cc2<this[a11_0x4ba1('0x3')];_0x1f0cc2++){if(this['board'][_0x1834e6][_0x1f0cc2]!=0x0){this[a11_0x4ba1('0x1f')](_0x1f0cc2,_0x1834e6);}}}}[a11_0x4ba1('0x20')](){for(var _0x4e240a=0x0;_0x4e240a<this[a11_0x4ba1('0x3')];_0x4e240a++){for(var _0xd1de93=0x2;_0xd1de93>=0x0;_0xd1de93--){if(this[a11_0x4ba1('0xa')][_0x4e240a][_0xd1de93]!=0x0){this['lookright'](_0xd1de93,_0x4e240a);}}}}['move'](_0x5498a9,_0x55f3e5,_0x31b958,_0xf351bc,_0x43e83a){this[a11_0x4ba1('0x14')](this['ctx'],this[a11_0x4ba1('0x15')](_0xf351bc),this[a11_0x4ba1('0x1a')](_0x43e83a),GRID_CELL_WIDTH,GRID_CELL_WIDTH,GRID_CELL_RADIUS,this[a11_0x4ba1('0x21')](_0x31b958));if(_0x31b958!=0x0){this[a11_0x4ba1('0x22')](_0xf351bc,_0x43e83a,_0x31b958);}this[a11_0x4ba1('0xa')][_0x43e83a][_0xf351bc]=_0x31b958;this['fillRoundRect'](this[a11_0x4ba1('0x6')],this['leftpad'](_0x5498a9),this[a11_0x4ba1('0x1a')](_0x55f3e5),GRID_CELL_WIDTH,GRID_CELL_WIDTH,GRID_CELL_RADIUS,this['num_color'](0x0));this[a11_0x4ba1('0xa')][_0x55f3e5][_0x5498a9]=0x0;}[a11_0x4ba1('0x22')](_0x284fff,_0x5ecb65,_0xeaa814){this['ctx'][a11_0x4ba1('0x16')]();this[a11_0x4ba1('0x6')][a11_0x4ba1('0x17')]='#fff';this[a11_0x4ba1('0x6')]['textAlign']='center';this['ctx'][a11_0x4ba1('0x23')]=a11_0x4ba1('0x24');this[a11_0x4ba1('0x6')]['font']=a11_0x4ba1('0x19');this[a11_0x4ba1('0x6')][a11_0x4ba1('0x25')](_0xeaa814,this[a11_0x4ba1('0x15')](_0x284fff)+this['w']/0x2,this[a11_0x4ba1('0x1a')](_0x5ecb65)+this['w']/0x2);this[a11_0x4ba1('0x6')]['closePath']();}[a11_0x4ba1('0x1c')](_0x2beaef,_0x27ee54){for(var _0x386ed5=0x0;_0x386ed5<_0x27ee54;_0x386ed5++){if(this[a11_0x4ba1('0xa')][_0x386ed5][_0x2beaef]==0x0){if(this[a11_0x4ba1('0x26')](_0x2beaef,_0x386ed5,_0x27ee54)){this[a11_0x4ba1('0x27')](_0x2beaef,_0x27ee54,this['board'][_0x27ee54][_0x2beaef],_0x2beaef,_0x386ed5);return;}}else if(this[a11_0x4ba1('0xa')][_0x386ed5][_0x2beaef]==this[a11_0x4ba1('0xa')][_0x27ee54][_0x2beaef]){if(this[a11_0x4ba1('0x26')](_0x2beaef,_0x386ed5,_0x27ee54)){this['addscores']+=0x2*this[a11_0x4ba1('0xa')][_0x27ee54][_0x2beaef];this[a11_0x4ba1('0x27')](_0x2beaef,_0x27ee54,0x2*this[a11_0x4ba1('0xa')][_0x27ee54][_0x2beaef],_0x2beaef,_0x386ed5);}}}}[a11_0x4ba1('0x28')](_0x199b1b,_0x2d20f1){for(var _0xb733dd=0x3;_0xb733dd>_0x2d20f1;_0xb733dd--){if(this[a11_0x4ba1('0xa')][_0xb733dd][_0x199b1b]==0x0){if(this[a11_0x4ba1('0x29')](_0x199b1b,_0xb733dd,_0x2d20f1)){this[a11_0x4ba1('0x27')](_0x199b1b,_0x2d20f1,this[a11_0x4ba1('0xa')][_0x2d20f1][_0x199b1b],_0x199b1b,_0xb733dd);return;}}else if(this[a11_0x4ba1('0xa')][_0xb733dd][_0x199b1b]==this[a11_0x4ba1('0xa')][_0x2d20f1][_0x199b1b]){if(this[a11_0x4ba1('0x29')](_0x199b1b,_0xb733dd,_0x2d20f1)){this[a11_0x4ba1('0x2a')]+=0x2*this[a11_0x4ba1('0xa')][_0x2d20f1][_0x199b1b];this[a11_0x4ba1('0x27')](_0x199b1b,_0x2d20f1,0x2*this[a11_0x4ba1('0xa')][_0x2d20f1][_0x199b1b],_0x199b1b,_0xb733dd);}}}}[a11_0x4ba1('0x1f')](_0x562fd1,_0x3e779c){for(var _0x12963b=0x0;_0x12963b<_0x562fd1;_0x12963b++){if(this['board'][_0x3e779c][_0x12963b]==0x0){if(this[a11_0x4ba1('0x2b')](_0x12963b,_0x3e779c,_0x562fd1)){this[a11_0x4ba1('0x27')](_0x562fd1,_0x3e779c,this[a11_0x4ba1('0xa')][_0x3e779c][_0x562fd1],_0x12963b,_0x3e779c);return;}}else if(this[a11_0x4ba1('0xa')][_0x3e779c][_0x12963b]==this[a11_0x4ba1('0xa')][_0x3e779c][_0x562fd1]){if(this[a11_0x4ba1('0x2b')](_0x12963b,_0x3e779c,_0x562fd1)){this[a11_0x4ba1('0x2a')]+=0x2*this[a11_0x4ba1('0xa')][_0x3e779c][_0x562fd1];this[a11_0x4ba1('0x27')](_0x562fd1,_0x3e779c,0x2*this[a11_0x4ba1('0xa')][_0x3e779c][_0x562fd1],_0x12963b,_0x3e779c);}}}}[a11_0x4ba1('0x2c')](_0x48bd86,_0x4e62b1){for(var _0xa98c88=0x3;_0xa98c88>_0x48bd86;_0xa98c88--){if(this[a11_0x4ba1('0xa')][_0x4e62b1][_0xa98c88]==0x0){if(this['emptyright'](_0xa98c88,_0x4e62b1,_0x48bd86)){this[a11_0x4ba1('0x27')](_0x48bd86,_0x4e62b1,this['board'][_0x4e62b1][_0x48bd86],_0xa98c88,_0x4e62b1);return;}}else if(this['board'][_0x4e62b1][_0xa98c88]==this[a11_0x4ba1('0xa')][_0x4e62b1][_0x48bd86]){if(this[a11_0x4ba1('0x2d')](_0xa98c88,_0x4e62b1,_0x48bd86)){this[a11_0x4ba1('0x2a')]+=0x2*this[a11_0x4ba1('0xa')][_0x4e62b1][_0x48bd86];this[a11_0x4ba1('0x27')](_0x48bd86,_0x4e62b1,0x2*this[a11_0x4ba1('0xa')][_0x4e62b1][_0x48bd86],_0xa98c88,_0x4e62b1);}}}}['emptyup'](_0x45e0e6,_0xe58847,_0x10b515){if(_0xe58847+0x1<_0x10b515){for(var _0x5d4f46=_0xe58847+0x1;_0x5d4f46<_0x10b515;_0x5d4f46++){if(this[a11_0x4ba1('0xa')][_0x5d4f46][_0x45e0e6]!=0x0){return![];}return!![];};}else{return!![];}}[a11_0x4ba1('0x29')](_0x415de2,_0x4f0a6d,_0x5054ea){if(_0x4f0a6d>_0x5054ea+0x1){for(var _0x2c4d53=_0x5054ea+0x1;_0x2c4d53<_0x4f0a6d;_0x2c4d53++){if(this[a11_0x4ba1('0xa')][_0x2c4d53][_0x415de2]!=0x0){return![];}return!![];};}else{return!![];}}[a11_0x4ba1('0x2b')](_0x1925b2,_0x18ff34,_0x1487e8){if(_0x1925b2+0x1<_0x1487e8){for(var _0x4155e8=_0x1925b2+0x1;_0x4155e8<_0x1487e8;_0x4155e8++){if(this[a11_0x4ba1('0xa')][_0x18ff34][_0x4155e8]!=0x0){return![];}return!![];};}else{return!![];}}[a11_0x4ba1('0x2d')](_0x2a1ebe,_0x1508a3,_0x2d5c61){if(_0x2a1ebe>_0x2d5c61+0x1){for(var _0x26a27d=_0x2d5c61+0x1;_0x26a27d<_0x2a1ebe;_0x26a27d++){if(this[a11_0x4ba1('0xa')][_0x1508a3][_0x26a27d]!=0x0){return![];}return!![];};}else{return!![];}}}