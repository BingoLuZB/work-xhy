var egret = window.egret;function HawkProtocol(t,e){if(t&&e){this.type=t;try{this.msgBuffer=e.encode()}catch(r){console.log("protocol encode failed: "+t)}this.size=this.msgBuffer.remaining(),this.reserve=0,this.crc=HawkProtocolManager.calcCrc(this.msgBuffer)}else this.type=0,this.size=0,this.reserve=0,this.crc=0,this.msgBuffer=null}HawkProtocol.prototype.getType=function(){return this.type},HawkProtocol.prototype.getSize=function(){return this.size},HawkProtocol.prototype.getReserve=function(){return this.reserve},HawkProtocol.prototype.getCrc=function(){return this.crc},HawkProtocol.prototype.getMsgBuffer=function(){return this.msgBuffer},HawkProtocol.prototype.encode=function(){try{var t=new dcodeIO.ByteBuffer(1024);return t.writeInt32(this.type),t.writeInt32(this.size),t.writeInt32(this.reserve),t.writeInt32(this.crc),t.append(this.msgBuffer),t.flip(),t}catch(e){console.log("exception: "+e.toString())}return null},HawkProtocol.prototype.decode=function(t){if(t.remaining()<HawkProtocolManager.HEADER_SIZE)return!1;t.mark();try{if(this.type=t.readInt32(),this.size=t.readInt32(),this.reserve=t.readInt32(),this.crc=t.readInt32(),!(t.remaining()>=this.size))return t.reset(),!1;this.msgBuffer=new dcodeIO.ByteBuffer(this.size),this.size>0&&t.copyTo(this.msgBuffer,0,t.offset,t.offset+this.size)}catch(e){return t.reset(),console.log("exception: "+e.toString()),!1}var r=HawkProtocolManager.calcCrc(this.msgBuffer);return r!=this.crc?!1:!0},window.HawkProtocol=HawkProtocol;