var egret = window.egret;!function(){function n(n){var t=!1;return function(){if(t)throw new Error("Callback was already called.");t=!0,n.apply(e,arguments)}}var t={};window.async=t;var e,r;e=this,null!=e&&(r=e.async),t.noConflict=function(){return e.async=r,t};var u=Object.prototype.toString,i=Array.isArray||function(n){return"[object Array]"===u.call(n)},o=function(n,t){if(n.forEach)return n.forEach(t);for(var e=0;e<n.length;e+=1)t(n[e],e,n)},c=function(n,t){if(n.map)return n.map(t);var e=[];return o(n,function(n,r,u){e.push(t(n,r,u))}),e},a=function(n,t,e){return n.reduce?n.reduce(t,e):(o(n,function(n,r,u){e=t(e,n,r,u)}),e)},l=function(n){if(Object.keys)return Object.keys(n);var t=[];for(var e in n)n.hasOwnProperty(e)&&t.push(e);return t};"undefined"!=typeof process&&process.nextTick?(t.nextTick=process.nextTick,"undefined"!=typeof setImmediate?t.setImmediate=function(n){setImmediate(n)}:t.setImmediate=t.nextTick):"function"==typeof setImmediate?(t.nextTick=function(n){setImmediate(n)},t.setImmediate=t.nextTick):(t.nextTick=function(n){setTimeout(n,0)},t.setImmediate=t.nextTick),t.each=function(t,e,r){function u(n){n?(r(n),r=function(){}):(i+=1,i>=t.length&&r())}if(r=r||function(){},!t.length)return r();var i=0;o(t,function(t){e(t,n(u))})},t.forEach=t.each,t.eachSeries=function(n,t,e){if(e=e||function(){},!n.length)return e();var r=0,u=function(){t(n[r],function(t){t?(e(t),e=function(){}):(r+=1,r>=n.length?e():u())})};u()},t.forEachSeries=t.eachSeries,t.eachLimit=function(n,t,e,r){var u=f(t);u.apply(null,[n,e,r])},t.forEachLimit=t.eachLimit;var f=function(n){return function(t,e,r){if(r=r||function(){},!t.length||0>=n)return r();var u=0,i=0,o=0;!function c(){if(u>=t.length)return r();for(;n>o&&i<t.length;)i+=1,o+=1,e(t[i-1],function(n){n?(r(n),r=function(){}):(u+=1,o-=1,u>=t.length?r():c())})}()}},s=function(n){return function(){var e=Array.prototype.slice.call(arguments);return n.apply(null,[t.each].concat(e))}},p=function(n,t){return function(){var e=Array.prototype.slice.call(arguments);return t.apply(null,[f(n)].concat(e))}},d=function(n){return function(){var e=Array.prototype.slice.call(arguments);return n.apply(null,[t.eachSeries].concat(e))}},y=function(n,t,e,r){var u=[];t=c(t,function(n,t){return{index:t,value:n}}),n(t,function(n,t){e(n.value,function(e,r){u[n.index]=r,t(e)})},function(n){r(n,u)})};t.map=s(y),t.mapSeries=d(y),t.mapLimit=function(n,t,e,r){return m(t)(n,e,r)};var m=function(n){return p(n,y)};t.reduce=function(n,e,r,u){t.eachSeries(n,function(n,t){r(e,n,function(n,r){e=r,t(n)})},function(n){u(n,e)})},t.inject=t.reduce,t.foldl=t.reduce,t.reduceRight=function(n,e,r,u){var i=c(n,function(n){return n}).reverse();t.reduce(i,e,r,u)},t.foldr=t.reduceRight;var v=function(n,t,e,r){var u=[];t=c(t,function(n,t){return{index:t,value:n}}),n(t,function(n,t){e(n.value,function(e){e&&u.push(n),t()})},function(n){r(c(u.sort(function(n,t){return n.index-t.index}),function(n){return n.value}))})};t.filter=s(v),t.filterSeries=d(v),t.select=t.filter,t.selectSeries=t.filterSeries;var g=function(n,t,e,r){var u=[];t=c(t,function(n,t){return{index:t,value:n}}),n(t,function(n,t){e(n.value,function(e){e||u.push(n),t()})},function(n){r(c(u.sort(function(n,t){return n.index-t.index}),function(n){return n.value}))})};t.reject=s(g),t.rejectSeries=d(g);var h=function(n,t,e,r){n(t,function(n,t){e(n,function(e){e?(r(n),r=function(){}):t()})},function(n){r()})};t.detect=s(h),t.detectSeries=d(h),t.some=function(n,e,r){t.each(n,function(n,t){e(n,function(n){n&&(r(!0),r=function(){}),t()})},function(n){r(!1)})},t.any=t.some,t.every=function(n,e,r){t.each(n,function(n,t){e(n,function(n){n||(r(!1),r=function(){}),t()})},function(n){r(!0)})},t.all=t.every,t.sortBy=function(n,e,r){t.map(n,function(n,t){e(n,function(e,r){e?t(e):t(null,{value:n,criteria:r})})},function(n,t){if(n)return r(n);var e=function(n,t){var e=n.criteria,r=t.criteria;return r>e?-1:e>r?1:0};r(null,c(t.sort(e),function(n){return n.value}))})},t.auto=function(n,e){e=e||function(){};var r=l(n),u=r.length;if(!u)return e();var c={},f=[],s=function(n){f.unshift(n)},p=function(n){for(var t=0;t<f.length;t+=1)if(f[t]===n)return void f.splice(t,1)},d=function(){u--,o(f.slice(0),function(n){n()})};s(function(){if(!u){var n=e;e=function(){},n(null,c)}}),o(r,function(r){var u=i(n[r])?n[r]:[n[r]],f=function(n){var u=Array.prototype.slice.call(arguments,1);if(u.length<=1&&(u=u[0]),n){var i={};o(l(c),function(n){i[n]=c[n]}),i[r]=u,e(n,i),e=function(){}}else c[r]=u,t.setImmediate(d)},y=u.slice(0,Math.abs(u.length-1))||[],m=function(){return a(y,function(n,t){return n&&c.hasOwnProperty(t)},!0)&&!c.hasOwnProperty(r)};if(m())u[u.length-1](f,c);else{var v=function(){m()&&(p(v),u[u.length-1](f,c))};s(v)}})},t.retry=function(n,e,r){var u=5,i=[];"function"==typeof n&&(r=e,e=n,n=u),n=parseInt(n,10)||u;var o=function(u,o){for(var c=function(n,t){return function(e){n(function(n,r){e(!n||t,{err:n,result:r})},o)}};n;)i.push(c(e,!(n-=1)));t.series(i,function(n,t){t=t[t.length-1],(u||r)(t.err,t.result)})};return r?o():o},t.waterfall=function(n,e){if(e=e||function(){},!i(n)){var r=new Error("First argument to waterfall must be an array of functions");return e(r)}if(!n.length)return e();var u=function(n){return function(r){if(r)e.apply(null,arguments),e=function(){};else{var i=Array.prototype.slice.call(arguments,1),o=n.next();o?i.push(u(o)):i.push(e),t.setImmediate(function(){n.apply(null,i)})}}};u(t.iterator(n))()};var w=function(n,t,e){if(e=e||function(){},i(t))n.map(t,function(n,t){n&&n(function(n){var e=Array.prototype.slice.call(arguments,1);e.length<=1&&(e=e[0]),t.call(null,n,e)})},e);else{var r={};n.each(l(t),function(n,e){t[n](function(t){var u=Array.prototype.slice.call(arguments,1);u.length<=1&&(u=u[0]),r[n]=u,e(t)})},function(n){e(n,r)})}};t.parallel=function(n,e){w({map:t.map,each:t.each},n,e)},t.parallelLimit=function(n,t,e){w({map:m(t),each:f(t)},n,e)},t.series=function(n,e){if(e=e||function(){},i(n))t.mapSeries(n,function(n,t){n&&n(function(n){var e=Array.prototype.slice.call(arguments,1);e.length<=1&&(e=e[0]),t.call(null,n,e)})},e);else{var r={};t.eachSeries(l(n),function(t,e){n[t](function(n){var u=Array.prototype.slice.call(arguments,1);u.length<=1&&(u=u[0]),r[t]=u,e(n)})},function(n){e(n,r)})}},t.iterator=function(n){var t=function(e){var r=function(){return n.length&&n[e].apply(null,arguments),r.next()};return r.next=function(){return e<n.length-1?t(e+1):null},r};return t(0)},t.apply=function(n){var t=Array.prototype.slice.call(arguments,1);return function(){return n.apply(null,t.concat(Array.prototype.slice.call(arguments)))}};var k=function(n,t,e,r){var u=[];n(t,function(n,t){e(n,function(n,e){u=u.concat(e||[]),t(n)})},function(n){r(n,u)})};t.concat=s(k),t.concatSeries=d(k),t.whilst=function(n,e,r){n()?e(function(u){return u?r(u):void t.whilst(n,e,r)}):r()},t.doWhilst=function(n,e,r){n(function(u){if(u)return r(u);var i=Array.prototype.slice.call(arguments,1);e.apply(null,i)?t.doWhilst(n,e,r):r()})},t.until=function(n,e,r){n()?r():e(function(u){return u?r(u):void t.until(n,e,r)})},t.doUntil=function(n,e,r){n(function(u){if(u)return r(u);var i=Array.prototype.slice.call(arguments,1);e.apply(null,i)?r():t.doUntil(n,e,r)})},t.queue=function(e,r){function u(n,e,r,u){return i(e)||(e=[e]),0==e.length?t.setImmediate(function(){n.drain&&n.drain()}):void o(e,function(e){var i={data:e,callback:"function"==typeof u?u:null};r?n.tasks.unshift(i):n.tasks.push(i),n.saturated&&n.tasks.length===n.concurrency&&n.saturated(),t.setImmediate(n.process)})}void 0===r&&(r=1);var c=0,a={tasks:[],concurrency:r,saturated:null,empty:null,drain:null,paused:!1,push:function(n,t){u(a,n,!1,t)},unshift:function(n,t){u(a,n,!0,t)},process:function(){if(!a.paused&&c<a.concurrency&&a.tasks.length){var t=a.tasks.shift();a.empty&&0===a.tasks.length&&a.empty(),c+=1;var r=function(){c-=1,t.callback&&t.callback.apply(t,arguments),a.drain&&a.tasks.length+c===0&&a.drain(),a.process()},u=n(r);e(t.data,u)}},length:function(){return a.tasks.length},running:function(){return c},idle:function(){return a.tasks.length+c===0},pause:function(){a.paused!==!0&&(a.paused=!0,a.process())},resume:function(){a.paused!==!1&&(a.paused=!1,a.process())}};return a},t.cargo=function(n,e){var r=!1,u=[],a={tasks:u,payload:e,saturated:null,empty:null,drain:null,drained:!0,push:function(n,r){i(n)||(n=[n]),o(n,function(n){u.push({data:n,callback:"function"==typeof r?r:null}),a.drained=!1,a.saturated&&u.length===e&&a.saturated()}),t.setImmediate(a.process)},process:function l(){if(!r){if(0===u.length)return a.drain&&!a.drained&&a.drain(),void(a.drained=!0);var t="number"==typeof e?u.splice(0,e):u.splice(0,u.length),i=c(t,function(n){return n.data});a.empty&&a.empty(),r=!0,n(i,function(){r=!1;var n=arguments;o(t,function(t){t.callback&&t.callback.apply(null,n)}),l()})}},length:function(){return u.length},running:function(){return r}};return a};var x=function(n){return function(t){var e=Array.prototype.slice.call(arguments,1);t.apply(null,e.concat([function(t){var e=Array.prototype.slice.call(arguments,1);"undefined"!=typeof console&&(t?console.error&&console.error(t):console[n]&&o(e,function(t){console[n](t)}))}]))}};t.log=x("log"),t.dir=x("dir"),t.memoize=function(n,e){var r={},u={};e=e||function(n){return n};var i=function(){var i=Array.prototype.slice.call(arguments),o=i.pop(),c=e.apply(null,i);c in r?t.nextTick(function(){o.apply(null,r[c])}):c in u?u[c].push(o):(u[c]=[o],n.apply(null,i.concat([function(){r[c]=arguments;var n=u[c];delete u[c];for(var t=0,e=n.length;e>t;t++)n[t].apply(null,arguments)}])))};return i.memo=r,i.unmemoized=n,i},t.unmemoize=function(n){return function(){return(n.unmemoized||n).apply(null,arguments)}},t.times=function(n,e,r){for(var u=[],i=0;n>i;i++)u.push(i);return t.map(u,e,r)},t.timesSeries=function(n,e,r){for(var u=[],i=0;n>i;i++)u.push(i);return t.mapSeries(u,e,r)},t.seq=function(){var n=arguments;return function(){var e=this,r=Array.prototype.slice.call(arguments),u=r.pop();t.reduce(n,r,function(n,t,r){t.apply(e,n.concat([function(){var n=arguments[0],t=Array.prototype.slice.call(arguments,1);r(n,t)}]))},function(n,t){u.apply(e,[n].concat(t))})}},t.compose=function(){return t.seq.apply(null,Array.prototype.reverse.call(arguments))};var b=function(n,t){var e=function(){var e=this,r=Array.prototype.slice.call(arguments),u=r.pop();return n(t,function(n,t){n.apply(e,r.concat([t]))},u)};if(arguments.length>2){var r=Array.prototype.slice.call(arguments,2);return e.apply(this,r)}return e};t.applyEach=s(b),t.applyEachSeries=d(b),t.forever=function(n,t){function e(r){if(r){if(t)return t(r);throw r}n(e)}e()},"undefined"!=typeof module&&module.exports?module.exports=t:"undefined"!=typeof define&&define.amd?define([],function(){return t}):e.async=t}();var Detector={canvas:!!window.CanvasRenderingContext2D,webgl:function(){try{var n=document.createElement("canvas");return!(!window.WebGLRenderingContext||!n.getContext("webgl")&&!n.getContext("experimental-webgl"))}catch(t){return!1}}(),workers:!!window.Worker,fileapi:window.File&&window.FileReader&&window.FileList&&window.Blob,getWebGLErrorMessage:function(){var n=document.createElement("div");return n.id="webgl-error-message",n.style.fontFamily="monospace",n.style.fontSize="13px",n.style.fontWeight="normal",n.style.textAlign="center",n.style.background="#fff",n.style.color="#000",n.style.padding="1.5em",n.style.width="400px",n.style.margin="5em auto 0",this.webgl||(n.innerHTML=window.WebGLRenderingContext?["不支持webgl"].join("\n"):[""]),n},addGetWebGLMessage:function(n){var t,e,r;n=n||{},t=void 0!==n.parent?n.parent:document.body,e=void 0!==n.id?n.id:"oldie",r=Detector.getWebGLErrorMessage(),r.id=e,t.appendChild(r)}};"object"==typeof module&&(module.exports=Detector);