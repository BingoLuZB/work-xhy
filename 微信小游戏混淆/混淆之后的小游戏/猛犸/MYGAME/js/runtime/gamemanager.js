var a10_0x3176=['startTiles','restart','scores','update','addscores','restartArr','board','boardarr','push','length','floor','random','substr','fillRoundRect','toppad','num_color','beginPath','fillStyle','center','textBaseline','middle','fillText','leftpad','closePath','#c0c7cd','#ffbc6f','#db7b34','#c22e2e','#ecc400','drawGrid','down','lookdown','left','right','lookright','ctx','text','#fff','font','bold\x2024px\x20Arial','drawTile','emptyup','move','emptydown','lookleft','emptyleft','emptyright','getScores','getAddScores','innerWidth','innerHeight','rgba(238,\x20228,\x20218,\x200.35)','size'];(function(_0x4b4e2b,_0x813266){var _0x44f953=function(_0x4de6c8){while(--_0x4de6c8){_0x4b4e2b['push'](_0x4b4e2b['shift']());}};_0x44f953(++_0x813266);}(a10_0x3176,0x1a4));var a10_0x3b18=function(_0x24a52e,_0x516d93){_0x24a52e=_0x24a52e-0x0;var _0x53b59c=a10_0x3176[_0x24a52e];return _0x53b59c;};import a10_0x4d649b from'../base/sprite.js';let instance;const screenWidth=window[a10_0x3b18('0x0')];const screenHeight=window[a10_0x3b18('0x1')];const START_X=screenWidth*0.2/0x2;const START_Y=screenHeight*0.2;const GRID_CONTAINER_STYLE='#000';const GRID_CONTAINER_WIDTH=screenWidth*0.8;const GRID_CONTAINER_RADIUS=GRID_CONTAINER_WIDTH*0x1/0x4b;const GRID_CELL_STYLE=a10_0x3b18('0x2');const GRID_CELL_WIDTH=GRID_CONTAINER_WIDTH*0x1/0x5;const GRID_CELL_SPACE=GRID_CONTAINER_WIDTH*0x1/0x19;const GRID_CELL_RADIUS=GRID_CONTAINER_WIDTH*0x1/0x4b;export default class GameManager extends a10_0x4d649b{constructor(_0x798d5f,_0x32d730){super(GRID_CONTAINER_STYLE,GRID_CONTAINER_WIDTH,GRID_CONTAINER_WIDTH);if(instance){return instance;}this[a10_0x3b18('0x3')]=_0x32d730;this[a10_0x3b18('0x4')]=0x2;this['ctx']=_0x798d5f;this[a10_0x3b18('0x5')](_0x798d5f);this[a10_0x3b18('0x6')]=0x0;this['addscores']=0x0;instance=this;}[a10_0x3b18('0x7')](_0xbdb4be){}[a10_0x3b18('0x5')](_0x3194c0){this[a10_0x3b18('0x6')]=0x0;this[a10_0x3b18('0x8')]=0x0;this[a10_0x3b18('0x9')]();this['addnum'](_0x3194c0);}[a10_0x3b18('0x9')](){this[a10_0x3b18('0xa')]=new Array();for(var _0x1edfd8=0x0;_0x1edfd8<this[a10_0x3b18('0x3')];_0x1edfd8++){this[a10_0x3b18('0xa')][_0x1edfd8]=new Array();for(var _0xfd4f41=0x0;_0xfd4f41<this[a10_0x3b18('0x3')];_0xfd4f41++){this[a10_0x3b18('0xa')][_0x1edfd8][_0xfd4f41]=0x0;}}}[a10_0x3b18('0xb')](){var _0x1e6351=[];for(var _0x181c59=0x0;_0x181c59<this[a10_0x3b18('0x3')];_0x181c59++){for(var _0x3eb81f=0x0;_0x3eb81f<this[a10_0x3b18('0x3')];_0x3eb81f++){if(this[a10_0x3b18('0xa')][_0x181c59][_0x3eb81f]==0x0){_0x1e6351[a10_0x3b18('0xc')](_0x3eb81f+'-'+_0x181c59);}}}return _0x1e6351;}['addnum'](_0x323471){var _0x50e13b=this[a10_0x3b18('0xb')]();if(_0x50e13b[a10_0x3b18('0xd')]==0x0){return!![];}var _0x3e6c8c=Math[a10_0x3b18('0xe')](Math[a10_0x3b18('0xf')]()*_0x50e13b[a10_0x3b18('0xd')]);var _0x15a55c=_0x50e13b[_0x3e6c8c];var _0xf54c3f=parseInt(_0x15a55c['substr'](0x0,0x1));var _0x2c8e94=parseInt(_0x15a55c[a10_0x3b18('0x10')](0x2,0x1));var _0x537439=Math[a10_0x3b18('0xf')]()>=0.5?0x4:0x2;this[a10_0x3b18('0xa')][_0x2c8e94][_0xf54c3f]=_0x537439;this[a10_0x3b18('0x11')](_0x323471,START_X+this['leftpad'](_0xf54c3f),START_Y+this[a10_0x3b18('0x12')](_0x2c8e94),GRID_CELL_WIDTH,GRID_CELL_WIDTH,GRID_CELL_RADIUS,this[a10_0x3b18('0x13')](_0x537439));_0x323471[a10_0x3b18('0x14')]();_0x323471[a10_0x3b18('0x15')]='#fff';_0x323471['textAlign']=a10_0x3b18('0x16');_0x323471[a10_0x3b18('0x17')]=a10_0x3b18('0x18');_0x323471['font']='bold\x2024px\x20Arial';_0x323471[a10_0x3b18('0x19')](_0x537439,START_X+this[a10_0x3b18('0x1a')](_0xf54c3f)+GRID_CELL_WIDTH/0x2,START_Y+this[a10_0x3b18('0x12')](_0x2c8e94)+GRID_CELL_WIDTH/0x2);_0x323471[a10_0x3b18('0x1b')]();return![];}['num_color'](_0x2073f4){var _0x46eba1=a10_0x3b18('0x2');switch(_0x2073f4){case 0x0:_0x46eba1=a10_0x3b18('0x1c');break;case 0x2:_0x46eba1='#eee4da';break;case 0x4:_0x46eba1='#fde9c6';break;case 0x8:_0x46eba1=a10_0x3b18('0x1d');break;case 0x10:_0x46eba1=a10_0x3b18('0x1e');break;case 0x20:_0x46eba1='#db5a34';break;case 0x40:_0x46eba1='#d14c2d';break;case 0x80:_0x46eba1=a10_0x3b18('0x1f');break;case 0x100:_0x46eba1=a10_0x3b18('0x20');break;case 0x200:_0x46eba1=a10_0x3b18('0x20');break;case 0x400:_0x46eba1=a10_0x3b18('0x20');break;case 0x800:_0x46eba1=a10_0x3b18('0x20');break;case 0x1000:_0x46eba1=a10_0x3b18('0x20');break;default:_0x46eba1=a10_0x3b18('0x20');break;}return _0x46eba1;}[a10_0x3b18('0x1a')](_0x56e057){return(_0x56e057+0x1)*GRID_CELL_SPACE+GRID_CELL_WIDTH*_0x56e057;}['toppad'](_0x26f498){return(_0x26f498+0x1)*GRID_CELL_SPACE+GRID_CELL_WIDTH*_0x26f498;}['up'](){for(var _0x1aab27=0x1;_0x1aab27<this[a10_0x3b18('0x3')];_0x1aab27++){for(var _0x5bd452=0x0;_0x5bd452<this['size'];_0x5bd452++){if(this[a10_0x3b18('0xa')][_0x1aab27][_0x5bd452]!=0x0){this['lookup'](_0x5bd452,_0x1aab27);}}}this[a10_0x3b18('0x21')]();}[a10_0x3b18('0x22')](){for(var _0x3c1564=0x2;_0x3c1564>=0x0;_0x3c1564--){for(var _0x2478b5=0x0;_0x2478b5<this[a10_0x3b18('0x3')];_0x2478b5++){if(this['board'][_0x3c1564][_0x2478b5]!=0x0){this[a10_0x3b18('0x23')](_0x2478b5,_0x3c1564);}}}this[a10_0x3b18('0x21')]();}[a10_0x3b18('0x24')](){for(var _0x247793=0x0;_0x247793<this['size'];_0x247793++){for(var _0x2ed10e=0x1;_0x2ed10e<this[a10_0x3b18('0x3')];_0x2ed10e++){if(this[a10_0x3b18('0xa')][_0x247793][_0x2ed10e]!=0x0){this['lookleft'](_0x2ed10e,_0x247793);}}}this[a10_0x3b18('0x21')]();}[a10_0x3b18('0x25')](){for(var _0x4c0925=0x0;_0x4c0925<this[a10_0x3b18('0x3')];_0x4c0925++){for(var _0x2d8bd0=0x2;_0x2d8bd0>=0x0;_0x2d8bd0--){if(this[a10_0x3b18('0xa')][_0x4c0925][_0x2d8bd0]!=0x0){this[a10_0x3b18('0x26')](_0x2d8bd0,_0x4c0925);}}}this[a10_0x3b18('0x21')]();}['move'](_0x2e3f52,_0x5a59fc,_0x29f56b,_0x382fda,_0x2a5909){this[a10_0x3b18('0x11')](this[a10_0x3b18('0x27')],START_X+this[a10_0x3b18('0x1a')](_0x382fda),START_Y+this['toppad'](_0x2a5909),GRID_CELL_WIDTH,GRID_CELL_WIDTH,GRID_CELL_RADIUS,this[a10_0x3b18('0x13')](_0x29f56b));if(_0x29f56b!=0x0){this[a10_0x3b18('0x28')](_0x382fda,_0x2a5909,_0x29f56b);}this[a10_0x3b18('0xa')][_0x2a5909][_0x382fda]=_0x29f56b;this['fillRoundRect'](this[a10_0x3b18('0x27')],START_X+this[a10_0x3b18('0x1a')](_0x2e3f52),START_Y+this[a10_0x3b18('0x12')](_0x5a59fc),GRID_CELL_WIDTH,GRID_CELL_WIDTH,GRID_CELL_RADIUS,this[a10_0x3b18('0x13')](0x0));this[a10_0x3b18('0xa')][_0x5a59fc][_0x2e3f52]=0x0;}[a10_0x3b18('0x28')](_0x56e5ee,_0xa183b8,_0x574151){this[a10_0x3b18('0x27')][a10_0x3b18('0x14')]();this[a10_0x3b18('0x27')]['fillStyle']=a10_0x3b18('0x29');this['ctx']['textAlign']=a10_0x3b18('0x16');this[a10_0x3b18('0x27')][a10_0x3b18('0x17')]=a10_0x3b18('0x18');this['ctx'][a10_0x3b18('0x2a')]=a10_0x3b18('0x2b');this[a10_0x3b18('0x27')][a10_0x3b18('0x19')](_0x574151,START_X+this['leftpad'](_0x56e5ee)+this['w']/0x2,START_Y+this['toppad'](_0xa183b8)+this['w']/0x2);this[a10_0x3b18('0x27')][a10_0x3b18('0x1b')]();}[a10_0x3b18('0x21')](){for(var _0xddedd2=0x0;_0xddedd2<this[a10_0x3b18('0x3')];_0xddedd2++){for(var _0x3dcaa3=0x0;_0x3dcaa3<this[a10_0x3b18('0x3')];_0x3dcaa3++){this['drawTile'](_0x3dcaa3,_0xddedd2,this['board'][_0xddedd2][_0x3dcaa3]);}}}[a10_0x3b18('0x2c')](_0x2e810d,_0x3f7402,_0x4290c1){this[a10_0x3b18('0x11')](this[a10_0x3b18('0x27')],START_X+this[a10_0x3b18('0x1a')](_0x2e810d),START_Y+this[a10_0x3b18('0x12')](_0x3f7402),GRID_CELL_WIDTH,GRID_CELL_WIDTH,GRID_CELL_RADIUS,this[a10_0x3b18('0x13')](_0x4290c1));if(_0x4290c1==0x0){return;}this['ctx']['beginPath']();this[a10_0x3b18('0x27')][a10_0x3b18('0x15')]='#fff';this[a10_0x3b18('0x27')]['textAlign']=a10_0x3b18('0x16');this[a10_0x3b18('0x27')][a10_0x3b18('0x17')]='middle';this[a10_0x3b18('0x27')][a10_0x3b18('0x2a')]=a10_0x3b18('0x2b');this[a10_0x3b18('0x27')][a10_0x3b18('0x19')](_0x4290c1,START_X+this['leftpad'](_0x2e810d)+GRID_CELL_WIDTH/0x2,START_Y+this[a10_0x3b18('0x12')](_0x3f7402)+GRID_CELL_WIDTH/0x2);this[a10_0x3b18('0x27')][a10_0x3b18('0x1b')]();}['lookup'](_0x2ce490,_0x1e433e){for(var _0x267f60=0x0;_0x267f60<_0x1e433e;_0x267f60++){if(this[a10_0x3b18('0xa')][_0x267f60][_0x2ce490]==0x0){if(this[a10_0x3b18('0x2d')](_0x2ce490,_0x267f60,_0x1e433e)){this[a10_0x3b18('0x2e')](_0x2ce490,_0x1e433e,this[a10_0x3b18('0xa')][_0x1e433e][_0x2ce490],_0x2ce490,_0x267f60);return;}}else if(this[a10_0x3b18('0xa')][_0x267f60][_0x2ce490]==this[a10_0x3b18('0xa')][_0x1e433e][_0x2ce490]){if(this[a10_0x3b18('0x2d')](_0x2ce490,_0x267f60,_0x1e433e)){this[a10_0x3b18('0x8')]+=0x2*this[a10_0x3b18('0xa')][_0x1e433e][_0x2ce490];this[a10_0x3b18('0x2e')](_0x2ce490,_0x1e433e,0x2*this[a10_0x3b18('0xa')][_0x1e433e][_0x2ce490],_0x2ce490,_0x267f60);this[a10_0x3b18('0x6')]=this[a10_0x3b18('0x8')];}}}}[a10_0x3b18('0x23')](_0x4ec1ec,_0x34f37a){for(var _0x469ab6=0x3;_0x469ab6>_0x34f37a;_0x469ab6--){if(this[a10_0x3b18('0xa')][_0x469ab6][_0x4ec1ec]==0x0){if(this[a10_0x3b18('0x2f')](_0x4ec1ec,_0x469ab6,_0x34f37a)){this[a10_0x3b18('0x2e')](_0x4ec1ec,_0x34f37a,this['board'][_0x34f37a][_0x4ec1ec],_0x4ec1ec,_0x469ab6);return;}}else if(this[a10_0x3b18('0xa')][_0x469ab6][_0x4ec1ec]==this[a10_0x3b18('0xa')][_0x34f37a][_0x4ec1ec]){if(this[a10_0x3b18('0x2f')](_0x4ec1ec,_0x469ab6,_0x34f37a)){this['addscores']+=0x2*this[a10_0x3b18('0xa')][_0x34f37a][_0x4ec1ec];this[a10_0x3b18('0x2e')](_0x4ec1ec,_0x34f37a,0x2*this['board'][_0x34f37a][_0x4ec1ec],_0x4ec1ec,_0x469ab6);this[a10_0x3b18('0x6')]=this['addscores'];}}}}[a10_0x3b18('0x30')](_0x4d236c,_0x2a7866){for(var _0x49ba4f=0x0;_0x49ba4f<_0x4d236c;_0x49ba4f++){if(this['board'][_0x2a7866][_0x49ba4f]==0x0){if(this[a10_0x3b18('0x31')](_0x49ba4f,_0x2a7866,_0x4d236c)){this['move'](_0x4d236c,_0x2a7866,this[a10_0x3b18('0xa')][_0x2a7866][_0x4d236c],_0x49ba4f,_0x2a7866);return;}}else if(this[a10_0x3b18('0xa')][_0x2a7866][_0x49ba4f]==this[a10_0x3b18('0xa')][_0x2a7866][_0x4d236c]){if(this[a10_0x3b18('0x31')](_0x49ba4f,_0x2a7866,_0x4d236c)){this[a10_0x3b18('0x8')]+=0x2*this['board'][_0x2a7866][_0x4d236c];this[a10_0x3b18('0x2e')](_0x4d236c,_0x2a7866,0x2*this[a10_0x3b18('0xa')][_0x2a7866][_0x4d236c],_0x49ba4f,_0x2a7866);this['scores']=this[a10_0x3b18('0x8')];}}}}[a10_0x3b18('0x26')](_0x2c11af,_0x2229ec){for(var _0xae40b3=0x3;_0xae40b3>_0x2c11af;_0xae40b3--){if(this[a10_0x3b18('0xa')][_0x2229ec][_0xae40b3]==0x0){if(this[a10_0x3b18('0x32')](_0xae40b3,_0x2229ec,_0x2c11af)){this[a10_0x3b18('0x2e')](_0x2c11af,_0x2229ec,this['board'][_0x2229ec][_0x2c11af],_0xae40b3,_0x2229ec);return;}}else if(this[a10_0x3b18('0xa')][_0x2229ec][_0xae40b3]==this[a10_0x3b18('0xa')][_0x2229ec][_0x2c11af]){if(this['emptyright'](_0xae40b3,_0x2229ec,_0x2c11af)){this[a10_0x3b18('0x8')]+=0x2*this[a10_0x3b18('0xa')][_0x2229ec][_0x2c11af];this[a10_0x3b18('0x2e')](_0x2c11af,_0x2229ec,0x2*this[a10_0x3b18('0xa')][_0x2229ec][_0x2c11af],_0xae40b3,_0x2229ec);this[a10_0x3b18('0x6')]=this[a10_0x3b18('0x8')];}}}}[a10_0x3b18('0x2d')](_0x4619c0,_0x3f5add,_0xcbca08){if(_0x3f5add+0x1<_0xcbca08){for(var _0x4ddea3=_0x3f5add+0x1;_0x4ddea3<_0xcbca08;_0x4ddea3++){if(this[a10_0x3b18('0xa')][_0x4ddea3][_0x4619c0]!=0x0){return![];}return!![];};}else{return!![];}}[a10_0x3b18('0x2f')](_0x4ea149,_0x536bae,_0x1cd864){if(_0x536bae>_0x1cd864+0x1){for(var _0x9f5e2b=_0x1cd864+0x1;_0x9f5e2b<_0x536bae;_0x9f5e2b++){if(this[a10_0x3b18('0xa')][_0x9f5e2b][_0x4ea149]!=0x0){return![];}return!![];};}else{return!![];}}[a10_0x3b18('0x31')](_0x4b1e42,_0x308e5e,_0x301c8a){if(_0x4b1e42+0x1<_0x301c8a){for(var _0x215b1b=_0x4b1e42+0x1;_0x215b1b<_0x301c8a;_0x215b1b++){if(this[a10_0x3b18('0xa')][_0x308e5e][_0x215b1b]!=0x0){return![];}return!![];};}else{return!![];}}[a10_0x3b18('0x32')](_0x5a5809,_0x218766,_0x2f9f02){if(_0x5a5809>_0x2f9f02+0x1){for(var _0x13edd0=_0x2f9f02+0x1;_0x13edd0<_0x5a5809;_0x13edd0++){if(this[a10_0x3b18('0xa')][_0x218766][_0x13edd0]!=0x0){return![];}return!![];};}else{return!![];}}[a10_0x3b18('0x33')](){return this[a10_0x3b18('0x6')];}[a10_0x3b18('0x34')](){return this[a10_0x3b18('0x8')];}}