var a3_0x4918=['changedTouches','abs','save','left','addnum','restore','log','down','showModal','温馨提示','下次再战','再来一局','confirm','用户点击确定','用户点击fail','用户点击complete','table','board','innerWidth','innerHeight','restart','initEvent','update','logo','scores','gamemanager','addEventListener','preventDefault','touches','clientY','touchmove','touchend','clientX'];(function(_0x21facf,_0x41de0f){var _0x4f5f49=function(_0x4dbdc9){while(--_0x4dbdc9){_0x21facf['push'](_0x21facf['shift']());}};_0x4f5f49(++_0x41de0f);}(a3_0x4918,0x13b));var a3_0x5ccc=function(_0x53d8e7,_0x1f42fd){_0x53d8e7=_0x53d8e7-0x0;var _0x15ebaa=a3_0x4918[_0x53d8e7];return _0x15ebaa;};import a3_0x38e2ec from'./runtime/background.js';import a3_0x1f2670 from'./runtime/gamemanager.js';import a3_0x9782a3 from'./runtime/logo.js';import a3_0x5ae2cf from'./runtime/scores.js';let ctx=canvas['getContext']('2d');const width=window[a3_0x5ccc('0x0')];const height=window[a3_0x5ccc('0x1')];const ratio=0x1;const W=width*0.8;const TILE_SIZE=0x4;export default class Main{constructor(){this['aniId']=0x0;this[a3_0x5ccc('0x2')]();this[a3_0x5ccc('0x3')]();}[a3_0x5ccc('0x2')](){if(this['bg']==null){this['bg']=new a3_0x38e2ec(ctx);}else{this['bg'][a3_0x5ccc('0x4')](ctx);}if(this[a3_0x5ccc('0x5')]==null){this['logo']=new a3_0x9782a3(ctx);}else{this[a3_0x5ccc('0x5')][a3_0x5ccc('0x4')](ctx);}if(this[a3_0x5ccc('0x6')]==null){this['scores']=new a3_0x5ae2cf(ctx);}else{this[a3_0x5ccc('0x6')]['update'](0x0);}if(this[a3_0x5ccc('0x7')]==null){this['gamemanager']=new a3_0x1f2670(ctx,TILE_SIZE);}else{this['gamemanager'][a3_0x5ccc('0x2')](ctx);}}[a3_0x5ccc('0x4')](){this['bg'][a3_0x5ccc('0x4')](ctx);this[a3_0x5ccc('0x7')][a3_0x5ccc('0x4')](ctx);}['initEvent'](){canvas[a3_0x5ccc('0x8')]('touchstart',e=>{e[a3_0x5ccc('0x9')]();this['x0']=e[a3_0x5ccc('0xa')][0x0]['clientX']/ratio;this['y0']=e[a3_0x5ccc('0xa')][0x0][a3_0x5ccc('0xb')]/ratio;return![];});canvas[a3_0x5ccc('0x8')](a3_0x5ccc('0xc'),e=>{e['preventDefault']();});canvas['addEventListener'](a3_0x5ccc('0xd'),e=>{e[a3_0x5ccc('0x9')]();var X=e['changedTouches'][0x0][a3_0x5ccc('0xe')]/ratio;var Y=e[a3_0x5ccc('0xf')][0x0][a3_0x5ccc('0xb')]/ratio;var addX=X-this['x0'];var addY=Y-this['y0'];var percent=Math[a3_0x5ccc('0x10')](addX)/Math[a3_0x5ccc('0x10')](addY)>=0x1?!![]:![];if(Math['abs'](addX)<W/0x32&&Math[a3_0x5ccc('0x10')](addY)<W/0x32){return;};let isGameTerminated=!![];if(-addX>W/0x32&&percent){this[a3_0x5ccc('0x4')]();ctx[a3_0x5ccc('0x11')]();this['gamemanager'][a3_0x5ccc('0x12')]();isGameTerminated=this[a3_0x5ccc('0x7')][a3_0x5ccc('0x13')](ctx);ctx[a3_0x5ccc('0x14')]();console[a3_0x5ccc('0x15')](addX,addY,'向左');}else if(addX>W/0x32&&percent){this[a3_0x5ccc('0x4')]();ctx[a3_0x5ccc('0x11')]();this[a3_0x5ccc('0x7')]['right']();isGameTerminated=this['gamemanager'][a3_0x5ccc('0x13')](ctx);ctx[a3_0x5ccc('0x14')]();console[a3_0x5ccc('0x15')](addX,addY,'向右');}else if(-addY>W/0x32&&!percent){this[a3_0x5ccc('0x4')]();ctx[a3_0x5ccc('0x11')]();this[a3_0x5ccc('0x7')]['up']();isGameTerminated=this[a3_0x5ccc('0x7')]['addnum'](ctx);ctx[a3_0x5ccc('0x14')]();console[a3_0x5ccc('0x15')](addX,addY,'向上');}else if(addY>W/0x32&&!percent){this[a3_0x5ccc('0x4')]();ctx[a3_0x5ccc('0x11')]();this[a3_0x5ccc('0x7')][a3_0x5ccc('0x16')]();isGameTerminated=this['gamemanager'][a3_0x5ccc('0x13')](ctx);ctx[a3_0x5ccc('0x14')]();console[a3_0x5ccc('0x15')](addX,addY,'向下');}this[a3_0x5ccc('0x5')][a3_0x5ccc('0x4')](ctx);this[a3_0x5ccc('0x6')][a3_0x5ccc('0x4')](this[a3_0x5ccc('0x7')]['getScores']());if(isGameTerminated){wx[a3_0x5ccc('0x17')]({'title':a3_0x5ccc('0x18'),'content':'game\x20over!','showCancel':!![],'cancelText':a3_0x5ccc('0x19'),'confirmText':a3_0x5ccc('0x1a'),'success':function(res){if(res[a3_0x5ccc('0x1b')]){console[a3_0x5ccc('0x15')](a3_0x5ccc('0x1c'));this[a3_0x5ccc('0x2')]();}else if(res['cancel']){console['log']('用户点击取消');}}['bind'](this),'fail':function(res){console[a3_0x5ccc('0x15')](a3_0x5ccc('0x1d'));},'complete':function(res){console[a3_0x5ccc('0x15')](a3_0x5ccc('0x1e'));}});}console[a3_0x5ccc('0x1f')](this[a3_0x5ccc('0x7')][a3_0x5ccc('0x20')]);});}}