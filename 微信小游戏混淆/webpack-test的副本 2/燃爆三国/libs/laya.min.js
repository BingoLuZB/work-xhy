var Laya=window.Laya=function(w,zc){var l={__internals:[],__packages:{},__classmap:{Object:Object,Function:Function,Array:Array,String:String},__sysClass:{object:"Object",array:"Array",string:"String",dictionary:"Dictionary"},__propun:{writable:!0,enumerable:!1,configurable:!0},__presubstr:String.prototype.substr,__substr:function(u,n){return 1==arguments.length?l.__presubstr.call(this,u):l.__presubstr.call(this,u,0<n?n:this.length+n)},__init:function(l){l.forEach(function(l){l.__init$&&l.__init$()})},__isClass:function(l){return l&&(l.__isclass||l==Object||l==String||l==Array)},__newvec:function(l,n){var g=[];g.length=l;for(var u=0;u<l;u++)g[u]=n;return g},__extend:function(u,n){function g(){l.un(this,"constructor",u)}for(var w in n)if(n.hasOwnProperty(w)){var Z=Object.getOwnPropertyDescriptor(n,w),ba=Z.get,na=Z.set;ba||na?ba&&na?Object.defineProperty(u,w,Z):(ba&&Object.defineProperty(u,w,ba),na&&Object.defineProperty(u,w,na)):u[w]=n[w]}g.prototype=n.prototype;u.prototype=new g;l.un(u.prototype,"__imps",l.__copy({},n.prototype.__imps))},__copy:function(l,n){if(!n)return null;l=l||{};for(var g in n)l[g]=n[g];return l},__package:function(u,n){if(!l.__packages[u]){l.__packages[u]=!0;var g=w;u=u.split(".");if(1<u.length)for(var ca=0,Z=u.length-1;ca<Z;ca++)var ba=g[u[ca]],g=ba?ba:g[u[ca]]={};g[u[u.length-1]]||(g[u[u.length-1]]=n||{})}},__hasOwnProperty:function(l,n){function g(l,n){if(Object.hasOwnProperty.call(n.prototype,l))return!0;n=n.prototype.__super;return null==n?null:g(l,n)}n=n||this;return Object.hasOwnProperty.call(n,l)||g(l,n.__class)},__typeof:function(l,n){if(!l||!n)return!1;if(n===String)return"string"===typeof l;if(n===Number)return"number"===typeof l;if(n.__interface__)n=n.__interface__;else if("string"!=typeof n)return l instanceof n;return l.__imps&&l.__imps[n]||l.__class==n},__as:function(l,n){return this.__typeof(l,n)?l:null},__int:function(l){return l?parseInt(l):0},interface:function(u,n){l.__package(u,{});var g=l.__internals,ca=g[u]=g[u]||{self:u};if(n){var Z=n.split(",");ca.extend=[];for(n=0;n<Z.length;n++){var ba=Z[n];g[ba]=g[ba]||{self:ba};ca.extend.push(g[ba])}}g=w;ca=u.split(".");for(n=0;n<ca.length-1;n++)g=g[ca[n]];g[ca[ca.length-1]]={__interface__:u}},class:function(u,n,g,ca){g&&l.__extend(u,g);if(n)if(l.__package(n,u),l.__classmap[n]=u,0<n.indexOf(".")){if(0==n.indexOf("laya.")){var Z=n.split(".");ca=ca||Z[Z.length-1];l[ca]&&console.log("Warning!,this class["+ca+"] already exist:",l[ca]);l[ca]=u}}else"Main"==n?w.Main=u:(l[n]&&console.log("Error!,this class["+n+"] already exist:",l[n]),l[n]=u);ca=l.un;Z=u.prototype;ca(Z,"hasOwnProperty",l.__hasOwnProperty);ca(Z,"__class",u);ca(Z,"__super",g);ca(Z,"__className",n);ca(u,"__super",g);ca(u,"__className",n);ca(u,"__isclass",!0);ca(u,"super",function(g){this.__super.call(g)})},imps:function(u,n){function g(n){var u;if(u=l.__internals[n])if(w[n]=!0,n=u.extend)for(u=0;u<n.length;u++)g(n[u].self)}if(!n)return null;var w=u.__imps||l.un(u,"__imps",{}),Z;for(Z in n)g(Z)},superSet:function(l,n,g,w){(l=l.prototype["_$set_"+g])&&l.call(n,w)},superGet:function(l,n,g){return(l=l.prototype["_$get_"+g])?l.call(n):null},getset:function(u,n,g,w,Z){u?(w&&(n["_$GET_"+g]=w),Z&&(n["_$SET_"+g]=Z)):(w&&l.un(n,"_$get_"+g,w),Z&&l.un(n,"_$set_"+g,Z));w&&Z?Object.defineProperty(n,g,{get:w,set:Z,enumerable:!1,configurable:!0}):(w&&Object.defineProperty(n,g,{get:w,enumerable:!1,configurable:!0}),Z&&Object.defineProperty(n,g,{set:Z,enumerable:!1,configurable:!0}))},static:function(l,n){for(var g=0,u=n.length;g<u;g+=2)"length"==n[g]?l.length=n[g+1].call(l):function(){var u=n[g],w=n[g+1];Object.defineProperty(l,u,{get:function(){delete this[u];return this[u]=w.call(this)},set:function(g){delete this[u];this[u]=g},enumerable:!0,configurable:!0})}()},un:function(u,n,g){g||(g=u[n]);l.__propun.value=g;Object.defineProperty(u,n,l.__propun);return g},uns:function(u,n){n.forEach(function(g){l.un(u,g)})}};w.console=w.console||{log:function(){}};w.trace=w.console.log;Error.prototype.throwError=function(){throw arguments;};Object.defineProperty(Array.prototype,"fixed",{enumerable:!1});return l}(window,document);
(function(w,zc,l){var u=l.static,n=l.class,g=l.getset,ca=l.__newvec;l.interface("laya.ui.IItem");l.interface("laya.ui.ISelect");l.interface("laya.runtime.IMarket");l.interface("laya.filters.IFilter");l.interface("laya.resource.IDestroy");l.interface("laya.html.utils.ILayout");l.interface("laya.webgl.submit.ISubmit");l.interface("laya.runtime.ICPlatformClass");l.interface("laya.resource.ICreateResource");l.interface("laya.webgl.canvas.save.ISaveData");(function(){g(1,l,"alertGlobalError",null,function(a){var c=0;q.window.onerror=a?function(b,d,a,h,f){5>c++&&f&&alert("\u51fa\u9519\u5566\uff0c\u8bf7\u628a\u6b64\u4fe1\u606f\u622a\u56fe\u7ed9\u7814\u53d1\u5546\n"+b+"\n"+f.stack)}:null});l.init=function(a,c,b){for(var d=[],e=2,h=arguments.length;e<h;e++)d.push(arguments[e]);if(!l._isinit){l._isinit=!0;ArrayBuffer.prototype.slice||(ArrayBuffer.prototype.slice=l._arrayBufferSlice);q.__init__();r.isConchApp||Ca.__init__();l.systemTimer=new Qa(!1);l.startTimer=new Qa(!1);l.physicsTimer=new Qa(!1);l.updateTimer=new Qa(!1);l.lateTimer=new Qa(!1);l.timer=new Qa(!1);l.loader=new La;Xa.__init__();for(var h=!1,e=0,f=d.length;e<f;e++)d[e]&&d[e].enable&&(d[e].enable(),"WebGL"===typeof d[e]&&(h=!0));r.isConchApp&&(h||laya.webgl.WebGL.enable(),fa.enableNative());Ac.beginCheck();l._currentStage=l.stage=new Bc;D.rootPath=D._basePath=l._getUrlPath();l.render=new r(0,0);l.stage.size(a,c);l.stage.bgColor="aabbcc";w.stage=l.stage;Da.__init__();od.__init__();Ra.instance.__init__(l.stage,r.canvas);ia.__init__();X.autoStopMusic=!0;return r.canvas}};l._getUrlPath=function(){var a=q.window.location,c=a.pathname,c=":"==c.charAt(2)?c.substring(1):c;return D.getPath("file:"==a.protocol?c:a.protocol+"//"+a.host+a.pathname)};l._arrayBufferSlice=function(a,c){a=new Uint8Array(this,a,c-a);c=new Uint8Array(a.length);c.set(a);return c.buffer};l._runScript=function(a){return q.window[l._evcode](a)};l.enableDebugPanel=function(a){void 0===a&&(a="libs/laya.debugtool.js");if(l.DebugPanel)l.DebugPanel.enable();else{var c=q.createElement("script");c.onload=function(){l.DebugPanel.enable()};c.src=a;q.document.body.appendChild(c)}};l.errorCallBack=null;l.stage=null;l.systemTimer=null;l.startTimer=null;l.physicsTimer=null;l.updateTimer=null;l.lateTimer=null;l.timer=null;l.loader=null;l.version="2.0.2beta";l.render=null;l._currentStage=null;l._isinit=!1;l.isWXOpenDataContext=!1;l.isWXPosMsg=!1;u(l,["conchMarket",function(){return this.conchMarket=w.conch?conchMarket:null},"PlatformClass",function(){return this.PlatformClass=w.PlatformClass},"_evcode",function(){return this._evcode="eval"}]);return l})();var Z=function(){function a(){}n(a,"laya.renders.LayaGLQuickRunner");a.__init__=function(){a.map[515]=a.alpha_transform_drawLayaGL;a.map[513]=a.alpha_drawLayaGL;a.map[514]=a.transform_drawLayaGL;a.map[8194]=a.transform_drawNodes;a.map[259]=a.alpha_transform_drawTexture;a.map[257]=a.alpha_drawTexture;a.map[258]=a.transform_drawTexture;a.map[8704]=a.drawLayaGL_drawNodes};a.transform_drawTexture=function(c,b,d,e){var h=c.texture;b.saveTransform(a.curMat);b.transformByMatrix(c.transform,d,e);b.drawTexture(h,-c.pivotX,-c.pivotY,c._width||h.width,c._height||h.height);b.restoreTransform(a.curMat)};a.alpha_drawTexture=function(a,b,d,e){var c=a._style,f,k=a.texture;if(.01<(f=c.alpha)||a._needRepaint()){var m=b.globalAlpha;b.globalAlpha*=f;b.drawTexture(k,d-c.pivotX+k.offsetX,e-c.pivotY+k.offsetY,a._width||k.width,a._height||k.height);b.globalAlpha=m}};a.alpha_transform_drawTexture=function(c,b,d,e){var h=c._style,f,k=c.texture;if(.01<(f=h.alpha)||c._needRepaint()){var m=b.globalAlpha;b.globalAlpha*=f;b.saveTransform(a.curMat);b.transformByMatrix(c.transform,d,e);b.drawTexture(k,-h.pivotX+k.offsetX,-h.pivotY+k.offsetY,c._width||k.width,c._height||k.height);b.restoreTransform(a.curMat);b.globalAlpha=m}};a.alpha_transform_drawLayaGL=function(c,b,d,e){var h=c._style,f;if(.01<(f=h.alpha)||c._needRepaint()){var k=b.globalAlpha;b.globalAlpha*=f;b.saveTransform(a.curMat);b.transformByMatrix(c.transform,d,e);c._graphics&&c._graphics._render(c,b,-h.pivotX,-h.pivotY);b.restoreTransform(a.curMat);b.globalAlpha=k}};a.alpha_drawLayaGL=function(a,b,d,e){var c=a._style,f;if(.01<(f=c.alpha)||a._needRepaint()){var k=b.globalAlpha;b.globalAlpha*=f;a._graphics&&a._graphics._render(a,b,d-c.pivotX,e-c.pivotY);b.globalAlpha=k}};a.transform_drawLayaGL=function(c,b,d,e){var h=c._style;b.saveTransform(a.curMat);b.transformByMatrix(c.transform,d,e);c._graphics&&c._graphics._render(c,b,-h.pivotX,-h.pivotY);b.restoreTransform(a.curMat)};a.transform_drawNodes=function(c,b,d,e){var h=c._getBit(256)&&b.drawCallOptimize(!0),f=c._style;b.saveTransform(a.curMat);b.transformByMatrix(c.transform,d,e);d=-f.pivotX;e=-f.pivotY;c=c._children;var k=c.length,m;if(f.viewport)for(var p=f.viewport,f=p.x,t=p.y,z=p.right,p=p.bottom,g=NaN,l=NaN,n=0;n<k;++n)(m=c[n])._visible&&(g=m._x)<z&&g+m.width>f&&(l=m._y)<p&&l+m.height>t&&m.render(b,d,e);else for(var n=0;n<k;++n)(m=c[n])._visible&&m.render(b,d,e);b.restoreTransform(a.curMat);h&&b.drawCallOptimize(!1)};a.drawLayaGL_drawNodes=function(a,b,d,e){var c=a._getBit(256)&&b.drawCallOptimize(!0),f=a._style;d-=f.pivotX;e-=f.pivotY;a._graphics&&a._graphics._render(a,b,d,e);a=a._children;var k=a.length,m;if(f.viewport)for(var p=f.viewport,f=p.x,t=p.y,z=p.right,p=p.bottom,g=NaN,l=NaN,n=0;n<k;++n)(m=a[n])._visible&&(g=m._x)<z&&g+m.width>f&&(l=m._y)<p&&l+m.height>t&&m.render(b,d,e);else for(var n=0;n<k;++n)(m=a[n])._visible&&m.render(b,d,e);c&&b.drawCallOptimize(!1)};a.map={};u(a,["curMat",function(){return this.curMat=new C}]);return a}(),ba=function(){function a(c){this.arrColor=[];if(null==c)this.strColor="#00000000",this.numColor=0,this.arrColor=[0,0,0,0];else{var b,d;if("string"==typeof c)if(0<=c.indexOf("rgba(")||0<=c.indexOf("rgb(")){b=c;var e;d=b.indexOf("(");e=b.indexOf(")");b=b.substring(d+1,e);this.arrColor=b.split(",");d=this.arrColor.length;for(b=0;b<d;b++)this.arrColor[b]=parseFloat(this.arrColor[b]),3>b&&(this.arrColor[b]=Math.round(this.arrColor[b]));b=4==this.arrColor.length?256*(256*(256*this.arrColor[0]+this.arrColor[1])+this.arrColor[2])+Math.round(255*this.arrColor[3]):256*(256*this.arrColor[0]+this.arrColor[1])+this.arrColor[2];this.strColor=c}else{this.strColor=c;"#"===c.charAt(0)&&(c=c.substr(1));d=c.length;if(3===d||4===d){e="";for(b=0;b<d;b++)e+=c[b]+c[b];c=e}b=parseInt(c,16)}else b=c,this.strColor=U.toHexColor(b);0<=this.strColor.indexOf("rgba")||9===this.strColor.length?(this.arrColor=[((4278190080&b)>>>24)/255,((16711680&b)>>16)/255,((65280&b)>>8)/255,(255&b)/255],this.numColor=(4278190080&b)>>>24|(b&16711680)>>8|(b&65280)<<8|(b&255)<<24):(this.arrColor=[((16711680&b)>>16)/255,((65280&b)>>8)/255,(255&b)/255,1],this.numColor=4278190080|(b&16711680)>>16|b&65280|(b&255)<<16);this.arrColor.__id=++a._COLODID}}n(a,"laya.utils.ColorUtils");a._initDefault=function(){a._DEFAULT={};for(var c in a._COLOR_MAP)a._SAVE[c]=a._DEFAULT[c]=new a(a._COLOR_MAP[c]);return a._DEFAULT};a._initSaveMap=function(){a._SAVE_SIZE=0;a._SAVE={};for(var c in a._DEFAULT)a._SAVE[c]=a._DEFAULT[c]};a.create=function(c){var b=c+"",d=a._SAVE[b];if(null!=d)return d;1E3>a._SAVE_SIZE&&a._initSaveMap();return a._SAVE[b]=new a(c)};a._SAVE={};a._SAVE_SIZE=0;a._COLOR_MAP={purple:"#800080",orange:"#ffa500",white:"#FFFFFF",red:"#FF0000",green:"#00FF00",blue:"#0000FF",black:"#000000",yellow:"#FFFF00",gray:"#808080"};a._DEFAULT=a._initDefault();a._COLODID=1;return a}(),na=function(){function a(){}n(a,"laya.webgl.canvas.save.SaveBase");var c=a.prototype;l.imps(c,{"laya.webgl.canvas.save.ISaveData":!0});c.isSaveMark=function(){return!1};c.restore=function(b){this._dataObj[this._valueName]=this._value;a.POOL[a.POOL._length++]=this;this._newSubmit&&(b._curSubmit=ea.RENDERBASE)};a._createArray=function(){var b=[];b._length=0;return b};a._init=function(){var b=a._namemap={};b[1]="ALPHA";b[2]="fillStyle";b[8]="font";b[256]="lineWidth";b[512]="strokeStyle";b[8192]="_mergeID";b[1024]=b[2048]=b[4096]=[];b[16384]="textBaseline";b[32768]="textAlign";b[65536]="_nBlendType";b[1048576]="shader";b[2097152]="filters";b[8388608]="_colorFiler";return b};a.save=function(b,d,c,h){if((b._saveMark._saveuse&d)!==d){b._saveMark._saveuse|=d;var e=a.POOL,e=0<e._length?e[--e._length]:new a;e._value=c[e._valueName=a._namemap[d]];e._dataObj=c;e._newSubmit=h;b=b._save;b[b._length++]=e}};a.POOL=laya.webgl.canvas.save.SaveBase._createArray();a._namemap=a._init();return a}(),ka=function(){function a(){this._events=null}var c;n(a,"laya.events.EventDispatcher");var b=a.prototype;b.hasListener=function(d){return!(!this._events||!this._events[d])};b.event=function(d,b){if(!this._events||!this._events[d])return!1;var a=this._events[d];if(a.run)a.once&&delete this._events[d],null!=b?a.runWith(b):a.run();else{for(var c=0,e=a.length;c<e;c++){var m=a[c];m&&(null!=b?m.runWith(b):m.run());if(!m||m.once)a.splice(c,1),c--,e--}0===a.length&&this._events&&delete this._events[d]}return!0};b.on=function(d,b,a,c){return this._createListener(d,b,a,c,!1)};b.once=function(d,b,a,c){return this._createListener(d,b,a,c,!0)};b._createListener=function(d,b,a,f,k,m){void 0===m&&(m=!0);m&&this.off(d,b,a,k);b=c.create(b||this,a,f,k);this._events||(this._events={});a=this._events;a[d]?a[d].run?a[d]=[a[d],b]:a[d].push(b):a[d]=b;return this};b.off=function(d,b,a,c){void 0===c&&(c=!1);if(!this._events||!this._events[d])return this;var e=this._events[d];if(null!=e)if(e.run)b&&e.caller!==b||null!=a&&e.method!==a||c&&!e.once||(delete this._events[d],e.recover());else{for(var h=0,f=0,t=e.length;f<t;f++){var z=e[f];z?!z||b&&z.caller!==b||null!=a&&z.method!==a||c&&!z.once||(h++,e[f]=null,z.recover()):h++}h===t&&delete this._events[d]}return this};b.offAll=function(d){var b=this._events;if(!b)return this;if(d)this._recoverHandlers(b[d]),delete b[d];else{for(var a in b)this._recoverHandlers(b[a]);this._events=null}return this};b.offAllCaller=function(d){if(d&&this._events)for(var b in this._events)this.off(b,d,null);return this};b._recoverHandlers=function(d){if(d)if(d.run)d.recover();else for(var b=d.length-1;-1<b;b--)d[b]&&(d[b].recover(),d[b]=null)};b.isMouseEvent=function(d){return a.MOUSE_EVENTS[d]||!1};a.MOUSE_EVENTS={rightmousedown:!0,rightmouseup:!0,rightclick:!0,mousedown:!0,mouseup:!0,mousemove:!0,mouseover:!0,mouseout:!0,click:!0,doubleclick:!0};a.__init$=function(){Object.defineProperty(laya.events.EventDispatcher.prototype,"_events",{enumerable:!1,writable:!0});c=function(d){function b(d,a,c,e){b.__super.call(this,d,a,c,e)}n(b,"",d);b.prototype.recover=function(){0<this._id&&(this._id=0,b._pool.push(this.clear()))};b.create=function(d,a,c,e){void 0===e&&(e=!0);return b._pool.length?b._pool.pop().setTo(d,a,c,e):new b(d,a,c,e)};b._pool=[];return b}(B)};return a}(),B=function(){function a(b,d,a,c){this.once=!1;this._id=0;void 0===c&&(c=!1);this.setTo(b,d,a,c)}n(a,"laya.utils.Handler");var c=a.prototype;c.setTo=function(b,d,c,h){this._id=a._gid++;this.caller=b;this.method=d;this.args=c;this.once=h;return this};c.run=function(){if(null==this.method)return null;var b=this._id,d=this.method.apply(this.caller,this.args);this._id===b&&this.once&&this.recover();return d};c.runWith=function(b){if(null==this.method)return null;var d=this._id;b=null==b?this.method.apply(this.caller,this.args):this.args||b.unshift?this.args?this.method.apply(this.caller,this.args.concat(b)):this.method.apply(this.caller,b):this.method.call(this.caller,b);this._id===d&&this.once&&this.recover();return b};c.clear=function(){this.args=this.method=this.caller=null;return this};c.recover=function(){0<this._id&&(this._id=0,a._pool.push(this.clear()))};a.create=function(b,d,c,h){void 0===h&&(h=!0);return a._pool.length?a._pool.pop().setTo(b,d,c,h):new a(b,d,c,h)};a._pool=[];a._gid=1;return a}(),Ya=function(){function a(){}n(a,"laya.events.Event");var c=a.prototype;c.setTo=function(b,d,a){this.type=b;this.currentTarget=d;this.target=a;return this};c.stopPropagation=function(){this._stoped=!0};g(0,c,"stageY",function(){return l.stage.mouseY});g(0,c,"charCode",function(){return this.nativeEvent.charCode});g(0,c,"touches",function(){if(!this.nativeEvent)return null;var b=this.nativeEvent.touches;if(b)for(var d=l.stage,a=0,c=b.length;a<c;a++){var f=b[a],k=P.TEMP;k.setTo(f.clientX,f.clientY);d._canvasTransform.invertTransformPoint(k);d.transform.invertTransformPoint(k);f.stageX=k.x;f.stageY=k.y}return b});g(0,c,"keyLocation",function(){return this.nativeEvent.location||this.nativeEvent.keyLocation});g(0,c,"ctrlKey",function(){return this.nativeEvent.ctrlKey});g(0,c,"altKey",function(){return this.nativeEvent.altKey});g(0,c,"shiftKey",function(){return this.nativeEvent.shiftKey});g(0,c,"stageX",function(){return l.stage.mouseX});a.EMPTY=new a;a.MOUSE_DOWN="mousedown";a.MOUSE_UP="mouseup";a.CLICK="click";a.RIGHT_MOUSE_DOWN="rightmousedown";a.RIGHT_MOUSE_UP="rightmouseup";a.RIGHT_CLICK="rightclick";a.MOUSE_MOVE="mousemove";a.MOUSE_OVER="mouseover";a.MOUSE_OUT="mouseout";a.MOUSE_WHEEL="mousewheel";a.ROLL_OVER="mouseover";a.ROLL_OUT="mouseout";a.DOUBLE_CLICK="doubleclick";a.CHANGE="change";a.CHANGED="changed";a.RESIZE="resize";a.ADDED="added";a.REMOVED="removed";a.DISPLAY="display";a.UNDISPLAY="undisplay";a.ERROR="error";a.COMPLETE="complete";a.LOADED="loaded";a.READY="ready";a.PROGRESS="progress";a.INPUT="input";a.RENDER="render";a.OPEN="open";a.MESSAGE="message";a.CLOSE="close";a.KEY_DOWN="keydown";a.KEY_PRESS="keypress";a.KEY_UP="keyup";a.FRAME="enterframe";a.DRAG_START="dragstart";a.DRAG_MOVE="dragmove";a.DRAG_END="dragend";a.ENTER="enter";a.SELECT="select";a.BLUR="blur";a.FOCUS="focus";a.VISIBILITY_CHANGE="visibilitychange";a.FOCUS_CHANGE="focuschange";a.PLAYED="played";a.PAUSED="paused";a.STOPPED="stopped";a.START="start";a.END="end";a.COMPONENT_ADDED="componentadded";a.COMPONENT_REMOVED="componentremoved";a.RELEASED="released";a.LINK="link";a.LABEL="label";a.FULL_SCREEN_CHANGE="fullscreenchange";a.DEVICE_LOST="devicelost";a.TRANSFORM_CHANGED="transformchanged";a.ANIMATION_CHANGED="animationchanged";a.TRAIL_FILTER_CHANGE="trailfilterchange";a.TRIGGER_ENTER="triggerenter";a.TRIGGER_STAY="triggerstay";a.TRIGGER_EXIT="triggerexit";return a}(),Sa=function(){function a(b){this._xd_=!0;this._allocated_=8;this._length=this._pos_=0;b?(this._u8d_=new Uint8Array(b),this._d_=new DataView(this._u8d_.buffer),this._length=this._d_.byteLength):this._resizeBuffer(this._allocated_)}n(a,"laya.utils.Byte");var c=a.prototype;c._resizeBuffer=function(b){try{var d=new Uint8Array(b);null!=this._u8d_&&(this._u8d_.length<=b?d.set(this._u8d_):d.set(this._u8d_.subarray(0,b)));this._u8d_=d;this._d_=new DataView(d.buffer)}catch(e){throw"Invalid typed array length:"+b;}};c.getString=function(){return this.readString()};c.readString=function(){return this._rUTF(this.getUint16())};c.getFloat32Array=function(b,d){return this.readFloat32Array(b,d)};c.readFloat32Array=function(b,d){d=b+d;d=d>this._length?this._length:d;b=new Float32Array(this._d_.buffer.slice(b,d));this._pos_=d;return b};c.getUint8Array=function(b,d){return this.readUint8Array(b,d)};c.readUint8Array=function(b,d){d=b+d;d=d>this._length?this._length:d;b=new Uint8Array(this._d_.buffer.slice(b,d));this._pos_=d;return b};c.getInt16Array=function(b,d){return this.readInt16Array(b,d)};c.readInt16Array=function(b,d){d=b+d;d=d>this._length?this._length:d;b=new Int16Array(this._d_.buffer.slice(b,d));this._pos_=d;return b};c.getFloat32=function(){return this.readFloat32()};c.readFloat32=function(){if(this._pos_+4>this._length)throw"getFloat32 error - Out of bounds";var b=this._d_.getFloat32(this._pos_,this._xd_);this._pos_+=4;return b};c.getFloat64=function(){return this.readFloat64()};c.readFloat64=function(){if(this._pos_+8>this._length)throw"getFloat64 error - Out of bounds";var b=this._d_.getFloat64(this._pos_,this._xd_);this._pos_+=8;return b};c.writeFloat32=function(b){this._ensureWrite(this._pos_+4);this._d_.setFloat32(this._pos_,b,this._xd_);this._pos_+=4};c.writeFloat64=function(b){this._ensureWrite(this._pos_+8);this._d_.setFloat64(this._pos_,b,this._xd_);this._pos_+=8};c.getInt32=function(){return this.readInt32()};c.readInt32=function(){if(this._pos_+4>this._length)throw"getInt32 error - Out of bounds";var b=this._d_.getInt32(this._pos_,this._xd_);this._pos_+=4;return b};c.getUint32=function(){return this.readUint32()};c.readUint32=function(){if(this._pos_+4>this._length)throw"getUint32 error - Out of bounds";var b=this._d_.getUint32(this._pos_,this._xd_);this._pos_+=4;return b};c.writeInt32=function(b){this._ensureWrite(this._pos_+4);this._d_.setInt32(this._pos_,b,this._xd_);this._pos_+=4};c.writeUint32=function(b){this._ensureWrite(this._pos_+4);this._d_.setUint32(this._pos_,b,this._xd_);this._pos_+=4};c.getInt16=function(){return this.readInt16()};c.readInt16=function(){if(this._pos_+2>this._length)throw"getInt16 error - Out of bounds";var b=this._d_.getInt16(this._pos_,this._xd_);this._pos_+=2;return b};c.getUint16=function(){return this.readUint16()};c.readUint16=function(){if(this._pos_+2>this._length)throw"getUint16 error - Out of bounds";var b=this._d_.getUint16(this._pos_,this._xd_);this._pos_+=2;return b};c.writeUint16=function(b){this._ensureWrite(this._pos_+2);this._d_.setUint16(this._pos_,b,this._xd_);this._pos_+=2};c.writeInt16=function(b){this._ensureWrite(this._pos_+2);this._d_.setInt16(this._pos_,b,this._xd_);this._pos_+=2};c.getUint8=function(){return this.readUint8()};c.readUint8=function(){if(this._pos_+1>this._length)throw"getUint8 error - Out of bounds";return this._u8d_[this._pos_++]};c.writeUint8=function(b){this._ensureWrite(this._pos_+1);this._d_.setUint8(this._pos_,b);this._pos_++};c._getUInt8=function(b){return this._readUInt8(b)};c._readUInt8=function(b){return this._d_.getUint8(b)};c._getUint16=function(b){return this._readUint16(b)};c._readUint16=function(b){return this._d_.getUint16(b,this._xd_)};c._getMatrix=function(){return this._readMatrix()};c._readMatrix=function(){return new C(this.getFloat32(),this.getFloat32(),this.getFloat32(),this.getFloat32(),this.getFloat32(),this.getFloat32())};c._rUTF=function(b){var d="";b=this._pos_+b;for(var a,c,f,k=String.fromCharCode,m=this._u8d_,p=0;this._pos_<b;)a=m[this._pos_++],128>a?0!=a&&(d+=k(a)):224>a?d+=k((a&63)<<6|m[this._pos_++]&127):240>a?(c=m[this._pos_++],d+=k((a&31)<<12|(c&127)<<6|m[this._pos_++]&127)):(c=m[this._pos_++],f=m[this._pos_++],d+=k((a&15)<<18|(c&127)<<12|f<<6&127|m[this._pos_++]&127)),p++;return d};c.getCustomString=function(b){return this.readCustomString(b)};c.readCustomString=function(b){for(var d="",a,c,f,k=String.fromCharCode,m=this._u8d_;0<b;)if(c=m[this._pos_],128>c)d+=k(c),this._pos_++,b--;else for(a=c-128,this._pos_++,b-=a;0<a;)c=m[this._pos_++],f=m[this._pos_++],d+=k(f<<8|c),a--;return d};c.clear=function(){this.length=this._pos_=0};c.__getBuffer=function(){return this._d_.buffer};c.writeUTFBytes=function(b){b+="";for(var d=0,a=b.length;d<a;d++){var c=b.charCodeAt(d);127>=c?this.writeByte(c):2047>=c?(this._ensureWrite(this._pos_+2),this._u8d_.set([192|c>>6,128|c&63],this._pos_),this._pos_+=2):65535>=c?(this._ensureWrite(this._pos_+3),this._u8d_.set([224|c>>12,128|c>>6&63,128|c&63],this._pos_),this._pos_+=3):(this._ensureWrite(this._pos_+4),this._u8d_.set([240|c>>18,128|c>>12&63,128|c>>6&63,128|c&63],this._pos_),this._pos_+=4)}};c.writeUTFString=function(b){var d=this.pos;this.writeUint16(1);this.writeUTFBytes(b);this._d_.setUint16(d,this.pos-d-2,this._xd_)};c.readUTFString=function(){return this.readUTFBytes(this.getUint16())};c.getUTFString=function(){return this.readUTFString()};c.readUTFBytes=function(b){void 0===b&&(b=-1);if(0===b)return"";var d=this.bytesAvailable;if(b>d)throw"readUTFBytes error - Out of bounds";return this._rUTF(0<b?b:d)};c.getUTFBytes=function(b){void 0===b&&(b=-1);return this.readUTFBytes(b)};c.writeByte=function(b){this._ensureWrite(this._pos_+1);this._d_.setInt8(this._pos_,b);this._pos_+=1};c.readByte=function(){if(this._pos_+1>this._length)throw"readByte error - Out of bounds";return this._d_.getInt8(this._pos_++)};c.getByte=function(){return this.readByte()};c._ensureWrite=function(b){this._length<b&&(this._length=b);this._allocated_<b&&(this.length=b)};c.writeArrayBuffer=function(b,d,a){void 0===d&&(d=0);void 0===a&&(a=0);if(0>d||0>a)throw"writeArrayBuffer error - Out of bounds";0==a&&(a=b.byteLength-d);this._ensureWrite(this._pos_+a);b=new Uint8Array(b);this._u8d_.set(b.subarray(d,d+a),this._pos_);this._pos_+=a};c.readArrayBuffer=function(b){var d;d=this._u8d_.buffer.slice(this._pos_,this._pos_+b);this._pos_+=b;return d};g(0,c,"buffer",function(){var b=this._d_.buffer;return b.byteLength===this._length?b:b.slice(0,this._length)});g(0,c,"endian",function(){return this._xd_?"littleEndian":"bigEndian"},function(b){this._xd_="littleEndian"===b});g(0,c,"length",function(){return this._length},function(b){this._allocated_<b?this._resizeBuffer(this._allocated_=Math.floor(Math.max(b,2*this._allocated_))):this._allocated_>b&&this._resizeBuffer(this._allocated_=b);this._length=b});g(0,c,"pos",function(){return this._pos_},function(b){this._pos_=b});g(0,c,"bytesAvailable",function(){return this._length-this._pos_});a.getSystemEndian=function(){if(!a._sysEndian){var b=new ArrayBuffer(2);(new DataView(b)).setInt16(0,256,!0);a._sysEndian=256===(new Int16Array(b))[0]?"littleEndian":"bigEndian"}return a._sysEndian};a.BIG_ENDIAN="bigEndian";a.LITTLE_ENDIAN="littleEndian";a._sysEndian=null;return a}(),ma=function(){function a(b,d){this.size=[0,0];this.ALPHA=this.alpha=1;this.subID=0;this.ref=1;this._cacheID=0;this.clipMatDir=[99999999,0,0,99999999];this.clipMatPos=[0,0];this.clipOff=[0,0];this.defines=new Ub;this.mainID=b;this.subID=d;this.u_mmat2=this.colorAdd=this.color=this.texture=this.textureHost=null;this._cacheID=b|d;this._inClassCache=a._cache[this._cacheID];0<b&&!this._inClassCache&&(this._inClassCache=a._cache[this._cacheID]=[],this._inClassCache._length=0);this.clear()}n(a,"laya.webgl.shader.d2.value.Value2D");var c=a.prototype;c.setValue=function(b){};c._ShaderWithCompile=function(){return Ta.withCompile2D(0,this.mainID,this.defines.toNameDic(),this.mainID|this.defines._value,pd.create,this._attribLocation)};c.upload=function(){var b=Q;Q.worldMatrix4===Q.TEMPMAT4_ARRAY||this.defines.addInt(128);this.mmat=b.worldMatrix4;Q.matWVP&&(this.defines.addInt(2048),this.u_MvpMatrix=Q.matWVP.elements);var d=Ta.sharders[this.mainID|this.defines._value]||this._ShaderWithCompile();d._shaderValueWidth!==b.width||d._shaderValueHeight!==b.height?(this.size[0]=b.width,this.size[1]=b.height,d._shaderValueWidth=b.width,d._shaderValueHeight=b.height,d.upload(this,null)):d.upload(this,d._params2dQuick2||d._make2dQuick2())};c.setFilters=function(b){if(this.filters=b)for(var d=b.length,a,c=0;c<d;c++)if(a=b[c])this.defines.add(a.type),a.action.setValue(this)};c.clear=function(){this.defines._value=this.subID+(R.shaderHighPrecision?1024:0);this.clipOff[0]=0;this.textureAlpha=null};c.release=function(){1>--this.ref&&(this._inClassCache&&(this._inClassCache[this._inClassCache._length++]=this),this.clear(),this.filters=null,this.ref=1,this.clipOff[0]=0)};a._initone=function(b,d){a._typeClass[b]=d;a._cache[b]=[];a._cache[b]._length=0};a.__init__=function(){a._initone(4,qd);a._initone(512,rd);a._initone(1,Cc);a._initone(9,Cc)};a.create=function(b,d){var c=a._cache[b|d];return c._length?c[--c._length]:new a._typeClass[b|d](d)};a._cache=[];a._typeClass=[];a.TEMPMAT4_ARRAY=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1];return a}(),Ma=function(){function a(){this._graphicBounds=this._vectorgraphArray=this._cmds=this._one=this._sp=null;this.autoDestroy=!1;this._render=this._renderEmpty;this._createData()}n(a,"laya.display.Graphics");var c=a.prototype;c._createData=function(){};c._clearData=function(){};c._destroyData=function(){};c.destroy=function(){this.clear(!0);this._graphicBounds&&this._graphicBounds.destroy();this._vectorgraphArray=this._graphicBounds=null;this._sp&&(this._sp._renderType=0,this._sp._setRenderType(0),this._sp=null);this._destroyData()};c.clear=function(b){void 0===b&&(b=!0);if(b)if(b=this._one,this._cmds){var d,a=this._cmds.length;for(d=0;d<a;d++)b=this._cmds[d],b.recover();this._cmds.length=0}else b&&b.recover();else this._cmds=null;this._one=null;this._render=this._renderEmpty;this._clearData();this._sp&&(this._sp._renderType&=-513,this._sp._setRenderType(this._sp._renderType));this._repaint();if(this._vectorgraphArray){d=0;for(a=this._vectorgraphArray.length;d<a;d++)Ea.getInstance().deleteShape(this._vectorgraphArray[d]);this._vectorgraphArray.length=0}};c._clearBoundsCache=function(){this._graphicBounds&&this._graphicBounds.reset()};c._initGraphicBounds=function(){this._graphicBounds||(this._graphicBounds=sd.create(),this._graphicBounds._graphics=this)};c._repaint=function(){this._clearBoundsCache();this._sp&&this._sp.repaint()};c._isOnlyOne=function(){return!this._cmds||0===this._cmds.length};c.getBounds=function(b){void 0===b&&(b=!1);this._initGraphicBounds();return this._graphicBounds.getBounds(b)};c.getBoundPoints=function(b){void 0===b&&(b=!1);this._initGraphicBounds();return this._graphicBounds.getBoundPoints(b)};c.drawImage=function(b,d,a,c,f){void 0===d&&(d=0);void 0===a&&(a=0);void 0===c&&(c=0);void 0===f&&(f=0);if(!b)return null;c||(c=b.sourceWidth);f||(f=b.sourceHeight);if(b.getIsReady()){var e=c/b.sourceWidth,h=f/b.sourceHeight;c=b.width*e;f=b.height*h;if(0>=c||0>=f)return null;d+=b.offsetX*e;a+=b.offsetY*h}this._sp&&(this._sp._renderType|=512,this._sp._setRenderType(this._sp._renderType));b=td.create.call(this,b,d,a,c,f);null==this._one?(this._one=b,this._render=this._renderOneImg):this._saveToCmd(null,b);this._repaint();return b};c.drawTexture=function(b,d,a,c,f,k,m,p,t){void 0===d&&(d=0);void 0===a&&(a=0);void 0===c&&(c=0);void 0===f&&(f=0);void 0===m&&(m=1);if(!b||.01>m||!b.getIsReady())return null;c||(c=b.sourceWidth);f||(f=b.sourceHeight);if(b.getIsReady()){var e=!r.isWebGL&&(q.onFirefox||q.onEdge||q.onIE||q.onSafari)?.5:0,h=c/b.sourceWidth,g=f/b.sourceHeight;c=b.width*h;f=b.height*g;if(0>=c||0>=f)return null;d+=b.offsetX*h;a+=b.offsetY*g;d-=e;a-=e;c+=2*e;f+=2*e}this._sp&&(this._sp._renderType|=512,this._sp._setRenderType(this._sp._renderType));r.isWebGL||!t&&!p||(e=new xa,e.size(c,f),e.getContext("2d").drawTexture(b,0,0,c,f),b=new ga(e),p&&(h=new Dc,g=ba.create(p).arrColor,h.data=(new pb).color(255*g[0],255*g[1],255*g[2]),h.apply({canvas:e})));b=ud.create.call(this,b,d,a,c,f,k,m,p,t);this._repaint();return this._saveToCmd(null,b)};c.drawTextures=function(b,d){return b?this._saveToCmd(r._context._drawTextures,vd.create.call(this,b,d)):null};c.drawTriangles=function(b,d,a,c,f,k,m,p,t,z){void 0===p&&(p=1);return this._saveToCmd(r._context.drawTriangles,wd.create.call(this,b,d,a,c,f,k,m,p,t,z))};c.fillTexture=function(b,d,a,c,f,k,m){void 0===c&&(c=0);void 0===f&&(f=0);void 0===k&&(k="repeat");return b&&b.getIsReady()?this._saveToCmd(r._context._fillTexture,xd.create.call(this,b,d,a,c,f,k,m||P.EMPTY,{})):null};c._saveToCmd=function(b,d){this._sp&&(this._sp._renderType|=512,this._sp._setRenderType(this._sp._renderType));null==this._one?(this._one=d,this._render=this._renderOne):(this._render=this._renderAll,0===(this._cmds||(this._cmds=[])).length&&this._cmds.push(this._one),this._cmds.push(d));this._repaint();return d};c.clipRect=function(b,d,a,c){return this._saveToCmd(r._context._clipRect,yd.create.call(this,b,d,a,c))};c.fillText=function(b,d,a,c,f,k){return this._saveToCmd(r._context._fillText,zd.create.call(this,b,d,a,c||W.defaultFontStr(),f,k))};c.fillBorderText=function(b,d,a,c,f,k,m,p){return this._saveToCmd(r._context._fillBorderText,Ad.create.call(this,b,d,a,c||W.defaultFontStr(),f,k,m,p))};c.fillWords=function(b,d,a,c,f){return this._saveToCmd(r._context._fillWords,Bd.create.call(this,b,d,a,c||W.defaultFontStr(),f))};c.fillBorderWords=function(b,d,a,c,f,k,m){return this._saveToCmd(r._context._fillBorderWords,Cd.create.call(this,b,d,a,c||W.defaultFontStr(),f,k,m))};c.strokeText=function(b,d,a,c,f,k,m){return this._saveToCmd(r._context._strokeText,Dd.create.call(this,b,d,a,c||W.defaultFontStr(),f,k,m))};c.alpha=function(b){return this._saveToCmd(r._context._alpha,Ed.create.call(this,b))};c.transform=function(b,d,a){void 0===d&&(d=0);void 0===a&&(a=0);return this._saveToCmd(r._context._transform,Fd.create.call(this,b,d,a))};c.rotate=function(b,d,a){void 0===d&&(d=0);void 0===a&&(a=0);return this._saveToCmd(r._context._rotate,Gd.create.call(this,b,d,a))};c.scale=function(b,d,a,c){void 0===a&&(a=0);void 0===c&&(c=0);return this._saveToCmd(r._context._scale,Hd.create.call(this,b,d,a,c))};c.translate=function(b,d){return this._saveToCmd(r._context._translate,Id.create.call(this,b,d))};c.save=function(){return this._saveToCmd(r._context._save,Jd.create.call(this))};c.restore=function(){return this._saveToCmd(r._context._restore,Kd.create.call(this))};c.replaceText=function(b){this._repaint();var d=this._cmds;if(d)for(var a=d.length-1;-1<a;a--){if(this._isTextCmd(d[a]))return d[a].text=b,!0}else if(this._one&&this._isTextCmd(this._one))return this._one.text=b,!0;return!1};c._isTextCmd=function(b){b=b.cmdID;return"FillText"==b||"StrokeText"==b||"FillBorderText"==b};c.replaceTextColor=function(b){this._repaint();var d=this._cmds;if(d)for(var a=d.length-1;-1<a;a--)this._isTextCmd(d[a])&&this._setTextCmdColor(d[a],b);else this._one&&this._isTextCmd(this._one)&&this._setTextCmdColor(this._one,b)};c._setTextCmdColor=function(b,d){switch(b.cmdID){case "FillText":case "StrokeText":b.color=d;break;case "FillBorderText":case "FillBorderWords":case "FillBorderText":b.fillColor=d}};c.loadImage=function(b,d,a,c,f,k){void 0===d&&(d=0);void 0===a&&(a=0);void 0===c&&(c=0);void 0===f&&(f=0);var e=x.getRes(b);if(e)if(e.getIsReady())this.drawImage(e,d,a,c,f);else e.once("ready",this,this.drawImage,[e,d,a,c,f]);else e=new ga,e.load(b),x.cacheRes(b,e),e.once("ready",this,this.drawImage,[e,d,a,c,f]);null!=k&&(e.getIsReady()?k.call(this._sp):e.on("ready",this._sp,k))};c._renderEmpty=function(b,d,a,c){};c._renderAll=function(b,d,a,c){b=this._cmds;for(var e=0,h=b.length;e<h;e++)b[e].run(d,a,c)};c._renderOne=function(b,d,a,c){this._one.run(d,a,c)};c._renderOneImg=function(b,d,a,c){this._one.run(d,a,c)};c.drawLine=function(b,d,a,c,f,k){void 0===k&&(k=1);"string"==typeof d&&(d=parseFloat(d.toString()));"string"==typeof c&&(c=parseFloat(c.toString()));var e=0;r.isWebGL&&(e=Ea.getInstance().getId(),null==this._vectorgraphArray&&(this._vectorgraphArray=[]),this._vectorgraphArray.push(e));var h=1>k||0===k%2?0:.5;return this._saveToCmd(r._context._drawLine,Ld.create.call(this,b+h,d+h,a+h,c+h,f,k,e))};c.drawLines=function(b,d,a,c,f){void 0===f&&(f=1);var e=0;if(!a||4>a.length)return null;r.isWebGL&&(e=Ea.getInstance().getId(),null==this._vectorgraphArray&&(this._vectorgraphArray=[]),this._vectorgraphArray.push(e));var h=1>f||0===f%2?0:.5;return this._saveToCmd(r._context._drawLines,Md.create.call(this,b+h,d+h,a,c,f,e))};c.drawCurves=function(b,d,a,c,f){void 0===f&&(f=1);return this._saveToCmd(r._context._drawCurves,Nd.create.call(this,b,d,a,c,f))};c.drawRect=function(b,d,a,c,f,k,m){void 0===m&&(m=1);var e=1<=m&&k?m/2:0,h=k?m:0;return this._saveToCmd(r._context.drawRect,Od.create.call(this,b+e,d+e,a-h,c-h,f,k,m))};c.drawCircle=function(b,d,a,c,f,k){void 0===k&&(k=1);var e=1<=k&&f?k/2:0,h=0;r.isWebGL&&(h=Ea.getInstance().getId(),null==this._vectorgraphArray&&(this._vectorgraphArray=[]),this._vectorgraphArray.push(h));return this._saveToCmd(r._context._drawCircle,Pd.create.call(this,b,d,a-e,c,f,k,h))};c.drawPie=function(b,d,a,c,f,k,m,p){void 0===p&&(p=1);var e=1<=p&&m?p/2:0,h=m?p:0,g=0;r.isWebGL&&(g=Ea.getInstance().getId(),null==this._vectorgraphArray&&(this._vectorgraphArray=[]),this._vectorgraphArray.push(g));return this._saveToCmd(r._context._drawPie,Qd.create.call(this,b+e,d+e,a-h,U.toRadian(c),U.toRadian(f),k,m,p,g))};c.drawPoly=function(b,d,a,c,f,k){void 0===k&&(k=1);var e=0;if(r.isWebGL){e=Ea.getInstance().getId();null==this._vectorgraphArray&&(this._vectorgraphArray=[]);this._vectorgraphArray.push(e);var h;h=6<a.length?!1:!0}var t=1<=k&&f?0===k%2?0:.5:0;return this._saveToCmd(r._context._drawPoly,Rd.create.call(this,b+t,d+t,a,c,f,k,h,e))};c.drawPath=function(b,d,a,c,f){return this._saveToCmd(r._context._drawPath,Sd.create.call(this,b,d,a,c,f))};c.draw9Grid=function(b,d,a,c,f,k){void 0===d&&(d=0);void 0===a&&(a=0);void 0===c&&(c=0);void 0===f&&(f=0);this._saveToCmd(null,Td.create(b,d,a,c,f,k))};g(0,c,"cmds",function(){return this._cmds},function(b){this._sp&&(this._sp._renderType|=512,this._sp._setRenderType(this._sp._renderType));this._cmds=b;this._render=this._renderAll;this._repaint()});return a}(),v=function(){function a(){}n(a,"laya.utils.Pool");a.getPoolBySign=function(c){return a._poolDic[c]||(a._poolDic[c]=[])};a.clearBySign=function(c){a._poolDic[c]&&(a._poolDic[c].length=0)};a.recover=function(c,b){b.__InPool||(b.__InPool=!0,a.getPoolBySign(c).push(b))};a.recoverByClass=function(c){if(c){var b=c.__className||c.constructor._$gid;b&&a.recover(b,c)}};a._getClassSign=function(a){var b=a.__className||a._$gid;b||(a._$gid=b=U.getGID()+"");return b};a.createByClass=function(c){return a.getItemByClass(a._getClassSign(c),c)};a.getItemByClass=function(c,b){if(!a._poolDic[c])return new b;c=a.getPoolBySign(c);c.length?(b=c.pop(),b.__InPool=!1):b=new b;return b};a.getItemByCreateFun=function(c,b,d){c=a.getPoolBySign(c);b=c.length?c.pop():b.call(d);b.__InPool=!1;return b};a.getItem=function(c){c=a.getPoolBySign(c);(c=c.length?c.pop():null)&&(c.__InPool=!1);return c};a.POOLSIGN="__InPool";a._poolDic={};return a}(),Vb=function(){function a(b,d,a){this.indexNum=this.vertNum=this._stride=0;this._applied=!1;this._attribInfo=this._vao=this._ib=this._vb=null;this._quadNum=0;this.canReuse=!1;this._stride=b;this._vb=new Ec(b,35048);d?this._vb._resizeBuffer(d,!1):ya.webGL2D_MeshAllocMaxMem&&this._vb._resizeBuffer(65536*b,!1);this._ib=new Fc;a&&this._ib._resizeBuffer(a,!1)}n(a,"laya.webgl.utils.Mesh2D");var c=a.prototype;c.cloneWithNewVB=function(){var b=new a(this._stride,0,0);b._ib=this._ib;b._quadNum=this._quadNum;b._attribInfo=this._attribInfo;return b};c.cloneWithNewVBIB=function(){var b=new a(this._stride,0,0);b._attribInfo=this._attribInfo;return b};c.getVBW=function(){this._vb.setNeedUpload();return this._vb};c.getVBR=function(){return this._vb};c.getIBR=function(){return this._ib};c.getIBW=function(){this._ib.setNeedUpload();return this._ib};c.createQuadIB=function(b){this._quadNum=b;this._ib._resizeBuffer(12*b,!1);this._ib.byteLength=this._ib.bufferLength;for(var d=this._ib.getUint16Array(),a=0,c=0,f=0;f<b;f++)d[a++]=c,d[a++]=c+2,d[a++]=c+1,d[a++]=c,d[a++]=c+3,d[a++]=c+2,c+=4;this._ib.setNeedUpload()};c.setAttributes=function(b){this._attribInfo=b;if(0!=this._attribInfo.length%3)throw"Mesh2D setAttributes error!";};c.configVAO=function(b){if(!this._applied){this._applied=!0;this._vao||(this._vao=new Ud);this._vao.bind();this._vb._bindForVAO();this._ib.setNeedUpload();this._ib._bind_uploadForVAO();for(var d=this._attribInfo.length/3,a=0,c=0;c<d;c++){var f=this._attribInfo[a+1],k=this._attribInfo[a],m=this._attribInfo[a+2];b.enableVertexAttribArray(c);b.vertexAttribPointer(c,f,k,!1,this._stride,m);a+=3}this._vao.unBind()}};c.useMesh=function(b){this._applied||this.configVAO(b);this._vao.bind();this._vb.bind();this._ib._bind_upload()||this._ib.bind();this._vb._bind_upload()||this._vb.bind()};c.getEleNum=function(){return this._ib.getBuffer().byteLength/2};c.releaseMesh=function(){};c.destroy=function(){};c.clearVB=function(){this._vb.clear()};a._gvaoid=0;return a}();(function(){function a(){}n(a,"laya.webgl.shader.ShaderValue");return a})();var Gc=function(){function a(){}n(a,"laya.debug.tools.StringTool");a.toUpCase=function(a){return a.toUpperCase()};a.toLowCase=function(a){return a.toLowerCase()};a.toUpHead=function(a){return 1>=a.length?a.toUpperCase():a.charAt(0).toUpperCase()+a.substr(1)};a.toLowHead=function(a){return 1>=a.length?a.toLowerCase():a.charAt(0).toLowerCase()+a.substr(1)};a.packageToFolderPath=function(a){return a.replace(".","/")};a.insert=function(a,b,d){return a.substring(0,d)+b+a.substr(d)};a.insertAfter=function(c,b,d,e){void 0===e&&(e=!1);e=e?c.lastIndexOf(d):c.indexOf(d);return 0<=e?a.insert(c,b,e+d.length):c};a.insertBefore=function(c,b,d,e){void 0===e&&(e=!1);d=e?c.lastIndexOf(d):c.indexOf(d);return 0<=d?a.insert(c,b,d):c};a.insertParamToFun=function(c,b){var d;d=a.getParamArr(c);b=b.join(",");0<d.length&&(b=","+b);return a.insertBefore(c,b,")",!0)};a.trim=function(c,b){b||(b=[" ","\r","\n","\t",String.fromCharCode(65279)]);var d,e;e=b.length;for(d=0;d<e;d++)c=a.getReplace(c,b[d],"");return c};a.isEmpty=function(c){return 1>c.length?!0:a.emptyStrDic.hasOwnProperty(c)};a.trimLeft=function(c){var b;b=0;var d;for(d=c.length;a.isEmpty(c.charAt(b))&&b<d;)b++;return b<d?c.substr(b):""};a.trimRight=function(c){var b;for(b=c.length-1;a.isEmpty(c.charAt(b))&&0<=b;)b--;c.substring(0,b);return 0<=b?c.substring(0,b+1):""};a.trimSide=function(c){c=a.trimLeft(c);return c=a.trimRight(c)};a.isOkFileName=function(c){if(""==laya.debug.tools.StringTool.trimSide(c))return!1;var b,d;d=c.length;for(b=0;b<d;b++)if(a.specialChars[c.charAt(b)])return!1;return!0};a.trimButEmpty=function(c){return a.trim(c,["\r","\n","\t"])};a.removeEmptyStr=function(c){var b;b=c.length-1;for(var d;0<=b;b--)d=c[b],d=laya.debug.tools.StringTool.trimSide(d),a.isEmpty(d)?c.splice(b,1):c[b]=d;return c};a.ifNoAddToTail=function(a,b){return 0<=a.indexOf(b)?a:a+b};a.trimEmptyLine=function(c){var b,d;b=c.split("\n");for(c=b.length-1;0<=c;c--)d=b[c],a.isEmptyLine(d)&&b.splice(c,1);return b.join("\n")};a.isEmptyLine=function(a){a=laya.debug.tools.StringTool.trim(a);return""==a?!0:!1};a.removeCommentLine=function(c){var b;b=[];var d,e,h;d=0;var f,k;for(f=c.length;d<f;){h=e=c[d];k=e.indexOf("/**");if(0<=k)for(h=e.substring(0,k-1),a.addIfNotEmpty(b,h);d<f;){e=c[d];k=e.indexOf("*/");if(0<=k){h=e.substring(k+2);a.addIfNotEmpty(b,h);break}d++}else 0<=e.indexOf("//")?0!=laya.debug.tools.StringTool.trim(e).indexOf("//")&&a.addIfNotEmpty(b,h):a.addIfNotEmpty(b,h);d++}return b};a.addIfNotEmpty=function(c,b){b&&""!=a.trim(b)&&c.push(b)};a.trimExt=function(c,b){c=a.trim(c);var d,e;e=b.length;for(d=0;d<e;d++)c=a.getReplace(c,b[d],"");return c};a.getBetween=function(a,b,d,e){void 0===e&&(e=!1);if(!a||!b||!d)return"";var c;c=a.indexOf(b);if(0>c)return"";if(e){if(d=a.lastIndexOf(d),d<c)return""}else d=a.indexOf(d,c+1);return 0>d?"":a.substring(c+b.length,d)};a.getSplitLine=function(a,b){void 0===b&&(b=" ");return a.split(b)};a.getLeft=function(a,b){b=a.indexOf(b);return a.substr(0,b)};a.getRight=function(a,b){b=a.indexOf(b);return a.substr(b+1)};a.delelteItem=function(a){for(;0<a.length;)if(""==a[0])a.shift();else break};a.getWords=function(c){c=a.getSplitLine(c);a.delelteItem(c);return c};a.getLinesI=function(a,b,d){for(var c=[];a<=b;a++)c.push(d[a]);return c};a.structfy=function(c,b,d){void 0===b&&(b=4);void 0===d&&(d=!0);d&&(c=laya.debug.tools.StringTool.trimEmptyLine(c));d=0;var e;e=a.getEmptyStr(0);c=c.split("\n");var h,f,k;f=c.length;for(h=0;h<f;h++)k=c[h],k=laya.debug.tools.StringTool.trimLeft(k),k=laya.debug.tools.StringTool.trimRight(k),d+=a.getPariCount(k),0<=k.indexOf("}")&&(e=a.getEmptyStr(d*b)),k=e+k,c[h]=k,e=a.getEmptyStr(d*b);return c.join("\n")};a.getEmptyStr=function(c){if(!a.emptyDic.hasOwnProperty(c)){var b,d;d="";for(b=0;b<c;b++)d+=" ";a.emptyDic[c]=d}return a.emptyDic[c]};a.getPariCount=function(a,b,d){void 0===b&&(b="{");void 0===d&&(d="}");var c;c={};c[b]=1;c[d]=-1;var h;d=a.length;var f;for(b=f=0;b<d;b++)h=a.charAt(b),c.hasOwnProperty(h)&&(f+=c[h]);return f};a.readInt=function(a,b){void 0===b&&(b=0);var d;d=0;var c,h;h=!1;var f;f=a.length;for(c=b;c<f;c++)if(b=a.charAt(c),0<Number(b)||"0"==b)d=10*d+Number(b),0<d&&(h=!0);else if(h)break;return d};a.getReplace=function(a,b,d){return a?a.replace(new RegExp(b,"g"),d):""};a.getWordCount=function(a,b){return a.match(new RegExp(b,"g")).length};a.getResolvePath=function(c,b){if(a.isAbsPath(c))return c;var d;d="\\";0<=b.indexOf("/")&&(d="/");b.charAt(b.length-1)==d&&(b=b.substr(0,b.length-1));var e;e=".."+d;var h;h="."+d;var f;f=a.getWordCount(c,e);c=laya.debug.tools.StringTool.getReplace(c,e,"");c=laya.debug.tools.StringTool.getReplace(c,h,"");for(e=0;e<f;e++)b=a.removeLastSign(c,d);return b+d+c};a.isAbsPath=function(a){return 0<=a.indexOf(":")?!0:!1};a.removeLastSign=function(a,b){b=a.lastIndexOf(b);return a=a.substring(0,b)};a.getParamArr=function(c){c=laya.debug.tools.StringTool.getBetween(c,"(",")",!0);return 1>a.trim(c).length?[]:c.split(",")};a.copyStr=function(a){return a.substring()};a.ArrayToString=function(c){return"[{items}]".replace(/\{items\}/g,a.getArrayItems(c))};a.getArrayItems=function(c){var b;if(1>c.length)return"";b=a.parseItem(c[0]);var d,e;e=c.length;for(d=1;d<e;d++)b+=","+a.parseItem(c[d]);return b};a.parseItem=function(a){return""};a.initAlphaSign=function(){a.alphaSigns||(a.alphaSigns={},a.addSign("a","z",a.alphaSigns),a.addSign("A","Z",a.alphaSigns),a.addSign("0","9",a.alphaSigns))};a.addSign=function(a,b,d){a=a.charCodeAt(0);for(b=b.charCodeAt(0);a<=b;a++)d[String.fromCharCode(a)]=!0,console.log("add :"+String.fromCharCode(a))};a.isPureAlphaNum=function(c){a.initAlphaSign();if(!c)return!0;var b,d;d=c.length;for(b=0;b<d;b++)if(!a.alphaSigns[c.charAt(b)])return!1;return!0};a.emptyDic={};a.alphaSigns=null;u(a,["emptyStrDic",function(){return this.emptyStrDic={" ":!0,"\r":!0,"\n":!0,"\t":!0}},"specialChars",function(){return this.specialChars={"*":!0,"\x26":!0,"%":!0,"#":!0,"?":!0}}]);return a}(),Vd=function(){function a(){this._mat=new C}n(a,"laya.webgl.canvas.save.SaveTranslate");var c=a.prototype;l.imps(c,{"laya.webgl.canvas.save.ISaveData":!0});c.isSaveMark=function(){return!1};c.restore=function(b){this._mat.copyTo(b._curMat);a.POOL[a.POOL._length++]=this};a.save=function(b){var d=a.POOL,d=0<d._length?d[--d._length]:new a;b._curMat.copyTo(d._mat);b=b._save;b[b._length++]=d};a.POOL=na._createArray();return a}(),Wd=function(){function a(){this.name=null;this.displayArr=[]}n(a,"laya.ani.bone.SlotData");a.prototype.getDisplayByName=function(a){for(var b,d=0,c=this.displayArr.length;d<c;d++)if(b=this.displayArr[d],b.attachmentName==a)return d;return-1};return a}(),Db=function(){function a(){this.other=this.submitType=this.blendShader=0;this.clear()}n(a,"laya.webgl.submit.SubmitKey");var c=a.prototype;c.clear=function(){this.submitType=-1;this.blendShader=this.other=0};c.copyFrom=function(b){this.other=b.other;this.blendShader=b.blendShader;this.submitType=b.submitType};c.copyFrom2=function(b,d,a){this.other=a;this.submitType=d};c.equal3_2=function(b,d,a){return this.submitType===d&&this.other===a&&this.blendShader===b.blendShader};c.equal4_2=function(b,d,a){return this.submitType===d&&this.other===a&&this.blendShader===b.blendShader};c.equal_3=function(b){return this.submitType===b.submitType&&this.blendShader===b.blendShader};c.equal=function(b){return this.other===b.other&&this.submitType===b.submitType&&this.blendShader===b.blendShader};return a}(),gb=function(){function a(){this._creates();this.reset()}n(a,"laya.html.dom.HTMLElement");var c=a.prototype;c._creates=function(){this._style=fb.create()};c.reset=function(){this.parent=this.URI=null;this._style.reset();this._style.ower=this;this._style.valign="middle";if(this._text&&this._text.words){var b=this._text.words,d,c;c=b.length;var h;for(d=0;d<c;d++)(h=b[d])&&h.recover()}this._text=a._EMPTYTEXT;this._children&&(this._children.length=0);this._x=this._y=this._width=this._height=0;return this};c._getCSSStyle=function(){return this._style};c._addChildsToLayout=function(b){var d=this._getWords();if(null==d&&(!this._children||0==this._children.length))return!1;if(d)for(var a=0,c=d.length;a<c;a++)b.push(d[a]);this._children&&this._children.forEach(function(d,a,c){a=d._style;a._enableLayout&&a._enableLayout()&&d._addToLayout(b)});return!0};c._addToLayout=function(b){if(this._style){var d=this._style;d.absolute||(d.block?b.push(this):this._addChildsToLayout(b)&&(this.x=this.y=0))}};c.repaint=function(b){void 0===b&&(b=!1);this.parentRepaint(b)};c.parentRepaint=function(b){void 0===b&&(b=!1);this.parent&&this.parent.repaint(b)};c._setParent=function(b){b instanceof laya.html.dom.HTMLElement&&(this.URI||(this.URI=b.URI),this.style&&this.style.inherit(b.style))};c.appendChild=function(b){return this.addChild(b)};c.addChild=function(b){b.parent&&b.parent.removeChild(b);this._children||(this._children=[]);this._children.push(b);b.parent=this;b._setParent(this);this.repaint();return b};c.removeChild=function(b){if(!this._children)return null;var d,a;a=this._children.length;for(d=0;d<a;d++)if(this._children[d]==b)return this._children.splice(d,1),b;return null};c.destroy=function(){this._children&&(this.destroyChildren(),this._children.length=0);v.recover(a.getClassName(this),this.reset())};c.destroyChildren=function(){if(this._children){for(var b=this._children.length-1;-1<b;b--)this._children[b].destroy();this._children.length=0}};c._getWords=function(){if(!this._text)return null;var b=this._text.text;if(!b||0===b.length)return null;var d=this._text.words;if(d&&d.length===b.length)return d;null===d&&(this._text.words=d=[]);d.length=b.length;for(var a,c=this.style,f=c.font,k=0,m=b.length;k<m;k++)a=U.measureText(b.charAt(k),f),d[k]=Xd.create().setData(b.charAt(k),a.width,a.height||c.fontSize,c);return d};c._isChar=function(){return!1};c._layoutLater=function(){var b=this.style;b._type&512||(b.widthed(this)&&(this._children&&0<this._children.length||null!=this._getWords())&&b.block?(Hc.later(this),b._type|=512):this.parent&&this.parent._layoutLater())};c._setAttributes=function(b,d){switch(b){case "style":this.style.cssText(d);break;case "class":this.className=d;break;case "x":this.x=parseFloat(d);break;case "y":this.y=parseFloat(d);break;case "width":this.width=parseFloat(d);break;case "height":this.height=parseFloat(d);break;default:this[b]=d}};c.formatURL=function(b){return this.URI?a.formatURL1(b,this.URI?this.URI.path:null):b};c.drawToGraphic=function(b,d,a,c){d+=this.x;a+=this.y;var e=this.style;e.paddingLeft&&(d+=e.paddingLeft);e.paddingTop&&(a+=e.paddingTop);(null!=e.bgColor||e.borderColor)&&b.drawRect(d,a,this.width,this.height,e.bgColor,e.borderColor,1);this.renderSelfToGraphic(b,d,a,c);var h,m;if(this._children&&0<this._children.length)for(h=this._children.length,e=0;e<h;e++)m=this._children[e],null!=m.drawToGraphic&&m.drawToGraphic(b,d,a,c)};c.renderSelfToGraphic=function(b,d,a,c){var e=this.style,h=this._getWords();if(h&&e){var m=e.font,p=e.color;if(e.stroke){var t=e.stroke,t=parseInt(t);b.fillBorderWords(h,d,a,m,p,e.strokeColor,t)}else b.fillWords(h,d,a,m,p);if(this.href)if(d="none"!=e.textDecoration,a=h[h.length-1],h[0].y==a.y)this.drawLine(b,p,h[0],a,c,d);else{var z;for(a=0;a<h.length;++a)null==z?z=[h[a]]:z[z.length-1].y<h[a].y?(this.drawLine(b,p,z[0],z[z.length-1],c,d),z=[h[a]]):z.push(h[a]);this.drawLine(b,p,z[0],z[z.length-1],c,d)}}};c.drawLine=function(b,d,a,c,f,k){var e=c.y+c.height;k&&b.drawLine(a.x,e,c.x+c.width,e,d,2);b=Ic.create();b.rec.setTo(a.x,c.y,c.x+c.width-a.x,c.height);b.href=this.href;f.push(b)};c.workLines=function(b,d,a,c){var e;e="none"!=this.style.textDecoration;var h,m;m=b.length;var p;p=b[0];var t;if(t=p){var z;for(h=1;h<m;h++)z=b[h],z.y!=p.y&&(this.createOneLine(p,t,e,d,a,c),p=z),t=z;this.createOneLine(p,t,e,d,a,c)}};c.createOneLine=function(b,d,a,c,f,k){var e=d.y+d.height;a&&c.drawLine(b.x,e,d.x+d.width,e,k,2);a=Ic.create();a.rec.setTo(b.x,d.y,d.x+d.width-b.x,d.height);a.href=this.href;f.push(a)};g(0,c,"href",function(){return this._style?this._style.href:null},function(b){this._style&&b!=this._style.href&&(this._style.href=b,this.repaint())});g(0,c,"color",null,function(b){this.style.color=b});g(0,c,"id",null,function(b){Jc.document.setElementById(b,this)});g(0,c,"innerTEXT",function(){return this._text.text},function(b){this._text===a._EMPTYTEXT?this._text={text:b,words:null}:(this._text.text=b,this._text.words&&(this._text.words.length=0));this.repaint()});g(0,c,"style",function(){return this._style});g(0,c,"width",function(){return this._width},function(b){this._width!==b&&(this._width=b,this.repaint())});g(0,c,"x",function(){return this._x},function(b){this._x!=b&&(this._x=b,this.parentRepaint())});g(0,c,"y",function(){return this._y},function(b){this._y!=b&&(this._y=b,this.parentRepaint())});g(0,c,"height",function(){return this._height},function(b){this._height!==b&&(this._height=b,this.repaint())});g(0,c,"className",null,function(b){this.style.attrs(Jc.document.styleSheets["."+b])});a.formatURL1=function(b,d){if(!b)return"null path";d||(d=D.basePath);if(0<b.indexOf(":"))return b;null!=D.customFormat&&(b=D.customFormat(b));if(0<b.indexOf(":"))return b;var a=b.charAt(0);if("."===a)return D._formatRelativePath(d+b);if("~"===a)return D.rootPath+b.substring(1);if("d"===a){if(0===b.indexOf("data:image"))return b}else if("/"===a)return b;return d+b};a.getClassName=function(b){return"function"==typeof b?b.name:b.constructor.name};a._EMPTYTEXT={text:null,words:null};return a}(),fa=function(){function a(){}n(a,"laya.utils.RunDriver");a.getIncludeStr=function(a){return null};a.createShaderCondition=function(a){return l._runScript("(function() {return "+a+";})")};a.fontMap=[];a.measureText=function(c,b){var d=a.hanzi.test(c);if(d&&a.fontMap[b])return a.fontMap[b];var e=q.context;e.font=b;c=e.measureText(c);d&&(a.fontMap[b]=c);return c};a.drawToCanvas=function(a,b,d,e,h,f){d|=0;e|=0;h|=0;f|=0;var c=new xa,m=c.getContext("2d");c.size(d,e);Da.renders[b]._fun(a,m,h,f);return c};a.initRender=function(a,b,d){r._context=a.getContext("2d");a.size(b,d);return!0};a.createParticleTemplate2D=null;a.changeWebGLSize=function(a,b){};a.createRenderSprite=function(a,b){return new Da(a,b)};a.clear=function(a){r._context.clear()};a.getTexturePixels=function(a,b,d,e,h){return null};a.skinAniSprite=function(){return null};a.cancelLoadByUrl=function(a){};a.enableNative=null;u(a,["hanzi",function(){return this.hanzi=/^[\u4e00-\u9fa5]$/}]);return a}(),Yd=function(){function a(){}n(a,"laya.filters.BlurFilterGLRender");var c=a.prototype;c.render=function(b,d,a,c,f){var e=ma.create(1,0);this.setShaderInfo(e,f,b.width,b.height);d.drawTarget(b,0,0,a,c,C.EMPTY.identity(),e)};c.setShaderInfo=function(b,d,c,h){b.defines.add(16);a.blurinfo[0]=c;a.blurinfo[1]=h;b.blurInfo=a.blurinfo;c=d.strength/3;c*=c;d.strength_sig2_2sig2_gauss1[0]=d.strength;d.strength_sig2_2sig2_gauss1[1]=c;d.strength_sig2_2sig2_gauss1[2]=2*c;d.strength_sig2_2sig2_gauss1[3]=1/(2*Math.PI*c);b.strength_sig2_2sig2_gauss1=d.strength_sig2_2sig2_gauss1};u(a,["blurinfo",function(){return this.blurinfo=Array(2)}]);return a}(),Ic=function(){function a(){this.rec=new M;this.reset()}n(a,"laya.html.dom.HTMLHitRect");var c=a.prototype;c.reset=function(){this.rec.reset();this.href=null;return this};c.recover=function(){v.recover("HTMLHitRect",this.reset())};a.create=function(){return v.getItemByClass("HTMLHitRect",a)};return a}(),Hd=function(){function a(){}n(a,"laya.display.cmd.ScaleCmd");var c=a.prototype;c.recover=function(){v.recover("ScaleCmd",this)};c.run=function(b,d,a){b._scale(this.scaleX,this.scaleY,this.pivotX+d,this.pivotY+a)};g(0,c,"cmdID",function(){return"Scale"});a.create=function(b,d,c,h){var e=v.getItemByClass("ScaleCmd",a);e.scaleX=b;e.scaleY=d;e.pivotX=c;e.pivotY=h;return e};a.ID="Scale";return a}(),Ad=function(){function a(){}n(a,"laya.display.cmd.FillBorderTextCmd");var c=a.prototype;c.recover=function(){v.recover("FillBorderTextCmd",this)};c.run=function(b,d,a){b.fillBorderText(this.text,this.x+d,this.y+a,this.font,this.fillColor,this.borderColor,this.lineWidth,this.textAlign)};g(0,c,"cmdID",function(){return"FillBorderText"});a.create=function(b,d,c,h,f,k,m,p){var e=v.getItemByClass("FillBorderTextCmd",a);e.text=b;e.x=d;e.y=c;e.font=h;e.fillColor=f;e.borderColor=k;e.lineWidth=m;e.textAlign=p;return e};a.ID="FillBorderText";return a}(),Ed=function(){function a(){}n(a,"laya.display.cmd.AlphaCmd");var c=a.prototype;c.recover=function(){v.recover("AlphaCmd",this)};c.run=function(b,d,a){b.alpha(this.alpha)};g(0,c,"cmdID",function(){return"Alpha"});a.create=function(b){var d=v.getItemByClass("AlphaCmd",a);d.alpha=b;return d};a.ID="Alpha";return a}();(function(){function a(b,d,a){this.height=this.width=0;this.nodes=null;var c;"number"==typeof b?c=b:(d=b.length,c=b[0].length,a=b);this.width=c;this.height=d;this.nodes=this._buildNodes(c,d,a)}n(a,"PathFinding.core.Grid",null,"Grid$1");var c=a.prototype;c._buildNodes=function(b,d,a){var c,e,k=[];for(c=0;c<d;++c)for(k[c]=[],e=0;e<b;++e)k[c][e]=new Kc(e,c);if(null==a)return k;if(a.length!=d||a[0].length!=b)throw Error("Matrix size does not fit");for(c=0;c<d;++c)for(e=0;e<b;++e)a[c][e]&&(k[c][e].walkable=!1);return k};c.getNodeAt=function(b,d){return this.nodes[d][b]};c.isWalkableAt=function(b,d){return this.isInside(b,d)&&this.nodes[d][b].walkable};c.isInside=function(b,d){return 0<=b&&b<this.width&&0<=d&&d<this.height};c.setWalkableAt=function(b,d,a){this.nodes[d][b].walkable=a};c.getNeighbors=function(b,d){var a=b.x;b=b.y;var c=[],f=!1,k=!1,m=!1,p=!1,t=this.nodes;this.isWalkableAt(a,b-1)&&(c.push(t[b-1][a]),f=!0);this.isWalkableAt(a+1,b)&&(c.push(t[b][a+1]),k=!0);this.isWalkableAt(a,b+1)&&(c.push(t[b+1][a]),m=!0);this.isWalkableAt(a-1,b)&&(c.push(t[b][a-1]),p=!0);if(d==Eb.Never)return c;if(d==Eb.OnlyWhenNoObstacles)d=p&&f,f=f&&k,k=k&&m,m=m&&p;else if(d==Eb.IfAtMostOneObstacle)d=p||f,f=f||k,k=k||m,m=m||p;else if(d==Eb.Always)m=k=f=d=!0;else throw Error("Incorrect value of diagonalMovement");d&&this.isWalkableAt(a-1,b-1)&&c.push(t[b-1][a-1]);f&&this.isWalkableAt(a+1,b-1)&&c.push(t[b-1][a+1]);k&&this.isWalkableAt(a+1,b+1)&&c.push(t[b+1][a+1]);m&&this.isWalkableAt(a-1,b+1)&&c.push(t[b+1][a-1]);return c};c.clone=function(){var b,d,c=this.width,h=this.height,f=this.nodes,k=new a(c,h),m=[];for(b=0;b<h;++b)for(m[b]=[],d=0;d<c;++d)m[b][d]=new Kc(d,b,f[b][d].walkable);k.nodes=m;return k};c.reset=function(){for(var b,d=0;d<this.height;++d)for(var a=0;a<this.width;++a)b=this.nodes[d][a],b.g=0,b.f=0,b.h=0,b.by=0,b.parent=null,b.opened=null,b.closed=null,b.tested=null};a.createGridFromAStarMap=function(b){var d=b.width,c=b.height;b=b.getPixels();for(var h=[],f=0,k=0;k<d;k++)for(var m=h[k]=[],p=0;p<c;p++){var t=b[f++],z=b[f++],g=b[f++],l=b[f++];m[p]=255==t&&255==z&&255==g&&255==l?1:0}return new a(d,c,h)};return a})();var Zd=function(){function a(){this._div=this._url=this._fontTxt=this.err=this.complete=this.fontName=null;this._txtWidth=NaN;this._http=null}n(a,"laya.net.TTFLoader");var c=a.prototype;c.load=function(b){this._url=b;b=b.split(".ttf")[0].split("/");this.fontName=b[b.length-1];r.isConchApp?this._loadConch():q.window.FontFace?this._loadWithFontFace():this._loadWithCSS()};c._loadConch=function(){this._http=new Wb;this._http.on("error",this,this._onErr);this._http.on("complete",this,this._onHttpLoaded);this._http.send(this._url,null,"get","arraybuffer")};c._onHttpLoaded=function(b){q.window.conchTextCanvas.setFontFaceFromBuffer(this.fontName,b);this._clearHttp();this._complete()};c._clearHttp=function(){this._http&&(this._http.off("error",this,this._onErr),this._http.off("complete",this,this._onHttpLoaded),this._http=null)};c._onErr=function(){this._clearHttp();this.err&&(this.err.runWith("fail:"+this._url),this.err=null)};c._complete=function(){l.systemTimer.clear(this,this._complete);l.systemTimer.clear(this,this._checkComplete);this._div&&this._div.parentNode&&(this._div.parentNode.removeChild(this._div),this._div=null);this.complete&&(this.complete.runWith(this),this.complete=null)};c._checkComplete=function(){fa.measureText("LayaTTFFont",this._fontTxt).width!=this._txtWidth&&this._complete()};c._loadWithFontFace=function(){var b=new q.window.FontFace(this.fontName,"url('"+this._url+"')");q.window.document.fonts.add(b);var d=this;b.loaded.then(function(){d._complete()});b.load()};c._createDiv=function(){this._div=q.createElement("div");this._div.innerHTML="laya";var b=this._div.style;b.fontFamily=this.fontName;b.position="absolute";b.left="-100px";b.top="-100px";q.document.body.appendChild(this._div)};c._loadWithCSS=function(){var b=this,d=q.createElement("style");d.type="text/css";q.document.body.appendChild(d);d.textContent="@font-face { font-family:'"+this.fontName+"'; src:url('"+this._url+"');}";this._fontTxt="40px "+this.fontName;this._txtWidth=fa.measureText("LayaTTFFont",this._fontTxt).width;var a=this;d.onload=function(){l.systemTimer.once(1E4,a,b._complete)};l.systemTimer.loop(20,this,this._checkComplete);this._createDiv()};a._testString="LayaTTFFont";return a}(),Nd=function(){function a(){}n(a,"laya.display.cmd.DrawCurvesCmd");var c=a.prototype;c.recover=function(){this.lineColor=this.points=null;v.recover("DrawCurvesCmd",this)};c.run=function(b,d,a){b.drawCurves(this.x+d,this.y+a,this.points,this.lineColor,this.lineWidth)};g(0,c,"cmdID",function(){return"DrawCurves"});a.create=function(b,d,c,h,f){var e=v.getItemByClass("DrawCurvesCmd",a);e.x=b;e.y=d;e.points=c;e.lineColor=h;e.lineWidth=f;return e};a.ID="DrawCurves";return a}(),$d=function(){function a(b,d,a){this._texCount=this._height=this._width=this.atlasID=0;this._cells=this._rowInfo=null;this._used=0;void 0===b&&(b=0);void 0===d&&(d=0);void 0===a&&(a=0);this._rowInfo=this._cells=null;this.atlasID=a;this._init(b,d)}n(a,"laya.webgl.text.AtlasGrid");var c=a.prototype;c.addRect=function(b,d,a,c){if(!this._get(d,a,c))return!1;this._fill(c.x,c.y,d,a,b);this._texCount++;return!0};c._release=function(){this._rowInfo=this._cells=null};c._init=function(b,d){this._width=b;this._height=d;this._release();if(0==this._width)return!1;this._cells=new Uint8Array(this._width*this._height*3);this._rowInfo=new Uint8Array(this._height);this._used=0;this._clear();return!0};c._get=function(b,d,a){if(b>this._width||d>this._height)return!1;for(var c,e,k=this._width,m=this._height,p=this._cells,t=0;t<m;t++)if(!(this._rowInfo[t]<b))for(var z=0;z<k;){var g=3*(t*k+z);if(0!=p[g]||p[g+1]<b||p[g+2]<d)z+=p[g+1];else{c=z;e=t;for(var l=0;l<b;l++)if(p[3*l+g+2]<d){c=-1;break}if(0>c)z+=p[g+1];else return a.x=c,a.y=e,!0}}return!1};c._fill=function(b,d,a,c,f){var e=this._width,h=this._height;this._check(b+a<=e&&d+c<=h);for(h=d;h<c+d;++h){this._check(this._rowInfo[h]>=a);this._rowInfo[h]-=a;for(var p=0;p<a;p++){var t=3*(b+h*e+p);this._check(0==this._cells[t]);this._cells[t]=f;this._cells[t+1]=a;this._cells[t+2]=c}}if(0<b)for(h=0;h<c;++h){f=0;for(p=b-1;0<=p&&0==this._cells[3*((d+h)*e+p)];--p,++f);for(p=f;0<p;--p)this._cells[3*((d+h)*e+b-p)+1]=p,this._check(0<p)}if(0<d)for(p=b;p<b+a;++p){f=0;for(h=d-1;0<=h&&0==this._cells[3*(p+h*e)];--h,f++);for(h=f;0<h;--h)this._cells[3*(p+(d-h)*e)+2]=h,this._check(0<h)}this._used+=a*c/(this._width*this._height)};c._check=function(b){0==b&&console.log("xtexMerger \u9519\u8bef\u5566")};c._clear=function(){for(var b=this._texCount=0;b<this._height;b++)this._rowInfo[b]=this._width;for(b=0;b<this._height;b++)for(var d=0;d<this._width;d++){var a=3*(b*this._width+d);this._cells[a]=0;this._cells[a+1]=this._width-d;this._cells[a+2]=this._width-b}};return a}(),R=function(){function a(){}n(a,"laya.webgl.WebGL");a._uint8ArraySlice=function(){for(var a=this.length,b=new Uint8Array(this.length),d=0;d<a;d++)b[d]=this[d];return b};a._float32ArraySlice=function(){for(var a=this.length,b=new Float32Array(this.length),d=0;d<a;d++)b[d]=this[d];return b};a._uint16ArraySlice=function(a){var b=arguments,d,c;if(0===b.length)for(d=this.length,c=new Uint16Array(d),b=0;b<d;b++)c[b]=this[b];else if(2===b.length){d=b[0];var h=b[1];if(h>d)for(c=new Uint16Array(h-d),b=d;b<h;b++)c[b-d]=this[b];else c=new Uint16Array(0)}return c};a._nativeRender_enable=function(){a.isNativeRender_enable||(a.isNativeRender_enable=!0,qb.create=function(a,b){a=new ua(a,b,1,!1,!1);a.wrapModeU=1;a.wrapModeV=1;return a},K.__init_native(),Ta.prototype.uploadTexture2D=function(a){var b=K;b.bindTexture(laya.webgl.WebGL.mainContext,b.TEXTURE_2D,a)},Q.width=q.window.innerWidth,Q.height=q.window.innerHeight,fa.measureText=function(a,b){w.conchTextCanvas.font=b;return w.conchTextCanvas.measureText(a)},fa.enableNative=function(){r.supportWebGLPlusRendering&&(Lc.uploadShaderUniforms=Lc.uploadShaderUniformsForNative,Xb=w.GLCommandEncoder,O=w.LayaGLContext);var a=Bc;a.prototype.render=a.prototype.renderToNative},fa.clear=function(a){Za.set2DRenderConfig();a=ba.create(a).arrColor;var b=O.instance;a&&b.clearColor(a[0],a[1],a[2],a[3]);b.clear(17664);Q.clear()},fa.drawToCanvas=function(a,b,d,e,h,f){h-=a.x;f-=a.y;h|=0;f|=0;d|=0;e|=0;var c=new xa(!1),m=c.getContext("2d");c.size(d,e);m.asBitmap=!0;m._targets.start();m._targets.clear();Da.renders[b]._fun(a,m,h,f);m.flush();m._targets.end();m._targets.restore();return c},Fa.prototype._uv=Fa.flipyuv,Object.defineProperty(Fa.prototype,"uv",{get:function(){return this._uv},set:function(a){this._uv=a}}),xa.prototype.getTexture=function(){this._texture||(this._texture=this.context._targets,this._texture.uv=Fa.flipyuv,this._texture.bitmap=this._texture);return this._texture})};a._webglRender_enable=function(){r.isWebGL||(r.isWebGL=!0,fa.initRender=function(c,b,d){var e=O,h=laya.webgl.WebGL,f;a:{f=r._mainCanvas.source;var k,m=["webgl2","webgl","experimental-webgl","webkit-3d","moz-webgl"];ya.useWebGL2||m.shift();for(var p=0;p<m.length;p++){try{k=f.getContext(m[p],{stencil:ya.isStencil,alpha:ya.isAlpha,antialias:ya.isAntialias,premultipliedAlpha:ya.premultipliedAlpha,preserveDrawingBuffer:ya.preserveDrawingBuffer})}catch(t){}if(k){"webgl2"===m[p]&&(laya.webgl.WebGL._isWebGL2=!0);new O;f=k;break a}}f=null}e=e.instance=h.mainContext=f;if(!e)return!1;c.size(b,d);K.__init__(e);Za.__init__();ea.__init__();b=new Za;r._context=b;c._setContext(b);laya.webgl.WebGL.shaderHighPrecision=!1;try{e.getShaderPrecisionFormat(35632,36338).precision?a.shaderHighPrecision=!0:a.shaderHighPrecision=!1}catch(t){}O.instance=e;ae.__init__();Ub.__init__();ma.__init__();Yb.__init__();Zb.__int__(e);la._init_(e);return!0},qb.create=function(a,b,d){a=new ua(a,b,d,!1,!1);a.wrapModeU=1;a.wrapModeV=1;return a},fa.createRenderSprite=function(a,b){return new be(a,b)},fa.changeWebGLSize=function(a,b){laya.webgl.WebGL.onStageResize(a,b)},fa.clear=function(a){Za.set2DRenderConfig();Q.worldScissorTest&&laya.webgl.WebGL.mainContext.disable(3089);var b=r.context;(a=0==b._submits._length||ya.preserveDrawingBuffer?ba.create(a).arrColor:l.stage._wgColor)?b.clearBG(a[0],a[1],a[2],a[3]):b.clearBG(0,0,0,0);Q.clear()},fa.drawToCanvas=function(a,b,d,e,h,f){h-=a.x;f-=a.y;h|=0;f|=0;d|=0;e|=0;var c=new Za;c.size(d,e);c.asBitmap=!0;c._targets.start();c._targets.clear();Da.renders[b]._fun(a,c,h,f);c.flush();c._targets.end();c._targets.restore();a=c._targets.getData(0,0,d,e);c.destroy();c=new ImageData(d,e);b=4*d;new Uint8Array(b);h=c.data;f=e-1;for(var m=f*b,p=0;0<=f;f--)h.set(a.subarray(p,p+b),m),m-=b,p+=b;a=new xa(!0);a.size(d,e);a.getContext("2d").putImageData(c,0,0);return a},fa.getTexturePixels=function(a,b,d,e,h){var c,k=a.bitmap;c=k.width;var m=k.height;b+e>c&&(e-=b+e-c);d+h>m&&(h-=d+h-m);if(0>=e||0>=h)return null;var p=4*e,t=null;try{t=k.getPixels()}catch(Aa){}if(t){if(0==b&&0==d&&e==c&&h==m)return t;a=new Uint8Array(e*h*4);p=4*c;c=4*b;b=(d+h-1)*p+4*b;for(--h;0<=h;h--)a.set(g.slice(b,b+4*e),c),c+=p,b-=p;return a}k=new Za;k.size(e,h);k.asBitmap=!0;var z=null;if(0!=b||0!=d||e!=c||h!=m)z=a.uv.concat(),g=z[0],t=z[1],c=(z[2]-g)/c,m=(z[7]-t)/m,z=[g+b*c,t+d*m,g+(b+e)*c,t+d*m,g+(b+e)*c,t+(d+h)*m,g+b*c,t+(d+h)*m];k._drawTextureM(a,0,0,e,h,null,1,z);k._targets.start();k._targets.clear();k.flush();k._targets.end();k._targets.restore();var g=k._targets.getData(0,0,e,h);k.destroy();a=new Uint8Array(e*h*4);c=0;b=(h-1)*p;for(--h;0<=h;h--)a.set(g.slice(b,b+p),c),c+=p,b-=p;return a},rb._filter=function(a,b,d,e){var c=this._next;if(c){var f=a.filters,k=f.length;if(1==k&&32==f[0].type)b.save(),b.setColorFilter(f[0]),c._fun.call(c,a,b,d,e),b.restore();else{var m=ma.create(1,0),p,t=P.TEMP,z=b._curMat,g=C.create();z.copyTo(g);var l=0,n=0;p=!1;var z=null,G=a._cacheStyle.filterCache||null;if(G&&0==a.getRepaint()){if(p=a._cacheStyle.hasGlowFilter||!1)l=50,n=25;p=a.getBounds();if(0>=p.width||0>=p.height)return;p.width+=l;p.height+=l;t.x=p.x*g.a+p.y*g.c;t.y=p.y*g.d+p.x*g.b;p.x=t.x;p.y=t.y;t.x=p.width*g.a+p.height*g.c;t.y=p.height*g.d+p.width*g.b;p.width=t.x;p.height=t.y}else{if(p=a._isHaveGlowFilter())l=50,n=25;p=new M;p.copyFrom(a.getSelfBounds());p.x+=a.x;p.y+=a.y;p.x-=a.pivotX+4;p.y-=a.pivotY+4;var y=p.x,q=p.y;p.width+=l+8;p.height+=l+8;t.x=p.x*g.a+p.y*g.c;t.y=p.y*g.d+p.x*g.b;p.x=t.x;p.y=t.y;t.x=p.width*g.a+p.height*g.c;t.y=p.height*g.d+p.width*g.b;p.width=t.x;p.height=t.y;if(0>=p.width||0>=p.height)return;G&&sb.releaseRT(G);z=sb.getRT(p.width,p.height);l=G=sb.getRT(p.width,p.height);a._getCacheStyle().filterCache=G;b.pushRT();b.useRT(z);c._fun.call(c,a,b,a.x-y+n,a.y-q+n);b.useRT(l);for(c=0;c<k;c++)switch(0!=c&&(b.useRT(z),b.drawTarget(l,0,0,p.width,p.height,C.TEMP.identity(),m,null,la.TOINT.overlay),b.useRT(l)),y=f[c],y.type){case 16:y._glRender&&y._glRender.render(z,b,p.width,p.height,y);break;case 8:y._glRender&&y._glRender.render(z,b,p.width,p.height,y);break;case 32:b.setColorFilter(y),b.drawTarget(z,0,0,p.width,p.height,C.EMPTY.identity(),ma.create(1,0)),b.setColorFilter(null)}b.popRT()}d=d-n-a.x;e=e-n-a.y;t.setTo(d,e);g.transformPoint(t);d=t.x+p.x;e=t.y+p.y;b._drawRenderTexture(G,d,e,p.width,p.height,C.TEMP.identity(),1,Fa.defuv);z&&(a=Ga.create([z],function(d){d.destroy()},this),z=null,b.addRenderObject(a));g.destroy()}}},xa.prototype.getTexture=function(){if(!this._texture){var a=new ua;a.loadImageSource(this.source);this._texture=new ga(a)}return this._texture},Float32Array.prototype.slice||(Float32Array.prototype.slice=a._float32ArraySlice),Uint16Array.prototype.slice||(Uint16Array.prototype.slice=a._uint16ArraySlice),Uint8Array.prototype.slice||(Uint8Array.prototype.slice=a._uint8ArraySlice))};a.enable=function(){q.__init__();if(!q._supportWebGL)return!1;a._webglRender_enable();r.isConchApp&&a._nativeRender_enable();return!0};a.onStageResize=function(c,b){null!=a.mainContext&&(a.mainContext.viewport(0,0,c,b),Q.width=c,Q.height=b)};a.mainContext=null;a.shaderHighPrecision=!1;a._isWebGL2=!1;a.isNativeRender_enable=!1;return a}(),Ga=function(){function a(){this.args=this._this=this.fun=null;this._ref=1;this._key=new Db}n(a,"laya.webgl.submit.SubmitCMD");var c=a.prototype;l.imps(c,{"laya.webgl.submit.ISubmit":!0});c.renderSubmit=function(){this.fun.apply(this._this,this.args);return 1};c.getRenderType=function(){return 0};c.reUse=function(b,d){this._ref++;return d};c.releaseRender=function(){if(1>--this._ref){var b=a.POOL;b[b._length++]=this}};c.clone=function(b,d,a){return null};a.create=function(b,d,c){var e=a.POOL._length?a.POOL[--a.POOL._length]:new a;e.fun=d;e.args=b;e._this=c;e._ref=1;e._key.clear();return e};a.POOL=(a.POOL=[],a.POOL._length=0,a.POOL);return a}(),ce=function(){function a(){this._clipInfoID=-1;this._globalClipMatrix=new C;this._clipRect=new M}n(a,"laya.webgl.canvas.save.SaveClipRect");var c=a.prototype;l.imps(c,{"laya.webgl.canvas.save.ISaveData":!0});c.isSaveMark=function(){return!1};c.restore=function(b){this._globalClipMatrix.copyTo(b._globalClipMatrix);this._clipRect.clone(b._clipRect);b._clipInfoID=this._clipInfoID;a.POOL[a.POOL._length++]=this};a.save=function(b){if(131072!=(b._saveMark._saveuse&131072)){b._saveMark._saveuse|=131072;var d=a.POOL,d=0<d._length?d[--d._length]:new a;b._globalClipMatrix.copyTo(d._globalClipMatrix);b._clipRect.clone(d._clipRect);d._clipInfoID=b._clipInfoID;b=b._save;b[b._length++]=d}};a.POOL=na._createArray();return a}(),Ua=function(){function a(){}n(a,"laya.webgl.utils.CONST3D2D");a.BYTES_PE=4;a.BYTES_PIDX=2;a.defaultMatrix4=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1];a.defaultMinusYMatrix4=[1,0,0,0,0,-1,0,0,0,0,1,0,0,0,0,1];a.uniformMatrix3=[1,0,0,0,0,1,0,0,0,0,1,0];a._TMPARRAY=[];a._OFFSETX=0;a._OFFSETY=0;return a}(),de=function(){function a(){this._id=U.getGID();this._resetComp()}n(a,"laya.components.Component");var c=a.prototype;l.imps(c,{"laya.resource.ISingletonElement":!0,"laya.resource.IDestroy":!0});c._isScript=function(){return!1};c._resetComp=function(){this._indexInList=-1;this._enabled=!0;this._awaked=!1;this.owner=null};c._getIndexInList=function(){return this._indexInList};c._setIndexInList=function(b){this._indexInList=b};c._onAdded=function(){};c._onAwake=function(){};c._onEnable=function(){};c._onDisable=function(){};c._onEnableInScene=function(){};c._onDisableInScene=function(){};c._onDestroy=function(){};c.onReset=function(){};c._parse=function(b){};c._cloneTo=function(b){};c._setActive=function(b){b?(this._awaked||(this._awaked=!0,this._onAwake()),this._enabled&&this._onEnable()):this._enabled&&this._onDisable()};c._setActiveInScene=function(b){b?this._onEnableInScene():this._onDisableInScene()};c.destroy=function(){this.owner&&this.owner._destroyComponent(this)};c._destroy=function(){this.owner.activeInHierarchy&&this._enabled&&(this._setActive(!1),this._isScript()&&this.onDisable());this.owner._scene&&this._setActiveInScene(!1);this._onDestroy();this._destroyed=!0;this.onReset!==laya.components.Component.prototype.onReset?(this.onReset(),this._resetComp(),v.recoverByClass(this)):this._resetComp()};g(0,c,"id",function(){return this._id});g(0,c,"enabled",function(){return this._enabled},function(b){this._enabled=b;this.owner&&(b?this.owner.activeInHierarchy&&this._onEnable():this.owner.activeInHierarchy&&this._onDisable())});g(0,c,"isSingleton",function(){return!0});g(0,c,"destroyed",function(){return this._destroyed});return a}(),ee=function(){function a(){}n(a,"laya.debug.tools.enginehook.RenderSpriteHook");a.prototype._canvas=function(c,b,d,e){var h=c._cacheStyle;if(h.enableCanvasRender){var h=c._needRepaint()||!h.canvas?!0:!1,f;f=q.now();a._oldCanvas.call(this,c,b,d,e);h?hb.I.reCacheCanvas(c,q.now()-f):hb.I.renderCanvas(c,q.now()-f)}else a._oldCanvas.call(this,c,b,d,e)};a.init=function(){a._oldCanvas||(a._oldCanvas=Da.prototype._canvas,Da.prototype._canvas=a.prototype._canvas)};a.IMAGE=1;a.FILTERS=2;a.ALPHA=4;a.TRANSFORM=8;a.CANVAS=16;a.BLEND=32;a.CLIP=64;a.STYLE=128;a.GRAPHICS=256;a.CUSTOM=512;a.ENABLERENDERMERGE=1024;a.CHILDS=2048;a.INIT=69905;a.renders=[];a._oldCanvas=null;a.I=null;a._preCreateFun=null;return a}(),Eb=function(){function a(){}n(a,"PathFinding.core.DiagonalMovement");a.Always=1;a.Never=2;a.IfAtMostOneObstacle=3;a.OnlyWhenNoObstacles=4;return a}();(function(){function a(){}n(a,"laya.display.SpriteConst");a.POSRENDERTYPE=0;a.POSBUFFERBEGIN=1;a.POSBUFFEREND=2;a.POSFRAMECOUNT=3;a.POSREPAINT=4;a.POSVISIBLE_NATIVE=5;a.POSX=6;a.POSY=7;a.POSPIVOTX=8;a.POSPIVOTY=9;a.POSSCALEX=10;a.POSSCALEY=11;a.POSSKEWX=12;a.POSSKEWY=13;a.POSROTATION=14;a.POSTRANSFORM_FLAG=15;a.POSMATRIX=16;a.POSCOLOR=22;a.POSGRAPICS=23;a.POSSIM_TEXTURE_ID=24;a.POSSIM_TEXTURE_DATA=25;a.POSLAYAGL3D=26;a.POSCUSTOM=27;a.POSCLIP=28;a.POSCLIP_NEG_POS=32;a.POSCOLORFILTER_COLOR=34;a.POSCOLORFILTER_ALPHA=50;a.POSCALLBACK_OBJ_ID=54;a.POSCUSTOM_CALLBACK_FUN_ID=55;a.POSCANVAS_CALLBACK_FUN_ID=56;a.POSCANVAS_CALLBACK_END_FUN_ID=57;a.POSCANVAS_BEGIN_CMD_ID=58;a.POSCANVAS_END_CMD_ID=59;a.POSCANVAS_DRAW_TARGET_CMD_ID=60;a.POSCANVAS_DRAW_TARGET_PARAM_ID=61;a.POSLAYA3D_FUN_ID=62;a.POSCACHE_CANVAS_SKIP_PAINT_FLAG=63;a.POSFILTER_BEGIN_CMD_ID=64;a.POSFILTER_CALLBACK_FUN_ID=65;a.POSFILTER_END_CMD_ID=66;a.POSFILTER_END_CALLBACK_FUN_ID=67;a.POSGRAPHICS_CALLBACK_FUN_ID=68;a.POSMASK_CALLBACK_FUN_ID=69;a.POSMASK_CMD_ID=70;a.POSBLEND_SRC=71;a.POSBLEND_DEST=72;a.POSSIM_RECT_FILL_CMD=73;a.POSSIM_RECT_FILL_DATA=74;a.POSSIM_RECT_STROKE_CMD=75;a.POSSIM_RECT_STROKE_DATA=76;a.POSSIZE=77;a.ALPHA=1;a.TRANSFORM=2;a.BLEND=4;a.CANVAS=8;a.FILTERS=16;a.MASK=32;a.CLIP=64;a.STYLE=128;a.TEXTURE=256;a.GRAPHICS=512;a.LAYAGL3D=1024;a.CUSTOM=2048;a.ONECHILD=4096;a.CHILDS=8192;a.REPAINT_NONE=0;a.REPAINT_NODE=1;a.REPAINT_CACHE=2;a.REPAINT_ALL=3;return a})();var $a=function(){function a(){this.key=this.target=null;this._tValue=NaN;this.preValue=0}n(a,"laya.debug.tools.ValueChanger");var c=a.prototype;c.record=function(){this.preValue=this.value};c.showValueByAdd=function(b){this.value=this.preValue+b};c.showValueByScale=function(b){this.value=this.preValue*b};c.recover=function(){this.value=this.preValue};c.dispose=function(){this.target=null};g(0,c,"value",function(){this.target&&(this._tValue=this.target[this.key]);return this._tValue},function(b){this._tValue=b;this.target&&(this.target[this.key]=b)});g(0,c,"dValue",function(){return this.value-this.preValue});g(0,c,"scaleValue",function(){return this.value/this.preValue});a.create=function(b,d){var c;c=new a;c.target=b;c.key=d;return c};return a}(),tb=function(){function a(){}n(a,"laya.debug.tools.DebugConsts");a.CLICK_SELECT_COLOR="#ff0000";a.CANVAS_REC_COLOR="#FF00FF";a.RECACHE_REC_COLOR="#00ff00";a.SPRITE_REC_COLOR="#ff0000";a.SPRITE_REC_LINEWIDTH=2;return a}(),fe=function(){function a(){this.gid=-1;this.texture=null;this.offY=this.offX=0;this.durationTimeArray=this.textureArray=null;this.animationTotalTime=0;this.isAnimation=!1;this._spriteNum=0;this._aniDic=null;this._preFrameTime=this._interval=this._time=this._frameIndex=0}n(a,"laya.map.TileTexSet");var c=a.prototype;c.addAniSprite=function(b,d){0!=this.animationTotalTime&&(null==this._aniDic&&(this._aniDic={}),0==this._spriteNum&&(l.timer.frameLoop(3,this,this.animate),this._preFrameTime=q.now(),this._interval=this._time=this._frameIndex=0),this._spriteNum++,this._aniDic[b]=d,this.textureArray&&this._frameIndex<this.textureArray.length&&this.drawTexture(d,this.textureArray[this._frameIndex]))};c.animate=function(){if(this.textureArray&&0<this.textureArray.length&&this.durationTimeArray&&0<this.durationTimeArray.length){var b=q.now();this._interval=b-this._preFrameTime;this._preFrameTime=b;this._interval>this.animationTotalTime&&(this._interval%=this.animationTotalTime);this._time+=this._interval;for(b=this.durationTimeArray[this._frameIndex];this._time>b;){this._time-=b;this._frameIndex++;if(this._frameIndex>=this.durationTimeArray.length||this._frameIndex>=this.textureArray.length)this._frameIndex=0;var b=this.textureArray[this._frameIndex],d,a;for(a in this._aniDic)d=this._aniDic[a],this.drawTexture(d,b);b=this.durationTimeArray[this._frameIndex]}}};c.drawTexture=function(b,d){b.graphics.clear(!0);b.graphics.drawImage(d.texture,d.offX,d.offY)};c.removeAniSprite=function(b){this._aniDic&&this._aniDic[b]&&(delete this._aniDic[b],this._spriteNum--,0==this._spriteNum&&l.timer.clear(this,this.animate))};c.showDebugInfo=function(){var b=null;0<this._spriteNum&&(b="TileTextureSet::gid:"+this.gid.toString()+" \u52a8\u753b\u6570:"+this._spriteNum.toString());return b};c.clearAll=function(){this.gid=-1;this.texture&&(this.texture.destroy(),this.texture=null);this.offY=this.offX=0;this.durationTimeArray=this.textureArray=null;this.isAnimation=!1;this._spriteNum=0;this._aniDic=null;this._interval=this._time=this._preFrameTime=this._frameIndex=0};return a}(),ge=function(){function a(){this.timeDic={};this.resultDic={};this.countDic={};this.resultCountDic={};this.nodeDic={};this.resultNodeDic={}}n(a,"laya.debug.tools.ObjTimeCountTool");var c=a.prototype;c.addTime=function(b,d){S.idObj(b);var a;a=S.getObjID(b);this.timeDic.hasOwnProperty(a)||(this.timeDic[a]=0);this.timeDic[a]+=d;this.countDic.hasOwnProperty(a)||(this.countDic[a]=0);this.countDic[a]+=1;this.nodeDic[a]=b};c.getTime=function(b){S.idObj(b);b=S.getObjID(b);return this.resultDic[b]?this.resultDic[b]:0};c.getCount=function(b){S.idObj(b);b=S.getObjID(b);return this.resultCountDic[b]};c.reset=function(){for(var b in this.timeDic)this.timeDic[b]=0,this.countDic[b]=0;oa.clearObj(this.nodeDic)};c.updates=function(){oa.clearObj(this.resultDic);oa.insertValue(this.resultDic,this.timeDic);oa.clearObj(this.resultCountDic);oa.insertValue(this.resultCountDic,this.countDic);oa.insertValue(this.resultNodeDic,this.nodeDic);this.reset()};return a}(),$b=function(){function a(){this.reset()}n(a,"laya.display.css.CacheStyle");var c=a.prototype;c.needBitmapCache=function(){return this.cacheForFilters||!!this.mask};c.needEnableCanvasRender=function(){return"none"!=this.userSetCache||this.cacheForFilters||!!this.mask};c.releaseContext=function(){this.canvas&&this.canvas.size&&(v.recover("CacheCanvas",this.canvas),this.canvas.size(0,0));this.canvas=null};c.createContext=function(){this.canvas||(this.canvas=v.getItem("CacheCanvas")||new xa(!r.isWebGL),this.canvas.context||this.canvas.getContext("2d"))};c.releaseFilterCache=function(){var b=this.filterCache;b&&(b.destroy(),b.recycle(),this.filterCache=null)};c.recover=function(){this!==a.EMPTY&&v.recover("SpriteCache",this.reset())};c.reset=function(){this.releaseContext();this.releaseFilterCache();this.cacheAs="none";this.enableCanvasRender=!1;this.userSetCache="none";this.staticCache=this.cacheForFilters=!1;this.reCache=!0;this.filters=this.filterCache=this.maskParent=this.mask=null;this.hasGlowFilter=!1;this.cacheRect&&this.cacheRect.recover();this.cacheRect=null;return this};c._calculateCacheRect=function(b,d,c,h){var e=!1;r.isWebGL&&(e=!0);var k=b._cacheStyle;k.cacheRect||(k.cacheRect=M.create());e&&"bitmap"!==d?k.cacheRect.setTo(-b._style.pivotX,-b._style.pivotY,1,1):(d=b.getSelfBounds(),d.width+=32,d.height+=32,d.x-=b.pivotX,d.y-=b.pivotY,d.x-=16,d.y-=16,d.x=Math.floor(d.x+c)-c,d.y=Math.floor(d.y+h)-h,d.width=Math.floor(d.width),d.height=Math.floor(d.height),k.cacheRect.copyFrom(d));d=k.cacheRect;c=e?1:q.pixelRatio*l.stage.clientScaleX;h=e?1:q.pixelRatio*l.stage.clientScaleY;if(!e){var k=e=1,m;for(m=b;m&&m!=l.stage;)e*=m.scaleX,k*=m.scaleY,m=m.parent;1<e&&(c*=e);1<k&&(h*=k)}b._style.scrollRect&&(b=b._style.scrollRect,d.x-=b.x,d.y-=b.y);a._scaleInfo.setTo(c,h);return a._scaleInfo};a.create=function(){return v.getItemByClass("SpriteCache",a)};a.EMPTY=new a;a.CANVAS_EXTEND_EDGE=16;u(a,["_scaleInfo",function(){return this._scaleInfo=new P}]);return a}(),K=function(){function a(){}n(a,"laya.webgl.WebGLContext");var c=a.prototype;c.getContextAttributes=function(){return null};c.isContextLost=function(){};c.getSupportedExtensions=function(){return null};c.getExtension=function(b){return null};c.activeTexture=function(b){};c.attachShader=function(b,d){};c.bindAttribLocation=function(b,d,a){};c.bindBuffer=function(b,d){};c.bindFramebuffer=function(b,d){};c.bindRenderbuffer=function(b,d){};c.bindTexture=function(b,d){};c.useTexture=function(b){};c.blendColor=function(b,d,a,c){};c.blendEquation=function(b){};c.blendEquationSeparate=function(b,d){};c.blendFunc=function(b,d){};c.blendFuncSeparate=function(b,d,a,c){};c.bufferData=function(b,d,a){};c.bufferSubData=function(b,d,a){};c.checkFramebufferStatus=function(b){return null};c.clear=function(b){};c.clearColor=function(b,d,a,c){};c.clearDepth=function(b){};c.clearStencil=function(b){};c.colorMask=function(b,d,a,c){};c.compileShader=function(b){};c.copyTexImage2D=function(b,d,a,c,f,k,m,p){};c.copyTexSubImage2D=function(b,d,a,c,f,k,m,p){};c.createBuffer=function(){};c.createFramebuffer=function(){};c.createProgram=function(){};c.createRenderbuffer=function(){};c.createShader=function(b){};c.createTexture=function(){return null};c.cullFace=function(b){};c.deleteBuffer=function(b){};c.deleteFramebuffer=function(b){};c.deleteProgram=function(b){};c.deleteRenderbuffer=function(b){};c.deleteShader=function(b){};c.deleteTexture=function(b){};c.depthFunc=function(b){};c.depthMask=function(b){};c.depthRange=function(b,d){};c.detachShader=function(b,d){};c.disable=function(b){};c.disableVertexAttribArray=function(b){};c.drawArrays=function(b,d,a){};c.drawElements=function(b,d,a,c){};c.enable=function(b){};c.enableVertexAttribArray=function(b){};c.finish=function(){};c.flush=function(){};c.framebufferRenderbuffer=function(b,d,a,c){};c.framebufferTexture2D=function(b,d,a,c,f){};c.frontFace=function(b){return null};c.generateMipmap=function(b){return null};c.getActiveAttrib=function(b,d){return null};c.getActiveUniform=function(b,d){return null};c.getAttribLocation=function(b,d){return 0};c.getParameter=function(b){return null};c.getBufferParameter=function(b,d){return null};c.getError=function(){return null};c.getFramebufferAttachmentParameter=function(b,d,a){};c.getProgramParameter=function(b,d){return 0};c.getProgramInfoLog=function(b){return null};c.getRenderbufferParameter=function(b,d){return null};c.getShaderPrecisionFormat=function(b){return null};c.getShaderParameter=function(b,d){};c.getShaderInfoLog=function(b){return null};c.getShaderSource=function(b){return null};c.getTexParameter=function(b,d){};c.getUniform=function(b,d){};c.getUniformLocation=function(b,d){return null};c.getVertexAttrib=function(b,d){return null};c.getVertexAttribOffset=function(b,d){return null};c.hint=function(b,d){};c.isBuffer=function(b){};c.isEnabled=function(b){};c.isFramebuffer=function(b){};c.isProgram=function(b){};c.isRenderbuffer=function(b){};c.isShader=function(b){};c.isTexture=function(b){};c.lineWidth=function(b){};c.linkProgram=function(b){};c.pixelStorei=function(b,d){};c.polygonOffset=function(b,d){};c.readPixels=function(b,d,a,c,f,k,m){};c.renderbufferStorage=function(b,d,a,c){};c.sampleCoverage=function(b,d){};c.scissor=function(b,d,a,c){};c.shaderSource=function(b,d){};c.stencilFunc=function(b,d,a){};c.stencilFuncSeparate=function(b,d,a,c){};c.stencilMask=function(b){};c.stencilMaskSeparate=function(b,d){};c.stencilOp=function(b,d,a){};c.stencilOpSeparate=function(b,d,a,c){};c.texImage2D=function(b){};c.texParameterf=function(b,d,a){};c.texParameteri=function(b,d,a){};c.texSubImage2D=function(b){};c.uniform1f=function(b,d){};c.uniform1fv=function(b,d){};c.uniform1i=function(b,d){};c.uniform1iv=function(b,d){};c.uniform2f=function(b,d,a){};c.uniform2fv=function(b,d){};c.uniform2i=function(b,d,a){};c.uniform2iv=function(b,d){};c.uniform3f=function(b,d,a,c){};c.uniform3fv=function(b,d){};c.uniform3i=function(b,d,a,c){};c.uniform3iv=function(b,d){};c.uniform4f=function(b,d,a,c,f){};c.uniform4fv=function(b,d){};c.uniform4i=function(b,d,a,c,f){};c.uniform4iv=function(b,d){};c.uniformMatrix2fv=function(b,d,a){};c.uniformMatrix3fv=function(b,d,a){};c.uniformMatrix4fv=function(b,d,a){};c.useProgram=function(b){};c.validateProgram=function(b){};c.vertexAttrib1f=function(b,d){};c.vertexAttrib1fv=function(b,d){};c.vertexAttrib2f=function(b,d,a){};c.vertexAttrib2fv=function(b,d){};c.vertexAttrib3f=function(b,d,a,c){};c.vertexAttrib3fv=function(b,d){};c.vertexAttrib4f=function(b,d,a,c,f){};c.vertexAttrib4fv=function(b,d){};c.vertexAttribPointer=function(b,d,a,c,f,k){};c.viewport=function(b,d,a,c){};c.configureBackBuffer=function(b,d,a,c,f){};c.compressedTexImage2D=function(b){};c.createVertexArray=function(){throw"not implemented";};c.bindVertexArray=function(b){throw"not implemented";};c.deleteVertexArray=function(b){throw"not implemented";};c.isVertexArray=function(b){throw"not implemented";};a.__init__=function(b){laya.webgl.WebGLContext._checkExtensions(b);if(!R._isWebGL2&&!r.isConchApp){he;w._setupVertexArrayObject&&(q.onMiniGame&&q.onIOS||q.onBDMiniGame||q.onLimixiu?w._forceSetupVertexArrayObject(b):w._setupVertexArrayObject(b));var d=(b.rawgl||b).getExtension("OES_vertex_array_object");d&&(console.log("EXT:webgl support OES_vertex_array_object\uff01"),b.createVertexArray=function(){return d.createVertexArrayOES()},b.bindVertexArray=function(b){d.bindVertexArrayOES(b)},b.deleteVertexArray=function(b){d.deleteVertexArrayOES(b)},b.isVertexArray=function(b){d.isVertexArrayOES(b)})}};a._getExtension=function(b,d){var c=a._extentionVendorPrefixes,h;for(h in c){var f=b.getExtension(c[h]+d);if(f)return f}return null};a._checkExtensions=function(b){a._extTextureFilterAnisotropic=a._getExtension(b,"EXT_texture_filter_anisotropic");a._compressedTextureS3tc=a._getExtension(b,"WEBGL_compressed_texture_s3tc");a._compressedTexturePvrtc=a._getExtension(b,"WEBGL_compressed_texture_pvrtc");a._compressedTextureEtc1=a._getExtension(b,"WEBGL_compressed_texture_etc1");a._angleInstancedArrays=a._getExtension(b,"ANGLE_instanced_arrays")};a.__init_native=function(){r.supportWebGLPlusRendering&&(a.activeTexture=a.activeTextureForNative,a.bindTexture=a.bindTextureForNative)};a.useProgram=function(b,d){if(a._useProgram===d)return!1;b.useProgram(d);a._useProgram=d;return!0};a.setDepthTest=function(b,d){d!==a._depthTest&&(a._depthTest=d,d?b.enable(2929):b.disable(2929))};a.setDepthMask=function(b,d){d!==a._depthMask&&(a._depthMask=d,b.depthMask(d))};a.setDepthFunc=function(b,d){d!==a._depthFunc&&(a._depthFunc=d,b.depthFunc(d))};a.setBlend=function(b,d){d!==a._blend&&(a._blend=d,d?b.enable(3042):b.disable(3042))};a.setBlendFunc=function(b,d,c){d===a._sFactor&&c===a._dFactor||(a._sFactor=a._srcAlpha=d,a._dFactor=a._dstAlpha=c,b.blendFunc(d,c))};a.setBlendFuncSeperate=function(b,d,c,h,f){if(d!==a._sFactor||c!==a._dFactor||h!==a._srcAlpha||f!==a._dstAlpha)a._sFactor=d,a._dFactor=c,a._srcAlpha=h,a._dstAlpha=f,b.blendFuncSeparate(d,c,h,f)};a.setCullFace=function(b,d){d!==a._cullFace&&(a._cullFace=d,d?b.enable(2884):b.disable(2884))};a.setFrontFace=function(b,d){d!==a._frontFace&&(a._frontFace=d,b.frontFace(d))};a.activeTexture=function(b,d){a._activedTextureID!==d&&(b.activeTexture(d),a._activedTextureID=d)};a.bindTexture=function(b,d,c){a._activeTextures[a._activedTextureID-33984]!==c&&(b.bindTexture(d,c),a._activeTextures[a._activedTextureID-33984]=c)};a.useProgramForNative=function(b,d){b.useProgram(d);return!0};a.setDepthTestForNative=function(b,d){d?b.enable(2929):b.disable(2929)};a.setDepthMaskForNative=function(b,d){b.depthMask(d)};a.setDepthFuncForNative=function(b,d){b.depthFunc(d)};a.setBlendForNative=function(b,d){d?b.enable(3042):b.disable(3042)};a.setBlendFuncForNative=function(b,d,a){b.blendFunc(d,a)};a.setCullFaceForNative=function(b,d){d?b.enable(2884):b.disable(2884)};a.setFrontFaceForNative=function(b,d){b.frontFace(d)};a.activeTextureForNative=function(b,d){b.activeTexture(d)};a.bindTextureForNative=function(b,d,a){b.bindTexture(d,a)};a.bindVertexArrayForNative=function(b,d){b.bindVertexArray(d)};a.DEPTH_BUFFER_BIT=256;a.STENCIL_BUFFER_BIT=1024;a.COLOR_BUFFER_BIT=16384;a.POINTS=0;a.LINES=1;a.LINE_LOOP=2;a.LINE_STRIP=3;a.TRIANGLES=4;a.TRIANGLE_STRIP=5;a.TRIANGLE_FAN=6;a.ZERO=0;a.ONE=1;a.SRC_COLOR=768;a.ONE_MINUS_SRC_COLOR=769;a.SRC_ALPHA=770;a.ONE_MINUS_SRC_ALPHA=771;a.DST_ALPHA=772;a.ONE_MINUS_DST_ALPHA=773;a.DST_COLOR=774;a.ONE_MINUS_DST_COLOR=775;a.SRC_ALPHA_SATURATE=776;a.FUNC_ADD=32774;a.BLEND_EQUATION=32777;a.BLEND_EQUATION_RGB=32777;a.BLEND_EQUATION_ALPHA=34877;a.FUNC_SUBTRACT=32778;a.FUNC_REVERSE_SUBTRACT=32779;a.BLEND_DST_RGB=32968;a.BLEND_SRC_RGB=32969;a.BLEND_DST_ALPHA=32970;a.BLEND_SRC_ALPHA=32971;a.CONSTANT_COLOR=32769;a.ONE_MINUS_CONSTANT_COLOR=32770;a.CONSTANT_ALPHA=32771;a.ONE_MINUS_CONSTANT_ALPHA=32772;a.BLEND_COLOR=32773;a.ARRAY_BUFFER=34962;a.ELEMENT_ARRAY_BUFFER=34963;a.ARRAY_BUFFER_BINDING=34964;a.ELEMENT_ARRAY_BUFFER_BINDING=34965;a.STREAM_DRAW=35040;a.STATIC_DRAW=35044;a.DYNAMIC_DRAW=35048;a.BUFFER_SIZE=34660;a.BUFFER_USAGE=34661;a.CURRENT_VERTEX_ATTRIB=34342;a.FRONT=1028;a.BACK=1029;a.CULL_FACE=2884;a.FRONT_AND_BACK=1032;a.BLEND=3042;a.DITHER=3024;a.STENCIL_TEST=2960;a.DEPTH_TEST=2929;a.SCISSOR_TEST=3089;a.POLYGON_OFFSET_FILL=32823;a.SAMPLE_ALPHA_TO_COVERAGE=32926;a.SAMPLE_COVERAGE=32928;a.NO_ERROR=0;a.INVALID_ENUM=1280;a.INVALID_VALUE=1281;a.INVALID_OPERATION=1282;a.OUT_OF_MEMORY=1285;a.CW=2304;a.CCW=2305;a.LINE_WIDTH=2849;a.ALIASED_POINT_SIZE_RANGE=33901;a.ALIASED_LINE_WIDTH_RANGE=33902;a.CULL_FACE_MODE=2885;a.FRONT_FACE=2886;a.DEPTH_RANGE=2928;a.DEPTH_WRITEMASK=2930;a.DEPTH_CLEAR_VALUE=2931;a.DEPTH_FUNC=2932;a.STENCIL_CLEAR_VALUE=2961;a.STENCIL_FUNC=2962;a.STENCIL_FAIL=2964;a.STENCIL_PASS_DEPTH_FAIL=2965;a.STENCIL_PASS_DEPTH_PASS=2966;a.STENCIL_REF=2967;a.STENCIL_VALUE_MASK=2963;a.STENCIL_WRITEMASK=2968;a.STENCIL_BACK_FUNC=34816;a.STENCIL_BACK_FAIL=34817;a.STENCIL_BACK_PASS_DEPTH_FAIL=34818;a.STENCIL_BACK_PASS_DEPTH_PASS=34819;a.STENCIL_BACK_REF=36003;a.STENCIL_BACK_VALUE_MASK=36004;a.STENCIL_BACK_WRITEMASK=36005;a.VIEWPORT=2978;a.SCISSOR_BOX=3088;a.COLOR_CLEAR_VALUE=3106;a.COLOR_WRITEMASK=3107;a.UNPACK_ALIGNMENT=3317;a.PACK_ALIGNMENT=3333;a.MAX_TEXTURE_SIZE=3379;a.MAX_VIEWPORT_DIMS=3386;a.SUBPIXEL_BITS=3408;a.RED_BITS=3410;a.GREEN_BITS=3411;a.BLUE_BITS=3412;a.ALPHA_BITS=3413;a.DEPTH_BITS=3414;a.STENCIL_BITS=3415;a.POLYGON_OFFSET_UNITS=10752;a.POLYGON_OFFSET_FACTOR=32824;a.TEXTURE_BINDING_2D=32873;a.SAMPLE_BUFFERS=32936;a.SAMPLES=32937;a.SAMPLE_COVERAGE_VALUE=32938;a.SAMPLE_COVERAGE_INVERT=32939;a.NUM_COMPRESSED_TEXTURE_FORMATS=34466;a.COMPRESSED_TEXTURE_FORMATS=34467;a.DONT_CARE=4352;a.FASTEST=4353;a.NICEST=4354;a.GENERATE_MIPMAP_HINT=33170;a.BYTE=5120;a.UNSIGNED_BYTE=5121;a.SHORT=5122;a.UNSIGNED_SHORT=5123;a.INT=5124;a.UNSIGNED_INT=5125;a.FLOAT=5126;a.DEPTH_COMPONENT=6402;a.ALPHA=6406;a.RGB=6407;a.RGBA=6408;a.LUMINANCE=6409;a.LUMINANCE_ALPHA=6410;a.UNSIGNED_SHORT_4_4_4_4=32819;a.UNSIGNED_SHORT_5_5_5_1=32820;a.UNSIGNED_SHORT_5_6_5=33635;a.FRAGMENT_SHADER=35632;a.VERTEX_SHADER=35633;a.MAX_VERTEX_ATTRIBS=34921;a.MAX_VERTEX_UNIFORM_VECTORS=36347;a.MAX_VARYING_VECTORS=36348;a.MAX_COMBINED_TEXTURE_IMAGE_UNITS=35661;a.MAX_VERTEX_TEXTURE_IMAGE_UNITS=35660;a.MAX_TEXTURE_IMAGE_UNITS=34930;a.MAX_FRAGMENT_UNIFORM_VECTORS=36349;a.SHADER_TYPE=35663;a.DELETE_STATUS=35712;a.LINK_STATUS=35714;a.VALIDATE_STATUS=35715;a.ATTACHED_SHADERS=35717;a.ACTIVE_UNIFORMS=35718;a.ACTIVE_ATTRIBUTES=35721;a.SHADING_LANGUAGE_VERSION=35724;a.CURRENT_PROGRAM=35725;a.NEVER=512;a.LESS=513;a.EQUAL=514;a.LEQUAL=515;a.GREATER=516;a.NOTEQUAL=517;a.GEQUAL=518;a.ALWAYS=519;a.KEEP=7680;a.REPLACE=7681;a.INCR=7682;a.DECR=7683;a.INVERT=5386;a.INCR_WRAP=34055;a.DECR_WRAP=34056;a.VENDOR=7936;a.RENDERER=7937;a.VERSION=7938;a.NEAREST=9728;a.LINEAR=9729;a.NEAREST_MIPMAP_NEAREST=9984;a.LINEAR_MIPMAP_NEAREST=9985;a.NEAREST_MIPMAP_LINEAR=9986;a.LINEAR_MIPMAP_LINEAR=9987;a.TEXTURE_MAG_FILTER=10240;a.TEXTURE_MIN_FILTER=10241;a.TEXTURE_WRAP_S=10242;a.TEXTURE_WRAP_T=10243;a.TEXTURE_2D=3553;a.TEXTURE_3D=32879;a.TEXTURE=5890;a.TEXTURE_CUBE_MAP=34067;a.TEXTURE_BINDING_CUBE_MAP=34068;a.TEXTURE_CUBE_MAP_POSITIVE_X=34069;a.TEXTURE_CUBE_MAP_NEGATIVE_X=34070;a.TEXTURE_CUBE_MAP_POSITIVE_Y=34071;a.TEXTURE_CUBE_MAP_NEGATIVE_Y=34072;a.TEXTURE_CUBE_MAP_POSITIVE_Z=34073;a.TEXTURE_CUBE_MAP_NEGATIVE_Z=34074;a.MAX_CUBE_MAP_TEXTURE_SIZE=34076;a.TEXTURE0=33984;a.TEXTURE1=33985;a.TEXTURE2=33986;a.TEXTURE3=33987;a.TEXTURE4=33988;a.TEXTURE5=33989;a.TEXTURE6=33990;a.TEXTURE7=33991;a.TEXTURE8=33992;a.TEXTURE9=33993;a.TEXTURE10=33994;a.TEXTURE11=33995;a.TEXTURE12=33996;a.TEXTURE13=33997;a.TEXTURE14=33998;a.TEXTURE15=33999;a.TEXTURE16=34E3;a.TEXTURE17=34001;a.TEXTURE18=34002;a.TEXTURE19=34003;a.TEXTURE20=34004;a.TEXTURE21=34005;a.TEXTURE22=34006;a.TEXTURE23=34007;a.TEXTURE24=34008;a.TEXTURE25=34009;a.TEXTURE26=34010;a.TEXTURE27=34011;a.TEXTURE28=34012;a.TEXTURE29=34013;a.TEXTURE30=34014;a.TEXTURE31=34015;a.ACTIVE_TEXTURE=34016;a.REPEAT=10497;a.CLAMP_TO_EDGE=33071;a.MIRRORED_REPEAT=33648;a.FLOAT_VEC2=35664;a.FLOAT_VEC3=35665;a.FLOAT_VEC4=35666;a.INT_VEC2=35667;a.INT_VEC3=35668;a.INT_VEC4=35669;a.BOOL=35670;a.BOOL_VEC2=35671;a.BOOL_VEC3=35672;a.BOOL_VEC4=35673;a.FLOAT_MAT2=35674;a.FLOAT_MAT3=35675;a.FLOAT_MAT4=35676;a.SAMPLER_2D=35678;a.SAMPLER_CUBE=35680;a.VERTEX_ATTRIB_ARRAY_ENABLED=34338;a.VERTEX_ATTRIB_ARRAY_SIZE=34339;a.VERTEX_ATTRIB_ARRAY_STRIDE=34340;a.VERTEX_ATTRIB_ARRAY_TYPE=34341;a.VERTEX_ATTRIB_ARRAY_NORMALIZED=34922;a.VERTEX_ATTRIB_ARRAY_POINTER=34373;a.VERTEX_ATTRIB_ARRAY_BUFFER_BINDING=34975;a.COMPILE_STATUS=35713;a.LOW_FLOAT=36336;a.MEDIUM_FLOAT=36337;a.HIGH_FLOAT=36338;a.LOW_INT=36339;a.MEDIUM_INT=36340;a.HIGH_INT=36341;a.FRAMEBUFFER=36160;a.RENDERBUFFER=36161;a.RGBA4=32854;a.RGB5_A1=32855;a.RGB565=36194;a.DEPTH_COMPONENT16=33189;a.STENCIL_INDEX=6401;a.STENCIL_INDEX8=36168;a.DEPTH_STENCIL=34041;a.RENDERBUFFER_WIDTH=36162;a.RENDERBUFFER_HEIGHT=36163;a.RENDERBUFFER_INTERNAL_FORMAT=36164;a.RENDERBUFFER_RED_SIZE=36176;a.RENDERBUFFER_GREEN_SIZE=36177;a.RENDERBUFFER_BLUE_SIZE=36178;a.RENDERBUFFER_ALPHA_SIZE=36179;a.RENDERBUFFER_DEPTH_SIZE=36180;a.RENDERBUFFER_STENCIL_SIZE=36181;a.FRAMEBUFFER_ATTACHMENT_OBJECT_TYPE=36048;a.FRAMEBUFFER_ATTACHMENT_OBJECT_NAME=36049;a.FRAMEBUFFER_ATTACHMENT_TEXTURE_LEVEL=36050;a.FRAMEBUFFER_ATTACHMENT_TEXTURE_CUBE_MAP_FACE=36051;a.COLOR_ATTACHMENT0=36064;a.DEPTH_ATTACHMENT=36096;a.STENCIL_ATTACHMENT=36128;a.DEPTH_STENCIL_ATTACHMENT=33306;a.NONE=0;a.FRAMEBUFFER_COMPLETE=36053;a.FRAMEBUFFER_INCOMPLETE_ATTACHMENT=36054;a.FRAMEBUFFER_INCOMPLETE_MISSING_ATTACHMENT=36055;a.FRAMEBUFFER_INCOMPLETE_DIMENSIONS=36057;a.FRAMEBUFFER_UNSUPPORTED=36061;a.FRAMEBUFFER_BINDING=36006;a.RENDERBUFFER_BINDING=36007;a.MAX_RENDERBUFFER_SIZE=34024;a.INVALID_FRAMEBUFFER_OPERATION=1286;a.UNPACK_FLIP_Y_WEBGL=37440;a.UNPACK_PREMULTIPLY_ALPHA_WEBGL=37441;a.CONTEXT_LOST_WEBGL=37442;a.UNPACK_COLORSPACE_CONVERSION_WEBGL=37443;a.BROWSER_DEFAULT_WEBGL=37444;a._extTextureFilterAnisotropic=null;a._compressedTextureS3tc=null;a._compressedTexturePvrtc=null;a._compressedTextureEtc1=null;a._angleInstancedArrays=null;a._glTextureIDs=[33984,33985,33986,33987,33988,33989,33990,33991];a._useProgram=null;a._depthTest=!0;a._depthMask=!0;a._depthFunc=513;a._blend=!1;a._sFactor=1;a._dFactor=0;a._srcAlpha=1;a._dstAlpha=0;a._cullFace=!1;a._frontFace=2305;a._activedTextureID=33984;u(a,["_extentionVendorPrefixes",function(){return this._extentionVendorPrefixes=["","WEBKIT_","MOZ_"]},"_activeTextures",function(){return this._activeTextures=Array(8)}]);return a}(),ib=function(){function a(c){this._font="14px Arial";this._family="Arial";this._size=14;this._bold=this._italic=!1;this._id=a._gfontID++;this.setFont(c||this._font)}n(a,"laya.utils.FontInfo");a.prototype.setFont=function(a){this._font=a;var b=a.split(" "),d=b.length;if(2>d)1==d&&0<b[0].indexOf("px")&&(this._size=parseInt(b[0]));else{for(var c=-1,h=0;h<d;h++)if(0<b[h].indexOf("px")||0<b[h].indexOf("pt")){c=h;this._size=parseInt(b[h]);0>=this._size&&(console.error("font parse error:"+a),this._size=14);break}a=c+1;c=b[a];for(a++;a<d;a++)c+=" "+b[a];this._family=c.split(",")[0];this._italic=0<=b.indexOf("italic");this._bold=0<=b.indexOf("bold")}};a.Parse=function(c){if(c===a._lastFont)return a._lastFontInfo;var b=a._cache[c];b||(b=a._cache[c]=new a(c));a._lastFont=c;return a._lastFontInfo=b};a.EMPTY=new a(null);a._cache={};a._gfontID=0;a._lastFont="";a._lastFontInfo=null;return a}(),Ac=function(){function a(){}n(a,"laya.utils.CacheManger");a.regCacheByFunction=function(c,b){a.unRegCacheByFunction(c,b);a._cacheList.push({tryDispose:c,getCacheList:b})};a.unRegCacheByFunction=function(c,b){var d,e;e=a._cacheList.length;for(d=0;d<e;d++)if(a._cacheList[d].tryDispose==c&&a._cacheList[d].getCacheList==b){a._cacheList.splice(d,1);break}};a.forceDispose=function(){var c,b=a._cacheList.length;for(c=0;c<b;c++)a._cacheList[c].tryDispose(!0)};a.beginCheck=function(c){void 0===c&&(c=15E3);l.systemTimer.loop(c,null,a._checkLoop)};a.stopCheck=function(){l.systemTimer.clear(null,a._checkLoop)};a._checkLoop=function(){var c=a._cacheList;if(!(1>c.length)){var b=q.now(),d,e;for(e=d=c.length;0<d;){a._index++;a._index%=e;c[a._index].tryDispose(!1);if(q.now()-b>a.loopTimeLimit)break;d--}}};a.loopTimeLimit=2;a._cacheList=[];a._index=0;return a}(),ie=function(){function a(){}n(a,"laya.debug.tools.resizer.SimpleResizer");a.setResizeAble=function(c,b,d,e){void 0===d&&(d=150);void 0===e&&(e=150);c.on("mousedown",null,a.onMouseDown,[b,d,e])};a.onMouseDown=function(c,b,d,e){a.clearEvents();if(c){a.preMousePoint.setTo(l.stage.mouseX,l.stage.mouseY);a.preTarSize.setTo(c.width,c.height);a.preScale.setTo(1,1);for(e=c;e&&e!=l.stage;)a.preScale.x*=e.scaleX,a.preScale.y*=e.scaleY,e=e.parent;l.stage.on("mouseup",null,a.onMouseMoveEnd);l.timer.loop(100,null,a.onMouseMoving,[c,b,d])}};a.onMouseMoving=function(c,b,d,e){e=(l.stage.mouseX-a.preMousePoint.x)/a.preScale.x+a.preTarSize.x;var h=(l.stage.mouseY-a.preMousePoint.y)/a.preScale.y+a.preTarSize.y;c.width=e>b?e:b;c.height=h>d?h:d};a.onMouseMoveEnd=function(c){a.clearEvents()};a.clearEvents=function(){l.timer.clear(null,a.onMouseMoving);l.stage.off("mouseup",null,a.onMouseMoveEnd)};u(a,["preMousePoint",function(){return this.preMousePoint=new P},"preTarSize",function(){return this.preTarSize=new P},"preScale",function(){return this.preScale=new P}]);return a}(),ub=function(){function a(b,d,a,c){function e(d){d=d.replace(h._clearCR,"");var b=[],a=new Mc(b);h._compileToTree(a,d.split("\n"),0,b,c);return a}this._clearCR=/\r/g;var h=this,m=q.now();this._VS=e(b);this._PS=e(d);this._nameMap=a;2<q.now()-m&&console.log("ShaderCompile use time:"+(q.now()-m)+"  size:"+b.length+"/"+d.length)}n(a,"laya.webgl.utils.ShaderCompile");var c=a.prototype;c._compileToTree=function(b,d,c,h,f){var e,m,p,t,z,g,l;for(g=c;g<d.length;g++)if(m=d[g],!(1>m.length)&&(e=m.indexOf("//"),0!==e)){0<=e&&(m=m.substr(0,e));c=z||new Mc(h);z=null;c.text=m;c.noCompile=!0;if(0<=(e=m.indexOf("#"))){p="#";l=e+1;for(t=m.length;l<t;l++){var n=m.charAt(l);if(" "===n||"\t"===n||"?"===n)break;p+=n}c.name=p;switch(p){case "#ifdef":case "#ifndef":c.src=m;c.noCompile=null!=m.match(/[!&|()=<>]/);c.noCompile?console.log("function():Boolean{return "+m.substr(e+c.name.length)+"}"):(t=m.replace(/^\s*/,"").split(/\s+/),c.setCondition(t[1],"#ifdef"===p?1:2),c.text="//"+c.text);c.setParent(b);b=c;if(f)for(t=m.substr(l).split(a._splitToWordExps3),l=0;l<t.length;l++)m=t[l],m.length&&(f[m]=!0);continue;case "#if":c.src=m;c.noCompile=!0;c.setParent(b);b=c;if(f)for(t=m.substr(l).split(a._splitToWordExps3),l=0;l<t.length;l++)m=t[l],m.length&&"defined"!=m&&(f[m]=!0);continue;case "#else":c.src=m;b=b.parent;e=b.childs[b.childs.length-1];c.noCompile=e.noCompile;c.noCompile||(c.condition=e.condition,c.conditionType=1==e.conditionType?2:1,c.text="//"+c.text+" "+e.text+" "+c.conditionType);c.setParent(b);b=c;continue;case "#endif":b=b.parent;e=b.childs[b.childs.length-1];c.noCompile=e.noCompile;c.noCompile||(c.text="//"+c.text);c.setParent(b);continue;case "#include":t=a.splitToWords(m,null);m=a.includes[t[1]];if(!m)throw"ShaderCompile error no this include file:"+t[1];if(0>(e=t[0].indexOf("?"))){c.setParent(b);m=m.getWith("with"==t[2]?t[3]:null);this._compileToTree(c,m.split("\n"),0,h,f);c.text="";continue}c.setCondition(t[0].substr(e+1),1);c.text=m.getWith("with"==t[2]?t[3]:null);break;case "#import":t=a.splitToWords(m,null);m=t[1];h.push({node:c,file:a.includes[m],ofs:c.text.length});continue}}else{if((e=b.childs[b.childs.length-1])&&!e.name){0<h.length&&a.splitToWords(m,e);z=c;e.text+="\n"+m;continue}0<h.length&&a.splitToWords(m,c)}c.setParent(b)}};c.createShader=function(b,d,a,c){var e={},h="";if(b)for(var m in b)h+="#define "+m+"\n",e[m]=!0;b=this._VS.toscript(e,[]);e=this._PS.toscript(e,[]);return(a||Ta.create)(h+b.join("\n"),h+e.join("\n"),d,this._nameMap,c)};a._parseOne=function(b,d,c,h,f,k){var e={type:a.shaderParamsMap[c[h+1]],name:c[h+2],size:isNaN(parseInt(c[h+3]))?1:parseInt(c[h+3])};k&&("attribute"==f?b.push(e):d.push(e));":"==c[h+3]&&(e.type=c[h+4],h+=2);return h+2};a.addInclude=function(b,d){if(!d||0===d.length)throw Error("add shader include file err:"+b);if(a.includes[b])throw Error("add shader include file err, has add:"+b);a.includes[b]=new je(d)};a.preGetParams=function(b,d){b=[b,d];d={};var c=[],h=[],f={},k=[];d.attributes=c;d.uniforms=h;d.defines=f;for(var m,p,t=0;2>t;t++){b[t]=b[t].replace(a._removeAnnotation,"");var z=b[t].match(a._reg),g;m=0;for(p=z.length;m<p;m++){var l=z[m];if("attribute"!=l&&"uniform"!=l)if("#define"==l)l=z[++m],k[l]=1;else{if("#ifdef"==l)for(g=z[++m],f[g]=f[g]||[],m++;m<p;m++)if(l=z[m],"attribute"!=l&&"uniform"!=l){if("#else"==l)for(m++;m<p;m++)if(l=z[m],"attribute"!=l&&"uniform"!=l){if("#endif"==l)break}else m=a._parseOne(c,h,z,m,l,!k[g])}else m=a._parseOne(c,h,z,m,l,k[g])}else m=a._parseOne(c,h,z,m,l,!0)}}return d};a.splitToWords=function(b,d){for(var a=[],c,f=-1,k=0,m=b.length;k<m;k++)if(c=b.charAt(k),0<=" \t\x3d+-*/\x26%!\x3c\x3e()'\",;".indexOf(c)){0<=f&&1<k-f&&(f=b.substr(f,k-f),a.push(f));if('"'==c||"'"==c){c=b.indexOf(c,k+1);if(0>c)throw"Sharder err:"+b;a.push(b.substr(k+1,c-k-1));k=c}else"("==c&&d&&0<a.length&&(f=a[a.length-1]+";",0>"vec4;main;".indexOf(f)&&(d.useFuns+=f));f=-1}else 0>f&&(f=k);f<m&&1<m-f&&(f=b.substr(f,m-f),a.push(f));return a};a.IFDEF_NO=0;a.IFDEF_YES=1;a.IFDEF_ELSE=2;a.IFDEF_PARENT=3;a._removeAnnotation=/(\/\*([^*]|[\r\n]|(\*+([^*/]|[\r\n])))*\*+\/)|(\/\/.*)/g;a._reg=/(".*")|('.*')|([#\w\*-\.+/()=<>{}\\]+)|([,;:\\])/g;a._splitToWordExps=/[(".*")]+|[('.*')]+|([ \t=\+\-*/&%!<>!%(),;])/g;a.includes={};u(a,["shaderParamsMap",function(){return this.shaderParamsMap={"float":5126,"int":5124,bool:35670,vec2:35664,vec3:35665,vec4:35666,ivec2:35667,ivec3:35668,ivec4:35669,bvec2:35671,bvec3:35672,bvec4:35673,mat2:35674,mat3:35675,mat4:35676,sampler2D:35678,samplerCube:35680}},"_splitToWordExps3",function(){return this._splitToWordExps3=/[ \t=\+\-*/&%!<>!%(),;\|]/g}]);return a}(),ac=function(){function a(b){this._xd_=!0;this._allocated_=8;this._length=this._pos_=0;b?(this._u8d_=new Uint8Array(b),this._d_=new DataView(this._u8d_.buffer),this._length=this._d_.byteLength):this._resizeBuffer(this._allocated_)}n(a,"laya.debug.tools.ByteEx");var c=a.prototype;c._resizeBuffer=function(b){try{var d=new Uint8Array(b);null!=this._u8d_&&(this._u8d_.length<=b?d.set(this._u8d_):d.set(this._u8d_.subarray(0,b)));this._u8d_=d;this._d_=new DataView(d.buffer)}catch(e){throw"Invalid typed array length:"+b;}};c.getString=function(){return this.readString()};c.readString=function(){return this._rUTF(this.getUint16())};c.getFloat32Array=function(b,d){return this.readFloat32Array(b,d)};c.readFloat32Array=function(b,d){d=b+d;d=d>this._length?this._length:d;b=new Float32Array(this._d_.buffer.slice(b,d));this._pos_=d;return b};c.getUint8Array=function(b,d){return this.readUint8Array(b,d)};c.readUint8Array=function(b,d){d=b+d;d=d>this._length?this._length:d;b=new Uint8Array(this._d_.buffer.slice(b,d));this._pos_=d;return b};c.getInt16Array=function(b,d){return this.readInt16Array(b,d)};c.readInt16Array=function(b,d){d=b+d;d=d>this._length?this._length:d;b=new Int16Array(this._d_.buffer.slice(b,d));this._pos_=d;return b};c.getFloat32=function(){return this.readFloat32()};c.readFloat32=function(){if(this._pos_+4>this._length)throw"getFloat32 error - Out of bounds";var b=this._d_.getFloat32(this._pos_,this._xd_);this._pos_+=4;return b};c.getFloat64=function(){return this.readFloat64()};c.readFloat64=function(){if(this._pos_+8>this._length)throw"getFloat64 error - Out of bounds";var b=this._d_.getFloat64(this._pos_,this._xd_);this._pos_+=8;return b};c.writeFloat32=function(b){this._ensureWrite(this._pos_+4);this._d_.setFloat32(this._pos_,b,this._xd_);this._pos_+=4};c.writeFloat64=function(b){this._ensureWrite(this._pos_+8);this._d_.setFloat64(this._pos_,b,this._xd_);this._pos_+=8};c.getInt32=function(){return this.readInt32()};c.readInt32=function(){if(this._pos_+4>this._length)throw"getInt32 error - Out of bounds";var b=this._d_.getInt32(this._pos_,this._xd_);this._pos_+=4;return b};c.getUint32=function(){return this.readUint32()};c.readUint32=function(){if(this._pos_+4>this._length)throw"getUint32 error - Out of bounds";var b=this._d_.getUint32(this._pos_,this._xd_);this._pos_+=4;return b};c.writeInt32=function(b){this._ensureWrite(this._pos_+4);this._d_.setInt32(this._pos_,b,this._xd_);this._pos_+=4};c.writeUint32=function(b){this._ensureWrite(this._pos_+4);this._d_.setUint32(this._pos_,b,this._xd_);this._pos_+=4};c.getInt16=function(){return this.readInt16()};c.readInt16=function(){if(this._pos_+2>this._length)throw"getInt16 error - Out of bounds";var b=this._d_.getInt16(this._pos_,this._xd_);this._pos_+=2;return b};c.getUint16=function(){return this.readUint16()};c.readUint16=function(){if(this._pos_+2>this._length)throw"getUint16 error - Out of bounds";var b=this._d_.getUint16(this._pos_,this._xd_);this._pos_+=2;return b};c.writeUint16=function(b){this._ensureWrite(this._pos_+2);this._d_.setUint16(this._pos_,b,this._xd_);this._pos_+=2};c.writeInt16=function(b){this._ensureWrite(this._pos_+2);this._d_.setInt16(this._pos_,b,this._xd_);this._pos_+=2};c.getUint8=function(){return this.readUint8()};c.readUint8=function(){if(this._pos_+1>this._length)throw"getUint8 error - Out of bounds";return this._d_.getUint8(this._pos_++)};c.writeUint8=function(b){this._ensureWrite(this._pos_+1);this._d_.setUint8(this._pos_,b);this._pos_++};c._getUInt8=function(b){return this._readUInt8(b)};c._readUInt8=function(b){return this._d_.getUint8(b)};c._getUint16=function(b){return this._readUint16(b)};c._readUint16=function(b){return this._d_.getUint16(b,this._xd_)};c._getMatrix=function(){return this._readMatrix()};c._readMatrix=function(){return new C(this.getFloat32(),this.getFloat32(),this.getFloat32(),this.getFloat32(),this.getFloat32(),this.getFloat32())};c._rUTF=function(b){var d="";b=this._pos_+b;for(var a,c,f,k=String.fromCharCode,m=this._u8d_,p=0;this._pos_<b;)a=m[this._pos_++],128>a?0!=a&&(d+=k(a)):224>a?d+=k((a&63)<<6|m[this._pos_++]&127):240>a?(c=m[this._pos_++],d+=k((a&31)<<12|(c&127)<<6|m[this._pos_++]&127)):(c=m[this._pos_++],f=m[this._pos_++],d+=k((a&15)<<18|(c&127)<<12|f<<6&127|m[this._pos_++]&127)),p++;return d};c.getCustomString=function(b){return this.readCustomString(b)};c.readCustomString=function(b){for(var d="",a,c,f,k=String.fromCharCode,m=this._u8d_;0<b;)if(c=m[this._pos_],128>c)d+=k(c),this._pos_++,b--;else for(a=c-128,this._pos_++,b-=a;0<a;)c=m[this._pos_++],f=m[this._pos_++],d+=k(f<<8|c),a--;return d};c.clear=function(){this.length=this._pos_=0};c.__getBuffer=function(){return this._d_.buffer};c.writeUTFBytes=function(b){b+="";for(var d=0,a=b.length;d<a;d++){var c=b.charCodeAt(d);127>=c?this.writeByte(c):2047>=c?(this._ensureWrite(this._pos_+2),this._u8d_.set([192|c>>6,128|c&63],this._pos_),this._pos_+=2):65535>=c?(this._ensureWrite(this._pos_+3),this._u8d_.set([224|c>>12,128|c>>6&63,128|c&63],this._pos_),this._pos_+=3):(this._ensureWrite(this._pos_+4),this._u8d_.set([240|c>>18,128|c>>12&63,128|c>>6&63,128|c&63],this._pos_),this._pos_+=4)}};c.writeUTFString=function(b){var d=this.pos;this.writeUint16(1);this.writeUTFBytes(b);this._d_.setUint16(d,this.pos-d-2,this._xd_)};c.readUTFString=function(){return this.readUTFBytes(this.getUint16())};c.getUTFString=function(){return this.readUTFString()};c.readUTFBytes=function(b){void 0===b&&(b=-1);if(0===b)return"";var d=this.bytesAvailable;if(b>d)throw"readUTFBytes error - Out of bounds";return this._rUTF(0<b?b:d)};c.getUTFBytes=function(b){void 0===b&&(b=-1);return this.readUTFBytes(b)};c.writeByte=function(b){this._ensureWrite(this._pos_+1);this._d_.setInt8(this._pos_,b);this._pos_+=1};c.readByte=function(){if(this._pos_+1>this._length)throw"readByte error - Out of bounds";return this._d_.getInt8(this._pos_++)};c.getByte=function(){return this.readByte()};c._ensureWrite=function(b){this._length<b&&(this._length=b);this._allocated_<b&&(this.length=b)};c.writeArrayBuffer=function(b,d,a){void 0===d&&(d=0);void 0===a&&(a=0);if(0>d||0>a)throw"writeArrayBuffer error - Out of bounds";0==a&&(a=b.byteLength-d);this._ensureWrite(this._pos_+a);b=new Uint8Array(b);this._u8d_.set(b.subarray(d,d+a),this._pos_);this._pos_+=a};g(0,c,"buffer",function(){var b=this._d_.buffer;return b.byteLength===this._length?b:b.slice(0,this._length)});g(0,c,"endian",function(){return this._xd_?"littleEndian":"bigEndian"},function(b){this._xd_="littleEndian"===b});g(0,c,"length",function(){return this._length},function(b){this._allocated_<b?this._resizeBuffer(this._allocated_=Math.floor(Math.max(b,2*this._allocated_))):this._allocated_>b&&this._resizeBuffer(this._allocated_=b);this._length=b});g(0,c,"pos",function(){return this._pos_},function(b){this._pos_=b});g(0,c,"bytesAvailable",function(){return this._length-this._pos_});a.getSystemEndian=function(){if(!a._sysEndian){var b=new ArrayBuffer(2);(new DataView(b)).setInt16(0,256,!0);a._sysEndian=256===(new Int16Array(b))[0]?"littleEndian":"bigEndian"}return a._sysEndian};a.BIG_ENDIAN="bigEndian";a.LITTLE_ENDIAN="littleEndian";a._sysEndian=null;return a}(),ke=function(){function a(){this.deformSlotDisplayList=[]}n(a,"laya.ani.bone.DeformSlotData");return a}(),Nc=function(){function a(){this.mSprite=null;this.mIndex=0;this.mTextureDic={}}n(a,"laya.debug.tools.AtlasTools");var c=a.prototype;c.start=function(){r.isWebGL&&(null==this.mSprite&&(this.mSprite=new L),l.stage.addChild(this.mSprite),this.showNext())};c.end=function(){r.isWebGL&&this.mSprite&&l.stage.removeChild(this.mSprite)};c.showNext=function(){if(r.isWebGL){null==this.mSprite&&(this.mSprite=new L);l.stage.addChild(this.mSprite);this.mIndex++;var b;b=laya.webgl.atlas.AtlasResourceManager.instance;var d=b.getAtlaserCount();this.mIndex>=d&&(this.mIndex=0);var a;this.mTextureDic[this.mIndex]?a=this.mTextureDic[this.mIndex]:(b=b.getAtlaserByIndex(this.mIndex))&&b.texture&&(a=new ga(b.texture,null),this.mTextureDic[this.mIndex]=a);a&&(this.mSprite.graphics.clear(),this.mSprite.graphics.save(),this.mSprite.graphics.alpha(.9),this.mSprite.graphics.drawRect(0,0,1024,1024,"#efefefe"),this.mSprite.graphics.restore(),this.mSprite.graphics.drawTexture(a,0,0,1024,1024),this.mSprite.graphics.fillText((this.mIndex+1).toString()+"/"+d.toString(),25,100,"40px Arial","#ff0000","left"))}};a.getInstance=function(){return a.mInstance=a.mInstance||new a};a.mInstance=null;return a}(),le=function(){function a(){}n(a,"laya.wx.mini.MiniImage");a.prototype._loadImage=function(c){if(F.isZiYu)a.onCreateImage(c,this,!0);else{var b=!1;if(T.isLocalNativeFile(c)){if(-1==c.indexOf("http://usr/")&&(-1!=c.indexOf("http://")||-1!=c.indexOf("https://")))if(""!=T.loadPath)c=c.split(T.loadPath)[1];else{var d=""!=D.rootPath?D.rootPath:D._basePath,e=c;""!=d&&(c=c.split(d)[1]);c||(c=e)}if(F.subNativeFiles&&0==F.subNativeheads.length)for(var h in F.subNativeFiles)for(d=F.subNativeFiles[h],F.subNativeheads=F.subNativeheads.concat(d),e=0;e<d.length;e++)F.subMaps[d[e]]=h+"/"+d[e];F.subNativeFiles&&-1!=c.indexOf("/")&&(h=c.split("/")[0]+"/")&&-1!=F.subNativeheads.indexOf(h)&&(c=c.replace(h,F.subMaps[h]))}else b=!0,c=D.formatURL(c);if(T.getFileInfo(c))a.onCreateImage(c,this,!b);else if(-1!=c.indexOf("http://usr/")||-1==c.indexOf("http://")&&-1==c.indexOf("https://"))a.onCreateImage(c,this,!0);else if(F.isZiYu)a.onCreateImage(c,this,!0);else T.downOtherFiles(c,new B(a,a.onDownImgCallBack,[c,this]),c)}};a.onDownImgCallBack=function(c,b,d,e){void 0===e&&(e="");if(d)b.onError(null);else a.onCreateImage(c,b,!1,e)};a.onCreateImage=function(a,b,d,e){function c(){var d=b._imgCache[f];d&&(d.onload=null,d.onerror=null,delete b._imgCache[f])}void 0===d&&(d=!1);void 0===e&&(e="");var f;F.autoCacheFile?d?F.isZiYu?(d=D.formatURL(a),f=T.ziyuFileTextureData[d]?T.ziyuFileTextureData[d]:a):f=a:""!=e?f=e:(a=T.getFileInfo(a).md5,f=T.getFileNativePath(a)):f=d?a:e;null==b._imgCache&&(b._imgCache={});var k;a=function(){c();b.event("error","Load image failed")};if("nativeimage"==b._type)k=new q.window.Image,k.crossOrigin="",k.onload=function(){c();b.onLoaded(k)},k.onerror=a,k.src=f,b._imgCache[f]=k;else{var m=new q.window.Image;m.crossOrigin="";m.onload=function(){k=qb.create(m.width,m.height);k.loadImageSource(m,!0);k._setCreateURL(f);c();b.onLoaded(k)};m.onerror=a;m.src=f;b._imgCache[f]=m}};return a}(),jb=function(){function a(){}n(a,"laya.debug.tools.hook.VarHook");a.hookVar=function(a,b,d,e){d||(d=[]);e||(e=[]);var c=a,f=a[b],k;k=ha.getOwnPropertyDescriptor(a,b);var m={},p=function(d){console.log("var hook set "+b+":",d);f=d},t=function(){console.log("var hook get"+b+":",f);return f};if(k)m.set=p,m.get=t,m.enumerable=k.enumerable,d.push(m.set),e.push(m.get),Na.hookFuns(m,"set",d),Na.hookFuns(m,"get",e,e.length-1),ha.defineProperty(a,b,m);else{for(;!k&&a.__proto__;)a=a.__proto__,k=ha.getOwnPropertyDescriptor(a,b);k&&(m.set=k.set?k.set:p,m.get=k.get?k.get:t,m.enumerable=k.enumerable,d.push(m.set),e.push(m.get),Na.hookFuns(m,"set",d),Na.hookFuns(m,"get",e,e.length-1),ha.defineProperty(c,b,m));k||(console.log("get des fail add directly"),m.set=p,m.get=t,d.push(m.set),e.push(m.get),Na.hookFuns(m,"set",d),Na.hookFuns(m,"get",e,e.length-1),ha.defineProperty(a,b,m))}};a.getLocFun=function(a,b){void 0===a&&(a="");void 0===b&&(b=0);b+=1;return function(){Na.traceLoc(b,a)}};return a}(),Fb=function(){function a(){this.reset()}n(a,"laya.display.css.SpriteStyle");var c=a.prototype;c.reset=function(){this.scaleX=this.scaleY=1;this.pivotX=this.pivotY=this.rotation=this.skewX=this.skewY=0;this.alpha=1;this.scrollRect&&this.scrollRect.recover();this.scrollRect=null;this.viewport&&this.viewport.recover();this.blendMode=this.dragging=this.hitArea=this.viewport=null;return this};c.recover=function(){this!==a.EMPTY&&v.recover("SpriteStyle",this.reset())};a.create=function(){return v.getItemByClass("SpriteStyle",a)};a.EMPTY=new a;return a}(),td=function(){function a(){}n(a,"laya.display.cmd.DrawImageCmd");var c=a.prototype;c.recover=function(){this.texture._removeReference();this.texture=null;v.recover("DrawImageCmd",this)};c.run=function(b,d,a){b.drawTexture(this.texture,this.x+d,this.y+a,this.width,this.height)};g(0,c,"cmdID",function(){return"DrawImage"});a.create=function(b,d,c,h,f){var e=v.getItemByClass("DrawImageCmd",a);e.texture=b;b._addReference();e.x=d;e.y=c;e.width=h;e.height=f;return e};a.ID="DrawImage";return a}(),Cd=function(){function a(){}n(a,"laya.display.cmd.FillBorderWordsCmd");var c=a.prototype;c.recover=function(){this.words=null;v.recover("FillBorderWordsCmd",this)};c.run=function(b,d,a){b.fillBorderWords(this.words,this.x+d,this.y+a,this.font,this.fillColor,this.borderColor,this.lineWidth)};g(0,c,"cmdID",function(){return"FillBorderWords"});a.create=function(b,d,c,h,f,k,m){var e=v.getItemByClass("FillBorderWordsCmd",a);e.words=b;e.x=d;e.y=c;e.font=h;e.fillColor=f;e.borderColor=k;e.lineWidth=m;return e};a.ID="FillBorderWords";return a}(),T=function(){function a(){}n(a,"laya.wx.mini.MiniFileMgr");a.isLocalNativeFile=function(a){for(var b=0,d=F.nativefiles.length;b<d;b++)if(-1!=a.indexOf(F.nativefiles[b]))return!0;return!1};a.getFileInfo=function(c){c=a.filesListObj[c];return null!=c?c:null};a.read=function(c,b,d,e,h,f){void 0===b&&(b="ascill");void 0===e&&(e="");void 0===h&&(h=!1);void 0===f&&(f="");c=""==e||-1==e.indexOf("http://")&&-1==e.indexOf("https://")?c:a.getFileNativePath(c);c=D.getAdptedFilePath(c);a.fs.readFile({filePath:c,encoding:b,success:function(b){null!=d&&d.runWith([0,b])},fail:function(c){c&&""!=e?a.downFiles(e,b,d,e,h,f):null!=d&&d.runWith([1])}})};a.downFiles=function(c,b,d,e,h,f,k){void 0===b&&(b="ascii");void 0===e&&(e="");void 0===h&&(h=!1);void 0===f&&(f="");void 0===k&&(k=!0);a.wxdown({url:c,success:function(m){200===m.statusCode?a.readFile(m.tempFilePath,b,d,e,h,f,k):403===m.statusCode?null!=d&&d.runWith([0,c]):null!=d&&d.runWith([1,m])},fail:function(b){null!=d&&d.runWith([1,b])}}).onProgressUpdate(function(b){null!=d&&d.runWith([2,b.progress])})};a.readFile=function(c,b,d,e,h,f,k){void 0===b&&(b="ascill");void 0===e&&(e="");void 0===h&&(h=!1);void 0===f&&(f="");void 0===k&&(k=!0);c=D.getAdptedFilePath(c);a.fs.readFile({filePath:c,encoding:b,success:function(f){-1!=c.indexOf("http://")||-1!=c.indexOf("https://")?(F.autoCacheFile||h)&&a.copyFile(c,e,d,b,k):null!=d&&d.runWith([0,f])},fail:function(b){b&&null!=d&&d.runWith([1,b])}})};a.downOtherFiles=function(c,b,d,e,h){void 0===d&&(d="");void 0===e&&(e=!1);void 0===h&&(h=!0);a.wxdown({url:c,success:function(c){200===c.statusCode&&((F.autoCacheFile||e)&&-1==d.indexOf("qlogo.cn")&&-1==d.indexOf(".php")?a.copyFile(c.tempFilePath,d,b,"",h):null!=b&&b.runWith([0,c.tempFilePath]))},fail:function(d){null!=b&&b.runWith([1,d])}})};a.downLoadFile=function(c,b,d,e){void 0===b&&(b="");void 0===e&&(e="ascii");0>w.navigator.userAgent.indexOf("MiniGame")?l.loader.load(c,d):"image"==b||"sound"==b?a.downOtherFiles(c,d,c,!0,!1):a.downFiles(c,e,d,c,!0,b,!1)};a.copyFile=function(c,b,d,e,h){void 0===e&&(e="");void 0===h&&(h=!0);var f=c.split("/"),k=f[f.length-1],f=a.getFileInfo(b),m=a.getFileNativePath(k),p=a.getCacheUseSize();f?f.readyUrl!=b?a.fs.getFileInfo({filePath:c,success:function(c){h&&52428800<=p+4194304+c.size&&(c.size>F.minClearSize&&(F.minClearSize=c.size),a.onClearCacheRes());a.deleteFile(k,b,d,e,c.size)},fail:function(b){null!=d&&d.runWith([1,b])}}):null!=d&&d.runWith([0]):a.fs.getFileInfo({filePath:c,success:function(f){h&&52428800<=p+4194304+f.size&&(f.size>F.minClearSize&&(F.minClearSize=f.size),a.onClearCacheRes());a.fs.copyFile({srcPath:c,destPath:m,success:function(c){a.onSaveFile(b,k,!0,e,d,f.size)},fail:function(b){null!=d&&d.runWith([1,b])}})},fail:function(b){null!=d&&d.runWith([1,b])}})};a.onClearCacheRes=function(){var c=F.minClearSize,b=[],d;for(d in a.filesListObj)b.push(a.filesListObj[d]);a.sortOn(b,"times",16);d=0;for(var e=1,h=b.length;e<h;e++){var f=b[e];if(d>=c)break;d+=f.size;a.deleteFile("",f.readyUrl)}};a.sortOn=function(a,b,d){void 0===d&&(d=0);return 16==d?a.sort(function(d,a){return d[b]-a[b]}):18==d?a.sort(function(d,a){return a[b]-d[b]}):a.sort(function(d,a){return d[b]-a[b]})};a.getFileNativePath=function(a){return laya.wx.mini.MiniFileMgr.fileNativeDir+"/"+a};a.deleteFile=function(c,b,d,e,h){void 0===b&&(b="");void 0===e&&(e="");void 0===h&&(h=0);var f=a.getFileInfo(b),f=a.getFileNativePath(f.md5);a.fs.unlink({filePath:f,success:function(f){var k=""!=c?!0:!1;if(""!=c)f=a.getFileNativePath(c),a.fs.copyFile({srcPath:c,destPath:f,success:function(h){a.onSaveFile(b,c,k,e,d,h.size)},fail:function(b){null!=d&&d.runWith([1,b])}});else a.onSaveFile(b,c,k,e,d,h)},fail:function(d){}})};a.deleteAll=function(){var c=[],b;for(b in a.filesListObj)c.push(a.filesListObj[b]);b=1;for(var d=c.length;b<d;b++)a.deleteFile("",c[b].readyUrl);laya.wx.mini.MiniFileMgr.filesListObj&&laya.wx.mini.MiniFileMgr.filesListObj.fileUsedSize&&(laya.wx.mini.MiniFileMgr.filesListObj.fileUsedSize=0);laya.wx.mini.MiniFileMgr.writeFilesList("",JSON.stringify({}),!1)};a.onSaveFile=function(c,b,d,e,h,f){void 0===d&&(d=!0);void 0===e&&(e="");void 0===f&&(f=0);null==a.filesListObj.fileUsedSize&&(a.filesListObj.fileUsedSize=0);d?(a.getFileNativePath(b),a.filesListObj[c]={md5:b,readyUrl:c,size:f,times:q.now(),encoding:e},a.filesListObj.fileUsedSize=parseInt(a.filesListObj.fileUsedSize)+f,a.writeFilesList(c,JSON.stringify(a.filesListObj),!0),null!=h&&h.runWith([0])):a.filesListObj[c]&&(b=parseInt(a.filesListObj[c].size),a.filesListObj.fileUsedSize=parseInt(a.filesListObj.fileUsedSize)-b,delete a.filesListObj[c],a.writeFilesList(c,JSON.stringify(a.filesListObj),!1),null!=h&&h.runWith([0]))};a.writeFilesList=function(c,b,d){a.fs.writeFile({filePath:a.fileNativeDir+"/"+a.fileListName,encoding:"utf8",data:b,success:function(d){},fail:function(d){}});!F.isZiYu&&F.isPosMsgYu&&wx.postMessage({url:c,data:a.filesListObj[c],isLoad:"filenative",isAdd:d})};a.getCacheUseSize=function(){return a.filesListObj&&a.filesListObj.fileUsedSize?a.filesListObj.fileUsedSize:0};a.existDir=function(c,b){a.fs.mkdir({dirPath:c,success:function(d){null!=b&&b.runWith([0,{data:JSON.stringify({})}])},fail:function(d){-1!=d.errMsg.indexOf("file already exists")?a.readSync(a.fileListName,"utf8",b):null!=b&&b.runWith([1,d])}})};a.readSync=function(c,b,d,e){void 0===b&&(b="ascill");c=a.getFileNativePath(c);var h;try{h=a.fs.readFileSync(c,b),null!=d&&d.runWith([0,{data:h}])}catch(f){null!=d&&d.runWith([1])}};a.setNativeFileDir=function(c){a.fileNativeDir=wx.env.USER_DATA_PATH+c};a.filesListObj={};a.fileNativeDir=null;a.fileListName="layaairfiles.txt";a.ziyuFileData={};a.ziyuFileTextureData={};a.loadPath="";a.DESCENDING=2;a.NUMERIC=16;u(a,["fs",function(){return this.fs=wx.getFileSystemManager()},"wxdown",function(){return this.wxdown=wx.downloadFile}]);return a}(),rb=function(){function a(){this._glRender=this._action=null}n(a,"laya.filters.Filter");var c=a.prototype;l.imps(c,{"laya.filters.IFilter":!0});g(0,c,"type",function(){return-1});a.BLUR=16;a.COLOR=32;a.GLOW=8;a._filter=null;a._recycleScope=null;return a}(),Gb=function(){function a(){this._matrix=new C}n(a,"laya.webgl.canvas.save.SaveTransform");var c=a.prototype;l.imps(c,{"laya.webgl.canvas.save.ISaveData":!0});c.isSaveMark=function(){return!1};c.restore=function(b){b._curMat=this._savematrix;a.POOL[a.POOL._length++]=this};a.save=function(b){var d=b._saveMark;2048!==(d._saveuse&2048)&&(d._saveuse|=2048,d=a.POOL,d=0<d._length?d[--d._length]:new a,d._savematrix=b._curMat,b._curMat=b._curMat.copyTo(d._matrix),b=b._save,b[b._length++]=d)};a.POOL=na._createArray();return a}(),me=function(){function a(){this.name=null;this.targetIndex=0;this.offsetShearY=this.offsetScaleY=this.offsetScaleX=this.offsetY=this.offsetX=this.offsetRotation=this.shearMix=this.scaleMix=this.translateMix=this.rotateMix=NaN;this.boneIndexs=[]}n(a,"laya.ani.bone.TfConstraintData");return a}(),P=function(){function a(b,d){void 0===b&&(b=0);void 0===d&&(d=0);this.x=b;this.y=d}n(a,"laya.maths.Point",null,"Point$2");var c=a.prototype;c.setTo=function(b,d){this.x=b;this.y=d;return this};c.reset=function(){this.x=this.y=0;return this};c.recover=function(){v.recover("Point",this.reset())};c.distance=function(b,d){return Math.sqrt((this.x-b)*(this.x-b)+(this.y-d)*(this.y-d))};c.toString=function(){return this.x+","+this.y};c.normalize=function(){var b=Math.sqrt(this.x*this.x+this.y*this.y);0<b&&(b=1/b,this.x*=b,this.y*=b)};c.copy=function(b){return this.setTo(b.x,b.y)};a.create=function(){return v.getItemByClass("Point",a)};a.TEMP=new a;a.EMPTY=new a;return a}(),od=function(){function a(){}n(a,"laya.events.KeyBoardManager");a.__init__=function(){a._addEvent("keydown");a._addEvent("keypress");a._addEvent("keyup")};a._addEvent=function(a){q.document.addEventListener(a,function(b){laya.events.KeyBoardManager._dispatch(b,a)},!0)};a._dispatch=function(c,b){if(a.enabled){a._event._stoped=!1;a._event.nativeEvent=c;a._event.keyCode=c.keyCode||c.which||c.charCode;"keydown"===b?a._pressKeys[a._event.keyCode]=!0:"keyup"===b&&(a._pressKeys[a._event.keyCode]=null);for(var d=c=l.stage.focus&&null!=l.stage.focus.event&&l.stage.focus.displayedInStage?l.stage.focus:l.stage;d;)d.event(b,a._event.setTo(b,d,c)),d=d.parent}};a.hasKeyDown=function(c){return a._pressKeys[c]};a._pressKeys={};a.enabled=!0;u(a,["_event",function(){return this._event=new Ya}]);return a}(),Oc=function(){function a(){}n(a,"laya.net.AtlasInfoManager");a.enable=function(c,b){l.loader.load(c,B.create(null,a._onInfoLoaded,[b]),null,"json")};a._onInfoLoaded=function(c,b){var d,e,h,f,k;for(d in b)for(h=b[d],e=h[0],h=h[1],k=h.length,f=0;f<k;f++)a._fileLoadDic[e+h[f]]=d;c&&c.run()};a.getFileLoadPath=function(c){return a._fileLoadDic[c]||c};a._fileLoadDic={};return a}(),bc=function(){function a(){this.skY=this.skX=0;this.scY=this.scX=1;this.skewY=this.skewX=this.y=this.x=0;this.mMatrix=null}n(a,"laya.ani.bone.Transform");var c=a.prototype;c.initData=function(b){void 0!=b.x&&(this.x=b.x);void 0!=b.y&&(this.y=b.y);void 0!=b.skX&&(this.skX=b.skX);void 0!=b.skY&&(this.skY=b.skY);void 0!=b.scX&&(this.scX=b.scX);void 0!=b.scY&&(this.scY=b.scY)};c.getMatrix=function(){var b;b=this.mMatrix?this.mMatrix:this.mMatrix=new C;b.identity();b.scale(this.scX,this.scY);(this.skewX||this.skewY)&&this.skew(b,this.skewX*Math.PI/180,this.skewY*Math.PI/180);b.rotate(this.skX*Math.PI/180);b.translate(this.x,this.y);return b};c.skew=function(b,d,a){var c=Math.sin(a);a=Math.cos(a);var e=Math.sin(d);d=Math.cos(d);b.setTo(b.a*d-b.b*c,b.a*e+b.b*a,b.c*d-b.d*c,b.c*e+b.d*a,b.tx*d-b.ty*c,b.tx*e+b.ty*a);return b};return a}(),ne=function(){function a(){this._mesh=null;this._numEle=this._startIdx=0;this.shaderValue=null;this.blendType=0;this._ref=1;this.srcRT=null;this._key=new Db}n(a,"laya.webgl.submit.SubmitTarget");var c=a.prototype;l.imps(c,{"laya.webgl.submit.ISubmit":!0});c.renderSubmit=function(){this._mesh.useMesh(R.mainContext);var b=this.srcRT;b&&(this.shaderValue.texture=b._getSource(),this.shaderValue.upload(),this.blend(),I.renderBatches++,I.trianglesFaces+=this._numEle/3,R.mainContext.drawElements(4,this._numEle,5123,this._startIdx));return 1};c.blend=function(){if(la.activeBlendFunction!==la.fns[this.blendType]){var b=R.mainContext;b.enable(3042);la.fns[this.blendType](b);la.activeBlendFunction=la.fns[this.blendType]}};c.getRenderType=function(){return 0};c.releaseRender=function(){if(1>--this._ref){var b=a.POOL;b[b._length++]=this}};c.reUse=function(b,d){this._startIdx=d;this._ref++;return d};a.create=function(b,d,c,h){var e=a.POOL._length?a.POOL[--a.POOL._length]:new a;e._mesh=d;e.srcRT=h;e._startIdx=d.indexNum*Ua.BYTES_PIDX;e._ref=1;e._key.clear();e._numEle=0;e.blendType=b._nBlendType;e._key.blendShader=e.blendType;e.shaderValue=c;e.shaderValue.setValue(b._shader2D);b._colorFiler&&(b=b._colorFiler,c.defines.add(b.type),c.colorMat=b._mat,c.colorAlpha=b._alpha);return e};a.POOL=(a.POOL=[],a.POOL._length=0,a.POOL);return a}(),Xb=function(){function a(b,d,a,c){this._idata=[]}n(a,"laya.layagl.CommandEncoder");var c=a.prototype;c.getArrayData=function(){return this._idata};c.getPtrID=function(){return 0};c.beginEncoding=function(){};c.endEncoding=function(){};c.clearEncoding=function(){this._idata.length=0};c.getCount=function(){return this._idata.length};c.add_ShaderValue=function(b){this._idata.push(b)};c.addShaderUniform=function(b){this.add_ShaderValue(b)};return a}(),pe=function(){function a(){}n(a,"laya.debug.divui.DivScripts");a.init=function(){var c;c=oe.decodeToByte(a.data).readUTFBytes();l._runScript(c)};a.data="ZnVuY3Rpb24gZGh0bWx4RXZlbnQoZSx0LGkpe2UuYWRkRXZlbnRMaXN0ZW5lcj9lLmFkZEV2ZW50TGlzdGVuZXIodCxpLCExKTplLmF0dGFjaEV2ZW50JiZlLmF0dGFjaEV2ZW50KCJvbiIrdCxpKX1mdW5jdGlvbiBkaHRtbFhUcmVlT2JqZWN0KGUsdCxpLG4pe2lmKGRodG1seEV2ZW50LmluaXRUb3VjaCYmZGh0bWx4RXZlbnQuaW5pdFRvdWNoKCksX2lzSUUpdHJ5e2RvY3VtZW50LmV4ZWNDb21tYW5kKCJCYWNrZ3JvdW5kSW1hZ2VDYWNoZSIsITEsITApfWNhdGNoKG8pe310aGlzLnBhcmVudE9iamVjdD0ib2JqZWN0IiE9dHlwZW9mIGU/ZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoZSk6ZSx0aGlzLnBhcmVudE9iamVjdC5zdHlsZS5vdmVyZmxvdz0iaGlkZGVuIix0aGlzLl9pdGltX2RnPSEwLHRoaXMuZGxtdHI9IiwiLHRoaXMuZHJvcExvd2VyPSExLHRoaXMuZW5hYmxlSUVJbWFnZUZpeCghMCksdGhpcy54bWxzdGF0ZT0wLHRoaXMubXl0eXBlPSJ0cmVlIix0aGlzLnNtY2hlY2s9ITAsdGhpcy53aWR0aD10LHRoaXMuaGVpZ2h0PWksdGhpcy5yb290SWQ9bix0aGlzLmNoaWxkQ2FsYz1udWxsLHRoaXMuZGVmX2ltZ194PSIxOHB4Iix0aGlzLmRlZl9pbWdfeT0iMThweCIsdGhpcy5kZWZfbGluZV9pbWdfeD0iMThweCIsdGhpcy5kZWZfbGluZV9pbWdfeT0iMjRweCIsdGhpcy5fZHJhZ2dlZD1uZXcgQXJyYXksdGhpcy5fc2VsZWN0ZWQ9bmV3IEFycmF5LHRoaXMuc3R5bGVfcG9pbnRlcj0icG9pbnRlciIsdGhpcy5fYWltZ3M9ITAsdGhpcy5odG1sY0E9IiBbIix0aGlzLmh0bWxjQj0iXSIsdGhpcy5sV2luPXdpbmRvdyx0aGlzLmNNZW51PTAsdGhpcy5tbGl0ZW1zPTAsdGhpcy5pY29uVVJMPSIiLHRoaXMuZGFkbW9kZT0wLHRoaXMuc2xvd1BhcnNlPSExLHRoaXMuYXV0b1Njcm9sbD0hMCx0aGlzLmhmTW9kZT0wLHRoaXMubm9kZUN1dD1uZXcgQXJyYXksdGhpcy5YTUxzb3VyY2U9MCx0aGlzLlhNTGxvYWRpbmdXYXJuaW5nPTAsdGhpcy5faWRwdWxsPXt9LHRoaXMuX3B1bGxTaXplPTAsdGhpcy50cmVlTGluZXNPbj0hMCx0aGlzLnRzY2hlY2s9ITEsdGhpcy50aW1nZW49ITAsdGhpcy5kcGNweT0hMSx0aGlzLl9sZF9pZD1udWxsLHRoaXMuX2R5bkRlbGV0ZUJyYW5jaGVzPXt9LHRoaXMuX29pZV9vblhMRT1bXSx0aGlzLmltUGF0aD13aW5kb3cuZGh4X2dsb2JhbEltZ1BhdGh8fCIiLHRoaXMuY2hlY2tBcnJheT1uZXcgQXJyYXkoImljb25VbmNoZWNrQWxsLmdpZiIsImljb25DaGVja0FsbC5naWYiLCJpY29uQ2hlY2tHcmF5LmdpZiIsImljb25VbmNoZWNrRGlzLmdpZiIsImljb25DaGVja0Rpcy5naWYiLCJpY29uQ2hlY2tEaXMuZ2lmIiksdGhpcy5yYWRpb0FycmF5PW5ldyBBcnJheSgicmFkaW9fb2ZmLmdpZiIsInJhZGlvX29uLmdpZiIsInJhZGlvX29uLmdpZiIsInJhZGlvX29mZi5naWYiLCJyYWRpb19vbi5naWYiLCJyYWRpb19vbi5naWYiKSx0aGlzLmxpbmVBcnJheT1uZXcgQXJyYXkoImxpbmUyLmdpZiIsImxpbmUzLmdpZiIsImxpbmU0LmdpZiIsYmxhbmtfYmFzZTY0LGJsYW5rX2Jhc2U2NCwibGluZTEuZ2lmIiksdGhpcy5taW51c0FycmF5PW5ldyBBcnJheSgibWludXMyLmdpZiIsIm1pbnVzMy5naWYiLCJtaW51czQuZ2lmIiwiZGF0YTppbWFnZS9naWY7YmFzZTY0LFIwbEdPRGxoRWdBWUFKRUNBTEd2clo2ZG5mVDA5QUFBQUNINUJBRUFBQUlBTEFBQUFBQVNBQmdBQUFJY2xJK3B5KzBQbzV5MFdoc0NEV0IzbUdYZnd3SG1oYWJxeXJaVEFRQTciLCJtaW51czUuZ2lmIiksdGhpcy5wbHVzQXJyYXk9bmV3IEFycmF5KCJwbHVzMi5naWYiLCJwbHVzMy5naWYiLCJwbHVzNC5naWYiLCJkYXRhOmltYWdlL2dpZjtiYXNlNjQsUjBsR09EbGhFZ0FZQUpFQ0FLR2duN0d2cmZUMDlBQUFBQ0g1QkFFQUFBSUFMQUFBQUFBU0FCZ0FBQUljbEkrcHkrMFBvNXkwVW5CRHlIc0NMUUZmT0U2ZGhhYnF5clpKQVFBNyIsInBsdXM1LmdpZiIpLHRoaXMuaW1hZ2VBcnJheT1uZXcgQXJyYXkoImRhdGE6aW1hZ2UvZ2lmO2Jhc2U2NCxSMGxHT0RsaEVnQVNBS0VDQUplWGw3R3ZyZi8vLy8vLy95SDVCQUVLQUFJQUxBQUFBQUFTQUJJQUFBSXpsSStwQXUyOURBaTAxamlUWFJuTm0zVEhCNDVCYUoyZXVsQm94TENTL0s2d09OODBYcHQ2citCOUhrU2FJSVdFS1EwRkFEcz0iLCJkYXRhOmltYWdlL2dpZjtiYXNlNjQsUjBsR09EbGhFZ0FTQUtFQ0FKZVhsN0d2cmYvLy8vLy8veUg1QkFFS0FBSUFMQUFBQUFBU0FCSUFBQUl6bEkrcHl3Y1BtM21oV2drQ3NqQk92VmtpbUVsRzlabENCbFhkKzJYampMS2c1R3FvZVpYcXZzT1FYSy9palVaVEtWVUZBRHM9IiwiZGF0YTppbWFnZS9naWY7YmFzZTY0LFIwbEdPRGxoRWdBU0FLRUNBSmVYbDdHdnJmLy8vLy8vL3lINUJBRUtBQUlBTEFBQUFBQVNBQklBQUFJd2xJK3B5d2NQbTNtaFdna0NzakJPdlZraW1FbEc5WmxDdVlJWTZUWXMrNmJtSERPNGlnZmREM0dOaGhlVjBWUUFBRHM9IiksdGhpcy5jdXRJbWc9bmV3IEFycmF5KDAsMCwwKSx0aGlzLmN1dEltYWdlPSJidXRfY3V0LmdpZiIsZGh4NC5fZXZlbnRhYmxlKHRoaXMpLHRoaXMuaHRtbE5vZGU9bmV3IGRodG1sWFRyZWVJdGVtT2JqZWN0KHRoaXMucm9vdElkLCIiLDAsdGhpcyksdGhpcy5odG1sTm9kZS5odG1sTm9kZS5jaGlsZE5vZGVzWzBdLmNoaWxkTm9kZXNbMF0uc3R5bGUuZGlzcGxheT0ibm9uZSIsdGhpcy5odG1sTm9kZS5odG1sTm9kZS5jaGlsZE5vZGVzWzBdLmNoaWxkTm9kZXNbMF0uY2hpbGROb2Rlc1swXS5jbGFzc05hbWU9ImhpZGRlblJvdyIsdGhpcy5hbGxUcmVlPXRoaXMuX2NyZWF0ZVNlbGYoKSx0aGlzLmFsbFRyZWUuYXBwZW5kQ2hpbGQodGhpcy5odG1sTm9kZS5odG1sTm9kZSksZGh0bWx4LiRjdXN0b21TY3JvbGwmJmRodG1seC5DdXN0b21TY3JvbGwuZW5hYmxlKHRoaXMpLF9pc0ZGJiYodGhpcy5hbGxUcmVlLmNoaWxkTm9kZXNbMF0ud2lkdGg9IjEwMCUiLHRoaXMuYWxsVHJlZS5jaGlsZE5vZGVzWzBdLnN0eWxlLm92ZXJmbG93PSJoaWRkZW4iKTt2YXIgcj10aGlzO2lmKHRoaXMuYWxsVHJlZS5vbnNlbGVjdHN0YXJ0PW5ldyBGdW5jdGlvbigicmV0dXJuIGZhbHNlOyIpLF9pc01hY09TJiYodGhpcy5hbGxUcmVlLm9uY29udGV4dG1lbnU9ZnVuY3Rpb24oZSl7cmV0dXJuIHIuX2RvQ29udENsaWNrKGV8fHdpbmRvdy5ldmVudCwhMCl9KSx0aGlzLmFsbFRyZWUub25tb3VzZWRvd249ZnVuY3Rpb24oZSl7cmV0dXJuIHIuX2RvQ29udENsaWNrKGV8fHdpbmRvdy5ldmVudCl9LHRoaXMuWE1MTG9hZGVyPXRoaXMuX3BhcnNlWE1MVHJlZSxfaXNJRSYmdGhpcy5wcmV2ZW50SUVDYXNoaW5nKCEwKSx0aGlzLnNlbGVjdGlvbkJhcj1kb2N1bWVudC5jcmVhdGVFbGVtZW50KCJESVYiKSx0aGlzLnNlbGVjdGlvbkJhci5jbGFzc05hbWU9InNlbGVjdGlvbkJhciIsdGhpcy5zZWxlY3Rpb25CYXIuaW5uZXJIVE1MPSImbmJzcDsiLHRoaXMuc2VsZWN0aW9uQmFyLnN0eWxlLmRpc3BsYXk9Im5vbmUiLHRoaXMuYWxsVHJlZS5hcHBlbmRDaGlsZCh0aGlzLnNlbGVjdGlvbkJhciksd2luZG93LmFkZEV2ZW50TGlzdGVuZXImJndpbmRvdy5hZGRFdmVudExpc3RlbmVyKCJ1bmxvYWQiLGZ1bmN0aW9uKCl7dHJ5e3IuZGVzdHJ1Y3RvcigpfWNhdGNoKGUpe319LCExKSx3aW5kb3cuYXR0YWNoRXZlbnQmJndpbmRvdy5hdHRhY2hFdmVudCgib251bmxvYWQiLGZ1bmN0aW9uKCl7dHJ5e3IuZGVzdHJ1Y3RvcigpfWNhdGNoKGUpe319KSx0aGlzLnNldEltYWdlc1BhdGg9dGhpcy5zZXRJbWFnZVBhdGgsdGhpcy5zZXRJY29uc1BhdGg9dGhpcy5zZXRJY29uUGF0aCx0aGlzLnNldFNraW4oIm1hdGVyaWFsIiksZGh0bWx4LmltYWdlX3BhdGgpe3ZhciBsPWRodG1seC5pbWFnZV9wYXRoLHM9dGhpcy5wYXJlbnRPYmplY3QuY2xhc3NOYW1lLm1hdGNoKC9kaHh0cmVlX2RoeF8oW2Etel9dKikvaSk7bnVsbCE9cyYmbnVsbCE9c1sxXSYmKGwrPSJkaHh0cmVlXyIrc1sxXSsiLyIpLHRoaXMuc2V0SW1hZ2VQYXRoKGwpfXJldHVybiB0aGlzfWZ1bmN0aW9uIGNPYmplY3QoKXtyZXR1cm4gdGhpc31mdW5jdGlvbiBkaHRtbFhUcmVlSXRlbU9iamVjdChlLHQsaSxuLG8scil7cmV0dXJuIHRoaXMuaHRtbE5vZGU9IiIsdGhpcy5hY29sb3I9IiIsdGhpcy5zY29sb3I9IiIsdGhpcy50cj0wLHRoaXMuY2hpbGRzQ291bnQ9MCx0aGlzLnRlbXBET01NPTAsdGhpcy50ZW1wRE9NVT0wLHRoaXMuZHJhZ1NwYW49MCx0aGlzLmRyYWdNb3ZlPTAsdGhpcy5zcGFuPTAsdGhpcy5jbG9zZWJsZT0xLHRoaXMuY2hpbGROb2Rlcz1uZXcgQXJyYXksdGhpcy51c2VyRGF0YT1uZXcgY09iamVjdCx0aGlzLmNoZWNrc3RhdGU9MCx0aGlzLnRyZWVOb2Q9bix0aGlzLmxhYmVsPXQsdGhpcy5wYXJlbnRPYmplY3Q9aSx0aGlzLmFjdGlvbkhhbmRsZXI9byx0aGlzLmltYWdlcz1uZXcgQXJyYXkobi5pbWFnZUFycmF5WzBdLG4uaW1hZ2VBcnJheVsxXSxuLmltYWdlQXJyYXlbMl0pLHRoaXMuaWQ9bi5fZ2xvYmFsSWRTdG9yYWdlQWRkKGUsdGhpcyksdGhpcy5odG1sTm9kZT10aGlzLnRyZWVOb2QuY2hlY2tCb3hPZmY/dGhpcy50cmVlTm9kLl9jcmVhdGVJdGVtKDEsdGhpcyxyKTp0aGlzLnRyZWVOb2QuX2NyZWF0ZUl0ZW0oMCx0aGlzLHIpLHRoaXMuaHRtbE5vZGUub2JqQmVsb25nPXRoaXMsdGhpc31mdW5jdGlvbiBqc29uUG9pbnRlcihlLHQpe3RoaXMuZD1lLHRoaXMuZHA9dH1mdW5jdGlvbiBkaHhfaW5pdF90cmVlcygpe2Zvcih2YXIgZT1kb2N1bWVudC5nZXRFbGVtZW50c0J5VGFnTmFtZSgiZGl2IiksdD0wO3Q8ZS5sZW5ndGg7dCsrKSJkaHRtbHhUcmVlIj09ZVt0XS5jbGFzc05hbWUmJmRodG1sWFRyZWVGcm9tSFRNTChlW3RdKX12YXIgYmxhbmtfYmFzZTY0PSJkYXRhOmltYWdlL2dpZjtiYXNlNjQsUjBsR09EbGhFZ0FTQUlBQUFQLy8vLy8vL3lINUJBVVVBQUVBTEFBQUFBQVNBQklBQUFJUGpJK3B5KzBQbzV5MDJvdXozcHdYQURzPSI7InVuZGVmaW5lZCI9PXR5cGVvZiB3aW5kb3cuZGh4JiYod2luZG93LmRoeD13aW5kb3cuZGh4ND17dmVyc2lvbjoiNS4wIixza2luOm51bGwsbGFzdElkOjEsbmV3SWQ6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5sYXN0SWQrK30semltOntkYXRhOnt9LHN0ZXA6NSxmaXJzdDpmdW5jdGlvbigpe3JldHVybiAxMDB9LGxhc3Q6ZnVuY3Rpb24oKXt2YXIgZT10aGlzLmZpcnN0KCk7Zm9yKHZhciB0IGluIHRoaXMuZGF0YSllPU1hdGgubWF4KGUsdGhpcy5kYXRhW3RdKTtyZXR1cm4gZX0scmVzZXJ2ZTpmdW5jdGlvbihlKXtyZXR1cm4gdGhpcy5kYXRhW2VdPXRoaXMubGFzdCgpK3RoaXMuc3RlcCx0aGlzLmRhdGFbZV19LGNsZWFyOmZ1bmN0aW9uKGUpe251bGwhPXRoaXMuZGF0YVtlXSYmKHRoaXMuZGF0YVtlXT1udWxsLGRlbGV0ZSB0aGlzLmRhdGFbZV0pfX0sczJiOmZ1bmN0aW9uKGUpe3JldHVybiJzdHJpbmciPT10eXBlb2YgZSYmKGU9ZS50b0xvd2VyQ2FzZSgpKSwxPT1lfHwxPT1lfHwidHJ1ZSI9PWV8fCIxIj09ZXx8InllcyI9PWV8fCJ5Ij09ZXx8Im9uIj09ZX0sczJqOmZ1bmN0aW9uKHMpe3ZhciBvYmo9bnVsbDtkaHg0LnRlbXA9bnVsbDt0cnl7ZXZhbCgiZGh4NC50ZW1wPSIrcyl9Y2F0Y2goZSl7ZGh4NC50ZW1wPW51bGx9cmV0dXJuIG9iaj1kaHg0LnRlbXAsZGh4NC50ZW1wPW51bGwsb2JqfSxhYnNMZWZ0OmZ1bmN0aW9uKGUpe3JldHVybiJzdHJpbmciPT10eXBlb2YgZSYmKGU9ZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoZSkpLHRoaXMuZ2V0T2Zmc2V0KGUpLmxlZnR9LGFic1RvcDpmdW5jdGlvbihlKXtyZXR1cm4ic3RyaW5nIj09dHlwZW9mIGUmJihlPWRvY3VtZW50LmdldEVsZW1lbnRCeUlkKGUpKSx0aGlzLmdldE9mZnNldChlKS50b3B9LF9hT2ZzOmZ1bmN0aW9uKGUpe2Zvcih2YXIgdD0wLGk9MDtlOyl0Kz1wYXJzZUludChlLm9mZnNldFRvcCksaSs9cGFyc2VJbnQoZS5vZmZzZXRMZWZ0KSxlPWUub2Zmc2V0UGFyZW50O3JldHVybnt0b3A6dCxsZWZ0Oml9fSxfYU9mc1JlY3Q6ZnVuY3Rpb24oZSl7dmFyIHQ9ZS5nZXRCb3VuZGluZ0NsaWVudFJlY3QoKSxpPWRvY3VtZW50LmJvZHksbj1kb2N1bWVudC5kb2N1bWVudEVsZW1lbnQsbz13aW5kb3cucGFnZVlPZmZzZXR8fG4uc2Nyb2xsVG9wfHxpLnNjcm9sbFRvcCxyPXdpbmRvdy5wYWdlWE9mZnNldHx8bi5zY3JvbGxMZWZ0fHxpLnNjcm9sbExlZnQsbD1uLmNsaWVudFRvcHx8aS5jbGllbnRUb3B8fDAscz1uLmNsaWVudExlZnR8fGkuY2xpZW50TGVmdHx8MCxhPXQudG9wK28tbCxkPXQubGVmdCtyLXM7cmV0dXJue3RvcDpNYXRoLnJvdW5kKGEpLGxlZnQ6TWF0aC5yb3VuZChkKX19LGdldE9mZnNldDpmdW5jdGlvbihlKXtyZXR1cm4gZS5nZXRCb3VuZGluZ0NsaWVudFJlY3Q/dGhpcy5fYU9mc1JlY3QoZSk6dGhpcy5fYU9mcyhlKX0sX2lzT2JqOmZ1bmN0aW9uKGUpe3JldHVybiBudWxsIT1lJiYib2JqZWN0Ij09dHlwZW9mIGUmJiJ1bmRlZmluZWQiPT10eXBlb2YgZS5sZW5ndGh9LF9jb3B5T2JqOmZ1bmN0aW9uKGUpe2lmKHRoaXMuX2lzT2JqKGUpKXt2YXIgdD17fTtmb3IodmFyIGkgaW4gZSl0W2ldPSJvYmplY3QiPT10eXBlb2YgZVtpXSYmbnVsbCE9ZVtpXT90aGlzLl9jb3B5T2JqKGVbaV0pOmVbaV19ZWxzZSBmb3IodmFyIHQ9W10saT0wO2k8ZS5sZW5ndGg7aSsrKXRbaV09Im9iamVjdCI9PXR5cGVvZiBlW2ldJiZudWxsIT1lW2ldP3RoaXMuX2NvcHlPYmooZVtpXSk6ZVtpXTtyZXR1cm4gdH19LHdpbmRvdy5kaHg0LmlzSUU9bmF2aWdhdG9yLnVzZXJBZ2VudC5pbmRleE9mKCJNU0lFIik+PTB8fG5hdmlnYXRvci51c2VyQWdlbnQuaW5kZXhPZigiVHJpZGVudCIpPj0wLHdpbmRvdy5kaHg0LmlzSUU2PW51bGw9PXdpbmRvdy5YTUxIdHRwUmVxdWVzdCYmbmF2aWdhdG9yLnVzZXJBZ2VudC5pbmRleE9mKCJNU0lFIik+PTAsd2luZG93LmRoeDQuaXNJRTc9bmF2aWdhdG9yLnVzZXJBZ2VudC5pbmRleE9mKCJNU0lFIDcuMCIpPj0wJiZuYXZpZ2F0b3IudXNlckFnZW50LmluZGV4T2YoIlRyaWRlbnQiKTwwLHdpbmRvdy5kaHg0LmlzSUU4PW5hdmlnYXRvci51c2VyQWdlbnQuaW5kZXhPZigiTVNJRSA4LjAiKT49MCYmbmF2aWdhdG9yLnVzZXJBZ2VudC5pbmRleE9mKCJUcmlkZW50Iik+PTAsd2luZG93LmRoeDQuaXNJRTk9bmF2aWdhdG9yLnVzZXJBZ2VudC5pbmRleE9mKCJNU0lFIDkuMCIpPj0wJiZuYXZpZ2F0b3IudXNlckFnZW50LmluZGV4T2YoIlRyaWRlbnQiKT49MCx3aW5kb3cuZGh4NC5pc0lFMTA9bmF2aWdhdG9yLnVzZXJBZ2VudC5pbmRleE9mKCJNU0lFIDEwLjAiKT49MCYmbmF2aWdhdG9yLnVzZXJBZ2VudC5pbmRleE9mKCJUcmlkZW50Iik+PTAmJjEhPXdpbmRvdy5uYXZpZ2F0b3IucG9pbnRlckVuYWJsZWQsd2luZG93LmRoeDQuaXNJRTExPW5hdmlnYXRvci51c2VyQWdlbnQuaW5kZXhPZigiVHJpZGVudCIpPj0wJiYxPT13aW5kb3cubmF2aWdhdG9yLnBvaW50ZXJFbmFibGVkLHdpbmRvdy5kaHg0LmlzRWRnZT1uYXZpZ2F0b3IudXNlckFnZW50LmluZGV4T2YoIkVkZ2UiKT49MCx3aW5kb3cuZGh4NC5pc09wZXJhPW5hdmlnYXRvci51c2VyQWdlbnQuaW5kZXhPZigiT3BlcmEiKT49MCx3aW5kb3cuZGh4NC5pc0Nocm9tZT1uYXZpZ2F0b3IudXNlckFnZW50LmluZGV4T2YoIkNocm9tZSIpPj0wJiYhd2luZG93LmRoeDQuaXNFZGdlLHdpbmRvdy5kaHg0LmlzS0hUTUw9KG5hdmlnYXRvci51c2VyQWdlbnQuaW5kZXhPZigiU2FmYXJpIik+PTB8fG5hdmlnYXRvci51c2VyQWdlbnQuaW5kZXhPZigiS29ucXVlcm9yIik+PTApJiYhd2luZG93LmRoeDQuaXNFZGdlLHdpbmRvdy5kaHg0LmlzRkY9bmF2aWdhdG9yLnVzZXJBZ2VudC5pbmRleE9mKCJGaXJlZm94Iik+PTAsd2luZG93LmRoeDQuaXNJUGFkPW5hdmlnYXRvci51c2VyQWdlbnQuc2VhcmNoKC9pUGFkL2dpKT49MCx3aW5kb3cuZGh4NC5kbmQ9e2V2czp7fSxwX2VuOih3aW5kb3cuZGh4NC5pc0lFfHx3aW5kb3cuZGh4NC5pc0VkZ2UpJiYod2luZG93Lm5hdmlnYXRvci5wb2ludGVyRW5hYmxlZHx8d2luZG93Lm5hdmlnYXRvci5tc1BvaW50ZXJFbmFibGVkKSxfbVRvdWNoOmZ1bmN0aW9uKGUpe3JldHVybiB3aW5kb3cuZGh4NC5pc0lFMTAmJmUucG9pbnRlclR5cGU9PWUuTVNQT0lOVEVSX1RZUEVfTU9VU0V8fHdpbmRvdy5kaHg0LmlzSUUxMSYmIm1vdXNlIj09ZS5wb2ludGVyVHlwZXx8d2luZG93LmRoeDQuaXNFZGdlJiYibW91c2UiPT1lLnBvaW50ZXJUeXBlfSxfdG91Y2hPbjpmdW5jdGlvbihlKXtudWxsPT1lJiYoZT1kb2N1bWVudC5ib2R5KSxlLnN0eWxlLnRvdWNoQWN0aW9uPWUuc3R5bGUubXNUb3VjaEFjdGlvbj0iIixlPW51bGx9LF90b3VjaE9mZjpmdW5jdGlvbihlKXtudWxsPT1lJiYoZT1kb2N1bWVudC5ib2R5KSxlLnN0eWxlLnRvdWNoQWN0aW9uPWUuc3R5bGUubXNUb3VjaEFjdGlvbj0ibm9uZSIsZT1udWxsfX0sMT09d2luZG93Lm5hdmlnYXRvci5wb2ludGVyRW5hYmxlZD93aW5kb3cuZGh4NC5kbmQuZXZzPXtzdGFydDoicG9pbnRlcmRvd24iLG1vdmU6InBvaW50ZXJtb3ZlIixlbmQ6InBvaW50ZXJ1cCJ9OjE9PXdpbmRvdy5uYXZpZ2F0b3IubXNQb2ludGVyRW5hYmxlZD93aW5kb3cuZGh4NC5kbmQuZXZzPXtzdGFydDoiTVNQb2ludGVyRG93biIsbW92ZToiTVNQb2ludGVyTW92ZSIsZW5kOiJNU1BvaW50ZXJVcCJ9OiJ1bmRlZmluZWQiIT10eXBlb2Ygd2luZG93LmFkZEV2ZW50TGlzdGVuZXImJih3aW5kb3cuZGh4NC5kbmQuZXZzPXtzdGFydDoidG91Y2hzdGFydCIsbW92ZToidG91Y2htb3ZlIixlbmQ6InRvdWNoZW5kIn0pKSwidW5kZWZpbmVkIj09dHlwZW9mIHdpbmRvdy5kaHg0Ll9ldmVudGFibGUmJih3aW5kb3cuZGh4NC5fZXZlbnRhYmxlPWZ1bmN0aW9uKGUsdCl7cmV0dXJuImNsZWFyIj09dD8oZS5kZXRhY2hBbGxFdmVudHMoKSxlLmRoeGV2cz1udWxsLGUuYXR0YWNoRXZlbnQ9bnVsbCxlLmRldGFjaEV2ZW50PW51bGwsZS5jaGVja0V2ZW50PW51bGwsZS5jYWxsRXZlbnQ9bnVsbCxlLmRldGFjaEFsbEV2ZW50cz1udWxsLGU9bnVsbCx2b2lkIDApOihlLmRoeGV2cz17ZGF0YTp7fX0sZS5hdHRhY2hFdmVudD1mdW5jdGlvbihlLHQpe2U9U3RyaW5nKGUpLnRvTG93ZXJDYXNlKCksdGhpcy5kaHhldnMuZGF0YVtlXXx8KHRoaXMuZGh4ZXZzLmRhdGFbZV09e30pO3ZhciBpPXdpbmRvdy5kaHg0Lm5ld0lkKCk7cmV0dXJuIHRoaXMuZGh4ZXZzLmRhdGFbZV1baV09dCxpfSxlLmRldGFjaEV2ZW50PWZ1bmN0aW9uKGUpe2Zvcih2YXIgdCBpbiB0aGlzLmRoeGV2cy5kYXRhKXt2YXIgaT0wO2Zvcih2YXIgbiBpbiB0aGlzLmRoeGV2cy5kYXRhW3RdKW49PWU/KHRoaXMuZGh4ZXZzLmRhdGFbdF1bbl09bnVsbCxkZWxldGUgdGhpcy5kaHhldnMuZGF0YVt0XVtuXSk6aSsrOzA9PWkmJih0aGlzLmRoeGV2cy5kYXRhW3RdPW51bGwsZGVsZXRlIHRoaXMuZGh4ZXZzLmRhdGFbdF0pfX0sZS5jaGVja0V2ZW50PWZ1bmN0aW9uKGUpe3JldHVybiBlPVN0cmluZyhlKS50b0xvd2VyQ2FzZSgpLG51bGwhPXRoaXMuZGh4ZXZzLmRhdGFbZV19LGUuY2FsbEV2ZW50PWZ1bmN0aW9uKGUsdCl7aWYoZT1TdHJpbmcoZSkudG9Mb3dlckNhc2UoKSxudWxsPT10aGlzLmRoeGV2cy5kYXRhW2VdKXJldHVybiEwO3ZhciBpPSEwO2Zvcih2YXIgbiBpbiB0aGlzLmRoeGV2cy5kYXRhW2VdKWk9dGhpcy5kaHhldnMuZGF0YVtlXVtuXS5hcHBseSh0aGlzLHQpJiZpO3JldHVybiBpfSxlLmRldGFjaEFsbEV2ZW50cz1mdW5jdGlvbigpe2Zvcih2YXIgZSBpbiB0aGlzLmRoeGV2cy5kYXRhKXtmb3IodmFyIHQgaW4gdGhpcy5kaHhldnMuZGF0YVtlXSl0aGlzLmRoeGV2cy5kYXRhW2VdW3RdPW51bGwsZGVsZXRlIHRoaXMuZGh4ZXZzLmRhdGFbZV1bdF07dGhpcy5kaHhldnMuZGF0YVtlXT1udWxsLGRlbGV0ZSB0aGlzLmRoeGV2cy5kYXRhW2VdfX0sZT1udWxsLHZvaWQgMCl9LGRoeDQuX2V2ZW50YWJsZShkaHg0KSksInVuZGVmaW5lZCI9PXR5cGVvZiB3aW5kb3cuZGh0bWx4JiYod2luZG93LmRodG1seD17ZXh0ZW5kOmZ1bmN0aW9uKGUsdCl7Zm9yKHZhciBpIGluIHQpZVtpXXx8KGVbaV09dFtpXSk7cmV0dXJuIGV9LGV4dGVuZF9hcGk6ZnVuY3Rpb24oZSx0LGkpe3ZhciBuPXdpbmRvd1tlXTtuJiYod2luZG93W2VdPWZ1bmN0aW9uKGUpe2lmKGUmJiJvYmplY3QiPT10eXBlb2YgZSYmIWUudGFnTmFtZSl7dmFyIGk9bi5hcHBseSh0aGlzLHQuX2luaXQ/dC5faW5pdChlKTphcmd1bWVudHMpO2Zvcih2YXIgbyBpbiBkaHRtbHgpdFtvXSYmdGhpc1t0W29dXShkaHRtbHhbb10pO2Zvcih2YXIgbyBpbiBlKXRbb10/dGhpc1t0W29dXShlW29dKTowPT09by5pbmRleE9mKCJvbiIpJiZ0aGlzLmF0dGFjaEV2ZW50KG8sZVtvXSl9ZWxzZSB2YXIgaT1uLmFwcGx5KHRoaXMsYXJndW1lbnRzKTtyZXR1cm4gdC5fcGF0Y2gmJnQuX3BhdGNoKHRoaXMpLGl8fHRoaXN9LHdpbmRvd1tlXS5wcm90b3R5cGU9bi5wcm90b3R5cGUsaSYmZGh0bWx4LmV4dGVuZCh3aW5kb3dbZV0ucHJvdG90eXBlLGkpKX0sdXJsOmZ1bmN0aW9uKGUpe3JldHVybi0xIT1lLmluZGV4T2YoIj8iKT8iJiI6Ij8ifX0pLF9pc0ZGPSExLF9pc0lFPSExLF9pc09wZXJhPSExLF9pc0tIVE1MPSExLF9pc01hY09TPSExLF9pc0Nocm9tZT0hMSxfRkZydj0hMSxfS0hUTUxydj0hMSxfT3BlcmFSdj0hMSwtMSE9bmF2aWdhdG9yLnVzZXJBZ2VudC5pbmRleE9mKCJNYWNpbnRvc2giKSYmKF9pc01hY09TPSEwKSxuYXZpZ2F0b3IudXNlckFnZW50LnRvTG93ZXJDYXNlKCkuaW5kZXhPZigiY2hyb21lIik+LTEmJihfaXNDaHJvbWU9ITApLC0xIT1uYXZpZ2F0b3IudXNlckFnZW50LmluZGV4T2YoIlNhZmFyaSIpfHwtMSE9bmF2aWdhdG9yLnVzZXJBZ2VudC5pbmRleE9mKCJLb25xdWVyb3IiKT8oX0tIVE1McnY9cGFyc2VGbG9hdChuYXZpZ2F0b3IudXNlckFnZW50LnN1YnN0cihuYXZpZ2F0b3IudXNlckFnZW50LmluZGV4T2YoIlNhZmFyaSIpKzcsNSkpLF9LSFRNTHJ2PjUyNT8oX2lzRkY9ITAsX0ZGcnY9MS45KTpfaXNLSFRNTD0hMCk6LTEhPW5hdmlnYXRvci51c2VyQWdlbnQuaW5kZXhPZigiT3BlcmEiKT8oX2lzT3BlcmE9ITAsX09wZXJhUnY9cGFyc2VGbG9hdChuYXZpZ2F0b3IudXNlckFnZW50LnN1YnN0cihuYXZpZ2F0b3IudXNlckFnZW50LmluZGV4T2YoIk9wZXJhIikrNiwzKSkpOi0xIT1uYXZpZ2F0b3IuYXBwTmFtZS5pbmRleE9mKCJNaWNyb3NvZnQiKT8oX2lzSUU9ITAsKC0xIT1uYXZpZ2F0b3IuYXBwVmVyc2lvbi5pbmRleE9mKCJNU0lFIDguMCIpfHwtMSE9bmF2aWdhdG9yLmFwcFZlcnNpb24uaW5kZXhPZigiTVNJRSA5LjAiKXx8LTEhPW5hdmlnYXRvci5hcHBWZXJzaW9uLmluZGV4T2YoIk1TSUUgMTAuMCIpfHxkb2N1bWVudC5kb2N1bWVudE1vZGU+NykmJiJCYWNrQ29tcGF0IiE9ZG9jdW1lbnQuY29tcGF0TW9kZSYmKF9pc0lFPTgpKToiTmV0c2NhcGUiPT1uYXZpZ2F0b3IuYXBwTmFtZSYmLTEhPW5hdmlnYXRvci51c2VyQWdlbnQuaW5kZXhPZigiVHJpZGVudCIpP19pc0lFPTg6KF9pc0ZGPSEwLF9GRnJ2PXBhcnNlRmxvYXQobmF2aWdhdG9yLnVzZXJBZ2VudC5zcGxpdCgicnY6IilbMV0pKSwidW5kZWZpbmVkIj09dHlwZW9mIHdpbmRvdy5kaHRtbHhFdmVudCxudWxsPT1kaHRtbHhFdmVudC50b3VjaERlbGF5JiYoZGh0bWx4RXZlbnQudG91Y2hEZWxheT0yZTMpLCJ1bmRlZmluZWQiPT10eXBlb2YgZGh0bWx4RXZlbnQuaW5pdFRvdWNoJiYoZGh0bWx4RXZlbnQuaW5pdFRvdWNoPWZ1bmN0aW9uKCl7ZnVuY3Rpb24gZSgpe2lmKGkpe3ZhciBlPWRvY3VtZW50LmNyZWF0ZUV2ZW50KCJIVE1MRXZlbnRzIik7ZS5pbml0RXZlbnQoImRibGNsaWNrIiwhMCwhMCksaS5kaXNwYXRjaEV2ZW50KGUpLHQ9aT1udWxsfX12YXIgdCxpLG4sbztkaHRtbHhFdmVudChkb2N1bWVudC5ib2R5LCJ0b3VjaHN0YXJ0IixmdW5jdGlvbihyKXtpPXIudG91Y2hlc1swXS50YXJnZXQsbj1yLnRvdWNoZXNbMF0uY2xpZW50WCxvPXIudG91Y2hlc1swXS5jbGllbnRZLHQ9d2luZG93LnNldFRpbWVvdXQoZSxkaHRtbHhFdmVudC50b3VjaERlbGF5KX0pLGRodG1seEV2ZW50KGRvY3VtZW50LmJvZHksInRvdWNobW92ZSIsZnVuY3Rpb24oZSl7dCYmKE1hdGguYWJzKGUudG91Y2hlc1swXS5jbGllbnRYLW4pPjUwfHxNYXRoLmFicyhlLnRvdWNoZXNbMF0uY2xpZW50WS1vKT41MCkmJih3aW5kb3cuY2xlYXJUaW1lb3V0KHQpLHQ9aT0hMSl9KSxkaHRtbHhFdmVudChkb2N1bWVudC5ib2R5LCJ0b3VjaGVuZCIsZnVuY3Rpb24oKXt0JiYod2luZG93LmNsZWFyVGltZW91dCh0KSx0PWk9ITEpfSksZGh0bWx4RXZlbnQuaW5pdFRvdWNoPWZ1bmN0aW9uKCl7fX0pLGRodG1sWFRyZWVPYmplY3QucHJvdG90eXBlLl9kb0NvbnRDbGljaz1mdW5jdGlvbihlLHQpe2lmKCF0JiYyIT1lLmJ1dHRvbilyZXR1cm4gdGhpcy5fYWNNZW51JiYodGhpcy5fYWNNZW51LmhpZGVDb250ZXh0TWVudT90aGlzLl9hY01lbnUuaGlkZUNvbnRleHRNZW51KCk6dGhpcy5jTWVudS5fY29udGV4dEVuZCgpKSwhMDtmb3IodmFyIGk9X2lzSUU/ZS5zcmNFbGVtZW50OmUudGFyZ2V0O2kmJiJCT0RZIiE9aS50YWdOYW1lJiYhaS5wYXJlbnRPYmplY3Q7KWk9aS5wYXJlbnROb2RlO2lmKCFpfHwhaS5wYXJlbnRPYmplY3QpcmV0dXJuITA7dmFyIG49aS5wYXJlbnRPYmplY3Q7aWYodGhpcy5jYWxsRXZlbnQoIm9uUmlnaHRDbGljayIsW24uaWQsZV0pfHwoKGUuc3JjRWxlbWVudHx8ZS50YXJnZXQpLm9uY29udGV4dG1lbnU9ZnVuY3Rpb24oZSl7cmV0dXJuKGV8fGV2ZW50KS5jYW5jZWxCdWJibGU9ITAsITF9KSx0aGlzLl9hY01lbnU9bi5jTWVudXx8dGhpcy5jTWVudSx0aGlzLl9hY01lbnUpe2lmKCF0aGlzLmNhbGxFdmVudCgib25CZWZvcmVDb250ZXh0TWVudSIsW24uaWRdKSlyZXR1cm4hMDtpZihfaXNNYWNPU3x8KChlLnNyY0VsZW1lbnR8fGUudGFyZ2V0KS5vbmNvbnRleHRtZW51PWZ1bmN0aW9uKGUpe3JldHVybihlfHxldmVudCkuY2FuY2VsQnViYmxlPSEwLCExfSksdGhpcy5fYWNNZW51LnNob3dDb250ZXh0TWVudSl7dmFyIG89d2luZG93LmRvY3VtZW50LmRvY3VtZW50RWxlbWVudCxyPXdpbmRvdy5kb2N1bWVudC5ib2R5LGw9bmV3IEFycmF5KG8uc2Nyb2xsTGVmdHx8ci5zY3JvbGxMZWZ0LG8uc2Nyb2xsVG9wfHxyLnNjcm9sbFRvcCk7aWYoX2lzSUUpdmFyIHM9ZS5jbGllbnRYK2xbMF0sYT1lLmNsaWVudFkrbFsxXTtlbHNlIHZhciBzPWUucGFnZVgsYT1lLnBhZ2VZO3RoaXMuX2FjTWVudS5zaG93Q29udGV4dE1lbnUocy0xLGEtMSksdGhpcy5jb250ZXh0SUQ9bi5pZCxlLmNhbmNlbEJ1YmJsZT0hMCx0aGlzLl9hY01lbnUuX3NraXBfaGlkZT0hMH1lbHNlIGkuY29udGV4dE1lbnVJZD1uLmlkLGkuY29udGV4dE1lbnU9dGhpcy5fYWNNZW51LGkuYT10aGlzLl9hY01lbnUuX2NvbnRleHRTdGFydCxpLmEoaSxlKSxpLmE9bnVsbDtyZXR1cm4hMX1yZXR1cm4hMH0sZGh0bWxYVHJlZU9iamVjdC5wcm90b3R5cGUuZW5hYmxlSUVJbWFnZUZpeD1mdW5jdGlvbihlKXtlPyh0aGlzLl9nZXRJbWc9ZnVuY3Rpb24oKXt2YXIgZT1kb2N1bWVudC5jcmVhdGVFbGVtZW50KCJESVYiKTtyZXR1cm4gZS5pbm5lckhUTUw9IiZuYnNwOyIsZS5jbGFzc05hbWU9ImRoeF9iZ19pbWdfZml4IixlfSx0aGlzLl9zZXRTcmM9ZnVuY3Rpb24oZSx0KXtlLnN0eWxlLmJhY2tncm91bmRJbWFnZT0idXJsKCIrdCsiKSJ9LHRoaXMuX2dldFNyYz1mdW5jdGlvbihlKXt2YXIgdD1lLnN0eWxlLmJhY2tncm91bmRJbWFnZTtyZXR1cm4gdC5zdWJzdHIoNCx0Lmxlbmd0aC01KS5yZXBsYWNlKC8oXiIpfCgiJCkvZywiIil9KToodGhpcy5fZ2V0SW1nPWZ1bmN0aW9uKGUpe3JldHVybiBkb2N1bWVudC5jcmVhdGVFbGVtZW50KGU9PXRoaXMucm9vdElkPyJkaXYiOiJpbWciKX0sdGhpcy5fc2V0U3JjPWZ1bmN0aW9uKGUsdCl7ZS5zcmM9dH0sdGhpcy5fZ2V0U3JjPWZ1bmN0aW9uKGUpe3JldHVybiBlLnNyY30pfSxkaHRtbFhUcmVlT2JqZWN0LnByb3RvdHlwZS5kZXN0cnVjdG9yPWZ1bmN0aW9uKCl7Zm9yKHZhciBlIGluIHRoaXMuX2lkcHVsbCl7dmFyIHQ9dGhpcy5faWRwdWxsW2VdO3QmJih0LnBhcmVudE9iamVjdD1udWxsLHQudHJlZU5vZD1udWxsLHQuY2hpbGROb2Rlcz1udWxsLHQuc3Bhbj1udWxsLHQudHIubm9kZW09bnVsbCx0LnRyPW51bGwsdC5odG1sTm9kZS5vYmpCZWxvbmc9bnVsbCx0Lmh0bWxOb2RlPW51bGwsdGhpcy5faWRwdWxsW2VdPW51bGwpfXRoaXMucGFyZW50T2JqZWN0LmlubmVySFRNTD0iIix0aGlzLmFsbFRyZWUub25zZWxlY3RzdGFydD1udWxsLHRoaXMuYWxsVHJlZS5vbmNvbnRleHRtZW51PW51bGwsdGhpcy5hbGxUcmVlLm9ubW91c2Vkb3duPW51bGw7Zm9yKHZhciBlIGluIHRoaXMpdGhpc1tlXT1udWxsfSxjT2JqZWN0LnByb3RvdHlwZT1uZXcgT2JqZWN0LGNPYmplY3QucHJvdG90eXBlLmNsb25lPWZ1bmN0aW9uKCl7ZnVuY3Rpb24gZSgpe31yZXR1cm4gZS5wcm90b3R5cGU9dGhpcyxuZXcgZX0sZGh0bWxYVHJlZU9iamVjdC5wcm90b3R5cGUuX2dsb2JhbElkU3RvcmFnZUFkZD1mdW5jdGlvbihlLHQpe3JldHVybiB0aGlzLl9nbG9iYWxJZFN0b3JhZ2VGaW5kKGUsMSwxKT8oZT1lKyJfIisobmV3IERhdGUpLnZhbHVlT2YoKSx0aGlzLl9nbG9iYWxJZFN0b3JhZ2VBZGQoZSx0KSk6KHRoaXMuX2lkcHVsbFtlXT10LHRoaXMuX3B1bGxTaXplKyssZSl9LGRodG1sWFRyZWVPYmplY3QucHJvdG90eXBlLl9nbG9iYWxJZFN0b3JhZ2VTdWI9ZnVuY3Rpb24oZSl7dGhpcy5faWRwdWxsW2VdJiYodGhpcy5fdW5zZWxlY3RJdGVtKHRoaXMuX2lkcHVsbFtlXSksdGhpcy5faWRwdWxsW2VdPW51bGwsdGhpcy5fcHVsbFNpemUtLSksdGhpcy5fbG9ja2VyJiZ0aGlzLl9sb2NrZXJbZV0mJih0aGlzLl9sb2NrZXJbZV09ITEpfSxkaHRtbFhUcmVlT2JqZWN0LnByb3RvdHlwZS5fZ2xvYmFsSWRTdG9yYWdlRmluZD1mdW5jdGlvbihlLHQsaSxuKXt2YXIgbz10aGlzLl9pZHB1bGxbZV07aWYobyl7aWYoby51blBhcnNlZCYmIWkmJnRoaXMucmVQYXJzZShvLDApLHRoaXMuX3NybmQmJiFvLmh0bWxOb2RlJiZ0aGlzLl9idWlsZFNSTkQobyxpKSxuJiZ0aGlzLl9lZHNicHNBKWZvcih2YXIgcj0wO3I8dGhpcy5fZWRzYnBzQS5sZW5ndGg7cisrKWlmKHRoaXMuX2Vkc2Jwc0Fbcl1bMl09PWUpcmV0dXJuIGRoeDQuY2FsbEV2ZW50KCJvbmdldEl0ZW1FcnJvciIsWyJSZXF1ZXN0ZWQgaXRlbSBzdGlsbCBpbiBwYXJzaW5nIHByb2Nlc3MuIixlXSksbnVsbDtyZXR1cm4gb31yZXR1cm4gdGhpcy5zbG93UGFyc2UmJjAhPWUmJiF0P3RoaXMucHJlUGFyc2UoZSk6bnVsbH0sZGh0bWxYVHJlZU9iamVjdC5wcm90b3R5cGUuX2RyYXdOZXdUcj1mdW5jdGlvbihlKXt2YXIgdD1kb2N1bWVudC5jcmVhdGVFbGVtZW50KCJ0ciIpLGk9ZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgidGQiKSxuPWRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoInRkIik7cmV0dXJuIGkuYXBwZW5kQ2hpbGQoZG9jdW1lbnQuY3JlYXRlVGV4dE5vZGUoIiAiKSksbi5jb2xTcGFuPTMsbi5hcHBlbmRDaGlsZChlKSx0LmFwcGVuZENoaWxkKGkpLHQuYXBwZW5kQ2hpbGQobiksdH0sZGh0bWxYVHJlZU9iamVjdC5wcm90b3R5cGUucGFyc2U9ZnVuY3Rpb24oZSx0LGkpe2lmKCJzdHJpbmciPT10eXBlb2YgdCYmKGk9dCx0PW51bGwpLCJqc29uIj09PWkpcmV0dXJuIHRoaXMuX2xvYWRKU09OT2JqZWN0KGUsdCk7aWYoImNzdiI9PT1pKXJldHVybiB0aGlzLl9sb2FkQ1NWU3RyaW5nKGUsdCk7aWYoImpzYXJyYXkiPT09aSlyZXR1cm4gdGhpcy5fbG9hZEpTQXJyYXkoZSx0KTt2YXIgbj10aGlzO3RoaXMucGFyc0NvdW50fHx0aGlzLmNhbGxFdmVudCgib25YTFMiLFtuLG51bGxdKSx0aGlzLnhtbHN0YXRlPTEsdGhpcy5YTUxMb2FkZXIoe3Jlc3BvbnNlWE1MOmRoeDQuYWpheC5wYXJzZShlKX0sdCl9LGRodG1sWFRyZWVPYmplY3QucHJvdG90eXBlLl9hdHRhY2hDaGlsZE5vZGU9ZnVuY3Rpb24oZSx0LGksbixvLHIsbCxzLGEsZCxoKXtkJiZkLnBhcmVudE9iamVjdCYmKGU9ZC5wYXJlbnRPYmplY3QpLDA9PWUuWE1MbG9hZCYmdGhpcy5YTUxzb3VyY2UmJiF0aGlzLlhNTGxvYWRpbmdXYXJuaW5nJiYoZS5YTUxsb2FkPTEsdGhpcy5fbG9hZER5blhNTChlLmlkKSk7dmFyIGM9ZS5jaGlsZHNDb3VudCx1PWUuY2hpbGROb2RlcztpZihoJiZoLnRyLnByZXZpb3VzU2libGluZyYmKGgudHIucHJldmlvdXNTaWJsaW5nLnByZXZpb3VzU2libGluZz9kPWgudHIucHJldmlvdXNTaWJsaW5nLm5vZGVtOnM9cy5yZXBsYWNlKCJUT1AiLCIiKSsiLFRPUCIpLGQpe3ZhciBwLF87Zm9yKHA9MDtjPnA7cCsrKWlmKHVbcF09PWQpe2ZvcihfPWM7XyE9cDtfLS0pdVsxK19dPXVbX107YnJlYWt9cCsrLGM9cH1pZihzKWZvcih2YXIgbT1zLnNwbGl0KCIsIiksZz0wO2c8bS5sZW5ndGg7ZysrKXN3aXRjaChtW2ddKXtjYXNlIlRPUCI6Zm9yKGUuY2hpbGRzQ291bnQ+MCYmKGQ9bmV3IE9iamVjdCxkLnRyPWUuY2hpbGROb2Rlc1swXS50ci5wcmV2aW91c1NpYmxpbmcpLGUuX2hhc190b3A9ITAscD1jO3A+MDtwLS0pdVtwXT11W3AtMV07Yz0wfXZhciBmOyhmPXRoaXMuX2lkcHVsbFt0XSkmJi0xPT1mLnNwYW58fChmPXVbY109bmV3IGRodG1sWFRyZWVJdGVtT2JqZWN0KHQsaSxlLHRoaXMsbiwxKSx0PXVbY10uaWQsZS5jaGlsZHNDb3VudCsrKSxmLmh0bWxOb2RlfHwoZi5sYWJlbD1pLGYuaHRtbE5vZGU9dGhpcy5fY3JlYXRlSXRlbSh0aGlzLmNoZWNrQm94T2ZmPzE6MCxmKSxmLmh0bWxOb2RlLm9iakJlbG9uZz1mKSxvJiYoZi5pbWFnZXNbMF09byksciYmKGYuaW1hZ2VzWzFdPXIpLGwmJihmLmltYWdlc1syXT1sKTt2YXIgYj10aGlzLl9kcmF3TmV3VHIoZi5odG1sTm9kZSk7aWYoKHRoaXMuWE1MbG9hZGluZ1dhcm5pbmd8fHRoaXMuX2hBZEkpJiYoZi5odG1sTm9kZS5wYXJlbnROb2RlLnBhcmVudE5vZGUuc3R5bGUuZGlzcGxheT0ibm9uZSIpLGQmJmQudHImJmQudHIubmV4dFNpYmxpbmc/ZS5odG1sTm9kZS5jaGlsZE5vZGVzWzBdLmluc2VydEJlZm9yZShiLGQudHIubmV4dFNpYmxpbmcpOnRoaXMucGFyc2luZ09uPT1lLmlkP3RoaXMucGFyc2VkQXJyYXlbdGhpcy5wYXJzZWRBcnJheS5sZW5ndGhdPWI6ZS5odG1sTm9kZS5jaGlsZE5vZGVzWzBdLmFwcGVuZENoaWxkKGIpLGQmJiFkLnNwYW4mJihkPW51bGwpLHRoaXMuWE1Mc291cmNlJiYoZi5YTUxsb2FkPWEmJjAhPWE/MDoxKSxmLnRyPWIsYi5ub2RlbT1mLDA9PWUuaXRlbUlkJiYoYi5jaGlsZE5vZGVzWzBdLmNsYXNzTmFtZT0iaGlkZGVuUm93IiksKGUuX3JfbG9naWN8fHRoaXMuX2ZyYnRyKSYmdGhpcy5fc2V0U3JjKGYuaHRtbE5vZGUuY2hpbGROb2Rlc1swXS5jaGlsZE5vZGVzWzBdLmNoaWxkTm9kZXNbMV0uY2hpbGROb2Rlc1swXSx0aGlzLmltUGF0aCt0aGlzLnJhZGlvQXJyYXlbMF0pLHMpZm9yKHZhciBtPXMuc3BsaXQoIiwiKSxnPTA7ZzxtLmxlbmd0aDtnKyspc3dpdGNoKG1bZ10pe2Nhc2UiU0VMRUNUIjp0aGlzLnNlbGVjdEl0ZW0odCwhMSk7YnJlYWs7Y2FzZSJDQUxMIjp0aGlzLnNlbGVjdEl0ZW0odCwhMCk7YnJlYWs7Y2FzZSJDSElMRCI6Zi5YTUxsb2FkPTA7YnJlYWs7Y2FzZSJDSEVDS0VEIjp0aGlzLlhNTGxvYWRpbmdXYXJuaW5nP3RoaXMuc2V0Q2hlY2tMaXN0Kz10aGlzLmRsbXRyK3Q6dGhpcy5zZXRDaGVjayh0LDEpO2JyZWFrO2Nhc2UiSENIRUNLRUQiOnRoaXMuX3NldENoZWNrKGYsInVuc3VyZSIpO2JyZWFrO2Nhc2UiT1BFTiI6Zi5vcGVuTWU9MX1pZighdGhpcy5YTUxsb2FkaW5nV2FybmluZyYmKHRoaXMuX2dldE9wZW5TdGF0ZShlKTwwJiYhdGhpcy5faEFkSSYmdGhpcy5vcGVuSXRlbShlLmlkKSxkJiYodGhpcy5fY29ycmVjdFBsdXMoZCksdGhpcy5fY29ycmVjdExpbmUoZCkpLHRoaXMuX2NvcnJlY3RQbHVzKGUpLHRoaXMuX2NvcnJlY3RMaW5lKGUpLHRoaXMuX2NvcnJlY3RQbHVzKGYpLGUuY2hpbGRzQ291bnQ+PTImJih0aGlzLl9jb3JyZWN0UGx1cyh1W2UuY2hpbGRzQ291bnQtMl0pLHRoaXMuX2NvcnJlY3RMaW5lKHVbZS5jaGlsZHNDb3VudC0yXSkpLDIhPWUuY2hpbGRzQ291bnQmJnRoaXMuX2NvcnJlY3RQbHVzKHVbMF0pLHRoaXMudHNjaGVjayYmdGhpcy5fY29ycmVjdENoZWNrU3RhdGVzKGUpLHRoaXMuX29ucmFkaCkpaWYoMT09dGhpcy54bWxzdGF0ZSl7dmFyIHY9dGhpcy5vblhMRTt0aGlzLm9uWExFPWZ1bmN0aW9uKGUpe3RoaXMuX29ucmFkaCh0KSx2JiZ2KGUpfX1lbHNlIHRoaXMuX29ucmFkaCh0KTtyZXR1cm4gZn0sZGh0bWxYVHJlZU9iamVjdC5wcm90b3R5cGUuX3BhcnNlSXRlbT1mdW5jdGlvbihlLHQsaSxuKXt2YXIgbztpZih0aGlzLl9zcm5kJiYoIXRoaXMuX2lkcHVsbFtvPWUuZ2V0KCJpZCIpXXx8IXRoaXMuX2lkcHVsbFtvXS5zcGFuKSlyZXR1cm4gdGhpcy5fYWRkSXRlbVNSTkQodC5pZCxvLGUpLHZvaWQgMDt2YXIgcj1lLmdldF9hbGwoKTtpZigib2JqZWN0Ij09dHlwZW9mIHRoaXMud2FpdFVwZGF0ZVhNTCYmIXRoaXMud2FpdFVwZGF0ZVhNTFtyLmlkXSlyZXR1cm4gdGhpcy5fcGFyc2UoZSxyLmlkLDEpLHZvaWQgMDsobnVsbD09PXIudGV4dHx8InVuZGVmaW5lZCI9PXR5cGVvZiByLnRleHQpJiYoci50ZXh0PWUuc3ViKCJpdGVtdGV4dCIpLHIudGV4dCYmKHIudGV4dD1yLnRleHQuY29udGVudCgpKSk7dmFyIGw9W107aWYoci5zZWxlY3QmJmwucHVzaCgiU0VMRUNUIiksci50b3AmJmwucHVzaCgiVE9QIiksci5jYWxsJiYodGhpcy5ub2RlQXNraW5nQ2FsbD1yLmlkKSwtMT09ci5jaGVja2VkP2wucHVzaCgiSENIRUNLRUQiKTpyLmNoZWNrZWQmJmwucHVzaCgiQ0hFQ0tFRCIpLHIub3BlbiYmbC5wdXNoKCJPUEVOIiksdGhpcy53YWl0VXBkYXRlWE1MKWlmKHRoaXMuX2dsb2JhbElkU3RvcmFnZUZpbmQoci5pZCkpdmFyIHM9dGhpcy51cGRhdGVJdGVtKHIuaWQsci50ZXh0LHIuaW0wLHIuaW0xLHIuaW0yLHIuY2hlY2tlZCxyLmNoaWxkKTtlbHNlezA9PXRoaXMubnBsP2wucHVzaCgiVE9QIik6aT10LmNoaWxkTm9kZXNbdGhpcy5ucGxdO3ZhciBzPXRoaXMuX2F0dGFjaENoaWxkTm9kZSh0LHIuaWQsci50ZXh0LDAsci5pbTAsci5pbTEsci5pbTIsbC5qb2luKCIsIiksci5jaGlsZCwwLGkpO3IuaWQ9cy5pZCxpPW51bGx9ZWxzZSB2YXIgcz10aGlzLl9hdHRhY2hDaGlsZE5vZGUodCxyLmlkLHIudGV4dCwwLHIuaW0wLHIuaW0xLHIuaW0yLGwuam9pbigiLCIpLHIuY2hpbGQsbnx8MCxpKTtpZihyLnRvb2x0aXAmJihzLnNwYW4ucGFyZW50Tm9kZS5wYXJlbnROb2RlLnRpdGxlPXIudG9vbHRpcCksci5zdHlsZSYmKHMuc3Bhbi5zdHlsZS5jc3NUZXh0P3Muc3Bhbi5zdHlsZS5jc3NUZXh0Kz0iOyIrci5zdHlsZTpzLnNwYW4uc2V0QXR0cmlidXRlKCJzdHlsZSIscy5zcGFuLmdldEF0dHJpYnV0ZSgic3R5bGUiKSsiOyAiK3Iuc3R5bGUpKSxyLnJhZGlvJiYocy5fcl9sb2dpYz0hMCksci5ub2NoZWNrYm94KXt2YXIgYT1zLnNwYW4ucGFyZW50Tm9kZS5wcmV2aW91c1NpYmxpbmcucHJldmlvdXNTaWJsaW5nO2Euc3R5bGUuZGlzcGxheT0ibm9uZSIscy5ub2NoZWNrYm94PSEwfXIuZGlzYWJsZWQmJihudWxsIT1yLmNoZWNrZWQmJnRoaXMuX3NldENoZWNrKHMsci5jaGVja2VkKSx0aGlzLmRpc2FibGVDaGVja2JveChzLDEpKSxzLl9hY2M9ci5jaGlsZHx8MCx0aGlzLnBhcnNlckV4dGVuc2lvbiYmdGhpcy5wYXJzZXJFeHRlbnNpb24uX3BhcnNlRXh0ZW5zaW9uLmNhbGwodGhpcyxlLHIsdD90LmlkOjApLHRoaXMuc2V0SXRlbUNvbG9yKHMsci5hQ29sLHIuc0NvbCksIjEiPT1yLmxvY2tlZCYmdGhpcy5sb2NrSXRlbShzLmlkLCEwLCEwKSwoci5pbXdpZHRofHxyLmltaGVpZ2h0KSYmdGhpcy5zZXRJY29uU2l6ZShyLmltd2lkdGgsci5pbWhlaWdodCxzKSwoIjAiPT1yLmNsb3NlYWJsZXx8IjEiPT1yLmNsb3NlYWJsZSkmJnRoaXMuc2V0SXRlbUNsb3NlYWJsZShzLHIuY2xvc2VhYmxlKTt2YXIgZD0iIjtyLnRvcG9mZnNldCYmdGhpcy5zZXRJdGVtVG9wT2Zmc2V0KHMsci50b3BvZmZzZXQpLHRoaXMuc2xvd1BhcnNlJiYib2JqZWN0IiE9dHlwZW9mIHRoaXMud2FpdFVwZGF0ZVhNTD8oIXMuY2hpbGRzQ291bnQmJmUuc3ViX2V4aXN0cygiaXRlbSIpJiYocy51blBhcnNlZD1lLmNsb25lKCkpLGUuZWFjaCgidXNlcmRhdGEiLGZ1bmN0aW9uKGUpe3RoaXMuc2V0VXNlckRhdGEoci5pZCxlLmdldCgibmFtZSIpLGUuY29udGVudCgpKX0sdGhpcykpOmUuc3ViX2V4aXN0cygiaXRlbSIpJiYoZD10aGlzLl9wYXJzZShlLHIuaWQsMSkpLCIiIT1kJiYodGhpcy5ub2RlQXNraW5nQ2FsbD1kKSxlLmVhY2goInVzZXJkYXRhIixmdW5jdGlvbih0KXt0aGlzLnNldFVzZXJEYXRhKGUuZ2V0KCJpZCIpLHQuZ2V0KCJuYW1lIiksdC5jb250ZW50KCkpfSx0aGlzKX0sZGh0bWxYVHJlZU9iamVjdC5wcm90b3R5cGUuX3BhcnNlPWZ1bmN0aW9uKGUsdCxpLG4pe2lmKHRoaXMuX3NybmQmJiF0aGlzLnBhcmVudE9iamVjdC5vZmZzZXRIZWlnaHQpe3ZhciBvPXRoaXM7cmV0dXJuIHdpbmRvdy5zZXRUaW1lb3V0KGZ1bmN0aW9uKCl7by5fcGFyc2UoZSx0LGksbil9LDEwMCl9aWYoZS5leGlzdHMoKSl7aWYodGhpcy5za2lwTG9jaz0hMCwhdCl7dD1lLmdldCgiaWQiKSx0aGlzLl9keW5EZWxldGVCcmFuY2hlc1t0XSYmKHRoaXMuZGVsZXRlQ2hpbGRJdGVtcyh0KSx0aGlzLl9keW5EZWxldGVCcmFuY2hlc1t0XS0tLHRoaXMuX2R5bkRlbGV0ZUJyYW5jaGVzW3RdfHxkZWxldGUgdGhpcy5fZHluRGVsZXRlQnJhbmNoZXNbdF0pO3ZhciByPWUuZ2V0KCJkaHhfc2VjdXJpdHkiKTtyJiYoZGh0bWx4LnNlY3VyaXR5X2tleT1yKSxlLmdldCgicmFkaW8iKSYmKHRoaXMuaHRtbE5vZGUuX3JfbG9naWM9ITApLHRoaXMucGFyc2luZ09uPXQsdGhpcy5wYXJzZWRBcnJheT1uZXcgQXJyYXksdGhpcy5zZXRDaGVja0xpc3Q9IiIsdGhpcy5ub2RlQXNraW5nQ2FsbD0iIn12YXIgbD10aGlzLl9nbG9iYWxJZFN0b3JhZ2VGaW5kKHQpO2lmKCFsKXJldHVybiBkaHg0LmNhbGxFdmVudCgib25EYXRhU3RydWN0dXJlRXJyb3IiLFsiWE1MIHJlZmVycyB0byBub3QgZXhpc3RpbmcgcGFyZW50Il0pO2lmKHRoaXMucGFyc0NvdW50PXRoaXMucGFyc0NvdW50P3RoaXMucGFyc0NvdW50KzE6MSx0aGlzLlhNTGxvYWRpbmdXYXJuaW5nPTEsIWwuY2hpbGRzQ291bnR8fG58fHRoaXMuX2Vkc2Jwc3x8bC5faGFzX3RvcCl2YXIgcz0wO2Vsc2UgdmFyIHM9MDtpZih0aGlzLm5wbD0wLGUuZWFjaCgiaXRlbSIsZnVuY3Rpb24obixvKXtyZXR1cm4gbC5YTUxsb2FkPTEsdGhpcy5fcGFyc2VJdGVtKG4sbCwwLHMpLHRoaXMuX2Vkc2JwcyYmdGhpcy5ucGw9PXRoaXMuX2Vkc2Jwc0M/KHRoaXMuX2Rpc3RyaWJ1dGVkU3RhcnQoZSxvKzEsdCxpLGwuY2hpbGRzQ291bnQpLC0xKToodGhpcy5ucGwrKyx2b2lkIDApfSx0aGlzLG4pLCFpKXtpZihlLmVhY2goInVzZXJkYXRhIixmdW5jdGlvbih0KXt0aGlzLnNldFVzZXJEYXRhKGUuZ2V0KCJpZCIpLHQuZ2V0KCJuYW1lIiksdC5jb250ZW50KCkpfSx0aGlzKSxsLlhNTGxvYWQ9MSx0aGlzLndhaXRVcGRhdGVYTUwpe3RoaXMud2FpdFVwZGF0ZVhNTD0hMTtmb3IodmFyIGE9bC5jaGlsZHNDb3VudC0xO2E+PTA7YS0tKWwuY2hpbGROb2Rlc1thXS5fZG1hcmsmJnRoaXMuZGVsZXRlSXRlbShsLmNoaWxkTm9kZXNbYV0uaWQpfWZvcih2YXIgYT0odGhpcy5fZ2xvYmFsSWRTdG9yYWdlRmluZCh0aGlzLnBhcnNpbmdPbiksMCk7YTx0aGlzLnBhcnNlZEFycmF5Lmxlbmd0aDthKyspbC5odG1sTm9kZS5jaGlsZE5vZGVzWzBdLmFwcGVuZENoaWxkKHRoaXMucGFyc2VkQXJyYXlbYV0pO3RoaXMucGFyc2VkQXJyYXk9W10sdGhpcy5sYXN0TG9hZGVkWE1MSWQ9dCx0aGlzLlhNTGxvYWRpbmdXYXJuaW5nPTA7Zm9yKHZhciBkPXRoaXMuc2V0Q2hlY2tMaXN0LnNwbGl0KHRoaXMuZGxtdHIpLGg9MDtoPGQubGVuZ3RoO2grKylkW2hdJiZ0aGlzLnNldENoZWNrKGRbaF0sMSk7dGhpcy5YTUxzb3VyY2UmJnRoaXMudHNjaGVjayYmdGhpcy5zbWNoZWNrJiZsLmlkIT10aGlzLnJvb3RJZCYmKDA9PT1sLmNoZWNrc3RhdGU/dGhpcy5fc2V0U3ViQ2hlY2tlZCgwLGwpOjE9PT1sLmNoZWNrc3RhdGUmJnRoaXMuX3NldFN1YkNoZWNrZWQoMSxsKSksdGhpcy5fcmVkcmF3RnJvbSh0aGlzLG51bGwsbiksZS5nZXQoIm9yZGVyIikmJiJub25lIiE9ZS5nZXQoIm9yZGVyIikmJnRoaXMuX3Jlb3JkZXJCcmFuY2gobCxlLmdldCgib3JkZXIiKSwhMCksIiIhPXRoaXMubm9kZUFza2luZ0NhbGwmJnRoaXMuY2FsbEV2ZW50KCJvbkNsaWNrIixbdGhpcy5ub2RlQXNraW5nQ2FsbCx0aGlzLmdldFNlbGVjdGVkSXRlbUlkKCldKSx0aGlzLl9icmFuY2hVcGRhdGUmJnRoaXMuX2JyYW5jaFVwZGF0ZU5leHQoZSl9aWYoMT09dGhpcy5wYXJzQ291bnQpe2lmKHRoaXMucGFyc2luZ09uPW51bGwsdGhpcy5fc3JuZCYmbC5pZCE9dGhpcy5yb290SWQmJih0aGlzLnByZXBhcmVTUihsLmlkKSx0aGlzLlhNTHNvdXJjZSYmdGhpcy5vcGVuSXRlbShsLmlkKSksZS50aHJvdWdoKCJpdGVtIiwib3BlbiIsbnVsbCxmdW5jdGlvbihlKXt0aGlzLm9wZW5JdGVtKGUuZ2V0KCJpZCIpKX0sdGhpcyksIXRoaXMuX2Vkc2Jwc3x8IXRoaXMuX2Vkc2Jwc0EubGVuZ3RoKXt2YXIgYz10aGlzO3dpbmRvdy5zZXRUaW1lb3V0KGZ1bmN0aW9uKCl7Yy5jYWxsRXZlbnQoIm9uWExFIixbYyx0XSl9LDEpLHRoaXMueG1sc3RhdGU9MH10aGlzLnNraXBMb2NrPSExfXRoaXMucGFyc0NvdW50LS07dmFyIGM9dGhpcztyZXR1cm4gdGhpcy5fZWRzYnBzJiZ3aW5kb3cuc2V0VGltZW91dChmdW5jdGlvbigpe2MuX2Rpc3RyaWJ1dGVkU3RlcCh0KX0sdGhpcy5fZWRzYnBzRCksIWkmJnRoaXMub25YTEUmJnRoaXMub25YTEUodGhpcyx0KSx0aGlzLm5vZGVBc2tpbmdDYWxsfX0sZGh0bWxYVHJlZU9iamVjdC5wcm90b3R5cGUuX3JlZHJhd0Zyb209ZnVuY3Rpb24oZSx0LGksbil7aWYodClvPXQ7ZWxzZXt2YXIgbz1lLl9nbG9iYWxJZFN0b3JhZ2VGaW5kKGUubGFzdExvYWRlZFhNTElkKTtpZihlLmxhc3RMb2FkZWRYTUxJZD0tMSwhbylyZXR1cm4gMH1mb3IodmFyIHI9MCxsPWk/aS0xOjA7bDxvLmNoaWxkc0NvdW50O2wrKylpZih0aGlzLl9icmFuY2hVcGRhdGUmJjEhPXRoaXMuX2dldE9wZW5TdGF0ZShvKXx8dCYmMSE9bnx8KG8uY2hpbGROb2Rlc1tsXS5odG1sTm9kZS5wYXJlbnROb2RlLnBhcmVudE5vZGUuc3R5bGUuZGlzcGxheT0iIiksMT09by5jaGlsZE5vZGVzW2xdLm9wZW5NZSYmKHRoaXMuX29wZW5JdGVtKG8uY2hpbGROb2Rlc1tsXSksby5jaGlsZE5vZGVzW2xdLm9wZW5NZT0wKSxlLl9yZWRyYXdGcm9tKGUsby5jaGlsZE5vZGVzW2xdKSxudWxsIT10aGlzLmNoaWxkQ2FsYyl7aWYoKG8uY2hpbGROb2Rlc1tsXS51blBhcnNlZHx8IW8uY2hpbGROb2Rlc1tsXS5YTUxsb2FkJiZ0aGlzLlhNTHNvdXJjZSkmJihvLmNoaWxkTm9kZXNbbF0uc3Bhbi5pbm5lckhUTUw9by5jaGlsZE5vZGVzW2xdLl9hY2M/by5jaGlsZE5vZGVzW2xdLmxhYmVsK3RoaXMuaHRtbGNBK28uY2hpbGROb2Rlc1tsXS5fYWNjK3RoaXMuaHRtbGNCOm8uY2hpbGROb2Rlc1tsXS5sYWJlbCksby5jaGlsZE5vZGVzW2xdLmNoaWxkTm9kZXMubGVuZ3RoJiZ0aGlzLmNoaWxkQ2FsYyl7aWYoMT09dGhpcy5jaGlsZENhbGMmJihvLmNoaWxkTm9kZXNbbF0uc3Bhbi5pbm5lckhUTUw9by5jaGlsZE5vZGVzW2xdLmxhYmVsK3RoaXMuaHRtbGNBK28uY2hpbGROb2Rlc1tsXS5jaGlsZHNDb3VudCt0aGlzLmh0bWxjQiksMj09dGhpcy5jaGlsZENhbGMpe3ZhciBzPW8uY2hpbGROb2Rlc1tsXS5jaGlsZHNDb3VudC0oby5jaGlsZE5vZGVzW2xdLnB1cmVDaGlsZHN8fDApO3MmJihvLmNoaWxkTm9kZXNbbF0uc3Bhbi5pbm5lckhUTUw9by5jaGlsZE5vZGVzW2xdLmxhYmVsK3RoaXMuaHRtbGNBK3MrdGhpcy5odG1sY0IpLG8ucHVyZUNoaWxkcz9vLnB1cmVDaGlsZHMrKzpvLnB1cmVDaGlsZHM9MX1pZigzPT10aGlzLmNoaWxkQ2FsYyYmKG8uY2hpbGROb2Rlc1tsXS5zcGFuLmlubmVySFRNTD1vLmNoaWxkTm9kZXNbbF0ubGFiZWwrdGhpcy5odG1sY0Erby5jaGlsZE5vZGVzW2xdLl9hY2MrdGhpcy5odG1sY0IpLDQ9PXRoaXMuY2hpbGRDYWxjKXt2YXIgcz1vLmNoaWxkTm9kZXNbbF0uX2FjYztzJiYoby5jaGlsZE5vZGVzW2xdLnNwYW4uaW5uZXJIVE1MPW8uY2hpbGROb2Rlc1tsXS5sYWJlbCt0aGlzLmh0bWxjQStzK3RoaXMuaHRtbGNCKX19ZWxzZSA0PT10aGlzLmNoaWxkQ2FsYyYmcisrO3IrPW8uY2hpbGROb2Rlc1tsXS5fYWNjLDM9PXRoaXMuY2hpbGRDYWxjJiZyKyt9by51blBhcnNlZHx8IW8uWE1MbG9hZCYmdGhpcy5YTUxzb3VyY2V8fChvLl9hY2M9ciksZS5fY29ycmVjdExpbmUobyksZS5fY29ycmVjdFBsdXMobyksdGhpcy5jaGlsZENhbGMmJiF0JiZlLl9maXhDaGlsZENvdW50TGFiZWwobyl9LGRodG1sWFRyZWVPYmplY3QucHJvdG90eXBlLl9jcmVhdGVTZWxmPWZ1bmN0aW9uKCl7dmFyIGU9ZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgiZGl2Iik7cmV0dXJuIGUuY2xhc3NOYW1lPSJjb250YWluZXJUYWJsZVN0eWxlIixlLnN0eWxlLndpZHRoPXRoaXMud2lkdGgsZS5zdHlsZS5oZWlnaHQ9dGhpcy5oZWlnaHQsdGhpcy5wYXJlbnRPYmplY3QuYXBwZW5kQ2hpbGQoZSksZX0sZGh0bWxYVHJlZU9iamVjdC5wcm90b3R5cGUuX3hjbG9zZUFsbD1mdW5jdGlvbihlKXtpZighZS51blBhcnNlZCl7aWYodGhpcy5yb290SWQhPWUuaWQpe2lmKCFlLmh0bWxOb2RlKXJldHVybjtmb3IodmFyIHQ9ZS5odG1sTm9kZS5jaGlsZE5vZGVzWzBdLmNoaWxkTm9kZXMsaT10Lmxlbmd0aCxuPTE7aT5uO24rKyl0W25dLnN0eWxlLmRpc3BsYXk9Im5vbmUiO3RoaXMuX2NvcnJlY3RQbHVzKGUpfWZvcih2YXIgbj0wO248ZS5jaGlsZHNDb3VudDtuKyspZS5jaGlsZE5vZGVzW25dLmNoaWxkc0NvdW50JiZ0aGlzLl94Y2xvc2VBbGwoZS5jaGlsZE5vZGVzW25dKX19LGRodG1sWFRyZWVPYmplY3QucHJvdG90eXBlLl94b3BlbkFsbD1mdW5jdGlvbihlKXt0aGlzLl9IaWRlU2hvdyhlLDIpO2Zvcih2YXIgdD0wO3Q8ZS5jaGlsZHNDb3VudDt0KyspdGhpcy5feG9wZW5BbGwoZS5jaGlsZE5vZGVzW3RdKX0sZGh0bWxYVHJlZU9iamVjdC5wcm90b3R5cGUuX2NvcnJlY3RQbHVzPWZ1bmN0aW9uKGUpe2lmKGUuaHRtbE5vZGUpe3ZhciB0PWUuaHRtbE5vZGUuY2hpbGROb2Rlc1swXS5jaGlsZE5vZGVzWzBdLmNoaWxkTm9kZXNbMF0ubGFzdENoaWxkLGk9ZS5odG1sTm9kZS5jaGlsZE5vZGVzWzBdLmNoaWxkTm9kZXNbMF0uY2hpbGROb2Rlc1syXS5jaGlsZE5vZGVzWzBdLG49dGhpcy5saW5lQXJyYXk7aWYodGhpcy5YTUxzb3VyY2UmJiFlLlhNTGxvYWQpe3ZhciBuPXRoaXMucGx1c0FycmF5O2lmKHRoaXMuX3NldFNyYyhpLHRoaXMuaWNvblVSTCtlLmltYWdlc1syXSksdGhpcy5fdHh0aW1nKXJldHVybiB0LmlubmVySFRNTD0iWytdIn1lbHNlIGlmKGUuY2hpbGRzQ291bnR8fGUudW5QYXJzZWQpaWYoZS5odG1sTm9kZS5jaGlsZE5vZGVzWzBdLmNoaWxkTm9kZXNbMV0mJiJub25lIiE9ZS5odG1sTm9kZS5jaGlsZE5vZGVzWzBdLmNoaWxkTm9kZXNbMV0uc3R5bGUuZGlzcGxheSl7aWYoIWUud3NpZ24pdmFyIG49dGhpcy5taW51c0FycmF5O2lmKHRoaXMuX3NldFNyYyhpLHRoaXMuaWNvblVSTCtlLmltYWdlc1sxXSksdGhpcy5fdHh0aW1nKXJldHVybiB0LmlubmVySFRNTD0iWy1dIn1lbHNle2lmKCFlLndzaWduKXZhciBuPXRoaXMucGx1c0FycmF5O2lmKHRoaXMuX3NldFNyYyhpLHRoaXMuaWNvblVSTCtlLmltYWdlc1syXSksdGhpcy5fdHh0aW1nKXJldHVybiB0LmlubmVySFRNTD0iWytdIn1lbHNlIHRoaXMuX3NldFNyYyhpLHRoaXMuaWNvblVSTCtlLmltYWdlc1swXSk7dmFyIG89MjtlLnRyZWVOb2QudHJlZUxpbmVzT24/KGUucGFyZW50T2JqZWN0JiYobz10aGlzLl9nZXRDb3VudFN0YXR1cyhlLmlkLGUucGFyZW50T2JqZWN0KSksdGhpcy5fc2V0U3JjKHQsdGhpcy5pbVBhdGgrbltvXSkpOnRoaXMuX3NldFNyYyh0LHRoaXMuaW1QYXRoK25bM10pfX0sZGh0bWxYVHJlZU9iamVjdC5wcm90b3R5cGUuX2NvcnJlY3RMaW5lPWZ1bmN0aW9uKGUpe2lmKGUuaHRtbE5vZGUpe3ZhciB0PWUucGFyZW50T2JqZWN0O2lmKHQpaWYoMCE9dGhpcy5fZ2V0TGluZVN0YXR1cyhlLmlkLHQpJiZ0aGlzLnRyZWVMaW5lc09uKWZvcih2YXIgaT0xO2k8PWUuY2hpbGRzQ291bnQmJmUuaHRtbE5vZGUuY2hpbGROb2Rlc1swXS5jaGlsZE5vZGVzW2ldO2krKyllLmh0bWxOb2RlLmNoaWxkTm9kZXNbMF0uY2hpbGROb2Rlc1tpXS5jaGlsZE5vZGVzWzBdLnN0eWxlLmJhY2tncm91bmRJbWFnZT0idXJsKCIrdGhpcy5pbVBhdGgrdGhpcy5saW5lQXJyYXlbNV0rIikiLGUuaHRtbE5vZGUuY2hpbGROb2Rlc1swXS5jaGlsZE5vZGVzW2ldLmNoaWxkTm9kZXNbMF0uc3R5bGUuYmFja2dyb3VuZFJlcGVhdD0icmVwZWF0LXkiO2Vsc2UgZm9yKHZhciBpPTE7aTw9ZS5jaGlsZHNDb3VudCYmZS5odG1sTm9kZS5jaGlsZE5vZGVzWzBdLmNoaWxkTm9kZXNbaV07aSsrKWUuaHRtbE5vZGUuY2hpbGROb2Rlc1swXS5jaGlsZE5vZGVzW2ldLmNoaWxkTm9kZXNbMF0uc3R5bGUuYmFja2dyb3VuZEltYWdlPSIiLGUuaHRtbE5vZGUuY2hpbGROb2Rlc1swXS5jaGlsZE5vZGVzW2ldLmNoaWxkTm9kZXNbMF0uc3R5bGUuYmFja2dyb3VuZFJlcGVhdD0iIn19LGRodG1sWFRyZWVPYmplY3QucHJvdG90eXBlLl9nZXRMaW5lU3RhdHVzPWZ1bmN0aW9uKGUsdCl7cmV0dXJuIHQuY2hpbGROb2Rlc1t0LmNoaWxkc0NvdW50LTFdLmlkPT1lPzA6MX0sZGh0bWxYVHJlZU9iamVjdC5wcm90b3R5cGUuX0hpZGVTaG93PWZ1bmN0aW9uKGUsdCl7aWYoIXRoaXMuX2xvY2tlcnx8dGhpcy5za2lwTG9ja3x8IXRoaXMuX2xvY2tlcltlLmlkXSl7aWYodGhpcy5YTUxzb3VyY2UmJiFlLlhNTGxvYWQpe2lmKDE9PXQpcmV0dXJuO3JldHVybiBlLlhNTGxvYWQ9MSx0aGlzLl9sb2FkRHluWE1MKGUuaWQpLHZvaWQgMH1lLnVuUGFyc2VkJiZ0aGlzLnJlUGFyc2UoZSk7dmFyIGk9ZS5odG1sTm9kZS5jaGlsZE5vZGVzWzBdLmNoaWxkTm9kZXMsbj1pLmxlbmd0aDtpZihuPjEpeyJub25lIj09aVsxXS5zdHlsZS5kaXNwbGF5JiYxIT10fHwyPT10P25vZGVzdHlsZT0iIjoodGhpcy5hbGxUcmVlLmNoaWxkTm9kZXNbMF0uYm9yZGVyPSIxIix0aGlzLmFsbFRyZWUuY2hpbGROb2Rlc1swXS5ib3JkZXI9IjAiLG5vZGVzdHlsZT0ibm9uZSIpO2Zvcih2YXIgbz0xO24+bztvKyspaVtvXS5zdHlsZS5kaXNwbGF5PW5vZGVzdHlsZX10aGlzLl9jb3JyZWN0UGx1cyhlKX19LGRodG1sWFRyZWVPYmplY3QucHJvdG90eXBlLl9nZXRPcGVuU3RhdGU9ZnVuY3Rpb24oZSl7aWYoIWUuaHRtbE5vZGUpcmV0dXJuIDA7dmFyIHQ9ZS5odG1sTm9kZS5jaGlsZE5vZGVzWzBdLmNoaWxkTm9kZXM7cmV0dXJuIHQubGVuZ3RoPD0xPzA6Im5vbmUiIT10WzFdLnN0eWxlLmRpc3BsYXk/MTotMX0sZGh0bWxYVHJlZU9iamVjdC5wcm90b3R5cGUub25Sb3dDbGljazI9ZnVuY3Rpb24oKXt2YXIgZT10aGlzLnBhcmVudE9iamVjdC50cmVlTm9kO3JldHVybiBlLmNhbGxFdmVudCgib25EYmxDbGljayIsW3RoaXMucGFyZW50T2JqZWN0LmlkLGVdKT8odGhpcy5wYXJlbnRPYmplY3QuY2xvc2VibGUmJiIwIiE9dGhpcy5wYXJlbnRPYmplY3QuY2xvc2VibGU/ZS5fSGlkZVNob3codGhpcy5wYXJlbnRPYmplY3QpOmUuX0hpZGVTaG93KHRoaXMucGFyZW50T2JqZWN0LDIpLGUuY2hlY2tFdmVudCgib25PcGVuRW5kIikmJihlLnhtbHN0YXRlPyhlLl9vaWVfb25YTEUucHVzaChlLm9uWExFKSxlLm9uWExFPWUuX2VwbkZIZSk6ZS5jYWxsRXZlbnQoIm9uT3BlbkVuZCIsW3RoaXMucGFyZW50T2JqZWN0LmlkLGUuX2dldE9wZW5TdGF0ZSh0aGlzLnBhcmVudE9iamVjdCldKSksITEpOiExfSxkaHRtbFhUcmVlT2JqZWN0LnByb3RvdHlwZS5vblJvd0NsaWNrPWZ1bmN0aW9uKCl7dmFyIGU9dGhpcy5wYXJlbnRPYmplY3QudHJlZU5vZDtyZXR1cm4gZS5jYWxsRXZlbnQoIm9uT3BlblN0YXJ0IixbdGhpcy5wYXJlbnRPYmplY3QuaWQsZS5fZ2V0T3BlblN0YXRlKHRoaXMucGFyZW50T2JqZWN0KV0pPyh0aGlzLnBhcmVudE9iamVjdC5jbG9zZWJsZSYmIjAiIT10aGlzLnBhcmVudE9iamVjdC5jbG9zZWJsZT9lLl9IaWRlU2hvdyh0aGlzLnBhcmVudE9iamVjdCk6ZS5fSGlkZVNob3codGhpcy5wYXJlbnRPYmplY3QsMiksZS5jaGVja0V2ZW50KCJvbk9wZW5FbmQiKSYmKGUueG1sc3RhdGU/KGUuX29pZV9vblhMRS5wdXNoKGUub25YTEUpLGUub25YTEU9ZS5fZXBuRkhlKTplLmNhbGxFdmVudCgib25PcGVuRW5kIixbdGhpcy5wYXJlbnRPYmplY3QuaWQsZS5fZ2V0T3BlblN0YXRlKHRoaXMucGFyZW50T2JqZWN0KV0pKSx2b2lkIDApOjB9LGRodG1sWFRyZWVPYmplY3QucHJvdG90eXBlLmdldFNlbGVjdGVkSXRlbUlkPWZ1bmN0aW9uKCl7Zm9yKHZhciBlPW5ldyBBcnJheSx0PTA7dDx0aGlzLl9zZWxlY3RlZC5sZW5ndGg7dCsrKWVbdF09dGhpcy5fc2VsZWN0ZWRbdF0uaWQ7cmV0dXJuIGUuam9pbih0aGlzLmRsbXRyKX0sZGh0bWxYVHJlZU9iamVjdC5wcm90b3R5cGUuX3NlbGVjdEl0ZW09ZnVuY3Rpb24oZSx0KXtpZih0aGlzLmNoZWNrRXZlbnQoIm9uU2VsZWN0IikmJih0aGlzLl9vblNTQ0ZvbGQ9dGhpcy5nZXRTZWxlY3RlZEl0ZW1JZCgpKSx0aGlzLl9hbXNlbCYmdCYmKHQuY3RybEtleXx8dC5tZXRhS2V5fHx0LnNoaWZ0S2V5KXx8dGhpcy5fdW5zZWxlY3RJdGVtcygpLGUuaV9zZWwmJnRoaXMuX2Ftc2VsJiZ0JiYodC5jdHJsS2V5fHx0Lm1ldGFLZXkpKXRoaXMuX3Vuc2VsZWN0SXRlbShlKTtlbHNlIGlmKCEoZS5pX3NlbHx8dGhpcy5fYW1zZWxTJiYwIT10aGlzLl9zZWxlY3RlZC5sZW5ndGgmJnRoaXMuX3NlbGVjdGVkWzBdLnBhcmVudE9iamVjdCE9ZS5wYXJlbnRPYmplY3QpKWlmKHRoaXMuX2Ftc2VsJiZ0JiZ0LnNoaWZ0S2V5JiYwIT10aGlzLl9zZWxlY3RlZC5sZW5ndGgmJnRoaXMuX3NlbGVjdGVkW3RoaXMuX3NlbGVjdGVkLmxlbmd0aC0xXS5wYXJlbnRPYmplY3Q9PWUucGFyZW50T2JqZWN0KXt2YXIgaT10aGlzLl9nZXRJbmRleCh0aGlzLl9zZWxlY3RlZFt0aGlzLl9zZWxlY3RlZC5sZW5ndGgtMV0pLG49dGhpcy5fZ2V0SW5kZXgoZSk7aWYoaT5uKXt2YXIgbz1pO2k9bixuPW99Zm9yKHZhciByPWk7bj49cjtyKyspZS5wYXJlbnRPYmplY3QuY2hpbGROb2Rlc1tyXS5pX3NlbHx8dGhpcy5fbWFya0l0ZW0oZS5wYXJlbnRPYmplY3QuY2hpbGROb2Rlc1tyXSl9ZWxzZSB0aGlzLl9tYXJrSXRlbShlKTtpZih0aGlzLmNoZWNrRXZlbnQoIm9uU2VsZWN0Iikpe3ZhciBsPXRoaXMuZ2V0U2VsZWN0ZWRJdGVtSWQoKTtsIT10aGlzLl9vblNTQ0ZvbGQmJnRoaXMuY2FsbEV2ZW50KCJvblNlbGVjdCIsW2xdKX19LGRodG1sWFRyZWVPYmplY3QucHJvdG90eXBlLl9tYXJrSXRlbT1mdW5jdGlvbihlKXtlLnNjb2xvciYmKGUuc3Bhbi5zdHlsZS5jb2xvcj1lLnNjb2xvciksZS5zcGFuLmNsYXNzTmFtZT0ic2VsZWN0ZWRUcmVlUm93IixlLnNwYW4ucGFyZW50Tm9kZS5wYXJlbnROb2RlLmNsYXNzTmFtZT0ic2VsZWN0ZWRUcmVlUm93RnVsbCIsZS5pX3NlbD0hMCx0aGlzLl9zZWxlY3RlZFt0aGlzLl9zZWxlY3RlZC5sZW5ndGhdPWV9LGRodG1sWFRyZWVPYmplY3QucHJvdG90eXBlLmdldEluZGV4QnlJZD1mdW5jdGlvbihlKXt2YXIgdD10aGlzLl9nbG9iYWxJZFN0b3JhZ2VGaW5kKGUpO3JldHVybiB0P3RoaXMuX2dldEluZGV4KHQpOm51bGx9LGRodG1sWFRyZWVPYmplY3QucHJvdG90eXBlLl9nZXRJbmRleD1mdW5jdGlvbihlKXtmb3IodmFyIHQ9ZS5wYXJlbnRPYmplY3QsaT0wO2k8dC5jaGlsZHNDb3VudDtpKyspaWYodC5jaGlsZE5vZGVzW2ldPT1lKXJldHVybiBpfSxkaHRtbFhUcmVlT2JqZWN0LnByb3RvdHlwZS5fdW5zZWxlY3RJdGVtPWZ1bmN0aW9uKGUpe2lmKGUmJmUuaV9zZWwpe2Uuc3Bhbi5jbGFzc05hbWU9InN0YW5kYXJ0VHJlZVJvdyIsZS5zcGFuLnBhcmVudE5vZGUucGFyZW50Tm9kZS5jbGFzc05hbWU9IiIsZS5hY29sb3ImJihlLnNwYW4uc3R5bGUuY29sb3I9ZS5hY29sb3IpLGUuaV9zZWw9ITE7Zm9yKHZhciB0PTA7dDx0aGlzLl9zZWxlY3RlZC5sZW5ndGg7dCsrKWlmKCF0aGlzLl9zZWxlY3RlZFt0XS5pX3NlbCl7dGhpcy5fc2VsZWN0ZWQuc3BsaWNlKHQsMSk7YnJlYWt9fX0sZGh0bWxYVHJlZU9iamVjdC5wcm90b3R5cGUuX3Vuc2VsZWN0SXRlbXM9ZnVuY3Rpb24oKXtmb3IodmFyIGU9MDtlPHRoaXMuX3NlbGVjdGVkLmxlbmd0aDtlKyspe3ZhciB0PXRoaXMuX3NlbGVjdGVkW2VdO3Quc3Bhbi5jbGFzc05hbWU9InN0YW5kYXJ0VHJlZVJvdyIsdC5zcGFuLnBhcmVudE5vZGUucGFyZW50Tm9kZS5jbGFzc05hbWU9IiIsdC5hY29sb3ImJih0LnNwYW4uc3R5bGUuY29sb3I9dC5hY29sb3IpLHQuaV9zZWw9ITF9dGhpcy5fc2VsZWN0ZWQ9bmV3IEFycmF5fSxkaHRtbFhUcmVlT2JqZWN0LnByb3RvdHlwZS5vblJvd1NlbGVjdD1mdW5jdGlvbihlLHQsaSl7ZT1lfHx3aW5kb3cuZXZlbnQ7dmFyIG49dGhpcy5wYXJlbnRPYmplY3Q7dCYmKG49dC5wYXJlbnRPYmplY3QpO3ZhciBvPW4udHJlZU5vZCxyPW8uZ2V0U2VsZWN0ZWRJdGVtSWQoKTtlJiZlLnNraXBVblNlbHx8by5fc2VsZWN0SXRlbShuLGUpLGl8fChuLmFjdGlvbkhhbmRsZXI/bi5hY3Rpb25IYW5kbGVyKG4uaWQscik6by5jYWxsRXZlbnQoIm9uQ2xpY2siLFtuLmlkLHJdKSl9LGRodG1sWFRyZWVPYmplY3QucHJvdG90eXBlLl9jcmVhdGVJdGVtPWZ1bmN0aW9uKGUsdCxpKXt2YXIgbj1kb2N1bWVudC5jcmVhdGVFbGVtZW50KCJ0YWJsZSIpO24uY2VsbFNwYWNpbmc9MCxuLmNlbGxQYWRkaW5nPTAsbi5ib3JkZXI9MCx0aGlzLmhmTW9kZSYmKG4uc3R5bGUudGFibGVMYXlvdXQ9ImZpeGVkIiksbi5zdHlsZS5tYXJnaW49MCxuLnN0eWxlLnBhZGRpbmc9MDt2YXIgbz1kb2N1bWVudC5jcmVhdGVFbGVtZW50KCJ0Ym9keSIpLHI9ZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgidHIiKSxsPWRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoInRkIik7aWYobC5jbGFzc05hbWU9InN0YW5kYXJ0VHJlZUltYWdlIix0aGlzLl90eHRpbWcpe3ZhciBzPWRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoImRpdiIpO2wuYXBwZW5kQ2hpbGQocykscy5jbGFzc05hbWU9ImRoeF90cmVlX3RleHRTaWduIn1lbHNle3ZhciBzPXRoaXMuX2dldEltZyh0LmlkKTtzLmJvcmRlcj0iMCIsIklNRyI9PXMudGFnTmFtZSYmKHMuYWxpZ249ImFic21pZGRsZSIpLGwuYXBwZW5kQ2hpbGQocykscy5zdHlsZS5wYWRkaW5nPTAscy5zdHlsZS5tYXJnaW49MCxzLnN0eWxlLndpZHRoPXRoaXMuZGVmX2xpbmVfaW1nX3h9dmFyIGE9ZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgidGQiKSxkPXRoaXMuX2dldEltZyh0aGlzLmNCUk9mP3RoaXMucm9vdElkOnQuaWQpO2QuY2hlY2tlZD0wLHRoaXMuX3NldFNyYyhkLHRoaXMuaW1QYXRoK3RoaXMuY2hlY2tBcnJheVswXSksZC5zdHlsZS53aWR0aD0iMThweCIsZC5zdHlsZS5oZWlnaHQ9IjE4cHgiLGV8fChhLnN0eWxlLmRpc3BsYXk9Im5vbmUiKSxhLmFwcGVuZENoaWxkKGQpLHRoaXMuY0JST2Z8fCJJTUciIT1kLnRhZ05hbWV8fChkLmFsaWduPSJhYnNtaWRkbGUiKSxkLm9uY2xpY2s9dGhpcy5vbkNoZWNrQm94Q2xpY2ssZC50cmVlTm9kPXRoaXMsZC5wYXJlbnRPYmplY3Q9dCxhLndpZHRoPXdpbmRvdy5fS0hUTUxydj8iMTZweCI6IjIwcHgiO3ZhciBoPWRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoInRkIik7aC5jbGFzc05hbWU9InN0YW5kYXJ0VHJlZUltYWdlIjt2YXIgYz10aGlzLl9nZXRJbWcodGhpcy50aW1nZW4/dC5pZDp0aGlzLnJvb3RJZCk7Yy5vbm1vdXNlZG93bj10aGlzLl9wcmV2ZW50TnNEcmFnLGMub25kcmFnc3RhcnQ9dGhpcy5fcHJldmVudE5zRHJhZyxjLmJvcmRlcj0iMCIsdGhpcy5fYWltZ3MmJihjLnBhcmVudE9iamVjdD10LCJJTUciPT1jLnRhZ05hbWUmJihjLmFsaWduPSJhYnNtaWRkbGUiKSxjLm9uY2xpY2s9dGhpcy5vblJvd1NlbGVjdCksaXx8dGhpcy5fc2V0U3JjKGMsdGhpcy5pY29uVVJMK3RoaXMuaW1hZ2VBcnJheVswXSksaC5hcHBlbmRDaGlsZChjKSxjLnN0eWxlLnBhZGRpbmc9MCxjLnN0eWxlLm1hcmdpbj0wLHRoaXMudGltZ2VuPyhoLnN0eWxlLndpZHRoPWMuc3R5bGUud2lkdGg9dGhpcy5kZWZfaW1nX3gsYy5zdHlsZS5oZWlnaHQ9dGhpcy5kZWZfaW1nX3kpOihjLnN0eWxlLndpZHRoPSIwcHgiLGMuc3R5bGUuaGVpZ2h0PSIwcHgiLChfaXNPcGVyYXx8d2luZG93Ll9LSFRNTHJ2KSYmKGguc3R5bGUuZGlzcGxheT0ibm9uZSIpKTsKdmFyIHU9ZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgidGQiKTtyZXR1cm4gdS5jbGFzc05hbWU9ImRoeFRleHRDZWxsIHN0YW5kYXJ0VHJlZVJvdyIsdC5zcGFuPWRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoInNwYW4iKSx0LnNwYW4uY2xhc3NOYW1lPSJzdGFuZGFydFRyZWVSb3ciLHRoaXMubWxpdGVtcz8odC5zcGFuLnN0eWxlLndpZHRoPXRoaXMubWxpdGVtcyx0LnNwYW4uc3R5bGUuZGlzcGxheT0iYmxvY2siKTp1Lm5vV3JhcD0hMCxkaHg0LmlzSUU4P3Uuc3R5bGUud2lkdGg9Ijk5OTk5cHgiOndpbmRvdy5fS0hUTUxydnx8KHUuc3R5bGUud2lkdGg9IjEwMCUiKSx0LnNwYW4uaW5uZXJIVE1MPXQubGFiZWwsdS5hcHBlbmRDaGlsZCh0LnNwYW4pLHUucGFyZW50T2JqZWN0PXQsbC5wYXJlbnRPYmplY3Q9dCx1Lm9uY2xpY2s9dGhpcy5vblJvd1NlbGVjdCxsLm9uY2xpY2s9dGhpcy5vblJvd0NsaWNrLHUub25kYmxjbGljaz10aGlzLm9uUm93Q2xpY2syLHRoaXMuZXR0aXAmJihyLnRpdGxlPXQubGFiZWwpLHRoaXMuZHJhZ0FuZERyb3BPZmYmJih0aGlzLl9haW1ncyYmKHRoaXMuZHJhZ2dlci5hZGREcmFnZ2FibGVJdGVtKGgsdGhpcyksaC5wYXJlbnRPYmplY3Q9dCksdGhpcy5kcmFnZ2VyLmFkZERyYWdnYWJsZUl0ZW0odSx0aGlzKSksdC5zcGFuLnN0eWxlLnBhZGRpbmdMZWZ0PSI1cHgiLHQuc3Bhbi5zdHlsZS5wYWRkaW5nUmlnaHQ9IjVweCIsdS5zdHlsZS52ZXJ0aWNhbEFsaWduPSIiLHUuc3R5bGUuZm9udFNpemU9IjEwcHQiLHUuc3R5bGUuY3Vyc29yPXRoaXMuc3R5bGVfcG9pbnRlcixyLmFwcGVuZENoaWxkKGwpLHIuYXBwZW5kQ2hpbGQoYSksci5hcHBlbmRDaGlsZChoKSxyLmFwcGVuZENoaWxkKHUpLG8uYXBwZW5kQ2hpbGQociksbi5hcHBlbmRDaGlsZChvKSwodGhpcy5laGx0fHx0aGlzLmNoZWNrRXZlbnQoIm9uTW91c2VJbiIpfHx0aGlzLmNoZWNrRXZlbnQoIm9uTW91c2VPdXQiKSkmJihyLm9ubW91c2Vtb3ZlPXRoaXMuX2l0ZW1Nb3VzZUluLHJbX2lzSUU/Im9ubW91c2VsZWF2ZSI6Im9ubW91c2VvdXQiXT10aGlzLl9pdGVtTW91c2VPdXQpLG59LGRodG1sWFRyZWVPYmplY3QucHJvdG90eXBlLnNldE9uUmlnaHRDbGlja0hhbmRsZXI9ZnVuY3Rpb24oZSl7dGhpcy5hdHRhY2hFdmVudCgib25SaWdodENsaWNrIixlKX0sZGh0bWxYVHJlZU9iamVjdC5wcm90b3R5cGUuc2V0T25DbGlja0hhbmRsZXI9ZnVuY3Rpb24oZSl7dGhpcy5hdHRhY2hFdmVudCgib25DbGljayIsZSl9LGRodG1sWFRyZWVPYmplY3QucHJvdG90eXBlLnNldE9uU2VsZWN0U3RhdGVDaGFuZ2U9ZnVuY3Rpb24oZSl7dGhpcy5hdHRhY2hFdmVudCgib25TZWxlY3QiLGUpfSxkaHRtbFhUcmVlT2JqZWN0LnByb3RvdHlwZS5zZXRYTUxBdXRvTG9hZGluZz1mdW5jdGlvbihlKXt0aGlzLlhNTHNvdXJjZT1lfSxkaHRtbFhUcmVlT2JqZWN0LnByb3RvdHlwZS5zZXRPbkNoZWNrSGFuZGxlcj1mdW5jdGlvbihlKXt0aGlzLmF0dGFjaEV2ZW50KCJvbkNoZWNrIixlKX0sZGh0bWxYVHJlZU9iamVjdC5wcm90b3R5cGUuc2V0T25PcGVuSGFuZGxlcj1mdW5jdGlvbihlKXt0aGlzLmF0dGFjaEV2ZW50KCJvbk9wZW5TdGFydCIsZSl9LGRodG1sWFRyZWVPYmplY3QucHJvdG90eXBlLnNldE9uT3BlblN0YXJ0SGFuZGxlcj1mdW5jdGlvbihlKXt0aGlzLmF0dGFjaEV2ZW50KCJvbk9wZW5TdGFydCIsZSl9LGRodG1sWFRyZWVPYmplY3QucHJvdG90eXBlLnNldE9uT3BlbkVuZEhhbmRsZXI9ZnVuY3Rpb24oZSl7dGhpcy5hdHRhY2hFdmVudCgib25PcGVuRW5kIixlKX0sZGh0bWxYVHJlZU9iamVjdC5wcm90b3R5cGUuc2V0T25EYmxDbGlja0hhbmRsZXI9ZnVuY3Rpb24oZSl7dGhpcy5hdHRhY2hFdmVudCgib25EYmxDbGljayIsZSl9LGRodG1sWFRyZWVPYmplY3QucHJvdG90eXBlLm9wZW5BbGxJdGVtcz1mdW5jdGlvbihlKXt2YXIgdD10aGlzLl9nbG9iYWxJZFN0b3JhZ2VGaW5kKGUpO3JldHVybiB0Pyh0aGlzLl94b3BlbkFsbCh0KSx2b2lkIDApOjB9LGRodG1sWFRyZWVPYmplY3QucHJvdG90eXBlLmdldE9wZW5TdGF0ZT1mdW5jdGlvbihlKXt2YXIgdD10aGlzLl9nbG9iYWxJZFN0b3JhZ2VGaW5kKGUpO3JldHVybiB0P3RoaXMuX2dldE9wZW5TdGF0ZSh0KToiIn0sZGh0bWxYVHJlZU9iamVjdC5wcm90b3R5cGUuY2xvc2VBbGxJdGVtcz1mdW5jdGlvbihlKXtlPT09d2luZG93LnVuZGVmaW5lZCYmKGU9dGhpcy5yb290SWQpO3ZhciB0PXRoaXMuX2dsb2JhbElkU3RvcmFnZUZpbmQoZSk7cmV0dXJuIHQ/KHRoaXMuX3hjbG9zZUFsbCh0KSx0aGlzLmFsbFRyZWUuY2hpbGROb2Rlc1swXS5ib3JkZXI9IjEiLHRoaXMuYWxsVHJlZS5jaGlsZE5vZGVzWzBdLmJvcmRlcj0iMCIsdm9pZCAwKTowfSxkaHRtbFhUcmVlT2JqZWN0LnByb3RvdHlwZS5zZXRVc2VyRGF0YT1mdW5jdGlvbihlLHQsaSl7dmFyIG49dGhpcy5fZ2xvYmFsSWRTdG9yYWdlRmluZChlLDAsITApO24mJigiaGludCI9PXQmJihuLmh0bWxOb2RlLmNoaWxkTm9kZXNbMF0uY2hpbGROb2Rlc1swXS50aXRsZT1pKSwidW5kZWZpbmVkIj09dHlwZW9mIG4udXNlckRhdGFbInRfIit0XSYmKG4uX3VzZXJkYXRhbGlzdD9uLl91c2VyZGF0YWxpc3QrPSIsIit0Om4uX3VzZXJkYXRhbGlzdD10KSxuLnVzZXJEYXRhWyJ0XyIrdF09aSl9LGRodG1sWFRyZWVPYmplY3QucHJvdG90eXBlLmdldFVzZXJEYXRhPWZ1bmN0aW9uKGUsdCl7dmFyIGk9dGhpcy5fZ2xvYmFsSWRTdG9yYWdlRmluZChlLDAsITApO2lmKGkpcmV0dXJuIGkudXNlckRhdGFbInRfIit0XX0sZGh0bWxYVHJlZU9iamVjdC5wcm90b3R5cGUuZ2V0SXRlbUNvbG9yPWZ1bmN0aW9uKGUpe3ZhciB0PXRoaXMuX2dsb2JhbElkU3RvcmFnZUZpbmQoZSk7aWYoIXQpcmV0dXJuIDA7dmFyIGk9bmV3IE9iamVjdDtyZXR1cm4gdC5hY29sb3ImJihpLmFjb2xvcj10LmFjb2xvciksdC5zY29sb3ImJihpLnNjb2xvcj10LnNjb2xvciksaX0sZGh0bWxYVHJlZU9iamVjdC5wcm90b3R5cGUuc2V0SXRlbUNvbG9yPWZ1bmN0aW9uKGUsdCxpKXtpZihlJiZlLnNwYW4pdmFyIG49ZTtlbHNlIHZhciBuPXRoaXMuX2dsb2JhbElkU3RvcmFnZUZpbmQoZSk7cmV0dXJuIG4/KG4uaV9zZWw/KGl8fHQpJiYobi5zcGFuLnN0eWxlLmNvbG9yPWl8fHQpOnQmJihuLnNwYW4uc3R5bGUuY29sb3I9dCksaSYmKG4uc2NvbG9yPWkpLHQmJihuLmFjb2xvcj10KSx2b2lkIDApOjB9LGRodG1sWFRyZWVPYmplY3QucHJvdG90eXBlLnNldE9uTW91c2VJbkhhbmRsZXI9ZnVuY3Rpb24oZSl7dGhpcy5laGx0PSEwLHRoaXMuYXR0YWNoRXZlbnQoIm9uTW91c2VJbiIsZSl9LGRodG1sWFRyZWVPYmplY3QucHJvdG90eXBlLnNldE9uTW91c2VPdXRIYW5kbGVyPWZ1bmN0aW9uKGUpe3RoaXMuZWhsdD0hMCx0aGlzLmF0dGFjaEV2ZW50KCJvbk1vdXNlT3V0IixlKX0sZGh0bWxYVHJlZU9iamVjdC5wcm90b3R5cGUuZW5hYmxlVHJlZUxpbmVzPWZ1bmN0aW9uKGUpe3RoaXMudHJlZUxpbmVzT249ZGh4NC5zMmIoZSl9LGRodG1sWFRyZWVPYmplY3QucHJvdG90eXBlLm9wZW5JdGVtPWZ1bmN0aW9uKGUpe3RoaXMuc2tpcExvY2s9ITA7dmFyIHQ9dGhpcy5fZ2xvYmFsSWRTdG9yYWdlRmluZChlKTtyZXR1cm4gdD90aGlzLl9vcGVuSXRlbSh0KTowfSxkaHRtbFhUcmVlT2JqZWN0LnByb3RvdHlwZS5fb3Blbkl0ZW09ZnVuY3Rpb24oZSl7dmFyIHQ9dGhpcy5fZ2V0T3BlblN0YXRlKGUpO2lmKDA+dHx8dGhpcy5YTUxzb3VyY2UmJiFlLlhNTGxvYWQpe2lmKCF0aGlzLmNhbGxFdmVudCgib25PcGVuU3RhcnQiLFtlLmlkLHRdKSlyZXR1cm4gMDt0aGlzLl9IaWRlU2hvdyhlLDIpLHRoaXMuY2hlY2tFdmVudCgib25PcGVuRW5kIikmJih0aGlzLm9uWExFPT10aGlzLl9lcG5GSGUmJnRoaXMuX2VwbkZIZSh0aGlzLGUuaWQsITApLHRoaXMueG1sc3RhdGUmJnRoaXMuWE1Mc291cmNlPyh0aGlzLl9vaWVfb25YTEUucHVzaCh0aGlzLm9uWExFKSx0aGlzLm9uWExFPXRoaXMuX2VwbkZIZSk6dGhpcy5jYWxsRXZlbnQoIm9uT3BlbkVuZCIsW2UuaWQsdGhpcy5fZ2V0T3BlblN0YXRlKGUpXSkpfWVsc2UgdGhpcy5fc3JuZCYmdGhpcy5fSGlkZVNob3coZSwyKTtlLnBhcmVudE9iamVjdCYmIXRoaXMuX3NraXBfb3Blbl9wYXJlbnQmJnRoaXMuX29wZW5JdGVtKGUucGFyZW50T2JqZWN0KX0sZGh0bWxYVHJlZU9iamVjdC5wcm90b3R5cGUuX2dldEFsbEZhdEl0ZW1zPWZ1bmN0aW9uKGUpe2Zvcih2YXIgdD0iIixpPTA7aTxlLmNoaWxkc0NvdW50O2krKylpZihlLmNoaWxkTm9kZXNbaV0udW5QYXJzZWR8fGUuY2hpbGROb2Rlc1tpXS5jaGlsZHNDb3VudD4wKXtpZih0P3QrPXRoaXMuZGxtdHIrZS5jaGlsZE5vZGVzW2ldLmlkOnQ9IiIrZS5jaGlsZE5vZGVzW2ldLmlkLGUuY2hpbGROb2Rlc1tpXS51blBhcnNlZCl2YXIgbj10aGlzLl9nZXRBbGxGYXRJdGVtc1hNTChlLmNoaWxkTm9kZXNbaV0udW5QYXJzZWQsMSk7ZWxzZSB2YXIgbj10aGlzLl9nZXRBbGxGYXRJdGVtcyhlLmNoaWxkTm9kZXNbaV0pO24mJih0Kz10aGlzLmRsbXRyK24pfXJldHVybiB0fSxkaHRtbFhUcmVlT2JqZWN0LnByb3RvdHlwZS5zZWxlY3RJdGVtPWZ1bmN0aW9uKGUsdCxpKXt0PWRoeDQuczJiKHQpO3ZhciBuPXRoaXMuX2dsb2JhbElkU3RvcmFnZUZpbmQoZSk7aWYoIW58fCFuLnBhcmVudE9iamVjdClyZXR1cm4gMDt0aGlzLlhNTGxvYWRpbmdXYXJuaW5nP24ucGFyZW50T2JqZWN0Lm9wZW5NZT0xOnRoaXMuX29wZW5JdGVtKG4ucGFyZW50T2JqZWN0KTt2YXIgbz1udWxsO2kmJihvPW5ldyBPYmplY3Qsby5jdHJsS2V5PSEwLG4uaV9zZWwmJihvLnNraXBVblNlbD0hMCkpLHQ/dGhpcy5vblJvd1NlbGVjdChvLG4uaHRtbE5vZGUuY2hpbGROb2Rlc1swXS5jaGlsZE5vZGVzWzBdLmNoaWxkTm9kZXNbM10sITEpOnRoaXMub25Sb3dTZWxlY3QobyxuLmh0bWxOb2RlLmNoaWxkTm9kZXNbMF0uY2hpbGROb2Rlc1swXS5jaGlsZE5vZGVzWzNdLCEwKX0sZGh0bWxYVHJlZU9iamVjdC5wcm90b3R5cGUuX2NvbXByZXNzQ2hpbGRMaXN0PWZ1bmN0aW9uKGUsdCl7ZS0tO2Zvcih2YXIgaT0wO2U+aTtpKyspMD09dFtpXSYmKHRbaV09dFtpKzFdLHRbaSsxXT0wKX0sZGh0bWxYVHJlZU9iamVjdC5wcm90b3R5cGUuX2RlbGV0ZU5vZGU9ZnVuY3Rpb24oZSx0LGkpe2lmKCF0fHwhdC5wYXJlbnRPYmplY3QpcmV0dXJuIDA7dmFyIG49MCxvPTA7dC50ci5uZXh0U2libGluZyYmKG49dC50ci5uZXh0U2libGluZy5ub2RlbSksdC50ci5wcmV2aW91c1NpYmxpbmcmJihvPXQudHIucHJldmlvdXNTaWJsaW5nLm5vZGVtKTtmb3IodmFyIHI9dC5wYXJlbnRPYmplY3QsbD1yLmNoaWxkc0NvdW50LHM9ci5jaGlsZE5vZGVzLGE9MDtsPmE7YSsrKWlmKHNbYV0uaWQ9PWUpe2l8fHIuaHRtbE5vZGUuY2hpbGROb2Rlc1swXS5yZW1vdmVDaGlsZChzW2FdLnRyKSxzW2FdPTA7YnJlYWt9dGhpcy5fY29tcHJlc3NDaGlsZExpc3QobCxzKSxpfHxyLmNoaWxkc0NvdW50LS0sbiYmKHRoaXMuX2NvcnJlY3RQbHVzKG4pLHRoaXMuX2NvcnJlY3RMaW5lKG4pKSxvJiYodGhpcy5fY29ycmVjdFBsdXMobyksdGhpcy5fY29ycmVjdExpbmUobykpLHRoaXMudHNjaGVjayYmdGhpcy5fY29ycmVjdENoZWNrU3RhdGVzKHIpLGl8fHRoaXMuX2dsb2JhbElkU3RvcmFnZVJlY1N1Yih0KX0sZGh0bWxYVHJlZU9iamVjdC5wcm90b3R5cGUuZGVsZXRlQ2hpbGRJdGVtcz1mdW5jdGlvbihlKXt2YXIgdD10aGlzLl9nbG9iYWxJZFN0b3JhZ2VGaW5kKGUpO2lmKHQpZm9yKHZhciBpPXQuY2hpbGRzQ291bnQsbj0wO2k+bjtuKyspdGhpcy5fZGVsZXRlTm9kZSh0LmNoaWxkTm9kZXNbMF0uaWQsdC5jaGlsZE5vZGVzWzBdKX0sZGh0bWxYVHJlZU9iamVjdC5wcm90b3R5cGUuX2dsb2JhbElkU3RvcmFnZVJlY1N1Yj1mdW5jdGlvbihlKXtmb3IodmFyIHQ9MDt0PGUuY2hpbGRzQ291bnQ7dCsrKXRoaXMuX2dsb2JhbElkU3RvcmFnZVJlY1N1YihlLmNoaWxkTm9kZXNbdF0pLHRoaXMuX2dsb2JhbElkU3RvcmFnZVN1YihlLmNoaWxkTm9kZXNbdF0uaWQpO3RoaXMuX2dsb2JhbElkU3RvcmFnZVN1YihlLmlkKTt2YXIgaT1lO2kuc3Bhbj1udWxsLGkudHIubm9kZW09bnVsbCxpLnRyPW51bGwsaS5odG1sTm9kZT1udWxsfSxkaHRtbFhUcmVlT2JqZWN0LnByb3RvdHlwZS5fYXV0b1Njcm9sbD1mdW5jdGlvbihlLHQsaSl7dGhpcy5hdXRvU2Nyb2xsJiYoZSYmKHQ9ZGh4NC5hYnNUb3AoZSksaT1kaHg0LmFic1RvcCh0aGlzLmFsbFRyZWUpLXRoaXMuYWxsVHJlZS5zY3JvbGxUb3ApLHQtaS1wYXJzZUludCh0aGlzLmFsbFRyZWUuc2Nyb2xsVG9wKT5wYXJzZUludCh0aGlzLmFsbFRyZWUub2Zmc2V0SGVpZ2h0KS01MCYmKHRoaXMuYWxsVHJlZS5zY3JvbGxUb3A9cGFyc2VJbnQodGhpcy5hbGxUcmVlLnNjcm9sbFRvcCkrMjApLHQtaTxwYXJzZUludCh0aGlzLmFsbFRyZWUuc2Nyb2xsVG9wKSszMCYmKHRoaXMuYWxsVHJlZS5zY3JvbGxUb3A9cGFyc2VJbnQodGhpcy5hbGxUcmVlLnNjcm9sbFRvcCktMjApKX0sZGh0bWxYVHJlZU9iamVjdC5wcm90b3R5cGUuZW5hYmxlVGV4dFNpZ25zPWZ1bmN0aW9uKGUpe3RoaXMuX3R4dGltZz1kaHg0LnMyYihlKX0sZGh0bWxYVHJlZU9iamVjdC5wcm90b3R5cGUucHJldmVudElFQ2FjaGluZz1mdW5jdGlvbihlKXtkaHg0LmFqYXguY2FjaGU9IWV9LGRodG1sWFRyZWVPYmplY3QucHJvdG90eXBlLnByZXZlbnRJRUNhc2hpbmc9ZGh0bWxYVHJlZU9iamVjdC5wcm90b3R5cGUucHJldmVudElFQ2FjaGluZyxkaHRtbFhUcmVlT2JqZWN0LnByb3RvdHlwZS5zZXRJY29uU2l6ZT1mdW5jdGlvbihlLHQsaSl7aWYoaSl7aWYoaSYmaS5zcGFuKXZhciBuPWk7ZWxzZSB2YXIgbj10aGlzLl9nbG9iYWxJZFN0b3JhZ2VGaW5kKGkpO2lmKCFuKXJldHVybiAwO3ZhciBvPW4uc3Bhbi5wYXJlbnROb2RlLnByZXZpb3VzU2libGluZy5jaGlsZE5vZGVzWzBdO2UmJihvLnN0eWxlLndpZHRoPWUrInB4Iix3aW5kb3cuX0tIVE1McnYmJihvLnBhcmVudE5vZGUuc3R5bGUud2lkdGg9ZSsicHgiKSksdCYmKG8uc3R5bGUuaGVpZ2h0PXQrInB4Iix3aW5kb3cuX0tIVE1McnYmJihvLnBhcmVudE5vZGUuc3R5bGUuaGVpZ2h0PXQrInB4IikpfWVsc2UgdGhpcy5kZWZfaW1nX3g9ZSsicHgiLHRoaXMuZGVmX2ltZ195PXQrInB4In0sZGh0bWxYVHJlZU9iamVjdC5wcm90b3R5cGUuZW5hYmxlU2luZ2xlUmFkaW9Nb2RlPWZ1bmN0aW9uKGUpe3RoaXMuX2ZyYnRycz1kaHg0LnMyYihlKX0sZGh0bWxYVHJlZU9iamVjdC5wcm90b3R5cGUub3Blbk9uSXRlbUFkZGVkPWZ1bmN0aW9uKGUpe3RoaXMuX2hBZEk9IWRoeDQuczJiKGUpfSxkaHRtbFhUcmVlT2JqZWN0LnByb3RvdHlwZS5vcGVuT25JdGVtQWRkaW5nPWZ1bmN0aW9uKGUpe3RoaXMuX2hBZEk9IWRoeDQuczJiKGUpfSxkaHRtbFhUcmVlT2JqZWN0LnByb3RvdHlwZS5nZXRBbGxJdGVtc1dpdGhLaWRzPWZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuX2dldEFsbEZhdEl0ZW1zKHRoaXMuaHRtbE5vZGUpfSxkaHRtbFhUcmVlT2JqZWN0LnByb3RvdHlwZS5zZXRTa2luPWZ1bmN0aW9uKGUpe3ZhciB0PXRoaXMucGFyZW50T2JqZWN0LmNsYXNzTmFtZS5yZXBsYWNlKC9kaHh0cmVlX1teIF0qL2dpLCIiKTt0aGlzLnBhcmVudE9iamVjdC5jbGFzc05hbWU9dCsiIGRoeHRyZWVfIitlLCgiZGh4X3RlcnJhY2UiPT1lfHwiZGh4X3dlYiI9PWV8fCJtYXRlcmlhbCI9PWUpJiZ0aGlzLmVuYWJsZVRyZWVMaW5lcyghMSksIm1hdGVyaWFsIj09ZSYmdGhpcy5zZXRJY29uU2l6ZSgiMjUiLCIyNSIpfSxqc29uUG9pbnRlci5wcm90b3R5cGU9e3RleHQ6ZnVuY3Rpb24oKXt2YXIgZT1mdW5jdGlvbihlKXtmb3IodmFyIGk9W10sbj0wO248ZS5sZW5ndGg7bisrKWkucHVzaCgieyIrdChlW25dKSsifSIpO3JldHVybiBpLmpvaW4oIiwiKX0sdD1mdW5jdGlvbihpKXt2YXIgbj1bXTtmb3IodmFyIG8gaW4gaSkib2JqZWN0Ij09dHlwZW9mIGlbb10/by5sZW5ndGg/bi5wdXNoKCciJytvKyciOlsnK2UoaVtvXSkrIl0iKTpuLnB1c2goJyInK28rJyI6eycrdChpW29dKSsifSIpOm4ucHVzaCgnIicrbysnIjoiJytpW29dKyciJyk7cmV0dXJuIG4uam9pbigiLCIpfTtyZXR1cm4ieyIrdCh0aGlzLmQpKyJ9In0sZ2V0OmZ1bmN0aW9uKGUpe3JldHVybiB0aGlzLmRbZV19LGV4aXN0czpmdW5jdGlvbigpe3JldHVybiEhdGhpcy5kfSxjb250ZW50OmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuZC5jb250ZW50fSxlYWNoOmZ1bmN0aW9uKGUsdCxpKXt2YXIgbj10aGlzLmRbZV0sbz1uZXcganNvblBvaW50ZXI7aWYobilmb3IodmFyIHI9MDtyPG4ubGVuZ3RoO3IrKylvLmQ9bltyXSx0LmFwcGx5KGksW28scl0pfSxnZXRfYWxsOmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuZH0sc3ViOmZ1bmN0aW9uKGUpe3JldHVybiBuZXcganNvblBvaW50ZXIodGhpcy5kW2VdLHRoaXMuZCl9LHN1Yl9leGlzdHM6ZnVuY3Rpb24oZSl7cmV0dXJuISF0aGlzLmRbZV19LGVhY2hfeDpmdW5jdGlvbihlLHQsaSxuLG8pe3ZhciByPXRoaXMuZFtlXSxsPW5ldyBqc29uUG9pbnRlcigwLHRoaXMuZCk7aWYocilmb3Iobz1vfHwwO288ci5sZW5ndGg7bysrKWlmKHJbb11bdF0mJihsLmQ9cltvXSwtMT09aS5hcHBseShuLFtsLG9dKSkpcmV0dXJufSx1cDpmdW5jdGlvbigpe3JldHVybiBuZXcganNvblBvaW50ZXIodGhpcy5kcCx0aGlzLmQpfSxzZXQ6ZnVuY3Rpb24oZSx0KXt0aGlzLmRbZV09dH0sY2xvbmU6ZnVuY3Rpb24oKXtyZXR1cm4gbmV3IGpzb25Qb2ludGVyKHRoaXMuZCx0aGlzLmRwKX0sdGhyb3VnaDpmdW5jdGlvbihlLHQsaSxuLG8pe3ZhciByPXRoaXMuZFtlXTtpZihyLmxlbmd0aClmb3IodmFyIGw9MDtsPHIubGVuZ3RoO2wrKyl7aWYobnVsbCE9cltsXVt0XSYmIiIhPXJbbF1bdF0mJighaXx8cltsXVt0XT09aSkpe3ZhciBzPW5ldyBqc29uUG9pbnRlcihyW2xdLHRoaXMuZCk7bi5hcHBseShvLFtzLGxdKX12YXIgYT10aGlzLmQ7dGhpcy5kPXJbbF0sdGhpcy5zdWJfZXhpc3RzKGUpJiZ0aGlzLnRocm91Z2goZSx0LGksbixvKSx0aGlzLmQ9YX19fSxkaHRtbFhUcmVlT2JqZWN0LnByb3RvdHlwZS5sb2FkSlNPTk9iamVjdD1mdW5jdGlvbihlLHQpe3JldHVybiB3aW5kb3cuY29uc29sZSYmd2luZG93LmNvbnNvbGUuaW5mbyYmd2luZG93LmNvbnNvbGUuaW5mbygibG9hZEpTT05PYmplY3Qgd2FzIGRlcHJlY2F0ZWQiLCJodHRwOi8vZG9jcy5kaHRtbHguY29tL21pZ3JhdGlvbl9faW5kZXguaHRtbCNtaWdyYXRpb25mcm9tNDN0bzQ0IiksdGhpcy5fbG9hZEpTT05PYmplY3QoZSx0KX0sZGh0bWxYVHJlZU9iamVjdC5wcm90b3R5cGUuX2xvYWRKU09OT2JqZWN0PWZ1bmN0aW9uKGUsdCl7dGhpcy5wYXJzQ291bnR8fHRoaXMuY2FsbEV2ZW50KCJvblhMUyIsW3RoaXMsbnVsbF0pLHRoaXMueG1sc3RhdGU9MTt2YXIgaT1uZXcganNvblBvaW50ZXIoZSk7dGhpcy5fcGFyc2UoaSksdGhpcy5fcD1pLHQmJnQoKX0sd2luZG93LmFkZEV2ZW50TGlzdGVuZXI/d2luZG93LmFkZEV2ZW50TGlzdGVuZXIoImxvYWQiLGRoeF9pbml0X3RyZWVzLCExKTp3aW5kb3cuYXR0YWNoRXZlbnQmJndpbmRvdy5hdHRhY2hFdmVudCgib25sb2FkIixkaHhfaW5pdF90cmVlcyk7dmFyIHN0eWxlPWRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoInN0eWxlIik7c3R5bGUuaW5uZXJIVE1MPSdAa2V5ZnJhbWVzIGRoeF9sb2FkZXJfcm90YXRlezEwMCV7dHJhbnNmb3JtOnJvdGF0ZSgzNjBkZWcpO319QGtleWZyYW1lcyBkaHhfbG9hZGVyX2Rhc2h7MCV7c3Ryb2tlLWRhc2hhcnJheToxLDIwMDtzdHJva2UtZGFzaG9mZnNldDowO301MCV7c3Ryb2tlLWRhc2hhcnJheTo4OSwyMDA7c3Ryb2tlLWRhc2hvZmZzZXQ6LTM1cHg7fTEwMCV7c3Ryb2tlLWRhc2hhcnJheTo4OSwyMDA7c3Ryb2tlLWRhc2hvZmZzZXQ6LTEyNHB4O319LmRodG1seE1lbnVfbWF0ZXJpYWxfTWlkZGxle3Bvc2l0aW9uOnJlbGF0aXZlO2hlaWdodDoyOHB4O2xpbmUtaGVpZ2h0OjI4cHg7YmFja2dyb3VuZC1jb2xvcjojZjVmNWY1O292ZXJmbG93OmhpZGRlbjtib3JkZXI6bm9uZTtmb250LXNpemU6MTRweDtmb250LWZhbWlseTpSb2JvdG8sQXJpYWwsSGVsdmV0aWNhO2NvbG9yOiM0MDQwNDA7LXdlYmtpdC11c2VyLXNlbGVjdDpub25lOy1raHRtbC11c2VyLXNlbGVjdDpub25lOy1tb3otdXNlci1zZWxlY3Q6bm9uZTstbXMtdXNlci1zZWxlY3Q6bm9uZTstby11c2VyLXNlbGVjdDpub25lO3VzZXItc2VsZWN0Om5vbmU7fS5kaHRtbHhNZW51X21hdGVyaWFsX01pZGRsZSBkaXYuZGh0bWx4TWVudV9tYXRlcmlhbF9Ub3BMZXZlbF9JdGVtX05vcm1hbCwuZGh0bWx4TWVudV9tYXRlcmlhbF9NaWRkbGUgZGl2LmRodG1seE1lbnVfbWF0ZXJpYWxfVG9wTGV2ZWxfSXRlbV9EaXNhYmxlZCwuZGh0bWx4TWVudV9tYXRlcmlhbF9NaWRkbGUgZGl2LmRodG1seE1lbnVfbWF0ZXJpYWxfVG9wTGV2ZWxfSXRlbV9TZWxlY3RlZHtwb3NpdGlvbjpyZWxhdGl2ZTtmbG9hdDpsZWZ0O2ZvbnQ6aW5oZXJpdDtoZWlnaHQ6MjhweDtsaW5lLWhlaWdodDoyOHB4O21hcmdpbjowO3BhZGRpbmc6MCA4cHg7Y3Vyc29yOmRlZmF1bHQ7d2hpdGUtc3BhY2U6bm93cmFwOy13ZWJraXQtdXNlci1zZWxlY3Q6bm9uZTsta2h0bWwtdXNlci1zZWxlY3Q6bm9uZTstbW96LXVzZXItc2VsZWN0Om5vbmU7LW1zLXVzZXItc2VsZWN0Om5vbmU7LW8tdXNlci1zZWxlY3Q6bm9uZTt1c2VyLXNlbGVjdDpub25lO30uZGh0bWx4TWVudV9tYXRlcmlhbF9NaWRkbGUgZGl2LmRodG1seE1lbnVfbWF0ZXJpYWxfVG9wTGV2ZWxfSXRlbV9Ob3JtYWwgZGl2LnRvcF9sZXZlbF90ZXh0LC5kaHRtbHhNZW51X21hdGVyaWFsX01pZGRsZSBkaXYuZGh0bWx4TWVudV9tYXRlcmlhbF9Ub3BMZXZlbF9JdGVtX0Rpc2FibGVkIGRpdi50b3BfbGV2ZWxfdGV4dCwuZGh0bWx4TWVudV9tYXRlcmlhbF9NaWRkbGUgZGl2LmRodG1seE1lbnVfbWF0ZXJpYWxfVG9wTGV2ZWxfSXRlbV9TZWxlY3RlZCBkaXYudG9wX2xldmVsX3RleHR7ZmxvYXQ6bGVmdDttYXJnaW46MCAzcHg7fS5kaHRtbHhNZW51X21hdGVyaWFsX01pZGRsZSBkaXYuZGh0bWx4TWVudV9tYXRlcmlhbF9Ub3BMZXZlbF9JdGVtX05vcm1hbCBpLC5kaHRtbHhNZW51X21hdGVyaWFsX01pZGRsZSBkaXYuZGh0bWx4TWVudV9tYXRlcmlhbF9Ub3BMZXZlbF9JdGVtX0Rpc2FibGVkIGksLmRodG1seE1lbnVfbWF0ZXJpYWxfTWlkZGxlIGRpdi5kaHRtbHhNZW51X21hdGVyaWFsX1RvcExldmVsX0l0ZW1fU2VsZWN0ZWQgaXtoZWlnaHQ6aW5oZXJpdDtsaW5lLWhlaWdodDppbmhlcml0O2Zsb2F0OmxlZnQ7Y29sb3I6aW5oZXJpdDttYXJnaW46MCA0cHg7Zm9udC1zaXplOjEuMmVtO30uZGh0bWx4TWVudV9tYXRlcmlhbF9NaWRkbGUgZGl2LmRodG1seE1lbnVfbWF0ZXJpYWxfVG9wTGV2ZWxfSXRlbV9EaXNhYmxlZHtjb2xvcjojYTZhNmE2O30uZGh0bWx4TWVudV9tYXRlcmlhbF9NaWRkbGUgZGl2LmRodG1seE1lbnVfbWF0ZXJpYWxfVG9wTGV2ZWxfSXRlbV9TZWxlY3RlZHtiYWNrZ3JvdW5kLWNvbG9yOiNlYmViZWI7fS5kaHRtbHhNZW51X21hdGVyaWFsX01pZGRsZSBpbWcuZGh0bWx4TWVudV9Ub3BMZXZlbF9JdGVtX0ljb257ZmxvYXQ6bGVmdDttYXJnaW46NXB4IDNweCAwIDNweDt3aWR0aDoxOHB4O2hlaWdodDoxOHB4O2N1cnNvcjpkZWZhdWx0O30uZGh0bWx4TWVudV9tYXRlcmlhbF9NaWRkbGUgZGl2LnRvcF9zZXB7cG9zaXRpb246cmVsYXRpdmU7ZmxvYXQ6bGVmdDtoZWlnaHQ6MjJweDt3aWR0aDowO2JvcmRlci1sZWZ0OjFweCBzb2xpZCAjZGZkZmRmO21hcmdpbjozcHggOHB4IDAgOHB4O2ZvbnQtc2l6ZToxcHg7b3ZlcmZsb3c6aGlkZGVuO2N1cnNvcjpkZWZhdWx0Oy13ZWJraXQtdXNlci1zZWxlY3Q6bm9uZTsta2h0bWwtdXNlci1zZWxlY3Q6bm9uZTstbW96LXVzZXItc2VsZWN0Om5vbmU7LW1zLXVzZXItc2VsZWN0Om5vbmU7LW8tdXNlci1zZWxlY3Q6bm9uZTt1c2VyLXNlbGVjdDpub25lO30uZGh0bWx4TWVudV9tYXRlcmlhbF9NaWRkbGUgZGl2LmRodG1seE1lbnVfVG9wTGV2ZWxfVGV4dF9yaWdodCwuZGh0bWx4TWVudV9tYXRlcmlhbF9NaWRkbGUgZGl2LmRodG1seE1lbnVfVG9wTGV2ZWxfVGV4dF9sZWZ0e3Bvc2l0aW9uOmFic29sdXRlO3RvcDowO2hlaWdodDoyOHB4O2xpbmUtaGVpZ2h0OjI4cHg7Y3Vyc29yOmRlZmF1bHQ7Zm9udC1zaXplOjE0cHg7Zm9udC1mYW1pbHk6Um9ib3RvLEFyaWFsLEhlbHZldGljYTtjb2xvcjojNDA0MDQwOy13ZWJraXQtdXNlci1zZWxlY3Q6bm9uZTsta2h0bWwtdXNlci1zZWxlY3Q6bm9uZTstbW96LXVzZXItc2VsZWN0Om5vbmU7LW1zLXVzZXItc2VsZWN0Om5vbmU7LW8tdXNlci1zZWxlY3Q6bm9uZTt1c2VyLXNlbGVjdDpub25lO30uZGh0bWx4TWVudV9tYXRlcmlhbF9NaWRkbGUgZGl2LmRodG1seE1lbnVfVG9wTGV2ZWxfVGV4dF9yaWdodHtyaWdodDo2cHg7fS5kaHRtbHhNZW51X21hdGVyaWFsX01pZGRsZSBkaXYuZGh0bWx4TWVudV9Ub3BMZXZlbF9UZXh0X2xlZnR7bGVmdDo2cHg7fWRpdi5kaHRtbHhNZW51X21hdGVyaWFsX1N1YkxldmVsQXJlYV9Qb2x5Z29ue3Bvc2l0aW9uOmFic29sdXRlO3BhZGRpbmc6NXB4IDA7YmFja2dyb3VuZC1jb2xvcjojZmFmYWZhO292ZXJmbG93OmhpZGRlbjtjdXJzb3I6ZGVmYXVsdDtsaW5lLWhlaWdodDpub3JtYWw7b3ZlcmZsb3cteTphdXRvOy13ZWJraXQtb3ZlcmZsb3ctc2Nyb2xsaW5nOnRvdWNoOy13ZWJraXQtdGFwLWhpZ2hsaWdodC1jb2xvcjpyZ2JhKDAsMCwwLDApO2JveC1zaGFkb3c6MCAxcHggM3B4IHJnYmEoMCwwLDAsMC4xMiksMCAxcHggMnB4IHJnYmEoMCwwLDAsMC4yNCk7LXdlYmtpdC11c2VyLXNlbGVjdDpub25lOy1raHRtbC11c2VyLXNlbGVjdDpub25lOy1tb3otdXNlci1zZWxlY3Q6bm9uZTstbXMtdXNlci1zZWxlY3Q6bm9uZTstby11c2VyLXNlbGVjdDpub25lO3VzZXItc2VsZWN0Om5vbmU7fWRpdi5kaHRtbHhNZW51X21hdGVyaWFsX1N1YkxldmVsQXJlYV9Qb2x5Z29uIHRke3BhZGRpbmc6MDttYXJnaW46MDtsaW5lLWhlaWdodDpub3JtYWw7d2hpdGUtc3BhY2U6bm93cmFwO2ZvbnQtc2l6ZToxNHB4O2ZvbnQtZmFtaWx5OlJvYm90byxBcmlhbCxIZWx2ZXRpY2E7Y29sb3I6IzQwNDA0MDt9ZGl2LmRodG1seE1lbnVfbWF0ZXJpYWxfU3ViTGV2ZWxBcmVhX1BvbHlnb24gdGQuc3ViX2l0ZW1faWNvbnt3aWR0aDoxOHB4O3RleHQtYWxpZ246Y2VudGVyO31kaXYuZGh0bWx4TWVudV9tYXRlcmlhbF9TdWJMZXZlbEFyZWFfUG9seWdvbiB0ZC5zdWJfaXRlbV9pY29uIGltZy5zdWJfaWNvbnttYXJnaW46NHB4IDZweCAwIDZweDt3aWR0aDoxOHB4O2hlaWdodDoxOHB4O31kaXYuZGh0bWx4TWVudV9tYXRlcmlhbF9TdWJMZXZlbEFyZWFfUG9seWdvbiB0ZC5zdWJfaXRlbV9pY29uIGl7d2lkdGg6MThweDtoZWlnaHQ6MzBweDtsaW5lLWhlaWdodDoyOXB4O21hcmdpbjowIDZweDtmb250LXNpemU6MS4yZW07dGV4dC1hbGlnbjpjZW50ZXI7Y29sb3I6aW5oZXJpdDt9ZGl2LmRodG1seE1lbnVfbWF0ZXJpYWxfU3ViTGV2ZWxBcmVhX1BvbHlnb24gdGQuc3ViX2l0ZW1faWNvbiBkaXYuc3ViX2ljb257bWFyZ2luOjAgNnB4O3dpZHRoOjE4cHg7aGVpZ2h0OjMwcHg7bGluZS1oZWlnaHQ6MzBweDtiYWNrZ3JvdW5kLXBvc2l0aW9uOjAgNXB4O2JhY2tncm91bmQtcmVwZWF0Om5vLXJlcGVhdDtiYWNrZ3JvdW5kLWltYWdlOnVybCgiaW1ncy9kaHhtZW51X21hdGVyaWFsL2RoeG1lbnVfY2hyZC5wbmciKTt9ZGl2LmRodG1seE1lbnVfbWF0ZXJpYWxfU3ViTGV2ZWxBcmVhX1BvbHlnb24gdGQuc3ViX2l0ZW1faWNvbiBkaXYuc3ViX2ljb24uY2hieF8we2JhY2tncm91bmQtcG9zaXRpb246MCA1cHg7fWRpdi5kaHRtbHhNZW51X21hdGVyaWFsX1N1YkxldmVsQXJlYV9Qb2x5Z29uIHRkLnN1Yl9pdGVtX2ljb24gZGl2LnN1Yl9pY29uLmNoYnhfMXtiYWNrZ3JvdW5kLXBvc2l0aW9uOi0xOHB4IDVweDt9ZGl2LmRodG1seE1lbnVfbWF0ZXJpYWxfU3ViTGV2ZWxBcmVhX1BvbHlnb24gdGQuc3ViX2l0ZW1faWNvbiBkaXYuc3ViX2ljb24ucmRidF8we2JhY2tncm91bmQtcG9zaXRpb246LTcycHggNXB4O31kaXYuZGh0bWx4TWVudV9tYXRlcmlhbF9TdWJMZXZlbEFyZWFfUG9seWdvbiB0ZC5zdWJfaXRlbV9pY29uIGRpdi5zdWJfaWNvbi5yZGJ0XzF7YmFja2dyb3VuZC1wb3NpdGlvbjotOTBweCA1cHg7fWRpdi5kaHRtbHhNZW51X21hdGVyaWFsX1N1YkxldmVsQXJlYV9Qb2x5Z29uIHRkLnN1Yl9pdGVtX3RleHQgZGl2LnN1Yl9pdGVtX3RleHR7cG9zaXRpb246cmVsYXRpdmU7aGVpZ2h0OjMwcHg7bGluZS1oZWlnaHQ6MzBweDtwYWRkaW5nOjAgMjJweCAwIDFweDtvdmVyZmxvdzpoaWRkZW47fWRpdi5kaHRtbHhNZW51X21hdGVyaWFsX1N1YkxldmVsQXJlYV9Qb2x5Z29uIHRkLnN1Yl9pdGVtX2hre3BhZGRpbmc6MCAxMHB4IDAgOHB4O31kaXYuZGh0bWx4TWVudV9tYXRlcmlhbF9TdWJMZXZlbEFyZWFfUG9seWdvbiB0ZC5zdWJfaXRlbV9oayBkaXYuc3ViX2l0ZW1faGt7Y29sb3I6IzhkOGQ4ZDtmb250LXNpemU6MTJweDt0ZXh0LWFsaWduOnJpZ2h0O31kaXYuZGh0bWx4TWVudV9tYXRlcmlhbF9TdWJMZXZlbEFyZWFfUG9seWdvbiB0ZCBkaXYuY29tcGxleF9hcnJvd3tmbG9hdDpyaWdodDt3aWR0aDoxMHB4O21hcmdpbjowIDFweCAwIDExcHg7aGVpZ2h0OjMwcHg7bGluZS1oZWlnaHQ6MzBweDtiYWNrZ3JvdW5kLWltYWdlOnVybCgiaW1ncy9kaHhtZW51X21hdGVyaWFsL2RoeG1lbnVfc3ViYXIucG5nIik7YmFja2dyb3VuZC1yZXBlYXQ6bm8tcmVwZWF0O2JhY2tncm91bmQtcG9zaXRpb246MCAxMHB4O292ZXJmbG93OmhpZGRlbjtmb250LXNpemU6MXB4O31kaXYuZGh0bWx4TWVudV9tYXRlcmlhbF9TdWJMZXZlbEFyZWFfUG9seWdvbiB0ZCBkaXYuY29tcGxleF9hcnJvd19sb2FkaW5ne3dpZHRoOjE2cHg7aGVpZ2h0OjMwcHg7bGluZS1oZWlnaHQ6MzBweDtiYWNrZ3JvdW5kLXBvc2l0aW9uOmNlbnRlciBjZW50ZXI7YmFja2dyb3VuZC1yZXBlYXQ6bm8tcmVwZWF0O2JhY2tncm91bmQtaW1hZ2U6dXJsKCJpbWdzL2RoeG1lbnVfbWF0ZXJpYWwvZGh4bWVudV9sb2FkZXIuZ2lmIik7ZmxvYXQ6cmlnaHQ7fWRpdi5kaHRtbHhNZW51X21hdGVyaWFsX1N1YkxldmVsQXJlYV9Qb2x5Z29uIHRyLnN1Yl9pdGVtX3NlbGVjdGVkIHRke2JhY2tncm91bmQtY29sb3I6I2ViZWJlYjt9ZGl2LmRodG1seE1lbnVfbWF0ZXJpYWxfU3ViTGV2ZWxBcmVhX1BvbHlnb24gdHIuc3ViX2l0ZW1fc2VsZWN0ZWQgdGQgZGl2LmNvbXBsZXhfYXJyb3d7YmFja2dyb3VuZC1wb3NpdGlvbjotMTBweCAxMHB4O31kaXYuZGh0bWx4TWVudV9tYXRlcmlhbF9TdWJMZXZlbEFyZWFfUG9seWdvbiB0ci5zdWJfaXRlbV9kaXMgdGQuc3ViX2l0ZW1faGsgZGl2LnN1Yl9pdGVtX2hre2NvbG9yOiNjMGMwYzA7fWRpdi5kaHRtbHhNZW51X21hdGVyaWFsX1N1YkxldmVsQXJlYV9Qb2x5Z29uIHRyLnN1Yl9pdGVtX2RpcyB0ZCBkaXYuc3ViX2l0ZW1fdGV4dCxkaXYuZGh0bWx4TWVudV9tYXRlcmlhbF9TdWJMZXZlbEFyZWFfUG9seWdvbiB0ci5zdWJfaXRlbV9kaXMgdGQgdGQuc3ViX2l0ZW1faWNvbiBpe2NvbG9yOiNhNmE2YTY7fWRpdi5kaHRtbHhNZW51X21hdGVyaWFsX1N1YkxldmVsQXJlYV9Qb2x5Z29uIHRyLnN1Yl9pdGVtX2RpcyB0ZCBkaXYuY29tcGxleF9hcnJvd3tiYWNrZ3JvdW5kLXBvc2l0aW9uOi0yMHB4IDEwcHg7fWRpdi5kaHRtbHhNZW51X21hdGVyaWFsX1N1YkxldmVsQXJlYV9Qb2x5Z29uIHRyLnN1Yl9pdGVtX2RpcyB0ZCBkaXYuc3ViX2ljb24uY2hieF8we2JhY2tncm91bmQtcG9zaXRpb246LTM2cHggNXB4O31kaXYuZGh0bWx4TWVudV9tYXRlcmlhbF9TdWJMZXZlbEFyZWFfUG9seWdvbiB0ci5zdWJfaXRlbV9kaXMgdGQgZGl2LnN1Yl9pY29uLmNoYnhfMXtiYWNrZ3JvdW5kLXBvc2l0aW9uOi01NHB4IDVweDt9ZGl2LmRodG1seE1lbnVfbWF0ZXJpYWxfU3ViTGV2ZWxBcmVhX1BvbHlnb24gdHIuc3ViX2l0ZW1fZGlzIHRkIGRpdi5zdWJfaWNvbi5yZGJ0XzB7YmFja2dyb3VuZC1wb3NpdGlvbjotMTA4cHggNXB4O31kaXYuZGh0bWx4TWVudV9tYXRlcmlhbF9TdWJMZXZlbEFyZWFfUG9seWdvbiB0ci5zdWJfaXRlbV9kaXMgdGQgZGl2LnN1Yl9pY29uLnJkYnRfMXtiYWNrZ3JvdW5kLXBvc2l0aW9uOi0xMjZweCA1cHg7fWRpdi5kaHRtbHhNZW51X21hdGVyaWFsX1N1YkxldmVsQXJlYV9Qb2x5Z29uIHRyLnN1Yl9pdGVtX2RpcyB0ZCBpe2NvbG9yOiNhNmE2YTY7fWRpdi5kaHRtbHhNZW51X21hdGVyaWFsX1N1YkxldmVsQXJlYV9Qb2x5Z29uIHRyLnN1Yl9zZXAgdGR7cGFkZGluZzo1cHggM3B4O31kaXYuZGh0bWx4TWVudV9tYXRlcmlhbF9TdWJMZXZlbEFyZWFfUG9seWdvbiB0ci5zdWJfc2VwIHRkIGRpdi5zdWJfc2Vwe3Bvc2l0aW9uOnJlbGF0aXZlO2ZvbnQtc2l6ZToxcHg7bGluZS1oZWlnaHQ6MXB4O2hlaWdodDowO3dpZHRoOjEwMCU7Ym9yZGVyLXRvcDoxcHggc29saWQgI2RmZGZkZjt9ZGl2LmRodG1seE1lbnVfbWF0ZXJpYWxfU3ViTGV2ZWxBcmVhX1BvbHlnb24gZGl2LmRodG1seE1lbnVfbWF0ZXJpYWxfU3ViTGV2ZWxBcmVhX0Fycm93VXAsZGl2LmRodG1seE1lbnVfbWF0ZXJpYWxfU3ViTGV2ZWxBcmVhX1BvbHlnb24gZGl2LmRodG1seE1lbnVfbWF0ZXJpYWxfU3ViTGV2ZWxBcmVhX0Fycm93VXBfT3ZlcixkaXYuZGh0bWx4TWVudV9tYXRlcmlhbF9TdWJMZXZlbEFyZWFfUG9seWdvbiBkaXYuZGh0bWx4TWVudV9tYXRlcmlhbF9TdWJMZXZlbEFyZWFfQXJyb3dVcF9EaXNhYmxlZHtwb3NpdGlvbjpyZWxhdGl2ZTtmb250LXNpemU6MXB4O2JvcmRlci1ib3R0b206MXB4IHNvbGlkICNkZmRmZGY7YmFja2dyb3VuZC1pbWFnZTp1cmwoImltZ3MvZGh4bWVudV9tYXRlcmlhbC9kaHhtZW51X2Fycm93X3VwLnBuZyIpO2JhY2tncm91bmQtcmVwZWF0Om5vLXJlcGVhdDtiYWNrZ3JvdW5kLXBvc2l0aW9uOmNlbnRlciAycHg7cGFkZGluZzo4cHggMDttYXJnaW4tYm90dG9tOjNweDt9ZGl2LmRodG1seE1lbnVfbWF0ZXJpYWxfU3ViTGV2ZWxBcmVhX1BvbHlnb24gZGl2LmRodG1seE1lbnVfbWF0ZXJpYWxfU3ViTGV2ZWxBcmVhX0Fycm93VXBfRGlzYWJsZWR7YmFja2dyb3VuZC1pbWFnZTp1cmwoImltZ3MvZGh4bWVudV9tYXRlcmlhbC9kaHhtZW51X2Fycm93X3VwX2Rpcy5wbmciKTt9ZGl2LmRodG1seE1lbnVfbWF0ZXJpYWxfU3ViTGV2ZWxBcmVhX1BvbHlnb24gZGl2LmRodG1seE1lbnVfbWF0ZXJpYWxfU3ViTGV2ZWxBcmVhX0Fycm93RG93bixkaXYuZGh0bWx4TWVudV9tYXRlcmlhbF9TdWJMZXZlbEFyZWFfUG9seWdvbiBkaXYuZGh0bWx4TWVudV9tYXRlcmlhbF9TdWJMZXZlbEFyZWFfQXJyb3dEb3duX092ZXIsZGl2LmRodG1seE1lbnVfbWF0ZXJpYWxfU3ViTGV2ZWxBcmVhX1BvbHlnb24gZGl2LmRodG1seE1lbnVfbWF0ZXJpYWxfU3ViTGV2ZWxBcmVhX0Fycm93RG93bl9EaXNhYmxlZHtwb3NpdGlvbjpyZWxhdGl2ZTtmb250LXNpemU6MXB4O2JvcmRlci10b3A6MXB4IHNvbGlkICNkZmRmZGY7YmFja2dyb3VuZC1pbWFnZTp1cmwoImltZ3MvZGh4bWVudV9tYXRlcmlhbC9kaHhtZW51X2Fycm93X2Rvd24ucG5nIik7YmFja2dyb3VuZC1yZXBlYXQ6bm8tcmVwZWF0O2JhY2tncm91bmQtcG9zaXRpb246Y2VudGVyIDZweDtwYWRkaW5nOjhweCAwO21hcmdpbi10b3A6M3B4O31kaXYuZGh0bWx4TWVudV9tYXRlcmlhbF9TdWJMZXZlbEFyZWFfUG9seWdvbiBkaXYuZGh0bWx4TWVudV9tYXRlcmlhbF9TdWJMZXZlbEFyZWFfQXJyb3dEb3duX0Rpc2FibGVke2JhY2tncm91bmQtaW1hZ2U6dXJsKCJpbWdzL2RoeG1lbnVfbWF0ZXJpYWwvZGh4bWVudV9hcnJvd19kb3duX2Rpcy5wbmciKTt9aWZyYW1lLmRodG1seE1lbnVfSUU2Q292ZXJGaXhfbWF0ZXJpYWx7cG9zaXRpb246YWJzb2x1dGU7Ym9yZGVyOm5vbmU7YmFja2dyb3VuZDojMDAwO2ZpbHRlcjpwcm9naWQ6RFhJbWFnZVRyYW5zZm9ybS5NaWNyb3NvZnQuQWxwaGEob3BhY2l0eT0xMDApO30uZGh0bWx4TWVudV9tYXRlcmlhbF9NaWRkbGUuZGlyX2xlZnQgZGl2LmFsaWduX2xlZnR7ZmxvYXQ6bGVmdDt9LmRodG1seE1lbnVfbWF0ZXJpYWxfTWlkZGxlLmRpcl9sZWZ0IGRpdi5hbGlnbl9yaWdodHtmbG9hdDpyaWdodDt9LmRoeG1lbnVfc2tpbl9kZXRlY3R7cG9zaXRpb246YWJzb2x1dGU7bGVmdDowO3RvcDotMTAwcHg7bWFyZ2luOjA7cGFkZGluZzowO2JvcmRlcjowIHNvbGlkIHdoaXRlO3dpZHRoOjQwcHg7aGVpZ2h0OjEwcHg7b3ZlcmZsb3c6aGlkZGVuO31Aa2V5ZnJhbWVzIGRoeF9sb2FkZXJfcm90YXRlezEwMCV7dHJhbnNmb3JtOnJvdGF0ZSgzNjBkZWcpO319QGtleWZyYW1lcyBkaHhfbG9hZGVyX2Rhc2h7MCV7c3Ryb2tlLWRhc2hhcnJheToxLDIwMDtzdHJva2UtZGFzaG9mZnNldDowO301MCV7c3Ryb2tlLWRhc2hhcnJheTo4OSwyMDA7c3Ryb2tlLWRhc2hvZmZzZXQ6LTM1cHg7fTEwMCV7c3Ryb2tlLWRhc2hhcnJheTo4OSwyMDA7c3Ryb2tlLWRhc2hvZmZzZXQ6LTEyNHB4O319LmRlZmF1bHRUcmVlVGFibGV7bWFyZ2luOjA7cGFkZGluZzowO2JvcmRlcjowO30uY29udGFpbmVyVGFibGVTdHlsZXtvdmVyZmxvdzphdXRvOy13ZWJraXQtb3ZlcmZsb3ctc2Nyb2xsaW5nOnRvdWNoO3Bvc2l0aW9uOnJlbGF0aXZlO3RvcDowO2ZvbnQtc2l6ZToxMnB4Oy1raHRtbC11c2VyLXNlbGVjdDpub25lO30uY29udGFpbmVyVGFibGVTdHlsZVJUTCBzcGFue2RpcmVjdGlvbjpydGw7dW5pY29kZS1iaWRpOmJpZGktb3ZlcnJpZGU7fS5jb250YWluZXJUYWJsZVN0eWxlUlRMe2RpcmVjdGlvbjpydGw7b3ZlcmZsb3c6YXV0bztwb3NpdGlvbjpyZWxhdGl2ZTt0b3A6MDtmb250LXNpemU6MTJweDt9LnN0YW5kYXJ0VHJlZVJvd3tmb250LWZhbWlseTpSb2JvdG8sQXJpYWwsSGVsdmV0aWNhO2ZvbnQtc2l6ZTo7LW1vei11c2VyLXNlbGVjdDpub25lO2xpbmUtaGVpZ2h0OjI0cHg7fS5zZWxlY3RlZFRyZWVSb3d7Zm9udC1mYW1pbHk6Um9ib3RvLEFyaWFsLEhlbHZldGljYTtmb250LXNpemU6Oy1tb3otdXNlci1zZWxlY3Q6bm9uZTtiYWNrZ3JvdW5kLWNvbG9yOiNlZWU7Y29sb3I6IzM5Yzt9LmRoeHRyZWVfbWF0ZXJpYWwgLnNlbGVjdGVkVHJlZVJvd0Z1bGwgLmRoeFRleHRDZWxse2JhY2tncm91bmQtY29sb3I6I2VlZTtjb2xvcjojMzljO30uZHJhZ0FuZERyb3BSb3d7Y29sb3I6IzM5Yzt9LnN0YW5kYXJ0VHJlZVJvd19sb3J7dGV4dC1kZWNvcmF0aW9uOnVuZGVybGluZTtiYWNrZ3JvdW5kLWNvbG9yOjtmb250LWZhbWlseTpSb2JvdG8sQXJpYWwsSGVsdmV0aWNhO2ZvbnQtc2l6ZTo7LW1vei11c2VyLXNlbGVjdDpub25lO30uc3RhbmRhcnRUcmVlSW1hZ2V7aGVpZ2h0OjI0cHg7b3ZlcmZsb3c6aGlkZGVuO2JvcmRlcjowO3BhZGRpbmc6MDttYXJnaW46MDtmb250LXNpemU6MXB4O30uc3RhbmRhcnRUcmVlSW1hZ2UgaW1ne3dpZHRoOjE4cHg7aGVpZ2h0OjI0cHg7YmFja2dyb3VuZC1wb3NpdGlvbjpjZW50ZXIgY2VudGVyO2JhY2tncm91bmQtcmVwZWF0Om5vLXJlcGVhdDtib3JkZXI6MDtwYWRkaW5nOjA7bWFyZ2luOjA7Zm9udC1zaXplOjFweDstd2Via2l0LXVzZXItc2VsZWN0Om5vbmU7LWtodG1sLXVzZXItc2VsZWN0Om5vbmU7LW1vei11c2VyLXNlbGVjdDpub25lOy1tcy11c2VyLXNlbGVjdDpub25lOy1vLXVzZXItc2VsZWN0Om5vbmU7dXNlci1zZWxlY3Q6bm9uZTt9LmhpZGRlblJvd3t3aWR0aDoxcHg7b3ZlcmZsb3c6aGlkZGVuO30uZHJhZ1NwYW5EaXYsLmRyYWdTcGFuRGl2IHRke2ZvbnQtZmFtaWx5OlJvYm90byxBcmlhbCxIZWx2ZXRpY2E7Zm9udC1zaXplOjtsaW5lLWhlaWdodDo7dmVydGljYWwtYWxpZ246Y2VudGVyO2JhY2tncm91bmQtY29sb3I6d2hpdGU7ei1pbmRleDo5OTk7fS5kcmFnU3BhbkRpdiB0ZHtwYWRkaW5nOjVweDt9LmFfZGh4X2hpZGRlbl9pbnB1dHtwb3NpdGlvbjphYnNvbHV0ZTt0b3A6LTFweDtsZWZ0Oi0xcHg7d2lkdGg6MXB4O2hlaWdodDoxcHg7Ym9yZGVyOm5vbmU7YmFja2dyb3VuZDpub25lO30uYV9kaHhfaGlkZGVuX2lucHV0e3Bvc2l0aW9uOmFic29sdXRlO3RvcDotMXB4O2xlZnQ6LTFweDt3aWR0aDoxcHg7aGVpZ2h0OjFweDtib3JkZXI6bm9uZTtiYWNrZ3JvdW5kOm5vbmU7fS5zZWxlY3Rpb25CYXJ7dG9wOjA7YmFja2dyb3VuZC1jb2xvcjpibGFjaztwb3NpdGlvbjphYnNvbHV0ZTtvdmVyZmxvdzpoaWRkZW47aGVpZ2h0OjJweDt6LWluZGV4OjExO30uaW50cmVlZWRpdFJvd3tmb250LXNpemU6OHB0O2hlaWdodDoxNnB4O2JvcmRlcjoxcHggc29saWQgc2lsdmVyO3BhZGRpbmc6MDttYXJnaW46MDttYXJnaW4tbGVmdDo0cHg7LW1vei11c2VyLXNlbGVjdDp0ZXh0Oy1raHRtbC11c2VyLXNlbGVjdDp0ZXh0O30uZGh4X3RyZWVfdGV4dFNpZ257Zm9udC1zaXplOjhwdDtmb250LWZhbWlseTptb25vc3BhY2U7d2lkdGg6MjFweDtjb2xvcjo7cGFkZGluZzowO21hcmdpbjowO2N1cnNvcjpwb2ludGVyO3RleHQtYWxpZ246Y2VudGVyO30uZGh4X3RyZWVfb3BhY2l0eXtvcGFjaXR5OjA7ZmlsdGVyOnByb2dpZDpEWEltYWdlVHJhbnNmb3JtLk1pY3Jvc29mdC5BbHBoYShvcGFjaXR5PTApOy13ZWJraXQtdXNlci1zZWxlY3Q6bm9uZTsta2h0bWwtdXNlci1zZWxlY3Q6bm9uZTstbW96LXVzZXItc2VsZWN0Om5vbmU7LW1zLXVzZXItc2VsZWN0Om5vbmU7LW8tdXNlci1zZWxlY3Q6bm9uZTt1c2VyLXNlbGVjdDpub25lO30uZGh4X2JnX2ltZ19maXh7d2lkdGg6MThweDtoZWlnaHQ6MjRweDtiYWNrZ3JvdW5kLXJlcGVhdDpuby1yZXBlYXQ7YmFja2dyb3VuZC1wb3NpdGlvbjpjZW50ZXI7YmFja2dyb3VuZC1wb3NpdGlvbi14OmNlbnRlcjtiYWNrZ3JvdW5kLXBvc2l0aW9uLXk6Y2VudGVyO30uZGh4dHJlZV9za2luX2RldGVjdHtwb3NpdGlvbjphYnNvbHV0ZTtsZWZ0OjA7dG9wOi0xMDBweDttYXJnaW46MDtwYWRkaW5nOjA7Ym9yZGVyOjAgc29saWQgd2hpdGU7d2lkdGg6NDBweDtoZWlnaHQ6MTBweDtvdmVyZmxvdzpoaWRkZW47fScsZG9jdW1lbnQuaGVhZC5hcHBlbmRDaGlsZChzdHlsZSk7dmFyIGxheWFhaXJfZGVidWdfdmlldz17fTt3aW5kb3cubGF5YWFpcl9kZWJ1Z192aWV3PWxheWFhaXJfZGVidWdfdmlldyxsYXlhYWlyX2RlYnVnX3ZpZXcuaW5pdExheWFBaXJEZWJ1Z1ZpZXc9ZnVuY3Rpb24oZSl7ZS5zdHlsZS5ib3JkZXI9IjFweCBzb2xpZCBibGFjayI7dmFyIHQ9TWF0aC5taW4oMjUwLC4zKmUub2Zmc2V0V2lkdGgpLGk9JzxkaXYgY2xhc3M9InRvcC1iYW5uZXIiPlxuPC9kaXY+XG48ZGl2PlxuPGRpdiBzdHlsZT0ib3ZlcmZsb3c6aGlkZGVuOyBib3JkZXItYm90dG9tOjFweCBzb2xpZCAjNDQ0OyBwYWRkaW5nOjVweCI+XG48ZGl2IHN0eWxlPSJmbG9hdDpsZWZ0Ij5cbjxidXR0b24gaWQ9Im5vZGVfZnVuY3Rpb25hbGl0eV9jb250cm9sIj7lrqHmn6XlhYPntKA8L2J1dHRvbj5cbjxidXR0b24gaWQ9InJlZnJlc2hfY29udHJvbCI+5Yi35pawPC9idXR0b24+XG48L2Rpdj5cbjxkaXYgc3R5bGU9ImZsb2F0OnJpZ2h0Ij5cbjxpbnB1dCB0eXBlPSJjaGVja2JveCIgaWQ9InNob3dfY3VycmVudF9jYWNoZV9jb250cm9sIj7mmL7npLpjYWNoZemHjee7mDwvaW5wdXQ+XG48aW5wdXQgdHlwZT0iY2hlY2tib3giIGlkPSJzaG93X2FsbF9jYWNoZV9jb250cm9sIj7mmL7npLpjYWNoZeWMuuWfnzwvaW5wdXQ+XG48aW5wdXQgdHlwZT0iY2hlY2tib3giIGlkPSJzaG93X2F0bGFzX2NvbnRyb2wiPuaYvuekuuaWh+Wtl+WbvumbhjwvaW5wdXQ+XG48L2Rpdj5cbjwvZGl2PlxuPGRpdiBjbGFzcz0iaGdyb3VwIj5cbjxkaXYgc3R5bGU9ImZsb2F0OmxlZnQ7d2lkdGg6Jyt0KydweDsgYm9yZGVyLXJpZ2h0OjFweCBzb2xpZCBibGFjayIgaWQ9InRyZWVfY29udGFpbmVyIj48L2Rpdj5cbjxkaXYgc3R5bGU9Im92ZXJmbG93OmhpZGRlbiI+XG48ZGl2IGlkPSJjb250ZW50X3Rvb2xiYXIiIHN0eWxlPSJ3aWR0aDoxMDAlO21hcmdpbjoxMHB4Ij48aW5wdXQgdHlwZT0iY2hlY2tib3giIGlkPSJ2aXNpYmlsaXR5X2NvbnRyb2wiPuWPr+ingTwvaW5wdXQ+XG48aW5wdXQgdHlwZT0iY2hlY2tib3giIGlkPSJzaG93X2JvcmRlcl9jb250cm9sIj7mmL7npLrovrnmoYY8L2lucHV0PlxuPGJ1dHRvbiBpZD0ibG9nX2luZm9fY29udHJvbCI+5omT5Y2w5Yiw5o6n5Yi25Y+wPC9idXR0b24+XG48YnV0dG9uIGlkPSJlbmFibGVkX25vZGVfY2hhaW5fY29udHJvbCI+ZW5hYmxl6ZO+PC9idXR0b24+XG48YnV0dG9uIGlkPSJzaXplX2NoYWluX2NvbnRyb2wiPnNpemXpk748L2J1dHRvbj5cbjwvZGl2PjxkaXYgc3R5bGU9Im92ZXJmbG93OmF1dG8iPjx0YWJsZSBpZD0iY29udGVudF90YWJsZSIgc3R5bGU9ImJvcmRlcjoxcHggc29saWQgI2NjY2NjYztib3JkZXItY29sbGFwc2U6Y29sbGFwc2UiPjwvdGFibGU+XG48L2Rpdj48L2Rpdj5cbjwvZGl2PlxuPC9kaXY+JztlLmlubmVySFRNTD1pLHRoaXMuY29udGFpbmVyPWUsdGhpcy50cmVlPW5ldyBkaHRtbFhUcmVlT2JqZWN0KHRyZWVfY29udGFpbmVyLCIxMDAlIiwiMTAwJSIsMCksbm9kZV9mdW5jdGlvbmFsaXR5X2NvbnRyb2wub25jbGljaz1mdW5jdGlvbihlKXtlLnN0b3BQcm9wYWdhdGlvbigpLGxheWFhaXJfZGVidWdfdmlldy5vbl9pbnNwZWN0X2VsZW1lbnRfY2FsbGJhY2soKSxub2RlX2Z1bmN0aW9uYWxpdHlfY29udHJvbC5zdHlsZS5iYWNrZ3JvdW5kQ29sb3I9IiNGRkYiLG5vZGVfZnVuY3Rpb25hbGl0eV9jb250cm9sLnN0eWxlLmNvbG9yPSJyZ2IoMTA3LCAxNjMsIDI1NSkifX0sbGF5YWFpcl9kZWJ1Z192aWV3LnNldFRyZWU9ZnVuY3Rpb24oZSl7Zm9yKHZhciB0PXRoaXMudHJlZS5nZXRBbGxJdGVtc1dpdGhLaWRzKCkuc3BsaXQoIiwiKSxpPVtdLG49MDtuPHQubGVuZ3RoO24rKyl7dmFyIG89dFtuXSxyPXRoaXMudHJlZS5nZXRPcGVuU3RhdGUobyk7MT09ciYmaS5wdXNoKG8pfXRoaXMudHJlZS5kZWxldGVDaGlsZEl0ZW1zKDApLHRoaXMudHJlZS5wYXJzZShlLCJqc29uIik7Zm9yKHZhciBuPTA7bjxpLmxlbmd0aDtuKyspdGhpcy50cmVlLm9wZW5JdGVtKGlbbl0pfSxsYXlhYWlyX2RlYnVnX3ZpZXcucmVzaXplPWZ1bmN0aW9uKGUsdCl7dGhpcy5jb250YWluZXIuc3R5bGUud2lkdGg9ZSsicHgiLHRoaXMuY29udGFpbmVyLnN0eWxlLmhlaWdodD10KyJweCI7dmFyIGk9dGhpcy5jb250YWluZXIub2Zmc2V0SGVpZ2h0LXRyZWVfY29udGFpbmVyLm9mZnNldFRvcDt0cmVlX2NvbnRhaW5lci5zdHlsZS5oZWlnaHQ9aSsicHgiLGNvbnRlbnRfdG9vbGJhci5zdHlsZS53aWR0aD1lLXRyZWVfY29udGFpbmVyLm9mZnNldFdpZHRoKyJweCIsY29udGVudF90YWJsZS5wYXJlbnRFbGVtZW50LnN0eWxlLmhlaWdodD1pLWNvbnRlbnRfdG9vbGJhci5vZmZzZXRIZWlnaHQtMjErInB4Iixjb250ZW50X3RhYmxlLnN0eWxlLndpZHRoPWUtdHJlZV9jb250YWluZXIub2Zmc2V0V2lkdGgtMTYrInB4In0sbGF5YWFpcl9kZWJ1Z192aWV3LmJvdW5jZVVwSW5zcGVjdEJ1dHRvbj1mdW5jdGlvbigpe25vZGVfZnVuY3Rpb25hbGl0eV9jb250cm9sLnN0eWxlLmJhY2tncm91bmRDb2xvcj0iYnV0dG9uZmFjZSIsbm9kZV9mdW5jdGlvbmFsaXR5X2NvbnRyb2wuc3R5bGUuY29sb3I9ImJsYWNrIn0sbGF5YWFpcl9kZWJ1Z192aWV3LnNldFZhbHVlSW5wdXRIYW5kbGVyPWZ1bmN0aW9uKGUpe3RoaXMudmFsdWVfaW5wdXRfY2FsbGJhY2s9ZX0sbGF5YWFpcl9kZWJ1Z192aWV3LnNldFZhbHVlQ2hhbmdlSGFuZGxlcj1mdW5jdGlvbihlKXt0aGlzLnZhbHVlX2NoYW5nZV9jYWxsYmFjaz1lfSxsYXlhYWlyX2RlYnVnX3ZpZXcuYWRkQ29udGVudD1mdW5jdGlvbihlKXt2YXIgdD1kb2N1bWVudC5jcmVhdGVFbGVtZW50KCJ0ciIpO3QuaW5uZXJIVE1MPSc8dGQgc3R5bGU9IndpZHRoOjEwMHB4O2ZvbnQtc2l6ZToxM3B4O2JvcmRlcjoxcHggc29saWQgI0NDQztwYWRkaW5nLWxlZnQ6MTBweCI+JytlLmtleSsnPC90ZD5cbjx0ZCBzdHlsZT0id2lkdGg6MjAwcHg7Ym9yZGVyOjFweCBzb2xpZCAjQ0NDOyI+PGlucHV0IHN0eWxlPSJib3JkZXI6bm9uZTt3aWR0aDoxMDAlO2hlaWdodDoyNXB4O3BhZGRpbmctbGVmdDoxMHB4OyIgdmFsdWU9JytlLnZhbHVlKyI+PC90ZD4iLGNvbnRlbnRfdGFibGUuYXBwZW5kQ2hpbGQodCk7dmFyIGk9dC5sYXN0RWxlbWVudENoaWxkLmxhc3RFbGVtZW50Q2hpbGQ7aS5kYXRhPWUsaS5vbmlucHV0PWZ1bmN0aW9uKGUpe3RoaXMudmFsdWVfaW5wdXRfY2FsbGJhY2smJnRoaXMudmFsdWVfaW5wdXRfY2FsbGJhY2soZS50YXJnZXQuZGF0YSxlLnRhcmdldC52YWx1ZSl9LmJpbmQodGhpcyksaS5vbmNoYW5nZT1mdW5jdGlvbihlKXt0aGlzLnZhbHVlX2NoYW5nZV9jYWxsYmFjayYmdGhpcy52YWx1ZV9jaGFuZ2VfY2FsbGJhY2soZS50YXJnZXQuZGF0YSxlLnRhcmdldC52YWx1ZSl9LmJpbmQodGhpcyl9LGxheWFhaXJfZGVidWdfdmlldy5zZXRDb250ZW50cz1mdW5jdGlvbihlKXtjb250ZW50X3RhYmxlLmlubmVySFRNTD0iIjtmb3IodmFyIHQ9MDt0PGUubGVuZ3RoO3QrKyl7dmFyIGk9ZVt0XTt0aGlzLmFkZENvbnRlbnQoaSl9fSxsYXlhYWlyX2RlYnVnX3ZpZXcuY2hhbmdlVmFsdWVBdD1mdW5jdGlvbihlLHQpe2NvbnRlbnRfdGFibGUuY2hpbGRyZW5bZV0ubGFzdEVsZW1lbnRDaGlsZC5maXJzdEVsZW1lbnRDaGlsZC52YWx1ZT10fSxsYXlhYWlyX2RlYnVnX3ZpZXcuY2hhbmdlVmFsdWVCeUxhYmVsPWZ1bmN0aW9uKGUsdCl7Zm9yKHZhciBpPWNvbnRlbnRfdGFibGUuY2hpbGRyZW4ubGVuZ3RoLTE7aT49MDtpLS0paWYoY29udGVudF90YWJsZS5jaGlsZHJlbltpXS5maXJzdEVsZW1lbnRDaGlsZC5pbm5lclRleHQ9PWUpe2NvbnRlbnRfdGFibGUuY2hpbGRyZW5baV0ubGFzdEVsZW1lbnRDaGlsZC5maXJzdEVsZW1lbnRDaGlsZC52YWx1ZT10O2JyZWFrfX0sbGF5YWFpcl9kZWJ1Z192aWV3LnNldFZpc2liaWxpdHk9ZnVuY3Rpb24oZSl7dmlzaWJpbGl0eV9jb250cm9sLmNoZWNrZWQ9ISFlfSxsYXlhYWlyX2RlYnVnX3ZpZXcuc2V0U2hvd0RlYnVnQm9yZGVyPWZ1bmN0aW9uKGUpe3Nob3dfYm9yZGVyX2NvbnRyb2wuY2hlY2tlZD0hIWV9LGxheWFhaXJfZGVidWdfdmlldy5nZXRWaXNpYmlsaXR5PWZ1bmN0aW9uKCl7cmV0dXJuIHZpc2liaWxpdHlfY29udHJvbC5jaGVja2VkfSxsYXlhYWlyX2RlYnVnX3ZpZXcuZ2V0U2hvd0RlYnVnQm9yZGVyPWZ1bmN0aW9uKCl7cmV0dXJuIHNob3dfYm9yZGVyX2NvbnRyb2wuY2hlY2tlZH0sbGF5YWFpcl9kZWJ1Z192aWV3LmdldFNob3dDdXJyZW50Q2FjaGU9ZnVuY3Rpb24oKXtyZXR1cm4gc2hvd19jdXJyZW50X2NhY2hlX2NvbnRyb2wuY2hlY2tlZH0sbGF5YWFpcl9kZWJ1Z192aWV3LmdldFNob3dBbGxDYWNoZT1mdW5jdGlvbigpe3JldHVybiBzaG93X2FsbF9jYWNoZV9jb250cm9sLmNoZWNrZWR9LGxheWFhaXJfZGVidWdfdmlldy5nZXRTaG93QXRsYXM9ZnVuY3Rpb24oKXtyZXR1cm4gc2hvd19hdGxhc19jb250cm9sLmNoZWNrZWR9LGxheWFhaXJfZGVidWdfdmlldy5vbkluc3BlY3RFbGVtZW50PWZ1bmN0aW9uKGUpe3RoaXMub25faW5zcGVjdF9lbGVtZW50X2NhbGxiYWNrPWV9LGxheWFhaXJfZGVidWdfdmlldy5vbkxvZ0luZm89ZnVuY3Rpb24oZSl7bG9nX2luZm9fY29udHJvbC5vbmNsaWNrPWV9LGxheWFhaXJfZGVidWdfdmlldy5vblJlZnJlc2g9ZnVuY3Rpb24oZSl7cmVmcmVzaF9jb250cm9sLm9uY2xpY2s9ZX0sbGF5YWFpcl9kZWJ1Z192aWV3Lm9uUHJpbnRFbmFibGVkTm9kZUNoYWluPWZ1bmN0aW9uKGUpe2VuYWJsZWRfbm9kZV9jaGFpbl9jb250cm9sLm9uY2xpY2s9ZX0sbGF5YWFpcl9kZWJ1Z192aWV3Lm9uUHJpbnRTaXplQ2hhaW49ZnVuY3Rpb24oZSl7c2l6ZV9jaGFpbl9jb250cm9sLm9uY2xpY2s9ZX0sbGF5YWFpcl9kZWJ1Z192aWV3Lm9uVG9nZ2xlVmlzaWJpbGl0eT1mdW5jdGlvbihlKXt2aXNpYmlsaXR5X2NvbnRyb2wub25jaGFuZ2U9ZX0sbGF5YWFpcl9kZWJ1Z192aWV3Lm9uVG9nZ2xlRGVidWdCb3JkZXI9ZnVuY3Rpb24oZSl7c2hvd19ib3JkZXJfY29udHJvbC5vbmNoYW5nZT1lfSxsYXlhYWlyX2RlYnVnX3ZpZXcub25Ub2dnbGVTaG93Q3VycmVudENhY2hlPWZ1bmN0aW9uKGUpe3Nob3dfY3VycmVudF9jYWNoZV9jb250cm9sLm9uY2hhbmdlPWV9LGxheWFhaXJfZGVidWdfdmlldy5vblRvZ2dsZVNob3dBbGxDYWNoZT1mdW5jdGlvbihlKXtzaG93X2FsbF9jYWNoZV9jb250cm9sLm9uY2hhbmdlPWV9LGxheWFhaXJfZGVidWdfdmlldy5vblRvZ2dsZVNob3dBdGxhcz1mdW5jdGlvbihlKXtzaG93X2F0bGFzX2NvbnRyb2wub25jaGFuZ2U9ZX07";return a}(),Ea=function(){function a(){this.useDic={};this.shapeDic={};this.shapeLineDic={};this._id=0;this._checkKey=!1;this._freeIdArray=[];r.isWebGL&&Ac.regCacheByFunction(U.bind(this.startDispose,this),U.bind(this.getCacheList,this))}n(a,"laya.utils.VectorGraphManager");var c=a.prototype;c.getId=function(){return this._id++};c.addShape=function(b,d){this.shapeDic[b]=d;this.useDic[b]||(this.useDic[b]=!0)};c.addLine=function(b,d){this.shapeLineDic[b]=d;this.shapeLineDic[b]||(this.shapeLineDic[b]=!0)};c.getShape=function(b){this._checkKey&&null!=this.useDic[b]&&(this.useDic[b]=!0)};c.deleteShape=function(b){this.shapeDic[b]&&(this.shapeDic[b]=null,delete this.shapeDic[b]);this.shapeLineDic[b]&&(this.shapeLineDic[b]=null,delete this.shapeLineDic[b]);null!=this.useDic[b]&&delete this.useDic[b]};c.getCacheList=function(){var b,d=[];for(b in this.shapeDic)d.push(this.shapeDic[b]);for(b in this.shapeLineDic)d.push(this.shapeLineDic[b]);return d};c.startDispose=function(b){for(var d in this.useDic)this.useDic[d]=!1;this._checkKey=!0};c.endDispose=function(){if(this._checkKey){for(var b in this.useDic)this.useDic[b]||this.deleteShape(b);this._checkKey=!1}};a.getInstance=function(){return a.instance=a.instance||new a};a.instance=null;return a}();(function(){function a(){}n(a,"laya.events.Keyboard");a.NUMBER_0=48;a.NUMBER_1=49;a.NUMBER_2=50;a.NUMBER_3=51;a.NUMBER_4=52;a.NUMBER_5=53;a.NUMBER_6=54;a.NUMBER_7=55;a.NUMBER_8=56;a.NUMBER_9=57;a.A=65;a.B=66;a.C=67;a.D=68;a.E=69;a.F=70;a.G=71;a.H=72;a.I=73;a.J=74;a.K=75;a.L=76;a.M=77;a.N=78;a.O=79;a.P=80;a.Q=81;a.R=82;a.S=83;a.T=84;a.U=85;a.V=86;a.W=87;a.X=88;a.Y=89;a.Z=90;a.F1=112;a.F2=113;a.F3=114;a.F4=115;a.F5=116;a.F6=117;a.F7=118;a.F8=119;a.F9=120;a.F10=121;a.F11=122;a.F12=123;a.F13=124;a.F14=125;a.F15=126;a.NUMPAD=21;a.NUMPAD_0=96;a.NUMPAD_1=97;a.NUMPAD_2=98;a.NUMPAD_3=99;a.NUMPAD_4=100;a.NUMPAD_5=101;a.NUMPAD_6=102;a.NUMPAD_7=103;a.NUMPAD_8=104;a.NUMPAD_9=105;a.NUMPAD_ADD=107;a.NUMPAD_DECIMAL=110;a.NUMPAD_DIVIDE=111;a.NUMPAD_ENTER=108;a.NUMPAD_MULTIPLY=106;a.NUMPAD_SUBTRACT=109;a.SEMICOLON=186;a.EQUAL=187;a.COMMA=188;a.MINUS=189;a.PERIOD=190;a.SLASH=191;a.BACKQUOTE=192;a.LEFTBRACKET=219;a.BACKSLASH=220;a.RIGHTBRACKET=221;a.QUOTE=222;a.ALTERNATE=18;a.BACKSPACE=8;a.CAPS_LOCK=20;a.COMMAND=15;a.CONTROL=17;a.DELETE=46;a.ENTER=13;a.ESCAPE=27;a.PAGE_UP=33;a.PAGE_DOWN=34;a.END=35;a.HOME=36;a.LEFT=37;a.UP=38;a.RIGHT=39;a.DOWN=40;a.SHIFT=16;a.SPACE=32;a.TAB=9;a.INSERT=45;return a})();var qe=function(){function a(){this.id=NaN;this.save=[];this.toUpperCase=null;this.changed=!1;this._text=null;this.width=-1;this.pageChars=[];this.lastGCCnt=this.startIDStroke=this.startID=0;this.splitRender=!1}n(a,"laya.utils.WordText");var c=a.prototype;c.setText=function(b){this.changed=!0;this._text=b;this.width=-1;this.pageChars=[]};c.toString=function(){return this._text};c.charCodeAt=function(b){return this._text?this._text.charCodeAt(b):NaN};c.charAt=function(b){return this._text?this._text.charAt(b):null};c.cleanCache=function(){this.pageChars=[];this.startID=0};g(0,c,"length",function(){return this._text?this._text.length:0});return a}(),vb=function(){function a(b){this._color=null;this.setValue(b)}n(a,"laya.webgl.canvas.DrawStyle");var c=a.prototype;c.setValue=function(b){this._color=b?b instanceof laya.utils.ColorUtils?b:ba.create(b):ba.create("#000000")};c.reset=function(){this._color=ba.create("#000000")};c.toInt=function(){return this._color.numColor};c.equal=function(b){return"string"==typeof b?this._color.strColor===b:b instanceof laya.utils.ColorUtils?this._color.numColor===b.numColor:!1};c.toColorStr=function(){return this._color.strColor};a.create=function(b){if(b){var d=b instanceof laya.utils.ColorUtils?b:ba.create(b);return d._drawStyle||(d._drawStyle=new a(b))}return a.DEFAULT};u(a,["DEFAULT",function(){return this.DEFAULT=new a("#000000")}]);return a}(),D=function(){function a(b){this._path=this._url=null;this._url=a.formatURL(b);this._path=a.getPath(b)}n(a,"laya.net.URL");var c=a.prototype;g(0,c,"path",function(){return this._path});g(0,c,"url",function(){return this._url});g(1,a,"basePath",function(){return a._basePath},function(b){a._basePath=l._getUrlPath();a._basePath=a.formatURL(b)});a.formatURL=function(b){if(!b)return"null path";if(0<b.indexOf(":"))return b;null!=a.customFormat&&(b=a.customFormat(b));if(0<b.indexOf(":"))return b;var d=b.charAt(0);if("."===d)return a._formatRelativePath(a._basePath+b);if("~"===d)return a.rootPath+b.substring(1);if("d"===d){if(0===b.indexOf("data:image"))return b}else if("/"===d)return b;return a._basePath+b};a._formatRelativePath=function(b){b=b.split("/");for(var d=0,a=b.length;d<a;d++)".."==b[d]&&(b.splice(d-1,2),d-=2);return b.join("/")};a.getPath=function(b){var d=b.lastIndexOf("/");return 0<d?b.substr(0,d+1):""};a.getFileName=function(b){var d=b.lastIndexOf("/");return 0<d?b.substr(d+1):b};a.getAdptedFilePath=function(b){if(!a.exportSceneToJson||!b)return b;var d,c;c=a._adpteTypeList.length;var h;for(d=0;d<c;d++)h=a._adpteTypeList[d],b=b.replace(h[0],h[1]);return b};a.version={};a.exportSceneToJson=!1;a._basePath="";a.rootPath="";a.customFormat=function(b){var d=a.version[b];!r.isConchApp&&d&&(b+="?v\x3d"+d);return b};u(a,["_adpteTypeList",function(){return this._adpteTypeList=[[".scene3d",".json"],[".scene",".json"],[".taa",".json"],[".prefab",".json"]]}]);return a}(),ea=function(){function a(b){this.clipInfoID=-1;this._blendFn=this._mesh=null;this._renderType=this._id=0;this._parent=null;this._numEle=this._startIdx=0;this._ref=1;this.shaderValue=null;this._key=new Db;void 0===b&&(b=1E4);this._renderType=b;this._id=++a.ID}n(a,"laya.webgl.submit.Submit");var c=a.prototype;l.imps(c,{"laya.webgl.submit.ISubmit":!0});c.getID=function(){return this._id};c.releaseRender=function(){a.RENDERBASE!=this&&1>--this._ref&&(a.POOL[a._poolSize++]=this,this.shaderValue.release(),this._mesh=this.shaderValue=null,this._parent&&(this._parent.releaseRender(),this._parent=null))};c.getRenderType=function(){return this._renderType};c.renderSubmit=function(){if(0===this._numEle||!this._mesh||0==this._numEle)return 1;var b=this.shaderValue.textureHost;if(b){b=b._getSource();if(!b)return 1;this.shaderValue.texture=b}b=R.mainContext;this._mesh.useMesh(b);this.shaderValue.upload();la.activeBlendFunction!==this._blendFn&&(K.setBlend(b,!0),this._blendFn(b),la.activeBlendFunction=this._blendFn);b.drawElements(4,this._numEle,5123,this._startIdx);I.renderBatches++;I.trianglesFaces+=this._numEle/3;return 1};c._cloneInit=function(b,d,a,c){b._ref=1;b._mesh=a;b._id=this._id;b._key.copyFrom(this._key);b._parent=this;b._blendFn=this._blendFn;b._renderType=this._renderType;b._startIdx=c*Ua.BYTES_PIDX;b._numEle=this._numEle;b.shaderValue=this.shaderValue;this.shaderValue.ref++;this._ref++};c.clone=function(b,d,a){return null};c.reUse=function(b,d){return 0};c.toString=function(){return"ibindex:"+this._startIdx+" num:"+this._numEle+" key\x3d"+this._key};a.__init__=function(){var b=a.RENDERBASE=new a(-1);b.shaderValue=new ma(0,0);b.shaderValue.ALPHA=1;b._ref=4294967295};a.create=function(b,d,c){var e=a._poolSize?a.POOL[--a._poolSize]:new a;e._ref=1;e._mesh=d;e._key.clear();e._startIdx=d.indexNum*Ua.BYTES_PIDX;e._numEle=0;d=b._nBlendType;e._blendFn=b._targets?la.targetFns[d]:la.fns[d];e.shaderValue=c;e.shaderValue.setValue(b._shader2D);(b=b._shader2D.filters)&&e.shaderValue.setFilters(b);return e};a.createShape=function(b,d,c,h){var e=a._poolSize?a.POOL[--a._poolSize]:new a;e._mesh=d;e._numEle=c;e._startIdx=2*d.indexNum;e._ref=1;e.shaderValue=h;e.shaderValue.setValue(b._shader2D);d=b._nBlendType;e._key.blendShader=d;e._blendFn=b._targets?la.targetFns[d]:la.fns[d];return e};a.TYPE_2D=1E4;a.TYPE_CANVAS=10003;a.TYPE_CMDSETRT=10004;a.TYPE_CUSTOM=10005;a.TYPE_BLURRT=10006;a.TYPE_CMDDESTORYPRERT=10007;a.TYPE_DISABLESTENCIL=10008;a.TYPE_OTHERIBVB=10009;a.TYPE_PRIMITIVE=10010;a.TYPE_RT=10011;a.TYPE_BLUR_RT=10012;a.TYPE_TARGET=10013;a.TYPE_CHANGE_VALUE=10014;a.TYPE_SHAPE=10015;a.TYPE_TEXTURE=10016;a.TYPE_FILLTEXTURE=10017;a.KEY_ONCE=-1;a.KEY_FILLRECT=1;a.KEY_DRAWTEXTURE=2;a.KEY_VG=3;a.KEY_TRIANGLES=4;a.RENDERBASE=null;a.ID=1;a.preRender=null;a._poolSize=0;a.POOL=[];return a}(),yd=function(){function a(){}n(a,"laya.display.cmd.ClipRectCmd");var c=a.prototype;c.recover=function(){v.recover("ClipRectCmd",this)};c.run=function(b,d,a){b.clipRect(this.x+d,this.y+a,this.width,this.height)};g(0,c,"cmdID",function(){return"ClipRect"});a.create=function(b,d,c,h){var e=v.getItemByClass("ClipRectCmd",a);e.x=b;e.y=d;e.width=c;e.height=h;return e};a.ID="ClipRect";return a}(),re=function(){function a(a,b){this.autoTrace=!0;this.sign="";this.obj=null;void 0===a&&(a="");void 0===b&&(b=!0);this.sign=a;this.autoTrace=b}n(a,"laya.debug.tools.DifferTool");a.prototype.update=function(a,b){b&&console.log(b);a=oa.copyObj(a);this.obj||(this.obj={});b=oa.differ(this.obj,a);this.obj=a;this.autoTrace&&(console.log(this.sign+" differ:"),oa.traceDifferObj(b));return b};a.differ=function(c,b,d){a._differO[c]||(a._differO[c]=new a(c,!0));return a._differO[c].update(b,d)};a._differO={};return a}(),Rd=function(){function a(){}n(a,"laya.display.cmd.DrawPolyCmd");var c=a.prototype;c.recover=function(){this.lineColor=this.fillColor=this.points=null;v.recover("DrawPolyCmd",this)};c.run=function(b,d,a){b._drawPoly(this.x+d,this.y+a,this.points,this.fillColor,this.lineColor,this.lineWidth,this.isConvexPolygon,this.vid)};g(0,c,"cmdID",function(){return"DrawPoly"});a.create=function(b,d,c,h,f,k,m,p){var e=v.getItemByClass("DrawPolyCmd",a);e.x=b;e.y=d;e.points=c;e.fillColor=h;e.lineColor=f;e.lineWidth=k;e.isConvexPolygon=m;e.vid=p;return e};a.ID="DrawPoly";return a}(),Pc=function(){function a(){}n(a,"laya.webgl.resource.ICharRender");var c=a.prototype;c.getWidth=function(b,d){return 0};c.scale=function(b,d){};c.getCharBmp=function(b,d,a,c,f,k,m,p,t,z,g){return null};g(0,c,"canvasWidth",function(){return 0},function(b){});return a}(),ya=function(){function a(){}n(a,"Config");a.animationInterval=50;a.isAntialias=!1;a.isAlpha=!1;a.premultipliedAlpha=!0;a.isStencil=!0;a.preserveDrawingBuffer=!1;a.webGL2D_MeshAllocMaxMem=!0;a.is2DPixelArtGame=!1;a.useWebGL2=!1;a.useRetinalCanvas=!1;return a}(),se=function(){function a(){this.skinName=null;this.deformSlotDataList=[]}n(a,"laya.ani.bone.DeformAniData");return a}(),Lc=function(){function a(){}n(a,"laya.layagl.LayaGLRunner");a.uploadShaderUniforms=function(a,b,d,e){a=d._data;b=b.getArrayData();for(var c=d=0,f=b.length;c<f;c++){var k=b[c];if(e||-1!==k.textureID){var m=a[k.dataOffset];null!=m&&(d+=k.fun.call(k.caller,k,m))}}return d};a.uploadCustomUniform=function(a,b,d,e){a=0;(b=b[d])&&null!=e&&(a+=b.fun.call(b.caller,b,e));return a};a.uploadShaderUniformsForNative=function(a,b,d){var c=0;0<d._runtimeCopyValues.length&&(c=1);return a.uploadShaderUniforms(b,d._data,c)};return a}(),Hb=function(){function a(){}n(a,"laya.maths.MathUtil");a.subtractVector3=function(a,b,d){d[0]=a[0]-b[0];d[1]=a[1]-b[1];d[2]=a[2]-b[2]};a.lerp=function(a,b,d){return a*(1-d)+b*d};a.scaleVector3=function(a,b,d){d[0]=a[0]*b;d[1]=a[1]*b;d[2]=a[2]*b};a.lerpVector3=function(a,b,d,e){var c=a[0],f=a[1];a=a[2];e[0]=c+d*(b[0]-c);e[1]=f+d*(b[1]-f);e[2]=a+d*(b[2]-a)};a.lerpVector4=function(a,b,d,e){var c=a[0],f=a[1],k=a[2];a=a[3];e[0]=c+d*(b[0]-c);e[1]=f+d*(b[1]-f);e[2]=k+d*(b[2]-k);e[3]=a+d*(b[3]-a)};a.slerpQuaternionArray=function(a,b,d,e,h,f,k){var c=a[b+0],p=a[b+1],t=a[b+2];a=a[b+3];b=d[e+0];var z=d[e+1],g=d[e+2];d=d[e+3];var l,n;e=c*b+p*z+t*g+a*d;0>e&&(e=-e,b=-b,z=-z,g=-g,d=-d);1E-6<1-e?(l=Math.acos(e),n=Math.sin(l),e=Math.sin((1-h)*l)/n,h=Math.sin(h*l)/n):e=1-h;f[k+0]=e*c+h*b;f[k+1]=e*p+h*z;f[k+2]=e*t+h*g;f[k+3]=e*a+h*d;return f};a.getRotation=function(a,b,d,e){return Math.atan2(e-b,d-a)/Math.PI*180};a.sortBigFirst=function(a,b){return a==b?0:b>a?1:-1};a.sortSmallFirst=function(a,b){return a==b?0:b>a?-1:1};a.sortNumBigFirst=function(a,b){return parseFloat(b)-parseFloat(a)};a.sortNumSmallFirst=function(a,b){return parseFloat(a)-parseFloat(b)};a.sortByKey=function(c,b,d){void 0===b&&(b=!1);void 0===d&&(d=!0);var e;e=b?d?a.sortNumBigFirst:a.sortBigFirst:d?a.sortNumSmallFirst:a.sortSmallFirst;return function(d,b){return e(d[c],b[c])}};return a}(),fb=function(){function a(){this.padding=a._PADDING;this.reset()}n(a,"laya.html.utils.HTMLStyle");var c=a.prototype;c._getExtendStyle=function(){this._extendStyle===cc.EMPTY&&(this._extendStyle=cc.create());return this._extendStyle};c.reset=function(){this.ower=null;this._type=0;this.wordWrap=!0;this.fontSize=W.defaultFontSize;this.family=W.defaultFont;this.color="#000000";this.valign="top";this.padding=a._PADDING;this.italic=this.bold=!1;this.align="left";this.borderColor=this.bgColor=this.textDecoration=null;this._extendStyle&&this._extendStyle.recover();this._extendStyle=cc.EMPTY;return this};c.recover=function(){v.recover("HTMLStyle",this.reset())};c.inherit=function(b){var d,c,h;h=a._inheritProps;c=h.length;var f;for(d=0;d<c;d++)f=h[d],this[f]=b[f]};c._widthAuto=function(){return 0!==(this._type&262144)};c.widthed=function(b){return 0!=(this._type&8)};c._calculation=function(b,d){return!1};c.heighted=function(b){return 0!=(this._type&8192)};c.size=function(b,d){var a=this.ower,c=!1;-1!==b&&b!=a.width&&(this._type|=8,a.width=b,c=!0);-1!==d&&d!=a.height&&(this._type|=8192,a.height=d,c=!0);c&&a._layoutLater()};c.getLineElement=function(){return 0!=(this._type&65536)};c.setLineElement=function(b){b?this._type|=65536:this._type&=-65537};c._enableLayout=function(){return 0===(this._type&2)&&0===(this._type&4)};c.cssText=function(b){this.attrs(a.parseOneCSS(b,";"))};c.attrs=function(b){if(b)for(var d=0,a=b.length;d<a;d++){var c=b[d];this[c[0]]=c[1]}};g(0,c,"font",function(){return(this.italic?"italic ":"")+(this.bold?"bold ":"")+this.fontSize+"px "+(q.onIPhone?W.fontFamilyMap[this.family]||this.family:this.family)},function(b){b=b.split(" ");for(var d=0,a=b.length;d<a;d++){var c=b[d];switch(c){case "italic":this.italic=!0;continue;case "bold":this.bold=!0;continue}0<c.indexOf("px")&&(this.fontSize=parseInt(c),this.family=b[d+1],d++)}});g(0,c,"href",function(){return this._extendStyle.href},function(b){b!==this._extendStyle.href&&(this._getExtendStyle().href=b)});g(0,c,"lineHeight",function(){return this._extendStyle.lineHeight},function(b){this._extendStyle.lineHeight!==b&&(this._getExtendStyle().lineHeight=b)});g(0,c,"strokeColor",function(){return this._extendStyle.strokeColor},function(b){this._extendStyle.strokeColor!==b&&(this._getExtendStyle().strokeColor=b)});g(0,c,"stroke",function(){return this._extendStyle.stroke},function(b){this._extendStyle.stroke!==b&&(this._getExtendStyle().stroke=b)});g(0,c,"leading",function(){return this._extendStyle.leading},function(b){this._extendStyle.leading!==b&&(this._getExtendStyle().leading=b)});g(0,c,"align",function(){return a.align_Value[this._type&48]},function(b){b in a.alignVDic&&(this._type&=-49,this._type|=a.alignVDic[b])});g(0,c,"valign",function(){return a.vAlign_Value[this._type&192]},function(b){b in a.alignVDic&&(this._type&=-193,this._type|=a.alignVDic[b])});g(0,c,"block",function(){return 0!=(this._type&1)},function(b){b?this._type|=1:this._type&=-2});g(0,c,"wordWrap",function(){return 0===(this._type&131072)},function(b){b?this._type&=-131073:this._type|=131072});g(0,c,"bold",function(){return 0!=(this._type&1024)},function(b){b?this._type|=1024:this._type&=-1025});g(0,c,"italic",function(){return 0!=(this._type&2048)},function(b){b?this._type|=2048:this._type&=-2049});g(0,c,"whiteSpace",function(){return this._type&131072?"nowrap":""},function(b){"nowrap"===b&&(this._type|=131072);"none"===b&&(this._type&=-131073)});g(0,c,"width",null,function(b){this._type|=8;if("string"==typeof b){var d=b.indexOf("auto");0<=d&&(this._type|=262144,b=b.substr(0,d));if(this._calculation("width",b))return;b=parseInt(b)}this.size(b,-1)});g(0,c,"height",null,function(b){this._type|=8192;if("string"==typeof b){if(this._calculation("height",b))return;b=parseInt(b)}this.size(-1,b)});g(0,c,"letterSpacing",function(){return this._extendStyle.letterSpacing},function(b){"string"==typeof b&&(b=parseInt(b+""));b!=this._extendStyle.letterSpacing&&(this._getExtendStyle().letterSpacing=b)});g(0,c,"position",function(){return this._type&4?"absolute":""},function(b){"absolute"===b?this._type|=4:this._type&=-5});g(0,c,"absolute",function(){return 0!==(this._type&4)});g(0,c,"paddingLeft",function(){return this.padding[3]});g(0,c,"paddingTop",function(){return this.padding[0]});a.create=function(){return v.getItemByClass("HTMLStyle",a)};a.parseOneCSS=function(b,d){var c=[];b=b.split(d);var h;d=0;for(var f=b.length;d<f;d++){var k=b[d],m=k.indexOf(":");h=k.substr(0,m).replace(/^\s+|\s+$/g,"");if(0!==h.length){m=k.substr(m+1).replace(/^\s+|\s+$/g,"");k=[h,m];switch(h){case "italic":case "bold":k[1]="true"==m;break;case "font-weight":"bold"==m&&(k[1]=!0,k[0]="bold");break;case "line-height":k[0]="lineHeight";k[1]=parseInt(m);break;case "font-size":k[0]="fontSize";k[1]=parseInt(m);break;case "stroke":k[0]="stroke";k[1]=parseInt(m);break;case "padding":h=m.split(" ");1<h.length||(h[1]=h[2]=h[3]=h[0]);k[1]=[parseInt(h[0]),parseInt(h[1]),parseInt(h[2]),parseInt(h[3])];break;default:(k[0]=a._CSSTOVALUE[h])||(k[0]=h)}c.push(k)}}return c};a.parseCSS=function(b,d){for(;null!=(d=a._parseCSSRegExp.exec(b));)a.styleSheets[d[1]]=a.parseOneCSS(d[2],";")};a._CSSTOVALUE={"letter-spacing":"letterSpacing","white-space":"whiteSpace","line-height":"lineHeight","font-family":"family","vertical-align":"valign","text-decoration":"textDecoration","background-color":"bgColor","border-color":"borderColor"};a._parseCSSRegExp=/([.#]\w+)\s*{([\s\S]*?)}/g;a.ALIGN_LEFT="left";a.ALIGN_CENTER="center";a.ALIGN_RIGHT="right";a.VALIGN_TOP="top";a.VALIGN_MIDDLE="middle";a.VALIGN_BOTTOM="bottom";a.styleSheets={};a.ADDLAYOUTED=512;a._PADDING=[0,0,0,0];a._HEIGHT_SET=8192;a._LINE_ELEMENT=65536;a._NOWARP=131072;a._WIDTHAUTO=262144;a._BOLD=1024;a._ITALIC=2048;a._CSS_BLOCK=1;a._DISPLAY_NONE=2;a._ABSOLUTE=4;a._WIDTH_SET=8;a._ALIGN=48;a._VALIGN=192;u(a,["_inheritProps",function(){return this._inheritProps="italic align valign leading stroke strokeColor bold fontSize lineHeight wordWrap color".split(" ")},"alignVDic",function(){return this.alignVDic={left:0,center:16,right:32,top:0,middle:64,bottom:128}},"align_Value",function(){return this.align_Value={0:"left",16:"center",32:"right"}},"vAlign_Value",function(){return this.vAlign_Value={0:"top",64:"middle",128:"bottom"}}]);return a}(),te=function(){function a(){this.parentBone=this.root=this.name=null;this.length=10;this.transform=null;this.inheritRotation=this.inheritScale=!0;this.resultRotation=this.rotation=NaN;this.d=-1;this._sprite=this._tempMatrix=null;this.resultTransform=new bc;this.resultMatrix=new C;this._children=[]}n(a,"laya.ani.bone.Bone");var c=a.prototype;c.setTempMatrix=function(b){this._tempMatrix=b;var d,a;b=0;for(d=this._children.length;b<d;b++)a=this._children[b],a.setTempMatrix(this._tempMatrix)};c.update=function(b){this.rotation=this.transform.skX;var d;if(b)d=this.resultTransform.getMatrix(),C.mul(d,b,this.resultMatrix),this.resultRotation=this.rotation;else if(this.resultRotation=this.rotation+this.parentBone.resultRotation,this.parentBone)if(this.inheritRotation&&this.inheritScale)d=this.resultTransform.getMatrix(),C.mul(d,this.parentBone.resultMatrix,this.resultMatrix);else{var a=this.parentBone,c=this.parentBone.resultMatrix;d=this.resultTransform.getMatrix();b=c.a*d.tx+c.c*d.ty+c.tx;var c=c.b*d.tx+c.d*d.ty+c.ty,f=new C;this.inheritRotation?(a=Math.atan2(a.resultMatrix.b,a.resultMatrix.a),d=Math.cos(a),a=Math.sin(a),f.setTo(d,a,-a,d,0,0),C.mul(this._tempMatrix,f,C.TEMP),C.TEMP.copyTo(f),d=this.resultTransform.getMatrix(),C.mul(d,f,this.resultMatrix),0>this.resultTransform.scX*this.resultTransform.scY&&this.resultMatrix.rotate(.5*Math.PI)):(d=this.resultTransform.getMatrix(),C.TEMP.identity(),C.TEMP.d=this.d,C.mul(d,C.TEMP,this.resultMatrix));this.resultMatrix.tx=b;this.resultMatrix.ty=c}else d=this.resultTransform.getMatrix(),d.copyTo(this.resultMatrix);b=0;for(c=this._children.length;b<c;b++)f=this._children[b],f.update()};c.updateChild=function(){var b,d,a;b=0;for(d=this._children.length;b<d;b++)a=this._children[b],a.update()};c.setRotation=function(b){this._sprite&&(this._sprite.rotation=180*b/Math.PI)};c.updateDraw=function(b,d){if(!a.ShowBones||a.ShowBones[this.name])this._sprite||(this._sprite=new L,this._sprite.graphics.drawCircle(0,0,5,"#ff0000"),this._sprite.graphics.drawLine(0,0,this.length,0,"#00ff00"),this._sprite.graphics.fillText(this.name,0,0,"20px Arial","#00ff00","center"),l.stage.addChild(this._sprite)),this._sprite.x=b+this.resultMatrix.tx,this._sprite.y=d+this.resultMatrix.ty;var c,h,f;c=0;for(h=this._children.length;c<h;c++)f=this._children[c],f.updateDraw(b,d)};c.addChild=function(b){this._children.push(b);b.parentBone=this};c.findBone=function(b){if(this.name==b)return this;var d,a,c;d=0;for(a=this._children.length;d<a;d++)if(c=this._children[d],c=c.findBone(b))return c;return null};c.localToWorld=function(b){var d=b[0],a=b[1];b[0]=d*this.resultMatrix.a+a*this.resultMatrix.c+this.resultMatrix.tx;b[1]=d*this.resultMatrix.b+a*this.resultMatrix.d+this.resultMatrix.ty};a.ShowBones={};return a}(),ue=function(){function a(){this.name=null;this.intValue=0;this.floatValue=NaN;this.stringValue=null;this.time=NaN}n(a,"laya.ani.bone.EventData");return a}(),ve=function(){function a(){}n(a,"laya.webgl.shapes.BasePoly");a.createLine2=function(c,b,d,e,h,f){if(4>c.length)return null;var k=a.tempData.length>c.length+2?a.tempData:Array(c.length+2);k[0]=c[0];k[1]=c[1];var m=2,p,t=c.length;for(p=2;p<t;p+=2).01<Math.abs(c[p]-c[p-2])+Math.abs(c[p+1]-c[p-1])&&(k[m++]=c[p],k[m++]=c[p+1]);f&&.01<Math.abs(c[0]-k[m-2])+Math.abs(c[1]-k[m-1])&&(k[m++]=c[0],k[m++]=c[1]);t=m/2;c=d/2;var z,g,l,n,G,y,q,N,va,r,A;l=k[0];n=k[1];d=k[2];f=k[3];z=-(n-f);g=l-d;va=Math.sqrt(z*z+g*g);z=z/va*c;g=g/va*c;h.push(l-z,n-g,l+z,n+g);for(p=1;p<t-1;p++)l=k[2*(p-1)],n=k[2*(p-1)+1],d=k[2*p],f=k[2*p+1],G=k[2*(p+1)],y=k[2*(p+1)+1],z=-(n-f),g=l-d,va=Math.sqrt(z*z+g*g),z=z/va*c,g=g/va*c,q=-(f-y),N=d-G,va=Math.sqrt(q*q+N*N),q=q/va*c,N=N/va*c,va=-g+n-(-g+f),r=-z+d-(-z+l),l=(-z+l)*(-g+f)-(-z+d)*(-g+n),n=-N+y-(-N+f),A=-q+d-(-q+G),G=(-q+G)*(-N+f)-(-q+d)*(-N+y),y=va*A-n*r,.1>Math.abs(y)?h.push(d-z,f-g,d+z,f+g):(z=(r*G-A*l)/y,g=(n*l-va*G)/y,h.push(z,g,d-(z-d),f-(g-f)));l=k[m-4];n=k[m-3];d=k[m-2];f=k[m-1];z=-(n-f);g=l-d;va=Math.sqrt(z*z+g*g);z=z/va*c;g=g/va*c;h.push(d-z,f-g,d+z,f+g);for(p=1;p<t;p++)b.push(e+2*(p-1),e+2*(p-1)+1,e+2*p+1,e+2*p+1,e+2*p,e+2*(p-1));return h};a.createLineTriangle=function(a,b,d,e,h,f,k){a=a.slice();b=a.length;d=a[0];h=a[1];var c,p,t=c=f=0;k=b/2;if(!(1>=k)&&2!=k){for(var g=Array(4*k),l=0,n=0,E=0;E<k-1;E++)d=a[n++],h=a[n++],c=a[n++],p=a[n++],c-=d,t=p-h,0!=c&&0!=t&&(f=Math.sqrt(c*c+t*t),.001<f&&(p=4*l,g[p]=d,g[p+1]=h,g[p+2]=c/f,g[p+3]=t/f,l++));e?(d=a[b-2],h=a[b-1],c=a[0],p=a[1],c-=d,t=p-h,0!=c&&0!=t&&(f=Math.sqrt(c*c+t*t),.001<f&&(p=4*l,g[p]=d,g[p+1]=h,g[p+2]=c/f,g[p+3]=t/f))):(p=4*l,g[p]=d,g[p+1]=h,g[p+2]=c/f,g[p+3]=t/f);for(E=0;E<k;E++);}};u(a,["tempData",function(){return this.tempData=Array(256)}]);return a}(),cc=function(){function a(){this.reset()}n(a,"laya.html.utils.HTMLExtendStyle");var c=a.prototype;c.reset=function(){this.stroke=0;this.strokeColor="#000000";this.letterSpacing=this.lineHeight=this.leading=0;this.href=null;return this};c.recover=function(){this!=a.EMPTY&&v.recover("HTMLExtendStyle",this.reset())};a.create=function(){return v.getItemByClass("HTMLExtendStyle",a)};a.EMPTY=new a;return a}(),ha=function(){function a(){}n(a,"laya.debug.tools.ClassTool");a.defineProperty=function(a,b,d){Object.defineProperty(a,b,d)};a.getOwnPropertyDescriptor=function(a,b){return Object.getOwnPropertyDescriptor(a,b)};a.getOwnPropertyDescriptors=function(a){return Object.getOwnPropertyDescriptors(a)};a.getOwnPropertyNames=function(a){return Object.getOwnPropertyNames(a)};a.getObjectGetSetKeys=function(c,b){b||(b=[]);var d;d=laya.debug.tools.ClassTool.getOwnPropertyNames(c);for(var e in d)e=d[e],0<=e.indexOf("_$get_")&&(e=e.replace("_$get_",""),b.push(e));c.__proto__&&a.getObjectGetSetKeys(c.__proto__,b);return b};a.getObjectDisplayAbleKeys=function(c,b){b||(b=[]);for(var d in c)"_"!=d.charAt(0)&&b.push(d);a.getObjectGetSetKeys(c,b);return b=oa.getNoSameArr(b)};a.getClassName=function(a){return"function"==typeof a?a.name:a.constructor.name};a.getNodeClassAndName=function(c){return c?c.name?a.getClassName(c)+"("+c.name+")":a.getClassName(c):"null"};a.getClassNameByClz=function(a){return a.name};a.getClassByName=function(a){return l._runScript(a)};a.createObjByName=function(c){return new (a.getClassByName(c))};u(a,["displayTypes",function(){return this.displayTypes={"boolean":!0,number:!0,string:!0}}]);return a}(),we=function(){function a(){this._bindedIndexBuffer=this._nativeVertexArrayObject=null;this._nativeVertexArrayObject=O.instance.createVertexArray()}n(a,"laya.webgl.BufferStateBase");var c=a.prototype;c.bind=function(){a._curBindedBufferState!==this&&(O.instance.bindVertexArray(this._nativeVertexArrayObject),a._curBindedBufferState=this)};c.unBind=function(){if(a._curBindedBufferState===this)O.instance.bindVertexArray(null),a._curBindedBufferState=null;else throw"BufferState: must call bind() function first.";};c.bindForNative=function(){O.instance.bindVertexArray(this._nativeVertexArrayObject);a._curBindedBufferState=this};c.unBindForNative=function(){O.instance.bindVertexArray(null);a._curBindedBufferState=null};c.destroy=function(){O.instance.deleteVertexArray(this._nativeVertexArrayObject)};a._curBindedBufferState=null;return a}(),qa=function(){function a(){}n(a,"laya.debug.DebugTool");g(1,a,"target",function(){return a._target},function(c){a._target=c});g(1,a,"isThisShow",function(){return!1});g(1,a,"showStatu",null,function(c){c?I.show():(I.hide(),a.clearDebugLayer())});g(1,a,"showBound",function(){return a._showBound},function(c){a._showBound=c;a._showBound||a.clearDebugLayer()});a.getMenuShowEvent=function(){return q.onMobile?"doubleclick":"rightclick"};a.initBasicFunctions=function(){dc.initMe();a.debugLayer||(pa.init(),a.debugLayer=pa.I.graphicLayer,a.debugLayer.mouseEnabled=!1,a.debugLayer.mouseThrough=!0,a.showStatu=!0,l.stage.on("keydown",null,a.keyHandler),xe.export())};a.dTrace=function(c){null!=a._traceFun&&a._traceFun(c);console.log(c)};a.keyHandler=function(c){var b;b=String.fromCharCode(c.keyCode);if(c.altKey){switch(c.keyCode){case 38:a.showParent();break;case 40:a.showChild();break;case 37:a.showBrother(a.target,1);break;case 39:a.showBrother(a.target,-1)}a.dealCMDKey(b)}};a.dealCMDKey=function(c){switch(c){case "\u4e0a":a.showParent();break;case "\u4e0b":a.showChild();break;case "\u5de6":a.showBrother(a.target,1);break;case "\u53f3":a.showBrother(a.target,-1);break;case "B":a.showAllBrother();break;case "C":a.showAllChild();break;case "E":a.traceDisMouseEnable();break;case "S":a.traceDisSizeChain();break;case "D":wa.downDis(a.target);break;case "U":wa.upDis(a.target);break;case "N":a.getNodeInfo();break;case "M":a.showAllUnderMosue();break;case "L":Ib.I.switchType();break;case "Q":a.showNodeInfo();break;case "F":a.showToolPanel();break;case "P":a.showToolFilter();break;case "V":a.selectNodeUnderMouse();break;case "K":Qc.traceStage();break;case "T":a.switchNodeTree();break;case "mCMD":a.traceCMD();break;case "allCMD":a.traceCMDR()}};a.switchNodeTree=function(){};a.analyseMouseHit=function(){a.target&&ye.analyseNode(a.target)};a.selectNodeUnderMouse=function(){dc.instance.selectDisUnderMouse();a.showDisBound()};a.showToolPanel=function(){};a.showToolFilter=function(){};a.showNodeInfo=function(){ec.I.isWorkState?ec.I.recoverNodes():ec.I.showDisInfo(a.target)};a.switchDisController=function(){Ib.I.target?Ib.I.target=null:a.target&&(Ib.I.target=a.target)};a.showParent=function(c){c||(c=a.target);if(!c)return console.log("no targetAvalible"),null;a.target=c.parent;a.autoWork()};a.showChild=function(c){c||(c=a.target);if(!c)return console.log("no targetAvalible"),null;0<c.numChildren&&(a.target=c.getChildAt(0),a.autoWork())};a.showAllChild=function(c){c||(c=a.target);if(!c)return console.log("no targetAvalible"),null;a.selectedNodes=wa.getAllChild(c);a.showSelected()};a.showAllUnderMosue=function(){a.selectedNodes=wa.getObjectsUnderGlobalPoint(l.stage);a.showSelected()};a.showParentChain=function(c){if(c){a.selectedNodes=[];for(c=c.parent;c;)a.selectedNodes.push(c),c=c.parent;a.showSelected()}};a.showAllBrother=function(c){c||(c=a.target);if(!c)return console.log("no targetAvalible"),null;c.parent&&(a.selectedNodes=wa.getAllChild(c.parent),a.showSelected())};a.showBrother=function(c,b){void 0===b&&(b=1);c||(c=a.target);if(!c)return console.log("no targetAvalible"),null;var d;if(d=c.parent)c=d.getChildIndex(c),c+=b,0>c&&(c+=d.numChildren),c>=d.numChildren&&(c-=d.numChildren),a.target=d.getChildAt(c),a.autoWork()};a.clearDebugLayer=function(){a.debugLayer.graphics&&a.debugLayer.graphics.clear()};a.showSelected=function(){if(a.autoShowSelected&&a.selectedNodes&&!(1>a.selectedNodes.length)){console.log("selected:",a.selectedNodes);var c,b;b=a.selectedNodes.length;a.clearDebugLayer();for(c=0;c<b;c++)a.showDisBound(a.selectedNodes[c],!1)}};a.getClassCreateInfo=function(a){return fc.getRunInfo(a)};a.autoWork=function(){a.isThisShow&&(a.showBound&&a.showDisBound(),a.autoTraceSpriteInfo&&a.target&&ab.traceSpriteInfo(a.target,a.autoTraceBounds,a.autoTraceSize,a.autoTraceTree),a.target&&(a.autoTraceCMD&&a.traceCMD(),a.autoTraceCMDR&&a.traceCMDR(),a.autoTraceEnable&&a.traceDisMouseEnable(a.target)))};a.traceDisMouseEnable=function(c){console.log("----------------traceDisMouseEnable--------------------");c||(c=a.target);if(!c)return console.log("no targetAvalible"),null;var b;b=[];for(a.selectedNodes=[];c;)b.push(ha.getNodeClassAndName(c)+": mouseEnabled:"+c.mouseEnabled+" hitFirst:"+c.hitTestPrior),a.selectedNodes.push(c),c=c.parent;console.log(b.join("\n"));a.showSelected();return b.join("\n")};a.traceDisSizeChain=function(c){console.log("---------------------traceDisSizeChain-------------------");c||(c=a.target);if(!c)return console.log("no targetAvalible"),null;a.selectedNodes=[];var b;for(b=[];c;)b.push(ha.getNodeClassAndName(c)+": x:"+c.x+" y:"+c.y+" w:"+c.width+" h:"+c.height+" scaleX:"+c.scaleX+" scaleY:"+c.scaleY),a.selectedNodes.push(c),c=c.parent;console.log(b.join("\n"));a.showSelected();return b.join("\n")};a.showDisBound=function(c,b,d){void 0===b&&(b=!0);void 0===d&&(d="#ff0000");c||(c=a.target);if(!c)return console.log("no targetAvalible"),null;b&&a.clearDebugLayer();!(b=c._getBoundPointsM(!0))||1>b.length||(b=za.pListToPointList(b,!0),Ha.walkArr(b,c.localToGlobal,c),b=za.pointListToPlist(b),a._disBoundRec=M._getWrapRec(b,a._disBoundRec),a.debugLayer.graphics.drawRect(a._disBoundRec.x,a._disBoundRec.y,a._disBoundRec.width,a._disBoundRec.height,null,d),pa.I.setTop())};a.showDisBoundToSprite=function(c,b,d,e){void 0===d&&(d="#ff0000");void 0===e&&(e=1);var h;!(h=c._getBoundPointsM(!0))||1>h.length||(h=za.pListToPointList(h,!0),Ha.walkArr(h,c.localToGlobal,c),h=za.pointListToPlist(h),a._disBoundRec=M._getWrapRec(h,a._disBoundRec),b.graphics.drawRect(a._disBoundRec.x,a._disBoundRec.y,a._disBoundRec.width,a._disBoundRec.height,null,d,e))};a.getNodeInfo=function(){a.counter.reset();Ha.walkTarget(l.stage,a.addNodeInfo);console.log("node info:");a.counter.traceSelf();return a.counter.data};a.findByClass=function(c){a._classList=[];a._tFindClass=c;Ha.walkTarget(l.stage,a.addClassNode);a.selectedNodes=a._classList;a.showSelected();return a._classList};a.addClassNode=function(c){c.constructor.name==a._tFindClass&&a._classList.push(c)};a.traceCMD=function(c){c||(c=a.target);if(!c)return console.log("no targetAvalible"),null;console.log("self CMDs:");console.log(c.graphics.cmds);var b;b=Da.renders[c._renderType];console.log("renderSprite:",b);for(a._rSpList.length=0;b&&0<b._sign;)a._rSpList.push(a.cmdToTypeO[b._sign]),b=b._next;console.log("fun:",a._rSpList.join(","));a.counter.reset();a.addCMDs(c.graphics.cmds);a.counter.traceSelf();return a.counter.data};a.addCMDs=function(c){Ha.walkArr(c,a.addCMD)};a.addCMD=function(c){a.counter.add(c.callee)};a.traceCMDR=function(c){c||(c=a.target);if(!c)return console.log("no targetAvalible"),0;a.counter.reset();Ha.walkTarget(c,a.getCMdCount);console.log("cmds include children");a.counter.traceSelf();return a.counter.data};a.getCMdCount=function(c){if(!(c&&c instanceof laya.display.Sprite&&c.graphics.cmds))return 0;a.addCMDs(c.graphics.cmds);return c.graphics.cmds.length};a.addNodeInfo=function(c){a.counter.add(c.constructor.name)};a.find=function(c,b){void 0===b&&(b=!0);c=a.findTarget(l.stage,c);a.selectedNodes=c;a.selectedNodes&&(a.target=a.selectedNodes[0]);b&&a.showSelected();return c};a.findByName=function(c){a.nameFilter.name=c;return a.find(a.nameFilter)};a.findNameStartWith=function(c){a.nameFilter.name=a.getStartWithFun(c);return a.find(a.nameFilter)};a.findNameHas=function(c,b){void 0===b&&(b=!0);a.nameFilter.name=a.getHasFun(c);return a.find(a.nameFilter,b)};a.getStartWithFun=function(a){return function(b){return b?0==b.indexOf(a)?!0:!1:!1}};a.getHasFun=function(a){return function(b){return b?0<=b.indexOf(a)?!0:!1:!1}};a.findTarget=function(c,b){var d=[];a.isFit(c,b)&&d.push(c);var e,h,f;h=c.numChildren;for(e=0;e<h;e++)f=c.getChildAt(e),f instanceof laya.display.Sprite&&(d=d.concat(a.findTarget(f,b)));return d};a.findClassHas=function(c,b){var d=[];0<=ha.getClassName(c).indexOf(b)&&d.push(c);var e,h,f;h=c.numChildren;for(e=0;e<h;e++)f=c.getChildAt(e),f instanceof laya.display.Sprite&&(d=d.concat(a.findClassHas(f,b)));return d};a.isFit=function(a,b){if(!a)return!1;if(!b)return!0;if("function"==typeof b)return b(a);for(var d in b)if("function"==typeof b[d]){if(!b[d](a[d]))return!1}else if(a[d]!=b[d])return!1;return!0};a.log=function(c){var b;b=gc.getArgArr(arguments);null!=a._logFun&&a._logFun(b.join(" "))};a.enableCacheAnalyse=!1;a.enableNodeCreateAnalyse=!0;a._traceFun=null;a.debugLayer=null;a._target=null;a.selectedNodes=[];a.autoShowSelected=!0;a._showBound=!0;a._disBoundRec=null;a.autoTraceEnable=!1;a.autoTraceBounds=!1;a.autoTraceSize=!1;a.autoTraceTree=!0;a.autoTraceCMD=!0;a.autoTraceCMDR=!1;a.autoTraceSpriteInfo=!0;a._classList=null;a._tFindClass=null;a._rSpList=[];a._logFun=null;u(a,["text",function(){return this.text=new I},"cmdToTypeO",function(){return this.cmdToTypeO={}},"counter",function(){return this.counter=new Rc},"nameFilter",function(){return this.nameFilter={name:"name"}}]);return a}(),Jd=function(){function a(){}n(a,"laya.display.cmd.SaveCmd");var c=a.prototype;c.recover=function(){v.recover("SaveCmd",this)};c.run=function(b,d,a){b.save()};g(0,c,"cmdID",function(){return"Save"});a.create=function(){return v.getItemByClass("SaveCmd",a)};a.ID="Save";return a}(),ic=function(){function a(){}n(a,"laya.wx.mini.MiniInput");a._createInputElement=function(){ia._initInput(ia.area=q.createElement("textarea"));ia._initInput(ia.input=q.createElement("input"));ia.inputContainer=q.createElement("div");ia.inputContainer.style.position="absolute";ia.inputContainer.style.zIndex=1E5;q.container.appendChild(ia.inputContainer);ia.inputContainer.setPos=function(b,d){ia.inputContainer.style.left=b+"px";ia.inputContainer.style.top=d+"px"};l.stage.on("resize",null,a._onStageResize);wx.onWindowResize&&wx.onWindowResize(function(b){w.dispatchEvent&&w.dispatchEvent("resize")});X._soundClass=hc;X._musicClass=hc;var c=F.systemInfo.system;-1!=F.systemInfo.model.indexOf("iPhone")&&(q.onIPhone=!0,q.onIOS=!0,q.onIPad=!0,q.onAndroid=!1);if(-1!=c.indexOf("Android")||-1!=c.indexOf("Adr"))q.onAndroid=!0,q.onIPhone=!1,q.onIOS=!1,q.onIPad=!1};a._onStageResize=function(){l.stage._canvasTransform.identity().scale(q.width/r.canvas.width/q.pixelRatio,q.height/r.canvas.height/q.pixelRatio)};a.wxinputFocus=function(a){var b=ia.inputElement.target;if(!b||b.editable)F.window.wx.offKeyboardConfirm(),F.window.wx.offKeyboardInput(),F.window.wx.showKeyboard({defaultValue:b.text,maxLength:b.maxChars,multiple:b.multiline,confirmHold:!0,confirmType:b.confirmType||"done",success:function(d){},fail:function(d){}}),F.window.wx.onKeyboardConfirm(function(d){d=d?d.value:"";b._restrictPattern&&(d=d.replace(/\u2006|\x27/g,""),b._restrictPattern.test(d)&&(d=d.replace(b._restrictPattern,"")));b.text=d;b.event("input");laya.wx.mini.MiniInput.inputEnter();b.event("confirm")}),F.window.wx.onKeyboardInput(function(d){d=d?d.value:"";b.multiline||-1==d.indexOf("\n")?(b._restrictPattern&&(d=d.replace(/\u2006|\x27/g,""),b._restrictPattern.test(d)&&(d=d.replace(b._restrictPattern,""))),b.text=d,b.event("input")):laya.wx.mini.MiniInput.inputEnter()})};a.inputEnter=function(){ia.inputElement.target.focus=!1};a.wxinputblur=function(){a.hideKeyboard()};a.hideKeyboard=function(){F.window.wx.offKeyboardConfirm();F.window.wx.offKeyboardInput();F.window.wx.hideKeyboard({success:function(a){console.log("\u9690\u85cf\u952e\u76d8")},fail:function(a){console.log("\u9690\u85cf\u952e\u76d8\u51fa\u9519:"+(a?a.errMsg:""))}})};return a}(),sd=function(){function a(){this._cacheBoundsType=!1}n(a,"laya.display.GraphicsBounds");var c=a.prototype;c.destroy=function(){this._graphics=null;this._cacheBoundsType=!1;this._temp&&(this._temp.length=0);this._rstBoundPoints&&(this._rstBoundPoints.length=0);this._bounds&&this._bounds.recover();this._bounds=null;v.recover("GraphicsBounds",this)};c.reset=function(){this._temp&&(this._temp.length=0)};c.getBounds=function(b){void 0===b&&(b=!1);if(!this._bounds||!this._temp||1>this._temp.length||b!=this._cacheBoundsType)this._bounds=M._getWrapRec(this.getBoundPoints(b),this._bounds);this._cacheBoundsType=b;return this._bounds};c.getBoundPoints=function(b){void 0===b&&(b=!1);if(!this._temp||1>this._temp.length||b!=this._cacheBoundsType)this._temp=this._getCmdPoints(b);this._cacheBoundsType=b;return this._rstBoundPoints=U.copyArray(this._rstBoundPoints,this._temp)};c._getCmdPoints=function(b){void 0===b&&(b=!1);var d=this._graphics.cmds,c;c=this._temp||(this._temp=[]);c.length=0;d||null==this._graphics._one||(a._tempCmds.length=0,a._tempCmds.push(this._graphics._one),d=a._tempCmds);if(!d)return c;var h=a._tempMatrixArrays;h.length=0;var f=a._initMatrix;f.identity();for(var k=a._tempMatrix,m,p,t=0,g=d.length;t<g;t++)switch(m=d[t],m.cmdID){case "Alpha":h.push(f);f=f.clone();break;case "Restore":f=h.pop();break;case "Scale":k.identity();k.translate(-m.pivotX,-m.pivotY);k.scale(m.scaleX,m.scaleY);k.translate(m.pivotX,m.pivotY);this._switchMatrix(f,k);break;case "Rotate":k.identity();k.translate(-m.pivotX,-m.pivotY);k.rotate(m.angle);k.translate(m.pivotX,m.pivotY);this._switchMatrix(f,k);break;case "Translate":k.identity();k.translate(m.tx,m.ty);this._switchMatrix(f,k);break;case "Transform":k.identity();k.translate(-m.pivotX,-m.pivotY);k.concat(m.matrix);k.translate(m.pivotX,m.pivotY);this._switchMatrix(f,k);break;case "DrawImage":case "FillTexture":a._addPointArrToRst(c,M._getBoundPointS(m.x,m.y,m.width,m.height),f);break;case "DrawTexture":f.copyTo(k);m.matrix&&k.concat(m.matrix);a._addPointArrToRst(c,M._getBoundPointS(m.x,m.y,m.width,m.height),k);break;case "DrawImage":p=m.texture;if(b)m.width&&m.height?a._addPointArrToRst(c,M._getBoundPointS(m.x,m.y,m.width,m.height),f):a._addPointArrToRst(c,M._getBoundPointS(m.x,m.y,p.width,p.height),f);else{var l=(m.width||p.sourceWidth)/p.width,n=(m.height||p.sourceHeight)/p.height,E=l*p.sourceWidth,G=n*p.sourceHeight,y=0<p.offsetX?p.offsetX:0;p=0<p.offsetY?p.offsetY:0;y*=l;p*=n;a._addPointArrToRst(c,M._getBoundPointS(m.x-y,m.y-p,E,G),f)}break;case "FillTexture":m.width&&m.height?a._addPointArrToRst(c,M._getBoundPointS(m.x,m.y,m.width,m.height),f):(p=m.texture,a._addPointArrToRst(c,M._getBoundPointS(m.x,m.y,p.width,p.height),f));break;case "DrawTexture":var q;m.matrix?(f.copyTo(k),k.concat(m.matrix),q=k):q=f;b?m.width&&m.height?a._addPointArrToRst(c,M._getBoundPointS(m.x,m.y,m.width,m.height),q):(p=m.texture,a._addPointArrToRst(c,M._getBoundPointS(m.x,m.y,p.width,p.height),q)):(p=m.texture,l=(m.width||p.sourceWidth)/p.width,n=(m.height||p.sourceHeight)/p.height,E=l*p.sourceWidth,G=n*p.sourceHeight,y=0<p.offsetX?p.offsetX:0,p=0<p.offsetY?p.offsetY:0,y*=l,p*=n,a._addPointArrToRst(c,M._getBoundPointS(m.x-y,m.y-p,E,G),q));break;case "DrawRect":a._addPointArrToRst(c,M._getBoundPointS(m.x,m.y,m.width,m.height),f);break;case "DrawCircle":a._addPointArrToRst(c,M._getBoundPointS(m.x-m.radius,m.y-m.radius,m.radius+m.radius,m.radius+m.radius),f);break;case "DrawLine":a._tempPoints.length=0;l=.5*m.lineWidth;m.fromX==m.toX?a._tempPoints.push(m.fromX+l,m.fromY,m.toX+l,m.toY,m.fromX-l,m.fromY,m.toX-l,m.toY):m.fromY==m.toY?a._tempPoints.push(m.fromX,m.fromY+l,m.toX,m.toY+l,m.fromX,m.fromY-l,m.toX,m.toY-l):a._tempPoints.push(m.fromX,m.fromY,m.toX,m.toY);a._addPointArrToRst(c,a._tempPoints,f);break;case "DrawCurves":a._addPointArrToRst(c,jc.I.getBezierPoints(m.points),f,m.x,m.y);break;case "DrawLines":case "DrawPoly":a._addPointArrToRst(c,m.points,f,m.x,m.y);break;case "DrawPath":a._addPointArrToRst(c,this._getPathPoints(m.paths),f,m.x,m.y);break;case "DrawPie":a._addPointArrToRst(c,this._getPiePoints(m.x,m.y,m.radius,m.startAngle,m.endAngle),f)}200<c.length?c=U.copyArray(c,M._getWrapRec(c)._getBoundPoints()):8<c.length&&(c=za.scanPList(c));return c};c._switchMatrix=function(b,d){d.concat(b);d.copyTo(b)};c._getPiePoints=function(b,d,c,h,f){var e=a._tempPoints;a._tempPoints.length=0;e.push(b,d);f=(f-h)%360;0>f&&(f+=360);f/=32;var m=h;for(h=0;32>=h;h++)e.push(b+c*Math.cos(m),d+c*Math.sin(m)),m+=f;return e};c._getPathPoints=function(b){var d,c,h=a._tempPoints;h.length=0;c=b.length;var f;for(d=0;d<c;d++)f=b[d],1<f.length&&(h.push(f[1],f[2]),3<f.length&&h.push(f[3],f[4]));return h};a.create=function(){return v.getItemByClass("GraphicsBounds",a)};a._addPointArrToRst=function(b,d,c,h,f){void 0===h&&(h=0);void 0===f&&(f=0);var e,m;m=d.length;for(e=0;e<m;e+=2)a._addPointToRst(b,d[e]+h,d[e+1]+f,c)};a._addPointToRst=function(b,d,a,c){var e=P.TEMP;e.setTo(d?d:0,a?a:0);c.transformPoint(e);b.push(e.x,e.y)};a._tempPoints=[];a._tempMatrixArrays=[];a._tempCmds=[];u(a,["_tempMatrix",function(){return this._tempMatrix=new C},"_initMatrix",function(){return this._initMatrix=new C}]);return a}(),Yb=function(){function a(){this.ALPHA=1;this.shaderType=0;this.defines=new Ub;this.strokeStyle=this.fillStyle=vb.DEFAULT}n(a,"laya.webgl.shader.d2.Shader2D");a.prototype.destroy=function(){this.filters=this.defines=null};a.__init__=function(){Ta.preCompile2D(0,1,"/*\n\ttexture\u548cfillrect\u4f7f\u7528\u7684\u3002\n*/\nattribute vec4 posuv;\nattribute vec4 attribColor;\nattribute vec4 attribFlags;\n//attribute vec4 clipDir;\n//attribute vec2 clipRect;\nuniform vec4 clipMatDir;\nuniform vec2 clipMatPos;\t\t// \u8fd9\u4e2a\u662f\u5168\u5c40\u7684\uff0c\u4e0d\u7528\u518d\u5e94\u7528\u77e9\u9635\u4e86\u3002\nvarying vec2 cliped;\nuniform vec2 size;\nuniform vec2 clipOff;\t\t\t// \u4f7f\u7528\u8981\u628aclip\u504f\u79fb\u3002cacheas normal\u7528. \u53ea\u7528\u4e86[0]\n#ifdef WORLDMAT\n\tuniform mat4 mmat;\n#endif\n#ifdef MVP3D\n\tuniform mat4 u_MvpMatrix;\n#endif\nvarying vec4 v_texcoordAlpha;\nvarying vec4 v_color;\nvarying float v_useTex;\n\nvoid main() {\n\n\tvec4 pos \x3d vec4(posuv.xy,0.,1.);\n#ifdef WORLDMAT\n\tpos\x3dmmat*pos;\n#endif\n\tvec4 pos1  \x3dvec4((pos.x/size.x-0.5)*2.0,(0.5-pos.y/size.y)*2.0,0.,1.0);\n#ifdef MVP3D\n\tgl_Position\x3du_MvpMatrix*pos1;\n#else\n\tgl_Position\x3dpos1;\n#endif\n\tv_texcoordAlpha.xy \x3d posuv.zw;\n\t//v_texcoordAlpha.z \x3d attribColor.a/255.0;\n\tv_color \x3d attribColor/255.0;\n\tv_color.xyz*\x3dv_color.w;//\u53cd\u6b63\u540e\u9762\u4e5f\u8981\u9884\u4e58\n\t\n\tv_useTex \x3d attribFlags.r/255.0;\n\tfloat clipw \x3d length(clipMatDir.xy);\n\tfloat cliph \x3d length(clipMatDir.zw);\n\t\n\tvec2 clpos \x3d clipMatPos.xy;\n\t#ifdef WORLDMAT\n\t\t// \u5982\u679c\u6709mmat\uff0c\u9700\u8981\u4fee\u6539clipMatPos,\u56e0\u4e3a \u8fd9\u662fcacheas normal \uff08\u5982\u679c\u4e0d\u662f\u5c31\u9519\u4e86\uff09\uff0c clipMatPos\u88ab\u53bb\u6389\u4e86\u504f\u79fb\n\t\tif(clipOff[0]\x3e0.0){\n\t\t\tclpos.x+\x3dmmat[3].x;\t//tx\t\u6700\u7b80\u5355\u5904\u7406\n\t\t\tclpos.y+\x3dmmat[3].y;\t//ty\n\t\t}\n\t#endif\n\tvec2 clippos \x3d pos.xy - clpos;\t//pos\u5df2\u7ecf\u5e94\u7528\u77e9\u9635\u4e86\uff0c\u4e3a\u4e86\u51cf\u7684\u6709\u610f\u4e49\uff0cclip\u7684\u4f4d\u7f6e\u4e5f\u8981\u7f29\u653e\n\tif(clipw\x3e20000. \x26\x26 cliph\x3e20000.)\n\t\tcliped \x3d vec2(0.5,0.5);\n\telse {\n\t\t//\u8f6c\u62100\u52301\u4e4b\u95f4\u3002/clipw/clipw \u8868\u793aclippos\u4e0enormalize\u4e4b\u540e\u7684clip\u671d\u5411\u70b9\u79ef\u4e4b\u540e\uff0c\u518d\u9664\u4ee5clipw\n\t\tcliped\x3dvec2( dot(clippos,clipMatDir.xy)/clipw/clipw, dot(clippos,clipMatDir.zw)/cliph/cliph);\n\t}\n\n}","/*\n\ttexture\u548cfillrect\u4f7f\u7528\u7684\u3002\n*/\n\nprecision mediump float;\n//precision highp float;\nvarying vec4 v_texcoordAlpha;\nvarying vec4 v_color;\nvarying float v_useTex;\nuniform sampler2D texture;\n\n#ifdef ALPHAMASK\nuniform sampler2D textureAlpha;\n#endif\n\nvarying vec2 cliped;\n\n#ifdef BLUR_FILTER\nuniform vec4 strength_sig2_2sig2_gauss1;\nuniform vec2 blurInfo;\n\n#define PI 3.141593\n\nfloat getGaussian(float x, float y){\n    return strength_sig2_2sig2_gauss1.w*exp(-(x*x+y*y)/strength_sig2_2sig2_gauss1.z);\n}\n\nvec4 blur(){\n    const float blurw \x3d 9.0;\n    vec4 vec4Color \x3d vec4(0.0,0.0,0.0,0.0);\n    vec2 halfsz\x3dvec2(blurw,blurw)/2.0/blurInfo;\n    vec2 startpos\x3dv_texcoordAlpha.xy-halfsz;\n    vec2 ctexcoord \x3d startpos;\n    vec2 step \x3d 1.0/blurInfo;  //\u6bcf\u4e2a\u50cf\u7d20\n\n    for(float y \x3d 0.0;y\x3c\x3dblurw; ++y){\n        ctexcoord.x\x3dstartpos.x;\n        for(float x \x3d 0.0;x\x3c\x3dblurw; ++x){\n            //TODO \u7eb9\u7406\u5750\u6807\u7684\u56fa\u5b9a\u504f\u79fb\u5e94\u8be5\u5728vs\u4e2d\u5904\u7406\n            vec4Color +\x3d texture2D(texture, ctexcoord)*getGaussian(x-blurw/2.0,y-blurw/2.0);\n            ctexcoord.x+\x3dstep.x;\n        }\n        ctexcoord.y+\x3dstep.y;\n    }\n    return vec4Color;\n}\n#endif\n\n#ifdef COLOR_FILTER\nuniform vec4 colorAlpha;\nuniform mat4 colorMat;\n#endif\n\n#ifdef GLOW_FILTER\nuniform vec4 u_color;\nuniform vec4 u_blurInfo1;\nuniform vec4 u_blurInfo2;\n#endif\n\n#ifdef COLOR_ADD\nuniform vec4 colorAdd;\n#endif\n\n#ifdef FILLTEXTURE\nuniform vec4 u_TexRange;//startu,startv,urange, vrange\n#endif\nvoid main() {\n\tif(cliped.x\x3c0.) discard;\n\tif(cliped.x\x3e1.) discard;\n\tif(cliped.y\x3c0.) discard;\n\tif(cliped.y\x3e1.) discard;\n\n#ifdef FILLTEXTURE\n   vec4 color\x3d texture2D(texture, fract(v_texcoordAlpha.xy)*u_TexRange.zw + u_TexRange.xy);\n#else\n   vec4 color\x3d texture2D(texture, v_texcoordAlpha.xy);\n#endif\n\n   if(v_useTex\x3c\x3d0.)color \x3d vec4(1.,1.,1.,1.);\n   color.a*\x3dv_color.w;\n   //color.rgb*\x3dv_color.w;\n   color.rgb*\x3dv_color.rgb;\n   gl_FragColor\x3dcolor;\n\n   #ifdef COLOR_ADD\n\tgl_FragColor \x3d vec4(colorAdd.rgb,colorAdd.a*gl_FragColor.a);\n\tgl_FragColor.xyz *\x3d colorAdd.a;\n   #endif\n\n   #ifdef BLUR_FILTER\n\tgl_FragColor \x3d   blur();\n\tgl_FragColor.w*\x3dv_color.w;\n   #endif\n\n   #ifdef COLOR_FILTER\n\tmat4 alphaMat \x3dcolorMat;\n\n\talphaMat[0][3] *\x3d gl_FragColor.a;\n\talphaMat[1][3] *\x3d gl_FragColor.a;\n\talphaMat[2][3] *\x3d gl_FragColor.a;\n\n\tgl_FragColor \x3d gl_FragColor * alphaMat;\n\tgl_FragColor +\x3d colorAlpha/255.0*gl_FragColor.a;\n   #endif\n\n   #ifdef GLOW_FILTER\n\tconst float c_IterationTime \x3d 10.0;\n\tfloat floatIterationTotalTime \x3d c_IterationTime * c_IterationTime;\n\tvec4 vec4Color \x3d vec4(0.0,0.0,0.0,0.0);\n\tvec2 vec2FilterDir \x3d vec2(-(u_blurInfo1.z)/u_blurInfo2.x,-(u_blurInfo1.w)/u_blurInfo2.y);\n\tvec2 vec2FilterOff \x3d vec2(u_blurInfo1.x/u_blurInfo2.x/c_IterationTime * 2.0,u_blurInfo1.y/u_blurInfo2.y/c_IterationTime * 2.0);\n\tfloat maxNum \x3d u_blurInfo1.x * u_blurInfo1.y;\n\tvec2 vec2Off \x3d vec2(0.0,0.0);\n\tfloat floatOff \x3d c_IterationTime/2.0;\n\tfor(float i \x3d 0.0;i\x3c\x3dc_IterationTime; ++i){\n\t\tfor(float j \x3d 0.0;j\x3c\x3dc_IterationTime; ++j){\n\t\t\tvec2Off \x3d vec2(vec2FilterOff.x * (i - floatOff),vec2FilterOff.y * (j - floatOff));\n\t\t\tvec4Color +\x3d texture2D(texture, v_texcoordAlpha.xy + vec2FilterDir + vec2Off)/floatIterationTotalTime;\n\t\t}\n\t}\n\tgl_FragColor \x3d vec4(u_color.rgb,vec4Color.a * u_blurInfo2.z);\n\tgl_FragColor.rgb *\x3d gl_FragColor.a;\n   #endif\n\n    #ifdef ALPHAMASK\n        #ifdef FILLTEXTURE\n              vec4 alphaMask\x3d texture2D(textureAlpha, fract(v_texcoordAlpha.xy)*u_TexRange.zw + u_TexRange.xy);\n           #else\n              vec4 alphaMask\x3d texture2D(textureAlpha, v_texcoordAlpha.xy);\n           #endif\n           gl_FragColor *\x3d alphaMask.r;\n    #endif\n}",null);Ta.preCompile2D(0,4,"attribute vec4 position;\nattribute vec4 attribColor;\n//attribute vec4 clipDir;\n//attribute vec2 clipRect;\nuniform vec4 clipMatDir;\nuniform vec2 clipMatPos;\n#ifdef WORLDMAT\n\tuniform mat4 mmat;\n#endif\nuniform mat4 u_mmat2;\n//uniform vec2 u_pos;\nuniform vec2 size;\nvarying vec4 color;\n//vec4 dirxy\x3dvec4(0.9,0.1, -0.1,0.9);\n//vec4 clip\x3dvec4(100.,30.,300.,600.);\nvarying vec2 cliped;\nvoid main(){\n\t\n#ifdef WORLDMAT\n\tvec4 pos\x3dmmat*vec4(position.xy,0.,1.);\n\tgl_Position \x3dvec4((pos.x/size.x-0.5)*2.0,(0.5-pos.y/size.y)*2.0,pos.z,1.0);\n#else\n\tgl_Position \x3dvec4((position.x/size.x-0.5)*2.0,(0.5-position.y/size.y)*2.0,position.z,1.0);\n#endif\t\n\tfloat clipw \x3d length(clipMatDir.xy);\n\tfloat cliph \x3d length(clipMatDir.zw);\n\tvec2 clippos \x3d position.xy - clipMatPos.xy;\t//pos\u5df2\u7ecf\u5e94\u7528\u77e9\u9635\u4e86\uff0c\u4e3a\u4e86\u51cf\u7684\u6709\u610f\u4e49\uff0cclip\u7684\u4f4d\u7f6e\u4e5f\u8981\u7f29\u653e\n\tif(clipw\x3e20000. \x26\x26 cliph\x3e20000.)\n\t\tcliped \x3d vec2(0.5,0.5);\n\telse {\n\t\t//clipdir\u662f\u5e26\u7f29\u653e\u7684\u65b9\u5411\uff0c\u7531\u4e8e\u4e0a\u9762clippos\u662f\u5728\u7f29\u653e\u540e\u7684\u7a7a\u95f4\u8ba1\u7b97\u7684\uff0c\u6240\u4ee5\u9700\u8981\u628a\u65b9\u5411\u5148normalize\u4e00\u4e0b\n\t\tcliped\x3dvec2( dot(clippos,clipMatDir.xy)/clipw/clipw, dot(clippos,clipMatDir.zw)/cliph/cliph);\n\t}\n  //pos2d.x \x3d dot(clippos,dirx);\n  color\x3dattribColor/255.;\n}","precision mediump float;\n//precision mediump float;\nvarying vec4 color;\n//uniform float alpha;\nvarying vec2 cliped;\nvoid main(){\n\t//vec4 a\x3dvec4(color.r, color.g, color.b, 1);\n\t//a.a*\x3dalpha;\n    gl_FragColor\x3d color;// vec4(color.r, color.g, color.b, alpha);\n\tgl_FragColor.rgb*\x3dcolor.a;\n\tif(cliped.x\x3c0.) discard;\n\tif(cliped.x\x3e1.) discard;\n\tif(cliped.y\x3c0.) discard;\n\tif(cliped.y\x3e1.) discard;\n}",null);Ta.preCompile2D(0,512,"attribute vec2 position;\nattribute vec2 texcoord;\nattribute vec4 color;\nuniform vec2 size;\nuniform float offsetX;\nuniform float offsetY;\nuniform mat4 mmat;\nuniform mat4 u_mmat2;\nvarying vec2 v_texcoord;\nvarying vec4 v_color;\nvoid main() {\n  vec4 pos\x3dmmat*u_mmat2*vec4(offsetX+position.x,offsetY+position.y,0,1 );\n  gl_Position \x3d vec4((pos.x/size.x-0.5)*2.0,(0.5-pos.y/size.y)*2.0,pos.z,1.0);\n  v_color \x3d color;\n  v_color.rgb *\x3d v_color.a;\n  v_texcoord \x3d texcoord;  \n}","precision mediump float;\nvarying vec2 v_texcoord;\nvarying vec4 v_color;\nuniform sampler2D texture;\nuniform float alpha;\nvoid main() {\n\tvec4 t_color \x3d texture2D(texture, v_texcoord);\n\tgl_FragColor \x3d t_color.rgba * v_color;\n\tgl_FragColor *\x3d alpha;\n}",null)};return a}(),U=function(){function a(){}n(a,"laya.utils.Utils");a.toRadian=function(c){return c*a._pi2};a.toAngle=function(c){return c*a._pi};a.toHexColor=function(a){if(0>a||isNaN(a))return null;for(a=a.toString(16);6>a.length;)a="0"+a;return"#"+a};a.getGID=function(){return a._gid++};a.concatArray=function(a,b){if(!b)return a;if(!a)return b;var d,c=b.length;for(d=0;d<c;d++)a.push(b[d]);return a};a.clearArray=function(a){if(!a)return a;a.length=0;return a};a.copyArray=function(a,b){a||(a=[]);if(!b)return a;a.length=b.length;var d,c=b.length;for(d=0;d<c;d++)a[d]=b[d];return a};a.getGlobalRecByPoints=function(a,b,d,e,h){b=P.create().setTo(b,d);b=a.localToGlobal(b);e=P.create().setTo(e,h);e=a.localToGlobal(e);a=M._getWrapRec([b.x,b.y,e.x,e.y]);b.recover();e.recover();return a};a.getGlobalPosAndScale=function(c){return a.getGlobalRecByPoints(c,0,0,1,1)};a.bind=function(a,b){return a.bind(b)};a.measureText=function(a,b){return fa.measureText(a,b)};a.updateOrder=function(a){if(!a||2>a.length)return!1;for(var b=1,d,c=a.length,h,f;b<c;){d=b;f=a[d];for(h=a[d]._zOrder;-1<--d;)if(a[d]._zOrder>h)a[d+1]=a[d];else break;a[d+1]=f;b++}return!0};a.transPointList=function(a,b,d){var c,h=a.length;for(c=0;c<h;c+=2)a[c]+=b,a[c+1]+=d};a.parseInt=function(a,b){void 0===b&&(b=0);a=q.window.parseInt(a,b);return isNaN(a)?0:a};a.getFileExtension=function(c){a._extReg.lastIndex=c.lastIndexOf(".");return(c=a._extReg.exec(c))&&1<c.length?c[1].toLowerCase():null};a.getTransformRelativeToWindow=function(a,b,d){var c=l.stage;a=laya.utils.Utils.getGlobalPosAndScale(a);var h=c._canvasTransform.clone(),f=h.tx,k=h.ty;h.rotate(-Math.PI/180*l.stage.canvasDegree);h.scale(l.stage.clientScaleX,l.stage.clientScaleY);var m=0!=l.stage.canvasDegree%180;m?(c=d+a.y,b+=a.x,c*=h.d,b*=h.a,90==l.stage.canvasDegree?(c=f-c,b+=k):(c+=f,b=k-b)):(c=b+a.x,b=d+a.y,c*=h.a,b*=h.d,c+=f,b+=k);b+=l.stage._safariOffsetY;m?(d=h.d*a.height,a=h.a*a.width):(d=h.a*a.width,a=h.d*a.height);return{x:c,y:b,scaleX:d,scaleY:a}};a.fitDOMElementInArea=function(c,b,d,e,h,f){c._fitLayaAirInitialized||(c._fitLayaAirInitialized=!0,c.style.transformOrigin=c.style.webKittransformOrigin="left top",c.style.position="absolute");b=a.getTransformRelativeToWindow(b,d,e);c.style.transform=c.style.webkitTransform="scale("+b.scaleX+","+b.scaleY+") rotate("+l.stage.canvasDegree+"deg)";c.style.width=h+"px";c.style.height=f+"px";c.style.left=b.x+"px";c.style.top=b.y+"px"};a.isOkTextureList=function(a){if(!a)return!1;var b,d=a.length,c;for(b=0;b<d;b++)if(c=a[b],!c||!c._getSource())return!1;return!0};a.isOKCmdList=function(a){if(!a)return!1;var b=a.length;for(a=0;a<b;a++);return!0};a.getQueryString=function(a){if(q.onMiniGame||!w.location||!w.location.search)return null;a=new RegExp("(^|\x26)"+a+"\x3d([^\x26]*)(\x26|$)");a=w.location.search.substr(1).match(a);return null!=a?unescape(a[2]):null};a._gid=1;a._pi=180/Math.PI;a._pi2=Math.PI/180;a._extReg=/\.(\w+)\??/g;a.parseXMLFromString=function(a){a=a.replace(/>\s+</g,"\x3e\x3c");a=(new DOMParser).parseFromString(a,"text/xml");if(-1<a.firstChild.textContent.indexOf("This page contains the following errors"))throw Error(a.firstChild.firstChild.textContent);return a};return a}();(function(){function a(){}n(a,"Laya3D");g(1,a,"enbalePhysics",function(){return a._enbalePhysics});a._cancelLoadByUrl=function(c){l.loader.cancelLoadByUrl(c);a._innerFirstLevelLoaderManager.cancelLoadByUrl(c);a._innerSecondLevelLoaderManager.cancelLoadByUrl(c);a._innerThirdLevelLoaderManager.cancelLoadByUrl(c);a._innerFourthLevelLoaderManager.cancelLoadByUrl(c)};a._changeWebGLSize=function(a,b){R.onStageResize(a,b);laya.d3.core.render.RenderContext3D.clientWidth=a;laya.d3.core.render.RenderContext3D.clientHeight=b};a.__init__=function(c,b,d){ya.isAntialias=d.isAntialias;ya.isAlpha=d.isAlpha;ya.premultipliedAlpha=d.premultipliedAlpha;ya.isStencil=d.isStencil;R.enable()?(fa.changeWebGLSize=a._changeWebGLSize,r.is3DMode=!0,l.init(c,b),r.supportWebGLPlusRendering||(O.instance=R.mainContext,O.instance.createCommandEncoder=function(d,b,a){void 0===d&&(d=128);void 0===b&&(b=64);void 0===a&&(a=!1);return new Xb(this,d,b,a)}),a.enableNative3D(),laya.d3.core.Sprite3D.__init__(),laya.d3.core.RenderableSprite3D.__init__(),laya.d3.core.MeshSprite3D.__init__(),laya.d3.core.SkinnedMeshSprite3D.__init__(),laya.d3.core.particleShuriKen.ShuriKenParticle3D.__init__(),laya.d3.core.material.BaseMaterial.__init__(),laya.d3.core.material.BlinnPhongMaterial.__init__(),laya.d3.core.material.PBRStandardMaterial.__init__(),laya.d3.core.material.PBRSpecularMaterial.__init__(),laya.d3.core.material.SkyProceduralMaterial.__init__(),laya.d3.core.material.UnlitMaterial.__init__(),laya.d3.core.trail.TrailSprite3D.__init__(),laya.d3.core.trail.TrailMaterial.__init__(),laya.d3.core.material.EffectMaterial.__init__(),laya.d3.core.material.WaterPrimaryMaterial.__init__(),laya.d3.core.particleShuriKen.ShurikenParticleMaterial.__init__(),laya.d3.core.material.TerrainMaterial.__init__(),laya.d3.core.material.ExtendTerrainMaterial.__init__(),laya.d3.shader.ShaderInit3D.__init__(),laya.d3.core.pixelLine.PixelLineMaterial.defaultMaterial.lock=!0,laya.d3.core.material.BlinnPhongMaterial.defaultMaterial.lock=!0,laya.d3.core.material.EffectMaterial.defaultMaterial.lock=!0,laya.d3.core.material.PBRStandardMaterial.defaultMaterial.lock=!0,laya.d3.core.material.PBRSpecularMaterial.defaultMaterial.lock=!0,laya.d3.core.material.UnlitMaterial.defaultMaterial.lock=!0,laya.d3.core.particleShuriKen.ShurikenParticleMaterial.defaultMaterial.lock=!0,laya.d3.core.trail.TrailMaterial.defaultMaterial.lock=!0,laya.d3.core.material.SkyProceduralMaterial.defaultMaterial.lock=!0,laya.d3.core.material.SkyBoxMaterial.defaultMaterial.lock=!0,laya.d3.core.material.WaterPrimaryMaterial.defaultMaterial.lock=!0,ua.__init__(),laya.d3.resource.TextureCube.__init__(),laya.d3.resource.models.SkyBox.__init__(),laya.d3.resource.models.SkyDome.__init__(),laya.d3.graphics.FrustumCulling.__init__(),laya.d3.math.HalfFloatUtils.__init__(),c=La.createMap,c.lh=["HIERARCHY",laya.d3.core.Sprite3D._parse],c.ls=["HIERARCHY",laya.d3.core.scene.Scene3D._parse],c.lm=["MESH",laya.d3.resource.models.Mesh._parse],c.lmat=["MATERIAL",laya.d3.core.material.BaseMaterial._parse],c.ltc=["TEXTURECUBE",laya.d3.resource.TextureCube._parse],c.jpg=["TEXTURE2D",ua._parse],c.jpeg=["TEXTURE2D",ua._parse],c.bmp=["TEXTURE2D",ua._parse],c.gif=["TEXTURE2D",ua._parse],c.png=["TEXTURE2D",ua._parse],c.dds=["TEXTURE2D",ua._parse],c.ktx=["TEXTURE2D",ua._parse],c.pvr=["TEXTURE2D",ua._parse],c.lani=["ANIMATIONCLIP",laya.d3.animation.AnimationClip._parse],c.lav=["AVATAR",laya.d3.core.Avatar._parse],c.thdata=["TERRAINHEIGHTDATA",laya.d3.terrain.TerrainHeightData._pharse],c=x.parserMap,c.HIERARCHY=a._loadHierarchy,c.MESH=a._loadMesh,c.MATERIAL=a._loadMaterial,c.TEXTURECUBE=a._loadTextureCube,c.TEXTURE2D=a._loadTexture2D,c.ANIMATIONCLIP=a._loadAnimationClip,c.AVATAR=a._loadAvatar,a._innerFirstLevelLoaderManager.on("error",null,a._eventLoadManagerError),a._innerSecondLevelLoaderManager.on("error",null,a._eventLoadManagerError),a._innerThirdLevelLoaderManager.on("error",null,a._eventLoadManagerError),a._innerFourthLevelLoaderManager.on("error",null,a._eventLoadManagerError)):alert("Laya3D init error,must support webGL!")};a.enableNative3D=function(){if(r.isConchApp){O=w.LayaGLContext;var a=laya.d3.shader.ShaderData,b=laya.d3.shader.ShaderInstance,d=laya.d3.core.Avatar,e=laya.d3.graphics.FrustumCulling,h=laya.d3.core.MeshRenderer;r.supportWebGLPlusRendering&&(a.prototype._initData=a.prototype._initDataForNative,a.prototype.setBool=a.prototype.setBoolForNative,a.prototype.getBool=a.prototype.getBoolForNative,a.prototype.setInt=a.prototype.setIntForNative,a.prototype.getInt=a.prototype.getIntForNative,a.prototype.setNumber=a.prototype.setNumberForNative,a.prototype.getNumber=a.prototype.getNumberForNative,a.prototype.setVector=a.prototype.setVectorForNative,a.prototype.getVector=a.prototype.getVectorForNative,a.prototype.setVector2=a.prototype.setVector2ForNative,a.prototype.getVector2=a.prototype.getVector2ForNative,a.prototype.setVector3=a.prototype.setVector3ForNative,a.prototype.getVector3=a.prototype.getVector3ForNative,a.prototype.setQuaternion=a.prototype.setQuaternionForNative,a.prototype.getQuaternion=a.prototype.getQuaternionForNative,a.prototype.setMatrix4x4=a.prototype.setMatrix4x4ForNative,a.prototype.getMatrix4x4=a.prototype.getMatrix4x4ForNative,a.prototype.setBuffer=a.prototype.setBufferForNative,a.prototype.getBuffer=a.prototype.getBufferForNative,a.prototype.setTexture=a.prototype.setTextureForNative,a.prototype.getTexture=a.prototype.getTextureForNative,a.prototype.setAttribute=a.prototype.setAttributeForNative,a.prototype.getAttribute=a.prototype.getAttributeForNative,a.prototype.cloneTo=a.prototype.cloneToForNative,a.prototype.getData=a.prototype.getDataForNative,b.prototype._uniformMatrix2fv=b.prototype._uniformMatrix2fvForNative,b.prototype._uniformMatrix3fv=b.prototype._uniformMatrix3fvForNative,b.prototype._uniformMatrix4fv=b.prototype._uniformMatrix4fvForNative,h.prototype._renderUpdateWithCamera=h.prototype._renderUpdateWithCameraForNative);r.supportWebGLPlusCulling&&(e.renderObjectCulling=laya.d3.graphics.FrustumCulling.renderObjectCullingNative);r.supportWebGLPlusAnimation&&(d.prototype._cloneDatasToAnimator=d.prototype._cloneDatasToAnimatorNative,FloatKeyframe=w.conchFloatKeyframe,QuaternionKeyframe=Vector3Keyframe=w.conchFloatArrayKeyframe,KeyframeNode=w.conchKeyframeNode,KeyframeNodeList=w.conchKeyframeNodeList,a=laya.d3.animation.AnimationClip,a.prototype._evaluateClipDatasRealTime=a.prototype._evaluateClipDatasRealTimeForNative)}R.shaderHighPrecision=!1;O.instance.getShaderPrecisionFormat(35632,36338).precision?R.shaderHighPrecision=!0:R.shaderHighPrecision=!1};a.formatRelativePath=function(a,b){a+=b;if("."===b.charAt(0)){b=a.split("/");a=0;for(var d=b.length;a<d;a++)if(".."==b[a]){var c=a-1;0<c&&".."!==b[c]&&(b.splice(c,2),a-=2)}a=b.join("/")}return a};a._endLoad=function(a,b,d){if(d)for(var c=0,h=d.length;c<h;c++){var f=x.getRes(d[c]);f&&f._removeReference()}a.endLoad(b)};a._eventLoadManagerError=function(a){l.loader.event("error",a)};a._addHierarchyInnerUrls=function(c,b,d,e,h,f,k,m){e=a.formatRelativePath(e,h);d&&(e+=d);c.push({url:e,type:f,constructParams:k,propertyParams:m});b.push(e);return e};a._getSprite3DHierarchyInnerUrls=function(c,b,d,e,h,f,k,m){var p,t,g=c.props;switch(c.type){case "Scene3D":var l=g.lightmaps;p=0;for(t=l.length;p<t;p++){var n=l[p];n.path=a._addHierarchyInnerUrls(h,f,k,m,n.path,"TEXTURE2D",n.constructParams,n.propertyParams)}(p=g.reflectionTexture)&&(g.reflectionTexture=a._addHierarchyInnerUrls(e,f,k,m,p,"TEXTURECUBE"));g.sky&&(p=g.sky.material)&&(p.path=a._addHierarchyInnerUrls(d,f,k,m,p.path,"MATERIAL"));break;case "Camera":(p=g.skyboxMaterial)&&(p.path=a._addHierarchyInnerUrls(d,f,k,m,p.path,"MATERIAL"));break;case "TrailSprite3D":case "MeshSprite3D":case "SkinnedMeshSprite3D":(p=g.meshPath)&&(g.meshPath=a._addHierarchyInnerUrls(b,f,k,m,p,"MESH"));if(g=g.materials)for(p=0,t=g.length;p<t;p++)g[p].path=a._addHierarchyInnerUrls(d,f,k,m,g[p].path,"MATERIAL");break;case "ShuriKenParticle3D":(p=g.meshPath)&&(g.meshPath=a._addHierarchyInnerUrls(b,f,k,m,p,"MESH"));g.material.path=a._addHierarchyInnerUrls(d,f,k,m,g.material.path,"MATERIAL");break;case "Terrain":a._addHierarchyInnerUrls(h,f,k,m,g.dataPath,"TERRAIN")}if(g=c.components)for(l=0,n=g.length;l<n;l++)switch(p=g[l],p.type){case "Animator":(t=p.avatar)&&(t.path=a._addHierarchyInnerUrls(h,f,k,m,t.path,"AVATAR"));var E=p.clipPaths;if(E)for(p=0,t=E.length;p<t;p++)E[p]=a._addHierarchyInnerUrls(h,f,k,m,E[p],"ANIMATIONCLIP");else for(t=p.layers,p=0;p<t.length;p++)for(var E=t[p].states,G=0,y=E.length;G<y;G++){var q=E[G].clipPath;q&&(E[G].clipPath=a._addHierarchyInnerUrls(h,f,k,m,q,"ANIMATIONCLIP"))}break;case "PhysicsCollider":case "Rigidbody3D":case "CharacterController":for(t=p.shapes,p=0;p<t.length;p++)E=t[p],"MeshColliderShape"===E.type&&(G=E.mesh)&&(E.mesh=a._addHierarchyInnerUrls(b,f,k,m,G,"MESH"))}c=c.child;p=0;for(t=c.length;p<t;p++)a._getSprite3DHierarchyInnerUrls(c[p],b,d,e,h,f,k,m)};a._loadHierarchy=function(c){c.on("loaded",null,a._onHierarchylhLoaded,[c]);c.load(c.url,"json",!1,null,!0)};a._onHierarchylhLoaded=function(c,b){var d=c.url,e=laya.d3.utils.Utils3D.getURLVerion(d),h=D.getPath(d),d=[],f=[],k=[],m=[],p=[];a._getSprite3DHierarchyInnerUrls(b.data,d,f,k,m,p,e,h);var h=d.length+f.length+m.length,t=h+1,e=1/t;a._onProcessChange(c,0,e,1);if(0<m.length){var g=h/t,h=B.create(null,a._onProcessChange,[c,e,g],!1);a._innerFourthLevelLoaderManager._create(m,!1,B.create(null,a._onHierarchyInnerForthLevResouLoaded,[c,h,b,p,d,f,k,e+g*m.length,g]),h,null,null,null,1,!0)}else a._onHierarchyInnerForthLevResouLoaded(c,null,b,p,d,f,k,e,g)};a._onHierarchyInnerForthLevResouLoaded=function(c,b,d,e,h,f,k,m,p){b&&b.recover();if(0<k.length){var t=B.create(null,a._onProcessChange,[c,m,p],!1);a._innerThirdLevelLoaderManager._create(k,!1,B.create(null,a._onHierarchyInnerThirdLevResouLoaded,[c,t,d,e,h,f,m+p*f.length,p]),b,null,null,null,1,!0)}else a._onHierarchyInnerThirdLevResouLoaded(c,null,d,e,h,f,m,p)};a._onHierarchyInnerThirdLevResouLoaded=function(c,b,d,e,h,f,k,m){b&&b.recover();if(0<f.length){var p=B.create(null,a._onProcessChange,[c,k,m],!1);a._innerSecondLevelLoaderManager._create(f,!1,B.create(null,a._onHierarchyInnerSecondLevResouLoaded,[c,p,d,e,h,k+m*f.length,m]),b,null,null,null,1,!0)}else a._onHierarchyInnerSecondLevResouLoaded(c,null,d,e,h,k,m)};a._onHierarchyInnerSecondLevResouLoaded=function(c,b,d,e,h,f,k){b&&b.recover();0<h.length?(f=B.create(null,a._onProcessChange,[c,f,k],!1),a._innerFirstLevelLoaderManager._create(h,!1,B.create(null,a._onHierarchyInnerFirstLevResouLoaded,[c,f,d,e]),b,null,null,null,1,!0)):a._onHierarchyInnerFirstLevResouLoaded(c,null,d,e)};a._onHierarchyInnerFirstLevResouLoaded=function(c,b,d,e){b&&b.recover();c._cache=c._createCache;b="Scene3D"===d.data.type?laya.d3.core.scene.Scene3D._parse(d,c._propertyParams,c._constructParams):laya.d3.core.Sprite3D._parse(d,c._propertyParams,c._constructParams);a._endLoad(c,b,e)};a._loadMesh=function(c){c.on("loaded",null,a._onMeshLmLoaded,[c]);c.load(c.url,"arraybuffer",!1,null,!0)};a._onMeshLmLoaded=function(c,b){c._cache=c._createCache;b=laya.d3.resource.models.Mesh._parse(b,c._propertyParams,c._constructParams);a._endLoad(c,b)};a._loadMaterial=function(c){c.on("loaded",null,a._onMaterilLmatLoaded,[c]);c.load(c.url,"json",!1,null,!0)};a._onMaterilLmatLoaded=function(c,b){var d=c.url,e=laya.d3.utils.Utils3D.getURLVerion(d),h=D.getPath(d),d=[],f=[],k;switch(b.version){case "LAYAMATERIAL:01":case "LAYAMATERIAL:02":var m,p,t=b.props.textures;if(t)for(m=0,p=t.length;m<p;m++){var g=t[m];if(k=g.path)k=a.formatRelativePath(h,k),e&&(k+=e),d.push({url:k,constructParams:g.constructParams,propertyParams:g.propertyParams}),f.push(k),g.path=k}break;default:throw Error("Laya3D:unkonwn version.");}e=d.length;h=e+1;m=1/h;a._onProcessChange(c,0,m,1);0<e?(e=B.create(null,a._onProcessChange,[c,m,e/h],!1),a._innerFourthLevelLoaderManager._create(d,!1,B.create(null,a._onMateialTexturesLoaded,[c,e,b,f]),e,null,null,null,1,!0)):a._onMateialTexturesLoaded(c,null,b,null)};a._onMateialTexturesLoaded=function(c,b,d,e){c._cache=c._createCache;d=laya.d3.core.material.BaseMaterial._parse(d,c._propertyParams,c._constructParams);a._endLoad(c,d,e);b&&b.recover()};a._loadAvatar=function(c){c.on("loaded",null,function(b){c._cache=c._createCache;b=laya.d3.core.Avatar._parse(b,c._propertyParams,c._constructParams);a._endLoad(c,b)});c.load(c.url,"json",!1,null,!0)};a._loadAnimationClip=function(c){c.on("loaded",null,function(b){c._cache=c._createCache;b=laya.d3.animation.AnimationClip._parse(b,c._propertyParams,c._constructParams);a._endLoad(c,b)});c.load(c.url,"arraybuffer",!1,null,!0)};a._loadTexture2D=function(c){var b=c.url,d=b.lastIndexOf(".")+1,e=b.indexOf("?"),h;switch(b.substr(d,(-1==e?b.length:e)-d)){case "jpg":case "jpeg":case "bmp":case "gif":case "png":h="nativeimage";break;case "dds":case "ktx":case "pvr":h="arraybuffer"}c.on("loaded",null,function(d){c._cache=c._createCache;d=ua._parse(d,c._propertyParams,c._constructParams);a._endLoad(c,d)});c.load(c.url,h,!1,null,!0)};a._loadTextureCube=function(c){c.on("loaded",null,a._onTextureCubeLtcLoaded,[c]);c.load(c.url,"json",!1,null,!0)};a._onTextureCubeLtcLoaded=function(c,b){var d=D.getPath(c.url);b=[a.formatRelativePath(d,b.front),a.formatRelativePath(d,b.back),a.formatRelativePath(d,b.left),a.formatRelativePath(d,b.right),a.formatRelativePath(d,b.up),a.formatRelativePath(d,b.down)];d=1/7;a._onProcessChange(c,0,d,1);d=B.create(null,a._onProcessChange,[c,d,6/7],!1);a._innerFourthLevelLoaderManager.load(b,B.create(null,a._onTextureCubeImagesLoaded,[c,b,d]),d,"nativeimage")};a._onTextureCubeImagesLoaded=function(c,b,d){for(var e=Array(6),h=0;6>h;h++)e[h]=x.getRes(b[h]);c._cache=c._createCache;e=laya.d3.resource.TextureCube._parse(e,c._propertyParams,c._constructParams);d.recover();for(h=0;6>h;h++)x.clearRes(b[h]);a._endLoad(c,e)};a._onProcessChange=function(a,b,d,e){e=b+e*d;1>e&&a.event("progress",e)};a.init=function(c,b,d,e){a._isInit||(a._isInit=!0,d=d||Sc._default,d.cloneTo(a._config),a._editerEnvironment=a._config._editerEnvironment,d=w.Physics3D,null==d?(a._enbalePhysics=!1,a.__init__(c,b,a._config),e&&e.run()):(a._enbalePhysics=!0,d(1048576*a._config.defaultPhysicsMemory).then(function(){a.__init__(c,b,a._config);e&&e.run()})))};a.HIERARCHY="HIERARCHY";a.MESH="MESH";a.MATERIAL="MATERIAL";a.TEXTURE2D="TEXTURE2D";a.TEXTURECUBE="TEXTURECUBE";a.ANIMATIONCLIP="ANIMATIONCLIP";a.AVATAR="AVATAR";a.TERRAINHEIGHTDATA="TERRAINHEIGHTDATA";a.TERRAINRES="TERRAIN";a._isInit=!1;a._enbalePhysics=!1;a._editerEnvironment=!1;u(a,["_innerFirstLevelLoaderManager",function(){return this._innerFirstLevelLoaderManager=new La},"_innerSecondLevelLoaderManager",function(){return this._innerSecondLevelLoaderManager=new La},"_innerThirdLevelLoaderManager",function(){return this._innerThirdLevelLoaderManager=new La},"_innerFourthLevelLoaderManager",function(){return this._innerFourthLevelLoaderManager=new La},"_physics3D",function(){return this._physics3D=w.Physics3D},"_config",function(){return this._config=new Sc},"physicsSettings",function(){return this.physicsSettings=new laya.d3.physics.PhysicsSettings}]);return a})();var za=function(){function a(){}n(a,"laya.maths.GrahamScan");a.multiply=function(a,b,d){return(a.x-d.x)*(b.y-d.y)-(b.x-d.x)*(a.y-d.y)};a.dis=function(a,b){return(a.x-b.x)*(a.x-b.x)+(a.y-b.y)*(a.y-b.y)};a._getPoints=function(c,b,d){void 0===b&&(b=!1);a._mPointList||(a._mPointList=[]);for(;a._mPointList.length<c;)a._mPointList.push(new P);d||(d=[]);d.length=0;b?a.getFrom(d,a._mPointList,c):a.getFromR(d,a._mPointList,c);return d};a.getFrom=function(a,b,d){var c;for(c=0;c<d;c++)a.push(b[c]);return a};a.getFromR=function(a,b,d){var c;for(c=0;c<d;c++)a.push(b.pop());return a};a.pListToPointList=function(c,b){void 0===b&&(b=!1);var d=c.length/2,e=a._getPoints(d,b,a._tempPointList);for(b=0;b<d;b++)e[b].setTo(c[b+b],c[b+b+1]);return e};a.pointListToPlist=function(c){var b,d=c.length,e=a._temPList,h;for(b=e.length=0;b<d;b++)h=c[b],e.push(h.x,h.y);return e};a.scanPList=function(c){return U.copyArray(c,a.pointListToPlist(a.scan(a.pListToPointList(c,!0))))};a.scan=function(c){var b,d,e=0,h,f,k={};f=a._temArr;f.length=0;h=c.length;for(b=h-1;0<=b;b--)d=c[b],h=d.x+"_"+d.y,k.hasOwnProperty(h)||(k[h]=!0,f.push(d));h=f.length;U.copyArray(c,f);for(b=1;b<h;b++)if(c[b].y<c[e].y||c[b].y==c[e].y&&c[b].x<c[e].x)e=b;d=c[0];c[0]=c[e];c[e]=d;for(b=1;b<h-1;b++){e=b;for(d=b+1;d<h;d++)if(0<a.multiply(c[d],c[e],c[0])||0==a.multiply(c[d],c[e],c[0])&&a.dis(c[0],c[d])<a.dis(c[0],c[e]))e=d;d=c[b];c[b]=c[e];c[e]=d}f=a._temArr;f.length=0;if(3>c.length)return U.copyArray(f,c);f.push(c[0],c[1],c[2]);for(b=3;b<h;b++){for(;2<=f.length&&0<=a.multiply(c[b],f[f.length-1],f[f.length-2]);)f.pop();c[b]&&f.push(c[b])}return f};a._mPointList=null;a._tempPointList=[];a._temPList=[];a._temArr=[];return a}(),ae=function(){function a(){}n(a,"laya.system.System");a.changeDefinition=function(a,b){l[a]=b;l._runScript(a+"\x3dclassObj")};a.__init__=function(){};return a}(),je=function(){function a(b){this.script=null;this.codes={};this.funs={};this.curUseID=-1;this.funnames="";this.script=b;for(var d=0,a,c;;){d=b.indexOf("#begin",d);if(0>d)break;for(c=d+5;;){c=b.indexOf("#end",c);if(0>c)break;if("i"===b.charAt(c+4))c+=5;else break}if(0>c)throw"add include err,no #end:"+b;a=b.indexOf("\n",d);var f=ub.splitToWords(b.substr(d,a-d),null);"code"==f[1]?this.codes[f[2]]=b.substr(a+1,c-a-1):"function"==f[1]&&(a=b.indexOf("function",d),a+=8,this.funs[f[3]]=b.substr(a+1,c-a-1),this.funnames+=f[3]+";");d=c+1}}n(a,"laya.webgl.utils.InlcudeFile");var c=a.prototype;c.getWith=function(b){var d=b?this.codes[b]:this.script;if(!d)throw"get with error:"+b;return d};c.getFunsScript=function(b){var d="",a;for(a in this.funs)0<=b.indexOf(a+";")&&(d+=this.funs[a]);return d};return a}(),wd=function(){function a(){}n(a,"laya.display.cmd.DrawTrianglesCmd");var c=a.prototype;c.recover=function(){this.matrix=this.indices=this.uvs=this.vertices=this.texture=null;v.recover("DrawTrianglesCmd",this)};c.run=function(b,d,a){b.drawTriangles(this.texture,this.x+d,this.y+a,this.vertices,this.uvs,this.indices,this.matrix,this.alpha,this.color,this.blendMode)};g(0,c,"cmdID",function(){return"DrawTriangles"});a.create=function(b,d,c,h,f,k,m,p,t,g){var e=v.getItemByClass("DrawTrianglesCmd",a);e.texture=b;e.x=d;e.y=c;e.vertices=h;e.uvs=f;e.indices=k;e.matrix=m;e.alpha=p;t&&(e.color=new pb,b=ba.create(t).arrColor,e.color.color(255*b[0],255*b[1],255*b[2],255*b[3]));e.blendMode=g;return e};a.ID="DrawTriangles";return a}(),fc=function(){function a(){}n(a,"laya.debug.tools.RunProfile");a.run=function(c,b){void 0===b&&(b=3);var d;a.infoDic.hasOwnProperty(c)||(a.infoDic[c]=new Rc);d=a.infoDic[c];b=ab.getCallLoc(b)+"\n"+ab.getCallStack(1,b-3);d.add(b);a._runShowDic[c]&&(console.log("Create:"+c),console.log(b))};a.showClassCreate=function(c){a._runShowDic[c]=!0};a.hideClassCreate=function(c){a._runShowDic[c]=!1};a.getRunInfo=function(c){return a.infoDic[c]};a.runTest=function(a,b,d){void 0===d&&(d="runTest");gc.timeStart(d);var c;for(c=0;c<b;c++)a();gc.timeEnd(d)};a.runTest2=function(a,b,d){d=q.now();var c;for(c=0;c<b;c++)a();return q.now()-d};a.infoDic={};a._runShowDic={};return a}(),ze=function(){function a(b,d){this.submitEndPos=this.submitStartPos=0;this.context=null;this.touches=[];this.submits=[];this._triangleMesh=this._pathMesh=this._mesh=this.sprite=null;this.meshlist=[];this._oldMeshList=this._oldTriMesh=this._oldPathMesh=this._oldMesh=null;this.oldTy=this.oldTx=0;this.cachedClipInfo=new C;this.invMat=new C;this.context=b;this.sprite=d;b._globalClipMatrix.copyTo(this.cachedClipInfo)}n(a,"laya.webgl.canvas.WebGLCacheAsNormalCanvas");var c=a.prototype;c.startRec=function(){this.context._charSubmitCache._enbale&&(this.context._charSubmitCache.enable(!1,this.context),this.context._charSubmitCache.enable(!0,this.context));this.context._incache=!0;this.touches.length=0;this.context.touches=this.touches;this.context._globalClipMatrix.copyTo(this.cachedClipInfo);this.submits.length=0;this.submitStartPos=this.context._submits._length;for(var b=0,d=this.meshlist.length;b<d;b++){var a=this.meshlist[b];a.canReuse?a.releaseMesh():a.destroy()}this.meshlist.length=0;this._mesh=Va.getAMesh();this._pathMesh=wb.getAMesh();this._triangleMesh=Jb.getAMesh();this.meshlist.push(this._mesh);this.meshlist.push(this._pathMesh);this.meshlist.push(this._triangleMesh);this.context._curSubmit=ea.RENDERBASE;this._oldMesh=this.context._mesh;this._oldPathMesh=this.context._pathMesh;this._oldTriMesh=this.context._triangleMesh;this._oldMeshList=this.context.meshlist;this.context._mesh=this._mesh;this.context._pathMesh=this._pathMesh;this.context._triangleMesh=this._triangleMesh;this.context.meshlist=this.meshlist;this.oldTx=this.context._curMat.tx;this.oldTy=this.context._curMat.ty;this.context._curMat.tx=0;this.context._curMat.ty=0;this.context._curMat.copyTo(this.invMat);this.invMat.invert()};c.endRec=function(){this.context._charSubmitCache._enbale&&(this.context._charSubmitCache.enable(!1,this.context),this.context._charSubmitCache.enable(!0,this.context));var b=this.context._submits;this.submitEndPos=b._length;for(var d=this.submitEndPos-this.submitStartPos,a=0;a<d;a++)this.submits.push(b[this.submitStartPos+a]);b._length-=d;this.context._mesh=this._oldMesh;this.context._pathMesh=this._oldPathMesh;this.context._triangleMesh=this._oldTriMesh;this.context.meshlist=this._oldMeshList;this.context._curSubmit=ea.RENDERBASE;this.context._curMat.tx=this.oldTx;this.context._curMat.ty=this.oldTy;this.context.touches=null;this.context._incache=!1};c.isCacheValid=function(){var b=this.context._globalClipMatrix;return b.a!=this.cachedClipInfo.a||b.b!=this.cachedClipInfo.b||b.c!=this.cachedClipInfo.c||b.d!=this.cachedClipInfo.d||b.tx!=this.cachedClipInfo.tx||b.ty!=this.cachedClipInfo.ty?!1:!0};c.flushsubmit=function(){var b=ea.RENDERBASE;this.submits.forEach(function(d){d!=ea.RENDERBASE&&(ea.preRender=b,b=d,d.renderSubmit())})};c.releaseMem=function(){};u(a,["matI",function(){return this.matI=new C}]);return a}(),Oa=function(){function a(){this._buffer=this._glBuffer=null;this._byteLength=this._bufferUsage=this._bufferType=0;this._glBuffer=O.instance.createBuffer()}n(a,"laya.webgl.utils.Buffer");var c=a.prototype;c._bindForVAO=function(){};c.bind=function(){return!1};c.destroy=function(){this._glBuffer&&(O.instance.deleteBuffer(this._glBuffer),this._glBuffer=null)};g(0,c,"bufferUsage",function(){return this._bufferUsage});a._bindedVertexBuffer=null;a._bindedIndexBuffer=null;return a}(),lc=function(){function a(){this._renderType=this._repaint=1;this._y=this._x=0}n(a,"laya.debug.tools.enginehook.SpriteRenderHook");a.prototype.render=function(a,b,d){this==l.stage&&hb.renderLoopBegin();var c;c=q.now();I.spriteCount++;this.ShowBorderSign&&qa.showDisBoundToSprite(this,pa.I.cacheViewLayer,tb.SPRITE_REC_COLOR,tb.SPRITE_REC_LINEWIDTH);Da.renders[this._renderType]._fun(this,a,b+this._x,d+this._y);this._repaint=0;kc.I.render(this,q.now()-c)};a.init=function(){a.I||(a.I=new a,a.setRenderHook())};a.setRenderHook=function(){L.prototype.render=a.I.render};a.showDisplayBorder=function(a,b){void 0===b&&(b=!0);a.ShowBorderSign=b};a.isDisplayShowBorder=function(a){return a.ShowBorderSign};a.I=null;a.ShowBorderSign="ShowBorderSign";return a}(),Ae=function(){function a(a,b){this.target=this._bones=this._data=null;this.shearMix=this.scaleMix=this.translateMix=this.rotateMix=NaN;this._temp=ca(2,0);this._data=a;null==this._bones&&(this._bones=[]);this.target=b[a.targetIndex];var d,c;d=0;for(c=a.boneIndexs.length;d<c;d++)this._bones.push(b[a.boneIndexs[d]]);this.rotateMix=a.rotateMix;this.translateMix=a.translateMix;this.scaleMix=a.scaleMix;this.shearMix=a.shearMix}n(a,"laya.ani.bone.TfConstraint");a.prototype.apply=function(){for(var a,b=this.target.resultMatrix.a,d=this.target.resultMatrix.b,e=this.target.resultMatrix.c,h=this.target.resultMatrix.d,f=0,k=this._bones.length;f<k;f++){a=this._bones[f];if(0<this.rotateMix){var m=a.resultMatrix.a,p=a.resultMatrix.b,t=a.resultMatrix.c,g=a.resultMatrix.d,l=Math.atan2(e,b)-Math.atan2(t,m)+this._data.offsetRotation*Math.PI/180;l>Math.PI?l-=2*Math.PI:l<-Math.PI&&(l+=2*Math.PI);var l=l*this.rotateMix,n=Math.cos(l),l=Math.sin(l);a.resultMatrix.a=n*m-l*t;a.resultMatrix.b=n*p-l*g;a.resultMatrix.c=l*m+n*t;a.resultMatrix.d=l*p+n*g}this.translateMix&&(this._temp[0]=this._data.offsetX,this._temp[1]=this._data.offsetY,this.target.localToWorld(this._temp),a.resultMatrix.tx+=(this._temp[0]-a.resultMatrix.tx)*this.translateMix,a.resultMatrix.ty+=(this._temp[1]-a.resultMatrix.ty)*this.translateMix,a.updateChild());0<this.scaleMix&&(p=Math.sqrt(a.resultMatrix.a*a.resultMatrix.a+a.resultMatrix.c*a.resultMatrix.c),g=Math.sqrt(b*b+e*e),p=1E-5<p?(p+(g-p+this._data.offsetScaleX)*this.scaleMix)/p:0,a.resultMatrix.a*=p,a.resultMatrix.c*=p,p=Math.sqrt(a.resultMatrix.b*a.resultMatrix.b+a.resultMatrix.d*a.resultMatrix.d),g=Math.sqrt(d*d+h*h),p=1E-5<p?(p+(g-p+this._data.offsetScaleY)*this.scaleMix)/p:0,a.resultMatrix.b*=p,a.resultMatrix.d*=p);0<this.shearMix&&(p=a.resultMatrix.b,g=a.resultMatrix.d,m=Math.atan2(g,p),l=Math.atan2(h,d)-Math.atan2(e,b)-(m-Math.atan2(a.resultMatrix.c,a.resultMatrix.a)),l>Math.PI?l-=2*Math.PI:l<-Math.PI&&(l+=2*Math.PI),l=m+(l+this._data.offsetShearY*Math.PI/180)*this.shearMix,p=Math.sqrt(p*p+g*g),a.resultMatrix.b=Math.cos(l)*p,a.resultMatrix.d=Math.sin(l)*p)}};return a}(),C=function(){function a(b,d,c,h,f,k,m){this._bTransform=!1;void 0===b&&(b=1);void 0===d&&(d=0);void 0===c&&(c=0);void 0===h&&(h=1);void 0===f&&(f=0);void 0===k&&(k=0);void 0===m&&(m=0);if(null!=a._createFun)return a._createFun(b,d,c,h,f,k,m);this.a=b;this.b=d;this.c=c;this.d=h;this.tx=f;this.ty=k;this._checkTransform()}n(a,"laya.maths.Matrix");var c=a.prototype;c.identity=function(){this.a=this.d=1;this.b=this.tx=this.ty=this.c=0;this._bTransform=!1;return this};c._checkTransform=function(){return this._bTransform=1!==this.a||0!==this.b||0!==this.c||1!==this.d};c.setTranslate=function(b,d){this.tx=b;this.ty=d;return this};c.translate=function(b,d){this.tx+=b;this.ty+=d;return this};c.scale=function(b,d){this.a*=b;this.d*=d;this.c*=b;this.b*=d;this.tx*=b;this.ty*=d;this._bTransform=!0;return this};c.rotate=function(b){var d=Math.cos(b);b=Math.sin(b);var a=this.a,c=this.c,f=this.tx;this.a=a*d-this.b*b;this.b=a*b+this.b*d;this.c=c*d-this.d*b;this.d=c*b+this.d*d;this.tx=f*d-this.ty*b;this.ty=f*b+this.ty*d;this._bTransform=!0;return this};c.skew=function(b,d){b=Math.tan(b);d=Math.tan(d);var a=this.a,c=this.b;this.a+=d*this.c;this.b+=d*this.d;this.c+=b*a;this.d+=b*c;return this};c.invertTransformPoint=function(b){var d=this.a,a=this.b,c=this.c,f=this.d,k=this.tx,m=d*f-a*c;return b.setTo(f/m*b.x+-c/m*b.y+(c*this.ty-f*k)/m,-a/m*b.x+d/m*b.y+-(d*this.ty-a*k)/m)};c.transformPoint=function(b){return b.setTo(this.a*b.x+this.c*b.y+this.tx,this.b*b.x+this.d*b.y+this.ty)};c.transformPointN=function(b){return b.setTo(this.a*b.x+this.c*b.y,this.b*b.x+this.d*b.y)};c.getScaleX=function(){return 0===this.b?this.a:Math.sqrt(this.a*this.a+this.b*this.b)};c.getScaleY=function(){return 0===this.c?this.d:Math.sqrt(this.c*this.c+this.d*this.d)};c.invert=function(){var b=this.a,d=this.b,a=this.c,c=this.d,f=this.tx,k=b*c-d*a;this.a=c/k;this.b=-d/k;this.c=-a/k;this.d=b/k;this.tx=(a*this.ty-c*f)/k;this.ty=-(b*this.ty-d*f)/k;return this};c.setTo=function(b,d,a,c,f,k){this.a=b;this.b=d;this.c=a;this.d=c;this.tx=f;this.ty=k;return this};c.concat=function(b){var d=this.a,a=this.c,c=this.tx;this.a=d*b.a+this.b*b.c;this.b=d*b.b+this.b*b.d;this.c=a*b.a+this.d*b.c;this.d=a*b.b+this.d*b.d;this.tx=c*b.a+this.ty*b.c+b.tx;this.ty=c*b.b+this.ty*b.d+b.ty;return this};c.scaleEx=function(b,d){var a=this.a,c=this.b,f=this.c,k=this.d;0!==c||0!==f?(this.a=b*a,this.b=b*c,this.c=d*f):(this.a=b*a,this.b=0*k,this.c=0*a);this.d=d*k;this._bTransform=!0};c.rotateEx=function(b){var d=Math.cos(b);b=Math.sin(b);var a=this.a,c=this.b,f=this.c,k=this.d;0!==c||0!==f?(this.a=d*a+b*f,this.b=d*c+b*k,this.c=-b*a+d*f,this.d=-b*c+d*k):(this.a=d*a,this.b=b*k,this.c=-b*a,this.d=d*k);this._bTransform=!0};c.clone=function(){var b=a.create();b.a=this.a;b.b=this.b;b.c=this.c;b.d=this.d;b.tx=this.tx;b.ty=this.ty;b._bTransform=this._bTransform;return b};c.copyTo=function(b){b.a=this.a;b.b=this.b;b.c=this.c;b.d=this.d;b.tx=this.tx;b.ty=this.ty;b._bTransform=this._bTransform;return b};c.toString=function(){return this.a+","+this.b+","+this.c+","+this.d+","+this.tx+","+this.ty};c.destroy=function(){this.recover()};c.recover=function(){v.recover("Matrix",this.identity())};a.mul=function(b,d,a){var c=b.a,e=b.b,k=b.c,m=b.d,p=b.tx;b=b.ty;var t=d.a,g=d.b,l=d.c,n=d.d,E=d.tx;d=d.ty;0!==g||0!==l?(a.a=c*t+e*l,a.b=c*g+e*n,a.c=k*t+m*l,a.d=k*g+m*n,a.tx=t*p+l*b+E,a.ty=g*p+n*b+d):(a.a=c*t,a.b=e*n,a.c=k*t,a.d=m*n,a.tx=t*p+E,a.ty=n*b+d);return a};a.mul16=function(b,d,a){var c=b.a,e=b.b,k=b.c,m=b.d,p=b.tx;b=b.ty;var t=d.a,g=d.b,l=d.c,n=d.d,E=d.tx;d=d.ty;0!==g||0!==l?(a[0]=c*t+e*l,a[1]=c*g+e*n,a[4]=k*t+m*l,a[5]=k*g+m*n,a[12]=t*p+l*b+E,a[13]=g*p+n*b+d):(a[0]=c*t,a[1]=e*n,a[4]=k*t,a[5]=m*n,a[12]=t*p+E,a[13]=n*b+d);return a};a.create=function(){return v.getItemByClass("Matrix",a)};a.EMPTY=new a;a.TEMP=new a;a._createFun=null;return a}(),Kb=function(){function a(b,d,a){this._value=0;this._name2int=b;this._int2name=d;this._int2nameMap=a}n(a,"laya.webgl.shader.ShaderDefinesBase");var c=a.prototype;c.add=function(b){"string"==typeof b&&(b=this._name2int[b]);return this._value|=b};c.addInt=function(b){return this._value|=b};c.remove=function(b){"string"==typeof b&&(b=this._name2int[b]);return this._value&=~b};c.isDefine=function(b){return(this._value&b)===b};c.getValue=function(){return this._value};c.setValue=function(b){this._value=b};c.toNameDic=function(){var b=this._int2nameMap[this._value];return b?b:a._toText(this._value,this._int2name,this._int2nameMap)};a._reg=function(b,d,a,c){a[b]=d;c[d]=b};a._toText=function(b,d,a){var c=a[b];if(c)return c;for(var c={},e,k=0;32>k;k++){e=1<<k;if(e>b)break;b&e&&(e=d[e])&&(c[e]="")}return a[b]=c};a._toInt=function(b,d){for(var a=b.split("."),c=0,f=0,k=a.length;f<k;f++){var m=d[a[f]];if(!m)throw Error("Defines to int err:"+b+"/"+a[f]);c|=m}return c};return a}(),Be=function(){function a(){}n(a,"laya.debug.tools.resizer.DisResizer");a.init=function(){a._up||(a._up=new Lb("T"),a._up.height=2,a._up.type=0,a._down=new Lb("T"),a._down.height=2,a._down.type=0,a._left=new Lb("R"),a._left.width=2,a._left.type=1,a._right=new Lb("R"),a._right.width=2,a._right.type=1,a._barList=[a._up,a._down,a._left,a._right],a.addEvent())};a.stageDown=function(c){c=c.target;a._tar&&wa.isInTree(a._tar,c)||a.clear()};a.clear=function(){a._tar=null;l.stage.off("mouseup",null,a.stageDown);wa.removeItems(a._barList);a.clearDragEvents()};a.addEvent=function(){var c,b,d;b=a._barList.length;for(c=0;c<b;c++)d=a._barList[c],d.on("mousedown",null,a.barDown)};a.barDown=function(c){a.clearDragEvents();a.tBar=c.target;a.tBar&&(c=new M,0==a.tBar.type?(c.x=a.tBar.x,c.width=0,c.y=a.tBar.y-200,c.height=400):(c.x=a.tBar.x-200,c.width=400,c.y=0,c.height=0),a.tBar.record(),a.tBar.startDrag(c),a.tBar.on("dragmove",null,a.draging),a.tBar.on("dragend",null,a.dragEnd))};a.draging=function(c){console.log("draging");if(a.tBar&&a._tar){switch(a.tBar){case a._left:a._tar.x+=a.tBar.getDx();a._tar.width-=a.tBar.getDx();a._up.width-=a.tBar.getDx();a._down.width-=a.tBar.getDx();a._right.x-=a.tBar.getDx();a.tBar.x-=a.tBar.getDx();break;case a._right:a._tar.width+=a.tBar.getDx();a._up.width+=a.tBar.getDx();a._down.width+=a.tBar.getDx();break;case a._up:a._tar.y+=a.tBar.getDy();a._tar.height-=a.tBar.getDy();a._right.height-=a.tBar.getDy();a._left.height-=a.tBar.getDy();a._down.y-=a.tBar.getDy();a.tBar.y-=a.tBar.getDy();break;case a._down:a._tar.height+=a.tBar.getDy(),a._right.height+=a.tBar.getDy(),a._left.height+=a.tBar.getDy()}a.tBar.record()}};a.dragEnd=function(c){console.log("dragEnd");a.clearDragEvents();a.updates()};a.clearDragEvents=function(){a.tBar&&(a.tBar.off("dragmove",null,a.draging),a.tBar.off("dragend",null,a.dragEnd))};a.setUp=function(c,b){void 0===b&&(b=!1);if(!b||c!=a._tar){wa.removeItems(a._barList);if(a._tar==c&&(a._tar=null,a.clearDragEvents(),!b))return;a._tar=c;a.updates();wa.addItems(a._barList,c);l.stage.off("mouseup",null,a.stageDown);l.stage.on("mouseup",null,a.stageDown)}};a.updates=function(){var c;if(c=a._tar)c=new M(0,0,c.width,c.height),a._up.x=c.x,a._up.y=c.y,a._up.width=c.width,a._down.x=c.x,a._down.y=c.y+c.height-2,a._down.width=c.width,a._left.x=c.x,a._left.y=c.y,a._left.height=c.height,a._right.x=c.x+c.width-2,a._right.y=c.y,a._right.height=c.height};a.Side=2;a.Vertical=1;a.Horizon=0;a._up=null;a._down=null;a._left=null;a._right=null;a._barList=null;a._tar=null;a.barWidth=2;a.useGetBounds=!1;a.tBar=null;return a}(),Ce=function(){function a(){this._data=[];this._ndata=0;this._tex=null;this._imgId=0;this._clipid=-1;this._enbale=!1;this._colorFiler=null;this._clipMatrix=new C}n(a,"laya.webgl.text.CharSubmitCache");var c=a.prototype;c.clear=function(){this._tex=null;this._imgId=-1;this._ndata=0;this._enbale=!1;this._colorFiler=null};c.destroy=function(){this.clear();this._data.length=0;this._data=null};c.add=function(b,d,a,c,f,k){0<this._ndata&&(this._tex!=d||this._imgId!=a||0<=this._clipid&&this._clipid!=b._clipInfoID)&&this.submit(b);this._clipid=b._clipInfoID;b._globalClipMatrix.copyTo(this._clipMatrix);this._tex=d;this._imgId=a;this._colorFiler=b._colorFiler;this._data[this._ndata]=c;this._data[this._ndata+1]=f;this._data[this._ndata+2]=k;this._ndata+=3};c.getPos=function(){return 0==a.__nPosPool?Array(8):a.__posPool[--a.__nPosPool]};c.enable=function(b,d){b!==this._enbale&&((this._enbale=b)||this.submit(d))};c.submit=function(b){var d=this._ndata;if(d){var c=b._mesh,h=b._colorFiler;b._colorFiler=this._colorFiler;var f=bb.create(b,c,ma.create(1,0));b._submits[b._submits._length++]=b._curSubmit=f;f.shaderValue.textureHost=this._tex;f._key.other=this._imgId;b._colorFiler=h;b._copyClipInfo(f,this._clipMatrix);f.clipInfoID=this._clipid;for(h=0;h<d;h+=3)c.addQuad(this._data[h],this._data[h+1],this._data[h+2],!0),a.__posPool[a.__nPosPool++]=this._data[h];d/=3;f._numEle+=6*d;c.indexNum+=6*d;c.vertNum+=4*d;b._drawCount+=d;this._ndata=0;0==I.loopCount%100&&(this._data.length=0)}};a.__posPool=[];a.__nPosPool=0;return a}(),Mc=function(){function a(b){this.childs=[];this.text="";this.name=this.parent=null;this.noCompile=!1;this.condition=this.includefiles=null;this.conditionType=0;this.useFuns="";this.z=0;this.src=null;this.includefiles=b}n(a,"laya.webgl.utils.ShaderNode");var c=a.prototype;c.setParent=function(b){b.childs.push(this);this.z=b.z+1;this.parent=b};c.setCondition=function(b,d){b&&(this.conditionType=d,b=b.replace(/(\s*$)/g,""),this.condition=function(){return this[b]},this.condition.__condition=b)};c.toscript=function(b,d){return this._toscript(b,d,++a.__id)};c._toscript=function(b,d,a){if(1>this.childs.length&&!this.text)return d;if(this.condition){var c=!!this.condition.call(b);2===this.conditionType&&(c=!c);if(!c)return d}this.text&&d.push(this.text);0<this.childs.length&&this.childs.forEach(function(c,e,h){c._toscript(b,d,a)});if(0<this.includefiles.length&&0<this.useFuns.length)for(var e=0,k=this.includefiles.length;e<k;e++)this.includefiles[e].curUseID!=a&&(c=this.includefiles[e].file.getFunsScript(this.useFuns),0<c.length&&(this.includefiles[e].curUseID=a,d[0]=c+d[0]));return d};a.__id=1;return a}(),O=function(){function a(){}n(a,"laya.layagl.LayaGL");var c=a.prototype;c.createCommandEncoder=function(b,d,a){void 0===b&&(b=128);void 0===d&&(d=64);void 0===a&&(a=!1);return new Xb(this,b,d,a)};c.beginCommandEncoding=function(b){};c.endCommandEncoding=function(){};c.matrix4x4Multiply=function(b,d,a){};c.evaluateClipDatasRealTime=function(b,d,a,c){};a.getFrameCount=function(){return 0};a.syncBufferToRenderThread=function(b,d){};a.createArrayBufferRef=function(b,d,a){};a.createArrayBufferRefs=function(b,d,a,c){};a.EXECUTE_JS_THREAD_BUFFER=0;a.EXECUTE_RENDER_THREAD_BUFFER=1;a.EXECUTE_COPY_TO_RENDER=2;a.EXECUTE_COPY_TO_RENDER3D=3;a.ARRAY_BUFFER_TYPE_DATA=0;a.ARRAY_BUFFER_TYPE_CMD=1;a.ARRAY_BUFFER_REF_REFERENCE=0;a.ARRAY_BUFFER_REF_COPY=1;a.UPLOAD_SHADER_UNIFORM_TYPE_ID=0;a.UPLOAD_SHADER_UNIFORM_TYPE_DATA=1;a.instance=null;return a}(),q=function(){function a(){}n(a,"laya.utils.Browser");g(1,a,"pixelRatio",function(){if(0>a._pixelRatio)if(a.__init__(),-1<a.userAgent.indexOf("Mozilla/6.0(Linux; Android 6.0; HUAWEI NXT-AL10 Build/HUAWEINXT-AL10)"))a._pixelRatio=2;else{var c=a.context;a._pixelRatio=(a._window.devicePixelRatio||1)/(c.backingStorePixelRatio||c.webkitBackingStorePixelRatio||c.mozBackingStorePixelRatio||c.msBackingStorePixelRatio||c.oBackingStorePixelRatio||c.backingStorePixelRatio||1);1>a._pixelRatio&&(a._pixelRatio=1)}return a._pixelRatio});g(1,a,"height",function(){a.__init__();return(l.stage&&l.stage.canvasRotation?a.clientWidth:a.clientHeight)*a.pixelRatio});g(1,a,"clientWidth",function(){a.__init__();return a._window.innerWidth||a._document.body.clientWidth});g(1,a,"window",function(){return a._window||a.__init__()});g(1,a,"clientHeight",function(){a.__init__();return a._window.innerHeight||a._document.body.clientHeight||a._document.documentElement.clientHeight});g(1,a,"width",function(){a.__init__();return(l.stage&&l.stage.canvasRotation?a.clientHeight:a.clientWidth)*a.pixelRatio});g(1,a,"container",function(){a._container||(a.__init__(),a._container=a.createElement("div"),a._container.id="layaContainer",a._document.body.appendChild(a._container));return a._container},function(c){a._container=c});g(1,a,"document",function(){a.__init__();return a._document});a.__init__=function(){if(a._window)return a._window;var c=a._window=w,b=a._document=c.document,d=a.userAgent=c.navigator.userAgent,e=c._layalibs;if(e){e.sort(function(d,b){return d.i>b.i});for(var h=0;h<e.length;h++)e[h].f(c,b,l)}-1<d.indexOf("MiniGame")&&a.window.hasOwnProperty("wx")&&(l.MiniAdpter?l.MiniAdpter.enable():console.error("\u8bf7\u5148\u6dfb\u52a0\u5c0f\u6e38\u620f\u9002\u914d\u5e93,\u8be6\u7ec6\u6559\u7a0b\uff1ahttps://ldc2.layabox.com/doc/?nav\x3dzh-ts-5-0-0"));-1<d.indexOf("SwanGame")&&(l.BMiniAdapter?l.BMiniAdapter.enable():console.error("\u8bf7\u5148\u6dfb\u52a0\u767e\u5ea6\u5c0f\u6e38\u620f\u9002\u914d\u5e93,\u8be6\u7ec6\u6559\u7a0b\uff1ahttps://ldc2.layabox.com/doc/?nav\x3dzh-ts-5-0-0"));"function"==typeof getApp&&(l.KGMiniAdapter?l.KGMiniAdapter.enable():console.error("\u8bf7\u5148\u6dfb\u52a0\u5c0f\u7c73\u5c0f\u6e38\u620f\u9002\u914d\u5e93,\u8be6\u7ec6\u6559\u7a0b\uff1ahttps://ldc2.layabox.com/doc/?nav\x3dzh-ts-5-0-0"));-1<d.indexOf("QGGame")&&(l.QGMiniAdapter?l.QGMiniAdapter.enable():console.error("\u8bf7\u5148\u6dfb\u52a0OPPO\u5c0f\u6e38\u620f\u9002\u914d\u5e93"));c.trace=console.log;c.requestAnimationFrame=c.requestAnimationFrame||c.webkitRequestAnimationFrame||c.mozRequestAnimationFrame||c.oRequestAnimationFrame||c.msRequestAnimationFrame||function(d){return c.setTimeout(d,1E3/60)};e=b.body.style;e.margin=0;e.overflow="hidden";e["-webkit-user-select"]="none";e["-webkit-tap-highlight-color"]="rgba(200,200,200,0)";for(var h=b.getElementsByTagName("meta"),e=0,f=!1;e<h.length;){var k=h[e];if("viewport"==k.name){k.content="width\x3ddevice-width,initial-scale\x3d1.0,minimum-scale\x3d1.0,maximum-scale\x3d1.0,user-scalable\x3dno";f=!0;break}e++}f||(k=b.createElement("meta"),k.name="viewport",k.content="width\x3ddevice-width,initial-scale\x3d1.0,minimum-scale\x3d1.0,maximum-scale\x3d1.0,user-scalable\x3dno",b.getElementsByTagName("head")[0].appendChild(k));a.onMobile=w.isConchApp?!0:-1<d.indexOf("Mobile");a.onIOS=!!d.match(/\(i[^;]+;(U;)? CPU.+Mac OS X/);a.onIPhone=-1<d.indexOf("iPhone");a.onMac=-1<d.indexOf("Mac OS X");a.onIPad=-1<d.indexOf("iPad");a.onAndroid=-1<d.indexOf("Android")||-1<d.indexOf("Adr");a.onWP=-1<d.indexOf("Windows Phone");a.onQQBrowser=-1<d.indexOf("QQBrowser");a.onMQQBrowser=-1<d.indexOf("MQQBrowser")||-1<d.indexOf("Mobile")&&-1<d.indexOf("QQ");a.onIE=!!c.ActiveXObject||"ActiveXObject"in c;a.onWeiXin=-1<d.indexOf("MicroMessenger");a.onSafari=-1<d.indexOf("Safari");a.onPC=!a.onMobile;a.onMiniGame=-1<d.indexOf("MiniGame");a.onBDMiniGame=-1<d.indexOf("SwanGame");a.onQGMiniGame=-1<d.indexOf("QGGame");a.onLimixiu=-1<d.indexOf("limixiu");a.onKGMiniGame=-1<d.indexOf("QuickGame");a.supportLocalStorage=kb.__init__();a.supportWebAudio=X.__init__();a.onMiniGame&&("qq"==("undefined"===typeof qq?"wechat":"qq")?a.inQQ=!0:a.inWeChat=!0);console.log("Browser.onMobile---"+a.onMobile+"---Browser.onIOS--"+a.onIOS+"---Browser.onIPhone--"+a.onIPhone+"---Browser.onMac--"+a.onMac+"---Browser.onIPad--"+a.onIPad+"---Browser.onAndroid--"+a.onAndroid+"---Browser.onWP--"+a.onWP+"---Browser.onQQBrowser--"+a.onQQBrowser+"---Browser.onMQQBrowser--"+a.onMQQBrowser+"---Browser.onIE--"+a.onIE+"---Browser.onWeiXin--"+a.onWeiXin+"---Browser.onSafari--"+a.onSafari+"---Browser.onPC--"+a.onPC+"---Browser.onMiniGame--"+a.onMiniGame+"---Browser.onBDMiniGame--"+a.onBDMiniGame+"---Browser.onQGMiniGame--"+a.onQGMiniGame+"---Browser.onLimixiu--"+a.onLimixiu+"---Browser.onKGMiniGame--"+a.onKGMiniGame+"---Browser.supportLocalStorage--"+a.supportLocalStorage+"---Browser.supportWebAudio--"+a.supportWebAudio+"---Browser._mainCanvas--"+a._mainCanvas);r._mainCanvas=new xa(!0);b=r._mainCanvas.source.style;b.position="absolute";b.top=b.left="0px";b.background="#000000";a.canvas=new xa(!0);a.context=a.canvas.getContext("2d");b=new xa(!0);laya.utils.Browser.onQGMiniGame&&(b=r._mainCanvas);d=["webgl","experimental-webgl","webkit-3d","moz-webgl"];h=null;for(e=0;e<d.length;e++){try{h=b.source.getContext(d[e])}catch(m){}if(h){a._supportWebGL=!0;break}}return c};a.createElement=function(c){a.__init__();return a._document.createElement(c)};a.getElementById=function(c){a.__init__();return a._document.getElementById(c)};a.removeElement=function(a){a&&a.parentNode&&a.parentNode.removeChild(a)};a.now=function(){return Date.now()};a.userAgent=null;a.onMobile=!1;a.onIOS=!1;a.onMac=!1;a.onIPhone=!1;a.onIPad=!1;a.onAndroid=!1;a.onWP=!1;a.onQQBrowser=!1;a.onMQQBrowser=!1;a.onSafari=!1;a.onIE=!1;a.onWeiXin=!1;a.onPC=!1;a.onMiniGame=!1;a.onBDMiniGame=!1;a.onKGMiniGame=!1;a.onQGMiniGame=!1;a.onLimixiu=!1;a.onFirefox=!1;a.onEdge=!1;a.supportWebAudio=!1;a.supportLocalStorage=!1;a.canvas=null;a.context=null;a._window=null;a._document=null;a._container=null;a._pixelRatio=-1;a._supportWebGL=!1;a.inWeChat=!1;a.inQQ=!1;return a}(),sa=function(){function a(){}n(a,"laya.ui.UIUtils");a.fillArray=function(a,b,d){a=a.concat();if(b){b=b.split(",");for(var c=0,h=Math.min(a.length,b.length);c<h;c++){var f=b[c];a[c]="true"==f?!0:"false"==f?!1:f;null!=d&&(a[c]=d(f))}}return a};a.toColor=function(a){return U.toHexColor(a)};a.gray=function(c,b){void 0===b&&(b=!0);b?a.addFilter(c,a.grayFilter):a.clearFilter(c,pb)};a.addFilter=function(a,b){var d=a.filters||[];d.push(b);a.filters=d};a.clearFilter=function(a,b){var d=a.filters;if(null!=d&&0<d.length){for(var c=d.length-1;-1<c;c--)l.__typeof(d[c],b)&&d.splice(c,1);a.filters=d}};a._getReplaceStr=function(c){return a.escapeSequence[c]};a.adptString=function(c){return c.replace(/\\(\w)/g,a._getReplaceStr)};a.getBindFun=function(c){var b=a._funMap.get(c);null==b&&(b="(function(data){if(data\x3d\x3dnull)return;with(data){try{\nreturn "+('"'+c+'"').replace(/^"\${|}"$/g,"").replace(/\${/g,'"+').replace(/}/g,'+"')+"\n}catch(e){}}})",b=l._runScript(b),a._funMap.set(c,b));return b};u(a,["grayFilter",function(){return this.grayFilter=new pb([.3086,.6094,.082,0,0,.3086,.6094,.082,0,0,.3086,.6094,.082,0,0,0,0,0,1,0])},"escapeSequence",function(){return this.escapeSequence={"\\n":"\n","\\t":"\t"}},"_funMap",function(){return this._funMap=new Xa}]);return a}(),Od=function(){function a(){}n(a,"laya.display.cmd.DrawRectCmd");var c=a.prototype;c.recover=function(){this.lineColor=this.fillColor=null;v.recover("DrawRectCmd",this)};c.run=function(b,d,a){b.drawRect(this.x+d,this.y+a,this.width,this.height,this.fillColor,this.lineColor,this.lineWidth)};g(0,c,"cmdID",function(){return"DrawRect"});a.create=function(b,d,c,h,f,k,m){var e=v.getItemByClass("DrawRectCmd",a);e.x=b;e.y=d;e.width=c;e.height=h;e.fillColor=f;e.lineColor=k;e.lineWidth=m;return e};a.ID="DrawRect";return a}(),mc=function(){function a(a,b,d){this.steiner=this.nextZ=this.prevZ=this.z=this.next=this.prev=this.y=this.x=this.i=null;this.i=a;this.x=b;this.y=d;this.nextZ=this.prevZ=this.z=this.next=this.prev=null;this.steiner=!1}n(a,"laya.webgl.shapes.EarcutNode");return a}(),De=function(){function a(){this.name=null;this.slotArr=[]}n(a,"laya.ani.bone.SkinData");return a}(),Hc=function(){function a(){}n(a,"laya.html.utils.Layout");a.later=function(c){null==a._will&&(a._will=[],l.stage.frameLoop(1,null,function(){if(!(1>a._will.length)){for(var b=0;b<a._will.length;b++)laya.html.utils.Layout.layout(a._will[b]);a._will.length=0}}));a._will.push(c)};a.layout=function(c){if(!c||!c._style||0===(c._style._type&512))return null;c.style._type&=-513;return a._multiLineLayout(c)};a._multiLineLayout=function(c){function b(){V.y=N;N+=V.h+k;V.mWidth=H;H=0;V=new Tc;A.push(V);q=V.h=0;J=!0;w=!1}var d=[];c._addChildsToLayout(d);var e=0,h=d.length,e=c._getCSSStyle(),f=e.letterSpacing,k=e.leading,m=e.lineHeight,p=e._widthAuto()||!e.wordWrap,t=p?999999:c.width,g=0,l=e.italic?e.fontSize/3:0,n=e.align,E=e.valign,G="top"!==E||"left"!==n||0!=m,y,q=0,N=0,r=0,u=0,A=[],v,V=A[0]=new Tc,w=!1,x=!1,C;V.h=0;e.italic&&(t-=e.fontSize/3);for(var H=0,J=!0,e=0;e<h;e++)if(y=d[e],null==y)J||(q+=a.DIV_ELEMENT_PADDING),V.wordStartIndex=V.elements.length;else if(J=!1,y instanceof laya.html.dom.HTMLBrElement)b(),V.y=N,V.h=m;else{if(y._isChar()){v=y;if(v.isWord)w=x||"\n"===v.char,V.wordStartIndex=V.elements.length;else{if(0<A.length&&q+r>t&&0<V.wordStartIndex){y=0;y=V.elements.length-V.wordStartIndex+1;V.elements.length=V.wordStartIndex;e-=y;b();continue}w=!1;H+=v.width}r=v.width+v.style.letterSpacing;u=v.height;x=!1;(w=w||q+r>t)&&b();V.minTextHeight=Math.min(V.minTextHeight,y.height)}else v=y._getCSSStyle(),C=y,u=v.padding,w=x||v.getLineElement(),r=C.width+u[1]+u[3]+v.letterSpacing,u=C.height+u[0]+u[2],x=v.getLineElement(),(w=w||q+r>t&&v.wordWrap)&&b();V.elements.push(y);V.h=Math.max(V.h,u);y.x=q;y.y=N;q+=r;V.w=q-f;V.y=N;g=Math.max(q+l,g)}N=V.y+V.h;if(G){d=0;p&&0<c.width&&(t=c.width);e=0;for(h=A.length;e<h;e++)A[e].updatePos(0,t,e,d,n,E,m),d+=Math.max(m,A[e].h+k);N=d}p&&(c.width=g);N>c.height&&(c.height=N);return[g,N]};a.DIV_ELEMENT_PADDING=0;a._will=null;return a}(),Ee=function(){function a(){this.boneSlot=null;this.slotIndex=-1;this.deformData=this.attachment=null;this.frameIndex=0;this.timeList=[];this.vectices=[];this.tweenKeyList=[]}n(a,"laya.ani.bone.DeformSlotDisplayData");var c=a.prototype;c.binarySearch1=function(b,d){var a=0,c=b.length-2;if(0==c)return 1;for(var f=c>>>1;;){b[Math.floor(f+1)]<=d?a=f+1:c=f;if(a==c)return a+1;f=a+c>>>1}};c.apply=function(b,d,a){void 0===a&&(a=1);b+=.05;if(!(0>=this.timeList.length||b<this.timeList[0])){d=this.vectices[0].length;var c=[],e=this.binarySearch1(this.timeList,b);this.frameIndex=e;if(b>=this.timeList[this.timeList.length-1]){var k=this.vectices[this.vectices.length-1];if(1>a)for(b=0;b<d;b++)c[b]+=(k[b]-c[b])*a;else for(b=0;b<d;b++)c[b]=k[b]}else{var k=this.vectices[this.frameIndex-1],m=this.vectices[this.frameIndex];a=this.timeList[this.frameIndex-1];var p=this.timeList[this.frameIndex];a=this.tweenKeyList[e-1]?(b-a)/(p-a):0;for(b=0;b<d;b++)e=k[b],c[b]=e+(m[b]-e)*a}this.deformData=c}};return a}(),Fe=function(){function a(){}n(a,"laya.debug.tools.Watcher");a.watch=function(a,b,d){jb.hookVar(a,b,d)};a.traceChange=function(c,b,d){void 0===d&&(d="var changed:");jb.hookVar(c,b,[a.getTraceValueFun(b),jb.getLocFun(d)])};a.debugChange=function(a,b){jb.hookVar(a,b,[jb.getLocFun("debug loc"),Na.debugHere])};a.differChange=function(c,b,d,e){void 0===e&&(e="");jb.hookVar(c,b,[a.getDifferFun(c,b,d,e)])};a.getDifferFun=function(a,b,d,e){void 0===e&&(e="");return function(){re.differ(d,a[b],e)}};a.traceValue=function(a){console.log("value:",a)};a.getTraceValueFun=function(a){return function(b){console.log("set "+a+" :",b)}};return a}(),vd=function(){function a(){}n(a,"laya.display.cmd.DrawTexturesCmd");var c=a.prototype;c.recover=function(){this.texture._removeReference();this.pos=this.texture=null;v.recover("DrawTexturesCmd",this)};c.run=function(b,d,a){b.drawTextures(this.texture,this.pos,d,a)};g(0,c,"cmdID",function(){return"DrawTextures"});a.create=function(b,d){var c=v.getItemByClass("DrawTexturesCmd",a);c.texture=b;b._addReference();c.pos=d;return c};a.ID="DrawTextures";return a}(),Pa=function(){function a(){}n(a,"laya.utils.Ease");a.linearNone=function(a,b,d,e){return d*a/e+b};a.linearIn=function(a,b,d,e){return d*a/e+b};a.linearInOut=function(a,b,d,e){return d*a/e+b};a.linearOut=function(a,b,d,e){return d*a/e+b};a.bounceIn=function(c,b,d,e){return d-a.bounceOut(e-c,0,d,e)+b};a.bounceInOut=function(c,b,d,e){return c<.5*e?.5*a.bounceIn(2*c,0,d,e)+b:.5*a.bounceOut(2*c-e,0,d,e)+.5*d+b};a.bounceOut=function(a,b,d,e){return(a/=e)<1/2.75?7.5625*d*a*a+b:a<2/2.75?d*(7.5625*(a-=1.5/2.75)*a+.75)+b:a<2.5/2.75?d*(7.5625*(a-=2.25/2.75)*a+.9375)+b:d*(7.5625*(a-=2.625/2.75)*a+.984375)+b};a.backIn=function(a,b,d,e,h){void 0===h&&(h=1.70158);return d*(a/=e)*a*((h+1)*a-h)+b};a.backInOut=function(a,b,d,e,h){void 0===h&&(h=1.70158);return 1>(a/=.5*e)?.5*d*a*a*(((h*=1.525)+1)*a-h)+b:d/2*((a-=2)*a*(((h*=1.525)+1)*a+h)+2)+b};a.backOut=function(a,b,d,e,h){void 0===h&&(h=1.70158);return d*((a=a/e-1)*a*((h+1)*a+h)+1)+b};a.elasticIn=function(c,b,d,e,h,f){void 0===h&&(h=0);void 0===f&&(f=0);if(0==c)return b;if(1==(c/=e))return b+d;f||(f=.3*e);!h||0<d&&h<d||0>d&&h<-d?(h=d,d=f/4):d=f/a.PI2*Math.asin(d/h);return-(h*Math.pow(2,10*--c)*Math.sin((c*e-d)*a.PI2/f))+b};a.elasticInOut=function(c,b,d,e,h,f){void 0===h&&(h=0);void 0===f&&(f=0);var k;if(0==c)return b;if(2==(c/=.5*e))return b+d;f||(f=.3*e*1.5);!h||0<d&&h<d||0>d&&h<-d?(h=d,k=f/4):k=f/a.PI2*Math.asin(d/h);return 1>c?-.5*h*Math.pow(2,10*--c)*Math.sin((c*e-k)*a.PI2/f)+b:h*Math.pow(2,-10*--c)*Math.sin((c*e-k)*a.PI2/f)*.5+d+b};a.elasticOut=function(c,b,d,e,h,f){void 0===h&&(h=0);void 0===f&&(f=0);var k;if(0==c)return b;if(1==(c/=e))return b+d;f||(f=.3*e);!h||0<d&&h<d||0>d&&h<-d?(h=d,k=f/4):k=f/a.PI2*Math.asin(d/h);return h*Math.pow(2,-10*c)*Math.sin((c*e-k)*a.PI2/f)+d+b};a.strongIn=function(a,b,d,e){return d*(a/=e)*a*a*a*a+b};a.strongInOut=function(a,b,d,e){return 1>(a/=.5*e)?.5*d*a*a*a*a*a+b:.5*d*((a-=2)*a*a*a*a+2)+b};a.strongOut=function(a,b,d,e){return d*((a=a/e-1)*a*a*a*a+1)+b};a.sineInOut=function(a,b,d,e){return.5*-d*(Math.cos(Math.PI*a/e)-1)+b};a.sineIn=function(c,b,d,e){return-d*Math.cos(c/e*a.HALF_PI)+d+b};a.sineOut=function(c,b,d,e){return d*Math.sin(c/e*a.HALF_PI)+b};a.quintIn=function(a,b,d,e){return d*(a/=e)*a*a*a*a+b};a.quintInOut=function(a,b,d,e){return 1>(a/=.5*e)?.5*d*a*a*a*a*a+b:.5*d*((a-=2)*a*a*a*a+2)+b};a.quintOut=function(a,b,d,e){return d*((a=a/e-1)*a*a*a*a+1)+b};a.quartIn=function(a,b,d,e){return d*(a/=e)*a*a*a+b};a.quartInOut=function(a,b,d,e){return 1>(a/=.5*e)?.5*d*a*a*a*a+b:.5*-d*((a-=2)*a*a*a-2)+b};a.quartOut=function(a,b,d,e){return-d*((a=a/e-1)*a*a*a-1)+b};a.cubicIn=function(a,b,d,e){return d*(a/=e)*a*a+b};a.cubicInOut=function(a,b,d,e){return 1>(a/=.5*e)?.5*d*a*a*a+b:.5*d*((a-=2)*a*a+2)+b};a.cubicOut=function(a,b,d,e){return d*((a=a/e-1)*a*a+1)+b};a.quadIn=function(a,b,d,e){return d*(a/=e)*a+b};a.quadInOut=function(a,b,d,e){return 1>(a/=.5*e)?.5*d*a*a+b:.5*-d*(--a*(a-2)-1)+b};a.quadOut=function(a,b,d,e){return-d*(a/=e)*(a-2)+b};a.expoIn=function(a,b,d,e){return 0==a?b:d*Math.pow(2,10*(a/e-1))+b-.001*d};a.expoInOut=function(a,b,d,e){return 0==a?b:a==e?b+d:1>(a/=.5*e)?.5*d*Math.pow(2,10*(a-1))+b:.5*d*(-Math.pow(2,-10*--a)+2)+b};a.expoOut=function(a,b,d,e){return a==e?b+d:d*(-Math.pow(2,-10*a/e)+1)+b};a.circIn=function(a,b,d,e){return-d*(Math.sqrt(1-(a/=e)*a)-1)+b};a.circInOut=function(a,b,d,e){return 1>(a/=.5*e)?.5*-d*(Math.sqrt(1-a*a)-1)+b:.5*d*(Math.sqrt(1-(a-=2)*a)+1)+b};a.circOut=function(a,b,d,e){return d*Math.sqrt(1-(a=a/e-1)*a)+b};a.HALF_PI=.5*Math.PI;a.PI2=2*Math.PI;return a}(),Ge=function(){function a(){}n(a,"laya.filters.GlowFilterGLRender");var c=a.prototype;c.setShaderInfo=function(b,d,a,c){b.defines.add(c.type);b.u_blurInfo1=c._sv_blurInfo1;var e=c._sv_blurInfo2;e[0]=d;e[1]=a;b.u_blurInfo2=e;b.u_color=c.getColor()};c.render=function(b,d,a,c,f){var e=ma.create(1,0);this.setShaderInfo(e,a,c,f);f=ma.create(1,0);var h=C.TEMP.identity();d.drawTarget(b,0,0,a,c,h,e);d.drawTarget(b,0,0,a,c,h,f)};return a}(),ye=function(){function a(){}n(a,"laya.debug.tools.MouseEventAnalyser");a.analyseNode=function(c){qa.showDisBound(c,!0);var b;b=c;oa.clearObj(a.infoO);oa.clearObj(a.nodeO);oa.clearObj(a.hitO);var d;for(d=[];c;)S.idObj(c),a.nodeO[S.getObjID(c)]=c,d.push(c),c=c.parent;a.check(l.stage,l.stage.mouseX,l.stage.mouseY,null);a.hitO[S.getObjID(b)]?(console.log("can hit"),c="can hit"):(console.log("can't hit"),c="can't hit");var e;d=d.reverse();e=d.length;var h;h=["[\u5206\u6790\u5bf9\u8c61]:"+ha.getNodeClassAndName(b)+":"+c];for(b=0;b<e;b++)c=d[b],a.hitO[S.getObjID(c)]?(console.log("can hit:",ha.getNodeClassAndName(c)),console.log("\u539f\u56e0:",a.infoO[S.getObjID(c)]),h.push("can hit: "+ha.getNodeClassAndName(c)),h.push("\u539f\u56e0: "+a.infoO[S.getObjID(c)])):(console.log("can't hit:"+ha.getNodeClassAndName(c)),console.log("\u539f\u56e0:",a.infoO[S.getObjID(c)]?a.infoO[S.getObjID(c)]:"\u9f20\u6807\u4e8b\u4ef6\u5728\u7236\u7ea7\u5df2\u505c\u6b62\u6d3e\u53d1"),h.push("can't hit: "+ha.getNodeClassAndName(c)),h.push("\u539f\u56e0: "+(a.infoO[S.getObjID(c)]?a.infoO[S.getObjID(c)]:"\u9f20\u6807\u4e8b\u4ef6\u5728\u7236\u7ea7\u5df2\u505c\u6b62\u6d3e\u53d1")));h.join("\n")};a.check=function(c,b,d,e){S.idObj(c);var h;h=a.nodeO[S.getObjID(c)];a._point.setTo(b,d);c.fromParentPoint(a._point);b=a._point.x;d=a._point.y;var f=c.scrollRect;if(f){a._rect.setTo(f.x,f.y,f.width,f.height);var k=a._rect.contains(b,d);if(!k)return h&&(a.infoO[S.getObjID(c)]="scrollRect\u6ca1\u6709\u5305\u542b\u9f20\u6807"+a._rect.toString()+":"+b+","+d),!1}var m,p;p=c._children;m=p.length;var t;t=null;for(h=0;h<m;h++)if(f=p[h],S.idObj(f),a.nodeO[S.getObjID(f)]){t=f;break}m=t?!0:!1;if(c.hitTestPrior&&!c.mouseThrough&&!a.hitTest(c,b,d))return a.infoO[S.getObjID(c)]="hitTestPrior\x3dtrue\uff0c\u5bbd\u9ad8\u533a\u57df\u4e0d\u5305\u542b\u9f20\u6807::"+b+","+d+" size:"+c.width+","+c.height,!1;for(h=c._children.length-1;-1<h;h--)if(f=c._children[h],f==t&&(t.mouseEnabled||(a.infoO[S.getObjID(t)]="mouseEnabled\x3dfalse"),t.visible||(a.infoO[S.getObjID(t)]="visible\x3dfalse"),m=!1),f.mouseEnabled&&f.visible){if(p=a.check(f,b,d,e))return a.hitO[S.getObjID(c)]=!0,a.infoO[S.getObjID(c)]="\u5b50\u5bf9\u8c61\u88ab\u51fb\u4e2d",f==t?a.infoO[S.getObjID(c)]="\u5b50\u5bf9\u8c61\u88ab\u51fb\u4e2d,\u51fb\u4e2d\u5bf9\u8c61\u5728\u5206\u6790\u94fe\u4e2d":(a.infoO[S.getObjID(c)]="\u5b50\u5bf9\u8c61\u88ab\u51fb\u4e2d,\u51fb\u4e2d\u5bf9\u8c61\u4e0d\u5728\u5206\u6790\u94fe\u4e2d",m&&(a.infoO[S.getObjID(t)]="\u88ab\u5144\u5f1f\u8282\u70b9\u6321\u4f4f,\u5144\u5f1f\u8282\u70b9\u4fe1\u606f:"+ha.getNodeClassAndName(f)+","+f.getBounds().toString(),qa.showDisBound(f,!1,"#ffff00"))),!0;f==t&&(m=!1)}e=new M;h=c.getGraphicBounds().contains(b,d);0<c.width&&0<c.height&&(k=a._rect,c.mouseThrough?(k=h,e.copyFrom(c.getGraphicBounds())):(c.hitArea?k=c.hitArea:k.setTo(0,0,c.width,c.height),e.copyFrom(k),k=k.contains(b,d)),k&&(a.hitO[S.getObjID(c)]=!0));k?a.infoO[S.getObjID(c)]="\u81ea\u8eab\u533a\u57df\u88ab\u51fb\u4e2d":h?a.infoO[S.getObjID(c)]="\u5b50\u5bf9\u8c61\u672a\u5305\u542b\u9f20\u6807\uff0c\u5b9e\u9645\u7ed8\u56fe\u533a\u57df\u5305\u542b\u9f20\u6807\uff0c\u8bbe\u7f6e\u7684\u5bbd\u9ad8\u533a\u57df\u4e0d\u5305\u542b\u9f20\u6807::"+b+","+d+" hitRec:"+e.toString()+" graphicBounds:"+c.getGraphicBounds().toString()+"\uff0c\u8bbe\u7f6emouseThrough\x3dtrue\u6216\u5c06\u5bbd\u9ad8\u8bbe\u7f6e\u5230\u5b9e\u9645\u7ed8\u56fe\u533a\u57df\u53ef\u89e3\u51b3\u95ee\u9898":a.infoO[S.getObjID(c)]="\u5b50\u5bf9\u8c61\u672a\u5305\u542b\u9f20\u6807\uff0c\u5b9e\u9645\u7ed8\u56fe\u533a\u57df\u4e0d\u5305\u542b\u9f20\u6807\uff0c\u8bbe\u7f6e\u7684\u5bbd\u9ad8\u533a\u57df\u4e0d\u5305\u542b\u9f20\u6807::"+b+","+d+" hitRec:"+e.toString()+" graphicBounds:"+c.getGraphicBounds().toString();return k};a.hitTest=function(c,b,d){var e=!1;if(c.hitArea instanceof laya.utils.HitArea)return c.hitArea.isHit(b,d);if(0<c.width&&0<c.height||c.mouseThrough||c.hitArea)e=a._rect,c.mouseThrough?e=c.getGraphicBounds().contains(b,d):(c.hitArea?e=c.hitArea:e.setTo(0,0,c.width,c.height),e=e.contains(b,d));return e};a.infoO={};a.nodeO={};a.hitO={};u(a,["_matrix",function(){return this._matrix=new C},"_point",function(){return this._point=new P},"_rect",function(){return this._rect=new M}]);return a}(),Uc=function(){function a(){this.duration=this.startTime=NaN;this.nextData=this.dData=this.data=this.interpolationData=null}n(a,"laya.ani.KeyFramesContent");return a}(),Na=function(){function a(){}n(a,"laya.debug.tools.hook.FunHook");a.hook=function(c,b,d,e){a.hookFuns(c,b,[d,c[b],e],1)};a.hookAllFun=function(c){var b,d;d=ha.getOwnPropertyNames(c);for(b in d)b=d[b],a.special[b]||(console.log("try hook:",b),"function"==typeof c[b]&&(console.log("hook:",b),a.hookFuns(c,b,[a.getTraceMsg("call:"+b),c[b]],1)));c.__proto__?a.hookAllFun(c.__proto__):console.log("end:",c)};a.getTraceMsg=function(a){return function(){console.log(a)}};a.hookFuns=function(a,b,d,e){void 0===e&&(e=-1);var c=a[b],f;f=function(b){var a=arguments,c,h,f;f=d.length;for(h=0;h<f;h++)d[h]&&(h==e?c=d[h].apply(this,a):d[h].apply(this,a));return c};f.pre=c;a[b]=f};a.removeHook=function(a,b){null!=a[b].pre&&(a[b]=a[b].pre)};a.debugHere=function(){debugger};a.traceLoc=function(a,b){void 0===a&&(a=0);void 0===b&&(b="");console.log(b,"fun loc:",ab.getCallLoc(3+a))};a.getLocFun=function(c,b){void 0===c&&(c=0);void 0===b&&(b="");c+=1;return function(){a.traceLoc(c,b)}};u(a,["special",function(){return this.special={length:!0,name:!0,arguments:!0,caller:!0,prototype:!0,is:!0,isExtensible:!0,isFrozen:!0,isSealed:!0,preventExtensions:!0,seal:!0,unobserve:!0,apply:!0,call:!0,bind:!0,freeze:!0,unobserve:!0}}]);return a}(),S=function(){function a(){this.tID=1}n(a,"laya.debug.tools.IDTools");a.prototype.getID=function(){return this.tID++};a.getAID=function(){return a._ID.getID()};a.idObjE=function(c,b){void 0===b&&(b="default");if(c._M_id_)return c;b||(b="default");a._idDic[b]||(a._idDic[b]=new a);c._M_id_=a._idDic[b].getAID();return c};a.setObjID=function(a,b){a._M_id_=b;return a};a.idObj=function(c){if(c._M_id_)return c;c._M_id_=a.getAID();return c};a.getObjID=function(a){return a?a._M_id_:-1};a.idSign="_M_id_";u(a,["_ID",function(){return this._ID=new a},"_idDic",function(){return this._idDic={"default":new a}}]);return a}(),Da=function(){function a(b,d){if(Z.map[b])this._fun=Z.map[b],this._next=a.NORENDER;else{this._next=d||a.NORENDER;switch(b){case 0:this._fun=this._no;return;case 1:this._fun=this._alpha;return;case 2:this._fun=this._transform;return;case 4:this._fun=this._blend;return;case 8:this._fun=this._canvas;return;case 32:this._fun=this._mask;return;case 64:this._fun=this._clip;return;case 128:this._fun=this._style;return;case 512:this._fun=this._graphics;return;case 8192:this._fun=this._children;return;case 2048:this._fun=this._custom;return;case 256:this._fun=this._texture;return;case 16:this._fun=rb._filter;return;case 69905:this._fun=a._initRenderFun;return}this.onCreate(b)}}n(a,"laya.renders.RenderSprite");var c=a.prototype;c.onCreate=function(b){};c._style=function(b,d,a,c){var e=b._style;null!=e.render&&e.render(b,d,a,c);e=this._next;e._fun.call(e,b,d,a,c)};c._no=function(b,d,a,c){};c._custom=function(b,d,a,c){b.customRender(d,a,c);this._next._fun.call(this._next,b,d,a-b.pivotX,c-b.pivotY)};c._clip=function(b,d,c,h){var e=this._next;if(e!=a.NORENDER){var k=b._style.scrollRect;d.save();d.clipRect(c,h,k.width,k.height);e._fun.call(e,b,d,c-k.x,h-k.y);d.restore()}};c._blend=function(b,d,a,c){var e=b._style;e.blendMode&&(d.globalCompositeOperation=e.blendMode);e=this._next;e._fun.call(e,b,d,a,c);d.globalCompositeOperation="source-over"};c._mask=function(b,d,a,c){var e=this._next;e._fun.call(e,b,d,a,c);if(e=b.mask){d.globalCompositeOperation="destination-in";if(0<e.numChildren||!e.graphics._isOnlyOne())e.cacheAs="bitmap";e.render(d,a-b._style.pivotX,c-b._style.pivotY)}d.globalCompositeOperation="source-over"};c._texture=function(b,d,c,h){var e=b.texture;e._getSource()&&d.drawTexture(e,c-b.pivotX+e.offsetX,h-b.pivotY+e.offsetY,b._width||e.width,b._height||e.height);e=this._next;e!=a.NORENDER&&e._fun.call(e,b,d,c,h)};c._graphics=function(b,d,c,h){var e=b._style,k=b._graphics;k&&k._render(b,d,c-e.pivotX,h-e.pivotY);e=this._next;e!=a.NORENDER&&e._fun.call(e,b,d,c,h)};c._image=function(b,d,a,c){var e=b._style;d.drawTexture2(a,c,e.pivotX,e.pivotY,b.transform,b._graphics._one)};c._image2=function(b,d,a,c){var e=b._style;d.drawTexture2(a,c,e.pivotX,e.pivotY,b.transform,b._graphics._one)};c._alpha=function(b,d,a,c){var e;if(.01<(e=b._style.alpha)||b._needRepaint()){var h=d.globalAlpha;d.globalAlpha*=e;e=this._next;e._fun.call(e,b,d,a,c);d.globalAlpha=h}};c._transform=function(b,d,c,h){var e=b.transform,k=this._next;e&&k!=a.NORENDER?(d.save(),d.transform(e.a,e.b,e.c,e.d,e.tx+c,e.ty+h),k._fun.call(k,b,d,0,0),d.restore()):k!=a.NORENDER&&k._fun.call(k,b,d,c,h)};c._children=function(b,d,a,c){var e=b._style,h=b._children,m=h.length,p;a-=b.pivotX;c-=b.pivotY;b=b._getBit(256)&&d.drawCallOptimize(!0);if(e.viewport)for(var t=e.viewport,e=t.x,g=t.y,l=t.right,t=t.bottom,n=NaN,E=NaN,G=0;G<m;++G)(p=h[G])._visible&&(n=p._x)<l&&n+p.width>e&&(E=p._y)<t&&E+p.height>g&&p.render(d,a,c);else for(var G=0;G<m;++G)(p=h[G])._visible&&p.render(d,a,c);b&&d.drawCallOptimize(!1)};c._canvas=function(b,d,a,c){var e=b._cacheStyle,h=this._next;if(e.enableCanvasRender){"bitmap"===e.cacheAs?I.canvasBitmap++:I.canvasNormal++;var m=!1,p=!1;if(r.isWebGL&&e.canvas){var m=e.canvas,t=m.touches;if(t)for(var g=0;g<t.length;g++)if(t[g].deleted){p=!0;break}m=m.isCacheValid&&!m.isCacheValid()}if(b._needRepaint()||!e.canvas||p||m||l.stage.isGlobalRepaint())if(r.isWebGL&&"normal"===e.cacheAs){if(d._targets){h._fun.call(h,b,d,a,c);return}this._canvas_webgl_normal_repaint(b,d)}else this._canvas_repaint(b,d,a,c);b=e.cacheRect;d.drawCanvas(e.canvas,a+b.x,c+b.y,b.width,b.height)}else h._fun.call(h,b,d,a,c)};c._canvas_repaint=function(b,d,a,c){var e=b._cacheStyle,h=this._next,m=e.canvas,p,t,g=e.cacheAs,l,n,E,G;p=e._calculateCacheRect(b,g,a,c);E=p.x;G=p.y;t=e.cacheRect;l=t.width*E;n=t.height*G;p=t.x;t=t.y;r.isWebGL&&"bitmap"===g&&(2048<l||2048<n)?(console.warn("cache bitmap size larger than 2048,cache ignored"),e.releaseContext(),h._fun.call(h,b,d,a,c)):(m||(e.createContext(),m=e.canvas),d=m.context,d.sprite=b,m.width==l&&m.height==n||m.size(l,n),"bitmap"===g?d.asBitmap=!0:"normal"===g&&(d.asBitmap=!1),d.clear(),1!=E||1!=G?(d.save(),d.scale(E,G),h._fun.call(h,b,d,-p,-t),d.restore()):h._fun.call(h,b,d,-p,-t),b._applyFilters(),e.staticCache&&(e.reCache=!1),I.canvasReCache++)};c._canvas_webgl_normal_repaint=function(b,d){var a=b._cacheStyle,c=this._next,f=a.canvas;a._calculateCacheRect(b,a.cacheAs,0,0);f||(f=a.canvas=new l.WebGLCacheAsNormalCanvas(d,b));d=f.context;f.startRec();c._fun.call(c,b,d,b.pivotX,b.pivotY);b._applyFilters();I.canvasReCache++;f.endRec()};a.__init__=function(){Z.__init__();var b,d,c;c=fa.createRenderSprite(69905,null);d=a.renders.length=16384;for(b=0;b<d;b++)a.renders[b]=c;a.renders[0]=fa.createRenderSprite(0,null)};a._initRenderFun=function(b,d,c,h){var e=b._renderType;(a.renders[e]=a._getTypeRender(e))._fun(b,d,c,h)};a._getTypeRender=function(b){if(Z.map[b])return fa.createRenderSprite(b,null);for(var d=null,a=8192;0<a;)a&b&&(d=fa.createRenderSprite(a,d)),a>>=1;return d};a.INIT=69905;a.renders=[];a.NORENDER=new a(0,null);return a}(),Ld=function(){function a(){}n(a,"laya.display.cmd.DrawLineCmd");var c=a.prototype;c.recover=function(){v.recover("DrawLineCmd",this)};c.run=function(b,d,a){b._drawLine(d,a,this.fromX,this.fromY,this.toX,this.toY,this.lineColor,this.lineWidth,this.vid)};g(0,c,"cmdID",function(){return"DrawLine"});a.create=function(b,d,c,h,f,k,m){var e=v.getItemByClass("DrawLineCmd",a);e.fromX=b;e.fromY=d;e.toX=c;e.toY=h;e.lineColor=f;e.lineWidth=k;e.vid=m;return e};a.ID="DrawLine";return a}(),He=function(){function a(){}n(a,"laya.webgl.shapes.Earcut");a.earcut=function(c,b,d){d=d||2;var e=b&&b.length,h=e?b[0]*d:c.length,f=a.linkedList(c,0,h,d,!0),k=[];if(!f)return k;var m,p,t,g;e&&(f=a.eliminateHoles(c,b,f,d));if(c.length>80*d){m=b=c[0];p=e=c[1];for(var l=d;l<h;l+=d)t=c[l],g=c[l+1],t<m&&(m=t),g<p&&(p=g),t>b&&(b=t),g>e&&(e=g);t=Math.max(b-m,e-p);t=0!==t?1/t:0}a.earcutLinked(f,k,d,m,p,t);return k};a.linkedList=function(c,b,d,e,h){var f;if(h===0<a.signedArea(c,b,d,e))for(h=b;h<d;h+=e)f=a.insertNode(h,c[h],c[h+1],f);else for(h=d-e;h>=b;h-=e)f=a.insertNode(h,c[h],c[h+1],f);f&&a.equals(f,f.next)&&(a.removeNode(f),f=f.next);return f};a.filterPoints=function(c,b){if(!c)return c;b||(b=c);var d;do if(d=!1,c.steiner||!a.equals(c,c.next)&&0!==a.area(c.prev,c,c.next))c=c.next;else{a.removeNode(c);c=b=c.prev;if(c===c.next)break;d=!0}while(d||c!==b);return b};a.earcutLinked=function(c,b,d,e,h,f,k){if(c){!k&&f&&a.indexCurve(c,e,h,f);for(var m=c,p,t;c.prev!==c.next;)if(p=c.prev,t=c.next,f?a.isEarHashed(c,e,h,f):a.isEar(c))b.push(p.i/d),b.push(c.i/d),b.push(t.i/d),a.removeNode(c),m=c=t.next;else if(c=t,c===m){k?1===k?(c=a.cureLocalIntersections(c,b,d),a.earcutLinked(c,b,d,e,h,f,2)):2===k&&a.splitEarcut(c,b,d,e,h,f):a.earcutLinked(a.filterPoints(c,null),b,d,e,h,f,1);break}}};a.isEar=function(c){var b=c.prev,d=c.next;if(0<=a.area(b,c,d))return!1;for(var e=c.next.next;e!==c.prev;){if(a.pointInTriangle(b.x,b.y,c.x,c.y,d.x,d.y,e.x,e.y)&&0<=a.area(e.prev,e,e.next))return!1;e=e.next}return!0};a.isEarHashed=function(c,b,d,e){var h=c.prev,f=c.next;if(0<=a.area(h,c,f))return!1;var k=h.x>c.x?h.x>f.x?h.x:f.x:c.x>f.x?c.x:f.x,m=h.y>c.y?h.y>f.y?h.y:f.y:c.y>f.y?c.y:f.y,p=a.zOrder(h.x<c.x?h.x<f.x?h.x:f.x:c.x<f.x?c.x:f.x,h.y<c.y?h.y<f.y?h.y:f.y:c.y<f.y?c.y:f.y,b,d,e);b=a.zOrder(k,m,b,d,e);for(d=c.nextZ;d&&d.z<=b;){if(d!==c.prev&&d!==c.next&&a.pointInTriangle(h.x,h.y,c.x,c.y,f.x,f.y,d.x,d.y)&&0<=a.area(d.prev,d,d.next))return!1;d=d.nextZ}for(d=c.prevZ;d&&d.z>=p;){if(d!==c.prev&&d!==c.next&&a.pointInTriangle(h.x,h.y,c.x,c.y,f.x,f.y,d.x,d.y)&&0<=a.area(d.prev,d,d.next))return!1;d=d.prevZ}return!0};a.cureLocalIntersections=function(c,b,d){var e=c;do{var h=e.prev,f=e.next.next;!a.equals(h,f)&&a.intersects(h,e,e.next,f)&&a.locallyInside(h,f)&&a.locallyInside(f,h)&&(b.push(h.i/d),b.push(e.i/d),b.push(f.i/d),a.removeNode(e),a.removeNode(e.next),e=c=f);e=e.next}while(e!==c);return e};a.splitEarcut=function(c,b,d,e,h,f){var k=c;do{for(var m=k.next.next;m!==k.prev;){if(k.i!==m.i&&a.isValidDiagonal(k,m)){c=a.splitPolygon(k,m);k=a.filterPoints(k,k.next);c=a.filterPoints(c,c.next);a.earcutLinked(k,b,d,e,h,f);a.earcutLinked(c,b,d,e,h,f);return}m=m.next}k=k.next}while(k!==c)};a.eliminateHoles=function(c,b,d,e){var h=[],f,k,m,p;f=0;for(k=b.length;f<k;f++)m=b[f]*e,p=f<k-1?b[f+1]*e:c.length,m=a.linkedList(c,m,p,e,!1),m===m.next&&(m.steiner=!0),h.push(a.getLeftmost(m));h.sort(a.compareX);for(f=0;f<h.length;f++)a.eliminateHole(h[f],d),d=a.filterPoints(d,d.next);return d};a.compareX=function(a,b){return a.x-b.x};a.eliminateHole=function(c,b){if(b=a.findHoleBridge(c,b))c=a.splitPolygon(b,c),a.filterPoints(c,c.next)};a.findHoleBridge=function(c,b){var d=b,e=c.x,h=c.y,f=-Infinity,k;do{if(h<=d.y&&h>=d.next.y&&d.next.y!==d.y){var m=d.x+(h-d.y)*(d.next.x-d.x)/(d.next.y-d.y);if(m<=e&&m>f){f=m;if(m===e){if(h===d.y)return d;if(h===d.next.y)return d.next}k=d.x<d.next.x?d:d.next}}d=d.next}while(d!==b);if(!k)return null;if(e===f)return k.prev;b=k;for(var m=k.x,p=k.y,t=Infinity,g,d=k.next;d!==b;)e>=d.x&&d.x>=m&&e!==d.x&&a.pointInTriangle(h<p?e:f,h,m,p,h<p?f:e,h,d.x,d.y)&&(g=Math.abs(h-d.y)/(e-d.x),(g<t||g===t&&d.x>k.x)&&a.locallyInside(d,c)&&(k=d,t=g)),d=d.next;return k};a.indexCurve=function(c,b,d,e){var h=c;do null===h.z&&(h.z=a.zOrder(h.x,h.y,b,d,e)),h.prevZ=h.prev,h=h.nextZ=h.next;while(h!==c);h.prevZ.nextZ=null;h.prevZ=null;a.sortLinked(h)};a.sortLinked=function(a){var b,d,c,h,f,k,m,p=1;do{d=a;h=a=null;for(f=0;d;){f++;c=d;for(b=k=0;b<p&&(k++,c=c.nextZ,c);b++);for(m=p;0<k||0<m&&c;)0!==k&&(0===m||!c||d.z<=c.z)?(b=d,d=d.nextZ,k--):(b=c,c=c.nextZ,m--),h?h.nextZ=b:a=b,b.prevZ=h,h=b;d=c}h.nextZ=null;p*=2}while(1<f);return a};a.zOrder=function(a,b,d,e,h){a=32767*(a-d)*h;b=32767*(b-e)*h;a=(a|a<<8)&16711935;a=(a|a<<4)&252645135;a=(a|a<<2)&858993459;b=(b|b<<8)&16711935;b=(b|b<<4)&252645135;b=(b|b<<2)&858993459;return(a|a<<1)&1431655765|((b|b<<1)&1431655765)<<1};a.getLeftmost=function(a){var b=a,d=a;do b.x<d.x&&(d=b),b=b.next;while(b!==a);return d};a.pointInTriangle=function(a,b,d,e,h,f,k,m){return 0<=(h-k)*(b-m)-(a-k)*(f-m)&&0<=(a-k)*(e-m)-(d-k)*(b-m)&&0<=(d-k)*(f-m)-(h-k)*(e-m)};a.isValidDiagonal=function(c,b){return c.next.i!==b.i&&c.prev.i!==b.i&&!a.intersectsPolygon(c,b)&&a.locallyInside(c,b)&&a.locallyInside(b,c)&&a.middleInside(c,b)};a.area=function(a,b,d){return(b.y-a.y)*(d.x-b.x)-(b.x-a.x)*(d.y-b.y)};a.equals=function(a,b){return a.x===b.x&&a.y===b.y};a.intersects=function(c,b,d,e){return a.equals(c,b)&&a.equals(d,e)||a.equals(c,e)&&a.equals(d,b)?!0:0<a.area(c,b,d)!==0<a.area(c,b,e)&&0<a.area(d,e,c)!==0<a.area(d,e,b)};a.intersectsPolygon=function(c,b){var d=c;do{if(d.i!==c.i&&d.next.i!==c.i&&d.i!==b.i&&d.next.i!==b.i&&a.intersects(d,d.next,c,b))return!0;d=d.next}while(d!==c);return!1};a.locallyInside=function(c,b){return 0>a.area(c.prev,c,c.next)?0<=a.area(c,b,c.next)&&0<=a.area(c,c.prev,b):0>a.area(c,b,c.prev)||0>a.area(c,c.next,b)};a.middleInside=function(a,b){var d=a,c=!1,h=(a.x+b.x)/2;b=(a.y+b.y)/2;do d.y>b!==d.next.y>b&&d.next.y!==d.y&&h<(d.next.x-d.x)*(b-d.y)/(d.next.y-d.y)+d.x&&(c=!c),d=d.next;while(d!==a);return c};a.splitPolygon=function(a,b){var d=new mc(a.i,a.x,a.y),c=new mc(b.i,b.x,b.y),h=a.next,f=b.prev;a.next=b;b.prev=a;d.next=h;h.prev=d;c.next=d;d.prev=c;f.next=c;c.prev=f;return c};a.insertNode=function(a,b,d,e){a=new mc(a,b,d);e?(a.next=e.next,a.prev=e,e.next.prev=a,e.next=a):(a.prev=a,a.next=a);return a};a.removeNode=function(a){a.next.prev=a.prev;a.prev.next=a.next;a.prevZ&&(a.prevZ.nextZ=a.nextZ);a.nextZ&&(a.nextZ.prevZ=a.prevZ)};a.signedArea=function(a,b,d,e){for(var c=0,f=d-e;b<d;b+=e)c+=(a[f]-a[b])*(a[b+1]+a[f+1]),f=b;return c};return a}(),Ca=function(){function a(){}n(a,"laya.resource.Context");var c=a.prototype;c.drawCanvas=function(b,d,a,c,f){I.renderBatches++;this.drawImage(b._source,d,a,c,f)};c._drawRect=function(b,d,a,c,f){I.renderBatches++;f&&(this.fillStyle=f);this.fillRect(b,d,a,c)};c.drawText=function(b,d,a,c,f,k){I.renderBatches++;3<arguments.length&&null!=c&&(this.font=c,this.fillStyle=f,this.textAlign=k,this.textBaseline="top");this.fillText(b,d,a)};c.fillBorderText=function(b,d,a,c,f,k,m,p){I.renderBatches++;this.font=c;this.fillStyle=f;this.textBaseline="top";this.strokeStyle=k;this.lineWidth=m;this.textAlign=p;this.strokeText(b,d,a);this.fillText(b,d,a)};c.fillWords=function(b,d,a,c,f){c&&(this.font=c);f&&(this.fillStyle=f);this.textBaseline="top";this.textAlign="left";c=0;for(f=b.length;c<f;c++){var e=b[c];this.fillText(e.char,e.x+d,e.y+a)}};c.fillBorderWords=function(b,d,a,c,f,k,m){c&&(this.font=c);f&&(this.fillStyle=f);this.textBaseline="top";this.lineWidth=m;this.textAlign="left";this.strokeStyle=k;c=0;for(f=b.length;c<f;c++)k=b[c],this.strokeText(k.char,k.x+d,k.y+a),this.fillText(k.char,k.x+d,k.y+a)};c.strokeWord=function(b,d,a,c,f,k,m){I.renderBatches++;3<arguments.length&&null!=c&&(this.font=c,this.strokeStyle=f,this.lineWidth=k,this.textAlign=m,this.textBaseline="top");this.strokeText(b,d,a)};c.setTransformByMatrix=function(b){this.setTransform(b.a,b.b,b.c,b.d,b.tx,b.ty)};c.clipRect=function(b,d,a,c){I.renderBatches++;this.beginPath();this.rect(b,d,a,c);this.clip()};c.drawTextureWithTransform=function(b,d,a,c,f,k,m,p,t,g,l){if(b._getSource()){I.renderBatches++;if(l=1!==t){var e=this.globalAlpha;this.globalAlpha*=t}g&&(this.globalCompositeOperation=g);t=b.uv;var h=b.bitmap._width,z=b.bitmap._height;k?(this.save(),this.transform(k.a,k.b,k.c,k.d,k.tx+m,k.ty+p),this.drawImage(b.bitmap._source,t[0]*h,t[1]*z,(t[2]-t[0])*h,(t[5]-t[3])*z,d,a,c,f),this.restore()):this.drawImage(b.bitmap._source,t[0]*h,t[1]*z,(t[2]-t[0])*h,(t[5]-t[3])*z,m+d,p+a,c,f);l&&(this.globalAlpha=e);g&&(this.globalCompositeOperation="source-over")}};c.drawTextureWithSizeGrid=function(b,d,a,c,f,k,m,p){if(b._getSource()){I.renderBatches++;d+=m;a+=p;var e=b.bitmap._height;m=k[0];p=k[1];var h=k[2];k=k[3];var g=!1;c==b.bitmap._width&&(k=p=0);f==e&&(m=h=0);k+p>c&&(b=c,g=!0,c=k+p,this.save(),this.clipRect(0+d,0+a,b,f));k&&m&&this.drawRect(0+d,0+a,k,m,"#ff0000",null,0);p&&m&&this.drawRect(c-p+d,0+a,p,m,"#ff0000",null,0);k&&h&&this.drawRect(0+d,f-h+a,k,h,"#ff0000",null,0);p&&h&&this.drawRect(c-p+d,f-h+a,p,h,"#ff0000",null,0);m&&this.drawRect(k+d,0+a,c-k-p,m,"#ffff00",null,0);h&&this.drawRect(k+d,f-h+a,c-k-p,h,"#ffff00",null,0);k&&this.drawRect(0+d,m+a,k,f-m-h,"#ffff00",null,0);p&&this.drawRect(c-p+d,m+a,p,f-m-h,"#ffff00",null,0);this.drawRect(k+d,m+a,c-k-p,f-m-h,"#ff00ff",null,0);g&&this.restore()}};c.drawTexture2=function(b,d,a,c,f,k){var e=k[0];I.renderBatches++;var h=e.uv,t=e.bitmap._width,g=e.bitmap._height;f?(this.save(),this.transform(f.a,f.b,f.c,f.d,f.tx+b,f.ty+d),this.drawImage(e.bitmap._source,h[0]*t,h[1]*g,(h[2]-h[0])*t,(h[5]-h[3])*g,k[1]-a,k[2]-c,k[3],k[4]),this.restore()):this.drawImage(e.bitmap._source,h[0]*t,h[1]*g,(h[2]-h[0])*t,(h[5]-h[3])*g,k[1]-a+b,k[2]-c+d,k[3],k[4])};c.fillTexture=function(b,d,a,c,f,k,m,p){if(!p.pat){if(b.uv!=ga.DEF_UV){var e=new xa;e.getContext("2d");e.size(b.width,b.height);e.context.drawTexture(b,0,0,b.width,b.height);b=new ga(e)}p.pat=this.createPattern(b.bitmap._source,k)}e=k=0;m&&(d+=m.x%b.width,a+=m.y%b.height,k-=m.x%b.width,e-=m.y%b.height);this.translate(d,a);this._drawRect(k,e,c,f,p.pat);this.translate(-d,-a)};c.flush=function(){return 0};c.destroy=function(){this.canvas.width=this.canvas.height=0};c.clear=function(){this.clearRect(0,0,r._mainCanvas.width,r._mainCanvas.height)};c.drawTriangle=function(b,d,a,c,f,k,m,p){var e=b.bitmap,h=e._getSource(),g=b.width,l=b.height,n=e.width,e=e.height,G=a[c]*n,y=a[f]*n,q=a[k]*n,N=a[c+1]*e,r=a[f+1]*e;a=a[k+1]*e;var u=d[c],A=d[f],v=d[k];c=d[c+1];f=d[f+1];d=d[k+1];if(p){p=(u+A+v)/3;k=(c+f+d)/3;var V=u-p,w=c-k,x=Math.sqrt(V*V+w*w),u=p+V/x*(x+1);c=k+w/x*(x+1);V=A-p;w=f-k;x=Math.sqrt(V*V+w*w);A=p+V/x*(x+1);f=k+w/x*(x+1);V=v-p;w=d-k;x=Math.sqrt(V*V+w*w);v=p+V/x*(x+1);d=k+w/x*(x+1)}this.save();m&&this.transform(m.a,m.b,m.c,m.d,m.tx,m.ty);this.beginPath();this.moveTo(u,c);this.lineTo(A,f);this.lineTo(v,d);this.closePath();this.clip();m=1/(G*r+N*q+y*a-r*q-N*y-G*a);this.transform((u*r+N*v+A*a-r*v-N*A-u*a)*m,(c*r+N*d+f*a-r*d-N*f-c*a)*m,(G*A+u*q+y*v-A*q-u*y-G*v)*m,(G*f+c*q+y*d-f*q-c*y-G*d)*m,(G*r*v+N*A*q+u*y*a-u*r*q-N*y*v-G*A*a)*m,(G*r*d+N*f*q+c*y*a-c*r*q-N*y*d-G*f*a)*m);this.drawImage(h,b.uv[0]*n,b.uv[1]*e,g,l,b.uv[0]*n,b.uv[1]*e,g,l);this.restore()};c.transformByMatrix=function(b,d,a){this.transform(b.a,b.b,b.c,b.d,b.tx+d,b.ty+a)};c.saveTransform=function(b){this.save()};c.restoreTransform=function(b){this.restore()};c.drawRect=function(b,d,a,c,f,k,m){null!=f&&(this.fillStyle=f,this.fillRect(b,d,a,c));null!=k&&(this.strokeStyle=k,this.lineWidth=m,this.strokeRect(b,d,a,c))};c.drawTexture=function(b,d,a,c,f){var e=b._getSource();if(e){I.renderBatches++;var h=b.uv,p=b.bitmap.width;b=b.bitmap.height;this.drawImage(e,h[0]*p,h[1]*b,(h[2]-h[0])*p,(h[5]-h[3])*b,d,a,c,f)}};c.drawTextures=function(b,d,a,c){I.renderBatches+=d.length/2;for(var e=b.width,h=b.height,m=0,p=d.length;m<p;m+=2)this.drawTexture(b,d[m]+a,d[m+1]+c,e,h)};c.drawTriangles=function(b,d,a,c,f,k,m,p,t,g){t=k.length;this.translate(d,a);for(p=0;p<t;p+=3)this.drawTriangle(b,c,f,2*k[p],2*k[p+1],2*k[p+2],m,!0);this.translate(-d,-a)};c.alpha=function(b){this.globalAlpha*=b};c._transform=function(b,d,a){this.translate(d,a);this.transform(b.a,b.b,b.c,b.d,b.tx,b.ty);this.translate(-d,-a)};c._rotate=function(b,d,a){this.translate(d,a);this.rotate(b);this.translate(-d,-a)};c._scale=function(b,d,a,c){this.translate(a,c);this.scale(b,d);this.translate(-a,-c)};c._drawLine=function(b,d,a,c,f,k,m,p,t){this.beginPath();this.strokeStyle=m;this.lineWidth=p;this.moveTo(b+a,d+c);this.lineTo(b+f,d+k);this.stroke()};c._drawLines=function(b,d,a,c,f,k){r.isWebGL&&this.setPathId(k);this.beginPath();this.strokeStyle=c;this.lineWidth=f;c=2;f=a.length;if(r.isWebGL)this.addPath(a.slice(),!1,!1,b,d);else for(this.moveTo(b+a[0],d+a[1]);c<f;)this.lineTo(b+a[c++],d+a[c++]);this.stroke()};c.drawCurves=function(b,d,a,c,f){this.beginPath();this.strokeStyle=c;this.lineWidth=f;this.moveTo(b+a[0],d+a[1]);c=2;for(f=a.length;c<f;)this.quadraticCurveTo(b+a[c++],d+a[c++],b+a[c++],d+a[c++]);this.stroke()};c._fillAndStroke=function(b,d,a,c){null!=b&&(this.fillStyle=b,this.fill());null!=d&&0<a&&(this.strokeStyle=d,this.lineWidth=a,this.stroke())};c._drawCircle=function(b,d,c,h,f,k,m){I.renderBatches++;r.isWebGL?this.beginPath(!0):this.beginPath();this.arc(b,d,c,0,a.PI2);this.closePath();this._fillAndStroke(h,f,k)};c._drawPie=function(b,d,a,c,f,k,m,p,t){this.beginPath();this.moveTo(b,d);this.arc(b,d,a,c,f);this.closePath();this._fillAndStroke(k,m,p)};c._drawPoly=function(b,d,a,c,f,k,m,p){var e=2,h=a.length;this.beginPath();if(r.isWebGL)this.setPathId(p),this.addPath(a.slice(),!0,m,b,d);else for(this.moveTo(b+a[0],d+a[1]);e<h;)this.lineTo(b+a[e++],d+a[e++]);this.closePath();this._fillAndStroke(c,f,k,m)};c._drawPath=function(b,d,a,c,f){this.beginPath();for(var e=0,h=a.length;e<h;e++){var p=a[e];switch(p[0]){case "moveTo":this.moveTo(b+p[1],d+p[2]);break;case "lineTo":this.lineTo(b+p[1],d+p[2]);break;case "arcTo":this.arcTo(b+p[1],d+p[2],b+p[3],d+p[4],p[5]);break;case "closePath":this.closePath()}}null!=c&&(this.fillStyle=c.fillStyle,this.fill());null!=f&&(this.strokeStyle=f.strokeStyle,this.lineWidth=f.lineWidth||1,this.lineJoin=f.lineJoin,this.lineCap=f.lineCap,this.miterLimit=f.miterLimit,this.stroke())};c.drawParticle=function(b,d,a){};a.__init__=function(b){var d=laya.resource.Context.prototype;b=b||CanvasRenderingContext2D.prototype;b.init2d||(b.init2d=!0,"saveTransform restoreTransform transformByMatrix drawTriangles drawTriangle drawTextures fillWords fillBorderWords drawRect strokeWord drawText fillTexture setTransformByMatrix clipRect drawTexture drawTexture2 drawTextureWithTransform drawTextureWithSizeGrid flush clear destroy drawCanvas fillBorderText drawCurves _drawRect alpha _transform _rotate _scale _drawLine _drawLines _drawCircle _fillAndStroke _drawPie _drawPoly _drawPath drawTextureWithTransform".split(" ").forEach(function(a){b[a]=d[a]}))};a.ENUM_TEXTALIGN_DEFAULT=0;a.ENUM_TEXTALIGN_CENTER=1;a.ENUM_TEXTALIGN_RIGHT=2;a.PI2=2*Math.PI;return a}(),oe=function(){function a(){}n(a,"laya.debug.tools.Base64Tool");a.init=function(){if(!a.lookup){a.lookup=new Uint8Array(256);for(var c=0;c<a.chars.length;c++)a.lookup[a.chars.charCodeAt(c)]=c}};a.encode=function(c){c=new Uint8Array(c);var b,d=c.length,e="";for(b=0;b<d;b+=3)e+=a.chars[c[b]>>2],e+=a.chars[(c[b]&3)<<4|c[b+1]>>4],e+=a.chars[(c[b+1]&15)<<2|c[b+2]>>6],e+=a.chars[c[b+2]&63];2===d%3?e=e.substring(0,e.length-1)+"\x3d":1===d%3&&(e=e.substring(0,e.length-2)+"\x3d\x3d");return e};a.encodeStr=function(c){var b;b=new ac;b.writeUTFString(c);return a.encodeByte(b)};a.encodeStr2=function(c){var b;b=new ac;b.writeUTFBytes(c);return a.encodeByte(b)};a.encodeByte=function(c,b,d){void 0===b&&(b=0);void 0===d&&(d=-1);0>d&&(d=c.length);return a.encode(c.buffer.slice(b,d))};a.decodeToByte=function(c){return new ac(a.decode(c))};a.decode=function(c){a.init();var b=.75*c.length,d=c.length,e=0,h,f,k,m;"\x3d"===c[c.length-1]&&(b--,"\x3d"===c[c.length-2]&&b--);for(var p=new ArrayBuffer(b),t=new Uint8Array(p),b=0;b<d;b+=4)h=a.lookup[c.charCodeAt(b)],f=a.lookup[c.charCodeAt(b+1)],k=a.lookup[c.charCodeAt(b+2)],m=a.lookup[c.charCodeAt(b+3)],t[e++]=h<<2|f>>4,t[e++]=(f&15)<<4|k>>2,t[e++]=(k&3)<<6|m&63;return p};a.chars="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/";a.lookup=null;return a}(),Ie=function(){function a(){this.time=NaN;this.drawOrder=[]}n(a,"laya.ani.bone.DrawOrderData");return a}(),Mb=function(){function a(){}var c,b;n(a,"laya.utils.SceneUtils");a.getBindFun=function(d){var b=a._funMap.get(d);null==b&&(b="(function(data){if(data\x3d\x3dnull)return;with(data){try{\nreturn "+('"'+d+'"').replace(/^"\${|}"$/g,"").replace(/\${/g,'"+').replace(/}/g,'+"')+"\n}catch(e){}}})",b=l._runScript(b),a._funMap.set(d,b));return b};a.createByData=function(d,c){var e=b.create();d=a.createComp(c,d,d,null,e);d._setBit(8,!0);d.hasOwnProperty("_idMap")&&(d._idMap=e._idMap);if(c.animations){var f=[],k=c.animations,m,p=k.length,t,g;for(m=0;m<p;m++){t=new Vc;g=k[m];t._setUp(e._idMap,g);d[g.name]=t;t._setControlNode(d);switch(g.action){case 1:t.play(0,!1);break;case 2:t.play(0,!0)}f.push(t)}d._aniList=f}"Scene"===d._$componentType&&0<d._width&&null==c.props.hitTestPrior&&!d.mouseThrough&&(d.hitTestPrior=!0);e.beginLoad(d);return d};a.createInitTool=function(){return b.create()};a.createComp=function(d,b,c,f,k){if("Scene3D"==d.type||"Sprite3D"==d.type)return b=[],k=l.Utils3D._createSceneByJsonForMaker(d,b,k),"Sprite3D"==d.type?l.StaticBatchManager.combine(k,b):l.StaticBatchManager.combine(null,b),k;b=b||a.getCompInstance(d);if(!b)return d.props&&d.props.runtime?console.warn("runtime not found:"+d.props.runtime):console.warn("can not create:"+d.type),null;var e=d.child;if(e)for(var h="List"==b._$componentType,t=0,g=e.length;t<g;t++){var n=e[t];if(!b.hasOwnProperty("itemRender")||"render"!=n.props.name&&"render"!==n.props.renderType)if("Graphic"==n.type)Ka._addGraphicsToSprite(n,b);else if(Ka._isDrawType(n.type))Ka._addGraphicToSprite(n,b,!0);else{if(h){var Aa=[],E=a.createComp(n,null,c,Aa,k);Aa.length&&(E._$bindData=Aa)}else E=a.createComp(n,null,c,f,k);"Script"==n.type?E instanceof laya.components.Component?b._addComponentInstance(E):"owner"in E?E.owner=b:"target"in E&&(E.target=b):"mask"==n.props.renderType||"mask"==n.props.name?b.mask=E:E instanceof laya.display.Node&&b.addChild(E)}else b.itemRender=n}var e=d.props,q;for(q in e)h=e[q],"string"==typeof h&&(0<=h.indexOf("@node:")||0<=h.indexOf("@Prefab:"))?k&&k.addNodeRef(b,q,h):a.setCompValue(b,q,h,c,f);b._afterInited&&b._afterInited();d.compId&&k&&k._idMap&&(k._idMap[d.compId]=b);return b};a.setCompValue=function(d,b,h,f,k){if("string"==typeof h&&-1<h.indexOf("${"))if(a._sheet||(a._sheet=Ka.getClass("laya.data.Table")),!a._sheet)console.warn("Can not find class Sheet");else if(k)k.push(d,b,h);else{if(f)for(-1==h.indexOf("].")&&(h=h.replace(".","[0].")),d=new c(d,b,h),d.exe(f),h=h.replace(/\[.*?\]\./g,".");null!=(b=a._parseWatchData.exec(h));){for(b=b[1];null!=(k=a._parseKeyWord.exec(b));){k=k[0];var e=f._watchMap[k]||(f._watchMap[k]=[]);e.push(d);a._sheet.I.notifer.on(k,f,f.changeData,[k])}e=f._watchMap[b]||(f._watchMap[b]=[]);e.push(d);a._sheet.I.notifer.on(b,f,f.changeData,[b])}}else"var"===b&&f?f[h]=d:d[b]="true"===h?!0:"false"===h?!1:h};a.getCompInstance=function(d){if("UIView"==d.type&&d.props&&d.props.pageData)return a.createByData(null,d.props.pageData);var b=d.props&&d.props.runtime||d.type,c=Ka.getClass(b);if(!c)throw"Can not find class "+b;return"Script"===d.type&&c.prototype._doAwake?(d=v.createByClass(c),d._destroyed=!1,d):d.props&&d.props.hasOwnProperty("renderType")&&"instance"==d.props.renderType?(c.instance||(c.instance=new c),c.instance):new c};a._sheet=null;u(a,["_funMap",function(){return this._funMap=new Xa},"_parseWatchData",function(){return this._parseWatchData=/\${(.*?)}/g},"_parseKeyWord",function(){return this._parseKeyWord=/[a-zA-Z_][a-zA-Z0-9_]*(?:(?:\.[a-zA-Z_][a-zA-Z0-9_]*)+)/g}]);a.__init$=function(){c=function(){function d(d,b,a){this.value=this.prop=this.comp=null;this.comp=d;this.prop=b;this.value=a}n(d,"");d.prototype.exe=function(d){var b=a.getBindFun(this.value);this.comp[this.prop]=b.call(this,d)};return d}();b=function(){function d(){this._scene=this._idMap=this._loadList=this._initList=this._nodeRefList=null}n(d,"");var b=d.prototype;b.reset=function(){this._scene=this._loadList=this._idMap=this._initList=this._nodeRefList=null};b.recover=function(){this.reset();v.recover("InitTool",this)};b.addLoadRes=function(d,b){this._loadList||(this._loadList=[]);b?this._loadList.push({url:d,type:b}):this._loadList.push(d)};b.addNodeRef=function(d,b,a){this._nodeRefList||(this._nodeRefList=[]);this._nodeRefList.push([d,b,a]);0<=a.indexOf("@Prefab:")&&this.addLoadRes(a.replace("@Prefab:",""),"prefab")};b.setNodeRef=function(){if(this._nodeRefList){if(this._idMap){var d,b;b=this._nodeRefList.length;var a;for(d=0;d<b;d++)a=this._nodeRefList[d],a[0][a[1]]=this.getReferData(a[2])}this._nodeRefList=null}};b.getReferData=function(d){if(0<=d.indexOf("@Prefab:"))return x.getRes(d.replace("@Prefab:",""));if(0<=d.indexOf("@arr:")){d=d.replace("@arr:","");d=d.split(",");var b,a,c;a=d.length;for(b=0;b<a;b++)c=d[b],d[b]=c?this._idMap[c.replace("@node:","")]:null;return d}return this._idMap[d.replace("@node:","")]};b.addInitItem=function(d){this._initList||(this._initList=[]);this._initList.push(d)};b.doInits=function(){this._initList&&(this._initList=null)};b.finish=function(){this.setNodeRef();this.doInits();this._scene._setBit(8,!1);this._scene.parent&&this._scene.parent.activeInHierarchy&&this._scene.active&&this._scene._processActive();this._scene.event("onViewCreated");this.recover()};b.beginLoad=function(d){this._scene=d;!this._loadList||1>this._loadList.length?this.finish():l.loader.load(this._loadList,B.create(this,this.finish))};d.create=function(){var b=v.getItemByClass("InitTool",d);b._idMap=[];return b};return d}()};return a}(),Je=function(){function a(){this.uvTransform=this.texture=null;this.useUvTransform=!1;this.canvasPadding=1;this.uvs=new Float32Array([0,0,1,0,1,1,0,1]);this.vertices=new Float32Array([0,0,100,0,100,100,0,100]);this.indexes=new Uint16Array([0,1,3,3,1,2])}n(a,"laya.ani.bone.canvasmesh.MeshData");a.prototype.getBounds=function(){return M._getWrapRec(this.vertices)};return a}(),Ke=function(){function a(){this.rotateMode=this.spacingMode=this.positionMode=this.target=this.name=null;this.translateMix=this.rotateMix=this.spacing=this.position=this.offsetRotation=NaN;this.bones=[]}n(a,"laya.ani.bone.PathConstraintData");return a}(),F=function(){function a(){}n(a,"laya.wx.mini.MiniAdpter");a.getJson=function(a){return JSON.parse(a)};a.enable=function(){a.init(l.isWXPosMsg,l.isWXOpenDataContext)};a.init=function(c,b){void 0===c&&(c=!1);void 0===b&&(b=!1);a._inited||(a._inited=!0,a.window=w,0>a.window.navigator.userAgent.indexOf("MiniGame")||(a.isZiYu=b,a.isPosMsgYu=c,a.EnvConfig={},a.isZiYu||(T.setNativeFileDir("/layaairGame"),T.existDir(T.fileNativeDir,B.create(a,a.onMkdirCallBack))),a.systemInfo=wx.getSystemInfoSync(),a.window.focus=function(){},l._getUrlPath=function(){return""},a.window.logtime=function(d){},a.window.alertTimeLog=function(d){},a.window.resetShareInfo=function(){},a.window.CanvasRenderingContext2D=function(){},a.window.CanvasRenderingContext2D.prototype=a.window.wx.createCanvas().getContext("2d").__proto__,a.window.document.body.appendChild=function(){},a.EnvConfig.pixelRatioInt=0,q._pixelRatio=a.pixelRatio(),a._preCreateElement=q.createElement,q.createElement=a.createElement,fa.createShaderCondition=a.createShaderCondition,U.parseXMLFromString=a.parseXMLFromString,ia._createInputElement=ic._createInputElement,a.EnvConfig.load=x.prototype.load,x.prototype.load=Le.prototype.load,x.prototype._loadImage=le.prototype._loadImage,Wc.__init__(),kb._baseClass=Wc,a.window.wx.onMessage(a._onMessage)))};a._onMessage=function(a){switch(a.type){case "changeMatrix":l.stage.transform.identity();l.stage._width=a.w;l.stage._height=a.h;l.stage._canvasTransform=new C(a.a,a.b,a.c,a.d,a.tx,a.ty);break;case "display":l.stage.frameRate=a.rate||"fast";break;case "undisplay":l.stage.frameRate="sleep"}"opendatacontext"==a.isLoad?a.url&&(T.ziyuFileData[a.url]=a.atlasdata,T.ziyuFileTextureData[a.imgReadyUrl]=a.imgNativeUrl):"openJsondatacontext"==a.isLoad?a.url&&(T.ziyuFileData[a.url]=a.atlasdata):"openJsondatacontextPic"==a.isLoad&&(T.ziyuFileTextureData[a.imgReadyUrl]=a.imgNativeUrl)};a.getUrlEncode=function(a,b){return"arraybuffer"==b?"":"utf8"};a.downLoadFile=function(a,b,d,e){void 0===b&&(b="");void 0===e&&(e="utf8");T.getFileInfo(a)?null!=d&&d.runWith([0]):T.downLoadFile(a,b,d,e)};a.remove=function(a,b){T.deleteFile("",a,b,"",0)};a.removeAll=function(){T.deleteAll()};a.hasNativeFile=function(a){return T.isLocalNativeFile(a)};a.getFileInfo=function(a){return T.getFileInfo(a)};a.getFileList=function(){return T.filesListObj};a.exitMiniProgram=function(){a.window.wx.exitMiniProgram()};a.onMkdirCallBack=function(a,b){a||(T.filesListObj=JSON.parse(b.data))};a.pixelRatio=function(){if(!a.EnvConfig.pixelRatioInt)try{return a.EnvConfig.pixelRatioInt=a.systemInfo.pixelRatio}catch(c){}return a.EnvConfig.pixelRatioInt};a.createElement=function(c){return"canvas"==c?(1==a.idx?a.isZiYu?(c=sharedCanvas,c.style={}):c=w.canvas:c=w.wx.createCanvas(),a.idx++,c):"textarea"==c||"input"==c?a.onCreateInput(c):"div"==c?(c=a._preCreateElement(c),c.contains=function(b){return null},c.removeChild=function(b){},c):a._preCreateElement(c)};a.onCreateInput=function(c){c=a._preCreateElement(c);c.focus=ic.wxinputFocus;c.blur=ic.wxinputblur;c.style={};c.value=0;c.parentElement={};c.placeholder={};c.type={};c.setColor=function(b){};c.setType=function(b){};c.setFontFace=function(b){};c.addEventListener=function(b){};c.contains=function(b){return null};c.removeChild=function(b){};return c};a.createShaderCondition=function(a){var b=this;return function(){return b[a.replace("this.","")]}};a.sendAtlasToOpenDataContext=function(c){if(!laya.wx.mini.MiniAdpter.isZiYu){var b=x.getRes(D.formatURL(c));if(b){b.meta.image.split(",");if(b.meta&&b.meta.image)for(var d=b.meta.image.split(","),e=0<=c.indexOf("/")?"/":"\\",e=c.lastIndexOf(e),e=0<=e?c.substr(0,e+1):"",h=0,f=d.length;h<f;h++)d[h]=e+d[h];else d=[c.replace(".json",".png")];for(h=0;h<d.length;h++)a.postInfoToContext(c,d[h],b)}else throw"\u4f20\u9012\u7684url\u6ca1\u6709\u83b7\u53d6\u5230\u5bf9\u5e94\u7684\u56fe\u96c6\u6570\u636e\u4fe1\u606f\uff0c\u8bf7\u786e\u4fdd\u56fe\u96c6\u5df2\u7ecf\u8fc7\uff01";}};a.postInfoToContext=function(a,b,d){d={frames:d.frames,meta:d.meta};var c=T.getFileInfo(D.formatURL(b));if(c=c?T.getFileNativePath(c.md5):b)wx.postMessage({url:a,atlasdata:d,imgNativeUrl:c,imgReadyUrl:b,isLoad:"opendatacontext"});else throw"\u83b7\u53d6\u56fe\u96c6\u7684\u78c1\u76d8url\u8def\u5f84\u4e0d\u5b58\u5728\uff01";};a.sendSinglePicToOpenDataContext=function(a){var b=D.formatURL(a),d=T.getFileInfo(b);d?(d=T.getFileNativePath(d.md5),a=b):d=a;if(d)wx.postMessage({url:a,imgNativeUrl:d,imgReadyUrl:a,isLoad:"openJsondatacontextPic"});else throw"\u83b7\u53d6\u56fe\u96c6\u7684\u78c1\u76d8url\u8def\u5f84\u4e0d\u5b58\u5728\uff01";};a.sendJsonDataToDataContext=function(a){if(!laya.wx.mini.MiniAdpter.isZiYu){var b=x.getRes(a);if(b)wx.postMessage({url:a,atlasdata:b,isLoad:"openJsondatacontext"});else throw"\u4f20\u9012\u7684url\u6ca1\u6709\u83b7\u53d6\u5230\u5bf9\u5e94\u7684\u56fe\u96c6\u6570\u636e\u4fe1\u606f\uff0c\u8bf7\u786e\u4fdd\u56fe\u96c6\u5df2\u7ecf\u8fc7\uff01";}};a.EnvConfig=null;a.window=null;a._preCreateElement=null;a._inited=!1;a.systemInfo=null;a.isZiYu=!1;a.isPosMsgYu=!1;a.autoCacheFile=!0;a.minClearSize=5242880;a.subNativeFiles=null;a.subNativeheads=[];a.subMaps=[];a.AutoCacheDownFile=!1;a.parseXMLFromString=function(a){var b;a=a.replace(/>\s+</g,"\x3e\x3c");try{b=(new w.Parser.DOMParser).parseFromString(a,"text/xml")}catch(d){throw"\u9700\u8981\u5f15\u5165xml\u89e3\u6790\u5e93\u6587\u4ef6";}return b};a.idx=1;u(a,["nativefiles",function(){return this.nativefiles=["layaNativeDir","wxlocal"]}]);return a}();(function(){function a(){this.createInfo={}}n(a,"laya.debug.tools.enginehook.ClassCreateHook");var c=a.prototype;c.hookClass=function(b){var d=this;a.isInited||(a.isInited=!0,Na.hook(b,"call",function(a){d.classCreated(a,b)}))};c.classCreated=function(b,d){var c;c=ha.getNodeClassAndName(b);for(var h=0;b&&b!=d;)b=b.__super,h++;a.I.createInfo[c]||(a.I.createInfo[c]=0);a.I.createInfo[c]+=1;fc.run(c,h+6)};c.getClassCreateInfo=function(b){b=ha.getClassName(b);return fc.getRunInfo(b)};a.isInited=!1;u(a,["I",function(){return this.I=new a}]);return a})();var Bd=function(){function a(){}n(a,"laya.display.cmd.FillWordsCmd");var c=a.prototype;c.recover=function(){this.words=null;v.recover("FillWordsCmd",this)};c.run=function(b,d,a){b.fillWords(this.words,this.x+d,this.y+a,this.font,this.color)};g(0,c,"cmdID",function(){return"FillWords"});a.create=function(b,d,c,h,f){var e=v.getItemByClass("FillWordsCmd",a);e.words=b;e.x=d;e.y=c;e.font=h;e.color=f;return e};a.ID="FillWords";return a}(),Xc=function(){function a(b,d){this.bones=this.data=this.target=null;this.translateMix=this.rotateMix=this.spacing=this.position=NaN;this._debugKey=!1;this._spaces=null;this._segments=[];this._curves=[];this.data=b;this.position=b.position;this.spacing=b.spacing;this.rotateMix=b.rotateMix;this.translateMix=b.translateMix;this.bones=[];b=this.data.bones;for(var a=0,c=b.length;a<c;a++)this.bones.push(d[b[a]])}n(a,"laya.ani.bone.PathConstraint");var c=a.prototype;c.apply=function(b,d){if(this.target){var a=this.translateMix,c=this.translateMix,f=0<c,k=this.data.spacingMode,m="length"==k,p=this.data.rotateMode,t="tangent"==p,g="chainScale"==p,l=[],n=this.bones.length,E=t?n:n+1,q=[];this._spaces=q;q[0]=this.position;var y=this.spacing;if(g||m)for(var ja=0,N=E-1;ja<N;){var r=this.bones[ja],u=r.length,A=u*r.resultMatrix.a,v=u*r.resultMatrix.b,u=Math.sqrt(A*A+v*v);g&&(l[ja]=u);q[++ja]=m?Math.max(0,u+y):y}else for(ja=1;ja<E;ja++)q[ja]=y;b=this.computeWorldPositions(this.target,b,d,E,t,"percent"==this.data.positionMode,"percent"==k);if(this._debugKey){for(ja=0;ja<b.length;ja++)d.drawCircle(b[ja++],b[ja++],5,"#00ff00");r=[];for(ja=0;ja<b.length;ja++)r.push(b[ja++],b[ja++]);d.drawLines(0,0,r,"#ff0000")}k=b[0];m=b[1];d=this.data.offsetRotation;p="chain"==p&&0==d;ja=0;for(E=3;ja<n;ja++,E+=3)if(r=this.bones[ja],r.resultMatrix.tx+=(k-r.resultMatrix.tx)*a,r.resultMatrix.ty+=(m-r.resultMatrix.ty)*a,A=b[E],v=b[E+1],y=A-k,N=v-m,g&&(u=l[ja],0!=u&&(u=(Math.sqrt(y*y+N*N)/u-1)*c+1,r.resultMatrix.a*=u,r.resultMatrix.c*=u)),k=A,m=v,f){var A=r.resultMatrix.a,v=r.resultMatrix.c,w=r.resultMatrix.b,x=r.resultMatrix.d,C,F,H;C=t?b[E-1]:0==q[ja+1]?b[E+2]:Math.atan2(N,y);C-=Math.atan2(w,A)-d/180*Math.PI;p&&(F=Math.cos(C),H=Math.sin(C),u=r.length,k+=(u*(F*A-H*w)-y)*c,m+=(u*(H*A+F*w)-N)*c);C>Math.PI?C-=2*Math.PI:C<-Math.PI&&(C+=2*Math.PI);C*=c;F=Math.cos(C);H=Math.sin(C);r.resultMatrix.a=F*A-H*w;r.resultMatrix.c=F*v-H*x;r.resultMatrix.b=H*A+F*w;r.resultMatrix.d=H*v+F*x}}};c.computeWorldVertices2=function(b,d,c,h,f,k){var e=b.currDisplayData.bones,p=b.currDisplayData.weights,t=b.currDisplayData.triangles,g,l=0,n=0,E,q;if(null==e){t||(t=p);b.deformData&&(t=b.deformData);e=b.parent;if(d)for(l=d.length,b=0;b<l;b++)if(d[b].name==e){q=d[b];break}q&&(g=q.resultMatrix);g||(g=a._tempMt);d=g.tx;e=g.ty;p=g.a;b=g.b;n=g.c;g=g.d;q&&(g*=q.d);l=c;for(c=k;c<h;l+=2,c+=2)k=t[l],q=t[l+1],f[c]=k*p+q*b+d,f[c+1]=-(k*n+q*g+e)}else{for(b=0;b<c;b+=2)t=e[l],l+=t+1,n+=t;c=k;for(b=3*n;c<h;c+=2){E=n=0;t=e[l++];for(t+=l;l<t;l++,b+=3){g=d[e[l]].resultMatrix;k=p[b];q=p[b+1];var y=p[b+2],n=n+(k*g.a+q*g.c+g.tx)*y;E+=(k*g.b+q*g.d+g.ty)*y}f[c]=n;f[c+1]=E}}};c.computeWorldPositions=function(b,d,a,c,f,k,m){var e=[],h=b.currDisplayData.verLen,g=this.position,l=this._spaces,n=[],E=h/6,q=-1,y,r,N;E--;h-=4;this.computeWorldVertices2(b,d,2,h,e,0);if(this._debugKey)for(b=0;b<e.length;)a.drawCircle(e[b++],e[b++],10,"#ff0000");this._curves.length=E;d=this._curves;a=0;var u=e[0],v=e[1],A=0,w=0,x=0,C=0,F=0,L=0,H,J,D,B;b=0;for(y=2;b<E;b++,y+=6)A=e[y],w=e[y+1],x=e[y+2],C=e[y+3],F=e[y+4],L=e[y+5],H=.1875*(u-2*A+x),J=.1875*(v-2*w+C),r=.09375*(3*(A-x)-u+F),N=.09375*(3*(w-C)-v+L),D=2*H+r,B=2*J+N,H=.75*(A-u)+H+.16666667*r,J=.75*(w-v)+J+.16666667*N,a+=Math.sqrt(H*H+J*J),H+=D,J+=B,D+=r,B+=N,a+=Math.sqrt(H*H+J*J),H+=D,J+=B,a+=Math.sqrt(H*H+J*J),H+=D+r,J+=B+N,a+=Math.sqrt(H*H+J*J),d[b]=a,u=F,v=L;k&&(g*=a);if(m)for(b=0;b<c;b++)l[b]*=a;var M=this._segments,K=0;for(D=m=k=b=0;b<c;b++,k+=3)if(y=l[b],E=g+=y,0>E)this.addBeforePosition(E,e,0,n,k);else if(E>a)this.addAfterPosition(E-a,e,h-4,n,k);else{for(;;m++)if(N=d[m],!(E>N)){0==m?E/=N:(r=d[m-1],E=(E-r)/(N-r));break}if(m!=q){var q=m,I=6*m,u=e[I],v=e[I+1],A=e[I+2],w=e[I+3],x=e[I+4],C=e[I+5],F=e[I+6],L=e[I+7];H=.03*(u-2*A+x);J=.03*(v-2*w+C);r=.006*(3*(A-x)-u+F);N=.006*(3*(w-C)-v+L);D=2*H+r;B=2*J+N;H=.3*(A-u)+H+.16666667*r;J=.3*(w-v)+J+.16666667*N;K=Math.sqrt(H*H+J*J);M[0]=K;for(I=1;8>I;I++)H+=D,J+=B,D+=r,B+=N,K+=Math.sqrt(H*H+J*J),M[I]=K;H+=D;J+=B;K+=Math.sqrt(H*H+J*J);M[8]=K;H+=D+r;J+=B+N;K+=Math.sqrt(H*H+J*J);M[9]=K;D=0}for(E*=K;;D++)if(N=M[D],!(E>N)){0==D?E/=N:(r=M[D-1],E=D+(E-r)/(N-r));break}this.addCurvePosition(.1*E,u,v,A,w,x,C,F,L,n,k,f||0<b&&0==y)}return n};c.addBeforePosition=function(b,d,a,c,f){var e=d[a],h=d[a+1];d=Math.atan2(d[a+3]-h,d[a+2]-e);c[f]=e+b*Math.cos(d);c[f+1]=h+b*Math.sin(d);c[f+2]=d};c.addAfterPosition=function(b,d,a,c,f){var e=d[a+2],h=d[a+3];d=Math.atan2(h-d[a+1],e-d[a]);c[f]=e+b*Math.cos(d);c[f+1]=h+b*Math.sin(d);c[f+2]=d};c.addCurvePosition=function(b,d,a,c,f,k,m,p,t,g,l,n){0==b&&(b=1E-4);var e=b*b,h=e*b,z=1-b,da=z*z,Aa=da*z,q=z*b,r=3*q,z=z*r;b*=r;p=d*Aa+c*z+k*b+p*h;t=a*Aa+f*z+m*b+t*h;g[l]=p;g[l+1]=t;g[l+2]=n?Math.atan2(t-(a*da+f*q*2+m*e),p-(d*da+c*q*2+k*e)):0};a.NONE=-1;a.BEFORE=-2;a.AFTER=-3;u(a,["_tempMt",function(){return this._tempMt=new C}]);return a}(),Fd=function(){function a(){}n(a,"laya.display.cmd.TransformCmd");var c=a.prototype;c.recover=function(){this.matrix=null;v.recover("TransformCmd",this)};c.run=function(b,d,a){b._transform(this.matrix,this.pivotX+d,this.pivotY+a)};g(0,c,"cmdID",function(){return"Transform"});a.create=function(b,d,c){var e=v.getItemByClass("TransformCmd",a);e.matrix=b;e.pivotX=d;e.pivotY=c;return e};a.ID="Transform";return a}(),kb=function(){function a(){}var c;n(a,"laya.net.LocalStorage");a.__init__=function(){a._baseClass||(a._baseClass=c,c.init());a.items=a._baseClass.items;a.support=a._baseClass.support;return a.support};a.setItem=function(b,d){a._baseClass.setItem(b,d)};a.getItem=function(b){return a._baseClass.getItem(b)};a.setJSON=function(b,d){a._baseClass.setJSON(b,d)};a.getJSON=function(b){return a._baseClass.getJSON(b)};a.removeItem=function(b){a._baseClass.removeItem(b)};a.clear=function(){a._baseClass.clear()};a._baseClass=null;a.items=null;a.support=!1;a.__init$=function(){c=function(){function b(){}n(b,"");b.init=function(){try{b.support=!0,b.items=w.localStorage,b.setItem("laya","1"),b.removeItem("laya")}catch(d){b.support=!1}b.support||console.log("LocalStorage is not supprot or browser is private mode.")};b.setItem=function(d,a){try{b.support&&b.items.setItem(d,a)}catch(h){console.warn("set localStorage failed",h)}};b.getItem=function(d){return b.support?b.items.getItem(d):null};b.setJSON=function(d,a){try{b.support&&b.items.setItem(d,JSON.stringify(a))}catch(h){console.warn("set localStorage failed",h)}};b.getJSON=function(d){return JSON.parse(b.support?b.items.getItem(d):null)};b.removeItem=function(d){b.support&&b.items.removeItem(d)};b.clear=function(){b.support&&b.items.clear()};b.items=null;b.support=!1;return b}()};return a}(),Me=function(){function a(){this.oY=this.oX=0;this.hX=1;this.vX=this.hY=0;this.vY=1}n(a,"laya.debug.tools.RecInfo");var c=a.prototype;c.initByPoints=function(b,d,a){this.oX=b.x;this.oY=b.y;this.hX=d.x;this.hY=d.y;this.vX=a.x;this.vY=a.y};g(0,c,"rotation",function(){return this.rotationRad/Math.PI*180});g(0,c,"width",function(){return Math.sqrt((this.hX-this.oX)*(this.hX-this.oX)+(this.hY-this.oY)*(this.hY-this.oY))});g(0,c,"x",function(){return this.oX});g(0,c,"rotationRadV",function(){return Math.atan2(this.vY-this.oY,this.vX-this.oX)});g(0,c,"y",function(){return this.oY});g(0,c,"rotationRad",function(){return Math.atan2(this.hY-this.oY,this.hX-this.oX)});g(0,c,"height",function(){return Math.sqrt((this.vX-this.oX)*(this.vX-this.oX)+(this.vY-this.oY)*(this.vY-this.oY))});g(0,c,"rotationV",function(){return this.rotationRadV/Math.PI*180});a.createByPoints=function(b,d,c){var e;e=new a;e.initByPoints(b,d,c);return e};a.getGlobalPoints=function(b,d,a){return b.localToGlobal(new P(d,a))};a.getGlobalRecInfo=function(b,d,c,h,f,k,m){void 0===d&&(d=0);void 0===c&&(c=0);void 0===h&&(h=1);void 0===f&&(f=0);void 0===k&&(k=0);void 0===m&&(m=1);return a.createByPoints(a.getGlobalPoints(b,d,c),a.getGlobalPoints(b,h,f),a.getGlobalPoints(b,k,m))};return a}(),Gd=function(){function a(){}n(a,"laya.display.cmd.RotateCmd");var c=a.prototype;c.recover=function(){v.recover("RotateCmd",this)};c.run=function(b,d,a){b._rotate(this.angle,this.pivotX+d,this.pivotY+a)};g(0,c,"cmdID",function(){return"Rotate"});a.create=function(b,d,c){var e=v.getItemByClass("RotateCmd",a);e.angle=b;e.pivotX=d;e.pivotY=c;return e};a.ID="Rotate";return a}(),Xa=function(){function a(){this._obj=null;this._obj=a.supportWeakMap?new q.window.WeakMap:{};a.supportWeakMap||a._maps.push(this)}n(a,"laya.utils.WeakObject");var c=a.prototype;c.set=function(b,d){if(null!=b)if(a.supportWeakMap){var c=b;if("string"==typeof b||"number"==typeof b)(c=a._keys[b])||(c=a._keys[b]={k:b});this._obj.set(c,d)}else"string"==typeof b||"number"==typeof b?this._obj[b]=d:(b.$_GID||(b.$_GID=U.getGID()),this._obj[b.$_GID]=d)};c.get=function(b){return null==b?null:a.supportWeakMap?(b="string"==typeof b||"number"==typeof b?a._keys[b]:b)?this._obj.get(b):null:"string"==typeof b||"number"==typeof b?this._obj[b]:this._obj[b.$_GID]};c.del=function(b){null!=b&&(a.supportWeakMap?(b="string"==typeof b||"number"==typeof b?a._keys[b]:b)&&this._obj.delete(b):"string"==typeof b||"number"==typeof b?delete this._obj[b]:delete this._obj[this._obj.$_GID])};c.has=function(b){return null==b?!1:a.supportWeakMap?this._obj.has("string"==typeof b||"number"==typeof b?a._keys[b]:b):"string"==typeof b||"number"==typeof b?null!=this._obj[b]:null!=this._obj[this._obj.$_GID]};a.__init__=function(){a.supportWeakMap=null!=q.window.WeakMap;a.supportWeakMap||l.systemTimer.loop(a.delInterval,null,a.clearCache)};a.clearCache=function(){for(var b=0,d=a._maps.length;b<d;b++)a._maps[b]._obj={}};a.supportWeakMap=!1;a.delInterval=6E5;a._keys={};a._maps=[];u(a,["I",function(){return this.I=new a}]);return a}(),xd=function(){function a(){}n(a,"laya.display.cmd.FillTextureCmd");var c=a.prototype;c.recover=function(){this.other=this.offset=this.texture=null;v.recover("FillTextureCmd",this)};c.run=function(b,d,a){b.fillTexture(this.texture,this.x+d,this.y+a,this.width,this.height,this.type,this.offset,this.other)};g(0,c,"cmdID",function(){return"FillTexture"});a.create=function(b,d,c,h,f,k,m,p){var e=v.getItemByClass("FillTextureCmd",a);e.texture=b;e.x=d;e.y=c;e.width=h;e.height=f;e.type=k;e.offset=m;e.other=p;return e};a.ID="FillTexture";return a}(),oa=function(){function a(){}n(a,"laya.debug.tools.ObjectTools");a.getFlatKey=function(c,b){return""==c?b:c+a.sign+b};a.flatObj=function(c,b,d){void 0===d&&(d="");b=b?b:{};for(var e in c)"object"==typeof c[e]?a.flatObj(c[e],b,a.getFlatKey(d,e)):b[a.getFlatKey(d,e)]=c[e];return b};a.recoverObj=function(c){var b={},d;for(d in c)a.setKeyValue(b,d,c[d]);return b};a.differ=function(c,b){var d;c=a.flatObj(c);b=a.flatObj(b);var e={};for(d in c)b.hasOwnProperty(d)||(e[d]="\u88ab\u5220\u9664");for(d in b)b[d]!=c[d]&&(e[d]={pre:c[d],now:b[d]});return e};a.traceDifferObj=function(a){var b,d;for(b in a)"string"==typeof a[b]?console.log(b+":",a[b]):(d=a[b],console.log(b+":","now:",d.now,"pre:",d.pre))};a.setKeyValue=function(c,b,d){if(0<=b.indexOf(a.sign)){for(var e=b.split(a.sign),h;1<e.length;)if(h=e.shift(),c[h]||(c[h]={},console.log("addKeyObj:",h)),c=c[h],!c){console.log("wrong flatKey:",b);return}c[e.shift()]=d}else c[b]=d};a.clearObj=function(a){for(var b in a)delete a[b]};a.copyObjFast=function(a){a=laya.debug.tools.ObjectTools.getJsonString(a);return laya.debug.tools.ObjectTools.getObj(a)};a.copyObj=function(c){if(c instanceof Array)return a.copyArr(c);var b={},d;for(d in c)b[d]=null===c[d]||void 0===c[d]?c[d]:c[d]instanceof Array?a.copyArr(c[d]):"object"==typeof c[d]?a.copyObj(c[d]):c[d];return b};a.copyArr=function(c){var b;b=[];var d,e;e=c.length;for(d=0;d<e;d++)b.push(a.copyObj(c[d]));return b};a.concatArr=function(a,b){if(!b)return a;if(!a)return b;var d,c=b.length;for(d=0;d<c;d++)a.push(b[d]);return a};a.insertArrToArr=function(a,b,d){void 0===d&&(d=0);0>d&&(d=0);d>a.length&&(d=a.length);var c,h;a.length+=b.length;h=b.length;for(c=a.length-1;c>=d;c--)a[c]=a[c-h];h=b.length;for(c=0;c<h;c++)a[d+c]=b[c];return a};a.clearArr=function(a){if(!a)return a;a.length=0;return a};a.removeFromArr=function(a,b){var d,c;c=a.length;for(d=0;d<c;d++)if(a[d]==b){a[d].splice(d,1);break}};a.setValueArr=function(c,b){c||(c=[]);c.length=0;return a.concatArr(c,b)};a.getFrom=function(a,b,d){var c;for(c=0;c<d;c++)a.push(b[c]);return a};a.getFromR=function(a,b,d){var c;for(c=0;c<d;c++)a.push(b.pop());return a};a.enableDisplayTree=function(a){for(;a;)a.mouseEnabled=!0,a=a.parent};a.getJsonString=function(a){return JSON.stringify(a)};a.getObj=function(a){return JSON.parse(a)};a.getKeyArr=function(a){var b,d;b=[];for(d in a)b.push(d);return b};a.getObjValues=function(a,b){var d,c,h;h=a.length;d=[];for(c=0;c<h;c++)d.push(a[c][b]);return d};a.hasKeys=function(a,b){var d,c;c=b.length;for(d=0;d<c;d++)if(!a.hasOwnProperty(b[d]))return!1;return!0};a.copyValueByArr=function(a,b,d){var c,h=d.length;for(c=0;c<h;c++)null!==b[d[c]]&&(a[d[c]]=b[d[c]])};a.getNoSameArr=function(a){var b,d,c;c=[];var h;d=a.length;for(b=0;b<d;b++)h=a[b],0>c.indexOf(h)&&c.push(h);return c};a.insertValue=function(a,b){for(var d in b)a[d]=b[d]};a.replaceValue=function(c,b){for(var d in c)b.hasOwnProperty(c[d])&&(c[d]=b[c[d]]),"object"==typeof c[d]&&a.replaceValue(c[d],b)};a.setKeyValues=function(a,b,d){var c,h;h=a.length;for(c=0;c<h;c++)a[c][b]=d};a.findItemPos=function(a,b,d){var c,h;h=a.length;for(c=0;c<h;c++)if(a[c][b]==d)return c;return-1};a.setObjValue=function(a,b,d){a[b]=d;return a};a.setAutoTypeValue=function(c,b,d){c.hasOwnProperty(b)?a.isNumber(c[b])?c[b]=parseFloat(d):c[b]=d:c[b]=d;return c};a.getAutoValue=function(a){var b=parseFloat(a);return"string"==typeof a&&b+""===Gc.trimSide(a)?b:a};a.isNumber=function(a){return parseFloat(a)==a};a.isNaNS=function(a){return"NaN"==a.toString()};a.isNaN=function(a){return"number"==typeof a||"string"==typeof a&&"NaN"!=parseFloat(a).toString()&&parseFloat(a)==a?!1:!0};a.getStrTypedValue=function(c){return"false"==c?!1:"true"==c?!0:"null"==c?null:"undefined"==c?null:a.getAutoValue(c)};a.createKeyValueDic=function(a,b){var d;d={};var c,h;h=a.length;var f,k;for(c=0;c<h;c++)f=a[c],k=f[b],d[k]=f;return d};a.sign="_";return a}(),jc=function(){function a(){this._controlPoints=[new P,new P,new P];this._calFun=this.getPoint2}n(a,"laya.maths.Bezier");var c=a.prototype;c._switchPoint=function(b,d){var a=this._controlPoints.shift();a.setTo(b,d);this._controlPoints.push(a)};c.getPoint2=function(b,d){var a=this._controlPoints[0],c=this._controlPoints[1],f=this._controlPoints[2];d.push(Math.pow(1-b,2)*a.x+2*b*(1-b)*c.x+Math.pow(b,2)*f.x,Math.pow(1-b,2)*a.y+2*b*(1-b)*c.y+Math.pow(b,2)*f.y)};c.getPoint3=function(b,d){var a=this._controlPoints[0],c=this._controlPoints[1],f=this._controlPoints[2],k=this._controlPoints[3];d.push(Math.pow(1-b,3)*a.x+3*c.x*b*(1-b)*(1-b)+3*f.x*b*b*(1-b)+k.x*Math.pow(b,3),Math.pow(1-b,3)*a.y+3*c.y*b*(1-b)*(1-b)+3*f.y*b*b*(1-b)+k.y*Math.pow(b,3))};c.insertPoints=function(b,d){var a;a=1/(0<b?b:5);for(b=0;1>=b;b+=a)this._calFun(b,d)};c.getBezierPoints=function(b,d,a){void 0===d&&(d=5);void 0===a&&(a=2);var c,e;e=b.length;if(e<2*(a+1))return[];var k=[];switch(a){case 2:this._calFun=this.getPoint2;break;case 3:this._calFun=this.getPoint3;break;default:return[]}for(;this._controlPoints.length<=a;)this._controlPoints.push(P.create());for(c=0;c<2*a;c+=2)this._switchPoint(b[c],b[c+1]);for(c=2*a;c<e;c+=2)this._switchPoint(b[c],b[c+1]),0==c/2%a&&this.insertPoints(d,k);return k};u(a,["I",function(){return this.I=new a}]);return a}(),M=function(){function a(b,d,a,c){void 0===b&&(b=0);void 0===d&&(d=0);void 0===a&&(a=0);void 0===c&&(c=0);this.x=b;this.y=d;this.width=a;this.height=c}n(a,"laya.maths.Rectangle");var c=a.prototype;c.setTo=function(b,d,a,c){this.x=b;this.y=d;this.width=a;this.height=c;return this};c.reset=function(){this.x=this.y=this.width=this.height=0;return this};c.recover=function(){this==a.TEMP||this==a.EMPTY?console.log("recover Temp or Empty:",this):v.recover("Rectangle",this.reset())};c.copyFrom=function(b){this.x=b.x;this.y=b.y;this.width=b.width;this.height=b.height;return this};c.contains=function(b,d){return 0>=this.width||0>=this.height?!1:b>=this.x&&b<this.right&&d>=this.y&&d<this.bottom?!0:!1};c.intersects=function(b){return!(b.x>this.x+this.width||b.x+b.width<this.x||b.y>this.y+this.height||b.y+b.height<this.y)};c.intersection=function(b,d){if(!this.intersects(b))return null;d||(d=new a);d.x=Math.max(this.x,b.x);d.y=Math.max(this.y,b.y);d.width=Math.min(this.right,b.right)-d.x;d.height=Math.min(this.bottom,b.bottom)-d.y;return d};c.union=function(b,d){d||(d=new a);this.clone(d);if(0>=b.width||0>=b.height)return d;d.addPoint(b.x,b.y);d.addPoint(b.right,b.bottom);return this};c.clone=function(b){b||(b=new a);b.x=this.x;b.y=this.y;b.width=this.width;b.height=this.height;return b};c.toString=function(){return this.x+","+this.y+","+this.width+","+this.height};c.equals=function(b){return b&&b.x===this.x&&b.y===this.y&&b.width===this.width&&b.height===this.height?!0:!1};c.addPoint=function(b,d){this.x>b&&(this.width+=this.x-b,this.x=b);this.y>d&&(this.height+=this.y-d,this.y=d);this.width<b-this.x&&(this.width=b-this.x);this.height<d-this.y&&(this.height=d-this.y);return this};c._getBoundPoints=function(){var b=a._temB;b.length=0;if(0==this.width||0==this.height)return b;b.push(this.x,this.y,this.x+this.width,this.y,this.x,this.y+this.height,this.x+this.width,this.y+this.height);return b};c.isEmpty=function(){return 0>=this.width||0>=this.height?!0:!1};g(0,c,"right",function(){return this.x+this.width});g(0,c,"bottom",function(){return this.y+this.height});a.create=function(){return v.getItemByClass("Rectangle",a)};a._getBoundPointS=function(b,d,c,h){var e=a._temA;e.length=0;if(0==c||0==h)return e;e.push(b,d,b+c,d,b,d+h,b+c,d+h);return e};a._getWrapRec=function(b,d){if(!b||1>b.length)return d?d.setTo(0,0,0,0):a.TEMP.setTo(0,0,0,0);d=d?d:laya.maths.Rectangle.create();var c,h=b.length,f,k,m,p,t=P.TEMP;f=m=99999;k=p=-f;for(c=0;c<h;c+=2)t.x=b[c],t.y=b[c+1],f=f<t.x?f:t.x,m=m<t.y?m:t.y,k=k>t.x?k:t.x,p=p>t.y?p:t.y;return d.setTo(f,m,k-f,p-m)};a.EMPTY=new a;a.TEMP=new a;a._temB=[];a._temA=[];return a}(),Sd=function(){function a(){}n(a,"laya.display.cmd.DrawPathCmd");var c=a.prototype;c.recover=function(){this.pen=this.brush=this.paths=null;v.recover("DrawPathCmd",this)};c.run=function(b,d,a){b._drawPath(this.x+d,this.y+a,this.paths,this.brush,this.pen)};g(0,c,"cmdID",function(){return"DrawPath"});a.create=function(b,d,c,h,f){var e=v.getItemByClass("DrawPathCmd",a);e.x=b;e.y=d;e.paths=c;e.brush=h;e.pen=f;return e};a.ID="DrawPath";return a}(),Ib=function(){function a(){this.recInfo=this._target=this.arrowAxis=null;a.init();this.arrowAxis=new Ne;this.arrowAxis.mouseEnabled=!0}n(a,"laya.debug.tools.DisController");var c=a.prototype;c.switchType=function(){this.arrowAxis.switchType()};c.updateMe=function(){this._target&&(this.recInfo=Me.getGlobalRecInfo(this._target,0,0,1,0,0,1),console.log("rotation:",this.recInfo.rotation),console.log("pos:",this.recInfo.x,this.recInfo.y),console.log("scale:",this.recInfo.width,this.recInfo.height),this.arrowAxis.x=this.recInfo.x,this.arrowAxis.y=this.recInfo.y,this.arrowAxis.rotation=this.recInfo.rotation,this.arrowAxis.yAxis.rotation=this.recInfo.rotationV-this.recInfo.rotation)};g(0,c,"target",function(){return this._target},function(b){(this._target=b)?(a._container.addChild(this.arrowAxis),l.timer.loop(100,this,this.updateMe)):(this.arrowAxis.removeSelf(),l.timer.clear(this,this.updateMe));this.arrowAxis.target=b;this.updateMe()});g(0,c,"type",function(){return this.arrowAxis.type},function(b){this.arrowAxis.type=b});a.init=function(){a._container?wa.setTop(a._container):(a._container=new L,a._container.mouseEnabled=!0,l.stage.addChild(a._container))};a._container=null;u(a,["I",function(){return this.I=new a}]);return a}(),ab=function(){function a(){}n(a,"laya.debug.tools.TraceTool");a.closeAllLog=function(){q.window.console.log=a.emptyLog};a.emptyLog=function(){};a.traceObj=function(c){a.tempArr.length=0;for(var b in c)a.tempArr.push(b+":"+c[b]);c=a.tempArr.join("\n");console.log(c);return c};a.traceObjR=function(c){a.tempArr.length=0;for(var b in c)a.tempArr.push(c[b]+":"+b);c=a.tempArr.join("\n");console.log(c);return c};a.traceSize=function(a){qa.dTrace("Size: x:"+a.x+" y:"+a.y+" w:"+a.width+" h:"+a.height+" scaleX:"+a.scaleX+" scaleY:"+a.scaleY)};a.traceSplit=function(a){console.log("---------------------"+a+"---------------------------")};a.group=function(a){console.group(a)};a.groupEnd=function(){console.groupEnd()};a.getCallStack=function(c,b){void 0===c&&(c=1);void 0===b&&(b=1);var d;d=a.getCallStack;d=d.caller.caller;var e;for(e="";d&&0<c;)0>=b&&(e+=d+"\x3c-",c--),d=d.caller,b--;return e};a.getCallLoc=function(c){void 0===c&&(c=2);var b;try{a.Erroer.i++}catch(d){b=d.stack.replace(/Error\n/).split(/\n/),b=b[c]?b[c].replace(/^\s+|\s+$/,""):"unknow"}return b};a.traceCallStack=function(){var c;try{a.Erroer.i++}catch(b){c=b.stack}console.log(c);return c};a.getPlaceHolder=function(c){if(!a.holderDic.hasOwnProperty(c)){var b;b="";var d;for(d=0;d<c;d++)b+="-";a.holderDic[c]=b}return a.holderDic[c]};a.traceTree=function(c,b,d){void 0===b&&(b=0);void 0===d&&(d=!0);d&&console.log("traceTree");if(c){var e;if(1>c.numChildren)console.log(c);else{a.group(c);e=c.numChildren;b++;for(d=0;d<e;d++)a.traceTree(c.getChildAt(d),b,!1);a.groupEnd()}}};a.getClassName=function(a){return a.constructor.name};a.traceSpriteInfo=function(c,b,d,e){void 0===b&&(b=!0);void 0===d&&(d=!0);void 0===e&&(e=!0);c instanceof laya.display.Sprite?c?(a.traceSplit("traceSpriteInfo"),qa.dTrace(laya.debug.tools.TraceTool.getClassName(c)+":"+c.name),e?a.traceTree(c):console.log(c),d&&a.traceSize(c),b&&console.log("bounds:"+c.getBounds())):console.log("null Sprite"):console.log("not Sprite")};a.tempArr=[];a.Erroer=null;a.holderDic={};return a}(),sb=function(){function a(){}n(a,"laya.webgl.resource.WebGLRTMgr");a.getRT=function(c,b){c|=0;b|=0;1E4<=c&&console.error("getRT error! w too big");var d=1E4*b+c,e=a.dict[d];if(e&&0<e.length)return c=e.pop(),c._mgrKey=d,c;c=new Fa(c,b,1,-1);c._mgrKey=d;return c};a.releaseRT=function(c){if(!(0>=c._mgrKey)){var b=a.dict[c._mgrKey];!b&&(b=[],a.dict[c._mgrKey]=b);c._mgrKey=0;b.push(c)}};a.dict={};return a}(),Ka=function(){function a(){}n(a,"laya.utils.ClassUtils");a.regClass=function(c,b){a._classMap[c]=b};a.regShortClassName=function(c){for(var b=0;b<c.length;b++){var d=c[b];a._classMap[d.name]=d}};a.getRegClass=function(c){return a._classMap[c]};a.getClass=function(c){var b=a._classMap[c]||c;return"string"==typeof b?l.__classmap[b]||l[c]:b};a.getInstance=function(c){var b=a.getClass(c);if(b)return new b;console.warn("[error] Undefined class:",c);return null};a.createByJson=function(c,b,d,e,h){"string"==typeof c&&(c=JSON.parse(c));var f=c.props;if(!b&&(b=h?h.runWith(c):a.getInstance(f.runtime||c.type),!b))return null;var k=c.child;if(k)for(var m=0,p=k.length;m<p;m++){var t=k[m];if("render"!==t.props.name&&"render"!==t.props.renderType||!b._$set_itemRender)if("Graphic"==t.type)a._addGraphicsToSprite(t,b);else if(a._isDrawType(t.type))a._addGraphicToSprite(t,b,!0);else{var g=a.createByJson(t,null,d,e,h);"Script"===t.type?g.hasOwnProperty("owner")?g.owner=b:g.hasOwnProperty("target")&&(g.target=b):"mask"==t.props.renderType?b.mask=g:b.addChild(g)}else b.itemRender=t}if(f)for(var l in f)h=f[l],"var"===l&&d?d[h]=b:h instanceof Array&&"function"==typeof b[l]?b[l].apply(b,h):b[l]=h;e&&c.customProps&&e.runWith([b,c]);b.created&&b.created();return b};a._addGraphicsToSprite=function(c,b){var d=c.child;if(d&&!(1>d.length)){b=a._getGraphicsFromSprite(c,b);var e=0,h=0;c.props&&(e=a._getObjVar(c.props,"x",0),h=a._getObjVar(c.props,"y",0));0!=e&&0!=h&&b.translate(e,h);var f;f=d.length;for(c=0;c<f;c++)a._addGraphicToGraphics(d[c],b);0!=e&&0!=h&&b.translate(-e,-h)}};a._addGraphicToSprite=function(c,b,d){void 0===d&&(d=!1);b=d?a._getGraphicsFromSprite(c,b):b.graphics;a._addGraphicToGraphics(c,b)};a._getGraphicsFromSprite=function(a,b){if(!a||!a.props)return b.graphics;a=a.props.renderType;if("hit"===a||"unHit"===a){var d=b._style.hitArea||(b.hitArea=new Oe);d[a]||(d[a]=new Ma);d=d[a]}d||(d=b.graphics);return d};a._getTransformData=function(c){var b;if(c.hasOwnProperty("pivotX")||c.hasOwnProperty("pivotY"))b=b||new C,b.translate(-a._getObjVar(c,"pivotX",0),-a._getObjVar(c,"pivotY",0));var d=a._getObjVar(c,"scaleX",1),e=a._getObjVar(c,"scaleY",1),h=a._getObjVar(c,"rotation",0);a._getObjVar(c,"skewX",0);a._getObjVar(c,"skewY",0);if(1!=d||1!=e||0!=h)b=b||new C,b.scale(d,e),b.rotate(.0174532922222222*h);return b};a._addGraphicToGraphics=function(c,b){var d;if(d=c.props)if(c=a.DrawTypeDic[c.type]){d=a._getParams(d,c[1],c[2],c[3]);var e=a._tM;if(e||1!=a._alpha)b.save(),e&&b.transform(e),1!=a._alpha&&b.alpha(a._alpha);b[c[0]].apply(b,d);(e||1!=a._alpha)&&b.restore()}};a._adptLineData=function(a){a[2]=parseFloat(a[0])+parseFloat(a[2]);a[3]=parseFloat(a[1])+parseFloat(a[3]);return a};a._adptTextureData=function(a){a[0]=x.getRes(a[0]);return a};a._adptLinesData=function(c){c[2]=a._getPointListByStr(c[2]);return c};a._isDrawType=function(c){return"Image"===c?!1:a.DrawTypeDic.hasOwnProperty(c)};a._getParams=function(c,b,d,e){void 0===d&&(d=0);var h=a._temParam;h.length=b.length;var f,k;k=b.length;for(f=0;f<k;f++)h[f]=a._getObjVar(c,b[f][0],b[f][1]);a._alpha=a._getObjVar(c,"alpha",1);(c=a._getTransformData(c))?(d||(d=0),c.translate(h[d],h[d+1]),h[d]=h[d+1]=0,a._tM=c):a._tM=null;e&&a[e]&&(h=a[e](h));return h};a._getPointListByStr=function(a){a=a.split(",");var b,d;d=a.length;for(b=0;b<d;b++)a[b]=parseFloat(a[b]);return a};a._getObjVar=function(a,b,d){return a.hasOwnProperty(b)?a[b]:d};a._temParam=[];a._classMap={Sprite:L,Scene:Yc,Text:W,Animation:"laya.display.Animation",Skeleton:"laya.ani.bone.Skeleton",Particle2D:"laya.particle.Particle2D",div:"laya.html.dom.HTMLDivParser",p:"laya.html.dom.HTMLElement",img:"laya.html.dom.HTMLImageElement",span:"laya.html.dom.HTMLElement",br:"laya.html.dom.HTMLBrElement",style:"laya.html.dom.HTMLStyleElement",font:"laya.html.dom.HTMLElement",a:"laya.html.dom.HTMLElement","#text":"laya.html.dom.HTMLElement",link:"laya.html.dom.HTMLLinkElement"};a._tM=null;a._alpha=NaN;u(a,["DrawTypeDic",function(){return this.DrawTypeDic={Rect:["drawRect",[["x",0],["y",0],["width",0],["height",0],["fillColor",null],["lineColor",null],["lineWidth",1]]],Circle:["drawCircle",[["x",0],["y",0],["radius",0],["fillColor",null],["lineColor",null],["lineWidth",1]]],Pie:["drawPie",[["x",0],["y",0],["radius",0],["startAngle",0],["endAngle",0],["fillColor",null],["lineColor",null],["lineWidth",1]]],Image:["drawTexture",[["x",0],["y",0],["width",0],["height",0]]],Texture:["drawTexture",[["skin",null],["x",0],["y",0],["width",0],["height",0]],1,"_adptTextureData"],FillTexture:["fillTexture",[["skin",null],["x",0],["y",0],["width",0],["height",0],["repeat",null]],1,"_adptTextureData"],FillText:["fillText",[["text",""],["x",0],["y",0],["font",null],["color",null],["textAlign",null]],1],Line:["drawLine",[["x",0],["y",0],["toX",0],["toY",0],["lineColor",null],["lineWidth",0]],0,"_adptLineData"],Lines:["drawLines",[["x",0],["y",0],["points",""],["lineColor",null],["lineWidth",0]],0,"_adptLinesData"],Curves:["drawCurves",[["x",0],["y",0],["points",""],["lineColor",null],["lineWidth",0]],0,"_adptLinesData"],Poly:["drawPoly",[["x",0],["y",0],["points",""],["fillColor",null],["lineColor",null],["lineWidth",1]],0,"_adptLinesData"]}}]);return a}(),Qe=function(){function a(){this._jsonData=null;this._tileTexSetArr=[];this._texArray=[];this._mapTileH=this._mapTileW=this._mapH=this._mapW=this._height=this._width=this._y=this._x=0;this._mapSprite=null;this._layerArray=[];this._renderLayerArray=[];this._gridArray=[];this._showGridKey=!1;this._gridH=this._gridW=this._totalGridNum=0;this._gridHeight=this._gridWidth=450;this._loader=this._jsonLoader=null;this._tileSetArray=[];this._completeHandler=this._currTileSet=null;this._index=0;this._animationDic={};this._properties=null;this._tileProperties={};this._tileProperties2={};this._orientation="orthogonal";this._renderOrder="right-down";this._colorArray=["FF","00","33","66"];this._scale=1;this._pivotScaleY=this._pivotScaleX=.5;this._viewPortHeight=this._viewPortWidth=this._viewPortY=this._viewPortX=this._centerY=this._centerX=0;this._enableLinear=!0;this._pathArray=this._resPath=null;this._limitRange=!1;this.autoCache=!0;this.autoCacheType="normal";this.showGridTextureCount=this.removeCoveredTile=this.enableMergeLayer=!1;this.antiCrack=!0;this.cacheAllAfterInit=!1;this._texutreStartDic={};this._rect=new M;this._paddingRect=new M;this._mapRect=new c;this._mapLastRect=new c}var c,b,d;n(a,"laya.map.TiledMap");var e=a.prototype;e.createMap=function(d,b,a,c,e,t,g){void 0===t&&(t=!0);void 0===g&&(g=!1);this._enableLinear=t;this._limitRange=g;this._rect.x=b.x;this._rect.y=b.y;this._rect.width=b.width;this._rect.height=b.height;this._viewPortWidth=b.width/this._scale;this._viewPortHeight=b.height/this._scale;this._completeHandler=a;c?this._paddingRect.copyFrom(c):this._paddingRect.setTo(0,0,0,0);e&&(this._gridWidth=e.x,this._gridHeight=e.y);b=d.lastIndexOf("/");-1<b?(this._resPath=d.substr(0,b),this._pathArray=this._resPath.split("/")):(this._resPath="",this._pathArray=[]);this._jsonLoader=new x;this._jsonLoader.once("complete",this,this.onJsonComplete);this._jsonLoader.load(d,"json",!1)};e.onJsonComplete=function(a){this._mapSprite=new L;l.stage.addChild(this._mapSprite);a=this._jsonData=a;this._properties=a.properties;this._orientation=a.orientation;this._renderOrder=a.renderorder;this._mapW=a.width;this._mapH=a.height;this._mapTileW=a.tilewidth;this._mapTileH=a.tileheight;this._width=this._mapTileW*this._mapW;this._height=this._mapTileH*this._mapH;"staggered"==this._orientation&&(this._height=(.5+.5*this._mapH)*this._mapTileH);this._mapLastRect.top=this._mapLastRect.bottom=this._mapLastRect.left=this._mapLastRect.right=-1;a=a.tilesets;var c,e,h;for(h=0;h<a.length;h++)if(c=a[h],e=new d,e.init(c),!e.properties||!e.properties.ignore)if(this._tileProperties[h]=e.tileproperties,this.addTileProperties(e.tileproperties),this._tileSetArray.push(e),e=c.tiles)for(var p in e){var t=e[p].animation;if(t){var g=new b;this._animationDic[p]=g;g.image=c.image;for(var n=0;n<t.length;n++){var Aa=t[n];g.mAniIdArray.push(Aa.tileid);g.mDurationTimeArray.push(Aa.duration)}}}this._tileTexSetArr.push(null);0<this._tileSetArray.length&&(e=this._currTileSet=this._tileSetArray.shift(),this._loader=new x,this._loader.once("complete",this,this.onTextureComplete),p=this.mergePath(this._resPath,e.image),this._loader.load(p,"image",!1))};e.mergePath=function(d,b){var a="",c=b.split("/"),e=0,h;for(h=c.length-1;0<=h;h--)".."==c[h]&&e++;if(0==e)return a=0<this._pathArray.length?d+"/"+b:b;var f=this._pathArray.length-e;0>f&&console.log("[error]path does not exist",this._pathArray,c,d,b);for(h=0;h<f;h++)a=0==h?a+this._pathArray[h]:a+"/"+this._pathArray[h];for(h=e;h<c.length;h++)a=a+"/"+c[h];return a};e.onTextureComplete=function(d){r.isWebGL&&!this._enableLinear&&(d.bitmap.minFifter=9728,d.bitmap.magFifter=9728,d.bitmap.enableMerageInAtlas=!1);this._texArray.push(d);var b=this._currTileSet,a=b.tilewidth,c=b.tileheight,e=Math.floor((b.imagewidth-b.margin-a)/(a+b.spacing))+1,h=Math.floor((b.imageheight-b.margin-c)/(c+b.spacing))+1,g;this._texutreStartDic[b.image]=this._tileTexSetArr.length;for(var l=0;l<h;l++)for(var n=0;n<e;n++)g=new fe,g.offX=b.titleoffsetX,g.offY=b.titleoffsetY-(c-this._mapTileH),g.texture=ga.createFromTexture(d,b.margin+(a+b.spacing)*n,b.margin+(c+b.spacing)*l,a,c),this.antiCrack&&this.adptTexture(g.texture),this._tileTexSetArr.push(g),g.gid=this._tileTexSetArr.length;0<this._tileSetArray.length?(b=this._currTileSet=this._tileSetArray.shift(),this._loader.once("complete",this,this.onTextureComplete),d=this.mergePath(this._resPath,b.image),this._loader.load(d,"image",!1)):(this._currTileSet=null,this.initMap())};e.adptTexture=function(d){if(d){var b=d.uv[2],a=d.uv[1],c=d.uv[7],e=1/d.bitmap.width,h=1/d.bitmap.height;d.uv[0]=d.uv[6]=d.uv[0]+e;d.uv[2]=d.uv[4]=b-e;d.uv[1]=d.uv[3]=a+h;d.uv[5]=d.uv[7]=c-h}};e.initMap=function(){var d,b,a;for(a in this._animationDic){var c=this._animationDic[a],e;e=this._texutreStartDic[c.image];var t=this.getTexture(parseInt(a)+e);if(0<c.mAniIdArray.length){t.textureArray=[];t.durationTimeArray=c.mDurationTimeArray;t.isAnimation=!0;d=t.animationTotalTime=0;for(b=t.durationTimeArray.length;d<b;d++)t.animationTotalTime+=t.durationTimeArray[d];d=0;for(b=c.mAniIdArray.length;d<b;d++){var g=this.getTexture(c.mAniIdArray[d]+e);t.textureArray.push(g)}}}this._gridWidth=Math.floor(this._gridWidth/this._mapTileW)*this._mapTileW;this._gridHeight=Math.floor(this._gridHeight/this._mapTileH)*this._mapTileH;this._gridWidth<this._mapTileW&&(this._gridWidth=this._mapTileW);this._gridHeight<this._mapTileH&&(this._gridHeight=this._mapTileH);this._gridW=Math.ceil(this._width/this._gridWidth);this._gridH=Math.ceil(this._height/this._gridHeight);this._totalGridNum=this._gridW*this._gridH;for(d=0;d<this._gridH;d++)for(b=[],this._gridArray.push(b),a=0;a<this._gridW;a++)b.push(null);d=this._jsonData.layers;b=!0;var l,n;for(a=0;a<d.length;a++)e=d[a],1==e.visible&&(c=new Pe,c.init(e,this),this.enableMergeLayer?(e=c.getLayerProperties("layer"),(b=b||!n||e!=l)?(b=!1,n=c.tarLayer=c,this._mapSprite.addChild(c),this._renderLayerArray.push(c)):c.tarLayer=n,l=e):(this._mapSprite.addChild(c),this._renderLayerArray.push(c)),this._layerArray.push(c));this.removeCoveredTile&&this.adptTiledMapData();this.cacheAllAfterInit&&this.cacheAllGrid();this.moveViewPort(this._rect.x,this._rect.y);null!=this._completeHandler&&this._completeHandler.run()};e.addTileProperties=function(d){for(var b in d)this._tileProperties2[b]=d[b]};e.getTileUserData=function(d,b,a){return this._tileProperties2&&this._tileProperties2[d]&&b in this._tileProperties2[d]?this._tileProperties2[d][b]:a};e.adptTiledMapData=function(){var d,b,a={};for(d=this._layerArray.length-1;0<=d;d--)if(b=this._layerArray[d],b=b._mapData)this.removeCoverd(b,a),this.collectCovers(b,a,d)};e.removeCoverd=function(d,b){var a,c;c=d.length;for(a=0;a<c;a++)b[a]&&(d[a]=0)};e.collectCovers=function(d,b,a){var c;c=d.length;var e,h;for(a=0;a<c;a++)e=d[a],0<e&&(h=this.getTileUserData(e-1,"type",0),0<h&&(b[a]=e))};e.getTexture=function(d){return d<this._tileTexSetArr.length?this._tileTexSetArr[d]:null};e.getMapProperties=function(d){return this._properties?this._properties[d]:null};e.getTileProperties=function(d,b,a){return this._tileProperties[d]&&this._tileProperties[d][b]?this._tileProperties[d][b][a]:null};e.getSprite=function(d,b,a){if(0<this._tileTexSetArr.length){var c=new Zc;c.initData(this,!0);c.size(b,a);d=this._tileTexSetArr[d];null!=d&&null!=d.texture&&(d.isAnimation?(b=new $c,this._index++,b.setTileTextureSet(this._index.toString(),d),c.addAniSprite(b),c.addChild(b)):c.graphics.drawImage(d.texture,0,0,b,a),c.drawImageNum++);return c}return null};e.setViewPortPivotByScale=function(d,b){this._pivotScaleX=d;this._pivotScaleY=b};e.moveViewPort=function(d,b){this._x=-d;this._y=-b;this._rect.x=d;this._rect.y=b;this.updateViewPort()};e.changeViewPort=function(d,b,a,c){if(d!=this._rect.x||b!=this._rect.y||a!=this._rect.width||c!=this._rect.height)this._x=-d,this._y=-b,this._rect.x=d,this._rect.y=b,this._rect.width=a,this._rect.height=c,this._viewPortWidth=a/this._scale,this._viewPortHeight=c/this._scale,this.updateViewPort()};e.changeViewPortBySize=function(d,b,a){null==a&&(a=new M);this._centerX=this._rect.x+this._rect.width*this._pivotScaleX;this._centerY=this._rect.y+this._rect.height*this._pivotScaleY;a.x=this._centerX-d*this._pivotScaleX;a.y=this._centerY-b*this._pivotScaleY;a.width=d;a.height=b;this.changeViewPort(a.x,a.y,a.width,a.height);return a};e.updateViewPort=function(){this._centerX=this._rect.x+this._rect.width*this._pivotScaleX;this._centerY=this._rect.y+this._rect.height*this._pivotScaleY;var d=!1,b=this._viewPortX;this._viewPortX=this._centerX-this._rect.width*this._pivotScaleX/this._scale;b!=this._viewPortX?d=!0:b=this._viewPortY;this._viewPortY=this._centerY-this._rect.height*this._pivotScaleY/this._scale;d||b==this._viewPortY||(d=!0);this._limitRange&&(this._viewPortX+this._viewPortWidth>this._width&&(this._viewPortX=this._width-this._viewPortWidth),this._viewPortY+this._viewPortHeight>this._height&&(this._viewPortY=this._height-this._viewPortHeight),0>this._viewPortX&&(this._viewPortX=0),0>this._viewPortY&&(this._viewPortY=0));b=this._paddingRect;this._mapRect.top=Math.floor((this._viewPortY-b.y)/this._gridHeight);this._mapRect.bottom=Math.floor((this._viewPortY+this._viewPortHeight+b.height+b.y)/this._gridHeight);this._mapRect.left=Math.floor((this._viewPortX-b.x)/this._gridWidth);this._mapRect.right=Math.floor((this._viewPortX+this._viewPortWidth+b.width+b.x)/this._gridWidth);if(this._mapRect.top!=this._mapLastRect.top||this._mapRect.bottom!=this._mapLastRect.bottom||this._mapRect.left!=this._mapLastRect.left||this._mapRect.right!=this._mapLastRect.right)this.clipViewPort(),this._mapLastRect.top=this._mapRect.top,this._mapLastRect.bottom=this._mapRect.bottom,this._mapLastRect.left=this._mapRect.left,this._mapLastRect.right=this._mapRect.right,d=!0;if(d)for(var b=this._renderLayerArray.length,a=0;a<b;a++)d=this._renderLayerArray[a],0<d._gridSpriteArray.length&&d.updateGridPos()};e.clipViewPort=function(){var d,b,a;if(this._mapRect.left>this._mapLastRect.left){if(d=this._mapRect.left-this._mapLastRect.left,0<d)for(a=this._mapLastRect.left;a<this._mapLastRect.left+d;a++)for(b=this._mapLastRect.top;b<=this._mapLastRect.bottom;b++)this.hideGrid(a,b)}else if(d=Math.min(this._mapLastRect.left,this._mapRect.right+1)-this._mapRect.left,0<d)for(a=this._mapRect.left;a<this._mapRect.left+d;a++)for(b=this._mapRect.top;b<=this._mapRect.bottom;b++)this.showGrid(a,b);if(this._mapRect.right>this._mapLastRect.right){if(d=this._mapRect.right-this._mapLastRect.right,0<d)for(a=Math.max(this._mapLastRect.right+1,this._mapRect.left);a<=this._mapLastRect.right+d;a++)for(b=this._mapRect.top;b<=this._mapRect.bottom;b++)this.showGrid(a,b)}else if(d=this._mapLastRect.right-this._mapRect.right,0<d)for(a=this._mapRect.right+1;a<=this._mapRect.right+d;a++)for(b=this._mapLastRect.top;b<=this._mapLastRect.bottom;b++)this.hideGrid(a,b);if(this._mapRect.top>this._mapLastRect.top){if(d=this._mapRect.top-this._mapLastRect.top,0<d)for(b=this._mapLastRect.top;b<this._mapLastRect.top+d;b++)for(a=this._mapLastRect.left;a<=this._mapLastRect.right;a++)this.hideGrid(a,b)}else if(d=Math.min(this._mapLastRect.top,this._mapRect.bottom+1)-this._mapRect.top,0<d)for(b=this._mapRect.top;b<this._mapRect.top+d;b++)for(a=this._mapRect.left;a<=this._mapRect.right;a++)this.showGrid(a,b);if(this._mapRect.bottom>this._mapLastRect.bottom){if(d=this._mapRect.bottom-this._mapLastRect.bottom,0<d)for(b=Math.max(this._mapLastRect.bottom+1,this._mapRect.top);b<=this._mapLastRect.bottom+d;b++)for(a=this._mapRect.left;a<=this._mapRect.right;a++)this.showGrid(a,b)}else if(d=this._mapLastRect.bottom-this._mapRect.bottom,0<d)for(b=this._mapRect.bottom+1;b<=this._mapRect.bottom+d;b++)for(a=this._mapLastRect.left;a<=this._mapLastRect.right;a++)this.hideGrid(a,b)};e.showGrid=function(d,b){if(!(0>d||d>=this._gridW||0>b||b>=this._gridH)){var a=this._gridArray[b][d];if(null==a)this.getGridArray(d,b);else for(d=0;d<a.length&&d<this._layerArray.length;d++)this._layerArray[d]&&a[d]&&(b=a[d],0==b._visible&&0<b.drawImageNum&&b.show())}};e.cacheAllGrid=function(){var d,b,a;for(d=0;d<this._gridW;d++)for(b=0;b<this._gridH;b++)a=this.getGridArray(d,b),this.cacheGridsArray(a)};e.cacheGridsArray=function(d){var b;a._tempCanvas||(a._tempCanvas=new xa,b=a._tempCanvas.context,b||(b=a._tempCanvas.getContext("2d"),b.__tx=0,b.__ty=0));b=a._tempCanvas;b.context.asBitmap=!1;var c,e;e=d.length;var h;for(c=0;c<e;c++)h=d[c],b.clear(),b.size(1,1),h.render(b.context,0,0),h.hide();b.clear();b.size(1,1)};e.getGridArray=function(d,b){var a,c,e,h=this._gridArray[b][d];if(null==h){var h=this._gridArray[b][d]=[],f=0,g=0,l=0,n=0,q=this._gridWidth,y=this._gridHeight;switch(this.orientation){case "isometric":var f=Math.floor(d*q),g=Math.floor(d*q+q),l=Math.floor(b*y),n=Math.floor(b*y+y),r,u,v;break;case "staggered":f=Math.floor(d*q/this._mapTileW);g=Math.floor((d*q+q)/this._mapTileW);l=Math.floor(b*y/(this._mapTileH/2));n=Math.floor((b*y+y)/(this._mapTileH/2));break;case "orthogonal":f=Math.floor(d*q/this._mapTileW);g=Math.floor((d*q+q)/this._mapTileW);l=Math.floor(b*y/this._mapTileH);n=Math.floor((b*y+y)/this._mapTileH);break;case "hexagonal":e=2*this._mapTileH/3,f=Math.floor(d*q/this._mapTileW),g=Math.ceil((d*q+q)/this._mapTileW),l=Math.floor(b*y/e),n=Math.ceil((b*y+y)/e)}for(var w,A,x,C=0;C<this._layerArray.length;C++){w=this._layerArray[C];this.enableMergeLayer?(w.tarLayer!=x&&(A=null,x=w.tarLayer),A||(A=x.getDrawSprite(d,b),h.push(A)),e=A):(e=w.getDrawSprite(d,b),h.push(e));var F;this._showGridKey&&(F="#",F+=this._colorArray[Math.floor(Math.random()*this._colorArray.length)],F+=this._colorArray[Math.floor(Math.random()*this._colorArray.length)],F+=this._colorArray[Math.floor(Math.random()*this._colorArray.length)]);switch(this.orientation){case "isometric":r=this.tileHeight/2;u=this.tileWidth/2;c=this._width/2;a=Math.floor(l/r);v=Math.floor(n/r);r=this._mapW+Math.floor((f-c)/u);u=this._mapW+Math.floor((g-c)/u);c=2*this._mapH;0>a&&(a=0);a>=c&&(a=c-1);0>v&&(n=0);v>=c&&(v=c-1);for(e.zOrder=this._totalGridNum*C+b*this._gridW+d;a<v;a++)for(c=0;c<=a;c++){var D=a-c,B=c,H=D-B+this._mapW;H>r&&H<=u&&w.drawTileTexture(e,D,B)&&e.drawImageNum++}break;case "staggered":e.zOrder=C*this._totalGridNum+b*this._gridW+d;for(a=l;a<n;a++)for(c=f;c<g;c++)w.drawTileTexture(e,c,a)&&e.drawImageNum++;break;case "orthogonal":case "hexagonal":switch(this._renderOrder){case "right-down":e.zOrder=C*this._totalGridNum+b*this._gridW+d;for(a=l;a<n;a++)for(c=f;c<g;c++)w.drawTileTexture(e,c,a)&&e.drawImageNum++;break;case "right-up":e.zOrder=C*this._totalGridNum+(this._gridH-1-b)*this._gridW+d;for(a=n-1;a>=l;a--)for(c=f;c<g;c++)w.drawTileTexture(e,c,a)&&e.drawImageNum++;break;case "left-down":e.zOrder=C*this._totalGridNum+b*this._gridW+(this._gridW-1-d);for(a=l;a<n;a++)for(c=g-1;c>=f;c--)w.drawTileTexture(e,c,a)&&e.drawImageNum++;break;case "left-up":for(e.zOrder=C*this._totalGridNum+(this._gridH-1-b)*this._gridW+(this._gridW-1-d),a=n-1;a>=l;a--)for(c=g-1;c>=f;c--)w.drawTileTexture(e,c,a)&&e.drawImageNum++}}e.isHaveAnimation||(e.autoSize=!0,this.autoCache&&(e.cacheAs=this.autoCacheType),e.autoSize=!1);this.enableMergeLayer?A&&0<A.drawImageNum&&x&&x.addChild(A):(0<e.drawImageNum&&w.addChild(e),this._showGridKey&&e.graphics.drawRect(0,0,q,y,null,F))}this.enableMergeLayer&&this.showGridTextureCount&&A&&A.graphics.fillText(A.drawImageNum+"",20,20,null,"#ff0000","left")}return h};e.hideGrid=function(d,b){if(!(0>d||d>=this._gridW||0>b||b>=this._gridH)&&(d=this._gridArray[b][d]))for(var a=0;a<d.length;a++)b=d[a],0<b.drawImageNum&&null!=b&&b.hide()};e.getLayerObject=function(d,b){for(var a=null,c=0;c<this._layerArray.length&&(a=this._layerArray[c],a.layerName!=d);c++);return a?a.getObjectByName(b):null};e.destroy=function(){this._orientation="orthogonal";this._jsonData=null;var d;this._gridArray=[];var b;for(d=0;d<this._tileTexSetArr.length;d++)(b=this._tileTexSetArr[d])&&b.clearAll();this._tileTexSetArr=[];for(d=0;d<this._texArray.length;d++)b=this._texArray[d],b.destroy();this._texArray=[];this._mapTileH=this._mapTileW=this._mapH=this._mapW=this._height=this._width=0;this._rect.setTo(0,0,0,0);for(d=0;d<this._layerArray.length;d++)b=this._layerArray[d],b.clearAll();this._layerArray=[];this._renderLayerArray=[];this._mapSprite&&(this._mapSprite.destroy(),this._mapSprite=null);this._loader=this._jsonLoader=null;d=this._animationDic;for(var a in d)delete d[a];this._properties=null;d=this._tileProperties;for(a in d)delete d[a];this._completeHandler=this._currTileSet=null;this._mapRect.clearAll();this._mapLastRect.clearAll();this._tileSetArray=[];this._gridHeight=this._gridWidth=450;this._index=this._y=this._x=this._gridH=this._gridW=0;this._enableLinear=!0;this._pathArray=this._resPath=null};e.mapSprite=function(){return this._mapSprite};e.getLayerByName=function(d){for(var b,a=0;a<this._layerArray.length;a++)if(b=this._layerArray[a],d==b.layerName)return b;return null};e.getLayerByIndex=function(d){return d<this._layerArray.length?this._layerArray[d]:null};g(0,e,"orientation",function(){return this._orientation});g(0,e,"viewPortX",function(){return-this._viewPortX});g(0,e,"scale",function(){return this._scale},function(d){0>=d||(this._scale=d,this._viewPortWidth=this._rect.width/d,this._viewPortHeight=this._rect.height/d,this._mapSprite.scale(this._scale,this._scale),this.updateViewPort())});g(0,e,"tileWidth",function(){return this._mapTileW});g(0,e,"viewPortY",function(){return-this._viewPortY});g(0,e,"tileHeight",function(){return this._mapTileH});g(0,e,"width",function(){return this._width});g(0,e,"numRowsTile",function(){return this._mapH});g(0,e,"numColumnsTile",function(){return this._mapW});g(0,e,"height",function(){return this._height});g(0,e,"viewPortWidth",function(){return this._viewPortWidth});g(0,e,"viewPortHeight",function(){return this._viewPortHeight});g(0,e,"x",function(){return this._x});g(0,e,"y",function(){return this._y});g(0,e,"gridWidth",function(){return this._gridWidth});g(0,e,"gridHeight",function(){return this._gridHeight});g(0,e,"numColumnsGrid",function(){return this._gridW});g(0,e,"numRowsGrid",function(){return this._gridH});g(0,e,"renderOrder",function(){return this._renderOrder});a.ORIENTATION_ORTHOGONAL="orthogonal";a.ORIENTATION_ISOMETRIC="isometric";a.ORIENTATION_STAGGERED="staggered";a.ORIENTATION_HEXAGONAL="hexagonal";a.RENDERORDER_RIGHTDOWN="right-down";a.RENDERORDER_RIGHTUP="right-up";a.RENDERORDER_LEFTDOWN="left-down";a.RENDERORDER_LEFTUP="left-up";a._tempCanvas=null;a.__init$=function(){c=function(){function d(){this.bottom=this.right=this.top=this.left=0}n(d,"");d.prototype.clearAll=function(){this.left=this.top=this.right=this.bottom=0};return d}();b=function(){function d(){this.mAniIdArray=[];this.mDurationTimeArray=[];this.mTileTexSetArr=[];this.image=null}n(d,"");return d}();d=function(){function d(){this.firstgid=0;this.image="";this.name=this.margin=this.imagewidth=this.imageheight=0;this.properties=null;this.titleoffsetY=this.titleoffsetX=this.tilewidth=this.tileheight=this.spacing=0;this.tileproperties=null}n(d,"");d.prototype.init=function(d){this.firstgid=d.firstgid;this.image=d.image;this.imageheight=d.imageheight;this.imagewidth=d.imagewidth;this.margin=d.margin;this.name=d.name;this.properties=d.properties;this.spacing=d.spacing;this.tileheight=d.tileheight;this.tilewidth=d.tilewidth;this.tileproperties=d.tileproperties;if(d=d.tileoffset)this.titleoffsetX=d.x,this.titleoffsetY=d.y};return d}()};return a}(),Re=function(){function a(){}n(a,"laya.display.css.BoundsStyle");var c=a.prototype;c.reset=function(){this.bounds&&this.bounds.recover();this.userBounds&&this.userBounds.recover();this.temBM=this.userBounds=this.bounds=null;return this};c.recover=function(){v.recover("BoundsStyle",this.reset())};a.create=function(){return v.getItemByClass("BoundsStyle",a)};return a}(),xe=function(){function a(){}n(a,"laya.debug.tools.DebugExport");a.export=function(){for(var c in a._exportsDic)w[c]=a._exportsDic[c]};u(a,["_exportsDic",function(){return this._exportsDic={DebugTool:qa,Watcher:Fe}}]);return a}(),lb=function(){function a(){}n(a,"UIConfig");a.touchScrollEnable=!0;a.mouseWheelEnable=!0;a.showButtons=!0;a.popupBgColor="#000000";a.popupBgAlpha=.7;a.closeDialogOnSide=!0;return a}(),ad=function(){function a(){this.vb=this.ib=null;this.ib=Fc.create(35048);this.vb=Ec.create(8)}n(a,"laya.webgl.shader.d2.skinAnishader.SkinMeshBuffer");var c=a.prototype;c.addSkinMesh=function(b){b.getData2(this.vb,this.ib,this.vb._byteLength/32)};c.reset=function(){this.vb.clear();this.ib.clear()};a.getInstance=function(){return a.instance=a.instance||new a};a.instance=null;return a}(),Pd=function(){function a(){}n(a,"laya.display.cmd.DrawCircleCmd");var c=a.prototype;c.recover=function(){this.lineColor=this.fillColor=null;v.recover("DrawCircleCmd",this)};c.run=function(b,d,a){b._drawCircle(this.x+d,this.y+a,this.radius,this.fillColor,this.lineColor,this.lineWidth,this.vid)};g(0,c,"cmdID",function(){return"DrawCircle"});a.create=function(b,d,c,h,f,k,m){var e=v.getItemByClass("DrawCircleCmd",a);e.x=b;e.y=d;e.radius=c;e.fillColor=h;e.lineColor=f;e.lineWidth=k;e.vid=m;return e};a.ID="DrawCircle";return a}(),Se=function(){function a(){this.targetBoneName=this.name=null;this.mix=this.bendDirection=1;this.isSpine=!0;this.targetBoneIndex=-1;this.boneNames=[];this.boneIndexs=[]}n(a,"laya.ani.bone.IkConstraintData");return a}(),Q=function(){function a(){}n(a,"laya.webgl.utils.RenderState2D");a.mat2MatArray=function(c,b){b[0]=c.a;b[1]=c.b;b[2]=a.EMPTYMAT4_ARRAY[2];b[3]=a.EMPTYMAT4_ARRAY[3];b[4]=c.c;b[5]=c.d;b[6]=a.EMPTYMAT4_ARRAY[6];b[7]=a.EMPTYMAT4_ARRAY[7];b[8]=a.EMPTYMAT4_ARRAY[8];b[9]=a.EMPTYMAT4_ARRAY[9];b[10]=a.EMPTYMAT4_ARRAY[10];b[11]=a.EMPTYMAT4_ARRAY[11];b[12]=c.tx;b[13]=c.ty;b[14]=a.EMPTYMAT4_ARRAY[14];b[15]=a.EMPTYMAT4_ARRAY[15];return b};a.restoreTempArray=function(){a.TEMPMAT4_ARRAY[0]=1;a.TEMPMAT4_ARRAY[1]=0;a.TEMPMAT4_ARRAY[4]=0;a.TEMPMAT4_ARRAY[5]=1;a.TEMPMAT4_ARRAY[12]=0;a.TEMPMAT4_ARRAY[13]=0};a.clear=function(){a.worldScissorTest=!1;a.worldAlpha=1};a._MAXSIZE=99999999;a.EMPTYMAT4_ARRAY=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1];a.TEMPMAT4_ARRAY=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1];a.worldMatrix4=a.TEMPMAT4_ARRAY;a.matWVP=null;a.worldAlpha=1;a.worldScissorTest=!1;a.worldShaderDefines=null;a.worldFilters=null;a.width=0;a.height=0;u(a,["worldMatrix",function(){return this.worldMatrix=new C}]);return a}(),Te=function(){function a(){this.tSelectTar=this.completeHandler=null;this._selectTip=new L;this._selectTip.setSelfBounds(new M(0,0,0,0));bd.listen("ItemClicked",this,this.itemClicked)}n(a,"laya.debug.tools.ClickSelectTool");var c=a.prototype;c.beginClickSelect=function(b){this.completeHandler=b;a.isClickSelectState=!0;this.clickSelectChange()};c.clickSelectChange=function(){q.onPC&&(this.tSelectTar=null,this.clearSelectTip(),a.isClickSelectState?l.timer.loop(200,this,this.updateSelectTar,null,!0):l.timer.clear(this,this.updateSelectTar))};c.clearSelectTip=function(){this._selectTip.removeSelf()};c.updateSelectTar=function(){this.clearSelectTip();if((this.tSelectTar=dc.instance.getDisUnderMouse())&&!pa.I.isDebugItem(this.tSelectTar)){var b;b=this._selectTip.graphics;b.clear();var d;d=Qc.getGRec(this.tSelectTar);pa.I.popLayer.addChild(this._selectTip);b.drawRect(0,0,d.width,d.height,null,tb.CLICK_SELECT_COLOR,2);this._selectTip.pos(d.x,d.y)}};c.itemClicked=function(b){!a.isClickSelectState||a.ignoreDebugTool&&pa.I.isDebugItem(b)||(qa.showDisBound(b),this.completeHandler&&this.completeHandler.runWith(b),a.isClickSelectState=!1,this.clickSelectChange())};g(1,a,"I",function(){a._I||(a._I=new a);return a._I});a._I=null;a.isClickSelectState=!1;a.ignoreDebugTool=!1;return a}(),la=function(){function a(){}n(a,"laya.webgl.canvas.BlendMode");a._init_=function(c){a.fns=[a.BlendNormal,a.BlendAdd,a.BlendMultiply,a.BlendScreen,a.BlendOverlay,a.BlendLight,a.BlendMask,a.BlendDestinationOut];a.targetFns=[a.BlendNormalTarget,a.BlendAddTarget,a.BlendMultiplyTarget,a.BlendScreenTarget,a.BlendOverlayTarget,a.BlendLightTarget,a.BlendMask,a.BlendDestinationOut]};a.BlendNormal=function(a){K.setBlendFunc(a,1,771)};a.BlendAdd=function(a){K.setBlendFunc(a,1,772)};a.BlendMultiply=function(a){K.setBlendFunc(a,774,771)};a.BlendScreen=function(a){K.setBlendFunc(a,1,1)};a.BlendOverlay=function(a){K.setBlendFunc(a,1,769)};a.BlendLight=function(a){K.setBlendFunc(a,1,1)};a.BlendNormalTarget=function(a){K.setBlendFunc(a,1,771)};a.BlendAddTarget=function(a){K.setBlendFunc(a,1,772)};a.BlendMultiplyTarget=function(a){K.setBlendFunc(a,774,771)};a.BlendScreenTarget=function(a){K.setBlendFunc(a,1,1)};a.BlendOverlayTarget=function(a){K.setBlendFunc(a,1,769)};a.BlendLightTarget=function(a){K.setBlendFunc(a,1,1)};a.BlendMask=function(a){K.setBlendFunc(a,0,770)};a.BlendDestinationOut=function(a){K.setBlendFunc(a,0,0)};a.activeBlendFunction=null;a.NAMES="normal add multiply screen overlay light mask destination-out".split(" ");a.TOINT={normal:0,add:1,multiply:2,screen:3,overlay:4,light:5,mask:6,"destination-out":7,lighter:1};a.NORMAL="normal";a.ADD="add";a.MULTIPLY="multiply";a.SCREEN="screen";a.OVERLAY="overlay";a.LIGHT="light";a.MASK="mask";a.DESTINATIONOUT="destination-out";a.LIGHTER="lighter";a.fns=[];a.targetFns=[];return a}();(function(){function a(){}n(a,"laya.html.dom.HTMLBrElement");var c=a.prototype;c._addToLayout=function(b){b.push(this)};c.reset=function(){return this};c.destroy=function(){v.recover(gb.getClassName(this),this.reset())};c._setParent=function(b){};c._getCSSStyle=function(){a.brStyle||(a.brStyle=new fb,a.brStyle.setLineElement(!0),a.brStyle.block=!0);return a.brStyle};c.renderSelfToGraphic=function(b,d,a,c){};g(0,c,"URI",null,function(b){});g(0,c,"parent",null,function(b){});g(0,c,"href",null,function(b){});a.brStyle=null;return a})();var Tc=function(){function a(){this.wordStartIndex=this.h=this.w=this.y=this.x=0;this.minTextHeight=99999;this.mWidth=0;this.elements=[]}n(a,"laya.html.utils.LayoutLine");a.prototype.updatePos=function(a,b,d,e,h,f,k){d=0;0<this.elements.length&&(d=this.elements[this.elements.length-1],d=d.x+d.width-this.elements[0].x);k=k||this.h;a=0;"center"===h&&(a=(b-d)/2);"right"===h&&(a=b-d);b=0;for(h=this.elements.length;b<h;b++)switch(d=this.elements[b],f=d._getCSSStyle(),0!==a&&(d.x+=a),f.valign){case "top":d.y=e;break;case "middle":f=0;99999!=this.minTextHeight&&(f=this.minTextHeight);f=(f+k)/2;f=Math.max(f,this.h);f=e+f-d.height;d.y=f;break;case "bottom":d.y=e+(k-d.height)}};return a}(),Ue=function(){function a(){this.attachmentName=this.name=null;this.type=0;this.transform=null;this.height=this.width=NaN;this.lengths=this.vertices=this.triangles=this.weights=this.uvs=this.bones=this.texture=null;this.verLen=0}n(a,"laya.ani.bone.SkinSlotDisplayData");var c=a.prototype;c.createTexture=function(b){if(this.texture)return this.texture;this.texture=new ga(b.bitmap,this.uvs);this.uvs[0]>this.uvs[4]&&this.uvs[1]>this.uvs[5]?(this.texture.width=b.height,this.texture.height=b.width,this.texture.offsetX=-b.offsetX,this.texture.offsetY=-b.offsetY,this.texture.sourceWidth=b.sourceHeight,this.texture.sourceHeight=b.sourceWidth):(this.texture.width=b.width,this.texture.height=b.height,this.texture.offsetX=-b.offsetX,this.texture.offsetY=-b.offsetY,this.texture.sourceWidth=b.sourceWidth,this.texture.sourceHeight=b.sourceHeight);return this.texture};c.destory=function(){this.texture&&this.texture.destroy()};return a}(),Ve=function(){function a(){}n(a,"laya.ani.AnimationParser02");a.READ_DATA=function(){a._DATA.offset=a._reader.getUint32();a._DATA.size=a._reader.getUint32()};a.READ_BLOCK=function(){for(var c=a._BLOCK.count=a._reader.getUint16(),b=a._BLOCK.blockStarts=[],d=a._BLOCK.blockLengths=[],e=0;e<c;e++)b.push(a._reader.getUint32()),d.push(a._reader.getUint32())};a.READ_STRINGS=function(){var c=a._reader.getUint32(),b=a._reader.getUint16(),d=a._reader.pos;a._reader.pos=c+a._DATA.offset;for(c=0;c<b;c++)a._strings[c]=a._reader.readUTFString();a._reader.pos=d};a.parse=function(c,b){a._templet=c;a._reader=b;b.__getBuffer();a.READ_DATA();a.READ_BLOCK();a.READ_STRINGS();c=0;for(var d=a._BLOCK.count;c<d;c++){var e=b.getUint16(),h=a._strings[e],f=a["READ_"+h];if(null==f)throw Error("model file err,no this function:"+e+" "+h);f.call(null)}};a.READ_ANIMATIONS=function(){var c=a._reader,b=c.__getBuffer(),d,e,h,f,k=c.getUint16(),m=[];m.length=k;for(d=0;d<k;d++)m[d]=nc.interpolation[c.getByte()];var p=c.getUint8();a._templet._anis.length=p;for(d=0;d<p;d++){var g=a._templet._anis[d]=new cd;g.nodes=[];e=g.name=a._strings[c.getUint16()];a._templet._aniMap[e]=d;g.bone3DMap={};g.playTime=c.getFloat32();var l=g.nodes.length=c.getInt16();for(e=g.totalKeyframeDatasLength=0;e<l;e++){var n=g.nodes[e]=new dd;n.keyframeWidth=k;n.childs=[];h=c.getUint16();0<=h&&(n.name=a._strings[h],g.bone3DMap[n.name]=e);n.keyFrame=[];n.parentIndex=c.getInt16();-1==n.parentIndex?n.parent=null:n.parent=g.nodes[n.parentIndex];g.totalKeyframeDatasLength+=k;n.interpolationMethod=m;null!=n.parent&&n.parent.childs.push(n);var q=c.getUint16();n.keyFrame.length=q;var E=null,G=null;h=0;for(f=q;h<f;h++){E=n.keyFrame[h]=new Uc;E.startTime=c.getFloat32();G&&(G.duration=E.startTime-G.startTime);E.dData=new Float32Array(k);E.nextData=new Float32Array(k);var G=a._DATA.offset,y=c.getUint32(),G=b.slice(G+y,G+y+4*k);E.data=new Float32Array(G);G=E}E.duration=0;n.playTime=g.playTime;a._templet._calculateKeyFrame(n,q,k)}}};a._templet=null;a._reader=null;a._strings=[];u(a,["_BLOCK",function(){return this._BLOCK={count:0}},"_DATA",function(){return this._DATA={offset:0,size:0}}]);return a}(),ed=function(){function a(){}n(a,"laya.ani.AnimationParser01");a.parse=function(a,b){var d=b.__getBuffer(),c,h,f,k,m,p,g=b.readUTFString();a._aniClassName=g;var g=b.readUTFString().split("\n"),l=b.getUint8(),n=b.getUint32();c=b.getUint32();var q;0<n&&(q=d.slice(n,c));q=new Sa(q);0<c&&(a._publicExtData=d.slice(c,d.byteLength));a._useParent=!!b.getUint8();a._anis.length=l;for(c=0;c<l;c++){n=a._anis[c]=new cd;n.nodes=[];h=n.name=g[b.getUint16()];a._aniMap[h]=c;n.bone3DMap={};n.playTime=b.getFloat32();var E=n.nodes.length=b.getUint8();for(h=n.totalKeyframeDatasLength=0;h<E;h++){var G=n.nodes[h]=new dd;G.childs=[];var y=b.getInt16();0<=y&&(G.name=g[y],n.bone3DMap[G.name]=h);G.keyFrame=[];G.parentIndex=b.getInt16();-1==G.parentIndex?G.parent=null:G.parent=n.nodes[G.parentIndex];G.lerpType=b.getUint8();y=b.getUint32();q.pos=y;y=G.keyframeWidth=q.getUint16();n.totalKeyframeDatasLength+=y;if(0===G.lerpType||1===G.lerpType)for(G.interpolationMethod=[],G.interpolationMethod.length=y,f=0;f<y;f++)G.interpolationMethod[f]=nc.interpolation[q.getUint8()];null!=G.parent&&G.parent.childs.push(G);f=b.getUint16();0<f&&(G.extenData=d.slice(b.pos,b.pos+f),b.pos+=f);var r=b.getUint16();G.keyFrame.length=r;var u=0,v;f=0;for(k=r;f<k;f++){v=G.keyFrame[f]=new Uc;v.duration=b.getFloat32();v.startTime=u;if(2===G.lerpType)switch(v.interpolationData=[],m=b.getUint8(),p=b.getFloat32(),p){case 254:v.interpolationData.length=y;for(m=0;m<y;m++)v.interpolationData[m]=0;break;case 255:v.interpolationData.length=y;for(m=0;m<y;m++)v.interpolationData[m]=5;break;default:for(v.interpolationData.push(p),p=1;p<m;p++)v.interpolationData.push(b.getFloat32())}v.data=new Float32Array(y);v.dData=new Float32Array(y);v.nextData=new Float32Array(y);for(m=0;m<y;m++)v.data[m]=b.getFloat32(),-1E-8<v.data[m]&&1E-8>v.data[m]&&(v.data[m]=0);u+=v.duration}v.startTime=n.playTime;G.playTime=n.playTime;a._calculateKeyFrame(G,r,y)}}};return a}(),X=function(){function a(){}n(a,"laya.media.SoundManager");g(1,a,"useAudioMusic",function(){return a._useAudioMusic},function(c){a._useAudioMusic=c;a._musicClass=c?xb:null});g(1,a,"autoStopMusic",function(){return a._autoStopMusic},function(c){l.stage.off("blur",null,a._stageOnBlur);l.stage.off("focus",null,a._stageOnFocus);l.stage.off("visibilitychange",null,a._visibilityChange);if(a._autoStopMusic=c)l.stage.on("blur",null,a._stageOnBlur),l.stage.on("focus",null,a._stageOnFocus),l.stage.on("visibilitychange",null,a._visibilityChange)});g(1,a,"muted",function(){return a._muted},function(c){c!=a._muted&&(c&&a.stopAllSound(),a.musicMuted=c,a._muted=c)});g(1,a,"musicMuted",function(){return a._musicMuted},function(c){c!=a._musicMuted&&(c?(a._bgMusic?a._musicChannel&&!a._musicChannel.isStopped?r.isConchApp?a._musicChannel._audio&&(a._musicChannel._audio.muted=!0):a._musicChannel.pause():a._musicChannel=null:a._musicChannel=null,a._musicMuted=c):(a._musicMuted=c,a._bgMusic&&a._musicChannel&&(r.isConchApp?a._musicChannel._audio&&(a._musicChannel._audio.muted=!1):a._musicChannel.resume())))});g(1,a,"soundMuted",function(){return a._soundMuted},function(c){a._soundMuted=c});a.__init__=function(){var c=q.window;(c=c.AudioContext||c.webkitAudioContext||c.mozAudioContext?!0:!1)&&Wa.initWebAudio();a._soundClass=c?Wa:xb;xb._initMusicAudio();a._musicClass=xb;return c};a.addChannel=function(c){0<=a._channels.indexOf(c)||a._channels.push(c)};a.removeChannel=function(c){var b;for(b=a._channels.length-1;0<=b;b--)a._channels[b]==c&&a._channels.splice(b,1)};a.disposeSoundLater=function(c){a._lastSoundUsedTimeDic[c]=q.now();a._isCheckingDispose||(a._isCheckingDispose=!0,l.timer.loop(5E3,null,a._checkDisposeSound))};a._checkDisposeSound=function(){var c,b=q.now(),d=!1;for(c in a._lastSoundUsedTimeDic)3E4<b-a._lastSoundUsedTimeDic[c]?(delete a._lastSoundUsedTimeDic[c],a.disposeSoundIfNotUsed(c)):d=!0;d||(a._isCheckingDispose=!1,l.timer.clear(null,a._checkDisposeSound))};a.disposeSoundIfNotUsed=function(c){var b;for(b=a._channels.length-1;0<=b;b--)if(a._channels[b].url==c)return;a.destroySound(c)};a._visibilityChange=function(){l.stage.isVisibility?a._stageOnFocus():a._stageOnBlur()};a._stageOnBlur=function(){a._isActive=!1;a._musicChannel&&!a._musicChannel.isStopped&&(a._blurPaused=!0,a._musicChannel.pause());a.stopAllSound();l.stage.once("mousedown",null,a._stageOnFocus)};a._recoverWebAudio=function(){Wa.ctx&&"running"!=Wa.ctx.state&&Wa.ctx.resume&&Wa.ctx.resume()};a._stageOnFocus=function(){a._isActive=!0;a._recoverWebAudio();l.stage.off("mousedown",null,a._stageOnFocus);a._blurPaused&&a._musicChannel&&a._musicChannel.isStopped&&(a._blurPaused=!1,a._musicChannel.resume())};a.playSound=function(c,b,d,e,h){void 0===b&&(b=1);void 0===h&&(h=0);if(!a._isActive||!c||a._muted)return null;a._recoverWebAudio();c=D.formatURL(c);if(c==a._bgMusic){if(a._musicMuted)return null}else{if(r.isConchApp){var f=U.getFileExtension(c);if("wav"!=f&&"ogg"!=f)return alert("The sound only supports wav or ogg format,for optimal performance reason,please refer to the official website document."),null}if(a._soundMuted)return null}var k;q.onMiniGame||(k=l.loader.getRes(c));e||(e=a._soundClass);k||(k=new e,k.load(c),q.onMiniGame||x.cacheRes(c,k));b=k.play(h,b);if(!b)return null;b.url=c;b.volume=c==a._bgMusic?a.musicVolume:a.soundVolume;b.completeHandler=d;return b};a.destroySound=function(a){var b=l.loader.getRes(a);b&&(x.clearRes(a),b.dispose())};a.playMusic=function(c,b,d,e){void 0===b&&(b=0);void 0===e&&(e=0);c=D.formatURL(c);a._bgMusic=c;a._musicChannel&&a._musicChannel.stop();return a._musicChannel=a.playSound(c,b,d,a._musicClass,e)};a.stopSound=function(c){c=D.formatURL(c);var b,d;for(b=a._channels.length-1;0<=b;b--)d=a._channels[b],d.url==c&&d.stop()};a.stopAll=function(){a._bgMusic=null;var c,b;for(c=a._channels.length-1;0<=c;c--)b=a._channels[c],b.stop()};a.stopAllSound=function(){var c,b;for(c=a._channels.length-1;0<=c;c--)b=a._channels[c],b.url!=a._bgMusic&&b.stop()};a.stopMusic=function(){a._musicChannel&&a._musicChannel.stop();a._bgMusic=null};a.setSoundVolume=function(c,b){if(b)b=D.formatURL(b),a._setVolume(b,c);else{a.soundVolume=c;var d;for(b=a._channels.length-1;0<=b;b--)d=a._channels[b],d.url!=a._bgMusic&&(d.volume=c)}};a.setMusicVolume=function(c){a.musicVolume=c;a._setVolume(a._bgMusic,c)};a._setVolume=function(c,b){c=D.formatURL(c);var d,e;for(d=a._channels.length-1;0<=d;d--)e=a._channels[d],e.url==c&&(e.volume=b)};a.musicVolume=1;a.soundVolume=1;a.playbackRate=1;a._useAudioMusic=!0;a._muted=!1;a._soundMuted=!1;a._musicMuted=!1;a._bgMusic=null;a._musicChannel=null;a._channels=[];a._autoStopMusic=!1;a._blurPaused=!1;a._isActive=!0;a._soundClass=null;a._musicClass=null;a._lastSoundUsedTimeDic={};a._isCheckingDispose=!1;a.autoReleaseSound=!1;return a}(),We=function(){function a(b,d){this.name=this._data=this._bones=this._targetBone=null;this.bendDirection=this.mix=NaN;this.isSpine=!0;this._sp=null;this.isDebug=!1;this._data=b;this._targetBone=d[b.targetBoneIndex];this.isSpine=b.isSpine;null==this._bones&&(this._bones=[]);for(var a=this._bones.length=0,c=b.boneIndexs.length;a<c;a++)this._bones.push(d[b.boneIndexs[a]]);this.name=b.name;this.mix=b.mix;this.bendDirection=b.bendDirection}n(a,"laya.ani.bone.IkConstraint");var c=a.prototype;c.apply=function(){switch(this._bones.length){case 1:this._applyIk1(this._bones[0],this._targetBone.resultMatrix.tx,this._targetBone.resultMatrix.ty,this.mix);break;case 2:this.isSpine?this._applyIk2(this._bones[0],this._bones[1],this._targetBone.resultMatrix.tx,this._targetBone.resultMatrix.ty,this.bendDirection,this.mix):this._applyIk3(this._bones[0],this._bones[1],this._targetBone.resultMatrix.tx,this._targetBone.resultMatrix.ty,this.bendDirection,this.mix)}};c._applyIk1=function(b,d,c,h){var e=b.parentBone,k=1/(e.resultMatrix.a*e.resultMatrix.d-e.resultMatrix.b*e.resultMatrix.c);d-=e.resultMatrix.tx;c-=e.resultMatrix.ty;e=Math.atan2((c*e.resultMatrix.a-d*e.resultMatrix.b)*k-b.transform.y,(d*e.resultMatrix.d-c*e.resultMatrix.c)*k-b.transform.x)*a.radDeg-0-b.transform.skX;0>b.transform.scX&&(e+=180);180<e?e-=360:-180>e&&(e+=360);b.transform.skX=b.transform.skY=b.transform.skX+e*h;b.update()};c.updatePos=function(b,d){this._sp&&this._sp.pos(b,d)};c._applyIk2=function(b,d,c,h,f,k){if(0!=k){var e=b.resultTransform.x,p=b.resultTransform.y,g=b.transform.scX,z=b.transform.scY,n=d.transform.scX,q,E,G;0>g?(g=-g,q=180,G=-1):(q=0,G=1);0>z&&(z=-z,G=-G);0>n?(n=-n,E=180):E=0;var y=d.resultTransform.x,r,u,v,w=b.resultMatrix.a,A=b.resultMatrix.c,x=b.resultMatrix.b,C=b.resultMatrix.d,F=1E-4>=Math.abs(g-z);F?(r=d.resultTransform.y,u=w*y+A*r+b.resultMatrix.tx,v=x*y+C*r+b.resultMatrix.ty):(r=0,u=w*y+b.resultMatrix.tx,v=x*y+b.resultMatrix.ty);this.isDebug&&(this._sp||(this._sp=new L,l.stage.addChild(this._sp)),this._sp.graphics.clear(),this._sp.graphics.drawCircle(c,h,15,"#ffff00"),this._sp.graphics.drawCircle(u,v,15,"#ff00ff"));b.setRotation(Math.atan2(v-b.resultMatrix.ty,u-b.resultMatrix.tx));var D=b.parentBone,w=D.resultMatrix.a,A=D.resultMatrix.c,x=D.resultMatrix.b,C=D.resultMatrix.d,B=1/(w*C-A*x),H=c-D.resultMatrix.tx,J=h-D.resultMatrix.ty;h=(H*C-J*A)*B-e;c=(J*w-H*x)*B-p;H=u-D.resultMatrix.tx;J=v-D.resultMatrix.ty;A=(H*C-J*A)*B-e;w=(J*w-H*x)*B-p;J=Math.sqrt(A*A+w*w);A=d.length*n;if(F)A*=g,w=(h*h+c*c-J*J-A*A)/(2*J*A),-1>w?w=-1:1<w&&(w=1),f*=Math.acos(w),w=J+A*w,A*=Math.sin(f),w=Math.atan2(c*w-h*A,h*w+c*A);else{w=g*A;A*=z;F=Math.atan2(c,h);g=0;n=Number.MAX_VALUE;D=v=u=z=B=x=0;H=J+w;C=H*H;C>u&&(z=0,u=C,v=H);H=J-w;C=H*H;C<n&&(g=Math.PI,n=C,x=H);var I=Math.acos(-w*J/(w*w-A*A)),H=w*Math.cos(I)+J,J=A*Math.sin(I),C=H*H+J*J;C<n&&(g=I,n=C,x=H,B=J);C>u&&(z=I,u=C,v=H,D=J);h*h+c*c<=(n+u)/2?(w=F-Math.atan2(B*f,x),f*=g):(w=F-Math.atan2(D*f,v),f*=z)}h=Math.atan2(r,y)*G;c=b.resultTransform.skX;w=(w-h)*a.radDeg+q-c;180<w?w-=360:-180>w&&(w+=360);b.resultTransform.x=e;b.resultTransform.y=p;b.resultTransform.skX=b.resultTransform.skY=c+w*k;c=d.resultTransform.skX;f=((f+h)*a.radDeg-0)*G+E-c%360;180<f?f-=360:-180>f&&(f+=360);d.resultTransform.x=y;d.resultTransform.y=r;d.resultTransform.skX=d.resultTransform.skY+=f*k;b.update()}};c._applyIk3=function(b,d,c,h,f,k){if(0!=k){var e;k=d.resultMatrix.a*d.length;var p=d.resultMatrix.b*d.length,g=k*k+p*p,n=Math.sqrt(g);k=b.resultMatrix.tx;p=b.resultMatrix.ty;e=d.resultMatrix.tx;var da=d.resultMatrix.ty;e-=k;var da=da-p,q=e*e+da*da,E=Math.sqrt(q);e=c-b.resultMatrix.tx;var da=h-b.resultMatrix.ty,G=e*e+da*da,y=Math.sqrt(G);n+E<=y||y+n<=E||y+E<=n?(f=n+E<=y?1:-1,e=k+f*(c-k)*E/y,da=p+f*(h-p)*E/y):(g=(q-g+G)/(2*G),n=Math.sqrt(q-g*g*G)/y,y=k+e*g,g=p+da*g,da=-da*n,n*=e,0<f?(e=y-da,da=g-n):(e=y+da,da=g+n));f=e;e=da;this.isDebug&&(this._sp||(this._sp=new L,l.stage.addChild(this._sp)),this._sp.graphics.clear(),this._sp.graphics.drawCircle(k,p,15,"#ff00ff"),this._sp.graphics.drawCircle(c,h,15,"#ffff00"),this._sp.graphics.drawCircle(f,e,15,"#ff00ff"));p=Math.atan2(e-b.resultMatrix.ty,f-b.resultMatrix.tx);b.setRotation(p);k=a._tempMatrix;k.identity();k.rotate(p);k.scale(b.resultMatrix.getScaleX(),b.resultMatrix.getScaleY());k.translate(b.resultMatrix.tx,b.resultMatrix.ty);k.copyTo(b.resultMatrix);b.updateChild();b=Math.atan2(h-e,c-f);d.setRotation(b);c=a._tempMatrix;c.identity();c.rotate(b);c.scale(d.resultMatrix.getScaleX(),d.resultMatrix.getScaleY());c.translate(f,e);k.copyTo(d.resultMatrix);d.updateChild()}};u(a,["radDeg",function(){return this.radDeg=180/Math.PI},"degRad",function(){return this.degRad=Math.PI/180},"_tempMatrix",function(){return this._tempMatrix=new C}]);return a}();(function(){function a(){}n(a,"laya.Const");a.NOT_ACTIVE=1;a.ACTIVE_INHIERARCHY=2;a.AWAKED=4;a.NOT_READY=8;a.DISPLAY=16;a.HAS_ZORDER=32;a.HAS_MOUSE=64;a.DISPLAYED_INSTAGE=128;a.DRAWCALL_OPTIMIZE=256;return a})();var Sc=function(){function a(){this._defaultPhysicsMemory=16;this._editerEnvironment=!1;this.isAntialias=!0;this.isAlpha=!1;this.isStencil=this.premultipliedAlpha=!0;this.octreeCulling=!1;this.octreeInitialSize=64;this.octreeMinNodeSize=2;this.octreeLooseness=1.25;this.debugFrustumCulling=!1;this.octreeInitialCenter=new laya.d3.math.Vector3(0,0,0)}n(a,"Config3D");var c=a.prototype;l.imps(c,{"laya.d3.core.IClone":!0});c.cloneTo=function(b){b._defaultPhysicsMemory=this._defaultPhysicsMemory;b._editerEnvironment=this._editerEnvironment;b.isAntialias=this.isAntialias;b.isAlpha=this.isAlpha;b.premultipliedAlpha=this.premultipliedAlpha;b.isStencil=this.isStencil;b.octreeCulling=this.octreeCulling;this.octreeInitialCenter.cloneTo(b.octreeInitialCenter);b.octreeMinNodeSize=this.octreeMinNodeSize;b.octreeLooseness=this.octreeLooseness;b.debugFrustumCulling=this.debugFrustumCulling};c.clone=function(){var b=new a;this.cloneTo(b);return b};g(0,c,"defaultPhysicsMemory",function(){return this._defaultPhysicsMemory},function(b){if(16>b)throw"defaultPhysicsMemory must large than 16M";this._defaultPhysicsMemory=b});u(a,["_default",function(){return this._default=new a}]);return a}(),Wc=function(){function a(){}n(a,"laya.wx.mini.MiniLocalStorage");a.__init__=function(){a.items=a};a.setItem=function(a,b){try{wx.setStorageSync(a,b)}catch(d){wx.setStorage({key:a,data:b})}};a.getItem=function(a){return wx.getStorageSync(a)};a.setJSON=function(c,b){a.setItem(c,b)};a.getJSON=function(c){return a.getItem(c)};a.removeItem=function(a){wx.removeStorageSync(a)};a.clear=function(){wx.clearStorageSync()};a.getStorageInfoSync=function(){try{var a=wx.getStorageInfoSync();console.log(a.keys);console.log(a.currentSize);console.log(a.limitSize);return a}catch(b){}return null};a.support=!0;a.items=null;return a}(),fd=function(){function a(){}n(a,"laya.ani.math.BezierLerp");a.getBezierRate=function(c,b,d,e,h){var f=a._getBezierParamKey(b,d,e,h),k=100*f+c;if(a._bezierResultCache[k])return a._bezierResultCache[k];b=a._getBezierPoints(b,d,e,h,f);e=b.length;for(d=0;d<e;d+=2)if(c<=b[d])return a._bezierResultCache[k]=b[d+1],b[d+1];return a._bezierResultCache[k]=1};a._getBezierParamKey=function(a,b,d,e){return 100*(100*(100*(100*a+b)+d)+e)};a._getBezierPoints=function(c,b,d,e,h){if(a._bezierPointsCache[h])return a._bezierPointsCache[h];c=[0,0,c,b,d,e,1,1];c=(new jc).getBezierPoints(c,100,3);return a._bezierPointsCache[h]=c};a._bezierResultCache={};a._bezierPointsCache={};return a}(),Xe=function(){function a(){this.absolute=!1;this.compassAccuracy=this.gamma=this.beta=this.alpha=NaN}n(a,"laya.device.motion.RotationInfo");return a}(),Kc=function(){function a(a,b,d){this.by=this.h=this.f=this.g=this.y=this.x=0;this.retainCount=this.tested=this.closed=this.opened=this.parent=null;this.walkable=!1;void 0===d&&(d=!0);this.x=a;this.y=b;this.walkable=d}n(a,"PathFinding.core.Node",null,"Node$2");return a}(),dc=function(){function a(){this.mouseY=this.mouseX=NaN;this._target=this._stage=null;this.isGetting=!1;this._matrix=new C;this._point=new P;this._rect=new M;this._event=Ya.EMPTY;this._stage=l.stage;this.init(r.context.canvas)}n(a,"laya.debug.tools.DisplayHook");var c=a.prototype;c.init=function(b){var d=this;q.window.navigator.msPointerEnabled&&(b.style["-ms-content-zooming"]="none",b.style["-ms-touch-action"]="none");var c=this;q.document.addEventListener("mousedown",function(b){d._event._stoped=!1;a.isFirst=!0;c.check(c._stage,b.offsetX,b.offsetY,c.onMouseDown,!0,!1)},!0);q.document.addEventListener("touchstart",function(b){d._event._stoped=!1;a.isFirst=!0;for(var e=b.changedTouches,h=0,m=e.length;h<m;h++){var p=e[h],g=b;c._event._stoped=!1;c._event.nativeEvent=g||p;c._target=null;p.offsetX?(c.mouseX=p.offsetX,c.mouseY=p.offsetY):(c.mouseX=p.clientX-l.stage.offset.x,c.mouseY=p.clientY-l.stage.offset.y);c.check(c._stage,c.mouseX,c.mouseY,c.onMouseDown,!0,!1)}},!0)};c.onMouseMove=function(b,d){this.sendEvent(b,"mousemove")};c.onMouseUp=function(b,d){d&&this.sendEvent(b,"mouseup")};c.onMouseDown=function(b,d){d&&(b.$_MOUSEDOWN=!0,this.sendEvent(b,"mousedown"))};c.sendEvent=function(b,d){this._event._stoped||(b.event(d,this._event.setTo(d,b,b)),"mouseup"===d&&b.$_MOUSEDOWN&&(b.$_MOUSEDOWN=!1,b.event("click",this._event.setTo("click",b,b))))};c.selectDisUnderMouse=function(){a.isFirst=!0;this.check(l.stage,l.stage.mouseX,l.stage.mouseY,null,!0,!1)};c.getDisUnderMouse=function(){this.isGetting=!0;a.isFirst=!0;qa.target=null;this.check(l.stage,l.stage.mouseX,l.stage.mouseY,null,!0,!1);this.isGetting=!1;return qa.target};c.check=function(b,d,c,h,f,k){if(b==qa.debugLayer||b==pa.I||this.isGetting&&b==pa.I||!b.visible||0>=b.getSelfBounds().width)return!1;var e=!1;f&&(this._rect=b.getBounds(),e=this._rect.contains(d,c),this._point.setTo(d,c),b.fromParentPoint(this._point),d=this._point.x,c=this._point.y);if(e){k=!1;for(e=b._children.length-1;-1<e&&!(k=this.check(b._children[e],d,c,h,f,!0));e--);d=b.getGraphicBounds().contains(d,c);(e=k||d)&&!k&&a.isFirst&&(a.isFirst=!1,b instanceof laya.debug.tools.debugUI.DButton||(qa.target=b,this.isGetting||(qa.autoWork(),bd.notify("ItemClicked",b))))}return e};a.initMe=function(){a.instance||(a.instance=new a)};a.ITEM_CLICKED="ItemClicked";a.instance=null;a.isFirst=!1;return a}(),Dc=function(){function a(){this.data=null}n(a,"laya.filters.ColorFilterAction");var c=a.prototype;c.apply=function(b){var d=b.canvas,a=d.context;if(0==d.width||0==d.height)return d;for(var d=a.getImageData(0,0,d.width,d.height),c=d.data,f,k=0,m=c.length;k<m;k+=4)f=this.getColor(c[k],c[k+1],c[k+2],c[k+3]),0!=c[k+3]&&(c[k]=f[0],c[k+1]=f[1],c[k+2]=f[2],c[k+3]=f[3]);a.putImageData(d,0,0);return b};c.getColor=function(b,d,a,c){var e=[];if(this.data._mat&&this.data._alpha){var h=this.data._mat,m=this.data._alpha;e[0]=h[0]*b+h[1]*d+h[2]*a+h[3]*c+m[0];e[1]=h[4]*b+h[5]*d+h[6]*a+h[7]*c+m[1];e[2]=h[8]*b+h[9]*d+h[10]*a+h[11]*c+m[2];e[3]=h[12]*b+h[13]*d+h[14]*a+h[15]*c+m[3]}return e};return a}(),Ye=function(){function a(){}n(a,"laya.html.utils.HTMLParse");a.getInstance=function(c){var b=v.getItem(a._htmlClassMapShort[c]);b||(b=Ka.getInstance(c));return b};a.parse=function(c,b,d){b=b.replace(/<br>/g,"\x3cbr/\x3e");b=("\x3croot\x3e"+b+"\x3c/root\x3e").replace(a.spacePattern,a.char255);b=U.parseXMLFromString(b);a._parseXML(c,b.childNodes[0].childNodes,d,null,c.div)};a._parseXML=function(c,b,d,e,h){var f,k;if(b.join||b.item)for(f=0,k=b.length;f<k;++f)a._parseXML(c,b[f],d,e,h);else{var m;if(3==b.nodeType)if(c instanceof laya.html.dom.HTMLDivParser){if(null==b.nodeName&&(b.nodeName="#text"),f=b.nodeName.toLowerCase(),b=b.textContent.replace(/^\s+|\s+$/g,""),0<b.length&&(m=a.getInstance(f)))c.addChild(m),m.innerTEXT=b.replace(a.char255AndOneSpacePattern," ")}else b=b.textContent.replace(/^\s+|\s+$/g,""),0<b.length&&(c.innerTEXT=b.replace(a.char255AndOneSpacePattern," "));else if(f=b.nodeName.toLowerCase(),"#comment"!=f)if(m=a.getInstance(f)){"p"==f?(c.addChild(a.getInstance("br")),m=c.addChild(m),c.addChild(a.getInstance("br"))):m=c.addChild(m);"eff"==f&&m.SetParent(h);m.URI=d;m.href=e;if((c=b.attributes)&&0<c.length)for(f=0,k=c.length;f<k;++f)e=c[f],m._setAttributes(e.nodeName,e.value);a._parseXML(m,b.childNodes,d,m.href,h)}else a._parseXML(c,b.childNodes,d,e,h)}};a.char255=String.fromCharCode(255);a.spacePattern=/&nbsp;|&#160;/g;a.char255AndOneSpacePattern=new RegExp(String.fromCharCode(255)+"|(\\s+)","g");a._htmlClassMapShort={div:"HTMLDivParser",p:"HTMLElement",img:"HTMLImageElement",span:"HTMLElement",br:"HTMLBrElement",style:"HTMLStyleElement",font:"HTMLElement",a:"HTMLElement","#text":"HTMLElement",link:"HTMLLinkElement"};return a}(),Ba=function(){function a(){this.fontSizeInfo={};this.charRender=null;this.mapFont={};this.fontID=0;this.mapColor=[];this.colorID=0;this.fontScaleY=this.fontScaleX=1;this._curStrPos=0;this.lastFont=this.bmpData32=null;this.fontSizeOffY=this.fontSizeOffX=this.fontSizeH=this.fontSizeW=0;this.renderPerChar=!0;this.textureMem=0;this.fontStr=null;this._zhujietempScale={};this.textAtlases=[];this.isoTextures=[];this.tmpAtlasPos=new P;var b=!1,d=l.MiniAdpter;d&&d.systemInfo&&d.systemInfo.system&&(b="ios 10.1.1"===d.systemInfo.system.toLowerCase());q.onMiniGame&&!b&&(a.isWan1Wan=!0);q.onLimixiu&&(a.isWan1Wan=!0);this.charRender=r.isConchApp?new Ze:new $e(a.atlasWidth,a.atlasWidth,a.scaleFontWithCtx,!a.isWan1Wan,!1);a.textRenderInst=this;l.textRender=this;a.atlasWidth2=a.atlasWidth*a.atlasWidth}n(a,"laya.webgl.text.TextRender");var c=a.prototype;c.setFont=function(b){if(this.lastFont!=b){this.lastFont=b;var d=this.getFontSizeInfo(b._family),c=b._size/a.standardFontSize;this.fontSizeOffX=Math.ceil((d>>24)*c);this.fontSizeOffY=Math.ceil((d>>16&255)*c);this.fontSizeW=Math.ceil((d>>8&255)*c);this.fontSizeH=Math.ceil((d&255)*c);this.fontStr=b._font.replace("italic","")}};c.getNextChar=function(b){var d=b.length,a=this._curStrPos;if(a>=d)return null;for(var c=a,f=0;c<d;c++){var k=b.charCodeAt(c);if(27==k>>>11){if(1==f)break;f=1;c++}else if(65038!==k&&65039!==k)if(8205==k)f=2;else if(0==f)f=1;else if(1==f)break}this._curStrPos=c;return b.substring(a,c)};c.filltext=function(b,d,a,c,f,k,m,p,g,l){void 0===l&&(l=0);if(!(0>=d.length)){f=ib.Parse(f);var e=0;switch(g){case "center":e=Ca.ENUM_TEXTALIGN_CENTER;break;case "right":e=Ca.ENUM_TEXTALIGN_RIGHT}this._fast_filltext(b,d,null,a,c,f,k,m,p,e,l)}};c.fillWords=function(b,d,a,c,f,k,m,p){!d||0>=d.length||(f=ib.Parse(f),this._fast_filltext(b,null,d,a,c,f,k,m,p,0,0))};c._fast_filltext=function(b,d,c,h,f,k,m,p,g,l,n){if(!(d&&1>d.length||c&&1>c.length)){0>g&&(g=0);this.setFont(k);n=this.fontScaleX=this.fontScaleY=1;if(r.isConchApp){var e=k._size;22>e&&(n=this._zhujietempScale[e],isNaN(n)&&(n=22/e,this._zhujietempScale[e]=n),this.fontStr=this.fontStr.replace(a._fontSizeReg,22),k=ib.Parse(this.fontStr))}if(!r.isConchApp&&a.scaleFontWithCtx){var t;r.isConchApp?(e=b._curMat.getScaleX(),t=b._curMat.getScaleY()):(e=b.getMatScaleX(),t=b.getMatScaleY());if(1E-4>e||.1>t)return;1<e&&(this.fontScaleX=e);1<t&&(this.fontScaleY=t)}r.isConchApp&&(this.fontScaleX*=n,this.fontScaleY*=n);k._italic&&(b._italicDeg=13);var z=!c&&d instanceof laya.utils.WordText,e=d;t=!!c;var da=z?d.pageChars:[],q;z?(e=d._text,q=d.width,0>q&&(q=d.width=this.charRender.getWidth(this.fontStr,e))):q=e?this.charRender.getWidth(this.fontStr,e):0;r.isConchApp&&(q/=n);switch(l){case Ca.ENUM_TEXTALIGN_CENTER:h-=q/2;break;case Ca.ENUM_TEXTALIGN_RIGHT:h-=q}d&&da&&this.hasFreedText(da)&&(da=d.pageChars=[]);d=this.renderPerChar=!z||a.forceSplitRender||t||z&&d.splitRender;if(!da||1>da.length)if(d)for(this._curStrPos=l=d=0;;){t?(z=c[this._curStrPos++])?(q=z.char,d=z.x,l=z.y):q=null:q=this.getNextChar(e);if(!q)break;q=this.getCharRenderInfo(q,k,m,p,g,!1);if(!q)break;q.isSpace||((z=da[q.tex.id])||(da[q.tex.id]=z=[]),r.isConchApp?z.push({ri:q,x:d,y:l,w:q.bmpWidth/this.fontScaleX,h:q.bmpHeight/this.fontScaleY}):z.push({ri:q,x:d+1/this.fontScaleX,y:l,w:(q.bmpWidth-2)/this.fontScaleX,h:(q.bmpHeight-1)/this.fontScaleY}),d=r.isConchApp?d+q.width/n:d+q.width)}else q=this.getCharRenderInfo(e,k,m,p,g,a.noAtlas||q*this.fontScaleX>a.atlasWidth),da[0]=r.isConchApp?[{ri:q,x:0,y:0,w:q.bmpWidth/this.fontScaleX,h:q.bmpHeight/this.fontScaleY}]:[{ri:q,x:1/this.fontScaleX,y:0/this.fontScaleY,w:(q.bmpWidth-2)/this.fontScaleX,h:(q.bmpHeight-1)/this.fontScaleY}];this._drawResortedWords(b,h,f,da);b._italicDeg=0}};c._drawResortedWords=function(b,d,a,c){var e=b._charSubmitCache&&b._charSubmitCache._enbale,h=b._curMat,m;for(m in c){var p=c[m],g=p.length;if(!(0>=g))for(var l=0;l<g;l++){var n=p[l],q=n.ri;q.isSpace||(q.touch(),b.drawTexAlign=!0,r.isConchApp?b._drawTextureM(q.tex.texture,d+n.x-q.orix,a+n.y-q.oriy,n.w,n.h,null,1,q.uv):b._inner_drawTexture(q.tex.texture,q.tex.texture.bitmap.id,d+n.x-q.orix,a+n.y-q.oriy,n.w,n.h,h,q.uv,1,e),b.touches&&b.touches.push(q))}}};c.hasFreedText=function(b){for(var d in b)for(var a=b[d],c=0,f=a.length;c<f;c++){var k=a[c].ri;if(k.deleted||k.tex.__destroyed)return!0}return!1};c.getCharRenderInfo=function(b,d,c,h,f,k){void 0===k&&(k=!1);var e=this.mapFont[d._family];void 0==e&&(this.mapFont[d._family]=e=this.fontID++);var p=b+"_"+e+"_"+d._size+"_"+c;0<f&&(p+="_"+h+f);d._bold&&(p+="P");if(1!=this.fontScaleX||1!=this.fontScaleY)p+=(20*this.fontScaleX|0)+"_"+(20*this.fontScaleY|0);var g,l=this.textAtlases.length,n;if(!k)for(g=0;g<l;g++)if(n=this.textAtlases[g],e=n.charMaps[p])return e.touch(),e;e=new gd;this.charRender.scale(this.fontScaleX,this.fontScaleY);e.char=b;e.height=d._size;d=r.isConchApp?0:d._size/3|0;n=Math.ceil(this.charRender.getWidth(this.fontStr,b)*this.fontScaleX);n>this.charRender.canvasWidth&&(this.charRender.canvasWidth=Math.min(2048,n+2*d));if(k)b=this.charRender.getCharBmp(b,this.fontStr,f,c,h,e,d,d,d,d,null),c=oc.getTextTexture(b.width,b.height),c.addChar(b,0,0,e.uv),e.tex=c,e.orix=d,e.oriy=d,c.ri=e,this.isoTextures.push(c);else{g=b.length;k=1*f;var l=Math.ceil((this.fontSizeW+2*k)*this.fontScaleX),q=Math.ceil((this.fontSizeH+2*k)*this.fontScaleY);a.imgdtRect[0]=(d-this.fontSizeOffX-k)*this.fontScaleX|0;a.imgdtRect[1]=(d-this.fontSizeOffY-k)*this.fontScaleY|0;this.renderPerChar||1==g?(a.imgdtRect[2]=Math.max(n,l),a.imgdtRect[3]=Math.max(n,q)):(a.imgdtRect[2]=-1,a.imgdtRect[3]=q);b=this.charRender.getCharBmp(b,this.fontStr,f,c,h,e,d,d,d,d,a.imgdtRect);n=this.addBmpData(b,e);a.isWan1Wan?(e.orix=d,e.oriy=d):(e.orix=this.fontSizeOffX+k,e.oriy=this.fontSizeOffY+k);n.charMaps[p]=e}return e};c.addBmpData=function(b,d){for(var a=b.width,c=b.height,f=this.textAtlases.length,k=null,m=!1,p=0;p<f&&!(k=this.textAtlases[p],m=k.getAEmpty(a,c,this.tmpAtlasPos));p++);if(!m){k=new yb;this.textAtlases.push(k);m=k.getAEmpty(a,c,this.tmpAtlasPos);if(!m)throw"err1";this.cleanAtlases()}m&&(k.texture.addChar(b,this.tmpAtlasPos.x,this.tmpAtlasPos.y,d.uv),d.tex=k.texture);return k};c.GC=function(b){var d=0,c=this.textAtlases.length,h,f=a.destroyAtlasDt;b=0;for(var k=-1,m=0,p,g;d<c;d++){g=this.textAtlases[d];if(p=g.texture)b+=p.curUsedCovRateAtlas,h=g.usedRate-p.curUsedCovRateAtlas,m<h&&(m=h,k=d);h=I.loopCount-g.texture.lastTouchTm;h>f&&(a.showLog&&console.log("TextRender GC delete atlas "+p?g.texture.id:"unk"),g.destroy(),this.textAtlases[d]=this.textAtlases[c-1],c--,d--)}this.textAtlases.length=c;c=this.isoTextures.length;for(d=0;d<c;d++)p=this.isoTextures[d],h=I.loopCount-p.lastTouchTm,h>a.destroyUnusedTextureDt&&(p.ri.deleted=!0,p.ri.tex=null,p.destroy(),this.isoTextures[d]=this.isoTextures[c-1],c--,d--);d=1<this.textAtlases.length&&2<=this.textAtlases.length-b;if(a.atlasWidth*a.atlasWidth*4*this.textAtlases.length>a.cleanMem||d||a.simClean)a.simClean=!1,a.showLog&&console.log("\u6e05\u7406\u4f7f\u7528\u7387\u4f4e\u7684\u8d34\u56fe\u3002\u603b\u4f7f\u7528\u7387:",b,":",this.textAtlases.length,"\u6700\u5dee\u8d34\u56fe:"+k),0<=k&&(g=this.textAtlases[k],g.destroy(),this.textAtlases[k]=this.textAtlases[this.textAtlases.length-1],--this.textAtlases.length);oc.clean()};c.cleanAtlases=function(){};c.getCharBmp=function(b){};c.checkBmpLine=function(b,d,a,c){this.bmpData32.buffer!=b.data.buffer&&(this.bmpData32=new Uint32Array(b.data.buffer));for(b=b.width*d+a;a<c;a++)if(0!=this.bmpData32[b++])return!0;return!1};c.updateBbx=function(b,d,a){void 0===a&&(a=!1);var c=b.width,e=b.height,k=d[1],m=0,p;if(this.checkBmpLine(b,k,0,c))for(;;){p=(k+m)/2|0;if(p+1>=k){d[1]=p;break}this.checkBmpLine(b,p,0,c)?k=p:m=p}if(d[3]>e)d[3]=e;else if(k=d[3],m=e,this.checkBmpLine(b,k,0,c))for(;;){p=(k+m)/2|0;if(p-1<=k){d[3]=p;break}this.checkBmpLine(b,p,0,c)?k=p:m=p}if(!a){e=d[0];a=c*d[1];for(p=d[1];p<d[3];p++){for(b=0;b<e;b++)if(0!=this.bmpData32[a+b]){e=b;break}a+=c}d[0]=e;e=d[2];a=c*d[1];for(p=d[1];p<d[3];p++){for(b=e;b<c;b++)if(0!=this.bmpData32[a+b]){e=b;break}a+=c}d[2]=e}};c.getFontSizeInfo=function(b){var d=this.fontSizeInfo[b];if(void 0!=d)return d;d="bold "+a.standardFontSize+"px "+b;if(a.isWan1Wan)return this.fontSizeW=1.5*this.charRender.getWidth(d,"\u6709"),this.fontSizeH=1.5*a.standardFontSize,d=this.fontSizeW<<8|this.fontSizeH,this.fontSizeInfo[b]=d;a.pixelBBX[0]=a.standardFontSize/2;a.pixelBBX[1]=a.standardFontSize/2;a.pixelBBX[2]=a.standardFontSize;a.pixelBBX[3]=a.standardFontSize;var c=16,h=16;this.charRender.scale(1,1);a.tmpRI.height=a.standardFontSize;var f=this.charRender.getCharBmp("g",d,0,"red",null,a.tmpRI,c,h,16,16);r.isConchApp&&(f.data=new Uint8ClampedArray(f.data));this.bmpData32=new Uint32Array(f.data.buffer);this.updateBbx(f,a.pixelBBX,!1);f=this.charRender.getCharBmp("\u6709",d,0,"red",null,a.tmpRI,h,h,16,16);r.isConchApp&&(f.data=new Uint8ClampedArray(f.data));this.bmpData32=new Uint32Array(f.data.buffer);a.pixelBBX[2]<c+a.tmpRI.width&&(a.pixelBBX[2]=c+a.tmpRI.width);this.updateBbx(f,a.pixelBBX,!1);r.isConchApp&&(h=c=0);d=Math.max(c-a.pixelBBX[0],0)<<24|Math.max(h-a.pixelBBX[1],0)<<16|a.pixelBBX[2]-a.pixelBBX[0]<<8|a.pixelBBX[3]-a.pixelBBX[1];return this.fontSizeInfo[b]=d};c.printDbgInfo=function(){console.log("\u56fe\u96c6\u4e2a\u6570:"+this.textAtlases.length+",\u6bcf\u4e2a\u56fe\u96c6\u5927\u5c0f:"+a.atlasWidth+"x"+a.atlasWidth," \u7528canvas:",a.isWan1Wan);console.log("\u56fe\u96c6\u5360\u7528\u7a7a\u95f4:"+a.atlasWidth*a.atlasWidth*4/1024/1024*this.textAtlases.length+"M");console.log("\u7f13\u5b58\u7528\u5230\u7684\u5b57\u4f53:");for(var b in this.mapFont){var d=this.getFontSizeInfo(b);console.log("    "+b," off:",d>>24,d>>16&255," size:",d>>8&255,d&255)}var c=0;console.log("\u7f13\u5b58\u6570\u636e:");var h=0,f=0;this.textAtlases.forEach(function(d){var b=d.texture.id,e=I.loopCount-d.texture.lastTouchTm;h+=d.texture.curUsedCovRate;f+=d.texture.curUsedCovRateAtlas;console.log("--\u56fe\u96c6(id:"+b+",\u5f53\u524d\u4f7f\u7528\u7387:"+(1E3*d.texture.curUsedCovRate|0)+"\u2030","\u5f53\u524d\u56fe\u96c6\u4f7f\u7528\u7387:",(100*d.texture.curUsedCovRateAtlas|0)+"%","\u56fe\u96c6\u4f7f\u7528\u7387:",100*d.usedRate|0,"%, \u4f7f\u7528\u4e8e:"+(0<e?""+e+"\u5e27\u4ee5\u524d":"\u5f53\u524d\u5e27")+")--:");for(var k in d.charMaps)b=d.charMaps[k],console.log("     off:",b.orix,b.oriy," bmp\u5bbd\u9ad8:",b.bmpWidth,b.bmpHeight,"\u65e0\u6548:",b.deleted,"touchdt:",I.loopCount-b.touchTick,"\u4f4d\u7f6e:",b.uv[0]*a.atlasWidth|0,b.uv[1]*a.atlasWidth|0,"\u5b57\u7b26:",b.char,"key:",k),c++});console.log("\u72ec\u7acb\u8d34\u56fe\u6587\u5b57("+this.isoTextures.length+"\u4e2a):");this.isoTextures.forEach(function(d){console.log("    size:",d._texW,d._texH,"touch\u95f4\u9694:",I.loopCount-d.lastTouchTm,"char:",d.ri.char)});console.log("\u603b\u7f13\u5b58:",c,"\u603b\u4f7f\u7528\u7387:",h,"\u603b\u5f53\u524d\u56fe\u96c6\u4f7f\u7528\u7387:",f)};c.showAtlas=function(b,d,c,h,f,k){if(!this.textAtlases[b])return console.log("\u6ca1\u6709\u8fd9\u4e2a\u56fe\u96c6"),null;var e=new L,p=this.textAtlases[b].texture,g={width:a.atlasWidth,height:a.atlasWidth,sourceWidth:a.atlasWidth,sourceHeight:a.atlasWidth,offsetX:0,offsetY:0,getIsReady:function(){return!0},_addReference:function(){},_removeReference:function(){},_getSource:function(){return p._getSource()},bitmap:{id:p.id},_uv:ga.DEF_UV};e.size=function(b,a){this.width=b;this.height=a;e.graphics.clear();e.graphics.drawRect(0,0,e.width,e.height,d);e.graphics.drawTexture(g,0,0,e.width,e.height);return this};e.graphics.drawRect(0,0,f,k,d);e.graphics.drawTexture(g,0,0,f,k);e.pos(c,h);l.stage.addChild(e);return e};c.filltext_native=function(b,d,a,c,f,k,m,p,g,l,n){void 0===n&&(n=0);if(!(d&&0>=d.length||a&&1>a.length)){k=ib.Parse(k);var e=0;switch(l){case "center":e=Ca.ENUM_TEXTALIGN_CENTER;break;case "right":e=Ca.ENUM_TEXTALIGN_RIGHT}return this._fast_filltext(b,d,a,c,f,k,m,p,g,e,n)}};a.useOldCharBook=!1;a.atlasWidth=2048;a.noAtlas=!1;a.forceSplitRender=!1;a.forceWholeRender=!1;a.scaleFontWithCtx=!0;a.standardFontSize=32;a.destroyAtlasDt=10;a.checkCleanTextureDt=2E3;a.destroyUnusedTextureDt=3E3;a.cleanMem=104857600;a.isWan1Wan=!1;a.showLog=!1;a.debugUV=!1;a.atlasWidth2=4194304;a.textRenderInst=null;a.simClean=!1;a._fontSizeReg=/\d+(?=px)/g;u(a,["tmpRI",function(){return this.tmpRI=new gd},"pixelBBX",function(){return this.pixelBBX=[0,0,0,0]},"imgdtRect",function(){return this.imgdtRect=[0,0,0,0]}]);return a}(),bf=function(){function a(){this.attachmentName=this.parent=this.name=null;this.srcDisplayIndex=-1;this.type="src";this.currDisplayData=this.currTexture=this.currSlotData=this.templet=null;this.originalIndex=this.displayIndex=-1;this._resultMatrix=this._parentMatrix=this._diyTexture=this.blendMode=null;this._replaceDic={};this._preGraphicMatrix=this._preGraphicVerticle=this._mVerticleArr=this.deformData=this._skinSprite=this._curDiyVS=this._curDiyUV=null}n(a,"laya.ani.bone.BoneSlot");var c=a.prototype;c.showSlotData=function(b,d){void 0===d&&(d=!0);this.currSlotData=b;d&&(this.displayIndex=this.srcDisplayIndex);this.currTexture=this.currDisplayData=null};c.showDisplayByName=function(b){this.currSlotData&&this.showDisplayByIndex(this.currSlotData.getDisplayByName(b))};c.replaceDisplayByName=function(b,d){this.currSlotData&&(b=this.currSlotData.getDisplayByName(b),d=this.currSlotData.getDisplayByName(d),this.replaceDisplayByIndex(b,d))};c.replaceDisplayByIndex=function(b,d){this.currSlotData&&(this._replaceDic[b]=d,this.originalIndex==b&&this.showDisplayByIndex(b))};c.showDisplayByIndex=function(b){this.originalIndex=b;null!=this._replaceDic[b]&&(b=this._replaceDic[b]);this.currSlotData&&-1<b&&b<this.currSlotData.displayArr.length?(this.displayIndex=b,(this.currDisplayData=this.currSlotData.displayArr[b])&&(this.currTexture=this.templet.getTexture(this.currDisplayData.name))&&0==this.currDisplayData.type&&this.currDisplayData.uvs&&(this.currTexture=this.currDisplayData.createTexture(this.currTexture))):(this.displayIndex=-1,this.currTexture=this.currDisplayData=null)};c.replaceSkin=function(b){this._diyTexture=b;this._curDiyUV&&(this._curDiyUV.length=0);this.currDisplayData&&this._diyTexture==this.currDisplayData.texture&&(this._diyTexture=null)};c.setParentMatrix=function(b){this._parentMatrix=b};c.getSaveVerticle=function(b){a.useSameMatrixAndVerticle&&this._preGraphicVerticle&&a.isSameArr(b,this._preGraphicVerticle)?b=this._preGraphicVerticle:this._preGraphicVerticle=b=U.copyArray([],b);return b};c.getSaveMatrix=function(b){a.useSameMatrixAndVerticle&&this._preGraphicMatrix&&a.isSameMatrix(b,this._preGraphicMatrix)?b=this._preGraphicMatrix:this._preGraphicMatrix=b=b.clone();return b};c.draw=function(b,d,c,h){void 0===c&&(c=!1);void 0===h&&(h=1);if(null==this._diyTexture&&null==this.currTexture||null==this.currDisplayData)if(!this.currDisplayData||3!=this.currDisplayData.type)return;var e=this.currTexture;this._diyTexture&&(e=this._diyTexture);var k;switch(this.currDisplayData.type){case 0:if(b&&(d=this.getDisplayMatrix(),this._parentMatrix&&(k=!1,d))){C.mul(d,this._parentMatrix,C.TEMP);c?(null==this._resultMatrix&&(this._resultMatrix=new C),d=this._resultMatrix):d=a._tempResultMatrix;if(this._diyTexture&&this.currDisplayData.uvs){var m=a._tempMatrix;m.identity();this.currDisplayData.uvs[1]>this.currDisplayData.uvs[5]&&(m.d=-1);this.currDisplayData.uvs[0]>this.currDisplayData.uvs[4]&&this.currDisplayData.uvs[1]>this.currDisplayData.uvs[5]&&(k=!0,m.rotate(-Math.PI/2));C.mul(m,C.TEMP,d)}else C.TEMP.copyTo(d);c||(d=this.getSaveMatrix(d));d._checkTransform();k?b.drawTexture(e,-this.currDisplayData.height/2,-this.currDisplayData.width/2,this.currDisplayData.height,this.currDisplayData.width,d,h,null,this.blendMode):b.drawTexture(e,-this.currDisplayData.width/2,-this.currDisplayData.height/2,this.currDisplayData.width,this.currDisplayData.height,d,h,null,this.blendMode)}break;case 1:c?(null==this._skinSprite&&(this._skinSprite=a.createSkinMesh()),k=this._skinSprite):k=a.createSkinMesh();if(null==k)break;null==this.currDisplayData.bones?(m=this.currDisplayData.weights,this.deformData&&(m=this.deformData),this._diyTexture?(this._curDiyUV||(this._curDiyUV=[]),0==this._curDiyUV.length&&(this._curDiyUV=Nb.getRelativeUV(this.currTexture.uv,this.currDisplayData.uvs,this._curDiyUV),this._curDiyUV=Nb.getAbsoluteUV(this._diyTexture.uv,this._curDiyUV,this._curDiyUV)),d=this._curDiyUV):d=this.currDisplayData.uvs,this._mVerticleArr=m,m=this.currDisplayData.triangles,this.deformData&&!c&&(this._mVerticleArr=this.getSaveVerticle(this._mVerticleArr)),k.init2(e,m,this._mVerticleArr,d),e=this.getDisplayMatrix(),this._parentMatrix&&e&&(C.mul(e,this._parentMatrix,C.TEMP),c?(null==this._resultMatrix&&(this._resultMatrix=new C),e=this._resultMatrix):e=a._tempResultMatrix,C.TEMP.copyTo(e),c||(e=this.getSaveMatrix(e)),k.transform=e)):this.skinMesh(d,k);b.drawSkin(k,h,null,this.blendMode);break;case 2:c?(null==this._skinSprite&&(this._skinSprite=a.createSkinMesh()),k=this._skinSprite):k=a.createSkinMesh(),null!=k&&(this.skinMesh(d,k),b.drawSkin(k,h,null,this.blendMode))}};c.skinMesh=function(b,d){var c=this.currTexture,h=this.currDisplayData.bones,f;this._diyTexture?(c=this._diyTexture,this._curDiyUV||(this._curDiyUV=[]),0==this._curDiyUV.length&&(this._curDiyUV=Nb.getRelativeUV(this.currTexture.uv,this.currDisplayData.uvs,this._curDiyUV),this._curDiyUV=Nb.getAbsoluteUV(this._diyTexture.uv,this._curDiyUV,this._curDiyUV)),f=this._curDiyUV):f=this.currDisplayData.uvs;var k=this.currDisplayData.weights,m=this.currDisplayData.triangles,p,g,l,n,q,E,r=0,y,u,v,w;a._tempVerticleArr.length=0;u=a._tempVerticleArr;if(this.deformData&&0<this.deformData.length){var x=0;v=0;for(w=h.length;v<w;){l=h[v++]+v;for(g=p=0;v<l;v++)n=b[h[v]],q=k[r]+this.deformData[x++],E=k[r+1]+this.deformData[x++],y=k[r+2],p+=(q*n.a+E*n.c+n.tx)*y,g+=(q*n.b+E*n.d+n.ty)*y,r+=3;u.push(p,g)}}else for(v=0,w=h.length;v<w;){l=h[v++]+v;for(g=p=0;v<l;v++)n=b[h[v]],q=k[r],E=k[r+1],y=k[r+2],p+=(q*n.a+E*n.c+n.tx)*y,g+=(q*n.b+E*n.d+n.ty)*y,r+=3;u.push(p,g)}this._mVerticleArr=u;this._mVerticleArr=this.getSaveVerticle(this._mVerticleArr);d.init2(c,m,this._mVerticleArr,f)};c.drawBonePoint=function(b){b&&this._parentMatrix&&b.drawCircle(this._parentMatrix.tx,this._parentMatrix.ty,5,"#ff0000")};c.getDisplayMatrix=function(){return this.currDisplayData?this.currDisplayData.transform.getMatrix():null};c.getMatrix=function(){return this._resultMatrix};c.copy=function(){var b=new a;b.type="copy";b.name=this.name;b.attachmentName=this.attachmentName;b.srcDisplayIndex=this.srcDisplayIndex;b.parent=this.parent;b.displayIndex=this.displayIndex;b.templet=this.templet;b.currSlotData=this.currSlotData;b.currTexture=this.currTexture;b.currDisplayData=this.currDisplayData;return b};a.createSkinMesh=function(){return new af};a.isSameArr=function(b,d){if(b.length!=d.length)return!1;var a,c;c=b.length;for(a=0;a<c;a++)if(b[a]!=d[a])return!1;return!0};a.isSameMatrix=function(b,d){return b.a==d.a&&b.b==d.b&&b.c==d.c&&b.d==d.d&&1E-5>Math.abs(b.tx-d.tx)&&1E-5>Math.abs(b.ty-d.ty)};a.useSameMatrixAndVerticle=!0;a._tempVerticleArr=[];u(a,["_tempMatrix",function(){return this._tempMatrix=new C},"_tempResultMatrix",function(){return this._tempResultMatrix=new C}]);return a}(),r=function(){function a(b,d){function c(d){w.FIRSTRENDER2&&l.stage._loop();q.window.requestAnimationFrame(c)}this._timeId=0;a._mainCanvas.source.id="layaCanvas";a._mainCanvas.source.width=b;a._mainCanvas.source.height=d;laya.renders.Render.isConchApp?q.document.body.appendChild(a._mainCanvas.source):q.onKGMiniGame||q.container.appendChild(a._mainCanvas.source);fa.initRender(a._mainCanvas,b,d);q.window.requestAnimationFrame(c);l.stage.on("visibilitychange",this,this._onVisibilitychange)}n(a,"laya.renders.Render");var c=a.prototype;c._onVisibilitychange=function(){l.stage.isVisibility?0!=this._timeId&&q.window.clearInterval(this._timeId):this._timeId=q.window.setInterval(this._enterFrame,1E3)};c._enterFrame=function(b){l.stage._loop()};g(1,a,"context",function(){return a._context});g(1,a,"canvas",function(){return a._mainCanvas.source});a._context=null;a._mainCanvas=null;a.supportWebGLPlusCulling=!1;a.supportWebGLPlusAnimation=!1;a.supportWebGLPlusRendering=!1;a.isConchApp=!1;a.isWebGL=!1;a.is3DMode=!1;a.__init$=function(){a.isConchApp=null!=w.conch;a.isConchApp&&(a.supportWebGLPlusCulling=!0,a.supportWebGLPlusAnimation=!0,a.supportWebGLPlusRendering=!0)};return a}(),cf=function(){function a(){this._strsToID={};this._idToStrs=[];this._length=0}n(a,"laya.utils.StringKey");var c=a.prototype;c.add=function(b){var d=this._strsToID[b];if(null!=d)return d;this._idToStrs[this._length]=b;return this._strsToID[b]=this._length++};c.getID=function(b){b=this._strsToID[b];return null==b?-1:b};c.getName=function(b){b=this._idToStrs[b];return null==b?void 0:b};return a}(),df=function(){function a(){this.json=null}n(a,"laya.components.Prefab");a.prototype.create=function(){return this.json?Mb.createByData(null,this.json):null};return a}(),Id=function(){function a(){}n(a,"laya.display.cmd.TranslateCmd");var c=a.prototype;c.recover=function(){v.recover("TranslateCmd",this)};c.run=function(b,d,a){b.translate(this.tx,this.ty)};g(0,c,"cmdID",function(){return"Translate"});a.create=function(b,d){var c=v.getItemByClass("TranslateCmd",a);c.tx=b;c.ty=d;return c};a.ID="Translate";return a}(),Jc=function(){function a(){this.all=[];this.styleSheets=fb.styleSheets}n(a,"laya.html.dom.HTMLDocument");var c=a.prototype;c.getElementById=function(b){return this.all[b]};c.setElementById=function(b,d){this.all[b]=d};u(a,["document",function(){return this.document=new a}]);return a}(),hb=function(){function a(){}n(a,"laya.debug.tools.CacheAnalyser");var c=a.prototype;c.renderCanvas=function(b,d){a.showCacheSprite&&(pa.I.isDebugItem(b)||qa.showDisBoundToSprite(b,pa.I.cacheViewLayer,tb.CANVAS_REC_COLOR,4))};c.reCacheCanvas=function(b,d){void 0===d&&(d=0);if(a.showRecacheSprite&&!pa.I.isDebugItem(b)){var c;c=a.getNodeInfoByNode(b);c.addCount(d);a.counter.addTime(b,d);c.parent||pa.I.nodeRecInfoLayer.addChild(c)}};a.renderLoopBegin=function(){pa.I.cacheViewLayer.graphics.clear()};a.getNodeInfoByNode=function(b){S.idObj(b);var d;d=S.getObjID(b);a._nodeInfoDic[d]||(a._nodeInfoDic[d]=new ef);a._nodeInfoDic[d].setTarget(b);return a._nodeInfoDic[d]};a._nodeInfoDic={};a.showCacheSprite=!1;a.showRecacheSprite=!0;u(a,["counter",function(){return this.counter=new ge},"I",function(){return this.I=new a}]);return a}(),Oe=function(){function a(){this._unHit=this._hit=null}n(a,"laya.utils.HitArea");var c=a.prototype;c.contains=function(b,d){return a._isHitGraphic(b,d,this.hit)?!a._isHitGraphic(b,d,this.unHit):!1};g(0,c,"hit",function(){this._hit||(this._hit=new Ma);return this._hit},function(b){this._hit=b});g(0,c,"unHit",function(){this._unHit||(this._unHit=new Ma);return this._unHit},function(b){this._unHit=b});a._isHitGraphic=function(b,d,c){if(!c)return!1;var e=c.cmds;!e&&c._one&&(e=a._cmds,e.length=1,e[0]=c._one);if(!e)return!1;var f;f=e.length;var k;for(c=0;c<f;c++)if(k=e[c]){switch(k.cmdID){case "Translate":b-=k.tx,d-=k.ty}if(a._isHitCmd(b,d,k))return!0}return!1};a._isHitCmd=function(b,d,c){if(!c)return!1;var e=!1;switch(c.cmdID){case "DrawRect":a._rect.setTo(c.x,c.y,c.width,c.height);e=a._rect.contains(b,d);break;case "DrawCircle":b-=c.x;d-=c.y;e=b*b+d*d<c.radius*c.radius;break;case "DrawPoly":b-=c.x,d-=c.y,e=a._ptInPolygon(b,d,c.points)}return e};a._ptInPolygon=function(b,d,c){var e=a._ptPoint;e.setTo(b,d);b=0;var f,k,m,p;p=c.length;for(var g=0;g<p;g+=2)d=c[g],f=c[g+1],k=c[(g+2)%p],m=c[(g+3)%p],f!=m&&(e.y<Math.min(f,m)||e.y>=Math.max(f,m)||(e.y-f)*(k-d)/(m-f)+d>e.x&&b++);return 1==b%2};a._cmds=[];u(a,["_rect",function(){return this._rect=new M},"_ptPoint",function(){return this._ptPoint=new P}]);return a}(),gd=function(){function a(){this.char="";this.tex=null;this.deleted=!1;this.touchTick=this.oriy=this.orix=this.bmpHeight=this.bmpWidth=this.height=this.width=this.pos=0;this.isSpace=!1;this.uv=Array(8)}n(a,"laya.webgl.resource.CharRenderInfo");a.prototype.touch=function(){var a=I.loopCount;this.touchTick!=a&&this.tex.touchRect(this,a);this.touchTick=a};return a}(),I=function(){function a(){}n(a,"laya.utils.Stat");g(1,a,"onclick",null,function(c){if(a._sp)a._sp.on("click",a._sp,c);a._canvas&&(a._canvas.source.onclick=c,a._canvas.source.style.pointerEvents="")});a.show=function(c,b){void 0===c&&(c=0);void 0===b&&(b=0);q.onMiniGame||q.onLimixiu||r.isConchApp||q.onBDMiniGame||q.onKGMiniGame||q.onQGMiniGame||(a._useCanvas=!0);a._show=!0;a._fpsData.length=60;a._view[0]={title:"FPS(Canvas)",value:"_fpsStr",color:"yellow",units:"int"};a._view[1]={title:"Sprite",value:"_spriteStr",color:"white",units:"int"};a._view[2]={title:"RenderBatches",value:"renderBatches",color:"white",units:"int"};a._view[3]={title:"SavedRenderBatches",value:"savedRenderBatches",color:"white",units:"int"};a._view[4]={title:"CPUMemory",value:"cpuMemory",color:"yellow",units:"M"};a._view[5]={title:"GPUMemory",value:"gpuMemory",color:"yellow",units:"M"};r.isWebGL&&(a._view[6]={title:"Shader",value:"shaderCall",color:"white",units:"int"},r.is3DMode?(a._view[0].title="FPS(3D)",a._view[7]={title:"TriFaces",value:"trianglesFaces",color:"white",units:"int"},a._view[8]={title:"FrustumCulling",value:"frustumCulling",color:"white",units:"int"},a._view[9]={title:"OctreeNodeCulling",value:"octreeNodeCulling",color:"white",units:"int"}):(a._view[0].title="FPS(WebGL)",a._view[7]={title:"Canvas",value:"_canvasStr",color:"white",units:"int"}));a._useCanvas?a.createUIPre(c,b):a.createUI(c,b);a.enable()};a.createUIPre=function(c,b){var d=q.pixelRatio;a._width=180*d;a._vx=120*d;a._height=d*(12*a._view.length+3*d)+4;a._fontSize=12*d;for(var e=0;e<a._view.length;e++)a._view[e].x=4,a._view[e].y=e*a._fontSize+2*d;a._canvas||(a._canvas=new xa(!0),a._canvas.size(a._width,a._height),a._ctx=a._canvas.getContext("2d"),a._ctx.textBaseline="top",a._ctx.font=a._fontSize+"px Arial",a._canvas.source.style.cssText="pointer-events:none;background:rgba(150,150,150,0.8);z-index:100000;position: absolute;direction:ltr;left:"+c+"px;top:"+b+"px;width:"+a._width/d+"px;height:"+a._height/d+"px;");q.onKGMiniGame||q.container.appendChild(a._canvas.source);a._first=!0;a.loop();a._first=!1};a.createUI=function(c,b){var d=a._sp,e=q.pixelRatio;d||(d=new L,a._leftText=new W,a._leftText.pos(5,5),a._leftText.color="#ffffff",d.addChild(a._leftText),a._txt=new W,a._txt.pos(80*e,5),a._txt.color="#ffffff",d.addChild(a._txt),a._sp=d);d.pos(c,b);c="";for(b=0;b<a._view.length;b++)c+=a._view[b].title+"\n";a._leftText.text=c;c=138*e;b=e*(12*a._view.length+3*e)+4;a._txt.fontSize=a._fontSize*e;a._leftText.fontSize=a._fontSize*e;d.size(c,b);d.graphics.clear();d.graphics.alpha(.5);d.graphics.drawRect(0,0,c,b,"#999999");d.graphics.alpha(2);a.loop()};a.enable=function(){l.systemTimer.frameLoop(1,a,a.loop)};a.hide=function(){a._show=!1;l.systemTimer.clear(a,a.loop);a._canvas&&q.removeElement(a._canvas.source)};a.clear=function(){a.trianglesFaces=a.renderBatches=a.savedRenderBatches=a.shaderCall=a.spriteRenderUseCacheCount=a.frustumCulling=a.octreeNodeCulling=a.canvasNormal=a.canvasBitmap=a.canvasReCache=0};a.loop=function(){a._count++;var c=q.now();if(!(1E3>c-a._timer)){var b=a._count;a.FPS=Math.round(1E3*b/(c-a._timer));a._show&&(a.trianglesFaces=Math.round(a.trianglesFaces/b),a.renderBatches=a._useCanvas?Math.round(a.renderBatches/b):Math.round(a.renderBatches/b)-1,a.savedRenderBatches=Math.round(a.savedRenderBatches/b),a.shaderCall=Math.round(a.shaderCall/b),a.spriteRenderUseCacheCount=Math.round(a.spriteRenderUseCacheCount/b),a.canvasNormal=Math.round(a.canvasNormal/b),a.canvasBitmap=Math.round(a.canvasBitmap/b),a.canvasReCache=Math.ceil(a.canvasReCache/b),a.frustumCulling=Math.round(a.frustumCulling/b),a.octreeNodeCulling=Math.round(a.octreeNodeCulling/b),a._fpsStr=a.FPS+(a.renderSlow?" slow":"")+" "+(0<a.FPS?Math.floor(1E3/a.FPS).toString():" "),a._spriteStr=a._useCanvas?a.spriteCount-1+(a.spriteRenderUseCacheCount?"/"+a.spriteRenderUseCacheCount:""):a.spriteCount-4+(a.spriteRenderUseCacheCount?"/"+a.spriteRenderUseCacheCount:""),a._canvasStr=a.canvasReCache+"/"+a.canvasNormal+"/"+a.canvasBitmap,a.cpuMemory=cb.cpuMemory,a.gpuMemory=cb.gpuMemory,a._useCanvas?a.renderInfoPre():a.renderInfo(),a.clear());a._count=0;a._timer=c}};a.renderInfoPre=function(){var c,b,d;if(a._canvas){var e=a._ctx;e.clearRect(a._first?0:a._vx,0,a._width,a._height);for(c=0;c<a._view.length;c++)b=a._view[c],a._first&&(e.fillStyle="white",e.fillText(b.title,b.x,b.y)),e.fillStyle=b.color,d=a[b.value],"M"==b.units&&(d=Math.floor(d/1048576*100)/100+" M"),e.fillText(d+"",b.x+a._vx,b.y)}};a.renderInfo=function(){for(var c="",b=0;b<a._view.length;b++){var d=a._view[b],e=a[d.value];"M"==d.units&&(e=Math.floor(e/1048576*100)/100+" M");"K"==d.units&&(e=Math.floor(e/1024*100)/100+" K");c+=e+"\n"}a._txt.text=c};a.FPS=0;a.loopCount=0;a.shaderCall=0;a.renderBatches=0;a.savedRenderBatches=0;a.trianglesFaces=0;a.spriteCount=0;a.spriteRenderUseCacheCount=0;a.frustumCulling=0;a.octreeNodeCulling=0;a.canvasNormal=0;a.canvasBitmap=0;a.canvasReCache=0;a.renderSlow=!1;a.gpuMemory=0;a.cpuMemory=0;a._fpsStr=null;a._canvasStr=null;a._spriteStr=null;a._fpsData=[];a._timer=0;a._count=0;a._view=[];a._fontSize=12;a._txt=null;a._leftText=null;a._sp=null;a._titleSp=null;a._bgSp=null;a._show=!1;a._useCanvas=!1;a._canvas=null;a._ctx=null;a._first=!1;a._vx=NaN;a._width=0;a._height=100;return a}(),ff=function(){function a(){this.ratio=.92;this.maxOffset=60;this._dragging=!1;this._clickOnly=!0}n(a,"laya.utils.Dragging");var c=a.prototype;c.start=function(b,d,a,c,f,k,m,p){void 0===p&&(p=.92);this.clearTimer();this.target=b;this.area=d;this.hasInertia=a;this.elasticDistance=d?c:0;this.elasticBackTime=f;this.data=k;this._disableMouseEvent=m;this.ratio=p;this._parent=b.parent;this._dragging=this._clickOnly=!0;this._elasticRateX=this._elasticRateY=1;this._lastX=this._parent.mouseX;this._lastY=this._parent.mouseY;l.stage.on("mouseup",this,this.onStageMouseUp);l.stage.on("mouseout",this,this.onStageMouseUp);l.systemTimer.frameLoop(1,this,this.loop)};c.clearTimer=function(){l.systemTimer.clear(this,this.loop);l.systemTimer.clear(this,this.tweenMove);this._tween&&(this._tween.recover(),this._tween=null)};c.stop=function(){this._dragging&&(Ra.instance.disableMouseEvent=!1,l.stage.off("mouseup",this,this.onStageMouseUp),l.stage.off("mouseout",this,this.onStageMouseUp),this._dragging=!1,this.target&&this.area&&this.backToArea(),this.clear())};c.loop=function(){var b=this._parent.getMousePoint(),d=b.x,b=b.y,a=d-this._lastX,c=b-this._lastY;if(this._clickOnly)if(1<Math.abs(a*l.stage._canvasTransform.getScaleX())||1<Math.abs(c*l.stage._canvasTransform.getScaleY()))this._clickOnly=!1,this._offsets||(this._offsets=[]),this._offsets.length=0,this.target.event("dragstart",this.data),Ra.instance.disableMouseEvent=this._disableMouseEvent;else return;else this._offsets.push(a,c);if(0!==a||0!==c)this._lastX=d,this._lastY=b,this.target.x+=a*this._elasticRateX,this.target.y+=c*this._elasticRateY,this.area&&this.checkArea(),this.target.event("dragmove",this.data)};c.checkArea=function(){0>=this.elasticDistance?this.backToArea():(this._elasticRateX=Math.max(0,1-(this.target._x<this.area.x?this.area.x-this.target._x:this.target._x>this.area.x+this.area.width?this.target._x-this.area.x-this.area.width:0)/this.elasticDistance),this._elasticRateY=Math.max(0,1-(this.target._y<this.area.y?this.area.y-this.target.y:this.target._y>this.area.y+this.area.height?this.target._y-this.area.y-this.area.height:0)/this.elasticDistance))};c.backToArea=function(){this.target.x=Math.min(Math.max(this.target._x,this.area.x),this.area.x+this.area.width);this.target.y=Math.min(Math.max(this.target._y,this.area.y),this.area.y+this.area.height)};c.onStageMouseUp=function(b){Ra.instance.disableMouseEvent=!1;l.stage.off("mouseup",this,this.onStageMouseUp);l.stage.off("mouseout",this,this.onStageMouseUp);l.systemTimer.clear(this,this.loop);if(!this._clickOnly&&this.target)if(this.hasInertia){1>this._offsets.length&&this._offsets.push(this._parent.mouseX-this._lastX,this._parent.mouseY-this._lastY);this._offsetX=this._offsetY=0;var d=this._offsets.length;b=Math.min(d,6);for(var a=this._offsets.length-b,d=d-1;d>a;d--)this._offsetY+=this._offsets[d--],this._offsetX+=this._offsets[d];this._offsetX=this._offsetX/b*2;this._offsetY=this._offsetY/b*2;Math.abs(this._offsetX)>this.maxOffset&&(this._offsetX=0<this._offsetX?this.maxOffset:-this.maxOffset);Math.abs(this._offsetY)>this.maxOffset&&(this._offsetY=0<this._offsetY?this.maxOffset:-this.maxOffset);l.systemTimer.frameLoop(1,this,this.tweenMove)}else 0<this.elasticDistance?this.checkElastic():this.clear()};c.checkElastic=function(){var b=NaN,d=NaN;this.target.x<this.area.x?b=this.area.x:this.target._x>this.area.x+this.area.width&&(b=this.area.x+this.area.width);this.target.y<this.area.y?d=this.area.y:this.target._y>this.area.y+this.area.height&&(d=this.area.y+this.area.height);if(isNaN(b)&&isNaN(d))this.clear();else{var a={};isNaN(b)||(a.x=b);isNaN(d)||(a.y=d);this._tween=ta.to(this.target,a,this.elasticBackTime,Pa.sineOut,B.create(this,this.clear),0,!1,!1)}};c.tweenMove=function(){this._offsetX=this._offsetX*this.ratio*this._elasticRateX;this._offsetY=this._offsetY*this.ratio*this._elasticRateY;this.target.x+=this._offsetX;this.target.y+=this._offsetY;this.area&&this.checkArea();this.target.event("dragmove",this.data);if(1>Math.abs(this._offsetX)&&1>Math.abs(this._offsetY)||.5>this._elasticRateX||.5>this._elasticRateY)l.systemTimer.clear(this,this.tweenMove),0<this.elasticDistance?this.checkElastic():this.clear()};c.clear=function(){if(this.target){this.clearTimer();var b=this.target;this._parent=this.target=null;b.event("dragend",this.data)}};return a}();(function(){function a(){this.tShowObj=null;this.preValueO={};this.debug_view=this.div=null;this.height=300;this.width=600;this.clickedHandler=null;this.dragArea=10;this.fromMe=!1;this._treeDataList=null;this._init()}n(a,"laya.debug.DebugPanel");var c=a.prototype;c.removeNoDisplayKeys=function(b){var d;for(d=b.length-1;0<=d;d--)a.noDisplayKeys[b[d]]&&b.splice(d,1)};c.updateShowKeys=function(){a.tObjKeys.length=0;this.tShowObj&&(a.tObjKeys=ha.getObjectDisplayAbleKeys(this.tShowObj,a.tObjKeys),this.tShowObj==l.stage&&this.removeNoDisplayKeys(a.tObjKeys),a.tObjKeys.sort(Hb.sortSmallFirst))};c._init=function(){var b=this;this.div=q.document.createElement("div");q.document.body.appendChild(this.div);this.clickedHandler=new B(this,this.onClickSelected);this.debug_view=q.window.layaair_debug_view;this.debug_view.initLayaAirDebugView(this.div);this.debug_view.tree.attachEvent("onSelect",function(d){d=b.getDataByID(d,b._treeDataList[0]);d.target&&(qa.showDisBound(d.target),b.showTargetInfo(d.target))});this.debug_view.setValueChangeHandler(function(d,a){b.onValueChange(d,a)});this.debug_view.onRefresh(function(){a.I.setRoot(l.stage)});this.debug_view.onInspectElement(function(){Te.I.beginClickSelect(b.clickedHandler)});this.debug_view.onLogInfo(function(){console.log(b.tShowObj)});this.debug_view.onPrintEnabledNodeChain(function(){qa.traceDisMouseEnable(b.tShowObj)});this.debug_view.onPrintSizeChain(function(){qa.traceDisSizeChain(b.tShowObj)});this.debug_view.onToggleVisibility(function(d){b.tShowObj&&(b.tShowObj.visible=b.debug_view.getVisibility())});this.debug_view.onToggleDebugBorder(function(d){b.tShowObj&&lc.showDisplayBorder(b.tShowObj,b.debug_view.getShowDebugBorder())});this.debug_view.onToggleShowCurrentCache(function(d){hb.showRecacheSprite=b.debug_view.getShowCurrentCache()});this.debug_view.onToggleShowAllCache(function(d){hb.showCacheSprite=b.debug_view.getShowAllCache()});this.debug_view.onToggleShowAtlas(function(d){console.log("toggle show atlas:",b.debug_view.getShowAtlas());b.debug_view.getShowAtlas()?Nc.getInstance().start():Nc.getInstance().end()});pc.showToBody(this.div,0,0);this.initNewDivs();this.initDragWork();this.initTreeWidthDrag();l.stage.on("resize",this,this.adptPos);this.adptPos()};c.initNewDivs=function(){var b=this,d;d=q.document.getElementById("show_current_cache_control").parentNode;var c;c=q.createElement("input");c.type="checkbox";d.appendChild(c);d.append("\u53f3\u4fa7");c.addEventListener("change",function(d){a.sideType=d.target.checked?"right":"bottom";b.adptPos()})};c.initTreeWidthDrag=function(){var b=this,d;d=q.document.getElementById("tree_container");var c;c=d.parentNode;var h=!1;c.addEventListener("mousedown",function(c){Math.abs(a.getOffset(c,"X")-d.clientWidth)<b.dragArea?(b.div.style.cursor="e-resize",h=!0,c.stopPropagation()):h=!1},!0);c.addEventListener("mousemove",function(c){c=Math.abs(a.getOffset(c,"X")-d.clientWidth);b.div.style.cursor=c<b.dragArea?"e-resize":"auto"},!0);q.document.body.addEventListener("mousemove",function(b){h&&(d.style.width=a.getOffset(b,"X")+"px",b.stopPropagation())});q.document.body.addEventListener("mouseup",function(d){h&&(h=!1,d.stopPropagation())})};c.initDragWork=function(){var b=this,d=!1,c=NaN,h=NaN;this.div.addEventListener("mousedown",function(e){if("bottom"==a.sideType){if(a.getOffset(e,"Y")>b.dragArea)return}else if(a.getOffset(e,"X")>b.dragArea)return;d=!0;c=e.pageX;h=e.pageY;e.stopPropagation()},!0);this.div.addEventListener("mousemove",function(d){"bottom"==a.sideType?a.getOffset(d,"Y")<b.dragArea?b.div.style.cursor="n-resize":b.div.style.cursor="auto":a.getOffset(d,"X")<b.dragArea?b.div.style.cursor="e-resize":b.div.style.cursor="auto"},!0);q.document.body.addEventListener("mousemove",function(e){if(d){var f,m,p,g;f=e.pageX;m=e.pageY;p=f-c;g=m-h;"bottom"==a.sideType?b.height-=g:b.width-=p;b.adptPos();c=f;h=m;e.stopPropagation()}});q.document.body.addEventListener("mouseup",function(b){d&&(d=!1,b.stopPropagation())})};c.onClickSelected=function(b){this._treeDataList&&(this.debug_view.tree.selectItem(S.getObjID(b)),this.debug_view.bounceUpInspectButton())};c.updateLoop=function(){this.tShowObj&&this.showTargetInfo(this.tShowObj)};c.onSelectItem=function(b){this.showTargetInfo(b.target)};c.onValueChange=function(b,d){"number"==b.type&&(d=a.mParseFloat(d));"boolean"==b.type&&(d="true"==d.toString());this.tShowObj&&(b=b.key,this.preValueO[b]=this.tShowObj[b]=d)};c.showTargetInfo=function(b){if(b){this.debug_view.setVisibility(b.visible);this.debug_view.setShowDebugBorder(lc.isDisplayShowBorder(b));var d,c;c=a.tObjKeys.length;var h;if(this.tShowObj==b)for(d=0;d<c;d++)h=a.tObjKeys[d],this.preValueO[h]!=b[h]&&this.debug_view.changeValueByLabel(h,b[h]);else this.tShowObj=b,this.updateShowKeys(),d=a.getObjectData(b),this.debug_view.setContents(d);for(d=0;d<c;d++)h=a.tObjKeys[d],this.preValueO[h]=b[h]}};c.adptPos=function(){this.fromMe||(this.fromMe=!0,"bottom"==a.sideType?(pc.setPos(this.div,0,q.clientHeight-this.height),this.debug_view.resize(q.clientWidth,this.height),a.overlay||l.stage.setScreenSize(q.clientWidth*q.pixelRatio,(q.clientHeight-this.height)*q.pixelRatio)):(pc.setPos(this.div,q.clientWidth-this.width,0),this.debug_view.resize(this.width,q.clientHeight),a.overlay||l.stage.setScreenSize((q.clientWidth-this.width)*q.pixelRatio,q.clientHeight*q.pixelRatio)),this.fromMe=!1)};c.setRoot=function(b){b=a.getSpriteTreeArr(b);this._treeDataList=[b];var d;d={id:0};d.item=[b];this.debug_view.setTree(d);l.timer.loop(500,this,this.updateLoop)};c.getDataByID=function(b,d){if(!d)return null;if(b==d.id)return d;d=d.item;if(!d)return null;var a,c;c=d.length;var f;for(a=0;a<c;a++)if(f=this.getDataByID(b,d[a]))return f;return null};c.getDataByTarget=function(b,d){if(!d)return null;if(b==d.target)return d;d=d.item;if(!d)return null;var a,c;c=d.length;var f;for(a=0;a<c;a++)if(f=this.getDataByTarget(b,d[a]))return f;return null};a.enable=function(b,d){void 0===b&&(b=!0);void 0===d&&(d="#ffffff");a._enable||a.I||(a._enable=!0,a.overlay=!b,pe.init(),qa.initBasicFunctions(),ee.init(),lc.init(),a.I=new a,a.I.setRoot(l.stage),hb.showRecacheSprite=!1,d&&(a.I.div.style.background=d))};a.getSpriteTreeArr=function(b){var d;d={};d.text=""+ha.getNodeClassAndName(b);d.target=b;S.idObj(b);d.id=S.getObjID(b);b=b._children;var c,h;h=b.length;var f;f=[];d.item=f;for(c=0;c<h;c++)f.push(a.getSpriteTreeArr(b[c]));return d};a.getObjectData=function(b){var d,c,h,f,k;d=[];var m;m=a.tObjKeys;var p,g;g=m.length;for(p=0;p<g;p++)h=m[p],f=b[h],k=typeof f,"_"!=h.charAt(0)&&a.displayTypes[k]&&(c={},c.key=h,c.value=f,c.type=k,d.push(c));return d};a.getOffset=function(b,d){var a;a=b.target;var c;c=b.currentTarget;var f;f="X"==d?"offsetLeft":"offsetTop";for(b=b["offset"+d];a&&a!=c;)b+=a[f],a=a.offsetParent;return b};a.mParseFloat=function(b){b=parseFloat(b);return isNaN(b)?0:b};a.I=null;a.overlay=!1;a._enable=!1;a.ChildrenSign="item";a.LabelSign="text";a.tObjKeys=[];a.Bottom="bottom";a.Right="right";a.sideType="bottom";u(a,["displayTypes",function(){return this.displayTypes={"boolean":!0,number:!0,string:!0}},"displayKeys",function(){return this.displayKeys=[["x","number"],["y","number"],["width","number"],["width","number"],["width","number"],["width","number"],["width","number"],["width","number"],["width","number"],["width","number"],["width","number"]]},"noDisplayKeys",function(){return this.noDisplayKeys={desginWidth:!0,desginHeight:!0}}]);return a})();var ra=function(){function a(){}n(a,"laya.ui.Styles");a.labelColor="#000000";a.buttonStateNum=3;a.scrollBarMinNum=15;a.scrollBarDelayTime=500;u(a,["defaultSizeGrid",function(){return this.defaultSizeGrid=[4,4,4,4,0]},"labelPadding",function(){return this.labelPadding=[2,2,2,2]},"inputLabelPadding",function(){return this.inputLabelPadding=[1,1,1,3]},"buttonLabelColors",function(){return this.buttonLabelColors=["#9A6F46","#AA5300","#AA5300","#9A6F46"]},"comboBoxItemColors",function(){return this.comboBoxItemColors=["#5e95b6","#ffffff","#000000","#8fa4b1","#ffffff"]}]);return a}(),db=function(){function a(){this._pool=[];this._map=[];this._laters=[]}var c;n(a,"laya.utils.CallLater");var b=a.prototype;b._update=function(){var d=this._laters,b=d.length;if(0<b){for(var a=0,b=b-1;a<=b;a++){var c=d[a];this._map[c.key]=null;null!==c.method&&(c.run(),c.clear());this._pool.push(c);a===b&&(b=d.length-1)}d.length=0}};b._getHandler=function(d,b){d=d?d.$_GID||(d.$_GID=U.getGID()):0;b=b.$_TID||(b.$_TID=1E5*Qa._mid++);return this._map[d+b]};b.callLater=function(d,b,a){if(null==this._getHandler(d,b)){var e=this._pool.length?this._pool.pop():new c;e.caller=d;e.method=b;e.args=a;e.key=(d?d.$_GID:0)+b.$_TID;this._map[e.key]=e;this._laters.push(e)}};b.runCallLater=function(d,b){(d=this._getHandler(d,b))&&null!=d.method&&(this._map[d.key]=null,d.run(),d.clear())};a.I=new a;a.__init$=function(){c=function(){function d(){this.key=0;this.args=this.method=this.caller=null}n(d,"");var b=d.prototype;b.clear=function(){this.args=this.method=this.caller=null};b.run=function(){var d=this.caller;if(d&&d.destroyed)return this.clear();var b=this.method,a=this.args;null!=b&&(a?b.apply(d,a):b.call(d))};return d}()};return a}(),Qd=function(){function a(){}n(a,"laya.display.cmd.DrawPieCmd");var c=a.prototype;c.recover=function(){this.lineColor=this.fillColor=null;v.recover("DrawPieCmd",this)};c.run=function(b,d,a){b._drawPie(this.x+d,this.y+a,this.radius,this._startAngle,this._endAngle,this.fillColor,this.lineColor,this.lineWidth,this.vid)};g(0,c,"startAngle",function(){return 180*this._startAngle/Math.PI},function(b){this._startAngle=b*Math.PI/180});g(0,c,"cmdID",function(){return"DrawPie"});g(0,c,"endAngle",function(){return 180*this._endAngle/Math.PI},function(b){this._endAngle=b*Math.PI/180});a.create=function(b,d,c,h,f,k,m,p,g){var e=v.getItemByClass("DrawPieCmd",a);e.x=b;e.y=d;e.radius=c;e._startAngle=h;e._endAngle=f;e.fillColor=k;e.lineColor=m;e.lineWidth=p;e.vid=g;return e};a.ID="DrawPie";return a}(),Nb=function(){function a(){}n(a,"laya.ani.bone.UVTools",null,"UVTools$1");a.getRelativeUV=function(a,b,d){var c=a[0],h=a[2]-a[0],f=a[1],k=a[5]-a[1];d||(d=[]);d.length=b.length;a=d.length;for(var h=1/h,m=1/k,k=0;k<a;k+=2)d[k]=(b[k]-c)*h,d[k+1]=(b[k+1]-f)*m;return d};a.getAbsoluteUV=function(a,b,d){if(0==a[0]&&0==a[1]&&1==a[4]&&1==a[5])return d?(U.copyArray(d,b),d):b;var c=a[0],h=a[2]-a[0],f=a[1];a=a[5]-a[1];d||(d=[]);d.length=b.length;var k,m;m=d.length;for(k=0;k<m;k+=2)d[k]=b[k]*h+c,d[k+1]=b[k+1]*a+f;return d};return a}(),mb=function(){function a(){this.preOvers=[];this.preDowns=[];this.preRightDowns=[];this.enable=!0;this._lastClickTime=0;this._event=new Ya}n(a,"laya.events.TouchManager");var c=a.prototype;c._clearTempArrs=function(){a._oldArr.length=0;a._newArr.length=0;a._tEleArr.length=0};c.getTouchFromArr=function(b,d){var a,c;c=d.length;var f;for(a=0;a<c;a++)if(f=d[a],f.id==b)return f;return null};c.removeTouchFromArr=function(b,d){var a;for(a=d.length-1;0<=a;a--)d[a].id==b&&d.splice(a,1)};c.createTouchO=function(b,d){var a;a=v.getItem("TouchData")||{};a.id=d;a.tar=b;return a};c.onMouseDown=function(b,d,c){void 0===c&&(c=!1);if(this.enable){var e,f;e=this.getTouchFromArr(d,this.preOvers);f=this.getEles(b,null,a._tEleArr);e?e.tar=b:(e=this.createTouchO(b,d),this.preOvers.push(e));q.onMobile&&this.sendEvents(f,"mouseover");var k;k=c?this.preDowns:this.preRightDowns;(e=this.getTouchFromArr(d,k))?e.tar=b:(e=this.createTouchO(b,d),k.push(e));this.sendEvents(f,c?"mousedown":"rightmousedown");this._clearTempArrs()}};c.sendEvents=function(b,d){var a,c;c=b.length;this._event._stoped=!1;var f;f=b[0];var k;for(a=0;a<c;a++){k=b[a];if(k.destroyed)break;k.event(d,this._event.setTo(d,k,f));if(this._event._stoped)break}};c.getEles=function(b,d,a){for(a?a.length=0:a=[];b&&b!=d;)a.push(b),b=b.parent;return a};c.checkMouseOutAndOverOfMove=function(b,d,c){if(d!=b){var e,f;if(d.contains(b))c=this.getEles(b,d,a._tEleArr),this.sendEvents(c,"mouseover");else if(b.contains(d))c=this.getEles(d,b,a._tEleArr),this.sendEvents(c,"mouseout");else{c=a._tEleArr;c.length=0;d=this.getEles(d,null,a._oldArr);var k;k=this.getEles(b,null,a._newArr);f=d.length;var m;for(e=0;e<f;e++)if(b=d[e],m=k.indexOf(b),0<=m){k.splice(m,k.length-m);break}else c.push(b);0<c.length&&this.sendEvents(c,"mouseout");0<k.length&&this.sendEvents(k,"mouseover")}}};c.onMouseMove=function(b,d){if(this.enable){var c;(c=this.getTouchFromArr(d,this.preOvers))?(this.checkMouseOutAndOverOfMove(b,c.tar),c.tar=b,c=this.getEles(b,null,a._tEleArr)):(c=this.getEles(b,null,a._tEleArr),this.sendEvents(c,"mouseover"),this.preOvers.push(this.createTouchO(b,d)));this.sendEvents(c,"mousemove");this._clearTempArrs()}};c.getLastOvers=function(){a._tEleArr.length=0;if(0<this.preOvers.length&&this.preOvers[0].tar)return this.getEles(this.preOvers[0].tar,null,a._tEleArr);a._tEleArr.push(l.stage);return a._tEleArr};c.stageMouseOut=function(){var b;b=this.getLastOvers();this.preOvers.length=0;this.sendEvents(b,"mouseout")};c.onMouseUp=function(b,d,c){void 0===c&&(c=!1);if(this.enable){var e,f,k,m,p,g,l=q.onMobile;f=this.getEles(b,null,a._tEleArr);this.sendEvents(f,c?"mouseup":"rightmouseup");var n;n=c?this.preDowns:this.preRightDowns;if(e=this.getTouchFromArr(d,n)){var Aa;g=q.now();Aa=300>g-this._lastClickTime;this._lastClickTime=g;if(b==e.tar)g=f;else for(b=this.getEles(e.tar,null,a._oldArr),g=a._newArr,g.length=0,m=b.length,k=0;k<m;k++)p=b[k],0<=f.indexOf(p)&&g.push(p);0<g.length&&this.sendEvents(g,c?"click":"rightclick");c&&Aa&&this.sendEvents(g,"doubleclick");this.removeTouchFromArr(d,n);e.tar=null;v.recover("TouchData",e)}(e=this.getTouchFromArr(d,this.preOvers))&&l&&((g=this.getEles(e.tar,null,g))&&0<g.length&&this.sendEvents(g,"mouseout"),this.removeTouchFromArr(d,this.preOvers),e.tar=null,v.recover("TouchData",e));this._clearTempArrs()}};a._oldArr=[];a._newArr=[];a._tEleArr=[];u(a,["I",function(){return this.I=new a}]);return a}(),gc=function(){function a(){}n(a,"laya.debug.tools.DTrace");a.getArgArr=function(a){var b;b=[];var d,c=a.length;for(d=0;d<c;d++)b.push(a[d]);return b};a.dTrace=function(c){var b;b=a.getArgArr(arguments);b.push(ab.getCallLoc(2));console.log.apply(console,b);b.join(" ")};a.timeStart=function(a){console.time(a)};a.timeEnd=function(a){console.timeEnd(a)};a.traceTable=function(a){console.table(a)};return a}(),gf=function(){function a(){}n(a,"laya.debug.view.nodeInfo.NodeConsts");a.defaultFitlerStr="x,y,width,height,scaleX,scaleY,alpha,renderCost";a.RenderCostMaxTime=3E3;return a}(),Rc=function(){function a(){this.data={};this.preO={};this.changeO={};this.count=0}n(a,"laya.debug.tools.CountTool");var c=a.prototype;c.reset=function(){this.data={};this.count=0};c.add=function(b,d){void 0===d&&(d=1);this.count++;this.data.hasOwnProperty(b)||(this.data[b]=0);this.data[b]+=d};c.getKeyCount=function(b){this.data.hasOwnProperty(b)||(this.data[b]=0);return this.data[b]};c.getKeyChange=function(b){return this.changeO[b]?this.changeO[b]:0};c.record=function(){for(var b in this.changeO)this.changeO[b]=0;for(b in this.data)this.preO[b]||(this.preO[b]=0),this.changeO[b]=this.data[b]-this.preO[b],this.preO[b]=this.data[b]};c.getCount=function(b){var d=0,a;for(a in b)d+=b[a];return d};c.traceSelf=function(b){b||(b=this.data);var d;d=this.getCount(b);console.log("total:"+d);return"total:"+d+"\n"+ab.traceObj(b)};c.traceSelfR=function(b){b||(b=this.data);var d;d=this.getCount(b);console.log("total:"+d);return"total:"+d+"\n"+ab.traceObjR(b)};return a}(),ud=function(){function a(){this.colorFlt=null}n(a,"laya.display.cmd.DrawTextureCmd");var c=a.prototype;c.recover=function(){this.texture._removeReference();this.matrix=this.texture=null;v.recover("DrawTextureCmd",this)};c.run=function(b,d,a){b.drawTextureWithTransform(this.texture,this.x,this.y,this.width,this.height,this.matrix,d,a,this.alpha,this.blendMode,this.colorFlt)};g(0,c,"cmdID",function(){return"DrawTexture"});a.create=function(b,d,c,h,f,k,m,p,g){var e=v.getItemByClass("DrawTextureCmd",a);e.texture=b;b._addReference();e.x=d;e.y=c;e.width=h;e.height=f;e.matrix=k;e.alpha=m;e.color=p;e.blendMode=g;p&&(e.colorFlt=new pb,e.colorFlt.setColor(p));return e};a.ID="DrawTexture";return a}(),ta=function(){function a(){this.gid=0;this.repeat=1;this._count=0}n(a,"laya.utils.Tween");var c=a.prototype;c.to=function(b,d,a,c,f,k,m){void 0===k&&(k=0);void 0===m&&(m=!1);return this._create(b,d,a,c,f,k,m,!0,!1,!0)};c.from=function(b,d,a,c,f,k,m){void 0===k&&(k=0);void 0===m&&(m=!1);return this._create(b,d,a,c,f,k,m,!1,!1,!0)};c._create=function(b,d,c,h,f,k,m,p,g,n){if(!b)throw Error("Tween:target is null");this._target=b;this._duration=c;this._ease=h||d.ease||a.easeNone;this._complete=f||d.complete;this._delay=k;this._props=[];this._usedTimer=0;this._startTimer=q.now();this._usedPool=g;this._delayParam=null;this.update=d.update;c=b.$_GID||(b.$_GID=U.getGID());a.tweenMap[c]?(m&&a.clearTween(b),a.tweenMap[c].push(this)):a.tweenMap[c]=[this];n?0>=k?this.firstStart(b,d,p):(this._delayParam=[b,d,p],l.timer.once(k,this,this.firstStart,this._delayParam)):this._initProps(b,d,p);return this};c.firstStart=function(b,d,a){this._delayParam=null;b.destroyed?this.clear():(this._initProps(b,d,a),this._beginLoop())};c._initProps=function(b,d,a){for(var c in d)if("number"==typeof b[c]){var e=a?b[c]:d[c];this._props.push([c,e,(a?d[c]:b[c])-e]);a||(b[c]=e)}};c._beginLoop=function(){l.timer.frameLoop(1,this,this._doEase)};c._doEase=function(){this._updateEase(q.now())};c._updateEase=function(b){var d=this._target;if(d){if(d.destroyed)return a.clearTween(d);b=this._usedTimer=b-this._startTimer-this._delay;if(!(0>b)){if(b>=this._duration)return this.complete();b=0<b?this._ease(b,0,1,this._duration):0;for(var c=this._props,h=0,f=c.length;h<f;h++){var k=c[h];d[k[0]]=k[1]+b*k[2]}this.update&&this.update.run()}}};c.complete=function(){if(this._target){l.timer.runTimer(this,this.firstStart);for(var b=this._target,d=this._props,a=this._complete,c=0,f=d.length;c<f;c++){var k=d[c];b[k[0]]=k[1]+k[2]}this.update&&this.update.run();this._count++;0!=this.repeat&&this._count>=this.repeat?(this.clear(),a&&a.run()):this.restart()}};c.pause=function(){l.timer.clear(this,this._beginLoop);l.timer.clear(this,this._doEase);l.timer.clear(this,this.firstStart);var b;b=q.now()-this._startTimer-this._delay;0>b&&(this._usedTimer=b)};c.setStartTime=function(b){this._startTimer=b};c.clear=function(){this._target&&(this._remove(),this._clear())};c._clear=function(){this.pause();l.timer.clear(this,this.firstStart);this._delayParam=this._props=this._ease=this._target=this._complete=null;this._usedPool&&(this.update=null,v.recover("tween",this))};c.recover=function(){this._usedPool=!0;this._clear()};c._remove=function(){var b=a.tweenMap[this._target.$_GID];if(b)for(var d=0,c=b.length;d<c;d++)if(b[d]===this){b.splice(d,1);break}};c.restart=function(){this.pause();this._usedTimer=0;this._startTimer=q.now();if(this._delayParam)l.timer.once(this._delay,this,this.firstStart,this._delayParam);else{for(var b=this._props,d=0,a=b.length;d<a;d++){var c=b[d];this._target[c[0]]=c[1]}l.timer.once(this._delay,this,this._beginLoop)}};c.resume=function(){if(!(this._usedTimer>=this._duration))if(this._startTimer=q.now()-this._usedTimer-this._delay,this._delayParam)if(0>this._usedTimer)l.timer.once(-this._usedTimer,this,this.firstStart,this._delayParam);else this.firstStart.apply(this,this._delayParam);else this._beginLoop()};g(0,c,"progress",null,function(b){b*=this._duration;this._startTimer=q.now()-this._delay-b});a.to=function(b,d,c,h,f,k,m,p){void 0===k&&(k=0);void 0===m&&(m=!1);void 0===p&&(p=!0);return v.getItemByClass("tween",a)._create(b,d,c,h,f,k,m,!0,p,!0)};a.from=function(b,d,c,h,f,k,m,p){void 0===k&&(k=0);void 0===m&&(m=!1);void 0===p&&(p=!0);return v.getItemByClass("tween",a)._create(b,d,c,h,f,k,m,!1,p,!0)};a.clearAll=function(b){if(b&&b.$_GID&&(b=a.tweenMap[b.$_GID])){for(var d=0,c=b.length;d<c;d++)b[d]._clear();b.length=0}};a.clear=function(b){b.clear()};a.clearTween=function(b){a.clearAll(b)};a.easeNone=function(b,d,a,c){return a*b/c+d};a.isTween=function(b){if(!b||!b.$_GID)return!1;b=a.tweenMap[b.$_GID];return null!=b&&0<b.length};a.tweenMap=[];return a}(),pc=function(){function a(){}n(a,"laya.debug.tools.JSTools");a.showToBody=function(a,b,d){void 0===b&&(b=0);void 0===d&&(d=0);q.document.body.appendChild(a);a=a.style;a.position="absolute";a.top=d+"px";a.left=b+"px"};a.showToParent=function(a,b,d,e){void 0===b&&(b=0);void 0===d&&(d=0);e.appendChild(a);a=a.style;a.position="absolute";a.top=d+"px";a.left=b+"px"};a.addToBody=function(a){q.document.body.appendChild(a)};a.setPos=function(a,b,d){a=a.style;a.top=d+"px";a.left=b+"px"};a.setSize=function(a,b,d){a=a.style;a.width=b+"px";a.height=d+"px"};a.setTransform=function(a,b){a=a.style;a.transformOrigin=a.webkitTransformOrigin=a.msTransformOrigin=a.mozTransformOrigin=a.oTransformOrigin="0px 0px 0px";a.transform=a.webkitTransform=a.msTransform=a.mozTransform=a.oTransform="matrix("+b.toString()+")"};a.noMouseEvent=function(a){a.style["pointer-events"]="none"};a.setMouseEnable=function(a,b){a.style["pointer-events"]=b?"auto":"none"};a.setZIndex=function(a,b){a.style["z-index"]=b};a.showAboveSprite=function(c,b,d,e){void 0===d&&(d=0);void 0===e&&(e=0);var h;h=new P;h=b.localToGlobal(h);h.x+=d;h.y+=e;h.x+=l.stage.offset.x;h.y+=l.stage.offset.y;a.showToBody(c,h.x,h.y)};a.removeElement=function(a){q.removeElement(a)};a.isElementInDom=function(a){return a&&a.parentNode};a.getImageSpriteByFile=function(a,b,d){void 0===b&&(b=0);void 0===d&&(d=0);var c;c=new FileReader;c.readAsDataURL(a);var h;h=new L;c.onload=function(a){a=new ga;a.load(c.result);h.graphics.drawTexture(a,0,0,b,d)};return h};a.getPixelRatio=function(){if(0<a._pixelRatio)return a._pixelRatio;var c=q.createElement("canvas").getContext("2d"),c=(q.window.devicePixelRatio||1)/(c.webkitBackingStorePixelRatio||c.mozBackingStorePixelRatio||c.msBackingStorePixelRatio||c.oBackingStorePixelRatio||c.backingStorePixelRatio||1);console.log("pixelRatioc:",c);return a._pixelRatio=c};a._pixelRatio=-1;return a}(),he=function(){function a(){}n(a,"laya.webgl.VertexArrayObject");return a}()(function(){function a(d){var b=d.getError;d.getError=function(){var a;do a=b.apply(d),a!=d.NO_ERROR&&(c[a]=!0);while(a!=d.NO_ERROR);for(a in c)if(c[a])return delete c[a],parseInt(a);return d.NO_ERROR}}var c={},b=function h(d){var b=d.gl;this.ext=d;this.isAlive=!0;this.hasBeenBound=!1;this.elementArrayBuffer=null;this.attribs=Array(d.maxVertexAttribs);for(d=0;d<this.attribs.length;d++){var a=new h.VertexAttrib(b);this.attribs[d]=a}this.maxAttrib=0};b.VertexAttrib=function(d){this.enabled=!1;this.buffer=null;this.size=4;this.type=d.FLOAT;this.normalized=!1;this.stride=16;this.offset=0;this.cached="";this.recache()};b.VertexAttrib.prototype.recache=function(){this.cached=[this.size,this.type,this.normalized,this.stride,this.offset].join(":")};var d=function(d){var b=this;this.gl=d;a(d);var c=this.original={getParameter:d.getParameter,enableVertexAttribArray:d.enableVertexAttribArray,disableVertexAttribArray:d.disableVertexAttribArray,bindBuffer:d.bindBuffer,getVertexAttrib:d.getVertexAttrib,vertexAttribPointer:d.vertexAttribPointer};d.getParameter=function(d){return d==b.VERTEX_ARRAY_BINDING_OES?b.currentVertexArrayObject==b.defaultVertexArrayObject?null:b.currentVertexArrayObject:c.getParameter.apply(this,arguments)};d.enableVertexAttribArray=function(d){var a=b.currentVertexArrayObject;a.maxAttrib=Math.max(a.maxAttrib,d);a.attribs[d].enabled=!0;return c.enableVertexAttribArray.apply(this,arguments)};d.disableVertexAttribArray=function(d){var a=b.currentVertexArrayObject;a.maxAttrib=Math.max(a.maxAttrib,d);a.attribs[d].enabled=!1;return c.disableVertexAttribArray.apply(this,arguments)};d.bindBuffer=function(a,h){switch(a){case d.ARRAY_BUFFER:b.currentArrayBuffer=h;break;case d.ELEMENT_ARRAY_BUFFER:b.currentVertexArrayObject.elementArrayBuffer=h}return c.bindBuffer.apply(this,arguments)};d.getVertexAttrib=function(a,h){var f=b.currentVertexArrayObject.attribs[a];switch(h){case d.VERTEX_ATTRIB_ARRAY_BUFFER_BINDING:return f.buffer;case d.VERTEX_ATTRIB_ARRAY_ENABLED:return f.enabled;case d.VERTEX_ATTRIB_ARRAY_SIZE:return f.size;case d.VERTEX_ATTRIB_ARRAY_STRIDE:return f.stride;case d.VERTEX_ATTRIB_ARRAY_TYPE:return f.type;case d.VERTEX_ATTRIB_ARRAY_NORMALIZED:return f.normalized;default:return c.getVertexAttrib.apply(this,arguments)}};d.vertexAttribPointer=function(d,a,h,f,k,g){var m=b.currentVertexArrayObject;m.maxAttrib=Math.max(m.maxAttrib,d);m=m.attribs[d];m.buffer=b.currentArrayBuffer;m.size=a;m.type=h;m.normalized=f;m.stride=k;m.offset=g;m.recache();return c.vertexAttribPointer.apply(this,arguments)};d.instrumentExtension&&d.instrumentExtension(this,"OES_vertex_array_object");d.canvas&&d.canvas.addEventListener&&d.canvas.addEventListener("webglcontextrestored",function(){w.console&&w.console.log&&w.console.log("OESVertexArrayObject emulation library context restored");b.reset_()},!0);this.reset_()};d.prototype.VERTEX_ARRAY_BINDING_OES=34229;d.prototype.reset_=function(){if(void 0!==this.vertexArrayObjects)for(var d=0;d<this.vertexArrayObjects.length;++d)this.vertexArrayObjects.isAlive=!1;d=this.gl;this.maxVertexAttribs=d.getParameter(d.MAX_VERTEX_ATTRIBS);this.defaultVertexArrayObject=new b(this);this.currentArrayBuffer=this.currentVertexArrayObject=null;this.vertexArrayObjects=[this.defaultVertexArrayObject];this.bindVertexArrayOES(null)};d.prototype.createVertexArrayOES=function(){var d=new b(this);this.vertexArrayObjects.push(d);return d};d.prototype.deleteVertexArrayOES=function(d){d.isAlive=!1;this.vertexArrayObjects.splice(this.vertexArrayObjects.indexOf(d),1);this.currentVertexArrayObject==d&&this.bindVertexArrayOES(null)};d.prototype.isVertexArrayOES=function(d){return d&&d instanceof b&&d.hasBeenBound&&d.ext==this?!0:!1};d.prototype.bindVertexArrayOES=function(d){var b=this.gl;if(d&&!d.isAlive)c[b.INVALID_OPERATION]=!0,w.console&&w.console.error&&w.console.error("bindVertexArrayOES: attempt to bind deleted arrayObject");else{var a=this.original,h=this.currentVertexArrayObject;this.currentVertexArrayObject=d||this.defaultVertexArrayObject;this.currentVertexArrayObject.hasBeenBound=!0;d=this.currentVertexArrayObject;if(h!=d){h&&d.elementArrayBuffer==h.elementArrayBuffer||a.bindBuffer.call(b,b.ELEMENT_ARRAY_BUFFER,d.elementArrayBuffer);for(var p=this.currentArrayBuffer,g=Math.max(h?h.maxAttrib:0,d.maxAttrib),l=0;l<=g;l++){var n=d.attribs[l],q=h?h.attribs[l]:null;h&&n.enabled==q.enabled||(n.enabled?a.enableVertexAttribArray.call(b,l):a.disableVertexAttribArray.call(b,l));if(n.enabled){var E=!1;h&&n.buffer==q.buffer||(p!=n.buffer&&(a.bindBuffer.call(b,b.ARRAY_BUFFER,n.buffer),p=n.buffer),E=!0);(E||n.cached!=q.cached)&&a.vertexAttribPointer.call(b,l,n.size,n.type,n.normalized,n.stride,n.offset)}}this.currentArrayBuffer!=p&&a.bindBuffer.call(b,b.ARRAY_BUFFER,this.currentArrayBuffer)}}};w._setupVertexArrayObject=function(b){var a=b.getSupportedExtensions;b.getSupportedExtensions=function(){var d=a.call(this)||[];0>d.indexOf("OES_vertex_array_object")&&d.push("OES_vertex_array_object");return d};var c=b.getExtension;b.getExtension=function(b){var a=c.call(this,b);if(a)return a;if("OES_vertex_array_object"!==b)return null;this.__OESVertexArrayObject||(console.log("Setup OES_vertex_array_object polyfill"),this.__OESVertexArrayObject=new d(this));return this.__OESVertexArrayObject}};w._forceSetupVertexArrayObject=function(b){var a=b.getSupportedExtensions;b.getSupportedExtensions=function(){var d=a.call(this)||[];0>d.indexOf("OES_vertex_array_object")&&d.push("OES_vertex_array_object");return d};var c=b.getExtension;b.getExtension=function(b){return"OES_vertex_array_object"===b?(this.__OESVertexArrayObject||(console.log("Setup OES_vertex_array_object polyfill"),this.__OESVertexArrayObject=new d(this)),this.__OESVertexArrayObject):(b=c.call(this,b))?b:null}}}()),hd=function(){function a(){this._saveuse=0}n(a,"laya.webgl.canvas.save.SaveMark");var c=a.prototype;l.imps(c,{"laya.webgl.canvas.save.ISaveData":!0});c.isSaveMark=function(){return!0};c.restore=function(b){b._saveMark=this._preSaveMark;a.POOL[a.POOL._length++]=this};a.Create=function(b){var d=a.POOL,d=0<d._length?d[--d._length]:new a;d._saveuse=0;d._preSaveMark=b._saveMark;return b._saveMark=d};a.POOL=na._createArray();return a}(),dd=function(){function a(){this.name=null;this.parentIndex=0;this.parent=null;this.lerpType=this.keyframeWidth=0;this.keyFrame=this.childs=this.interpolationMethod=null;this.playTime=NaN;this.extenData=null;this.dataOffset=0}n(a,"laya.ani.AnimationNodeContent");return a}(),cd=function(){function a(){this.name=this.nodes=null;this.playTime=NaN;this.bone3DMap=null;this.totalKeyframeDatasLength=0}n(a,"laya.ani.AnimationContent");return a}(),Qc=function(){function a(){}n(a,"laya.debug.view.nodeInfo.NodeUtils");a.getFilterdTree=function(c,b){b||(b=a.defaultKeys);var d;d={};var e,h,f;f=b.length;for(h=0;h<f;h++)e=b[h],d[e]=c[e];c=c._children;f=c.length;var k;k=[];for(h=0;h<f;h++)e=c[h],k.push(a.getFilterdTree(e,b));d.childs=k;return d};a.getNodeValue=function(a,b){if(a instanceof laya.display.Sprite)switch(b){case "gRec":a=laya.debug.view.nodeInfo.NodeUtils.getGRec(a).toString();break;case "gAlpha":a=laya.debug.view.nodeInfo.NodeUtils.getGAlpha(a)+"";break;case "cmdCount":a=laya.debug.view.nodeInfo.NodeUtils.getNodeCmdCount(a)+"";break;case "cmdAll":a=laya.debug.view.nodeInfo.NodeUtils.getNodeCmdTotalCount(a)+"";break;case "nodeAll":a=""+laya.debug.view.nodeInfo.NodeUtils.getNodeCount(a);break;case "nodeVisible":a=""+laya.debug.view.nodeInfo.NodeUtils.getNodeCount(a,!0);break;case "nodeRender":a=""+laya.debug.view.nodeInfo.NodeUtils.getRenderNodeCount(a);break;case "nodeReCache":a=""+laya.debug.view.nodeInfo.NodeUtils.getReFreshRenderNodeCount(a);break;case "renderCost":a=""+kc.I.getTime(a);break;case "renderCount":a=""+kc.I.getCount(a);break;default:a=a[b]+""}else a=a[b]+"";return a};a.getPropertyDesO=function(c,b){b||(b=a.defaultKeys);var d={};d.label="object"==typeof c?""+ha.getNodeClassAndName(c):""+c;d.type="";d.path=c;d.childs=[];d.isDirectory=!1;var e,h,f,k;if(c instanceof laya.display.Node){d.des=ha.getNodeClassAndName(c);d.isDirectory=!0;f=b.length;for(h=0;h<f;h++)e=b[h],k=a.getPropertyDesO(c[e],b),c.hasOwnProperty(e)?k.label=""+e+":"+k.des:k.label=""+e+":"+a.getNodeValue(c,e),d.childs.push(k);e="_children";k=a.getPropertyDesO(c[e],b);k.label=""+e+":"+k.des;k.isChilds=!0;d.childs.push(k)}else if(c instanceof Array)for(d.des="Array["+c.length+"]",d.isDirectory=!0,f=c.length,h=0;h<f;h++)k=a.getPropertyDesO(c[h],b),k.label=""+h+":"+k.des,d.childs.push(k);else if("object"==typeof c)for(e in d.des=ha.getNodeClassAndName(c),d.isDirectory=!0,c)k=a.getPropertyDesO(c[e],b),k.label=""+e+":"+k.des,d.childs.push(k);else d.des=""+c;d.hasChild=0<d.childs.length;return d};a.adptShowKeys=function(a){var b;for(b=a.length-1;0<=b;b--)a[b]=Gc.trimSide(a[b]),1>a[b].length&&a.splice(b,1);return a};a.getNodeTreeData=function(c,b){a.adptShowKeys(b);c=a.getPropertyDesO(c,b);b=[];a.getTreeArr(c,b);return b};a.getTreeArr=function(c,b,d){void 0===d&&(d=!0);d&&b.push(c);var e=c.childs,h,f=e.length;for(h=0;h<f;h++)e[h].nodeParent=d?c:null,e[h].isDirectory?a.getTreeArr(e[h],b):b.push(e[h])};a.traceStage=function(){console.log(a.getFilterdTree(l.stage,null));console.log("treeArr:",a.getNodeTreeData(l.stage,null))};a.getNodeCount=function(c,b){void 0===b&&(b=!1);if(b&&!c.visible)return 0;var d;d=1;var e,h;h=c._children;e=h.length;for(c=0;c<e;c++)d+=a.getNodeCount(h[c],b);return d};a.getGVisible=function(a){for(;a;){if(!a.visible)return!1;a=a.parent}return!0};a.getGAlpha=function(a){var b;for(b=1;a;)b*=a.alpha,a=a.parent;return b};a.getGPos=function(a){var b;b=new P;a.localToGlobal(b);return b};a.getGRec=function(a){var b;b=a._getBoundPointsM(!0);if(!b||1>b.length)return M.TEMP.setTo(0,0,0,0);b=za.pListToPointList(b,!0);Ha.walkArr(b,a.localToGlobal,a);b=za.pointListToPlist(b);var d;return d=M._getWrapRec(b,d)};a.getGGraphicRec=function(a){var b;b=a.getGraphicBounds()._getBoundPoints();if(!b||1>b.length)return M.TEMP.setTo(0,0,0,0);b=za.pListToPointList(b,!0);Ha.walkArr(b,a.localToGlobal,a);b=za.pointListToPlist(b);var d;return d=M._getWrapRec(b,d)};a.getNodeCmdCount=function(a){return a.graphics?a.graphics.cmds?a.graphics.cmds.length:a.graphics._one?1:0:0};a.getNodeCmdTotalCount=function(c){var b,d,e;e=c._children;d=e.length;c=a.getNodeCmdCount(c);for(b=0;b<d;b++)c+=a.getNodeCmdTotalCount(e[b]);return c};a.getRenderNodeCount=function(c){if("none"!=c.cacheAs)return 1;var b,d,e;e=c._children;d=e.length;c=1;for(b=0;b<d;b++)c+=a.getRenderNodeCount(e[b]);return c};a.getReFreshRenderNodeCount=function(c){var b,d,e;e=c._children;d=e.length;c=1;for(b=0;b<d;b++)c+=a.getRenderNodeCount(e[b]);return c};a.showCachedSpriteRecs=function(){a.g=pa.I.graphicLayer.graphics;a.g.clear();Ha.walkTarget(l.stage,a.drawCachedBounds,null)};a.drawCachedBounds=function(c){"none"==c.cacheAs||pa.I.isDebugItem(c)||(c=a.getGRec(c),a.g.drawRect(c.x,c.y,c.width,c.height,null,"#0000ff",2))};a.g=null;u(a,["defaultKeys",function(){return this.defaultKeys=["x","y","width","height"]}]);return a}();(function(){function a(){}n(a,"laya.debug.tools.JsonTool");a.getJsonString=function(c,b,d,e,h){void 0===b&&(b=!0);void 0===d&&(d="\n");void 0===e&&(e=0);void 0===h&&(h=4);var f;f=a.getEmptyStr(e*h);var k;k={};var m,p,g;g=[];for(m in c)g.push(m),p=c[m],k[m]=a.singleLineKey[m]?a.getValueStr(p,!0,d,e+1,h):a.getValueStr(p,b,d,e+1,h);c=g.length;g.sort();g=g.reverse();e=a.getEmptyStr((e+1)*h);b&&(e=f=d="");h=[];for(b=0;b<c;b++)m=g[b],h.push(e+a.wrapValue(m)+":"+k[m]);return"{"+d+h.join(","+d)+d+f+"}"};a.wrapValue=function(a,b){void 0===b&&(b='"');return b+a+b};a.getArrStr=function(c,b,d,e,h){void 0===b&&(b=!0);void 0===d&&(d="\n");void 0===e&&(e=0);void 0===h&&(h=4);var f,k;k=c.length;var m;m=[];for(f=0;f<k;f++)m.push(a.getValueStr(c[f],b,d,e+1,h));c=a.getEmptyStr((e+1)*h);b&&(c=d="");return"["+d+c+m.join(","+d+c)+"]"};a.quote=function(c){a.escapable.lastIndex=0;return a.escapable.test(c)?'"'+c.replace(a.escapable,function(b){var d=a.meta[b];return"string"===typeof d?d:"\\u"+("0000"+b.charCodeAt(0).toString(16)).slice(-4)})+'"':'"'+c+'"'};a.getValueStr=function(c,b,d,e,h){void 0===b&&(b=!0);void 0===d&&(d="\n");void 0===e&&(e=0);void 0===h&&(h=0);return"string"==typeof c?a.quote(c):null==c?"null":"number"==typeof c||"number"==typeof c&&Math.floor(c)==c||"boolean"==typeof c?c:c instanceof Array?a.getArrStr(c,b,d,e,h):"object"==typeof c?a.getJsonString(c,b,d,e,h):c};a.getEmptyStr=function(c){if(!a.emptyDic.hasOwnProperty(c)){var b,d;d="";for(b=0;b<c;b++)d+=" ";a.emptyDic[c]=d}return a.emptyDic[c]};a.emptyDic={};u(a,["singleLineKey",function(){return this.singleLineKey={props:!0}},"escapable",function(){return this.escapable=/[\\\"\x00-\x1f\x7f-\x9f\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g},"meta",function(){return this.meta={"\b":"\\b","\t":"\\t","\n":"\\n","\f":"\\f","\r":"\\r",'"':'\\"',"\\":"\\\\"}}]);return a})();var qc=function(){function a(){this._lastOriY=this._lastOriX=0;this.paths=[];this._curPath=null}var c;n(a,"laya.webgl.canvas.Path");var b=a.prototype;b.beginPath=function(d){this.paths.length=1;this._curPath=this.paths[0]=new c;this._curPath.convex=d};b.closePath=function(){this._curPath.loop=!0};b.newPath=function(){this._curPath=new c;this.paths.push(this._curPath)};b.addPoint=function(d,b){this._curPath.path.push(d,b)};b.push=function(d,b){this._curPath?0<this._curPath.path.length&&(this._curPath=new c,this.paths.push(this._curPath)):(this._curPath=new c,this.paths.push(this._curPath));var a=this._curPath;a.path=d.slice();a.convex=b};b.reset=function(){this.paths.length=0};a.__init$=function(){c=function(){function d(){this.path=[];this.convex=this.loop=!1}n(d,"");return d}()};return a}(),Qa=function(){function a(d){this.scale=1;this._delta=this.currFrame=0;this._map=[];this._handlers=[];this._temp=[];this._count=0;this.currTimer=q.now();this._lastTimer=q.now();void 0===d&&(d=!0);d&&l.systemTimer&&l.systemTimer.frameLoop(1,this,this._update)}var c;n(a,"laya.utils.Timer");var b=a.prototype;b._update=function(){if(0>=this.scale)this._lastTimer=q.now();else{var d=this.currFrame+=this.scale,b=q.now(),a=3E4<b-this._lastTimer;this._delta=(b-this._lastTimer)*this.scale;var c=this.currTimer+=this._delta;this._lastTimer=b;for(var b=this._handlers,k=this._count=0,m=b.length;k<m;k++){var p=b[k];if(null!==p.method){var g=p.userFrame?d:c;if(g>=p.exeTime)if(p.repeat)if(!p.jumpFrame||a)p.exeTime+=p.delay,p.run(!1),g>p.exeTime&&(p.exeTime+=Math.ceil((g-p.exeTime)/p.delay)*p.delay);else for(;g>=p.exeTime;)p.exeTime+=p.delay,p.run(!1);else p.run(!0)}else this._count++}(30<this._count||0===d%200)&&this._clearHandlers()}};b._clearHandlers=function(){for(var d=this._handlers,b=0,a=d.length;b<a;b++){var c=d[b];null!==c.method?this._temp.push(c):this._recoverHandler(c)}this._handlers=this._temp;d.length=0;this._temp=d};b._recoverHandler=function(d){this._map[d.key]==d&&(this._map[d.key]=null);d.clear();a._pool.push(d)};b._create=function(d,b,h,f,k,m,p){if(!h)return k.apply(f,m),null;if(p&&(p=this._getHandler(f,k)))return p.repeat=b,p.userFrame=d,p.delay=h,p.caller=f,p.method=k,p.args=m,p.exeTime=h+(d?this.currFrame:this.currTimer+q.now()-this._lastTimer),p;p=0<a._pool.length?a._pool.pop():new c;p.repeat=b;p.userFrame=d;p.delay=h;p.caller=f;p.method=k;p.args=m;p.exeTime=h+(d?this.currFrame:this.currTimer+q.now()-this._lastTimer);this._indexHandler(p);this._handlers.push(p);return p};b._indexHandler=function(d){var b=d.caller,c=d.method,b=b?b.$_GID||(b.$_GID=U.getGID()):0,c=c.$_TID||(c.$_TID=1E5*a._mid++);d.key=b+c;this._map[d.key]=d};b.once=function(d,b,a,c,k){void 0===k&&(k=!0);this._create(!1,!1,d,b,a,c,k)};b.loop=function(d,b,a,c,k,m){void 0===k&&(k=!0);void 0===m&&(m=!1);if(d=this._create(!1,!0,d,b,a,c,k))d.jumpFrame=m};b.frameOnce=function(d,b,a,c,k){void 0===k&&(k=!0);this._create(!0,!1,d,b,a,c,k)};b.frameLoop=function(d,b,a,c,k){void 0===k&&(k=!0);this._create(!0,!0,d,b,a,c,k)};b.toString=function(){return" handlers:"+this._handlers.length+" pool:"+a._pool.length};b.clear=function(d,b){if(d=this._getHandler(d,b))this._map[d.key]=null,d.key=0,d.clear()};b.clearAll=function(d){if(d)for(var b=0,a=this._handlers.length;b<a;b++){var c=this._handlers[b];c.caller===d&&(this._map[c.key]=null,c.key=0,c.clear())}};b._getHandler=function(d,b){d=d?d.$_GID||(d.$_GID=U.getGID()):0;b=b.$_TID||(b.$_TID=1E5*a._mid++);return this._map[d+b]};b.callLater=function(d,b,a){db.I.callLater(d,b,a)};b.runCallLater=function(d,b){db.I.runCallLater(d,b)};b.runTimer=function(d,b){(d=this._getHandler(d,b))&&null!=d.method&&(this._map[d.key]=null,d.run(!0))};b.pause=function(){this.scale=0};b.resume=function(){this.scale=1};g(0,b,"delta",function(){return this._delta});a._pool=[];a._mid=1;a.__init$=function(){c=function(){function d(){this.key=0;this.repeat=!1;this.delay=0;this.userFrame=!1;this.exeTime=0;this.args=this.method=this.caller=null;this.jumpFrame=!1}n(d,"");var b=d.prototype;b.clear=function(){this.args=this.method=this.caller=null};b.run=function(d){var b=this.caller;if(b&&b.destroyed)return this.clear();var a=this.method,c=this.args;d&&this.clear();if(null!=a)try{c?a.apply(b,c):a.call(b)}catch(p){console.error(p.stack),l.errorCallBack&&l.errorCallBack(p.stack)}};return d}()};return a}(),Td=function(){function a(){}n(a,"laya.display.cmd.Draw9GridTexture");var c=a.prototype;c.recover=function(){this.texture._removeReference();v.recover("Draw9GridTexture",this)};c.run=function(b,d,a){b.drawTextureWithSizeGrid(this.texture,this.x,this.y,this.width,this.height,this.sizeGrid,d,a)};g(0,c,"cmdID",function(){return"Draw9GridTexture"});a.create=function(b,d,c,h,f,k){var e=v.getItemByClass("Draw9GridTexture",a);e.texture=b;b._addReference();e.x=d;e.y=c;e.width=h;e.height=f;e.sizeGrid=k;return e};a.ID="Draw9GridTexture";return a}(),Xd=function(){function a(){this.reset()}n(a,"laya.utils.HTMLChar");var c=a.prototype;c.setData=function(b,d,c,h){this.char=b;this.charNum=b.charCodeAt(0);this.x=this.y=0;this.width=d;this.height="string"==typeof c?parseFloat(c.toString()):c;this.style=h;this.isWord=!a._isWordRegExp.test(b);return this};c.reset=function(){this.x=this.y=this.width=this.height=0;this.isWord=!1;this.char=null;this.charNum=0;this.style=null;return this};c.recover=function(){v.recover("HTMLChar",this.reset())};c._isChar=function(){return!0};c._getCSSStyle=function(){return this.style};a.create=function(){return v.getItemByClass("HTMLChar",a)};a._isWordRegExp=/[\w.]/;return a}(),Ha=function(){function a(){}n(a,"laya.debug.tools.WalkTools");a.walkTarget=function(c,b,d){b.apply(d,[c]);var e,h;e=c.numChildren;for(d=0;d<e;d++)h=c.getChildAt(d),a.walkTarget(h,b,h)};a.walkTargetEX=function(c,b,d,e){if(null==e||e(c)){b.apply(d,[c]);var h;h=c._children;d=h.length;for(c=0;c<d;c++)e=h[c],a.walkTarget(e,b,e)}};a.walkChildren=function(c,b,d){!c||1>c.numChildren||a.walkArr(wa.getAllChild(c),b,d)};a.walkArr=function(a,b,d){if(a){var c,h;h=a.length;for(c=0;c<h;c++)b.apply(d,[a[c],c])}};return a}(),hf=function(){function a(){this._texture=null;this._fontCharDic={};this._fontWidthMap={};this._path=this._complete=null;this._maxWidth=0;this._spaceWidth=10;this._padding=null;this.fontSize=12;this.autoScaleSize=!1;this.letterSpacing=0}n(a,"laya.display.BitmapFont");var c=a.prototype;c.loadFont=function(b,d){this._path=b;this._complete=d;b&&-1!==b.indexOf(".fnt")?l.loader.load([{url:b,type:"xml"},{url:b.replace(".fnt",".png"),type:"image"}],B.create(this,this._onLoaded)):console.error('Bitmap font configuration information must be a ".fnt" file')};c._onLoaded=function(){this.parseFont(x.getRes(this._path),x.getRes(this._path.replace(".fnt",".png")));this._complete&&this._complete.run()};c.parseFont=function(b,d){if(null!=b&&null!=d){this._texture=d;var a=b.getElementsByTagName("info");if(!a[0].getAttributeNode)return this.parseFont2(b,d);this.fontSize=parseInt(a[0].getAttributeNode("size").nodeValue);a=a[0].getAttributeNode("padding").nodeValue.split(",");this._padding=[parseInt(a[0]),parseInt(a[1]),parseInt(a[2]),parseInt(a[3])];b=b.getElementsByTagName("char");for(a=0;a<b.length;a++){var c=b[a],f=parseInt(c.getAttributeNode("id").nodeValue),k=parseInt(c.getAttributeNode("xoffset").nodeValue)/1,m=parseInt(c.getAttributeNode("yoffset").nodeValue)/1,p=parseInt(c.getAttributeNode("xadvance").nodeValue)/1,g=new M;g.x=parseInt(c.getAttributeNode("x").nodeValue);g.y=parseInt(c.getAttributeNode("y").nodeValue);g.width=parseInt(c.getAttributeNode("width").nodeValue);g.height=parseInt(c.getAttributeNode("height").nodeValue);c=ga.create(d,g.x,g.y,g.width,g.height,k,m);this._maxWidth=Math.max(this._maxWidth,p+this.letterSpacing);this._fontCharDic[f]=c;this._fontWidthMap[f]=p}}};c.parseFont2=function(b,d){if(null!=b&&null!=d){this._texture=d;var a=b.getElementsByTagName("info");this.fontSize=parseInt(a[0].attributes.size.nodeValue);a=a[0].attributes.padding.nodeValue.split(",");this._padding=[parseInt(a[0]),parseInt(a[1]),parseInt(a[2]),parseInt(a[3])];b=b.getElementsByTagName("char");for(a=0;a<b.length;a++){var c=b[a].attributes,f=parseInt(c.id.nodeValue),k=parseInt(c.xoffset.nodeValue)/1,m=parseInt(c.yoffset.nodeValue)/1,p=parseInt(c.xadvance.nodeValue)/1,g=new M;g.x=parseInt(c.x.nodeValue);g.y=parseInt(c.y.nodeValue);g.width=parseInt(c.width.nodeValue);g.height=parseInt(c.height.nodeValue);c=ga.create(d,g.x,g.y,g.width,g.height,k,m);this._maxWidth=Math.max(this._maxWidth,p+this.letterSpacing);this._fontCharDic[f]=c;this._fontWidthMap[f]=p}}};c.getCharTexture=function(b){return this._fontCharDic[b.charCodeAt(0)]};c.destroy=function(){if(this._texture){for(var b in this._fontCharDic){var d=this._fontCharDic[b];d&&d.destroy()}this._texture.destroy();this._padding=this._complete=this._texture=this._fontWidthMap=this._fontCharDic=null}};c.setSpaceWidth=function(b){this._spaceWidth=b};c.getCharWidth=function(b){var d=b.charCodeAt(0);return this._fontWidthMap[d]?this._fontWidthMap[d]+this.letterSpacing:" "===b?this._spaceWidth+this.letterSpacing:0};c.getTextWidth=function(b){for(var d=0,a=0,c=b.length;a<c;a++)d+=this.getCharWidth(b.charAt(a));return d};c.getMaxWidth=function(){return this._maxWidth};c.getMaxHeight=function(){return this.fontSize};c._drawText=function(b,d,a,c,f,k){var e=this.getTextWidth(b),h=0;"center"===f&&(h=(k-e)/2);"right"===f&&(h=k-e);for(var e=k=0,g=b.length;e<g;e++)if(f=this.getCharTexture(b.charAt(e)))d.graphics.drawImage(f,a+k+h,c),k+=this.getCharWidth(b.charAt(e))};return a}(),Kd=function(){function a(){}n(a,"laya.display.cmd.RestoreCmd");var c=a.prototype;c.recover=function(){v.recover("RestoreCmd",this)};c.run=function(b,d,a){b.restore()};g(0,c,"cmdID",function(){return"Restore"});a.create=function(){return v.getItemByClass("RestoreCmd",a)};a.ID="Restore";return a}(),kc=function(){function a(){this.timeDic={};this.resultDic={};this.countDic={};this.resultCountDic={};this.nodeDic={};this.isWorking=!1;this.working=!0}n(a,"laya.debug.tools.RenderAnalyser");var c=a.prototype;c.render=function(b,d){this.addTime(b,d)};c.addTime=function(b,d){S.idObj(b);var a;a=S.getObjID(b);this.timeDic.hasOwnProperty(a)||(this.timeDic[a]=0);this.timeDic[a]+=d;this.countDic.hasOwnProperty(a)||(this.countDic[a]=0);this.countDic[a]+=1;this.nodeDic[a]=b};c.getTime=function(b){S.idObj(b);b=S.getObjID(b);return this.resultDic[b]?this.resultDic[b]:0};c.getCount=function(b){S.idObj(b);b=S.getObjID(b);return this.resultCountDic[b]};c.reset=function(){for(var b in this.timeDic)this.timeDic[b]=0,this.countDic[b]=0;oa.clearObj(this.nodeDic)};c.updates=function(){oa.clearObj(this.resultDic);oa.insertValue(this.resultDic,this.timeDic);oa.clearObj(this.resultCountDic);oa.insertValue(this.resultCountDic,this.countDic);this.reset()};g(0,c,"working",null,function(b){(this.isWorking=b)?l.timer.loop(gf.RenderCostMaxTime,this,this.updates):l.timer.clear(this,this.updates)});u(a,["I",function(){return this.I=new a}]);return a}(),zd=function(){function a(){this._textIsWorldText=!1;this._fontColor=4294967295;this._nTexAlign=this._strokeColor=0;this._fontObj=a._defFontObj}n(a,"laya.display.cmd.FillTextCmd");var c=a.prototype;c.recover=function(){v.recover("FillTextCmd",this)};c.run=function(b,d,a){l.stage.isGlobalRepaint()&&this._textIsWorldText&&this._text.cleanCache();this._textIsWorldText&&b._fast_filltext?b._fast_filltext(this._text,this.x+d,this.y+a,this._fontObj,this._color,null,0,this._nTexAlign,0):b.drawText(this._text,this.x+d,this.y+a,this._font,this._color,this._textAlign)};g(0,c,"text",function(){return this._text},function(b){this._text=b;(this._textIsWorldText=b instanceof laya.utils.WordText)&&this._text.cleanCache()});g(0,c,"cmdID",function(){return"FillText"});g(0,c,"color",function(){return this._color},function(b){this._color=b;this._fontColor=ba.create(b).numColor;this._textIsWorldText&&this._text.cleanCache()});g(0,c,"font",function(){return this._font},function(b){this._font=b;r.isWebGL&&(this._fontObj=ib.Parse(b));this._textIsWorldText&&this._text.cleanCache()});g(0,c,"textAlign",function(){return this._textAlign},function(b){this._textAlign=b;switch(b){case "center":this._nTexAlign=Ca.ENUM_TEXTALIGN_CENTER;break;case "right":this._nTexAlign=Ca.ENUM_TEXTALIGN_RIGHT;break;default:this._nTexAlign=Ca.ENUM_TEXTALIGN_DEFAULT}this._textIsWorldText&&this._text.cleanCache()});a.create=function(b,d,c,h,f,k){var e=v.getItemByClass("FillTextCmd",a);e.text=b;e._textIsWorldText=b instanceof laya.utils.WordText;e.x=d;e.y=c;e.font=h;e.color=f;e.textAlign=k;return e};a.ID="FillText";u(a,["_defFontObj",function(){return this._defFontObj=new ib(null)}]);return a}(),Md=function(){function a(){}n(a,"laya.display.cmd.DrawLinesCmd");var c=a.prototype;c.recover=function(){this.lineColor=this.points=null;v.recover("DrawLinesCmd",this)};c.run=function(b,d,a){b._drawLines(this.x+d,this.y+a,this.points,this.lineColor,this.lineWidth,this.vid)};g(0,c,"cmdID",function(){return"DrawLines"});a.create=function(b,d,c,h,f,k){var e=v.getItemByClass("DrawLinesCmd",a);e.x=b;e.y=d;e.points=c;e.lineColor=h;e.lineWidth=f;e.vid=k;return e};a.ID="DrawLines";return a}(),Dd=function(){function a(){}n(a,"laya.display.cmd.StrokeTextCmd");var c=a.prototype;c.recover=function(){v.recover("StrokeTextCmd",this)};c.run=function(b,d,a){b.strokeWord(this.text,this.x+d,this.y+a,this.font,this.color,this.lineWidth,this.textAlign)};g(0,c,"cmdID",function(){return"StrokeText"});a.create=function(b,d,c,h,f,k,m){var e=v.getItemByClass("StrokeTextCmd",a);e.text=b;e.x=d;e.y=c;e.font=h;e.color=f;e.lineWidth=k;e.textAlign=m;return e};a.ID="StrokeText";return a}(),Ra=function(){function a(){this.mouseY=this.mouseX=0;this.disableMouseEvent=!1;this.mouseDownTime=0;this.mouseMoveAccuracy=2;this._captureSp=this._stage=null;this._hitCaputreSp=this._captureExlusiveMode=!1;this._target=null;this._lastMoveTimer=0;this._isLeftMouse=!1;this._touchIDs={};this._id=1;this._tTouchID=0;this._event=new Ya;this._captureChain=[];this._matrix=new C;this._point=new P;this._rect=new M;this._prePoint=new P;this._curTouchID=NaN}n(a,"laya.events.MouseManager");var c=a.prototype;c.__init__=function(b,d){var c=this;this._stage=b;var h=this;d.oncontextmenu=function(d){if(a.enabled)return!1};d.addEventListener("mousedown",function(d){a.enabled&&(q.onIE||d.preventDefault(),h.mouseDownTime=q.now(),c.runEvent(d))});d.addEventListener("mouseup",function(d){a.enabled&&(d.preventDefault(),h.mouseDownTime=-q.now(),c.runEvent(d))},!0);d.addEventListener("mousemove",function(d){if(a.enabled){d.preventDefault();var b=q.now();10>b-h._lastMoveTimer||(h._lastMoveTimer=b,c.runEvent(d))}},!0);d.addEventListener("mouseout",function(d){a.enabled&&c.runEvent(d)});d.addEventListener("mouseover",function(d){a.enabled&&c.runEvent(d)});d.addEventListener("touchstart",function(d){a.enabled&&(a._isFirstTouch||ia.isInputting||d.preventDefault(),h.mouseDownTime=q.now(),c.runEvent(d))});d.addEventListener("touchend",function(d){a.enabled?(a._isFirstTouch||ia.isInputting||d.preventDefault(),a._isFirstTouch=!1,h.mouseDownTime=-q.now(),c.runEvent(d)):c._curTouchID=NaN},!0);d.addEventListener("touchmove",function(d){a.enabled&&(d.preventDefault(),c.runEvent(d))},!0);d.addEventListener("touchcancel",function(d){a.enabled?(d.preventDefault(),c.runEvent(d)):c._curTouchID=NaN},!0);d.addEventListener("mousewheel",function(d){a.enabled&&c.runEvent(d)});d.addEventListener("DOMMouseScroll",function(d){a.enabled&&c.runEvent(d)})};c.initEvent=function(b,d){this._event._stoped=!1;this._event.nativeEvent=d||b;this._target=null;this._point.setTo(b.pageX||b.clientX,b.pageY||b.clientY);this._stage._canvasTransform&&(this._stage._canvasTransform.invertTransformPoint(this._point),this.mouseX=this._point.x,this.mouseY=this._point.y);this._event.touchId=b.identifier||0;this._tTouchID=this._event.touchId;b=mb.I._event;b._stoped=!1;b.nativeEvent=this._event.nativeEvent;b.touchId=this._event.touchId};c.checkMouseWheel=function(b){this._event.delta=b.wheelDelta?.025*b.wheelDelta:-b.detail;b=mb.I.getLastOvers();for(var d=0,a=b.length;d<a;d++){var c=b[d];c.event("mousewheel",this._event.setTo("mousewheel",c,this._target))}};c.onMouseMove=function(b){mb.I.onMouseMove(b,this._tTouchID)};c.onMouseDown=function(b){if(ia.isInputting&&l.stage.focus&&l.stage.focus.focus&&!l.stage.focus.contains(this._target)){var d=l.stage.focus._tf||l.stage.focus,a=b._tf||b;a instanceof laya.display.Input&&a.multiline==d.multiline?d._focusOut():d.focus=!1}mb.I.onMouseDown(b,this._tTouchID,this._isLeftMouse)};c.onMouseUp=function(b){mb.I.onMouseUp(b,this._tTouchID,this._isLeftMouse)};c.check=function(b,d,a,c){this._point.setTo(d,a);b.fromParentPoint(this._point);d=this._point.x;a=this._point.y;var e=b._style.scrollRect;if(e&&(this._rect.setTo(e.x,e.y,e.width,e.height),!this._rect.contains(d,a)))return!1;if(!this.disableMouseEvent){if(b.hitTestPrior&&!b.mouseThrough&&!this.hitTest(b,d,a))return!1;for(e=b._children.length-1;-1<e;e--){var h=b._children[e];if(!h.destroyed&&1<h._mouseState&&h._visible&&this.check(h,d,a,c))return!0}for(e=b._extUIChild.length-1;0<=e;e--)if(h=b._extUIChild[e],!h.destroyed&&1<h._mouseState&&h._visible&&this.check(h,d,a,c))return!0}(d=!b.hitTestPrior||b.mouseThrough||this.disableMouseEvent?this.hitTest(b,d,a):!0)?(this._target=b,c.call(this,b),this._target==this._hitCaputreSp&&(this._hitCaputreSp=!0)):c===this.onMouseUp&&b===this._stage&&(this._target=this._stage,c.call(this,this._target));return d};c.hitTest=function(b,d,a){var c=!1;b.scrollRect&&(d-=b._style.scrollRect.x,a-=b._style.scrollRect.y);var e=b._style.hitArea;if(e&&e._hit)return e.contains(d,a);if(0<b.width&&0<b.height||b.mouseThrough||e)c=b.mouseThrough?b.getGraphicBounds().contains(d,a):(e?e:this._rect.setTo(0,0,b.width,b.height)).contains(d,a);return c};c._checkAllBaseUI=function(b,d,a){if(b=this.handleExclusiveCapture(this.mouseX,this.mouseY,a))return!0;b=this.check(this._stage,this.mouseX,this.mouseY,a);return this.handleCapture(this.mouseX,this.mouseY,a)||b};c.check3DUI=function(b,d,a){b=this._stage._3dUI;d=0;for(var c=!1;d<b.length;d++){var e=b[d];this._stage._curUIBase=e;!e.destroyed&&1<e._mouseState&&e._visible&&(c=c||this.check(e,this.mouseX,this.mouseY,a))}this._stage._curUIBase=this._stage;return c};c.handleExclusiveCapture=function(b,d,a){if(this._captureExlusiveMode&&this._captureSp&&0<this._captureChain.length){var c;this._point.setTo(b,d);for(b=0;b<this._captureChain.length;b++)c=this._captureChain[b],c.fromParentPoint(this._point);this._target=c;a.call(this,c);return!0}return!1};c.handleCapture=function(b,d,a){if(!this._hitCaputreSp&&this._captureSp&&0<this._captureChain.length){var c;this._point.setTo(b,d);for(b=0;b<this._captureChain.length;b++)c=this._captureChain[b],c.fromParentPoint(this._point);this._target=c;a.call(this,c);return!0}return!1};c.runEvent=function(b){var d,c,h;"mousemove"!==b.type&&(this._prePoint.x=this._prePoint.y=-1E6);switch(b.type){case "mousedown":this._touchIDs[0]=this._id++;a._isTouchRespond?a._isTouchRespond=!1:(this._isLeftMouse=0===b.button,this.initEvent(b),this._checkAllBaseUI(this.mouseX,this.mouseY,this.onMouseDown));break;case "mouseup":this._isLeftMouse=0===b.button;this.initEvent(b);this._checkAllBaseUI(this.mouseX,this.mouseY,this.onMouseUp);break;case "mousemove":Math.abs(this._prePoint.x-b.clientX)+Math.abs(this._prePoint.y-b.clientY)>=this.mouseMoveAccuracy&&(this._prePoint.x=b.clientX,this._prePoint.y=b.clientY,this.initEvent(b),this._checkAllBaseUI(this.mouseX,this.mouseY,this.onMouseMove));break;case "touchstart":this._isLeftMouse=a._isTouchRespond=!0;var f=b.changedTouches;d=0;for(c=f.length;d<c;d++)if(h=f[d],a.multiTouchEnabled||isNaN(this._curTouchID))this._curTouchID=h.identifier,0===this._id%200&&(this._touchIDs={}),this._touchIDs[h.identifier]=this._id++,this.initEvent(h,b),this._checkAllBaseUI(this.mouseX,this.mouseY,this.onMouseDown);break;case "touchend":case "touchcancel":this._isLeftMouse=a._isTouchRespond=!0;f=b.changedTouches;d=0;for(c=f.length;d<c;d++)if(h=f[d],a.multiTouchEnabled||h.identifier==this._curTouchID)if(this._curTouchID=NaN,this.initEvent(h,b),!this._checkAllBaseUI(this.mouseX,this.mouseY,this.onMouseUp))this.onMouseUp(null);break;case "touchmove":f=b.changedTouches;d=0;for(c=f.length;d<c;d++)if(h=f[d],a.multiTouchEnabled||h.identifier==this._curTouchID)this.initEvent(h,b),this._checkAllBaseUI(this.mouseX,this.mouseY,this.onMouseMove);break;case "wheel":case "mousewheel":case "DOMMouseScroll":this.checkMouseWheel(b);break;case "mouseout":mb.I.stageMouseOut();break;case "mouseover":this._stage.event("mouseover",this._event.setTo("mouseover",this._stage,this._stage))}};c.setCapture=function(b,d){void 0===d&&(d=!1);this._captureSp=b;this._captureExlusiveMode=d;this._captureChain.length=0;for(this._captureChain.push(b);b!=l.stage&&b!=l.stage._curUIBase;){b=b.parent;if(!b)break;this._captureChain.splice(0,0,b)}};c.releaseCapture=function(){console.log("release capture");this._captureSp=null};a.enabled=!0;a.multiTouchEnabled=!0;a._isTouchRespond=!1;a._isFirstTouch=!0;u(a,["instance",function(){return this.instance=new a}]);return a}(),wa=function(){function a(){}n(a,"laya.debug.tools.DisControlTool");a.getObjectsUnderPoint=function(c,b,d,e,h){e=e?e:[];if(null!=h&&!h(c))return e;if(c.getBounds().contains(b,d)){e.push(c);var f=new P;f.setTo(b,d);f=c.fromParentPoint(f);b=f.x;d=f.y;for(f=c._children.length-1;-1<f;f--){var k=c._children[f];k instanceof laya.display.Sprite&&a.getObjectsUnderPoint(k,b,d,e,h)}}return e};a.getObjectsUnderGlobalPoint=function(c,b){var d=new P;d.setTo(l.stage.mouseX,l.stage.mouseY);c.parent&&(d=c.parent.globalToLocal(d));return a.getObjectsUnderPoint(c,d.x,d.y,null,b)};a.findFirstObjectsUnderGlobalPoint=function(){var c;c=a.getObjectsUnderGlobalPoint(l.stage);if(!c)return null;var b,d;for(b=c.length-1;0<=b&&!((d=c[b])&&1>d.numChildren);b--);return d};a.visibleAndEnableObjFun=function(a){return a.visible&&a.mouseEnabled};a.visibleObjFun=function(a){return a.visible};a.getMousePoint=function(a){var b=new P;b.setTo(l.stage.mouseX,l.stage.mouseY);return b=a.globalToLocal(b)};a.isChildE=function(a,b){if(!a)return!1;for(;b;){if(b.parent==a)return!0;b=b.parent}return!1};a.isInTree=function(c,b){return c==b||a.isChildE(c,b)};a.setTop=function(a){if(a&&a.parent){var b;b=a.parent;b.setChildIndex(a,b.numChildren-1)}};a.clearItemRelativeInfo=function(a){a.getLayout().left="NaN";a.getLayout().right="NaN";a.getLayout().top="NaN";a.getLayout().bottom="NaN"};a.swap=function(a,b){if(a!=b){var d;d=a.parent.getChildIndex(a);var c;c=b.parent.getChildIndex(b);var h;h=b.parent;a.parent.addChildAt(b,d);h.addChildAt(a,c)}};a.insertToTarParent=function(c,b,d){void 0===d&&(d=!1);var e;c&&(e=c.parent)&&(c=e.getChildIndex(c),d&&c++,a.insertToParent(e,b,c))};a.insertToParent=function(c,b,d){void 0===d&&(d=-1);if(c){0>d&&(d=c.numChildren);var e,h;h=b.length;for(e=0;e<h;e++)a.transParent(b[e],c),c.addChildAt(b[e],d)}};a.transParent=function(a,b){if(a&&b&&a.parent){var d;d=a.parent;var c;c=new P(a.x,a.y);c=d.localToGlobal(c);c=b.globalToLocal(c);a.pos(c.x,c.y)}};a.transPoint=function(a,b,d){d=a.localToGlobal(d);return d=b.globalToLocal(d)};a.removeItems=function(a){var b,d;d=a.length;for(b=0;b<d;b++)a[b].removeSelf()};a.addItems=function(a,b){var d,c;c=a.length;for(d=0;d<c;d++)b.addChild(a[d])};a.getAllChild=function(a){if(!a)return[];var b,d,c=[];d=a.numChildren;for(b=0;b<d;b++)c.push(a.getChildAt(b));return c};a.upDis=function(a){if(a&&a.parent){var b;b=a.parent;var d;d=b.getChildIndex(a)+1;d>=b.numChildren&&(d=b.numChildren-1);console.log("setChildIndex:"+d);b.setChildIndex(a,d)}};a.downDis=function(a){if(a&&a.parent){var b;b=a.parent;var d;d=b.getChildIndex(a)-1;0>d&&(d=0);console.log("setChildIndex:"+d);b.setChildIndex(a,d)}};a.setResizeAbleEx=function(a){var b;(b=a.getChildByName("resizeBtn"))&&ie.setResizeAble(b,a)};a.setResizeAble=function(c){c.on("click",null,a.resizeHandler,[c])};a.resizeHandler=function(a){Be.setUp(a)};a.setDragingItem=function(c,b){c.on("mousedown",null,a.dragingHandler,[b]);b.on("dragend",null,a.dragingEnd,[b])};a.dragingHandler=function(a){a&&a.startDrag()};a.dragingEnd=function(c){a.intFyDisPos(c);console.log(c.x,c.y)};a.showToStage=function(c,b,d){void 0===b&&(b=0);void 0===d&&(d=0);var e=c.getBounds();c.x=l.stage.mouseX+b;c.y=l.stage.mouseY+d;c.x+e.width>l.stage.width&&(c.x-=e.width+b);c.y+e.height>l.stage.height&&(c.y-=e.height+d);a.intFyDisPos(c)};a.intFyDisPos=function(a){a&&(a.x=Math.round(a.x),a.y=Math.round(a.y))};a.showOnly=function(a,b){var d,c;c=a.length;for(d=0;d<c;d++)a[d].visible=a[d]==b};a.showOnlyByIndex=function(c,b){a.showOnly(c,c[b])};a.addOnly=function(a,b,d){var c,h;h=a.length;for(c=0;c<h;c++)a[c]!=b?a[c].removeSelf():d.addChild(a[c])};a.addOnlyByIndex=function(c,b,d){a.addOnly(c,c[b],d)};u(a,["tempP",function(){return this.tempP=new P}]);return a}();(function(){function a(){}n(a,"laya.ani.AnimationState");a.stopped=0;a.paused=1;a.playing=2;return a})();var yb=function(){function a(){this.texHeight=this.texWidth=1024;this.atlasgrid=null;this.protectDist=1;this.texture=null;this.charMaps={};this.texHeight=this.texWidth=Ba.atlasWidth;this.texture=oc.getTextTexture(this.texWidth,this.texHeight);256<this.texWidth/a.atlasGridW&&(a.atlasGridW=Math.ceil(this.texWidth/256));this.atlasgrid=new $d(this.texWidth/a.atlasGridW,this.texHeight/a.atlasGridW,this.texture.id)}n(a,"laya.webgl.text.TextAtlas");var c=a.prototype;c.setProtecteDist=function(b){this.protectDist=b};c.getAEmpty=function(b,d,c){if(b=this.atlasgrid.addRect(1,Math.ceil(b/a.atlasGridW),Math.ceil(d/a.atlasGridW),c))c.x*=a.atlasGridW,c.y*=a.atlasGridW;return b};c.destroy=function(){for(var b in this.charMaps)this.charMaps[b].deleted=!0;this.texture.discard()};c.printDebugInfo=function(){};g(0,c,"usedRate",function(){return this.atlasgrid._used});a.atlasGridW=16;return a}(),jf=function(a){function c(){this._bits=0;this._parent=null;this.name="";this.destroyed=!1;this._scene=this._activeChangeScripts=this._components=this._conchData=null;c.__super.call(this);this._extUIChild=this._children=c.ARRAY_EMPTY;this.createGLBuffer()}n(c,"laya.display.Node",a);a=c.prototype;a.createGLBuffer=function(){};a._setBit=function(b,d){16===b&&this._getBit(b)!=d&&this._updateDisplayedInstage();this._bits=d?this._bits|b:this._bits&~b};a._getBit=function(b){return 0!=(this._bits&b)};a._setUpNoticeChain=function(){this._getBit(16)&&this._setBitUp(16)};a._setBitUp=function(b){var d=this;d._setBit(b,!0);for(d=d._parent;d&&!d._getBit(b);)d._setBit(b,!0),d=d._parent};a.on=function(b,d,a,c){if("display"===b||"undisplay"===b)this._getBit(16)||this._setBitUp(16);return this._createListener(b,d,a,c,!1)};a.once=function(b,d,a,c){if("display"===b||"undisplay"===b)this._getBit(16)||this._setBitUp(16);return this._createListener(b,d,a,c,!0)};a.destroy=function(b){void 0===b&&(b=!0);this.destroyed=!0;this._destroyAllComponent();this._parent&&this._parent.removeChild(this);this._children&&(b?this.destroyChildren():this.removeChildren());this.onDestroy();this._children=null;this.offAll()};a.onDestroy=function(){};a.destroyChildren=function(){if(this._children)for(var b=0,d=this._children.length;b<d;b++)this._children[0].destroy(!0)};a.addChild=function(b){if(!b||this.destroyed||b===this)return b;b._zOrder&&this._setBit(32,!0);if(b._parent===this){var d=this.getChildIndex(b);d!==this._children.length-1&&(this._children.splice(d,1),this._children.push(b),this._childChanged())}else b._parent&&b._parent.removeChild(b),this._children===c.ARRAY_EMPTY&&(this._children=[]),this._children.push(b),b._setParent(this),this._childChanged();return b};a.addInputChild=function(b){if(this._extUIChild==c.ARRAY_EMPTY)this._extUIChild=[b];else{if(0<=this._extUIChild.indexOf(b))return null;this._extUIChild.push(b)}return null};a.removeInputChild=function(b){b=this._extUIChild.indexOf(b);0<=b&&this._extUIChild.splice(b,1)};a.addChildren=function(b){for(var d=arguments,a=0,c=d.length;a<c;)this.addChild(d[a++])};a.addChildAt=function(b,d){if(!b||this.destroyed||b===this)return b;b._zOrder&&this._setBit(32,!0);if(0<=d&&d<=this._children.length){if(b._parent===this){var a=this.getChildIndex(b);this._children.splice(a,1);this._children.splice(d,0,b);this._childChanged()}else b._parent&&b._parent.removeChild(b),this._children===c.ARRAY_EMPTY&&(this._children=[]),this._children.splice(d,0,b),b._setParent(this);return b}throw Error("appendChildAt:The index is out of bounds");};a.getChildIndex=function(b){return this._children.indexOf(b)};
a.getChildByName=function(b){var d=this._children;if(d)for(var a=0,c=d.length;a<c;a++){var f=d[a];if(f.name===b)return f}return null};a.getChildAt=function(b){return this._children[b]||null};a.setChildIndex=function(b,d){var a=this._children;if(0>d||d>=a.length)throw Error("setChildIndex:The index is out of bounds.");var c=this.getChildIndex(b);if(0>c)throw Error("setChildIndex:node is must child of this object.");a.splice(c,1);a.splice(d,0,b);this._childChanged();return b};a._childChanged=function(b){};a.removeChild=function(b){if(!this._children)return b;b=this._children.indexOf(b);return this.removeChildAt(b)};a.removeSelf=function(){this._parent&&this._parent.removeChild(this);return this};a.removeChildByName=function(b){(b=this.getChildByName(b))&&this.removeChild(b);return b};a.removeChildAt=function(b){var d=this.getChildAt(b);d&&(this._children.splice(b,1),d._setParent(null));return d};a.removeChildren=function(b,d){void 0===b&&(b=0);void 0===d&&(d=2147483647);if(this._children&&0<this._children.length){var a=this._children;0===b&&d>=a.length-1?(b=a,this._children=c.ARRAY_EMPTY):b=a.splice(b,d-b);d=0;for(a=b.length;d<a;d++)b[d]._setParent(null)}return this};a.replaceChild=function(b,d){var a=this._children.indexOf(d);return-1<a?(this._children.splice(a,1,b),d._setParent(null),b._setParent(this),b):null};a._setParent=function(b){this._parent!==b&&(b?(this._parent=b,this._onAdded(),this.event("added"),this._getBit(16)&&(this._setUpNoticeChain(),b.displayedInStage&&this._displayChild(this,!0)),b._childChanged(this)):(this._onRemoved(),this.event("removed"),this._parent._childChanged(),this._getBit(16)&&this._displayChild(this,!1),this._parent=b))};a._updateDisplayedInstage=function(){var b;b=this;for(var d=l.stage,a=!1;b;){if(b._getBit(16)){a=b._getBit(128);break}if(b===d||b._getBit(128)){a=!0;break}b=b._parent}this._setBit(128,a)};a._setDisplay=function(b){this._getBit(128)!==b&&(this._setBit(128,b),b?this.event("display"):this.event("undisplay"))};a._displayChild=function(b,d){var a=b._children;if(a)for(var c=0,f=a.length;c<f;c++){var k=a[c];k._getBit(16)&&(0<k._children.length?this._displayChild(k,d):k._setDisplay(d))}b._setDisplay(d)};a.contains=function(b){if(b===this)return!0;for(;b;){if(b._parent===this)return!0;b=b._parent}return!1};a.timerLoop=function(b,d,a,c,f,k){void 0===f&&(f=!0);void 0===k&&(k=!1);(this.scene?this.scene.timer:l.timer).loop(b,d,a,c,f,k)};a.timerOnce=function(b,d,a,c,f){void 0===f&&(f=!0);(this.scene?this.scene.timer:l.timer)._create(!1,!1,b,d,a,c,f)};a.frameLoop=function(b,d,a,c,f){void 0===f&&(f=!0);(this.scene?this.scene.timer:l.timer)._create(!0,!0,b,d,a,c,f)};a.frameOnce=function(b,d,a,c,f){void 0===f&&(f=!0);(this.scene?this.scene.timer:l.timer)._create(!0,!1,b,d,a,c,f)};a.clearTimer=function(b,d){(this.scene?this.scene.timer:l.timer).clear(b,d)};a.callLater=function(b,d){(this.scene?this.scene.timer:l.timer).callLater(this,b,d)};a.runCallLater=function(b){(this.scene?this.scene.timer:l.timer).runCallLater(this,b)};a._onActive=function(){I.spriteCount++};a._onInActive=function(){I.spriteCount--};a._onActiveInScene=function(){};a._onInActiveInScene=function(){};a._parse=function(b){};a._setBelongScene=function(b){if(!this._scene){this._scene=b;if(this._components)for(var d=0,a=this._components.length;d<a;d++)this._components[d]._setActiveInScene(!0);this._onActiveInScene();d=0;for(a=this._children.length;d<a;d++)this._children[d]._setBelongScene(b)}};a._setUnBelongScene=function(){if(this._scene!==this){this._onInActiveInScene();if(this._components)for(var b=0,d=this._components.length;b<d;b++)this._components[b]._setActiveInScene(!1);this._scene=null;b=0;for(d=this._children.length;b<d;b++)this._children[b]._setUnBelongScene()}};a.onAwake=function(){};a.onEnable=function(){};a._processActive=function(){this._activeChangeScripts||(this._activeChangeScripts=[]);this._activeHierarchy(this._activeChangeScripts);this._activeScripts()};a._activeHierarchy=function(b){this._setBit(2,!0);if(this._components)for(var d=0,a=this._components.length;d<a;d++){var c=this._components[d];c._setActive(!0);c._isScript()&&c._enabled&&b.push(c)}this._onActive();d=0;for(a=this._children.length;d<a;d++)c=this._children[d],!c._getBit(1)&&c._activeHierarchy(b);this._getBit(4)||(this._setBit(4,!0),this.onAwake());this.onEnable()};a._activeScripts=function(){for(var b=0,d=this._activeChangeScripts.length;b<d;b++)this._activeChangeScripts[b].onEnable();this._activeChangeScripts.length=0};a._processInActive=function(){this._activeChangeScripts||(this._activeChangeScripts=[]);this._inActiveHierarchy(this._activeChangeScripts);this._inActiveScripts()};a._inActiveHierarchy=function(b){this._onInActive();if(this._components)for(var d=0,a=this._components.length;d<a;d++){var c=this._components[d];c._setActive(!1);c._isScript()&&c._enabled&&b.push(c)}this._setBit(2,!1);d=0;for(a=this._children.length;d<a;d++)(c=this._children[d])&&!c._getBit(1)&&c._inActiveHierarchy(b);this.onDisable()};a._inActiveScripts=function(){for(var b=0,d=this._activeChangeScripts.length;b<d;b++)this._activeChangeScripts[b].onDisable();this._activeChangeScripts.length=0};a.onDisable=function(){};a._onAdded=function(){if(this._activeChangeScripts&&0!==this._activeChangeScripts.length)throw"Node: can't set the main inActive node active in hierarchy,if the operate is in main inActive node or it's children script's onDisable Event.";var b=this._parent.scene;b&&this._setBelongScene(b);this._parent.activeInHierarchy&&this.active&&this._processActive()};a._onRemoved=function(){if(this._activeChangeScripts&&0!==this._activeChangeScripts.length)throw"Node: can't set the main active node inActive in hierarchy,if the operate is in main active node or it's children script's onEnable Event.";this._parent.activeInHierarchy&&this.active&&this._processInActive();this._parent.scene&&this._setUnBelongScene()};a._addComponentInstance=function(b){this._components=this._components||[];this._components.push(b);b.owner=this;b._onAdded();this.activeInHierarchy&&(b._setActive(!0),b._isScript()&&b._enabled&&b.onEnable());this._scene&&b._setActiveInScene(!0)};a._destroyComponent=function(b){if(this._components)for(var d=0,a=this._components.length;d<a;d++){var c=this._components[d];if(c===b){c._destroy();this._components.splice(d,1);break}}};a._destroyAllComponent=function(){if(this._components){for(var b=0,d=this._components.length;b<d;b++)this._components[b]._destroy();this._components.length=0}};a._cloneTo=function(b){if(this._components)for(var d=0,a=this._components.length;d<a;d++){var c=b.addComponent(this._components[d].constructor);this._components[d]._cloneTo(c)}};a.addComponentIntance=function(b){if(b.owner)throw"Node:the component has belong to other node.";if(b.isSingleton&&this.getComponent(b.constructor))throw"Node:the component is singleton,can't add the second one.";this._addComponentInstance(b);return b};a.addComponent=function(b){var d=v.createByClass(b);d._destroyed=!1;if(d.isSingleton&&this.getComponent(b))throw"\u65e0\u6cd5\u5b9e\u4f8b"+b+"\u7ec4\u4ef6\uff0c"+b+"\u7ec4\u4ef6\u5df2\u5b58\u5728\uff01";this._addComponentInstance(d);return d};a.getComponent=function(b){if(this._components)for(var d=0,a=this._components.length;d<a;d++){var c=this._components[d];if(l.__typeof(c,b))return c}return null};a.getComponents=function(b){var d;if(this._components)for(var a=0,c=this._components.length;a<c;a++){var f=this._components[a];l.__typeof(f,b)&&(d=d||[],d.push(f))}return d};g(0,a,"numChildren",function(){return this._children.length});g(0,a,"parent",function(){return this._parent});g(0,a,"activeInHierarchy",function(){return this._getBit(2)});g(0,a,"active",function(){return!this._getBit(8)&&!this._getBit(1)},function(b){b=!!b;if(!this._getBit(1)!==b){if(this._activeChangeScripts&&0!==this._activeChangeScripts.length){if(b)throw"Node: can't set the main inActive node active in hierarchy,if the operate is in main inActive node or it's children script's onDisable Event.";throw"Node: can't set the main active node inActive in hierarchy,if the operate is in main active node or it's children script's onEnable Event.";}this._setBit(1,!b);this._parent&&this._parent.activeInHierarchy&&(b?this._processActive():this._processInActive())}});g(0,a,"displayedInStage",function(){if(this._getBit(16))return this._getBit(128);this._setBitUp(16);return this._getBit(128)});g(0,a,"scene",function(){return this._scene});g(0,a,"timer",function(){return this.scene?this.scene.timer:l.timer});c.ARRAY_EMPTY=[];return c}(ka),cb=function(a){function c(){this._id=0;this._url=null;this._gpuMemory=this._cpuMemory=0;this._destroyed=!1;this._referenceCount=0;this.lock=!1;this.name=null;c.__super.call(this);this._id=++c._uniqueIDCounter;this._destroyed=!1;this._referenceCount=0;c._idResourcesMap[this.id]=this;this.lock=!1}n(c,"laya.resource.Resource",a);a=c.prototype;l.imps(a,{"laya.resource.ICreateResource":!0,"laya.resource.IDestroy":!0});a._setCPUMemory=function(b){var d=b-this._cpuMemory;this._cpuMemory=b;c._addCPUMemory(d)};a._setGPUMemory=function(b){var d=b-this._gpuMemory;this._gpuMemory=b;c._addGPUMemory(d)};a._setCreateURL=function(b){b=D.formatURL(b);if(this._url!==b){var d;this._url&&(d=c._urlResourcesMap[this._url],d.splice(d.indexOf(this),1),0===d.length&&delete c._urlResourcesMap[this._url]);b&&((d=c._urlResourcesMap[b])||(c._urlResourcesMap[b]=d=[]),d.push(this));this._url=b}};a._addReference=function(b){void 0===b&&(b=1);this._referenceCount+=b};a._removeReference=function(b){void 0===b&&(b=1);this._referenceCount-=b};a._clearReference=function(){this._referenceCount=0};a._recoverResource=function(){};a._disposeResource=function(){};a._activeResource=function(){};a.destroy=function(){if(!this._destroyed){this._destroyed=!0;this.lock=!1;this._disposeResource();delete c._idResourcesMap[this.id];var b;if(this._url){if(b=c._urlResourcesMap[this._url])b.splice(b.indexOf(this),1),0===b.length&&delete c._urlResourcesMap[this._url];x.getRes(this._url)==this&&delete x.loadedMap[this._url]}}};g(0,a,"id",function(){return this._id});g(0,a,"gpuMemory",function(){return this._gpuMemory});g(0,a,"url",function(){return this._url});g(0,a,"cpuMemory",function(){return this._cpuMemory});g(0,a,"destroyed",function(){return this._destroyed});g(0,a,"referenceCount",function(){return this._referenceCount});g(1,c,"cpuMemory",function(){return this._cpuMemory},laya.events.EventDispatcher._$SET_cpuMemory);g(1,c,"gpuMemory",function(){return this._gpuMemory},laya.events.EventDispatcher._$SET_gpuMemory);c._addCPUMemory=function(b){this._cpuMemory+=b};c._addGPUMemory=function(b){this._gpuMemory+=b};c._addMemory=function(b,d){this._cpuMemory+=b;this._gpuMemory+=d};c.getResourceByID=function(b){return c._idResourcesMap[b]};c.getResourceByURL=function(b,d){void 0===d&&(d=0);return c._urlResourcesMap[b][d]};c.destroyUnusedResources=function(){for(var b in c._idResourcesMap){var d=c._idResourcesMap[b];d.lock||0!==d._referenceCount||d.destroy()}};c._uniqueIDCounter=0;c._idResourcesMap={};c._urlResourcesMap={};c._cpuMemory=0;c._gpuMemory=0;return c}(ka),kf=function(a){function c(){this.worker=null;this._useWorkerLoader=!1;c.__super.call(this);var b=this;this.worker=new q.window.Worker(c.workerPath);this.worker.onmessage=function(d){b.workerMessage(d.data)}}n(c,"laya.net.WorkerLoader",a);a=c.prototype;a.workerMessage=function(b){if(b)switch(b.type){case "Image":this.imageLoaded(b);break;case "Disable":c.enable=!1}};a.imageLoaded=function(b){if(b.dataType&&"imageBitmap"==b.dataType){var d=new xa(!0),a=d.source.getContext("2d");switch(b.dataType){case "imageBitmap":var c=b.imageBitmap;d.size(c.width,c.height);a.drawImage(c,0,0)}console.log("load:",b.url);r.isWebGL&&(d._setGPUMemory(0),a=new laya.webgl.resource.Texture2D,a.loadImageSource(d),d=a);this.event(b.url,d)}else this.event(b.url,null)};a.loadImage=function(b){this.worker.postMessage(b)};a._loadImage=function(b){var d=this;if(this._useWorkerLoader&&c._enable){b=D.formatURL(b);var a=function(e){laya.net.WorkerLoader.I.off(b,d,a);if(e)d.onLoaded(e);else c._preLoadFun.call(d,b)};laya.net.WorkerLoader.I.on(b,d,a);laya.net.WorkerLoader.I.loadImage(b)}else c._preLoadFun.call(d,b)};g(1,c,"enable",function(){return c._enable},function(b){c._enable!=b&&(c._enable=b)&&null==c._preLoadFun&&(c._enable=c.__init__())});c.__init__=function(){if(null!=c._preLoadFun||!q.window.Worker)return!1;c._preLoadFun=x.prototype._loadImage;x.prototype._loadImage=c.prototype._loadImage;c.I||(c.I=new c);return!0};c.workerSupported=function(){return q.window.Worker?!0:!1};c.enableWorkerLoader=function(){c._tryEnabled||(c.enable=!0,c._tryEnabled=!0)};c.I=null;c.workerPath="libs/workerloader.js";c._preLoadFun=null;c._enable=!1;c._tryEnabled=!1;return c}(ka),id=function(a){function c(){this.totalCount=0;this._toLoadList=this._completeHandler=null;this._isLoading=!1;this._curUrl=null;c.__super.call(this);this._completeHandler=new B(this,this.onOneLoadComplete);this.reset()}n(c,"laya.net.SceneLoader",a);a=c.prototype;a.reset=function(){this._toLoadList=[];this._isLoading=!1;this.totalCount=0};a.load=function(b,d,a){void 0===d&&(d=!1);void 0===a&&(a=!0);if(b instanceof Array){var c,e;e=b.length;for(c=0;c<e;c++)this._addToLoadList(b[c],d)}else this._addToLoadList(b,d);a&&this._checkNext()};a._addToLoadList=function(b,d){void 0===d&&(d=!1);0<=this._toLoadList.indexOf(b)||x.getRes(b)||(d?this._toLoadList.push({url:b}):this._toLoadList.push(b),this.totalCount++)};a._checkNext=function(){if(!this._isLoading)if(0==this._toLoadList.length)this.event("complete");else{var b;b=this._toLoadList.pop();"string"==typeof b?this.loadOne(b):this.loadOne(b.url,!0)}};a.loadOne=function(b,d){void 0===d&&(d=!1);this._curUrl=b;var a=U.getFileExtension(this._curUrl);d?l.loader.create(b,this._completeHandler):c.LoadableExtensions[a]?l.loader.load(b,this._completeHandler,null,c.LoadableExtensions[a]):b!=Oc.getFileLoadPath(b)||c.No3dLoadTypes[a]||!La.createMap[a]?l.loader.load(b,this._completeHandler):l.loader.create(b,this._completeHandler)};a.onOneLoadComplete=function(){this._isLoading=!1;x.getRes(this._curUrl)||console.log("Fail to load:",this._curUrl);var b=U.getFileExtension(this._curUrl);if(c.LoadableExtensions[b]){var d;(d=x.getRes(this._curUrl))&&d instanceof laya.components.Prefab&&(d=d.json);d&&(d.loadList&&this.load(d.loadList,!1,!1),d.loadList3D&&this.load(d.loadList3D,!0,!1))}"sk"==b&&this.load(this._curUrl.replace(".sk",".png"),!1,!1);this.event("progress",this.getProgress());this._checkNext()};a.getProgress=function(){return this.loadedCount/this.totalCount};g(0,a,"loadedCount",function(){return this.totalCount-this.leftCount});g(0,a,"leftCount",function(){return this._isLoading?this._toLoadList.length+1:this._toLoadList.length});u(c,["LoadableExtensions",function(){return this.LoadableExtensions={scene:"json",scene3d:"json",ani:"json",ui:"json",prefab:"prefab"}},"No3dLoadTypes",function(){return this.No3dLoadTypes={png:!0,jpg:!0,txt:!0}}]);return c}(ka);(function(a){function c(){c.__super.call(this)}n(c,"laya.ui.UIEvent",a);c.SHOW_TIP="showtip";c.HIDE_TIP="hidetip";c.ROLOPROMP="ROLOPROMP";return c})(Ya);var x=function(a){function c(){this._type=this._url=this._data=null;this._cache=!1;this._http=null;this._customParse=this._useWorkerLoader=!1;this._propertyParams=this._constructParams=null;this._createCache=!1;c.__super.call(this)}n(c,"laya.net.Loader",a);a=c.prototype;a.load=function(b,d,a,h,f,k){void 0===a&&(a=!0);void 0===f&&(f=!1);void 0===k&&(k=!1);if(b)if(c.setGroup(b,"666"),this._url=b,0===b.indexOf("data:image")?d="image":b=D.formatURL(b),this._type=d||(d=c.getTypeFromUrl(this._url)),this._cache=a,this._useWorkerLoader=k,this._data=null,k&&kf.enableWorkerLoader(),!f&&c.loadedMap[b])this._data=c.loadedMap[b],this.event("progress",1),this.event("complete",this._data);else if(h&&c.setGroup(b,h),null!=c.parserMap[d])this._customParse=!0,c.parserMap[d]instanceof laya.utils.Handler?c.parserMap[d].runWith(this):c.parserMap[d].call(null,this);else{if("image"===d||"htmlimage"===d||"nativeimage"===d)return this._loadImage(b);if("sound"===d)return this._loadSound(b);if("ttf"===d)return this._loadTTF(b);switch(d){case "atlas":case "prefab":case "plf":d="json";break;case "font":d="xml";break;case "plfb":d="arraybuffer"}if(c.preLoadedMap[b])this.onLoaded(c.preLoadedMap[b]);else this._http||(this._http=new Wb,this._http.on("progress",this,this.onProgress),this._http.on("error",this,this.onError),this._http.on("complete",this,this.onLoaded)),this._http.send(b,null,"get",d)}else this.onLoaded(null)};a._loadTTF=function(b){b=D.formatURL(b);var d=new Zd;d.complete=B.create(this,this.onLoaded);d.load(b)};a._loadImage=function(b){function d(){var d=h;d&&(d.onload=null,d.onerror=null,delete c._imgCache[b])}b=D.formatURL(b);var a=this,h,f=function(){d();a.event("error","Load image failed")};if("nativeimage"===this._type){var k=function(){d();a.onLoaded(h)};h=new q.window.Image;h.crossOrigin="";h.onload=k;h.onerror=f;h.src=b;c._imgCache[b]=h}else{var m=U.getFileExtension(b);if("ktx"===m||"pvr"===m){var k=function(c){var e=0;switch(m){case "ktx":e=5;break;case "pvr":e=12}h=qb.create(0,0,e);h.setCompressData(c);h._setCreateURL(b);d();a.onLoaded(h)},p;p=new Wb;p.on("error",null,f);p.on("complete",null,k);p.send(b,null,"get","arraybuffer")}else{var g=new q.window.Image;g.crossOrigin="";g.onload=function(){h=qb.create(g.width,g.height,1);h.loadImageSource(g,!0);h._setCreateURL(b);d();a.onLoaded(h)};g.onerror=f;g.src=b;h=g;c._imgCache[b]=g}}};a._loadSound=function(b){var d=new X._soundClass,a=this;d.on("complete",this,function(){d.offAll();a.onLoaded(d)});d.on("error",this,function(){d.offAll();d.dispose();a.event("error","Load sound failed")});d.load(b)};a.onProgress=function(b){"atlas"===this._type?this.event("progress",.3*b):this.event("progress",b)};a.onError=function(b){this.event("error",b)};a.onLoaded=function(b){var d=this._type;if("plfb"==d)this.parsePLFBData(b),this.complete(b);else if("plf"==d)this.parsePLFData(b),this.complete(b);else if("image"===d){var a=new ga(b);a.url=this._url;this.complete(a)}else if("sound"===d||"htmlimage"===d||"nativeimage"===d)this.complete(b);else if("atlas"===d)if(b.url||b._setContext){this._data.pics.push(b);if(0<this._data.toLoads.length)return this.event("progress",.3+1/this._data.toLoads.length*.6),this._loadImage(this._data.toLoads.pop());b=this._data.frames;var h=this._url.split("?")[0],h=this._data.meta&&this._data.meta.prefix?this._data.meta.prefix:h.substring(0,h.lastIndexOf("."))+"/",f=this._data.pics,d=D.formatURL(this._url),d=c.atlasMap[d]||(c.atlasMap[d]=[]);d.dir=h;var k;if(this._data.meta&&this._data.meta.scale&&1!=this._data.meta.scale)for(a in k=parseFloat(this._data.meta.scale),b){var m=b[a],p=f[m.frame.idx?m.frame.idx:0],g=D.formatURL(h+a);p.scaleRate=k;m=ga._create(p,m.frame.x,m.frame.y,m.frame.w,m.frame.h,m.spriteSourceSize.x,m.spriteSourceSize.y,m.sourceSize.w,m.sourceSize.h,laya.net.Loader.getRes(g));c.cacheRes(g,m);m.url=g;d.push(g)}else for(a in b)m=b[a],p=f[m.frame.idx?m.frame.idx:0],g=D.formatURL(h+a),m=ga._create(p,m.frame.x,m.frame.y,m.frame.w,m.frame.h,m.spriteSourceSize.x,m.spriteSourceSize.y,m.sourceSize.w,m.sourceSize.h,laya.net.Loader.getRes(g)),c.cacheRes(g,m),m.url=g,d.push(g);delete this._data.pics;this.complete(this._data)}else{if(!this._data){this._data=b;if(b.meta&&b.meta.image)for(h=b.meta.image.split(","),a=0<=this._url.indexOf("/")?"/":"\\",a=this._url.lastIndexOf(a),a=0<=a?this._url.substr(0,a+1):"",q.onAndroid&&b.meta.compressTextureAndroid&&(f=".ktx"),q.onIOS&&b.meta.compressTextureIOS&&(f=".pvr"),d=0,k=h.length;d<k;d++)h[d]=f?a+h[d].replace(".png",f):a+h[d];else h=[this._url.replace(".json",".png")];h.reverse();b.toLoads=h;b.pics=[]}this.event("progress",.3+1/h.length*.6);return this._loadImage(h.pop())}else if("font"===d)if(b._source)a=new hf,a.parseFont(this._data,new ga(b)),b=this._url.split(".fnt")[0].split("/"),W.registerBitmapFont(b[b.length-1],a),this._data=a,this.complete(this._data);else return this._data=b,this.event("progress",.5),this._loadImage(this._url.replace(".fnt",".png"));else"prefab"===d?(a=new df,a.json=b,this.complete(a)):this.complete(b)};a.parsePLFData=function(b){var d,a,h;for(d in b)switch(h=b[d],d){case "json":case "text":for(a in h)c.preLoadedMap[D.formatURL(a)]=h[a];break;default:for(a in h)c.preLoadedMap[D.formatURL(a)]=h[a]}};a.parsePLFBData=function(b){b=new Sa(b);var d,a;a=b.getInt32();for(d=0;d<a;d++)this.parseOnePLFBFile(b)};a.parseOnePLFBFile=function(b){var d,a;a=b.getUTFString();d=b.getInt32();b=b.readArrayBuffer(d);c.preLoadedMap[D.formatURL(a)]=b};a.complete=function(b){this._data=b;this._customParse?this.event("loaded",b instanceof Array?[b]:b):(c._loaders.push(this),c._isWorking||c.checkNext())};a.endLoad=function(b){b&&(this._data=b);this._cache&&c.cacheRes(this._url,this._data);this.event("progress",1);this.event("complete",this.data instanceof Array?[this.data]:this.data)};g(0,a,"url",function(){return this._url});g(0,a,"data",function(){return this._data});g(0,a,"cache",function(){return this._cache});g(0,a,"type",function(){return this._type});c.getTypeFromUrl=function(b){var d=U.getFileExtension(b);if(d)return c.typeMap[d];console.warn("Not recognize the resources suffix",b);return"text"};c.checkNext=function(){c._isWorking=!0;for(var b=q.now();c._startIndex<c._loaders.length;)if(q.now(),c._loaders[c._startIndex].endLoad(),c._startIndex++,q.now()-b>c.maxTimeOut){console.warn("loader callback cost a long time:"+(q.now()-b)+" url\x3d"+c._loaders[c._startIndex-1].url);l.systemTimer.frameOnce(1,null,c.checkNext);return}c._loaders.length=0;c._startIndex=0;c._isWorking=!1};c.clearRes=function(b){b=D.formatURL(b);var d=c.getAtlas(b);if(d){for(var a=0,h=d.length;a<h;a++){var f=d[a],k=c.getRes(f);delete c.loadedMap[f];k&&k.destroy()}d.length=0;delete c.atlasMap[b];delete c.loadedMap[b]}else if(d=c.loadedMap[b])delete c.loadedMap[b],d instanceof laya.resource.Texture&&d.bitmap&&d.destroy()};c.clearTextureRes=function(b){b=D.formatURL(b);var d=laya.net.Loader.getAtlas(b);b=d&&0<d.length?laya.net.Loader.getRes(d[0]):laya.net.Loader.getRes(b);b instanceof laya.resource.Texture&&b.disposeBitmap()};c.getRes=function(b){return c.loadedMap[D.formatURL(b)]};c.getAtlas=function(b){return c.atlasMap[D.formatURL(b)]};c.cacheRes=function(b,d){b=D.formatURL(b);null!=c.loadedMap[b]?console.warn("Resources already exist,is repeated loading:",b):c.loadedMap[b]=d};c.setGroup=function(b,d){c.groupMap[d]||(c.groupMap[d]=[]);c.groupMap[d].push(b)};c.clearResByGroup=function(b){if(c.groupMap[b]){b=c.groupMap[b];var d,a=b.length;for(d=0;d<a;d++)c.clearRes(b[d]);b.length=0}};c.TEXT="text";c.JSON="json";c.PREFAB="prefab";c.XML="xml";c.BUFFER="arraybuffer";c.IMAGE="image";c.SOUND="sound";c.ATLAS="atlas";c.FONT="font";c.TTF="ttf";c.PLF="plf";c.PLFB="plfb";c.HIERARCHY="HIERARCHY";c.MESH="MESH";c.MATERIAL="MATERIAL";c.TEXTURE2D="TEXTURE2D";c.TEXTURECUBE="TEXTURECUBE";c.ANIMATIONCLIP="ANIMATIONCLIP";c.AVATAR="AVATAR";c.TERRAINHEIGHTDATA="TERRAINHEIGHTDATA";c.TERRAINRES="TERRAIN";c.typeMap={ttf:"ttf",png:"image",jpg:"image",jpeg:"image",ktx:"image",pvr:"image",txt:"text",json:"json",prefab:"prefab",xml:"xml",als:"atlas",atlas:"atlas",mp3:"sound",ogg:"sound",wav:"sound",part:"json",fnt:"font",plf:"plf",plfb:"plfb",scene:"json",ani:"json",sk:"arraybuffer"};c.parserMap={};c.maxTimeOut=100;c.groupMap={};c.loadedMap={};c.atlasMap={};c.preLoadedMap={};c._imgCache={};c._loaders=[];c._isWorking=!1;c._startIndex=0;return c}(ka),bd=function(a){function c(){c.__super.call(this)}n(c,"laya.debug.tools.Notice",a);c.notify=function(b,d){c.I.event(b,d)};c.listen=function(b,d,a,h,f){void 0===f&&(f=!1);f&&c.cancel(b,d,a);c.I.on(b,d,a,h)};c.cancel=function(b,d,a){c.I.off(b,d,a)};u(c,["I",function(){return this.I=new c}]);return c}(ka);(function(a){function c(b,d,a,h,f){this._socket=this._endian=null;this._connected=!1;this._addInputPosition=0;this._output=this._input=null;this.disableInput=!1;this._byteClass=null;this.protocols=[];c.__super.call(this);void 0===d&&(d=0);void 0===f&&(f=!0);this._byteClass=a?a:Sa;this.protocols=h;this.endian="bigEndian";b&&0<d&&65535>d&&this.connect(b,d,f)}n(c,"laya.net.Socket",a);a=c.prototype;a.connect=function(b,d,a){void 0===a&&(a=!0);b=(a?"wss://":"ws://")+b+":"+d;console.log("Scoket Url:"+b);this.connectByUrl(b)};a.connectByUrl=function(b){var d=this;null!=this._socket&&this.close();this._socket&&this.cleanSocket();this._socket=this.protocols&&0!=this.protocols.length?new q.window.WebSocket(b,this.protocols):new q.window.WebSocket(b);this._socket.binaryType="arraybuffer";this._output=new this._byteClass;this._output.endian=this.endian;this._input=new this._byteClass;this._input.endian=this.endian;this._addInputPosition=0;this._socket.onopen=function(b){d._onOpen(b)};this._socket.onmessage=function(b){d._onMessage(b)};this._socket.onclose=function(b){d._onClose(b)};this._socket.onerror=function(b){d._onError(b)}};a.cleanSocket=function(){this.close();this._connected=!1;this._socket.onopen=null;this._socket.onmessage=null;this._socket.onclose=null;this._socket=this._socket.onerror=null};a.close=function(){if(null!=this._socket)try{this._socket.close()}catch(b){}};a._onOpen=function(b){this._connected=!0;this.event("open",b)};a._onMessage=function(b){if(b&&b.data){b=b.data;if(!this.disableInput||!b){0<this._input.length&&1>this._input.bytesAvailable&&(this._input.clear(),this._addInputPosition=0);var d=this._input.pos;!this._addInputPosition&&(this._addInputPosition=0);this._input.pos=this._addInputPosition;b&&("string"==typeof b?this._input.writeUTFBytes(b):this._input.writeArrayBuffer(b),this._addInputPosition=this._input.pos,this._input.pos=d)}this.event("message",b)}};a._onClose=function(b){this._connected=!1;this.event("close",b)};a._onError=function(b){this.event("error",b)};a.send=function(b){this._socket.send(b)};a.flush=function(){if(this._output&&0<this._output.length){var b;try{this._socket&&this._socket.send(this._output.__getBuffer().slice(0,this._output.length))}catch(d){b=d}this._output.endian=this.endian;this._output.clear();b&&this.event("error",b)}};g(0,a,"input",function(){return this._input});g(0,a,"output",function(){return this._output});g(0,a,"connected",function(){return this._connected});g(0,a,"endian",function(){return this._endian},function(b){this._endian=b;null!=this._input&&(this._input.endian=b);null!=this._output&&(this._output.endian=b)});c.LITTLE_ENDIAN="littleEndian";c.BIG_ENDIAN="bigEndian";return c})(ka);var xb=function(a){function c(){this.audio=this.url=null;this.loaded=!1;c.__super.call(this)}n(c,"laya.media.h5audio.AudioSound",a);a=c.prototype;a.dispose=function(){var b=c._audioCache[this.url];v.clearBySign("audio:"+this.url);b&&(r.isConchApp||(b.src=""),delete c._audioCache[this.url])};a.load=function(b){function d(){h();k.loaded=!0;k.event("complete")}function a(){f.load=null;h();k.event("error")}function h(){f.removeEventListener("canplaythrough",d);f.removeEventListener("error",a)}this.url=b=D.formatURL(b);var f;b==X._bgMusic?(c._initMusicAudio(),f=c._musicAudio,f.src!=b&&(f=c._audioCache[f.src]=null)):f=c._audioCache[b];if(f&&2<=f.readyState)this.event("complete");else{f||(b==X._bgMusic?(c._initMusicAudio(),f=c._musicAudio):f=q.createElement("audio"),c._audioCache[b]=f,f.src=b);f.addEventListener("canplaythrough",d);f.addEventListener("error",a);var k=this;this.audio=f;f.load?f.load():a()}};a.play=function(b,d){void 0===b&&(b=0);void 0===d&&(d=0);if(!this.url)return null;var a;a=this.url==X._bgMusic?c._musicAudio:c._audioCache[this.url];if(!a)return null;var h;h=v.getItem("audio:"+this.url);r.isConchApp?h||(h=q.createElement("audio"),h.src=this.url):this.url==X._bgMusic?(c._initMusicAudio(),h=c._musicAudio,h.src=this.url):h=h?h:a.cloneNode(!0);a=new lf(h);a.url=this.url;a.loops=d;a.startTime=b;a.play();X.addChannel(a);return a};g(0,a,"duration",function(){var b;return(b=c._audioCache[this.url])?b.duration:0});c._initMusicAudio=function(){c._musicAudio||(c._musicAudio||(c._musicAudio=q.createElement("audio")),r.isConchApp||q.document.addEventListener("mousedown",c._makeMusicOK))};c._makeMusicOK=function(){q.document.removeEventListener("mousedown",c._makeMusicOK);c._musicAudio.src?c._musicAudio.play():(c._musicAudio.src="",c._musicAudio.load())};c._audioCache={};c._musicAudio=null;return c}(ka),ga=function(a){function c(b,d,a,h){this.uvrect=[0,0,1,1];this._h=this._w=0;this._destroyed=!1;this.sourceHeight=this.sourceWidth=this.offsetY=this.offsetX=this.$_GID=this._referenceCount=0;this.url=null;this.scaleRate=1;c.__super.call(this);void 0===a&&(a=0);void 0===h&&(h=0);this.setTo(b,d,a,h)}n(c,"laya.resource.Texture",a);a=c.prototype;a._addReference=function(){this._bitmap&&this._bitmap._addReference();this._referenceCount++};a._removeReference=function(){this._bitmap&&this._bitmap._removeReference();this._referenceCount--};a._getSource=function(){if(this._destroyed||!this._bitmap)return null;this.recoverBitmap();return this._bitmap.destroyed?null:this.bitmap._getSource()};a._onLoaded=function(b,d){d&&d!=this&&(d instanceof laya.resource.Texture?c._create(d,0,0,d.width,d.height,0,0,d.sourceWidth,d.sourceHeight,this):(this.bitmap=d,this.sourceWidth=this._w=d.width,this.sourceHeight=this._h=d.height));b&&b.run();this.event("ready",this)};a.getIsReady=function(){return this._destroyed?!1:this._bitmap?!0:!1};a.setTo=function(b,d,a,h){void 0===a&&(a=0);void 0===h&&(h=0);this.bitmap=b;this.sourceWidth=a;this.sourceHeight=h;b&&(this._w=b.width,this._h=b.height,this.sourceWidth=this.sourceWidth||this._w,this.sourceHeight=this.sourceHeight||this._h);this.uv=d||c.DEF_UV};a.load=function(a,d){this._destroyed||l.loader.load(a,B.create(this,this._onLoaded,[d]),null,"htmlimage",1,!1,null,!0)};a.getPixels=function(a,d,c,h){if(r.isWebGL)return fa.getTexturePixels(this,a,d,c,h);if(r.isConchApp)return this._nativeObj.getImageData(a,d,c,h);var b=this.width,e=this.height;a+c>b&&(c-=a+c-b);d+h>e&&(h-=d+h-e);if(0>=c||0>=h)return null;q.canvas.size(c,h);q.canvas.clear();q.context.drawImage(this.bitmap._source,a,d,c,h,0,0,c,h);return q.context.getImageData(0,0,c,h).data};a.recoverBitmap=function(){var a=this,d=this._bitmap.url;this._destroyed||this._bitmap&&!this._bitmap.destroyed||!d||l.loader.load(d,B.create(this,function(d){a.bitmap=d}),null,"htmlimage",1,!1,null,!0);this.alphaMask&&this.alphaMask.recoverBitmap()};a.disposeBitmap=function(){!this._destroyed&&this._bitmap&&(this._bitmap.destroy(),this.alphaMask&&this.alphaMask.disposeBitmap())};a.destroy=function(a){void 0===a&&(a=!1);if(!this._destroyed){this._destroyed=!0;var d=this._bitmap;d&&(d._removeReference(this._referenceCount),(0===d.referenceCount||a)&&d.destroy());this.url&&this===l.loader.getRes(this.url)&&l.loader.clearRes(this.url);this.alphaMask&&this.alphaMask.destroy(a)}};g(0,a,"height",function(){return this._h?this._h:this.bitmap?this.uv&&this.uv!==c.DEF_UV?(this.uv[5]-this.uv[1])*this.bitmap.height:this.bitmap.height:0},function(a){this._h=a;this.sourceHeight||(this.sourceHeight=a)});g(0,a,"uv",function(){return this._uv},function(a){this.uvrect[0]=Math.min(a[0],a[2],a[4],a[6]);this.uvrect[1]=Math.min(a[1],a[3],a[5],a[7]);this.uvrect[2]=Math.max(a[0],a[2],a[4],a[6])-this.uvrect[0];this.uvrect[3]=Math.max(a[1],a[3],a[5],a[7])-this.uvrect[1];this._uv=a});g(0,a,"width",function(){return this._w?this._w:this.bitmap?this.uv&&this.uv!==c.DEF_UV?(this.uv[2]-this.uv[0])*this.bitmap.width:this.bitmap.width:0},function(a){this._w=a;this.sourceWidth||(this.sourceWidth=a)});g(0,a,"bitmap",function(){return this._bitmap},function(a){this._bitmap&&this._bitmap._removeReference(this._referenceCount);(this._bitmap=a)&&a._addReference(this._referenceCount)});g(0,a,"destroyed",function(){return this._destroyed});c.moveUV=function(a,d,c){for(var b=0;8>b;b+=2)c[b]+=a,c[b+1]+=d;return c};c.create=function(a,d,e,h,f,k,m,p,g){void 0===k&&(k=0);void 0===m&&(m=0);void 0===p&&(p=0);void 0===g&&(g=0);return c._create(a,d,e,h,f,k,m,p,g)};c._create=function(a,d,e,h,f,k,m,p,g,l){void 0===k&&(k=0);void 0===m&&(m=0);void 0===p&&(p=0);void 0===g&&(g=0);var b=a instanceof laya.resource.Texture,t=b?a.uv:c.DEF_UV;a=b?a.bitmap:a;a.width&&d+h>a.width&&(h=a.width-d);a.height&&e+f>a.height&&(f=a.height-e);l?l.setTo(a,null,p||h,g||f):l=new c(a,null,p||h,g||f);l.width=h;l.height=f;l.offsetX=k;l.offsetY=m;k=1/a.width;m=1/a.height;d*=k;e*=m;h*=k;f*=m;k=l.uv[0];m=l.uv[1];p=l.uv[4];g=l.uv[5];var b=p-k,n=g-m;d=c.moveUV(t[0],t[1],[d,e,d+h,e,d+h,e+f,d,e+f]);l.uv=new Float32Array([k+d[0]*b,m+d[1]*n,p-(1-d[2])*b,m+d[3]*n,p-(1-d[4])*b,g-(1-d[5])*n,k+d[6]*b,g-(1-d[7])*n]);(d=a.scaleRate)&&1!=d?(l.sourceWidth/=d,l.sourceHeight/=d,l.width/=d,l.height/=d,l.scaleRate=d):l.scaleRate=1;return l};c.createFromTexture=function(a,d,e,h,f){var b=a.scaleRate;1!=b&&(d*=b,e*=b,h*=b,f*=b);d=M.TEMP.setTo(d-a.offsetX,e-a.offsetY,h,f);if(e=d.intersection(c._rect1.setTo(0,0,a.width,a.height),c._rect2))a=c.create(a,e.x,e.y,e.width,e.height,e.x-d.x,e.y-d.y,h,f);else return null;return a};c.DEF_UV=new Float32Array([0,0,1,0,1,1,0,1]);c.NO_UV=new Float32Array([0,0,0,0,0,0,0,0]);c.INV_UV=new Float32Array([0,1,1,1,1,0,0,0]);c._rect1=new M;c._rect2=new M;return c}(ka),rc=function(a){function c(){this.url=null;this.loops=0;this.startTime=NaN;this.isStopped=!1;this.completeHandler=null;c.__super.call(this)}n(c,"laya.media.SoundChannel",a);a=c.prototype;a.play=function(){};a.stop=function(){this.completeHandler&&this.completeHandler.run();this.completeHandler=null};a.pause=function(){};a.resume=function(){};a.__runComplete=function(a){a&&a.run()};g(0,a,"volume",function(){return 1},function(a){});g(0,a,"position",function(){return 0});g(0,a,"duration",function(){return 0});return c}(ka);(function(a){function c(d){c.__super.call(this);this.onDeviceOrientationChange=this.onDeviceOrientationChange.bind(this)}n(c,"laya.device.motion.Gyroscope",a);var b=c.prototype;b.on=function(d,b,c,f){a.prototype.on.call(this,d,b,c,f);q.window.addEventListener("deviceorientation",this.onDeviceOrientationChange);return this};b.off=function(d,b,c,f){void 0===f&&(f=!1);this.hasListener(d)||q.window.removeEventListener("deviceorientation",this.onDeviceOrientationChange);return a.prototype.off.call(this,d,b,c,f)};b.onDeviceOrientationChange=function(d){c.info.alpha=d.alpha;c.info.beta=d.beta;c.info.gamma=d.gamma;d.webkitCompassHeading&&(c.info.alpha=-1*d.webkitCompassHeading,c.info.compassAccuracy=d.webkitCompassAccuracy);this.event("change",[d.absolute,c.info])};g(1,c,"instance",function(){c._instance=c._instance||new c(0);return c._instance},laya.events.EventDispatcher._$SET_instance);c._instance=null;u(c,["info",function(){return this.info=new Xe}]);return c})(ka);var mf=function(a){function c(){this._labelDic=null;this._tweenDic={};this._tweenDataList=[];this._endTweenDataList=null;this._gidIndex=this._index=this._startTime=this._lastTime=this._currTime=0;this._firstTweenDic={};this._loopKey=this._endTimeSort=this._startTimeSort=!1;this.scale=1;this._frameRate=60;this._total=this._frameIndex=0;c.__super.call(this)}var b;n(c,"laya.utils.TimeLine",a);a=c.prototype;a.to=function(d,a,b,c,k){void 0===k&&(k=0);return this._create(d,a,b,c,k,!0)};a.from=function(d,a,b,c,k){void 0===k&&(k=0);return this._create(d,a,b,c,k,!1)};a._create=function(d,a,c,f,k,m){var e=v.getItemByClass("tweenData",b);e.isTo=m;e.type=0;e.target=d;e.duration=c;e.data=a;e.startTime=this._startTime+k;e.endTime=e.startTime+e.duration;e.ease=f;this._startTime=Math.max(e.endTime,this._startTime);this._tweenDataList.push(e);this._endTimeSort=this._startTimeSort=!0;return this};a.addLabel=function(d,a){var c=v.getItemByClass("tweenData",b);c.type=1;c.data=d;c.endTime=c.startTime=this._startTime+a;this._labelDic||(this._labelDic={});this._labelDic[d]=c;this._tweenDataList.push(c);return this};a.removeLabel=function(d){if(this._labelDic&&this._labelDic[d]){var a=this._labelDic[d];a&&(a=this._tweenDataList.indexOf(a),-1<a&&this._tweenDataList.splice(a,1));delete this._labelDic[d]}};a.gotoTime=function(d){if(null!=this._tweenDataList&&0!=this._tweenDataList.length){var a,b,c;for(c in this._firstTweenDic)if(b=this._firstTweenDic[c])for(var k in b)b.diyTarget.hasOwnProperty(k)&&(b.diyTarget[k]=b[k]);for(c in this._tweenDic)a=this._tweenDic[c],a.clear(),delete this._tweenDic[c];this._gidIndex=this._index=0;this._currTime=d;this._lastTime=q.now();null==this._endTweenDataList||this._endTimeSort?(this._endTimeSort=!1,this._endTweenDataList=a=this._tweenDataList.concat(),a.sort(function(d,a){return d.endTime>a.endTime?1:d.endTime<a.endTime?-1:0})):a=this._endTweenDataList;b=0;for(k=a.length;b<k;b++)if(c=a[b],0==c.type)if(d>=c.endTime){this._index=Math.max(this._index,b+1);var m=c.data;if(c.isTo)for(var p in m)c.target[p]=m[p]}else break;b=0;for(k=this._tweenDataList.length;b<k;b++)c=this._tweenDataList[b],0==c.type&&d>=c.startTime&&d<c.endTime&&(this._index=Math.max(this._index,b+1),this._gidIndex++,a=v.getItemByClass("tween",ta),a._create(c.target,c.data,c.duration,c.ease,B.create(this,this._animComplete,[this._gidIndex]),0,!1,c.isTo,!0,!1),a.setStartTime(this._currTime-(d-c.startTime)),a._updateEase(this._currTime),a.gid=this._gidIndex,this._tweenDic[this._gidIndex]=a)}};a.gotoLabel=function(d){null!=this._labelDic&&(d=this._labelDic[d])&&this.gotoTime(d.startTime)};a.pause=function(){l.timer.clear(this,this._update)};a.resume=function(){this.play(this._currTime,this._loopKey)};a.play=function(d,a){void 0===d&&(d=0);void 0===a&&(a=!1);if(this._tweenDataList){if(this._startTimeSort){this._startTimeSort=!1;this._tweenDataList.sort(function(d,a){return d.startTime>a.startTime?1:d.startTime<a.startTime?-1:0});for(var b=0,c=this._tweenDataList.length;b<c;b++){var e=this._tweenDataList[b];if(null!=e&&0==e.type){var m=e.target,p=m.$_GID||(m.$_GID=U.getGID()),g=null;null==this._firstTweenDic[p]?(g={},g.diyTarget=m,this._firstTweenDic[p]=g):g=this._firstTweenDic[p];for(var n in e.data)null==g[n]&&(g[n]=m[n])}}}"string"==typeof d?this.gotoLabel(d):this.gotoTime(d);this._loopKey=a;this._lastTime=q.now();l.timer.frameLoop(1,this,this._update)}};a._update=function(){if(this._currTime>=this._startTime)if(this._loopKey){this._complete();if(!this._tweenDataList)return;this.gotoTime(0)}else{for(var d in this._tweenDic)a=this._tweenDic[d],a.complete();this._complete();this.pause();return}var a=q.now(),b=this._currTime+=(a-this._lastTime)*this.scale;this._lastTime=a;for(d in this._tweenDic)a=this._tweenDic[d],a._updateEase(b);var a;0!=this._tweenDataList.length&&this._index<this._tweenDataList.length&&(d=this._tweenDataList[this._index],b>=d.startTime&&(this._index++,0==d.type?(this._gidIndex++,a=v.getItemByClass("tween",ta),a._create(d.target,d.data,d.duration,d.ease,B.create(this,this._animComplete,[this._gidIndex]),0,!1,d.isTo,!0,!1),a.setStartTime(b),a.gid=this._gidIndex,this._tweenDic[this._gidIndex]=a,a._updateEase(b)):this.event("label",d.data)))};a._animComplete=function(d){this._tweenDic[d]&&delete this._tweenDic[d]};a._complete=function(){this.event("complete")};a.reset=function(){var d;if(this._labelDic)for(d in this._labelDic)delete this._labelDic[d];var a;for(d in this._tweenDic)a=this._tweenDic[d],a.clear(),delete this._tweenDic[d];for(d in this._firstTweenDic)delete this._firstTweenDic[d];this._endTweenDataList=null;if(this._tweenDataList&&this._tweenDataList.length)for(a=this._tweenDataList.length,d=0;d<a;d++)this._tweenDataList[d]&&this._tweenDataList[d].destroy();this._gidIndex=this._index=this._startTime=this._lastTime=this._currTime=this._tweenDataList.length=0;this.scale=1;l.timer.clear(this,this._update)};a.destroy=function(){this.reset();this._firstTweenDic=this._tweenDataList=this._tweenDic=this._labelDic=null};g(0,a,"index",function(){return this._frameIndex},function(a){this._frameIndex=a;this.gotoTime(this._frameIndex/this._frameRate*1E3)});g(0,a,"total",function(){return this._total=Math.floor(this._startTime/1E3*this._frameRate)});c.to=function(a,b,h,f,k){void 0===k&&(k=0);return(new c).to(a,b,h,f,k)};c.from=function(a,b,h,f,k){void 0===k&&(k=0);return(new c).from(a,b,h,f,k)};c.__init$=function(){b=function(){function a(){this.type=0;this.isTo=!0;this.endTime=this.startTime=NaN;this.target=null;this.duration=NaN;this.data=this.ease=null}n(a,"");a.prototype.destroy=function(){this.data=this.ease=this.target=null;this.isTo=!0;this.type=0;v.recover("tweenData",this)};return a}()};return c}(ka),La=function(a){function c(){this._allLoader=[];this.retryNum=1;this.retryDelay=0;this.maxLoader=5;this._loaders=[];this._loaderCount=0;this._resInfos=[];this._infoPool=[];this._maxPriority=5;this._failRes={};this._statInfo={count:1,loaded:1};this.WEN_HAO="res/ui/image/item_single/0.png";c.__super.call(this);for(var a=0;a<this._maxPriority;a++)this._resInfos[a]=[]}var b;n(c,"laya.net.LoaderManager",a);a=c.prototype;a.getProgress=function(){return this._statInfo.loaded/this._statInfo.count};a.resetProgress=function(){this._statInfo.count=this._statInfo.loaded=1};a.create=function(a,b,c,f,k,m,p,g){void 0===p&&(p=1);void 0===g&&(g=!0);this._create(a,!0,b,c,f,k,m,p,g)};a._create=function(a,b,c,f,k,m,p,g,l){void 0===g&&(g=1);void 0===l&&(l=!0);if(a instanceof Array){var d=function(a,d){a.progress=d;for(d=a=0;d<n;d++)a+=t[d].progress;q.runWith(a/n)},e=function(a,d){z++;a.progress=1;d||(h=!1);z===n&&c&&c.runWith(h)},h=!0,t=a,n=t.length,z=0;if(f)var q=B.create(f.caller,f.method,f.args,!1);for(a=0;a<n;a++){var r=t[a];"string"==typeof r&&(r=t[a]={url:r});r.progress=0}for(a=0;a<n;a++){var r=t[a],u=f?B.create(null,d,[r],!1):null,v=f||c?B.create(null,e,[r]):null;this._createOne(r.url,b,v,u,r.type||k,r.constructParams||m,r.propertyParams||p,r.priority||g,l)}}else this._createOne(a,b,c,f,k,m,p,g,l)};a._createOne=function(a,b,h,f,k,m,p,g,n){void 0===g&&(g=1);void 0===n&&(n=!0);var d=this.getRes(a);d?(!b&&d instanceof laya.resource.Resource&&d._addReference(),f&&f.runWith(1),h&&h.runWith(d)):(d=U.getFileExtension(a),k||(k=c.createMap[d]?c.createMap[d][0]:null),k?x.parserMap[k]?this._createLoad(a,B.create(null,function(d){d&&(!b&&d instanceof laya.resource.Resource&&d._addReference(),d._setCreateURL(a));h&&h.runWith(d);l.loader.event(a)}),f,k,m,p,g,n,!0):this.load(a,h,f,k,g,n):this.load(a,h,f,k,g,n))};a.load=function(a,e,h,f,k,m,p,g,n){var d=this;void 0===k&&(k=1);void 0===m&&(m=!0);void 0===g&&(g=!1);void 0===n&&(n=!1);if(a instanceof Array)return this._loadAssets(a,e,h,f,k,m,p);q.now();c.DEBUG_RECORDLOAD&&(-1!=a.indexOf("res/map")&&-1!=a.indexOf("chunks/")||-1!=c._allLoadUrl.indexOf(a)||c._allLoadUrl.push(a));var t=x.getRes(a);if(g||null==t){var z;z=a;a=Oc.getFileLoadPath(a);a!=z&&"nativeimage"!==f?f="atlas":z=null;var r=c._resMap[a];r?(e&&(z?e&&r._createListener("complete",this,this._resInfoLoaded,[z,e],!1,!1):e&&r._createListener("complete",e.caller,e.method,e.args,!1,!1)),h&&r._createListener("progress",h.caller,h.method,h.args,!1,!1)):(r=this._infoPool.length?this._infoPool.pop():new b,r.url=a,r.type=f,r.cache=m,r.group=p,r.ignoreCache=g,r.useWorkerLoader=n,r.originalUrl=z,e&&r.on("complete",e.caller,e.method,e.args),h&&r.on("progress",h.caller,h.method,h.args),c._resMap[a]=r,k=k<this._maxPriority?k:this._maxPriority-1,this._resInfos[k].push(r),this._statInfo.count++,this.event("progress",this.getProgress()),this._next());q.now()}else l.systemTimer.frameOnce(1,null,function(){h&&h.runWith(1);e&&e.runWith(t instanceof Array?[t]:t);d._loaderCount||d.event("complete")});return this};a._resInfoLoaded=function(a,b){b.runWith(x.getRes(a))};a._createLoad=function(a,e,h,f,k,m,p,g,n){var d=this;void 0===p&&(p=1);void 0===g&&(g=!0);void 0===n&&(n=!1);if(a instanceof Array)return this._loadAssets(a,e,h,f,p,g);var t=x.getRes(a);if(null!=t)l.systemTimer.frameOnce(1,null,function(){h&&h.runWith(1);e&&e.runWith(t);d._loaderCount||d.event("complete")});else{var z=c._resMap[a];z?(e&&z._createListener("complete",e.caller,e.method,e.args,!1,!1),h&&z._createListener("progress",h.caller,h.method,h.args,!1,!1)):(z=this._infoPool.length?this._infoPool.pop():new b,z.url=a,z.type=f,z.cache=!1,z.ignoreCache=n,z.originalUrl=null,z.createCache=g,z.createConstructParams=k,z.createPropertyParams=m,e&&z.on("complete",e.caller,e.method,e.args),h&&z.on("progress",h.caller,h.method,h.args),c._resMap[a]=z,p=p<this._maxPriority?p:this._maxPriority-1,this._resInfos[p].push(z),this._statInfo.count++,this.event("progress",this.getProgress()),this._next())}return this};a._next=function(){if(!(this._loaderCount>=this.maxLoader)){for(var a=0;a<this._maxPriority;a++)for(var b=this._resInfos[a];0<b.length;){var c=b.shift();if(c)return this._doLoad(c)}this._loaderCount||this.event("complete")}};a._doLoad=function(a){function d(d){b.offAll();b._data=null;b._customParse=!1;c._loaders.push(b);c._endLoad(a,d instanceof Array?[d]:d);c._loaderCount--;c._next()}this._loaderCount++;var b;this._loaders.length?b=this._loaders.pop():(b=new x,this._allLoader.push(b));b.on("complete",null,d);b.on("progress",null,function(d){a.event("progress",d)});b.on("error",null,function(a){d(null)});var c=this;b._constructParams=a.createConstructParams;b._propertyParams=a.createPropertyParams;b._createCache=a.createCache;b.load(a.url,a.type,a.cache,a.group,a.ignoreCache,a.useWorkerLoader)};a._endLoad=function(a,b){var d=a.url;if(null==b){var e=this._failRes[d]||0;if(e<this.retryNum){console.warn("[warn]Retry to load:",d);this._failRes[d]=e+1;l.systemTimer.once(this.retryDelay,this,this._addReTry,[a],!1);return}e=!1;if("image"==a.type&&d!=this.WEN_HAO&&(-1!=d.indexOf("res/ui/image/item_single")||-1!=d.indexOf("res/ui/image/skillIcon"))){if(null==x.getRes(this.WEN_HAO)){a.url=this.WEN_HAO;l.systemTimer.once(this.retryDelay,this,this._addReTry,[a],!1);return}b=x.getRes(this.WEN_HAO);e=!0}e||(x.clearRes(d),console.warn("[error]Failed to load:",d),this.event("error",d))}this._failRes[d]&&(this._failRes[d]=0);delete c._resMap[d];a.originalUrl&&(b=x.getRes(a.originalUrl));try{a.event("complete",b)}catch(k){console.error(k.stack),l.errorCallBack&&l.errorCallBack(k.stack)}a.offAll();this._infoPool.push(a);this._statInfo.loaded++;this.event("progress",this.getProgress())};a._addReTry=function(a){this._resInfos[this._maxPriority-1].push(a);this._next()};a.clearRes=function(a){x.clearRes(a)};a.clearTextureRes=function(a){x.clearTextureRes(a)};a.getRes=function(a){return x.getRes(a)};a.cacheRes=function(a,b){x.cacheRes(a,b)};a.setGroup=function(a,b){x.setGroup(a,b)};a.clearResByGroup=function(a){x.clearResByGroup(a)};a.clearUnLoaded=function(){for(var a=0;a<this._maxPriority;a++){for(var b=this._resInfos[a],h=b.length-1;-1<h;h--){var f=b[h];f&&(f.offAll(),this._infoPool.push(f))}b.length=0}this._loaderCount=0;c._resMap={}};a.cancelLoadByUrls=function(a){if(a)for(var d=0,b=a.length;d<b;d++)this.cancelLoadByUrl(a[d])};a.cancelLoadByUrl=function(a){for(var d=0;d<this._maxPriority;d++)for(var b=this._resInfos[d],f=b.length-1;-1<f;f--){var k=b[f];k&&k.url===a&&(b[f]=null,k.offAll(),this._infoPool.push(k))}c._resMap[a]&&delete c._resMap[a]};a._loadAssets=function(a,b,c,f,k,m,p){function d(a,d){g++;a.progress=1;d||(q=!1);g===h&&b&&b.runWith(q)}function e(a,d){if(null!=c){a.progress=d;for(d=a=0;d<n.length;d++){var b=n[d];a+=b.size*b.progress}c.runWith(a/l)}}void 0===k&&(k=1);void 0===m&&(m=!0);console.log("OnVersionProg-------_loadAssets -----begin---------"+a.length);for(var h=a.length,g=0,l=0,n=[],q=!0,r=0;r<h;r++){var u=a[r];"string"==typeof u&&(u={url:u,type:f,size:1,priority:k});u.size||(u.size=1);u.progress=0;l+=u.size;n.push(u);var v=c?B.create(null,e,[u],!1):null,w=b||c?B.create(null,d,[u]):null;console.log("_loadAssets"+u.length);this.load(u.url,w,v,u.type,u.priority||1,m,u.group||p,!1,u.useWorkerLoader)}return this};a.decodeBitmaps=function(a){var d,b=a.length,c;c=r._context;for(d=0;d<b;d++){var k;(k=x.getAtlas(a[d]))?this._decodeTexture(k[0],c):(k=this.getRes(a[d]))&&k instanceof laya.resource.Texture&&this._decodeTexture(k,c)}};a._decodeTexture=function(a,b){var d=a.bitmap;a&&d&&(a=d.source||d.image)&&l.__typeof(a,q.window.HTMLImageElement)&&(b.drawImage(a,0,0,1,1),b.getImageData(0,0,1,1))};c.cacheRes=function(a,b){x.cacheRes(a,b)};c._resMap={};c._allLoadUrl=[];c.DEBUG_RECORDLOAD=!1;u(c,["createMap",function(){return this.createMap={atlas:[null,"atlas"]}}]);c.__init$=function(){b=function(a){function d(){this.type=this.url=null;this.cache=!1;this.group=null;this.useWorkerLoader=this.ignoreCache=!1;this.originalUrl=null;this.createCache=!1;this.createPropertyParams=this.createConstructParams=null;d.__super.call(this)}n(d,"",a);return d}(ka)};return c}(ka),Wb=function(a){function c(){this._url=this._data=this._responseType=null;c.__super.call(this);this._http=new q.window.XMLHttpRequest}n(c,"laya.net.HttpRequest",a);a=c.prototype;a.send=function(a,d,c,h,f){void 0===c&&(c="get");void 0===h&&(h="text");this._responseType=h;this._data=null;this._url=a;var b=this,e=this._http;a=D.getAdptedFilePath(a);e.open(c,a,!0);if(f)for(a=0;a<f.length;a++)e.setRequestHeader(f[a++],f[a]);else r.isConchApp||(d&&"string"!=typeof d?e.setRequestHeader("Content-Type","application/json"):e.setRequestHeader("Content-Type","application/x-www-form-urlencoded"));e.responseType="arraybuffer"!==h?"text":"arraybuffer";e.onerror=function(a){b._onError(a)};e.onabort=function(a){b._onAbort(a)};e.onprogress=function(a){b._onProgress(a)};e.onload=function(a){b._onLoad(a)};e.send(d)};a._onProgress=function(a){a&&a.lengthComputable&&this.event("progress",a.loaded/a.total)};a._onAbort=function(a){this.error("Request was aborted by user")};a._onError=function(a){this.error("Request failed Status:"+this._http.status+" text:"+this._http.statusText)};a._onLoad=function(a){a=this._http;var d=void 0!==a.status?a.status:200;200===d||204===d||0===d?this.complete():this.error("["+a.status+"]"+a.statusText+":"+a.responseURL)};a.error=function(a){this.clear();console.warn(this.url,"message");console.warn(this.url,a);this.event("error",a)};a.complete=function(){this.clear();var a=!0;try{this._data="json"===this._responseType?JSON.parse(this._http.responseText):"xml"===this._responseType?U.parseXMLFromString(this._http.responseText):this._http.response||this._http.responseText}catch(d){a=!1,this.error(d.message)}a&&this.event("complete",this._data instanceof Array?[this._data]:this._data)};a.clear=function(){var a=this._http;a.onerror=a.onabort=a.onprogress=a.onload=null};g(0,a,"url",function(){return this._url});g(0,a,"http",function(){return this._http});g(0,a,"data",function(){return this._data});return c}(ka),nf=function(a){function c(){this._destroyed=!1;this._templet=null;this._overallDuration=this._playDuration=this._playEnd=this._playStart=this._currentFrameTime=this._currentTime=NaN;this._stopWhenCircleFinish=!1;this._startUpdateLoopCount=this._elapsedPlaybackTime=NaN;this._currentKeyframeIndex=this._currentAnimationClipIndex=0;this._paused=!1;this._cacheFrameRate=0;this._cachePlayRate=this._cacheFrameRateInterval=NaN;this.isCache=!0;this.playbackRate=1;this.returnToZeroStopped=!1;c.__super.call(this);this._destroyed=!1;this._currentKeyframeIndex=this._currentAnimationClipIndex=-1;this._currentTime=0;this._overallDuration=Number.MAX_VALUE;this._stopWhenCircleFinish=!1;this._elapsedPlaybackTime=0;this._startUpdateLoopCount=-1;this._cachePlayRate=1;this.cacheFrameRate=60;this.returnToZeroStopped=!1}n(c,"laya.ani.AnimationPlayer",a);a=c.prototype;l.imps(a,{"laya.resource.IDestroy":!0});a._onTempletLoadedComputeFullKeyframeIndices=function(a,d,c){this._templet===c&&this._cachePlayRate===a&&this._cacheFrameRate===d&&this._computeFullKeyframeIndices()};a._computeFullKeyframeIndices=function(){};a._onAnimationTempletLoaded=function(){this.destroyed||this._calculatePlayDuration()};a._calculatePlayDuration=function(){if(0!==this.state){var a=this._templet.getAniDuration(this._currentAnimationClipIndex);0===this._playEnd&&(this._playEnd=a);this._playEnd>a&&(this._playEnd=a);this._playDuration=this._playEnd-this._playStart}};a._setPlayParams=function(a,d){this._currentTime=a;this._currentKeyframeIndex=Math.floor(this.currentPlayTime/d+.01);this._currentFrameTime=this._currentKeyframeIndex*d};a._setPlayParamsWhenStop=function(a,d){this._currentTime=a;this._currentKeyframeIndex=Math.floor(a/d+.01);this._currentFrameTime=this._currentKeyframeIndex*d;this._currentAnimationClipIndex=-1};a._update=function(a){if(-1!==this._currentAnimationClipIndex&&!this._paused&&this._templet){var d=this._cacheFrameRateInterval*this._cachePlayRate,b=0;this._startUpdateLoopCount!==I.loopCount&&(b=a*this.playbackRate,this._elapsedPlaybackTime+=b);a=this.playDuration;0!==this._overallDuration&&this._elapsedPlaybackTime>=this._overallDuration||0===this._overallDuration&&this._elapsedPlaybackTime>=a?(this._setPlayParamsWhenStop(a,d),this.event("stopped")):(b+=this._currentTime,0<a?b>=a?this._stopWhenCircleFinish?(this._setPlayParamsWhenStop(a,d),this._stopWhenCircleFinish=!1,this.event("stopped")):(this._setPlayParams(b%a,d),this.event("complete")):this._setPlayParams(b,d):this._stopWhenCircleFinish?(this._setPlayParamsWhenStop(a,d),this._stopWhenCircleFinish=!1,this.event("stopped")):(this._currentTime=this._currentFrameTime=this._currentKeyframeIndex=0,this.event("complete")))}};a._destroy=function(){this.offAll();this._templet=null;this._destroyed=!0};a.play=function(a,d,c,h,f){void 0===a&&(a=0);void 0===d&&(d=1);void 0===c&&(c=2147483647);void 0===h&&(h=0);void 0===f&&(f=0);if(!this._templet)throw Error("AnimationPlayer:templet must not be null,maybe you need to set url.");if(0>c||0>h||0>f)throw Error("AnimationPlayer:overallDuration,playStart and playEnd must large than zero.");if(0!==f&&h>f)throw Error("AnimationPlayer:start must less than end.");this._elapsedPlaybackTime=this._currentFrameTime=this._currentTime=0;this.playbackRate=d;this._overallDuration=c;this._playStart=h;this._playEnd=f;this._paused=!1;this._currentAnimationClipIndex=a;this._currentKeyframeIndex=0;this._startUpdateLoopCount=I.loopCount;this.event("played");this._calculatePlayDuration();this._update(0)};a.playByFrame=function(a,d,c,h,f,k){void 0===a&&(a=0);void 0===d&&(d=1);void 0===c&&(c=2147483647);void 0===h&&(h=0);void 0===f&&(f=0);void 0===k&&(k=30);k=1E3/k;this.play(a,d,c,h*k,f*k)};a.stop=function(a){void 0===a&&(a=!0);a?(this._currentTime=this._currentFrameTime=this._currentKeyframeIndex=0,this._currentAnimationClipIndex=-1,this.event("stopped")):this._stopWhenCircleFinish=!0};a.destroy=function(){};g(0,a,"playEnd",function(){return this._playEnd});g(0,a,"templet",function(){return this._templet},function(a){0!==this.state&&this.stop(!0);this._templet!==a&&(this._templet=a,this._computeFullKeyframeIndices())});g(0,a,"playStart",function(){return this._playStart});g(0,a,"playDuration",function(){return this._playDuration});g(0,a,"state",function(){return-1===this._currentAnimationClipIndex?0:this._paused?1:2});g(0,a,"currentKeyframeIndex",function(){return this._currentKeyframeIndex});g(0,a,"overallDuration",function(){return this._overallDuration});g(0,a,"currentFrameTime",function(){return this._currentFrameTime});g(0,a,"currentAnimationClipIndex",function(){return this._currentAnimationClipIndex});g(0,a,"currentPlayTime",function(){return this._currentTime+this._playStart});g(0,a,"cachePlayRate",function(){return this._cachePlayRate},function(a){this._cachePlayRate!==a&&(this._cachePlayRate=a,this._templet&&this._computeFullKeyframeIndices())});g(0,a,"cacheFrameRate",function(){return this._cacheFrameRate},function(a){this._cacheFrameRate!==a&&(this._cacheFrameRate=a,this._cacheFrameRateInterval=1E3/this._cacheFrameRate,this._templet&&this._computeFullKeyframeIndices())});g(0,a,"currentTime",null,function(a){if(-1!==this._currentAnimationClipIndex&&this._templet){if(a<this._playStart||a>this._playEnd)throw Error("AnimationPlayer:value must large than playStartTime,small than playEndTime.");this._startUpdateLoopCount=I.loopCount;var d=this._cacheFrameRateInterval*this._cachePlayRate;this._currentTime=a;this._currentKeyframeIndex=Math.floor(this.currentPlayTime/d);this._currentFrameTime=this._currentKeyframeIndex*d}});g(0,a,"paused",function(){return this._paused},function(a){(this._paused=a)&&this.event("paused")});g(0,a,"cacheFrameRateInterval",function(){return this._cacheFrameRateInterval});g(0,a,"destroyed",function(){return this._destroyed});return c}(ka);(function(a){function c(){c.__super.call(this)}n(c,"laya.media.Sound",a);a=c.prototype;a.load=function(a){};a.play=function(a,d){return null};a.dispose=function(){};g(0,a,"duration",function(){return 0});return c})(ka);var Le=function(a){function c(){c.__super.call(this)}n(c,"laya.wx.mini.MiniLoader",a);c.prototype.load=function(a,d,e,h,f){void 0===e&&(e=!0);void 0===f&&(f=!1);if(this._url=a)if(a=D.customFormat(a),0===a.indexOf("data:image")?this._type=d="image":this._type=d||(d=x.getTypeFromUrl(this._url)),this._cache=e,this._data=null,!f&&x.loadedMap[D.formatURL(a)])this._data=x.loadedMap[D.formatURL(a)],this.event("progress",1),this.event("complete",this._data);else if(null!=x.parserMap[d])this._customParse=!0,x.parserMap[d]instanceof laya.utils.Handler?x.parserMap[d].runWith(this):x.parserMap[d].call(null,this);else{var b;switch(d){case "atlas":case "prefab":case "plf":b="json";break;case "font":b="xml";break;case "plfb":b="arraybuffer";break;default:b=d}if(x.preLoadedMap[D.formatURL(a)])this.onLoaded(x.preLoadedMap[D.formatURL(a)]);else{b=F.getUrlEncode(a,b);var m=U.getFileExtension(a);if(-1!=c._fileTypeArr.indexOf(m))F.EnvConfig.load.call(this,a,d,e,h,f);else if(F.isZiYu&&!T.ziyuFileData[a]&&(a=D.formatURL(a)),F.isZiYu&&T.ziyuFileData[a])this.onLoaded(T.ziyuFileData[a]);else if(T.getFileInfo(a)){var p=T.getFileInfo(a);p.encoding=null==p.encoding?"utf8":p.encoding;T.readFile(a,p.encoding,new B(c,c.onReadNativeCallBack,[b,a,d,e,h,f,this]),a)}else if(T.isLocalNativeFile(a)){if(F.subNativeFiles&&0==F.subNativeheads.length)for(p in F.subNativeFiles){m=F.subNativeFiles[p];F.subNativeheads=F.subNativeheads.concat(m);for(var g=0;g<m.length;g++)F.subMaps[m[g]]=p+"/"+m[g]}F.subNativeFiles&&-1!=a.indexOf("/")&&(p=a.split("/")[0]+"/")&&-1!=F.subNativeheads.indexOf(p)&&(a=a.replace(p,F.subMaps[p]));p=""!=D.rootPath?D.rootPath:D._basePath;m=a;""!=p&&(a=a.split(p)[1]);a||(a=m);T.read(a,b,new B(c,c.onReadNativeCallBack,[b,a,d,e,h,f,this]))}else p=D.formatURL(a),-1!=p.indexOf("http://usr/")||-1==p.indexOf("http://")&&-1==p.indexOf("https://")||F.AutoCacheDownFile?T.readFile(a,b,new B(c,c.onReadNativeCallBack,[b,a,d,e,h,f,this]),a):F.EnvConfig.load.call(this,a,d,e,h,f)}}else this.onLoaded(null)};c.onReadNativeCallBack=function(a,d,c,h,f,k,m,p,g){void 0===h&&(h=!0);void 0===k&&(k=!1);void 0===p&&(p=0);p?1==p&&F.EnvConfig.load.call(m,d,c,h,f,k):(a="json"==c||"atlas"==c||"prefab"==c||"plf"==c?F.getJson(g.data):"xml"==c?U.parseXMLFromString(g.data):g.data,!F.isZiYu&&F.isPosMsgYu&&"arraybuffer"!=c&&wx.postMessage({url:d,data:a,isLoad:"filedata"}),m.onLoaded(a))};u(c,["_fileTypeArr",function(){return this._fileTypeArr=["png","jpg","bmp","jpeg","gif"]}]);return c}(ka),hc=function(a){function c(){this.url=this._sound=null;this.loaded=!1;this.readyUrl=null;c.__super.call(this)}n(c,"laya.wx.mini.MiniSound",a);a=c.prototype;a.load=function(a){if(!T.isLocalNativeFile(a))a=D.formatURL(a);else if(-1!=a.indexOf("http://")||-1!=a.indexOf("https://"))if(""!=T.loadPath)a=a.split(T.loadPath)[1];else{var d=""!=D.rootPath?D.rootPath:D._basePath;""!=d&&(a=a.split(d)[1])}this.readyUrl=this.url=a;if(c._audioCache[this.readyUrl])this.event("complete");else if(F.autoCacheFile&&T.getFileInfo(a))this.onDownLoadCallBack(a,0);else if(F.autoCacheFile)if(T.isLocalNativeFile(a)){var d=""!=D.rootPath?D.rootPath:D._basePath,b=a;""!=d&&(a=a.split(d)[1]);a||(a=b);if(F.subNativeFiles&&0==F.subNativeheads.length)for(var h in F.subNativeFiles)for(d=F.subNativeFiles[h],F.subNativeheads=F.subNativeheads.concat(d),b=0;b<d.length;b++)F.subMaps[d[b]]=h+"/"+d[b];F.subNativeFiles&&-1!=a.indexOf("/")&&(h=a.split("/")[0]+"/")&&-1!=F.subNativeheads.indexOf(h)&&(a=a.replace(h,F.subMaps[h]));this.onDownLoadCallBack(a,0)}else if(!T.isLocalNativeFile(a)&&-1==a.indexOf("http://")&&-1==a.indexOf("https://")||-1!=a.indexOf("http://usr/"))this.onDownLoadCallBack(a,0);else T.downOtherFiles(a,B.create(this,this.onDownLoadCallBack,[a]),a);else this.onDownLoadCallBack(a,0)};a.onDownLoadCallBack=function(a,d){if(d)this.event("error");else{var b;F.autoCacheFile?(T.isLocalNativeFile(a)?(d=""!=D.rootPath?D.rootPath:D._basePath,""==d||-1==a.indexOf("http://")&&-1==a.indexOf("https://")||(b=a.split(d)[1]),b||(b=a)):b=(b=T.getFileInfo(a))&&b.md5?T.getFileNativePath(b.md5):a,this._sound=c._createSound(),this._sound.src=this.url=b):(this._sound=c._createSound(),this._sound.src=a);this._sound.onCanplay(c.bindToThis(this.onCanPlay,this));this._sound.onError(c.bindToThis(this.onError,this))}};a.onError=function(a){try{console.log("-----1---------------minisound-----id:"+c._id),console.log(a)}catch(d){console.log("-----2---------------minisound-----id:"+c._id),console.log(d)}this.event("error");this._sound.offError(null)};a.onCanPlay=function(){this.loaded=!0;this.event("complete");this._sound.offCanplay(null)};a.play=function(a,d){void 0===a&&(a=0);void 0===d&&(d=0);var b;this.url==X._bgMusic?(c._musicAudio||(c._musicAudio=c._createSound()),b=c._musicAudio):b=c._audioCache[this.readyUrl]?c._audioCache[this.readyUrl]._sound:c._createSound();if(!b)return null;if(F.autoCacheFile&&T.getFileInfo(this.url)){var h=T.getFileInfo(this.url).md5;b.src=this.url=T.getFileNativePath(h)}else b.src=this.url;b=new of(b,this);b.url=this.url;b.loops=d;b.loop=0===d?!0:!1;b.startTime=a;b.play();X.addChannel(b);return b};a.dispose=function(){var a=c._audioCache[this.readyUrl];a&&(a.src="",a._sound&&(a._sound.destroy(),a._sound=null),delete c._audioCache[this.readyUrl])};g(0,a,"duration",function(){return this._sound.duration});c._createSound=function(){c._id++;return F.window.wx.createInnerAudioContext()};c.bindToThis=function(a,d){return a.bind(d)};c._musicAudio=null;c._id=0;c._audioCache={};return c}(ka),Wa=function(a){function c(){this.url=null;this.loaded=!1;this.__toPlays=this.audioBuffer=this.data=null;this._disposed=!1;c.__super.call(this)}n(c,"laya.media.webaudio.WebAudioSound",a);a=c.prototype;a.load=function(a){var d=this;this.url=a=D.formatURL(a);if(this.audioBuffer=c._dataCache[a])this._loaded(this.audioBuffer);else if(c.e.on("loaded:"+a,this,this._loaded),c.e.on("err:"+a,this,this._err),!c.__loadingSound[a]){c.__loadingSound[a]=!0;var b=new q.window.XMLHttpRequest;b.open("GET",a,!0);b.responseType="arraybuffer";b.onload=function(){d._disposed?d._removeLoadEvents():(d.data=b.response,c.buffs.push({buffer:d.data,url:d.url}),c.decode())};b.onerror=function(a){d._err()};b.send()}};a._err=function(){this._removeLoadEvents();c.__loadingSound[this.url]=!1;this.event("error")};a._loaded=function(a){this._removeLoadEvents();this._disposed||(this.audioBuffer=a,c._dataCache[this.url]=this.audioBuffer,this.loaded=!0,this.event("complete"))};a._removeLoadEvents=function(){c.e.off("loaded:"+this.url,this,this._loaded);c.e.off("err:"+this.url,this,this._err)};a.__playAfterLoaded=function(){if(this.__toPlays){var a,d,c;c=this.__toPlays;d=c.length;var h;for(a=0;a<d;a++)h=c[a],h[2]&&!h[2].isStopped&&this.play(h[0],h[1],h[2]);this.__toPlays.length=0}};a.play=function(a,d,c){void 0===a&&(a=0);void 0===d&&(d=0);c=c?c:new pf;!this.audioBuffer&&this.url&&(this.__toPlays||(this.__toPlays=[]),this.__toPlays.push([a,d,c]),this.once("complete",this,this.__playAfterLoaded),this.load(this.url));c.url=this.url;c.loops=d;c.audioBuffer=this.audioBuffer;c.startTime=a;c.play();X.addChannel(c);return c};a.dispose=function(){this._disposed=!0;delete c._dataCache[this.url];delete c.__loadingSound[this.url];this.data=this.audioBuffer=null;this.__toPlays=[]};g(0,a,"duration",function(){return this.audioBuffer?this.audioBuffer.duration:0});c.decode=function(){0>=c.buffs.length||c.isDecoding||(c.isDecoding=!0,c.tInfo=c.buffs.shift(),c.ctx.decodeAudioData(c.tInfo.buffer,c._done,c._fail))};c._done=function(a){c.e.event("loaded:"+c.tInfo.url,a);c.isDecoding=!1;c.decode()};c._fail=function(){c.e.event("err:"+c.tInfo.url,null);c.isDecoding=!1;c.decode()};c._playEmptySound=function(){if(null!=c.ctx){var a=c.ctx.createBufferSource();a.buffer=c._miniBuffer;a.connect(c.ctx.destination);a.start(0,0,0)}};c._unlock=function(){c._unlocked||(c._playEmptySound(),"running"==c.ctx.state&&(q.document.removeEventListener("mousedown",c._unlock,!0),q.document.removeEventListener("touchend",c._unlock,!0),q.document.removeEventListener("touchstart",c._unlock,!0),c._unlocked=!0))};c.initWebAudio=function(){"running"!=c.ctx.state&&(c._unlock(),q.document.addEventListener("mousedown",c._unlock,!0),q.document.addEventListener("touchend",c._unlock,!0),q.document.addEventListener("touchstart",c._unlock,!0))};c._dataCache={};c.buffs=[];c.isDecoding=!1;c._unlocked=!1;c.tInfo=null;c.__loadingSound={};u(c,["window",function(){return this.window=q.window},"webAudioEnabled",function(){return this.webAudioEnabled=c.window.AudioContext||c.window.webkitAudioContext||c.window.mozAudioContext},"ctx",function(){return this.ctx=c.webAudioEnabled?new (c.window.AudioContext||c.window.webkitAudioContext||c.window.mozAudioContext):void 0},"_miniBuffer",function(){return this._miniBuffer=c.ctx.createBuffer(1,1,22050)},"e",function(){return this.e=new ka}]);return c}(ka),rd=function(a){function c(a){this.position=this.texcoord=null;this.offsetX=300;this.offsetY=0;c.__super.call(this,512,0);a=8*Ua.BYTES_PE;this.position=[2,5126,!1,a,0];this.texcoord=[2,5126,!1,a,2*Ua.BYTES_PE];this.color=[4,5126,!1,a,4*Ua.BYTES_PE]}n(c,"laya.webgl.shader.d2.skinAnishader.SkinSV",a);return c}(ma),qd=function(a){function c(a){c.__super.call(this,4,0);this._attribLocation=["position",0,"attribColor",1]}n(c,"laya.webgl.shader.d2.value.PrimitiveSV",a);return c}(ma),Cc=function(a){function c(a){this.u_colorMatrix=null;this.strength=0;this.colorAlpha=this.colorMat=this.blurInfo=null;void 0===a&&(a=0);c.__super.call(this,1,a);this._attribLocation=["posuv",0,"attribColor",1,"attribFlags",2]}n(c,"laya.webgl.shader.d2.value.TextureSV",a);c.prototype.clear=function(){this.shader=this.texture=null;this.defines._value=this.subID+(R.shaderHighPrecision?1024:0)};return c}(ma),nb=function(a){function c(){this.autoCacheCmd=!0;this._height=this._width=0;this._sizeGrid=this._source=null;this._isChanged=!1;this._offset=null;c.__super.call(this)}n(c,"laya.ui.AutoBitmap",a);var b=c.prototype;b.destroy=function(){a.prototype.destroy.call(this);this._offset=this._sizeGrid=this._source=null};b._setChanged=function(){this._isChanged||(this._isChanged=!0,l.timer.callLater(this,this.changeSource))};b.changeSource=function(){this._isChanged=!1;var a=this._source;if(a&&a.bitmap){var b=this.width,h=this.height,f=this._sizeGrid,k=a.sourceWidth,m=a.sourceHeight;if(!f||k===b&&m===h)this.clear(),this.drawTexture(a,this._offset?this._offset[0]:0,this._offset?this._offset[1]:0,b,h);else{this.clear();var p=f[0],g=f[1],l=f[2],n=f[3],f=f[4],q=!1;b==k&&(n=g=0);h==m&&(p=l=0);if(n+g>b){var r=b,q=!0,b=n+g;this.save();this.clipRect(0,0,r,h)}n&&p&&this.drawImage(c.getTexture(a,0,0,n,p),0,0,n,p);g&&p&&this.drawImage(c.getTexture(a,k-g,0,g,p),b-g,0,g,p);n&&l&&this.drawImage(c.getTexture(a,0,m-l,n,l),0,h-l,n,l);g&&l&&this.drawImage(c.getTexture(a,k-g,m-l,g,l),b-g,h-l,g,l);p&&this.drawBitmap(f,c.getTexture(a,n,0,k-n-g,p),n,0,b-n-g,p);l&&this.drawBitmap(f,c.getTexture(a,n,m-l,k-n-g,l),n,h-l,b-n-g,l);n&&this.drawBitmap(f,c.getTexture(a,0,p,n,m-p-l),0,p,n,h-p-l);g&&this.drawBitmap(f,c.getTexture(a,k-g,p,g,m-p-l),b-g,p,g,h-p-l);this.drawBitmap(f,c.getTexture(a,n,p,k-n-g,m-p-l),n,p,b-n-g,h-p-l);q&&this.restore()}this._repaint()}};b.drawBitmap=function(a,b,c,f,k,m){void 0===k&&(k=0);void 0===m&&(m=0);.1>k||.1>m||(!a||b.width==k&&b.height==m?this.drawImage(b,c,f,k,m):this.fillTexture(b,c,f,k,m))};g(0,b,"sizeGrid",function(){return this._sizeGrid},function(a){this._sizeGrid=a;this._setChanged()});g(0,b,"width",function(){return this._width?this._width:this._source?this._source.sourceWidth:0},function(a){this._width!=a&&(this._width=a,this._setChanged())});g(0,b,"height",function(){return this._height?this._height:this._source?this._source.sourceHeight:0},function(a){this._height!=a&&(this._height=a,this._setChanged())});g(0,b,"source",function(){return this._source},function(a){a?(this._source=a,this._setChanged()):(this._source=null,this.clear())});c.getTexture=function(a,b,c,f,k){0>=f&&(f=1);0>=k&&(k=1);a.$_GID||(a.$_GID=U.getGID());var d;d&&d._getSource()||(d=ga.createFromTexture(a,b,c,f,k));return d};return c}(Ma),sc=function(a){function c(){c.__super.call(this)}n(c,"laya.ani.GraphicsAni",a);c.prototype.drawSkin=function(a,d,c,h){this.drawTriangles(a.texture,0,0,a.vertices,a.uvs,a.indexes,a.transform||C.EMPTY,d,c,h)};c.create=function(){return c._caches.pop()||new c};c.recycle=function(a){a.clear();c._caches.push(a)};c._caches=[];return c}(Ma),wb=function(a){function c(){c.__super.call(this,12,4,4);this.canReuse=!0;this.setAttributes(laya.webgl.utils.MeshVG._fixattriInfo)}n(c,"laya.webgl.utils.MeshVG",a);a=c.prototype;a.addVertAndIBToMesh=function(a,d,c,h){a=this._vb.needSize(d.length/2*12)>>2;for(var b=this._vb._floatArray32||this._vb.getFloat32Array(),e=this._vb._uint32Array,m=0,p=d.length/2,g=0;g<p;g++)b[a++]=d[m],b[a++]=d[m+1],m+=2,e[a++]=c;this._vb.setNeedUpload();this._ib.append(new Uint16Array(h));this._ib.setNeedUpload();this.vertNum+=p;this.indexNum+=h.length};a.releaseMesh=function(){this._vb.setByteLength(0);this._ib.setByteLength(0);this.indexNum=this.vertNum=0;laya.webgl.utils.MeshVG._POOL.push(this)};a.destroy=function(){this._ib.destroy();this._vb.destroy();this._ib.disposeResource();this._vb.deleteBuffer()};c.getAMesh=function(){var a;a=laya.webgl.utils.MeshVG._POOL.length?laya.webgl.utils.MeshVG._POOL.pop():new c;a._vb._resizeBuffer(786432,!1);return a};c.const_stride=12;c._POOL=[];u(c,["_fixattriInfo",function(){return this._fixattriInfo=[5126,2,0,5121,4,8]}]);return c}(Vb),qf=function(a){function c(){c.__super.call(this)}n(c,"laya.html.dom.HTMLStyleElement",a);var b=c.prototype;b._creates=function(){};b.drawToGraphic=function(a,b,c,f){};b.reset=function(){return this};g(0,b,"innerTEXT",a.prototype._$get_innerTEXT,function(a){fb.parseCSS(a,null)});return c}(gb),sf=function(a){function c(){this.contextWidth=this.contextHeight=NaN;this.div=this.repaintHandler=this._boundsRec=this._htmlBounds=this.content=null;c.__super.call(this)}n(c,"laya.html.dom.HTMLDivParser",a);var b=c.prototype;b.reset=function(){qf;rf;a.prototype.reset.call(this);this._style.block=!0;this._style.setLineElement(!0);this._style.width=200;this._style.height=200;this.repaintHandler=null;this.contextWidth=this.contextHeight=0;this.div=null;return this};b.appendHTML=function(a){Ye.parse(this,a,this.URI);this.layout()};b._addChildsToLayout=function(a){var d=this._getWords();if(null==d&&(!this._children||0==this._children.length))return!1;d&&d.forEach(function(d){a.push(d)});for(var d=!0,b=0,c=this._children.length;b<c;b++){var k=this._children[b];d?d=!1:a.push(null);k._addToLayout(a)}return!0};b._addToLayout=function(a){this.layout();!this.style.absolute&&a.push(this)};b.getBounds=function(){if(!this._htmlBounds)return null;this._boundsRec||(this._boundsRec=M.create());return this._boundsRec.copyFrom(this._htmlBounds)};b.parentRepaint=function(d){void 0===d&&(d=!1);a.prototype.parentRepaint.call(this);this.repaintHandler&&this.repaintHandler.runWith(d)};b.layout=function(){this.style._type|=512;var a=Hc.layout(this);if(a){this._htmlBounds||(this._htmlBounds=M.create());var b=this._htmlBounds;b.x=b.y=0;b.width=this.contextWidth=a[0];b.height=this.contextHeight=a[1]}};g(0,b,"content",function(){var a=this._getWords();if(null!=a)return a});g(0,b,"height",function(){return this._height?this._height:this.contextHeight},a.prototype._$set_height);g(0,b,"innerHTML",null,function(a){this.destroyChildren();this.appendHTML(a)});g(0,b,"width",function(){return this._width?this._width:this.contextWidth},function(a){var d;d=0===a?a!=this._width:a!=this.width;l.superSet(gb,this,"width",a);d&&this.layout()});return c}(gb),zb=function(a){function c(){this.italic=!1;c.__super.call(this)}n(c,"laya.display.css.TextStyle",a);var b=c.prototype;b.reset=function(){a.prototype.reset.call(this);this.italic=!1;this.align="left";this.wordWrap=!1;this.leading=0;this.padding=[0,0,0,0];this.borderColor=this.bgColor=null;this.asPassword=!1;this.stroke=0;this.strokeColor="#000000";this.underline=this.bold=!1;this.currBitmapFont=this.underlineColor=null;return this};b.recover=function(){this!==c.EMPTY&&v.recover("TextStyle",this.reset())};b.render=function(a,b,c,f){(this.bgColor||this.borderColor)&&b.drawRect(c,f,a.width,a.height,this.bgColor,this.borderColor,1)};c.create=function(){return v.getItemByClass("TextStyle",c)};c.EMPTY=new c;return c}(Fb);(function(a){function c(a){this.strength=NaN;this.strength_sig2_2sig2_gauss1=[];this.renderFunc=this.strength_sig2_native=null;c.__super.call(this);void 0===a&&(a=4);this.strength=a;this._action=null;this._glRender=new Yd}n(c,"laya.filters.BlurFilter",a);a=c.prototype;a.getStrenth_sig2_2sig2_native=function(){this.strength_sig2_native||(this.strength_sig2_native=new Float32Array(4));var a=this.strength/3,a=a*a;this.strength_sig2_native[0]=this.strength;this.strength_sig2_native[1]=a;this.strength_sig2_native[2]=2*a;this.strength_sig2_native[3]=1/(2*Math.PI*a);return this.strength_sig2_native};g(0,a,"type",function(){return 16});return c})(rb);var rf=function(a){function c(){c.__super.call(this)}n(c,"laya.html.dom.HTMLLinkElement",a);var b=c.prototype;b._creates=function(){};b.drawToGraphic=function(a,b,c,f){};b.reset=function(){this._loader&&this._loader.off("complete",this,this._onload);this._loader=null;return this};b._onload=function(a){this._loader&&(this._loader=null);switch(this.type){case "text/css":fb.parseCSS(a,this.URI)}this.repaint(!0)};g(0,b,"href",a.prototype._$get_href,function(a){a&&(a=this.formatURL(a),this.URI=new D(a),this._loader&&this._loader.off("complete",this,this._onload),x.getRes(a)?"text/css"==this.type&&fb.parseCSS(x.getRes(a),this.URI):(this._loader=new x,this._loader.once("complete",this,this._onload),this._loader.load(a,"text")))});c._cuttingStyle=/((@keyframes[\s\t]+|)(.+))[\t\n\r\s]*{/g;return c}(gb);(function(a){function c(a,d,e,h){this._sv_blurInfo2=[0,0,1,0];this._blurInof2_native=this._blurInof1_native=this._color_native=this._color=null;c.__super.call(this);this._elements=new Float32Array(9);this._sv_blurInfo1=Array(4);void 0===d&&(d=4);void 0===e&&(e=6);void 0===h&&(h=6);this._color=new ba(a);this.blur=Math.min(d,20);this.offX=e;this.offY=h;this._sv_blurInfo1[0]=this._sv_blurInfo1[1]=this.blur;this._sv_blurInfo1[2]=e;this._sv_blurInfo1[3]=-h;this._glRender=new Ge}n(c,"laya.filters.GlowFilter",a);a=c.prototype;a.getColor=function(){return this._color.arrColor};a.getColorNative=function(){this._color_native||(this._color_native=new Float32Array(4));var a=this.getColor();this._color_native[0]=a[0];this._color_native[1]=a[1];this._color_native[2]=a[2];this._color_native[3]=a[3];return this._color_native};a.getBlurInfo1Native=function(){this._blurInof1_native||(this._blurInof1_native=new Float32Array(4));this._blurInof1_native[0]=this._blurInof1_native[1]=this.blur;this._blurInof1_native[2]=this.offX;this._blurInof1_native[3]=this.offY;return this._blurInof1_native};a.getBlurInfo2Native=function(){this._blurInof2_native||(this._blurInof2_native=new Float32Array(4));this._blurInof2_native[2]=1;return this._blurInof2_native};g(0,a,"type",function(){return 8});g(0,a,"offY",function(){return this._elements[6]},function(a){this._elements[6]=a;this._sv_blurInfo1[3]=-a});g(0,a,"offX",function(){return this._elements[5]},function(a){this._elements[5]=a;this._sv_blurInfo1[2]=a});g(0,a,"blur",function(){return this._elements[4]},function(a){this._elements[4]=a;this._sv_blurInfo1[0]=this._sv_blurInfo1[1]=a});return c})(rb);var Va=function(a){function c(){c.__super.call(this,24,4,4);this.canReuse=!0;this.setAttributes(laya.webgl.utils.MeshQuadTexture._fixattriInfo);laya.webgl.utils.MeshQuadTexture._fixib?(this._ib=laya.webgl.utils.MeshQuadTexture._fixib,this._quadNum=c._maxIB):(this.createQuadIB(c._maxIB),laya.webgl.utils.MeshQuadTexture._fixib=this._ib)}n(c,"laya.webgl.utils.MeshQuadTexture",a);a=c.prototype;a.releaseMesh=function(){this._vb.setByteLength(0);this.indexNum=this.vertNum=0;laya.webgl.utils.MeshQuadTexture._POOL.push(this)};a.destroy=function(){this._vb.destroy();this._vb.deleteBuffer()};a.addQuad=function(a,d,c,h){var b=this._vb,e=b._byteLength>>2;b.setByteLength(e+24<<2);var m=b._floatArray32||b.getFloat32Array(),p=b._uint32Array;h=h?255:0;m[e++]=a[0];m[e++]=a[1];m[e++]=d[0];m[e++]=d[1];p[e++]=c;p[e++]=h;m[e++]=a[2];m[e++]=a[3];m[e++]=d[2];m[e++]=d[3];p[e++]=c;p[e++]=h;m[e++]=a[4];m[e++]=a[5];m[e++]=d[4];m[e++]=d[5];p[e++]=c;p[e++]=h;m[e++]=a[6];m[e++]=a[7];m[e++]=d[6];m[e++]=d[7];p[e++]=c;p[e++]=h;b._upload=!0};c.getAMesh=function(){var a;a=laya.webgl.utils.MeshQuadTexture._POOL.length?laya.webgl.utils.MeshQuadTexture._POOL.pop():new c;a._vb._resizeBuffer(1572864,!1);return a};c.const_stride=24;c._fixib=null;c._maxIB=16384;c._POOL=[];u(c,["_fixattriInfo",function(){return this._fixattriInfo=[5126,4,0,5121,4,16,5121,4,20]}]);return c}(Vb),tf=function(a){function c(){this._matrix=new C;this._matrix4=Ua.defaultMatrix4.concat();c.__super.call(this,1E4);this.shaderValue=new ma(0,0)}n(c,"laya.webgl.submit.SubmitCanvas",a);a=c.prototype;a.renderSubmit=function(){var a=Q.worldAlpha,d=Q.worldMatrix4,c=Q.worldMatrix,h=Q.worldFilters,f=Q.worldShaderDefines,k=this.shaderValue,m=this._matrix4,p=C.TEMP;C.mul(this._matrix,c,p);m[0]=p.a;m[1]=p.b;m[4]=p.c;m[5]=p.d;m[12]=p.tx;m[13]=p.ty;Q.worldMatrix=p.clone();Q.worldMatrix4=m;Q.worldAlpha*=k.alpha;k.filters&&k.filters.length&&(Q.worldFilters=k.filters,Q.worldShaderDefines=k.defines);this.canv.flushsubmit();Q.worldAlpha=a;Q.worldMatrix4=d;Q.worldMatrix.destroy();Q.worldMatrix=c;Q.worldFilters=h;Q.worldShaderDefines=f;return 1};a.releaseRender=function(){if(1>--this._ref){var a=c.POOL;this._mesh=null;a[a._length++]=this}};a.clone=function(a,d,c){return null};a.getRenderType=function(){return 10003};c.create=function(a,d,e){var b=c.POOL._length?c.POOL[--c.POOL._length]:new c;b.canv=a;b._ref=1;b._numEle=0;a=b.shaderValue;a.alpha=d;a.defines.setValue(0);e&&e.length&&a.setFilters(e);return b};c.POOL=(c.POOL=[],c.POOL._length=0,c.POOL);return c}(ea),Ud=function(a){function c(){c.__super.call(this)}n(c,"laya.webgl.BufferState2D",a);return c}(we),bb=function(a){function c(a){void 0===a&&(a=1E4);c.__super.call(this,a)}n(c,"laya.webgl.submit.SubmitTexture",a);a=c.prototype;a.clone=function(a,d,e){var b=c._poolSize?c.POOL[--c._poolSize]:new c;this._cloneInit(b,a,d,e);return b};a.releaseRender=function(){1>--this._ref&&(c.POOL[c._poolSize++]=this,this.shaderValue.release(),this._mesh=null,this._parent&&(this._parent.releaseRender(),this._parent=null))};a.renderSubmit=function(){if(0===this._numEle)return 1;var a=this.shaderValue.textureHost;if(a){var d=a?a._getSource():null;if(!d)return 1;var c=a.alphaMask?a.alphaMask._getSource():null;if(a.alphaMask&&!c)return 1;c&&this.shaderValue.defines.addInt(4096)}a=R.mainContext;this._mesh.useMesh(a);la.activeBlendFunction!==this._blendFn&&(K.setBlend(a,!0),this._blendFn(a),la.activeBlendFunction=this._blendFn);this.shaderValue.texture=d;this.shaderValue.textureAlpha=c;this.shaderValue.upload();a.drawElements(4,this._numEle,5123,this._startIdx);I.renderBatches++;I.trianglesFaces+=this._numEle/3;return 1};c.create=function(a,d,e){var b=c._poolSize?c.POOL[--c._poolSize]:new c(10016);b._mesh=d;b._key.clear();b._key.submitType=2;b._ref=1;b._startIdx=d.indexNum*Ua.BYTES_PIDX;b._numEle=0;d=a._nBlendType;b._key.blendShader=d;b._blendFn=a._targets?la.targetFns[d]:la.fns[d];b.shaderValue=e;a._colorFiler&&(a=a._colorFiler,e.defines.add(a.type),e.colorMat=a._mat,e.colorAlpha=a._alpha);return b};c._poolSize=0;c.POOL=[];return c}(ea),eb=function(a){function c(){c.__super.call(this);this._centerY=this._centerX=this._right=this._left=this._bottom=this._top=NaN}n(c,"laya.ui.Widget",a);a=c.prototype;a.onReset=function(){this._top=this._bottom=this._left=this._right=this._centerX=this._centerY=NaN};a._onEnable=function(){if(this.owner.parent)this._onAdded();else this.owner.once("added",this,this._onAdded)};a._onDisable=function(){this.owner.off("added",this,this._onAdded);this.owner.parent&&this.owner.parent.off("resize",this,this._onParentResize)};a._onAdded=function(){if(this.owner.parent)this.owner.parent.on("resize",this,this._onParentResize);this.resetLayoutX();this.resetLayoutY()};a._onParentResize=function(){(this.resetLayoutX()||this.resetLayoutY())&&this.owner.event("resize")};a.resetLayoutX=function(){var a=this.owner;if(!a)return!1;var d=a.parent;if(d)if(!isNaN(this.centerX))a.x=Math.round(.5*(d.width-a.displayWidth)+this.centerX+a.pivotX*a.scaleX);else if(isNaN(this.left))isNaN(this.right)||(a.x=Math.round(d.width-a.displayWidth-this.right+a.pivotX*a.scaleX));else if(a.x=Math.round(this.left+a.pivotX*a.scaleX),!isNaN(this.right)&&(d=(d._width-this.left-this.right)/(a.scaleX||.01),d!=a.width))return a.width=d,!0;return!1};a.resetLayoutY=function(){var a=this.owner;if(!a)return!1;var d=a.parent;if(d)if(!isNaN(this.centerY))a.y=Math.round(.5*(d.height-a.displayHeight)+this.centerY+a.pivotY*a.scaleY);else if(isNaN(this.top))isNaN(this.bottom)||(a.y=Math.round(d.height-a.displayHeight-this.bottom+a.pivotY*a.scaleY));else if(a.y=Math.round(this.top+a.pivotY*a.scaleY),!isNaN(this.bottom)&&(d=(d._height-this.top-this.bottom)/(a.scaleY||.01),d!=a.height))return a.height=d,!0;return!1};a.resetLayout=function(){this.owner&&(this.resetLayoutX(),this.resetLayoutY())};g(0,a,"centerX",function(){return this._centerX},function(a){this._centerX!=a&&(this._centerX=a,this.resetLayoutX())});g(0,a,"top",function(){return this._top},function(a){this._top!=a&&(this._top=a,this.resetLayoutY())});g(0,a,"bottom",function(){return this._bottom},function(a){this._bottom!=a&&(this._bottom=a,this.resetLayoutY())});g(0,a,"left",function(){return this._left},function(a){this._left!=a&&(this._left=a,this.resetLayoutX())});g(0,a,"right",function(){return this._right},function(a){this._right!=a&&(this._right=a,this.resetLayoutX())});g(0,a,"centerY",function(){return this._centerY},function(a){this._centerY!=a&&(this._centerY=a,this.resetLayoutY())});u(c,["EMPTY",function(){return this.EMPTY=new c}]);return c}(de),Zb=function(a){function c(){this._maxsize=0;this._upload=!0;this._bufferSize=this._uploadSize=0;this._u8Array=null;c.__super.call(this)}n(c,"laya.webgl.utils.Buffer2D",a);a=c.prototype;a.setByteLength=function(a){this._byteLength!==a&&(a<=this._bufferSize||this._resizeBuffer(2*a+256,!0),this._byteLength=a)};a.needSize=function(a){var d=this._byteLength;a&&(a=this._byteLength+a,a<=this._bufferSize||this._resizeBuffer(a<<1,!0),this._byteLength=a);return d};a._bufferData=function(){this._maxsize=Math.max(this._maxsize,this._byteLength);0==I.loopCount%30&&(this._buffer.byteLength>this._maxsize+64&&(this._buffer=this._buffer.slice(0,this._maxsize+64),this._bufferSize=this._buffer.byteLength,this._checkArrayUse()),this._maxsize=this._byteLength);this._uploadSize<this._buffer.byteLength&&(this._uploadSize=this._buffer.byteLength,O.instance.bufferData(this._bufferType,this._uploadSize,this._bufferUsage));O.instance.bufferSubData(this._bufferType,0,this._buffer)};a._bufferSubData=function(a,d,c){void 0===a&&(a=0);void 0===d&&(d=0);void 0===c&&(c=0);this._maxsize=Math.max(this._maxsize,this._byteLength);0==I.loopCount%30&&(this._buffer.byteLength>this._maxsize+64&&(this._buffer=this._buffer.slice(0,this._maxsize+64),this._bufferSize=this._buffer.byteLength,this._checkArrayUse()),this._maxsize=this._byteLength);this._uploadSize<this._buffer.byteLength&&(this._uploadSize=this._buffer.byteLength,O.instance.bufferData(this._bufferType,this._uploadSize,this._bufferUsage));d||c?(d=this._buffer.slice(d,c),O.instance.bufferSubData(this._bufferType,a,d)):O.instance.bufferSubData(this._bufferType,a,this._buffer)};a._checkArrayUse=function(){};a._bind_uploadForVAO=function(){if(!this._upload)return!1;this._upload=!1;this._bindForVAO();this._bufferData();return!0};a._bind_upload=function(){if(!this._upload)return!1;this._upload=!1;this.bind();this._bufferData();return!0};a._bind_subUpload=function(a,d,c){void 0===a&&(a=0);void 0===d&&(d=0);void 0===c&&(c=0);if(!this._upload)return!1;this._upload=!1;this.bind();this._bufferSubData(a,d,c);return!0};a._resizeBuffer=function(a,d){var b=this._buffer;if(a<=b.byteLength)return this;var c=this._u8Array;d&&b&&0<b.byteLength?(a=new ArrayBuffer(a),b=c&&c.buffer==b?c:new Uint8Array(b),c=this._u8Array=new Uint8Array(a),c.set(b,0),b=this._buffer=a):(b=this._buffer=new ArrayBuffer(a),this._u8Array=null);this._checkArrayUse();this._upload=!0;this._bufferSize=b.byteLength;return this};a.append=function(a){this._upload=!0;var d,b;d=a.byteLength;a instanceof Uint8Array?(this._resizeBuffer(this._byteLength+d,!0),b=new Uint8Array(this._buffer,this._byteLength)):a instanceof Uint16Array?(this._resizeBuffer(this._byteLength+d,!0),b=new Uint16Array(this._buffer,this._byteLength)):a instanceof Float32Array&&(this._resizeBuffer(this._byteLength+d,!0),b=new Float32Array(this._buffer,this._byteLength));b.set(a,0);this._byteLength+=d;this._checkArrayUse()};a.appendU16Array=function(a,d){this._resizeBuffer(this._byteLength+2*d,!0);var b=new Uint16Array(this._buffer,this._byteLength,d);if(6==d)b[0]=a[0],b[1]=a[1],b[2]=a[2],b[3]=a[3],b[4]=a[4],b[5]=a[5];else if(100<=d)b.set(new Uint16Array(a.buffer,0,d));else for(var c=0;c<d;c++)b[c]=a[c];this._byteLength+=2*d;this._checkArrayUse()};a.appendEx=function(a,d){this._upload=!0;var b;b=a.byteLength;this._resizeBuffer(this._byteLength+b,!0);(new d(this._buffer,this._byteLength)).set(a,0);this._byteLength+=b;this._checkArrayUse()};a.appendEx2=function(a,d,c,h){void 0===h&&(h=1);this._upload=!0;h*=c;this._resizeBuffer(this._byteLength+h,!0);d=new d(this._buffer,this._byteLength);var b;for(b=0;b<c;b++)d[b]=a[b];this._byteLength+=h;this._checkArrayUse()};a.getBuffer=function(){return this._buffer};a.setNeedUpload=function(){this._upload=!0};a.getNeedUpload=function(){return this._upload};a.upload=function(){var a=this._bind_upload();O.instance.bindBuffer(this._bufferType,null);34962==this._bufferType&&(Oa._bindedVertexBuffer=null);34963==this._bufferType&&(Oa._bindedIndexBuffer=null);Ia.activeShader=null;return a};a.subUpload=function(a,d,c){a=this._bind_subUpload();O.instance.bindBuffer(this._bufferType,null);34962==this._bufferType&&(Oa._bindedVertexBuffer=null);34963==this._bufferType&&(Oa._bindedIndexBuffer=null);Ia.activeShader=null;return a};a._disposeResource=function(){this._upload=!0;this._uploadSize=0};a.clear=function(){this._byteLength=0;this._upload=!0};g(0,a,"bufferLength",function(){return this._buffer.byteLength});g(0,a,"byteLength",null,function(a){this.setByteLength(a)});c.__int__=function(a){};c.FLOAT32=4;c.SHORT=2;return c}(Oa);(function(a){function c(){c.__super.call(this)}n(c,"laya.html.dom.HTMLImageElement",a);var b=c.prototype;b.reset=function(){a.prototype.reset.call(this);this._tex&&this._tex.off("loaded",this,this.onloaded);this._url=this._tex=null;return this};b.onloaded=function(){if(this._style){var a=this._style;a.widthed(this);a.heighted(this);a.widthed(this)||this._width==this._tex.width||(this.width=this._tex.width,this.parent&&this.parent._layoutLater());a.heighted(this)||this._height==this._tex.height||(this.height=this._tex.height,this.parent&&this.parent._layoutLater());this.repaint()}};b._addToLayout=function(a){!this._style.absolute&&a.push(this)};b.renderSelfToGraphic=function(a,b,c,f){this._tex&&a.drawImage(this._tex,b,c,this.width||this._tex.width,this.height||this._tex.height)};g(0,b,"src",null,function(a){a=this.formatURL(a);if(this._url!==a){this._url=a;var d=this._tex=x.getRes(a);d||(this._tex=d=new ga,d.load(a),x.cacheRes(a,d));d.getIsReady()?this.onloaded():d.once("ready",this,this.onloaded)}});return c})(gb);var Jb=function(a){function c(){c.__super.call(this,24,4,4);this.canReuse=!0;this.setAttributes(laya.webgl.utils.MeshTexture._fixattriInfo)}n(c,"laya.webgl.utils.MeshTexture",a);a=c.prototype;a.addData=function(a,d,c,h,f){var b=this._vb,e=this._ib,p=a.length>>1,g=b.needSize(24*p)>>2,l=b._floatArray32||b.getFloat32Array(),n=b._uint32Array,q=0,r=h.a,u=h.b,y=h.c,v=h.d,w=h.tx,x=h.ty;for(h=0;h<p;h++){var C=a[q],A=a[q+1];l[g]=C*r+A*y+w;l[g+1]=C*u+A*v+x;l[g+2]=d[q];l[g+3]=d[q+1];n[g+4]=f;n[g+5]=255;g+=6;q+=2}b.setNeedUpload();a=this.vertNum;f=c.length;h=e.needSize(c.byteLength);d=e.getUint16Array();h>>=1;if(0<a)for(f=h+f,b=0;h<f;h++,b++)d[h]=c[b]+a;else d.set(c,h);e.setNeedUpload();this.vertNum+=p;this.indexNum+=c.length};a.releaseMesh=function(){this._vb.setByteLength(0);this._ib.setByteLength(0);this.indexNum=this.vertNum=0;laya.webgl.utils.MeshTexture._POOL.push(this)};a.destroy=function(){this._ib.destroy();this._vb.destroy();this._ib.disposeResource();this._vb.deleteBuffer()};c.getAMesh=function(){var a;a=laya.webgl.utils.MeshTexture._POOL.length?laya.webgl.utils.MeshTexture._POOL.pop():new c;a._vb._resizeBuffer(1572864,!1);return a};c.const_stride=24;c._POOL=[];u(c,["_fixattriInfo",function(){return this._fixattriInfo=[5126,4,0,5121,4,16,5121,4,20]}]);return c}(Vb),pb=function(a){function c(a){c.__super.call(this);a||(a=this._copyMatrix(c.IDENTITY_MATRIX));this._mat=new Float32Array(16);this._alpha=new Float32Array(4);this.setByMatrix(a);this._action=new Dc;this._action.data=this}n(c,"laya.filters.ColorFilter",a);a=c.prototype;l.imps(a,{"laya.filters.IFilter":!0});a.gray=function(){return this.setByMatrix(c.GRAY_MATRIX)};a.color=function(a,d,c,h){void 0===a&&(a=0);void 0===d&&(d=0);void 0===c&&(c=0);void 0===h&&(h=1);return this.setByMatrix([1,0,0,0,a,0,1,0,0,d,0,0,1,0,c,0,0,0,1,h])};a.setColor=function(a){a=ba.create(a).arrColor;return this.setByMatrix([0,0,0,0,256*a[0],0,0,0,0,256*a[1],0,0,0,0,256*a[2],0,0,0,1,0])};a.setByMatrix=function(a){this._matrix!=a&&this._copyMatrix(a);for(var d=0,b=0,c=0;20>c;c++)4!=c%5?this._mat[d++]=a[c]:this._alpha[b++]=a[c];return this};a.adjustColor=function(a,d,c,h){this.adjustHue(h);this.adjustContrast(d);this.adjustBrightness(a);this.adjustSaturation(c);return this};a.adjustBrightness=function(a){a=this._clampValue(a,100);return 0==a||isNaN(a)?this:this._multiplyMatrix([1,0,0,0,a,0,1,0,0,a,0,0,1,0,a,0,0,0,1,0,0,0,0,0,1])};a.adjustContrast=function(a){a=this._clampValue(a,100);if(0==a||isNaN(a))return this;var d;0>a?d=127+a/100*127:(d=a%1,d=0==d?c.DELTA_INDEX[a]:c.DELTA_INDEX[a<<0]*(1-d)+c.DELTA_INDEX[(a<<0)+1]*d,d=127*d+127);a=d/127;d=.5*(127-d);return this._multiplyMatrix([a,0,0,0,d,0,a,0,0,d,0,0,a,0,d,0,0,0,1,0,0,0,0,0,1])};a.adjustSaturation=function(a){a=this._clampValue(a,100);if(0==a||isNaN(a))return this;a=1+(0<a?3*a/100:a/100);var d=1-a,b=.3086*d,c=.6094*d,d=.082*d;return this._multiplyMatrix([b+a,c,d,0,0,b,c+a,d,0,0,b,c,d+a,0,0,0,0,0,1,0,0,0,0,0,1])};a.adjustHue=function(a){a=this._clampValue(a,180)/180*Math.PI;if(0==a||isNaN(a))return this;var d=Math.cos(a);a=Math.sin(a);return this._multiplyMatrix([.213+.787*d+-.213*a,.715+-.715*d+-.715*a,.072+-.072*d+.928*a,0,0,.213+-.213*d+.143*a,.715+d*(1-.715)+.14*a,.072+-.072*d+-.283*a,0,0,.213+-.213*d+-.787*a,.715+-.715*d+.715*a,.072+.928*d+.072*a,0,0,0,0,0,1,0,0,0,0,0,1])};a.reset=function(){return this.setByMatrix(this._copyMatrix(c.IDENTITY_MATRIX))};a._multiplyMatrix=function(a){var d=[];this._matrix=this._fixMatrix(this._matrix);for(var b=0;5>b;b++){for(var c=0;5>c;c++)d[c]=this._matrix[c+5*b];for(c=0;5>c;c++){for(var f=0,k=0;5>k;k++)f+=a[c+5*k]*d[k];this._matrix[c+5*b]=f}}return this.setByMatrix(this._matrix)};a._clampValue=function(a,d){return Math.min(d,Math.max(-d,a))};a._fixMatrix=function(a){if(null==a)return c.IDENTITY_MATRIX;25>a.length?a=a.slice(0,a.length).concat(c.IDENTITY_MATRIX.slice(a.length,25)):25<a.length&&(a=a.slice(0,25));return a};a._copyMatrix=function(a){this._matrix||(this._matrix=[]);for(var d=0;25>d;d++)this._matrix[d]=a[d];return this._matrix};g(0,a,"type",function(){return 32});c.LENGTH=25;u(c,["DELTA_INDEX",function(){return this.DELTA_INDEX=[0,.01,.02,.04,.05,.06,.07,.08,.1,.11,.12,.14,.15,.16,.17,.18,.2,.21,.22,.24,.25,.27,.28,.3,.32,.34,.36,.38,.4,.42,.44,.46,.48,.5,.53,.56,.59,.62,.65,.68,.71,.74,.77,.8,.83,.86,.89,.92,.95,.98,1,1.06,1.12,1.18,1.24,1.3,1.36,1.42,1.48,1.54,1.6,1.66,1.72,1.78,1.84,1.9,1.96,2,2.12,2.25,2.37,2.5,2.62,2.75,2.87,3,3.2,3.4,3.6,3.8,4,4.3,4.7,4.9,5,5.5,6,6.5,6.8,7,7.3,7.5,7.8,8,8.4,8.7,9,9.4,9.6,9.8,10]},"GRAY_MATRIX",function(){return this.GRAY_MATRIX=[.3086,.6094,.082,0,0,.3086,.6094,.082,0,0,.3086,.6094,.082,0,0,0,0,0,1,0]},"IDENTITY_MATRIX",function(){return this.IDENTITY_MATRIX=[1,0,0,0,0,0,1,0,0,0,0,0,1,0,0,0,0,0,1,0,0,0,0,0,1]}]);return c}(rb),$e=function(a){function c(a,d,e,h,f){this.ctx=null;this.lastScaleY=this.lastScaleX=1;this.needResetScale=!1;this.maxTexH=this.maxTexW=0;this.scaleFontSize=!0;this.showDbgInfo=!1;this.supportImageData=!0;c.__super.call(this);void 0===e&&(e=!0);void 0===h&&(h=!0);void 0===f&&(f=!1);this.maxTexW=a;this.maxTexH=d;this.scaleFontSize=e;this.supportImageData=h;this.showDbgInfo=f;c.canvas||(c.canvas=w.document.createElement("canvas"),c.canvas.width=1024,c.canvas.height=512,c.canvas.style.left="-10000px",c.canvas.style.position="absolute",zc.body.appendChild(c.canvas),this.ctx=c.canvas.getContext("2d"))}n(c,"laya.webgl.resource.CharRender_Canvas",a);a=c.prototype;a.getWidth=function(a,d){if(!this.ctx)return 0;this.ctx._lastFont!=a&&(this.ctx.font=a,this.ctx._lastFont=a);return this.ctx.measureText(d).width};a.scale=function(a,d){if(!this.supportImageData)this.lastScaleX=a,this.lastScaleY=d;else if(this.lastScaleX!=a||this.lastScaleY!=d)this.ctx.setTransform(a,0,0,d,0,0),this.lastScaleX=a,this.lastScaleY=d};a.getCharBmp=function(a,d,c,h,f,k,m,g,l,n,q){if(!this.supportImageData)return this.getCharCanvas(a,d,c,h,f,k,m,g,l,n);var b=this.ctx;b.font!=d&&(b.font=d,b._lastFont=d);k.width=b.measureText(a).width;d=k.width*this.lastScaleX;var e=k.height*this.lastScaleY;d+=(m+l)*this.lastScaleX;e+=(g+n)*this.lastScaleY;d=Math.ceil(d);e=Math.ceil(e);d=Math.min(d,laya.webgl.resource.CharRender_Canvas.canvas.width);e=Math.min(e,laya.webgl.resource.CharRender_Canvas.canvas.height);l=d+2*c+1;n=e+2*c+1;q&&(l=Math.max(l,q[0]+q[2]+1),n=Math.max(n,q[1]+q[3]+1));b.clearRect(0,0,l,n);b.save();b.textBaseline="top";0<c&&(b.strokeStyle=f,b.lineWidth=c,b.strokeText(a,m,g));b.fillStyle=h;b.fillText(a,m,g);this.showDbgInfo&&(b.strokeStyle="#ff0000",b.strokeRect(0,0,d,e),b.strokeStyle="#00ff00",b.strokeRect(m,g,k.width,k.height));q&&-1==q[2]&&(q[2]=Math.ceil((k.width+2*c)*this.lastScaleX));a=q?b.getImageData(q[0],q[1],q[2],q[3]):b.getImageData(0,0,d,e);b.restore();k.bmpWidth=a.width;k.bmpHeight=a.height;return a};a.getCharCanvas=function(a,d,e,h,f,k,m,g,l,n){var b=this.ctx;b.font!=d&&(b.font=d,b._lastFont=d);k.width=b.measureText(a).width;var p=k.width*this.lastScaleX,t=k.height*this.lastScaleY,p=p+(m+l)*this.lastScaleX,t=t+((g+n)*this.lastScaleY+1),p=Math.min(p,this.maxTexW),t=Math.min(t,this.maxTexH);c.canvas.width=Math.min(p+1,this.maxTexW);c.canvas.height=Math.min(t+1,this.maxTexH);b.font=d;b.clearRect(0,0,p+1+e,t+1+e);b.setTransform(1,0,0,1,0,0);b.save();this.scaleFontSize&&b.scale(this.lastScaleX,this.lastScaleY);b.translate(m,g);b.textAlign="left";b.textBaseline="top";0<e?(b.strokeStyle=f,b.fillStyle=h,b.lineWidth=e,b.fillAndStrokeText?b.fillAndStrokeText(a,0,0):(b.strokeText(a,0,0),b.fillText(a,0,0))):(b.fillStyle=h,b.fillText(a,0,0));this.showDbgInfo&&(b.strokeStyle="#ff0000",b.strokeRect(0,0,p,t),b.strokeStyle="#00ff00",b.strokeRect(0,0,k.width,k.height));b.restore();k.bmpWidth=c.canvas.width;k.bmpHeight=c.canvas.height;return c.canvas};g(0,a,"canvasWidth",function(){return c.canvas.width},function(a){c.canvas.width!=a&&(c.canvas.width=a,2048<a&&console.warn("\u753b\u6587\u5b57\u8bbe\u7f6e\u7684\u5bbd\u5ea6\u592a\u5927\uff0c\u8d85\u8fc72048\u4e86"),this.ctx.setTransform(1,0,0,1,0,0),this.ctx.scale(this.lastScaleX,this.lastScaleY))});c.canvas=null;return c}(Pc),Ze=function(a){function c(){this.lastFont="";c.__super.call(this)}n(c,"laya.webgl.resource.CharRender_Native",a);a=c.prototype;a.getWidth=function(a,d){if(!w.conchTextCanvas)return 0;this.lastFont=w.conchTextCanvas.font=a;return w.conchTextCanvas.measureText(d).width};a.scale=function(a,d){};a.getCharBmp=function(a,d,c,h,f,k,m,g,l,n,q){if(!w.conchTextCanvas)return null;this.lastFont=w.conchTextCanvas.font=d;k.width=w.conchTextCanvas.measureText(a).width;d=ba.create(f).numColor;h=ba.create(h).numColor;a=w.conchTextCanvas.getTextBitmapData(a,h,2<c?2:c,d);k.bmpWidth=a.width;k.bmpHeight=a.height;return a};return c}(Pc),af=function(a){function c(){this.transform=null;c.__super.call(this)}n(c,"laya.ani.bone.canvasmesh.SkinMeshForGraphic",a);c.prototype.init2=function(a,d,c,h){this.transform&&(this.transform=null);d=d||[0,1,3,3,1,2];this.texture=a;this.indexes=new Uint16Array(d);this.vertices=new Float32Array(c);this.uvs=new Float32Array(h)};return c}(Je),Za=function(a){function c(){this._drawTriUseAbsMatrix=!1;this._id=++c._COUNT;this._other=null;this._renderNextSubmitIndex=0;this._path=null;this._drawCount=1;this._renderCount=0;this._isConvexCmd=!0;this._triangleMesh=this._pathMesh=this._mesh=this._curSubmit=this._submits=null;this.meshlist=[];this._clipInCache=!1;this._clipID_Gen=this._clipInfoID=0;this._curMat=null;this._lastMat_a=this._lastMatScaleY=this._lastMatScaleX=1;this._lastMat_c=this._lastMat_b=0;this._lastMat_d=1;this._nBlendType=0;this.sprite=this._saveMark=this._charSubmitCache=this._targets=this._save=null;this._drawTextureUseColor=!1;this._italicDeg=0;this._lastTex=null;this._flushCnt=this._fillColor=0;this._colorFiler=null;this._incache=this.drawTexAlign=!1;this.mId=-1;this.mHaveLineKey=this.mHaveKey=!1;c.__super.call(this);this._tmpMatrix=new C;this._drawTexToDrawTri_Vert=new Float32Array(8);this._drawTexToDrawTri_Index=new Uint16Array([0,1,2,0,2,3]);this._tempUV=new Float32Array(8);this._height=this._width=99999999;this._submitKey=new Db;this._transedPoints=Array(8);this._temp4Points=Array(8);this._clipRect=c.MAXCLIPRECT;this._globalClipMatrix=new C(99999999,0,0,99999999,0,0);this._shader2D=new Yb;this.mOutPoint;c._contextcount++;if(!c.defTexture){var a=new ua(2,2);a.setPixels(new Uint8Array(16));a.lock=!0;c.defTexture=new ga(a)}this._lastTex=c.defTexture;this.clear()}var b;n(c,"laya.webgl.canvas.WebGLContext2D",a);a=c.prototype;a.clearBG=function(a,b,c,f){var d=R.mainContext;d.clearColor(a,b,c,f);d.clear(16384)};a._getSubmits=function(){return this._submits};a._releaseMem=function(){if(this._submits){this._curMat.destroy();this._curMat=null;this._shader2D.destroy();this._shader2D=null;this._charSubmitCache.clear();for(var a=0,b=this._submits._length;a<b;a++)this._submits[a].releaseRender();this._submits.length=0;this._submits._length=0;this._save=this._path=this._curSubmit=this._submits=null;a=0;for(b=this.meshlist.length;a<b;a++)this.meshlist[a].destroy();this.meshlist.length=0;this.sprite=null;this._targets&&this._targets.destroy();this._targets=null}};a.destroy=function(){--c._contextcount;this.sprite=null;this._releaseMem();this._charSubmitCache.destroy();this._targets&&this._targets.destroy();this._targets=null;this._mesh.destroy()};a.clear=function(){this._submits||(this._other=b.DEFAULT,this._curMat=C.create(),this._charSubmitCache=new Ce,this._mesh=Va.getAMesh(),this.meshlist.push(this._mesh),this._pathMesh=wb.getAMesh(),this.meshlist.push(this._pathMesh),this._triangleMesh=Jb.getAMesh(),this.meshlist.push(this._triangleMesh),this._submits=[],this._save=[hd.Create(this)],this._save.length=10,this._shader2D=new Yb);this._submitKey.clear();this._mesh.clearVB();this._renderCount++;this._drawCount=1;this._other=b.DEFAULT;this._other.lineWidth=this._shader2D.ALPHA=1;this._nBlendType=0;this._clipRect=c.MAXCLIPRECT;this._curSubmit=ea.RENDERBASE;ea.RENDERBASE._ref=16777215;ea.RENDERBASE._numEle=0;this._shader2D.fillStyle=this._shader2D.strokeStyle=vb.DEFAULT;for(var a=0,e=this._submits._length;a<e;a++)this._submits[a].releaseRender();this._submits._length=0;this._curMat.identity();this._other.clear();this._saveMark=this._save[0];this._save._length=1};a.size=function(a,b){if(this._width!=a||this._height!=b)this._width=a,this._height=b,this._targets&&(this._targets.destroy(),this._targets=new Fa(a,b,1,-1)),r._context==this&&(R.mainContext.viewport(0,0,a,b),Q.width=a,Q.height=b);0===a&&0===b&&this._releaseMem()};a.getMatScaleX=function(){if(this._lastMat_a==this._curMat.a&&this._lastMat_b==this._curMat.b)return this._lastMatScaleX;this._lastMatScaleX=this._curMat.getScaleX();this._lastMat_a=this._curMat.a;this._lastMat_b=this._curMat.b;return this._lastMatScaleX};a.getMatScaleY=function(){if(this._lastMat_c==this._curMat.c&&this._lastMat_d==this._curMat.d)return this._lastMatScaleY;this._lastMatScaleY=this._curMat.getScaleY();this._lastMat_c=this._curMat.c;this._lastMat_d=this._curMat.d;return this._lastMatScaleY};a.setFillColor=function(a){this._fillColor=a};a.getFillColor=function(){return this._fillColor};a.translate=function(a,b){if(0!==a||0!==b)Vd.save(this),this._curMat._bTransform?(Gb.save(this),this._curMat.tx+=a*this._curMat.a+b*this._curMat.c,this._curMat.ty+=a*this._curMat.b+b*this._curMat.d):(this._curMat.tx=a,this._curMat.ty=b)};a.save=function(){this._save[this._save._length++]=hd.Create(this)};a.restore=function(){var a=this._save._length,b=this._nBlendType;if(!(1>a)){for(--a;0<=a;a--){var c=this._save[a];c.restore(this);if(c.isSaveMark()){this._save._length=a;return}}b!=this._nBlendType&&(this._curSubmit=ea.RENDERBASE)}};a.fillText=function(a,b,c,f,k,m){this._fillText(a,null,b,c,f,k,null,0,null)};a._fillText=function(a,b,h,f,k,m,g,l,n,q){void 0===q&&(q=0);a?c._textRender.filltext(this,a,h,f,k,m,g,l,n,q):b&&c._textRender.fillWords(this,b,h,f,k,m,g,l)};a._fast_filltext=function(a,b,h,f,k,m,g,l,n){void 0===n&&(n=0);c._textRender._fast_filltext(this,a,null,b,h,f,k,m,g,l,n)};a.fillWords=function(a,b,c,f,k){this._fillText(null,a,b,c,f,k,null,-1,null,0)};a.fillBorderWords=function(a,b,c,f,k,m,g){this._fillBorderText(null,a,b,c,f,k,m,g,null)};a.drawText=function(a,b,c,f,k,m){this._fillText(a,null,b,c,f,ba.create(k).strColor,null,-1,m)};a.strokeWord=function(a,b,c,f,k,m,g){this._fillText(a,null,b,c,f,null,ba.create(k).strColor,m||1,g)};a.fillBorderText=function(a,b,c,f,k,m,g,l){this._fillBorderText(a,null,b,c,f,ba.create(k).strColor,ba.create(m).strColor,g,l)};a._fillBorderText=function(a,b,c,f,k,m,g,l,n){this._fillText(a,b,c,f,k,m,g,l||1,n)};a._fillRect=function(a,b,c,f,k){var d=this._curSubmit,e=d&&2===d._key.submitType&&d._key.blendShader===this._nBlendType;65535<this._mesh.vertNum+4&&(this._mesh=Va.getAMesh(),this.meshlist.push(this._mesh),e=!1);e&&(e=e&&this.isSameClipInfo(d));this.transformQuad(a,b,c,f,0,this._curMat,this._transedPoints);this.clipedOff(this._transedPoints)||(this._mesh.addQuad(this._transedPoints,ga.NO_UV,k,!1),e||(d=this._curSubmit=bb.create(this,this._mesh,ma.create(1,0)),this._submits[this._submits._length++]=d,this._copyClipInfo(d,this._globalClipMatrix),d.shaderValue.textureHost=this._lastTex,d._key.other=this._lastTex&&this._lastTex.bitmap?this._lastTex.bitmap.id:-1,d._renderType=10016),this._curSubmit._numEle+=6,this._mesh.indexNum+=6,this._mesh.vertNum+=4)};a.fillRect=function(a,b,c,f,k){k=k?vb.create(k):this._shader2D.fillStyle;k=this.mixRGBandAlpha(k.toInt());this._fillRect(a,b,c,f,k)};a.fillTexture=function(a,b,c,f,k,m,g,n){a._getSource()?this._fillTexture(a,a.width,a.height,a.uvrect,b,c,f,k,m,g.x,g.y):this.sprite&&l.systemTimer.callLater(this,this._repaintSprite)};a._fillTexture=function(a,b,c,f,k,m,g,l,n,q,r){65535<this._mesh.vertNum+4&&(this._mesh=Va.getAMesh(),this.meshlist.push(this._mesh));var d=!0,e=!0;switch(n){case "repeat-x":e=!1;break;case "repeat-y":d=!1;break;case "no-repeat":d=e=!1}n=this._temp4Points;var h=0,p=0,t,z;0>q?(t=k,h=-q%b/b):t=k+q;0>r?(z=m,p=-r%c/c):z=m+r;g=k+g;l=m+l;!d&&(g=Math.min(g,k+q+b));!e&&(l=Math.min(l,m+r+c));g<k||l<m||t>g||z>l||(b=(g-k-q)/b,c=(l-m-r)/c,this.transformQuad(t,z,g-t,l-z,0,this._curMat,this._transedPoints),n[0]=h,n[1]=p,n[2]=b,n[3]=p,n[4]=b,n[5]=c,n[6]=h,n[7]=c,this.clipedOff(this._transedPoints)||(c=this._mixRGBandAlpha(4294967295,this._shader2D.ALPHA),this._mesh.addQuad(this._transedPoints,n,c,!0),n=ma.create(1,0),n.defines.add(256),n.u_TexRange=f,f=this._curSubmit=bb.create(this,this._mesh,n),this._submits[this._submits._length++]=f,this._copyClipInfo(f,this._globalClipMatrix),f.shaderValue.textureHost=a,f._renderType=10016,this._curSubmit._numEle+=6,this._mesh.indexNum+=6,this._mesh.vertNum+=4),this.breakNextMerge())};a.setColorFilter=function(a){na.save(this,8388608,this,!0);this._colorFiler=a;this._curSubmit=ea.RENDERBASE};a.drawTexture=function(a,b,c,f,k){this._drawTextureM(a,b,c,f,k,null,1,null)};a.drawTextures=function(a,b,c,f){if(a._getSource())for(var d=b.length/2,e=0,h=a.bitmap.id,g=0;g<d;g++)this._inner_drawTexture(a,h,b[e++]+c,b[e++]+f,0,0,null,null,1,!1);else this.sprite&&l.systemTimer.callLater(this,this._repaintSprite)};a._drawTextureAddSubmit=function(a,b){var d;d=bb.create(this,this._mesh,ma.create(1,0));this._submits[this._submits._length++]=d;d.shaderValue.textureHost=b;d._key.other=a;d._renderType=10016;this._curSubmit=d};a._drawTextureM=function(a,b,c,f,k,m,g,n){return a._getSource()?this._inner_drawTexture(a,a.bitmap.id,b,c,f,k,m,n,g,!1):(this.sprite&&l.systemTimer.callLater(this,this._repaintSprite),!1)};a._drawRenderTexture=function(a,b,c,f,k,m,g,l){return this._inner_drawTexture(a,-1,b,c,f,k,m,l,1,!1)};a.submitDebugger=function(){this._submits[this._submits._length++]=Ga.create([],function(){debugger},this)};a._copyClipInfo=function(a,b){var d=a.shaderValue.clipMatDir;d[0]=b.a;d[1]=b.b;d[2]=b.c;d[3]=b.d;d=a.shaderValue.clipMatPos;d[0]=b.tx;d[1]=b.ty;a.clipInfoID=this._clipInfoID;this._clipInCache&&(a.shaderValue.clipOff[0]=1)};a.isSameClipInfo=function(a){return a.clipInfoID===this._clipInfoID};a._useNewTex2DSubmit=function(a,b){65535<this._mesh.vertNum+b&&(this._mesh=Va.getAMesh(),this.meshlist.push(this._mesh));b=bb.create(this,this._mesh,ma.create(1,0));this._submits[this._submits._length++]=this._curSubmit=b;b.shaderValue.textureHost=a;this._copyClipInfo(b,this._globalClipMatrix)};a._drawTexRect=function(a,b,c,f,k){this.transformQuad(a,b,c,f,this._italicDeg,this._curMat,this._transedPoints);a=this._transedPoints;a[0]=a[0]+.5|0;a[1]=a[1]+.5|0;a[2]=a[2]+.5|0;a[3]=a[3]+.5|0;a[4]=a[4]+.5|0;a[5]=a[5]+.5|0;a[6]=a[6]+.5|0;a[7]=a[7]+.5|0;this.clipedOff(this._transedPoints)||(this._mesh.addQuad(this._transedPoints,k,this._fillColor,!0),this._curSubmit._numEle+=6,this._mesh.indexNum+=6,this._mesh.vertNum+=4)};a.drawCallOptimize=function(a){this._charSubmitCache.enable(a,this);return a};a._inner_drawTexture=function(a,b,c,f,k,m,g,l,n,q){var d=this._curSubmit._key;l=l||a._uv;if(4===d.submitType&&d.other===b){b=this._drawTexToDrawTri_Vert;b[0]=c;b[1]=f;b[2]=c+k;b[3]=f;b[4]=c+k;b[5]=f+m;b[6]=c;b[7]=f+m;this._drawTriUseAbsMatrix=!0;var e=this._tempUV;e[0]=l[0];e[1]=l[1];e[2]=l[2];e[3]=l[3];e[4]=l[4];e[5]=l[5];e[6]=l[6];e[7]=l[7];this.drawTriangles(a,0,0,b,e,this._drawTexToDrawTri_Index,g,n,null,null);this._drawTriUseAbsMatrix=!1;return!0}var e=this._mesh,h=this._curSubmit,p=q?this._charSubmitCache.getPos():this._transedPoints;this.transformQuad(c,f,k||a.width,m||a.height,this._italicDeg,g||this._curMat,p);this.drawTexAlign&&(g=Math.round,p[0]=g(p[0]),p[1]=g(p[1]),p[2]=g(p[2]),p[3]=g(p[3]),p[4]=g(p[4]),p[5]=g(p[5]),p[6]=g(p[6]),p[7]=g(p[7]),this.drawTexAlign=!1);n=this._mixRGBandAlpha(4294967295,this._shader2D.ALPHA*n);if(q)return this._charSubmitCache.add(this,a,b,p,l,n),!0;this._drawCount++;(g=0<=b&&2===d.submitType&&d.other===b)&&(g=g&&this.isSameClipInfo(h));this._lastTex=a;65535<e.vertNum+4&&(e=this._mesh=Va.getAMesh(),this.meshlist.push(e),g=!1);e.addQuad(p,l,n,!0);g||(this._submits[this._submits._length++]=this._curSubmit=h=bb.create(this,e,ma.create(1,0)),h.shaderValue.textureHost=a,h._key.other=b,this._copyClipInfo(h,this._globalClipMatrix));h._numEle+=6;e.indexNum+=6;e.vertNum+=4;return!0};a.transform4Points=function(a,b,c){var d=b.tx,e=b.ty,h=b.a,g=b.b,l=b.c,n=b.d,q=a[0],r=a[1],u=a[2],v=a[3],y=a[4],w=a[5],x=a[6];a=a[7];b._bTransform?(c[0]=q*h+r*l+d,c[1]=q*g+r*n+e,c[2]=u*h+v*l+d,c[3]=u*g+v*n+e,c[4]=y*h+w*l+d,c[5]=y*g+w*n+e,c[6]=x*h+a*l+d,c[7]=x*g+a*n+e):(c[0]=q+d,c[1]=r+e,c[2]=u+d,c[3]=v+e,c[4]=y+d,c[5]=w+e,c[6]=x+d,c[7]=a+e)};a.clipedOff=function(a){return 0>=this._clipRect.width||0>=this._clipRect.height?!0:!1};a.transformQuad=function(a,b,c,f,k,m,g){var d=0;0!=k&&(d=Math.tan(k*Math.PI/180)*f);c=a+c;f=b+f;k=m.tx;var e=m.ty,h=m.a,p=m.b,l=m.c,n=m.d,q=a+d,d=c+d;m._bTransform?(g[0]=q*h+b*l+k,g[1]=q*p+b*n+e,g[2]=d*h+b*l+k,g[3]=d*p+b*n+e,g[4]=c*h+f*l+k,g[5]=c*p+f*n+e,g[6]=a*h+f*l+k,g[7]=a*p+f*n+e):(g[0]=q+k,g[1]=b+e,g[2]=d+k,g[3]=b+e,g[4]=c+k,g[5]=f+e,g[6]=a+k,g[7]=f+e)};a.pushRT=function(){this.addRenderObject(Ga.create(null,Fa.pushRT,this))};a.popRT=function(){this.addRenderObject(Ga.create(null,Fa.popRT,this));this.breakNextMerge()};a.useRT=function(a){this.addRenderObject(Ga.create([a],function(a){if(a)a.start(),a.clear(0,0,0,0);else throw"error useRT";},this));this.breakNextMerge()};a.RTRestore=function(a){this.addRenderObject(Ga.create([a],function(a){a.restore()},this));this.breakNextMerge()};a.breakNextMerge=function(){this._curSubmit=ea.RENDERBASE};a._repaintSprite=function(){this.sprite&&this.sprite.repaint()};a.drawTextureWithTransform=function(a,b,c,f,k,m,g,l,n,q,r){var d=null,e=this._curMat;q&&(d=this.globalCompositeOperation,this.globalCompositeOperation=q);var h=this._colorFiler;r&&this.setColorFilter(r);if(m){var p=this._tmpMatrix;p.a=m.a;p.b=m.b;p.c=m.c;p.d=m.d;p.tx=m.tx+g;p.ty=m.ty+l;p._bTransform=m._bTransform;m&&e._bTransform?(C.mul(p,e,p),m=p,m._bTransform=!0):m=p;this._drawTextureM(a,b,c,f,k,m,n,null)}else this._drawTextureM(a,b+g,c+l,f,k,e,n,null);q&&(this.globalCompositeOperation=d);r&&this.setColorFilter(h)};a._flushToTarget=function(a,b){Q.worldScissorTest=!1;R.mainContext.disable(3089);var d=Q.worldAlpha,c=Q.worldMatrix4,e=Q.worldMatrix;Q.worldMatrix=C.EMPTY;Q.restoreTempArray();Q.worldMatrix4=Q.TEMPMAT4_ARRAY;Q.worldAlpha=1;Ia.activeShader=null;b.start();0<a._submits._length&&b.clear(0,0,0,0);a._curSubmit=ea.RENDERBASE;a.flush();a.clear();b.restore();a._curSubmit=ea.RENDERBASE;Ia.activeShader=null;Q.worldAlpha=d;Q.worldMatrix4=c;Q.worldMatrix=e};a.drawCanvas=function(a,b,c,f,k){if(a){var d=a.context,e;d._targets?(0<d._submits._length&&(e=Ga.create([d,d._targets],this._flushToTarget,this),this._submits[this._submits._length++]=e),this._drawRenderTexture(d._targets,b,c,f,k,null,1,Fa.flipyuv)):(a.touches&&a.touches.forEach(function(a){a.touch()}),e=tf.create(a,this._shader2D.ALPHA,this._shader2D.filters),this._submits[this._submits._length++]=e,e._key.clear(),f=e._matrix,this._curMat.copyTo(f),k=f.tx,d=f.ty,f.tx=f.ty=0,f.transformPoint(P.TEMP.setTo(b,c)),f.translate(P.TEMP.x+k,P.TEMP.y+d),C.mul(a.invMat,f,f));this._curSubmit=ea.RENDERBASE}};a.drawTarget=function(a,b,c,f,k,m,g,l,n){void 0===n&&(n=-1);this._drawCount++;this.mixRGBandAlpha(this._drawTextureUseColor?this.fillStyle?this.fillStyle.toInt():0:4294967295);65535<this._mesh.vertNum+4&&(this._mesh=Va.getAMesh(),this.meshlist.push(this._mesh));this.transformQuad(b,c,f,k,0,m||this._curMat,this._transedPoints);if(!this.clipedOff(this._transedPoints))return this._mesh.addQuad(this._transedPoints,l||ga.DEF_UV,4294967295,!0),a=this._curSubmit=ne.create(this,this._mesh,g,a),a.blendType=-1==n?this._nBlendType:n,this._copyClipInfo(a,this._globalClipMatrix),a._numEle=6,this._mesh.indexNum+=6,this._mesh.vertNum+=4,this._submits[this._submits._length++]=a,this._curSubmit=ea.RENDERBASE,!0;this._curSubmit=ea.RENDERBASE;return!1};a.drawTriangles=function(a,b,c,f,k,m,g,n,z,q){if(a._getSource()){this._drawCount++;q=this._tmpMatrix;var d=this._triangleMesh,e=null,h=!1;z&&(e=this._colorFiler,this._colorFiler=z,this._curSubmit=ea.RENDERBASE,h=e!=z);z=a.bitmap;var p=this._curSubmit._key,p=4===p.submitType&&p.other===z.id&&p.blendShader==this._nBlendType;65535<d.vertNum+f.length/2&&(d=this._triangleMesh=Jb.getAMesh(),this.meshlist.push(d),p=!1);p||(p=this._curSubmit=bb.create(this,d,ma.create(1,0)),p.shaderValue.textureHost=a,p._renderType=10016,p._key.submitType=4,p._key.other=z.id,this._copyClipInfo(p,this._globalClipMatrix),this._submits[this._submits._length++]=p);a=this._mixRGBandAlpha(4294967295,this._shader2D.ALPHA*n);this._drawTriUseAbsMatrix?d.addData(f,k,m,g,a):(g?(q.a=g.a,q.b=g.b,q.c=g.c,q.d=g.d,q.tx=g.tx+b,q.ty=g.ty+c):(q.a=1,q.b=0,q.c=0,q.d=1,q.tx=b,q.ty=c),C.mul(q,this._curMat,q),d.addData(f,k,m,q,a));this._curSubmit._numEle+=m.length;h&&(this._colorFiler=e,this._curSubmit=ea.RENDERBASE)}else this.sprite&&l.systemTimer.callLater(this,this._repaintSprite)};a.transform=function(a,b,c,f,k,m){Gb.save(this);C.mul(C.TEMP.setTo(a,b,c,f,k,m),this._curMat,this._curMat);this._curMat._checkTransform()};a._transformByMatrix=function(a,b,c){a.setTranslate(b,c);C.mul(a,this._curMat,this._curMat);a.setTranslate(0,0);this._curMat._bTransform=!0};a.setTransformByMatrix=function(a){a.copyTo(this._curMat)};a.rotate=function(a){Gb.save(this);this._curMat.rotateEx(a)};a.scale=function(a,b){Gb.save(this);this._curMat.scaleEx(a,b)};a.clipRect=function(a,b,h,f){ce.save(this);this._clipRect==c.MAXCLIPRECT?this._clipRect=new M(a,b,h,f):(this._clipRect.width=h,this._clipRect.height=f,this._clipRect.x=a,this._clipRect.y=b);this._clipID_Gen++;this._clipInfoID=this._clipID_Gen%=1E4;a=this._globalClipMatrix;b=a.tx;h=a.ty;f=b+a.a;var d=h+a.d;99999999<=this._clipRect.width?(a.a=a.d=99999999,a.b=a.c=a.tx=a.ty=0):(this._curMat._bTransform?(a.tx=this._clipRect.x*this._curMat.a+this._clipRect.y*this._curMat.c+this._curMat.tx,a.ty=this._clipRect.x*this._curMat.b+this._clipRect.y*this._curMat.d+this._curMat.ty,a.a=this._clipRect.width*this._curMat.a,a.b=this._clipRect.width*this._curMat.b,a.c=this._clipRect.height*this._curMat.c,a.d=this._clipRect.height*this._curMat.d):(a.tx=this._clipRect.x+this._curMat.tx,a.ty=this._clipRect.y+this._curMat.ty,a.a=this._clipRect.width,a.b=a.c=0,a.d=this._clipRect.height),this._incache&&(this._clipInCache=!0));if(0<a.a&&0<a.d){var e=a.tx+a.a,g=a.ty+a.d;e<=b||g<=h||a.tx>=f||a.ty>=d?(a.a=-.1,a.d=-.1):(a.tx<b&&(a.a-=b-a.tx,a.tx=b),e>f&&(a.a-=e-f),a.ty<h&&(a.d-=h-a.ty,a.ty=h),g>d&&(a.d-=g-d),0>=a.a&&(a.a=-.1),0>=a.d&&(a.d=-.1))}};a.drawMesh=function(a,b,c,f,k,m,g,l,n){};a.addRenderObject=function(a){this._submits[this._submits._length++]=a};a.submitElement=function(a,b){var d=this._submits,c=d._length;0>b&&(b=d._length);for(var e=ea.RENDERBASE;a<b;)this._renderNextSubmitIndex=a+1,d[a]===ea.RENDERBASE?a++:(ea.preRender=e,e=d[a],a+=e.renderSubmit());return c};a.flush=function(){this._clipID_Gen=0;var a=this.submitElement(0,this._submits._length);this._path&&this._path.reset();ad.instance&&ad.getInstance().reset();this._curSubmit=ea.RENDERBASE;for(var b=0,c=this.meshlist.length;b<c;b++){var f=this.meshlist[b];f.canReuse?f.releaseMesh():f.destroy()}this.meshlist.length=0;this._mesh=Va.getAMesh();this._pathMesh=wb.getAMesh();this._triangleMesh=Jb.getAMesh();this.meshlist.push(this._mesh,this._pathMesh,this._triangleMesh);this._flushCnt++;0==this._flushCnt%60&&r._context==this&&(b=l.textRender)&&b.GC(!1);return a};a.setPathId=function(a){this.mId=a;-1!=this.mId&&(this.mHaveKey=!1,a=Ea.getInstance(),a.shapeDic[this.mId]&&(this.mHaveKey=!0),this.mHaveLineKey=!1,a.shapeLineDic[this.mId]&&(this.mHaveLineKey=!0))};a.beginPath=function(a){void 0===a&&(a=!1);this._getPath().beginPath(a)};a.closePath=function(){this._path.closePath()};a.addPath=function(a,b,c,f,k){for(var d=b=0,e=a.length/2;d<e;d++){var h=a[b+1]+k;a[b]+=f;a[b+1]=h;b+=2}this._getPath().push(a,c)};a.fill=function(){var a=this._curMat,b=this._getPath(),c=this._curSubmit,f=3===c._key.submitType&&c._key.blendShader===this._nBlendType;f&&(f=f&&this.isSameClipInfo(c));f||(this._curSubmit=this.addVGSubmit(this._pathMesh));for(var c=this.mixRGBandAlpha(this.fillStyle.toInt()),f=0,k,m=0,g=b.paths.length;m<g;m++){k=b.paths[m];var l=k.path.length/2;if(!(3>l||3==l&&!k.convex)){var n=k.path.concat(),q,r,u,v,y;if(a._bTransform)for(q=0;q<l;q++)r=q<<1,u=r+1,v=n[r],y=n[u],n[r]=a.a*v+a.c*y+a.tx,n[u]=a.b*v+a.d*y+a.ty;else for(q=0;q<l;q++)r=q<<1,u=r+1,v=n[r],y=n[u],n[r]=v+a.tx,n[u]=y+a.ty;65535<this._pathMesh.vertNum+l&&(this._curSubmit._numEle+=f,f=0,this._pathMesh=wb.getAMesh(),this._curSubmit=this.addVGSubmit(this._pathMesh));q=this._pathMesh.vertNum;if(k.convex)for(l-=2,k=Array(3*l),u=r=0;u<l;u++)k[r++]=q,k[r++]=u+1+q,k[r++]=u+2+q;else if(k=He.earcut(n,null,2),0<q)for(l=0;l<k.length;l++)k[l]+=q;this._pathMesh.addVertAndIBToMesh(this,n,c,k);f+=k.length}}this._curSubmit._numEle+=f};a.addVGSubmit=function(a){a=ea.createShape(this,a,0,ma.create(4,0));a._key.submitType=3;this._submits[this._submits._length++]=a;this._copyClipInfo(a,this._globalClipMatrix);return a};a.stroke=function(){if(0<this.lineWidth){var a=this.mixRGBandAlpha(this.strokeStyle._color.numColor),b=this._getPath(),c=this._curSubmit,f=3===c._key.submitType&&c._key.blendShader===this._nBlendType;f&&(f=f&&this.isSameClipInfo(c));f||(this._curSubmit=this.addVGSubmit(this._pathMesh));for(var f=c=0,k=b.paths.length;f<k;f++){var m=b.paths[f];if(!(0>=m.path.length)){var g=[],l=[],n=2*m.path.length;if(!(2>n)){65535<this._pathMesh.vertNum+n&&(this._curSubmit._numEle+=c,c=0,this._pathMesh=wb.getAMesh(),this.meshlist.push(this._pathMesh),this._curSubmit=this.addVGSubmit(this._pathMesh));ve.createLine2(m.path,g,this.lineWidth,this._pathMesh.vertNum,l,m.loop);var m=l.length/2,n=this._curMat,q,r,u,v,y;if(n._bTransform)for(q=0;q<m;q++)r=q<<1,u=r+1,v=l[r],y=l[u],l[r]=n.a*v+n.c*y+n.tx,l[u]=n.b*v+n.d*y+n.ty;else for(q=0;q<m;q++)r=q<<1,u=r+1,v=l[r],y=l[u],l[r]=v+n.tx,l[u]=y+n.ty;this._pathMesh.addVertAndIBToMesh(this,l,a,g);c+=g.length}}}this._curSubmit._numEle+=c}};a.moveTo=function(a,b){var d=this._getPath();d.newPath();d._lastOriX=a;d._lastOriY=b;d.addPoint(a,b)};a.lineTo=function(a,b){var d=this._getPath();.001>Math.abs(a-d._lastOriX)&&.001>Math.abs(b-d._lastOriY)||(d._lastOriX=a,d._lastOriY=b,d.addPoint(a,b))};a.arcTo=function(a,b,h,f,k){var d,e,g=this._path._lastOriX-a,l=this._path._lastOriY-b,n=Math.sqrt(g*g+l*l);if(!(1E-6>=n)){g/=n;l/=n;h-=a;f-=b;var q=Math.sqrt(h*h+f*f);if(!(1E-6>=q||(h/=q,d=f/q,n=g+h,f=l+d,q=Math.sqrt(n*n+f*f),1E-6>=q))){e=n/q;var r=f/q,u=Math.PI/2-Math.acos(e*g+r*l),n=k/Math.tan(u),q=n*g+a;f=n*l+b;k=Math.sqrt(n*n+k*k);a+=e*k;b+=r*k;l=0<=g*d-l*h?2*u/c.SEGNUM:2*-u/c.SEGNUM;g=Math.sin(l);l=Math.cos(l);k=this._path._lastOriX;h=this._path._lastOriY;if(.1<Math.abs(q-this._path._lastOriX)||.1<Math.abs(f-this._path._lastOriY))k=q,h=f,this._path.addPoint(q,f);d=q-a;n=f-b;for(f=0;f<c.SEGNUM;f++){q=d*l+n*g;n=-d*g+n*l;d=q+a;e=n+b;if(.1<Math.abs(k-d)||.1<Math.abs(h-e))this._path.addPoint(d,e),k=d,h=e;d=q}}}};a.arc=function(a,b,c,f,k,m,g){void 0===m&&(m=!1);var d,e,h;g=k-f;if(m)if(Math.abs(g)>=2*Math.PI)g=2*-Math.PI;else for(;0<g;)g-=2*Math.PI;else if(Math.abs(g)>=2*Math.PI)g=2*Math.PI;else for(;0>g;)g+=2*Math.PI;m=this.getMatScaleX();h=this.getMatScaleY();h=Math.max(2*Math.PI*c*(m>h?m:h)/10,10)|0;var p=this._getPath();for(m=0;m<=h;m++)d=f+m/h*g,e=Math.cos(d),d=Math.sin(d),e=a+e*c,d=b+d*c,e==this._path._lastOriX&&d==this._path._lastOriY||p.addPoint(e,d);e=Math.cos(k);d=Math.sin(k);e=a+e*c;d=b+d*c;e==this._path._lastOriX&&d==this._path._lastOriY||p.addPoint(e,d)};a.quadraticCurveTo=function(a,b,c,f){a=jc.I.getBezierPoints([this._path._lastOriX,this._path._lastOriY,a,b,c,f],30,2);b=0;for(var d=a.length/2;b<d;b++)this.lineTo(a[2*b],a[2*b+1]);this.lineTo(c,f)};a.rect=function(a,b,c,f){this._other=this._other.make();this._other.path||(this._other.path=new qc);this._other.path.rect(a,b,c,f)};a.mixRGBandAlpha=function(a){return this._mixRGBandAlpha(a,this._shader2D.ALPHA)};a._mixRGBandAlpha=function(a,b){if(1<=b)return a;var d=(a&4278190080)>>>24;return a&16777215|(0!=d?d*b:255*b)<<24};a.strokeRect=function(a,b,c,f,k){if(0<this.lineWidth){k=this.mixRGBandAlpha(this.strokeStyle._color.numColor);var d=this.lineWidth/2;this._fillRect(a-d,b-d,c+this.lineWidth,this.lineWidth,k);this._fillRect(a-d,b-d+f,c+this.lineWidth,this.lineWidth,k);this._fillRect(a-d,b+d,this.lineWidth,f-this.lineWidth,k);this._fillRect(a-d+c,b+d,this.lineWidth,f-this.lineWidth,k)}};a.clip=function(){};a.drawParticle=function(a,b,c){c.x=a;c.y=b;this._submits[this._submits._length++]=c};a._getPath=function(){return this._path||(this._path=new qc)};a._fillTexture_h=function(a,b,h,f,k,m,g,l){var d=Math.floor(l/f);l%=f;for(var e=0;e<d;e++)this._inner_drawTexture(a,b,m,g,f,k,this._curMat,h,1,!1),m+=f;0<l&&(f=h[0]+l/f*(h[2]-h[0]),d=c.tmpuv1,d[0]=h[0],d[1]=h[1],d[2]=f,d[3]=h[3],d[4]=f,d[5]=h[5],d[6]=h[6],d[7]=h[7],this._inner_drawTexture(a,b,m,g,l,k,this._curMat,d,1,!1))};a._fillTexture_v=function(a,b,h,f,k,m,g,l){var d=Math.floor(l/k);l%=k;for(var e=0;e<d;e++)this._inner_drawTexture(a,b,m,g,f,k,this._curMat,h,1,!1),g+=k;0<l&&(k=h[1]+l/k*(h[7]-h[1]),d=c.tmpuv1,d[0]=h[0],d[1]=h[1],d[2]=h[2],d[3]=h[3],d[4]=h[4],d[5]=k,d[6]=h[6],d[7]=k,this._inner_drawTexture(a,b,m,g,f,l,this._curMat,d,1,!1))};a.drawTextureWithSizeGrid=function(a,b,h,f,k,m,g,l){if(a._getSource()){b+=g;h+=l;var d=a.uv,e=a.bitmap._width,p=a.bitmap._height;g=m[0];l=m[3];var n=g/p,t=l/e,q=m[1],r=m[2],u=q/e,v=r/p,w=m[4];m=!1;f==e&&(l=q=0);k==p&&(g=r=0);l+q>f&&(e=f,m=!0,f=l+q,this.save(),this.clipRect(0+b,0+h,e,k));var e=a.bitmap.id,p=this._curMat,A=this._tempUV,x=d[0],C=d[1],D=d[4],F=d[5],B,H,J;l&&g&&(H=x+t,J=C+n,A[0]=x,A[1]=C,A[2]=H,A[3]=C,A[4]=H,A[5]=J,A[6]=x,A[7]=J,this._inner_drawTexture(a,e,b,h,l,g,p,A,1,!1));q&&g&&(d=D-u,B=C,H=D,J=C+n,A[0]=d,A[1]=B,A[2]=H,A[3]=B,A[4]=H,A[5]=J,A[6]=d,A[7]=J,this._inner_drawTexture(a,e,f-q+b,0+h,q,g,p,A,1,!1));l&&r&&(d=x,B=F-v,H=x+t,J=F,A[0]=d,A[1]=B,A[2]=H,A[3]=B,A[4]=H,A[5]=J,A[6]=d,A[7]=J,this._inner_drawTexture(a,e,0+b,k-r+h,l,r,p,A,1,!1));q&&r&&(d=D-u,B=F-v,H=D,J=F,A[0]=d,A[1]=B,A[2]=H,A[3]=B,A[4]=H,A[5]=J,A[6]=d,A[7]=J,this._inner_drawTexture(a,e,f-q+b,k-r+h,q,r,p,A,1,!1));g&&(d=x+t,B=C,H=D-u,J=C+n,A[0]=d,A[1]=B,A[2]=H,A[3]=B,A[4]=H,A[5]=J,A[6]=d,A[7]=J,w?this._fillTexture_h(a,e,A,a.width-l-q,g,l+b,h,f-l-q):this._inner_drawTexture(a,e,l+b,h,f-l-q,g,p,A,1,!1));r&&(d=x+t,B=F-v,H=D-u,J=F,A[0]=d,A[1]=B,A[2]=H,A[3]=B,A[4]=H,A[5]=J,A[6]=d,A[7]=J,w?this._fillTexture_h(a,e,A,a.width-l-q,r,l+b,k-r+h,f-l-q):this._inner_drawTexture(a,e,l+b,k-r+h,f-l-q,r,p,A,1,!1));l&&(d=x,B=C+n,H=x+t,J=F-v,A[0]=d,A[1]=B,A[2]=H,A[3]=B,A[4]=H,A[5]=J,A[6]=d,A[7]=J,w?this._fillTexture_v(a,e,A,l,a.height-g-r,b,g+h,k-g-r):this._inner_drawTexture(a,e,b,g+h,l,k-g-r,p,A,1,!1));q&&(d=D-u,B=C+n,H=D,J=F-v,A[0]=d,A[1]=B,A[2]=H,A[3]=B,A[4]=H,A[5]=J,A[6]=d,A[7]=J,w?this._fillTexture_v(a,e,A,q,a.height-g-r,f-q+b,g+h,k-g-r):this._inner_drawTexture(a,e,f-q+b,g+h,q,k-g-r,p,A,1,!1));d=x+t;B=C+n;H=D-u;J=F-v;A[0]=d;A[1]=B;A[2]=H;A[3]=B;A[4]=H;A[5]=J;A[6]=d;A[7]=J;w?(n=c.tmpUVRect,n[0]=d,n[1]=B,n[2]=H-d,n[3]=J-B,this._fillTexture(a,a.width-l-q,a.height-g-r,n,l+b,g+h,f-l-q,k-g-r,"repeat",0,0)):this._inner_drawTexture(a,e,l+b,g+h,f-l-q,k-g-r,p,A,1,!1);m&&this.restore()}};g(0,a,"globalCompositeOperation",function(){return la.NAMES[this._nBlendType]},function(a){a=la.TOINT[a];null==a||this._nBlendType===a||(na.save(this,65536,this,!0),this._curSubmit=ea.RENDERBASE,this._nBlendType=a)});g(0,a,"strokeStyle",function(){return this._shader2D.strokeStyle},function(a){this._shader2D.strokeStyle.equal(a)||(na.save(this,512,this._shader2D,!1),this._shader2D.strokeStyle=vb.create(a),this._submitKey.other=-this._shader2D.strokeStyle.toInt())});g(0,a,"globalAlpha",function(){return this._shader2D.ALPHA},function(a){a=Math.floor(1E3*a)/1E3;a!=this._shader2D.ALPHA&&(na.save(this,1,this._shader2D,!1),this._shader2D.ALPHA=a)});g(0,a,"asBitmap",null,function(a){if(a){if(this._targets||(this._targets=new Fa(this._width,this._height,1,-1)),!this._width||!this._height)throw Error("asBitmap no size!");}else this._targets&&this._targets.destroy(),this._targets=null});g(0,a,"fillStyle",function(){return this._shader2D.fillStyle},function(a){this._shader2D.fillStyle.equal(a)||(na.save(this,2,this._shader2D,!1),this._shader2D.fillStyle=vb.create(a),this._submitKey.other=-this._shader2D.fillStyle.toInt())});g(0,a,"textAlign",function(){return this._other.textAlign},function(a){this._other.textAlign===a||(this._other=this._other.make(),na.save(this,32768,this._other,!1),this._other.textAlign=a)});g(0,a,"lineWidth",function(){return this._other.lineWidth},function(a){this._other.lineWidth===a||(this._other=this._other.make(),na.save(this,256,this._other,!1),this._other.lineWidth=a)});g(0,a,"textBaseline",function(){return this._other.textBaseline},function(a){this._other.textBaseline===a||(this._other=this._other.make(),na.save(this,16384,this._other,!1),this._other.textBaseline=a)});g(0,a,"font",null,function(a){this._other=this._other.make();na.save(this,8,this._other,!1)});g(0,a,"canvas",function(){return this._canvas});c.__init__=function(){b.DEFAULT=new b;ze};c.set2DRenderConfig=function(){var a=O.instance;K.setBlend(a,!0);K.setBlendFunc(a,1,771);K.setDepthTest(a,!1);K.setCullFace(a,!1);K.setDepthMask(a,!0);K.setFrontFace(a,2305);r.isConchApp||a.viewport(0,0,Q.width,Q.height)};c._SUBMITVBSIZE=32E3;c._MAXSIZE=99999999;c._MAXVERTNUM=65535;c.MAXCLIPRECT=new M(0,0,99999999,99999999);c._COUNT=0;c.SEGNUM=32;c._contextcount=0;c.defTexture=null;u(c,["_textRender",function(){return this._textRender=new Ba},"tmpuv1",function(){return this.tmpuv1=[0,0,0,0,0,0,0,0]},"tmpUV",function(){return this.tmpUV=[0,0,0,0,0,0,0,0]},"tmpUVRect",function(){return this.tmpUVRect=[0,0,0,0]}]);c.__init$=function(){b=function(){function a(){this.lineWidth=1;this.textBaseline=this.textAlign=this.path=null}n(a,"");var b=a.prototype;b.clear=function(){this.lineWidth=1;this.path&&this.path.clear();this.textAlign=this.textBaseline=null};b.make=function(){return this===a.DEFAULT?new a:this};a.DEFAULT=null;return a}()};return c}(Ca),Ub=function(a){function c(){c.__super.call(this,c.__name2int,c.__int2name,c.__int2nameMap)}n(c,"laya.webgl.shader.d2.ShaderDefines2D",a);c.__init__=function(){c.reg("TEXTURE2D",1);c.reg("PRIMITIVE",4);c.reg("GLOW_FILTER",8);c.reg("BLUR_FILTER",16);c.reg("COLOR_FILTER",32);c.reg("COLOR_ADD",64);c.reg("WORLDMAT",128);c.reg("FILLTEXTURE",256);c.reg("FSHIGHPRECISION",1024);c.reg("MVP3D",2048);c.reg("ALPHAMASK",4096)};c.reg=function(a,d){Kb._reg(a,d,c.__name2int,c.__int2name)};c.toText=function(a,d,c){return Kb._toText(a,d,c)};c.toInt=function(a){return Kb._toInt(a,c.__name2int)};c.TEXTURE2D=1;c.PRIMITIVE=4;c.FILTERGLOW=8;c.FILTERBLUR=16;c.FILTERCOLOR=32;c.COLORADD=64;c.WORLDMAT=128;c.FILLTEXTURE=256;c.SKINMESH=512;c.SHADERDEFINE_FSHIGHPRECISION=1024;c.MVP3D=2048;c.ALPHAMASK=4096;c.NOOPTMASK=312;c.__name2int={};c.__int2name=[];c.__int2nameMap=[];return c}(Kb),be=function(a){function c(a,d){c.__super.call(this,a,d)}n(c,"laya.webgl.utils.RenderSprite3D",a);a=c.prototype;a.onCreate=function(a){switch(a){case 4:this._fun=this._blend}};a._mask=function(a,d,c,h){var b=this._next,e=a.mask;if(e){d.save();var m=new M;m.copyFrom(e.getBounds());m.width=Math.round(m.width);m.height=Math.round(m.height);m.x=Math.round(m.x);m.y=Math.round(m.y);if(0<m.width&&0<m.height){var g=m.width,l=m.height,n=sb.getRT(g,l);d.breakNextMerge();d.pushRT();d.addRenderObject(Ga.create([d,n,g,l],laya.webgl.utils.RenderSprite3D.tmpTarget,this));e.render(d,-m.x,-m.y);d.breakNextMerge();d.popRT();d.save();d.clipRect(c+m.x-a.getStyle().pivotX,h+m.y-a.getStyle().pivotY,g,l);b._fun.call(b,a,d,c,h);d.restore();b=d.globalCompositeOperation;d.addRenderObject(Ga.create(["mask"],laya.webgl.utils.RenderSprite3D.setBlendMode,this));var e=ma.create(1,0),q=ga.INV_UV;d.drawTarget(n,c+m.x-a.getStyle().pivotX,h+m.y-a.getStyle().pivotY,g,l,C.TEMP.identity(),e,q,6);d.addRenderObject(Ga.create([n],laya.webgl.utils.RenderSprite3D.recycleTarget,this));d.addRenderObject(Ga.create([b],laya.webgl.utils.RenderSprite3D.setBlendMode,this))}d.restore()}else b._fun.call(b,a,d,c,h)};a._blend=function(a,d,c,h){var b=a._style,e=this._next;b.blendMode?(d.save(),d.globalCompositeOperation=b.blendMode,e._fun.call(e,a,d,c,h),d.restore()):e._fun.call(e,a,d,c,h)};c.tmpTarget=function(a,d,c,h){d.start();d.clear(0,0,0,0)};c.recycleTarget=function(a){sb.releaseRT(a)};c.setBlendMode=function(a){la.targetFns[la.TOINT[a]](R.mainContext)};u(c,["tempUV",function(){return this.tempUV=Array(8)}]);return c}(Da),L=function(a){function c(){this._height=this._width=this._y=this._x=0;this._visible=!0;this._renderType=this._zOrder=this._mouseState=0;this._transform=null;this._tfChanged=!1;this._graphics=this._boundStyle=this._texture=null;this.hitTestPrior=this.autoSize=this.mouseThrough=!1;this._loadingurl=null;c.__super.call(this);this._repaint=0;this._style=Fb.EMPTY;this._cacheStyle=$b.EMPTY}n(c,"laya.display.Sprite",a);var b=c.prototype;b.destroy=function(b){void 0===b&&(b=!0);a.prototype.destroy.call(this,b);this._style&&this._style.recover();this._cacheStyle&&this._cacheStyle.recover();this._boundStyle&&this._boundStyle.recover();this._transform=this._boundStyle=this._cacheStyle=this._style=null;this._graphics&&this._graphics.autoDestroy&&this._graphics.destroy();this.texture=this._graphics=null};b.updateZOrder=function(){U.updateOrder(this._children)&&this.repaint()};b._getBoundsStyle=function(){this._boundStyle||(this._boundStyle=Re.create());return this._boundStyle};b._setCustomRender=function(){};b._setCacheAs=function(a){};b._checkCanvasEnable=function(){var a=this._cacheStyle.needEnableCanvasRender();(this._getCacheStyle().enableCanvasRender=a)?(this._cacheStyle.needBitmapCache()?this._cacheStyle.cacheAs="bitmap":this._cacheStyle.cacheAs=this._cacheStyle.userSetCache,this._cacheStyle.reCache=!0,this._renderType|=8):(this._cacheStyle.cacheAs="none",this._cacheStyle.releaseContext(),this._renderType&=-9);this._setCacheAs(this._cacheStyle.cacheAs);this._setRenderType(this._renderType)};b.reCache=function(){this._cacheStyle.reCache=!0;this._repaint|=2};b.getRepaint=function(){return this._repaint};b._setX=function(a){this._x=a};b._setY=function(a){this._y=a};b._setWidth=function(a,b){};b._setHeight=function(a,b){};b.setSelfBounds=function(a){this._getBoundsStyle().userBounds=a};b.getBounds=function(){return this._getBoundsStyle().bounds=M._getWrapRec(this._boundPointsToParent())};b.getSelfBounds=function(){return this._boundStyle&&this._boundStyle.userBounds?this._boundStyle.userBounds:this._graphics||0!==this._children.length||this._texture?this._getBoundsStyle().bounds=M._getWrapRec(this._getBoundPointsM(!1)):M.TEMP.setTo(0,0,0,0)};b._boundPointsToParent=function(a){void 0===a&&(a=!1);var b=0,d=0;this._style&&(b=this.pivotX,d=this.pivotY,a=a||0!==this._style.rotation,this._style.scrollRect&&(b+=this._style.scrollRect.x,d+=this._style.scrollRect.y));var c=this._getBoundPointsM(a);if(!c||1>c.length)return c;8!=c.length&&(c=a?za.scanPList(c):M._getWrapRec(c,M.TEMP)._getBoundPoints());if(!this.transform)return U.transPointList(c,this._x-b,this._y-d),c;a=P.TEMP;d=c.length;for(b=0;b<d;b+=2)a.x=c[b],a.y=c[b+1],this.toParentPoint(a),c[b]=a.x,c[b+1]=a.y;return c};b.getGraphicBounds=function(a){void 0===a&&(a=!1);return this._graphics?this._graphics.getBounds(a):M.TEMP.setTo(0,0,0,0)};b._getBoundPointsM=function(a){void 0===a&&(a=!1);if(this._boundStyle&&this._boundStyle.userBounds)return this._boundStyle.userBounds._getBoundPoints();this._boundStyle||this._getBoundsStyle();this._boundStyle.temBM||(this._boundStyle.temBM=[]);if(this._style.scrollRect){a=U.clearArray(this._boundStyle.temBM);var b=M.TEMP;b.copyFrom(this._style.scrollRect);U.concatArray(a,b._getBoundPoints());return a}var d;this._graphics?d=this._graphics.getBoundPoints():(d=U.clearArray(this._boundStyle.temBM),this._texture&&(b=M.TEMP,b.setTo(0,0,this.width||this._texture.width,this.height||this._texture.height),U.concatArray(d,b._getBoundPoints())));for(var c,b=this._children,k=0,m=b.length;k<m;k++)c=b[k],c instanceof laya.display.Sprite&&!0===c._visible&&(c=c._boundPointsToParent(a))&&(d=d?U.concatArray(d,c):c);return d};b._getCacheStyle=function(){this._cacheStyle===$b.EMPTY&&(this._cacheStyle=$b.create());return this._cacheStyle};b.getStyle=function(){this._style===Fb.EMPTY&&(this._style=Fb.create());return this._style};b.setStyle=function(a){this._style=a};b._setScaleX=function(a){this._style.scaleX=a};b._setScaleY=function(a){this._style.scaleY=a};b._setRotation=function(a){this._style.rotation=a};b._setSkewX=function(a){this._style.skewX=a};b._setSkewY=function(a){this._style.skewY=a};b._createTransform=function(){return C.create()};b._adjustTransform=function(){this._tfChanged=!1;var a=this._style,b=a.scaleX,c=a.scaleY,f=a.skewX,k=a.skewY,m=a.rotation,a=this._transform||(this._transform=this._createTransform());if(m||1!==b||1!==c||0!==f||0!==k){a._bTransform=!0;var f=.0174532922222222*(m-f),k=.0174532922222222*(m+k),m=Math.sin(k),g=Math.sin(f),f=Math.cos(f);a.a=b*Math.cos(k);a.b=b*m;a.c=-c*g;a.d=c*f;a.tx=a.ty=0}else a.identity(),this._renderType&=-3,this._setRenderType(this._renderType);return a};b._setTransform=function(a){};b._setPivotX=function(a){this.getStyle().pivotX=a};b._getPivotX=function(){return this._style.pivotX};b._setPivotY=function(a){this.getStyle().pivotY=a};b._getPivotY=function(){return this._style.pivotY};b._setAlpha=function(a){this._style.alpha!==a&&(this.getStyle().alpha=a,this._renderType=1!==a?this._renderType|1:this._renderType&-2,this._setRenderType(this._renderType),this.parentRepaint())};b._getAlpha=function(){return this._style.alpha};b._setBlendMode=function(a){};b._setGraphics=function(a){};b._setGraphicsCallBack=function(){};b._setScrollRect=function(a){};b.pos=function(a,b,c){void 0===c&&(c=!1);if(this._x!==a||this._y!==b){if(this.destroyed)return this;c?(this._setX(a),this._setY(b),this.parentRepaint(2),(a=this._cacheStyle.maskParent)&&a.repaint(2)):(this.x=a,this.y=b)}return this};b.pivot=function(a,b){this.pivotX=a;this.pivotY=b;return this};b.size=function(a,b){this.width=a;this.height=b;return this};b.scale=function(a,b,c){void 0===c&&(c=!1);var d=this.getStyle();if(d.scaleX!=a||d.scaleY!=b){if(this.destroyed)return this;c?(this._setScaleX(a),this._setScaleY(b),this._setTranformChange()):(this.scaleX=a,this.scaleY=b)}return this};b.skew=function(a,b){this.skewX=a;this.skewY=b;return this};b.render=function(a,b,c){Da.renders[this._renderType]._fun(this,a,b+this._x,c+this._y);this._repaint=0};b.drawToCanvas=function(a,b,c,f){return fa.drawToCanvas(this,this._renderType,a,b,c,f)};b.customRender=function(a,b,c){this._repaint=3};b._applyFilters=function(){if(!r.isWebGL){var a;if((a=this._cacheStyle.filters)&&!(1>a.length))for(var b=0,c=a.length;b<c;b++)a[b]._action&&a[b]._action.apply(this._cacheStyle)}};b._setColorFilter=function(a){};b._isHaveGlowFilter=function(){var a,b;if(this.filters)for(a=0;a<this.filters.length;a++)if(8==this.filters[a].type)return!0;a=0;for(b=this._children.length;a<b;a++)if(this._children[a]._isHaveGlowFilter())return!0;return!1};b.localToGlobal=function(a,b,c){void 0===b&&(b=!1);!0===b&&(a=new P(a.x,a.y));b=this;for(c=c||l.stage;b&&!b.destroyed&&b!=c;)a=b.toParentPoint(a),b=b.parent;return a};b.globalToLocal=function(a,b,c){void 0===b&&(b=!1);b&&(a=new P(a.x,a.y));b=this;var d=[];for(c=c||l.stage;b&&!b.destroyed&&b!=c;)d.push(b),b=b.parent;for(c=d.length-1;0<=c;)b=d[c],a=b.fromParentPoint(a),c--;return a};b.toParentPoint=function(a){if(!a)return a;a.x-=this.pivotX;a.y-=this.pivotY;this.transform&&this._transform.transformPoint(a);a.x+=this._x;a.y+=this._y;var b=this._style.scrollRect;b&&(a.x-=b.x,a.y-=b.y);return a};b.fromParentPoint=function(a){if(!a)return a;a.x-=this._x;a.y-=this._y;var b=this._style.scrollRect;b&&(a.x+=b.x,a.y+=b.y);this.transform&&this._transform.invertTransformPoint(a);a.x+=this.pivotX;a.y+=this.pivotY;return a};b.fromStagePoint=function(a){return a};b.on=function(b,c,h,f){return 1!==this._mouseState&&this.isMouseEvent(b)?(this.mouseEnabled=!0,this._setBit(64,!0),this._parent&&this._$2__onDisplay(),this._createListener(b,c,h,f,!1)):a.prototype.on.call(this,b,c,h,f)};b.once=function(b,c,h,f){return 1!==this._mouseState&&this.isMouseEvent(b)?(this.mouseEnabled=!0,this._setBit(64,!0),this._parent&&this._$2__onDisplay(),this._createListener(b,c,h,f,!0)):a.prototype.once.call(this,b,c,h,f)};b._$2__onDisplay=function(){if(1!==this._mouseState){var a;for(a=this.parent;a&&1!==a._mouseState&&!a._getBit(64);)a.mouseEnabled=!0,a._setBit(64,!0),a=a.parent}};b._setParent=function(b){a.prototype._setParent.call(this,b);b&&this._getBit(64)&&this._$2__onDisplay()};b.loadImage=function(a,b){function d(a,d){!c.destroyed&&d&&a==c._loadingurl&&(c.texture=d,c.repaint(3),b&&b.run())}var c=this;this._loadingurl=a;if(null==a)this.texture=null,this.repaint(3);else{var e=x.getRes(a);e?(this.texture=e,this.repaint(3)):(this.texture=null,this.repaint(3),l.loader.load(a,B.create(this,d,[a])))}return this};b.repaint=function(a){void 0===a&&(a=2);this._repaint&a||(this._repaint|=a,this.parentRepaint(a));this._cacheStyle&&this._cacheStyle.maskParent&&this._cacheStyle.maskParent.repaint(a)};b._needRepaint=function(){return this._repaint&2&&this._cacheStyle.enableCanvasRender&&this._cacheStyle.reCache};b._childChanged=function(a){this._renderType=this._children.length?this._renderType|8192:this._renderType&-8193;this._setRenderType(this._renderType);a&&this._getBit(32)&&l.systemTimer.callLater(this,this.updateZOrder);this.repaint(3)};b.parentRepaint=function(a){void 0===a&&(a=2);var b=this._parent;!b||b._repaint&a||(b._repaint|=a,b.parentRepaint(a))};b._setMask=function(a){};b.startDrag=function(a,b,c,f,k,m,g){void 0===b&&(b=!1);void 0===c&&(c=0);void 0===f&&(f=300);void 0===m&&(m=!1);void 0===g&&(g=.92);this._style.dragging||(this.getStyle().dragging=new ff);this._style.dragging.start(this,a,b,c,f,k,m,g)};b.stopDrag=function(){this._style.dragging&&this._style.dragging.stop()};b._setDisplay=function(b){!b&&this._cacheStyle&&(this._cacheStyle.releaseContext(),this._cacheStyle.releaseFilterCache(),this._cacheStyle.hasGlowFilter&&(this._cacheStyle.hasGlowFilter=!1));a.prototype._setDisplay.call(this,b)};b.hitTestPoint=function(a,b){b=this.globalToLocal(P.TEMP.setTo(a,b));a=b.x;b=b.y;return(this._style.hitArea?this._style.hitArea:0<this._width&&0<this._height?M.TEMP.setTo(0,0,this._width,this._height):this.getSelfBounds()).contains(a,b)};b.getMousePoint=function(){return this.globalToLocal(P.TEMP.setTo(l.stage.mouseX,l.stage.mouseY))};b._setTexture=function(a){};b._setRenderType=function(a){};b._setTranformChange=function(){this._tfChanged=!0;this._renderType|=2;this.parentRepaint(2)};b._setBgStyleColor=function(a,b,c,f,k){};b._setBorderStyleColor=function(a,b,c,f,k,m){};b.captureMouseEvent=function(a){Ra.instance.setCapture(this,a)};b.releaseMouseEvent=function(){Ra.instance.releaseCapture()};g(0,b,"customRenderEnable",null,function(a){a&&(this._renderType|=2048,this._setRenderType(this._renderType),this._setCustomRender())});g(0,b,"cacheAs",function(){return this._cacheStyle.cacheAs},function(a){a===this._cacheStyle.userSetCache||this.mask&&"normal"===a||(this._setCacheAs(a),this._getCacheStyle().userSetCache=a,this._checkCanvasEnable(),this.repaint())});g(0,b,"globalScaleY",function(){for(var a=1,b=this;b&&b!==l.stage;)a*=b.scaleY,b=b.parent;return a});g(0,b,"hitArea",function(){return this._style.hitArea},function(a){this.getStyle().hitArea=a});g(0,b,"staticCache",function(){return this._cacheStyle.staticCache},function(a){(this._getCacheStyle().staticCache=a)||this.reCache()});g(0,b,"displayWidth",function(){return this.width*this.scaleX});g(0,b,"zOrder",function(){return this._zOrder},function(a){this._zOrder!=a&&(this._zOrder=a,this._parent&&(a&&this._parent._setBit(32,!0),l.systemTimer.callLater(this._parent,this.updateZOrder)))});g(0,b,"rotation",function(){return this._style.rotation},function(a){this.getStyle().rotation!==a&&(this._setRotation(a),this._setTranformChange())});g(0,b,"width",function(){return this.autoSize?this.texture?this.texture.width:this._graphics||0!==this._children.length?this.getSelfBounds().width:0:this._width||(this.texture?this.texture.width:0)},function(a){this._width!==a&&(this._width=a,this._setWidth(this.texture,a),this._setTranformChange())});g(0,b,"x",function(){return this._x},function(a){this.destroyed||this._x===a||(this._setX(a),this.parentRepaint(2),(a=this._cacheStyle.maskParent)&&a.repaint(2))});g(0,b,"drawCallOptimize",function(){return this._getBit(256)},function(a){this._setBit(256,a)});g(0,b,"texture",function(){return this._texture},function(a){"string"==typeof a?this.loadImage(a):this._texture!=a&&(this._texture&&this._texture._removeReference(),(this._texture=a)&&a._addReference(),this._setTexture(a),this._setWidth(this._texture,this.width),this._setHeight(this._texture,this.height),this._renderType=a?this._renderType|256:this._renderType&-257,this._setRenderType(this._renderType),this.repaint())});g(0,b,"globalRotation",function(){for(var a=0,b=this;b&&b!==l.stage;)a+=b.rotation,b=b.parent;return a});g(0,b,"y",function(){return this._y},function(a){this.destroyed||this._y===a||(this._setY(a),this.parentRepaint(2),(a=this._cacheStyle.maskParent)&&a.repaint(2))});g(0,b,"displayHeight",function(){return this.height*this.scaleY});g(0,b,"height",function(){return this.autoSize?this.texture?this.texture.height:this._graphics||0!==this._children.length?this.getSelfBounds().height:0:this._height||(this.texture?this.texture.height:0)},function(a){this._height!==a&&(this._height=a,this._setHeight(this.texture,a),this._setTranformChange())});g(0,b,"blendMode",function(){return this._style.blendMode},function(a){this._setBlendMode(a);this._renderType=(this.getStyle().blendMode=a)&&"source-over"!=a?this._renderType|4:this._renderType&-5;this._setRenderType(this._renderType);this.parentRepaint()});g(0,b,"scaleX",function(){return this._style.scaleX},function(a){this.getStyle().scaleX!==a&&(this._setScaleX(a),this._setTranformChange())});g(0,b,"scaleY",function(){return this._style.scaleY},function(a){this.getStyle().scaleY!==a&&(this._setScaleY(a),this._setTranformChange())});g(0,b,"stage",function(){return l.stage});g(0,b,"skewX",function(){return this._style.skewX},function(a){this.getStyle().skewX!==a&&(this._setSkewX(a),this._setTranformChange())});g(0,b,"scrollRect",function(){return this._style.scrollRect},function(a){this.getStyle().scrollRect=a;this._setScrollRect(a);this.repaint();this._renderType=a?this._renderType|64:this._renderType&-65;this._setRenderType(this._renderType)});g(0,b,"skewY",function(){return this._style.skewY},function(a){this.getStyle().skewY!==a&&(this._setSkewY(a),this._setTranformChange())});g(0,b,"transform",function(){return this._tfChanged?this._adjustTransform():this._transform},function(a){this._tfChanged=!1;var b=this._transform||(this._transform=this._createTransform());a.copyTo(b);this._setTransform(b);a&&(this._x=b.tx,this._y=b.ty,b.tx=b.ty=0);this._renderType=a?this._renderType|2:this._renderType&-3;this._setRenderType(this._renderType);this.parentRepaint()});g(0,b,"pivotX",function(){return this._getPivotX()},function(a){this._setPivotX(a);this.repaint()});g(0,b,"pivotY",function(){return this._getPivotY()},function(a){this._setPivotY(a);this.repaint()});g(0,b,"alpha",function(){return this._getAlpha()},function(a){this._setAlpha(0>a?0:1<a?1:a)});g(0,b,"visible",function(){return this._visible},function(a){this._visible!==a&&(this._visible=a,this.parentRepaint(3))});g(0,b,"graphics",function(){this._graphics||(this.graphics=new Ma,this._graphics.autoDestroy=!0);return this._graphics},function(a){this._graphics&&(this._graphics._sp=null);(this._graphics=a)?(this._setGraphics(a),this._renderType|=512,a._sp=this):this._renderType&=-513;this._setRenderType(this._renderType);this.repaint()});g(0,b,"filters",function(){return this._cacheStyle.filters},function(a){a&&0===a.length&&(a=null);this._cacheStyle.filters!=a&&(this._getCacheStyle().filters=a?a.slice():null,r.isWebGL&&(a&&a.length?(this._setColorFilter(a[0]),this._renderType|=16):(this._setColorFilter(null),this._renderType&=-17),this._setRenderType(this._renderType)),a&&0<a.length?(this._getBit(16)||this._setBitUp(16),r.isWebGL&&1==a.length&&a[0]instanceof laya.filters.ColorFilter||(this._getCacheStyle().cacheForFilters=!0,this._checkCanvasEnable())):this._cacheStyle.cacheForFilters&&(this._cacheStyle.cacheForFilters=!1,this._checkCanvasEnable()),this._getCacheStyle().hasGlowFilter=this._isHaveGlowFilter(),this.repaint())});g(0,b,"mask",function(){return this._cacheStyle.mask},function(a){a&&this.mask&&this.mask._cacheStyle.maskParent||(this._getCacheStyle().mask=a,this._setMask(a),this._checkCanvasEnable(),a?a._getCacheStyle().maskParent=this:this.mask&&(this.mask._getCacheStyle().maskParent=null),this._renderType|=32,this._setRenderType(this._renderType),this.parentRepaint(3))});g(0,b,"mouseEnabled",function(){return 1<this._mouseState},function(a){this._mouseState=a?2:1});g(0,b,"globalScaleX",function(){for(var a=1,b=this;b&&b!==l.stage;)a*=b.scaleX,b=b.parent;return a});g(0,b,"mouseX",function(){return this.getMousePoint().x});g(0,b,"mouseY",function(){return this.getMousePoint().y});g(0,b,"viewport",function(){return this._style.viewport},function(a){if("string"==typeof a){var b;b=a.split(",");3<b.length&&(a=new M(parseFloat(b[0]),parseFloat(b[1]),parseFloat(b[2]),parseFloat(b[3])))}this.getStyle().viewport=a});c.fromImage=function(a){return(new c).loadImage(a)};return c}(jf),nc=function(a){function c(){this._aniMap={};this.unfixedLastAniIndex=-1;this._fullFrames=null;this._boneCurKeyFrm=[];c.__super.call(this);this._anis=[]}n(c,"laya.ani.AnimationTemplet",a);a=c.prototype;a.parse=function(a){a=new Sa(a);this._aniVersion=a.readUTFString();ed.parse(this,a)};a._calculateKeyFrame=function(a,d,c){a=a.keyFrame;a[d]=a[0];for(var b=0;b<d;b++)for(var e=a[b],k=0;k<c;k++)e.dData[k]=0===e.duration?0:(a[b+1].data[k]-e.data[k])/e.duration,e.nextData[k]=a[b+1].data[k];a.length--};a._onAsynLoaded=function(a,d){a=new Sa(a);this._aniVersion=a.readUTFString();switch(this._aniVersion){case "LAYAANIMATION:02":Ve.parse(this,a);break;default:ed.parse(this,a)}};a.getAnimationCount=function(){return this._anis.length};a.getAnimation=function(a){return this._anis[a]};a.getAniDuration=function(a){return this._anis[a].playTime};a.getNodes=function(a){return this._anis[a].nodes};a.getNodeIndexWithName=function(a,d){return this._anis[a].bone3DMap[d]};a.getNodeCount=function(a){return this._anis[a].nodes.length};a.getTotalkeyframesLength=function(a){return this._anis[a].totalKeyframeDatasLength};a.getPublicExtData=function(){return this._publicExtData};a.getAnimationDataWithCache=function(a,d,c,h){return(d=d[c])?(a=d[a])?a[h]:null:null};a.setAnimationDataWithCache=function(a,d,c,h,f){d=d[c]||(d[c]={});(d[a]||(d[a]=[]))[h]=f};a.getNodeKeyFrame=function(a,d,c){var b=this._boneCurKeyFrm[d],e=a.length;if(void 0==b||b>=e)b=this._boneCurKeyFrm[d]=0;var k=a[b],m=c-k.startTime;if(0==m||0<m&&k.duration>m)return b;if(0<m){c+=.01;for(m=b+1;m<e;m++)if(k=a[m],k.startTime<=c&&k.startTime+k.duration>c)return this._boneCurKeyFrm[d]=m;return e-1}for(m=0;m<b;m++)if(k=a[m],k.startTime<=c&&k.startTime+k.duration>c)return this._boneCurKeyFrm[d]=m;return b};a.getOriginalData=function(a,d,e,h,f){a=this._anis[a].nodes;e=this._boneCurKeyFrm;e.length<a.length&&(e.length=a.length);var b;e=0;h=a.length;for(var m=0;e<h;e++){var g=a[e],l;l=g.keyFrame;l=l[this.getNodeKeyFrame(l,e,f)];g.dataOffset=m;var n=f-l.startTime;if(b=g.lerpType)switch(b){case 0:case 1:for(b=0;b<g.keyframeWidth;)b+=g.interpolationMethod[b](g,b,d,m+b,l.data,n,l.dData,l.duration,l.nextData);break;case 2:var q=l.interpolationData,r=q.length,u=0;for(b=0;b<r;){var v=q[b];switch(v){case 6:b+=c.interpolation[v](g,u,d,m+u,l.data,n,l.dData,l.duration,l.nextData,q,b+1);break;case 7:b+=c.interpolation[v](g,u,d,m+u,l.data,n,l.dData,l.duration,l.nextData,q,b+1);break;default:b+=c.interpolation[v](g,u,d,m+u,l.data,n,l.dData,l.duration,l.nextData)}u++}}else for(b=0;b<g.keyframeWidth;)b+=g.interpolationMethod[b](g,b,d,m+b,l.data,n,l.dData,l.duration,l.nextData);m+=g.keyframeWidth}};a.getNodesCurrentFrameIndex=function(a,d){var b=this._anis[a].nodes;a!==this.unfixedLastAniIndex&&(this.unfixedCurrentFrameIndexes=new Uint32Array(b.length),this.unfixedCurrentTimes=new Float32Array(b.length),this.unfixedLastAniIndex=a);a=0;for(var c=b.length;a<c;a++){var f=b[a];d<this.unfixedCurrentTimes[a]&&(this.unfixedCurrentFrameIndexes[a]=0);for(this.unfixedCurrentTimes[a]=d;this.unfixedCurrentFrameIndexes[a]<f.keyFrame.length&&!(f.keyFrame[this.unfixedCurrentFrameIndexes[a]].startTime>this.unfixedCurrentTimes[a]);)this.unfixedCurrentFrameIndexes[a]++;this.unfixedCurrentFrameIndexes[a]--}return this.unfixedCurrentFrameIndexes};a.getOriginalDataUnfixedRate=function(a,d,e){var b=this._anis[a].nodes;a!==this.unfixedLastAniIndex&&(this.unfixedCurrentFrameIndexes=new Uint32Array(b.length),this.unfixedCurrentTimes=new Float32Array(b.length),this.unfixedKeyframes=ca(b.length),this.unfixedLastAniIndex=a);for(var f=0,k=b.length,m=0;f<k;f++){var g=b[f];e<this.unfixedCurrentTimes[f]&&(this.unfixedCurrentFrameIndexes[f]=0);for(this.unfixedCurrentTimes[f]=e;this.unfixedCurrentFrameIndexes[f]<g.keyFrame.length&&!(g.keyFrame[this.unfixedCurrentFrameIndexes[f]].startTime>this.unfixedCurrentTimes[f]);)this.unfixedKeyframes[f]=g.keyFrame[this.unfixedCurrentFrameIndexes[f]],this.unfixedCurrentFrameIndexes[f]++;var l=this.unfixedKeyframes[f];g.dataOffset=m;var n=e-l.startTime;if(g.lerpType)switch(g.lerpType){case 0:case 1:for(a=0;a<g.keyframeWidth;)a+=g.interpolationMethod[a](g,a,d,m+a,l.data,n,l.dData,l.duration,l.nextData);break;case 2:var q=l.interpolationData,r=q.length,u=0;for(a=0;a<r;){var v=q[a];switch(v){case 6:a+=c.interpolation[v](g,u,d,m+u,l.data,n,l.dData,l.duration,l.nextData,q,a+1);break;case 7:a+=c.interpolation[v](g,u,d,m+u,l.data,n,l.dData,l.duration,l.nextData,q,a+1);break;default:a+=c.interpolation[v](g,u,d,m+u,l.data,n,l.dData,l.duration,l.nextData)}u++}}else for(a=0;a<g.keyframeWidth;)a+=g.interpolationMethod[a](g,a,d,m+a,l.data,n,l.dData,l.duration,l.nextData);m+=g.keyframeWidth}};c._LinearInterpolation_0=function(a,d,c,h,f,k,m,g,l,n){c[h]=f[d]+k*m[d];return 1};c._QuaternionInterpolation_1=function(a,d,c,h,f,k,m,g,l,n){Hb.slerpQuaternionArray(f,d,l,d,0===g?0:k/g,c,h);return 4};c._AngleInterpolation_2=function(a,d,c,h,f,k,m,g,l,n){return 0};c._RadiansInterpolation_3=function(a,d,c,h,f,k,m,g,l,n){return 0};c._Matrix4x4Interpolation_4=function(a,d,c,h,f,k,m,g,l,n){for(a=0;16>a;a++,d++)c[h+a]=f[d]+k*m[d];return 16};c._NoInterpolation_5=function(a,d,c,h,f,k,m,g,l,n){c[h]=f[d];return 1};c._BezierInterpolation_6=function(a,d,c,h,f,k,m,g,l,n,q){void 0===q&&(q=0);c[h]=f[d]+(l[d]-f[d])*fd.getBezierRate(k/g,n[q],n[q+1],n[q+2],n[q+3]);return 5};c._BezierInterpolation_7=function(a,d,c,h,f,k,m,g,l,n,q){void 0===q&&(q=0);c[h]=n[q+4]+n[q+5]*fd.getBezierRate((.001*k+n[q+6])/n[q+7],n[q],n[q+1],n[q+2],n[q+3]);return 9};c.interpolation=[c._LinearInterpolation_0,c._QuaternionInterpolation_1,c._AngleInterpolation_2,c._RadiansInterpolation_3,c._Matrix4x4Interpolation_4,c._NoInterpolation_5,c._BezierInterpolation_6,c._BezierInterpolation_7];return c}(cb),Ia=function(a){function c(){c.__super.call(this)}n(c,"laya.webgl.shader.BaseShader",a);c.activeShader=null;c.bindShader=null;return c}(cb),tc=function(a){function c(){c.__super.call(this);this._height=this._width=-1}n(c,"laya.resource.Bitmap",a);a=c.prototype;a._getSource=function(){throw"Bitmap: must override it.";};g(0,a,"width",function(){return this._width});g(0,a,"height",function(){return this._height});return c}(cb),oc=function(a){function c(a,d){this._source=null;this._texH=this._texW=0;this.__destroyed=!1;this.genID=this._discardTm=0;this.bitmap={id:0,_glTexture:null};this.lastTouchTm=this.curUsedCovRateAtlas=this.curUsedCovRate=0;this.ri=null;c.__super.call(this);this._texW=a||Ba.atlasWidth;this._texH=d||Ba.atlasWidth;this.bitmap.id=this.id;this.lock=!0}n(c,"laya.webgl.text.TextTexture",a);a=c.prototype;a.recreateResource=function(){if(!this._source){var a=r.isConchApp?O.instance.getDefaultCommandEncoder():R.mainContext,d=this._source=a.createTexture();this.bitmap._glTexture=d;K.bindTexture(a,3553,d);a.texImage2D(3553,0,6408,this._texW,this._texH,0,6408,5121,null);a.texParameteri(3553,10241,9729);a.texParameteri(3553,10240,9729);a.texParameteri(3553,10242,33071);a.texParameteri(3553,10243,33071);Ba.debugUV&&this.fillWhite()}};a.addChar=function(a,d,c,h){if(Ba.isWan1Wan)return this.addCharCanvas(a,d,c,h);!this._source&&this.recreateResource();var b=r.isConchApp?O.instance.getDefaultCommandEncoder():R.mainContext;K.bindTexture(b,3553,this._source);!r.isConchApp&&b.pixelStorei(37441,!0);var e=a.data;a.data instanceof Uint8ClampedArray&&(e=new Uint8Array(e.buffer));b.texSubImage2D(3553,0,d,c,a.width,a.height,6408,5121,e);!r.isConchApp&&b.pixelStorei(37441,!1);r.isConchApp?(b=d/this._texW,e=c/this._texH,d=(d+a.width)/this._texW,a=(c+a.height)/this._texH):(b=(d+1)/this._texW,e=c/this._texH,d=(d+a.width-1)/this._texW,a=(c+a.height-1)/this._texH);h=h||Array(8);h[0]=b;h[1]=e;h[2]=d;h[3]=e;h[4]=d;h[5]=a;h[6]=b;h[7]=a;return h};a.addCharCanvas=function(a,d,c,h){!this._source&&this.recreateResource();var b=r.isConchApp?O.instance.getDefaultCommandEncoder():R.mainContext;K.bindTexture(b,3553,this._source);!r.isConchApp&&b.pixelStorei(37441,!0);b.texSubImage2D(3553,0,d,c,6408,5121,a);!r.isConchApp&&b.pixelStorei(37441,!1);var e;r.isConchApp?(b=d/this._texW,e=c/this._texH,d=(d+a.width)/this._texW,a=(c+a.height)/this._texH):(b=(d+1)/this._texW,e=(c+1)/this._texH,d=(d+a.width-1)/this._texW,a=(c+a.height-1)/this._texH);h=h||Array(8);h[0]=b;h[1]=e;h[2]=d;h[3]=e;h[4]=d;h[5]=a;h[6]=b;h[7]=a;return h};a.fillWhite=function(){!this._source&&this.recreateResource();var a=r.isConchApp?O.instance.getDefaultCommandEncoder():R.mainContext,d=new Uint8Array(this._texW*this._texH*4);d.fill(255);a.texSubImage2D(3553,0,0,0,this._texW,this._texH,6408,5121,d)};a.discard=function(){this.destroy()};a.destroy=function(){console.log("destroy TextTexture");this.__destroyed=!0;var a=r.isConchApp?O.instance.getDefaultCommandEncoder():R.mainContext;this._source&&a.deleteTexture(this._source);this._source=null};a.touchRect=function(a,d){this.lastTouchTm!=d&&(this.curUsedCovRateAtlas=this.curUsedCovRate=0,this.lastTouchTm=d);d=Ba.atlasWidth*Ba.atlasWidth;var b=yb.atlasGridW*yb.atlasGridW;this.curUsedCovRate+=a.bmpWidth*a.bmpHeight/d;this.curUsedCovRateAtlas+=Math.ceil(a.bmpWidth/yb.atlasGridW)*Math.ceil(a.bmpHeight/yb.atlasGridW)/(d/b)};a._getSource=function(){return this._source};a.drawOnScreen=function(a,d){};g(0,a,"texture",function(){return this});c.getTextTexture=function(a,d){return a!=Ba.atlasWidth||a!=Ba.atlasWidth?new c(a,d):0<c.poolLen?(a=c.pool[--c.poolLen],0<c.poolLen&&c.clean(),a):new c(a,d)};c.clean=function(){var a=l.stage.getFrameTm();0===c.cleanTm&&(c.cleanTm=a);if(a-c.cleanTm>=Ba.checkCleanTextureDt){for(var d=0;d<c.poolLen;d++){var e=c.pool[d];a-e._discardTm>=Ba.destroyUnusedTextureDt&&(e.destroy(),c.pool[d]=c.pool[c.poolLen-1],c.poolLen--,d--)}c.cleanTm=a}};c.poolLen=0;c.cleanTm=0;u(c,["pool",function(){return this.pool=Array(10)}]);return c}(cb),lf=function(a){function c(a){this._resumePlay=this._onEnd=this._audio=null;c.__super.call(this);this._onEnd=U.bind(this.__onEnd,this);this._resumePlay=U.bind(this.__resumePlay,this);a.addEventListener("ended",this._onEnd);this._audio=a}n(c,"laya.media.h5audio.AudioSoundChannel",a);var b=c.prototype;b.__onEnd=function(){1==this.loops?(this.completeHandler&&(l.systemTimer.once(10,this,this.__runComplete,[this.completeHandler],!1),this.completeHandler=null),this.stop(),this.event("complete")):(0<this.loops&&this.loops--,this.startTime=0,this.play())};b.__resumePlay=function(){this._audio&&this._audio.removeEventListener("canplay",this._resumePlay);if(!this.isStopped)try{this._audio.currentTime=this.startTime,q.container.appendChild(this._audio),this._audio.play()}catch(d){this.event("error")}};b.play=function(){this.isStopped=!1;try{this._audio.playbackRate=X.playbackRate,this._audio.currentTime=this.startTime}catch(d){this._audio.addEventListener("canplay",this._resumePlay);return}X.addChannel(this);q.container.appendChild(this._audio);"play"in this._audio&&this._audio.play()};b.stop=function(){a.prototype.stop.call(this);this.isStopped=!0;X.removeChannel(this);this.completeHandler=null;this._audio&&("pause"in this._audio&&r.isConchApp&&this._audio.stop(),this._audio.pause(),this._audio.removeEventListener("ended",this._onEnd),this._audio.removeEventListener("canplay",this._resumePlay),q.onIE||this._audio!=xb._musicAudio&&v.recover("audio:"+this.url,this._audio),q.removeElement(this._audio),this._audio=null,X.autoReleaseSound&&X.disposeSoundLater(this.url))};b.pause=function(){this.isStopped=!0;X.removeChannel(this);"pause"in this._audio&&this._audio.pause();X.autoReleaseSound&&X.disposeSoundLater(this.url)};b.resume=function(){this._audio&&(this.isStopped=!1,X.addChannel(this),"play"in this._audio&&this._audio.play())};g(0,b,"position",function(){return this._audio?this._audio.currentTime:0});g(0,b,"duration",function(){return this._audio?this._audio.duration:0});g(0,b,"volume",function(){return this._audio?this._audio.volume:1},function(a){this._audio&&(this._audio.volume=a)});return c}(rc),pf=function(a){function c(){this.bufferSource=this.gain=this.audioBuffer=null;this._currentTime=0;this._volume=1;this._pauseTime=this._startTime=0;this._onPlayEnd=null;this.context=Wa.ctx;c.__super.call(this);this._onPlayEnd=U.bind(this.__onPlayEnd,this);this.gain=this.context.createGain?this.context.createGain():this.context.createGainNode()}n(c,"laya.media.webaudio.WebAudioSoundChannel",a);var b=c.prototype;b.play=function(){X.addChannel(this);this.isStopped=!1;this._clearBufferSource();if(this.audioBuffer){var a=this.context,b=this.gain,c=a.createBufferSource();this.bufferSource=c;c.buffer=this.audioBuffer;c.connect(b);b&&b.disconnect();b.connect(a.destination);c.onended=this._onPlayEnd;this.startTime>=this.duration&&(this.startTime=0);this._startTime=q.now();this.gain.gain.setTargetAtTime?this.gain.gain.setTargetAtTime(this._volume,this.context.currentTime,.001):this.gain.gain.value=this._volume;0==this.loops&&(c.loop=!0);c.playbackRate.setTargetAtTime?c.playbackRate.setTargetAtTime(X.playbackRate,this.context.currentTime,.001):c.playbackRate.value=X.playbackRate;c.start(0,this.startTime);this._currentTime=0}};b.__onPlayEnd=function(){1==this.loops?(this.completeHandler&&(l.timer.once(10,this,this.__runComplete,[this.completeHandler],!1),this.completeHandler=null),this.stop(),this.event("complete")):(0<this.loops&&this.loops--,this.startTime=0,this.play())};b._clearBufferSource=function(){if(this.bufferSource){var a=this.bufferSource;a.stop?a.stop(0):a.noteOff(0);a.disconnect(0);a.onended=null;c._tryCleanFailed||this._tryClearBuffer(a);this.bufferSource=null}};b._tryClearBuffer=function(a){if(q.onMac)try{a.buffer=Wa._miniBuffer}catch(e){c._tryCleanFailed=!0}else try{a.buffer=null}catch(e){c._tryCleanFailed=!0}};b.stop=function(){a.prototype.stop.call(this);this._clearBufferSource();this.audioBuffer=null;this.gain&&this.gain.disconnect();this.isStopped=!0;X.removeChannel(this);this.completeHandler=null;X.autoReleaseSound&&X.disposeSoundLater(this.url)};b.pause=function(){this.isStopped||(this._pauseTime=this.position);this._clearBufferSource();this.gain&&this.gain.disconnect();this.isStopped=!0;X.removeChannel(this);X.autoReleaseSound&&X.disposeSoundLater(this.url)};b.resume=function(){this.startTime=this._pauseTime;this.play()};g(0,b,"position",function(){return this.bufferSource?(q.now()-this._startTime)/1E3+this.startTime:0});g(0,b,"duration",function(){return this.audioBuffer?this.audioBuffer.duration:0});g(0,b,"volume",function(){return this._volume},function(a){this._volume=a;this.isStopped||(this.gain.gain.setTargetAtTime?this.gain.gain.setTargetAtTime(a,this.context.currentTime,.001):this.gain.gain.value=a)});c._tryCleanFailed=!1;c.SetTargetDelay=.001;return c}(rc),of=function(a){function c(a,d){this._miniSound=this._onEnd=this._audio=null;c.__super.call(this);this._audio=a;this._miniSound=d;this._onEnd=c.bindToThis(this.__onEnd,this);a.onEnded(this._onEnd)}n(c,"laya.wx.mini.MiniSoundChannel",a);a=c.prototype;a.__onEnd=function(){hc._audioCache[this.url]=this._miniSound;1==this.loops?(this.completeHandler&&(l.systemTimer.once(10,this,this.__runComplete,[this.completeHandler],!1),this.completeHandler=null),this.stop(),this.event("complete")):(0<this.loops&&this.loops--,this.startTime=0,this.play())};a.play=function(){this.isStopped=!1;X.addChannel(this);this._audio.play()};a.stop=function(){this.isStopped=!0;X.removeChannel(this);this.completeHandler=null;this._audio&&(this._audio.stop(),this._audio.offEnded(null),this._miniSound.dispose(),this._onEnd=this._miniSound=this._audio=null)};a.pause=function(){this.isStopped=!0;this._audio.pause()};a.resume=function(){this._audio&&(this.isStopped=!1,X.addChannel(this),this._audio.play())};g(0,a,"startTime",null,function(a){this._audio&&(this._audio.startTime=a)});g(0,a,"autoplay",function(){return this._audio.autoplay},function(a){this._audio.autoplay=a});g(0,a,"position",function(){return this._audio?this._audio.currentTime:0});g(0,a,"duration",function(){return this._audio?this._audio.duration:0});g(0,a,"loop",function(){return this._audio.loop},function(a){this._audio.loop=a});g(0,a,"volume",function(){return this._audio?this._audio.volume:1},function(a){this._audio&&(this._audio.volume=a)});c.bindToThis=function(a,d){return a.bind(d)};return c}(rc);(function(a){function c(){c.__super.call(this)}n(c,"laya.debug.tools.enginehook.LoaderHook",a);var b=c.prototype;b.checkUrls=function(a){if(c.preFails["string"==typeof a?a:a.url]&&c.enableFailDebugger)debugger};b.chekUrlList=function(a){var b,d;d=a.length;for(b=0;b<d;b++)this.checkUrls(a[b])};b.load=function(b,c,h,f,k,m,g,l,n){void 0===k&&(k=1);void 0===m&&(m=!0);void 0===l&&(l=!1);void 0===n&&(n=!1);b instanceof Array?this.chekUrlList(b):this.checkUrls(b);return a.prototype.load.call(this,b,c,h,f,k,m,g,l,n)};c.init=function(){c.isInited||(c.isInited=!0,l.loader=new c,l.loader.on("error",null,c.onFail),c.preFails=kb.getJSON("LoadFailItems"),c.preFails||(c.preFails={}))};c.onFail=function(a){c.nowFails[a]=!0;kb.setJSON("LoadFailItems",c.nowFails)};c.resetFails=function(){c.nowFails={};kb.setJSON("LoadFailItems",c.nowFails)};c.preFails={};c.nowFails={};c.enableFailDebugger=!0;c.FailSign="LoadFailItems";c.isInited=!1;return c})(La);var Fc=function(a){function c(a){this._uint16Array=null;void 0===a&&(a=35044);c.__super.call(this);this._bufferUsage=a;this._bufferType=34963;this._buffer=new ArrayBuffer(8)}n(c,"laya.webgl.utils.IndexBuffer2D",a);a=c.prototype;a._checkArrayUse=function(){this._uint16Array&&(this._uint16Array=new Uint16Array(this._buffer))};a.getUint16Array=function(){return this._uint16Array||(this._uint16Array=new Uint16Array(this._buffer))};a._bindForVAO=function(){O.instance.bindBuffer(34963,this._glBuffer)};a.bind=function(){return Oa._bindedIndexBuffer!==this._glBuffer?(O.instance.bindBuffer(34963,this._glBuffer),Oa._bindedIndexBuffer=this._glBuffer,!0):!1};a.destory=function(){this._buffer=this._uint16Array=null};a.disposeResource=function(){this._disposeResource()};c.create=function(a){void 0===a&&(a=35044);return new c(a)};return c}(Zb),Ec=function(a){function c(a,d){this._uint32Array=this._floatArray32=null;this._vertexStride=0;c.__super.call(this);this._vertexStride=a;this._bufferUsage=d;this._bufferType=34962;this._buffer=new ArrayBuffer(8);this._floatArray32=new Float32Array(this._buffer);this._uint32Array=new Uint32Array(this._buffer)}n(c,"laya.webgl.utils.VertexBuffer2D",a);a=c.prototype;a.getFloat32Array=function(){return this._floatArray32};a.appendArray=function(a){var b=this._byteLength>>2;this.setByteLength(this._byteLength+4*a.length);this.getFloat32Array().set(a,b);this._upload=!0};a._checkArrayUse=function(){this._floatArray32&&(this._floatArray32=new Float32Array(this._buffer));this._uint32Array&&(this._uint32Array=new Uint32Array(this._buffer))};a.deleteBuffer=function(){this._disposeResource()};a._bindForVAO=function(){O.instance.bindBuffer(34962,this._glBuffer)};a.bind=function(){return Oa._bindedVertexBuffer!==this._glBuffer?(O.instance.bindBuffer(34962,this._glBuffer),Oa._bindedVertexBuffer=this._glBuffer,!0):!1};a.destroy=function(){laya.webgl.utils.Buffer.prototype.destroy.call(this);this._byteLength=0;this._upload=!0;this._floatArray32=this._buffer=null};g(0,a,"vertexStride",function(){return this._vertexStride});c.create=function(a,d){void 0===d&&(d=35048);return new c(a,d)};return c}(Zb),Yc=function(a){function c(){this.autoDestroyAtClosed=!1;this._timer=this.url=null;this._viewCreated=!1;this._idMap=null;this._$componentType="Scene";this.isCloseWhenChangeMap=!0;c.__super.call(this);this._setBit(8,!0);c.unDestroyedScenes.push(this);this._scene=this;this.createChildren()}n(c,"laya.display.Scene",a);var b=c.prototype;b.createChildren=function(){};b.loadScene=function(a){a=-1<a.indexOf(".")?a:a+".scene";var b=l.loader.getRes(a);b?this.createView(b):(l.loader.resetProgress(),b=new id,b.on("complete",this,this._onSceneLoaded,[a]),b.load(a))};b._onSceneLoaded=function(a){this.createView(x.getRes(a))};b.createView=function(a){if(a&&!this._viewCreated){this._viewCreated=!0;try{Mb.createByData(this,a)}catch(e){l.errorCallBack&&l.errorCallBack(e.stack)}}};b.getNodeByID=function(a){return this._idMap?this._idMap[a]:null};b.open=function(a,b){void 0===a&&(a=!0);a&&c.closeAll();c.root.addChild(this);this.onOpened(b)};b.onOpened=function(a){};b.close=function(a){this.onClosed(a);this.autoDestroyAtClosed?this.destroy():this.removeSelf()};b.onClosed=function(a){};b.destroy=function(b){void 0===b&&(b=!0);this._idMap=null;a.prototype.destroy.call(this,b);b=laya.display.Scene.unDestroyedScenes;for(var d=b.length-1;-1<d;d--)if(b[d]===this){b.splice(d,1);break}};b._sizeChanged=function(){this.event("resize")};g(0,b,"scaleX",a.prototype._$get_scaleX,function(a){l.superGet(L,this,"scaleX")!=a&&(l.superSet(L,this,"scaleX",a),this.event("resize"))});g(0,b,"scaleY",a.prototype._$get_scaleY,function(a){l.superGet(L,this,"scaleY")!=a&&(l.superSet(L,this,"scaleY",a),this.event("resize"))});g(0,b,"width",function(){if(this._width)return this._width;for(var a=0,b=this.numChildren-1;-1<b;b--){var c=this.getChildAt(b);c._visible&&(a=Math.max(c._x+c.width*c.scaleX,a))}return a},function(a){l.superGet(L,this,"width")!=a&&(l.superSet(L,this,"width",a),this.callLater(this._sizeChanged))});g(0,b,"timer",function(){return this._timer||l.timer},function(a){this._timer=a});g(0,b,"height",function(){if(this._height)return this._height;for(var a=0,b=this.numChildren-1;-1<b;b--){var c=this.getChildAt(b);c._visible&&(a=Math.max(c._y+c.height*c.scaleY,a))}return a},function(a){l.superGet(L,this,"height")!=a&&(l.superSet(L,this,"height",a),this.callLater(this._sizeChanged))});g(1,c,"root",function(){if(!c._root){var a=function(){c._root.size(l.stage.width,l.stage.height);c._root.event("resize")};c._root=l.stage.addChild(new L);c._root.name="root";l.stage.on("resize",null,a);a()}return c._root},laya.display.Sprite._$SET_root);c.load=function(a,b,h){function d(a){c._loadPage&&c._loadPage.event("progress",a);h&&h.runWith(a)}l.loader.resetProgress();var e=new id;e.on("progress",null,d);e.once("complete",null,function(){e.off("progress",null,d);var h=x.getRes(a);if(null==h)console.error("Can not find scene:"+a),b&&b.runWith(null);else{if(!h)throw"Can not find scene:"+a;if(!h.props)throw"Scene data is error:"+a;var f=h.props.runtime?h.props.runtime:h.type,k=Ka.getClass(f),g="instance"==h.props.renderType?k.instance||(k.instance=new k):new k;if(g&&g instanceof laya.display.Node)g.url=a,g._getBit(8)?(g.on("onViewCreated",null,function(){b&&b.runWith(g)}),g.createView(h)):b&&b.runWith(g),c.hideLoadingPage();else throw"Can not find scene:"+f;}});e.load(a)};c.open=function(a,b,h,f,k){void 0===b&&(b=!0);if(h instanceof laya.utils.Handler){var d=f;f=h;h=d}c.showLoadingPage();c.load(a,B.create(null,this._onSceneLoaded,[b,f,h]),k)};c._onSceneLoaded=function(a,b,c,f){if(null!=f){try{f.open(a,c)}catch(k){console.error(k.stack),l.errorCallBack&&l.errorCallBack(k.stack)}b&&b.runWith(f)}};c.close=function(a,b){void 0===b&&(b="");for(var d=!1,c=laya.display.Scene.unDestroyedScenes,e=0,m=c.length;e<m;e++){var g=c[e];g&&g.parent&&g.url===a&&g.name==b&&(g.close(),d=!0)}return d};c.closeAll=function(){for(var a=laya.display.Scene.root,b=0,c=a.numChildren;b<c;b++){var f=a.getChildAt(0);f instanceof laya.display.Scene?f.close():f.removeSelf()}};c.destroy=function(a,b){void 0===b&&(b="");for(var d=!1,c=laya.display.Scene.unDestroyedScenes,e=0,m=c.length;e<m;e++){var g=c[e];g.url===a&&g.name==b&&(g.destroy(),d=!0)}return d};c.gc=function(){cb.destroyUnusedResources()};c.setLoadingPage=function(a){c._loadPage!=a&&(c._loadPage=a)};c.showLoadingPage=function(a,b){void 0===b&&(b=500);c._loadPage&&(l.systemTimer.clear(null,c._showLoading),l.systemTimer.clear(null,c._hideLoading),l.systemTimer.once(b,null,c._showLoading,[a],!1))};c._showLoading=function(a){l.stage.addChild(c._loadPage);c._loadPage.onOpened(a)};c._hideLoading=function(){c._loadPage.close()};c.hideLoadingPage=function(a){void 0===a&&(a=500);c._loadPage&&(l.systemTimer.clear(null,c._showLoading),l.systemTimer.clear(null,c._hideLoading),l.systemTimer.once(a,null,c._hideLoading))};c.unDestroyedScenes=[];c._root=null;c._loadPage=null;return c}(L),aa=function(a){function c(){this._tag=this._toolTip=this._dataSource=null;this._gray=this._disabled=!1;c.__super.call(this);this._anchorY=this._anchorX=NaN;this._widget=eb.EMPTY;this.preinitialize();this.createChildren();this.initialize()}n(c,"laya.ui.UIComponent",a);var b=c.prototype;b.destroy=function(b){void 0===b&&(b=!0);a.prototype.destroy.call(this,b);this._toolTip=this._tag=this._dataSource=null};b.preinitialize=function(){};b.createChildren=function(){};b.initialize=function(){};b.measureWidth=function(){var a=0;this.commitMeasure();for(var b=this.numChildren-1;-1<b;b--){var c=this.getChildAt(b);c._visible&&(a=Math.max(c._x+c.width*c.scaleX,a))}return a};b.commitMeasure=function(){};b.measureHeight=function(){var a=0;this.commitMeasure();for(var b=this.numChildren-1;-1<b;b--){var c=this.getChildAt(b);c._visible&&(a=Math.max(c._y+c.height*c.scaleY,a))}return a};b._sizeChanged=function(){isNaN(this._anchorX)||(this.pivotX=this.anchorX*this.width);isNaN(this._anchorY)||(this.pivotY=this.anchorY*this.height);this.event("resize");this._widget!==eb.EMPTY&&this._widget.resetLayout()};b.onMouseOver=function(a){l.stage.event("showtip",this._toolTip)};b.onMouseOut=function(a){l.stage.event("hidetip",this._toolTip)};b._getWidget=function(){this._widget===eb.EMPTY&&(this._widget=this.addComponent(eb));return this._widget};b.onCompResize=function(){this._sizeChanged()};b._childChanged=function(b){this.callLater(this._sizeChanged);a.prototype._childChanged.call(this,b)};g(0,b,"centerY",function(){return this._widget.centerY},function(a){a!=this._widget.centerY&&(this._getWidget().centerY=a)});g(0,b,"width",function(){return this._width?this._width:this.measureWidth()},function(a){l.superGet(L,this,"width")!=a&&(l.superSet(L,this,"width",a),this.callLater(this._sizeChanged))});g(0,b,"bottom",function(){return this._widget.bottom},function(a){a!=this._widget.bottom&&(this._getWidget().bottom=a)});g(0,b,"height",function(){return this._height?this._height:this.measureHeight()},function(a){l.superGet(L,this,"height")!=a&&(l.superSet(L,this,"height",a),this.callLater(this._sizeChanged))});g(0,b,"left",function(){return this._widget.left},function(a){a!=this._widget.left&&(this._getWidget().left=a)});g(0,b,"dataSource",function(){return this._dataSource},function(a){this._dataSource=a;for(var b in this._dataSource)this.hasOwnProperty(b)&&"function"!=typeof this[b]&&(this[b]=this._dataSource[b])});g(0,b,"centerX",function(){return this._widget.centerX},function(a){a!=this._widget.centerX&&(this._getWidget().centerX=a)});g(0,b,"top",function(){return this._widget.top},function(a){a!=this._widget.top&&(this._getWidget().top=a)});g(0,b,"right",function(){return this._widget.right},function(a){a!=this._widget.right&&(this._getWidget().right=a)});g(0,b,"tag",function(){return this._tag},function(a){this._tag=a});g(0,b,"toolTip",function(){return this._toolTip},function(a){this._toolTip!=a&&(this._toolTip=a,null!=a?(this.on("mouseover",this,this.onMouseOver),this.on("mouseout",this,this.onMouseOut)):(this.off("mouseover",this,this.onMouseOver),this.off("mouseout",this,this.onMouseOut)))});g(0,b,"gray",function(){return this._gray},function(a){a!==this._gray&&(this._gray=a,sa.gray(this,a))});g(0,b,"disabled",function(){return this._disabled},function(a){a!==this._disabled&&(this.gray=this._disabled=a,this.mouseEnabled=!a)});g(0,b,"scaleX",a.prototype._$get_scaleX,function(a){l.superGet(L,this,"scaleX")!=a&&(l.superSet(L,this,"scaleX",a),this.event("resize"))});g(0,b,"scaleY",a.prototype._$get_scaleY,function(a){l.superGet(L,this,"scaleY")!=a&&(l.superSet(L,this,"scaleY",a),this.event("resize"))});g(0,b,"anchorX",function(){return this._anchorX},function(a){this._anchorX!=a&&(this._anchorX=a,this.callLater(this._sizeChanged))});g(0,b,"anchorY",function(){return this._anchorY},function(a){this._anchorY!=a&&(this._anchorY=a,this.callLater(this._sizeChanged))});return c}(L),W=function(a){function c(){this._text=this._clipPoint=null;this._isChanged=!1;this._textHeight=this._textWidth=0;this._lines=[];this._lineWidths=[];this._startY=this._startX=0;this._words=null;this._charSize={};this._valign="top";this._singleCharRender=!1;c.__super.call(this);this._fontSize=c.defaultFontSize;this._font=c.defaultFont;this._color=c.defaultColor;this.overflow="visible";this._style=zb.EMPTY}n(c,"laya.display.Text",a);var b=c.prototype;b.getStyle=function(){this._style===zb.EMPTY&&(this._style=zb.create());return this._style};b._getTextStyle=function(){this._style===zb.EMPTY&&(this._style=zb.create());return this._style};b.destroy=function(b){void 0===b&&(b=!0);a.prototype.destroy.call(this,b);this._charSize=this._words=this._lineWidths=this._lines=this._clipPoint=null};b._getBoundPointsM=function(a){a=M.TEMP;a.setTo(0,0,this.width,this.height);return a._getBoundPoints()};b.getGraphicBounds=function(a){a=M.TEMP;a.setTo(0,0,this.width,this.height);return a};b._getCSSStyle=function(){return this._style};b.lang=function(a,b,h,f,k,m,g,l,n,q,r){a=c.langPacks&&c.langPacks[a]?c.langPacks[a]:a;if(!(2>arguments.length))for(var d=0,e=arguments.length;d<e;d++)a=a.replace("{"+d+"}",arguments[d+1]);this._text=a};b._getContextFont=function(){return(this.italic?"italic ":"")+(this.bold?"bold ":"")+this.fontSize+"px "+(q.onIPhone?laya.display.Text.fontFamilyMap[this.font]||this.font:this.font)};b._isPassWordMode=function(){var a=this._style.asPassword;"prompt"in this&&this.prompt==this._text&&(a=!1);return a};b._getPassWordTxt=function(a){var b=a.length;for(a="";0<b;b--)a+="\u25cf";return a};b._renderText=function(){var a=this.padding,b=this._lines.length;"visible"!=this.overflow&&(b=Math.min(b,Math.floor((this.height-a[0]-a[2])/(this.leading+this._charSize.height))+1));var c=this.scrollY/(this._charSize.height+this.leading)|0,f=this.graphics;f.clear(!0);var k=this._getContextFont();q.context.font=k;var m=a[3],g="left",l=this._lines,n=this.leading+this._charSize.height,u=this._style.currBitmapFont;u&&(n=this.leading+u.getMaxHeight());var v=a[0];!u&&0<this._width&&this._textWidth<=this._width&&("right"==this.align?(g="right",m=this._width-a[1]):"center"==this.align&&(g="center",m=.5*this._width+a[3]-a[1]));if(0<this._height){var w=this._textHeight>this._height?"top":this.valign;"middle"===w?v=.5*(this._height-b*n)+a[0]-a[2]:"bottom"===w&&(v=this._height-b*n-a[2])}w=this._style;if(u&&u.autoScaleSize)var x=u.fontSize/this.fontSize;if(this._clipPoint){f.save();if(u&&u.autoScaleSize){var y=0,C=0;this._width?y=this._width-a[3]-a[1]:y=this._textWidth;this._height?C=this._height-a[0]-a[2]:C=this._textHeight;f.clipRect(a[3],a[0],y*x,C*x)}else f.clipRect(a[3],a[0],this._width?this._width-a[3]-a[1]:this._textWidth,this._height?this._height-a[0]-a[2]:this._textHeight);this.repaint()}a=w.asPassword;"prompt"in this&&this.prompt==this._text&&(a=!1);for(var N,B,b=Math.min(this._lines.length,b+c)||1,y=c;y<b;y++){var C=l[y],D;if(a)for(N=C.length,C="";0<N;N--)C+="\u25cf";null==C&&(C="");N=m-(this._clipPoint?this._clipPoint.x:0);B=v+n*y-(this._clipPoint?this._clipPoint.y:0);this.underline&&this._drawUnderline(g,N,B,y);u?(D=this.width,u.autoScaleSize&&(D=this.width*x),u._drawText(C,this,N,B,this.align,D)):(r.isWebGL?(this._words||(this._words=[]),D=this._words.length>y-c?this._words[y-c]:new qe,D.setText(C),D.splitRender=this._singleCharRender):D=C,w.stroke?f.fillBorderText(D,N,B,k,this.color,w.strokeColor,w.stroke,g):f.fillText(D,N,B,k,this.color,g))}u&&u.autoScaleSize&&(c=1/x,this.scale(c,c));this._clipPoint&&f.restore();this._startX=m;this._startY=v};b._drawUnderline=function(a,b,c,f){f=this._lineWidths[f];switch(a){case "center":b-=f/2;break;case "right":b-=f}c+=this._charSize.height;this._graphics.drawLine(b,c,b+f,c,this.underlineColor||this.color,2)};b.typeset=function(){this._isChanged=!1;this._text?(r.isConchApp?w.conchTextCanvas.font=this._getContextFont():q.context.font=this._getContextFont(),this._lines.length=0,this._lineWidths.length=0,this._isPassWordMode()?this._parseLines(this._getPassWordTxt(this._text)):this._parseLines(this._text),this._evalTextSize(),this._checkEnabledViewportOrNot()?this._clipPoint||(this._clipPoint=new P(0,0)):this._clipPoint=null,this._renderText()):(this._clipPoint=null,this._textWidth=this._textHeight=0,this.graphics.clear(!0))};b._evalTextSize=function(){var a,b;a=Math.max.apply(this,this._lineWidths);b=this._style.currBitmapFont?this._lines.length*(this._style.currBitmapFont.getMaxHeight()+this.leading)+this.padding[0]+this.padding[2]:this._lines.length*(this._charSize.height+this.leading)+this.padding[0]+this.padding[2];if(a!=this._textWidth||b!=this._textHeight)this._textWidth=a,this._textHeight=b};b._checkEnabledViewportOrNot=function(){return"scroll"==this.overflow&&(0<this._width&&this._textWidth>this._width||0<this._height&&this._textHeight>this._height)};b.changeText=function(a){this._text!==a&&(this.lang(a+""),this._graphics&&this._graphics.replaceText(this._text)||this.typeset())};b._parseLines=function(a){var b=this.wordWrap||"hidden"==this.overflow;if(b)var d=this._getWordWrapWidth();var f=this._style.currBitmapFont;f?(this._charSize.width=f.getMaxWidth(),this._charSize.height=f.getMaxHeight()):((f=r.isConchApp?w.conchTextCanvas.measureText(this._testWord):q.context.measureText(c._testWord))||(f={width:100}),this._charSize.width=f.width,this._charSize.height=f.height||this.fontSize);a=a.replace(/\r\n/g,"\n").split("\n");for(var f=0,k=a.length;f<k;f++){var m=a[f];b?this._parseLine(m,d):(this._lineWidths.push(this._getTextWidth(m)),this._lines.push(m))}};b._parseLine=function(a,b){var d=this._lines,c,e,m,g,l=0;m=this._getTextWidth(a);if(m<=b)d.push(a),this._lineWidths.push(m);else{m=this._charSize.width;c=Math.floor(b/m);0==c&&(c=1);g=m=this._getTextWidth(a.substring(0,c));for(var n=c,q=a.length;n<q;n++)if(m=this._getTextWidth(a.charAt(n)),g+=m,g>b)if(this.wordWrap){var r=a.substring(l,n);255>r.charCodeAt(r.length-1)&&(e=/(?:\w|-)+$/.exec(r))&&(n=e.index+l,0==e.index?n+=r.length:r=a.substring(l,n));d.push(r);this._lineWidths.push(g-m);l=n;if(n+c<q)n+=c,g=m=this._getTextWidth(a.substring(l,n)),n--;else{d.push(a.substring(l,q));this._lineWidths.push(this._getTextWidth(d[d.length-1]));l=-1;break}}else if("hidden"==this.overflow){d.push(a.substring(0,n));this._lineWidths.push(this._getTextWidth(d[d.length-1]));return}this.wordWrap&&-1!=l&&(d.push(a.substring(l,q)),this._lineWidths.push(this._getTextWidth(d[d.length-1])))}};b._getTextWidth=function(a){var b=this._style.currBitmapFont;return b?b.getTextWidth(a):r.isConchApp?w.conchTextCanvas.measureText(a).width:q.context.measureText(a).width};b._getWordWrapWidth=function(){var a=this.padding,b;b=(b=this._style.currBitmapFont)&&b.autoScaleSize?b.fontSize/this.fontSize*this._width:this._width;0>=b&&(b=this.wordWrap?100:q.width);0>=b&&(b=100);return b-a[3]-a[1]};b.getCharPoint=function(a,b){this._isChanged&&l.systemTimer.runCallLater(this,this.typeset);for(var d=0,c=this._lines,e=0,m=0,g=c.length;m<g;m++){d+=c[m].length;if(a<d){var n=m;break}e=d}q.context.font=(this.italic?"italic ":"")+(this.bold?"bold ":"")+this.fontSize+"px "+this.font;a=this._getTextWidth(this._text.substring(e,a));return(b||new P).setTo(this._startX+a-(this._clipPoint?this._clipPoint.x:0),this._startY+n*(this._charSize.height+this.leading)-(this._clipPoint?this._clipPoint.y:0))};g(0,b,"width",function(){return this._width?this._width:this.textWidth+this.padding[1]+this.padding[3]},function(a){a!=this._width&&(l.superSet(L,this,"width",a),this.isChanged=!0,this.borderColor&&this._setBorderStyleColor(0,0,this.width,this.height,this.borderColor,1))});g(0,b,"textWidth",function(){this._isChanged&&l.systemTimer.runCallLater(this,this.typeset);return this._textWidth});g(0,b,"height",function(){return this._height?this._height:this.textHeight},function(a){a!=this._height&&(l.superSet(L,this,"height",a),this.isChanged=!0,this.borderColor&&this._setBorderStyleColor(0,0,this.width,this.height,this.borderColor,1))});g(0,b,"textHeight",function(){this._isChanged&&l.systemTimer.runCallLater(this,this.typeset);return this._textHeight});g(0,b,"padding",function(){return this._style.padding},function(a){if("string"==typeof a){a=a.split(",");var b,d;for(d=a.length;4>a.length;)a.push(0);for(b=0;b<d;b++)a[b]=parseFloat(a[b])||0}this._getTextStyle().padding=a;this.isChanged=!0});g(0,b,"bold",function(){return this._style.bold},function(a){this._getTextStyle().bold=a;this.isChanged=!0});g(0,b,"text",function(){return this._text||""},function(a){this._text!==a&&(this.lang(a+""),this.isChanged=!0,this.event("change"),this.borderColor&&this._setBorderStyleColor(0,0,this.width,this.height,this.borderColor,1))});g(0,b,"color",function(){return this._color},function(a){this._color!=a&&(this._color=a,!this._isChanged&&this._graphics?this._graphics.replaceTextColor(this.color):this.isChanged=!0)});g(0,b,"font",function(){return this._font},function(a){this._style.currBitmapFont&&(this._getTextStyle().currBitmapFont=null,this.scale(1,1));c._bitmapFonts&&c._bitmapFonts[a]&&(this._getTextStyle().currBitmapFont=c._bitmapFonts[a]);this._font=a;this.isChanged=!0});g(0,b,"fontSize",function(){return this._fontSize},function(a){this._fontSize!=a&&(this._fontSize=a,this.isChanged=!0)});g(0,b,"italic",function(){return this._style.italic},function(a){this._getTextStyle().italic=a;this.isChanged=!0});g(0,b,"align",function(){return this._style.align},function(a){this._getTextStyle().align=a;this.isChanged=!0});g(0,b,"valign",function(){return this._valign},function(a){this._valign=a;this.isChanged=!0});g(0,b,"wordWrap",function(){return this._style.wordWrap},function(a){this._getTextStyle().wordWrap=a;this.isChanged=!0});g(0,b,"singleCharRender",function(){return this._singleCharRender},function(a){this._singleCharRender=a});g(0,b,"leading",function(){return this._style.leading},function(a){this._getTextStyle().leading=a;this.isChanged=!0});g(0,b,"bgColor",function(){return this._style.bgColor},function(a){this._getTextStyle().bgColor=a;this._renderType|=128;this._setBgStyleColor(0,0,this.width,this.height,a);this._setRenderType(this._renderType);this.isChanged=!0});g(0,b,"borderColor",function(){return this._style.borderColor},function(a){this._getTextStyle().borderColor=a;this._renderType|=128;this._setBorderStyleColor(0,0,this.width,this.height,a,1);this._setRenderType(this._renderType);this.isChanged=!0});g(0,b,"stroke",function(){return this._style.stroke},function(a){this._getTextStyle().stroke=a;this.isChanged=!0});g(0,b,"strokeColor",function(){return this._style.strokeColor},function(a){this._getTextStyle().strokeColor=a;this.isChanged=!0});g(0,b,"isChanged",null,function(a){this._isChanged!==a&&(this._isChanged=a)&&l.systemTimer.callLater(this,this.typeset)});g(0,b,"scrollX",function(){return this._clipPoint?this._clipPoint.x:0},function(a){if("scroll"==this.overflow&&!(this.textWidth<this._width)&&this._clipPoint){a=a<this.padding[3]?this.padding[3]:a;var b=this._textWidth-this._width;this._clipPoint.x=a>b?b:a;this._renderText()}});g(0,b,"scrollY",function(){return this._clipPoint?this._clipPoint.y:0},function(a){if("scroll"==this.overflow&&!(this.textHeight<this._height)&&this._clipPoint){a=a<this.padding[0]?this.padding[0]:a;var b=this._textHeight-this._height;this._clipPoint.y=a>b?b:a;this._renderText()}});g(0,b,"maxScrollX",function(){return this.textWidth<this._width?0:this._textWidth-this._width});g(0,b,"maxScrollY",function(){return this.textHeight<this._height?0:this._textHeight-this._height});g(0,b,"lines",function(){this._isChanged&&this.typeset();return this._lines});g(0,b,"underlineColor",function(){return this._style.underlineColor},function(a){this._getTextStyle().underlineColor=a;this._isChanged||this._renderText()});g(0,b,"underline",function(){return this._style.underline},function(a){this._getTextStyle().underline=a});c.defaultFontStr=function(){return c.defaultFontSize+"px "+c.defaultFont};c.registerBitmapFont=function(a,b){c._bitmapFonts||(c._bitmapFonts={});c._bitmapFonts[a]=b};c.unregisterBitmapFont=function(a,b){void 0===b&&(b=!0);if(c._bitmapFonts&&c._bitmapFonts[a]){var d=c._bitmapFonts[a];b&&d.destroy();delete c._bitmapFonts[a]}};c.VISIBLE="visible";c.SCROLL="scroll";c.HIDDEN="hidden";c.defaultFontSize=12;c.defaultFont="Arial";c.defaultColor="#000000";c.langPacks=null;c.isComplexText=!1;c._testWord="\u6e38";c._bitmapFonts=null;c.CharacterCache=!0;c.RightToLeft=!1;u(c,["fontFamilyMap",function(){return this.fontFamilyMap={"\u62a5\u96b6":"\u62a5\u96b6-\u7b80","\u9ed1\u4f53":"\u9ed1\u4f53-\u7b80","\u6977\u4f53":"\u6977\u4f53-\u7b80","\u5170\u4ead\u9ed1":"\u5170\u4ead\u9ed1-\u7b80","\u96b6\u53d8":"\u96b6\u53d8-\u7b80","\u51cc\u6167\u4f53":"\u51cc\u6167\u4f53-\u7b80","\u7fe9\u7fe9\u4f53":"\u7fe9\u7fe9\u4f53-\u7b80","\u82f9\u65b9":"\u82f9\u65b9-\u7b80","\u624b\u672d\u4f53":"\u624b\u672d\u4f53-\u7b80","\u5b8b\u4f53":"\u5b8b\u4f53-\u7b80","\u5a03\u5a03\u4f53":"\u5a03\u5a03\u4f53-\u7b80","\u9b4f\u7891":"\u9b4f\u7891-\u7b80","\u884c\u6977":"\u884c\u6977-\u7b80","\u96c5\u75de":"\u96c5\u75de-\u7b80","\u5706\u4f53":"\u5706\u4f53-\u7b80"}}]);return c}(L);(function(a){function c(){this._element=null;this._recList=[];this._innerHTML=null;this._repaintState=0;c.__super.call(this);this._element=new sf;this._element.div=this;this._element.repaintHandler=new B(this,this._htmlDivRepaint);this.mouseEnabled=!0;this.on("click",this,this._onMouseClick)}n(c,"laya.html.dom.HTMLDivElement",a);var b=c.prototype;b.destroy=function(b){void 0===b&&(b=!0);this._element&&this._element.reset();this._element=null;this._doClears();a.prototype.destroy.call(this,b)};b._htmlDivRepaint=function(a){void 0===a&&(a=!1);a?2>this._repaintState&&(this._repaintState=2):1>this._repaintState&&(this._repaintState=1);0<this._repaintState&&this._setGraphicDirty()};b._updateGraphicWork=function(){switch(this._repaintState){case 1:this._updateGraphic();break;case 2:this._refresh()}};b._setGraphicDirty=function(){this.callLater(this._updateGraphicWork)};b._doClears=function(){if(this._recList){var a,b=this._recList.length,c;for(a=0;a<b;a++)c=this._recList[a],c.recover();this._recList.length=0}};b._updateGraphic=function(){this._doClears();this.graphics.clear(!0);this._repaintState=0;this._element.drawToGraphic(this.graphics,-this._element.x,-this._element.y,this._recList);var a=this._element.getBounds();a&&this.setSelfBounds(a);this.size(a.width,a.height)};b._refresh=function(){this._repaintState=1;this._innerHTML&&(this._element.innerHTML=this._innerHTML);this._setGraphicDirty()};b._onMouseClick=function(){var a=this.mouseX,b=this.mouseY,c,f,k;f=this._recList.length;for(c=0;c<f;c++)k=this._recList[c],k.rec.contains(a,b)&&this._eventLink(k.href)};b._eventLink=function(a){this.event("link",[a])};g(0,b,"style",function(){return this._element.style});g(0,b,"content",function(){return this._element.innerHTML});g(0,b,"innerHTML",function(){return this._innerHTML},function(a){this._innerHTML!=a&&(this._repaintState=1,this._innerHTML=a,this._element.innerHTML=a,this._setGraphicDirty())});g(0,b,"contextWidth",function(){return this._element.contextWidth});g(0,b,"contextHeight",function(){return this._element.contextHeight});return c})(L);var jd=function(a){function c(){this.loop=!1;this._count=this._index=this.wrapMode=0;this._isPlaying=!1;this._labels=null;this._frameRateChanged=this._isReverse=!1;this._controlNode=this._actionName=null;c.__super.call(this);this._interval=ya.animationInterval;this._setBitUp(16)}n(c,"laya.display.AnimationBase",a);var b=c.prototype;b.play=function(a,b,c){void 0===a&&(a=0);void 0===b&&(b=!0);void 0===c&&(c="");this._isPlaying=!0;this._actionName=c;this.index="string"==typeof a?this._getFrameByLabel(a):a;this.loop=b;this._isReverse=1===this.wrapMode;0==this.index&&this._isReverse&&(this.index=this.count-1);0<this.interval&&this.timerLoop(this.interval,this,this._frameLoop,null,!0,!0)};b._getFrameByLabel=function(a){for(var b=0;b<this._count;b++){var d=this._labels[b];if(d&&-1<d.indexOf(a))return b}return 0};b._frameLoop=function(){if(this._isReverse){if(this._index--,0>this._index)if(this.loop)2==this.wrapMode?(this._index=0<this._count?1:0,this._isReverse=!1):this._index=this._count-1,this.event("complete");else{this._index=0;this.stop();this.event("complete");return}}else if(this._index++,this._index>=this._count)if(this.loop)2==this.wrapMode?(this._index=0<=this._count-2?this._count-2:0,this._isReverse=!0):this._index=0,this.event("complete");else{this._index--;this.stop();this.event("complete");return}this.index=this._index};b._setControlNode=function(a){this._controlNode&&(this._controlNode.off("display",this,this._resumePlay),this._controlNode.off("undisplay",this,this._resumePlay));(this._controlNode=a)&&a!=this&&(a.on("display",this,this._resumePlay),a.on("undisplay",this,this._resumePlay))};b._setDisplay=function(b){a.prototype._setDisplay.call(this,b);this._resumePlay()};b._resumePlay=function(){this._isPlaying&&(this._controlNode.displayedInStage?this.play(this._index,this.loop,this._actionName):this.clearTimer(this,this._frameLoop))};b.stop=function(){this._isPlaying=!1;this.clearTimer(this,this._frameLoop)};b.addLabel=function(a,b){this._labels||(this._labels={});this._labels[b]||(this._labels[b]=[]);this._labels[b].push(a)};b.removeLabel=function(a){if(!a)this._labels=null;else if(this._labels)for(var b in this._labels)this._removeLabelFromList(this._labels[b],a)};b._removeLabelFromList=function(a,b){if(a)for(var d=a.length-1;0<=d;d--)a[d]==b&&a.splice(d,1)};b.gotoAndStop=function(a){this.index="string"==typeof a?this._getFrameByLabel(a):a;this.stop()};b._displayToIndex=function(a){};b.clear=function(){this.stop();this._labels=null;return this};g(0,b,"interval",function(){return this._interval},function(a){this._interval!=a&&(this._frameRateChanged=!0,this._interval=a,this._isPlaying&&0<a&&this.timerLoop(a,this,this._frameLoop,null,!0,!0))});g(0,b,"isPlaying",function(){return this._isPlaying});g(0,b,"index",function(){return this._index},function(a){this._index=a;this._displayToIndex(a);if(this._labels&&this._labels[a]){a=this._labels[a];for(var b=0,d=a.length;b<d;b++)this.event("label",a[b])}});g(0,b,"count",function(){return this._count});c.WRAP_POSITIVE=0;c.WRAP_REVERSE=1;c.WRAP_PINGPONG=2;return c}(L),uf=function(a){function c(){this._tar=this.txt=null;this.recColor="#00ff00";c.__super.call(this);this.txt=new W;this.txt.color="#ff0000";this.txt.bgColor="#00ff00";this.txt.fontSize=12;this.addChild(this.txt)}n(c,"laya.debug.view.nodeInfo.recinfos.NodeRecInfo",a);a=c.prototype;a.setInfo=function(a){this.txt.text=a};a.setTarget=function(a){this._tar=a};a.showInfo=function(a){if((this._tar=a)&&!a.destroyed){this.graphics.clear();var b;!(b=a._getBoundPointsM(!0))||1>b.length||(b=za.pListToPointList(b,!0),Ha.walkArr(b,a.localToGlobal,a),b=za.pointListToPlist(b),c._disBoundRec=M._getWrapRec(b,c._disBoundRec),this.graphics.drawRect(0,0,c._disBoundRec.width,c._disBoundRec.height,null,tb.RECACHE_REC_COLOR,2),this.pos(c._disBoundRec.x,c._disBoundRec.y))}};a.fresh=function(){this.showInfo(this._tar)};a.clearMe=function(){this._tar=null};u(c,["_disBoundRec",function(){return this._disBoundRec=new M}]);return c}(L),vf=function(a){function c(){this.lockLayer=null;this.popupEffect=function(a){a.scale(1,1);a._effectTween=ta.from(a,{x:l.stage.width/2,y:l.stage.height/2,scaleX:0,scaleY:0},300,Pa.backOut,B.create(this,this.doOpen,[a]),0,!1,!1)};this.closeEffect=function(a){a._effectTween=ta.to(a,{x:l.stage.width/2,y:l.stage.height/2,scaleX:0,scaleY:0},300,Pa.strongOut,B.create(this,this.doClose,[a]),0,!1,!1)};c.__super.call(this);this.maskLayer=new L;this.popupEffectHandler=new B(this,this.popupEffect);this.closeEffectHandler=new B(this,this.closeEffect);this.mouseEnabled=this.maskLayer.mouseEnabled=!0;this.zOrder=1E3;l.stage.addChild(this);l.stage.on("resize",this,this._onResize);if(lb.closeDialogOnSide)this.maskLayer.on("click",this,this._closeOnSide);this._onResize(null)}n(c,"laya.ui.DialogManager",a);a=c.prototype;a._closeOnSide=function(){var a=this.getChildAt(this.numChildren-1);a instanceof laya.ui.Dialog&&a.close()};a.setLockView=function(a){this.lockLayer||(this.lockLayer=new Y,this.lockLayer.mouseEnabled=!0,this.lockLayer.size(l.stage.width,l.stage.height));this.lockLayer.removeChildren();a&&(a.centerX=a.centerY=0,this.lockLayer.addChild(a))};a._onResize=function(a){a=this.maskLayer.width=l.stage.width;var b=this.maskLayer.height=l.stage.height;this.lockLayer&&this.lockLayer.size(a,b);this.maskLayer.graphics.clear(!0);this.maskLayer.graphics.drawRect(0,0,a,b,lb.popupBgColor);this.maskLayer.alpha=lb.popupBgAlpha;for(a=this.numChildren-1;-1<a;a--)b=this.getChildAt(a),b.isPopupCenter&&this._centerDialog(b)};a._centerDialog=function(a){a.x=Math.round((l.stage.width-a.width>>1)+a.pivotX);a.y=Math.round((l.stage.height-a.height>>1)+a.pivotY)};a.open=function(a,d,c){void 0===d&&(d=!1);void 0===c&&(c=!1);d&&this._closeAll();this._clearDialogEffect(a);a.isPopupCenter&&this._centerDialog(a);this.addChild(a);(a.isModal||this._getBit(32))&&l.timer.callLater(this,this._checkMask);c&&null!=a.popupEffect?a.popupEffect.runWith(a):this.doOpen(a);this.event("open")};a._clearDialogEffect=function(a){a._effectTween&&(ta.clear(a._effectTween),a._effectTween=null)};a.doOpen=function(a){a.onOpened(a._param)};a.lock=function(a){this.lockLayer&&(a?this.addChild(this.lockLayer):this.lockLayer.removeSelf())};a.close=function(a){this._clearDialogEffect(a);a.isShowEffect&&null!=a.closeEffect?a.closeEffect.runWith([a]):this.doClose(a);this.event("close")};a.doClose=function(a){a.removeSelf();a.isModal&&this._checkMask();a.closeHandler&&a.closeHandler.runWith(a.closeType);a.onClosed(a.closeType);a.autoDestroyAtClosed&&a.destroy()};a.closeAll=function(){this._closeAll();this.event("close")};a._closeAll=function(){for(var a=this.numChildren-1;-1<a;a--){var d=this.getChildAt(a);d&&null!=d.close&&this.doClose(d)}};a.getDialogsByGroup=function(a){for(var b=[],c=this.numChildren-1;-1<c;c--){var h=this.getChildAt(c);h&&h.group===a&&b.push(h)}return b};a.closeByGroup=function(a){for(var b=[],c=this.numChildren-1;-1<c;c--){var h=this.getChildAt(c);h&&h.group===a&&(h.close(),b.push(h))}return b};a._checkMask=function(){this.maskLayer.removeSelf();for(var a=this.numChildren-1;-1<a;a--){var d=this.getChildAt(a);if(d&&d.isModal){this.addChildAt(this.maskLayer,a);break}}};return c}(L),ec=function(a){function c(){this._stateDic={};this.isWorkState=!1;c.__super.call(this)}n(c,"laya.debug.view.nodeInfo.NodeInfoPanel",a);a=c.prototype;a.showDisInfo=function(a){this.recoverNodes();Ab.showDisInfos(a);this.showOnly(a);this.isWorkState=!0};a.showOnly=function(a){a&&(this.hideBrothers(a),this.showOnly(a.parent))};a.recoverNodes=function(){Ab.hideAllInfos();var a,d,c;for(a in this._stateDic)if(d=this._stateDic[a],c=d.target)try{c.visible=d.visible}catch(h){}this.isWorkState=!1};a.hideOtherChain=function(a){if(a)for(;a;)this.hideBrothers(a),a=a.parent};a.hideChilds=function(a){if(a){var b,c;c=a._children;b=c.length;var h;for(a=0;a<b;a++)h=c[a],h!=Ab.NodeInfoContainer&&(this.saveNodeInfo(h),h.visible=!1)}};a.hideBrothers=function(a){if(a){var b;if(b=a.parent){var c,h;h=b._children;c=h.length;var f;for(b=0;b<c;b++)f=h[b],f!=Ab.NodeInfoContainer&&f!=a&&(this.saveNodeInfo(f),f.visible=!1)}}};a.saveNodeInfo=function(a){S.idObj(a);if(!this._stateDic.hasOwnProperty(S.getObjID(a))){var b;b={};b.target=a;b.visible=a.visible;this._stateDic[S.getObjID(a)]=b}};a.recoverNodeInfo=function(a){S.idObj(a);if(this._stateDic.hasOwnProperty(S.getObjID(a))){var b;b=this._stateDic[S.getObjID(a)];a.visible=b.visible}};c.init=function(){c.I||(c.I=new c,Ab.init())};c.I=null;return c}(L),Pe=function(a){function c(){this._mapData=this._map=null;this._mapHeightHalf=this._mapWidthHalf=this._tileHeightHalf=this._tileWidthHalf=0;this._gridSpriteArray=[];this.layerName=this.tarLayer=this._properties=this._dataDic=this._objDic=null;c.__super.call(this);this._tempMapPos=new P}n(c,"laya.map.MapLayer",a);a=c.prototype;a.init=function(a,d){this._map=d;this._mapData=a.data;var b=d.tileWidth,c=d.tileHeight;this.layerName=a.name;this._properties=a.properties;this.alpha=a.opacity;this._tileWidthHalf=b/2;this._tileHeightHalf=c/2;this._mapWidthHalf=this._map.width/2-this._tileWidthHalf;this._mapHeightHalf=this._map.height/2;switch(a.type){case "objectgroup":a=a.objects;0<a.length&&(this._objDic={},this._dataDic={});for(var f,k,m=0;m<a.length;m++)if(b=a[m],this._dataDic[b.name]=b,1==b.visible){f=b.width;k=b.height;var g=d.getSprite(b.gid,f,k);if(null!=g){switch(this._map.orientation){case "isometric":this.getScreenPositionByTilePos(b.x/c,b.y/c,P.TEMP);g.pivot(f/2,k/2);g.rotation=b.rotation;g.x=g.relativeX=P.TEMP.x+this._map.viewPortX;g.y=g.relativeY=P.TEMP.y+this._map.viewPortY-k/2;break;case "staggered":g.pivot(f/2,k/2);g.rotation=b.rotation;g.x=g.relativeX=b.x+f/2;g.y=g.relativeY=b.y-k/2;break;case "orthogonal":g.pivot(f/2,k/2);g.rotation=b.rotation;g.x=g.relativeX=b.x+f/2;g.y=g.relativeY=b.y-k/2;break;case "hexagonal":g.x=g.relativeX=b.x,g.y=g.relativeY=b.y}this.addChild(g);this._gridSpriteArray.push(g);this._objDic[b.name]=g}}}};a.getObjectByName=function(a){return this._objDic?this._objDic[a]:null};a.getObjectDataByName=function(a){return this._dataDic?this._dataDic[a]:null};a.getLayerProperties=function(a){return this._properties?this._properties[a]:null};a.getTileData=function(a,d){return 0<=d&&d<this._map.numRowsTile&&0<=a&&a<this._map.numColumnsTile&&(a=d*this._map.numColumnsTile+a,d=this._mapData,null!=d&&a<d.length)?d[a]:0};a.getScreenPositionByTilePos=function(a,d,c){if(c){switch(this._map.orientation){case "isometric":c.x=this._map.width/2-(d-a)*this._tileWidthHalf;c.y=(d+a)*this._tileHeightHalf;break;case "staggered":a=Math.floor(a);d=Math.floor(d);c.x=a*this._map.tileWidth+(d&1)*this._tileWidthHalf;c.y=d*this._tileHeightHalf;break;case "orthogonal":c.x=a*this._map.tileWidth;c.y=d*this._map.tileHeight;break;case "hexagonal":a=Math.floor(a);d=Math.floor(d);var b=2*this._map.tileHeight/3;c.x=(a*this._map.tileWidth+d%2*this._tileWidthHalf)%this._map.gridWidth;c.y=d*b%this._map.gridHeight}c.x=(c.x+this._map.viewPortX)*this._map.scale;c.y=(c.y+this._map.viewPortY)*this._map.scale}};a.getTileDataByScreenPos=function(a,d){var b=0;this.getTilePositionByScreenPos(a,d,this._tempMapPos)&&(b=this.getTileData(Math.floor(this._tempMapPos.x),Math.floor(this._tempMapPos.y)));return b};a.getTilePositionByScreenPos=function(a,d,c){a=a/this._map.scale-this._map.viewPortX;d=d/this._map.scale-this._map.viewPortY;var b=this._map.tileWidth,e=this._map.tileHeight;switch(this._map.orientation){case "isometric":return a-=this._map.width/2,c&&(c.x=a/b+d/e,c.y=-(a/b-d/e)),!0;case "staggered":return c&&(Math.abs((a-(Math.floor(a/b)*b+b/2))*e/2)+Math.abs((d-(Math.floor(d/e)*e+e/2))*b/2)<=b*e/4?(b=Math.floor(a/b),e=2*Math.floor(d/e)):(b=Math.floor((a-b/2)/b)+1,e=2*Math.floor((d-e/2)/e)+1),c.x=b-(e&1),c.y=e),!0;case "orthogonal":return c&&(c.x=a/b,c.y=d/e),!0;case "hexagonal":e=d/(2*e/3),b=(a-e%2*this._tileWidthHalf)/b,c&&(c.x=b,c.y=e)}return!1};a.getDrawSprite=function(a,d){var b=new Zc;b.relativeX=a*this._map.gridWidth;b.relativeY=d*this._map.gridHeight;b.initData(this._map);this._gridSpriteArray.push(b);return b};a.updateGridPos=function(){for(var a,d=0;d<this._gridSpriteArray.length;d++)a=this._gridSpriteArray[d],(a._visible||a.isAloneObject)&&0<a.drawImageNum&&a.updatePos()};a.drawTileTexture=function(a,d,c){if(0<=c&&c<this._map.numRowsTile&&0<=d&&d<this._map.numColumnsTile){var b=c*this._map.numColumnsTile+d,e=this._mapData;if(null!=e&&b<e.length&&0!=e[b]&&(e=this._map.getTexture(e[b]))){var k=0,g=0;switch(this._map.orientation){case "staggered":k=d*this._map.tileWidth%this._map.gridWidth+(c&1)*this._tileWidthHalf;g=c*this._tileHeightHalf%this._map.gridHeight;break;case "orthogonal":k=d*this._map.tileWidth%this._map.gridWidth;g=c*this._map.tileHeight%this._map.gridHeight;break;case "isometric":k=(this._mapWidthHalf+(d-c)*this._tileWidthHalf)%this._map.gridWidth;g=(d+c)*this._tileHeightHalf%this._map.gridHeight;break;case "hexagonal":g=2*this._map.tileHeight/3,k=(d*this._map.tileWidth+c%2*this._tileWidthHalf)%this._map.gridWidth,g=c*g%this._map.gridHeight}e.isAnimation?(d=new $c,d.x=k,d.y=g,d.setTileTextureSet(b.toString(),e),a.addAniSprite(d),a.addChild(d),a.isHaveAnimation=!0):a.graphics.drawImage(e.texture,k+e.offX,g+e.offY);return!0}}return!1};a.clearAll=function(){this._mapData=this._map=null;this._mapHeightHalf=this._mapWidthHalf=this._tileHeightHalf=this._tileWidthHalf=0;this.layerName=null;var a;if(this._objDic){for(a in this._objDic)delete this._objDic[a];this._objDic=null}if(this._dataDic){for(a in this._dataDic)delete this._dataDic[a];this._dataDic=null}var d;for(a=0;a<this._gridSpriteArray.length;a++)d=this._gridSpriteArray[a],d.clearAll();this.tarLayer=this._tempMapPos=this._properties=null};return c}(L),Lb=function(a){function c(a){this.type=0;this.preY=this.preX=NaN;c.__super.call(this)}n(c,"laya.debug.tools.resizer.AutoFillRec",a);var b=c.prototype;b.changeSize=function(){var a=this.graphics;a.clear();a.drawRect(0,0,this.width,this.height,"#33c5f5")};b.record=function(){this.preX=this.x;this.preY=this.y};b.getDx=function(){return this.x-this.preX};b.getDy=function(){return this.y-this.preY};g(0,b,"width",a.prototype._$get_width,function(a){l.superSet(L,this,"width",a);this.changeSize()});g(0,b,"height",a.prototype._$get_height,function(a){l.superSet(L,this,"height",a);this.changeSize()});return c}(L),Bc=function(a){function c(){this.focus=null;this._frameRate="fast";this.designHeight=this.designWidth=0;this.canvasRotation=!1;this.canvasDegree=0;this.screenAdaptationEnabled=this.renderingEnabled=!0;this._screenMode="none";this._scaleMode="noscale";this._alignV="top";this._alignH="left";this._bgColor="black";this._frameStartTime=this._safariOffsetY=this._renderCount=this._mouseMoveTime=0;this._isVisibility=this._isFocused=!1;this._wgColor=[0,0,0,1];this._scene3Ds=[];this._globalRepaintGet=this._globalRepaintSet=!1;this._curUIBase=null;this.useRetinalCanvas=!1;c.__super.call(this);this.offset=new P;this._canvasTransform=new C;this._previousOrientation=q.window.orientation;this._3dUI=[];var a=this;this.transform=C.create();this.hitTestPrior=this.mouseEnabled=!0;this.autoSize=!1;this._setBit(128,!0);this._setBit(2,!0);this._isVisibility=this._isFocused=!0;this.useRetinalCanvas=ya.useRetinalCanvas;var b=q.window,h=this;b.addEventListener("focus",function(){a._isFocused=!0;h.event("focus");h.event("focuschange")});b.addEventListener("blur",function(){a._isFocused=!1;h.event("blur");h.event("focuschange");h._isInputting()&&(ia.inputElement.target.focus=!1)});var f="visibilityState",k="visibilitychange",g=b.document;"undefined"!==typeof g.hidden?(k="visibilitychange",f="visibilityState"):"undefined"!==typeof g.mozHidden?(k="mozvisibilitychange",f="mozVisibilityState"):"undefined"!==typeof g.msHidden?(k="msvisibilitychange",f="msVisibilityState"):"undefined"!==typeof g.webkitHidden&&(k="webkitvisibilitychange",f="webkitVisibilityState");b.document.addEventListener(k,function(){"hidden"==q.document[f]?(a._isVisibility=!1,h._isInputting()&&(ia.inputElement.target.focus=!1)):a._isVisibility=!0;a.renderingEnabled=a._isVisibility;h.event("visibilitychange")});b.addEventListener("resize",function(){var b=q.window.orientation;null!=b&&b!=a._previousOrientation&&h._isInputting()&&(ia.inputElement.target.focus=!1);a._previousOrientation=b;h._isInputting()||(q.onSafari&&(h._safariOffsetY=(q.window.__innerHeight||q.document.body.clientHeight||q.document.documentElement.clientHeight)-q.window.innerHeight),h._resetCanvas())});b.addEventListener("orientationchange",function(a){h._resetCanvas()});this.on("mousemove",this,this._onmouseMove);if(q.onMobile)this.on("mousedown",this,this._onmouseMove)}n(c,"laya.display.Stage",a);var b=c.prototype;b._isInputting=function(){return q.onMobile&&ia.isInputting};b._changeCanvasSize=function(){this.setScreenSize(q.clientWidth*q.pixelRatio,q.clientHeight*q.pixelRatio)};b._resetCanvas=function(){this.screenAdaptationEnabled&&this._changeCanvasSize()};b.setScreenSize=function(a,b){var d=!1;if("none"!==this._screenMode&&(d=(1>a/b?"vertical":"horizontal")!==this._screenMode)){var c=b;b=a;a=c}this.canvasRotation=d;var c=r._mainCanvas,e=c.source.style,g=this._canvasTransform.identity(),l=this._scaleMode,n=a/this.designWidth,u=b/this.designHeight,v=this.useRetinalCanvas?a:this.designWidth,w=this.useRetinalCanvas?b:this.designHeight,x=a,C=b,y=q.pixelRatio;this._width=this.designWidth;this._height=this.designHeight;switch(l){case "noscale":n=u=1;x=this.designWidth;C=this.designHeight;break;case "showall":n=u=Math.min(n,u);v=x=Math.round(this.designWidth*n);w=C=Math.round(this.designHeight*u);break;case "noborder":n=u=Math.max(n,u);x=Math.round(this.designWidth*n);C=Math.round(this.designHeight*u);break;case "full":n=u=1;this._width=v=a;this._height=w=b;break;case "fixedwidth":u=n;this._height=w=Math.round(b/n);break;case "fixedheight":n=u;this._width=v=Math.round(a/u);break;case "fixedauto":a/b<this.designWidth/this.designHeight?(u=n,this._height=w=Math.round(b/n)):(n=u,this._width=v=Math.round(a/u))}this.useRetinalCanvas&&(v=a,w=b);n*=this.scaleX;u*=this.scaleY;1===n&&1===u?this.transform.identity():(this.transform.a=this._formatData(n/(x/v)),this.transform.d=this._formatData(u/(C/w)));c.size(v,w);fa.changeWebGLSize(v,w);g.scale(x/v/y,C/w/y);this.offset.x="left"===this._alignH?0:"right"===this._alignH?a-x:.5*(a-x)/y;this.offset.y="top"===this._alignV?0:"bottom"===this._alignV?b-C:.5*(b-C)/y;this.offset.x=Math.round(this.offset.x);this.offset.y=Math.round(this.offset.y);g.translate(this.offset.x,this.offset.y);this._safariOffsetY&&g.translate(0,this._safariOffsetY);this.canvasDegree=0;d&&("horizontal"===this._screenMode?(g.rotate(Math.PI/2),g.translate(b/y,0),this.canvasDegree=90):(g.rotate(-Math.PI/2),g.translate(0,a/y),this.canvasDegree=-90));g.a=this._formatData(g.a);g.d=this._formatData(g.d);g.tx=this._formatData(g.tx);g.ty=this._formatData(g.ty);this.transform=this.transform;e.transformOrigin=e.webkitTransformOrigin=e.msTransformOrigin=e.mozTransformOrigin=e.oTransformOrigin="0px 0px 0px";e.transform=e.webkitTransform=e.msTransform=e.mozTransform=e.oTransform="matrix("+g.toString()+")";this._safariOffsetY&&g.translate(0,-this._safariOffsetY);g.translate(parseInt(e.left)||0,parseInt(e.top)||0);this.visible=!0;this._repaint|=2;this.event("resize")};b._formatData=function(a){return 1E-6>Math.abs(a)?0:.001>Math.abs(1-a)?0<a?1:-1:a};b.getMousePoint=function(){return P.TEMP.setTo(this.mouseX,this.mouseY)};b.repaint=function(a){void 0===a&&(a=2);this._repaint|=a};b.parentRepaint=function(a){};b._loop=function(){this._globalRepaintGet=this._globalRepaintSet;this._globalRepaintSet=!1;this.render(r._context,0,0);return!0};b.getFrameTm=function(){return this._frameStartTime};b._onmouseMove=function(a){this._mouseMoveTime=q.now()};b.getTimeFromFrameStart=function(){return q.now()-this._frameStartTime};b.render=function(b,e,h){c._dbgSprite.graphics.clear();if("sleep"===this._frameRate){var d=q.now();if(1E3<=d-this._frameStartTime)this._frameStartTime=d;else return}else{if(!this._visible){this._renderCount++;0===this._renderCount%5&&(db.I._update(),I.loopCount++,this._updateTimers());return}this._frameStartTime=q.now()}this._renderCount++;var d="slow"!==("mouse"===this._frameRate?2E3>this._frameStartTime-this._mouseMoveTime?"fast":"slow":this._frameRate),k=0===this._renderCount%2;I.renderSlow=!d;if(d||k)if(db.I._update(),I.loopCount++,r.isWebGL&&this.renderingEnabled){for(var g=0,l=this._scene3Ds.length;g<l;g++)this._scene3Ds[g]._update();b.clear();a.prototype.render.call(this,b,e,h);I._show&&I._sp&&I._sp.render(b,e,h)}c._dbgSprite.render(b,0,0);if(d||!k)this.renderingEnabled&&(r.isWebGL?(fa.clear(this._bgColor),b.flush(),Ea.instance&&Ea.getInstance().endDispose()):(fa.clear(this._bgColor),a.prototype.render.call(this,b,e,h),I._show&&I._sp&&I._sp.render(b,e,h))),this._updateTimers()};b.renderToNative=function(b,c,h){this._renderCount++;if(this._visible){db.I._update();I.loopCount++;if(r.isWebGL&&this.renderingEnabled){for(var d=0,e=this._scene3Ds.length;d<e;d++)this._scene3Ds[d]._update();b.clear();a.prototype.render.call(this,b,c,h);I._show&&I._sp&&I._sp.render(b,c,h)}this.renderingEnabled&&(fa.clear(this._bgColor),b.flush(),Ea.instance&&Ea.getInstance().endDispose());this._updateTimers()}else 0===this._renderCount%5&&(db.I._update(),I.loopCount++,this._updateTimers())};b._updateTimers=function(){l.systemTimer._update();l.startTimer._update();l.physicsTimer._update();l.updateTimer._update();l.lateTimer._update();l.timer._update()};b._requestFullscreen=function(){var a=q.document.documentElement;a.requestFullscreen?a.requestFullscreen():a.mozRequestFullScreen?a.mozRequestFullScreen():a.webkitRequestFullscreen?a.webkitRequestFullscreen():a.msRequestFullscreen&&a.msRequestFullscreen()};b._fullScreenChanged=function(){l.stage.event("fullscreenchange")};b.exitFullscreen=function(){var a=q.document;a.exitFullscreen?a.exitFullscreen():a.mozCancelFullScreen?a.mozCancelFullScreen():a.webkitExitFullscreen&&a.webkitExitFullscreen()};b.isGlobalRepaint=function(){return this._globalRepaintGet};b.setGlobalRepaint=function(){this._globalRepaintSet=!0};b.add3DUI=function(a){a=a.rootView;0<=this._3dUI.indexOf(a)||this._3dUI.push(a)};b.remove3DUI=function(a){a=this._3dUI.indexOf(a.rootView);return 0<=a?(this._3dUI.splice(a,1),!0):!1};g(0,b,"clientScaleY",function(){return this._transform?this._transform.getScaleY():1});g(0,b,"width",a.prototype._$get_width,function(a){this.designWidth=a;l.superSet(L,this,"width",a);l.systemTimer.callLater(this,this._changeCanvasSize)});g(0,b,"isFocused",function(){return this._isFocused});g(0,b,"alignH",function(){return this._alignH},function(a){this._alignH=a;l.systemTimer.callLater(this,this._changeCanvasSize)});g(0,b,"height",a.prototype._$get_height,function(a){this.designHeight=a;l.superSet(L,this,"height",a);l.systemTimer.callLater(this,this._changeCanvasSize)});g(0,b,"transform",function(){this._tfChanged&&this._adjustTransform();return this._transform=this._transform||this._createTransform()},a.prototype._$set_transform);g(0,b,"isVisibility",function(){return this._isVisibility});g(0,b,"scaleMode",function(){return this._scaleMode},function(a){this._scaleMode=a;l.systemTimer.callLater(this,this._changeCanvasSize)});g(0,b,"alignV",function(){return this._alignV},function(a){this._alignV=a;l.systemTimer.callLater(this,this._changeCanvasSize)});g(0,b,"bgColor",function(){return this._bgColor},function(a){this._bgColor=a;r.isWebGL&&(this._wgColor=a?ba.create(a).arrColor:null);q.onLimixiu?this._wgColor=ba.create(a).arrColor:r.canvas.style.background=a?a:"none"});g(0,b,"mouseX",function(){return Math.round(Ra.instance.mouseX/this.clientScaleX)});g(0,b,"mouseY",function(){return Math.round(Ra.instance.mouseY/this.clientScaleY)});g(0,b,"clientScaleX",function(){return this._transform?this._transform.getScaleX():1});g(0,b,"screenMode",function(){return this._screenMode},function(a){this._screenMode=a});g(0,b,"visible",a.prototype._$get_visible,function(a){this.visible!==a&&(l.superSet(L,this,"visible",a),r._mainCanvas.source.style.visibility=a?"visible":"hidden")});g(0,b,"fullScreenEnabled",null,function(a){var b=q.document,d=r.canvas;a?(d.addEventListener("mousedown",this._requestFullscreen),d.addEventListener("touchstart",this._requestFullscreen),b.addEventListener("fullscreenchange",this._fullScreenChanged),b.addEventListener("mozfullscreenchange",this._fullScreenChanged),b.addEventListener("webkitfullscreenchange",this._fullScreenChanged),b.addEventListener("msfullscreenchange",this._fullScreenChanged)):(d.removeEventListener("mousedown",this._requestFullscreen),d.removeEventListener("touchstart",this._requestFullscreen),b.removeEventListener("fullscreenchange",this._fullScreenChanged),b.removeEventListener("mozfullscreenchange",this._fullScreenChanged),b.removeEventListener("webkitfullscreenchange",this._fullScreenChanged),b.removeEventListener("msfullscreenchange",this._fullScreenChanged))});g(0,b,"frameRate",function(){return r.isConchApp?this._frameRateNative:this._frameRate},function(a){if(r.isConchApp){switch(a){case "fast":w.conch.config.setLimitFPS(60);break;case "mouse":w.conch.config.setMouseFrame(2E3);break;case "slow":w.conch.config.setSlowFrame(!0);break;case "sleep":w.conch.config.setLimitFPS(1)}this._frameRateNative=a}else this._frameRate=a});c.SCALE_NOSCALE="noscale";c.SCALE_EXACTFIT="exactfit";c.SCALE_SHOWALL="showall";c.SCALE_NOBORDER="noborder";c.SCALE_FULL="full";c.SCALE_FIXED_WIDTH="fixedwidth";c.SCALE_FIXED_HEIGHT="fixedheight";c.SCALE_FIXED_AUTO="fixedauto";c.ALIGN_LEFT="left";c.ALIGN_RIGHT="right";c.ALIGN_CENTER="center";c.ALIGN_TOP="top";c.ALIGN_MIDDLE="middle";c.ALIGN_BOTTOM="bottom";c.SCREEN_NONE="none";c.SCREEN_HORIZONTAL="horizontal";c.SCREEN_VERTICAL="vertical";c.FRAME_FAST="fast";c.FRAME_SLOW="slow";c.FRAME_MOUSE="mouse";c.FRAME_SLEEP="sleep";u(c,["_dbgSprite",function(){return this._dbgSprite=new L}]);return c}(L),Ab=function(a){function c(){this._tar=this._infoTxt=null;c.__super.call(this);this._infoTxt=new W;this._infoTxt.color="#ff0000";this._infoTxt.bgColor="#00ff00";this._infoTxt.fontSize=12}n(c,"laya.debug.view.nodeInfo.NodeInfosItem",a);a=c.prototype;a.removeSelf=function(){this._infoTxt.removeSelf();return laya.display.Node.prototype.removeSelf.call(this)};a.showToUI=function(){c.NodeInfoContainer.nodeRecInfoLayer.addChild(this);this._infoTxt.removeSelf();c.NodeInfoContainer.txtLayer.addChild(this._infoTxt);this.findOkPos()};a.randomAPos=function(a){this._infoTxt.x=this.x+l.stage.width*Math.random();this._infoTxt.y=this.y+a*Math.random()};a.findOkPos=function(){this.randomAPos(20)};a.isPosOk=function(){var a,d,e;e=c.NodeInfoContainer.nodeRecInfoLayer._children;d=e.length;var h,f;f=this._infoTxt.getBounds();if(0>f.x||0>f.y||f.right>l.stage.width)return!1;for(a=0;a<d;a++)if(h=e[a],h!=this._infoTxt&&f.intersects(h.getBounds()))return!1;return!0};a.showInfo=function(a){if(this._tar=a){c._txts.length=0;var b,e,h;e=c.showValues.length;a.name?c._txts.push(ha.getClassName(a)+"("+a.name+")"):c._txts.push(ha.getClassName(a));for(b=0;b<e;b++)h=c.showValues[b],c._txts.push(h+":"+c.getNodeValue(a,h));this._infoTxt.text=c._txts.join("\n");this.graphics.clear();!(b=a._getBoundPointsM(!0))||1>b.length||(b=za.pListToPointList(b,!0),Ha.walkArr(b,a.localToGlobal,a),b=za.pointListToPlist(b),c._disBoundRec=M._getWrapRec(b,c._disBoundRec),this.graphics.drawRect(0,0,c._disBoundRec.width,c._disBoundRec.height,null,"#00ffff"),this.pos(c._disBoundRec.x,c._disBoundRec.y))}};a.fresh=function(){this.showInfo(this._tar)};a.clearMe=function(){this._tar=null};a.recover=function(){v.recover("NodeInfosItem",this)};c.init=function(){c.NodeInfoContainer||(pa.init(),c.NodeInfoContainer=pa.I,l.stage.addChild(c.NodeInfoContainer))};c.getNodeInfoByNode=function(a){S.idObj(a);a=S.getObjID(a);c._nodeInfoDic[a]||(c._nodeInfoDic[a]=new c);return c._nodeInfoDic[a]};c.hideAllInfos=function(){var a,d;for(a in c._nodeInfoDic)d=c._nodeInfoDic[a],d.removeSelf();c.clearRelations()};c.showNodeInfo=function(a){var b;b=c.getNodeInfoByNode(a);b.showInfo(a);b.showToUI()};c.showDisInfos=function(a){var b;if(b=a){for(;a;)c.showNodeInfo(a),a=a.parent;wa.setTop(c.NodeInfoContainer);c.apdtTxtInfoPoss(b);c.updateRelations()}};c.apdtTxtInfoPoss=function(a){var b;for(b=[];a;)b.push(a),a=a.parent;var e,h;h=b.length;var f;f=l.stage.width-150;var k;k=100;if(a=b[0])if(a=c.getNodeInfoByNode(a))a=a._infoTxt,f=l.stage.width-a.width-10,k=a.height+10;b=b.reverse();for(e=0;e<h;e++)if(a=b[e],a=c.getNodeInfoByNode(a))a=a._infoTxt,a.pos(f,k*e)};c.clearRelations=function(){c.NodeInfoContainer.lineLayer.graphics.clear()};c.updateRelations=function(){var a;a=c.NodeInfoContainer.lineLayer.graphics;a.clear();var d,e;for(d in c._nodeInfoDic)e=c._nodeInfoDic[d],e.parent&&a.drawLine(e.x,e.y,e._infoTxt.x,e._infoTxt.y,"#0000ff")};c.getNodeValue=function(a,d){c._nodePoint.setTo(0,0);switch(d){case "x":a=a.x+" (g:"+a.localToGlobal(c._nodePoint).x+")";break;case "y":a=a.y+" (g:"+a.localToGlobal(c._nodePoint).y+")";break;default:a=a[d]}return a};c.NodeInfoContainer=null;c._nodeInfoDic={};c._txts=[];u(c,["showValues",function(){return this.showValues="x y scaleX scaleY width height visible mouseEnabled".split(" ")},"_disBoundRec",function(){return this._disBoundRec=new M},"_nodePoint",function(){return this._nodePoint=new P}]);return c}(L),pa=function(a){function c(){this.cacheViewLayer=this.graphicLayer=this.popLayer=this.txtLayer=this.lineLayer=this.nodeRecInfoLayer=null;c.__super.call(this);this.nodeRecInfoLayer=new L;this.lineLayer=new L;this.txtLayer=new L;this.popLayer=new L;this.graphicLayer=new L;this.cacheViewLayer=new L;this.nodeRecInfoLayer.name="nodeRecInfoLayer";this.lineLayer.name="lineLayer";this.txtLayer.name="txtLayer";this.popLayer.name="popLayer";this.graphicLayer.name="graphicLayer";this.cacheViewLayer.name="cacheViewLayer";this.addChild(this.lineLayer);this.addChild(this.cacheViewLayer);this.addChild(this.nodeRecInfoLayer);this.addChild(this.txtLayer);this.addChild(this.popLayer);this.addChild(this.graphicLayer);c.I=this;this.zOrder=999;l.stage.on("doubleclick",this,this.setTop)}n(c,"laya.debug.view.nodeInfo.DebugInfoLayer",a);a=c.prototype;a.setTop=function(){wa.setTop(this)};a.isDebugItem=function(a){return wa.isInTree(this,a)};c.init=function(){c.I||(new c,l.stage.addChild(c.I))};c.I=null;return c}(L),Zc=function(a){function c(){this.relativeY=this.relativeX=0;this.isHaveAnimation=this.isAloneObject=!1;this.aniSpriteArray=null;this.drawImageNum=0;this._map=null;c.__super.call(this)}n(c,"laya.map.GridSprite",a);a=c.prototype;a.initData=function(a,d){void 0===d&&(d=!1);this._map=a;this.isAloneObject=d};a.addAniSprite=function(a){null==this.aniSpriteArray&&(this.aniSpriteArray=[]);this.aniSpriteArray.push(a)};a.show=function(){if(!this._visible&&(this.visible=!0,null!=this.aniSpriteArray))for(var a,d=0;d<this.aniSpriteArray.length;d++)a=this.aniSpriteArray[d],a.show()};a.hide=function(){if(this._visible&&(this.visible=!1,null!=this.aniSpriteArray))for(var a,d=0;d<this.aniSpriteArray.length;d++)a=this.aniSpriteArray[d],a.hide()};a.updatePos=function(){this.isAloneObject?(this._map&&(this.x=this.relativeX-this._map._viewPortX,this.y=this.relativeY-this._map._viewPortY),0>this._x||this._x>this._map.viewPortWidth||0>this._y||this._y>this._map.viewPortHeight?this.hide():this.show()):this._map&&(this.x=this.relativeX-this._map._viewPortX,this.y=this.relativeY-this._map._viewPortY)};a.clearAll=function(){this._map&&(this._map=null);this.visible=!1;var a;if(null!=this.aniSpriteArray)for(var d=0;d<this.aniSpriteArray.length;d++)a=this.aniSpriteArray[d],a.clearAll();this.destroy();this.relativeY=this.relativeX=0;this.isHaveAnimation=!1;this.aniSpriteArray=null;this.drawImageNum=0};return c}(L),kd=function(a){function c(a){this.lineLen=160;this.arrowLen=10;this.sign="Y";this._targetChanger=null;this._isMoving=!1;this.lenControl=new uc;this.rotationControl=new uc;this.lenChanger=$a.create(this,"lineLen");this.lenControlXChanger=$a.create(this.lenControl,"x");void 0===a&&(a="X");c.__super.call(this);this.sign=a;this.addChild(this.lenControl);this.addChild(this.rotationControl);this.lenControl.on("mousedown",this,this.controlMouseDown);this.drawMe()}n(c,"laya.debug.tools.comps.ArrowLine",a);a=c.prototype;a.drawMe=function(){var a;a=this.graphics;a.clear();a.drawLine(0,0,this.lineLen,0,"#ffff00");a.drawLine(this.lineLen,0,this.lineLen-this.arrowLen,-this.arrowLen,"#ff0000");a.drawLine(this.lineLen,0,this.lineLen-this.arrowLen,this.arrowLen,"#ff0000");a.fillText(this.sign,50,-5,"","#ff0000","left");this._isMoving&&this._targetChanger&&a.fillText(this._targetChanger.key+":"+this._targetChanger.value.toFixed(2),this.lineLen-15,-25,"","#ffff00","center");this.lenControl.posTo(this.lineLen-15,0);this.rotationControl.posTo(this.lineLen+10,0);this.size(this.arrowLen,this.lineLen)};a.clearMoveEvents=function(){l.stage.off("mousemove",this,this.stageMouseMove);l.stage.off("mouseup",this,this.stageMouseUp)};a.controlMouseDown=function(a){this.clearMoveEvents();this.lenControlXChanger.record();this.lenChanger.record();this.targetChanger&&this.targetChanger.record();this._isMoving=!0;l.stage.on("mousemove",this,this.stageMouseMove);l.stage.on("mouseup",this,this.stageMouseUp)};a.stageMouseMove=function(a){this.lenControlXChanger.value=this.mouseX;this.lenChanger.showValueByScale(this.lenControlXChanger.scaleValue);this.targetChanger&&this.targetChanger.showValueByScale(this.lenControlXChanger.scaleValue);this.drawMe()};a.stageMouseUp=function(a){this._isMoving=!1;this.noticeChange();this.clearMoveEvents();this.lenControlXChanger.recover();this.lenChanger.recover();this.drawMe()};a.noticeChange=function(){console.log("lenChange:",this.lenChanger.dValue)};g(0,a,"targetChanger",function(){return this._targetChanger},function(a){this._targetChanger&&this._targetChanger.dispose();this._targetChanger=a});return c}(L),Ne=function(a){function c(){this._target=null;this._lenType=[["width","height"],["scaleX","scaleY"]];this._type=1;this.xAxis=new kd("X");this.yAxis=new kd("Y");this.controlBox=new uc;this._point=new P;this.oPoint=new P;this.myRotationChanger=$a.create(this,"rotation");this.targetRotationChanger=$a.create(null,"rotation");this.stageMouseRotationChanger=new $a;c.__super.call(this);this.mouseEnabled=!0;this.size(1,1);this.initMe();this.xAxis.rotationControl.on("mousedown",this,this.controlMouseDown);this.yAxis.rotationControl.on("mousedown",this,this.controlMouseDown);this.controlBox.on("mousedown",this,this.controlBoxMouseDown);this.on("dragmove",this,this.dragging)}n(c,"laya.debug.tools.comps.Axis",a);a=c.prototype;a.updateChanges=function(){if(this._target){var a;a=this._lenType[this._type];this.xAxis.targetChanger=$a.create(this._target,a[0]);this.yAxis.targetChanger=$a.create(this._target,a[1])}};a.switchType=function(){this._type++;this.type=this._type%=this._lenType.length};a.controlBoxMouseDown=function(a){this.startDrag()};a.dragging=function(){this._target&&(this._point.setTo(this.x,this.y),wa.transPoint(this.parent,this._target.parent,this._point),this._target.pos(this._point.x,this._point.y))};a.initMe=function(){this.addChild(this.xAxis);this.addChild(this.yAxis);this.yAxis.rotation=90;this.addChild(this.controlBox);this.controlBox.posTo(0,0)};a.clearMoveEvents=function(){l.stage.off("mousemove",this,this.stageMouseMove);l.stage.off("mouseup",this,this.stageMouseUp)};a.controlMouseDown=function(a){this.targetRotationChanger.target=this.target;this.clearMoveEvents();this.oPoint.setTo(0,0);this.myRotationChanger.record();this.oPoint=this.localToGlobal(this.oPoint);this.stageMouseRotationChanger.value=this.getStageMouseRatation();this.stageMouseRotationChanger.record();this.targetRotationChanger.record();l.stage.on("mousemove",this,this.stageMouseMove);l.stage.on("mouseup",this,this.stageMouseUp)};a.getStageMouseRatation=function(){return Hb.getRotation(this.oPoint.x,this.oPoint.y,l.stage.mouseX,l.stage.mouseY)};a.stageMouseMove=function(a){this.stageMouseRotationChanger.value=this.getStageMouseRatation();a=-this.stageMouseRotationChanger.dValue;this.target?this.targetRotationChanger.showValueByAdd(a):this.myRotationChanger.showValueByAdd(a)};a.stageMouseUp=function(a){this.noticeChange();this.clearMoveEvents()};a.noticeChange=function(){console.log("rotate:",-this.stageMouseRotationChanger.dValue)};g(0,a,"target",function(){return this._target},function(a){this._target=a;this.updateChanges()});g(0,a,"type",function(){return this._type},function(a){this._type=a;this.updateChanges()});return c}(L),$c=function(a){function c(){this._aniName=this._tileTextureSet=null;c.__super.call(this)}n(c,"laya.map.TileAniSprite",a);a=c.prototype;a.setTileTextureSet=function(a,d){this._aniName=a;this._tileTextureSet=d;d.addAniSprite(this._aniName,this)};a.show=function(){this._tileTextureSet.addAniSprite(this._aniName,this)};a.hide=function(){this._tileTextureSet.removeAniSprite(this._aniName)};a.clearAll=function(){this._tileTextureSet.removeAniSprite(this._aniName);this.destroy();this._aniName=this._tileTextureSet=null};return c}(L),wf=function(a){function c(a,b){this._curOriginalData=this._player=this._templet=null;this._boneMatrixArray=[];this._lastTime=0;this._currAniName=null;this._currAniIndex=-1;this._pause=!0;this._clipIndex=this._aniClipIndex=-1;this._skinIndex=0;this._skinName="default";this._aniMode=0;this._boneSlotArray=this._bindBoneBoneSlotDic=this._boneSlotDic=this._graphicsCache=null;this._total=this._index=-1;this._indexControl=!1;this._complete=this._texturePath=this._aniPath=null;this._loadAniMode=0;this._aniSectionDic=this._boneList=this._rootBone=this._pathDic=this._tfArr=this._ikArr=this._yReverseMatrix=null;this._drawOrderIndex=this._eventIndex=0;this._drawOrder=null;this._lastUpdateAniClipIndex=this._lastAniClipIndex=-1;c.__super.call(this);void 0===b&&(b=0);a&&this.init(a,b)}n(c,"laya.ani.bone.Skeleton",a);var b=c.prototype;b.init=function(a,b){void 0===b&&(b=0);var d,c;if(1==b)for(this._graphicsCache=[],d=0,c=a.getAnimationCount();d<c;d++)this._graphicsCache.push([]);this._yReverseMatrix=a.yReverseMatrix;this._aniMode=b;this._templet=a;this._templet._addReference(1);this._player=new nf;this._player.cacheFrameRate=a.rate;this._player.templet=a;this._player.play();this._parseSrcBoneMatrix();this._boneList=a.mBoneArr;this._rootBone=a.mRootBone;this._aniSectionDic=a.aniSectionDic;if(0<a.ikArr.length)for(this._ikArr=[],d=0,c=a.ikArr.length;d<c;d++)this._ikArr.push(new We(a.ikArr[d],this._boneList));if(0<a.pathArr.length){var e;null==this._pathDic&&(this._pathDic={});var g;d=0;for(c=a.pathArr.length;d<c;d++){b=a.pathArr[d];e=new Xc(b,this._boneList);if(g=this._boneSlotDic[b.name])e=new Xc(b,this._boneList),e.target=g;this._pathDic[b.name]=e}}if(0<a.tfArr.length)for(this._tfArr=[],d=0,c=a.tfArr.length;d<c;d++)this._tfArr.push(new Ae(a.tfArr[d],this._boneList));0<a.skinDataArray.length&&(this._skinName=this._templet.skinDataArray[this._skinIndex].name);this._player.on("played",this,this._onPlay);this._player.on("stopped",this,this._onStop);this._player.on("paused",this,this._onPause)};b.load=function(a,b,c){void 0===c&&(c=0);this._aniPath=a;this._complete=b;this._loadAniMode=c;l.loader.load([{url:a,type:"arraybuffer"}],B.create(this,this._onLoaded))};b._onLoaded=function(){var a=x.getRes(this._aniPath);if(null!=a){null==ob.TEMPLET_DICTIONARY&&(ob.TEMPLET_DICTIONARY={});var b;(b=ob.TEMPLET_DICTIONARY[this._aniPath])?b.isParseFail?this._parseFail():b.isParserComplete?this._parseComplete():(b.on("complete",this,this._parseComplete),b.on("error",this,this._parseFail)):(b=new ob,b._setCreateURL(this._aniPath),ob.TEMPLET_DICTIONARY[this._aniPath]=b,b.on("complete",this,this._parseComplete),b.on("error",this,this._parseFail),b.isParserComplete=!1,b.parseData(null,a))}};b._parseComplete=function(){var a=ob.TEMPLET_DICTIONARY[this._aniPath];a&&(this.init(a,this._loadAniMode),this.play(0,!0));this._complete&&this._complete.runWith(this)};b._parseFail=function(){console.log("[Error]:"+this._aniPath+"\u89e3\u6790\u5931\u8d25")};b._onPlay=function(){this.event("played")};b._onStop=function(){var a,b=this._templet.eventAniArr[this._aniClipIndex];if(b&&this._eventIndex<b.length)for(;this._eventIndex<b.length;this._eventIndex++)a=b[this._eventIndex],a.time>=this._player.playStart&&a.time<=this._player.playEnd&&this.event("label",a);this._drawOrder=null;this.event("stopped")};b._onPause=function(){this.event("paused")};b._parseSrcBoneMatrix=function(){var a,b;b=this._templet.srcBoneMatrixArr.length;for(a=0;a<b;a++)this._boneMatrixArray.push(new C);if(0==this._aniMode)this._boneSlotDic=this._templet.boneSlotDic,this._bindBoneBoneSlotDic=this._templet.bindBoneBoneSlotDic,this._boneSlotArray=this._templet.boneSlotArray;else{null==this._boneSlotDic&&(this._boneSlotDic={});null==this._bindBoneBoneSlotDic&&(this._bindBoneBoneSlotDic={});null==this._boneSlotArray&&(this._boneSlotArray=[]);var c=this._templet.boneSlotArray,f,k;a=0;for(b=c.length;a<b;a++)f=c[a],k=this._bindBoneBoneSlotDic[f.parent],null==k&&(this._bindBoneBoneSlotDic[f.parent]=k=[]),this._boneSlotDic[f.name]=f=f.copy(),k.push(f),this._boneSlotArray.push(f)}};b._emitMissedEvents=function(a,b,c){void 0===c&&(c=0);if(a=this._templet.eventAniArr[this._player.currentAnimationClipIndex]){var d;for(b=a.length;c<b;c++)d=a[c],d.time>=this._player.playStart&&d.time<=this._player.playEnd&&this.event("label",d)}};b._update=function(a){void 0===a&&(a=!0);if(!(this._pause||a&&this._indexControl)){var b=this.timer.currTimer,d=this._player.currentKeyframeIndex,c=b-this._lastTime;a?this._player._update(c):d=-1;this._lastTime=b;this._player&&(this._index=this._clipIndex=this._player.currentKeyframeIndex,0>this._index||0<c&&this._clipIndex==d&&this._lastUpdateAniClipIndex==this._aniClipIndex||(this._lastUpdateAniClipIndex=this._aniClipIndex,d>this._clipIndex&&0!=this._eventIndex&&(this._emitMissedEvents(this._player.playStart,this._player.playEnd,this._eventIndex),this._eventIndex=0),(a=this._templet.eventAniArr[this._aniClipIndex])&&this._eventIndex<a.length&&(a=a[this._eventIndex],a.time>=this._player.playStart&&a.time<=this._player.playEnd?this._player.currentPlayTime>=a.time&&(this.event("label",a),this._eventIndex++):this._eventIndex++),0==this._aniMode?(a=this._templet.getGrahicsDataWithCache(this._aniClipIndex,this._clipIndex)||this._createGraphics())&&this.graphics!=a&&(this.graphics=a):1==this._aniMode?(a=this._getGrahicsDataWithCache(this._aniClipIndex,this._clipIndex)||this._createGraphics())&&this.graphics!=a&&(this.graphics=a):this._createGraphics()))}};b._createGraphics=function(a){void 0===a&&(a=-1);-1==a&&(a=this._clipIndex);var b=a*this._player.cacheFrameRateInterval,d,c=this._templet.drawOrderAniArr[this._aniClipIndex];if(c&&0<c.length)for(this._drawOrderIndex=0,d=c[this._drawOrderIndex];b>=d.time;){this._drawOrder=d.drawOrder;this._drawOrderIndex++;if(this._drawOrderIndex>=c.length)break;d=c[this._drawOrderIndex]}0==this._aniMode||1==this._aniMode?this.graphics=sc.create():this.graphics instanceof laya.ani.GraphicsAni?this.graphics.clear():this.graphics=sc.create();d=this.graphics;var k=this._templet.getNodes(this._aniClipIndex);this._templet.getOriginalData(this._aniClipIndex,this._curOriginalData,null,a,0==this._player.state?b+this._player.cacheFrameRateInterval:b);var g=this._aniSectionDic[this._aniClipIndex],l=0,n,q,r,u,v,w=this._templet.srcBoneMatrixArr.length;r=this._curOriginalData;c=0;for(n=g[0];c<w;c++)v=this._boneList[c],v=v.resultTransform,u=this._templet.srcBoneMatrixArr[c],v.scX=u.scX*r[l++],v.skX=u.skX+r[l++],v.skY=u.skY+r[l++],v.scY=u.scY*r[l++],v.x=u.x+r[l++],v.y=u.y+r[l++],8===this._templet.tMatrixDataLen&&(v.skewX=u.skewX+r[l++],v.skewY=u.skewY+r[l++]);w={};u={};var y;for(n+=g[1];c<n;c++)y=k[c],w[y.name]=r[l++],u[y.name]=r[l++],l+=4;v={};var x={};for(n+=g[2];c<n;c++)y=k[c],v[y.name]=r[l++],x[y.name]=r[l++],l+=4;if(this._pathDic)for(n+=g[3];c<n;c++)if(y=k[c],g=this._pathDic[y.name])switch((new Sa(y.extenData)).getByte()){case 1:g.position=r[l++];break;case 2:g.spacing=r[l++];break;case 3:g.rotateMix=r[l++],g.translateMix=r[l++]}this._rootBone.update(this._yReverseMatrix||C.TEMP.identity());if(this._ikArr)for(c=0,n=this._ikArr.length;c<n;c++)k=this._ikArr[c],v.hasOwnProperty(k.name)&&(k.bendDirection=v[k.name]),x.hasOwnProperty(k.name)&&(k.mix=x[k.name]),k.apply();if(this._pathDic)for(q in this._pathDic)g=this._pathDic[q],g.apply(this._boneList,d);if(this._tfArr)for(c=0,k=this._tfArr.length;c<k;c++)n=this._tfArr[c],n.apply();c=0;for(k=this._boneList.length;c<k;c++)if(v=this._boneList[c],r=this._bindBoneBoneSlotDic[v.name],v.resultMatrix.copyTo(this._boneMatrixArray[c]),r)for(l=0,n=r.length;l<n;l++)(q=r[l])&&q.setParentMatrix(v.resultMatrix);k={};if((l=this._templet.deformAniArr)&&0<l.length){if(this._lastAniClipIndex!=this._aniClipIndex)for(this._lastAniClipIndex=this._aniClipIndex,c=0,n=this._boneSlotArray.length;c<n;c++)q=this._boneSlotArray[c],q.deformData=null;n=l[this._aniClipIndex];c=n["default"];this._setDeform(c,k,this._boneSlotArray,b);for(var B in n)"default"!=B&&B!=this._skinName&&(c=n[B],this._setDeform(c,k,this._boneSlotArray,b));c=n[this._skinName];this._setDeform(c,k,this._boneSlotArray,b)}if(this._drawOrder)for(c=0,n=this._drawOrder.length;c<n;c++)q=this._boneSlotArray[this._drawOrder[c]],B=w[q.name],b=u[q.name],isNaN(b),isNaN(B)||-2==B||(this._templet.attachmentNames?q.showDisplayByName(this._templet.attachmentNames[B]):q.showDisplayByIndex(B)),k[this._drawOrder[c]]?(B=k[this._drawOrder[c]],q.deformData=q.currDisplayData&&B[q.currDisplayData.attachmentName]?B[q.currDisplayData.attachmentName]:null):q.deformData=null,isNaN(b)?q.draw(d,this._boneMatrixArray,2==this._aniMode):q.draw(d,this._boneMatrixArray,2==this._aniMode,b),isNaN(b);else for(c=0,n=this._boneSlotArray.length;c<n;c++)q=this._boneSlotArray[c],B=w[q.name],b=u[q.name],isNaN(b),isNaN(B)||-2==B||(this._templet.attachmentNames?q.showDisplayByName(this._templet.attachmentNames[B]):q.showDisplayByIndex(B)),k[c]?(B=k[c],q.deformData=q.currDisplayData&&B[q.currDisplayData.attachmentName]?B[q.currDisplayData.attachmentName]:null):q.deformData=null,isNaN(b)?q.draw(d,this._boneMatrixArray,2==this._aniMode):q.draw(d,this._boneMatrixArray,2==this._aniMode,b),isNaN(b);0==this._aniMode?(this._templet.setGrahicsDataWithCache(this._aniClipIndex,a,d),this._checkIsAllParsed(this._aniClipIndex)):1==this._aniMode&&this._setGrahicsDataWithCache(this._aniClipIndex,a,d);return d};b._checkIsAllParsed=function(a){var b,d;d=Math.floor(.01+this._templet.getAniDuration(a)/1E3*this._player.cacheFrameRate);for(b=0;b<d;b++)if(!this._templet.getGrahicsDataWithCache(a,b))return;this._templet.getGrahicsDataWithCache(a,d)?this._templet.deleteAniData(a):this._createGraphics(d)};b._setDeform=function(a,b,c,f){if(a){var d,e,h,g,l,n;if(a)for(g=0,l=a.deformSlotDataList.length;g<l;g++)for(d=a.deformSlotDataList[g],n=0;n<d.deformSlotDisplayList.length;n++)e=d.deformSlotDisplayList[n],h=c[e.slotIndex],e.apply(f,h),b[e.slotIndex]||(b[e.slotIndex]={}),b[e.slotIndex][e.attachment]=e.deformData}};b.getAnimNum=function(){return this._templet.getAnimationCount()};b.getAniNameByIndex=function(a){return this._templet.getAniNameByIndex(a)};b.getSlotByName=function(a){return this._boneSlotDic[a]};b.showSkinByName=function(a,b){void 0===b&&(b=!0);this.showSkinByIndex(this._templet.getSkinIndexByName(a),b)};b.showSkinByIndex=function(a,b){void 0===b&&(b=!0);for(var d=0;d<this._boneSlotArray.length;d++)this._boneSlotArray[d].showSlotData(null,b);this._templet.showSkinByIndex(this._boneSlotDic,a,b)&&(b=this._templet.skinDataArray[a],this._skinIndex=a,this._skinName=b.name);this._clearCache()};b.showSlotSkinByIndex=function(a,b){0!=this._aniMode&&((a=this.getSlotByName(a))&&a.showDisplayByIndex(b),this._clearCache())};b.showSlotSkinByName=function(a,b){0!=this._aniMode&&((a=this.getSlotByName(a))&&a.showDisplayByName(b),this._clearCache())};b.replaceSlotSkinName=function(a,b,c){0!=this._aniMode&&((a=this.getSlotByName(a))&&a.replaceDisplayByName(b,c),this._clearCache())};b.replaceSlotSkinByIndex=function(a,b,c){0!=this._aniMode&&((a=this.getSlotByName(a))&&a.replaceDisplayByIndex(b,c),this._clearCache())};b.setSlotSkin=function(a,b){0!=this._aniMode&&((a=this.getSlotByName(a))&&a.replaceSkin(b),this._clearCache())};b._clearCache=function(){if(1==this._aniMode)for(var a=0,b=this._graphicsCache.length;a<b;a++){for(var c=0,f=this._graphicsCache[a].length;c<f;c++){var k=this._graphicsCache[a][c];k&&k!=this.graphics&&sc.recycle(k)}this._graphicsCache[a].length=0}};b.play=function(a,b,c,f,k,g){void 0===c&&(c=!0);void 0===f&&(f=0);void 0===k&&(k=0);void 0===g&&(g=!0);this._indexControl=!1;var d=-1;b=b?2147483647:0;if("string"==typeof a)for(var e=0,h=this._templet.getAnimationCount();e<h;e++){var m=this._templet.getAnimation(e);if(m&&a==m.name){d=e;break}}else d=a;-1<d&&d<this.getAnimNum()&&(this._aniClipIndex=d,c||this._pause||this._currAniIndex!=d)&&(this._currAniIndex=d,this._curOriginalData=new Float32Array(this._templet.getTotalkeyframesLength(d)),this._drawOrder=null,this._eventIndex=0,this._player.play(d,this._player.playbackRate,b,f,k),g&&this._templet.showSkinByIndex(this._boneSlotDic,this._skinIndex),this._pause&&(this._pause=!1,this._lastTime=q.now(),this.timer.frameLoop(1,this,this._update,null,!0)),this._update())};b.stop=function(){this._pause||(this._pause=!0,this._player&&this._player.stop(!0),this.timer.clear(this,this._update))};b.playbackRate=function(a){this._player&&(this._player.playbackRate=a)};b.paused=function(){this._pause||(this._pause=!0,this._player&&(this._player.paused=!0),this.timer.clear(this,this._update))};b.resume=function(){this._indexControl=!1;this._pause&&(this._pause=!1,this._player&&(this._player.paused=!1),this._lastTime=q.now(),this.timer.frameLoop(1,this,this._update,null,!0))};b._getGrahicsDataWithCache=function(a,b){return this._graphicsCache[a][b]};b._setGrahicsDataWithCache=function(a,b,c){this._graphicsCache[a][b]=c};b.destroy=function(b){void 0===b&&(b=!0);a.prototype.destroy.call(this,b);this._templet._removeReference(1);this._templet=null;this._player&&this._player.offAll();this._curOriginalData=this._player=null;this._lastTime=this._boneMatrixArray.length=0;this.timer.clear(this,this._update)};g(0,b,"url",function(){return this._aniPath},function(a){this.load(a)});g(0,b,"index",function(){return this._index},function(a){this.player&&(this._index=a,this._player.currentTime=1E3*this._index/this._player.cacheFrameRate,this._indexControl=!0,this._update(!1))});g(0,b,"total",function(){return this._total=this._templet&&this._player?Math.floor(this._templet.getAniDuration(this._player.currentAnimationClipIndex)/1E3*this._player.cacheFrameRate):-1});g(0,b,"templet",function(){return this._templet});g(0,b,"player",function(){return this._player});c.useSimpleMeshInCanvas=!1;return c}(L),uc=function(a){function c(){this.recWidth=10;c.__super.call(this);this.drawMe()}n(c,"laya.debug.tools.comps.Rect",a);a=c.prototype;a.drawMe=function(){var a;a=this.graphics;a.clear();a.drawRect(0,0,this.recWidth,this.recWidth,"#22ff22");this.size(this.recWidth,this.recWidth)};a.posTo=function(a,d){this.x=a-.5*this.recWidth;this.y=d-.5*this.recWidth};return c}(L),ob=function(a){function c(){this._textureJson=this._mainTexture=null;this._graphicsCache=[];this.srcBoneMatrixArr=[];this.ikArr=[];this.tfArr=[];this.pathArr=[];this.boneSlotDic={};this.bindBoneBoneSlotDic={};this.boneSlotArray=[];this.skinDataArray=[];this.skinDic={};this.subTextureDic={};this.isParseFail=!1;this.yReverseMatrix=null;this.drawOrderAniArr=[];this.eventAniArr=[];this.attachmentNames=null;this.deformAniArr=[];this._isDestroyed=!1;this._rate=30;this.isParserComplete=!1;this.aniSectionDic={};this._skBufferUrl=null;this._textureDic={};this._relativeUrl=this._path=this._loadList=null;this.tMatrixDataLen=0;this.mRootBone=null;c.__super.call(this);this.skinSlotDisplayDataArr=[];this.mBoneArr=[]}n(c,"laya.ani.bone.Templet",a);var b=c.prototype;b.loadAni=function(a){this._skBufferUrl=a;l.loader.load(a,B.create(this,this.onComplete),null,"arraybuffer")};b.onComplete=function(a){this._isDestroyed?this.destroy():(a=x.getRes(this._skBufferUrl))?(this._path=this._skBufferUrl.slice(0,this._skBufferUrl.lastIndexOf("/"))+"/",this.parseData(null,a)):this.event("error","load failed:"+this._skBufferUrl)};b.parseData=function(a,b,c){void 0===c&&(c=30);if(!this._path){var d=this._relativeUrl||this.url;if(d){var e=d.lastIndexOf("/");this._path=0<e?d.slice(0,e)+"/":""}}this._mainTexture=a;this._rate=c;this.parse(b)};b.buildArmature=function(a){void 0===a&&(a=0);return new wf(this,a)};b.parse=function(b){a.prototype.parse.call(this,b);this.event("loaded",this);this._aniVersion!=c.LAYA_ANIMATION_VISION&&console.log("[Error] \u7248\u672c\u4e0d\u4e00\u81f4\uff0c\u8bf7\u4f7f\u7528IDE\u7248\u672c\u914d\u5957\u7684\u91cd\u65b0\u5bfc\u51fa"+this._aniVersion+"-\x3e"+c.LAYA_ANIMATION_VISION);this._mainTexture?this._parsePublicExtData():this._parseTexturePath()};b._parseTexturePath=function(){if(this._isDestroyed)this.destroy();else{var a;this._loadList=[];var b=new Sa(this.getPublicExtData()),c,f=b.getInt32(),k=b.readUTFString().split("\n"),g;for(a=0;a<f;a++)g=this._path+k[2*a],b.getFloat32(),b.getFloat32(),b.getFloat32(),b.getFloat32(),c=b.getFloat32(),isNaN(c),c=b.getFloat32(),isNaN(c),c=b.getFloat32(),isNaN(c),c=b.getFloat32(),isNaN(c),-1==this._loadList.indexOf(g)&&this._loadList.push(g);l.loader.load(this._loadList,B.create(this,this._textureComplete))}};b._textureComplete=function(){for(var a,b=0,c=this._loadList.length;b<c;b++)a=this._loadList[b],this._textureDic[a]=x.getRes(a);this._parsePublicExtData()};b._parseBlendMode=function(a){var b=[];a.pos=a.length-2;var d=a.readInt16();if(d<a.length){a.pos=a.length-2-d;d=a.readByte();if(5!=d)return b;if("BLEND"==a.readUTFBytes(d))for(var d=a.readByte(),c=0;c<d;++c)b.push(a.readUTFBytes(a.readByte()))}return b};b._parsePublicExtData=function(){var a,b,c,f,k;a=0;for(k=this.getAnimationCount();a<k;a++)this._graphicsCache.push([]);c="Dragon"!=this._aniClassName;var g=new Sa(this.getPublicExtData()),l=this._parseBlendMode(g);g.pos=0;var n,q,r,u,v,w,y,x;f=g.getInt32();k=g.readUTFString();var B=k.split("\n");for(a=0;a<f;a++){b=this._mainTexture;n=this._path+B[2*a];k=B[2*a+1];null==this._mainTexture&&(b=this._textureDic[n]);if(!b){this.event("error",this);this.isParseFail=!0;return}n=g.getFloat32();q=g.getFloat32();r=g.getFloat32();u=g.getFloat32();x=g.getFloat32();v=isNaN(x)?0:x;x=g.getFloat32();w=isNaN(x)?0:x;x=g.getFloat32();y=isNaN(x)?r:x;x=g.getFloat32();x=isNaN(x)?u:x;this.subTextureDic[k]=ga.create(b,n,q,r,u,-v,-w,y,x)}this._mainTexture=b;b=g.getUint16();for(a=0;a<b;a++)f=[],f.push(g.getUint16()),f.push(g.getUint16()),f.push(g.getUint16()),f.push(g.getUint16()),this.aniSectionDic[a]=f;k=g.getInt16();var B={},D;for(a=0;a<k;a++)b=new te,0==a?D=b:b.root=D,b.d=c?-1:1,f=g.readUTFString(),n=g.readUTFString(),b.length=g.getFloat32(),1==g.getByte()&&(b.inheritRotation=!1),1==g.getByte()&&(b.inheritScale=!1),b.name=f,n&&((n=B[n])?n.addChild(b):this.mRootBone=b),B[f]=b,this.mBoneArr.push(b);this.tMatrixDataLen=g.getUint16();a=g.getUint16();f=Math.floor(a/this.tMatrixDataLen);B=this.srcBoneMatrixArr;for(a=0;a<f;a++)k=new bc,k.scX=g.getFloat32(),k.skX=g.getFloat32(),k.skY=g.getFloat32(),k.scY=g.getFloat32(),k.x=g.getFloat32(),k.y=g.getFloat32(),8===this.tMatrixDataLen&&(k.skewX=g.getFloat32(),k.skewY=g.getFloat32()),B.push(k),b=this.mBoneArr[a],b.transform=k;k=g.getUint16();for(a=0;a<k;a++){f=new Se;B=g.getUint16();for(b=0;b<B;b++)f.boneNames.push(g.readUTFString()),f.boneIndexs.push(g.getInt16());f.name=g.readUTFString();f.targetBoneName=g.readUTFString();f.targetBoneIndex=g.getInt16();f.bendDirection=g.getFloat32();f.mix=g.getFloat32();f.isSpine=c;this.ikArr.push(f)}f=g.getUint16();for(a=0;a<f;a++){c=new me;k=g.getUint16();for(b=0;b<k;b++)c.boneIndexs.push(g.getInt16());c.name=g.getUTFString();c.targetIndex=g.getInt16();c.rotateMix=g.getFloat32();c.translateMix=g.getFloat32();c.scaleMix=g.getFloat32();c.shearMix=g.getFloat32();c.offsetRotation=g.getFloat32();c.offsetX=g.getFloat32();c.offsetY=g.getFloat32();c.offsetScaleX=g.getFloat32();c.offsetScaleY=g.getFloat32();c.offsetShearY=g.getFloat32();this.tfArr.push(c)}f=g.getUint16();for(a=0;a<f;a++){c=new Ke;c.name=g.readUTFString();k=g.getUint16();for(b=0;b<k;b++)c.bones.push(g.getInt16());c.target=g.readUTFString();c.positionMode=g.readUTFString();c.spacingMode=g.readUTFString();c.rotateMode=g.readUTFString();c.offsetRotation=g.getFloat32();c.position=g.getFloat32();c.spacing=g.getFloat32();c.rotateMix=g.getFloat32();c.translateMix=g.getFloat32();this.pathArr.push(c)}var F,A;w=g.getInt16();for(a=0;a<w;a++){y=g.getUint8();x={};this.deformAniArr.push(x);for(var I=0;I<y;I++)for(r=new se,r.skinName=g.getUTFString(),x[r.skinName]=r,B=g.getInt16(),b=0;b<B;b++)for(u=new ke,r.deformSlotDataList.push(u),n=g.getInt16(),c=0;c<n;c++)for(v=new Ee,u.deformSlotDisplayList.push(v),v.slotIndex=g.getInt16(),v.attachment=g.getUTFString(),q=g.getInt16(),f=0;f<q;f++)for(1==g.getByte()?v.tweenKeyList.push(!0):v.tweenKeyList.push(!1),k=g.getFloat32(),v.timeList.push(k),A=[],v.vectices.push(A),F=g.getInt16(),k=0;k<F;k++)A.push(g.getFloat32())}k=g.getInt16();for(a=0;a<k;a++){B=g.getInt16();f=[];for(b=0;b<B;b++){n=new Ie;n.time=g.getFloat32();q=g.getInt16();for(c=0;c<q;c++)n.drawOrder.push(g.getInt16());f.push(n)}this.drawOrderAniArr.push(f)}f=g.getInt16();for(a=0;a<f;a++){k=g.getInt16();c=[];for(b=0;b<k;b++)B=new ue,B.name=g.getUTFString(),B.intValue=g.getInt32(),B.floatValue=g.getFloat32(),B.stringValue=g.getUTFString(),B.time=g.getFloat32(),c.push(B);this.eventAniArr.push(c)}b=g.getInt16();if(0<b)for(this.attachmentNames=[],a=0;a<b;a++)this.attachmentNames.push(g.getUTFString());b=g.getInt16();for(a=0;a<b;a++)c=new bf,c.name=g.readUTFString(),c.parent=g.readUTFString(),c.attachmentName=g.readUTFString(),c.srcDisplayIndex=c.displayIndex=g.getInt16(),c.templet=this,-1!=l.indexOf(c.name)&&(c.blendMode="add"),this.boneSlotDic[c.name]=c,f=this.bindBoneBoneSlotDic[c.parent],null==f&&(this.bindBoneBoneSlotDic[c.parent]=f=[]),f.push(c),this.boneSlotArray.push(c);l=g.readUTFString().split("\n");B=0;n=g.getUint8();for(a=0;a<n;a++){q=new De;q.name=l[B++];v=g.getUint8();for(b=0;b<v;b++){r=new Wd;r.name=l[B++];w=g.getUint8();for(c=0;c<w;c++){u=new Ue;this.skinSlotDisplayDataArr.push(u);u.name=l[B++];u.attachmentName=l[B++];u.transform=new bc;u.transform.scX=g.getFloat32();u.transform.skX=g.getFloat32();u.transform.skY=g.getFloat32();u.transform.scY=g.getFloat32();u.transform.x=g.getFloat32();u.transform.y=g.getFloat32();r.displayArr.push(u);u.width=g.getFloat32();u.height=g.getFloat32();u.type=g.getUint8();u.verLen=g.getUint16();k=g.getUint16();if(0<k)for(u.bones=[],f=0;f<k;f++)y=g.getUint16(),u.bones.push(y);k=g.getUint16();if(0<k)for(u.uvs=[],f=0;f<k;f++)u.uvs.push(g.getFloat32());k=g.getUint16();if(0<k)for(u.weights=[],f=0;f<k;f++)u.weights.push(g.getFloat32());k=g.getUint16();if(0<k)for(u.triangles=[],f=0;f<k;f++)u.triangles.push(g.getUint16());k=g.getUint16();if(0<k)for(u.vertices=[],f=0;f<k;f++)u.vertices.push(g.getFloat32());k=g.getUint16();if(0<k)for(u.lengths=[],f=0;f<k;f++)u.lengths.push(g.getFloat32())}q.slotArr.push(r)}this.skinDic[q.name]=q;this.skinDataArray.push(q)}1==g.getUint8()?(this.yReverseMatrix=new C(1,0,0,-1,0,0),D&&D.setTempMatrix(this.yReverseMatrix)):D&&D.setTempMatrix(new C);this.showSkinByIndex(this.boneSlotDic,0);this.isParserComplete=!0;this.event("complete",this)};b.getTexture=function(a){var b=this.subTextureDic[a];b||(b=this.subTextureDic[a.substr(0,a.length-1)]);return null==b?this._mainTexture:b};b.showSkinByIndex=function(a,b,c){void 0===c&&(c=!0);if(0>b&&b>=this.skinDataArray.length)return!1;var d,e,h,g=this.skinDataArray[b];if(g){b=0;for(d=g.slotArr.length;b<d;b++)if(h=g.slotArr[b])if(e=a[h.name])e.showSlotData(h,c),c&&"undefined"!=e.attachmentName&&"null"!=e.attachmentName?e.showDisplayByName(e.attachmentName):e.showDisplayByIndex(e.displayIndex);return!0}return!1};b.getSkinIndexByName=function(a){for(var b,d=0,c=this.skinDataArray.length;d<c;d++)if(b=this.skinDataArray[d],b.name==a)return d;return-1};b.getGrahicsDataWithCache=function(a,b){return this._graphicsCache[a]&&this._graphicsCache[a][b]?this._graphicsCache[a][b]:null};b._setCreateURL=function(a){this._relativeUrl=a;laya.resource.Resource.prototype._setCreateURL.call(this,a)};b.setGrahicsDataWithCache=function(a,b,c){this._graphicsCache[a][b]=c};b.deleteAniData=function(a){this._anis[a]&&(a=this._anis[a],a.bone3DMap=null,a.nodes=null)};b.destroy=function(){this._isDestroyed=!0;var a,b;for(b in this.subTextureDic)(a=this.subTextureDic[b])&&a.destroy();for(b in this._textureDic)(a=this._textureDic[b])&&a.destroy();b=0;for(var h=this.skinSlotDisplayDataArr.length;b<h;b++)a=this.skinSlotDisplayDataArr[b],a.destory();this.skinSlotDisplayDataArr.length=0;this.url&&delete c.TEMPLET_DICTIONARY[this.url];laya.resource.Resource.prototype.destroy.call(this)};b.getAniNameByIndex=function(a){return(a=this.getAnimation(a))?a.name:null};g(0,b,"rate",function(){return this._rate},function(a){this._rate=a});c.LAYA_ANIMATION_VISION="LAYAANIMATION:1.6.0";c.TEMPLET_DICTIONARY=null;return c}(nc),Ta=function(a){function c(a,d,e,h,f){this._attribInfo=null;this.customCompile=!1;this._curActTexIndex=0;this.tag={};this._params=this._program=null;this._paramsMap={};c.__super.call(this);if(!a||!d)throw"Shader Error";this._attribInfo=f;this._id=++c._count;this._vs=a;this._ps=d;this._nameMap=h?h:{};null!=e&&(c.sharders[e]=this);this.recreateResource();this.lock=!0}n(c,"laya.webgl.shader.Shader",a);a=c.prototype;a.recreateResource=function(){this._compile();this._setGPUMemory(0)};a._disposeResource=function(){R.mainContext.deleteShader(this._vshader);R.mainContext.deleteShader(this._pshader);R.mainContext.deleteProgram(this._program);this._params=this._vshader=this._pshader=this._program=null;this._paramsMap={};this._setGPUMemory(0);this._curActTexIndex=0};a._compile=function(){if(this._vs&&this._ps&&!this._params){this._reCompile=!0;this._params=[];var a;this.customCompile&&(a=ub.preGetParams(this._vs,this._ps));var d=R.mainContext;this._program=d.createProgram();this._vshader=c._createShader(d,this._vs,35633);this._pshader=c._createShader(d,this._ps,35632);d.attachShader(this._program,this._vshader);d.attachShader(this._program,this._pshader);var e,h,f=this._attribInfo?this._attribInfo.length:0;for(h=0;h<f;h+=2)d.bindAttribLocation(this._program,this._attribInfo[h+1],this._attribInfo[h]);d.linkProgram(this._program);if(!this.customCompile&&!d.getProgramParameter(this._program,35714))throw d.getProgramInfoLog(this._program);f=this.customCompile?a.uniforms.length:d.getProgramParameter(this._program,35718);for(h=0;h<f;h++){var k=this.customCompile?a.uniforms[h]:d.getActiveUniform(this._program,h);e=d.getUniformLocation(this._program,k.name);e={vartype:"uniform",glfun:null,ivartype:1,location:e,name:k.name,type:k.type,isArray:!1,isSame:!1,preValue:null,indexOfParams:0};0<e.name.indexOf("[0]")&&(e.name=e.name.substr(0,e.name.length-3),e.isArray=!0,e.location=d.getUniformLocation(this._program,e.name));this._params.push(e)}h=0;for(a=this._params.length;h<a;h++)switch(e=this._params[h],e.indexOfParams=h,e.index=1,e.value=[e.location,null],e.codename=e.name,e.name=this._nameMap[e.codename]?this._nameMap[e.codename]:e.codename,this._paramsMap[e.name]=e,e._this=this,e.uploadedValue=[],e.type){case 5124:e.fun=e.isArray?this._uniform1iv:this._uniform1i;break;case 5126:e.fun=e.isArray?this._uniform1fv:this._uniform1f;break;case 35664:e.fun=e.isArray?this._uniform_vec2v:this._uniform_vec2;break;case 35665:e.fun=e.isArray?this._uniform_vec3v:this._uniform_vec3;break;case 35666:e.fun=e.isArray?this._uniform_vec4v:this._uniform_vec4;break;case 35678:e.fun=this._uniform_sampler2D;break;case 35680:e.fun=this._uniform_samplerCube;break;case 35676:e.glfun=d.uniformMatrix4fv;e.fun=this._uniformMatrix4fv;break;case 35670:e.fun=this._uniform1i;break;case 35674:case 35675:throw Error("compile shader err!");default:throw Error("compile shader err!");}}};a.getUniform=function(a){return this._paramsMap[a]};a._uniform1f=function(a,d){var b=a.uploadedValue;return b[0]!==d?(R.mainContext.uniform1f(a.location,b[0]=d),1):0};a._uniform1fv=function(a,d){if(4>d.length){var b=a.uploadedValue;return b[0]!==d[0]||b[1]!==d[1]||b[2]!==d[2]||b[3]!==d[3]?(R.mainContext.uniform1fv(a.location,d),b[0]=d[0],b[1]=d[1],b[2]=d[2],b[3]=d[3],1):0}R.mainContext.uniform1fv(a.location,d);return 1};a._uniform_vec2=function(a,d){var b=a.uploadedValue;return b[0]!==d[0]||b[1]!==d[1]?(R.mainContext.uniform2f(a.location,b[0]=d[0],b[1]=d[1]),1):0};a._uniform_vec2v=function(a,d){if(2>d.length){var b=a.uploadedValue;return b[0]!==d[0]||b[1]!==d[1]||b[2]!==d[2]||b[3]!==d[3]?(R.mainContext.uniform2fv(a.location,d),b[0]=d[0],b[1]=d[1],b[2]=d[2],b[3]=d[3],1):0}R.mainContext.uniform2fv(a.location,d);return 1};a._uniform_vec3=function(a,d){var b=a.uploadedValue;return b[0]!==d[0]||b[1]!==d[1]||b[2]!==d[2]?(R.mainContext.uniform3f(a.location,b[0]=d[0],b[1]=d[1],b[2]=d[2]),1):0};a._uniform_vec3v=function(a,d){R.mainContext.uniform3fv(a.location,d);return 1};a._uniform_vec4=function(a,d){var b=a.uploadedValue;return b[0]!==d[0]||b[1]!==d[1]||b[2]!==d[2]||b[3]!==d[3]?(R.mainContext.uniform4f(a.location,b[0]=d[0],b[1]=d[1],b[2]=d[2],b[3]=d[3]),1):0};a._uniform_vec4v=function(a,d){R.mainContext.uniform4fv(a.location,d);return 1};a._uniformMatrix2fv=function(a,d){R.mainContext.uniformMatrix2fv(a.location,!1,d);return 1};a._uniformMatrix3fv=function(a,d){R.mainContext.uniformMatrix3fv(a.location,!1,d);return 1};a._uniformMatrix4fv=function(a,d){R.mainContext.uniformMatrix4fv(a.location,!1,d);return 1};a._uniform1i=function(a,d){var b=a.uploadedValue;return b[0]!==d?(R.mainContext.uniform1i(a.location,b[0]=d),1):0};a._uniform1iv=function(a,d){R.mainContext.uniform1iv(a.location,d);return 1};a._uniform_ivec2=function(a,d){var b=a.uploadedValue;return b[0]!==d[0]||b[1]!==d[1]?(R.mainContext.uniform2i(a.location,b[0]=d[0],b[1]=d[1]),1):0};a._uniform_ivec2v=function(a,d){R.mainContext.uniform2iv(a.location,d);return 1};a._uniform_vec3i=function(a,d){var b=a.uploadedValue;return b[0]!==d[0]||b[1]!==d[1]||b[2]!==d[2]?(R.mainContext.uniform3i(a.location,b[0]=d[0],b[1]=d[1],b[2]=d[2]),1):0};a._uniform_vec3vi=function(a,d){R.mainContext.uniform3iv(a.location,d);return 1};a._uniform_vec4i=function(a,d){var b=a.uploadedValue;return b[0]!==d[0]||b[1]!==d[1]||b[2]!==d[2]||b[3]!==d[3]?(R.mainContext.uniform4i(a.location,b[0]=d[0],b[1]=d[1],b[2]=d[2],b[3]=d[3]),1):0};a._uniform_vec4vi=function(a,d){R.mainContext.uniform4iv(a.location,d);return 1};a._uniform_sampler2D=function(a,d){var b=R.mainContext,c=a.uploadedValue;if(null==c[0])return c[0]=this._curActTexIndex,b.uniform1i(a.location,this._curActTexIndex),K.activeTexture(b,33984+this._curActTexIndex),K.bindTexture(b,3553,d),this._curActTexIndex++,1;K.activeTexture(b,33984+c[0]);K.bindTexture(b,3553,d);return 0};a._uniform_samplerCube=function(a,d){var b=R.mainContext,c=a.uploadedValue;if(null==c[0])return c[0]=this._curActTexIndex,b.uniform1i(a.location,this._curActTexIndex),K.activeTexture(b,33984+this._curActTexIndex),K.bindTexture(b,34067,d),this._curActTexIndex++,1;K.activeTexture(b,33984+c[0]);K.bindTexture(b,34067,d);return 0};a._noSetValue=function(a){console.log("no....:"+a.name)};a.uploadOne=function(a,d){K.useProgram(R.mainContext,this._program);a=this._paramsMap[a];a.fun.call(this,a,d)};a.uploadTexture2D=function(a,d){var b=K;if(b._activeTextures[0]!==a){var c=this._paramsMap.texture;c.fun.call(this,c,a);b._activeTextures[0]=a}d&&b._activeTextures[1]!==d&&(c=this._paramsMap.textureAlpha,c.fun.call(this,c,d),b._activeTextures[1]=d)};a.upload=function(a,d){Ia.activeShader=Ia.bindShader=this;K.useProgram(R.mainContext,this._program);this._reCompile?(d=this._params,this._reCompile=!1):d=d||this._params;for(var b,c,f=d.length,k=0,g=0;g<f;g++)b=d[g],null!==(c=a[b.name])&&(k+=b.fun.call(this,b,c));I.shaderCall+=k};a.uploadArray=function(a,d,c){Ia.activeShader=this;Ia.bindShader=this;K.useProgram(R.mainContext,this._program);for(var b,e=0,k=d-2;0<=k;k-=2)if(b=this._paramsMap[a[k]])d=a[k+1],null!=d&&(c&&c[b.name]&&c[b.name].bind(),e+=b.fun.call(this,b,d));I.shaderCall+=e};a.getParams=function(){return this._params};a.setAttributesLocation=function(a){this._attribInfo=a};c.getShader=function(a){return c.sharders[a]};c.create=function(a,d,e,h,f){return new c(a,d,e,h,f)};c.withCompile=function(a,d,e,h){if(e&&c.sharders[e])return c.sharders[e];var b=c._preCompileShader[2E-4*a];if(!b)throw Error("withCompile shader err!"+a);return b.createShader(d,e,h,null)};c.withCompile2D=function(a,d,e,h,f,k){if(h&&c.sharders[h])return c.sharders[h];var b=c._preCompileShader[2E-4*a+d];if(!b)throw Error("withCompile shader err!"+a+" "+d);return b.createShader(e,h,f,k)};c.addInclude=function(a,d){ub.addInclude(a,d)};c.preCompile=function(a,d,e,h){c._preCompileShader[2E-4*a]=new ub(d,e,h)};c.preCompile2D=function(a,d,e,h,f){c._preCompileShader[2E-4*a+d]=new ub(e,h,f)};c._createShader=function(a,d,c){c=a.createShader(c);a.shaderSource(c,d);a.compileShader(c);if(a.getShaderParameter(c,35713))return c;console.log(a.getShaderInfoLog(c));return null};c._count=0;c._preCompileShader={};c.SHADERNAME2ID=2E-4;c.sharders=Array(32);u(c,["nameKey",function(){return this.nameKey=new cf}]);return c}(Ia),ld=function(a){function c(a,d){c.__super.call(this);this._wrapModeV=this._wrapModeU=0;this._filterMode=1;this._readyed=!1;this._height=this._width=-1;this._format=a;this._mipmap=d;this._anisoLevel=1;this._glTexture=O.instance.createTexture()}n(c,"laya.webgl.resource.BaseTexture",a);a=c.prototype;a._isPot=function(a){return 0===(a&a-1)};a._getGLFormat=function(){var a;switch(this._format){case 0:a=6407;break;case 1:a=6408;break;case 2:a=6406;break;case 3:if(K._compressedTextureS3tc)a=K._compressedTextureS3tc.COMPRESSED_RGB_S3TC_DXT1_EXT;else throw"BaseTexture: not support DXT1 format.";break;case 4:if(K._compressedTextureS3tc)a=K._compressedTextureS3tc.COMPRESSED_RGBA_S3TC_DXT5_EXT;else throw"BaseTexture: not support DXT5 format.";break;case 5:if(K._compressedTextureEtc1)a=K._compressedTextureEtc1.COMPRESSED_RGB_ETC1_WEBGL;else throw"BaseTexture: not support ETC1RGB format.";break;case 9:if(K._compressedTexturePvrtc)a=K._compressedTexturePvrtc.COMPRESSED_RGB_PVRTC_2BPPV1_IMG;else throw"BaseTexture: not support PVRTCRGB_2BPPV format.";break;case 10:if(K._compressedTexturePvrtc)a=K._compressedTexturePvrtc.COMPRESSED_RGBA_PVRTC_2BPPV1_IMG;else throw"BaseTexture: not support PVRTCRGBA_2BPPV format.";break;case 11:if(K._compressedTexturePvrtc)a=K._compressedTexturePvrtc.COMPRESSED_RGB_PVRTC_4BPPV1_IMG;else throw"BaseTexture: not support PVRTCRGB_4BPPV format.";break;case 12:if(K._compressedTexturePvrtc)a=K._compressedTexturePvrtc.COMPRESSED_RGBA_PVRTC_4BPPV1_IMG;else throw"BaseTexture: not support PVRTCRGBA_4BPPV format.";break;default:throw"BaseTexture: unknown texture format.";}return a};a._setFilterMode=function(a){var b=O.instance;K.bindTexture(b,this._glTextureType,this._glTexture);switch(a){case 0:this._mipmap?b.texParameteri(this._glTextureType,10241,9984):b.texParameteri(this._glTextureType,10241,9728);b.texParameteri(this._glTextureType,10240,9728);break;case 1:this._mipmap?b.texParameteri(this._glTextureType,10241,9985):b.texParameteri(this._glTextureType,10241,9729);b.texParameteri(this._glTextureType,10240,9729);break;case 2:this._mipmap?b.texParameteri(this._glTextureType,10241,9987):b.texParameteri(this._glTextureType,10241,9729);b.texParameteri(this._glTextureType,10240,9729);break;default:throw Error("BaseTexture:unknown filterMode value.");}};a._setWarpMode=function(a,d){var b=O.instance;K.bindTexture(b,this._glTextureType,this._glTexture);if(this._isPot(this._width)&&this._isPot(this._height))switch(d){case 0:b.texParameteri(this._glTextureType,a,10497);break;case 1:b.texParameteri(this._glTextureType,a,33071)}else b.texParameteri(this._glTextureType,a,33071)};a._setAnisotropy=function(a){var b=K._extTextureFilterAnisotropic;if(b&&!q.onLimixiu){a=Math.max(a,1);var c=O.instance;K.bindTexture(c,this._glTextureType,this._glTexture);a=Math.min(c.getParameter(b.MAX_TEXTURE_MAX_ANISOTROPY_EXT),a);c.texParameterf(this._glTextureType,b.TEXTURE_MAX_ANISOTROPY_EXT,a)}};a._disposeResource=function(){this._glTexture&&(O.instance.deleteTexture(this._glTexture),this._glTexture=null,this._setGPUMemory(0))};a._getSource=function(){return this._readyed?this._glTexture:null};a.generateMipmap=function(){this._isPot(this.width)&&this._isPot(this.height)&&O.instance.generateMipmap(this._glTextureType)};g(0,a,"wrapModeU",function(){return this._wrapModeU},function(a){this._wrapModeU!==a&&(this._wrapModeU=a,-1!==this._width&&this._setWarpMode(10242,a))});g(0,a,"mipmap",function(){return this._mipmap});g(0,a,"format",function(){return this._format});g(0,a,"wrapModeV",function(){return this._wrapModeV},function(a){this._wrapModeV!==a&&(this._wrapModeV=a,-1!==this._height&&this._setWarpMode(10243,a))});g(0,a,"defaulteTexture",function(){throw"BaseTexture:must override it.";});g(0,a,"filterMode",function(){return this._filterMode},function(a){a!==this._filterMode&&(this._filterMode=a,-1!==this._width&&-1!==this._height&&this._setFilterMode(a))});g(0,a,"anisoLevel",function(){return this._anisoLevel},function(a){a!==this._anisoLevel&&(this._anisoLevel=Math.max(1,Math.min(16,a)),-1!==this._width&&-1!==this._height&&this._setAnisotropy(a))});c.WARPMODE_REPEAT=0;c.WARPMODE_CLAMP=1;c.FILTERMODE_POINT=0;c.FILTERMODE_BILINEAR=1;c.FILTERMODE_TRILINEAR=2;c.FORMAT_R8G8B8=0;c.FORMAT_R8G8B8A8=1;c.FORMAT_ALPHA8=2;c.FORMAT_DXT1=3;c.FORMAT_DXT5=4;c.FORMAT_ETC1RGB=5;c.FORMAT_PVRTCRGB_2BPPV=9;c.FORMAT_PVRTCRGBA_2BPPV=10;c.FORMAT_PVRTCRGB_4BPPV=11;c.FORMAT_PVRTCRGBA_4BPPV=12;c.FORMAT_DEPTH_16=0;c.FORMAT_STENCIL_8=1;c.FORMAT_DEPTHSTENCIL_16_8=2;c.FORMAT_DEPTHSTENCIL_NONE=3;return c}(tc),xa=function(a){function c(a){c.__super.call(this);void 0===a&&(a=!1);this._source=a||!r.isWebGL?q.createElement("canvas"):this;this.lock=!0}n(c,"laya.resource.HTMLCanvas",a);a=c.prototype;a._getSource=function(){return this._source};a.clear=function(){this._ctx&&this._ctx.clear();this._texture&&(this._texture.destroy(),this._texture=null)};a.destroy=function(){laya.resource.Resource.prototype.destroy.call(this);this._setCPUMemory(0);this._ctx&&this._ctx.destroy();this._ctx=null};a.release=function(){};a._setContext=function(a){this._ctx=a};a.getContext=function(a,d){return this.context};a.getMemSize=function(){return 0};a.size=function(a,d){if(this._width!=a||this._height!=d||this._source&&(this._source.width!=a||this._source.height!=d))this._width=a,this._height=d,this._setCPUMemory(a*d*4),this._ctx&&this._ctx.size&&this._ctx.size(a,d),this._source&&(this._source.height=d,this._source.width=a),this._texture&&(this._texture.destroy(),this._texture=null)};a.getTexture=function(){this._texture||(this._texture=new ga(this,ga.DEF_UV));return this._texture};a.toBase64=function(a,d){if(this._source){if(r.isConchApp){if(2==conchConfig.threadMode)throw"native 2 thread mode use toBase64Async";var b=this._ctx._targets.sourceWidth,c=this._ctx._targets.sourceHeight,f=this._ctx._targets.getData(0,0,b,c);return conchToBase64(a,d,f.buffer,b,c)}return this._source.toDataURL(a,d)}return null};a.toBase64Async=function(a,d,c){var b=this._ctx._targets.sourceWidth,e=this._ctx._targets.sourceHeight;this._ctx._targets.getDataAsync(0,0,b,e,function(h){h=conchToBase64(a,d,h.buffer,b,e);c(h)})};g(0,a,"source",function(){return this._source});g(0,a,"context",function(){if(this._ctx)return this._ctx;this._ctx=r.isWebGL&&this._source==this?new laya.webgl.canvas.WebGLContext2D:this._source.getContext(r.isConchApp?"layagl":"2d");this._ctx._canvas=this;return this._ctx});return c}(tc),qb=function(a){function c(){c.__super.call(this)}n(c,"laya.resource.HTMLImage",a);a=c.prototype;a.loadImageSource=function(a){var b=a.width,c=a.height;if(0>=b||0>=c)throw Error("HTMLImage:width or height must large than 0.");this._width=b;this._height=c;this._source=a;this._setGPUMemory(b*c*4);this._activeResource()};a._disposeResource=function(){this._source&&(this._source=null,this._setGPUMemory(0))};a._getSource=function(){return this._source};c.create=function(a,d,e){return new c};return c}(tc),xc=function(a){function c(){this._watchMap={};this._dataSource=this._widget=null;this._anchorY=this._anchorX=NaN;this._widget=eb.EMPTY;c.__super.call(this)}n(c,"laya.ui.View",a);var b=c.prototype;b.destroy=function(b){void 0===b&&(b=!0);this._watchMap=null;a.prototype.destroy.call(this,b)};b.changeData=function(a){if(a=this._watchMap[a])for(var b=0,d=a.length;b<d;b++)a[b].exe(this)};b._sizeChanged=function(){isNaN(this._anchorX)||(this.pivotX=this.anchorX*this.width);isNaN(this._anchorY)||(this.pivotY=this.anchorY*this.height);this.event("resize")};b._getWidget=function(){this._widget===eb.EMPTY&&(this._widget=this.addComponent(eb));return this._widget};b.loadUI=function(a){a=c.uiMap[a];c.uiMap&&this.createView(a)};g(0,b,"anchorX",function(){return this._anchorX},function(a){this._anchorX!=a&&(this._anchorX=a,this.callLater(this._sizeChanged))});g(0,b,"centerX",function(){return this._widget.centerX},function(a){a!=this._widget.centerX&&(this._getWidget().centerX=a)});g(0,b,"top",function(){return this._widget.top},function(a){a!=this._widget.top&&(this._getWidget().top=a)});g(0,b,"bottom",function(){return this._widget.bottom},function(a){a!=this._widget.bottom&&(this._getWidget().bottom=a)});g(0,b,"dataSource",function(){return this._dataSource},function(a){this._dataSource=a;for(var b in a){var d=this.getChildByName(b);d instanceof laya.ui.UIComponent?d.dataSource=a[b]:this.hasOwnProperty(b)&&"function"!=typeof this[b]&&(this[b]=a[b])}});g(0,b,"left",function(){return this._widget.left},function(a){a!=this._widget.left&&(this._getWidget().left=a)});g(0,b,"right",function(){return this._widget.right},function(a){a!=this._widget.right&&(this._getWidget().right=a)});g(0,b,"anchorY",function(){return this._anchorY},function(a){this._anchorY!=a&&(this._anchorY=a,this.callLater(this._sizeChanged))});g(0,b,"centerY",function(){return this._widget.centerY},function(a){a!=this._widget.centerY&&(this._getWidget().centerY=a)});c.regComponent=function(a,b){Ka.regClass(a,b)};c.regViewRuntime=function(a,b){Ka.regClass(a,b)};c.regUI=function(a,b){l.loader.cacheRes(a,b)};c.uiMap={};c.__init$=function(){Ka.regShortClassName([xf,Ja,yf,zf,Y,Af,Ja,Bf,Ob,Cf,aa,Pb,Df,Bb,Cb,vc,Ef,Ff,md,Gf,wc,Qb,Hf,Rb,c,If,Sb,Jf,Kf,Lf,Mf,L,Nf,W,Of])};return c}(Yc),Cf=function(a){function c(a,b){this._visibleNum=6;this._list=this._button=null;this._isOpen=!1;this._itemSize=12;this._labels=[];this._selectedIndex=-1;this._selectHandler=null;this._listHeight=this._itemHeight=NaN;this._itemChanged=this._listChanged=!1;this._scrollBarSkin=null;this._isCustomList=!1;this.itemRender=null;c.__super.call(this);this._itemColors=ra.comboBoxItemColors;this.skin=a;this.labels=b}n(c,"laya.ui.ComboBox",a);var b=c.prototype;b.destroy=function(b){void 0===b&&(b=!0);a.prototype.destroy.call(this,b);this._button&&this._button.destroy(b);this._list&&this._list.destroy(b);this._selectHandler=this._labels=this._itemColors=this._list=this._button=null};b.createChildren=function(){this.addChild(this._button=new Ja);this._button.text.align="left";this._button.labelPadding="0,0,0,5";this._button.on("mousedown",this,this.onButtonMouseDown)};b._createList=function(){this._list=new vc;this._scrollBarSkin&&(this._list.vScrollBarSkin=this._scrollBarSkin);this._setListEvent(this._list)};b._setListEvent=function(a){this._list.selectEnable=!0;this._list.on("mousedown",this,this.onListDown);this._list.mouseHandler=B.create(this,this.onlistItemMouse,null,!1);if(this._list.scrollBar)this._list.scrollBar.on("mousedown",this,this.onScrollBarDown)};b.onListDown=function(a){a.stopPropagation()};b.onScrollBarDown=function(a){a.stopPropagation()};b.onButtonMouseDown=function(a){this.callLater(this.switchTo,[!this._isOpen])};b.measureWidth=function(){return this._button.width};b.measureHeight=function(){return this._button.height};b.changeList=function(){this._listChanged=!1;var a=this.width-2,b=this._itemColors[2];this._itemHeight=this._itemSize+6;this._list.itemRender=this.itemRender||{type:"Box",child:[{type:"Label",props:{name:"label",x:1,padding:"3,3,3,3",width:a,height:this._itemHeight,fontSize:this._itemSize,color:b}}]};this._list.repeatY=this._visibleNum;this._list.refresh()};b.onlistItemMouse=function(a,b){a=a.type;"mouseover"===a||"mouseout"===a?!this._isCustomList&&(b=this._list.getCell(b))&&(b=b.getChildByName("label"))&&("mouseover"===a?(b.bgColor=this._itemColors[0],b.color=this._itemColors[1]):(b.bgColor=null,b.color=this._itemColors[2])):"click"===a&&(this.selectedIndex=b,this.isOpen=!1)};b.switchTo=function(a){this.isOpen=a};b.changeOpen=function(){this.isOpen=!this._isOpen};b.changeItem=function(){this._itemChanged=!1;this._listHeight=0<this._labels.length?Math.min(this._visibleNum,this._labels.length)*this._itemHeight:this._itemHeight;if(!this._isCustomList){var a=this._list.graphics;a.clear(!0);a.drawRect(0,0,this.width-1,this._listHeight,this._itemColors[4],this._itemColors[3])}for(var a=this._list.array||[],b=a.length=0,c=this._labels.length;b<c;b++)a.push({label:this._labels[b]});this._list.height=this._listHeight;this._list.array=a};b.changeSelected=function(){this._button.label=this.selectedLabel};b._onStageMouseWheel=function(a){this._list&&!this._list.contains(a.target)&&this.removeList(null)};b.removeList=function(a){l.stage.off("mousedown",this,this.removeList);l.stage.off("mousewheel",this,this._onStageMouseWheel);this.isOpen=!1};g(0,b,"selectedIndex",function(){return this._selectedIndex},function(a){this._selectedIndex!=a&&(this._selectedIndex=a,0<this._labels.length?this.changeSelected():this.callLater(this.changeSelected),this.event("change",[Ya.EMPTY.setTo("change",this,this)]),this._selectHandler&&this._selectHandler.runWith(this._selectedIndex))});g(0,b,"skin",function(){return this._button.skin},function(a){this._button.skin!=a&&(this._button.skin=a,this._listChanged=!0)});g(0,b,"visibleNum",function(){return this._visibleNum},function(a){this._visibleNum=a;this._listChanged=!0});g(0,b,"width",a.prototype._$get_width,function(a){l.superSet(aa,this,"width",a);this._button.width=this._width;this._listChanged=this._itemChanged=!0});g(0,b,"selectedLabel",function(){return-1<this._selectedIndex&&this._selectedIndex<this._labels.length?this._labels[this._selectedIndex]:null},function(a){this.selectedIndex=this._labels.indexOf(a)});g(0,b,"labels",function(){return this._labels.join(",")},function(a){0<this._labels.length&&(this.selectedIndex=-1);a?this._labels=a.split(","):this._labels.length=0;this._itemChanged=!0});g(0,b,"height",a.prototype._$get_height,function(a){l.superSet(aa,this,"height",a);this._button.height=this._height});g(0,b,"selectHandler",function(){return this._selectHandler},function(a){this._selectHandler=a});g(0,b,"labelBold",function(){return this._button.text.bold},function(a){this._button.text.bold=a});g(0,b,"itemColors",function(){return String(this._itemColors)},function(a){this._itemColors=sa.fillArray(this._itemColors,a,String);this._listChanged=!0});g(0,b,"itemSize",function(){return this._itemSize},function(a){this._itemSize=a;this._listChanged=!0});g(0,b,"scrollBar",function(){return this.list.scrollBar});g(0,b,"isOpen",function(){return this._isOpen},function(a){if(this._isOpen!=a)if(this._isOpen=a,this._button.selected=this._isOpen){this._list||this._createList();this._listChanged&&!this._isCustomList&&this.changeList();this._itemChanged&&this.changeItem();a=this.localToGlobal(P.TEMP.setTo(0,0));var b=a.y+this._button.height,b=b+this._listHeight<=l.stage.height?b:a.y-this._listHeight;this._list.pos(a.x,b);this._list.zOrder=1001;l._currentStage.addChild(this._list);l.stage.once("mousedown",this,this.removeList);l.stage.on("mousewheel",this,this._onStageMouseWheel);this._list.selectedIndex=this._selectedIndex}else this._list&&this._list.removeSelf()});g(0,b,"scrollBarSkin",function(){return this._scrollBarSkin},function(a){this._scrollBarSkin=a});g(0,b,"sizeGrid",function(){return this._button.sizeGrid},function(a){this._button.sizeGrid=a});g(0,b,"button",function(){return this._button});g(0,b,"list",function(){this._list||this._createList();return this._list},function(a){a&&(a.removeSelf(),this._isCustomList=!0,this._list=a,this._setListEvent(a),this._itemHeight=a.getCell(0).height+a.spaceY)});g(0,b,"dataSource",a.prototype._$get_dataSource,function(a){this._dataSource=a;"number"==typeof a&&Math.floor(a)==a||"string"==typeof a?this.selectedIndex=parseInt(a):a instanceof Array?this.labels=a.join(","):l.superSet(aa,this,"dataSource",a)});g(0,b,"labelColors",function(){return this._button.labelColors},function(a){this._button.labelColors!=a&&(this._button.labelColors=a)});g(0,b,"labelPadding",function(){return this._button.text.padding.join(",")},function(a){this._button.text.padding=sa.fillArray(ra.labelPadding,a,Number)});g(0,b,"labelSize",function(){return this._button.text.fontSize},function(a){this._button.text.fontSize=a});g(0,b,"labelFont",function(){return this._button.text.font},function(a){this._button.text.font=a});g(0,b,"stateNum",function(){return this._button.stateNum},function(a){this._button.stateNum=a});return c}(aa),Ob=function(a){function c(a,b,h){this._skin=this._bitmap=this._sources=null;this._clipY=this._clipX=1;this._clipHeight=this._clipWidth=0;this._autoPlay=!1;this._interval=50;this._complete=null;this._isPlaying=!1;this._index=0;this._clipChanged=!1;this._group=null;this._toIndex=-1;c.__super.call(this);void 0===b&&(b=1);void 0===h&&(h=1);this._clipX=b;this._clipY=h;this.skin=a}n(c,"laya.ui.Clip",a);var b=c.prototype;b.destroy=function(b){a.prototype.destroy.call(this,!0);this._bitmap&&this._bitmap.destroy();this._sources=this._bitmap=null};b.dispose=function(){this.destroy(!0);l.loader.clearRes(this._skin)};b.createChildren=function(){this.graphics=this._bitmap=new nb};b._onDisplay=function(a){this._isPlaying?this._getBit(128)?this.play():this.stop():this._autoPlay&&this.play()};b._skinLoaded=function(){this._setClipChanged();this._sizeChanged();this.event("loaded")};b.changeClip=function(){this._clipChanged=!1;if(this._skin){var a=x.getRes(this._skin);a?this.loadComplete(this._skin,a):l.loader.load(this._skin,B.create(this,this.loadComplete,[this._skin]))}};b.loadComplete=function(a,b){if(a===this._skin&&b){a=this._clipWidth||Math.ceil(b.sourceWidth/this._clipX);var d=this._clipHeight||Math.ceil(b.sourceHeight/this._clipY),c=this._skin+a+d,e=Xa.I.get(c);U.isOkTextureList(e)||(e=null);if(e)this._sources=e;else{this._sources=[];for(e=0;e<this._clipY;e++)for(var g=0;g<this._clipX;g++)this._sources.push(ga.createFromTexture(b,a*g,d*e,a,d));Xa.I.set(c,this._sources)}this.index=this._index;this.event("loaded");this.onCompResize()}};b.measureWidth=function(){this.runCallLater(this.changeClip);return this._bitmap.width};b.measureHeight=function(){this.runCallLater(this.changeClip);return this._bitmap.height};b.play=function(a,b){void 0===a&&(a=0);void 0===b&&(b=-1);this._isPlaying=!0;this.index=a;this._toIndex=b;this._index++;l.timer.loop(this.interval,this,this._loop);this.on("display",this,this._onDisplay);this.on("undisplay",this,this._onDisplay)};b._loop=function(){this._visible&&this._sources&&(this._index++,-1<this._toIndex&&this._index>=this._toIndex?this.stop():this._index>=this._sources.length&&(this._index=0),this.index=this._index)};b.stop=function(){this._isPlaying=!1;l.timer.clear(this,this._loop);this.event("complete")};b._setClipChanged=function(){this._clipChanged||(this._clipChanged=!0,this.callLater(this.changeClip))};g(0,b,"interval",function(){return this._interval},function(a){this._interval!=a&&(this._interval=a,this._isPlaying&&this.play())});g(0,b,"skin",function(){return this._skin},function(a){this._skin!=a&&((this._skin=a)?x.getRes(a)?this._skinLoaded():l.loader.load(this._skin,B.create(this,this._skinLoaded),null,"image",1):this._bitmap.source=null)});g(0,b,"sources",function(){return this._sources},function(a){this._sources=a;this.index=this._index;this.event("loaded")});g(0,b,"clipX",function(){return this._clipX},function(a){this._clipX=a||1;this._setClipChanged()});g(0,b,"clipY",function(){return this._clipY},function(a){this._clipY=a||1;this._setClipChanged()});g(0,b,"total",function(){this.runCallLater(this.changeClip);return this._sources?this._sources.length:0});g(0,b,"clipWidth",function(){return this._clipWidth},function(a){this._clipWidth=a;this._setClipChanged()});g(0,b,"sizeGrid",function(){return this._bitmap.sizeGrid?this._bitmap.sizeGrid.join(","):null},function(a){this._bitmap.sizeGrid=sa.fillArray(ra.defaultSizeGrid,a,Number)});g(0,b,"group",function(){return this._group},function(a){a&&this._skin&&x.setGroup(this._skin,a);this._group=a});g(0,b,"clipHeight",function(){return this._clipHeight},function(a){this._clipHeight=a;this._setClipChanged()});g(0,b,"width",a.prototype._$get_width,function(a){l.superSet(aa,this,"width",a);this._bitmap.width=a});g(0,b,"height",a.prototype._$get_height,function(a){l.superSet(aa,this,"height",a);this._bitmap.height=a});g(0,b,"index",function(){return this._index},function(a){this._index=a;this._bitmap&&this._sources&&(this._bitmap.source=this._sources[a]);this.event("change")});g(0,b,"autoPlay",function(){return this._autoPlay},function(a){this._autoPlay!=a&&((this._autoPlay=a)?this.play():this.stop())});g(0,b,"isPlaying",function(){return this._isPlaying},function(a){this._isPlaying=a});g(0,b,"dataSource",a.prototype._$get_dataSource,function(a){this._dataSource=a;"number"==typeof a&&Math.floor(a)==a||"string"==typeof a?this.index=parseInt(a):l.superSet(aa,this,"dataSource",a)});g(0,b,"bitmap",function(){return this._bitmap});return c}(aa),Ja=function(a){function c(a,b){this.toggle=!1;this._strokeColors=this._text=this._bitmap=null;this._state=0;this._selected=!1;this._skin=null;this._autoSize=!0;this._clickHandler=this._sources=null;this._stateChanged=!1;c.__super.call(this);this._labelColors=ra.buttonLabelColors;this._stateNum=ra.buttonStateNum;void 0===b&&(b="");this.skin=a;this.label=b}n(c,"laya.ui.Button",a);var b=c.prototype;l.imps(b,{"laya.ui.ISelect":!0});b.destroy=function(b){void 0===b&&(b=!0);a.prototype.destroy.call(this,b);this._bitmap&&this._bitmap.destroy();this._text&&this._text.destroy(b);this._labelColors=this._sources=this._strokeColors=this._clickHandler=this._text=this._bitmap=null};b.createChildren=function(){this.graphics=this._bitmap=new nb};b.createText=function(){this._text||(this._text=new W,this._text.overflow="hidden",this._text.align="center",this._text.valign="middle",this._text.width=this._width,this._text.height=this._height)};b.initialize=function(){1!==this._mouseState&&(this.mouseEnabled=!0,this._setBit(64,!0));this._createListener("mouseover",this,this.onMouse,null,!1,!1);this._createListener("mouseout",this,this.onMouse,null,!1,!1);this._createListener("mousedown",this,this.onMouse,null,!1,!1);this._createListener("mouseup",this,this.onMouse,null,!1,!1);this._createListener("click",this,this.onMouse,null,!1,!1)};b.onMouse=function(a){!1===this.toggle&&this._selected||("click"===a.type?(this.toggle&&(this.selected=!this._selected),this._clickHandler&&this._clickHandler.run()):!this._selected&&(this.state=c.stateMap[a.type]))};b._skinLoaded=function(){this.callLater(this.changeClips);this._setStateChanged();this._sizeChanged();this.event("loaded")};b.changeClips=function(){var a=x.getRes(this._skin);if(a){var b=a.sourceWidth,c=a.sourceHeight/this._stateNum;a.$_GID||(a.$_GID=U.getGID());var f=a.$_GID+"-"+this._stateNum,g=Xa.I.get(f);U.isOkTextureList(g)||(g=null);if(g)this._sources=g;else{this._sources=[];if(1===this._stateNum)this._sources.push(a);else for(g=0;g<this._stateNum;g++)this._sources.push(ga.createFromTexture(a,0,c*g,b,c));Xa.I.set(f,this._sources)}this._autoSize?(this._bitmap.width=this._width||b,this._bitmap.height=this._height||c,this._text&&(this._text.width=this._bitmap.width,this._text.height=this._bitmap.height)):this._text&&(this._text.x=b)}else console.log("lose skin",this._skin)};b.measureWidth=function(){this.runCallLater(this.changeClips);if(this._autoSize)return this._bitmap.width;this.runCallLater(this.changeState);return this._bitmap.width+(this._text?this._text.width:0)};b.measureHeight=function(){this.runCallLater(this.changeClips);return this._text?Math.max(this._bitmap.height,this._text.height):this._bitmap.height};b.changeState=function(){this._stateChanged=!1;this.runCallLater(this.changeClips);var a=this._state<this._stateNum?this._state:this._stateNum-1;this._sources&&(this._bitmap.source=this._sources[a]);this.label&&(this._text.color=this._labelColors[a],this._strokeColors&&(this._text.strokeColor=this._strokeColors[a]))};b._setStateChanged=function(){this._stateChanged||(this._stateChanged=!0,this.callLater(this.changeState))};g(0,b,"skin",function(){return this._skin},function(a){this._skin!=a&&((this._skin=a)?x.getRes(a)?this._skinLoaded():l.loader.load(this._skin,B.create(this,this._skinLoaded),null,"image",1):this._skinLoaded())});g(0,b,"labelPadding",function(){this.createText();return this._text.padding.join(",")},function(a){this.createText();this._text.padding=sa.fillArray(ra.labelPadding,a,Number)});g(0,b,"state",function(){return this._state},function(a){this._state!=a&&(this._state=a,this._setStateChanged())});g(0,b,"text",function(){this.createText();return this._text});g(0,b,"stateNum",function(){return this._stateNum},function(a){"string"==typeof a&&(a=parseInt(a));this._stateNum!=a&&(this._stateNum=1>a?1:3<a?3:a,this.callLater(this.changeClips))});g(0,b,"label",function(){return this._text?this._text.text:null},function(a){if(this._text||a)this.createText(),this._text.text!=a&&(a&&!this._text.parent&&this.addChild(this._text),this._text.text=(a+"").replace(/\\n/g,"\n"),this._setStateChanged())});g(0,b,"labelSize",function(){this.createText();return this._text.fontSize},function(a){this.createText();this._text.fontSize=a});g(0,b,"selected",function(){return this._selected},function(a){this._selected!=a&&(this.state=(this._selected=a)?2:0,this.event("change"))});g(0,b,"strokeColors",function(){return this._strokeColors?this._strokeColors.join(","):""},function(a){this._strokeColors=sa.fillArray(ra.buttonLabelColors,a,String);this._setStateChanged()});g(0,b,"labelColors",function(){return this._labelColors.join(",")},function(a){this._labelColors=sa.fillArray(ra.buttonLabelColors,a,String);this._setStateChanged()});g(0,b,"labelStroke",function(){this.createText();return this._text.stroke},function(a){this.createText();this._text.stroke=a});g(0,b,"labelStrokeColor",function(){this.createText();return this._text.strokeColor},function(a){this.createText();this._text.strokeColor=a});g(0,b,"labelBold",function(){this.createText();return this._text.bold},function(a){this.createText();this._text.bold=a});g(0,b,"labelFont",function(){this.createText();return this._text.font},function(a){this.createText();this._text.font=a});g(0,b,"labelAlign",function(){this.createText();return this._text.align},function(a){this.createText();this._text.align=a});g(0,b,"clickHandler",function(){return this._clickHandler},function(a){this._clickHandler=a});g(0,b,"sizeGrid",function(){return this._bitmap.sizeGrid?this._bitmap.sizeGrid.join(","):null},function(a){this._bitmap.sizeGrid=sa.fillArray(ra.defaultSizeGrid,a,Number)});g(0,b,"width",a.prototype._$get_width,function(a){l.superSet(aa,this,"width",a);this._autoSize&&(this._bitmap.width=a,this._text&&(this._text.width=a))});g(0,b,"height",a.prototype._$get_height,function(a){l.superSet(aa,this,"height",a);this._autoSize&&(this._bitmap.height=a,this._text&&(this._text.height=a))});g(0,b,"dataSource",a.prototype._$get_dataSource,function(a){this._dataSource=a;"number"==typeof a||"string"==typeof a?this.label=a+"":l.superSet(aa,this,"dataSource",a)});g(0,b,"iconOffset",function(){return this._bitmap._offset?this._bitmap._offset.join(","):null},function(a){this._bitmap._offset=a?sa.fillArray([1,1],a,Number):[]});u(c,["stateMap",function(){return this.stateMap={mouseup:0,mouseover:1,mousedown:2,mouseout:0}}]);return c}(aa),Y=function(a){function c(){this._bgColor=null;c.__super.call(this)}n(c,"laya.ui.Box",a);var b=c.prototype;l.imps(b,{"laya.ui.IBox":!0});b._onResize=function(a){this.graphics.clear();this.graphics.drawRect(0,0,this.width,this.height,this._bgColor)};g(0,b,"dataSource",a.prototype._$get_dataSource,function(a){this._dataSource=a;for(var b in a){var c=this.getChildByName(b);c?c.dataSource=a[b]:this.hasOwnProperty(b)&&"function"!=typeof this[b]&&(this[b]=a[b])}});g(0,b,"bgColor",function(){return this._bgColor},function(a){(this._bgColor=a)?(this._onResize(null),this.on("resize",this,this._onResize)):(this.graphics.clear(),this.off("resize",this,this._onResize))});return c}(aa),wc=function(a){function c(a){this.rollRatio=.97;this.changeHandler=null;this.scaleBar=!0;this.autoHide=!1;this.elasticDistance=0;this.elasticBackTime=500;this.slider=this.downButton=this.upButton=null;this._scrollSize=1;this._skin=null;this._thumbPercent=1;this._lastPoint=this._target=null;this._lastOffset=0;this._isElastic=this._checkElastic=!1;this._value=NaN;this._hide=!1;this._clickOnly=!0;this.triggerUpDragLimit=this.triggerDownDragLimit=this.isLockedFun=this._offsets=null;c.__super.call(this);this._showButtons=lb.showButtons;this._touchScrollEnable=lb.touchScrollEnable;this._mouseWheelEnable=lb.mouseWheelEnable;this.skin=a;this.max=1}n(c,"laya.ui.ScrollBar",a);var b=c.prototype;b.destroy=function(b){void 0===b&&(b=!0);this.stopScroll();this.target=null;a.prototype.destroy.call(this,b);this.upButton&&this.upButton.destroy(b);this.downButton&&this.downButton.destroy(b);this.slider&&this.slider.destroy(b);this._offsets=this.changeHandler=this.slider=this.upButton=this.downButton=null};b.createChildren=function(){this.addChild(this.slider=new Qb);this.addChild(this.upButton=new Ja);this.addChild(this.downButton=new Ja)};b.initialize=function(){this.slider.showLabel=!1;this.slider.tick=0;this.slider.on("change",this,this.onSliderChange);this.slider.setSlider(0,0,0);this.upButton.on("mousedown",this,this.onButtonMouseDown);this.downButton.on("mousedown",this,this.onButtonMouseDown)};b.onSliderChange=function(){this._value!=this.slider.value&&(this.value=this.slider.value)};b.onButtonMouseDown=function(a){a=a.currentTarget===this.upButton;this.slide(a);l.timer.once(ra.scrollBarDelayTime,this,this.startLoop,[a]);l.stage.once("mouseup",this,this.onStageMouseUp)};b.startLoop=function(a){l.timer.frameLoop(1,this,this.slide,[a])};b.slide=function(a){this.value=a?this.value-this._scrollSize:this.value+this._scrollSize};b.onStageMouseUp=function(a){l.timer.clear(this,this.startLoop);l.timer.clear(this,this.slide)};b._skinLoaded=function(){this.slider.skin=this._skin;this.callLater(this.changeScrollBar);this._sizeChanged();this.event("loaded")};b.changeScrollBar=function(){this.upButton.visible=this._showButtons;if(this.downButton.visible=this._showButtons)this.upButton.skin=this._skin.replace(".png","$up.png"),this.downButton.skin=this._skin.replace(".png","$down.png");this.slider.isVertical?this.slider.y=this._showButtons?this.upButton.height:0:this.slider.x=this._showButtons?this.upButton.width:0;this.resetPositions();this.repaint()};b._sizeChanged=function(){a.prototype._sizeChanged.call(this);this.repaint();this.resetPositions();this.event("change");this.changeHandler&&this.changeHandler.runWith(this.value)};b.resetPositions=function(){this.slider.isVertical?this.slider.height=this.height-(this._showButtons?this.upButton.height+this.downButton.height:0):this.slider.width=this.width-(this._showButtons?this.upButton.width+this.downButton.width:0);this.resetButtonPosition()};b.resetButtonPosition=function(){this.slider.isVertical?this.downButton.y=this.slider._y+this.slider.height:this.downButton.x=this.slider._x+this.slider.width};b.measureWidth=function(){return this.slider.isVertical?this.slider.width:100};b.measureHeight=function(){return this.slider.isVertical?100:this.slider.height};b.setScroll=function(a,b,c){this.runCallLater(this._sizeChanged);this.slider.setSlider(a,b,c);this.slider.bar.visible=0<b;!this._hide&&this.autoHide&&(this.visible=!1)};b.onTargetMouseWheel=function(a){this.value-=a.delta*this._scrollSize;this.target=this._target};b.onTargetMouseDown=function(a){if(!this.isLockedFun||this.isLockedFun(a))this.event("end"),this._clickOnly=!0,this._lastOffset=0,this._checkElastic=!1,this._lastPoint||(this._lastPoint=new P),this._lastPoint.setTo(l.stage.mouseX,l.stage.mouseY),l.timer.clear(this,this.tweenMove),ta.clearTween(this),l.stage.once("mouseup",this,this.onStageMouseUp2),l.stage.once("mouseout",this,this.onStageMouseUp2),l.timer.frameLoop(1,this,this.loop)};b.startDragForce=function(){this._clickOnly=!0;this._lastOffset=0;this._checkElastic=!1;this._lastPoint||(this._lastPoint=new P);this._lastPoint.setTo(l.stage.mouseX,l.stage.mouseY);l.timer.clear(this,this.tweenMove);ta.clearTween(this);l.stage.once("mouseup",this,this.onStageMouseUp2);l.stage.once("mouseout",this,this.onStageMouseUp2);l.timer.frameLoop(1,this,this.loop)};b.cancelDragOp=function(){l.stage.off("mouseup",this,this.onStageMouseUp2);l.stage.off("mouseout",this,this.onStageMouseUp2);l.timer.clear(this,this.tweenMove);l.timer.clear(this,this.loop);this._target.mouseEnabled=!0};b.checkTriggers=function(a){void 0===a&&(a=!1);return 0<=this.value&&0>=this.value-this._lastOffset&&this.triggerDownDragLimit&&this.triggerDownDragLimit(a)?(this.cancelDragOp(),this.value=0,!0):this.value<=this.max&&this.value-this._lastOffset>=this.max&&this.triggerUpDragLimit&&this.triggerUpDragLimit(a)?(this.cancelDragOp(),this.value=this.max,!0):!1};b.startTweenMoveForce=function(a){this._lastOffset=a;l.timer.frameLoop(1,this,this.tweenMove,[200])};b.loop=function(){var a=l.stage.mouseY,b=l.stage.mouseX;this._lastOffset=this.isVertical?a-this._lastPoint.y:b-this._lastPoint.x;if(this._clickOnly)if(1<Math.abs(this._lastOffset*(this.isVertical?l.stage._canvasTransform.getScaleY():l.stage._canvasTransform.getScaleX()))){this._clickOnly=!1;if(this.checkTriggers())return;this._offsets||(this._offsets=[]);this._offsets.length=0;this._target.mouseEnabled=!1;!this.hide&&this.autoHide&&(this.alpha=1,this.visible=!0);this.event("start")}else return;else if(this.checkTriggers())return;this._offsets.push(this._lastOffset);this._lastPoint.x=b;this._lastPoint.y=a;0!==this._lastOffset&&(this._checkElastic||(0<this.elasticDistance?this._checkElastic||0==this._lastOffset||(0<this._lastOffset&&this._value<=this.min||0>this._lastOffset&&this._value>=this.max?this._checkElastic=this._isElastic=!0:this._isElastic=!1):this._checkElastic=!0),this._isElastic?this._value<=this.min?0<this._lastOffset?this.value-=this._lastOffset*Math.max(0,1-(this.min-this._value)/this.elasticDistance):(this.value-=.5*this._lastOffset,this._value>=this.min&&(this._checkElastic=!1)):this._value>=this.max&&(0>this._lastOffset?this.value-=this._lastOffset*Math.max(0,1-(this._value-this.max)/this.elasticDistance):(this.value-=.5*this._lastOffset,this._value<=this.max&&(this._checkElastic=!1))):this.value-=this._lastOffset)};b.onStageMouseUp2=function(a){l.stage.off("mouseup",this,this.onStageMouseUp2);l.stage.off("mouseout",this,this.onStageMouseUp2);l.timer.clear(this,this.loop);if(!(this._clickOnly&&this._value>=this.min&&this._value<=this.max))if(this._target.mouseEnabled=!0,this._isElastic)this._value<this.min?ta.to(this,{value:this.min},this.elasticBackTime,Pa.sineOut,B.create(this,this.elasticOver)):this._value>this.max&&ta.to(this,{value:this.max},this.elasticBackTime,Pa.sineOut,B.create(this,this.elasticOver));else if(this._offsets){1>this._offsets.length&&(this._offsets[0]=this.isVertical?l.stage.mouseY-this._lastPoint.y:l.stage.mouseX-this._lastPoint.x);a=0;for(var b=Math.min(this._offsets.length,3),c=0;c<b;c++)a+=this._offsets[this._offsets.length-1-c];this._lastOffset=a/b;a=Math.abs(this._lastOffset);2>a?this.event("end"):(250<a&&(this._lastOffset=0<this._lastOffset?250:-250),l.timer.frameLoop(1,this,this.tweenMove,[Math.round(Math.abs(this._lastOffset/150*this.elasticDistance))]))}};b.elasticOver=function(){this._isElastic=!1;!this.hide&&this.autoHide&&ta.to(this,{alpha:0},500);this.event("end")};b.tweenMove=function(a){this._lastOffset*=this.rollRatio;this.checkTriggers(!0)||(0<a&&(0<this._lastOffset&&this.value<=this.min?(this._isElastic=!0,a=.5*-(this.min-a-this.value),this._lastOffset>a&&(this._lastOffset=a)):0>this._lastOffset&&this.value>=this.max&&(this._isElastic=!0,a=.5*-(this.max+a-this.value),this._lastOffset<a&&(this._lastOffset=a))),this.value-=this._lastOffset,.1>Math.abs(this._lastOffset)&&(l.timer.clear(this,this.tweenMove),this._isElastic?this._value<this.min?ta.to(this,{value:this.min},this.elasticBackTime,Pa.sineOut,B.create(this,this.elasticOver)):this._value>this.max?ta.to(this,{value:this.max},this.elasticBackTime,Pa.sineOut,B.create(this,this.elasticOver)):this.elasticOver():(this.event("end"),!this.hide&&this.autoHide&&ta.to(this,{alpha:0},500))))};b.stopScroll=function(){this.onStageMouseUp2(null);l.timer.clear(this,this.tweenMove);ta.clearTween(this)};g(0,b,"thumbPercent",function(){return this._thumbPercent},function(a){this.runCallLater(this.changeScrollBar);this.runCallLater(this._sizeChanged);this._thumbPercent=a=1<=a?.99:a;this.scaleBar&&(this.slider.isVertical?this.slider.bar.height=Math.max(this.slider.height*a,ra.scrollBarMinNum):this.slider.bar.width=Math.max(this.slider.width*a,ra.scrollBarMinNum))});g(0,b,"dataSource",a.prototype._$get_dataSource,function(a){this._dataSource=a;"number"==typeof a||"string"==typeof a?this.value=Number(a):l.superSet(aa,this,"dataSource",a)});g(0,b,"skin",function(){return this._skin},function(a){" "!=a&&this._skin!=a&&((this._skin=a)&&!x.getRes(this._skin)?l.loader.load([this._skin,this._skin.replace(".png","$up.png"),this._skin.replace(".png","$down.png"),this._skin.replace(".png","$bar.png")],B.create(this,this._skinLoaded)):this._skinLoaded())});g(0,b,"max",function(){return this.slider.max},function(a){this.slider.max=a});g(0,b,"min",function(){return this.slider.min},function(a){this.slider.min=a});g(0,b,"value",function(){return this._value},function(a){a!==this._value&&(this._value=a,this._isElastic||(this.slider._value!=a&&(this.slider._value=a,this.slider.changeValue()),this._value=this.slider._value),this.event("change"),this.changeHandler&&this.changeHandler.runWith(this._value))});g(0,b,"isVertical",function(){return this.slider.isVertical},function(a){this.slider.isVertical=a});g(0,b,"sizeGrid",function(){return this.slider.sizeGrid},function(a){this.slider.sizeGrid=a});g(0,b,"scrollSize",function(){return this._scrollSize},function(a){this._scrollSize=a});g(0,b,"target",function(){return this._target},function(a){this._target&&(this._target.off("mousewheel",this,this.onTargetMouseWheel),this._target.off("mousedown",this,this.onTargetMouseDown));if(this._target=a)this._mouseWheelEnable&&this._target.on("mousewheel",this,this.onTargetMouseWheel),this._touchScrollEnable&&this._target.on("mousedown",this,this.onTargetMouseDown)});g(0,b,"hide",function(){return this._hide},function(a){this._hide=a;this.visible=!a});g(0,b,"showButtons",function(){return this._showButtons},function(a){this._showButtons=a;this.callLater(this.changeScrollBar)});g(0,b,"touchScrollEnable",function(){return this._touchScrollEnable},function(a){this._touchScrollEnable=a;this.target=this._target});g(0,b,"mouseWheelEnable",function(){return this._mouseWheelEnable},function(a){this._mouseWheelEnable=a;this.target=this._target});g(0,b,"lastOffset",function(){return this._lastOffset});g(0,b,"tick",function(){return this.slider.tick},function(a){this.slider.tick=a});return c}(aa),Cb=function(a){function c(a){this._tf=null;c.__super.call(this);void 0===a&&(a="");this.text=a}n(c,"laya.ui.Label",a);var b=c.prototype;b.destroy=function(b){void 0===b&&(b=!0);a.prototype.destroy.call(this,b);this._tf=null};b.createChildren=function(){this.addChild(this._tf=new W)};b.changeText=function(a){this._tf.changeText(a)};b.measureWidth=function(){return this._tf.width};b.measureHeight=function(){return this._tf.height};g(0,b,"padding",function(){return this._tf.padding.join(",")},function(a){this._tf.padding=sa.fillArray(ra.labelPadding,a,Number)});g(0,b,"bold",function(){return this._tf.bold},function(a){this._tf.bold=a});g(0,b,"align",function(){return this._tf.align},function(a){this._tf.align=a});g(0,b,"text",function(){return this._tf.text},function(a){if(this._tf.text!=a&&(a&&(a=sa.adptString(a+"")),this._tf.text=a,this.event("change"),!this._width||!this._height))this.onCompResize()});g(0,b,"italic",function(){return this._tf.italic},function(a){this._tf.italic=a});g(0,b,"wordWrap",function(){return this._tf.wordWrap},function(a){this._tf.wordWrap=a});g(0,b,"font",function(){return this._tf.font},function(a){this._tf.font=a});g(0,b,"dataSource",a.prototype._$get_dataSource,function(a){this._dataSource=a;"number"==typeof a||"string"==typeof a?this.text=a+"":l.superSet(aa,this,"dataSource",a)});g(0,b,"color",function(){return this._tf.color},function(a){this._tf.color=a});g(0,b,"valign",function(){return this._tf.valign},function(a){this._tf.valign=a});g(0,b,"leading",function(){return this._tf.leading},function(a){this._tf.leading=a});g(0,b,"fontSize",function(){return this._tf.fontSize},function(a){this._tf.fontSize=a});g(0,b,"bgColor",function(){return this._tf.bgColor},function(a){this._tf.bgColor=a});g(0,b,"borderColor",function(){return this._tf.borderColor},function(a){this._tf.borderColor=a});g(0,b,"stroke",function(){return this._tf.stroke},function(a){this._tf.stroke=a});g(0,b,"strokeColor",function(){return this._tf.strokeColor},function(a){this._tf.strokeColor=a});g(0,b,"textField",function(){return this._tf});g(0,b,"width",function(){return this._width||this._tf.text?l.superGet(aa,this,"width"):0},function(a){l.superSet(aa,this,"width",a);this._tf.width=a});g(0,b,"height",function(){return this._height||this._tf.text?l.superGet(aa,this,"height"):0},function(a){l.superSet(aa,this,"height",a);this._tf.height=a});g(0,b,"overflow",function(){return this._tf.overflow},function(a){this._tf.overflow=a});g(0,b,"underline",function(){return this._tf.underline},function(a){this._tf.underline=a});g(0,b,"underlineColor",function(){return this._tf.underlineColor},function(a){this._tf.underlineColor=a});return c}(aa),Qb=function(a){function c(a){this.changeHandler=null;this.showLabel=this.isVertical=!0;this._allowClickBack=!1;this._max=100;this._min=0;this._tick=1;this._value=0;this._bar=this._progress=this._bg=this._skin=null;this._maxMove=this._ty=this._tx=NaN;this._globalSacle=null;c.__super.call(this);this.skin=a}n(c,"laya.ui.Slider",a);var b=c.prototype;b.destroy=function(b){void 0===b&&(b=!0);a.prototype.destroy.call(this,b);this._bg&&this._bg.destroy(b);this._bar&&this._bar.destroy(b);this._progress&&this._progress.destroy(b);this.changeHandler=this._progress=this._bar=this._bg=null};b.createChildren=function(){this.addChild(this._bg=new Bb);this.addChild(this._bar=new Ja)};b.initialize=function(){this._bar.on("mousedown",this,this.onBarMouseDown);this._bg.sizeGrid=this._bar.sizeGrid="4,4,4,4,0";this._progress&&(this._progress.sizeGrid=this._bar.sizeGrid);this.allowClickBack=!0};b.onBarMouseDown=function(a){this._globalSacle||(this._globalSacle=new P);this._globalSacle.setTo(this.globalScaleX||.01,this.globalScaleY||.01);this._maxMove=this.isVertical?this.height-this._bar.height:this.width-this._bar.width;this._tx=l.stage.mouseX;this._ty=l.stage.mouseY;l.stage.on("mousemove",this,this.mouseMove);l.stage.once("mouseup",this,this.mouseUp);l.stage.once("mouseout",this,this.mouseUp);this.showValueText()};b.showValueText=function(){if(this.showLabel){var a=laya.ui.Slider.label;this.addChild(a);a.textField.changeText(this._value+"");this.isVertical?(a.x=this._bar._x+20,a.y=.5*(this._bar.height-a.height)+this._bar._y):(a.y=this._bar._y-20,a.x=.5*(this._bar.width-a.width)+this._bar._x)}};b.hideValueText=function(){laya.ui.Slider.label&&laya.ui.Slider.label.removeSelf()};b.mouseUp=function(a){l.stage.off("mousemove",this,this.mouseMove);l.stage.off("mouseup",this,this.mouseUp);l.stage.off("mouseout",this,this.mouseUp);this.sendChangeEvent("changed");this.hideValueText()};b.mouseMove=function(a){a=this._value;this.isVertical?(this._bar.y+=(l.stage.mouseY-this._ty)/this._globalSacle.y,this._bar._y>this._maxMove?this._bar.y=this._maxMove:0>this._bar._y&&(this._bar.y=0),this._value=this._bar._y/this._maxMove*(this._max-this._min)+this._min,this._progress&&(this._progress.height=this._bar._y+.5*this._bar.height)):(this._bar.x+=(l.stage.mouseX-this._tx)/this._globalSacle.x,this._bar._x>this._maxMove?this._bar.x=this._maxMove:0>this._bar._x&&(this._bar.x=0),this._value=this._bar._x/this._maxMove*(this._max-this._min)+this._min,this._progress&&(this._progress.width=this._bar._x+.5*this._bar.width));this._tx=l.stage.mouseX;this._ty=l.stage.mouseY;if(0!=this._tick){var b=Math.pow(10,(this._tick+"").length-1);this._value=Math.round(Math.round(this._value/this._tick)*this._tick*b)/b}this._value!=a&&this.sendChangeEvent();this.showValueText()};b.sendChangeEvent=function(a){void 0===a&&(a="change");this.event(a);this.changeHandler&&this.changeHandler.runWith(this._value)};b._skinLoaded=function(){this._bg.skin=this._skin;this._bar.skin=this._skin.replace(".png","$bar.png");var a=this._skin.replace(".png","$progress.png");x.getRes(a)&&(this._progress||(this.addChild(this._progress=new Bb),this._progress.sizeGrid=this._bar.sizeGrid,this.setChildIndex(this._progress,1)),this._progress.skin=a);this.setBarPoint();this.callLater(this.changeValue);this._sizeChanged();this.event("loaded")};b.setBarPoint=function(){this.isVertical?this._bar.x=Math.round(.5*(this._bg.width-this._bar.width)):this._bar.y=Math.round(.5*(this._bg.height-this._bar.height))};b.measureWidth=function(){return Math.max(this._bg.width,this._bar.width)};b.measureHeight=function(){return Math.max(this._bg.height,this._bar.height)};b._sizeChanged=function(){a.prototype._sizeChanged.call(this);this.isVertical?this._bg.height=this.height:this._bg.width=this.width;this.setBarPoint();this.changeValue()};b.setSlider=function(a,b,c){this._value=-1;this._min=a;this._max=b>a?b:a;this.value=c<a?a:c>b?b:c};b.changeValue=function(){if(0!=this.tick){var a=Math.pow(10,(this._tick+"").length-1);this._value=Math.round(Math.round(this._value/this._tick)*this._tick*a)/a}this._value=this._value>this._max?this._max:this._value<this._min?this._min:this._value;a=this._max-this._min;0===a&&(a=1);this.isVertical?(this._bar.y=(this._value-this._min)/a*(this.height-this._bar.height),this._progress&&(this._progress.height=this._bar._y+.5*this._bar.height)):(this._bar.x=(this._value-this._min)/a*(this.width-this._bar.width),this._progress&&(this._progress.width=this._bar._x+.5*this._bar.width))};b.onBgMouseDown=function(a){a=this._bg.getMousePoint();this.value=this.isVertical?a.y/(this.height-this._bar.height)*(this._max-this._min)+this._min:a.x/(this.width-this._bar.width)*(this._max-this._min)+this._min};g(0,b,"dataSource",a.prototype._$get_dataSource,function(a){this._dataSource=a;"number"==typeof a||"string"==typeof a?this.value=Number(a):l.superSet(aa,this,"dataSource",a)});g(0,b,"skin",function(){return this._skin},function(a){this._skin!=a&&((this._skin=a)&&!x.getRes(this._skin)?l.loader.load([this._skin,this._skin.replace(".png","$bar.png")],B.create(this,this._skinLoaded)):this._skinLoaded())});g(0,b,"tick",function(){return this._tick},function(a){this._tick!=a&&(this._tick=a,this.callLater(this.changeValue))});g(0,b,"sizeGrid",function(){return this._bg.sizeGrid},function(a){this._bg.sizeGrid=a;this._bar.sizeGrid=a;this._progress&&(this._progress.sizeGrid=this._bar.sizeGrid)});g(0,b,"allowClickBack",function(){return this._allowClickBack},function(a){if(this._allowClickBack!=a)if(this._allowClickBack=a)this._bg.on("mousedown",this,this.onBgMouseDown);else this._bg.off("mousedown",this,this.onBgMouseDown)});g(0,b,"max",function(){return this._max},function(a){this._max!=a&&(this._max=a,this.callLater(this.changeValue))});g(0,b,"min",function(){return this._min},function(a){this._min!=a&&(this._min=a,this.callLater(this.changeValue))});g(0,b,"bar",function(){return this._bar});g(0,b,"value",function(){return this._value},function(a){if(this._value!=a){var b=this._value;this._value=a;this.changeValue();this._value!=b&&this.sendChangeEvent()}});u(c,["label",function(){return this.label=new Cb}]);return c}(aa),Bb=function(a){function c(a){this._group=this._skin=this._bitmap=null;c.__super.call(this);this.skin=a}n(c,"laya.ui.Image",a);var b=c.prototype;b.destroy=function(b){a.prototype.destroy.call(this,!0);this._bitmap&&this._bitmap.destroy();this._bitmap=null};b.dispose=function(){this.destroy(!0);l.loader.clearRes(this._skin)};b.createChildren=function(){this.graphics=this._bitmap=new nb;this._bitmap.autoCacheCmd=!1};b.setSource=function(a,b){a===this._skin&&b&&(this.source=b,this.onCompResize())};b.measureWidth=function(){return this._bitmap.width};b.measureHeight=function(){return this._bitmap.height};g(0,b,"dataSource",a.prototype._$get_dataSource,function(a){this._dataSource=a;"string"==typeof a?this.skin=a:l.superSet(aa,this,"dataSource",a)});g(0,b,"source",function(){return this._bitmap.source},function(a){this._bitmap&&(this._bitmap.source=a,this.event("loaded"),this.repaint())});g(0,b,"skin",function(){return this._skin},function(a){this._skin!=a&&((this._skin=a)?(a=x.getRes(a))?(this.source=a,this.onCompResize()):l.loader.load(this._skin,B.create(this,this.setSource,[this._skin]),null,"image",1,!0,this._group):this.source=null)});g(0,b,"sizeGrid",function(){return this._bitmap.sizeGrid?this._bitmap.sizeGrid.join(","):null},function(a){this._bitmap.sizeGrid=sa.fillArray(ra.defaultSizeGrid,a,Number)});g(0,b,"group",function(){return this._group},function(a){a&&this._skin&&x.setGroup(this._skin,a);this._group=a});g(0,b,"width",a.prototype._$get_width,function(a){l.superSet(aa,this,"width",a);this._bitmap.width=0==a?1E-7:a});g(0,b,"height",a.prototype._$get_height,function(a){l.superSet(aa,this,"height",a);this._bitmap.height=0==a?1E-7:a});return c}(aa),Ff=function(a){function c(a){this._skin=this._bar=this._bg=this.changeHandler=null;this._value=.5;c.__super.call(this);this.skin=a}n(c,"laya.ui.ProgressBar",a);var b=c.prototype;b.destroy=function(b){void 0===b&&(b=!0);a.prototype.destroy.call(this,b);this._bg&&this._bg.destroy(b);this._bar&&this._bar.destroy(b);this.changeHandler=this._bg=this._bar=null};b.createChildren=function(){this.addChild(this._bg=new Bb);this.addChild(this._bar=new Bb);this._bar._bitmap.autoCacheCmd=!1};b._skinLoaded=function(){this._bg.skin=this._skin;this._bar.skin=this._skin.replace(".png","$bar.png");this.callLater(this.changeValue);this._sizeChanged();this.event("loaded")};b.measureWidth=function(){return this._bg.width};b.measureHeight=function(){return this._bg.height};b.changeValue=function(){if(this.sizeGrid){var a=this.sizeGrid.split(","),b=parseFloat(a[3]),a=parseFloat(a[1]);this._bar.width=b+a+(this.width-b-a)*this._value;this._bar.visible=this._bar.width>b+a}else this._bar.width=this.width*this._value};g(0,b,"dataSource",a.prototype._$get_dataSource,function(a){this._dataSource=a;"number"==typeof a||"string"==typeof a?this.value=Number(a):l.superSet(aa,this,"dataSource",a)});g(0,b,"skin",function(){return this._skin},function(a){this._skin!=a&&((this._skin=a)&&!x.getRes(this._skin)?l.loader.load(this._skin,B.create(this,this._skinLoaded),null,"image",1):this._skinLoaded())});g(0,b,"height",a.prototype._$get_height,function(a){l.superSet(aa,this,"height",a);this._bg.height=this._height;this._bar.height=this._height});g(0,b,"bar",function(){return this._bar});g(0,b,"value",function(){return this._value},function(a){this._value!=a&&(this._value=a=1<a?1:0>a?0:a,this.callLater(this.changeValue),this.event("change"),this.changeHandler&&this.changeHandler.runWith(a))});g(0,b,"bg",function(){return this._bg});g(0,b,"sizeGrid",function(){return this._bg.sizeGrid},function(a){this._bg.sizeGrid=this._bar.sizeGrid=a});g(0,b,"width",a.prototype._$get_width,function(a){l.superSet(aa,this,"width",a);this._bg.width=this._width;this.callLater(this.changeValue)});return c}(aa),zf=function(a){function c(){this.changeHandler=null;this._gridSize=11;this._bgColor="#ffffff";this._inputColor=this._borderColor="#000000";this._inputBgColor="#efefef";this._colorButton=this._colorInput=this._colorBlock=this._colorTiles=this._colorPanel=null;this._colors=[];this._selectedColor="#000000";this._panelChanged=!1;c.__super.call(this)}n(c,"laya.ui.ColorPicker",a);var b=c.prototype;b.destroy=function(b){void 0===b&&(b=!0);a.prototype.destroy.call(this,b);this._colorPanel&&this._colorPanel.destroy(b);this._colorButton&&this._colorButton.destroy(b);this.changeHandler=this._colors=this._colorButton=this._colorInput=this._colorBlock=this._colorTiles=this._colorPanel=null};b.createChildren=function(){this.addChild(this._colorButton=new Ja);this._colorPanel=new Y;this._colorPanel.size(230,166);this._colorPanel.addChild(this._colorTiles=new L);this._colorPanel.addChild(this._colorBlock=new L);this._colorPanel.addChild(this._colorInput=new ia)};b.initialize=function(){this._colorButton.on("click",this,this.onColorButtonClick);this._colorBlock.pos(5,5);this._colorInput.pos(60,5);this._colorInput.size(60,20);this._colorInput.on("change",this,this.onColorInputChange);this._colorInput.on("keydown",this,this.onColorFieldKeyDown);this._colorTiles.pos(5,30);this._colorTiles.on("mousemove",this,this.onColorTilesMouseMove);this._colorTiles.on("click",this,this.onColorTilesClick);this._colorTiles.size(20*this._gridSize,12*this._gridSize);this._colorPanel.on("mousedown",this,this.onPanelMouseDown);this.bgColor=this._bgColor};b.onPanelMouseDown=function(a){a.stopPropagation()};b.changePanel=function(){this._panelChanged=!1;var a=this._colorPanel.graphics;a.clear(!0);a.drawRect(0,0,230,166,this._bgColor,this._borderColor);this.drawBlock(this._selectedColor);this._colorInput.borderColor=this._borderColor;this._colorInput.bgColor=this._inputBgColor;this._colorInput.color=this._inputColor;a=this._colorTiles.graphics;a.clear(!0);for(var b=[0,3355443,6710886,10066329,13421772,16777215,16711680,65280,255,16776960,65535,16711935],c=0;12>c;c++)for(var f=0;20>f;f++){var g=sa.toColor(0===f?b[c]:1===f?0:51*(((3*c+f/6)%3<<0)+3*(c/6<<0))<<16|f%6*51<<8|(c<<0)%6*51);this._colors.push(g);a.drawRect(f*this._gridSize,c*this._gridSize,this._gridSize,this._gridSize,g,"#000000")}};b.onColorButtonClick=function(a){this._colorPanel.parent?this.close():this.open()};b.open=function(){var a=this.localToGlobal(new P),b=a.x+this._colorPanel.width<=l.stage.width?a.x:l.stage.width-this._colorPanel.width,c=a.y+this._colorButton.height,c=c+this._colorPanel.height<=l.stage.height?c:a.y-this._colorPanel.height;this._colorPanel.pos(b,c);this._colorPanel.zOrder=1001;l._currentStage.addChild(this._colorPanel);l.stage.on("mousedown",this,this.removeColorBox)};b.close=function(){l.stage.off("mousedown",this,this.removeColorBox);this._colorPanel.removeSelf()};b.removeColorBox=function(a){this.close()};b.onColorFieldKeyDown=function(a){13==a.keyCode&&(this.selectedColor=this._colorInput.text?this._colorInput.text:null,this.close(),a.stopPropagation())};b.onColorInputChange=function(a){this._colorInput.text?this.drawBlock(this._colorInput.text):this.drawBlock("#FFFFFF")};b.onColorTilesClick=function(a){this.selectedColor=this.getColorByMouse();this.close()};b.onColorTilesMouseMove=function(a){this._colorInput.focus=!1;a=this.getColorByMouse();this._colorInput.text=a;this.drawBlock(a)};b.getColorByMouse=function(){var a=this._colorTiles.getMousePoint();return this._colors[20*Math.floor(a.y/this._gridSize)+Math.floor(a.x/this._gridSize)]};b.drawBlock=function(a){var b=this._colorBlock.graphics;b.clear(!0);b.drawRect(0,0,50,20,a?a:"#ffffff",this._borderColor);a||b.drawLine(0,0,50,20,"#ff0000")};b.changeColor=function(){var a=this.graphics;a.clear(!0);a.drawRect(0,0,this._colorButton.width,this._colorButton.height,this._selectedColor||"#000000")};b._setPanelChanged=function(){this._panelChanged||(this._panelChanged=!0,this.callLater(this.changePanel))};g(0,b,"inputBgColor",function(){return this._inputBgColor},function(a){this._inputBgColor=a;this._setPanelChanged()});g(0,b,"selectedColor",function(){return this._selectedColor},function(a){this._selectedColor!=a&&(this._selectedColor=this._colorInput.text=a,this.drawBlock(a),this.changeColor(),this.changeHandler&&this.changeHandler.runWith(this._selectedColor),this.event("change",Ya.EMPTY.setTo("change",this,this)))});g(0,b,"skin",function(){return this._colorButton.skin},function(a){this._colorButton.once("loaded",this,this.changeColor);this._colorButton.skin=a});g(0,b,"bgColor",function(){return this._bgColor},function(a){this._bgColor=a;this._setPanelChanged()});g(0,b,"borderColor",function(){return this._borderColor},function(a){this._borderColor=a;this._setPanelChanged()});g(0,b,"inputColor",function(){return this._inputColor},function(a){this._inputColor=a;this._setPanelChanged()});return c}(aa),ia=function(a){function c(){this._multiline=this._focus=!1;this._editable=!0;this._restrictPattern=null;this._type="text";this._prompt="";this._promptColor="#A9A9A9";this._originColor="#000000";this._content="";c.__super.call(this);this._maxChars=1E5;this._width=100;this._height=20;this.multiline=!1;this.overflow="scroll";this.on("mousedown",this,this._onMouseDown);this.on("undisplay",this,this._onUnDisplay)}n(c,"laya.display.Input",a);var b=c.prototype;b.setSelection=function(a,b){this.focus=!0;laya.display.Input.inputElement.selectionStart=a;laya.display.Input.inputElement.selectionEnd=b};b._onUnDisplay=function(a){this.focus=!1};b._onMouseDown=function(a){this.focus=!0};b._syncInputTransform=function(){var a=this.nativeInput,b=U.getTransformRelativeToWindow(this,this.padding[3],this.padding[0]),h=this._width-this.padding[1]-this.padding[3],f=this._height-this.padding[0]-this.padding[2];r.isConchApp?(a.setScale(b.scaleX,b.scaleY),a.setSize(h,f),a.setPos(b.x,b.y)):(c.inputContainer.style.transform=c.inputContainer.style.webkitTransform="scale("+b.scaleX+","+b.scaleY+") rotate("+l.stage.canvasDegree+"deg)",a.style.width=h+"px",a.style.height=f+"px",c.inputContainer.style.left=b.x+"px",c.inputContainer.style.top=b.y+"px")};b.select=function(){this.nativeInput.select()};b._setInputMethod=function(){c.input.parentElement&&c.inputContainer.removeChild(c.input);c.area.parentElement&&c.inputContainer.removeChild(c.area);c.inputElement=this._multiline?c.area:c.input;c.inputContainer.appendChild(c.inputElement);W.RightToLeft&&(c.inputElement.style.direction="rtl")};b._focusIn=function(){laya.display.Input.isInputting=!0;var a=this.nativeInput;this._focus=!0;var b=a.style;b.whiteSpace=this.wordWrap?"pre-wrap":"nowrap";this._setPromptColor();a.readOnly=!this._editable;r.isConchApp&&(a.setType(this._type),a.setForbidEdit(!this._editable));a.maxLength=this._maxChars;a.type=this._type;a.value=this._content;a.placeholder=this._prompt;l.stage.off("keydown",this,this._onKeyDown);l.stage.on("keydown",this,this._onKeyDown);l.stage.focus=this;this.event("focus");q.onPC&&a.focus();q.onMiniGame||q.onBDMiniGame||(this._text=null);this.typeset();a.setColor(this._originColor);a.setFontSize(this.fontSize);a.setFontFace(q.onIPhone?W.fontFamilyMap[this.font]||this.font:this.font);r.isConchApp&&a.setMultiAble&&a.setMultiAble(this._multiline);b.lineHeight=this.leading+this.fontSize+"px";b.fontStyle=this.italic?"italic":"normal";b.fontWeight=this.bold?"bold":"normal";b.textAlign=this.align;b.padding="0 0";this._syncInputTransform();!r.isConchApp&&q.onPC&&l.systemTimer.frameLoop(1,this,this._syncInputTransform)};b._setPromptColor=function(){c.promptStyleDOM=q.getElementById("promptStyle");c.promptStyleDOM||(c.promptStyleDOM=q.createElement("style"),c.promptStyleDOM.setAttribute("id","promptStyle"),q.document.head.appendChild(c.promptStyleDOM));c.promptStyleDOM.innerText="input::-webkit-input-placeholder, textarea::-webkit-input-placeholder {color:"+this._promptColor+"}input:-moz-placeholder, textarea:-moz-placeholder {color:"+this._promptColor+"}input::-moz-placeholder, textarea::-moz-placeholder {color:"+this._promptColor+"}input:-ms-input-placeholder, textarea:-ms-input-placeholder {color:"+this._promptColor+"}"};b._focusOut=function(){this._focus=laya.display.Input.isInputting=!1;this._text=null;(this._content=this.nativeInput.value)?(l.superSet(W,this,"text",this._content),l.superSet(W,this,"color",this._originColor)):(l.superSet(W,this,"text",this._prompt),l.superSet(W,this,"color",this._promptColor));l.stage.off("keydown",this,this._onKeyDown);l.stage.focus=null;this.event("blur");this.event("change");r.isConchApp&&this.nativeInput.blur();q.onPC&&l.systemTimer.clear(this,this._syncInputTransform)};b._onKeyDown=function(a){13===a.keyCode&&(q.onMobile&&!this._multiline&&(this.focus=!1),this.event("enter"))};b.changeText=function(b){this._content=b;this._focus?(this.nativeInput.value=b||"",this.event("change")):a.prototype.changeText.call(this,b)};g(0,b,"color",a.prototype._$get_color,function(a){this._focus&&this.nativeInput.setColor(a);l.superSet(W,this,"color",this._content?a:this._promptColor);this._originColor=a});g(0,b,"multiline",function(){return this._multiline},function(a){this.valign=(this._multiline=a)?"top":"middle"});g(0,b,"maxChars",function(){return this._maxChars},function(a){0>=a&&(a=1E5);this._maxChars=a});g(0,b,"text",function(){return this._focus?this.nativeInput.value:this._content||""},function(a){l.superSet(W,this,"color",this._originColor);a+="";this._focus?(this.nativeInput.value=a||"",this.event("change")):(this._multiline||(a=a.replace(/\r?\n/g,"")),(this._content=a)?l.superSet(W,this,"text",a):(l.superSet(W,this,"text",this._prompt),l.superSet(W,this,"color",this.promptColor)))});g(0,b,"nativeInput",function(){return this._multiline?c.area:c.input});g(0,b,"focus",function(){return this._focus},function(a){var b=this.nativeInput;this._focus!==a&&(a?(b.target?b.target._focusOut():this._setInputMethod(),b.target=this,this._focusIn()):(b.target=null,this._focusOut(),q.document.body.scrollTop=0,b.blur(),r.isConchApp?b.setPos(-1E4,-1E4):c.inputContainer.contains(b)&&c.inputContainer.removeChild(b)))});g(0,b,"editable",function(){return this._editable},function(a){this._editable=a;r.isConchApp&&c.input.setForbidEdit(!a)});g(0,b,"bgColor",a.prototype._$get_bgColor,function(a){l.superSet(W,this,"bgColor",a);r.isConchApp&&this.nativeInput.setBgColor(a)});g(0,b,"restrict",function(){return this._restrictPattern?this._restrictPattern.source:""},function(a){a?(a="[^"+a+"]",-1<a.indexOf("^^")&&(a=a.replace("^^","")),this._restrictPattern=new RegExp(a,"g")):this._restrictPattern=null});g(0,b,"prompt",function(){return this._prompt},function(a){!this._text&&a&&l.superSet(W,this,"color",this._promptColor);this.promptColor=this._promptColor;this._text?l.superSet(W,this,"text",this._text==this._prompt?a:this._text):l.superSet(W,this,"text",a);this._prompt=W.langPacks&&W.langPacks[a]?W.langPacks[a]:a});g(0,b,"promptColor",function(){return this._promptColor},function(a){this._promptColor=a;this._content||l.superSet(W,this,"color",a)});g(0,b,"type",function(){return this._type},function(a){"password"===a?this._getTextStyle().asPassword=!0:this._getTextStyle().asPassword=!1;this._type=a});c.__init__=function(){c._createInputElement();if(q.onMobile){var a=!1;if(q.onMiniGame||q.onBDMiniGame)a=!0;r.canvas.addEventListener(c.IOS_IFRAME?a?"touchend":"click":"touchend",c._popupInputMethod)}};c._popupInputMethod=function(a){laya.display.Input.isInputting&&laya.display.Input.inputElement.focus()};c._createInputElement=function(){c._initInput(c.area=q.createElement("textarea"));c._initInput(c.input=q.createElement("input"));c.inputContainer=q.createElement("div");c.inputContainer.style.position="absolute";c.inputContainer.style.zIndex=1E5;q.container.appendChild(c.inputContainer);c.inputContainer.setPos=function(a,b){c.inputContainer.style.left=a+"px";c.inputContainer.style.top=b+"px"}};c._initInput=function(a){var b=a.style;b.cssText="position:absolute;overflow:hidden;resize:none;transform-origin:0 0;-webkit-transform-origin:0 0;-moz-transform-origin:0 0;-o-transform-origin:0 0;";b.resize="none";b.backgroundColor="transparent";b.border="none";b.outline="none";b.zIndex=1;a.addEventListener("input",c._processInputting);a.addEventListener("mousemove",c._stopEvent);a.addEventListener("mousedown",c._stopEvent);a.addEventListener("touchmove",c._stopEvent);a.setFontFace=function(b){a.style.fontFamily=b};r.isConchApp||(a.setColor=function(b){a.style.color=b},a.setFontSize=function(b){a.style.fontSize=b+"px"})};c._processInputting=function(a){if(a=laya.display.Input.inputElement.target){var b=laya.display.Input.inputElement.value;a._restrictPattern&&(b=b.replace(/\u2006|\x27/g,""),a._restrictPattern.test(b)&&(b=b.replace(a._restrictPattern,""),laya.display.Input.inputElement.value=b));a._text=b;a.event("input")}};c._stopEvent=function(a){"touchmove"==a.type&&a.preventDefault();a.stopPropagation&&a.stopPropagation()};c.TYPE_TEXT="text";c.TYPE_PASSWORD="password";c.TYPE_EMAIL="email";c.TYPE_URL="url";c.TYPE_NUMBER="number";c.TYPE_RANGE="range";c.TYPE_DATE="date";c.TYPE_MONTH="month";c.TYPE_WEEK="week";c.TYPE_TIME="time";c.TYPE_DATE_TIME="datetime";c.TYPE_DATE_TIME_LOCAL="datetime-local";c.TYPE_SEARCH="search";c.input=null;c.area=null;c.inputElement=null;c.inputContainer=null;c.confirmButton=null;c.promptStyleDOM=null;c.inputHeight=45;c.isInputting=!1;c.stageMatrix=null;u(c,["IOS_IFRAME",function(){return this.IOS_IFRAME=q.onIOS&&q.window.top!=q.window.self}]);return c}(W);(function(a){function c(){c.__super.call(this);this.bgColor="#ffff00";this.wordWrap=!1;this.mouseEnabled=!0}n(c,"laya.debug.tools.debugUI.DButton",a);return c})(W);var Nf=function(a){function c(){this._url=this._frames=null;c.__super.call(this);this._setControlNode(this)}n(c,"laya.display.Animation",a);var b=c.prototype;b.destroy=function(a){void 0===a&&(a=!0);this.stop();laya.display.Sprite.prototype.destroy.call(this,a);this._labels=this._frames=null};b.play=function(b,c,h){void 0===b&&(b=0);void 0===c&&(c=!0);void 0===h&&(h="");h&&this._setFramesFromCache(h,!0);a.prototype.play.call(this,b,c,h)};b._setFramesFromCache=function(a,b){void 0===b&&(b=!1);this._url&&(a=this._url+"#"+a);if(a&&c.framesMap[a])return b=c.framesMap[a],b instanceof Array?(this._frames=c.framesMap[a],this._count=this._frames.length):(b.nodeRoot&&(c.framesMap[a]=yc.parseAnimationByData(b),b=c.framesMap[a]),this._frames=b.frames,this._count=this._frames.length,this._frameRateChanged||(this._interval=b.interval),this._labels=this._copyLabels(b.labels)),!0;b&&console.log("ani not found:",a);return!1};b._copyLabels=function(a){if(!a)return null;var b;b={};for(var c in a)b[c]=U.copyArray([],a[c]);return b};b._frameLoop=function(){this._visible&&.01<this._style.alpha&&this._frames&&a.prototype._frameLoop.call(this)};b._displayToIndex=function(a){this._frames&&(this.graphics=this._frames[a])};b.clear=function(){a.prototype.clear.call(this);this.stop();this._labels=this._frames=this.graphics=null;return this};b.loadImages=function(a,b){void 0===b&&(b="");this._url="";this._setFramesFromCache(b)||(this.frames=c.framesMap[b]?c.framesMap[b]:c.createFrames(a,b));return this};b.loadAtlas=function(a,b,h){void 0===h&&(h="");this._url="";var d=this;if(!d._setFramesFromCache(h)){var e=function(e){a===e&&(d.frames=c.framesMap[h]?c.framesMap[h]:c.createFrames(a,h),b&&b.run())};x.getAtlas(a)?e(a):l.loader.load(a,B.create(null,e,[a]),null,"atlas")}return this};b.loadAnimation=function(a,b,c){this._url=a;this._actionName||(this._actionName="");this._setFramesFromCache(this._actionName)?(this._setFramesFromCache(this._actionName,!0),this.index=0,b&&b.run()):!c||x.getAtlas(c)?this._loadAnimationData(a,b,c):l.loader.load(c,B.create(this,this._loadAnimationData,[a,b,c]),null,"atlas");return this};b._loadAnimationData=function(a,b,h){function d(d){if(x.getRes(d)){if(a===d){if(c.framesMap[a+"#"])g._setFramesFromCache(e._actionName,!0),e.index=0;else{d=yc.parseAnimationData(x.getRes(a));if(!d)return;var h=d.animationList,f,k=h.length,m;for(f=0;f<k;f++)d=h[f],c.framesMap[a+"#"+d.name]=d,m||(m=d);m&&(c.framesMap[a+"#"]=m,g._setFramesFromCache(e._actionName,!0),e.index=0)}e._resumePlay();b&&b.run()}x.clearRes(a)}}var e=this;if(h&&!x.getAtlas(h))console.warn("atlas load fail:"+h);else{var g=this;x.getRes(a)?d(a):l.loader.load(a,B.create(null,d,[a]),null,"json")}};g(0,b,"frames",function(){return this._frames},function(a){if(this._frames=a)this._count=a.length,this._actionName&&this._setFramesFromCache(this._actionName,!0),this.index=this._index});g(0,b,"autoPlay",null,function(a){a?this.play():this.stop()});g(0,b,"source",null,function(a){-1<a.indexOf(".ani")?this.loadAnimation(a):-1<a.indexOf(".json")||-1<a.indexOf("als")||-1<a.indexOf("atlas")?this.loadAtlas(a):this.loadImages(a.split(","))});g(0,b,"autoAnimation",null,function(a){this.play(0,!0,a)});c.createFrames=function(a,b){var d;if("string"==typeof a){if((a=x.getAtlas(a))&&a.length){d=[];for(var e=0,g=a.length;e<g;e++){var m=new Ma;m.drawImage(x.getRes(a[e]),0,0);d.push(m)}}}else if(a instanceof Array)for(d=[],e=0,g=a.length;e<g;e++)m=new Ma,m.loadImage(a[e],0,0),d.push(m);b&&(c.framesMap[b]=d);return d};c.clearCache=function(a){var b=c.framesMap,d,f=a+"#";for(d in b)d!==a&&0!==d.indexOf(f)||delete c.framesMap[d]};c.framesMap={};return c}(jd),ef=function(a){function c(){this.isWorking=!1;this.mTime=this.count=0;c.__super.call(this);this.txt.fontSize=12}n(c,"laya.debug.view.nodeInfo.recinfos.ReCacheRecInfo",a);a=c.prototype;a.addCount=function(a){void 0===a&&(a=0);this.count++;this.mTime+=a;this.isWorking||(this.working=!0)};a.updates=function(){this._tar.displayedInStage||(this.working=!1,this.removeSelf());this.txt.text=ha.getNodeClassAndName(this._tar)+"\nreCache:"+this.count+"\ntime:"+this.mTime;0<this.count?(this.fresh(),l.timer.clear(this,this.removeSelfLater)):(this.working=!1,l.timer.once(3E3,this,this.removeSelfLater));this.mTime=this.count=0};a.removeSelfLater=function(){this.working=!1;this.removeSelf()};g(0,a,"working",null,function(a){(this.isWorking=a)?l.timer.loop(1E3,this,this.updates):l.timer.clear(this,this.updates)});c.showTime=3E3;return c}(uf),Vc=function(a){function c(){this._usedFrames=this._animationData=this._targetDic=null;c.__super.call(this);null===c._sortIndexFun&&(c._sortIndexFun=Hb.sortByKey("index",!1,!0))}n(c,"laya.display.FrameAnimation",a);var b=c.prototype;b._setUp=function(a,b){this._targetDic=a;this._animationData=b;this.interval=1E3/b.frameRate;b.parsed?(this._count=b.count,this._labels=b.labels,this._usedFrames=b.animationNewFrames):(this._usedFrames=[],this._calculateDatas(),b.parsed=!0,b.labels=this._labels,b.count=this._count,b.animationNewFrames=this._usedFrames)};b.clear=function(){a.prototype.clear.call(this);this._animationData=this._targetDic=null;return this};b._displayToIndex=function(a){if(this._animationData){0>a&&(a=0);a>this._count&&(a=this._count);var b=this._animationData.nodes,c,d=b.length;for(c=0;c<d;c++)this._displayNodeToFrame(b[c],a)}};b._displayNodeToFrame=function(a,b,c){c||(c=this._targetDic);if(c=c[a.target]){var d=a.frames,e,h,g=a.keys,l,n=g.length;for(l=0;l<n;l++)e=g[l],h=d[e],h=h.length>b?h[b]:h[h.length-1],c[e]=h;a=a.funkeys;n=a.length;if(0!=n)for(l=0;l<n;l++)e=a[l],g=d[e],void 0!==g[b]&&c[e]&&c[e].apply(c,g[b])}};b._calculateDatas=function(){if(this._animationData){var a=this._animationData.nodes,b,c=a.length,f;for(b=this._count=0;b<c;b++)f=a[b],this._calculateKeyFrames(f);this._count+=1}};b._calculateKeyFrames=function(a){var b=a.keyframes,d,f,g=a.target;a.frames||(a.frames={});a.keys?a.keys.length=0:a.keys=[];a.funkeys?a.funkeys.length=0:a.funkeys=[];a.initValues||(a.initValues={});for(d in b){var m=-1!=d.indexOf("()");f=b[d];m&&(d=d.substr(0,d.length-2));a.frames[d]||(a.frames[d]=[]);if(m){a.funkeys.push(d);for(var m=a.frames[d],l=0;l<f.length;l++){var n=f[l];m[n.index]=n.value;n.index>this._count&&(this._count=n.index)}}else this._targetDic&&this._targetDic[g]&&(a.initValues[d]=this._targetDic[g][d]),f.sort(c._sortIndexFun),a.keys.push(d),this._calculateNodePropFrames(f,a.frames[d],d,g)}};b.resetNodes=function(){if(this._targetDic&&this._animationData){var a=this._animationData.nodes,b,c=a.length,f,g;for(b=0;b<c;b++)if(f=a[b],g=f.initValues)if(f=this._targetDic[f.target])for(var m in g)f[m]=g[m]}};b._calculateNodePropFrames=function(a,b,c,f){f=a.length-1;b.length=a[f].index+1;for(c=0;c<f;c++)this._dealKeyFrame(a[c]),this._calculateFrameValues(a[c],a[c+1],b);0==f&&(b[0]=a[0].value,this._usedFrames&&(this._usedFrames[a[0].index]=!0));this._dealKeyFrame(a[c])};b._dealKeyFrame=function(a){a.label&&""!=a.label&&this.addLabel(a.label,a.index)};b._calculateFrameValues=function(a,b,c){var d,e,h=a.index,g=b.index,l=a.value,n=b.value-a.value,q=g-h,r=this._usedFrames;g>this._count&&(this._count=g);if(a.tween)for(e=Pa[a.tweenMethod],null==e&&(e=Pa.linearNone),d=h;d<g;d++)c[d]=e(d-h,l,n,q),r&&(r[d]=!0);else for(d=h;d<g;d++)c[d]=l;r&&(r[a.index]=!0,r[b.index]=!0);c[b.index]=b.value};c._sortIndexFun=null;return c}(jd),pd=function(a){function c(a,b,h,f,g){this._params2dQuick2=null;this._shaderValueHeight=this._shaderValueWidth=0;c.__super.call(this,a,b,h,f,g)}n(c,"laya.webgl.shader.d2.Shader2X",a);var b=c.prototype;b._disposeResource=function(){a.prototype._disposeResource.call(this);this._params2dQuick2=null};b.upload2dQuick2=function(a){this.upload(a,this._params2dQuick2||this._make2dQuick2())};b._make2dQuick2=function(){if(!this._params2dQuick2){this._params2dQuick2=[];for(var a=this._params,b,c=0,f=a.length;c<f;c++)b=a[c],"size"!==b.name&&this._params2dQuick2.push(b)}return this._params2dQuick2};c.create=function(a,b,h,f,g){return new c(a,b,h,f,g)};return c}(Ta),Fa=function(a){function c(a,d,e,h){this._mgrKey=0;void 0===e&&(e=0);void 0===h&&(h=0);c.__super.call(this,e,!1);this._glTextureType=3553;this._width=a;this._height=d;this._depthStencilFormat=h;this._create(a,d);this.lock=!0}n(c,"laya.webgl.resource.RenderTexture2D",a);a=c.prototype;a.getIsReady=function(){return!0};a._create=function(a,c){var b=O.instance;this._frameBuffer=b.createFramebuffer();K.bindTexture(b,this._glTextureType,this._glTexture);var d=this._getGLFormat();b.texImage2D(this._glTextureType,0,d,a,c,0,d,5121,null);this._setGPUMemory(a*c*4);b.bindFramebuffer(36160,this._frameBuffer);b.framebufferTexture2D(36160,36064,3553,this._glTexture,0);if(3!==this._depthStencilFormat)switch(this._depthStencilBuffer=b.createRenderbuffer(),b.bindRenderbuffer(36161,this._depthStencilBuffer),this._depthStencilFormat){case 0:b.renderbufferStorage(36161,33189,a,c);b.framebufferRenderbuffer(36160,36096,36161,this._depthStencilBuffer);break;case 1:b.renderbufferStorage(36161,36168,a,c);b.framebufferRenderbuffer(36160,36128,36161,this._depthStencilBuffer);break;case 2:b.renderbufferStorage(36161,34041,a,c),b.framebufferRenderbuffer(36160,33306,36161,this._depthStencilBuffer)}b.bindFramebuffer(36160,null);b.bindRenderbuffer(36161,null);this._setWarpMode(10242,this._wrapModeU);this._setWarpMode(10243,this._wrapModeV);this._setFilterMode(this._filterMode);this._setAnisotropy(this._anisoLevel);this._readyed=!0;this._activeResource()};a.generateMipmap=function(){this._isPot(this.width)&&this._isPot(this.height)?(this._mipmap=!0,O.instance.generateMipmap(this._glTextureType),this._setFilterMode(this._filterMode),this._setGPUMemory(this.width*this.height*4*(1+1/3))):(this._mipmap=!1,this._setGPUMemory(this.width*this.height*4))};a.start=function(){var a=O.instance;O.instance.bindFramebuffer(36160,this._frameBuffer);this._lastRT=c._currentActive;c._currentActive=this;this._readyed=!0;a.viewport(0,0,this._width,this._height);this._lastWidth=Q.width;this._lastHeight=Q.height;Q.width=this._width;Q.height=this._height;Ia.activeShader=null};a.end=function(){O.instance.bindFramebuffer(36160,null);c._currentActive=null;this._readyed=!0};a.restore=function(){var a=O.instance;this._lastRT!=c._currentActive&&(O.instance.bindFramebuffer(36160,this._lastRT?this._lastRT._frameBuffer:null),c._currentActive=this._lastRT);this._readyed=!0;a.viewport(0,0,this._lastWidth,this._lastHeight);Q.width=this._lastWidth;Q.height=this._lastHeight;Ia.activeShader=null};a.clear=function(a,c,e,h){void 0===a&&(a=0);void 0===c&&(c=0);void 0===e&&(e=0);void 0===h&&(h=1);var b=O.instance;b.clearColor(a,c,e,h);a=16384;switch(this._depthStencilFormat){case 33189:a|=256;break;case 36168:a|=1024;break;case 34041:a|=1280}b.clear(a)};a.getData=function(a,c,e,h){if(r.isConchApp&&2==conchConfig.threadMode)throw"native 2 thread mode use getDataAsync";var b=O.instance;b.bindFramebuffer(36160,this._frameBuffer);if(36053!==b.checkFramebufferStatus(36160))return b.bindFramebuffer(36160,null),null;var d=new Uint8Array(this._width*this._height*4),g=this._getGLFormat();b.readPixels(a,c,e,h,g,5121,d);b.bindFramebuffer(36160,null);return d};a.getDataAsync=function(a,c,e,h,f){var b=O.instance;b.bindFramebuffer(36160,this._frameBuffer);b.readPixelsAsync(a,c,e,h,6408,5121,function(a){f(new Uint8Array(a))});b.bindFramebuffer(36160,null)};a.recycle=function(){};a._disposeResource=function(){if(this._frameBuffer){var a=O.instance;a.deleteTexture(this._glTexture);a.deleteFramebuffer(this._frameBuffer);a.deleteRenderbuffer(this._depthStencilBuffer);this._depthStencilBuffer=this._frameBuffer=this._glTexture=null;this._setGPUMemory(0)}};g(0,a,"depthStencilFormat",function(){return this._depthStencilFormat});g(0,a,"defaulteTexture",function(){return ua.grayTexture});g(0,a,"sourceWidth",function(){return this._width});g(0,a,"sourceHeight",function(){return this._height});g(0,a,"offsetX",function(){return 0});g(0,a,"offsetY",function(){return 0});g(1,c,"currentActive",function(){return c._currentActive},laya.webgl.resource.BaseTexture._$SET_currentActive);c.pushRT=function(){c.rtStack.push({rt:c._currentActive,w:Q.width,h:Q.height})};c.popRT=function(){var a=O.instance,d=c.rtStack.pop();d&&(c._currentActive!=d.rt&&(O.instance.bindFramebuffer(36160,d.rt?d.rt._frameBuffer:null),c._currentActive=d.rt),a.viewport(0,0,d.w,d.h),Q.width=d.w,Q.height=d.h)};c._currentActive=null;c.rtStack=[];u(c,["defuv",function(){return this.defuv=[0,0,1,0,1,1,0,1]},"flipyuv",function(){return this.flipyuv=[0,1,1,1,1,0,0,0]}]);return c}(ld),ua=function(a){function c(a,d,e,h,f){void 0===a&&(a=0);void 0===d&&(d=0);void 0===e&&(e=1);void 0===h&&(h=!0);void 0===f&&(f=!1);c.__super.call(this,e,h);this._glTextureType=3553;this._width=a;this._height=d;this._canRead=f;this._setWarpMode(10242,this._wrapModeU);this._setWarpMode(10243,this._wrapModeV);this._setFilterMode(this._filterMode);this._setAnisotropy(this._anisoLevel);if(this._mipmap){this._mipmapCount=Math.max(Math.ceil(Math.log2(a))+1,Math.ceil(Math.log2(2))+1);for(e=0;e<this._mipmapCount;e++)this._setPixels(null,e,Math.max(a>>e,1),Math.max(d>>e,1));this._setGPUMemory(a*d*4*(1+1/3))}else this._mipmapCount=1,this._setGPUMemory(a*d*4)}n(c,"laya.webgl.resource.Texture2D",a);a=c.prototype;a._getFormatByteCount=function(){switch(this._format){case 0:return 3;case 1:return 4;case 2:return 1;default:throw"Texture2D: unknown format.";}};a._setPixels=function(a,c,e,h){var b=O.instance,d=this._glTextureType,g=this._getGLFormat();K.bindTexture(b,d,this._glTexture);0===this.format?(b.pixelStorei(3317,1),b.texImage2D(d,c,g,e,h,0,g,5121,a),b.pixelStorei(3317,4)):b.texImage2D(d,c,g,e,h,0,g,5121,a)};a._calcualatesCompressedDataSize=function(a,c,e){switch(a){case 3:case 5:return(c+3>>2)*(e+3>>2)*8;case 4:return(c+3>>2)*(e+3>>2)*16;case 11:case 12:return Math.floor((Math.max(c,8)*Math.max(e,8)*4+7)/8);case 9:case 10:return Math.floor((Math.max(c,16)*Math.max(e,8)*2+7)/8);default:return 0}};a._pharseDDS=function(a){var b=new Int32Array(a,0,31);if(542327876!=b[0])throw"Invalid magic number in DDS header";if(!(b[20]&4))throw"Unsupported format, must contain a FourCC code";var c=b[21];switch(this._format){case 3:if(827611204!==c)throw"the FourCC code is not same with texture format.";break;case 4:if(894720068!==c)throw"the FourCC code is not same with texture format.";break;default:throw"unknown texture format.";}c=1;if(b[2]&131072){if(c=Math.max(1,b[7]),!this._mipmap)throw"the mipmap is not same with Texture2D.";}else if(this._mipmap)throw"the mipmap is not same with Texture2D.";var h=b[4],f=b[3];this._width=h;this._height=f;this._upLoadCompressedTexImage2D(a,h,f,c,b[1]+4,0)};a._pharseKTX=function(a){var b=new Uint8Array(a,0,12);if(171!=b[0]||75!=b[1]||84!=b[2]||88!=b[3]||32!=b[4]||49!=b[5]||49!=b[6]||187!=b[7]||13!=b[8]||10!=b[9]||26!=b[10]||10!=b[11])throw"Invalid fileIdentifier in KTX header";b=new Int32Array(b.buffer,b.length,13);switch(b[4]){case K._compressedTextureEtc1.COMPRESSED_RGB_ETC1_WEBGL:this._format=5;break;default:throw"unknown texture format.";}var c=b[11],h=b[6],f=b[7];this._width=h;this._height=f;this._upLoadCompressedTexImage2D(a,h,f,c,64+b[12],4)};a._pharsePVR=function(a){var b=new Int32Array(a,0,13);if(55727696!=b[0])throw"Invalid magic number in PVR header";switch(b[2]){case 0:this._format=9;break;case 2:this._format=11;break;case 1:this._format=10;break;case 3:this._format=12;break;default:throw"Texture2D:unknown PVR format.";}var c=b[11],h=b[7],f=b[6];this._width=h;this._height=f;this._upLoadCompressedTexImage2D(a,h,f,c,b[12]+52,0)};a._upLoadCompressedTexImage2D=function(a,c,e,h,f,g){var b=O.instance,d=this._glTextureType;K.bindTexture(b,d,this._glTexture);for(var k=this._getGLFormat(),l=0;l<h;l++){f+=g;var n=this._calcualatesCompressedDataSize(this._format,c,e),q=new Uint8Array(a,f,n);b.compressedTexImage2D(d,l,k,c,e,0,q);c=Math.max(c>>1,1);e=Math.max(e>>1,1);f+=n}this._setGPUMemory(f);this._readyed=!0;this._activeResource()};a.loadImageSource=function(a,c){void 0===c&&(c=!1);var b=a.width,d=a.height;this._width=b;this._height=d;this._isPot(b)&&this._isPot(d)||(this._mipmap=!1);this._setWarpMode(10242,this._wrapModeU);this._setWarpMode(10243,this._wrapModeV);this._setFilterMode(this._filterMode);var f=O.instance;K.bindTexture(f,this._glTextureType,this._glTexture);var g=this._getGLFormat();r.isConchApp?(a instanceof laya.resource.HTMLCanvas||a.setPremultiplyAlpha(c),f.texImage2D(this._glTextureType,0,6408,6408,5121,a)):(c&&f.pixelStorei(37441,!0),f.texImage2D(this._glTextureType,0,g,g,5121,a),c&&f.pixelStorei(37441,!1));this._mipmap?(f.generateMipmap(this._glTextureType),this._setGPUMemory(b*d*4*(1+1/3))):this._setGPUMemory(b*d*4);this._canRead&&(r.isConchApp?this._pixels=new Uint8Array(a._nativeObj.getImageData(0,0,b,d)):(q.canvas.size(b,d),q.canvas.clear(),q.context.drawImage(a,0,0,b,d),this._pixels=new Uint8Array(q.context.getImageData(0,0,b,d).data.buffer)));this._readyed=!0;this._activeResource()};a.setPixels=function(a,c){void 0===c&&(c=0);if(!a)throw"Texture2D:pixels can't be null.";var b=Math.max(this._width>>c,1),d=Math.max(this._height>>c,1),f=b*d*this._getFormatByteCount();if(a.length<f)throw"Texture2D:pixels length should at least "+f+".";this._setPixels(a,c,b,d);this._canRead&&(this._pixels=a);this._readyed=!0;this._activeResource()};a.setSubPixels=function(a,c,e,h,f,g){void 0===g&&(g=0);if(!f)throw"Texture2D:pixels can't be null.";var b=O.instance,d=this._glTextureType;K.bindTexture(b,d,this._glTexture);var k=this._getGLFormat();0===this._format?(b.pixelStorei(3317,1),b.texSubImage2D(d,g,a,c,e,h,k,5121,f),b.pixelStorei(3317,4)):b.texSubImage2D(d,g,a,c,e,h,k,5121,f);this._readyed=!0;this._activeResource()};a.setCompressData=function(a){switch(this._format){case 3:case 4:this._pharseDDS(a);break;case 5:this._pharseKTX(a);break;case 9:case 10:case 11:case 12:this._pharsePVR(a);break;default:throw"Texture2D:unkonwn format.";}};a._recoverResource=function(){};a.getPixels=function(){if(this._canRead)return this._pixels;throw Error("Texture2D: must set texture canRead is true.");};g(0,a,"mipmapCount",function(){return this._mipmapCount});g(0,a,"defaulteTexture",function(){return laya.webgl.resource.Texture2D.grayTexture});c.__init__=function(){var a=new Uint8Array(3);a[0]=128;a[1]=128;a[2]=128;c.grayTexture=new c(1,1,0,!1,!1);c.grayTexture.setPixels(a);c.grayTexture.lock=!0};c._parse=function(a,d,e){e=e?new c(e[0],e[1],e[2],e[3],e[4]):new c(0,0);d&&(e.wrapModeU=d.wrapModeU,e.wrapModeV=d.wrapModeV,e.filterMode=d.filterMode,e.anisoLevel=d.anisoLevel);switch(e._format){case 0:case 1:e.loadImageSource(a);break;case 3:case 4:case 5:case 9:case 10:case 11:case 12:e.setCompressData(a);break;default:throw"Texture2D:unkonwn format.";}return e};c.load=function(a,c){l.loader.create(a,c,null,"TEXTURE2D")};c.grayTexture=null;return c}(ld),If=function(a){function c(){this.group=this.closeEffect=this.popupEffect=this.closeHandler=null;this.isModal=!1;this.isPopupCenter=this.isShowEffect=!0;this._effectTween=this._param=this._dragArea=this.closeType=null;c.__super.call(this);this.popupEffect=c.manager.popupEffectHandler;this.closeEffect=c.manager.closeEffectHandler;this._dealDragArea();this.on("click",this,this._onClick)}n(c,"laya.ui.Dialog",a);var b=c.prototype;b._dealDragArea=function(){var a=this.getChildByName("drag");a&&(this.dragArea=a._x+","+a._y+","+a.width+","+a.height,a.removeSelf())};b._onMouseDown=function(a){a=this.getMousePoint();this._dragArea.contains(a.x,a.y)?this.startDrag():this.stopDrag()};b._onClick=function(a){if(a=a.target)switch(a.name){case "close":case "cancel":case "sure":case "no":case "ok":case "yes":this.close(a.name)}};b.open=function(a,b){void 0===a&&(a=!0);this._dealDragArea();this._param=b;c.manager.open(this,a,this.isShowEffect);c.manager.lock(!1)};b.close=function(a){this.closeType=a;c.manager.close(this)};b.destroy=function(b){void 0===b&&(b=!0);this._dragArea=this.closeEffect=this.popupEffect=this.closeHandler=null;a.prototype.destroy.call(this,b)};b.show=function(a,b){void 0===a&&(a=!1);void 0===b&&(b=!0);this._open(!1,a,b)};b.popup=function(a,b){void 0===a&&(a=!1);void 0===b&&(b=!0);this._open(!0,a,b)};b._open=function(a,b,h){this.isModal=a;this.isShowEffect=h;c.manager.lock(!0);this.open(b)};g(0,b,"dragArea",function(){return this._dragArea?this._dragArea.toString():null},function(a){a?(a=sa.fillArray([0,0,0,0],a,Number),this._dragArea=new M(a[0],a[1],a[2],a[3]),this.on("mousedown",this,this._onMouseDown)):(this._dragArea=null,this.off("mousedown",this,this._onMouseDown))});g(0,b,"isPopup",function(){return null!=this.parent});g(0,b,"zOrder",a.prototype._$get_zOrder,function(a){l.superSet(xc,this,"zOrder",a);c.manager._checkMask()});g(1,c,"manager",function(){return c._manager=c._manager||new vf},function(a){c._manager=a});c.setLockView=function(a){c.manager.setLockView(a)};c.lock=function(a){c.manager.lock(a)};c.closeAll=function(){c.manager.closeAll()};c.getDialogsByGroup=function(a){return c.manager.getDialogsByGroup(a)};c.closeByGroup=function(a){return c.manager.closeByGroup(a)};c.CLOSE="close";c.CANCEL="cancel";c.SURE="sure";c.NO="no";c.YES="yes";c.OK="ok";c._manager=null;return c}(xc),Of=function(a){function c(a,b){this._sheet=this._indexMap=this._valueArr=null;this._direction="horizontal";this._spaceY=this._spaceX=0;this._align="left";this._wordsH=this._wordsW=0;c.__super.call(this);a&&(this.skin=a);b&&(this.sheet=b)}n(c,"laya.ui.FontClip",a);var b=c.prototype;b.createChildren=function(){this._bitmap=new nb;this.on("loaded",this,this._onClipLoaded)};b._onClipLoaded=function(){this.callLater(this.changeValue)};b.changeValue=function(){if(this._sources&&this._valueArr){this.graphics.clear(!0);var a;if(a=this._sources[0]){var b="horizontal"===this._direction;b?(this._wordsW=this._valueArr.length*(a.sourceWidth+this.spaceX),this._wordsH=a.sourceHeight):(this._wordsW=a.sourceWidth,this._wordsH=(a.sourceHeight+this.spaceY)*this._valueArr.length);var c=0;if(this._width)switch(this._align){case "center":c=.5*(this._width-this._wordsW);break;case "right":c=this._width-this._wordsW;break;default:c=0}for(var f=0,g=this._valueArr.length;f<g;f++)a=this._indexMap[this._valueArr.charAt(f)],this.sources[a]&&(a=this.sources[a],b?this.graphics.drawImage(a,c+f*(a.sourceWidth+this.spaceX),0,a.sourceWidth,a.sourceHeight):this.graphics.drawImage(a,0+c,f*(a.sourceHeight+this.spaceY),a.sourceWidth,a.sourceHeight));this._width||(this._widget.resetLayoutX(),this.callLater(this._sizeChanged));this._height||(this._widget.resetLayoutY(),this.callLater(this._sizeChanged))}}};b.measureWidth=function(){return this._wordsW};b.measureHeight=function(){return this._wordsH};b.destroy=function(b){void 0===b&&(b=!0);this._indexMap=this._valueArr=null;this.graphics.clear(!0);this.removeSelf();this.off("loaded",this,this._onClipLoaded);a.prototype.destroy.call(this,b)};g(0,b,"sheet",function(){return this._sheet},function(a){this._sheet=a+="";a=a.split(" ");this._clipX=String(a[0]).length;this.clipY=a.length;this._indexMap={};for(var b=0;b<this._clipY;b++)for(var c=a[b].split(""),d=0,g=c.length;d<g;d++)this._indexMap[c[d]]=b*this._clipX+d});g(0,b,"height",a.prototype._$get_height,function(a){l.superSet(Ob,this,"height",a);this.callLater(this.changeValue)});g(0,b,"direction",function(){return this._direction},function(a){this._direction=a;this.callLater(this.changeValue)});g(0,b,"value",function(){return this._valueArr?this._valueArr:""},function(a){this._valueArr=a+"";this.callLater(this.changeValue)});g(0,b,"width",a.prototype._$get_width,function(a){l.superSet(Ob,this,"width",a);this.callLater(this.changeValue)});g(0,b,"spaceX",function(){return this._spaceX},function(a){this._spaceX=a;"horizontal"===this._direction&&this.callLater(this.changeValue)});g(0,b,"spaceY",function(){return this._spaceY},function(a){this._spaceY=a;"horizontal"!==this._direction&&this.callLater(this.changeValue)});g(0,b,"align",function(){return this._align},function(a){this._align=a;this.callLater(this.changeValue)});return c}(Ob),md=function(a){function c(a,b){this._value=null;void 0===b&&(b="");c.__super.call(this,a,b)}n(c,"laya.ui.Radio",a);var b=c.prototype;b.destroy=function(b){void 0===b&&(b=!0);a.prototype.destroy.call(this,b);this._value=null};b.preinitialize=function(){laya.ui.UIComponent.prototype.preinitialize.call(this);this._autoSize=this.toggle=!1};b.initialize=function(){a.prototype.initialize.call(this);this.createText();this._text.align="left";this._text.valign="top";this._text.width=0;this.on("click",this,this.onClick)};b.onClick=function(a){this.selected=!0};g(0,b,"value",function(){return null!=this._value?this._value:this.label},function(a){this._value=a});return c}(Ja),nd=function(a){function c(a,b){this._items=this.selectHandler=null;this._selectedIndex=-1;this._skin=null;this._direction="horizontal";this._space=0;this._strokeColors=this._labelStrokeColor=this._labelFont=this._labelColors=this._labels=null;this._labelStroke=NaN;this._labelSize=0;this._labelBold=!1;this._labelAlign=this._labelPadding=null;this._stateNum=0;this._labelChanged=!1;c.__super.call(this);this.skin=b;this.labels=a}n(c,"laya.ui.UIGroup",a);var b=c.prototype;l.imps(b,{"laya.ui.IItem":!0});b.preinitialize=function(){this.mouseEnabled=!0};b.destroy=function(a){void 0===a&&(a=!0);laya.ui.UIComponent.prototype.destroy.call(this,a);this._items&&(this._items.length=0);this.selectHandler=this._items=null};b.addItem=function(a,b){void 0===b&&(b=!0);var c=this._items.length;a.name="item"+c;this.addChild(a);this.initItems();b&&0<c?(b=this._items[c-1],"horizontal"==this._direction?a.x=b._x+b.width+this._space:a.y=b._y+b.height+this._space):b&&(a.x=0,a.y=0);return c};b.delItem=function(a,b){void 0===b&&(b=!0);var c=this._items.indexOf(a);if(-1!=c){this.removeChild(a);for(var c=c+1,d=this._items.length;c<d;c++){var e=this._items[c];e.name="item"+(c-1);b&&("horizontal"==this._direction?e.x-=a.width+this._space:e.y-=a.height+this._space)}this.initItems();-1<this._selectedIndex&&(a=this._selectedIndex<this._items.length?this._selectedIndex:this._selectedIndex-1,this._selectedIndex=-1,this.selectedIndex=a)}};b._afterInited=function(){this.initItems()};b.initItems=function(){this._items||(this._items=[]);for(var a=this._items.length=0;1E4>a;a++){var b=this.getChildByName("item"+a);if(null==b)break;this._items.push(b);b.selected=a===this._selectedIndex;b.clickHandler=B.create(this,this.itemClick,[a],!1)}};b.itemClick=function(a){this.selectedIndex=a};b.setSelect=function(a,b){this._items&&-1<a&&a<this._items.length&&(this._items[a].selected=b)};b._skinLoaded=function(){this._setLabelChanged();this.event("loaded")};b.createItem=function(a,b){return null};b.changeLabels=function(){this._labelChanged=!1;if(this._items)for(var a=0,b=0,c=this._items.length;b<c;b++){var f=this._items[b];this._skin&&(f.skin=this._skin);this._labelColors&&(f.labelColors=this._labelColors);this._labelSize&&(f.labelSize=this._labelSize);this._labelStroke&&(f.labelStroke=this._labelStroke);this._labelStrokeColor&&(f.labelStrokeColor=this._labelStrokeColor);this._strokeColors&&(f.strokeColors=this._strokeColors);this._labelBold&&(f.labelBold=this._labelBold);this._labelPadding&&(f.labelPadding=this._labelPadding);this._labelAlign&&(f.labelAlign=this._labelAlign);this._stateNum&&(f.stateNum=this._stateNum);this._labelFont&&(f.labelFont=this._labelFont);"horizontal"===this._direction?(f.y=0,f.x=a,a+=f.width+this._space):(f.x=0,f.y=a,a+=f.height+this._space)}this._sizeChanged()};b.commitMeasure=function(){this.runCallLater(this.changeLabels)};b._setLabelChanged=function(){this._labelChanged||(this._labelChanged=!0,this.callLater(this.changeLabels))};g(0,b,"labelStrokeColor",function(){return this._labelStrokeColor},function(a){this._labelStrokeColor!=a&&(this._labelStrokeColor=a,this._setLabelChanged())});g(0,b,"skin",function(){return this._skin},function(a){this._skin!=a&&((this._skin=a)&&!x.getRes(this._skin)?l.loader.load(this._skin,B.create(this,this._skinLoaded),null,"image",1):this._skinLoaded())});g(0,b,"selectedIndex",function(){return this._selectedIndex},function(a){this._selectedIndex!=a&&(this.setSelect(this._selectedIndex,!1),this._selectedIndex=a,this.setSelect(a,!0),this.event("change"),this.selectHandler&&this.selectHandler.runWith(this._selectedIndex))});g(0,b,"labels",function(){return this._labels},function(a){if(this._labels!=a){this._labels=a;this.removeChildren();this._setLabelChanged();if(this._labels){a=this._labels.split(",");for(var b=0,c=a.length;b<c;b++){var d=this.createItem(this._skin,a[b]);d.name="item"+b;this.addChild(d)}}this.initItems()}});g(0,b,"strokeColors",function(){return this._strokeColors},function(a){this._strokeColors!=a&&(this._strokeColors=a,this._setLabelChanged())});g(0,b,"labelColors",function(){return this._labelColors},function(a){this._labelColors!=a&&(this._labelColors=a,this._setLabelChanged())});g(0,b,"labelStroke",function(){return this._labelStroke},function(a){this._labelStroke!=a&&(this._labelStroke=a,this._setLabelChanged())});g(0,b,"labelSize",function(){return this._labelSize},function(a){this._labelSize!=a&&(this._labelSize=a,this._setLabelChanged())});g(0,b,"stateNum",function(){return this._stateNum},function(a){this._stateNum!=a&&(this._stateNum=a,this._setLabelChanged())});g(0,b,"labelBold",function(){return this._labelBold},function(a){this._labelBold!=a&&(this._labelBold=a,this._setLabelChanged())});g(0,b,"labelFont",function(){return this._labelFont},function(a){this._labelFont!=a&&(this._labelFont=a,this._setLabelChanged())});g(0,b,"labelPadding",function(){return this._labelPadding},function(a){this._labelPadding!=a&&(this._labelPadding=a,this._setLabelChanged())});g(0,b,"direction",function(){return this._direction},function(a){this._direction=a;this._setLabelChanged()});g(0,b,"space",function(){return this._space},function(a){this._space=a;this._setLabelChanged()});g(0,b,"items",function(){return this._items});g(0,b,"selection",function(){return-1<this._selectedIndex&&this._selectedIndex<this._items.length?this._items[this._selectedIndex]:null},function(a){this.selectedIndex=this._items.indexOf(a)});g(0,b,"dataSource",a.prototype._$get_dataSource,function(a){this._dataSource=a;"number"==typeof a&&Math.floor(a)==a||"string"==typeof a?this.selectedIndex=parseInt(a):a instanceof Array?this.labels=a.join(","):l.superSet(Y,this,"dataSource",a)});return c}(Y),Kf=function(a){function c(){this._renderHandler=this._source=this._list=null;this._spaceLeft=10;this._spaceBottom=0;this._keepStatus=!0;c.__super.call(this);this.width=this.height=200}n(c,"laya.ui.Tree",a);var b=c.prototype;l.imps(b,{"laya.ui.IRender":!0});b.destroy=function(a){void 0===a&&(a=!0);laya.ui.UIComponent.prototype.destroy.call(this,a);this._list&&this._list.destroy(a);this._renderHandler=this._source=this._list=null};b.createChildren=function(){this.addChild(this._list=new vc);this._list.renderHandler=B.create(this,this.renderItem,null,!1);this._list.repeatX=1;this._list.on("change",this,this.onListChange)};b.onListChange=function(a){this.event("change")};b.getArray=function(){var a=[],b,c;for(c in this._source)b=this._source[c],this.getParentOpenStatus(b)&&(b.x=this._spaceLeft*this.getDepth(b),a.push(b));return a};b.getDepth=function(a,b){void 0===b&&(b=0);return null==a.nodeParent?b:this.getDepth(a.nodeParent,b+1)};b.getParentOpenStatus=function(a){a=a.nodeParent;return null==a?!0:a.isOpen?null!=a.nodeParent?this.getParentOpenStatus(a):!0:!1};b.renderItem=function(a,b){var c=a.dataSource;if(c){a.left=c.x;var d=a.getChildByName("arrow");d&&(c.hasChild?(d.visible=!0,d.index=c.isOpen?1:0,d.tag=b,d.off("click",this,this.onArrowClick),d.on("click",this,this.onArrowClick)):d.visible=!1);if(d=a.getChildByName("folder"))d.index=2==d.clipY?c.isDirectory?0:1:c.isDirectory?c.isOpen?1:0:2;this._renderHandler&&this._renderHandler.runWith([a,b])}};b.onArrowClick=function(a){a=a.currentTarget.tag;this._list.array[a].isOpen=!this._list.array[a].isOpen;this.event("open");this._list.array=this.getArray()};b.setItemState=function(a,b){this._list.array[a]&&(this._list.array[a].isOpen=b,this._list.array=this.getArray())};b.fresh=function(){this._list.array=this.getArray();this.repaint()};b.parseXml=function(a,b,c,f){var d,e=a.childNodes,h=e.length;if(!f){d={};a=a.attributes;for(var g in a){f=a[g];var l=f.nodeValue;d[f.nodeName]="true"==l?!0:"false"==l?!1:l}d.nodeParent=c;0<h&&(d.isDirectory=!0);d.hasChild=0<h;b.push(d)}for(c=0;c<h;c++)this.parseXml(e[c],b,d,!1)};b.parseOpenStatus=function(a,b){for(var c=0,d=b.length;c<d;c++){var e=b[c];if(e.isDirectory)for(var g=0,l=a.length;g<l;g++){var n=a[g];if(n.isDirectory&&this.isSameParent(n,e)&&e.label==n.label){e.isOpen=n.isOpen;break}}}};b.isSameParent=function(a,b){return null==a.nodeParent&&null==b.nodeParent?!0:null==a.nodeParent||null==b.nodeParent?!1:a.nodeParent.label==b.nodeParent.label?this.isSameParent(a.nodeParent,b.nodeParent):!1};b.filter=function(a){if(a){var b=[];this.getFilterSource(this._source,b,a);this._list.array=b}else this._list.array=this.getArray()};b.getFilterSource=function(a,b,c){c=c.toLocaleLowerCase();var d,e;for(e in a)d=a[e],!d.isDirectory&&-1<String(d.label).toLowerCase().indexOf(c)&&(d.x=0,b.push(d)),d.child&&0<d.child.length&&this.getFilterSource(d.child,b,c)};g(0,b,"spaceBottom",function(){return this._list.spaceY},function(a){this._list.spaceY=a});g(0,b,"keepStatus",function(){return this._keepStatus},function(a){this._keepStatus=a});g(0,b,"itemRender",function(){return this._list.itemRender},function(a){this._list.itemRender=a});g(0,b,"array",function(){return this._list.array},function(a){this._keepStatus&&this._list.array&&a&&this.parseOpenStatus(this._list.array,a);this._source=a;this._list.array=this.getArray()});g(0,b,"mouseHandler",function(){return this._list.mouseHandler},function(a){this._list.mouseHandler=a});g(0,b,"dataSource",a.prototype._$get_dataSource,function(a){this._dataSource=a;l.superSet(Y,this,"dataSource",a)});g(0,b,"source",function(){return this._source});g(0,b,"scrollBar",function(){return this._list.scrollBar});g(0,b,"list",function(){return this._list});g(0,b,"scrollBarSkin",function(){return this._list.vScrollBarSkin},function(a){this._list.vScrollBarSkin=a});g(0,b,"renderHandler",function(){return this._renderHandler},function(a){this._renderHandler=a});g(0,b,"selectedIndex",function(){return this._list.selectedIndex},function(a){this._list.selectedIndex=a});g(0,b,"spaceLeft",function(){return this._spaceLeft},function(a){this._spaceLeft=a});g(0,b,"selectedItem",function(){return this._list.selectedItem},function(a){this._list.selectedItem=a});g(0,b,"width",a.prototype._$get_width,function(a){l.superSet(Y,this,"width",a);this._list.width=a});g(0,b,"height",a.prototype._$get_height,function(a){l.superSet(Y,this,"height",a);this._list.height=a});g(0,b,"xml",null,function(a){var b=[];this.parseXml(a.childNodes[0],b,null,!0);this.array=b});g(0,b,"selectedPath",function(){return this._list.selectedItem?this._list.selectedItem.path:null});return c}(Y),vc=function(a){function c(){this.mouseHandler=this.renderHandler=this.selectHandler=null;this.selectEnable=!1;this.totalPage=0;this._$componentType="List";this._itemRender=this._scrollBar=this._content=null;this._spaceY=this._spaceX=this._repeatY2=this._repeatX2=this._repeatY=this._repeatX=0;this._array=null;this._startIndex=0;this._selectedIndex=-1;this._page=0;this._isVertical=!0;this._cellSize=20;this._cellOffset=0;this.cacheContent=this._isMoved=!1;this._createdLine=0;this._cellChanged=!1;this._usedCache=null;this._elasticEnabled=!1;this._preLen=0;c.__super.call(this);this._cells=[];this._offset=new P}n(c,"laya.ui.List",a);var b=c.prototype;l.imps(b,{"laya.ui.IRender":!0,"laya.ui.IItem":!0});b.destroy=function(a){void 0===a&&(a=!0);this._content&&this._content.destroy(a);this._scrollBar&&this._scrollBar.destroy(a);laya.ui.UIComponent.prototype.destroy.call(this,a);this.selectHandler=this.renderHandler=this.mouseHandler=this._array=this._cells=this._itemRender=this._scrollBar=this._content=null};b.createChildren=function(){this.addChild(this._content=new Y)};b.onScrollStart=function(){this._usedCache||(this._usedCache=l.superGet(Y,this,"cacheAs"));l.superSet(Y,this,"cacheAs","none");this._scrollBar.once("end",this,this.onScrollEnd)};b.onScrollEnd=function(){l.superSet(Y,this,"cacheAs",this._usedCache)};b._removePreScrollBar=function(){var a=this.removeChildByName("scrollBar");a&&a.destroy(!0)};b.changeCells=function(){this._cellChanged=!1;if(this._itemRender){this.scrollBar=this.getChildByName("scrollBar");var a=this._getOneCell(),b=a.width+this._spaceX||1,a=a.height+this._spaceY||1;0<this._width&&(this._repeatX2=this._isVertical?Math.round(this._width/b):Math.ceil(this._width/b));0<this._height&&(this._repeatY2=this._isVertical?Math.ceil(this._height/a):Math.round(this._height/a));var c=this._width?this._width:b*this.repeatX-this._spaceX,f=this._height?this._height:a*this.repeatY-this._spaceY;this._cellSize=this._isVertical?a:b;this._cellOffset=this._isVertical?a*Math.max(this._repeatY2,this._repeatY)-f-this._spaceY:b*Math.max(this._repeatX2,this._repeatX)-c-this._spaceX;this._isVertical&&this.vScrollBarSkin?this._scrollBar.height=f:!this._isVertical&&this.hScrollBarSkin&&(this._scrollBar.width=c);this.setContentSize(c,f);b=(this._isVertical?this.repeatY:this.repeatX)+(this._scrollBar?1:0);this._createItems(0,this._isVertical?this.repeatX:this.repeatY,b);this._createdLine=b;this._array&&(this.array=this._array,this.runCallLater(this.renderItems))}};b._getOneCell=function(){if(0===this._cells.length){var a=this.createItem();this._offset.setTo(a._x,a._y);if(this.cacheContent)return a;this._cells.push(a)}return this._cells[0]};b._createItems=function(a,b,c){var d=this._content,e=this._getOneCell(),h=e.width+this._spaceX,g=e.height+this._spaceY;if(this.cacheContent)d=new Y,d.cacheAs="normal",d.pos((this._isVertical?0:a)*h,(this._isVertical?a:0)*g),this._content.addChild(d);else{for(var l=[],e=this._cells.length-1;-1<e;e--){var n=this._cells[e];n.removeSelf();l.push(n)}this._cells.length=0}for(;a<c;a++)for(n=0;n<b;n++)e=l&&l.length?l.pop():this.createItem(),e.x=(this._isVertical?n:a)*h-d._x,e.y=(this._isVertical?a:n)*g-d._y,e.name="item"+(a*b+n),d.addChild(e),this.addCell(e)};b.createItem=function(){var a=[],b="function"==typeof this._itemRender?new this._itemRender:Mb.createComp(this._itemRender,null,null,a);if(0==a.length&&b._watchMap){var c=b._watchMap,f;for(f in c)for(var g=c[f],m=0;m<g.length;m++){var l=g[m];a.push(l.comp,l.prop,l.value)}}a.length&&(b._$bindData=a);return b};b.addCell=function(a){a.on("click",this,this.onCellMouse);a.on("rightclick",this,this.onCellMouse);a.on("mouseover",this,this.onCellMouse);a.on("mouseout",this,this.onCellMouse);a.on("mousedown",this,this.onCellMouse);a.on("mouseup",this,this.onCellMouse);this._cells.push(a)};b._afterInited=function(){this.initItems()};b.initItems=function(){if(!this._itemRender&&null!=this.getChildByName("item0")){this.repeatX=1;for(var a,b=a=0;1E4>b;b++){var c=this.getChildByName("item"+b);if(c)this.addCell(c),a++;else break}this.repeatY=a}};b.setContentSize=function(a,b){this._content.width=a;this._content.height=b;if(this._scrollBar||0!=this._offset.x||0!=this._offset.y)this._content._style.scrollRect||(this._content.scrollRect=M.create()),this._content._style.scrollRect.setTo(-this._offset.x,-this._offset.y,a,b),this._content.scrollRect=this._content.scrollRect;this.event("resize")};b.onCellMouse=function(a){"mousedown"===a.type&&(this._isMoved=!1);var b=a.currentTarget,c=this._startIndex+this._cells.indexOf(b);0>c||("click"===a.type||"rightclick"===a.type?this.selectEnable&&!this._isMoved?this.selectedIndex=c:this.changeCellState(b,!0,0):"mouseover"!==a.type&&"mouseout"!==a.type||this._selectedIndex===c||this.changeCellState(b,"mouseover"===a.type,0),this.mouseHandler&&this.mouseHandler.runWith([a,c]))};b.changeCellState=function(a,b,c){if(a=a.getChildByName("selectBox"))this.selectEnable=!0,a.visible=b,a.index=c};b._sizeChanged=function(){laya.ui.UIComponent.prototype._sizeChanged.call(this);this.setContentSize(this.width,this.height);this._scrollBar&&this.callLater(this.onScrollBarChange)};b.onScrollBarChange=function(a){this.runCallLater(this.changeCells);a=this._scrollBar.value;var b=this._isVertical?this.repeatX:this.repeatY,c=this._isVertical?this.repeatY:this.repeatX,d=Math.floor(a/this._cellSize);if(this.cacheContent)g=c+1,this._createdLine-d<g&&(this._createItems(this._createdLine,b,this._createdLine+g),this.renderItems(this._createdLine*b,0),this._createdLine+=g);else{var d=d*b,g=0;if(d>this._startIndex){var g=d-this._startIndex,m=!0,l=this._startIndex+b*(c+1);this._isMoved=!0}else d<this._startIndex&&(g=this._startIndex-d,m=!1,l=this._startIndex-1,this._isMoved=!0);for(c=0;c<g;c++){if(m){var n=this._cells.shift();this._cells[this._cells.length]=n;var q=l+c}else n=this._cells.pop(),this._cells.unshift(n),q=l-c;var r=Math.floor(q/b)*this._cellSize;this._isVertical?n.y=r:n.x=r;this.renderItem(n,q)}this._startIndex=d;this.changeSelectStatus()}m=this._content._style.scrollRect;this._isVertical?(m.y=a-this._offset.y,m.x=-this._offset.x):(m.y=-this._offset.y,m.x=a-this._offset.x);this._content.scrollRect=m};b.posCell=function(a,b){this._scrollBar&&(b=Math.floor(b/(this._isVertical?this.repeatX:this.repeatY))*this._cellSize,this._isVertical?a._y=b:a.x=b)};b.changeSelectStatus=function(){for(var a=0,b=this._cells.length;a<b;a++)this.changeCellState(this._cells[a],this._selectedIndex===this._startIndex+a,1)};b.renderItems=function(a,b){void 0===a&&(a=0);void 0===b&&(b=0);for(b=b||this._cells.length;a<b;a++)this.renderItem(this._cells[a],this._startIndex+a);this.changeSelectStatus()};b.renderItem=function(a,b){this._array&&0<=b&&b<this._array.length?(a.visible=!0,a._$bindData?(a._dataSource=this._array[b],this._bindData(a,this._array[b])):a.dataSource=this._array[b],this.cacheContent||this.posCell(a,b),this.hasListener("render")&&this.event("render",[a,b]),this.renderHandler&&this.renderHandler.runWith([a,b])):(a.visible=!1,a.dataSource=null)};b._bindData=function(a,b){a=a._$bindData;for(var c=0,d=a.length;c<d;c++){var e=a[c++],g=a[c++],l=sa.getBindFun(a[c]);e[g]=l.call(this,b)}};b.updateArray=function(a){this._array=a;var b;this._array&&(b=this._preLen-this._startIndex,0<=b&&this.renderItems(b),this._preLen=this._array.length);this._scrollBar&&(b=this._isVertical?this.repeatY:this.repeatX,a=Math.ceil(a.length/(this._isVertical?this.repeatX:this.repeatY)),a>=b&&(this._scrollBar.thumbPercent=b/a,this._scrollBar.slider._max=(a-b)*this._cellSize+this._cellOffset))};b.refresh=function(){this.array=this._array};b.getItem=function(a){return-1<a&&a<this._array.length?this._array[a]:null};b.changeItem=function(a,b){-1<a&&a<this._array.length&&(this._array[a]=b,a>=this._startIndex&&a<this._startIndex+this._cells.length&&this.renderItem(this.getCell(a),a))};b.setItem=function(a,b){this.changeItem(a,b)};b.addItem=function(a){this._array.push(a);this.array=this._array};b.addItemAt=function(a,b){this._array.splice(b,0,a);this.array=this._array};b.deleteItem=function(a){this._array.splice(a,1);this.array=this._array};b.getCell=function(a){this.runCallLater(this.changeCells);return-1<a&&this._cells?this._cells[(a-this._startIndex)%this._cells.length]:null};b.scrollTo=function(a){this._scrollBar?this._scrollBar.value=Math.floor(a/(this._isVertical?this.repeatX:this.repeatY))*this._cellSize:this.startIndex=a};b.tweenTo=function(a,b,c){void 0===b&&(b=200);this._scrollBar?(this._scrollBar.stopScroll(),ta.to(this._scrollBar,{value:Math.floor(a/(this._isVertical?this.repeatX:this.repeatY))*this._cellSize},b,null,c,0,!0)):(this.startIndex=a,c&&c.run())};b._setCellChanged=function(){this._cellChanged||(this._cellChanged=!0,this.callLater(this.changeCells))};b.commitMeasure=function(){this.runCallLater(this.changeCells)};g(0,b,"cacheAs",a.prototype._$get_cacheAs,function(a){l.superSet(Y,this,"cacheAs",a);if(this._scrollBar)if(this._usedCache=null,"none"!==a)this._scrollBar.on("start",this,this.onScrollStart);else this._scrollBar.off("start",this,this.onScrollStart)});g(0,b,"content",function(){return this._content});g(0,b,"height",a.prototype._$get_height,function(a){a!=this._height&&(l.superSet(Y,this,"height",a),this._setCellChanged())});g(0,b,"itemRender",function(){return this._itemRender},function(a){if(this._itemRender!=a){this._itemRender=a;for(a=this._cells.length-1;-1<a;a--)this._cells[a].destroy();this._cells.length=0;this._setCellChanged()}});g(0,b,"vScrollBarSkin",function(){return this._scrollBar?this._scrollBar.skin:null},function(a){this._removePreScrollBar();var b=new Sb;b.name="scrollBar";b.right=0;b.skin=a;b.elasticDistance=this._elasticEnabled?200:0;this.scrollBar=b;this.addChild(b);this._setCellChanged()});g(0,b,"page",function(){return this._page},function(a){this._page=a;this._array&&(this._page=0<a?a:0,this._page=this._page<this.totalPage?this._page:this.totalPage-1,this.startIndex=this._page*this.repeatX*this.repeatY)});g(0,b,"hScrollBarSkin",function(){return this._scrollBar?this._scrollBar.skin:null},function(a){this._removePreScrollBar();var b=new Pb;b.name="scrollBar";b.bottom=0;b.skin=a;b.elasticDistance=this._elasticEnabled?200:0;this.scrollBar=b;this.addChild(b);this._setCellChanged()});g(0,b,"repeatX",function(){return 0<this._repeatX?this._repeatX:0<this._repeatX2?this._repeatX2:1},function(a){this._repeatX=a;this._setCellChanged()});g(0,b,"scrollBar",function(){return this._scrollBar},function(a){this._scrollBar!=a&&(this._scrollBar=a)&&(this._isVertical=this._scrollBar.isVertical,this.addChild(this._scrollBar),this._scrollBar.on("change",this,this.onScrollBarChange))});g(0,b,"width",a.prototype._$get_width,function(a){a!=this._width&&(l.superSet(Y,this,"width",a),this._setCellChanged())});g(0,b,"repeatY",function(){return 0<this._repeatY?this._repeatY:0<this._repeatY2?this._repeatY2:1},function(a){this._repeatY=a;this._setCellChanged()});g(0,b,"spaceX",function(){return this._spaceX},function(a){this._spaceX=a;this._setCellChanged()});g(0,b,"spaceY",function(){return this._spaceY},function(a){this._spaceY=a;this._setCellChanged()});g(0,b,"selectedIndex",function(){return this._selectedIndex},function(a){this._selectedIndex!=a&&(this._selectedIndex=a,this.changeSelectStatus(),this.event("change"),this.selectHandler&&this.selectHandler.runWith(a),this.startIndex=this._startIndex)});g(0,b,"selectedItem",function(){return-1!=this._selectedIndex?this._array[this._selectedIndex]:null},function(a){this.selectedIndex=this._array.indexOf(a)});g(0,b,"length",function(){return this._array?this._array.length:0});g(0,b,"selection",function(){return this.getCell(this._selectedIndex)},function(a){this.selectedIndex=this._startIndex+this._cells.indexOf(a)});g(0,b,"startIndex",function(){return this._startIndex},function(a){this._startIndex=0<a?a:0;this.callLater(this.renderItems)});g(0,b,"array",function(){return this._array},function(a){this.runCallLater(this.changeCells);this._array=a||[];var b=this._preLen=this._array.length;this.totalPage=Math.ceil(b/(this.repeatX*this.repeatY));this._selectedIndex=this._selectedIndex<b?this._selectedIndex:b-1;this.startIndex=this._startIndex;this._scrollBar&&(this._scrollBar.stopScroll(),a=this._isVertical?this.repeatY:this.repeatX,b=Math.ceil(b/(this._isVertical?this.repeatX:this.repeatY)),1<(0<this._cellOffset?this.totalPage+1:this.totalPage)&&b>=a?(this._scrollBar.scrollSize=this._cellSize,this._scrollBar.thumbPercent=a/b,this._scrollBar.setScroll(0,(b-a)*this._cellSize+this._cellOffset,this._scrollBar.value)):this._scrollBar.setScroll(0,0,0),this._scrollBar.target=this._content)});g(0,b,"dataSource",a.prototype._$get_dataSource,function(a){this._dataSource=a;"number"==typeof a&&Math.floor(a)==a||"string"==typeof a?this.selectedIndex=parseInt(a):a instanceof Array?this.array=a:l.superSet(Y,this,"dataSource",a)});g(0,b,"cells",function(){this.runCallLater(this.changeCells);return this._cells});g(0,b,"elasticEnabled",function(){return this._elasticEnabled},function(a){this._elasticEnabled=a;this._scrollBar&&(this._scrollBar.elasticDistance=a?200:0)});return c}(Y),Rb=function(a){function c(a){this._skin=this._bg=null;c.__super.call(this);void 0===a&&(a="");this.text=a;this.skin=this.skin}n(c,"laya.ui.TextInput",a);var b=c.prototype;b.preinitialize=function(){this.mouseEnabled=!0};b.destroy=function(b){void 0===b&&(b=!0);a.prototype.destroy.call(this,b);this._bg&&this._bg.destroy();this._bg=null};b.createChildren=function(){this.addChild(this._tf=new ia);this._tf.padding=ra.inputLabelPadding;this._tf.on("input",this,this._onInput);this._tf.on("enter",this,this._onEnter);this._tf.on("blur",this,this._onBlur);this._tf.on("focus",this,this._onFocus)};b._onFocus=function(){this.event("focus",this)};b._onBlur=function(){this.event("blur",this)};b._onInput=function(){this.event("input",this)};b._onEnter=function(){this.event("enter",this)};b.initialize=function(){this.width=128;this.height=22};b._skinLoaded=function(){this._bg||(this.graphics=this._bg=new nb);this._bg.source=x.getRes(this._skin);this._width&&(this._bg.width=this._width);this._height&&(this._bg.height=this._height);this._sizeChanged();this.event("loaded")};b.select=function(){this._tf.select()};b.setSelection=function(a,b){this._tf.setSelection(a,b)};g(0,b,"text",a.prototype._$get_text,function(a){this._tf.text!=a&&(this._tf.text=a+"",this.event("change"))});g(0,b,"bg",function(){return this._bg},function(a){this.graphics=this._bg=a});g(0,b,"multiline",function(){return this._tf.multiline},function(a){this._tf.multiline=a});g(0,b,"skin",function(){return this._skin},function(a){this._skin!=a&&((this._skin=a)&&!x.getRes(this._skin)?l.loader.load(this._skin,B.create(this,this._skinLoaded),null,"image",1):this._skinLoaded())});g(0,b,"sizeGrid",function(){return this._bg&&this._bg.sizeGrid?this._bg.sizeGrid.join(","):null},function(a){this._bg||(this.graphics=this._bg=new nb);this._bg.sizeGrid=sa.fillArray(ra.defaultSizeGrid,a,Number)});g(0,b,"width",a.prototype._$get_width,function(a){l.superSet(Cb,this,"width",a);this._bg&&(this._bg.width=a)});g(0,b,"height",a.prototype._$get_height,function(a){l.superSet(Cb,this,"height",a);this._bg&&(this._bg.height=a)});g(0,b,"editable",function(){return this._tf.editable},function(a){this._tf.editable=a});g(0,b,"restrict",function(){return this._tf.restrict},function(a){this._tf.restrict=a});g(0,b,"prompt",function(){return this._tf.prompt},function(a){this._tf.prompt=a});g(0,b,"promptColor",function(){return this._tf.promptColor},function(a){this._tf.promptColor=a});g(0,b,"maxChars",function(){return this._tf.maxChars},function(a){this._tf.maxChars=a});g(0,b,"focus",function(){return this._tf.focus},function(a){this._tf.focus=a});g(0,b,"type",function(){return this._tf.type},function(a){this._tf.type=a});return c}(Cb),Bf=function(a){function c(a,b){void 0===b&&(b="");c.__super.call(this,a,b)}n(c,"laya.ui.CheckBox",a);var b=c.prototype;b.preinitialize=function(){laya.ui.UIComponent.prototype.preinitialize.call(this);this.toggle=!0;this._autoSize=!1};b.initialize=function(){a.prototype.initialize.call(this);this.createText();this._text.align="left";this._text.valign="top";this._text.width=0};g(0,b,"dataSource",a.prototype._$get_dataSource,function(a){this._dataSource=a;"boolean"==typeof a?this.selected=a:"string"==typeof a?this.selected="true"===a:l.superSet(Ja,this,"dataSource",a)});return c}(Ja),Ef=function(a){function c(){this._hScrollBar=this._vScrollBar=this._content=null;this._scrollChanged=!1;this._usedCache=null;this._elasticEnabled=!1;c.__super.call(this);this.width=this.height=100}n(c,"laya.ui.Panel",a);var b=c.prototype;b.destroy=function(a){void 0===a&&(a=!0);laya.ui.UIComponent.prototype.destroy.call(this,a);this._content&&this._content.destroy(a);this._vScrollBar&&this._vScrollBar.destroy(a);this._hScrollBar&&this._hScrollBar.destroy(a);this._content=this._hScrollBar=this._vScrollBar=null};b.destroyChildren=function(){this._content.destroyChildren()};b.createChildren=function(){laya.display.Node.prototype.addChild.call(this,this._content=new Y)};b.addChild=function(a){a.on("resize",this,this.onResize);this._setScrollChanged();return this._content.addChild(a)};b.rawAddChild=function(a){return laya.display.Node.prototype.addChild.call(this,a)};b.rawAddChildAt=function(a,b){return laya.display.Node.prototype.addChildAt.call(this,a,b)};b.onResize=function(){this._setScrollChanged()};b.addChildAt=function(a,b){a.on("resize",this,this.onResize);this._setScrollChanged();return this._content.addChildAt(a,b)};b.removeChild=function(a){a.off("resize",this,this.onResize);this._setScrollChanged();return this._content.removeChild(a)};b.removeChildAt=function(a){this.getChildAt(a).off("resize",this,this.onResize);this._setScrollChanged();return this._content.removeChildAt(a)};b.removeChildren=function(a,b){void 0===a&&(a=0);void 0===b&&(b=2147483647);this._content.removeChildren(a,b);this._setScrollChanged();return this};b.getChildAt=function(a){return this._content.getChildAt(a)};b.getChildByName=function(a){return this._content.getChildByName(a)};b.getChildIndex=function(a){return this._content.getChildIndex(a)};b.changeScroll=function(){this._scrollChanged=!1;var a=this.contentWidth||1,b=this.contentHeight||1,c=this._vScrollBar,f=this._hScrollBar,g=c&&b>this._height,m=f&&a>this._width,l=g?this._width-c.width:this._width,n=m?this._height-f.height:this._height;c&&(c.x=this._width-c.width,c.y=0,c.height=this._height-(m?f.height:0),c.scrollSize=Math.max(.033*this._height,1),c.thumbPercent=n/b,c.setScroll(0,b-n,c.value));f&&(f.x=0,f.y=this._height-f.height,f.width=this._width-(g?c.width:0),f.scrollSize=Math.max(.033*this._width,1),f.thumbPercent=l/a,f.setScroll(0,a-l,f.value))};b._sizeChanged=function(){laya.ui.UIComponent.prototype._sizeChanged.call(this);this.setContentSize(this._width,this._height)};b.setContentSize=function(a,b){var c=this._content;c.width=a;c.height=b;c._style.scrollRect||(c.scrollRect=M.create());c._style.scrollRect.setTo(this._hScrollBar?Math.round(this._hScrollBar.value):0,this._vScrollBar?Math.round(this._vScrollBar.value):0,a,b);c.scrollRect=c.scrollRect};b.onScrollBarChange=function(a){var b=this._content._style.scrollRect;if(b){var c=Math.round(a.value);a.isVertical?b.y=c:b.x=c;this._content.scrollRect=b}};b.scrollTo=function(a,b){void 0===a&&(a=0);void 0===b&&(b=0);this.vScrollBar&&(this.vScrollBar.value=b);this.hScrollBar&&(this.hScrollBar.value=a)};b.refresh=function(){this.changeScroll()};b.onScrollStart=function(){this._usedCache||(this._usedCache=l.superGet(Y,this,"cacheAs"));l.superSet(Y,this,"cacheAs","none");this._hScrollBar&&this._hScrollBar.once("end",this,this.onScrollEnd);this._vScrollBar&&this._vScrollBar.once("end",this,this.onScrollEnd)};b.onScrollEnd=function(){l.superSet(Y,this,"cacheAs",this._usedCache)};b._setScrollChanged=function(){this._scrollChanged||(this._scrollChanged=!0,this.callLater(this.changeScroll))};g(0,b,"numChildren",function(){return this._content.numChildren});g(0,b,"hScrollBarSkin",function(){return this._hScrollBar?this._hScrollBar.skin:null},function(a){null==this._hScrollBar&&(laya.display.Node.prototype.addChild.call(this,this._hScrollBar=new Pb),this._hScrollBar.on("change",this,this.onScrollBarChange,[this._hScrollBar]),this._hScrollBar.target=this._content,this._hScrollBar.elasticDistance=this._elasticEnabled?200:0,this._setScrollChanged());this._hScrollBar.skin=a});g(0,b,"contentWidth",function(){for(var a=0,b=this._content.numChildren-1;-1<b;b--)var c=this._content.getChildAt(b),a=Math.max(c._x+c.width*c.scaleX-c.pivotX,a);return a});g(0,b,"contentHeight",function(){for(var a=0,b=this._content.numChildren-1;-1<b;b--)var c=this._content.getChildAt(b),a=Math.max(c._y+c.height*c.scaleY-c.pivotY,a);return a});g(0,b,"width",a.prototype._$get_width,function(a){l.superSet(Y,this,"width",a);this._setScrollChanged()});g(0,b,"hScrollBar",function(){return this._hScrollBar});g(0,b,"content",function(){return this._content});g(0,b,"height",a.prototype._$get_height,function(a){l.superSet(Y,this,"height",a);this._setScrollChanged()});g(0,b,"vScrollBarSkin",function(){return this._vScrollBar?this._vScrollBar.skin:null},function(a){null==this._vScrollBar&&(laya.display.Node.prototype.addChild.call(this,this._vScrollBar=new Sb),this._vScrollBar.on("change",this,this.onScrollBarChange,[this._vScrollBar]),this._vScrollBar.target=this._content,this._vScrollBar.elasticDistance=this._elasticEnabled?200:0,this._setScrollChanged());this._vScrollBar.skin=a});g(0,b,"vScrollBar",function(){return this._vScrollBar});g(0,b,"cacheAs",a.prototype._$get_cacheAs,function(a){l.superSet(Y,this,"cacheAs",a);this._usedCache=null;"none"!==a?(this._hScrollBar&&this._hScrollBar.on("start",this,this.onScrollStart),this._vScrollBar&&this._vScrollBar.on("start",this,this.onScrollStart)):(this._hScrollBar&&this._hScrollBar.off("start",this,this.onScrollStart),this._vScrollBar&&this._vScrollBar.off("start",this,this.onScrollStart))});g(0,b,"elasticEnabled",function(){return this._elasticEnabled},function(a){this._elasticEnabled=a;this._vScrollBar&&(this._vScrollBar.elasticDistance=a?200:0);this._hScrollBar&&(this._hScrollBar.elasticDistance=a?200:0)});return c}(Y),Sb=function(a){function c(){c.__super.call(this)}n(c,"laya.ui.VScrollBar",a);return c}(wc),Pb=function(a){function c(){c.__super.call(this)}n(c,"laya.ui.HScrollBar",a);c.prototype.initialize=function(){a.prototype.initialize.call(this);this.slider.isVertical=!1};return c}(wc),Tb=function(a){function c(){this._space=0;this._align="none";this._itemChanged=!1;c.__super.call(this)}n(c,"laya.ui.LayoutBox",a);a=c.prototype;a.addChild=function(a){a.on("resize",this,this.onResize);this._setItemChanged();return laya.display.Node.prototype.addChild.call(this,a)};a.onResize=function(a){this._setItemChanged()};a.addChildAt=function(a,c){a.on("resize",this,this.onResize);this._setItemChanged();return laya.display.Node.prototype.addChildAt.call(this,a,c)};a.removeChildAt=function(a){this.getChildAt(a).off("resize",this,this.onResize);this._setItemChanged();return laya.display.Node.prototype.removeChildAt.call(this,a)};a.refresh=function(){this._setItemChanged()};a.changeItems=function(){this._itemChanged=!1};a.sortItem=function(a){a&&a.sort(function(a,b){return a.y-b.y})};a._setItemChanged=function(){this._itemChanged||(this._itemChanged=!0,this.callLater(this.changeItems))};g(0,a,"space",function(){return this._space},function(a){this._space=a;this._setItemChanged()});g(0,a,"align",function(){return this._align},function(a){this._align=a;this._setItemChanged()});return c}(Y),Af=function(a){function c(){this._oldH=this._oldW=0;c.__super.call(this)}n(c,"laya.ui.ScaleBox",a);var b=c.prototype;b.onEnable=function(){l.stage.on("resize",this,this.onResize);this.onResize()};b.onDisable=function(){l.stage.off("resize",this,this.onResize)};b.onResize=function(){if(0<this.width&&0<this.height){var a=Math.min(l.stage.width/this._oldW,l.stage.height/this._oldH);l.superSet(Y,this,"width",l.stage.width);l.superSet(Y,this,"height",l.stage.height);this.scale(a,a)}};g(0,b,"width",a.prototype._$get_width,function(a){l.superSet(Y,this,"width",a);this._oldW=a});g(0,b,"height",a.prototype._$get_height,function(a){l.superSet(Y,this,"height",a);this._oldH=a});return c}(Y),xf=function(a){function c(){this._items=null;this._selectedIndex=0;c.__super.call(this);this._setIndexHandler=B.create(this,this.setIndex,null,!1)}n(c,"laya.ui.ViewStack",a);var b=c.prototype;l.imps(b,{"laya.ui.IItem":!0});b.setItems=function(a){this.removeChildren();for(var b=0,c=0,d=a.length;c<d;c++){var g=a[c];g&&(g.name="item"+b,this.addChild(g),b++)}this.initItems()};b.addItem=function(a){a.name="item"+this._items.length;this.addChild(a);this.initItems()};b._afterInited=function(){this.initItems()};b.initItems=function(){this._items=[];for(var a=0;1E4>a;a++){var b=this.getChildByName("item"+a);if(null==b)break;this._items.push(b);b.visible=a==this._selectedIndex}};b.setSelect=function(a,b){this._items&&-1<a&&a<this._items.length&&(this._items[a].visible=b)};b.setIndex=function(a){this.selectedIndex=a};g(0,b,"dataSource",a.prototype._$get_dataSource,function(a){this._dataSource=a;if("number"==typeof a&&Math.floor(a)==a||"string"==typeof a)this.selectedIndex=parseInt(a);else for(var b in this._dataSource)this.hasOwnProperty(b)&&(this[b]=this._dataSource[b])});g(0,b,"selectedIndex",function(){return this._selectedIndex},function(a){this._selectedIndex!=a&&(this.setSelect(this._selectedIndex,!1),this._selectedIndex=a,this.setSelect(this._selectedIndex,!0))});g(0,b,"selection",function(){return-1<this._selectedIndex&&this._selectedIndex<this._items.length?this._items[this._selectedIndex]:null},function(a){this.selectedIndex=this._items.indexOf(a)});g(0,b,"items",function(){return this._items});g(0,b,"setIndexHandler",function(){return this._setIndexHandler},function(a){this._setIndexHandler=a});return c}(Y),Jf=function(a){function c(){c.__super.call(this)}n(c,"laya.ui.VSlider",a);return c}(Qb),Df=function(a){function c(a){c.__super.call(this,a);this.isVertical=!1}n(c,"laya.ui.HSlider",a);return c}(Qb),yc=function(a){function c(){this._gList=this._nodeDefaultProps=this._nodeList=this.animationDic=this.animationList=null;this._nodeIDAniDic={};this._nodeGDic=this._rootNode=null;c.__super.call(this)}var b;n(c,"laya.utils.GraphicAnimation",a);var d=c.prototype;d._parseNodeList=function(a){this._nodeList||(this._nodeList=[]);this._nodeDefaultProps[a.compId]=a.props;a.compId&&this._nodeList.push(a.compId);if(a=a.child){var b,c=a.length;for(b=0;b<c;b++)this._parseNodeList(a[b])}};d._calGraphicData=function(a){this._setUp(null,a);this._createGraphicData();if(this._nodeIDAniDic)for(var b in this._nodeIDAniDic)this._nodeIDAniDic[b]=null};d._createGraphicData=function(){var a=[],b,c=this.count,d=this._usedFrames;d||(d=[]);var g;for(b=0;b<c;b++){if(d[b]||!g)g=this._createFrameGraphic(b);a.push(g)}this._gList=a};d._createFrameGraphic=function(a){var b=new Ma;c._rootMatrix||(c._rootMatrix=new C);this._updateNodeGraphic(this._rootNode,a,c._rootMatrix,b);return b};d._updateNodeGraphic=function(a,b,c,d,g){void 0===g&&(g=1);var e;e=this._nodeGDic[a.compId]=this._getNodeGraphicData(a.compId,b,this._nodeGDic[a.compId]);e.resultTransform||(e.resultTransform=new C);var f;f=e.resultTransform;C.mul(e.transform,c,f);c=e.alpha*g;if(!(.01>c)&&(e.skin&&(g=this._getTextureByUrl(e.skin))&&(f._checkTransform()?(d.drawTexture(g,0,0,e.width,e.height,f,c),e.resultTransform=null):d.drawTexture(g,f.tx,f.ty,e.width,e.height,null,c)),a=a.child))for(g=a.length,e=0;e<g;e++)this._updateNodeGraphic(a[e],b,f,d,c)};d._updateNoChilds=function(a,b){if(a.skin){var c=this._getTextureByUrl(a.skin);if(c){var d=a.transform;d._checkTransform();d._bTransform?b.drawTexture(c,0,0,a.width,a.height,d.clone(),a.alpha):b.drawTexture(c,d.tx,d.ty,a.width,a.height,null,a.alpha)}}};d._updateNodeGraphic2=function(a,b,c){var d;d=this._nodeGDic[a.compId]=this._getNodeGraphicData(a.compId,b,this._nodeGDic[a.compId]);if(a.child){var e=d.transform;e._checkTransform();var f;f=!e._bTransform;var h;h=f&&(0!=e.tx||0!=e.ty);var g;(g=e._bTransform||1!=d.alpha)&&c.save();1!=d.alpha&&c.alpha(d.alpha);f?h&&c.translate(e.tx,e.ty):c.transform(e.clone());a=a.child;var l;d.skin&&(l=this._getTextureByUrl(d.skin))&&c.drawImage(l,0,0,d.width,d.height);if(a)for(l=a.length,d=0;d<l;d++)this._updateNodeGraphic2(a[d],b,c);g?c.restore():f?h&&c.translate(-e.tx,-e.ty):c.transform(e.clone().invert())}else this._updateNoChilds(d,c)};d._calculateKeyFrames=function(b){a.prototype._calculateKeyFrames.call(this,b);this._nodeIDAniDic[b.target]=b};d.getNodeDataByID=function(a){return this._nodeIDAniDic[a]};d._getParams=function(a,b,d,g){var e=c._temParam;e.length=b.length;var f,h=b.length;for(f=0;f<h;f++)e[f]=this._getObjVar(a,b[f][0],d,b[f][1],g);return e};d._getObjVar=function(a,b,c,d,g){return a.hasOwnProperty(b)?(d=a[b],c>=d.length&&(c=d.length-1),a[b][c]):g.hasOwnProperty(b)?g[b]:d};d._getNodeGraphicData=function(a,d,f){f||(f=new b);f.transform?f.transform.identity():f.transform=new C;var e=this.getNodeDataByID(a);if(!e)return f;a=this._getParams(e.frames,c._drawTextureCmd,d,this._nodeDefaultProps[a]);var h=a[0],g,l,n=a[5],q=a[6],r=a[13],u=a[14];d=a[7];var e=a[8],v=a[9],w=a[11],x=a[12];g=a[3];l=a[4];if(0==g||0==l)h=null;-1==g&&(g=0);-1==l&&(l=0);var B;f.skin=h;f.width=g;f.height=l;h&&((B=this._getTextureByUrl(h))?(g||(g=B.sourceWidth),l||(l=B.sourceHeight)):console.warn("lost skin:",h,",you may load pics first"));f.alpha=a[10];h=f.transform;0!=r&&(n=r*g);0!=u&&(q=u*l);0==n&&0==q||h.translate(-n,-q);g=null;if(v||1!==d||1!==e||w||x)g=c._tempMt,g.identity(),g._bTransform=!0,w=.0174532922222222*(v-w),v=.0174532922222222*(v+x),x=Math.sin(v),l=Math.sin(w),w=Math.cos(w),g.a=d*Math.cos(v),g.b=d*x,g.c=-e*l,g.d=e*w,g.tx=g.ty=0;g&&(h=C.mul(h,g,h));h.translate(a[1],a[2]);return f};d._getTextureByUrl=function(a){return x.getRes(a)};d.setAniData=function(a,b){if(a.animations){this._nodeDefaultProps={};this._nodeGDic={};this._nodeList&&(this._nodeList.length=0);this._rootNode=a;this._parseNodeList(a);var d={},e=[];a=a.animations;var h,g=a.length,l;for(h=0;h<g;h++)if(l=a[h],this._labels=null,(!b||b==l.name)&&l){try{this._calGraphicData(l)}catch(da){console.warn("parse animation fail:"+l.name+",empty animation created"),this._gList=[]}var n={};n.interval=1E3/l.frameRate;n.frames=this._gList;n.labels=this._labels;n.name=l.name;e.push(n);d[l.name]=n}this.animationList=e;this.animationDic=d}c._temParam.length=0};d.parseByData=function(a){var b,c;b=a.nodeRoot;c=a.aniO;delete a.nodeRoot;delete a.aniO;this._nodeDefaultProps={};this._nodeGDic={};this._nodeList&&(this._nodeList.length=0);this._rootNode=b;this._parseNodeList(b);this._labels=null;try{this._calGraphicData(c)}catch(k){console.warn("parse animation fail:"+c.name+",empty animation created"),this._gList=[]}a.interval=1E3/c.frameRate;a.frames=this._gList;a.labels=this._labels;a.name=c.name;return a};d.setUpAniData=function(a){if(a.animations){var b={},c=[],d=a.animations,e,g=d.length,l;for(e=0;e<g;e++)if(l=d[e]){var n={};n.name=l.name;n.aniO=l;n.nodeRoot=a;c.push(n);b[l.name]=n}this.animationList=c;this.animationDic=b}};d._clear=function(){this._nodeGDic=this._gList=this.animationDic=this.animationList=null};c.parseAnimationByData=function(a){c._I||(c._I=new c);a=c._I.parseByData(a);c._I._clear();return a};c.parseAnimationData=function(a){c._I||(c._I=new c);c._I.setUpAniData(a);a={};a.animationList=c._I.animationList;a.animationDic=c._I.animationDic;c._I._clear();return a};c._temParam=[];c._I=null;c._rootMatrix=null;u(c,["_drawTextureCmd",function(){return this._drawTextureCmd=[["skin",null],["x",0],["y",0],["width",-1],["height",-1],["pivotX",0],["pivotY",0],["scaleX",1],["scaleY",1],["rotation",0],["alpha",1],["skewX",0],["skewY",0],["anchorX",0],["anchorY",0]]},"_tempMt",function(){return this._tempMt=new C}]);c.__init$=function(){b=function(){function a(){this.resultTransform=this.transform=this.skin=null;this.height=this.width=NaN;this.alpha=1}n(a,"");return a}()};return c}(Vc),Hf=function(a){function c(){c.__super.call(this)}n(c,"laya.ui.Tab",a);c.prototype.createItem=function(a,c){return new Ja(a,c)};return c}(nd),Gf=function(a){function c(){c.__super.call(this)}n(c,"laya.ui.RadioGroup",a);c.prototype.createItem=function(a,c){return new md(a,c)};return c}(nd),yf=function(a){function c(a){this._hScrollBar=this._vScrollBar=null;void 0===a&&(a="");c.__super.call(this,a);this.on("change",this,this._onTextChange)}n(c,"laya.ui.TextArea",a);var b=c.prototype;b._onTextChange=function(){this.callLater(this.changeScroll)};b.destroy=function(b){void 0===b&&(b=!0);a.prototype.destroy.call(this,b);this._vScrollBar&&this._vScrollBar.destroy();this._hScrollBar&&this._hScrollBar.destroy();this._hScrollBar=this._vScrollBar=null};b.initialize=function(){this.width=180;this.height=150;this.multiline=this._tf.wordWrap=!0};b.onVBarChanged=function(a){this._tf.scrollY!=this._vScrollBar.value&&(this._tf.scrollY=this._vScrollBar.value)};b.onHBarChanged=function(a){this._tf.scrollX!=this._hScrollBar.value&&(this._tf.scrollX=this._hScrollBar.value)};b.changeScroll=function(){var a=this._vScrollBar&&0<this._tf.maxScrollY,b=this._hScrollBar&&0<this._tf.maxScrollX,c=a?this._width-this._vScrollBar.width:this._width,f=b?this._height-this._hScrollBar.height:this._height,g=this._tf.padding||ra.labelPadding;this._tf.width=c;this._tf.height=f;this._vScrollBar&&(this._vScrollBar.x=this._width-this._vScrollBar.width-g[2],this._vScrollBar.y=g[1],this._vScrollBar.height=this._height-(b?this._hScrollBar.height:0)-g[1]-g[3],this._vScrollBar.scrollSize=1,this._vScrollBar.thumbPercent=f/Math.max(this._tf.textHeight,f),this._vScrollBar.setScroll(1,this._tf.maxScrollY,this._tf.scrollY),this._vScrollBar.visible=a);this._hScrollBar&&(this._hScrollBar.x=g[0],this._hScrollBar.y=this._height-this._hScrollBar.height-g[3],this._hScrollBar.width=this._width-(a?this._vScrollBar.width:0)-g[0]-g[2],this._hScrollBar.scrollSize=Math.max(.033*c,1),this._hScrollBar.thumbPercent=c/Math.max(this._tf.textWidth,c),this._hScrollBar.setScroll(0,this.maxScrollX,this.scrollX),this._hScrollBar.visible=b)};b.scrollTo=function(a){this.commitMeasure();this._tf.scrollY=a};g(0,b,"scrollY",function(){return this._tf.scrollY});g(0,b,"width",a.prototype._$get_width,function(a){l.superSet(Rb,this,"width",a);this.callLater(this.changeScroll)});g(0,b,"hScrollBar",function(){return this._hScrollBar});g(0,b,"height",a.prototype._$get_height,function(a){l.superSet(Rb,this,"height",a);this.callLater(this.changeScroll)});g(0,b,"maxScrollX",function(){return this._tf.maxScrollX});g(0,b,"vScrollBarSkin",function(){return this._vScrollBar?this._vScrollBar.skin:null},function(a){null==this._vScrollBar&&(this.addChild(this._vScrollBar=new Sb),this._vScrollBar.on("change",this,this.onVBarChanged),this._vScrollBar.target=this._tf,this.callLater(this.changeScroll));this._vScrollBar.skin=a});g(0,b,"hScrollBarSkin",function(){return this._hScrollBar?this._hScrollBar.skin:null},function(a){null==this._hScrollBar&&(this.addChild(this._hScrollBar=new Pb),this._hScrollBar.on("change",this,this.onHBarChanged),this._hScrollBar.mouseWheelEnable=!1,this._hScrollBar.target=this._tf,this.callLater(this.changeScroll));this._hScrollBar.skin=a});g(0,b,"vScrollBar",function(){return this._vScrollBar});g(0,b,"maxScrollY",function(){return this._tf.maxScrollY});g(0,b,"scrollX",function(){return this._tf.scrollX});return c}(Rb),Lf=function(a){function c(){c.__super.call(this)}n(c,"laya.ui.HBox",a);var b=c.prototype;b.sortItem=function(a){a&&a.sort(function(a,b){return a.x-b.x})};b.changeItems=function(){this._itemChanged=!1;for(var a=[],b=0,c=0,f=this.numChildren;c<f;c++){var g=this.getChildAt(c);g&&(a.push(g),b=this._height?this._height:Math.max(b,g.height*g.scaleY))}this.sortItem(a);for(var l=0,c=0,f=a.length;c<f;c++)g=a[c],g.x=l,l+=g.width*g.scaleX+this._space,"top"==this._align?g.y=0:"middle"==this._align?g.y=.5*(b-g.height*g.scaleY):"bottom"==this._align&&(g.y=b-g.height*g.scaleY);this._sizeChanged()};g(0,b,"height",a.prototype._$get_height,function(a){this._height!=a&&(l.superSet(Tb,this,"height",a),this.callLater(this.changeItems))});c.NONE="none";c.TOP="top";c.MIDDLE="middle";c.BOTTOM="bottom";return c}(Tb),Mf=function(a){function c(){c.__super.call(this)}n(c,"laya.ui.VBox",a);var b=c.prototype;b.changeItems=function(){this._itemChanged=!1;for(var a=[],b=0,c=0,f=this.numChildren;c<f;c++){var g=this.getChildAt(c);g&&(a.push(g),b=this._width?this._width:Math.max(b,g.width*g.scaleX))}this.sortItem(a);for(var l=0,c=0,f=a.length;c<f;c++)g=a[c],g.y=l,l+=g.height*g.scaleY+this._space,"left"==this._align?g.x=0:"center"==this._align?g.x=.5*(b-g.width*g.scaleX):"right"==this._align&&(g.x=b-g.width*g.scaleX);this._sizeChanged()};g(0,b,"width",a.prototype._$get_width,function(a){this._width!=a&&(l.superSet(Tb,this,"width",a),this.callLater(this.changeItems))});c.NONE="none";c.LEFT="left";c.CENTER="center";c.RIGHT="right";return c}(Tb);l.__init([ka,La,kb,xc,r,Qa,qc,db,Mb,mf,yc,Za,Qe])})(window,document,Laya);