var __reflect=this&&this.__reflect||function(t,e,i){t.__class__=e,i?i.push(e):i=[e],t.__types__=t.__types__?i.concat(t.__types__):i},__extends=this&&this.__extends||function(t,e){function i(){this.constructor=t}for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n]);i.prototype=e.prototype,t.prototype=new i},CXUI=function(){function t(){}return t.prototype.init=function(t){this.stage=t.stage,t.cxCdnHost&&(CXUIConst.cdnHost=t.cxCdnHost),this.uiContainer=new CXUIContainer(t.entryIconX,t.entryIconY),this.uiContainer.visible=!1,this.stage.addChild(this.uiContainer)},t.prototype.updateConfig=function(t){this.uiContainer.updateMenuConfig(t)},t.prototype.showMenu=function(){var t=this;this.uiContainer.visible=!0,setInterval(function(){t.stage.setChildIndex(t.uiContainer,999999999)},500)},t.prototype.onClickItem=function(t){this.uiContainer.onClickMenuItem(t)},t}();__reflect(CXUI.prototype,"CXUI"),window.CXUI=CXUI;var CXUIIcon=function(t){function e(e){var i=t.call(this)||this;return i.path=e,i}return __extends(e,t),Object.defineProperty(e.prototype,"baseUrl",{get:function(){return CXUIConst.cdnHost},enumerable:!0,configurable:!0}),e.prototype.init=function(){var t=this,e=new egret.ImageLoader;e.crossOrigin="anonymous",e.once(egret.Event.COMPLETE,t.iconLoadHandler,t),e.load(this.baseUrl+this.path)},e.prototype.iconLoadHandler=function(t){var e=this,i=t.currentTarget,n=new egret.Texture;n.bitmapData=i.data,e.icon=new egret.Bitmap,e.icon.texture=n,this.icon.width=this.width,this.icon.height=this.height,e.addChild(e.icon)},e}(egret.Sprite);__reflect(CXUIIcon.prototype,"CXUIIcon");var CXUIConst=function(){function t(){}return t.scale=1.7,t.cdnHost="https://cdn.cxgame.net",t}();__reflect(CXUIConst.prototype,"CXUIConst");var CXUIContainer=function(t){function e(e,i){var n=t.call(this)||this;return n.moveEntryIcon=!1,n.spacing=10,n.entryIconAlpha=.5,n.entryIconX=0,n.entryIconY=0,n.hideMenuTimer=new egret.Timer(4e3,1),n.scale=CXUIConst.scale,n.entryIconX=e,n.entryIconY=i,n.addEventListener(egret.Event.ADDED_TO_STAGE,n.onAddToStage,n),n.hideMenuTimer.addEventListener(egret.TimerEvent.TIMER_COMPLETE,function(){this.hideMenu()},n),n}return __extends(e,t),e.prototype.onAddToStage=function(t){var e=this,i=this.stage.stageWidth,n=this.stage.stageHeight;this.width=i,this.height=n;var s=(new egret.Shape,new CXUIEntryIcon("/sdk/assets/img/%E6%9B%B4%E5%A4%9A.png"));this.entryIcon=s,s.width=50*this.scale,s.height=50*this.scale,s.x=void 0==this.entryIconX?0:this.entryIconX,s.y=void 0==this.entryIconY?.25*n:this.entryIconY,s.init(),s.alpha=this.entryIconAlpha,this.addChild(s),s.touchEnabled=!0,s.addEventListener(egret.TouchEvent.TOUCH_BEGIN,this.entryIconStartMove,this),s.addEventListener(egret.TouchEvent.TOUCH_END,this.entryIconStopMove,this),s.addEventListener(egret.TouchEvent.TOUCH_TAP,this.entryIconTap,this);var h=new CXUIMenu;this.menu=h,h.x=100,h.y=200,this.addChild(h),this.updateMenuPosition(),this.hideMenu(),this.showEntryIcon(),this.hideMenuTimer.reset(),this.hideMenuTimer.start(),this.menu.onClickItem(function(t){e.hideMenuTimer.reset(),e.hideMenuTimer.start(),e.clickMenuItemCallback&&e.clickMenuItemCallback(t)})},e.prototype.onClickMenuItem=function(t){this.clickMenuItemCallback=t},e.prototype.updateMenuPosition=function(){this.entryIcon.x>this.width/2?this.menu.x=this.entryIcon.x-this.menu.width-this.spacing:this.menu.x=this.entryIcon.x+this.entryIcon.width+this.spacing,this.menu.y=this.entryIcon.y},e.prototype.showEntryIcon=function(){this.entryIcon.alpha=1},e.prototype.hideEntryIcon=function(){this.entryIcon.alpha=this.entryIconAlpha},e.prototype.showMenu=function(){this.menu.visible=!0,this.showEntryIcon()},e.prototype.hideMenu=function(){this.menu.visible=!1,this.hideEntryIcon()},e.prototype.entryIconTap=function(){return this.hideMenuTimer.reset(),this.hideMenuTimer.start(),this.moveEntryIcon?void(this.moveEntryIcon=!1):void(this.menu.visible?this.hideMenu():this.showMenu())},e.prototype.entryIconStartMove=function(t){this.offsetX=t.stageX-this.entryIcon.x,this.offsetY=t.stageY-this.entryIcon.y,this.stage.addEventListener(egret.TouchEvent.TOUCH_MOVE,this.entryIconOnMove,this),this.showEntryIcon(),this.hideMenuTimer.stop()},e.prototype.entryIconStopMove=function(t){this.stage.removeEventListener(egret.TouchEvent.TOUCH_MOVE,this.entryIconOnMove,this),this.entryIcon.x>this.width/2?this.entryIcon.x=this.width-this.entryIcon.width:this.entryIcon.x=0,this.updateMenuPosition()},e.prototype.entryIconOnMove=function(t){var e=t.stageX-this.offsetX,i=t.stageY-this.offsetY;e>this.width&&(e=this.width),0>e&&(e=0),this.entryIcon.x=e,this.entryIcon.y=i,this.updateMenuPosition(),this.moveEntryIcon=!0},e.prototype.updateMenuConfig=function(t){this.menu&&this.menu.setConfig(t)},e}(egret.DisplayObjectContainer);__reflect(CXUIContainer.prototype,"CXUIContainer"),window.CXUIContainer=CXUIContainer;var CXUIEntryIcon=function(t){function e(e){return t.call(this,e)||this}return __extends(e,t),e.prototype.init=function(){t.prototype.init.call(this);var e=new egret.Shape;e.graphics.beginFill(15921906),e.graphics.drawCircle(this.width/2,this.height/2,this.width/2),e.graphics.endFill(),this.addChild(e)},e.prototype.createLabel=function(t){var e=new egret.TextField;return e.alpha=.8,e.size=8,e.width=this.width,e.height=10,e.y=this.height/2-e.height/2,e.text=t,e.textAlign=egret.HorizontalAlign.CENTER,e.textColor=9408399,e},e}(CXUIIcon);__reflect(CXUIEntryIcon.prototype,"CXUIEntryIcon");var CXUIMenu=function(t){function e(){var e=t.call(this)||this;return e.items=[],e.spacing=10,e.init(),e}return __extends(e,t),e.prototype.onClickItem=function(t){this.onClickItemCallback=t;for(var e in this.items){var i=this.items[e];i.touchEnabled=!0,i.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onClickItemCallback.bind(this,i.itemName),this)}},e.prototype.init=function(){this.shp=new egret.Shape,this.addChild(this.shp),this.width=this.spacing,this.height=0;var t=new CXUIMenuItem("/sdk/assets/img/%E5%85%AC%E4%BC%97%E5%8F%B7.png","公众号");this.gongZhongHaoItem=t,this.addItem(t);var e=new CXUIMenuItem("/sdk/assets/img/%E7%A4%BC%E5%8C%85.png","VIP");this.vipItem=e,this.addItem(e);var i=new CXUIMenuItem("/sdk/assets/img/%E6%9C%8D%E5%8A%A1%E8%AF%84%E4%BB%B7-%E5%AE%A2%E6%9C%8D.png","客服");this.serviceItem=i,this.addItem(i);var n=new CXUIMenuItem("/sdk/assets/img/%E6%89%8B%E6%9C%BA.png","手机");this.phoneItem=n,this.addItem(n);var s=new CXUIMenuItem("/sdk/assets/img/%E5%AE%9E%E5%90%8D.png","实名");this.realNameItem=s,this.addItem(s);var h=new CXUIMenuItem("/sdk/assets/img/%E6%89%8B%E6%B8%B8.png","升级");this.mobileGameItem=h,this.addItem(h)},e.prototype.addItem=function(t){this.items.push(t),this.addChild(t),this.updateMenu()},e.prototype.updateMenu=function(){this.width=0;var t=0;for(var e in this.items){var i=this.items[e];i&&i.visible&&(this.width+=i.width+this.spacing,i.height>this.height&&(this.height=i.height),i.x=t+this.spacing,t+=i.width+this.spacing)}this.width+=this.spacing,this.shp.graphics.clear(),this.shp.graphics.beginFill(15921906,1),this.shp.graphics.drawRect(this.height/2,0,this.width-this.height,this.height),this.shp.graphics.drawCircle(this.height/2,this.height/2,this.height/2),this.shp.graphics.drawCircle(this.width-this.height/2,this.height/2,this.height/2),this.shp.graphics.endFill()},e.prototype.setConfig=function(t){this.vipItem.visible=t.showVIP,this.gongZhongHaoItem.visible=t.showGongZhongHao,this.phoneItem.visible=t.showPhone,this.realNameItem.visible=t.showRealName,this.mobileGameItem.visible=t.showMobileGame,this.updateMenu()},e}(egret.DisplayObjectContainer);__reflect(CXUIMenu.prototype,"CXUIMenu");var CXUIMenuItem=function(t){function e(e,i){var n=t.call(this)||this;return n.scale=CXUIConst.scale,n.path=e,n.itemName=i,n.init(),n}return __extends(e,t),e.prototype.init=function(){this.width=50*this.scale,this.height=50*this.scale;var t=new CXUIIcon(this.path);t.width=30*this.scale,t.height=30*this.scale,t.anchorOffsetX=t.width/2,t.x=this.width/2,t.y=4*this.scale,t.init(),this.addChild(t);var e=new egret.TextField;e.y=35*this.scale,e.width=this.width,e.text=this.itemName,e.size=12*this.scale,e.textColor=10461087,e.textAlign=egret.HorizontalAlign.CENTER,e.verticalAlign=egret.VerticalAlign.MIDDLE,this.addChild(e)},e}(egret.Sprite);__reflect(CXUIMenuItem.prototype,"CXUIMenuItem");