function post(t){return function(t,e,i){var n=i.value,a=""+MessageMgr.msgIndex++,o=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];var i=n.call.apply(n,[this].concat(t));return MessageMgr.ins().dispatch(a,i),i};return o.bindFuncName=a,i.value=o,i}}function getDefinitionByName(t){return"string"!=typeof t?void console.log("调用getDefinitionByName的参数必须是字符串:"+t):(!window[t],egret.getDefinitionByName(t))}function getDefinitionByObj(t){var e=egret.getQualifiedClassName(t);return getDefinitionByName(e)}function callFunc(t,e,i){void 0===i&&(i=null);var n;return null!=i?i instanceof Array&&i.length?1==i.length?n=e.call(t,i[0]):2==i.length?n=e.call(t,i[0],i[1]):3==i.length?n=e.call(t,i[0],i[1],i[2]):4==i.length?n=e.call(t,i[0],i[1],i[2],i[3]):5==i.length?n=e.call(t,i[0],i[1],i[2],i[3],i[4]):6==i.length?n=e.call(t,i[0],i[1],i[2],i[3],i[4],i[5]):7==i.length?n=e.call(t,i[0],i[1],i[2],i[3],i[4],i[5],i[6]):8==i.length&&(n=e.call(t,i[0],i[1],i[2],i[3],i[4],i[5],i[6],i[7])):n=e.call(t,i):n=e.call(t),n}function logFunc(t){for(var e=Object.keys(t),i=0,n=e;i<n.length;i++){var a=n[i];"function"==typeof t[a]&&setLogFunc(!0,t,a)}}function setLogFunc(t,e,i){var n=e[i],a=function(){for(var a=[],o=0;o<arguments.length;o++)a[o]=arguments[o];var s,r=Timer.ins().getEgretTimer();s=t?n.call.apply(n,[e].concat(a)):n.apply(void 0,a);var u=Timer.ins().getEgretTimer(),h=u-r,l=(e.name||egret.getQualifiedClassName(e))+"."+i,p=funcLog[l]?parseInt(funcLog[l].split("_")[0]):0,c=funcLog[l]?parseInt(funcLog[l].split("_")[1]):0,d=p+h,g=c+1;return funcLog[l]=d+"_"+g,s};e[i]=a}function openWin(t){for(var e=[],i=1;i<arguments.length;i++)e[i-1]=arguments[i];return(n=WinMgr.ins()).open.apply(n,[t].concat(e));var n}function openWinToLayer(t,e){for(var i=[],n=2;n<arguments.length;n++)i[n-2]=arguments[n];var a=openWin.apply(void 0,[t].concat(i));return a&&a.addToParentAt(e),a}function closeEasyWin(t){for(var e=[],i=1;i<arguments.length;i++)e[i-1]=arguments[i];(n=WinMgr.ins()).closeEasy.apply(n,[t].concat(e));var n}function closeWin(t){for(var e=[],i=1;i<arguments.length;i++)e[i-1]=arguments[i];(n=WinMgr.ins()).close.apply(n,[t].concat(e));var n}function getWin(t){return WinMgr.ins().getWin(t)}function isShowWin(t){return WinMgr.ins().isShow(t)}function checkOpenWin(t){for(var e=[],i=1;i<arguments.length;i++)e[i-1]=arguments[i];return(n=WinMgr.ins()).checkOpen.apply(n,[t].concat(e));var n}function canOpenWin(t){for(var e=[],i=1;i<arguments.length;i++)e[i-1]=arguments[i];return(n=WinMgr.ins()).canOpen.apply(n,[t].concat(e));var n}function addColor(t,e){return StrUtil.addColor(t,e)}function addColorTF(t,e,i){return void 0===i&&(i=!1),StrUtil.addColorTF(t,e,i)}function getEffName(t){return ResMgr.getEffName(t)}function showtipsFail(t){TipsSys.ins().showtipsFail(t)}function showtipsSuc(t){TipsSys.ins().showtipsSuc(t)}function showTipsWarn(t){TipsSys.ins().showTipsWarn(t)}function getFormatTime(t,e,i){return void 0===i&&(i=!0),DateUtil.formatTime(1e3*t,e,i)}var __reflect=this&&this.__reflect||function(t,e,i){t.__class__=e,i?i.push(e):i=[e],t.__types__=t.__types__?i.concat(t.__types__):i},__extends=this&&this.__extends||function(t,e){function i(){this.constructor=t}for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n]);i.prototype=e.prototype,t.prototype=new i},__decorate=this&&this.__decorate||function(t,e,i,n){var a,o=arguments.length,s=3>o?e:null===n?n=Object.getOwnPropertyDescriptor(e,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(t,e,i,n);else for(var r=t.length-1;r>=0;r--)(a=t[r])&&(s=(3>o?a(s):o>3?a(e,i,s):a(e,i))||s);return o>3&&s&&Object.defineProperty(e,i,s),s},__awaiter=this&&this.__awaiter||function(t,e,i,n){return new(i||(i=Promise))(function(a,o){function s(t){try{u(n.next(t))}catch(e){o(e)}}function r(t){try{u(n["throw"](t))}catch(e){o(e)}}function u(t){t.done?a(t.value):new i(function(e){e(t.value)}).then(s,r)}u((n=n.apply(t,e||[])).next())})},__generator=this&&this.__generator||function(t,e){function i(t){return function(e){return n([t,e])}}function n(i){if(a)throw new TypeError("Generator is already executing.");for(;u;)try{if(a=1,o&&(s=o[2&i[0]?"return":i[0]?"throw":"next"])&&!(s=s.call(o,i[1])).done)return s;switch(o=0,s&&(i=[0,s.value]),i[0]){case 0:case 1:s=i;break;case 4:return u.label++,{value:i[1],done:!1};case 5:u.label++,o=i[1],i=[0];continue;case 7:i=u.ops.pop(),u.trys.pop();continue;default:if(s=u.trys,!(s=s.length>0&&s[s.length-1])&&(6===i[0]||2===i[0])){u=0;continue}if(3===i[0]&&(!s||i[1]>s[0]&&i[1]<s[3])){u.label=i[1];break}if(6===i[0]&&u.label<s[1]){u.label=s[1],s=i;break}if(s&&u.label<s[2]){u.label=s[2],u.ops.push(i);break}s[2]&&u.ops.pop(),u.trys.pop();continue}i=e.call(t,u)}catch(n){i=[6,n],o=0}finally{a=s=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}var a,o,s,r,u={label:0,sent:function(){if(1&s[0])throw s[1];return s[1]},trys:[],ops:[]};return r={next:i(0),"throw":i(1),"return":i(2)},"function"==typeof Symbol&&(r[Symbol.iterator]=function(){return this}),r},BaseEUI=function(t){function e(){var e=t.call(this)||this;return e.event=[],e}return __extends(e,t),e.prototype.setSkinName=function(){},e.prototype.open=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e]},e.prototype.close=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e]},e.prototype.addLsn=function(t,e){MessageMgr.ins().addLsn(t,e,this)},e.prototype.removeAll=function(){MessageMgr.ins().removeAll(this)},e.prototype.addClickE=function(t,e,i,n){this.addEvent(egret.TouchEvent.TOUCH_TAP,t,e,i,n)},e.prototype.addClickEndE=function(t,e){this.addEvent(egret.TouchEvent.TOUCH_END,t,e)},e.prototype.addClickBeginE=function(t,e){this.addEvent(egret.TouchEvent.TOUCH_BEGIN,t,e)},e.prototype.addChangeE=function(t,e){this.addEvent(egret.TouchEvent.CHANGE,t,e)},e.prototype.addChangingE=function(t,e){this.addEvent(egret.TouchEvent.CHANGING,t,e)},e.prototype.addItemTapE=function(t,e,i,n){this.addEvent(eui.ItemTapEvent.ITEM_TAP,t,e)},e.prototype.addLinkE=function(t,e){this.addEvent(egret.TextEvent.LINK,t,e)},e.prototype.addEvent=function(t,e,i,n,a){var o=this;if(!e)return void console.warn(egret.getQualifiedClassName(this)+"不存在绑定的显示对象，BaseView.addEvent");for(var s=!1,r=0,u=this.event;r<u.length;r++){var h=u[r];if(t==h[0]&&e==h[2]&&i==h[1]){s=!0;break}}if(!s){var l=i;t==egret.TouchEvent.TOUCH_TAP&&(l=function(t){i.call(o,t);var e;t.target&&t.target.name&&~t.target.name.indexOf("_mp3")?e=t.target.name:t.currentTarget.name&&~t.currentTarget.name.indexOf("_mp3")&&(e=t.currentTarget.name),e&&SoundUtil.play(e)}),e.addEventListener(t,l,this,n,a),this.event.push([t,i,e])}},e.prototype.setSkinPart=function(i,n){if(t.prototype.setSkinPart.call(this,i,n),n&&this.skin[i]&&this.skin[i]!=n){var a=this.skin[i].parent,o=a.getChildIndex(this.skin[i]);DisUtil.remove(this.skin[i]),a.addChildAt(n,o);for(var s=0;s<e.replaceKeys.length;s++){var r=e.replaceKeys[s];n[r]=this.skin[i][r]}this.skin[i]=n}},e.replaceKeys=["rotation","x","y","alpha","anchorOffsetX","anchorOffsetY","blendMode","bottom",,"currentState","enabled","filters","height","horizontalCenter","hostComponentKey","includeInLayout","left","mask","maxHeight","maxWidth","minHeight","minWidth","name","percentHeight","percentWidth","right","scaleY","scaleX","scrollRect","skewX","skewY","skinName","top","touchChildren","touchEnabled","verticalCenter","visible","width"],e}(eui.ItemRenderer);__reflect(BaseEUI.prototype,"BaseEUI",["IOC"]);var BaseTabEUI=function(t){function e(){var e=t.call(this)||this;return e.isAutoTabRedPoint=!1,e.redPointHead=[],e.baseSelectedIndex=-1,e.btnActRedPoint=[],e}return __extends(e,t),e.prototype.initUI=function(){this.setSkinName(),this.tab&&(this.setTabItem(),this.tab.dataProvider=new eui.ArrayCollection(this.getTabDatas()),this.tab.selectedIndex=0)},e.prototype.closeMyWin=function(){closeWin(this.baseWinClass)},e.prototype.getTabDatas=function(){for(var t=[],e=this.getShowPanelNames(),i=0,n=e;i<n.length;i++){var a=n[i],o=a.getTabTitle();o&&""!=o&&t.push(o)}return t},e.prototype.setTabItem=function(){this.tab.itemRenderer=BaseTabBtn},e.prototype.setSkinName=function(){},e.prototype.open=function(e){void 0===e&&(e=-1);for(var i=[],n=1;n<arguments.length;n++)i[n-1]=arguments[n];t.prototype.open.call(this,e),this.addLsn(AtSys.ins().patchAt,this.updateActRp),this.tab&&(this.addItemTapE(this.tab,this.onTabClicked),this.tab.selectedIndex=e,this.tab.validateNow(),this.updateActRp(),this.viewStack&&(this.viewStack.selectedIndex=e),this.onTabClicked())},e.prototype.close=function(){for(var e=[],i=0;i<arguments.length;i++)e[i]=arguments[i];if(this.viewStack)for(var n=0;n<this.viewStack.numElements;n++){var a=this.viewStack.getElementAt(n);a.close&&a.close()}if(this.tab)for(var o=this.tab.numChildren,n=0;o>n;n++){var s=this.tab.getChildAt(n).actRedPoint;s&&s.close()}for(var r in this.btnActRedPoint){var u=this.btnActRedPoint[r],s=u.display.actRedPoint;s&&s.close()}t.prototype.close.call(this)},e.prototype.setSkinPart1=function(t,e){if(e&&this[t]&&this[t]!=e){var i=this[t].parent,n=this[t].name,a=i.getChildIndex(this[t]);DisUtil.remove(this[t]),this[t]=e,this[t].name=n,i.addChildAt(e,a)}},e.prototype.setPanelSkinPart1=function(t,e){var i=new eui.Component;i.visible=!1,this[egret.getQualifiedClassName(t)+"_"+e]=i,this.viewStack.addChild(i)},e.prototype.addPanel=function(){for(var t=this.getShowPanelNames(),e=0;e<t.length;e++)this.setPanelSkinPart1(t[e],e)},e.prototype.getAotuIndex=function(t){var e;if(null!=t&&-1!=t)e=this.oldIndexToNew(t);else{var i=this.getAutoRedPointPage();if(-1!=i)e=i;else{var n=this.getFirstOpenPage();e=-1!=n?n:0}}return e},e.prototype.oldIndexToNew=function(t){var e=this.getPanelNames(),i=this.getShowPanelNames(),n=i.indexOf(e[t]);return n},e.prototype.getAutoRedPointPage=function(){for(var t=-1,e=this.getShowPanelNames().length,i=0;e>i;i++){var n=this.canOpen(i)&&this.getTabRedpoint(i);if(n){t=i;break}}return t},e.prototype.getPanel=function(t){var i=egret.getQualifiedClassName(t),n=getDefinitionByName(i),a=this.getShowPanelNames().indexOf(n);return-1==a&&console.error("BaseTabEUI.getPanel panel : "+n+" 找不到 index:"+a,0),i=i+"_"+a,this[i]instanceof e||this.setSelectedIndex(a),this[i]},e.prototype.getCurPanel=function(){return this.viewStack&&this.viewStack.selectedChild},e.prototype.getPanelNames=function(){return this.panelNames},e.prototype.getShowPanelClass=function(t){return this.getShowPanelNames()[t]},e.prototype.getTab=function(t){var e;return e="number"==typeof t?t:this.getShowPanelNames().indexOf(t),this.tab.validateNow(),this.tab.getElementAt(e)},e.getShowPanelNames=function(){for(var t=this.panelNames,e=[],i=0;i<t.length;i++){var n=t[i];n.isShow()&&e.push(n)}return e},e.getFirstOpenPage=function(){for(var t=-1,e=this.getShowPanelNames().length,i=0;e>i;i++){var n=this.getShowPanelClass(i);if(n.canOpen()){t=i;break}}return t},e.getMinZsIdPage=function(){for(var t=-1,e=Number.MAX_VALUE,i=this.panelNames,n=0;n<i.length;n++){var a=i[n].getSysId();if(-1==a){t=n;break}var o=Cfg.getConfig(LimitConfig,a),s=o.zslevel;e>s&&(e=s,t=n)}return t},e.newIndexToOld=function(t){var e=this.panelNames,i=this.getShowPanelNames(),n=e.indexOf(i[t]);return n},e.getShowPanelClass=function(t){return this.getShowPanelNames()[t]},e.prototype.getTabActRedpoint=function(t){var e=egret.getQualifiedClassName(this),i=this.getShowPanelClass(t),n=[].concat(this.redPointHead).concat(e);i&&n.push(i);var a=callFunc(AtSys.ins(),AtSys.ins().getData,n);return a},e.prototype.getTabRedpoint=function(t){var e=egret.getQualifiedClassName(this),i=this.getShowPanelClass(t),n=[].concat(this.redPointHead).concat(e);i&&n.push(i);var a=callFunc(RpSys.ins(),RpSys.ins().getData,n);return a},e.prototype.observeTabRedPoint=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];this.tab&&this.viewStack&&(this.isAutoTabRedPoint=!0,this.tab.validateNow(),this.addLsn(RpSys.ins().patchRp,this.updateTabRedPoint),this.updateTabRedPoint())},e.prototype.setRedPointHead=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];if(t){this.redPointHead.length=0;for(var i=0;i<t.length;i++){var n=t[i];this.redPointHead.push(n)}}},e.prototype.updateTabRedPoint=function(t){void 0===t&&(t=null);for(var e=0;e<this.tab.numElements;e++){var i=this.getShowPanelClass(e);(!t||t.check(i))&&this.updateTabRedPointByIndex(e)}this.updateRp(t)},e.prototype.updateTabRedPointByIndex=function(t){var e=this.tab.getElementAt(t).redPoint;e&&(e.visible=this.getTabRedpoint(t))},e.prototype.updateTabActRedPointByIndex=function(t){var e=this.tab.getElementAt(t),i=this.getTabActRedpoint(t);this.updateSingleActRp(e,i)},e.prototype.updateActRp=function(t){if(void 0===t&&(t=null),this.tab)for(var e=0;e<this.tab.numElements;e++){var i=this.getShowPanelClass(e);(!t||t.check(i))&&this.updateTabActRedPointByIndex(e)}for(var n in this.btnActRedPoint){var a=this.btnActRedPoint[n];if(null==t||t.check(a.params[a.params.length-1])){var o=callFunc(AtSys.ins(),AtSys.ins().getData,a.params);this.updateSingleActRp(a.display,o)}}},e.prototype.addDisplayActRp=function(t){for(var e=[],i=1;i<arguments.length;i++)e[i-1]=arguments[i];if(null==this.btnActRedPoint[t.hashCode]){var n=new ActRpData;n.display=t,n.params=e,this.btnActRedPoint[t.hashCode]=n}var a=this.btnActRedPoint[t.hashCode],o=callFunc(AtSys.ins(),AtSys.ins().getData,a.params);this.updateSingleActRp(a.display,o)},e.prototype.updateSingleActRp=function(t,e){if(t){var i=t.actRedPoint;if(e>0){DisUtil.remove(i);var n=new ActRedPoint;n.y=-8,n.x=-2,n.setRedValue(e),t.addChild(n),t.actRedPoint=n}else i&&(i.close(),DisUtil.remove(i))}},e.prototype.updateRp=function(t){},e.prototype.setSelectedIndex=function(t){this.tab.selectedIndex=t,this.onTabClicked()},e.prototype.onTabClicked=function(t){if(void 0===t&&(t=null),null==t||this.tab.selectedIndex!=this.baseSelectedIndex)if(this.viewStack){var i=this.viewStack.getElementAt(this.baseSelectedIndex),n=this.viewStack.getElementAt(this.tab.selectedIndex),a=this.getShowPanelClass(this.tab.selectedIndex),o=egret.getQualifiedClassName(a);if(a&&a.openCheck()){if(n&&!(n instanceof BaseEUI)){var s=getDefinitionByName(o);n=new s,this.setSkinPart1(o+"_"+this.tab.selectedIndex,n),this.isAutoTabRedPoint?this.updateTabRedPointByIndex(this.tab.selectedIndex):this.updateRp()}if(i&&i instanceof e&&i.close(),n&&n instanceof e){var r=this.getParam();callFunc(n,n.open,r),n.baseWinClass=this.baseWinClass||(this.baseWinClass=this.getThisDef()),this.imgTitle&&(null!=this.getTitle()?this.imgTitle.source=this.getTitle():null!=a.getTitle()&&(this.imgTitle.source=a.getTitle())),this.viewStack.selectedIndex=this.baseSelectedIndex=this.tab.selectedIndex,this.onTabClickChange()}}else this.viewStack.selectedIndex=this.tab.selectedIndex=this.baseSelectedIndex}else this.baseSelectedIndex=this.tab.selectedIndex,this.onTabClickChange()},e.prototype.reOpen=function(){this.onTabClicked()},e.prototype.getParam=function(){return null},e.prototype.onTabClickChange=function(){},e.openCheck=function(t){void 0===t&&(t=-1);for(var e=[],i=1;i<arguments.length;i++)e[i-1]=arguments[i];var n,a=this.getSysId();if(this.panelNames.length>0){var o=this.getOpenCheckOldIndex(t);n=-1==o?a>=0?GFunc.checkSysOpen(a):!0:o<this.panelNames.length?(s=this.panelNames[o]).openCheck.apply(s,e):!1}else n=a>=0?GFunc.checkSysOpen(a):!0;return n;var s},e.canOpen=function(t){void 0===t&&(t=-1);for(var e=[],i=1;i<arguments.length;i++)e[i-1]=arguments[i];var n,a=this.getOpenCheckOldIndex(t);if(-1==a){var o=this.getSysId();n=o>=0?GFunc.isSysOpen(o):!0}else n=(s=this.panelNames[a]).canOpen.apply(s,e);return n;var s},e.getOpenCheckOldIndex=function(t){var e;if(-1==t){var i=this.getFirstOpenPage();if(-1==i){var n=this.getMinZsIdPage();e=-1==n?-1:n}else e=this.newIndexToOld(i)}else e=t;return e},e.getSysId=function(){return-1},e.isShow=function(){var t,e=this.getSysId();if(-1==e)return!0;var i=Cfg.getConfig(LimitConfig,e);return t=0==i.isOpen||urlParam.isShenhe&&0===i.isShenHe?!1:Actor.ins().isLocation?i.isOpen>=1:i.isOpen>=2},e.getTabTitle=function(){return""},e.getTitle=function(){return null},e.getTabIndexbyPanel=function(t){var e=this.panelNames.indexOf(t);return e},e.getPanelNames=function(){return this.panelNames},e.prototype.getThisDef=function(){return getDefinitionByObj(this)},e.prototype.openCheck=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return(i=this.getThisDef()).openCheck.apply(i,t);var i},e.prototype.canOpen=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return(i=this.getThisDef()).canOpen.apply(i,t);var i},e.prototype.isShow=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return this.getThisDef().isShow()},e.prototype.getSysId=function(){return this.getThisDef().getSysId()},e.prototype.getTabTitle=function(){return this.getThisDef().getTabTitle()},e.prototype.getTitle=function(){return this.getThisDef().getTitle()},Object.defineProperty(e.prototype,"panelNames",{get:function(){return this.getThisDef().panelNames},set:function(t){this.getThisDef().panelNames=t},enumerable:!0,configurable:!0}),e.prototype.getFirstOpenPage=function(){return this.getThisDef().getFirstOpenPage()},e.prototype.getOldIndexBySysId=function(t){return this.getThisDef().getOldIndexBySysId(t)},e.prototype.getShowPanelNames=function(){return this._showPanelNames=this._showPanelNames||this.getThisDef().getShowPanelNames(),this._showPanelNames},e.panelNames=[],e}(BaseEUI);__reflect(BaseTabEUI.prototype,"BaseTabEUI",["IBaseTabEUI"]);var BaseEuiWin=function(t){function e(){var e=t.call(this)||this;return e.winType=WinType.NormalWin,e.sortIndex=0,e._destroyTime=0,e.destroyTick=0,e.isLog=!0,e.autoCloseTime=0,e.percentHeight=100,e.percentWidth=100,e.layer=LayerMgr.Main,e}return __extends(e,t),e.prototype.open=function(e){void 0===e&&(e=-1);for(var i=[],n=1;n<arguments.length;n++)i[n-1]=arguments[n];t.prototype.open.apply(this,[e].concat(i)),this.resetdestroyTick(),this.autoCloseTime>0&&Timer.ins()["do"](1e3*this.autoCloseTime,0,1,this.onAutoClose,this,TimerType.LAST)},e.prototype.close=function(){t.prototype.close.call(this),Timer.ins().removeAll(this)},e.prototype.onAutoClose=function(t){void 0===t&&(t=0),closeWin(this)},e.prototype.updateTime=function(t){void 0===t&&(t=0)},e.prototype.isShow=function(){return null!=this.stage&&this.visible},e.prototype.addToParentAt=function(t,e){void 0===e&&(e=-1);var i=t||this.layer;e>-1?i.addChildAt(this,e):i.addChild(this)},e.prototype.resetdestroyTick=function(){this.destroyTick=Timer.ins().getTimer()+DateUtil.MS_PER_SECOND*this._destroyTime},e.prototype.canDestroy=function(){return Timer.ins().getTimer()>this.destroyTick&&null==this.parent},Object.defineProperty(e.prototype,"destroyTime",{set:function(t){this._destroyTime=t,this.resetdestroyTick()},enumerable:!0,configurable:!0}),e.prototype.getWinId=function(){var t="0",e=getDefinitionByName(egret.getQualifiedClassName(this));for(var i in GConst.WinLink)GConst.WinLink[i]==e&&(t=i);return t},e}(BaseTabEUI);__reflect(BaseEuiWin.prototype,"BaseEuiWin");var BasePanel=function(t){function e(){var e=t.call(this)||this;return e.helpId=0,e}return __extends(e,t),e.prototype.open=function(e){void 0===e&&(e=-1),t.prototype.open.call(this,e)},e.prototype.close=function(){t.prototype.close.call(this),Timer.ins().removeAll(this)},e.prototype.updateTime=function(t){void 0===t&&(t=0)},e}(BaseTabEUI);__reflect(BasePanel.prototype,"BasePanel");var BaseWin=function(t){function e(){var e=t.call(this)||this;return e.clickClose=!0,e}return __extends(e,t),e.prototype.initUI=function(){t.prototype.initUI.call(this),this.colorCanvas&&(this.colorCanvas.touchEnabled=!0),(this.winType==WinType.MainWin||this.winType==WinType.OverlayWin)&&this.addBg("background_zycs_bg_jpg",null)},e.prototype.addBg=function(t,e){void 0===t&&(t="public_zycs_greybg2"),void 0===e&&(e=new egret.Rectangle(2,2,16,16)),this.backGround||(this.backGround=new eui.Image,this.backGround.source=t,this.backGround.top=this.backGround.bottom=this.backGround.left=this.backGround.right=0,this.backGround.scale9Grid=e,this.addChildAt(this.backGround,0))},e.prototype.open=function(e){void 0===e&&(e=-1);for(var i=[],n=1;n<arguments.length;n++)i[n-1]=arguments[n];t.prototype.open.call(this,e),this.addClickE(this,this.$onClick),this.mainName&&this.mainName.open()},e.prototype.$onClick=function(t){switch(t.target){case this.closeBtn:case this.closeBtn0:closeWin(this);break;case this.colorCanvas:case this.backGround:this.clickClose&&closeWin(this);break;case this.helpBtn:var e=this.getCurPanel();e&&e.helpId>0&&openWin(HelpWin,Cfg.getConfig(HelpInfoConfig,e.helpId).text)}},e.prototype.onTabClicked=function(e){if(void 0===e&&(e=null),t.prototype.onTabClicked.call(this,e),this.helpBtn){var i=this.getCurPanel();this.helpBtn.visible=i&&i.helpId>0}},e.prototype.getcloseBtn0=function(){return this.closeBtn0},e}(BaseEuiWin);__reflect(BaseWin.prototype,"BaseWin",["IOC"]);var XY=function(){function t(t,e){void 0===t&&(t=0),void 0===e&&(e=0),this.x=0,this.y=0,this.x=t,this.y=e}return t}();__reflect(XY.prototype,"XY",["IXY"]);var XYDir=function(t){function e(e,i,n){void 0===e&&(e=0),void 0===i&&(i=0),void 0===n&&(n=0);var a=t.call(this,e,i)||this;return a.dir=0,a.dir=n,a}return __extends(e,t),e}(XY);__reflect(XYDir.prototype,"XYDir",["IXYDir"]);var MapXY=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return __extends(e,t),Object.defineProperty(e.prototype,"mapX",{get:function(){return this.x},set:function(t){this.x=t},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"mapY",{get:function(){return this.y},set:function(t){this.x=t},enumerable:!0,configurable:!0}),e}(XY);__reflect(MapXY.prototype,"MapXY");var EntityXY=function(){function t(){this.x=0,this.y=0,this.dir=0,this.rate=1}return t.prototype.copy=function(t){this.x=t.x,this.y=t.y,this.dir=t.dir,this.rate=t.rate},t}();__reflect(EntityXY.prototype,"EntityXY",["IEntity","IXYDir","IXY"]);var EntityBase=function(t){function e(){var e=t.call(this)||this;return e.handle=0,e.masterHandle=0,e._dir=5,e.property=[],e}return __extends(e,t),Object.defineProperty(e.prototype,"dir",{get:function(){return this._dir},set:function(t){this._dir=t},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"rate",{get:function(){return 1},enumerable:!0,configurable:!0}),e.prototype.copy=function(t){this.x=t.x,this.y=t.y,this.dir=t.dir},e.prototype.setProps=function(t){this.property=t},e.prototype.setProp=function(t,e){this.property[t]=e>=0?e:0},e.prototype.getProp=function(t){return this.property[t]||0},e.prototype.getAttributes=function(){return this.property},e.prototype.addProp=function(t,e){this.property[t]?this.property[t]+=e:this.property[t]=e},e.prototype.reset=function(){this.x=this.y=this.handle=this.masterHandle=this.property.length=0,this.alpha=this.scaleX=this.scaleY=1,this._dir=5,this.property=[]},e.prototype.getMapX=function(t){return void 0===t&&(t=1),parseFloat((this.x/MapCellSize.size).toFixed(t))},e.prototype.getMapY=function(t){return void 0===t&&(t=1),parseFloat((this.y/MapCellSize.size).toFixed(t))},e.prototype.continuePlay=function(){},e}(eui.Component);__reflect(EntityBase.prototype,"EntityBase",["IEntity","IXYDir","IXY","IObjectPool"]);var BaseOC=function(t){function e(){return t.call(this)||this}return __extends(e,t),e.prototype.open=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e]},e.prototype.close=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e]},e}(egret.DisplayObjectContainer);__reflect(BaseOC.prototype,"BaseOC",["IOC"]);var MsgData=function(){function t(){}return t.prototype.reset=function(){this.type=null,this.param=null},t}();__reflect(MsgData.prototype,"MsgData",["IObjectPool"]),window.MsgData=MsgData;var Caller=function(){function t(t,e){void 0===t&&(t=null),void 0===e&&(e=null),this.func=t,this.obj=e}return t.prototype.isSame=function(t,e){return this.func==t&&this.obj==e},t.prototype.call=function(){return this.func?this.obj?callFunc(this.obj,this.func,this.param):this.func(this.param):void 0},t.prototype.reset=function(){this.func=null,this.obj=null,this.param=null},t}();__reflect(Caller.prototype,"Caller",["IObjectPool"]),window.Caller=Caller;var CallerRes=function(t){function e(e,i,n,a){void 0===e&&(e=null),void 0===n&&(n=null),void 0===a&&(a=3);var o=t.call(this,e,n)||this;return o.errCount=0,o.maxErrCount=3,o.funcProgress=i,o.maxErrCount=a,o}return __extends(e,t),e.prototype.callProgress=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];this.funcProgress&&(this.obj?(i=this.funcProgress).call.apply(i,[this.obj].concat(t)):this.funcProgress.apply(this,t));var i},e.prototype.addError=function(){this.errCount++},e.prototype.isErrorMax=function(){return this.errCount>=this.maxErrCount},e.prototype.reset=function(){this.funcProgress=null,this.errCount=0,this.maxErrCount=3,t.prototype.reset.call(this)},e}(Caller);__reflect(CallerRes.prototype,"CallerRes"),window.CallerRes=CallerRes;var CallerTimer=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.delay=0,e.isRepeat=!1,e.repeatCount=0,e.exeTime=0,e.isGc=!1,e}return __extends(e,t),e.prototype.call=function(){if(this.func){var t=this.param?this.param.concat().concat(this.repeatCount):[this.repeatCount];this.obj?callFunc(this.obj,this.func,t):this.func(t)}},e.prototype.reset=function(){t.prototype.reset.call(this),this.delay=0,this.repeatCount=0,this.exeTime=0,this.isRepeat=!1,this.isGc=!1},e}(Caller);__reflect(CallerTimer.prototype,"CallerTimer"),window.CallerTimer=CallerTimer;var Dic=function(){function t(){}return t}();__reflect(Dic.prototype,"Dic");var TypeValue=function(){function t(t,e){void 0===t&&(t=0),void 0===e&&(e=0),this.type=0,this.value=0,this.type=t,this.value=e}return t.mergeAttr=function(t,e,i){for(var n=[],a=0;a<t.length;a++){var o=t[a],s=new i;s.value=o.value,s.type=o.type,n.push(s)}for(var a=0;a<e.length;a++){for(var o=e[a],s=void 0,r=0;r<n.length;r++)if(n[r].type==o.type){s=n[r];break}s?s.value=s.value+o.value:(s=new i,s.type=o.type,s.value=o.value,n.push(s))}return n},t.addAttr=function(t,e){for(var i in t){var n=t[i];for(var a in e){var o=e[a];o.type==n.type&&(n.value+=o.value)}}return t},t.diffAttr=function(t,e,i){for(var n=[],a=0;a<t.length;a++){var o=new i;o.type=t[a].type,o.value=e[a].value-t[a].value,n.push(o)}return n},t.mergeAttrx=function(t,e,i){for(var n=[],a=0;a<t.length;a++){var o=t[a],s=new i;s.value=MathUtil.toFixed(o.value+o.value*(e/1e4),0),s.type=o.type,n.push(s)}return n},t.attrMultiple=function(t,e,i){for(var n=[],a=0;a<t.length;a++){var o=t[a],s=new i;s.value=MathUtil.toFixed(o.value*e,0),s.type=o.type,n.push(s)}return n},t}();__reflect(TypeValue.prototype,"TypeValue");var KeyValue=function(){function t(){this.key="",this.value=0}return t}();__reflect(KeyValue.prototype,"KeyValue");var ContainerSort=function(t){function e(){var e=t.call(this)||this;return e.sortTick=0,e}return __extends(e,t),e.prototype.sortChilds=function(t,e){void 0===e&&(e=!1),(e||t>this.sortTick)&&(this.sortTick+=500,SortUtil.insertionSort(this.$children,["y"],[SortType.up]))},e}(egret.DisplayObjectContainer);__reflect(ContainerSort.prototype,"ContainerSort",["ISortDisplayContainer"]);var DuiLieBaseData=function(){function t(){this.order=0,this.callers=[]}return t.prototype.addCall=function(t){this.callers.push(t)},t.prototype.call=function(){this.callers.length>0&&this.callers.shift().call()},t.prototype.setOrder=function(t){this.order=t},t}();__reflect(DuiLieBaseData.prototype,"DuiLieBaseData",["IDuiLieData"]);var BaseIns=function(){function t(){}return t.ins=function(){return this.getIns(t)},t.getIns=function(t){var e=t._ins||(t._ins=new t);return e},t}();__reflect(BaseIns.prototype,"BaseIns");var XunBaoBasePanel=function(t){function e(){var e=t.call(this)||this;return e.setSkinName(),e.listJiLuMy.itemRenderer=XunBaoJiLuItem,e.listJiLuMy.dataProvider=e.listJiLuMyArray=new eui.ArrayCollection,e.listJiLu.dataProvider=new eui.ArrayCollection([{labelDisplay:"全服记录"},{labelDisplay:"个人记录"}]),e.lbGaiLv.textFlow=addColorTF(StrUtil.addUnderLine(e.lbGaiLv.text)),e.mcMianFei=new MC,e.mcMianFei.x=e.buyXunBao1.width/2,e.mcMianFei.y=e.buyXunBao1.height/2,e.buyXunBao1.addChild(e.mcMianFei),e.comGunDongOtherJiLu=new ComGunDongBase,e.comGunDongOtherJiLu.width=e.groupJiLu.width,e.comGunDongOtherJiLu.height=e.groupJiLu.height,e.groupJiLu.addChild(e.comGunDongOtherJiLu),e}return __extends(e,t),e.prototype.setSkinName=function(){this.skinName=""},e.prototype.open=function(){t.prototype.open.call(this),this.xunBaoBiDeTips.name=this.xunBaoBiDeTips.y+"",this.addItemTapE(this.listJiLu,this.onListJiLuClick),this.addClickE(this.btnHelp,this.onClick),this.addClickE(this.lbGaiLv,this.onClick),this.addClickE(this.buyXunBao1,this.onClick),this.addClickE(this.buyXunBao10,this.onClick),this.addClickE(this.buyXunBao50,this.onClick),this.addLsn(RpSys.ins().patchRp,this.updateRp),this.addLsn(XunBaoSys.ins().patchXunBaoOtherJiLuUpdate,this.updateOtherJiLu),this.addLsn(XunBaoSys.ins().patchXunBaoJiLu,this.updateJiLu),this.addLsn(XunBaoSys.ins().patchXunBaoChouJiang,this.updateChouJiang),this.addLsn(BagSys.ins().patchItemChange,this.updataItem),this.addLsn(TipsSys.ins().patchSaveRemind,this.updateConsume),this.updatePanel(),this.updateRp(),this.onListJiLuClick(),this.updateState(),this.listJiLu.selectedIndex=0,this.comGunDongOtherJiLu.iniData(this.data.xunBaoJiLuOtherDatas,"XunBaoJiLuItem",6,ArrowDir.dirV),this.comGunDongOtherJiLu.open()},e.prototype.close=function(){for(var e=[],i=0;i<arguments.length;i++)e[i]=arguments[i];t.prototype.close.call(this),this.xunBaoBiDeTips.y=+this.xunBaoBiDeTips.name,egret.Tween.removeTweens(this.xunBaoBiDeTips),this.comGunDongOtherJiLu.close()},e.prototype.updateTime=function(){var t=XunBaoSys.ins().getDoubleTimer();if(t>0){((new Date).getTime()-Actor.ins().serverOpenTimer)/1e3;this.lbDoubleTimer.text=""+getFormatTime(t,"dd天hh小时mm分钟ss秒")}else this.lbDoubleTimer.text=""},e.prototype.updateState=function(){},e.prototype.updateRp=function(){},e.prototype.updateChouJiang=function(){this.updateBiDe(),this.updateBtn(),this.updateXingYun()},e.prototype.updatePanel=function(){this.updateConsume(),this.updateJiLu(),this.updateBiDe(),this.updateBtn(),this.updateXingYun()},e.prototype.updateXingYun=function(){},e.prototype.updataItem=function(t){this.updateConsume()},e.prototype.updateConsume=function(){this.updateSingleConsume(0,this.imgXunBao1,this.lbXunBao1),this.updateSingleConsume(1,this.imgXunBao10,this.lbXunBao10),this.updateSingleConsume(2,this.imgXunBao50,this.lbXunBao50)},e.prototype.updateSingleConsume=function(t,e,i){var n=this.data.equipid,a=BagSys.ins().getItemCount(n),o=Cfg.getItemCfg(n),s=Cfg.getConfig(StoreItemConfig,CondType.Equal,StoreItemConfig.itemId,this.data.equipid),r=s.price,u=ResMgr.getItemIcon(o.getIcon()),h=ResMgr.getItemIcon(Cfg.getItemCfg(CurType.yb).getIcon()),l=(this.data.costitem,this.data.costitem[t][1]),p=l>a&&this.isUseYb,c=(l-a)*r;i.text=p?""+c:a+"/"+l,e.source=p?h:u},e.prototype.updateBtn=function(){this.buyXunBao1.labelDisplay.text=this.data.isMianFei?"免费":"寻宝1次",this.data.isMianFei?this.mcMianFei.playFile(ResMgr.getEffName("button1"),-1):(this.mcMianFei.stop(),this.mcMianFei.visible=!1),this.buyXunBao10.labelDisplay.text="寻宝"+this.data.costitem[1][0]+"次",this.buyXunBao50.labelDisplay.text="寻宝"+this.data.costitem[2][0]+"次"},e.prototype.updateJiLu=function(){this.updateMyJiLu()},e.prototype.updateMyJiLu=function(){this.listJiLuMyArray.source=this.data.xunBaoJiLuMyDatas},e.prototype.updateOtherJiLu=function(t){this.comGunDongOtherJiLu.addData([t])},e.prototype.updateBiDe=function(){var t=this.data.bideItemData;this.xunBaoBiDeTips.data=t,this.xunBaoBiDeTips.visible=null!=t,egret.Tween.removeTweens(this.xunBaoBiDeTips),GFunc.move(this.xunBaoBiDeTips,new XY(this.xunBaoBiDeTips.x,this.xunBaoBiDeTips.y),new XY(this.xunBaoBiDeTips.x,this.xunBaoBiDeTips.y+24))},e.prototype.onListJiLuClick=function(t){void 0===t&&(t=null);var e=t?t.itemIndex:0,i=1==e;this.comGunDongOtherJiLu.visible=!i,this.scrollerJiLuMy.visible=i,XunBaoSys.ins().sendXunBaoJiLu(this.data.type,i?0:1)
},e.prototype.onClick=function(t){switch(t.currentTarget){case this.btnHelp:openWin(HelpWin,this.data.wanfadesc);break;case this.lbGaiLv:openWin(XunBaoGaiLvTipsWin,this.data.gailvdesc);break;case this.buyXunBao1:this.data.isMianFei?XunBaoSys.ins().sendXunBaoChouJiang(this.data.type,1):this.sendChouJiang(0);break;case this.buyXunBao10:this.sendChouJiang(1);break;case this.buyXunBao50:this.sendChouJiang(2)}},e.prototype.sendChouJiang=function(t){var e=this,i=this.data.costitem[t][1],n=new ItemDataReward;n.id=this.data.equipid,n.count=i;var a=BagSys.ins().getItemCount(this.data.equipid),o=i-a;if(GFunc.isConsumeEnough(n))XunBaoSys.ins().sendXunBaoChouJiang(this.data.type,t+1);else if(this.isUseYb){var s=Cfg.getConfig(StoreItemConfig,CondType.Equal,StoreItemConfig.itemId,this.data.equipid);GFunc.checkCurrency(CurType.yb,s.price*i)&&XunBaoSys.ins().sendXunBaoChouJiang(this.data.type,t+1,1)}else{var s=Cfg.getConfig(StoreItemConfig,CondType.Equal,StoreItemConfig.itemId,this.data.equipid);if(GFunc.checkCurrency(CurType.yb,s.price*o)){var r=new BuyData;r.setBuyFun(function(t){var i=Cfg.getConfig(StoreItemConfig,CondType.Equal,StoreItemConfig.itemId,e.data.equipid);ShopSys.ins().sendItemShopBuy([[i.index,t]])}),r.price=s.price,r.itemId=this.data.equipid,r.limitCount=0,r.count=o,r.consumeItemId=CurType.yb,r.saveKey=this.data.getPanelName(),openWin(BuyWin1,r)}}},Object.defineProperty(e.prototype,"isUseYb",{get:function(){return 1==TipsSys.ins().saveReminds[this.data.getPanelName()]},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"data",{get:function(){return XunBaoSys.ins().getXunBaoDataByType(XunbaoType.Equip)},enumerable:!0,configurable:!0}),e.getTitle=function(){return"btz_zycs_zbxb"},e.getTabTitle=function(){return"装备寻宝"},e.getSysId=function(){return 271},e.prototype.getMianFeiXunBaoBtn=function(){return this.buyXunBao1},e}(BasePanel);__reflect(XunBaoBasePanel.prototype,"XunBaoBasePanel"),window.XunBaoBasePanel=XunBaoBasePanel;var AI=function(){function t(){this.state=AIState.Stand,this.prevState=AIState.None,this.aiTime=200,this.params=new AIParam,this._isRunning=!1,this.friendType=[],this.enemyType=[]}return t.prototype.getEntity=function(){return this.entity},t.prototype.setEntity=function(t){this.entity=t},t.prototype.start=function(){this._isRunning||(this._isRunning=!0),Timer.ins()["do"](0,this.aiTime,0,this.update,this,TimerType.LAST)},t.prototype.stop=function(){this._isRunning=!1,Timer.ins().remove(this.update,this)},Object.defineProperty(t.prototype,"isRunning",{get:function(){return this._isRunning},enumerable:!0,configurable:!0}),t.prototype.Stand=function(){},t.prototype.Atk=function(){},t.prototype.Atked=function(){},t.prototype.Follow=function(){return!0},t.prototype.ReturnPatrol=function(){},t.prototype.None=function(){},t.prototype.update=function(){var t=this[AIState[this.state]];return t?t.call(this)||!1:!1},t.prototype.setAIState=function(t){if(this.state!=t){if(this.state==AIState.Die)return;this.prevState=this.state,this.state=t}},t.prototype.getAIState=function(){return this.state},t.prototype.isAIState=function(t){return this.state==t},t.prototype.updateAIAndResetNextTick=function(){return Timer.ins()["do"](this.aiTime,this.aiTime,0,this.update,this,TimerType.LAST),this.update()},t.prototype.startAttack=function(t){void 0===t&&(t=null),this.resetTargetHandle(t?t.handle:0),this.setAIState(AIState.Atk)},t.prototype.startStand=function(){this.setAIState(AIState.Stand)},t.prototype.startNone=function(){this.setAIState(AIState.None)},t.prototype.startfindNpc=function(t,e){},t.prototype.startTask=function(t,e,i,n){this.params.taskId=t,this.params.taskMaxId=e,this.params.taskValue=0,this.params.taskTotal=i,this.params.taskTager=n},t.prototype.startMoveToXY=function(t,e,i){void 0===e&&(e=-1),void 0===i&&(i=null),this.params.fbId=e,this.params.moveP.x=t.x,this.params.moveP.y=t.y,this.params.moveToXYCallback=i,this.params.movePrevAIState=this.state,this.setAIState(AIState.MoveToXY)},t.prototype.stopMoveToXy=function(){this.startNone(),this.params.fbId=-1,this.params.moveP.x=0,this.params.moveP.y=0,this.params.moveToXYCallback=null,this.params.movePrevAIState=0},t.prototype.MoveToXY=function(){},t.prototype.startPatrol=function(t,e){this.setAIState(AIState.Patrol),this.params.homeX=t?t:0,this.params.homeY=e?e:0},t.prototype.startDie=function(t,e){void 0===t&&(t=0),this.setAIState(AIState.Die),this.params.dieTime=t},t.prototype.Die=function(){},t.prototype.startAtked=function(t){this.params.targetHandle||this.resetTargetHandle(t)},t.prototype.startFollow=function(t,e){void 0===e&&(e=0),this.setAIState(AIState.Follow),this.params.followHandle=t,this.params.followMasterHandle=e},t.prototype.startAlive=function(){this.state=AIState.Stand},t.prototype.startPickItem=function(t){void 0===t&&(t=null),this.setAIState(AIState.PickItem),t&&this.params.pickItems.push(t)},t.prototype.addPickItem=function(t){this.params.pickItems.push(t)},t.prototype.PickItem=function(){},t.prototype.startCaiJi=function(t,e){void 0===e&&(e=0),this.setAIState(AIState.CaiJi),this.params.caiJihandle=t,this.params.caijiType=e},t.prototype.CaiJi=function(){},t.prototype.resetCaiji=function(){},t.prototype.startShunyi=function(t){},t.prototype.shunyi=function(){},t.prototype.resetTargetALL=function(){this.params.firstMonsterId=0,this.params.firstAtkHandle=0,this.params.firstAtkMasterHandle=0,this.resetTargetHandle()},t.prototype.resetTargetHandle=function(t){void 0===t&&(t=0),this.params.targetHandle=t},t.prototype.addAtkMonsterId=function(t){this.params.firstMonsterId!=t&&(this.params.firstMonsterId=t)},t.prototype.addAtkHandle=function(t){this.params.firstAtkHandle!=t&&(this.params.firstAtkHandle=t)},t.prototype.addAtkMasterHandle=function(t){this.params.firstAtkMasterHandle!=t&&(this.params.firstAtkMasterHandle=t)},t.prototype.addChouhen=function(t,e){if(void 0===e&&(e=0),t){for(var i=new Chouhen(t,e),n=this.params.chouhenList.length,a=0;n>a;a++)if(this.params.chouhenList[a].masterHandle==t)return void(this.params.chouhenList[a]=i);this.params.chouhenList.push(i),SortUtil.sortOn(this.params.chouhenList,["damage"],[SortType.down])}else this.params.chouhenList.length=0},t.prototype.delChouhen=function(t){for(var e=this.params.chouhenList.length,i=0;e>i;i++)if(this.params.chouhenList[i].masterHandle==t)return void this.params.chouhenList.splice(i,1)},t.prototype.getChouhenList=function(){return this.params.chouhenList},t.prototype.getChouhenHandleList=function(){for(var t=[],e=this.params.chouhenList.length,i=0;e>i;i++)this.params.chouhenList[i].masterHandle&&t.push(this.params.chouhenList[i].masterHandle);return t},t.prototype.getTaskId=function(){return this.params.taskId},t.prototype.getTaskMaxId=function(){return this.params.taskMaxId},t.prototype.getTaskValue=function(){return this.params.taskValue},t.prototype.getTaskTotal=function(){return this.params.taskTotal},t.prototype.getTaskTager=function(){return this.params.taskTager},t.prototype.isCompleteTask=function(){return this.params.taskValue>0?this.params.taskValue>=this.params.taskTotal:!1},t.prototype.isFriend=function(t){return-1!=this.friendType.indexOf(t.entityType)},t.prototype.isEnemy=function(t){return-1!=this.enemyType.indexOf(t.entityType)},t.prototype.destruct=function(){this.stop(),this.entity=null,this.params.reset()},t}();__reflect(AI.prototype,"AI");var AIState;!function(t){t[t.Stand=0]="Stand",t[t.Atk=1]="Atk",t[t.Atked=2]="Atked",t[t.Patrol=3]="Patrol",t[t.Die=4]="Die",t[t.Follow=5]="Follow",t[t.ReturnPatrol=6]="ReturnPatrol",t[t.None=7]="None",t[t.MoveToXY=8]="MoveToXY",t[t.Guaji=9]="Guaji",t[t.PickItem=10]="PickItem",t[t.CaiJi=11]="CaiJi"}(AIState||(AIState={}));var AIParam=function(){function t(){this.targetHandle=0,this.followHandle=0,this.followMasterHandle=0,this.followRadius=150,this.followDis=50,this.x=0,this.y=0,this.homeX=0,this.homeY=0,this.fbId=-1,this.moveP=new XY,this.pickItems=[],this.pickRadio=0,this.firstMonsterId=0,this.firstAtkHandle=0,this.firstAtkMasterHandle=0,this.chouhenList=[],this.aiTargetList=[],this.caiJihandle=0,this.caijiType=0,this.taskId=0,this.taskMaxId=0,this.taskValue=0,this.taskTotal=0,this.taskTager=0,this.dieTime=0}return t.prototype.setTargetList=function(t){this.aiTargetList.length=0;for(var e=0;e<t.length;e++){var i=void 0,n=t[e];switch(n){case AITargetType.targetHandle:this.aiTargetList.push(new AITargetHandle);break;case AITargetType.masterHandle:this.aiTargetList.push(new AITargetMasterHandle);break;case AITargetType.chouhen:this.aiTargetList.push(new AITargetChouhen);break;case AITargetType.targetHandle:this.aiTargetList.push(new AICurTargetHandle);break;case AITargetType.monsterId:this.aiTargetList.push(new AITargetMonsterId);break;case AITargetType.nearest:this.aiTargetList.push(new AITargetNearest);break;case AITargetType.job:this.aiTargetList.push(new AITargetJob)}i.type=n}},t.prototype.setAiTarget=function(t){for(var e=[],i=1;i<arguments.length;i++)e[i-1]=arguments[i];for(var n=0,a=this.aiTargetList;n<a.length;n++){var o=a[n];o.type==t&&o.setParam(e)}},t.prototype.getAiTarget=function(t){for(var e=0,i=this.aiTargetList;e<i.length;e++){var n=i[e];if(n.type==t)return n}},t.prototype.resetAll=function(){this.reset(),this.moveToXYCallback=null,this.moveP.x=this.moveP.y=0,this.movePrevAIState=AIState.None},t.prototype.reset=function(){this.targetHandle=0,this.followHandle=0,this.followMasterHandle=0,this.x=0,this.y=0,this.pickItems.length=0,this.firstMonsterId=0,this.firstAtkHandle=0,this.firstAtkMasterHandle=0,this.chouhenList.length=0,this.homeX=0,this.homeY=0,this.caiJihandle=0,this.taskId=0,this.taskMaxId=0,this.taskValue=0,this.taskTotal=0,this.taskTager=0,this.dieTime=0},t}();__reflect(AIParam.prototype,"AIParam");var ItemPick=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return __extends(e,t),e}(XY);__reflect(ItemPick.prototype,"ItemPick");var Chouhen=function(){function t(t,e){this.damage=0,this.masterHandle=0,this.masterHandle=t,this.damage=e}return t}();__reflect(Chouhen.prototype,"Chouhen");var ChatDataBase=function(){function t(){this.type=0,this.subType=0,this.roleId=0,this.roleName="",this.job=0,this.sex=0,this.vipLevel=0,this.svipLevel=0,this.pointId=0,this.content="",this.timer=0,this.office=0,this.fbId=0,this.guanId=0,this.assistType=0,this.frameId=1,this.headFrameId=1}return t.prototype.setContent=function(t){this.content=t,this.timer=Actor.ins().serverTime},t.prototype.parserMessage=function(t){this.type=t.readByte(),this.roleId=t.readUnsignedInt(),this.roleName=t.readString(),this.job=t.readByte(),this.sex=t.readByte(),this.vipLevel=t.readByte(),this.svipLevel=t.readByte(),this.pointId=t.readUnsignedInt(),this.content=t.readString(),this.timer=DateUtil.formatMiniDateTime(t.readInt()),this.frameId=t.readShort(),this.headFrameId=t.readShort()},t.getTitle=function(){return""},t.prototype.getHtmlTitle=function(){return[]},t.prototype.getChannel=function(){return ChatFactory.channels[this.type]||""},t.prototype.getHtmlContent=function(){return[]},t.prototype.getVipContent=function(){var t="";return this.svipLevel>0?t=StrUtil.addColor("[SVIP"+this.svipLevel+"]",16738104):this.vipLevel>0&&(t=StrUtil.addColor("[VIP"+this.vipLevel+"]",16738104)),t},t.prototype.getRoleName=function(){return StrUtil.addColor(this.roleName,16769402)},t.prototype.getContent=function(){return this.isRole()?StrUtil.addColor(this.content,3821938):StrUtil.addColor(this.content,16777215)},t.prototype.getBaseContent=function(){var t="";return this.isRole()&&(t=StrUtil.addColor(this.roleName+"：",16769402)),t+=StrUtil.addColor(this.content,16777215)},t.prototype.getSexIcon=function(){return this.roleId?0==this.sex?"chat_m":"chat_w":""},t.prototype.getHeadIcon=function(){return this.isRole()?ResMgr.getHeadIcon(this.sex):""},t.prototype.isRole=function(){return!!this.roleId},t}();__reflect(ChatDataBase.prototype,"ChatDataBase");var BaseItemRender=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return __extends(e,t),e}(BaseEUI);__reflect(BaseItemRender.prototype,"BaseItemRender");var WxYqhlInvitePanel=function(t){function e(){var e=t.call(this)||this;return e.wxTaskGroup=WxTaskGroup.yq,e.setSkinName(),e.list.itemRenderer=WxYqhlInviteItem,e.list.dataProvider=e.listData=new eui.ArrayCollection,e}return __extends(e,t),e.prototype.setSkinName=function(){this.skinName="WxYqhlInvitePanelEUI"},e.prototype.open=function(){t.prototype.open.call(this),this.addClickE(this.btnSend,this.onClick),this.addLsn(WxYqhlSys.ins().patchTaskInfo,this.updatePanel),this.addLsn(WxYqhlSys.ins().patchTaskUp,this.updatePanel),this.addLsn(WxYqhlSys.ins().patchTaskGroup,this.updatePanel),this.addLsn(WxYqhlSys.ins().patchShareSuccess,this.updatePanel),this.updatePanel()},e.prototype.updatePanel=function(){var t=Cfg.getConfig(WeChatConstConfig).maxShareCount,e="每天前"+addColor(t,5570465)+"次分享有效";e+=addColor("（"+WxYqhlSys.ins().shareCount+"/"+t+"）",5570465),this.lbDec.textFlow=addColorTF(e);var i=WxYqhlSys.ins().getTaskDatasByGroup(this.wxTaskGroup).concat();SortUtil.sortOn(i,["sortState"],[SortType.up]),this.listData.source=i},e.prototype.onClick=function(t){console.log("点分分享"),WxYqhlSys.ins().sendShareSuccess()},e.getTitle=function(){return"btz_zycs_yqhl"},e.getTabTitle=function(){return"yqhl_zycs_mryq"},e}(BasePanel);__reflect(WxYqhlInvitePanel.prototype,"WxYqhlInvitePanel"),window.WxYqhlInvitePanel=WxYqhlInvitePanel;var XunBaoEquipPanel=function(t){function e(){var e=t.call(this)||this;return e.items=[],e.setSkinPart("xunBaoBiDeTips",new XunBaoBiDeTips),e.lbGuangGao.source="xb_zycs_zbmsz",e.setSkinPart("item0",new XunBaoEquipPanelItem),e.setSkinPart("item1",new XunBaoEquipPanelItem),e.setSkinPart("item2",new XunBaoEquipPanelItem),e.setSkinPart("item3",new XunBaoEquipPanelItem),e.setSkinPart("item4",new XunBaoEquipPanelItem),e.setSkinPart("item5",new XunBaoEquipPanelItem1),e.setSkinPart("item6",new XunBaoEquipPanelItem2),e.setSkinPart("item7",new XunBaoEquipPanelItem2),e.setSkinPart("item8",new XunBaoEquipPanelItem1),e.setSkinPart("item9",new XunBaoEquipPanelItem),e.setSkinPart("item10",new XunBaoEquipPanelItem),e.setSkinPart("item11",new XunBaoEquipPanelItem),e.setSkinPart("item12",new XunBaoEquipPanelItem),e.setSkinPart("item13",new XunBaoEquipPanelItem),e.items=[e.item0,e.item1,e.item2,e.item3,e.item4,e.item5,e.item6,e.item7,e.item8,e.item9,e.item10,e.item11,e.item12,e.item13],e.lbGuangGao.source="xb_zycs_zbmsz",e.imgTitle.source="xb_zycs_zbxb",e}return __extends(e,t),e.prototype.setSkinName=function(){this.skinName="XunBaoEquipPanelEUI"},e.prototype.open=function(){t.prototype.open.call(this)},e.prototype.updateRp=function(){},e.prototype.updateChouJiang=function(){t.prototype.updateChouJiang.call(this)},e.prototype.updatePanel=function(){t.prototype.updatePanel.call(this);for(var e=this.data.showItemDatas,i=0;i<this.items.length;i++){var n=this.items[i],a=e[i];n&&a&&(n.data=a)}},e.prototype.updateXingYun=function(){this.progressExp.maximum=this.data.maxXingYun,this.progressExp.value=this.data.xingyun},e.prototype.updateState=function(){var t=ActSys.ins().getActDataByIds(Cfg.getConfig(XunbaoConstConfig).acts1);t&&t.isOpenActivity()?this.currentState="act":this.currentState=XunBaoSys.ins().isDoubleTimer()?"7day":"none",this.validateNow()},e.prototype.updateTime=function(){var t=ActSys.ins().getActDataByIds(Cfg.getConfig(XunbaoConstConfig).acts1);if(t&&t.isOpenActivity())this.lbDoubleTimer.text=t.getformatTime();else{var e=XunBaoSys.ins().getDoubleTimer();e>0?this.lbDoubleTimer.text=""+getFormatTime(e,"dd天hh小时mm分钟ss秒"):this.lbDoubleTimer.text=""}},Object.defineProperty(e.prototype,"data",{get:function(){return XunBaoSys.ins().getXunBaoDataByType(XunbaoType.Equip)},enumerable:!0,configurable:!0}),e.getTitle=function(){return"btz_zycs_zbxb"},e.getTabTitle=function(){return"装备寻宝"},e.getSysId=function(){return 271},e}(XunBaoBasePanel);__reflect(XunBaoEquipPanel.prototype,"XunBaoEquipPanel"),window.XunBaoEquipPanel=XunBaoEquipPanel;var MessageMgr=function(t){function e(){var e=t.call(this)||this;return e.msgDick={},e}return __extends(e,t),e.ins=function(){return t.getIns.call(this,e)},e.prototype.clear=function(){this.msgDick={}},e.prototype.coverFunc=function(t){for(var i=t.prototype,n=Object.keys(i),a=function(t){if(0==t.indexOf("patch")&&"function"==typeof i[t]){var n=""+e.msgIndex++,a=i[t],o=function(){for(var t=[],i=0;i<arguments.length;i++)t[i]=arguments[i];var o=a.call.apply(a,[this].concat(t));return e.ins().dispatch(n,o),o};o.bindFuncName=n,o.sourceFun=a,i[t]=o}},o=0,s=n;o<s.length;o++){var r=s[o];a(r)}},e.prototype.addLsn=function(t,e,i){if(i.hasLsn=!0,t.bindFuncName){for(var n=this.msgDick[t.bindFuncName]=this.msgDick[t.bindFuncName]||[],a=!1,o=-1,s=n.length,r=0;s>r;r++){var u=n[r];if(u){if(u.func==e&&u.obj==i){a=!0;break}}else o=r}if(!a){var u=new Caller;u.func=e,u.obj=i,-1==o?n.push(u):n[o]=u}}else console.log("MessageMgr错误:"+egret.getQualifiedClassName(i))},e.prototype.removeLsn=function(t,e,i){if(t.bindFuncName){var n=this.msgDick[t.bindFuncName];if(n){for(var a=n.length,o=a,s=0;a>s;s++){var r=n[s];if(r){if(r.func==e&&r.obj==i){n[s]=null,o--;break}}else o--}0==o&&(this.msgDick[t.bindFuncName]=null,delete this.msgDick[t.bindFuncName])}}},e.prototype.removeAll=function(t){for(var e=Object.keys(this.msgDick),i=0,n=e;i<n.length;i++){for(var a=n[i],o=this.msgDick[a],s=o.length,r=0;r<o.length;r++){var u=o[r];u?o[r].obj==t&&(o[r]=null,s--):s--}0==s&&(this.msgDick[a]=null,delete this.msgDick[a])}},e.prototype.dispatch=function(t,e){var i=ObjPool.pop(MsgData),n=this.msgDick[t];if(n&&n.length)for(var a=0,o=n;a<o.length;a++){var s=o[a];s&&(s.func.callFuncName=t,callFunc(s.obj,s.func,e))}ObjPool.push(i)},e.msgIndex=0,e}(BaseIns);__reflect(MessageMgr.prototype,"MessageMgr"),window.MessageMgr=MessageMgr;var MallBasePanel=function(t){function e(){var e=t.call(this)||this;return e.ITEM_HEIGHT=205,e.initUI(),e}return __extends(e,t),e.prototype.initUI=function(){t.prototype.initUI.call(this),this.setSkinName();var e=this.getListItemClass();e?(this.listItem.itemRenderer=this.getListItemClass(),this.listItem.dataProvider=this.listItemArr=new eui.ArrayCollection([])):console.log("MallBasePanel未设置listItem的渲染项")},e.prototype.getListItemClass=function(){},e.prototype.open=function(e){void 0===e&&(e=0),t.prototype.open.call(this),this.itemId=e},e.prototype.selectItem=function(t){this.listItem.validateNow();for(var e=0,i=this.listItemArr.source,n=0;n<i.length;n++){var a=i[n];if(a.getItemId()==t){e=n;break}}var o=Math.floor(e/2)*this.ITEM_HEIGHT,s=this.scrollItem.viewport.contentHeight-this.scrollItem.height;o>=s&&(o=s),0>o&&(o=0),this.scrollItem.viewport.scrollV=o;var r=this.listItem.getElementAt(e);r&&r.playSelectMC()},e.getSysId=function(){return 291},e.getTabTitle=function(){return"未命名"},e}(BasePanel);__reflect(MallBasePanel.prototype,"MallBasePanel"),window.MallBasePanel=MallBasePanel;var DamonLevelPanel=function(t){function e(){var e=t.call(this)||this;return e.helpId=51,e.longPressBtnUp=new LongPress,e.skillDatas=[],e.isChangLv=!1,e.isChanging=!1,e.dValue=0,e.num=0,e.skinName="DamonLevelPanelEUI",e.list.itemRenderer=SkillPassivityItem,e.list.dataProvider=e.listData=new eui.ArrayCollection,e.attrs.itemRenderer=ComAttrItem,e.attrs.dataProvider=e.attrData=new eui.ArrayCollection,e.listConsume.itemRenderer=ItemBaseConsume,e.listConsume.dataProvider=e.listConsumeData=new eui.ArrayCollection,e.imgExp.mask=e.imgExpMask,e.imgBg.source="jl_zycs_bg2_jpg",e.expMC1=GFunc.playUIMovie("jypoor2",0,0,e.groupExpMc,-1),e.maskMC1=new MaskRect,e.maskMC1.x=-47,e.maskMC1.y=-46,e.maskMC1.setParam(94,92,MoveDir.D_To_U),e.groupExpMc.addChild(e.maskMC1),e.expMC1.mask=e.maskMC1,e.expMC2=GFunc.playUIMovie("jypoor1",0,0,e.groupExpMc,-1),e.maskMC2=new MaskCircle,e.maskMC2.setParam(46,MoveDir.D_To_U),e.maskMC2.setPercent(1),e.groupExpMc.addChild(e.maskMC2),e.expMC2.mask=e.maskMC2,e}return __extends(e,t),e.prototype.open=function(){t.prototype.open.call(this),this.addClickE(this.btnSend,this.onClick),this.addClickE(this.helpBtn,this.onClick),this.addItemTapE(this.list,this.onSkillItem),this.addLsn(ShouHuNewSys.ins().patchDamonLevelUp,this.updateLevelUp),this.addLsn(SkillSys.ins().patchSkillPassivityUp,this.updateSkill),this.addLsn(RpSys.ins().patchRp,this.updateRp),this.longPressBtnUp.setDisplay(this.btnSend,this.autoUp,this,500,200),this.infoPanel()},e.prototype.close=function(){t.prototype.close.call(this),this.longPressBtnUp.close()},e.prototype.updateRp=function(t){(!t||t.check(this))&&(this.btnSend.redPoint.visible=RpSys.ins().getData(ShouHuWin,this.getParentClassName(),this,"levelUp"))},e.prototype.infoPanel=function(){this.isChangLv=!1,this.dataModel=ShouHuNewSys.ins().getModelBySysId(this.getSysId()),this.updatePanel(),this.updateRp()},e.prototype.updatePanel=function(){this.bmpLv.text="l"+this.dataModel.level,this.attrData.source=this.dataModel.getLevelAttrDatas(),this.attrs.validateNow(),this.attrs.width=this.attrs.contentWidth;var t=[GFunc.creatRewardDataById(this.dataModel.getLevelitemid(),1)];this.listConsumeData.source=t,this.isChangLv&&this.playEff("pubsjeff"),this.dataModel.isMaxLv()?(this.btnSend.visible=!1,this.listConsume.visible=!1,this.imgYml.visible=!0):(this.btnSend.visible=!0,this.listConsume.visible=!0,this.imgYml.visible=!1),this.updateEXP(this.dataModel.levelExp,this.dataModel.getLevelMaxExp()),this.updateSkill(),this.updataMC()},e.prototype.updateLevelUp=function(t){this.isChangLv=t,t?this.dValue=this.maskMC1.max-this.maskMC1.value:this.dValue=this.dataModel.levelExp-this.maskMC1.value,this.num=this.dValue/10,Timer.ins()["do"](0,20,0,this.playExpEff,this),this.isChanging=!0},e.prototype.playExpEff=function(){this.dValue>0?(this.dValue=Math.max(this.dValue-this.num>>0,0),this.isChangLv?this.updateEXP(this.maskMC1.max-this.dValue,this.maskMC1.max):this.updateEXP(this.dataModel.levelExp-this.dValue,this.maskMC1.max)):(Timer.ins().remove(this.playExpEff,this),this.updatePanel(),this.isChanging=!1)},e.prototype.updateEXP=function(t,e){t=Math.min(t,e),this.lbExp.text=t+"/"+e,this.imgExpMask.scaleY=-t/e,this.maskMC1.setValue(t,e),this.expMC2.y=46-t/e*92},e.prototype.updataMC=function(){this.groupMc.removeChildren();for(var t=this.getModel(),e=0,i=t;e<i.length;e++){var n=i[e];this.groupMc.addChild(MC.createCenterGruop(n,-1))}},e.prototype.getModel=function(){var t=Cfg.getConfig(DamonHuanhuaBaseConfig,this.dataModel.useId).uibody;return[t]},e.prototype.updateSkill=function(){this.skillDatas=SkillSys.ins().getSkillPassivityDatasByIds(this.dataModel.getLevelskills()),this.listData.source=this.skillDatas,this.lbSkillLv.textFlow=addColorTF(SkillSys.ins().getSkillPassivityUpDec(this.skillDatas)),this.updatePower()},e.prototype.updatePower=function(){for(var t=0,e=0,i=this.skillDatas;e<i.length;e++){var n=i[e];t+=n.getPower()}this.power.text=""+(this.dataModel.getLevelPower()+t)},e.prototype.playEff=function(t){GFunc.playUIMovie(t,0,-100,this.groupMc,1)},e.prototype.onSkillItem=function(t){var e=t.item;openWin(SkillPassivityUpWin,e)},e.prototype.onClick=function(t){switch(t.currentTarget){case this.btnSend:!this.isChanging&&GFunc.checkConsumeEnough(GFunc.creatRewardDataById(this.dataModel.getLevelitemid(),1))&&ShouHuNewSys.ins().sendDamonLevelUp();break;case this.helpBtn:openWin(HelpWin,Cfg.getConfig(HelpInfoConfig,this.helpId).text)}},e.prototype.autoUp=function(){GFunc.checkConsumeEnough(GFunc.creatRewardDataById(this.dataModel.getLevelitemid(),1))?ShouHuNewSys.ins().sendDamonLevelUp():this.longPressBtnUp.stop()},e.prototype.getParentClassName=function(){for(var t=ShouHuWin.getPanelNames(),e=0,i=t;e<i.length;e++){var n=i[e];if(n.getSysId()==this.getSysId())return n}return null},e.getTitle=function(){return"btz_zycs_rw"},e.getTabTitle=function(){return Lang.btn_py},e.getSysId=function(){return 216},e.prototype.getBtnSend=function(){return this.btnSend},e}(BasePanel);__reflect(DamonLevelPanel.prototype,"DamonLevelPanel"),window.DamonLevelPanel=DamonLevelPanel;var DamonMoZhenPanel=function(t){function e(){var e=t.call(this)||this;return e.helpId=55,e.datas=[],e.tempUrl="",e.skinName="ShenQiHuanHuaPanelEUI",e.attrs.itemRenderer=ComAttrItem,e.attrs.dataProvider=e.attrData=new eui.ArrayCollection,e.listBar.dataProvider=e.listBarData=new eui.ArrayCollection,e.listIcon.itemRenderer=HuanHuaItem,e.listIcon.dataProvider=e.listIconData=new eui.ArrayCollection,e.listConsume.itemRenderer=ItemBaseConsume,e.listConsume.dataProvider=e.listConsumeData=new eui.ArrayCollection,e.btnAttr.textFlow=addColorTF(StrUtil.addUnderLine(Lang.common_str116),1176860),e.groupMc.y=336,e}return __extends(e,t),e.prototype.open=function(){t.prototype.open.call(this),this.addClickE(this.btnSend,this.onClick),this.addClickE(this.btnHuanHua,this.onClick),this.addClickE(this.btnAttr,this.onClick),this.addClickE(this.helpBtn,this.onClick),this.addItemTapE(this.listBar,this.onListBar),this.addItemTapE(this.listIcon,this.onListIcon),this.addLsn(ShouHuNewSys.ins().patchDamonMoZhenUp,this.updateHuanHuaUp),this.addLsn(ShouHuNewSys.ins().patchDamonMoZhenHuanHua,this.updateHuanHua),this.addLsn(RpSys.ins().patchRp,this.updateRp),this.infoPanel()},e.prototype.close=function(){t.prototype.close.call(this),this.item.setSelect(!1),this.mc&&this.mc.reset()},e.prototype.updateRp=function(t){if(!t||t.check(this))for(var e=0;e<this.listBar.numChildren;e++){var i=this.listBar.getChildAt(e);i.redPoint.visible=RpSys.ins().getData(ShouHuWin,this.getParentClassName(),this,e+1)}},e.prototype.infoPanel=function(){this.dataModel=ShouHuNewSys.ins().getModelBySysId(this.getSysId()),this.listBarData.source=this.dataModel.getMoZhenGroupNames(),this.listBar.selectedIndex=-1,this.listBar.validateNow(),this.updateDefBarSelect(),this.updateDefSelect(),this.updatePanel(),this.updateRp()},e.prototype.updateDefBarSelect=function(){this.listBar.validateNow();var t=this.listBar.selectedIndex,e=this.getParentClassName();if(0>t||!RpSys.ins().getData(ShouHuWin,e,this,t+1)){for(var i=0;i<this.listBar.numChildren;i++)if(RpSys.ins().getData(ShouHuWin,e,this,i+1)){t=i;break}this.listBar.selectedIndex=0>t?0:t}},e.prototype.updateDefSelect=function(){var t=this.getParentClassName();this.updateListIcon();var e=0;if(this.data&&this.datas&&this.datas.length>0&&(e=this.datas.indexOf(this.data)),e=e>-1?e:0,this.item&&RpSys.ins().getData(ShouHuWin,t,this,this.listBar.selectedIndex+1,this.item.data.id))this.data&&~this.listIcon.selectedIndex&&(this.listIcon.selectedIndex=this.datas.indexOf(this.data));else{for(var i=-1,n=0;n<this.listIcon.numChildren;n++){var a=this.listIcon.getChildAt(n).data,o=RpSys.ins().getData(ShouHuWin,t,this,this.listBar.selectedIndex+1,a.id);if(o){e=n,i=-1;break}a.isUse()&&(i=n)}i>-1&&(e=i),this.listIcon.selectedIndex=e,this.item=this.listIcon.getChildAt(this.listIcon.selectedIndex),this.data=this.datas[this.listIcon.selectedIndex]}this.updateSelectIcon()},e.prototype.updateHuanHuaUp=function(){this.resetItemData(),this.updateDefBarSelect(),this.updateDefSelect(),this.updatePanel()},e.prototype.updatePanel=function(){this.power.text=""+this.dataModel.getMoZhenPower(),this.bmpLv.text=""+this.data.level,this.groupLv.visible=!!this.data.level,this.imgName=addColorTF(this.data.getName()),this.imgWjh.visible=0==this.data.level;var t=addColor(this.data.getActDec(),16751375);t+=Lang.common_str117+addColor("+"+this.data.getActPower(),16751375),this.lbActDec.textFlow=addColorTF(0==this.data.level?t:""),this.decBg.visible=0==this.data.level,this.attrData.source=this.dataModel.getMoZhenAttrDatas(this.data),this.attrs.validateNow(),this.attrs.width=this.attrs.contentWidth;var e=(Actor.ins().job,GFunc.getItemDataRewardByJob(this.data.getConsume()));this.listConsumeData.source=e,this.btnSend.redPoint.visible=GFunc.isConsumeEnough(e),this.btnSend.label=this.data.level?Lang.btn_sj:Lang.btn_jh,this.data.isMax()?(this.btnSend.visible=!1,this.listConsume.visible=!1,this.imgYml.visible=!0):(this.btnSend.visible=!0,this.listConsume.visible=!0,this.imgYml.visible=!1),this.item.dataChanged(),this.updateHuanHua()},e.prototype.updateHuanHua=function(){this.imgSyz.visible=this.data.id==this.dataModel.moZhenId,this.btnHuanHua.visible=this.data.level>0?!this.imgSyz.visible:!1,this.updataMC(),this.updateListIcon()},e.prototype.updataMC=function(){this.mc||(this.mc=new MC,this.groupMc.addChild(this.mc)),this.tempUrl!=this.getApperaence()&&(this.mc.playFile(this.getApperaence(),-1),this.tempUrl=this.getApperaence())},e.prototype.updateListIcon=function(){this.datas=this.dataModel.getMoZhenDatasByGroupId(this.listBar.selectedIndex+1),this.listIconData.source=this.datas,this.listIcon.validateNow()},e.prototype.updateSelectIcon=function(){-1==this.datas.indexOf(this.data)?this.item.setSelect(!1):this.item.setSelect(!0)},e.prototype.getNameRes=function(){return"jl_zycs_mz"+this.data.id},e.prototype.getApperaence=function(){var t=Cfg.getConfig(GuanghuanAppearanceConfig,this.data.getApperaenceId()).appearance;return ResMgr.getUIFootSource(t)},e.prototype.resetItemData=function(){this.item.setSelect(!1),this.item=null,this.data=null},e.prototype.onListBar=function(t){this.resetItemData(),this.updateDefSelect(),this.updatePanel()},e.prototype.onListIcon=function(t){this.item.setSelect(!1),this.item=t.itemRenderer,this.data=t.item,this.updatePanel(),this.updateSelectIcon()},e.prototype.onClick=function(t){switch(t.currentTarget){case this.btnSend:if(this.data.isMax())return void showtipsFail(Lang.common_str38);var e=(Actor.ins().job,GFunc.getItemDataRewardByJob(this.data.getConsume()));GFunc.checkConsumeEnough(e)&&ShouHuNewSys.ins().sendDamonMoZhenUp(this.data.id);break;case this.btnHuanHua:ShouHuNewSys.ins().sendDamonMoZhenHuanHua(this.data.id);break;case this.btnAttr:openWin(ComAttrWin,this.dataModel.getMoZhenDatasAll(),ComAttrTitleEnum.DamonMoZhen);break;case this.helpBtn:openWin(HelpWin,Cfg.getConfig(HelpInfoConfig,this.helpId).text)}},e.prototype.getParentClassName=function(){var t;switch(this.getSysId()){case 290:t=DamonPanel;break;case 293:t=YongbingPanel;break;case 305:t=ShenmoPanel}return t},e.getTitle=function(){return"btz_zycs_rw"},e.getTabTitle=function(){return Lang.btn_mz},e.getSysId=function(){return 290},e}(BasePanel);__reflect(DamonMoZhenPanel.prototype,"DamonMoZhenPanel"),window.DamonMoZhenPanel=DamonMoZhenPanel;var DamonStagePanel=function(t){function e(){var e=t.call(this)||this;return e.helpId=52,e.longPressBtnUp=new LongPress,e.skillDatas=[],e.curStage=0,e.skinName="DamonStagePanelEUI",e.setSkinPart("itemZhiSheng",new ItemBaseReward),e.list.itemRenderer=SkillPassivityItem2,e.list.dataProvider=e.listData=new eui.ArrayCollection,e.attrs.itemRenderer=ComAttrItem,e.attrs.dataProvider=e.attrData=new eui.ArrayCollection,e.listConsume.itemRenderer=ItemBaseConsume,e.listConsume.dataProvider=e.listConsumeData=new eui.ArrayCollection,e.imgBg.source="jl_zycs_bg2_jpg",e.groupSkill.visible=!1,e.starExp=new Star(StarData.F_5()),e.starExp.x=30,e.groupStar.addChild(e.starExp),e.btnSendMC=MC.createCenterGruop(getEffName("button1"),-1),e.btnSend.addChildAt(e.btnSendMC,e.btnSend.numChildren-1),e.btnHuanHuaMC=MC.createCenterGruop(getEffName("hheff"),-1),e.btnHuanHua.addChildAt(e.btnHuanHuaMC,e.btnHuanHua.numChildren-1),e}return __extends(e,t),e.prototype.open=function(){t.prototype.open.call(this),this.addClickE(this.btnSend,this.onClick),this.addClickE(this.btnGengHuan,this.onClick),this.addClickE(this.btnHuanHua,this.onClick),this.addClickE(this.btnUseZhiSheng,this.onClick),this.addClickE(this.helpBtn,this.onClickCommon),this.addClickE(this.leftBtn,this.onClickCommon),this.addClickE(this.rightBtn,this.onClickCommon),this.addClickE(this.btnGet,this.onClickCommon),this.addItemTapE(this.list,this.onSkillItem),this.addLsn(ShouHuNewSys.ins().patchDamonStageUp,this.updatePanelUp),this.addLsn(ShouHuNewSys.ins().patchDamonUseZhiSheng,this.updatePanelUp),this.addLsn(ShouHuNewSys.ins().patchDamonHuanHua,this.updateHuanhua),this.addLsn(SkillSys.ins().patchSkillPassivityUp,this.updateSkill),this.addLsn(BagSys.ins().patchItemChange,this.updateConsume),this.addLsn(BagSys.ins().patchItemChange,this.updateConsumeZhiSheng),this.addLsn(RpSys.ins().patchRp,this.updateRp),this.longPressBtnUp.setDisplay(this.btnSend,this.autoUp,this),this.infoPanel()
},e.prototype.close=function(){t.prototype.close.call(this),this.longPressBtnUp.close()},e.prototype.updateRp=function(t){if(!t||t.check(this)){var e=RpSys.ins().getData(ShouHuWin,this.getParentClassName(),this,"stageUp");this.btnSend.redPoint.visible=e,this.btnSendMC.visible=e,e=RpSys.ins().getData(ShouHuWin,this.getParentClassName(),this,ShouHuHuanHuaWin),this.btnHuanHua.redPoint.visible=e,this.btnHuanHuaMC.visible=e,e=RpSys.ins().getData(ShouHuWin,this.getParentClassName(),this,"zhiSheng"),this.btnUseZhiSheng.redPoint.visible=e}},e.prototype.infoPanel=function(){this.dataModel=ShouHuNewSys.ins().getModelBySysId(this.getSysId()),this.tempStage=this.dataModel.stageLevel,this.starExp.setMaxStar(this.dataModel.getStarPerLevel()),this.starExp.reset(),this.updatePanel(),this.updateRp()},e.prototype.updatePanelUp=function(t){t&&this.longPressBtnUp.stop(),this.updatePanel(),this.updateZhiSheng()},e.prototype.updatePanel=function(){if(this.curStage=this.dataModel.getStage(),this.attrData.source=this.dataModel.getStageAttrDatas(),this.attrs.validateNow(),this.attrs.width=this.attrs.contentWidth,this.barExp.slideDuration=500,this.dataModel.stageLevel>this.tempStage){this.tempStage=this.dataModel.stageLevel;var t=this.barExp.maximum;this.barExp.value=t,this.updateExp()}else this.barExp.maximum=this.dataModel.getStageMaxExp(),this.barExp.value=this.dataModel.stageExp;this.updateConsume(),this.updateSkill(),this.selectPanel(),this.updateMax(),this.updateZhiSheng()},e.prototype.updateExp=function(){this.barExp.slideDuration=0,this.barExp.maximum=this.dataModel.getStageMaxExp(),this.barExp.value=this.dataModel.stageExp},e.prototype.updateConsume=function(){var t=[GFunc.creatRewardDataById(this.dataModel.getStageitemid(),1)];this.listConsumeData.source=t},e.prototype.updateConsumeZhiSheng=function(t){t.cfg.type==ItemType.JLSJS&&this.updateZhiSheng()},e.prototype.updateMax=function(){this.dataModel.isMaxStage()?(this.imgYml.visible=!0,this.groupUp.visible=!1,this.barExp.maximum=100,this.barExp.value=100,this.btnSend.visible=!1):(this.imgYml.visible=!1,this.groupUp.visible=!0,this.btnSend.visible=!0)},e.prototype.updateHuanhua=function(){this.selectPanel()},e.prototype.selectPanel=function(){this.starExp.setCurStar(this.dataModel.getStart(this.curStage)),this.imgSyz.visible=this.curStage==this.dataModel.useId,this.btnGengHuan.visible=!this.imgSyz.visible&&this.curStage<=this.dataModel.getStage(),this.leftBtn.visible=this.curStage>1;var t=this.dataModel.getStage();t=t<this.dataModel.getMaxStage()?t+1:t,this.rightBtn.visible=this.curStage<t,this.updataMC()},e.prototype.updataMC=function(){this.groupMc.removeChildren();for(var t=this.getModel(),e=0,i=t;e<i.length;e++){var n=i[e];this.groupMc.addChild(MC.createCenterGruop(n,-1))}},e.prototype.getModel=function(){var t=Cfg.getConfig(DamonHuanhuaBaseConfig,this.curStage),e=t.uibody,i=t.name;return this.imgStage=i,[e]},e.prototype.updateSkill=function(){this.skillDatas=SkillSys.ins().getSkillPassivityDatasByIds(this.dataModel.getStageskills()),this.listData.source=this.skillDatas,this.updatePower()},e.prototype.updatePower=function(){for(var t=0,e=0,i=this.skillDatas;e<i.length;e++){var n=i[e];t+=n.getPower()}this.power.text=""+(this.dataModel.getStagePower()+t)},e.prototype.getNameRes=function(){return"jl_zycs_m"+this.curStage},e.prototype.onSkillItem=function(t){var e=t.item;openWin(SkillPassivityUpWin2,e)},e.prototype.onClick=function(t){switch(t.currentTarget){case this.btnSend:GFunc.checkConsumeEnough(GFunc.creatRewardDataById(this.dataModel.getStageitemid(),1))&&ShouHuNewSys.ins().sendDamonStageUp();break;case this.btnGengHuan:ShouHuNewSys.ins().sendDamonHuanHua(this.curStage);break;case this.btnHuanHua:openWin(ShouHuHuanHuaWin,ShouHuHuanHuaWin.getTabIndexbyPanel(DamonHuanHuaPanel));break;case this.btnUseZhiSheng:var e=this.itemZhiSheng.data;ShouHuNewSys.ins().sendDamonUseZhiSheng(Cfg.getConfig(DamonHuanhuaBaseConfig,CondType.Equal,DamonHuanhuaBaseConfig.stoneid,e.id).id)}},e.prototype.autoUp=function(){GFunc.checkConsumeEnough(GFunc.creatRewardDataById(this.dataModel.getStageitemid(),1))?ShouHuNewSys.ins().sendDamonStageUp():this.longPressBtnUp.stop()},e.prototype.onClickCommon=function(t){switch(t.currentTarget){case this.helpBtn:openWin(HelpWin,Cfg.getConfig(HelpInfoConfig,this.helpId).text);break;case this.leftBtn:this.curStage=Math.max(this.curStage-1,1),this.starExp.reset(),this.selectPanel();break;case this.rightBtn:this.curStage=Math.min(this.curStage+1,this.dataModel.getStage()+1),this.starExp.reset(),this.selectPanel();break;case this.btnGet:var e=this.itemZhiSheng.data;openWin(FirstRechargeVeryDayWin,RechargeActSys.ins().firstRechargeEveryDay.getFormItemIndexByItemId(e.id))}},e.prototype.getParentClassName=function(){for(var t=ShouHuWin.getPanelNames(),e=0,i=t;e<i.length;e++){var n=i[e];if(n.getSysId()==this.getSysId())return n}return null},e.prototype.updateZhiSheng=function(){var t=this.dataModel.getActCanUseZhiShengItemIds(),e=BagSys.ins().getItemsById(this.dataModel.getCanUseZhiShengItemIds());SortUtil.sortOn(e,["id"],[SortType.down]);var i=null;if(e.length>0?i=e[0]:t.length>0&&(i=GFunc.creatItemDataById(t[0])),i){var n=GFunc.getItemCount(i.id)>0;this.groupZhiSheng.visible=!this.dataModel.isMaxStage()&&(n||this.dataModel.actHasItem()),this.itemZhiSheng.data=i,this.lbName.text=i.cfg.getName(),this.lbName.textColor=GConst.PZColor[i.cfg.quality],this.btnGet.visible=!n,this.btnUseZhiSheng.visible=n}else this.groupZhiSheng.visible=!1},e.prototype.getBtnSend=function(){return this.btnSend},e.getTitle=function(){return"btz_zycs_rw"},e.getTabTitle=function(){return Lang.btn_hh},e.getSysId=function(){return 216},__decorate([callDelay(400)],e.prototype,"updateExp",null),e}(BasePanel);__reflect(DamonStagePanel.prototype,"DamonStagePanel"),window.DamonStagePanel=DamonStagePanel;var DamonYinJiPanel=function(t){function e(){var e=t.call(this)||this;return e.helpId=54,e.longPressBtnUp=new LongPress,e.datas=[],e.skinName="DamonYinJiPanelEUI",e.setSkinPart("item0",new FuHunItem),e.setSkinPart("item1",new FuHunItem),e.setSkinPart("item2",new FuHunItem),e.setSkinPart("item3",new FuHunItem),e.items=[e.item0,e.item1,e.item2,e.item3],e.attrs.itemRenderer=ComAttrItem,e.attrs.dataProvider=e.attrData=new eui.ArrayCollection,e.listConsume.itemRenderer=ItemBaseConsume,e.listConsume.dataProvider=e.listConsumeData=new eui.ArrayCollection,e.btnAttr.textFlow=addColorTF(StrUtil.addUnderLine(Lang.common_str116),1176860),e.imgBg.source="jl_zycs_bg3_jpg",e}return __extends(e,t),e.prototype.open=function(){t.prototype.open.call(this),this.addClickE(this.btnSend,this.onClick),this.addClickE(this.btnAttr,this.onClick),this.addClickE(this.helpBtn,this.onClick);for(var e=0,i=this.items;e<i.length;e++){var n=i[e];this.addClickE(n,this.onItemClick)}this.addLsn(ShouHuNewSys.ins().patchDamonYinJiUp,this.updatePanel),this.addLsn(RpSys.ins().patchRp,this.updateRp),this.longPressBtnUp.setDisplay(this.btnSend,this.autoUp,this),this.infoPanel()},e.prototype.close=function(){t.prototype.close.call(this),this.longPressBtnUp.close()},e.prototype.updateRp=function(t){(!t||t.check(this))&&(this.btnSend.redPoint.visible=this.data.isMaxCur()?!1:GFunc.isConsumeEnough(this.data.getConsume()))},e.prototype.infoPanel=function(){this.dataModel=ShouHuNewSys.ins().getModelBySysId(this.getSysId()),this.datas=this.dataModel.getYinJuDatas(),this.curItem&&(this.curItem.selected=!1),this.curItem=this.items[0],this.curItem.selected=!0,this.data=this.datas[0],this.updateDefSelect(),this.updatePanel(),this.updateRp()},e.prototype.updateDefSelect=function(){for(var t=this.datas.length-1;t>=0;t--)if(!this.datas[t].isMaxCur()){var e=GFunc.isConsumeEnough(this.datas[t].getConsume());if(e){this.curItem&&(this.curItem.selected=!1),this.curItem=this.items[t],this.curItem.selected=!0,this.data=this.datas[t];break}}},e.prototype.updatePanel=function(){this.updateDefSelect(),this.power.text=""+this.dataModel.getYinJinPower();for(var t in this.items)this.items[t].data=this.datas[t];this.updateSelect()},e.prototype.updateSelect=function(){this.attrData.source=this.dataModel.getYinJiAttrDatas(this.data),this.attrs.validateNow(),this.attrs.width=this.attrs.contentWidth;var t=this.data.isMax();this.currentState=this.data.isMax()?"max":"normal",this.validateNow(),!t&&(this.listConsumeData.source=this.data.getConsume())},e.prototype.onItemClick=function(t){this.curItem&&(this.curItem.selected=!1),this.curItem=t.currentTarget,this.curItem.selected=!0,this.data=this.curItem.data,this.updateSelect(),this.updateRp()},e.prototype.onClick=function(t){switch(t.currentTarget){case this.btnSend:this.onBtnUp();break;case this.btnAttr:openWin(ComAttrWin,this.dataModel.getYinJiAttrDatasAll(),this.getComAttrTitleEnum());break;case this.helpBtn:openWin(HelpWin,Cfg.getConfig(HelpInfoConfig,this.helpId).text)}},e.prototype.autoUp=function(){this.onBtnUp()||this.longPressBtnUp.stop()},e.prototype.onBtnUp=function(){return this.data.isMax()?(showtipsFail(Lang.common_str38),!1):this.data.isMaxCur()?(showtipsFail(Lang.damon_str59),!1):GFunc.checkConsumeEnough(this.data.getConsume())?(this.sendPack(),this.curItem.playEff(),!0):!1},e.prototype.sendPack=function(){ShouHuNewSys.ins().sendDamonYinJiUp(this.data.id)},e.prototype.getComAttrTitleEnum=function(){return ComAttrTitleEnum.DamonYinJi},e.getTitle=function(){return"btz_zycs_rw"},e.getTabTitle=function(){return Lang.btn_yj},e.getSysId=function(){return 289},e}(BasePanel);__reflect(DamonYinJiPanel.prototype,"DamonYinJiPanel"),window.DamonYinJiPanel=DamonYinJiPanel;var ShenQiFuHunPanel=function(t){function e(){var e=t.call(this)||this;return e.helpId=50,e.longPressBtnUp=new LongPress,e.datas=[],e.skinName="ShenQiFuHunPanelEUI",e.items=[e.item0,e.item1,e.item2,e.item3],e.attrs.itemRenderer=ComAttrItem,e.attrs.dataProvider=e.attrData=new eui.ArrayCollection,e.listConsume.itemRenderer=ItemBaseConsume,e.listConsume.dataProvider=e.listConsumeData=new eui.ArrayCollection,e.btnAttr.textFlow=addColorTF(StrUtil.addUnderLine(Lang.common_str116),1176860),e.imgBg.source="shenqi_zycs_bg2_jpg",e}return __extends(e,t),e.prototype.open=function(){t.prototype.open.call(this),this.addClickE(this.btnSend,this.onClickCommon),this.addClickE(this.btnAttr,this.onClickCommon),this.addClickE(this.helpBtn,this.onClickCommon);for(var e=0,i=this.items;e<i.length;e++){var n=i[e];this.addClickE(n,this.onListClick)}this.addLsn(SqXySys.ins().patchShenQiFuHunUp,this.updatePanel),this.addLsn(RpSys.ins().patchRp,this.updateRp),this.longPressBtnUp.setDisplay(this.btnSend,this.autoUp,this),this.infoPanel()},e.prototype.close=function(){t.prototype.close.call(this),this.longPressBtnUp.close()},e.prototype.updateRp=function(t){(!t||t.check(this))&&(this.btnSend.redPoint.visible=this.data.isMaxCur()?!1:GFunc.isConsumeEnough(this.data.getConsume()))},e.prototype.infoPanel=function(){this.dataModel=SqXySys.ins().getModelBySysId(this.getSysId()),this.datas=this.dataModel.getFuHunDatas(),this.curItem&&(this.curItem.selected=!1),this.curItem=this.items[0],this.curItem.selected=!0,this.data=this.datas[0],this.updateDefSelect(),this.updatePanel(),this.updateRp()},e.prototype.updateDefSelect=function(){for(var t=this.datas.length-1;t>=0;t--)if(!this.datas[t].isMaxCur()){var e=GFunc.isConsumeEnough(this.datas[t].getConsume());if(e){this.curItem&&(this.curItem.selected=!1),this.curItem=this.items[t],this.curItem.selected=!0,this.data=this.datas[t];break}}},e.prototype.updatePanel=function(){this.updateDefSelect(),this.power.text=""+this.dataModel.getFuHunPower();for(var t in this.items)this.items[t].data=this.datas[t];this.updateSelect()},e.prototype.updateSelect=function(){this.attrData.source=this.dataModel.getLevelFuHunDatas(this.data),this.attrs.validateNow(),this.attrs.width=this.attrs.contentWidth,this.listConsumeData.source=this.data.getConsume()},e.prototype.playEff=function(t){this.curItem.playEff()},e.prototype.onListClick=function(t){this.curItem&&(this.curItem.selected=!1),this.curItem=t.currentTarget,this.curItem.selected=!0,this.data=this.curItem.data,this.updateSelect(),this.updateRp()},e.prototype.onClickCommon=function(t){switch(t.currentTarget){case this.btnSend:this.onBtnUp();break;case this.btnAttr:openWin(ComAttrWin,this.dataModel.getLevelFuHunDatasAll(),ComAttrTitleEnum.FuHun);break;case this.helpBtn:openWin(HelpWin,Cfg.getConfig(HelpInfoConfig,this.helpId).text)}},e.prototype.autoUp=function(){this.onBtnUp()||this.longPressBtnUp.stop()},e.prototype.onBtnUp=function(){return this.data.isMax()?(showtipsFail(Lang.common_str38),!1):this.data.isMaxCur()?(showtipsFail(Lang.chat_str17+Lang.common_str38),!1):GFunc.checkConsumeEnough(this.data.getConsume())?(this.sendPack(),this.playEff(this.data.id),!0):!1},e.prototype.sendPack=function(){SqXySys.ins().sendShenQiFuHunUp(this.data.id)},e.getTitle=function(){return"btz_zycs_rw"},e.getTabTitle=function(){return Lang.btn_fh},e.getSysId=function(){return 210},e}(BasePanel);__reflect(ShenQiFuHunPanel.prototype,"ShenQiFuHunPanel"),window.ShenQiFuHunPanel=ShenQiFuHunPanel;var ShenQiHuanHuaPanel=function(t){function e(){var e=t.call(this)||this;return e.helpId=49,e.longPressBtnUp=new LongPress,e.datas=[],e.skinName="ShenQiHuanHuaPanelEUI",e.attrs.itemRenderer=ComAttrItem,e.attrs.dataProvider=e.attrData=new eui.ArrayCollection,e.listBar.dataProvider=e.listBarData=new eui.ArrayCollection,e.listIcon.itemRenderer=HuanHuaItem,e.listIcon.dataProvider=e.listIconData=new eui.ArrayCollection,e.listConsume.itemRenderer=ItemBaseConsume,e.listConsume.dataProvider=e.listConsumeData=new eui.ArrayCollection,e.btnAttr.textFlow=addColorTF(StrUtil.addUnderLine(Lang.common_str116),1176860),e.imgBg.source="shenqi_zycs_bg1_jpg",e}return __extends(e,t),e.prototype.open=function(){t.prototype.open.call(this),this.addClickE(this.btnSend,this.onClick),this.addClickE(this.btnHuanHua,this.onClick),this.addClickE(this.btnAttr,this.onClickCommon),this.addClickE(this.helpBtn,this.onClickCommon),this.addItemTapE(this.listBar,this.onListBar),this.addItemTapE(this.listIcon,this.onListIcon),this.addLsn(SqXySys.ins().patchShenQiHuanHuaUp,this.updateHuanHuaUp),this.addLsn(SqXySys.ins().patchShenQiHuanHua,this.updateHuanHua),this.addLsn(RpSys.ins().patchRp,this.updateRp),this.longPressBtnUp.setDisplay(this.btnSend,this.autoUp,this),this.infoPanel()},e.prototype.close=function(){t.prototype.close.call(this),this.longPressBtnUp.close(),this.item.setSelect(!1)},e.prototype.updateRp=function(t){if(!t||t.check(this))for(var e=0;e<this.listBar.numChildren;e++){var i=this.listBar.getChildAt(e);i.redPoint.visible=RpSys.ins().getData(RoleWin,RolePanel,SqXyWin,this.getParentClassName(),this,e+1)}},e.prototype.infoPanel=function(){this.dataModel=SqXySys.ins().getModelBySysId(this.getSysId()),this.listBarData.source=this.dataModel.getHuanHuaGroupNames(),this.listBar.selectedIndex=-1,this.listBar.validateNow(),this.updateDefBarSelect(),this.updateDefSelect(),this.updatePanel(),this.updateRp()},e.prototype.updateDefBarSelect=function(){this.listBar.validateNow();var t=this.listBar.selectedIndex,e=this.getParentClassName();if(0>t||!RpSys.ins().getData(RoleWin,RolePanel,SqXyWin,e,this,t+1)){for(var i=0;i<this.listBar.numChildren;i++)if(RpSys.ins().getData(RoleWin,RolePanel,SqXyWin,e,this,i+1)){t=i;break}this.listBar.selectedIndex=0>t?0:t}},e.prototype.updateDefSelect=function(){this.updateListIcon();var t=0;this.data&&this.datas&&this.datas.length>0&&(t=this.datas.indexOf(this.data)),t=t>-1?t:0;var e=this.getParentClassName();if(this.item&&RpSys.ins().getData(RoleWin,RolePanel,SqXyWin,e,this,this.listBar.selectedIndex+1,this.item.data.id))this.data&&~this.listIcon.selectedIndex&&(this.listIcon.selectedIndex=this.datas.indexOf(this.data));else{for(var i=-1,n=0;n<this.datas.length;n++){var a=this.datas[n],o=RpSys.ins().getData(RoleWin,RolePanel,SqXyWin,e,this,this.listBar.selectedIndex+1,a.id);if(o){t=n,i=-1;break}a.isUse()&&(i=n)}i>-1&&(t=i),this.listIcon.selectedIndex=t,this.item=this.listIcon.getChildAt(this.listIcon.selectedIndex),this.data=this.item.data}this.updateSelectIcon()},e.prototype.updateHuanHuaUp=function(){this.resetItemData(),this.updateDefBarSelect(),this.updateDefSelect(),this.updatePanel()},e.prototype.resetItemData=function(){this.item.setSelect(!1),this.item=null,this.data=null},e.prototype.updatePanel=function(){this.power.text=""+this.dataModel.getHuanHuaPower(),this.bmpLv.text=""+this.data.level,this.imgName=addColorTF(this.data.getName()),this.groupLv.visible=this.data.level>0,this.imgWjh.visible=0==this.data.level;var t=addColor(this.data.getActDec(),16751375);t+=Lang.common_str117+addColor("+"+this.data.getActPower(),16751375),this.lbActDec.textFlow=addColorTF(0==this.data.level?t:""),this.decBg.visible=0==this.data.level,this.attrData.source=this.dataModel.getLevelHuanHuaDatas(this.data),this.attrs.validateNow(),this.attrs.width=this.attrs.contentWidth;var e=(Actor.ins().job,GFunc.getItemDataRewardByJob(this.data.getConsume()));this.listConsumeData.source=e,this.btnSend.redPoint.visible=GFunc.isConsumeEnough(e),this.btnSend.label=this.data.isAct()?Lang.btn_sj:Lang.btn_jh,this.data.isMax()?(this.btnSend.visible=!1,this.listConsume.visible=!1,this.imgYml.visible=!0):(this.btnSend.visible=!0,this.listConsume.visible=!0,this.imgYml.visible=!1),this.item.dataChanged(),this.updateHuanHua()},e.prototype.updateHuanHua=function(){this.imgSyz.visible=this.data.id==this.dataModel.huanHuaId,this.btnHuanHua.visible=this.data.level>0?!this.imgSyz.visible:!1,this.updataMC(),this.listIconData.refresh()},e.prototype.updataMC=function(){this.groupMc.removeChildren();var t=this.getModel(),e=this.getModelHight();for(var i in t){var n=MC.createCenterGruop(t[i],-1);n.verticalCenter=e[i]||0,this.groupMc.addChild(n)}},e.prototype.getModelHight=function(){return[]},e.prototype.getModel=function(){var t=Cfg.getConfig(WeaponAppearanceConfig,this.data.getApperaenceId(Actor.ins().job)).appearance;return[ResMgr.getWeaponUIEFFResource(t)]},e.prototype.getNameRes=function(t){return"shenqi_zycs_"+Actor.ins().job+t},e.prototype.getApperaence=function(){var t=Cfg.getConfig(WeaponAppearanceConfig,this.data.getApperaenceId(Actor.ins().job)).appearance;return ResMgr.getWeaponUIEFFResource(t)},e.prototype.updateListIcon=function(){this.datas=this.dataModel.getHuanHuaDatasByGroupId(this.listBar.selectedIndex+1),this.listIconData.source=this.datas,this.listIcon.validateNow()},e.prototype.updateSelectIcon=function(){-1==this.datas.indexOf(this.data)?this.item.setSelect(!1):this.item.setSelect(!0)},e.prototype.onListBar=function(t){this.resetItemData(),this.updateDefSelect(),this.updatePanel()},e.prototype.onListIcon=function(t){this.item.setSelect(!1),this.item=t.itemRenderer,this.data=t.item,this.updatePanel(),this.updateSelectIcon()},e.prototype.onClick=function(t){switch(t.currentTarget){case this.btnSend:var e=GFunc.getItemDataRewardByJob(this.data.getConsume());GFunc.checkConsumeEnough(e)&&SqXySys.ins().snedShenQiHuanHuaUp(this.data.id);break;case this.btnHuanHua:SqXySys.ins().sendShenQiHuanHua(this.data.id)}},e.prototype.onClickCommon=function(t){switch(t.currentTarget){case this.btnAttr:openWin(ComAttrWin,this.dataModel.getLevelHuanHuaDatasAll(),ComAttrTitleEnum.HuanHua);break;case this.helpBtn:openWin(HelpWin,Cfg.getConfig(HelpInfoConfig,this.helpId).text)}},e.prototype.autoUp=function(){var t=GFunc.getItemDataRewardByJob(this.data.getConsume());GFunc.checkConsumeEnough(t)?SqXySys.ins().snedShenQiHuanHuaUp(this.data.id):this.longPressBtnUp.stop()},e.prototype.getParentClassName=function(){for(var t=SqXyWin.getPanelNames(),e=0,i=t;e<i.length;e++){var n=i[e];if(n.getSysId()==this.getSysId())return n}return null},e.getTitle=function(){return"btz_zycs_rw"},e.getTabTitle=function(){return"幻化"},e.getSysId=function(){return 210},e}(BasePanel);__reflect(ShenQiHuanHuaPanel.prototype,"ShenQiHuanHuaPanel"),window.ShenQiHuanHuaPanel=ShenQiHuanHuaPanel;var ShenQiLevelPanel=function(t){function e(){var e=t.call(this)||this;return e.helpId=48,e.longPressBtnUp=new LongPress,e.skillDatas=[],e.skinName="ShenQiLevelPanelEUI",e.list.itemRenderer=SkillPassivityItem,e.list.dataProvider=e.listData=new eui.ArrayCollection,e.attrs.itemRenderer=ComAttrItem,e.attrs.dataProvider=e.attrData=new eui.ArrayCollection,e.listConsume.itemRenderer=ItemBaseConsume,e.listConsume.dataProvider=e.listConsumeData=new eui.ArrayCollection,e.imgBg.source="shenqi_zycs_bg1_jpg",e}return __extends(e,t),e.prototype.open=function(){t.prototype.open.call(this),this.addClickE(this.btnSend,this.onClick),this.addClickE(this.helpBtn,this.onClick),this.addItemTapE(this.list,this.onSkillItem),this.addLsn(SqXySys.ins().patchShenQiUp,this.updatePanel),this.addLsn(SkillSys.ins().patchSkillPassivityUp,this.updateSkill),this.addLsn(RpSys.ins().patchRp,this.updateRp),this.longPressBtnUp.setDisplay(this.btnSend,this.autoUp,this),this.infoPanel()},e.prototype.close=function(){t.prototype.close.call(this),this.longPressBtnUp.close()},e.prototype.updateRp=function(t){(!t||t.check(this))&&(this.btnSend.redPoint.visible=GFunc.isConsumeEnough(this.dataModel.getLevelConsume()))},e.prototype.infoPanel=function(){this.dataModel=SqXySys.ins().getModelBySysId(this.getSysId()),this.updatePanel(),this.updataMC(),this.updateRp()},e.prototype.updatePanel=function(){this.bmpLv.text="l"+this.dataModel.level,this.attrData.source=this.dataModel.getLevelAttrDatas(),this.attrs.validateNow(),this.attrs.width=this.attrs.contentWidth,this.listConsumeData.source=this.dataModel.getLevelConsume(),this.dataModel.isMaxLv()?(this.btnSend.visible=!1,this.listConsume.visible=!1,this.imgYml.visible=!0):(this.btnSend.visible=!0,this.listConsume.visible=!0,this.imgYml.visible=!1),this.updateSkill()},e.prototype.updataMC=function(){this.groupMc.removeChildren();var t=this.getModel(),e=this.getModelHight();for(var i in t){var n=MC.createCenterGruop(t[i],-1);n.verticalCenter=e[i]||0,this.groupMc.addChild(n)}},e.prototype.getModelHight=function(){return[]},e.prototype.getModel=function(){var t=Cfg.getConfig(WeaponAppearanceConfig,this.dataModel.getApperaenceId()).appearance;return[ResMgr.getWeaponUIEFFResource(t)]},e.prototype.updateSkill=function(){this.skillDatas=SkillSys.ins().getSkillPassivityDatasByIds(this.dataModel.getSkillIds()),this.listData.source=this.skillDatas,this.lbSkillLv.textFlow=addColorTF(SkillSys.ins().getSkillPassivityUpDec(this.skillDatas)),this.updatePower()},e.prototype.updatePower=function(){for(var t=0,e=0,i=this.skillDatas;e<i.length;e++){var n=i[e];t+=n.getPower()}this.power.text=""+(this.dataModel.getLevelPower()+t)},e.prototype.playEff=function(t,e){void 0===e&&(e=0);GFunc.playUIMovie(t,0,e,this.groupMc,1)},e.prototype.onSkillItem=function(t){var e=t.item;openWin(SkillPassivityUpWin,e)},e.prototype.onClick=function(t){switch(t.currentTarget){case this.btnSend:GFunc.checkConsumeEnough(this.dataModel.getLevelConsume())&&(SqXySys.ins().sendShenQiUp(),this.playEff("pubsjeff"));break;case this.helpBtn:openWin(HelpWin,Cfg.getConfig(HelpInfoConfig,this.helpId).text)}},e.prototype.autoUp=function(){GFunc.checkConsumeEnough(this.dataModel.getLevelConsume())?(SqXySys.ins().sendShenQiUp(),this.playEff("pubsjeff")):this.longPressBtnUp.stop()},e.getTitle=function(){return"btz_zycs_rw"},e.getTabTitle=function(){return Lang.btn_sjie},e.getSysId=function(){return 210},e}(BasePanel);__reflect(ShenQiLevelPanel.prototype,"ShenQiLevelPanel"),window.ShenQiLevelPanel=ShenQiLevelPanel;var BaseWinAutoTab=function(t){function e(){return t.call(this)||this}return __extends(e,t),e.prototype.initUI=function(){t.prototype.setSkinName.call(this),t.prototype.initUI.call(this),this.addPanel(),this.iniScrollerBase(),this.redPointHead.length>0?callFunc(this,this.setRedPointHead,this.redPointHead):callFunc(this,this.setRedPointHead)},e.prototype.iniScrollerBase=function(){this.scrollerBase&&(this.pageArrowComponentBase=new PageArrowCom(this.scrollerBase,118,116),this.pageArrowComponentBase.setBtn(this.leftBtnBase,this.rightBtnBase))},e.prototype.setSkinName=function(){this.skinName="BaseWinSkin1"},e.prototype.open=function(e){void 0===e&&(e=-1);for(var i=[],n=1;n<arguments.length;n++)i[n-1]=arguments[n];var a=this.getAotuIndex(e);t.prototype.open.call(this,a),this.observeTabRedPoint(),this.pageArrowComponentBase&&this.pageArrowComponentBase.setListPage(a)},e.prototype.addPanel=function(){t.prototype.addPanel.call(this),this.scrollerBase&&(this.viewStack.validateNow(),this.scrollerBase.scrollPolicyH=this.viewStack.numChildren>=5?"on":"off")},e.prototype.observeTabRedPoint=function(){for(var e=[],i=0;i<arguments.length;i++)e[i]=arguments[i];t.prototype.observeTabRedPoint.apply(this,e),this.pageArrowComponentBase&&this.pageArrowComponentBase.open()},e.prototype.updateTabRedPoint=function(e){void 0===e&&(e=null),t.prototype.updateTabRedPoint.call(this,e),this.pageArrowComponentBase&&this.pageArrowComponentBase.updateRedPoint()},e.prototype.close=function(){t.prototype.close.call(this),this.pageArrowComponentBase&&this.pageArrowComponentBase.close()},e.prototype.updateTime=function(){var t=this.getCurPanel();t&&t.updateTime()},e}(BaseWin);__reflect(BaseWinAutoTab.prototype,"BaseWinAutoTab");var EntityAttrData=function(){function t(){this.attributeData=[],this.attributeDataAdd=[]}return t.prototype.parserAtt=function(t){for(var e=t.readShort(),i=0;e>i;i++)this.writeAttrValue(this.attributeData,i,t.readDouble())},t.prototype.parserAttAdd=function(t){for(var e=t.readShort(),i=0;e>i;i++)this.writeAttrValue(this.attributeDataAdd,i,t.readDouble())},t.prototype.writeAttrValue=function(t,e,i){e==AttrType.atMvSpeed?t[e]=i/1e3*64:t[e]=i},t.prototype.getAtt=function(t){return this.attributeData[t]||0},t.prototype.setAtt=function(t,e){this.attributeData[t]=e},t.prototype.getAttTotles=function(){for(var t=[],e=0;e<AttrType.atCount;e++)t[e]=this.getAtt(e);return t},t.prototype.isAlive=function(){return this.getAtt(AttrType.atHp)>0},t}();__reflect(EntityAttrData.prototype,"EntityAttrData");var DartGuildRankPanel=function(t){function e(){var e=t.call(this)||this;return e.init(),e}return __extends(e,t),e.prototype.init=function(){this.skinName="DartGuildRankPanelEUI",this.eList.itemRenderer=DartGuildRankPanelItem,this.listArr=new eui.ArrayCollection,this.eList.dataProvider=this.listArr},e.prototype.open=function(){t.prototype.open.call(this),DartSys.ins().sendGuildRank(),this.addLsn(DartSys.ins().patchGuildRank,this.updateRank)},e.prototype.updateRank=function(){for(var t=DartSys.ins().guildRanks,e=[],i=0;20>i;i++)if(t&&t[i])e.push(t[i]);else{var n=new DartRankData;n.pos=i+1,n.score=0,n.name="虚位以待",e.push(n)}var a=DartSys.ins().guildRankData;this.eGuildScore.text=a[0]+"",this.eGuildRank.text=a[1]>0?a[1]+"":"未上榜",this.listArr.source=e},e.getSysId=function(){return 318},e.getTitle=function(){return"btz_zycs_sjmg"},e.getTabTitle=function(){return"仙盟排行"},e}(BasePanel);__reflect(DartGuildRankPanel.prototype,"DartGuildRankPanel"),window.DartGuildRankPanel=DartGuildRankPanel;var DartJoinPanel=function(t){function e(){var e=t.call(this)||this;return e.init(),e}return __extends(e,t),e.prototype.init=function(){var t=this;t.skinName="DartJoinPanelEUI",t.eList.itemRenderer=DartJoinPanelItem,t.listDP=new eui.ArrayCollection,t.eList.dataProvider=this.listDP,t.eListMember.itemRenderer=DartJoinPanelConvoyItem,t.memberArr=new eui.ArrayCollection,t.eListMember.dataProvider=this.memberArr,t.eGuildReward.itemRenderer=ItemBaseReward,t.guildrewardArr=new eui.ArrayCollection,t.eGuildReward.dataProvider=this.guildrewardArr,t.eReward.itemRenderer=ItemBaseReward,t.rewardArr=new eui.ArrayCollection,t.eReward.dataProvider=this.rewardArr,t.labPreview.textFlow=addColorTF(t.labPreview.text,t.labPreview.textColor,!0)},e.prototype.open=function(){t.prototype.open.call(this);var e=DartSys.ins();e.sendGuildInfo(),this.addLsn(e.patchGuildInfo,this.updateList),this.addLsn(e.patchChoiceCar,this.updateList),this.addChangeE(this.eList,this.onChange),this.addClickE(this,this.onClick),this.updateList()},e.prototype.onClick=function(t){if(t.target==this.labPreview){var e=this.eList.selectedItem;openWin(DartCarPreviewWin,e.dartDivisions.length)}else if("cancelBtn"==t.target.name||"joinBtn"==t.target.name){var e=this.eList.selectedItem,i=new Date(Actor.ins().serverTime),n=Cfg.getConfig(DartConstConfig),a=n.startTimes[e.id-1],o=a[0],s=a[1];if(i.getHours()==o&&i.getMinutes()<s){if(s-i.getMinutes()<=5)return void showtipsFail("离活动开启小于5分钟，不能操作")}else if(i.getHours()<o&&o-i.getHours()==1&&0==s){var r=60-i.getMinutes();if(5>r||5==r&&i.getSeconds()>0)return void showtipsFail("离活动开启小于5分钟，不能操作")}if("joinBtn"==t.target.name){var u=DartSys.ins().hasJoinCarById(e.id),h=Cfg.getConfig(DartConstConfig);return!u&&e.dartDivisions.length>=h.dartCarNumber[GuildSys.ins().guildLv]?void showtipsFail("本趟宝藏当前护卫人数已满"):void DartSys.ins().sendChoiceCar(e.id)}"cancelBtn"==t.target.name&&DartSys.ins().sendChoiceCar(e.id)}},e.prototype.updateJoinCar=function(){var t=DartSys.ins().hasJoinCarNum();this.eConvoyLab.text=DartSys.MAXJOIN-t+"/"+DartSys.MAXJOIN},e.prototype.updateUI=function(){var t=this.eList.selectedItem;if(t){this.updateJoinCar();var e=DartSys.ins(),i=(Cfg.getConfig(DartConstConfig),t.dartDivisions.length),n=e.getCarJoinRoleNumByLv(t.lv+1);this.joinbar.maximum=n,this.joinbar.value=i;var a=Cfg.getConfigLength(DartCarConfig);if(t.lv+1<=a){var o=e.getCarJoinRoleNumByLv(t.lv+1)-i,s="再加入"+addColor(o,"#32FF00")+"人护送，宝藏升级为"+addColor(t.lv+1,"#FF0000")+"级！";this.uplvDes.textFlow=addColorTF(s)}else this.uplvDes.text="";var r=t.dartDivisions.concat(),u=Cfg.getConfigs(DartRobotConfig,t.lv);for(var h in u){var l=u[h],p=new DartDivision;p.zsLv=l.level,p.power=l.power,p.name=l.name,r.push(p)}this.memberArr.source=r,this.eRewardImg.source=e.hasJoinCarById(t.id)&&4==t.state?"hwbz_zycs_yhdjl":"hwbz_zycs_jlxq";var c=Cfg.getConfig(DartCarLevelRewardConfig,t.lv,t.canPlunderNum),d=new ItemDataReward;d.id=CurType.DartGuildScore,d.count=c.guild_score,this.guildrewardArr.source=[d],d=new ItemDataReward,d.id=CurType.DartScore,d.count=c.personal_score,this.rewardArr.source=[d]}},e.prototype.updateList=function(){this.listDP.source=DartSys.ins().guildCarData.concat(),this.eList.selectedIndex<0&&(this.eList.selectedIndex=this.selectId=0),this.eList.dispatchEvent(new egret.Event(egret.TouchEvent.CHANGE))},e.prototype.onChange=function(){var t=this.eList.getElementAt(this.selectId);t&&t.setSelect(!1),this.selectId=this.eList.selectedIndex,t=this.eList.getElementAt(this.selectId),t&&t.setSelect(!0),this.updateUI()},e.getSysId=function(){return 318},e.getTitle=function(){return"btz_zycs_sjmg"},e.getTabTitle=function(){return"护送宝藏"},e}(BasePanel);__reflect(DartJoinPanel.prototype,"DartJoinPanel"),window.DartJoinPanel=DartJoinPanel;var DartPlunderPanel=function(t){function e(){var e=t.call(this)||this;return e.listTotalW=0,e.itemRenderW=0,e.itemRenderGapH=0,e.udpateCount=10,e.oldState=-1,e.init(),e}return __extends(e,t),e.prototype.init=function(){this.skinName="DartPlunderPanelEUI",this.eBoxBtns=[null,this.eBoxBtn0,this.eBoxBtn1,this.eBoxBtn2,this.eBoxBtn3],this.redPoints=[null,this.redPoint0,this.redPoint1,this.redPoint2,this.redPoint3],this.boxMC0=new MC,this.box0.addChild(this.boxMC0),this.boxMC1=new MC,this.box1.addChild(this.boxMC1),this.boxMC2=new MC,this.box2.addChild(this.boxMC2),this.boxMC3=new MC,this.box3.addChild(this.boxMC3),this.boxMClist=[this.boxMC0,this.boxMC1,this.boxMC2,this.boxMC3],this.boxGroup=[null,this.box0,this.box1,this.box2,this.box3],this.eScoreLabs=[null,this.eLab0,this.eLab1,this.eLab2,this.eLab3],this.eCarList.itemRenderer=DartPlunderPanelCarItem,this.carsDP=new eui.ArrayCollection,this.eCarList.dataProvider=this.carsDP,this.eCarScroller.touchEnabled=!1,this.bar.labelFunction=function(){return""}},e.prototype.open=function(){t.prototype.open.call(this),DartSys.ins().sendInfo(),this.addLsn(DartSys.ins().patchInfo,this.refreshCarList),this.addLsn(DartSys.ins().patchUpdateCar,this.updateCarList),this.addLsn(DartSys.ins().patchRefreshCar,this.refreshCarList),this.addLsn(DartSys.ins().patchScoreReward,this.updateScore),this.addLsn(DartSys.ins().patchBuyLing,this.updateLing),this.addLsn(LogicSys.ins().patchCurrency,this.updateCurrency),this.addClickE(this,this.onClick),this.refreshCarList(),this.updateScore(),this.updateState(),this.updateChangeNum()
},e.prototype.close=function(){t.prototype.close.call(this),this.skin&&egret.Tween.removeTweens(this.eCarScroller.viewport)},e.prototype.updateCurrency=function(t){t.type==CurType.DartLueduoLing&&this.updateLing(),t.type==CurType.DartScore&&this.updateScore()},e.prototype.updateTime=function(){this.updateState(),this.udpateCount--,this.udpateCount||(this.updateTimer(),this.udpateCount=10)},e.prototype.updateTimer=function(){2==DartSys.ins().openState&&DartSys.ins().sendRefreshCar(2)},e.prototype.onClick=function(t){if(t.target instanceof eui.Button){var e=this.eBoxBtns.indexOf(t.target);if(-1!=e)return void openWin(DartBaoxiangWin,e)}else if(this.boxGroup.indexOf(t.target)>=0){var e=this.boxGroup.indexOf(t.target);if(-1!=e)return void openWin(DartBaoxiangWin,e)}else if(t.target instanceof DartPlunderPanelCarItem){var i=t.target.data;return void DartSys.ins().openPlunderInfoWin(i)}switch(t.target){case this.eListBtn:2==DartSys.ins().openState?openWin(DartLueduoWin):showtipsFail("活动暂未开启");break;case this.eLingBtn:DartSys.ins().buyLing();break;case this.eChangeBtn:2==DartSys.ins().openState?DartSys.ins().refreshCars():showtipsFail("活动暂未开启");break;case this.eLogBtn:openWin(DartRecordWin)}},e.prototype.updateChangeNum=function(){this.eChangeNum.text=DartSys.ins().refreshCount.toString(),this.bg_eChangeNum.visible=this.eChangeNum.visible=2==DartSys.ins().openState},e.prototype.updateState=function(){this.eTimeGroup1.visible=!1;var t=DartSys.ins().openState,e=Actor.ins().serverTime;2==this.oldState&&this.oldState!=t&&(egret.Tween.removeTweens(this.eCarScroller.viewport),this.eCarList.visible=!1),this.oldState!=t&&(this.opentime=DartSys.ins().openTime);var i=this.opentime;switch(this.oldState=t,t){case 1:var n=60*i[0]*60+60*i[1];this.refreshTime2.text=DateUtil.formatTime(1e3*n,"hh:mm:ss"),n=Math.max(i[2]-e,0),this.eTimeGroup2.visible=this.eTimeGroup3.visible=n>0,this.refreshTime3.text=DateUtil.formatTime(Math.max(i[2]-e,0),"hh:mm:ss"),this.eTimeGroup0.visible=!1;break;case 2:this.eTimeGroup2.visible=this.eTimeGroup3.visible=!1;var a=Math.max(i[2]-e,0);this.eTimeGroup1.visible=this.eTimeGroup0.visible=a>0,this.refreshTime0.text=DateUtil.formatTime(a,"hh:mm:ss");var o=DartSys.ins().challengeCD-e;o>0?(this.refreshTime1.textColor=16711680,this.refreshTime1.text=DateUtil.formatTime(o,"hh:mm:ss")):(this.refreshTime1.textColor=65280,this.refreshTime1.text="可掠夺");break;default:this.eTimeGroup0.visible=this.eTimeGroup2.visible=this.eTimeGroup3.visible=!1}this.img_timebg.visible=this.eTimeGroup1.visible||this.eTimeGroup0.visible},e.prototype.updateScore=function(){var t,e=Actor.ins().getCurrency(CurType.DartScore),i=Cfg.getConfigs(DartJifenConfig);Cfg.getConfigLength(DartJifenConfig);for(var n in i)if(t=i[n],e<=t.jifen)break;this.eScoreLab.text=e+"",100!=this.bar.maximum&&(this.bar.maximum=100),this.bar.value=this.getCurExpPercent(e),this.updateReward()},e.prototype.getCurExpPercent=function(t){var e=Cfg.getConfigs(DartJifenConfig),i=0,n=e.length,a=0,o=100/n,s=0,r=Cfg.getMaxConfig(DartJifenConfig).jifen;if(t>r)i=100;else{for(var u=[s],h=0;h<e.length;h++){var l=e[h].jifen;u.push(l)}for(var h=0;h<u.length;h++){var p=u[h];t>=p&&(a=h+1)}var c=(a-1)*o,d=u[a-1],g=u[a],f=g-d,y=(t-d)/f*o;i=c+y}return i},e.prototype.getBarValue=function(t){for(var e=Cfg.getConfigs(DartJifenConfig),i=Cfg.getMaxConfig(DartJifenConfig).jifen,n=i,a=i/(e.length-1),o=0,s=0;s<e.length;s++){var r=e[s].jifen;if(r>=t){n=(t-o)/(r-o)*a+a*Math.max(s-1,0);break}o=r}return Math.floor(n)},e.prototype.updateReward=function(){var t=Cfg.getConfigs(DartJifenConfig);for(var e in t){var i=t[e].idx,n=DartSys.ins().getRewardStateById(i),a=this.eBoxBtns[i];if(a)switch(this.redPoints[i].visible=1==n,this.setBoxMc(i,1==n),n){case 1:this.eScoreLabs[i].text="可领取",this.eScoreLabs[i].textColor=5767068;break;case 2:this.eScoreLabs[i].text="已领取",this.eScoreLabs[i].textColor=5767068;break;default:this.eScoreLabs[i].text=t[e].jifen+""}}},e.prototype.setBoxMc=function(t,e){var i=this.boxMClist[t-1];e?i.playFile(ResMgr.getEffName("hwbz_box"+t),-1):i.visible=!1},e.prototype.updateLing=function(){this.eLingNum.text=Actor.ins().getCurrency(CurType.DartLueduoLing)+""},e.prototype.updateCarList=function(){var t=this.carsDP.source;if(t&&t.length)for(var e=0;e<t.length;e++)this.carsDP.itemUpdated(t[e]);else this.refreshCarList()},e.prototype.refreshCarList=function(){this.updateLing(),this.updateChangeNum(),egret.Tween.removeTweens(this.eCarScroller.viewport),this.eCarList.visible=!1;var t=3,e=DartSys.ins().carDatas.concat();if(e&&0!=e.length){var i=e.shift(),n=[];for(0==e.length&&(Math.random()>.5&&n.push(null),Math.random()>.5&&n.push(null));e.length>0;){for(var a=[],o=0;t-1>o&&(Math.random()>.5&&a.push(null),!(e.length<=0));o++)a.push(e.shift()),a.push(null);n=n.concat(a)}n.push(i),this.carsDP.replaceAll(n),this.eCarList.validateNow(),this.itemRenderW=this.eCarList.getVirtualElementAt(0).width,this.itemRenderGapH=this.eCarList.layout.horizontalGap;var s=Math.ceil(n.length/3);this.listTotalW=s*this.itemRenderW+(s-1)*this.itemRenderGapH,this.moveCars()}},e.prototype.moveCars=function(){var t=this;this.eCarList.visible=2==DartSys.ins().openState;var e=this.eCarScroller.width/12e3,i=this.listTotalW>this.eCarScroller.width?this.listTotalW:this.eCarScroller.width,n=Number(i/e);n=12e3>n?12e3:n;Math.ceil(this.eCarList.dataProvider.length/3);this.eCarScroller.viewport.scrollH=this.listTotalW;var a=egret.Tween.get(this.eCarScroller.viewport,{loop:!0});a.to({scrollH:-(this.eCarScroller.width+this.itemRenderW/2)},n).call(function(){t.eCarScroller.viewport.scrollH=t.listTotalW},this)},e.getSysId=function(){return 318},e.getTitle=function(){return"btz_zycs_sjmg"},e.getTabTitle=function(){return"掠夺宝藏"},e}(BasePanel);__reflect(DartPlunderPanel.prototype,"DartPlunderPanel"),window.DartPlunderPanel=DartPlunderPanel;var DartRankPanel=function(t){function e(){var e=t.call(this)||this;return e.init(),e}return __extends(e,t),e.prototype.init=function(){this.skinName="DartRankPanelEUI",this.eList.itemRenderer=DartRankPanelItem,this.listArr=new eui.ArrayCollection,this.eList.dataProvider=this.listArr,this.eListItem.itemRenderer=ItemBaseReward,this.listItemArr=new eui.ArrayCollection,this.eListItem.dataProvider=this.listItemArr},e.prototype.open=function(){t.prototype.open.call(this);var e=DartSys.ins();this.addLsn(e.patchPersonalRank,this.updateUI),e.sendPersonalRank()},e.prototype.close=function(){t.prototype.close.call(this)},e.prototype.updateUI=function(){var t=DartSys.ins().personalRanks.concat(),e=DartSys.ins().oneselfRankData;this.state.visible=null==t,this.eMyRank.text=e[1]?e[1]+"":"未上榜",this.myscore.text="积分："+e[0];var i=t&&t.length>0?t[0]:null,n=[],a=20;if(t.length>=20)n=t.concat();else for(var o=0;a>o;o++)t[o]?n.push(t[o]):n.push(null);this.listArr.source=n,this.eName.text=i?i.name:"",this.firsg.visible=!!i,this.sServer.text="",this.eScore.text=i?"积分："+i.score:"积分：0",this.guildName.text=i&&""!=i.guildName?"[仙盟："+i.guildName+"]":"未加入仙盟";var s=Cfg.getConfigs(DartPersonRankConfig);this.listItemArr.source=i?s[0].award:[];var r=DartSys.ins().firstData;r?this.updateComMC(r.szId,r.damonId,r.wingId,r.sqId):this.groupMc.removeChildren()},e.prototype.updateComMC=function(t,e,i,n){this.groupMc.removeChildren();var a=Cfg.getConfig(SzHuanhuaBaseConfig,t).uirole;e=0>=e?1:e;var o=Cfg.getConfig(DamonHuanhuaBaseConfig,e),s=o.uirole,r=o.uihigh;if(this.groupMc.addChild(MC.createCenterGruop(s,-1)),i){var u=Cfg.getConfig(WingHuanhuaBaseConfig,i).uirole,h=MC.createCenterGruop(u,-1);h.verticalCenter=-r,this.groupMc.addChild(h)}var l=MC.createCenterGruop(a[0],-1);l.verticalCenter=-r,this.groupMc.addChild(l),this.groupMc.addChild(MC.createCenterGruop("up_"+s,-1));var p=Cfg.getConfig(ShenqiHuanhuaBaseConfig,n).uirole;l=MC.createCenterGruop(p,-1),l.verticalCenter=-r,this.groupMc.addChild(l)},e.getSysId=function(){return 318},e.getTitle=function(){return"btz_zycs_sjmg"},e.getTabTitle=function(){return"个人排行"},e}(BasePanel);__reflect(DartRankPanel.prototype,"DartRankPanel"),window.DartRankPanel=DartRankPanel;var BossHomePanel=function(t){function e(){var e=t.call(this)||this;return e.MCmonster=new MC,e.initUI(),e}return __extends(e,t),e.prototype.initUI=function(){this.skinName="BossHomePanelEUI",this.setSkinPart("priceIcon",new PriceIcon),this.list.itemRenderer=BossHomePanelItem,this.list.dataProvider=this.listData=new eui.ArrayCollection,this.listReward.itemRenderer=ItemBase,this.listReward.dataProvider=this.listRewardData=new eui.ArrayCollection,this.MCmonster.touchEnabled=!1,this.groupBoss.addChild(this.MCmonster),this.priceIcon.setType(CurType.yb),this.svipImg.visible=this.checkGroup.visible=!urlParam.isShenhe},e.prototype.open=function(){t.prototype.open.call(this),this.addItemTapE(this.list,this.onMenuClick),this.addClickE(this,this.onClick),FbSys.ins().sendBossHomeInfo(),FbSys.ins().sendBossHomeListInfo(),this.addLsn(FbSys.ins().patchBossHomeListInfo,this.onUpdateList),this.addLsn(FbSys.ins().patchBossHomeHpChange,this.updateAlive),this.addClickE(this,this.onClick),this.list.selectedIndex=0,this.onUpdateList(),this.updatePanel(),this.checkBoxAuto.selected=FbSys.ins().gettAutoChallengeFuBenBySysId(this.getSysId()),this.list.validateNow(),this.onUpdateTime()},e.prototype.updateAlive=function(){this.onUpdateList(),this.updatePanel(),this.onUpdateTime()},e.prototype.onUpdateTime=function(){var t=FbSys.ins().bossHomeModel.leftRefreshTime;t>0?Timer.ins()["do"](0,1e3,Math.ceil(t/1e3),this.formatCountDown,this):this.lbTimer.text=Lang.common_str56},e.prototype.formatCountDown=function(t){if(t>0)for(var e=0;e<this.list.numChildren;e++){var i=this.list.getChildAt(e);i.setTime(getFormatTime(t,"hh:mm:ss")+Lang.fb_str10),this.lbTimer.text=""+(getFormatTime(t,"hh:mm:ss")+Lang.fb_str10)}},e.prototype.onUpdateList=function(){var t=FbSys.ins().bossHomeModel.openData().concat();SortUtil.sortOn(t,["isopen","isDieNumber","id"],[SortType.down,SortType.down,SortType.down]);var e=FbSys.ins().bossHomeModel.noOpenData().concat();SortUtil.sortOn(e,["isopen","isDieNumber","id"],[SortType.down,SortType.down,SortType.up]),t=t.concat(e),this.listData.source=t},e.prototype.onMenuClick=function(t){this.updatePanel()},e.prototype.updatePanel=function(){var t=this.data,e=t.config,i=t.bossHomeCommonConfig;this.listRewardData.source=GFunc.creatItemsDataById(t.config.desc);var n="";n=1e4==e.zslevel?""+GFunc.GetLvStrByLv(e.level):""+GFunc.getZSNameBydb(e.zslevel),this.lbName.text=t.monsterName+" "+n,this.barhp.value=t.hpPecent;var a=Cfg.getConfig(MonsterModelConfig,t.monsterModel),o=ResMgr.getMonsterSource(a.appearance,5,EntityAction.STAND);this.MCmonster.playFile(o,-1),this.MCmonster.scaleY=a.scale,this.MCmonster.scaleX=-1*a.scale,1e4==e.zslevel?this.lbLevel.text=GFunc.GetLvStrByLv(e.level)+"开启":this.lbLevel.text=GFunc.getZSNameBydb(e.zslevel)+"开启",this.priceIcon.setPrice(i.needYuanbao),this.updateBossHP(),this.updateConsume(),this.updateStatus()},e.prototype.updateConsume=function(){var t=Cfg.getConfig(BosshomeCommonConfig),e=t.needitem,i=1,n=BagSys.ins().getItemCount(e),a=Cfg.getItemCfg(e);this.imgConsume.source=ResMgr.getItemIcon(a.getIcon()),n>=i?this.lbConsume.textFlow=addColorTF(n+"/"+i):this.lbConsume.textFlow=addColorTF(n+"/"+i,15732752)},e.prototype.updateBossHP=function(){this.barhp.value=this.data.hpPecent},e.prototype.updateStatus=function(){var t=this.data,e=(t.config,t.bossHomeCommonConfig),i=BagSys.ins().getItemById(e.needitem),n=i&&i.count>0;-1==t.isopen?this.currentState="level":t.isDie?this.currentState="die":Actor.ins().sVipLv>=e.vip?this.currentState="vip":n?this.currentState="item":this.currentState="zuanshi"},e.prototype.onClick=function(t){switch(t.target){case this.checkBoxAuto:var e=ActSys.ins().getActDataById(ActId.ID_99500);if(!e.isAct()){this.checkBoxAuto.selected=!1,showTipsWarn("激活至尊特权开启可用");var i="您未激活至尊特权,不可自动挑战,是否前往激活?",n=new PopupData(i);n.setFunction(this,function(){openWin(ZZTQWin)}),openWin(CommonTipsWin,n);break}var a=this.checkBoxAuto.selected;FbSys.ins().setAutoChallengeFuBen(this.getSysId(),a);break;case this.btnChallenge:if(!BagSys.ins().checkBagVolumn())return;if(!GFunc.checkGotoFuben())return void closeWin(BossWin);var o=this.data,s=(o.config,o.bossHomeCommonConfig);if(FbSys.ins().bossHomeModel.leftCdTime<=0){var r=BagSys.ins().getItemById(s.needitem),u=r&&r.count>0;if(Actor.ins().sVipLv>=s.vip)FbSys.ins().sendBossHomeFight(o.id),closeWin(BossWin);else if(u)FbSys.ins().sendBossHomeFight(o.id),closeWin(BossWin);else if(GFunc.getItemCount(CurType.yb)>=s.needYuanbao){var n=new PopupPriceData;n.desc=Lang.fb_str283,n.priceValue=s.needYuanbao,n.priceType=CurType.yb,n.setFunction(this,function(){FbSys.ins().sendBossHomeFight(o.id),closeWin(BossWin)}),openWin(CommonTipsWinNew,n)}else showtipsFail(Lang.common_str12)}else showtipsFail(Lang.fb_str11.replace("$second$",Math.ceil(FbSys.ins().bossHomeModel.leftCdTime/1e3).toString()))}},e.prototype.onLink=function(){openWin(BossHomeRemindWin)},Object.defineProperty(e.prototype,"data",{get:function(){return this.list.selectedItem},enumerable:!0,configurable:!0}),e.getSysId=function(){return 236},e.getTitle=function(){return"btz_zycs_boss"},e.getTabTitle=function(){return"fb_zycs_bzj"},e}(BasePanel);__reflect(BossHomePanel.prototype,"BossHomePanel"),window.BossHomePanel=BossHomePanel;var EmoPanel=function(t){function e(){var e=t.call(this)||this;return e.initUI(),e.initIcons(),e}return __extends(e,t),e.prototype.initUI=function(){this.setSkinName(),this.setSkinPart("itemConsume",new ItemBaseSimple),this.lbexpdouble.text="",this.lbOpenTime.text="",this.list.itemRenderer=ItemBaseRewardName;var t=!urlParam.isShenhe;this.lbbuyVip.visible=t,this.btnSurplus.visible=t},e.prototype.setSkinName=function(){this.skinName="EmoPanelSkin"},e.prototype.initIcons=function(){this.sysName=Lang.fb_str29,this.model=FbSys.ins().emoModel,this.imgBg.source="em_zycs_di_jpg"},e.prototype.sendEnterFb=function(){GFunc.checkGotoFuben()&&(FbSys.ins().guajiData.isGuanQia?openWin(WarnWin,"当前正在挑战天路，是否退出?",function(){FbSys.ins().sendEmoEnter(),closeWin(FuBenWin)},this):(FbSys.ins().sendEmoEnter(),closeWin(FuBenWin)))},e.prototype.sendBuyCount=function(){FbSys.ins().sendEmoBugCount()},e.prototype.open=function(){this.addClickE(this.btnintofuben,this.onclick),this.addClickE(this.btnConsumeAdd,this.onclick),this.addClickE(this.btnSurplus,this.onclick),this.addLsn(FbSys.ins().patchEmoInfo,this.onUpdate),this.addLsn(FbSys.ins().patchEmoDataTimer,this.onOpenTimeUpdate),this.addLsn(BagSys.ins().patchItemChange,this.onUpdateConsumeCount),this.addLsn(RpSys.ins().patchRp,this.onUpdateRedPoint),FbSys.ins().sendEmoInfo(),this.onUpdate(),this.onOpenTimeUpdate(),this.onUpdateRedPoint()},e.prototype.onUpdateRedPoint=function(t){void 0===t&&(t=null),(!t||t.check(e))&&(this.btnintofuben.redPoint.visible=RpSys.ins().getData(FuBenWin,FuBenEXPPanel,e))},e.prototype.onUpdate=function(){this.layName=Lang.replaceEnum("幽冥地宫 %s",this.model.fbId.toString()),this.labelLv.text="转生等级:"+GFunc.getZSNameBydb(this.model.fbConfig.zslevel),this.list.dataProvider=new eui.ArrayCollection(this.model.fbConfig.reward),this.lbTjPower.textFlow=addColorTF(""+Lang.fb_str30+StrUtil.addColor(this.model.fbConfig.power,13486270)),this.lbCurPower.textFlow=addColorTF(""+Lang.fb_str31+StrUtil.addColor(Actor.ins().power,Actor.ins().power>=this.model.fbConfig.power?5949490:15733780));var t=this.getDevilfbByLevel(),e=GFunc.GetLvStrByLv(t.level),i=""+(t.name+t.id);this.lbDesc.visible=!1,this.lbDesc.textFlow=addColorTF(Lang.fb_str266.replace("$level$",StrUtil.addColor(e,16115290)).replace("$name$",StrUtil.addColor(i,16115290))),this.emoDesc=Lang.replaceEnum("等级达到%s可挑战%s%s获得更多的经验",GFunc.getZSNameBydb(t.zslevel),this.getktzNmae(),t.id),this.groupLevelExp.visible=!this.model.isMax(),this.currentState=this.model.isMax()?"max":"normal",this.onUpdateConsumeCount()},e.prototype.getDevilfbByLevel=function(){return Cfg.getConfig(DevilfbConfig,CondType.More,DevilfbConfig.zslevel,Actor.ins().zsId)},e.prototype.getktzNmae=function(){return"幽冥地宫"},e.prototype.onOpenTimeUpdate=function(){var t=this.model.SweepEndTick-Timer.ins().getTimer();t>0&&Timer.ins()["do"](0,1e3,Math.ceil(t/1e3),this.formatCountDown,this)},e.prototype.onUpdateConsumeCount=function(t){void 0===t&&(t=null);var e=0;if(t){if(t.id!=this.model.fbConfig.items[0].id)return;e=t.count}else e=BagSys.ins().getItemCount(this.model.fbConfig.items[0].id);this.lbConsume.text=e+"/"+this.model.fbConfig.items[0].count,this.lbSurplus.text=this.model.leftCount+"/"+this.model.commonConfig.count;var i="";if(!this.model.leftCount&&!this.model.canbuyCount){var n=Cfg.getConfig(FubenConfig,this.model.fbConfig.fbId),a=Cfg.getNextVipExp(n.group);i=a?"提升至SVIP"+a+"可购买":"已达到购买上限"}this.lbbuyVip.text=i,this.itemConsume.data=GFunc.creatItemDataByReward(this.model.fbConfig.items[0])},e.prototype.formatCountDown=function(t){var e=t>0?16711680:5949490,i=StrUtil.addColor(getFormatTime(t,"hh:mm:ss")+Lang.fb_str33,e);this.lbOpenTime.textFlow=addColorTF(i)},e.prototype.onclick=function(t){var e=this;switch(t.currentTarget){case this.btnintofuben:if(!BagSys.ins().checkBagVolumn())return;if(this.model.result){if(0==this.model.leftCount)return void showTipsWarn(Lang.fb_str34.replace("$name$",this.sysName));var i=this.model.fbConfig.items[0];if(!GFunc.checkConsumeEnough(i))return;this.sendEnterFb()}else showTipsWarn(0==this.model.leftCount?Lang.fb_str34.replace("$name$",this.sysName):Lang.fb_str35.replace("$name$",this.sysName));break;case this.btnConsumeAdd:TipsSys.ins().setBuyGoodsWarn(this.model.fbConfig.items[0].id);break;case this.btnSurplus:if(this.model.leftCount>0)showTipsWarn(Lang.fb_str36);else if(this.model.canbuyCount>0){var n=new PopupPriceData(Lang.fb_str37.replace("$name$",this.sysName));n.priceValue=this.model.commonConfig.cost[0].count,n.priceType=this.model.commonConfig.cost[0].id,n.setFunction(this,function(){GFunc.checkCurrency(CurType.yb,e.model.commonConfig.cost[0].count)&&e.sendBuyCount()}),openWin(CommonTipsWinNew,n)}else{var a=Cfg.getConfig(FubenConfig,this.model.fbConfig.fbId),o=Cfg.getNextVipExp(a.group);o?(showTipsWarn(Lang.fb_str38.replace("$lv$",""+o)),openWin(RechargeWin)):showTipsWarn(Lang.fb_str39)}}},e.getTitle=function(){return"btz_zycs_fb"},e.getTabTitle=function(){return"em_zycs_gn1"},e.getSysId=function(){return 250},e.prototype.getEnterBtn=function(){return this.btnintofuben},e}(BasePanel);__reflect(EmoPanel.prototype,"EmoPanel"),window.EmoPanel=EmoPanel;var EquipBossPanel=function(t){function e(){var e=t.call(this)||this;return e.initUI(),e}return __extends(e,t),e.prototype.initUI=function(){this.skinName="EquipBossPanelEUI",this.list.itemRenderer=EquipBossPanelItem,this.listData=new eui.ArrayCollection,this.list.dataProvider=this.listData,this.list.useVirtualLayout=!0,this.actGroup.visible=!urlParam.isShenhe},e.prototype.open=function(){t.prototype.open.call(this),this.addClickE(this,this.onClick),this.addLsn(FbSys.ins().patchEquipBossInfoUpdate,this.onUpdateList),this.addLsn(VipSys.ins().patchSvipData,this.updateSvipState),this.onUpdateList(),this.updatePanel()},e.prototype.onUpdateList=function(){for(var t=this.list.numElements,e=0;t>e;e++){var i=this.list.getElementAt(e);i&&i.dataChanged()}},e.prototype.updatePanel=function(){var t=FbSys.ins().equipBossModel.openData().concat();SortUtil.sortOn(t,["isopenNumber","isDieNumber","havCount","getZsLv","getLv"],[SortType.down,SortType.down,SortType.down,SortType.down,SortType.down]);var e=FbSys.ins().equipBossModel.noOpenData().concat();SortUtil.sortOn(e,["isopenNumber","getZsLv","getLv"],[SortType.down,SortType.up,SortType.up]),t=t.concat(e),this.listData.source=t,this.updateSvipState()},e.prototype.updateSvipState=function(){var t=Cfg.getConfig(ShilianCommonConfig),e=Actor.ins().sVipLv>=t.viplevel;this.btnActSVip.visible=!e&&!urlParam.isShenhe,this.btnOneKey.visible=e,this.lbDesc.text="SVIP"+t.viplevel+"可一键扫荡"},e.prototype.onClick=function(t){switch(t.target){case this.btnOneKey:if(!BagSys.ins().checkBagVolumn())return;if(!GFunc.checkGotoFuben())return void closeWin(BossWin);var e=FbSys.ins().equipBossModel;e.allBossDie()?showtipsFail("Boss复活中，请稍后再挑战"):e.noSaoDanCount()?showtipsFail("挑战次数不足"):FbSys.ins().sendEquipBossOneKey();break;case this.btnActSVip:var i=Cfg.getConfig(ShilianCommonConfig),n=new PopupData("一键扫荡需要SVIP"+i.viplevel+",是否立即提升SVIP");n.setFunction(this,function(){openWin(RechargeActSys.ins().firstRechargeData.isRecharge()?RechargeWin:FirstRechargeBuyWin)}),openWin(CommonTipsWin,n)}},e.prototype.updateTime=function(){for(var t=this.list.numElements,e=0;t>e;e++){var i=this.list.getElementAt(e);i&&i.updateTime()}},e.prototype.getBtnChallenge=function(){var t=this.list.getElementAt(0);return t.getBtnChallenge()},e.getSysId=function(){return 233},e.getTitle=function(){return"btz_zycs_boss"},e.getTabTitle=function(){return"fb_zycs_zbbs"},e}(BasePanel);__reflect(EquipBossPanel.prototype,"EquipBossPanel"),window.EquipBossPanel=EquipBossPanel;var HeiAnPanel=function(t){function e(){var e=t.call(this)||this;e.skinName="HeiAnSkin";for(var i=0;3>i;i++)e.setSkinPart("demonsItem"+(i+1),new HeiAnItem);return e}return __extends(e,t),e.prototype.open=function(){this.fubenModel=FbSys.ins().heianModel,this.addClickE(this.btnclearance,this.onclick),this.addClickE(this.btnMopUp,this.onclick),this.addClickE(this.lbranking,this.onclick),this.addLsn(FbSys.ins().patchHeianInfo,this.updateData),this.addLsn(RpSys.ins().patchRp,this.updateRp),this.listPrize1.itemRenderer=ItemBaseReward,this.listPrize2.itemRenderer=ItemBaseReward,this.updateData(),this.updateRp()},e.prototype.updateRp=function(t){void 0===t&&(t=null),(null==t||t.check(e))&&(this.btnclearance.redPoint.visible=RpSys.ins().getData(ExtCom,FuBenWin,FuBenDanRenPanel,e,"tz"),this.btnMopUp.redPoint.visible=RpSys.ins().getData(ExtCom,FuBenWin,FuBenDanRenPanel,e,"sd"))},e.prototype.updateData=function(){var t=Cfg.getConfig(HeianfbConfig,this.fubenModel.fbId||1);0==this.fubenModel.fbId?this.lbtake.text=Lang.fb_str74:this.lbtake.text=t.name,this.ceng=Lang.replaceEnum("第%s层",t.idx),this.power=Lang.replaceEnum("推荐战力：%s",t.power);var e;e=this.fubenModel.maxCount==this.fubenModel.fbId?Cfg.getConfig(HeianfbConfig,this.fubenModel.fbId):Cfg.getConfig(HeianfbConfig,this.fubenModel.fbId+1),this.listPrize1.dataProvider=new eui.ArrayCollection(e.normalAwards),this.listPrize2.dataProvider=new eui.ArrayCollection(e.saodangAwards),0==this.fubenModel.status?(this.lbtimer.visible=!1,this.btnMopUp.label=Lang.common_str121,this.btnMopUp.enabled=!0):-1==this.fubenModel.status?(this.lbtimer.visible=!1,this.btnMopUp.label=Lang.common_str83,this.btnMopUp.enabled=0!=this.fubenModel.resetCount):(this.btnMopUp.label=Lang.fb_str59,this.lbtimer.visible=!0,Timer.ins()["do"](0,1e3,this.fubenModel.status,this.SweepCountDown,this)),this.fubenModel.maxCount==this.fubenModel.fbId&&(this.btnclearance.visible=!1,this.lbPrompt.visible=!0)},e.prototype.SweepCountDown=function(){var t=(this.fubenModel.SweepEndTick-Timer.ins().getTimer())/1e3;this.lbtimer.text=getFormatTime(t,"mm分ss秒")},e.prototype.onclick=function(t){switch(t.currentTarget){case this.btnclearance:if(FuwenSys.ins().getBagCount()<5)return void showtipsFail(Lang.fb_str75);GFunc.checkGotoFuben()&&(FbSys.ins().guajiData.isGuanQia?openWin(WarnWin,"当前正在挑战天路，是否退出?",function(){FbSys.ins().sendDekaronHeiAn(),closeWin(FuBenWin)},this):(FbSys.ins().sendDekaronHeiAn(),closeWin(FuBenWin)));break;case this.btnMopUp:if(0==this.fubenModel.fbId)return void showtipsFail(Lang.fb_str76);var e=Cfg.getConfig(HeianfbConfig,this.fubenModel.fbId);if(0==this.fubenModel.status){var i=Lang.fb_str77.replace("$name$",""+e.name),n=new PopupData(i);n.setFunction(this,function(){FbSys.ins().sendDekaronSweepHeiAn(),showtipsSuc("扫荡完毕后请前往邮件领取奖励")}),openWin(CommonTipsWin,n)}else if(-1==this.fubenModel.status)if(this.fubenModel.isResetFree){var n=new PopupPriceData(Lang.fb_str78);n.priceValue=0,n.priceType=CurType.yb,n.setFunction(this,function(){FbSys.ins().sendDekaronSweepResetHeiAn()}),openWin(CommonTipsWinNew,n)}else if(this.fubenModel.resetCount>0){var i=Lang.fb_str79.replace("$floor$",""+e.idx),n=new PopupPriceData(i);n.priceValue=Cfg.getConfig(HeianfbBaseConfig,1).cost,n.priceType=CurType.yb,n.setFunction(this,this.sureFun),openWin(CommonTipsWinNew,n)}else showtipsFail(Lang.fb_str80);else showtipsFail(Lang.fb_str59);break;case this.lbranking:openWin(WanMoRanPanel,RankType.HeiAn)}},e.prototype.sureFun=function(){GFunc.isCurrency(CurType.yb,Cfg.getConfig(HeianfbBaseConfig,1).cost)?FbSys.ins().sendDekaronSweepResetHeiAn():showtipsFail(Cfg.getItemCfg(CurType.yb)+Lang.fb_str81)},e.prototype.getFightBtn=function(){return this.btnclearance},e.getTitle=function(){return"btz_zycs_hasy"},e.getTabTitle=function(){return"fb_zycs_hasy"},e.getSysId=function(){return 248},e}(BasePanel);__reflect(HeiAnPanel.prototype,"HeiAnPanel"),window.HeiAnPanel=HeiAnPanel;var JJCPanelNew=function(t){function e(){var e=t.call(this)||this;return e.skinName="JJCPanelNewEUI",e.setSkinPart("item0",new JJCMCItem),e.setSkinPart("item1",new JJCMCItem),e.setSkinPart("item2",new JJCMCItem),e.items=[e.item0,e.item1,e.item2],e.list.itemRenderer=ItemBaseReward,e.list.dataProvider=e.listData=new eui.ArrayCollection,e.btnBuyCount.visible=!urlParam.isShenhe,e}return __extends(e,t),e.prototype.open=function(){t.prototype.open.call(this),this.addClickE(this.btnShop,this.onClick),this.addClickE(this.btnReward,this.onClick),this.addClickE(this.btnBuyCount,this.onClick),this.addClickE(this.btnRefresh,this.onClick),this.addClickE(this.btnCD,this.onClick),this.addClickE(this.btnRank,this.onClick),this.addClickE(this.item0,this.onItemClick),this.addClickE(this.item1,this.onItemClick),this.addClickE(this.item2,this.onItemClick),this.addLsn(JJCSys.ins().patchInfoInit,this.updateRank),this.addLsn(JJCSys.ins().patchJJCresult,this.updateRank),this.addLsn(JJCSys.ins().patchRefreshJJC,this.updateMC),this.addLsn(JJCSys.ins().patchBuyFightCount,this.updateCount),this.infoPanel(),this.updateTime(),JJCSys.ins().sendRefreshJJC()},e.prototype.infoPanel=function(){this.updateMC(),this.updateRank()},e.prototype.updateTime=function(){var t=JJCSys.ins().getCD();t>0?(this.btnCD.visible=!0,this.lbTime.text=Lang.fb_str91+"\n"+getFormatTime(t/1e3,"hh:mm:ss"),this.btnRefresh.visible=!1):(this.btnCD.visible=!1,this.btnRefresh.visible=!0,this.lbTime.text="")},e.prototype.updateMC=function(){for(var t=JJCSys.ins().getJJCPlayers(),e=0;e<this.items.length;e++)this.items[e].data=t[e]},e.prototype.updateRank=function(){this.lbRank.textFlow=addColorTF(""+Lang.fb_str89+StrUtil.addColor(JJCSys.ins().myRank,13486270)),this.lbBest.textFlow=addColorTF(""+Lang.common_str53+StrUtil.addColor(JJCSys.ins().myBestRank,13486270)),this.lbPower.textFlow=addColorTF(""+Lang.common_str51+StrUtil.addColor(Actor.ins().power,13486270)),this.listData.source=Cfg.getJJCRewardByRank(JJCSys.ins().myRank).dailyReward,this.updateCount()},e.prototype.updateCount=function(){var t=StrUtil.addColor(JJCSys.ins().getLeftFightCount()+"/"+Cfg.getConfig(JjcConstConfig).challengesCount,JJCSys.ins().hasFightCount()?5767068:15733780);this.lbCount.textFlow=addColorTF(""+Lang.common_str52+t)},e.prototype.onItemClick=function(t){if(BagSys.ins().checkBagVolumn()&&GFunc.checkGotoFuben()){if(JJCSys.ins().getCD()>0)return void showtipsFail(Lang.jjc_str6);if(!JJCSys.ins().hasFightCount())return void showtipsFail(Lang.fb_str86);var e=t.currentTarget.data;e&&(JJCSys.ins().sendJJCFight(e.actorId),closeWin(JJCWin))}},e.prototype.onClick=function(t){switch(t.currentTarget){case this.btnShop:openWin(ShopWin,ShopWin.getTabIndexbyPanel(ShopPanel),ShopPanel.getTabIndexbyPanel(ShopRongyuPanel));break;case this.btnReward:openWin(JJCRewardWin);break;case this.btnBuyCount:if(JJCSys.ins().getBuyCount()>0){var e=GFunc.creatRewardDataById(CurType.yb,Cfg.getJJCBuyPrice(JJCSys.ins().buyCount)),i=new PopupPriceData(Lang.fb_str90);i.priceValue=e.count,i.priceType=e.id,i.setFunction(this,function(){GFunc.checkConsumeEnough(e)&&JJCSys.ins().sendBuyFightCount()}),openWin(CommonTipsWinNew,i)}else openWin(SVipTipsWin,256);break;case this.btnRefresh:JJCSys.ins().sendRefreshJJC();break;case this.btnCD:var n=Math.ceil(Cfg.getConfig(JjcConstConfig).cdPrice*(JJCSys.ins().getCD()/1e3)),a=new PopupPriceData(Lang.jjc_str7);a.priceValue=n,a.priceType=CurType.yb,a.setFunction(this,function(){GFunc.checkCurrency(CurType.yb,n)&&JJCSys.ins().sendCdTime()}),openWin(CommonTipsWinNew,a);break;case this.btnRank:openWin(JJCRankPanel)}},e.getTitle=function(){return"btz_zycs_jjc"},e.getTabTitle=function(){return"dfwz_zycs_tap1"},e.getSysId=function(){return 256},e.prototype.getJJCItem=function(t){return this.items[t]},e}(BasePanel);__reflect(JJCPanelNew.prototype,"JJCPanelNew"),window.JJCPanelNew=JJCPanelNew;var QuanMinPanel=function(t){function e(){var e=t.call(this)||this;return e.selectIndex=0,e.skinName="QuanMinPanelEUI",e.timeTxt.visible=!1,e.list.itemRenderer=QuanMinPanelItem,e.listData=new eui.ArrayCollection,e.list.dataProvider=e.listData,e.list.useVirtualLayout=!0,e.listReward.itemRenderer=ItemBase,e.listReward.dataProvider=e.listRewardData=new eui.ArrayCollection,e.scroller&&(e.pageArrowComponentBase=new PageArrowCom(e.scroller,106,108),e.pageArrowComponentBase.setBtn(e.btnLeft,e.btnRight)),e.checkGroup.visible=!urlParam.isShenhe,e}return __extends(e,t),e.prototype.open=function(){t.prototype.open.call(this),FbSys.ins().sendJuWangInfo(),FbSys.ins().sendJueWangList(),this.addLsn(FbSys.ins().patchJueWangList,this.updatePanel),this.addLsn(FbSys.ins().patchJueWangUpdateInfo,this.updatePanel),this.addLsn(FbSys.ins().patchJueWangInfo,this.updatePanel),this.addLsn(RpSys.ins().patchRp,this.updateRp),this.addClickE(this,this.onClick),this.addItemTapE(this.list,this.onMenuClick),this.pageArrowComponentBase.open(),this.iniList();var e=FbSys.ins().juewangModel.getCurBossIndex();this.selectIndex=~e?e:0,this.list.selectedIndex=this.selectIndex,this.pageArrowComponentBase.setListIndex(this.selectIndex),this.updatePanel(),this.onUpdateInfo(),this.checkBoxAuto.selected=FbSys.ins().gettAutoChallengeFuBenBySysId(this.getSysId())},e.prototype.updateRp=function(t){if(void 0===t&&(t=null),!t||t.check(e))for(var i=this.list.numElements,n=0;i>n;n++){var a=this.list.getElementAt(n);a&&a.updateRedPoint()}},e.prototype.iniList=function(){var t=FbSys.ins().juewangModel.openData();SortUtil.sortOn(t,["id"],[SortType.up]);var e=FbSys.ins().juewangModel.noOpenData();SortUtil.sortOn(e,["id"],[SortType.up]);var i=t.concat(e);this.listData.source=i},e.prototype.onUpdateList=function(){},e.prototype.updatePanel=function(){var t=this.selectData;this.listRewardData.source=GFunc.creatItemsDataById(t.config.desc),this.lbZHengDuoCount.text="争夺人数:"+t.people+"人",this.lbLastName.text="上轮第一:"+(""==t.lastName?"虚位以待":t.lastName),this.imgBossIcon.source=ResMgr.getMonsterHead(t.monsterHead),this.lbName.text=t.monsterName+" "+t.getLevelName(),this.barhp.value=t.hp,this.lbLevel.text=t.getLevelName()+"开启",this.checkBoxGuanZhu.selected=t.isRemind,this.updateBossHP(),this.updateStatus(),this.onUpdateInfo()},e.prototype.updateBossHP=function(){this.barhp.value=this.selectData.hp},e.prototype.onUpdateInfo=function(){this.challengeCountTxt.text=FbSys.ins().juewangModel.challengeCount+"/"+Cfg.getConfig(DespairBossCommonConfig).maxCount},e.prototype.updateStatus=function(){var t=this.selectData;if(t.isopen?t.isDie?this.currentState="die":this.currentState="normal":this.currentState="level",this.oldState&&this.oldState!=this.currentState)for(var e=this.listData.source,i=0,n=e;i<n.length;i++){var a=n[i];this.listData.itemUpdated(a)}this.oldState=this.currentState},e.prototype.onMenuClick=function(t){this.selectData.isopen?(this.selectIndex=t.itemIndex,this.updatePanel()):(showtipsFail(this.selectData.getLevelName()+"开启"),this.list.selectedIndex=this.selectIndex)},e.prototype.onClick=function(t){switch(t.target){case this.checkBoxGuanZhu:FbSys.ins().sendJueWangRemind(this.selectData.id,this.checkBoxGuanZhu.selected);break;case this.btnChallenge:if(!BagSys.ins().checkBagVolumn())return;var e=this.list.selectedItem;TaskSys.ins().taskId==Cfg.getConfig(EnumConfig).juewangFirstTaskId&&0==TaskSys.ins().mainTaskStatus?(FbSys.ins().sendJueWangFight(e.id),closeWin(BossWin)):FbSys.ins().juewangModel.challengeCount<=0?showtipsFail(Lang.fb_str94):e.isDie?showtipsFail("BOSS复活中"):e.isFighting&&FbSys.ins().juewangModel.getTimeCDTick()>0?showtipsFail(FbSys.ins().juewangModel.getTimeCDTick().toFixed()+"秒后可进入"):GFunc.checkGotoFuben()&&(FbSys.ins().sendJueWangFight(e.id),closeWin(BossWin));
break;case this.checkBoxAuto:var i=ActSys.ins().getActDataById(ActId.ID_99500);if(!i.isAct()){this.checkBoxAuto.selected=!1,showTipsWarn("激活至尊特权开启可用");var n="您未激活至尊特权,不可自动挑战,是否前往激活?",a=new PopupData(n);a.setFunction(this,function(){openWin(ZZTQWin)}),openWin(CommonTipsWin,a);break}var o=this.checkBoxAuto.selected;FbSys.ins().setAutoChallengeFuBen(this.getSysId(),o)}},e.prototype.updateTime=function(){var t=Math.floor((FbSys.ins().juewangModel.restoreTime-Timer.ins().getTimer())/1e3);if(t>0?this.timeTxt.text=Lang.fb_str96.replace("$time$",""+getFormatTime(t,"mm:ss")):this.timeTxt.text="",this.timeTxt.visible=t>0&&FbSys.ins().juewangModel.challengeCount<Cfg.getConfig(DespairBossCommonConfig).maxCount,this.selectData.isDie){var e=(this.selectData.reliveTick-Timer.ins().getEgretTimer())/1e3;this.lbTimer.text="复活倒计时:"+getFormatTime(Number(e.toFixed(0)),"hh:mm:ss")}},e.prototype.getListBtn=function(t){return null},e.prototype.selectToItem=function(t){},Object.defineProperty(e.prototype,"selectData",{get:function(){return this.list.selectedItem},enumerable:!0,configurable:!0}),e.prototype.getBtnChallenge=function(){return this.btnChallenge},e.getSysId=function(){return 234},e.getTitle=function(){return"btz_zycs_boss"},e.getTabTitle=function(){return"fb_zycs_qmbs"},e}(BasePanel);__reflect(QuanMinPanel.prototype,"QuanMinPanel"),window.QuanMinPanel=QuanMinPanel;var KfBossPanel=function(t){function e(){var e=t.call(this)||this;return e.selectIndex=0,e.initUI(),e}return __extends(e,t),e.prototype.initUI=function(){this.skinName="KfBossPanelEUI",this.list.itemRenderer=KfBossPanelItem,this.listData=new eui.ArrayCollection,this.list.dataProvider=this.listData,this.list.useVirtualLayout=!0,this.listReward.itemRenderer=ItemBaseReward,this.listReward.dataProvider=this.listRewardData=new eui.ArrayCollection,this.scroller&&(this.pageArrowComponentBase=new PageArrowCom(this.scroller,112,108),this.pageArrowComponentBase.setBtn(this.btnLeft,this.btnRight)),this.checkGroup.visible=this.btnAdd.visible=!urlParam.isShenhe},e.prototype.open=function(){t.prototype.open.call(this),this.addLsn(KfSys.ins().patchBossDataUpdate,this.updatePanel),this.addLsn(KfSys.ins().patchBossListData,this.updatePanel),this.addLsn(KfSys.ins().patchBossCountBuy,this.updateCount),this.addLsn(RpSys.ins().patchRp,this.updateRp),this.addClickE(this,this.onClick),this.addItemTapE(this.list,this.onMenuClick),this.pageArrowComponentBase.open(),this.iniList(),this.selectIndex=KfSys.ins().bossModel.getCurBossIndex(),this.list.selectedIndex=this.selectIndex,this.pageArrowComponentBase.setListIndex(this.selectIndex),this.updatePanel(),this.checkBoxAuto.selected=FbSys.ins().gettAutoChallengeFuBenBySysId(this.getSysId())},e.prototype.updateRp=function(t){if(void 0===t&&(t=null),!t||t.check(e))for(var i=this.list.numElements,n=0;i>n;n++){var a=this.list.getElementAt(n);a&&a.updateRedPoint()}},e.prototype.iniList=function(){var t=KfSys.ins().bossModel.openData();SortUtil.sortOn(t,["zsLevel"],[SortType.up]);var e=KfSys.ins().bossModel.noOpenData();SortUtil.sortOn(e,["zsLevel"],[SortType.up]);var i=t.concat(e);this.listData.source=i,this.list.validateNow()},e.prototype.onUpdateList=function(){},e.prototype.updatePanel=function(){var t=this.data;if(t){var e=t.getBossConfig();this.listRewardData.source=e.desc,this.lbName.text=t.monsterName+" "+t.getLevelName(),this.lbLevel.text=t.getLevelName()+"开启";var i=Cfg.getConfig(MonsterModelConfig,t.monsterModel),n=ResMgr.getMonsterSource(i.appearance,4,EntityAction.STAND);this.entityMonster?this.entityMonster.name!=n&&this.entityMonster.playFile(n,-1):(this.entityMonster=MC.create(n,-1),this.groupEntity.addChild(this.entityMonster)),this.checkBoxGuanZhu.selected=t.isRemind,this.updateBossHP(),this.updateStatus(),this.updateCount(),this.updateTime()}},e.prototype.updateCount=function(){var t=KfSys.ins().bossModel;this.lbCount.textFlow=addColorTF(Lang.fb_str104.replace("$count$",StrUtil.addColor(""+t.guishuCount,5949490)))},e.prototype.updateBossHP=function(){},e.prototype.updateStatus=function(){var t=this.data;t.isopen?t.isDie?this.currentState="die":this.currentState="normal":this.currentState="level"},e.prototype.onMenuClick=function(t){this.data.isopen?(this.selectIndex=t.itemIndex,this.updatePanel()):(showtipsFail(this.data.getLevelName()+"开启"),this.list.selectedIndex=this.selectIndex)},e.prototype.onClick=function(t){switch(t.target){case this.checkBoxGuanZhu:KfSys.ins().sendBossRemind(this.data.index,this.checkBoxGuanZhu.selected);break;case this.btnChallenge:if(!BagSys.ins().checkBagVolumn())return;var e=KfSys.ins().bossModel.nextEnterTime;if(e>0)return void showtipsFail(""+e+Lang.fb_str106);GFunc.checkGotoFuben()&&KfSys.ins().sendBossFight(this.data.index),closeWin(BossWin);break;case this.checkBoxAuto:var i=ActSys.ins().getActDataById(ActId.ID_99500);if(i.isAct()){var n=this.checkBoxAuto.selected;FbSys.ins().setAutoChallengeFuBen(this.getSysId(),n)}else{this.checkBoxAuto.selected=!1,showTipsWarn("激活至尊特权开启可用");var a="您未激活至尊特权,不可自动挑战,是否前往激活?",o=new PopupData(a);o.setFunction(this,function(){openWin(ZZTQWin)}),openWin(CommonTipsWin,o)}break;case this.btnAdd:var s=KfSys.ins().bossModel;if(0==s.getBuyCount())return void openWin(SVipTipsWin,235);var r=GFunc.creatRewardDataById(CurType.yb,s.getBuyConsume()),u=new PopupPriceData("是否购买挑战次数");u.priceValue=r.count,u.priceType=r.id,u.setFunction(this,function(){GFunc.checkConsumeEnough(r)&&KfSys.ins().sendBossCountBuy()}),openWin(CommonTipsWinNew,u)}},e.prototype.updateTime=function(){if(this.data&&this.data.isDie){var t=this.data.reLiveTime;this.lbTimer.text="复活倒计时:"+getFormatTime(Number(t.toFixed(0)),"hh:mm:ss")}},e.prototype.getListBtn=function(t){return null},e.prototype.selectToItem=function(t){},Object.defineProperty(e.prototype,"data",{get:function(){return this.list.selectedItem},enumerable:!0,configurable:!0}),e.prototype.getBtnChallenge=function(){return this.btnChallenge},e.getSysId=function(){return 235},e.prototype.getBossItem=function(t){return this.btnChallenge},e.getTitle=function(){return"btz_zycs_kfboss"},e.getTabTitle=function(){return"kf_zycs_gn"},e}(BasePanel);__reflect(KfBossPanel.prototype,"KfBossPanel"),window.KfBossPanel=KfBossPanel;var SmsdPanel=function(t){function e(){var e=t.call(this)||this;return e.tabIndex=0,e.bossIndex=0,e.bossDatas=[],e.isClick=!1,e.skinName="SmsdPanelEUI",e.helpId=32,e.list.itemRenderer=SmsdBossItem,e.list.dataProvider=e.listData=new eui.ArrayCollection,e.listReward.itemRenderer=ItemBaseReward,e.listReward.dataProvider=e.listRewardData=new eui.ArrayCollection,e.tabList.itemRenderer=SmsdTabItem,e.tabList.dataProvider=e.tabListData=new eui.ArrayCollection,e.pageArrowComponentBase=new PageArrowCom(e.scroller,151,64),e.pageArrowComponentBase.setBtn(e.btnLeft,e.btnRight),e.MCmonster=new MC,e.groupBoss.addChild(e.MCmonster),e.mcBtnSend=new MC,e.mcBtnSend.x=e.challengeBtn.width/2,e.mcBtnSend.y=e.challengeBtn.height/2,e.challengeBtn.addChildAt(e.mcBtnSend,e.challengeBtn.numChildren-1),e.checkGroup.visible=e.svipGroup.visible=!urlParam.isShenhe,e}return __extends(e,t),e.prototype.open=function(){t.prototype.open.call(this),this.addClickE(this.helpBtn,this.onClick),this.addClickE(this.helpBtn0,this.onClick),this.addClickE(this.checkBox0,this.onClick),this.addClickE(this.checkBox1,this.onClick),this.addClickE(this.challengeBtn,this.onClick),this.addItemTapE(this.tabList,this.onTabList),this.addItemTapE(this.list,this.onBossList),this.addLsn(KfSys.ins().patchSmsdInfo,this.updatePanel),this.addLsn(KfSys.ins().patchSmsdAutoTz,this.updateBossPanel),this.addLsn(RechargeActSys.ins().patchZZTQ,this.updateZZTQ),this.addLsn(RpSys.ins().patchRp,this.updateRp),this.infoPanel(),this.checkBox1.selected=FbSys.ins().gettAutoChallengeFuBenBySysId(this.getSysId()),this.pageArrowComponentBase.open(),this.isClick=!1},e.prototype.close=function(){t.prototype.close.call(this),this.pageArrowComponentBase.close()},e.prototype.updateTime=function(){for(var t=this.list.numElements,e=0;t>e;e++){var i=this.list.getElementAt(e);if(i){var n=i.data;n&&i.updateTime()}}this.pageArrowComponentBase.updateRedPoint()},e.prototype.updateRp=function(t){egret.getQualifiedClassName(this);(!t||t.check(this))&&this.tabListData.replaceAll(Cfg.getConfig(SMFBCommonConfig).floorMenu)},e.prototype.infoPanel=function(){this.tabList.selectedIndex=this.tabIndex=KfSys.ins().smsdData.getTabIndex(),this.updateTab(),this.pageArrowComponentBase.setListIndex(this.tabIndex),this.updatePanel(),this.list.selectedIndex=this.bossIndex=KfSys.ins().smsdData.getBossIndex(),this.bossIndex>=4&&(this.list.validateNow(),this.scrollerBoss.validateNow(),this.list.scrollV=this.list.contentHeight-this.list.height),this.updateBossPanel(),KfSys.ins().sendSmsdInfo(),Timer.ins()["do"](0,1e3,0,this.updateTime,this)},e.prototype.updatePanel=function(){this.updateBossBtn(),this.updateData()},e.prototype.updateData=function(){var t=this.bossDatas[this.bossIndex];if(t){this.lbBossLv.text=""+GFunc.GetLvStrByLv(t.getConfig().showLv),this.power.text=""+t.getConfig().power,t.getConfig().belongLv>0?this.lbTips.visible=Actor.ins().zsId>=t.getConfig().belongLv:this.lbTips.visible=!1;var e="";t.getConfig().zslv>1e4&&(e=Lang.kfboss_str1.replace("$lv$",addColor(GFunc.getZSNameBydb(t.getConfig().zslv),16751375))),e+=Lang.kfboss_str8.replace("$str$",""+t.getConfig().diamond),this.lbLv.textFlow=addColorTF(e),e=Lang.kfboss_str2.replace("$svip$",addColor("SVIP"+t.getConfig().svip,16751375)),this.lbSvip.textFlow=addColorTF(e)}},e.prototype.updateBossPanel=function(){var t=this.bossDatas[this.bossIndex],e=Cfg.getConfig(MonsterModelConfig,t.monsterModel),i=ResMgr.getMonsterSource(e.appearance,5,EntityAction.STAND);this.MCmonster.playFile(i,-1),this.MCmonster.scaleY=e.scale,this.MCmonster.scaleX=-1*e.scale,this.listRewardData.source=t.getConfig().desc,this.checkBox0.selected=t.isRemind,t.isRemind&&!t.isDie()?(this.mcBtnSend.playFile(ResMgr.getEffName("public_zycs_button01"),-1),this.mcBtnSend.visible=!0):(this.mcBtnSend.stop(),this.mcBtnSend.visible=!1)},e.prototype.updateBossBtn=function(){var t=Cfg.getConfig(SMFBCommonConfig).floorMenu[this.tabIndex];this.bossDatas=KfSys.ins().smsdData.getBossDatasByFloor(t),this.listData.replaceAll(this.bossDatas.concat())},e.prototype.updateTab=function(){this.tabListData.source=Cfg.getConfig(SMFBCommonConfig).floorMenu},e.prototype.updateZZTQ=function(){var t=ActSys.ins().getActDataById(ActId.ID_99500);t.isAct()&&this.isClick&&(this.checkBox1.selected=!0,FbSys.ins().setAutoChallengeFuBen(this.getSysId(),this.checkBox1.selected))},e.prototype.onBossList=function(t){this.bossIndex!=t.itemIndex&&(this.bossIndex=t.itemIndex,this.updateBossPanel(),this.updateData())},e.prototype.onTabList=function(t){this.tabIndex!=t.itemIndex&&(this.tabIndex=t.itemIndex,this.bossIndex=0,this.updateBossBtn(),this.updateBossPanel(),this.list.selectedIndex=this.bossIndex,this.list.scrollV=0,this.updateData())},e.prototype.onClick=function(t){var e=this;switch(t.target){case this.challengeBtn:if(!BagSys.ins().checkBagVolumn())return;if(KfSys.ins().smsdData.enterCD>0)return void showtipsFail(Lang.fb_str11.replace("$second$",""+Math.ceil(KfSys.ins().smsdData.enterCD/1e3)));var i=this.bossDatas[this.bossIndex];if(i.getConfig().zslv>Actor.ins().zsId)return void showtipsFail(Lang.common_str119.replace("$num$",GFunc.getZSNameBydb(i.getConfig().zslv)));if(KfSys.ins().smsdData.atkBossData=i,i.getConfig().svip<=Actor.ins().sVipLv)KfSys.ins().sendSmsdEnter(i.id,0),KfSys.ins().smsdData.isAutoTz=!1,closeWin(BossWin);else{var n=Lang.kfboss_str6.replace("$num$",StrUtil.addColor(""+i.getConfig().diamond,5767068));n+=StrUtil.addColor("（"+Lang.kfboss_str7+"）",15733780);var a=new PopupData(n);a.setFunction(this,function(){GFunc.checkCurrency(CurType.JinZuan,i.getConfig().diamond)&&(KfSys.ins().sendSmsdEnter(i.id,1),KfSys.ins().smsdData.isAutoTz=!1,closeWin(BossWin))}),openWin(CommonTipsWin,a)}break;case this.checkBox0:var o=this.bossDatas[this.bossIndex];o.getConfig().belongLv>0&&Actor.ins().zsId>o.getConfig().belongLv&&this.checkBox0.selected?(showtipsFail(Lang.kfboss_str10),this.checkBox0.selected=!1):KfSys.ins().sendSmsdAutoTz(o.id,this.checkBox0.selected);break;case this.checkBox1:var s=ActSys.ins().getActDataById(ActId.ID_99500);if(!s.isAct()){this.isClick=!0;var r=StrUtil.addColor(""+Lang.fb_str344,5767068);r=Lang.fb_str343.replace("$str$",r);var a=new PopupData(r);return a.setFunction(this,function(){openWin(ZZTQWin,ZZTQWin.getTabIndexbyPanel(ZZTQCardPanel))},null,function(){e.isClick=!1}),openWin(CommonTipsWin,a),void(this.checkBox1.selected=!1)}FbSys.ins().setAutoChallengeFuBen(this.getSysId(),this.checkBox1.selected);break;case this.helpBtn:openWin(HelpWin,Cfg.getConfig(HelpInfoConfig,95).text);break;case this.helpBtn0:openWin(HelpWin,Cfg.getConfig(HelpInfoConfig,96).text);break;case this.btnLeft:break;case this.btnRight:}},e.getSysId=function(){return 307},e.getTitle=function(){return"btz_zycs_bssd"},e.getTabTitle=function(){return"fb_zycs_bssd"},e}(BasePanel);__reflect(SmsdPanel.prototype,"SmsdPanel"),window.SmsdPanel=SmsdPanel;var LadderMainPanel=function(t){function e(){var e=t.call(this)||this;return e.helpId=38,e.skinName="LadderMainPanelEUI",e.setSkinPart("duanIcon",new LadderStar2),e.rewardList.itemRenderer=ItemBaseReward,e.rewardList.dataProvider=e.rewardListArr=new eui.ArrayCollection,e.rankBtn.textFlow=addColorTF(Lang.fb_str136,5767068,!0),e.consumeAddBtn.visible=!urlParam.isShenhe,e}return __extends(e,t),e.prototype.open=function(){t.prototype.open.call(this),this.addClickE(this.rankBtn,this.onClick),this.addClickE(this.btnShop,this.onClick),this.addClickE(this.btnReward,this.onClick),this.addClickE(this.consumeAddBtn,this.onClick),this.addClickE(this.enterBtn,this.onClick),this.addLsn(RpSys.ins().patchRp,this.updateRp),this.addLsn(LadderSys.ins().patchLadderInfo,this.updatePanel),this.addLsn(LadderSys.ins().patchRankInfoList,this.updateRank),LadderSys.ins().sendGetRankInfo(),this.updateRp(),this.updatePanel(),this.updateRank()},e.prototype.updateRp=function(t){void 0===t&&(t=null),(!t||t.check(e))&&(this.enterBtn.redPoint.visible=RpSys.ins().getData(JJCWin,JJCSinglePanel,e,"tz"))},e.prototype.updatePanel=function(){var t=LadderSys.ins().getCurrTianTiDanConfig(),e="";e=LadderSys.ins().level==LadderSys.ins().MAX_LEVEL?StrUtil.addColor(""+t.showLevel,16115290):StrUtil.addColor(""+t.showLevel+t.showDan+Lang.fb_str135,16115290),this.levelTxt.textFlow=addColorTF(""+Lang.fb_str138+e),e=StrUtil.addColor(LadderSys.ins().winNum,16115290),this.winCountTxt.textFlow=addColorTF(""+Lang.fb_str139+e),this.winGroup.visible=LadderSys.ins().lianWin>1,this.winBmp.text=""+LadderSys.ins().lianWin,this.rewardListArr.source=Cfg.getConfig(TianTiConstConfig).danAward[t.level-1],this.countTxt.text=""+LadderSys.ins().challgeNum;var i=LadderSys.ins().getChallgeCd();i>0?(this.countTimeTxt.visible=!0,Timer.ins()["do"](0,1e3,Math.ceil(i/1e3),this.formatCountDown,this)):this.countTimeTxt.visible=!1,this.duanIcon.setLvAndRank(t),this.duanIcon.updataStarInfo(t)},e.prototype.updateRank=function(){var t=StrUtil.addColor(LadderSys.ins().upWeekRank>0?""+LadderSys.ins().upWeekRank:Lang.common_str17,16115290);this.rankTxt.textFlow=addColorTF(""+Lang.act_str25+t)},e.prototype.formatCountDown=function(t){var e=Lang.fb_str96.replace("$time$",""+getFormatTime(t,"hh:mm:ss"));this.countTimeTxt.textFlow=addColorTF(e)},e.prototype.onClick=function(t){switch(t.currentTarget){case this.rankBtn:openWin(LadderRankWin);break;case this.btnShop:openWin(ShopWin,ShopWin.getTabIndexbyPanel(ShopPanel),ShopPanel.getTabIndexbyPanel(ShopRongyuPanel));break;case this.btnReward:openWin(LadderAwardWin);break;case this.consumeAddBtn:if(LadderSys.ins().challgeNum>=Cfg.getConfig(TianTiConstConfig).maxRestoreChallengesCount)return void showtipsFail(Lang.fb_str332);var e=VipSys.ins().getCurSVipConfig();if(LadderSys.ins().todayBuyTime>=e.tianti)return void openWin(SVipTipsWin,253);var i=Cfg.getConfig(TianTiConstConfig).buyChallengesCountYuanBao,n=new PopupData;n.desc=Lang.fb_str141.replace("$yb$",""+i).replace("$count$",LadderSys.ins().todayBuyTime+"/"+e.tianti),n.setFunction(this,this.sureFun),openWin(CommonTipsWin,n);break;case this.enterBtn:if(!BagSys.ins().checkBagVolumn())return;if(!GFunc.checkGotoFuben())return void closeWin(JJCWin);if(0==LadderSys.ins().isOpen)return void showtipsFail(Lang.fb_str142);if(LadderSys.ins().challgeNum<=0)return void showtipsFail(Lang.fb_str86);openWin(LadderChallengeWin)}},e.prototype.sureFun=function(){Cfg.getConfig(TianTiConstConfig).buyChallengesCountYuanBao>Actor.ins().getCurrency(CurType.yb)?showtipsFail(Lang.fb_str143):LadderSys.ins().sendBuyChallgeTime()},e.getSysId=function(){return 253},e.getTitle=function(){return"btz_zycs_dfwz"},e.getTabTitle=function(){return"dfwz_zycs_tap2"},e}(BasePanel);__reflect(LadderMainPanel.prototype,"LadderMainPanel"),window.LadderMainPanel=LadderMainPanel;var MeiRiFbPanel=function(t){function e(){var e=t.call(this)||this;return e.skinName="MeiRiFbPanelEUI",e.list.itemRenderer=MeiRiFbItem,e.list.dataProvider=e.listData=new eui.ArrayCollection,e}return __extends(e,t),e.prototype.open=function(){t.prototype.open.call(this),this.addClickE(this.btnSend,this.onClick),this.addClickE(this.btnSaoDang,this.onClick),this.addLsn(FbSys.ins().patchDailyCountChange,this.updatePanel),this.addLsn(FbSys.ins().patchSaoDangResult,this.updatePanel),this.updatePanel(),this.activityData=ActSys.ins().getActDataById(ActId.ID_99500)},e.prototype.updatePanel=function(){var t=FbSys.ins().fbModels;SortUtil.sortOn(t,["isOpen","useCount","canSaodang","sort"],[SortType.down,SortType.down,SortType.down,SortType.up]),this.listData.replaceAll(t)},e.prototype.onClick=function(t){switch(t.currentTarget){case this.btnSend:if(!this.activityData.isAct()&&!urlParam.isShenhe){var e=StrUtil.addColor(""+Lang.fb_str344,5767068);e=Lang.fb_str342.replace("$str$",e);var i=new PopupData(e);return i.setFunction(this,function(){openWin(ZZTQWin,ZZTQWin.getTabIndexbyPanel(ZZTQCardPanel))}),void openWin(CommonTipsWin,i)}if(!FbSys.ins().isFirstAll())return void showtipsFail(Lang.fb_str350);if(!FbSys.ins().isCanYJTZ())return void showtipsFail(Lang.fb_str86);FbSys.ins().sendYJTZ(1);break;case this.btnSaoDang:if(!this.activityData.isAct()){if(!urlParam.isShenhe){var n=StrUtil.addColor(""+Lang.fb_str344,16774844);n=Lang.fb_str343.replace("$str$",n);var a=new PopupData(n);a.setFunction(this,function(){openWin(ZZTQWin,ZZTQWin.getTabIndexbyPanel(ZZTQCardPanel))}),openWin(CommonTipsWin,a)}return}if(!FbSys.ins().isCanYJSD())return void(urlParam.isShenhe||openWin(SVipTipsWin,295));var o=FbSys.ins().isYJSDConsume(),s=new PopupPriceData(Lang.fb_str349);s.priceValue=o,s.priceType=CurType.yb,s.setFunction(this,function(){GFunc.checkCurrency(CurType.yb,o)&&FbSys.ins().sendYJTZ(2)}),openWin(CommonTipsWinNew,s)}},e.prototype.getBtnSend=function(t){this.list.validateNow();for(var e=this.list.numElements,i=0;e>i;i++){var n=this.list.getElementAt(i);if(n){var a=n.data;if(a.fbGroup==t)return n.getBtnSend()}}return null},e.getSysId=function(){return 295},e.getTitle=function(){return"btz_zycs_fb"},e.getTabTitle=function(){return"fb_zycs_mrsl"},e}(BasePanel);__reflect(MeiRiFbPanel.prototype,"MeiRiFbPanel"),window.MeiRiFbPanel=MeiRiFbPanel;var MineMainPanel=function(t){function e(){var e=t.call(this)||this;return e.helpId=36,e.skinName="MineMainPanelEUI",e.rewardList.itemRenderer=ItemBaseReward,e.rewardList.dataProvider=e.rewardListArr=new eui.ArrayCollection,e}return __extends(e,t),e.prototype.open=function(){t.prototype.open.call(this),this.addClickE(this.enterBtn,this.onClick),this.addLsn(RpSys.ins().patchRp,this.updateRp),this.updateRp(),this.setData(),RpFun.mineLueDuoShow=!1,RpFun.showMineLueDuo()},e.prototype.updateRp=function(t){void 0===t&&(t=null),(!t||t.check(e))&&(this.enterBtn.redPoint.visible=RpSys.ins().getData(JJCWin,JJCManyPanel,e))},e.prototype.setData=function(){this.mineCountTxt.text=""+Lang.fb_str158+MineSys.ins().getMiningCount()+"/"+MineSys.ins().getMaxMiningCount(),this.robCountTxt.text=""+Lang.fb_str159+MineSys.ins().getKeRobCount()+"/"+Cfg.getConfig(MineCommonConfig).rob;var t=ActSys.ins().beishu,e=GFunc.setItemDataRewardValue(Cfg.getConfig(MineCommonConfig).goodReward,ItemDataReward["double"],t);this.rewardListArr.source=e},e.prototype.onClick=function(t){switch(t.currentTarget){case this.enterBtn:if(!BagSys.ins().checkBagVolumn())return;MineSys.ins().sendEnterFB(0),closeWin(JJCWin)}},e.getSysId=function(){return 252},e.getTitle=function(){return"btz_zycs_sjmg"},e.getTabTitle=function(){return"sjhj_zycs_tap2"},e}(BasePanel);__reflect(MineMainPanel.prototype,"MineMainPanel"),window.MineMainPanel=MineMainPanel;var MoLongPanel=function(t){function e(){var e=t.call(this)||this;return e.helpId=46,e.initUI(),e}return __extends(e,t),e.prototype.initUI=function(){this.setSkinName()},e.prototype.setSkinName=function(){this.skinName="MoLongPanelEUI",this.list.itemRenderer=ItemBaseReward,this.list.dataProvider=this.listArr=new eui.ArrayCollection},e.prototype.open=function(){this.addClickE(this,this.onClick),this.addLsn(RpSys.ins().patchRp,this.updateRp),this.addLsn(FbSys.ins().patchMoLongData,this.updatePanel),this.addLsn(VipSys.ins().patchSvipLvChange,this.updatePanel),this.updatePanel(),this.updateRp()},e.prototype.close=function(){t.prototype.close.call(this)},e.prototype.updatePanel=function(){var t=FbSys.ins().molongData;this.currentState=t.isMax()?"max":"normal",this.validateNow();var e=Cfg.getConfig(MolongFubenConfig,CondType.LessEqual,MolongFubenConfig.zslevel,Actor.ins().zsId);this.labelLv.text=GFunc.getZSNameBydb(e.zslevel),this.indexBmp.text=e.id+"";var i=ActSys.ins().beishu,n=GFunc.setItemDataRewardValue(e.reward,ItemDataReward["double"],i);this.listArr.source=n,this.lbTjPower.textFlow=addColorTF(""+Lang.fb_str30+StrUtil.addColor(e.needpower,13486270)),this.lbCurPower.textFlow=addColorTF(""+Lang.fb_str31+StrUtil.addColor(Actor.ins().power,Actor.ins().power>=e.needpower?5949490:15733780)),this.lbZhuZhan.textFlow=addColorTF("助战次数："+StrUtil.addColor(t.zhuzhanCount,0==t.zhuzhanCount?15733780:5949490)),this.lbDesc.textFlow=StrUtil.toTF(Cfg.getConfig(MolongCommonConfig).desc);var a=Cfg.getConfig(MolongFubenConfig,CondType.More,MolongFubenConfig.zslevel,Actor.ins().zsId);if(this.bitCeng.text=a.id+"",this.imgLevel.source="mlzc_zycs_"+a.zslevel,this.updateCouont(),t.canbuyCount>0)this.lbVip.text="剩余"+t.canbuyCount+"次可购买";else if(Actor.ins().sVipLv>=Cfg.getMaxConfig(SVipConfig).lv)this.lbVip.text="";else{var o=Cfg.getNextVipExp(FbGroup.MoLong);o?this.lbVip.text="SVIP"+o+"可额外购买":this.lbVip.text=""}},e.prototype.updateCouont=function(){var t=FbSys.ins().molongData;this.lbSurplus.text=t.leftCount.toString()},e.prototype.updateRp=function(t){void 0===t&&(t=null),(!t||t.check(this))&&(this.btnintofuben.redPoint.visible=RpSys.ins().getData(ExtCom,FuBenWin,FuBenDuoRenPanel,e))},e.prototype.onClick=function(t){var e=FbSys.ins().molongData;switch(t.target){case this.btnintofuben:0==e.leftCount?showTipsWarn(0==e.canbuyCount&&e.zhuzhanCount>0?"加入其它队伍进行助战获取丰富奖励":e.canbuyCount>0?Lang.fb_str34.replace("$name$","玄武神殿"):"今日可进入次数已用完"):GFunc.checkGotoFuben()&&(FbSys.ins().guajiData.isGuanQia?openWin(WarnWin,"当前正在挑战天路，是否退出?",function(){FbSys.ins().sendMoLongGoToFuben(),closeWin(FuBenWin)},this):(FbSys.ins().sendMoLongGoToFuben(),closeWin(FuBenWin)));break;case this.btnSurplus:if(e.leftCount>0)showTipsWarn(Lang.fb_str36);else if(e.canbuyCount>0){var i=new PopupPriceData("购买一次进入玄武神殿机会"),n=Cfg.getConfig(MolongCommonConfig).needdiamond[e.buyCount];i.priceValue=n,i.priceType=CurType.yb,i.setFunction(this,function(){GFunc.checkCurrency(CurType.yb,n)&&FbSys.ins().sendMoLongBuyCount()}),openWin(CommonTipsWinNew,i)}else{var a=Cfg.getNextVipExp(FbGroup.MoLong);a?(showTipsWarn(Lang.fb_str38.replace("$lv$",""+a)),openWin(RechargeWin)):showTipsWarn(Lang.fb_str39)}}},e.getSysId=function(){return 314},e.getTitle=function(){return"btz_zycs_fb"},e.getTabTitle=function(){return"fb_zycs_mlzc"},e}(BasePanel);__reflect(MoLongPanel.prototype,"MoLongPanel"),window.MoLongPanel=MoLongPanel;var RedFortPanel=function(t){function e(){var e=t.call(this)||this;return e.helpId=41,e.num=1,e.skinName="RedFortPanelEUI",e.list.itemRenderer=ItemBaseReward,e.list.dataProvider=e.arrData=new eui.ArrayCollection,e}return __extends(e,t),e.prototype.open=function(){t.prototype.open.call(this),this.addClickE(this.rewardBtn,this.onClick),this.addClickE(this.helpBtn,this.onClick),this.addClickE(this.enterBtn,this.onClick),this.addLsn(FbSys.ins().patchRedFortInfo,this.setDataPanel),this.setDataPanel()},e.prototype.setDataPanel=function(){var t=Cfg.getConfig(FortCommonConfig).zjjl;this.arrData.source=t},e.prototype.formatCountDown=function(t){var e="";e=this.num>0?StrUtil.addColor(""+Lang.redFort_str2+getFormatTime(t,"hh:mm:ss"),566531):StrUtil.addColor(""+Lang.redFort_str3+getFormatTime(t,"hh:mm:ss"),16712708),this.countTxt.textFlow=addColorTF(e)},e.prototype.onClick=function(t){switch(t.target){case this.rewardBtn:openWin(RedFortRankWin);break;case this.helpBtn:openWin(RedFortHelpWin);break;case this.enterBtn:if(!BagSys.ins().checkBagVolumn())return;if(FbSys.ins().redFort.leftCd>0)return void showtipsFail(Lang.fb_str197.replace("$second$",""+Math.ceil(FbSys.ins().redFort.leftCd/1e3)));FbSys.ins().sendRedFortEnter()}},e.getSysId=function(){return 254},e.getTitle=function(){return"btz_zycs_csys"},e.getTabTitle=function(){return"sjhj_zycs_tap1"},e}(BasePanel);__reflect(RedFortPanel.prototype,"RedFortPanel"),window.RedFortPanel=RedFortPanel;var WanMoPanel=function(t){function e(){var e=t.call(this)||this;e.skinName="WanMoSkin";for(var i=0;3>i;i++)e.setSkinPart("demonsItem"+(i+1),new WanMoItem);return e.setSkinPart("itemReward1",new ItemBaseReward),e.itemReward1.reInit(),e.setSkinPart("itemReward2",new ItemBaseReward),e.itemReward2.reInit(),e}return __extends(e,t),e.prototype.open=function(){this.fubenModel=FbSys.ins().wanmoModel,this.addClickE(this.btnKuaiSu1,this.onClick),this.addClickE(this.btnKuaiSu,this.onClick),this.addClickE(this.btnclearance,this.onClick),this.addClickE(this.lbranking,this.onClick),this.addClickE(this.itemReward1,this.onClick,!0),this.addClickE(this.itemReward2,this.onClick,!0),this.addLsn(FbSys.ins().patchWanmoInfo,this.updateData),this.addLsn(FbSys.ins().patchWanmoGuanQiaReward,this.updateGuanQiaReward),this.addLsn(RpSys.ins().patchRp,this.updateRp),this.listPrize1.itemRenderer=ItemBaseReward,this.updateData(),this.updateRp(),FbSys.ins().sendWanmoData(),this.updateGuanQiaReward()},e.prototype.updateRp=function(t){void 0===t&&(t=null),(null==t||t.check(e))&&(this.btnclearance.redPoint.visible=RpSys.ins().getData(ExtCom,FuBenWin,FuBenDanRenPanel,e,"tz"),this.btnKuaiSu.redPoint.visible=RpSys.ins().getData(ExtCom,FuBenWin,FuBenDanRenPanel,e,"sd"),this.itemReward1.redPoint.visible=RpSys.ins().getData(ExtCom,FuBenWin,FuBenDanRenPanel,e,"minReward"),this.itemReward2.redPoint.visible=RpSys.ins().getData(ExtCom,FuBenWin,FuBenDanRenPanel,e,"maxReward"))},e.prototype.updateData=function(){var t=Cfg.getConfig(ChallengefbConfig,this.fubenModel.fbId||1);0==this.fubenModel.fbId?this.lbtake.text=Lang.fb_str74:this.lbtake.text=t.name;var e=this.fubenModel.isMax()?Cfg.getConfig(ChallengefbConfig,this.fubenModel.maxCount):Cfg.getConfig(ChallengefbConfig,this.fubenModel.fbId+1);this.ceng=Lang.replaceEnum("第%s层",t.idx),this.power=Lang.replaceEnum("推荐战力：%s",t.power),this.listPrize1.dataProvider=new eui.ArrayCollection(e.normalAwards),this.btnKuaiSu.currentState=this.fubenModel.isKuaiSu?null:"hui",this.fubenModel.isMax()?this.currentState="max":e.idx>=Cfg.getConfig(ChallengefbBaseConfig,1).canquick?this.currentState="kstz":this.currentState="normal"},e.prototype.updateGuanQiaReward=function(){var t=this.fubenModel.minGuanQiaReward;this.groupReward1.visible=0==t.isReceive,this.itemReward1.data=t.reward,this.lbRewardCeng1.text=t.guanqia+"层奖励",this.imgReward1.visible=RpSys.ins().getData(ExtCom,FuBenWin,FuBenDanRenPanel,e,"minReward");var i=this.fubenModel.maxGuanQiaReward;this.groupReward2.visible=0==i.isReceive,this.itemReward2.data=i.reward,this.lbRewardCeng2.text=i.guanqia+"层奖励",this.imgReward2.visible=RpSys.ins().getData(ExtCom,FuBenWin,FuBenDanRenPanel,e,"maxReward")},e.prototype.onClick=function(t){switch(t.currentTarget){case this.itemReward1:this.fubenModel.minGuanQiaReward.canGet()?(FbSys.ins().sendWanmoGuanQiaReward(1),t.stopImmediatePropagation()):GFunc.showRewardTips(this.fubenModel.minGuanQiaReward.reward);break;case this.itemReward2:this.fubenModel.maxGuanQiaReward.canGet()?(FbSys.ins().sendWanmoGuanQiaReward(2),t.stopImmediatePropagation()):GFunc.showRewardTips(this.fubenModel.maxGuanQiaReward.reward);break;case this.btnKuaiSu1:showTipsWarn(Lang.fb_str320.replace("$count$",Cfg.getConfig(ChallengefbBaseConfig,1).canquick.toString()));break;case this.btnKuaiSu:this.fubenModel.isKuaiSu?FbSys.ins().sendWanmoKuaiSu():showTipsWarn(Lang.fb_str321);break;case this.btnclearance:if(!BagSys.ins().checkBagVolumn())return;GFunc.checkGotoFuben()&&(FbSys.ins().guajiData.isGuanQia?openWin(WarnWin,"当前正在挑战天路，是否退出?",function(){FbSys.ins().sendWanmoFight(),closeWin(FuBenWin)},this):(FbSys.ins().sendWanmoFight(),closeWin(FuBenWin)));break;case this.lbranking:openWin(WanMoRanPanel,RankType.WanMo)}},e.prototype.getFightBtn=function(){return this.btnclearance},e.getTitle=function(){return"btz_zycs_wmjt"},e.getTabTitle=function(){return"fb_zycs_wmjt"},e.getSysId=function(){return 237},e}(BasePanel);__reflect(WanMoPanel.prototype,"WanMoPanel");var DemonsItemData=function(){function t(){}return t}();__reflect(DemonsItemData.prototype,"DemonsItemData"),window.WanMoPanel=WanMoPanel;var FenJiePanel=function(t){function e(){var e=t.call(this)||this;return e.init(),e}return __extends(e,t),e.prototype.init=function(){this.skinName="HeChengPanelEUI",this.itemList.itemRenderer=FenJieTabItem,this.itemListArray=new eui.ArrayCollection,this.itemList.dataProvider=this.itemListArray},e.prototype.open=function(){t.prototype.open.call(this),this.addLsn(RpSys.ins().patchRp,this.updateRp),this.addClickE(this.itemList,this.onMenuClick),this.iniPanle(),this.updateRp()},e.prototype.close=function(){t.prototype.close.call(this)},e.prototype.updateRp=function(t){if(void 0===t&&(t=null),!t||t.check(e))for(var i=this.itemList.numElements,n=0;i>n;n++){var a=this.itemList.getElementAt(n);a&&a.updateRedPoint()}},e.prototype.updatePanel=function(){this.itemListArray.source=BagSys.ins().fenjieDatas,this.itemList.validateNow()},e.prototype.iniPanle=function(){this.updatePanel()},e.prototype.onMenuClick=function(t){if("FenJieTabItem"==t.target.name)var e=t.target,i=this.itemList.selectedItem;if("FenJieTabItemSub"==t.target.name){var e=t.target,i=e.data;openWin(FenJieListWin,i.fenJieViewConfig.type2)}},e.prototype.onClick=function(t){t.target},e.getSysId=function(){return 321},e.getTitle=function(){return"btz_zycs_hc"},e.getTabTitle=function(){return Lang.btn_fj},e}(BasePanel);__reflect(FenJiePanel.prototype,"FenJiePanel"),window.FenJiePanel=FenJiePanel;var FootHuanHuaPanel=function(t){function e(){var e=t.call(this)||this;e.selectIndex=0,e.huanHuaDatas=[],e.skinName="FootHuanHuaPanelEUI",e.btnAttr.textFlow=addColorTF(StrUtil.addUnderLine(Lang.common_str116),5767068),e.attrs.itemRenderer=ComAttrItem,e.attrs.dataProvider=e.attrData=new eui.ArrayCollection,e.listConsume.itemRenderer=ItemBaseConsume,e.listConsume.dataProvider=e.listConsumeData=new eui.ArrayCollection,e.listIcon.itemRenderer=FootItem,e.listIcon.dataProvider=e.listIconData=new eui.ArrayCollection,e.mcFoots=[];var i=LogicSys.ins().centerEntity.data,n=new EntityRoleData;return n.szId=i.szId,n.damonId=i.damonId,n.job=i.job,n.wingId=i.wingId,n.sex=i.sex,n.type=EntityType.ROLE,e.mcBody=new EntityRoleUI,e.groupMc.addChild(e.mcBody),e.mcBody.setData(n,5,EntityAction.RUN),e.pageArrowComponentBase=new PageArrowCom(e.scroller,130,105),e.pageArrowComponentBase.setBtn(e.btnLeft,e.btnRight),e}return __extends(e,t),e.prototype.open=function(){t.prototype.open.call(this),this.addClickE(this.btnGengHuan,this.onClick),this.addClickE(this.btnSend,this.onClick),this.addClickE(this.btnAttr,this.onClick),this.addItemTapE(this.listIcon,this.onItemClick),this.addLsn(FootSys.ins().patchFootHuanHuaUp,this.updatePanelUp),this.addLsn(FootSys.ins().patchFootHuanHua,this.updatePanelUp),this.addLsn(BagSys.ins().patchItemChange,this.updateConsume),this.addLsn(RpSys.ins().patchRp,this.updateRp),this.infoPanel(),this.pageArrowComponentBase.open()
},e.prototype.close=function(){t.prototype.close.call(this),this.pageArrowComponentBase.close()},e.prototype.updateRp=function(t){if(!t||t.check(this))for(var e=0;e<this.listIcon.numChildren;e++){var i=this.listIcon.getChildAt(e);i&&i.dataChanged()}},e.prototype.infoPanel=function(){this.selectIndex=0,this.listIconData.source=this.huanHuaDatas=FootSys.ins().huanHuaDatas;for(var t=0;t<this.huanHuaDatas.length;t++)if(RpSys.ins().getData(RoleWin,RolePanel,ZhuangBanWin,FootPanel,e,this.huanHuaDatas[t].id)){this.selectIndex=t;break}this.listIcon.selectedIndex=this.selectIndex,this.pageArrowComponentBase.setListIndex(this.selectIndex),this.updatePanel(),this.updateRp(),Timer.ins()["do"](0,500,0,this.onMoveFoot,this)},e.prototype.updatePanelUp=function(){this.listIconData.replaceAll(this.huanHuaDatas),this.updatePanel()},e.prototype.updatePanel=function(){var t=this.huanHuaDatas[this.selectIndex];this.power.text=""+t.getHuanHuaPower(),this.nameStr=t.getBaseConfig().name,this.bmpLv.text=""+t.stage,this.imgSyz.visible=t.isUse(),this.btnGengHuan.visible=t.stage>0&&!t.isUse(),this.attrData.source=t.getHuanHuaAttrDatas(),this.btnSend.label=t.stage>0?Lang.btn_sj:Lang.btn_jh,this.btnSend.redPoint.visible=RpSys.ins().getData(RoleWin,RolePanel,ZhuangBanWin,FootPanel,e,t.id);var i=this.listIcon.getChildAt(this.selectIndex);i&&i.dataChanged();var n=addColor(t.getBaseConfig().dec,16751375);n+=Lang.common_str117+addColor("+"+t.getBaseConfig().power,16751375),this.lbActDec.textFlow=addColorTF(t.isAct()?"":n),this.updateConsume(),this.updateMax()},e.prototype.updateConsume=function(){var t=this.huanHuaDatas[this.selectIndex];this.listConsumeData.source=t.getBaseConfig().needitem},e.prototype.updateMax=function(){this.huanHuaDatas[this.selectIndex].isMax()?(this.imgYml.visible=!0,this.listConsume.visible=!1,this.btnSend.visible=!1):(this.imgYml.visible=!1,this.listConsume.visible=!0,this.btnSend.visible=!0)},e.prototype.onItemClick=function(t){this.selectIndex=t.itemIndex,this.updatePanel()},e.prototype.onMoveFoot=function(){var t=this,e=this.huanHuaDatas[this.selectIndex],i=this.mcFoots.pop()||new MC;i.playFile(e.getBaseConfig().facade,1,null,!0),i.x=0,i.y=0,this.groupMc.addChildAt(i,0);var n=egret.Tween.get(i);n.to({x:260,y:-180},1200).call(function(){t.mcFoots.push(i)},this)},e.prototype.onClick=function(t){switch(t.currentTarget){case this.btnSend:var e=this.huanHuaDatas[this.selectIndex];GFunc.checkConsumeEnough(e.getBaseConfig().needitem)&&FootSys.ins().sendFootHuanHuaUp(e.id);break;case this.btnGengHuan:FootSys.ins().sendFootHuanHua(this.huanHuaDatas[this.selectIndex].id);break;case this.btnAttr:openWin(ComAttrWin,FootSys.ins().getHuanHuaDatasAll(),ComAttrTitleEnum.FootJinJie)}},e.getTitle=function(){return"btz_zycs_rw"},e.getTabTitle=function(){return Lang.btn_hh},e.getSysId=function(){return 316},e}(BasePanel);__reflect(FootHuanHuaPanel.prototype,"FootHuanHuaPanel"),window.FootHuanHuaPanel=FootHuanHuaPanel;var FootLevelPanel=function(t){function e(){var e=t.call(this)||this;e.consumeDatas=[],e.index=0,e.skinName="FootLevelPanelEUI",e.attrs.itemRenderer=ComAttrItem,e.attrs.dataProvider=e.attrData=new eui.ArrayCollection,e.listConsume.itemRenderer=FootLevelConsuItem,e.listConsume.dataProvider=e.listConsumeData=new eui.ArrayCollection,e.mcFoots=[];var i=LogicSys.ins().centerEntity.data,n=new EntityRoleData;return n.szId=i.szId,n.damonId=i.damonId,n.job=i.job,n.wingId=i.wingId,n.sex=i.sex,e.mcBody=new EntityRoleUI,e.groupMc.addChild(e.mcBody),e.mcBody.setData(n,5,EntityAction.RUN),e}return __extends(e,t),e.prototype.open=function(){t.prototype.open.call(this),this.addClickE(this.comDaShi,this.onClick),this.addClickE(this.btnSend,this.onClick),this.addItemTapE(this.listConsume,this.onItemClick),this.addLsn(FootSys.ins().patchFootLevelUp,this.updatePanel),this.addLsn(FootSys.ins().patchFootDaShiUp,this.updatePanel),this.addLsn(BagSys.ins().patchItemChange,this.updateConsume),this.addLsn(RpSys.ins().patchRp,this.updateRp),this.infoPanel()},e.prototype.close=function(){t.prototype.close.call(this)},e.prototype.updateRp=function(t){(!t||t.check(this))&&(this.btnSend.redPoint.visible=RpSys.ins().getData(RoleWin,RolePanel,ZhuangBanWin,FootPanel,e,"levelUp"),this.comDaShi.redPoint.visible=RpSys.ins().getData(RoleWin,RolePanel,ZhuangBanWin,FootPanel,e,FootDaShiWin))},e.prototype.infoPanel=function(){var t=Cfg.getConfigs(FootItemConfig);this.consumeDatas.length=0;for(var e in t){var i=GFunc.creatRewardDataById(t[e].itemid,1);this.consumeDatas.push(i)}this.updatePanel(),this.defConsumeSelect(),this.updateRp(),Timer.ins()["do"](0,500,0,this.onMoveFoot,this)},e.prototype.updatePanel=function(){this.power.text=""+FootSys.ins().getLevelPower(),this.bmpLv.text="l"+FootSys.ins().level,this.comDaShi.setData(FootSys.ins().level,FootSys.ins().daShiData.getConfig().needlv),this.lbDaShi.text=Lang.foot_str4+"·"+FootSys.ins().daShiData.level+Lang.common_jie,this.attrData.source=FootSys.ins().getLevelAttrDatas(),this.updateMax()},e.prototype.defConsumeSelect=function(){for(var t=this.consumeDatas.length-1;t>=0;t--)if(GFunc.getItemCount(this.consumeDatas[t].id)>0){this.index=t;break}this.listConsume.selectedIndex=this.index,this.listConsumeData.source=this.consumeDatas},e.prototype.updateConsume=function(){this.listConsumeData.source=this.consumeDatas,0==GFunc.getItemCount(this.consumeDatas[this.index].id)&&this.defConsumeSelect()},e.prototype.updateMax=function(){FootSys.ins().isMaxLevel()?(this.imgYml.visible=!0,this.listConsume.visible=!1,this.btnSend.visible=!1,this.barExp.maximum=this.barExp.value=FootSys.ins().exp):(this.barExp.maximum=FootSys.ins().getLevelConfig().needexp,this.barExp.value=FootSys.ins().exp,this.imgYml.visible=!1,this.listConsume.visible=!0,this.btnSend.visible=!0)},e.prototype.onMoveFoot=function(){var t=this,e=Cfg.getConfig(FootHuanhuaBaseConfig,FootSys.ins().huanHuaId||1),i=this.mcFoots.pop()||new MC;i.playFile(e.facade,1,null,!0),i.x=0,i.y=0,this.groupMc.addChildAt(i,0);var n=egret.Tween.get(i);n.to({x:260,y:-180},1200).call(function(){t.mcFoots.push(i)},this)},e.prototype.onItemClick=function(t){this.index=t.itemIndex},e.prototype.onClick=function(t){switch(t.currentTarget){case this.btnSend:GFunc.checkConsumeEnough(this.consumeDatas[this.index])&&FootSys.ins().sendFootLevelUp(this.index+1);break;case this.comDaShi:openWin(FootDaShiWin,FootSys.ins().daShiData)}},e.getTitle=function(){return"btz_zycs_rw"},e.getTabTitle=function(){return Lang.btn_sjie},e.getSysId=function(){return 316},e}(BasePanel);__reflect(FootLevelPanel.prototype,"FootLevelPanel"),window.FootLevelPanel=FootLevelPanel;var FootMiYuPanel=function(t){function e(){var e=t.call(this)||this;return e.items=[],e.footIndex=0,e.huanHuaDatas=[],e.equipIndex=0,e.equipDatas=[],e.skinName="FootMiYuPanelEUI",e.items=[e.item0,e.item1,e.item2,e.item3,e.item4],e.btnAttr.textFlow=addColorTF(StrUtil.addUnderLine(Lang.common_str116),5767068),e.list.itemRenderer=SkillPassivityItem,e.list.dataProvider=e.listData=new eui.ArrayCollection,e.attrs.itemRenderer=ComAttrItem,e.attrs.dataProvider=e.attrData=new eui.ArrayCollection,e.listIcon.itemRenderer=FootItem2,e.listIcon.dataProvider=e.listIconData=new eui.ArrayCollection,e.mc=new MC,e.groupMc.addChild(e.mc),e.pageArrowComponentBase=new PageArrowCom(e.scroller,130,105),e.pageArrowComponentBase.setBtn(e.btnLeft,e.btnRight),e}return __extends(e,t),e.prototype.open=function(){t.prototype.open.call(this),this.addClickE(this.btnSend,this.onClick),this.addClickE(this.helpBtn,this.onClick),this.addClickE(this.btnAttr,this.onClick),this.addClickE(this.btnBag,this.onClick);for(var e=0,i=this.items;e<i.length;e++){var n=i[e];this.addClickE(n,this.onEquipClick)}this.addItemTapE(this.listIcon,this.onItemClick),this.addItemTapE(this.list,this.onSkillItem),this.addLsn(FootSys.ins().patchFootMiYuEquip,this.updatePanelUp),this.addLsn(FootSys.ins().patchFootMiYuUp,this.updatePanelUpEff),this.addLsn(FootSys.ins().patchFootSkillUp,this.updatePanelUp),this.addLsn(LogicSys.ins().patchCurrency,this.updateConsume),this.addLsn(RpSys.ins().patchRp,this.updateRp),this.infoPanel(),this.pageArrowComponentBase.open()},e.prototype.close=function(){t.prototype.close.call(this),this.pageArrowComponentBase.close()},e.prototype.updateRp=function(t){if(!t||t.check(this)){this.btnSend.redPoint.visible=RpSys.ins().getData(RoleWin,RolePanel,ZhuangBanWin,FootPanel,e,this.huanHuaDatas[this.footIndex].id,"levelUp");for(var i=0;i<this.items.length;i++)this.items[i].showRedPoint(RpSys.ins().getData(RoleWin,RolePanel,ZhuangBanWin,FootPanel,e,this.huanHuaDatas[this.footIndex].id,i+1))}},e.prototype.infoPanel=function(){this.footIndex=0,this.listIconData.source=this.huanHuaDatas=FootSys.ins().huanHuaDatas;for(var t=0;t<this.huanHuaDatas.length;t++)if(RpSys.ins().getData(RoleWin,RolePanel,ZhuangBanWin,FootPanel,e,this.huanHuaDatas[t].id)){this.footIndex=t;break}this.listIcon.selectedIndex=this.footIndex,this.pageArrowComponentBase.setListIndex(this.footIndex),this.items[this.equipIndex].setSelect(!0),this.updatePanel(),this.updateRp()},e.prototype.updatePanelUpEff=function(){for(var t=0;t<this.items.length;t++){var e=this.equipDatas[t];e.isEquip&&this.items[t].playMC()}this.updatePanelUp()},e.prototype.updatePanelUp=function(){this.listIconData.replaceAll(this.huanHuaDatas),this.updatePanel()},e.prototype.updatePanel=function(){var t=this.huanHuaDatas[this.footIndex];this.equipDatas=t.equipDatas,this.power.text=""+t.getMiYuPower(),this.mc.playFile(t.getBaseConfig().uibody,-1);for(var i=0;i<this.items.length;i++)this.items[i].data=this.equipDatas[i];this.listData.source=t.skillDatas,this.lbSkillLv.textFlow=addColorTF(SkillSys.ins().getSkillPassivityUpDec(t.skillDatas)),this.btnSend.redPoint.visible=RpSys.ins().getData(RoleWin,RolePanel,ZhuangBanWin,FootPanel,e,t.id,"levelUp"),this.updateAttr(),this.updateConsume(),this.updateMax()},e.prototype.updateConsume=function(t){if(!t||t.type==CurType.footMiYu){var e=this.huanHuaDatas[this.footIndex],i=GFunc.getItemCount(CurType.footMiYu),n=e.getEquipUpConsu();this.lbConsu.textFlow=addColorTF(i+"/"+n,n>i?15733780:1240627)}},e.prototype.updateAttr=function(){var t=this.equipDatas[this.equipIndex];this.attrData.source=t.getAttrDatas()},e.prototype.updateMax=function(){var t=this.huanHuaDatas[this.footIndex];t.isEquipMax()?(this.imgYml.visible=!0,this.imgConsu.visible=!1,this.lbConsu.visible=!1,this.btnSend.visible=!1):(this.imgYml.visible=!1,this.btnSend.visible=!0,t.isHaveEquip()?(this.imgConsu.visible=!0,this.lbConsu.visible=!0):(this.imgConsu.visible=!1,this.lbConsu.visible=!1))},e.prototype.onSkillItem=function(t){var e=t.item;openWin(FootSkillUpWin,e,this.huanHuaDatas[this.footIndex].id,t.itemIndex+1)},e.prototype.onItemClick=function(t){this.footIndex=t.itemIndex,this.updatePanel()},e.prototype.onEquipClick=function(t){this.items[this.equipIndex].setSelect(!1);var e=t.currentTarget;this.equipIndex=this.items.indexOf(e),this.items[this.equipIndex].setSelect(!0),this.updateAttr();var i=this.huanHuaDatas[this.footIndex];if(i.isAct()){var n=this.equipDatas[this.equipIndex];if(0==n.isEquip){var a=FootSys.ins().getEquipDatasById(n.itemId).length;a>0?openWin(FootEquipWin,0,n):GFunc.checkConsumeEnough(GFunc.creatRewardDataById(n.itemId,1))}else{var o=GFunc.creatUnknown(n.itemId,0),s=FootSys.ins().getTipsDatas(o);openWin(FootEquipTipsWin,s[0],s[1])}}else showtipsFail(Lang.foot_str8)},e.prototype.onClick=function(t){switch(t.currentTarget){case this.btnSend:var e=this.huanHuaDatas[this.footIndex];if(!e.isAct())return void showtipsFail(Lang.foot_str8);if(!e.isHaveEquip())return void showtipsFail(Lang.foot_str5);GFunc.checkCurrency(CurType.footMiYu,e.getEquipUpConsu())&&FootSys.ins().sendFootMiYuUp(e.id);break;case this.btnAttr:var i=this.huanHuaDatas[this.footIndex];openWin(ComAttrWin,i.getMiYuAttrsAll(),ComAttrTitleEnum.FootMiYu);break;case this.btnBag:openWin(FootBagWin);break;case this.helpBtn:openWin(HelpWin,Cfg.getConfig(HelpInfoConfig,106).text)}},e.getTitle=function(){return"btz_zycs_rw"},e.getTabTitle=function(){return"铭 文"},e.getSysId=function(){return 317},e}(BasePanel);__reflect(FootMiYuPanel.prototype,"FootMiYuPanel"),window.FootMiYuPanel=FootMiYuPanel;var BaseTabPanel=function(t){function e(){var e=t.call(this)||this;return e.initUI(),e}return __extends(e,t),e.prototype.setSkinName=function(){this.skinName="BaseTabPanelEUI"},e.prototype.initUI=function(){t.prototype.initUI.call(this),this.setSkinName(),this.addPanel(),this.setBg(),this.redPointHead.length>0?callFunc(this,this.setRedPointHead,this.redPointHead):callFunc(this,this.setRedPointHead)},e.prototype.setBg=function(t){void 0===t&&(t="sc_zycs_di_jpg"),this.bg&&(this.bg.source=t)},e.prototype.open=function(e){void 0===e&&(e=-1);var i=this.getAotuIndex(e);t.prototype.open.call(this,i),this.observeTabRedPoint()},e.prototype.updateTime=function(){var t=this.getCurPanel();t&&t.updateTime()},e}(BasePanel);__reflect(BaseTabPanel.prototype,"BaseTabPanel");var GuZhanPanel=function(t){function e(){var e=t.call(this)||this;return e.helpId=42,e.iniUI(),e}return __extends(e,t),e.prototype.iniUI=function(){this.skinName="GuZhanPanelEUI",this.listArray=new eui.ArrayCollection,this.listReward.itemRenderer=ItemBaseReward,this.listReward.dataProvider=this.listArray,this.priceIcon.setPrice(CurType.yb)},e.prototype.open=function(){this.addClickE(this,this.onClick),this.addLsn(RpSys.ins().patchRp,this.updateRp),this.addLsn(FbSys.ins().patchguZhanModeUpdate,this.updateData),this.updateData(),this.updateRp(),FbSys.ins().guZhanMode.showRewardRedPoint=!1,RpFun.showGuZhanRedPoint(PCode.UPD)},e.prototype.updateData=function(){var t=FbSys.ins().guZhanMode,e=t.killCount,i=t.getMaxKillCount,n=addColor("("+e+"/"+i+")",t.isIntoFuben()?15733780:5949490);this.lbRewardDesc.textFlow=addColorTF(Lang.guzhan_str0.replace("$count$",""+n)),this.lbDesc.textFlow=StrUtil.toTF(t.getConfig().desc),this.lbTimeDesc.textFlow=StrUtil.toTF(t.getConfig().timedesc),this.itemReward.data=t.getConfig().dayReward[0],this.itemReward.setYiLingQu(!t.isIntoFuben()),this.itemReward1.data=t.getConfig().extraReward[0],this.itemReward1.setYiLingQu(t.rewardYiMai()),this.listArray.source=t.getConfig().fbDrop,this.priceIcon.setPrice(t.getConfig().price),this.groupReward.visible=t.rewardKeMai(),this.btnBuyReward.enabled=!t.rewardYiMai(),this.currentState=t.rewardKeMai()?"s1":"s2",this.btnIntoFuben.enabled=t.isOpen?!0:!1},e.prototype.updateRp=function(t){void 0===t&&(t=null),(!t||t.check(e))&&(this.btnDropLog.redPoint.visible=RpSys.ins().getData(JJCWin,JJCManyPanel,e,GuZhanRankPanel),this.btnIntoFuben.redPoint.visible=RpSys.ins().getData(JJCWin,JJCManyPanel,e,"IntoFuben"),this.btnBuyReward.redPoint.visible=RpSys.ins().getData(JJCWin,JJCManyPanel,e,"BuyReward"))},e.prototype.onClick=function(t){switch(t.target){case this.btnBuyReward:GFunc.checkCurrency(CurType.yb,FbSys.ins().guZhanMode.getConfig().price)&&FbSys.ins().sendBuyReward();break;case this.btnDropLog:openWin(GuZhanRankWin);break;case this.btnIntoFuben:FbSys.ins().guZhanMode.isIntoFuben()?FbSys.ins().guZhanMode.leftCdTime<=0?(FbSys.ins().sendGuZhanFight(),this.closeMyWin()):showtipsFail(Lang.guzhan_str3.replace("$second$",""+Math.ceil(FbSys.ins().guZhanMode.leftCdTime/1e3))):showtipsFail(Lang.guzhan_str4)}},e.getSysId=function(){return 359},e.getTitle=function(){return"btz_zycs_sjmg"},e.getTabTitle=function(){return"sjhj_zycs_tap2"},e}(BasePanel);__reflect(GuZhanPanel.prototype,"GuZhanPanel"),window.GuZhanPanel=GuZhanPanel;var HeChengPanel=function(t){function e(){var e=t.call(this)||this;return e.init(),e}return __extends(e,t),e.prototype.init=function(){this.skinName="HeChengPanelEUI",this.itemList.itemRenderer=HeChengTabItem,this.itemListArray=new eui.ArrayCollection,this.itemList.dataProvider=this.itemListArray},e.prototype.open=function(){t.prototype.open.call(this),this.addLsn(RpSys.ins().patchRp,this.updateRp),this.addClickE(this.itemList,this.onMenuClick),this.iniPanle(),this.updateRp()},e.prototype.close=function(){t.prototype.close.call(this)},e.prototype.updateRp=function(t){if(void 0===t&&(t=null),!t||t.check(e))for(var i=this.itemList.numElements,n=0;i>n;n++){var a=this.itemList.getElementAt(n);a&&a.updateRedPoint()}},e.prototype.updatePanel=function(){this.itemListArray.source=BagSys.ins().heChengDatas,this.itemList.validateNow()},e.prototype.iniPanle=function(){this.updatePanel()},e.prototype.onMenuClick=function(t){if("HeChengTabItem"==t.target.name)var e=t.target,i=this.itemList.selectedItem;if("HeChengTabItemSub"==t.target.name){var e=t.target,i=e.data;openWin(HeChengListWin,i.heChengViewConfig.type2)}},e.prototype.onClick=function(t){t.target},e.getSysId=function(){return 113},e.getTitle=function(){return"btz_zycs_hc"},e.getTabTitle=function(){return"合 成"},e}(BasePanel);__reflect(HeChengPanel.prototype,"HeChengPanel"),window.HeChengPanel=HeChengPanel;var KlmPanel=function(t){function e(){var e=t.call(this)||this;return e.MCmonster=new MC,e.initUI(),e}return __extends(e,t),e.prototype.initUI=function(){this.skinName="KlmPanelEUI",this.list.itemRenderer=KlmPanelItem,this.list.dataProvider=this.listData=new eui.ArrayCollection,this.listReward.itemRenderer=ItemBaseReward,this.listReward.dataProvider=this.listRewardData=new eui.ArrayCollection,this.labelSetting.textFlow=addColorTF('<a href="event:"><u>'+this.labelSetting.text+"</u></a>"),this.barhp.maximum=100,this.groupBoss.addChild(this.MCmonster),this.MCmonster.touchEnabled=!1,this.groupBoss.touchEnabled=!1},e.prototype.open=function(){t.prototype.open.call(this),FbSys.ins().sendKlmInfo(),FbSys.ins().sendKlmListInfo(),this.addLsn(FbSys.ins().patchKlmListInfo,this.updatePanel),this.addLsn(FbSys.ins().patchKlmHpChange,this.updateStatus),this.addLsn(FbSys.ins().patchKlmHpChange,this.updateBtnStatus),this.addLsn(FbSys.ins().patchKlmHpChange,this.updateListStatus),this.addLsn(FbSys.ins().patchKlmUpdateHp,this.updateBossHp),this.addLsn(RpSys.ins().patchRp,this.updateRp),this.addLsn(FbSys.ins().patchKlmKunDunBoss,this.updateKunDun),this.addLsn(FbSys.ins().patchKlmKunDunData,this.updateKunDun),this.addLsn(FbSys.ins().patchKlmInfo,this.updateCDTime),this.addLsn(BagSys.ins().patchItemChange,this.updateStatus),this.addLinkE(this.labelSetting,this.onLink),this.addClickE(this.challengeBtn,this.onClick),this.addClickE(this.btn_img,this.onOpenClick),this.addItemTapE(this.list,this.onListItemTap),this.list.selectedIndex=0,this.list.useVirtualLayout=!1,this.updatePanel(),this.updateRp()},e.prototype.close=function(){t.prototype.close.call(this)},e.prototype.updateRp=function(t){if((!t||t.check(KlmKunDunShowWin))&&(this.kunDunEff.redPoint.visible=RpSys.ins().getData(BossWin,ZhuZaiMainPanel,e,KlmKunDunShowWin)),!t||t.check(e))for(var i=this.list.numElements,n=0;i>n;n++){var a=this.list.getElementAt(n);if(a){var o=a.data;o&&!o.isDie&&a.updateRedPoint()}}},e.prototype.updateCDTime=function(){var t=FbSys.ins().klmModel.leftCdTime;t>0?(Timer.ins()["do"](0,1e3,Math.ceil(t/1e3),this.timeFun,this),this.challengeBtn.enabled=!1,this.labelConsume.visible=!1,this.imgConsume.visible=!1):(this.labelTime.text="",this.challengeBtn.enabled=!0,this.labelConsume.visible=!0,this.imgConsume.visible=!0)},e.prototype.timeFun=function(t){this.labelTime.textFlow=addColorTF(getFormatTime(t,"hh:mm:ss")),0>=t&&this.updateCDTime()},e.prototype.updatePanel=function(){for(var t=FbSys.ins().klmModel.klmInfos.concat(),e=[],i=[],n=0,a=t;n<a.length;n++){var o=a[n];1==o.isopenNumber?e.push(o):i.push(o)}SortUtil.sortOn(e,["isopenNumber","isDieNumber","getLv"],[SortType.down,SortType.down,SortType.down]),SortUtil.sortOn(i,["isopenNumber","isDieNumber","getLv"],[SortType.down,SortType.down,SortType.up]),t=e.concat(i),this.listData.source=t,this.curData=this.list.selectedItem,this.updateData(this.curData)},e.prototype.updateBossHp=function(){this.barhp.value=this.curData.hpPecent},e.prototype.updateData=function(t){var e=Cfg.getConfig(KalimaFubenConfig,t.id);this.listRewardData.source=e.desc,this.lbName.text=t.monsterName+" "+GFunc.getZSNameBydb(e.zslevel),this.barhp.value=t.hpPecent,this.lbDesc.textFlow=addColorTF(Lang.hjbd_str16.replace("$count$",""+addColor(e.anger,16115290)));var i=Cfg.getConfig(MonsterModelConfig,t.monsterModel),n=ResMgr.getMonsterSource(i.appearance,5,EntityAction.STAND);this.MCmonster.playFile(n,-1),this.MCmonster.scaleY=i.scale,this.MCmonster.scaleX=-1*i.scale,this.bitPower.text=e.power.toString(),this.updateBtnStatus(),this.updateKunDun(),this.updateStatus()},e.prototype.updateBtnStatus=function(){this.timeTxt.text="",this.curData.isopen&&this.curData.isDie&&(this.updateDieTime(),Timer.ins()["do"](1e3,1e3,0,this.updateDieTime,this))},e.prototype.updateTime=function(){for(var t=this.list.numElements,e=0;t>e;e++){var i=this.list.getElementAt(e);if(i){var n=i.data;n&&n.isDie&&i.updateTime()}}},e.prototype.updateStatus=function(){var t=Cfg.getConfig(KalimaFubenConfig,this.curData.id);this.groupChallenge.visible=this.curData.isopen&&!this.curData.isDie,this.lbLv.text="",this.curData.isopen?this.curData.isDie||(this.timeTxt.text=""):(this.lbLv.text=""+GFunc.getZSNameBydb(t.zslevel)+Lang.common_str43,this.timeTxt.textColor=11508595),this.updataConSUgeSingle()},e.prototype.updataConSUgeSingle=function(){var t=this.curData.config.item[0],e=t.count,i=t.id,n=BagSys.ins().getItemById(i),a=Cfg.getItemCfg(i),o=n?n.count:0;this.imgConsume.source=ResMgr.getItemIcon(a.getIcon()),o>=e?this.labelConsume.textFlow=addColorTF(o+"/"+e):this.labelConsume.textFlow=addColorTF(o+"/"+e,15732752)},e.prototype.updateDieTime=function(){var t=this.curData.reliveTick-Timer.ins().getEgretTimer();t>0&&this.curData.isDie?(this.timeTxt.text=Lang.fb_str101.replace("$time$",""+getFormatTime(Math.floor(t/1e3),"hh:mm:ss")),this.timeTxt.textColor=15733780):Timer.ins().remove(this.updateDieTime,this)},e.prototype.updateListStatus=function(t){for(var e=this.list.numElements,i=0;e>i;i++){var n=this.list.getElementAt(i),a=n.data;n&&a.id==t&&n.updateTime()}},e.prototype.updateKunDun=function(){this.kunDunEff.setData(FbSys.ins().klmModel.kunDunValue,FbSys.ins().klmModel.kunDunMax)},e.prototype.onListItemTap=function(t){var e=t.item;this.curData.id!=e.id&&(Timer.ins().remove(this.updateDieTime,this),this.curData=e,this.updateData(this.curData))},e.prototype.onClick=function(t){if(FbSys.ins().klmModel.leftCdTime<=0){var e=this.curData.config.item[0],i=e.count,n=new ItemDataReward;n.id=e.id,n.count=i,GFunc.checkConsumeEnough(n)&&(FbSys.ins().sendKlmFight(this.curData.id),closeWin(BossWin))}else showtipsFail(Lang.fb_str11.replace("$second$",""+Math.ceil(FbSys.ins().klmModel.leftCdTime/1e3)))},e.prototype.onOpenClick=function(t){openWin(KlmKunDunShowWin)},e.prototype.onLink=function(){openWin(KlmRemindWin)},e.prototype.compareFn=function(t,e){t.config.zslevel,e.config.zslevel;return t.isDie&&!e.isDie?1:e.isDie&&!t.isDie?-1:0},e.getSysId=function(){return 339},e.getTitle=function(){return"btz_zycs_mwwc"},e.getTabTitle=function(){return"mwwc_zycs_bq"},e}(BasePanel);__reflect(KlmPanel.prototype,"KlmPanel"),window.KlmPanel=KlmPanel;var MonsterSiegeMainPanel=function(t){function e(){var e=t.call(this)||this;return e.helpId=127,e.skinName="MonsterSiegeMainPanelEUI",e.listReward.itemRenderer=MonsterSiegeBox,e.listReward.dataProvider=e.listRewardArray=new eui.ArrayCollection,e.listReward.useVirtualLayout=!1,e.pageArrowComponentBase=new PageArrowCom(e.scrollerReward,100,88),e.pageArrowComponentBase.setBtn(e.btnLeft,e.btnRight),e.bar.labelFunction=function(){return""},e}return __extends(e,t),e.prototype.open=function(){t.prototype.open.call(this),this.addClickE(this,this.onclick),this.addItemTapE(this.listReward,this.onlistReward),this.addLsn(RpSys.ins().patchRp,this.updateRp),this.addLsn(BagSys.ins().patchItemChange,this.iniPanel),this.updateRp(),this.iniPanel(),this.pageArrowComponentBase.open(),MonsterSiegeSys.ins().sendInfo();var e=MonsterSiegeSys.ins().getDefaultScoreRewardData().id;e>2&&this.pageArrowComponentBase.setListIndex(e-1),this.updateTime()},e.prototype.close=function(){t.prototype.close.call(this),this.pageArrowComponentBase.close()},e.prototype.iniPanel=function(){var t=MonsterSiegeSys.ins(),e=Cfg.getConfig(MSCommonConfig);this.lbDesc.textFlow=StrUtil.toTF(e.playdesc),this.lbTimer.textFlow=StrUtil.toTF(""+e.timeDesc),this.listRewardArray.source=t.scoreRewardDatas,this.lbScore.text=""+GFunc.getItemCount(CurType.gongchengJifen)},e.prototype.updateTime=function(){var t=Cfg.getConfig(MSCommonConfig),e=MonsterSiegeSys.ins().gethuiFuTimer(),i=e>0?addColor("("+getFormatTime(e,"hh小时mm分ss秒")+"后恢复一次)",5767068):"",n=""+addColor(MonsterSiegeSys.ins().count+"/"+t.maxtimes,0==MonsterSiegeSys.ins().count?15733780:5767068);this.lbCount.textFlow=addColorTF("剩余挑战次数:"+n+i)},e.prototype.onclick=function(t){switch(t.target){case this.btnLog:openWin(MonsterSiegeLogTipsWin);break;case this.btnRank:openWin(MonsterSiegeRankWin);break;case this.btnGoto:if(!MonsterSiegeSys.ins().isOpen)return void showtipsFail("魔物围城活动每天10：00点开始");var e=Cfg.getConfig(MSCommonConfig).qwzb,i=Math.floor(Math.random()*e.length),n=new XY(e[i][0]*MapBase.CELL_SIZE,e[i][1]*MapBase.CELL_SIZE);LogicSys.ins().centerEntity.AI.startMoveToXY(n,GConst.MainCityFbId),closeWin(BossWin)}},e.prototype.onlistReward=function(t){var e=t.item;openWin(MonsterSiegeBoxTipsWin,e)},e.prototype.updateRp=function(t){if(void 0===t&&(t=null),!t||t.check(e)){for(var i=this.listReward.numChildren,n=0;i>n;n++){var a=this.listReward.getElementAt(n);a&&a.updateRedPoint()}this.btnGoto.redPoint.visible=RpSys.ins().getData(BossWin,ZhuZaiMainPanel,e,"goto")}},e.getSysId=function(){return 354},e.getTitle=function(){return"btz_zycs_mwwc"},e.getTabTitle=function(){return"mwwc_zycs_bq"},e}(BasePanel);__reflect(MonsterSiegeMainPanel.prototype,"MonsterSiegeMainPanel"),window.MonsterSiegeMainPanel=MonsterSiegeMainPanel;var GuideViewBase=function(t){function e(){var e=t.call(this)||this;return e.rect=new egret.Rectangle,e.globalRect=new egret.Rectangle,e.infoGroup=new eui.Group,e.infoGroup.touchEnabled=!1,e.infoGroup.touchChildren=!1,e.addChild(e.infoGroup),e}return __extends(e,t),e.prototype.drawMask=function(t,e){if(void 0===t&&(t=0),void 0===e&&(e=.5),!this.shapeMasks){this.shapeMasks=[];for(var i=0;8>i;i++)this.shapeMasks[i]=new egret.Shape,this.shapeMasks[i].touchEnabled=!0}this.shapeMiddle||(this.shapeMiddle=new egret.Shape);var n=this.rect,a=this.getStage().stageWidth-n.x-n.width,o=this.getStage().stageHeight-n.y-n.height;this.drawShape(this.shapeMasks[0],new egret.Rectangle(0,0,this.getStage().stageWidth,n.y),t,e),this.drawShape(this.shapeMasks[1],new egret.Rectangle(0,n.y,n.x,n.height),t,e),this.drawShape(this.shapeMasks[2],new egret.Rectangle(n.x+n.width,n.y,a,n.height),t,e),this.drawShape(this.shapeMasks[3],new egret.Rectangle(0,n.y+n.height,this.getStage().stageWidth,o),t,e),this.drawShape(this.shapeMiddle,n),this.shapeMiddle.visible=!1},e.prototype.drawShape=function(t,e,i,n){void 0===i&&(i=0),void 0===n&&(n=.5);var a=t.graphics;a.clear(),a.beginFill(i,n),a.drawRect(e.x,e.y,e.width,e.height),a.endFill(),this.addChildAt(t,0)},e.prototype.onResize=function(){if(this.checkVisible(this.target)){var t=this.target.localToGlobal();(this.rect.x!=t.x||this.rect.y!=t.y)&&this.refresh()}return!1},e.prototype.refresh=function(){this.open(this.target,this.guideData)},e.prototype.checkVisible=function(t){return t&&t.visible&&t.stage&&0!=t.scaleX&&0!=t.scaleY},e.prototype.open=function(t,e){void 0===e&&(e=null),this.guideData=e;var i=this.target;this.target=t,this.visible=this.checkVisible(t);var n=this.gettargetXY();if(this.rect.x=n.x,this.rect.y=n.y,this.rect.width=t.width?t.width:60,this.rect.height=t.height?t.height:60,i!=t){var a=this.target.localToGlobal();this.globalRect.x=a.x,this.globalRect.y=a.y,this.globalRect.width=this.rect.width,this.globalRect.height=this.rect.height}this.infoGroup.x=this.rect.x+(this.rect.width>>1),this.infoGroup.y=this.rect.y+(this.rect.height>>1),egret.stopTick(this.onResize,this),egret.startTick(this.onResize,this),this.guideData&&this.guideData.time>0&&Timer.ins()["do"](1e3*this.guideData.time,0,1,this.closeGuider,this)},e.prototype.closeGuider=function(){var t=new XY;t.x=this.globalRect.x+this.globalRect.width/2,t.y=this.globalRect.y+this.globalRect.height/2,this.getStage().dispatchEvent(new egret.TouchEvent(egret.TouchEvent.TOUCH_TAP,!1,!1,t.x,t.y))},e.prototype.gettargetXY=function(){return this.target.localToGlobal()},e.prototype.getMouseCode=function(t){return 0},e.prototype.close=function(){this.target=null,this.guideData=null,this.rect.setEmpty(),egret.stopTick(this.onResize,this),DisUtil.remove(this),Timer.ins().removeAll(this)},e.prototype.reset=function(){this.shapeMiddle&&(this.shapeMiddle.visible=!0)},e.prototype.addToParent=function(t){t.addChild(this)},e.prototype.getStage=function(){return egret.MainContext.instance.stage},e}(BaseOC);__reflect(GuideViewBase.prototype,"GuideViewBase");var BaseSys=function(t){function e(){var e=t.call(this)||this;return MessageMgr.ins().coverFunc(getDefinitionByName(egret.getQualifiedClassName(e))),e.addLsn(Socket.ins().patchSocketClose,e.onSocketClose),e}return __extends(e,t),e.prototype.reg=function(t,e){Socket.ins().reg(this.sysId,t,e,this)},e.prototype.regMsgBase=function(t,e,i){Socket.ins().reg(t,e,i,this)},e.prototype.regSendMsg=function(t,e,i){if(!i.sysId&&!i.msgId){i.sysId=t,i.msgId=e;for(var n=getDefinitionByName(egret.getQualifiedClassName(this)).prototype,a=Object.keys(n),o=function(t){if(s[t]===i){var e=i,n=function(){for(var t=[],i=0;i<arguments.length;i++)t[i]=arguments[i];var n=e.call.apply(e,[this].concat(t));n?(this.writeHead(n,e.sysId,e.msgId),this.send(n)):console.log("协议:"+e.sysId+"-"+e.msgId+"未返回ByteArray")};return s[t]=n,"break"}},s=this,r=0,u=a;r<u.length;r++){var h=u[r],l=o(h);if("break"===l)break}}},e.prototype.onSocketClose=function(){},e.prototype.getBytes=function(t,e){void 0===t&&(t=0),void 0===e&&(e=this.sysId);var i=Socket.ins().creatBytes(e,t);return i},e.prototype.sendBase=function(t){var e=Socket.ins().creatBytes(this.sysId,t);this.send(e)},e.prototype.writeHead=function(t,e,i){t.position=12,t.writeHead(e,i)},e.prototype.send=function(t){Socket.ins().send(t)},e.prototype.addLsn=function(t,e){MessageMgr.ins().addLsn(t,e,this)},e.prototype.removeLsn=function(t,e){MessageMgr.ins().removeLsn(t,e,this)},e.prototype.removeAll=function(){MessageMgr.ins().removeAll(this)},e}(BaseIns);__reflect(BaseSys.prototype,"BaseSys");var DaZaoTabSubDataBase=function(){function t(){this.parentTabName="",this.daZaoTabEqupPosData=[]}return t.prototype.iniData=function(){},Object.defineProperty(t.prototype,"zslevel",{get:function(){return 0},enumerable:!0,configurable:!0}),t.prototype.getPanelName=function(){return egret.getQualifiedClassName(DaZaoEquipPanel)},Object.defineProperty(t.prototype,"redTabName",{get:function(){return this.tabName},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"tabName",{get:function(){return""},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"job",{get:function(){return 0},enumerable:!0,configurable:!0}),t.prototype.isTuiJian=function(){return!1},t.prototype.getTuiJianSubTabIndex=function(){return 0},t.prototype.getRedPoint=function(){return!1},t}();__reflect(DaZaoTabSubDataBase.prototype,"DaZaoTabSubDataBase");var CurType;!function(t){t[t.exp=0]="exp",t[t.gold=1]="gold",t[t.yb=2]="yb",t[t.crystal=3]="crystal",t[t.mojing=4]="mojing",t[t.guildContrib=5]="guildContrib",t[t.fuildfund=6]="fuildfund",t[t.feats=7]="feats",t[t.starsoul=8]="starsoul",t[t.shopIntegral=9]="shopIntegral",t[t.damonIntegral=10]="damonIntegral",t[t.elementDust=11]="elementDust",t[t.achieve=12]="achieve",t[t.elementEssence=13]="elementEssence",t[t.shouhu=14]="shouhu",t[t.JJCHoner=15]="JJCHoner",t[t.heian=17]="heian",t[t.xianzhi=18]="xianzhi",t[t.gongchengJifen=19]="gongchengJifen",t[t.TouXianPrestige=20]="TouXianPrestige",t[t.tujianBossExp=21]="tujianBossExp",t[t.WeiWang=22]="WeiWang",t[t.MountJiFen=23]="MountJiFen",t[t.KfLadderScore=24]="KfLadderScore",t[t.BossScore=25]="BossScore",t[t.talentValue=27]="talentValue",t[t.JinZuan=30]="JinZuan",t[t.QiyuValue=31]="QiyuValue",t[t.footMiYu=32]="footMiYu",t[t.DartLueduoLing=33]="DartLueduoLing",t[t.DartScore=34]="DartScore",t[t.DartGuildScore=35]="DartGuildScore",t[t.WCStage=36]="WCStage",t[t.CampWar=37]="CampWar",t[t.vipExp=99]="vipExp",t[t.max=100]="max"
}(CurType||(CurType={}));var NumberType=function(){function t(){}return t.CommonBig="powernum_",t.DamageFanShe="fs",t.DamageHuiXin="hx",t.DamageWuShi="ws",t.DamageZhiMing="zm",t.DamageZhuoYue="zy",t.DamagePuTong="ps",t.DamagePoision="zd",t.DamageTianshi="ts",t.DamageShensheng="ss",t.DamageHuixue="huixue",t.DamageYb="yb",t.DamageSm="sm",t.Iconnum="iconnum_",t.powerUp="zdlupnum_",t.powerDown="zdldownnum_",t.Exp="jy",t.Powernum1="powernum1_",t.Powernum="powernum_",t}();__reflect(NumberType.prototype,"NumberType");var DamageTypes;!function(t){t[t.BLANK=0]="BLANK",t[t.HIT=1]="HIT",t[t.WSYJ=2]="WSYJ",t[t.MISS=3]="MISS",t[t.HXYJ=4]="HXYJ",t[t.ZYYJ=5]="ZYYJ",t[t.ZMYJ=6]="ZMYJ",t[t.FS=7]="FS",t[t.TSYJ=8]="TSYJ",t[t.SSYJ=9]="SSYJ",t[t.WWSH=10]="WWSH",t[t.EXP=99]="EXP",t[t.ZD=100]="ZD",t[t.CFYS=101]="CFYS",t[t.CFPJ=102]="CFPJ",t[t.CFJS=103]="CFJS",t[t.CFZD=104]="CFZD",t[t.HUIXUE=999]="HUIXUE"}(DamageTypes||(DamageTypes={}));var CastType;!function(t){t[t.None=5]="None",t[t.Friend=1]="Friend",t[t.Enemy=2]="Enemy",t[t.Self=3]="Self",t[t.SelfByHp=4]="SelfByHp"}(CastType||(CastType={}));var TargetType;!function(t){t[t.Friend=1]="Friend",t[t.Enemy=2]="Enemy"}(TargetType||(TargetType={}));var BuffType;!function(t){t[t.AdditionalDamage=1]="AdditionalDamage",t[t.AddBlood=2]="AddBlood",t[t.AdditionalAttributes=3]="AdditionalAttributes",t[t.AdditionalState=4]="AdditionalState",t[t.Summon=5]="Summon"}(BuffType||(BuffType={}));var BuffEffectType;!function(t){t[t.WU_DI=0]="WU_DI",t[t.HUN_MI=1]="HUN_MI",t[t.BA_TI=3]="BA_TI",t[t.DING_SHEN=4]="DING_SHEN"}(BuffEffectType||(BuffEffectType={}));var IconType=function(){function t(){}return t.IT_80x80="",t.IT_NG="_n",t}();__reflect(IconType.prototype,"IconType");var PataType;!function(t){t[t.WanMo=0]="WanMo",t[t.HeiAn=1]="HeiAn"}(PataType||(PataType={}));var ItemType=function(){function t(){}return t.isEquip=function(e){return e==t.equip||e==t.godEquip||e==t.TianMoGodEquip||e==t.MountEquip},t.isGodEquip=function(e){return e==t.godEquip||e==t.TianMoGodEquip},t.isBox=function(e){return e==t.meilinBox||e==t.baoxiang||e==t.SelectBox},t.isKuaiJieBox=function(e){return e==t.baoxiang},t.isShowRank=function(e){return e==t.equip},t.equip=0,t.mat=1,t.tujian=2,t.skillStone=3,t.baoxiang=4,t.guoshi=5,t.exp=6,t.element=7,t.FootEquip=8,t.footPrint=9,t.damonWz=10,t.ForgeItem=11,t.xidian=12,t.vip=13,t.meilinBox=14,t.title=15,t.godEquip=16,t.gem=17,t.fumosuipian=18,t.fumojuanzhou=19,t.godEquipWake=20,t.MeiLinMiYu=21,t.zhulingItem=22,t.TianMoGodEquip=23,t.TianMoGodEquipcl=24,t.JuHun=25,t.SkillUpShi=26,t.Purify=27,t.DianJi=28,t.WangZheBox=29,t.Jewel=30,t.ShengHui=32,t.MountEquip=33,t.ShenMoSuiPian=35,t.ShenMoHuanHua=36,t.DamonYinJi=40,t.DamonAttrDan=41,t.ShenMoCard=42,t.SelectBox=43,t.BossHome=44,t.Medal=45,t.TouXian=46,t.TianShiShengDunDan=47,t.TianShiShengDunLinShi=48,t.ChibangEquip=49,t.ChibangEquipRank=50,t.ShenMoZhiLing=52,t.ShenMoZhiLingDanYao=53,t.ShenMoEquip=54,t.ZhuoyueFujia=58,t.ShenqiLv=60,t.DamonLv=61,t.YongbingLv=62,t.ShenmoLv=63,t.WingLv=64,t.ShenqiHuanHua=65,t.WingHuanHua=66,t.DamonHuanHua=67,t.YongbingHuanHua=68,t.ShenmoHuanHua=69,t.SzLv=70,t.SzHuanHua=71,t.MeilinLv=72,t.MeilinHuanHua=73,t.DamonMozhen=74,t.YongbingMozhen=75,t.ShenqiFuhun=76,t.WingFuhun=77,t.SzFuhun=78,t.MeilinFuhun=79,t.DamonYinji=80,t.YongbingYinji=81,t.ShenmoYinji=82,t.GodRing=84,t.MoRing=85,t.ShenmoMozhen=86,t.Hunqi=88,t.Shengwu=90,t.ZsItem=91,t.YuanShi=92,t.Aoyi=96,t.Shengbei=97,t.XunBaoItem=98,t.ZSDB=100,t.SMSJS=101,t.YBSJS=102,t.JLSJS=103,t.CZK=105,t.FootLv=108,t.FootHuanHua=109,t.Xianlu=110,t.QingMingItem=114,t.ShengLingLevel=115,t.ShengLingYinJi=116,t.ShengLingStage=117,t.ShenYouUpLevel=118,t.ShenYouSkill=119,t.ShenYouHuanHua=120,t.ShenYouYinJiiSkill=121,t.ShenYouYinJi=122,t.WCLevelType=128,t.QQSSITEM=139,t.ShenPanTaoZhuanItemType=140,t.Max=49,t}();__reflect(ItemType.prototype,"ItemType");var ItemUseType;!function(t){t[t.yellowBox=1]="yellowBox",t[t.title=2]="title",t[t.fruit=5]="fruit",t[t.vip=7]="vip",t[t.SelectBox=10]="SelectBox",t[t.EditorName=11]="EditorName"}(ItemUseType||(ItemUseType={}));var QualityType;!function(t){t[t.White=0]="White",t[t.Green=1]="Green",t[t.Blue=2]="Blue",t[t.Purple=3]="Purple",t[t.Orange=4]="Orange",t[t.Red=5]="Red"}(QualityType||(QualityType={}));var JobConst;!function(t){t[t.ZhanShi=1]="ZhanShi",t[t.FaShi=2]="FaShi",t[t.GongJianShou=3]="GongJianShou",t[t.JobCount=3]="JobCount"}(JobConst||(JobConst={}));var AttrType;!function(t){t[t.PT=0]="PT",t[t.ZJ=1]="ZJ",t[t.ZY=2]="ZY",t[t.XY=3]="XY",t[t.SS=4]="SS"}(AttrType||(AttrType={}));var FbGroup;!function(t){t[t.City=0]="City",t[t.Field_1=1]="Field_1",t[t.Field_2=2]="Field_2",t[t.Field_3=3]="Field_3",t[t.Field_4=4]="Field_4",t[t.Field_5=5]="Field_5",t[t.Field_6=6]="Field_6",t[t.Field_7=7]="Field_7",t[t.Field_8=8]="Field_8",t[t.Field_9=9]="Field_9",t[t.Field_10=10]="Field_10",t[t.Field_11=11]="Field_11",t[t.Field_12=12]="Field_12",t[t.Guzhanchang=10001]="Guzhanchang",t[t.Exp=10002]="Exp",t[t.Gold=10003]="Gold",t[t.Emo=10004]="Emo",t[t.Wanmo=10005]="Wanmo",t[t.HeiAn=10006]="HeiAn",t[t.XueSe=10007]="XueSe",t[t.JueWang=10008]="JueWang",t[t.shilian=10010]="shilian",t[t.Relilc=10011]="Relilc",t[t.Mojing=10012]="Mojing",t[t.JJC=10013]="JJC",t[t.Qizhi=10015]="Qizhi",t[t.EQUIP=10017]="EQUIP",t[t.MapBoss=10018]="MapBoss",t[t.GuildBoss=10019]="GuildBoss",t[t.RedFortress=10020]="RedFortress",t[t.BossHome=10023]="BossHome",t[t.Kalima=10024]="Kalima",t[t.ShiJieBoss=10028]="ShiJieBoss",t[t.Mine=10029]="Mine",t[t.MineBattle=10030]="MineBattle",t[t.TianTi=10031]="TianTi",t[t.Brave=10033]="Brave",t[t.ZhuZao=10035]="ZhuZao",t[t.KuaFuBoss=10036]="KuaFuBoss",t[t.GuildMonFb=10037]="GuildMonFb",t[t.ShenDian=10038]="ShenDian",t[t.TianFu=10043]="TianFu",t[t.Damon=10046]="Damon",t[t.Yongbing=10045]="Yongbing",t[t.Shenmo=10044]="Shenmo",t[t.Shenqi=10047]="Shenqi",t[t.Wing=10048]="Wing",t[t.Sz=10049]="Sz",t[t.GuildWarPVE=10050]="GuildWarPVE",t[t.GuildWarPVP=10051]="GuildWarPVP",t[t.Meilin=10052]="Meilin",t[t.kfbosssd=10053]="kfbosssd",t[t.QiyuEvent3=10055]="QiyuEvent3",t[t.QiyuEvent5=10056]="QiyuEvent5",t[t.MoLong=10039]="MoLong",t[t.ShengDian=10058]="ShengDian",t[t.GuildBattle=10059]="GuildBattle",t[t.Siege=10061]="Siege",t[t.CampWar=10062]="CampWar",t[t.KuaiSuPower=9999]="KuaiSuPower"}(FbGroup||(FbGroup={}));var BuyType;!function(t){t[t.shop=0]="shop",t[t.integral=0]="integral",t[t.Honor=0]="Honor"}(BuyType||(BuyType={}));var ItemDataRewardType;!function(t){t[t.Currency=0]="Currency",t[t.Item=1]="Item"}(ItemDataRewardType||(ItemDataRewardType={}));var TaskNavType;!function(t){t[t.OpenWin=1]="OpenWin",t[t.FindNpc=2]="FindNpc",t[t.EnterFb=3]="EnterFb",t[t.Guide=4]="Guide",t[t.DoubleParamWin=5]="DoubleParamWin",t[t.WanFa=8]="WanFa"}(TaskNavType||(TaskNavType={}));var TaskType;!function(t){t[t.killMonster=22]="killMonster",t[t.wanmoPata=28]="wanmoPata",t[t.equipFuben=64]="equipFuben",t[t.loginDay=84]="loginDay"}(TaskType||(TaskType={}));var AddPointType;!function(t){t[t.liliang=1]="liliang",t[t.minjie=2]="minjie",t[t.tili=3]="tili",t[t.zhili=4]="zhili"}(AddPointType||(AddPointType={}));var MonsterType;!function(t){t[t.Normal=0]="Normal",t[t.Boss=1]="Boss",t[t.Boss2=4]="Boss2",t[t.FriendMonster=5]="FriendMonster"}(MonsterType||(MonsterType={}));var SmeltType;!function(t){t[t.Normal=1]="Normal",t[t.ZiEquip=2]="ZiEquip",t[t.GodEquip=3]="GodEquip",t[t.TianMo=4]="TianMo",t[t.MountEquip=5]="MountEquip"}(SmeltType||(SmeltType={}));var ReliveType;!function(t){t[t.Boss=1]="Boss",t[t.Wanfa=2]="Wanfa",t[t.KFBoss=3]="KFBoss"}(ReliveType||(ReliveType={}));var DianJiType;!function(t){t[t.low=1]="low",t[t.high=2]="high"}(DianJiType||(DianJiType={}));var TalenType;!function(t){t[t.Property=1]="Property",t[t.Skill=2]="Skill"}(TalenType||(TalenType={}));var BtnDireType;!function(t){t[t.left=1]="left",t[t.right=2]="right",t[t.top=3]="top",t[t.down=4]="down"}(BtnDireType||(BtnDireType={}));var RewardStatus;!function(t){t[t.WeiWanCheng=0]="WeiWanCheng",t[t.KeLinQu=1]="KeLinQu",t[t.YiLinQu=2]="YiLinQu"}(RewardStatus||(RewardStatus={}));var ZsType;!function(t){t[t.normal=0]="normal",t[t.dashi=1]="dashi",t[t.chongsheng=2]="chongsheng"}(ZsType||(ZsType={}));var AppearType;!function(t){t[t.common=1]="common",t[t.maindAppear=2]="maindAppear",t[t.bianshendAppear=3]="bianshendAppear"}(AppearType||(AppearType={}));var ChatType;!function(t){t[t.Secret=0]="Secret",t[t.Near=1]="Near",t[t.Laba=2]="Laba",t[t.Guild=3]="Guild",t[t.Team=4]="Team",t[t.BigTeam=5]="BigTeam",t[t.Local=6]="Local",t[t.World=7]="World",t[t.Camp=8]="Camp",t[t.System=9]="System",t[t.KuaFu=10]="KuaFu",t[t.SOS=11]="SOS",t[t.Cosign=12]="Cosign",t[t.LianFu=13]="LianFu",t[t.Xianlu=14]="Xianlu",t[t.Log=15]="Log",t[t.All=16]="All"}(ChatType||(ChatType={}));var ChatSubType;!function(t){t[t.Default=0]="Default",t[t.GuildBoss=1]="GuildBoss",t[t.Guild=2]="Guild",t[t.EmoIsle=3]="EmoIsle",t[t.shenhunShenDian=4]="shenhunShenDian",t[t.MoLong=5]="MoLong",t[t.GuaJi=6]="GuaJi",t[t.CampWar=7]="CampWar",t[t.ACT37_QQSH=8]="ACT37_QQSH"}(ChatSubType||(ChatSubType={}));var FriendsType;!function(t){t[t.guanZhu=1]="guanZhu",t[t.heiMingDan=2]="heiMingDan",t[t.zuiJin=3]="zuiJin",t[t.fenSi=4]="fenSi"}(FriendsType||(FriendsType={}));var ActRewardState;!function(t){t[t.CanGet=0]="CanGet",t[t.NotReached=1]="NotReached",t[t.Geted=2]="Geted"}(ActRewardState||(ActRewardState={}));var ActOpenState;!function(t){t[t.Unenabled=0]="Unenabled",t[t.Open=1]="Open",t[t.Jiesuan=2]="Jiesuan",t[t.End=3]="End"}(ActOpenState||(ActOpenState={}));var ActId;!function(t){t[t.ID_21=21]="ID_21",t[t.ID_71=71]="ID_71",t[t.ID_111=111]="ID_111",t[t.ID_112=112]="ID_112",t[t.ID_114=114]="ID_114",t[t.ID_115=115]="ID_115",t[t.ID_116=116]="ID_116",t[t.ID_117=117]="ID_117",t[t.ID_118=118]="ID_118",t[t.ID_119=119]="ID_119",t[t.ID_120=120]="ID_120",t[t.ID_231=231]="ID_231",t[t.ID_251=251]="ID_251",t[t.ID_254=254]="ID_254",t[t.ID_256=256]="ID_256",t[t.ID_257=257]="ID_257",t[t.ID_268=268]="ID_268",t[t.ID_335=335]="ID_335",t[t.ID_451=451]="ID_451",t[t.ID_452=452]="ID_452",t[t.ID_453=453]="ID_453",t[t.ID_454=454]="ID_454",t[t.ID_455=455]="ID_455",t[t.ID_456=456]="ID_456",t[t.ID_457=457]="ID_457",t[t.ID_1000=1e3]="ID_1000",t[t.ID_90000=9e4]="ID_90000",t[t.ID_90100=90100]="ID_90100",t[t.ID_99500=99500]="ID_99500",t[t.ID_99600=99600]="ID_99600",t[t.ID_99700=99700]="ID_99700",t[t.ID_99800=99800]="ID_99800",t[t.ID_99900=99900]="ID_99900"}(ActId||(ActId={}));var ActOnPlace;!function(t){t[t.huodong=0]="huodong",t[t.openserver=1]="openserver",t[t.hefu=2]="hefu",t[t.juezhan=3]="juezhan",t[t.YiYuanHaoLi=4]="YiYuanHaoLi",t[t.QMKH=5]="QMKH",t[t.CSK=6]="CSK",t[t.KFLC=7]="KFLC",t[t.CZCB=8]="CZCB",t[t.TCLY=9]="TCLY",t[t.YDSS=10]="YDSS",t[t.YDSS2=11]="YDSS2",t[t.ACT12=12]="ACT12",t[t.TaQingActFisrtRecharge=13]="TaQingActFisrtRecharge",t[t.zqFisrtRecharge=14]="zqFisrtRecharge",t[t.Actqingming=15]="Actqingming",t[t.ActHefu=17]="ActHefu",t[t.ActLaodong=18]="ActLaodong",t[t.ActHFSY=19]="ActHFSY",t[t.ACT21=21]="ACT21",t[t.ACT24=24]="ACT24",t[t.max=25]="max",t[t.bansheng=999]="bansheng"}(ActOnPlace||(ActOnPlace={}));var ActType;!function(t){t[t.TYPE_1=1]="TYPE_1",t[t.TYPE_2=2]="TYPE_2",t[t.TYPE_3=3]="TYPE_3",t[t.TYPE_4=4]="TYPE_4",t[t.TYPE_5=5]="TYPE_5",t[t.TYPE_6=6]="TYPE_6",t[t.TYPE_7=7]="TYPE_7",t[t.TYPE_8=8]="TYPE_8",t[t.TYPE_9=9]="TYPE_9",t[t.TYPE_10=10]="TYPE_10",t[t.TYPE_11=11]="TYPE_11",t[t.TYPE_12=12]="TYPE_12",t[t.TYPE_13=13]="TYPE_13",t[t.TYPE_14=14]="TYPE_14",t[t.TYPE_15=15]="TYPE_15",t[t.TYPE_16=16]="TYPE_16",t[t.TYPE_17=17]="TYPE_17",t[t.TYPE_18=18]="TYPE_18",t[t.TYPE_19=19]="TYPE_19",t[t.TYPE_20=20]="TYPE_20",t[t.TYPE_21=21]="TYPE_21",t[t.TYPE_22=22]="TYPE_22",t[t.TYPE_23=23]="TYPE_23",t[t.TYPE_24=24]="TYPE_24",t[t.TYPE_25=25]="TYPE_25",t[t.TYPE_34=34]="TYPE_34",t[t.TYPE_200=200]="TYPE_200",t[t.TYPE_201=201]="TYPE_201",t[t.TYPE_202=202]="TYPE_202",t[t.TYPE_203=203]="TYPE_203"}(ActType||(ActType={}));var ActSubType;!function(t){t[t.TYPE_1=1]="TYPE_1",t[t.TYPE_2=2]="TYPE_2",t[t.TYPE_3=3]="TYPE_3",t[t.TYPE_4=4]="TYPE_4",t[t.TYPE_5=5]="TYPE_5",t[t.TYPE_6=6]="TYPE_6",t[t.TYPE_7=7]="TYPE_7"}(ActSubType||(ActSubType={}));var EquipType;!function(t){t[t.ATTACK=0]="ATTACK",t[t.ARMOR=1]="ARMOR"}(EquipType||(EquipType={}));var EquipPos;!function(t){t[t.WEAPON=0]="WEAPON",t[t.HEAD=1]="HEAD",t[t.CLOTHES=2]="CLOTHES",t[t.HAND=3]="HAND",t[t.LEG=4]="LEG",t[t.CALIGA=5]="CALIGA",t[t.NECKLACE=6]="NECKLACE",t[t.EMBLEM=7]="EMBLEM",t[t.RING1=8]="RING1",t[t.RING2=9]="RING2",t[t.MAX=10]="MAX",t[t.Hufu=10]="Hufu"}(EquipPos||(EquipPos={}));var ChiBangEquipPos;!function(t){t[t.WEAPON=0]="WEAPON",t[t.HEAD=1]="HEAD",t[t.CLOTHES=2]="CLOTHES",t[t.hujian=3]="hujian",t[t.HAND=4]="HAND",t[t.yaodai=5]="yaodai",t[t.LEG=6]="LEG",t[t.CALIGA=7]="CALIGA",t[t.NECKLACE=8]="NECKLACE",t[t.RING1=9]="RING1",t[t.MAX=10]="MAX"}(ChiBangEquipPos||(ChiBangEquipPos={}));var GuildBuildingType;!function(t){t[t.GUILD_HALL=1]="GUILD_HALL",t[t.GUILD_SKILL=2]="GUILD_SKILL",t[t.GUILD_SHOP=3]="GUILD_SHOP",t[t.GUILD_ACTIVITY=4]="GUILD_ACTIVITY",t[t.GUILD_BUILD_COUNT=4]="GUILD_BUILD_COUNT"}(GuildBuildingType||(GuildBuildingType={}));var GuildOffice;!function(t){t[t.MEMBER=0]="MEMBER",t[t.XIAN_FENG=1]="XIAN_FENG",t[t.JING_YING=2]="JING_YING",t[t.DUI_ZHANG=3]="DUI_ZHANG",t[t.ZHANG_LAO=4]="ZHANG_LAO",t[t.FU_MENG_ZHU=5]="FU_MENG_ZHU",t[t.MENG_ZHU=6]="MENG_ZHU"}(GuildOffice||(GuildOffice={}));var PackId;!function(t){t[t.Default=0]="Default",t[t.Skill=2]="Skill",t[t.Bag=3]="Bag",t[t.Equip=4]="Equip",t[t.RechargePower=5]="RechargePower",t[t.XunBao=6]="XunBao",t[t.Mail=8]="Mail",t[t.Foot=9]="Foot",t[t.Dart=10]="Dart",t[t.GuildBattle=11]="GuildBattle",t[t.WC=12]="WC",t[t.Vip=19]="Vip",t[t.Notice=20]="Notice",t[t.TianShiShengDun=24]="TianShiShengDun",t[t.RechargeActivity=27]="RechargeActivity",t[t.CDKey=29]="CDKey",t[t.pfActivity=33]="pfActivity",t[t.TianTi=34]="TianTi",t[t.moneyTree=36]="moneyTree",t[t.FieldPk=37]="FieldPk",t[t.Xianlu=38]="Xianlu",t[t.SQXY=49]="SQXY",t[t.Wing=50]="Wing",t[t.Starsoul=51]="Starsoul",t[t.Forge=52]="Forge",t[t.Fuben=53]="Fuben",t[t.Hunqi=54]="Hunqi",t[t.AttrAdd=55]="AttrAdd",t[t.Fruit=56]="Fruit",t[t.JingLing=57]="JingLing",t[t.Task=58]="Task",t[t.Chat=59]="Chat",t[t.Element=60]="Element",t[t.Shop=61]="Shop",t[t.Guild=62]="Guild",t[t.GuildWar=64]="GuildWar",t[t.GuildShop=66]="GuildShop",t[t.GuildActivity=67]="GuildActivity",t[t.ShenMo=68]="ShenMo",t[t.Plot=69]="Plot",t[t.TouXian=70]="TouXian",t[t.Activity=71]="Activity",t[t.Rank=72]="Rank",t[t.JJC=73]="JJC",t[t.Friends=74]="Friends",t[t.Config=75]="Config",t[t.MeiLin=76]="MeiLin",t[t.Title=77]="Title",t[t.TanMi=78]="TanMi",t[t.MonsterSiege=79]="MonsterSiege",t[t.Mine=80]="Mine",t[t.Jewel=81]="Jewel",t[t.Mount=82]="Mount",t[t.Lingjie=83]="Lingjie",t[t.Qiyu=84]="Qiyu",t[t.KuaFu=85]="KuaFu",t[t.ShouHu=86]="ShouHu",t[t.Fuben2=87]="Fuben2",t[t.WxYqhl=88]="WxYqhl",t[t.CampWar=89]="CampWar",t[t.Login=255]="Login"}(PackId||(PackId={}));var EntityType=function(){function t(){}return t.isActor=function(e){var i=[t.ACTOR,t.ACTOR_CLONE];return-1!=i.indexOf(e)},t.isRole=function(e){var i=[t.ROLE,t.ROLE_CLONE];return-1!=i.indexOf(e)},t.isMonster=function(e){var i=[t.MONSTER_SERVER,t.MONSTER_CLIENT,t.FRIEND_MONSTER];return-1!=i.indexOf(e)},t.isMainRole=function(t){return this.isRole(t)||this.isBianshen(t)},t.isBianshen=function(e){var i=[t.BIANSHEN,t.CLONEBIANSHEN];return-1!=i.indexOf(e)},t.isDamon=function(e){var i=[t.DAMON];return-1!=i.indexOf(e)},t.isMeilin=function(e){var i=[t.MEILIN];return-1!=i.indexOf(e)},t.isNPC=function(e){var i=[t.NPC];return-1!=i.indexOf(e)},t.isOther=function(e){var i=[t.OTHER,t.COLLECTION,t.MINE_DIAMOND];return-1!=i.indexOf(e)},t.isCaiJi=function(e){var i=[t.COLLECTION];return!!~i.indexOf(e)},t.isYongbing=function(e){var i=[t.YONGBING,t.YONGBING_CLONE];return-1!=i.indexOf(e)},t.isFollowEntitys=function(t){return this.isDamon(t)||this.isMeilin(t)},t.isNormalMonster=function(e){var i=[t.MONSTER_SERVER,t.MONSTER_CLIENT,t.FRIEND_MONSTER];return-1!=i.indexOf(e)},t.ACTOR=0,t.ROLE=1,t.ACTOR_CLONE=2,t.ROLE_CLONE=3,t.YONGBING=4,t.YONGBING_CLONE=5,t.MONSTER_SERVER=6,t.NULL=7,t.COLLECTION=8,t.OTHER=9,t.BIANSHEN=10,t.CLONEBIANSHEN=11,t.MONSTER_CLIENT=100,t.EFF=102,t.DAMON=103,t.MEILIN=104,t.FRIEND_MONSTER=105,t.DROPITEM=106,t.MONSTER_SIEGE=107,t.MONSTER_SIEGE_ROLE=108,t.MINE_DIAMOND=109,t.MINER=110,t.NPC=111,t.SIEGE=112,t.ROLEUIC=25,t.DAMONUIC=26,t.YONGBINGUIC=27,t}();__reflect(EntityType.prototype,"EntityType");var EntityAction=function(){function t(){}return t.isAtkAction=function(e){return-1!=t.ATK_ACTIONS.indexOf(e)},t.isOnceAction=function(e){return-1!=t.ONCE_ACTIONS.indexOf(e)},t.getActionOrder=function(e){for(var i=0;i<t.ACTION_ORDER.length;i++){var n=t.ACTION_ORDER[i],a=n.indexOf(e);if(-1!=a)return i}return t.ACTION_ORDER.length},t.ATK_NORMAL1="a",t.ATK_NORMAL2="b",t.ATK_NORMAL3="c",t.ATK_SKILL1="x",t.ATK_SKILL2="w",t.ATK_SKILL3="y",t.ATK_SKILL4="z",t.COME="e",t.STAND="s",t.RUN="r",t.DIE="d",t.ATKED="h",t.RUN_FLY="r",t.STAND_FLY="s",t.ATK_ACTIONS=[t.ATK_NORMAL1,t.ATK_NORMAL2,t.ATK_NORMAL3,t.ATK_SKILL1,t.ATK_SKILL2,t.ATK_SKILL3,t.ATK_SKILL4,t.COME],t.ONCE_ACTIONS=t.ATK_ACTIONS.concat([t.DIE,t.ATKED]),t.ALL=t.ATK_ACTIONS.concat().concat([t.DIE,t.RUN]),t.ACTION_ORDER=[[t.DIE],[t.ATKED],t.ATK_ACTIONS,[t.RUN,t.RUN_FLY,t.STAND,t.STAND_FLY]],t}();__reflect(EntityAction.prototype,"EntityAction");var McOrder;!function(t){t[t.FOOT=0]="FOOT",t[t.BODY=1]="BODY",t[t.WEAPON=2]="WEAPON",t[t.WING=4]="WING",t[t.JUHUN=5]="JUHUN",t[t.MOUNT=6]="MOUNT",t[t.SHENGLING=7]="SHENGLING",t[t.MOUNT2=8]="MOUNT2",t[t.XIANLINGFZ=9]="XIANLINGFZ"}(McOrder||(McOrder={}));var ResDir=function(){function t(){}return Object.defineProperty(t,"RES_DIR_BODY",{get:function(){return t.RES_DIR+"/mc/"},enumerable:!0,configurable:!0}),Object.defineProperty(t,"RES_DIR_WEAPON",{get:function(){return t.RES_DIR+"/"+t.WEAPON+t._a+"/"},enumerable:!0,configurable:!0}),Object.defineProperty(t,"RES_DIR_WING",{get:function(){return t.RES_DIR+"/wing"+t._a+"/"},enumerable:!0,configurable:!0}),t.RES_DIR="res",t.MAP_DIR="map",t.BODY="body",t.SHENMO="shenmo",t.NPC="npc",t.MONSTER="monster",t.WEAPON="weapon",t.EFF="eff",t.UIBODY="uibody",t.RES_HIGH="",t.RES_LOW="_a",t._a="",t.RES_DIR_UIBODY=t.RES_DIR+"/uibody/",t.RES_DIR_UIWEAPON=t.RES_DIR+"/uiweapon/",t.RES_DIR_UIWEAPONEFF=t.RES_DIR+"/uiweaponeff/",t.RES_DIR_UIMEILIN=t.RES_DIR+"/uimeilin/",t.RES_DIR_MEILIN=t.RES_DIR+"/meilin/",t.RES_DIR_EFF=t.RES_DIR+"/eff/",t.RES_DIR_ITEM=t.RES_DIR+"/item/",t.RES_DIR_SKILL=t.RES_DIR+"/skill/",t.RES_DIR_SKILLICON=t.RES_DIR+"/skillicon/",t.RES_DIR_FUHUN=t.RES_DIR+"/fuhunicon/",t.RES_DIR_FOOT=t.RES_DIR+"/foot/",t.RES_DIR_UIFOOT=t.RES_DIR+"/uifoot/",t.RES_DIR_TWEEN=t.RES_DIR+"/tween/",t.RES_DIR_TALENT=t.RES_DIR+"/talent/",t.RES_DIR_SKILLEFF=t.RES_DIR+"/skilleff/",t.RES_DIR_WINGEFFUI=t.RES_DIR+"/wingui/",t.RES_DIR_WING_UI=t.RES_DIR+"/wingui/",t.RES_DIR_FOOTPRINT=t.RES_DIR+"/footprint/",t.RES_DIR_MONHEAD=t.RES_DIR+"/monhead/",t.RES_DIR_JUHUN=t.RES_DIR+"/juhun/",t.RES_DIR_UIJUHUN=t.RES_DIR+"/uijuhun/",t.RES_DIR_MOUNT=t.RES_DIR+"/mount/",t.RES_DIR_MINSHENMO=t.RES_DIR+"/minshenmo/",t.RES_DIR_HUDUN_UI=""+t.RES_DIR+t._a+"/uishield/",t.RES_DIR_HUDUN=""+t.RES_DIR+t._a+"/shield/",t.RES_DIR_FAIRY_BODY=t.RES_DIR+"/mc/",t.RES_DIR_FAIRY_UIBODY=t.RES_DIR+"/fairy/uifairy/",t.RES_DIR_FAIRY_SKILL=t.RES_DIR+"/fairy/skill/",t.RES_DIR_TUJIAN=t.RES_DIR+"/tujian/",t.RES_DIR_BUFFICON=t.RES_DIR+"/buff/icon/",t.RES_DIR_UIJUHUNEFF=""+t.RES_DIR+t._a+"/uijuhuneff/",t.RES_DIR_UIFOOTPRINT=""+t.RES_DIR+t._a+"/uifootprint/",t}();__reflect(ResDir.prototype,"ResDir");var DressType;!function(t){t[t.ROLE=1]="ROLE",t[t.ARM=2]="ARM",t[t.WING=3]="WING"}(DressType||(DressType={}));var EquipAttrType;!function(t){t[t.base=0]="base",t[t.zhuoyue=1]="zhuoyue",t[t.add=2]="add",t[t.shishi=3]="shishi",t[t.gem=4]="gem"}(EquipAttrType||(EquipAttrType={}));var EquipTipsAttrType;!function(t){t[t.strengthen=0]="strengthen",t[t.levelUp=1]="levelUp"}(EquipTipsAttrType||(EquipTipsAttrType={}));var CrossLoginType;!function(t){t[t.COMMON=0]="COMMON",t[t.CROSSWAR=1]="CROSSWAR",t[t.MAIN=2]="MAIN",t[t.LIANFU=3]="LIANFU"}(CrossLoginType||(CrossLoginType={}));var GroupType;!function(t){t[t.xianshi=1]="xianshi",t[t.buxianshi=2]="buxianshi"}(GroupType||(GroupType={}));var DamonAttrDanType;!function(t){t[t.atPower=0]="atPower",t[t.def=1]="def"}(DamonAttrDanType||(DamonAttrDanType={}));var RuleIconType;!function(t){t[t.normal=0]="normal",t[t.huchi=1]="huchi"}(RuleIconType||(RuleIconType={}));var AITargetType;!function(t){t[t.targetHandle=0]="targetHandle",t[t.masterHandle=1]="masterHandle",t[t.chouhen=2]="chouhen",t[t.curTargetHandle=3]="curTargetHandle",t[t.monsterId=4]="monsterId",t[t.nearest=5]="nearest",t[t.job=6]="job"}(AITargetType||(AITargetType={}));var SeeActorType;!function(t){t[t.See=0]="See",t[t.Info=1]="Info"}(SeeActorType||(SeeActorType={}));var SkillPassiveType;!function(t){t[t.ShenQi=1]="ShenQi",t[t.DamonLevel=2]="DamonLevel",t[t.DamonStage=3]="DamonStage",t[t.ChiBang=4]="ChiBang",t[t.YongbingLevel=5]="YongbingLevel",t[t.YongbingStage=6]="YongbingStage",t[t.Sz=7]="Sz",t[t.Meilin=8]="Meilin",t[t.ShenmoLevel=9]="ShenmoLevel",t[t.ShenmoStage=10]="ShenmoStage",t[t.Aoyi=11]="Aoyi",t[t.Foot=14]="Foot",t[t.Xianlu=15]="Xianlu",t[t.ShenYouStar=16]="ShenYouStar",t[t.ShenYouSkill=17]="ShenYouSkill",t[t.ShenYouYinJi=18]="ShenYouYinJi"}(SkillPassiveType||(SkillPassiveType={}));var TaskRewardState;!function(t){t[t.CanGet=2]="CanGet",t[t.NotReached=0]="NotReached",t[t.Geted=1]="Geted"}(TaskRewardState||(TaskRewardState={}));var XunbaoType;!function(t){t[t.Equip=1]="Equip",t[t.HunQi=2]="HunQi",t[t.FuWen=3]="FuWen",t[t.DianFeng=4]="DianFeng",t[t.ZhiZun=5]="ZhiZun"}(XunbaoType||(XunbaoType={}));var MCIconType;!function(t){t[t.image=1]="image",t[t.shenqi=2]="shenqi",t[t.wing=3]="wing",t[t.shenzhuang=4]="shenzhuang",t[t.meilin=5]="meilin",t[t.damonFz=6]="damonFz",t[t.yongbingFz=7]="yongbingFz",t[t.shenmo=8]="shenmo",t[t.eff=9]="eff",t[t.damon=10]="damon",t[t.yongbing=11]="yongbing",t[t.shenmoFz=12]="shenmoFz",t[t.itemId=13]="itemId",t[t.itemEff=14]="itemEff",t[t.Foot=15]="Foot",t[t.HuDun=16]="HuDun",t[t.Role=17]="Role",t[t.ShengLing=18]="ShengLing",t[t.FootHuanHua=19]="FootHuanHua"}(MCIconType||(MCIconType={}));var SysCheckCode;!function(t){t[t.code0=0]="code0",t[t.code1=1]="code1",t[t.code2=2]="code2",t[t.code3=3]="code3",t[t.code4=4]="code4",t[t.code5=5]="code5",t[t.code6=6]="code6",t[t.code7=7]="code7",t[t.code8=8]="code8"}(SysCheckCode||(SysCheckCode={}));var LoginNoticeType;!function(t){t[t.QingMing=1]="QingMing",t[t.QingMingLunHuan=2]="QingMingLunHuan",t[t.GuildBattle=3]="GuildBattle"}(LoginNoticeType||(LoginNoticeType={}));var AIBase=function(t){function e(){var e=t.call(this)||this;return e.nextActionTick=0,e.skillDatas=[],e.prevTargetHandle=0,e.prevSkillId=0,e.mover=null,e.tar=new XY(-1,-1),e.isGuaji=!1,e.nextActionTick=Timer.ins().getTimer(),e}return __extends(e,t),e.prototype.setEntity=function(e){t.prototype.setEntity.call(this,e),this.mover=new MoverLine(this.entity)},e.prototype.start=function(){t.prototype.start.call(this),this.nextActionTick=0},e.prototype.stop=function(){t.prototype.stop.call(this),this.stopAndStand(),this.nextActionTick=0},e.prototype.setGuaji=function(t){this.isGuaji=t},e.prototype.getGuaji=function(){return this.isGuaji},e.prototype.update=function(){return Timer.ins().getEgretTimer()>=this.nextActionTick?t.prototype.update.call(this):!1},e.prototype.updateSkillCd=function(t){for(var e=0;e<this.skillDatas.length;e++){var i=this.skillDatas[e];i.skillId==t&&(i.skillCDTick=Timer.ins().getEgretTimer()+i.skillConfig.cd)}},e.prototype.sendMoveEntity=function(t){},e.prototype.startFollow=function(e,i){var n=this;void 0===i&&(i=0),t.prototype.startFollow.call(this,e,i);var a=this.getFollowTarget();if(a)if(this.isFaraway(a)){var o=this.getFollowXY(a);this.startMove(o,function(){n.entity.setDir(GFunc.getDirBy2Point(n.entity,a,n.entity.isBianShenStatus()))}),this.params.x=o.x,this.params.y=o.y}else this.entity.setDir(GFunc.getDirBy2Point(this.entity,a,this.entity.isBianShenStatus()))},e.prototype.getFollowXY=function(t){var e=DirUtil.get8Dir(this.entity,t),i=DirUtil.getGridByDir(e,this.params.followDis/MapBase.CELL_SIZE,t);return i},e.prototype.Follow=function(){return this.isMoveing()?!0:this.isFaraway()?(this.startFollow(this.params.followHandle,this.params.followMasterHandle),!0):void 0},e.prototype.getFollowTarget=function(){var t;return this.params.followHandle&&(t=LogicSys.ins().getEntityByHandle(this.params.followHandle)),!t&&this.params.followMasterHandle&&(t=LogicSys.ins().getMainRoleByMasterHandle(this.params.followMasterHandle)),t},e.prototype.startAlive=function(e){void 0===e&&(e=0),t.prototype.startAlive.call(this),this.entity.alive(e),this.startAttack()},e.prototype.startDie=function(e,i){void 0===e&&(e=0),t.prototype.startDie.call(this,e,i),this.entity.closeChatBubble(),this.playAction(EntityAction.DIE),this.resetTarget()},e.prototype.useSkillComplete=function(t,e,i,n,a){var o=LogicSys.ins().getEntityByHandle(e);o&&!o.isDead()&&SkillSys.ins().sendUseSkill(t,e,i,n,Timer.ins().getEgretTimer()-a)},e.prototype.useSkillComplete1=function(t,e,i,n,a){SkillSys.ins().sendUseSkill(t,e,i,n,Timer.ins().getEgretTimer()-a)},e.prototype.playMyEntityAction=function(t,e,i){void 0===i&&(i=0),this.stopMove(),t.commoncd&&(this.nextActionTick=Timer.ins().getEgretTimer()+1e3*this.entity.getAtkTime());var n=t.actionParam[i].actionType;n&&(this.setDir(e),this.playAction(n,!1),this.prevTargetHandle=e.handle),this.updateSkillCd(t.id)},e.prototype.playOtherEntityAction=function(t,e,i){void 0===i&&(i=0);var n=t.actionParam[i].actionType;n&&(this.setDir(e),this.entity.playAction(n,!1))},e.prototype.setDir=function(t){t!=this.entity&&this.entity.setDir(GFunc.getDirBy2Point(this.entity,t,EntityType.isBianshen(this.entity.entityType)))},e.prototype.playActionMovie=function(t,e,i,n,a,o,s){void 0===n&&(n=null),void 0===a&&(a=null),void 0===o&&(o=!0),void 0===s&&(s=!1);var r=new SkillEditorData,u=t.actionParam[e].effectId;switch(r.effectId=u,r.configs=Cfg.getSkillEditorConfig(u),r.isShow=o,r.canPlaySound=s,r.sender.copy(this.entity),r.hitFun=n,a&&r.setLayerByLayer(a),t.targetType){case TargetType.Friend:n(),u&&(r.target.x=this.entity.x,r.target.y=this.entity.y,SkillEditor.ins().play(r));break;case TargetType.Enemy:if(u){r.target.x=i.x,r.target.y=i.y,SkillEditor.ins().play(r);var h=t.id;SkillSys.ins().monsterSkillIds[h]=t}else n()}},e.prototype.isFaraway=function(t){if(void 0===t&&(t=null),t=t||this.getFollowTarget()){var e=this.params.followRadius*this.params.followRadius,i=MathUtil.getDistanceX2ByObject(this.entity,t);return i>e}return!1},e.prototype.setEnemy=function(t){this.enemyType=t},e.prototype.getCastTargetHandle=function(t){var e=0;switch(t.castType){case CastType.None:case CastType.Friend:case CastType.Self:case CastType.SelfByHp:e=this.entity.handle;break;case CastType.Enemy:e=this.params.targetHandle}return e},e.prototype.isNeedCastTarget=function(t){return t.castType!=CastType.None},e.prototype.isSameGrid=function(t,e){return t.x/MapBase.CELL_SIZE>>0==e.x/MapBase.CELL_SIZE>>0&&t.y/MapBase.CELL_SIZE>>0==e.y/MapBase.CELL_SIZE>>0},e.prototype.isSamePoint=function(t){return Math.abs(t.x-this.entity.x)>>0<1&&Math.abs(t.y-this.entity.y)>>0<1},e.prototype.startPickItem=function(e){void 0===e&&(e=null),t.prototype.startPickItem.call(this,e),this.sortItem(),this.update()},e.prototype.PickItem=function(){var t=this,e=this.params.pickItems.length;if(!(e>0))return this.setAIState(this.prevState),this.update();for(var i=void 0,n=e-1;n>=0;n--){var a=this.params.pickItems[n].handle,o=LogicSys.ins().getItemByHandle(a);if(o){if(LogicSys.ins().canItemPick(o)){i=o;break}}else this.params.pickItems.splice(n,1)}if(!i)return this.setAIState(this.prevState),this.update();if(!this.entity.isBianShenStatus()){var s=i.item.handle;return this.startMove(i,function(){var e=LogicSys.ins().getItemByHandle(s);e&&(t.sendPickItem(t.getPickXYItems(e,t.params.pickRadio)),t.sortItem())}),!0}this.sendPickItem(this.getPickXYItems(this.entity,99999))},e.prototype.getPickXYItems=function(t,e){void 0===e&&(e=0);var i=[],n=new egret.Rectangle;n.x=t.x-e,n.y=t.y-e,n.width=2*e,n.height=2*e;for(var a=[],o=BagSys.ins().getSurplusCount(),s=0,r=this.params.pickItems;s<r.length;s++){var u=r[s],h=LogicSys.ins().getItemByHandle(u.handle);if(h){var l=LogicSys.ins().getNeedBagCount(h);n.contains(h.x,h.y)?0==l?i.push(h):l>0&&o>0?(i.push(h),o--):a.push(u):a.push(u)}}return this.params.pickItems=a,i},e.prototype.sendPickItem=function(t){for(var e=t instanceof Array?t:[t],i=0;i<e.length;i++){var n=e[i];this.removePickItem(n),this.sendPickUpItem(n)}},e.prototype.sendPickUpItem=function(t){t.hasPicked=!0,LogicSys.ins().sendPickUpItem(t)},e.prototype.removePickItem=function(t){for(var e=this.params.pickItems.length,i=0;e>i;i++)if(t.item.handle==this.params.pickItems[i].handle){this.params.pickItems.splice(i,1);break}},e.prototype.removePickItems=function(){this.params.pickItems.length=0},e.prototype.sortItem=function(){for(var t=0,e=this.params.pickItems;t<e.length;t++){var i=e[t];i.dis=MathUtil.getDistanceX2ByObject(this.entity,i)}SortUtil.sortOn(this.params.pickItems,["dis"],[SortType.down])},e.prototype.canPickItem=function(){var t=!1;if(this.getPickItemCount()>0)if(BagSys.ins().getSurplusCount()>0)t=!0;else for(var e=0,i=this.params.pickItems;e<i.length;e++){var n=i[e];if(n.itemId<CurType.max||0!=n.type){t=!0;break}}else t=!1;return t},e.prototype.getNewTarget=function(){return this.getCurTarget()},e.prototype.getCurTarget=function(){return this.params.targetHandle?LogicSys.ins().getEntityByHandle(this.params.targetHandle):null},e.prototype.getNextTarget=function(){var t,e=LogicSys.ins().getEntityByHandle(this.params.targetHandle);return t=!e||e.isDead()?this.getNewTarget():e},e.prototype.getPickItem=function(){return this.params.pickItems.pop()},e.prototype.getPickItemCount=function(){return this.params.pickItems.length},e.prototype.setSkillData=function(t){this.skillDatas=t.concat()},e.prototype.getNextSkill=function(){for(var t,e=this.skillDatas,i=0,n=e;i<n.length;i++){var a=n[i];a.skillConfig.actionParam[0].actionType&&a.isAct&&(t?t.skillCDTick<=this.nextActionTick&&a.skillCDTick<=this.nextActionTick?a.skillConfig.priority<t.skillConfig.priority&&(t=a):t.skillCDTick>this.nextActionTick&&a.skillCDTick<=this.nextActionTick&&(t=a):t=a)}return t},e.prototype.hasSkill=function(){return this.skillDatas.length>0},e.prototype.playAtk=function(){this.nextActionTick=0,this.entity.resetAtking(),this.Atk()},e.prototype.isMoveing=function(){return this.mover&&this.mover.moving},e.prototype.updateTick=function(t){this.mover.updateTick(t)},e.prototype.startAttack=function(e){void 0===e&&(e=null),this.stopMove(),t.prototype.startAttack.call(this,e),e&&this.update()},e.prototype.startAtked=function(e){var i=LogicSys.ins().getEntityByHandle(e);i&&!EntityType.isYongbing(i.entityType)&&t.prototype.startAtked.call(this,e)},e.prototype.startStand=function(){this.playAction(EntityAction.STAND),t.prototype.startStand.call(this)},e.prototype.startShunyi=function(e){t.prototype.startShunyi.call(this,e),this.stopAndStand(),this.resetCaiji(),this.entity.x=e.x,this.entity.y=e.y,(this.params.followHandle||this.params.followMasterHandle)&&this.startFollow(this.params.followHandle,this.params.followMasterHandle)},e.prototype.startMoveToXY=function(e,i,n){void 0===i&&(i=-1),void 0===n&&(n=null),-1==i&&(i=FbSys.ins().fbId),t.prototype.startMoveToXY.call(this,e,i,n),-1!=this.params.fbId&&FbSys.ins().fbId!=i?LogicSys.ins().sendEnterFb(i):this.update()},e.prototype.MoveToXY=function(){var t=this;if(FbSys.ins().fbId==this.params.fbId&&this.entity){this.params.fbId=-1;var e=this.params.moveToXYCallback;if(Math.abs(this.params.moveP.x-this.entity.x)<1&&Math.abs(this.params.moveP.y-this.entity.y)<1&&e)return void e();var i=new XY;if(MapContainer.ins().checkWalkableByPixel(this.params.moveP.x,this.params.moveP.y))i.x=this.params.moveP.x,i.y=this.params.moveP.y;else{var n=MapContainer.ins().getNearestAroundXY(this.params.moveP,this.entity);i.x=n.x,i.y=n.y}this.entity==LogicSys.ins().centerEntity&&LogicSys.ins().setOnClickMovie(!0,i),this.startNone(),this.mustMove(i,function(){t.entity==LogicSys.ins().centerEntity&&LogicSys.ins().setOnClickMovie(!1,i),t.stopMoveToXy(),e&&e()
})}},e.prototype.startMove=function(t,e){void 0===e&&(e=null),this.entity.isAtking()||this.entity.isDead()||this.mustMove(t,e)},e.prototype.mustMove=function(t,e){if(void 0===e&&(e=null),this.isSamePoint(t))return void(e&&e());var i=this.getPath(t,this.entity);!this.entity.isDead()&&this.entity.canMove()&&i&&i.length&&(this.mover.reset(),this.path=i,this.playAction(EntityAction.RUN,!0),this.resetTarget(),this.tar.x=this.path[this.path.length-2],this.tar.y=this.path[this.path.length-1],MapContainer.ins().capture(this.tar.x,this.tar.y,this.entity.handle),this.movoNext(),this.mover.setCompleteFunc(this.movoNext,this),this.onMoveComplete=e)},e.prototype.movoNext=function(){if(this.path&&this.path.length){var t=new XY;t.x=this.path.shift(),t.y=this.path.shift(),this.entity.setDir(GFunc.getDirBy2Point(this.entity,t,EntityType.isBianshen(this.entity.entityType)));var e=MathUtil.getTimeFromSpeed(this.entity,t,this.entity.getProp(AttrType.atMvSpeed));this.mover.moveTo(Timer.ins().getEgretTimer(),t,e),this.sendMoveEntity(t)}else{this.path=null,this.onMoveComplete&&this.onMoveComplete();var i=this.updateAIAndResetNextTick();i||this.playAction(EntityAction.STAND)}},e.prototype.resetMove=function(){this.isMoveing()&&(this.path&&this.path.length?this.mustMove(new XY(this.path[this.path.length-2],this.path[this.path.length-1]),this.onMoveComplete):this.mustMove(this.mover.getToXY(),this.onMoveComplete))},e.prototype.resetTarget=function(){-1!=this.tar.x&&-1!=this.tar.y&&(MapContainer.ins().capture(this.tar.x,this.tar.y),this.tar.x=-1,this.tar.y=-1)},e.prototype.stopMove=function(){this.mover.moving&&(this.mover.reset(),this.sendMoveEntity(this.entity))},e.prototype.stopAndStand=function(){this.stopMove(),this.playAction(EntityAction.STAND)},e.prototype.getPath=function(t,e){return MapContainer.ins().getPath(t,e)},e.prototype.playAction=function(t,e){void 0===e&&(e=!1);var i=this.entity.getAction(),n=e;return i!=EntityAction.DIE&&(t==EntityAction.DIE?(n=!0,this.stopMove()):EntityAction.isAtkAction(t)?(this.stopMove(),n=!0):t==EntityAction.ATKED?this.entity.isAtking()||(n=!0):t==EntityAction.RUN?this.entity.isAtking()||(n=!0):t==EntityAction.STAND&&(this.entity.isAtking()||(this.stopMove(),n=!0))),n&&this.entity.playAction(t,e),n},e.prototype.onAtkedEnd=function(t){if(t!=EntityAction.DIE&&t!=EntityAction.DIE){var e=!1;EntityAction.isAtkAction(t)&&(e=this.updateAIAndResetNextTick()),e||(this.isMoveing()?this.playAction(EntityAction.RUN):this.playAction(EntityAction.STAND))}},e.prototype.getGuaJi=function(){return this.isGuaji},e.prototype.CaiJi=function(){if(!this.entity.isCaiJiing()&&!this.isMoveing()){var t=LogicSys.ins().getEntityByHandle(this.params.caiJihandle),e=MapBase.CELL_SIZE;if(t&&t.isBeCaiJi()){var i=1.5*(e*e+e*e);if(MathUtil.getDistanceX2ByObject(this.entity,t)>i){var n=MapContainer.ins().getNearestAroundXY(t,this.entity);this.startMove(n)}else this.entity.setDir(DirUtil.get8Dir(this.entity,t)),this.entity.setCaiJiing(!0),this.entity.masterHandle==Actor.ins().handle&&LogicSys.ins().sendCollectionEntity(t.handle)}else{var a=this.params.caijiType;t=LogicSys.ins().getNearestCaijiById(this.entity,a),t&&(this.params.caiJihandle=t.handle,this.update())}}},e.prototype.removeSKillBySkillId=function(t){for(var e=0;e<this.skillDatas.length;e++){var i=this.skillDatas[e];i.skillId==t&&this.skillDatas.splice(e,1)}},e.prototype.addSkillData=function(t){this.skillDatas.push(t)},e.prototype.checkAttrCondition=function(t){var e=!0,i=t.skillConfig.attrCondition;return i.length>0&&this.entity.getProp(i[0])>this.entity.getProp(i[1])?!1:e},e.prototype.resetCaiji=function(){Actor.ins().handle==this.entity.masterHandle&&0!=this.params.caiJihandle&&(this.entity.setCaiJiing(!1),LogicSys.ins().sendCollectionEntity(0)),t.prototype.resetCaiji.call(this)},e.prototype.setAIState=function(e){t.prototype.setAIState.call(this,e),this.isAIState(AIState.CaiJi)&&this.entity.isCaiJiing()&&this.resetCaiji()},e.prototype.destruct=function(){this.mover.reset(),this.onMoveComplete=null,this.tar.x=this.tar.y=-1,this.nextActionTick=0,this.prevTargetHandle=0,this.prevSkillId=0,this.skillDatas=[],t.prototype.destruct.call(this)},e}(AI);__reflect(AIBase.prototype,"AIBase");var Entity=function(t){function e(){var e=t.call(this)||this;e.index=0,e._entityType=-1,e.job=0,e.teamId=0,e.AI=null,e.defaultHeight=136,e.myHeight=136,e._mountHeight=0,e.action="",e.effs=[],e.titleArr=[],e.bubbleTimer=-1,e.bianShenEndTick=0,e.bianShenCDTick=0,e._isShowBody=!0,e._isShowWing=!0,e.bodystrengthen=0,e.weaponstrengthen=0,e.juhunType=0,e.bianshenId=0,e._isAtking=!1,e._isCaiJiing=!1,e._isBeCaiJi=!1,e.scale=1,e._isShowHunduBar=!1,e._isShowHudun=!0,e.cfState=!1,e.btmList=[],e.AI=new AIBase,e.AI.setEntity(e),e.touchChildren=!1,e.action=EntityAction.STAND,e._dir=5,e._shadow=new eui.Image,e._shadow.source=ResMgr.getYingziRes(),e._shadow.touchEnabled=!1,e._shadow.once(egret.Event.COMPLETE,function(){e._shadow.anchorOffsetX=e._shadow.width>>1,e._shadow.anchorOffsetY=e._shadow.height>>1},e),e._effContainerDown=new egret.DisplayObjectContainer,e.addChild(e._effContainerDown),e._bodyContainer=new egret.DisplayObjectContainer,e.addChild(e._bodyContainer),e._effContainerUp=new egret.DisplayObjectContainer,e.addChild(e._effContainerUp),e.iniHpBar(),e._nameGroup=new eui.Group;var i=new eui.HorizontalLayout;return i.horizontalAlign="center",i.verticalAlign="middle",e._nameGroup.layout=i,e.addChild(e._nameGroup),e.groupTouXian=new eui.Group,e.mcTouXian=e.getMovieClip(),e.mcTouXian.y=9,e.mcTouXian.x=20,e.mcTouXian.scaleX=e.mcTouXian.scaleY=.8,e.groupTouXian.addChild(e.mcTouXian),e._nameGroup.addChild(e.groupTouXian),e._nameTxt=new eui.Label,e._nameTxt.fontFamily="黑体",e._nameTxt.textAlign="center",e._nameTxt.size=16,e._nameTxt.width=240,e._nameTxt.height=e._nameTxt.size,e._nameTxt.stroke=1,e._nameTxt.strokeColor=0,e._nameTxt.visible=!0,e._nameTxt.verticalAlign="bottom",e._nameTxt.touchEnabled=!1,e._nameGroup.addChild(e._nameTxt),e.updateNameGroupSize(),e.titleArr.push(e._hpBar),e.titleArr.push(e._nameGroup),e.setProp(AttrType.atHp,1),e.setProp(AttrType.atHpMax,1),e._body=e.getMovieClip(),e._bodyContainer.addChild(e._body),e._disOrder=[],e._disOrder[McOrder.BODY]=e._body,e.mcOrder=GConst.mcOrderJob[e.job],e}return __extends(e,t),e.prototype.initWeapon=function(){this._weapon=this.getMovieClip(),this._bodyContainer.addChild(this._weapon),this._disOrder[McOrder.WEAPON]=this._weapon},e.prototype.initGuanghuan=function(){this._guanghuan=this.getMovieClip(),this._guanghuan.x=this.x,this._guanghuan.y=this.y,MapContainer.ins().addEffectToDown2(this._guanghuan)},e.prototype.initWing=function(){this._wing=this.getMovieClip(),this._bodyContainer.addChild(this._wing),this._disOrder[McOrder.WING]=this._wing},e.prototype.initShengLing=function(){this._shengLing=this.getMovieClip(),this._bodyContainer.addChild(this._shengLing),this._disOrder[McOrder.SHENGLING]=this._shengLing},e.prototype.initJuhun=function(){this._juhun=this.getMovieClip(),this._bodyContainer.addChild(this._juhun),this._disOrder[McOrder.JUHUN]=this._juhun},e.prototype.initMount=function(){this._mount=this.getMovieClip(),this._bodyContainer.addChild(this._mount),this._mount2=this.getMovieClip(),this._bodyContainer.addChild(this._mount2),this._disOrder[McOrder.MOUNT]=this._mount,this._disOrder[McOrder.MOUNT2]=this._mount2},e.prototype.initFoot=function(){this._foot=this.getMovieClip(),this._bodyContainer.addChild(this._foot),this._disOrder[McOrder.FOOT]=this._foot},e.prototype.initHudun=function(){this._hudun=this.getMovieClip(),this._effContainerUp.addChild(this._hudun)},e.prototype.iniHpBar=function(){this._hpBar=new eui.ProgressBar,this._hpBar.touchEnabled=!1,this._hpBar.touchChildren=!1,this._hpBar.skinName="bloodBarSkin",this._hpBar.anchorOffsetX=this._hpBar.width>>1,this._hpBar.direction=eui.Direction.LTR,this._hpBar.slideDuration=1200,this.addChild(this._hpBar)},e.prototype.setWingVisible=function(t){this._isShowWing=t,this._wing&&this._wing.visible!=t&&(this._wing.visible=t,this.readyUpdateMC())},Object.defineProperty(e.prototype,"isShowWing",{get:function(){return this._isShowWing&&this.hasWing},enumerable:!0,configurable:!0}),e.prototype.getEntityHeight=function(){var t=this.hasMount?this._mountHeight:0;return this.defaultHeight-t},Object.defineProperty(e.prototype,"hasWing",{get:function(){return""!=this.data.wingFileName},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"hasMount",{get:function(){return this.data&&""!=this.data.mountFileName},enumerable:!0,configurable:!0}),e.prototype.setAI=function(t){this.AI.destruct(),t.setEntity(this),this.AI=t},e.prototype.setName=function(t,e){void 0===e&&(e=16777215),this.entityName=t,this.entityNameColor=e,this.updateName(),this.updatePos()},e.prototype.updateName=function(){this._nameTxt.textFlow=this.getTotleNaemTF()},e.prototype.getName=function(){return this.entityName},e.prototype.getTotleNaemTF=function(){return addColorTF(this.entityName,this.entityNameColor)},e.prototype.updateNameGroupSize=function(){this._nameGroup.anchorOffsetX=this._nameGroup.width>>1},e.prototype.setTeam=function(t){this.teamId=t},e.prototype.setHp=function(t,e){e&&(this._hpBar.maximum=Math.floor(e)),0>t&&(t=0),t>e&&(t=e),this._hpBar.value=Math.floor(t)},e.prototype.setHPBarVisible=function(t){this._hpBar.visible=t},e.prototype.setHpAndNameVisible=function(t){(this._hpBar.visible!=t||this._nameGroup.visible!=t)&&(this.setHPBarVisible(t),this._nameGroup.visible=t,this.updatePos())},e.prototype.getHP=function(){return this.getProp(AttrType.atHp)},e.prototype.getHpMax=function(){return this.getProp(AttrType.atHpMax)},e.prototype.setEntityScale=function(t){this.scale=this._bodyContainer.scaleX=this._bodyContainer.scaleY=t},e.prototype.setAction=function(t){this.action=t},e.prototype.playAction=function(t,e){void 0===e&&(e=!1);var i=EntityAction.isAtkAction(t),n=this.action;if(e||this.action!=t||i){if(this.action=t,this._isAtking=i,this._body.clearComFun(),Timer.ins().remove(this.onAtkEnd,this),n==t&&t==EntityAction.RUN)return;this.readyUpdateMC()}},e.prototype.getAtkTime=function(){return Math.max(.75,500/(500+.25*this.getProp(AttrType.atAtkSpeed)))},e.prototype.getAction=function(){return this.action},e.prototype.isDead=function(){return this.action==EntityAction.DIE||0==this.getProp(AttrType.atHp)},e.prototype.isAlive=function(){return this.action!=EntityAction.DIE&&this.getProp(AttrType.atHp)>0},e.prototype.isAtking=function(){return this._isAtking},e.prototype.resetAtking=function(){this._isAtking=!1},e.prototype.setCfState=function(t){this.cfState=t},e.prototype.startSpeedShadow=function(){EntityType.isMainRole(this.entityType)&&Timer.ins()["do"](0,105,0,this.updateSpeedShadow,this)},e.prototype.stopSpeedShadow=function(){Timer.ins().remove(this.updateSpeedShadow,this),this.AI.isMoveing()&&this.playMC()},e.prototype.updateSpeedShadow=function(){var t=this;if(this.parent){this.stopMC();var e=this.getBounds(),i=new egret.RenderTexture;i.drawToTexture(this._bodyContainer,e);var n=this.btmList.pop()||new egret.Bitmap;n.texture=i,n.x=this.x+e.x,n.y=this.y+e.y,this.parent.addChild(n);var a=egret.Tween.get(n);n.alpha=.7,a.wait(200).to({alpha:0},150).call(function(){DisUtil.remove(n),n.$bitmapData&&n.$bitmapData.$dispose(),t.btmList.length<10&&t.btmList.push(n)},this)}},e.prototype.readyUpdateMC=function(){this.data&&this.data.bodyFileName&&-1!=this._entityType&&Timer.ins().doLast(this.updateMC,this)},e.prototype.stopMC=function(){this._body.stop(),this._wing&&this._wing.stop(),this._weapon&&this._weapon.stop(),this._mount&&(this._mount.stop(),this._mount2.stop())},e.prototype.playMC=function(){if(this.AI.isMoveing()){var t=this.rate;this._body.rate=t,this._mount&&(this._mount.rate=t,this._mount2.rate=t)}this._body.play(),this._wing&&this._wing.play(),this._weapon&&this._weapon.play(),this._mount&&(this._mount.play(),this._mount2.play())},e.prototype.updateMC=function(){this._body.stop(),this._body.setDir(this._dir),this._body.rate=this.rate;var t=-1,e=null;if(EntityAction.isOnceAction(this.action))if(t=1,EntityAction.isAtkAction(this.action)){var i=1e3*this.getAtkTime();Timer.ins()["do"](i,0,1,this.onAtkEnd,this,TimerType.LAST)}else e=this.onAtkEnd.bind(this);this._body.playFile(this.getBodyFileName(),t,e,!1),this._body.hasEventListener(egret.Event.RENDER)||this._body.addEventListener(egret.Event.RENDER,this.onBodyEnterFrame,this),this.isShowWing?(this._wing||this.initWing(),this._wing.playFile(this.getWingFileName(),-1,null,!1),this._wing.setDir(this._dir)):this._wing&&(this._wing.visible=!1);var n=""!=this.data.weaponFileName&&!this.isDead();n?(this._weapon||this.initWeapon(),this._weapon.playFile(this.getWeaponFileName(),-1,null,!1),this._weapon.setDir(this._dir)):this._weapon&&(this._weapon.visible=!1),this.juhunType?(this._juhun||this.initJuhun(),this._juhun.playFile(this.getJuhunFileName(),-1,null,!1),this._juhun.setDir(this._dir)):this._juhun&&(this._juhun.visible=!1),this.hasMount?(this._mount||this.initMount(),this._mount.rate=this.rate,this._mount2.rate=this._mount.rate,this._mount.playFile(ResMgr.getMountSource(this.data.mountFileName,this.dir,this.action),-1,null,!1),this._mount.setDir(this._dir),this._mount2.playFile(ResMgr.getMount2Source(this.data.mountFileName,this.dir,this.action),-1,null,!1),this._mount2.setDir(this._dir)):this._mount&&(this._mount2.visible=this._mount.visible=!1);var a=this.data.guanghuanFileName;a?(this._guanghuan||this.initGuanghuan(),this._guanghuan&&(this._guanghuan.visible=!0),~this._guanghuan.name.indexOf(a)||this._guanghuan.playFile(ResMgr.getFootSource(a),-1)):this._guanghuan&&(this._guanghuan.visible=!1);var o=""!=this.data.shengLingFileName&&!this.isDead();o?(this._shengLing||this.initShengLing(),this._shengLing.playFile(this.getShengLingFileName(),-1,null,!1),this._shengLing.setDir(this._dir)):this._shengLing&&(this._shengLing.visible=!1);var s=this.data.footFileName;s?(this._foot||this.initFoot(),this._foot.playFile(ResMgr.getFootSource(s),-1,null,!1),this._foot.setDir(this._dir)):this._foot&&(this._foot.visible=!1);var r=this.mcOrder[this.dir];if(r)for(var u=r.length,h=0;u>h;h++){var l=r[h];this._disOrder[l]&&this._bodyContainer.addChild(this._disOrder[l])}},e.prototype.onBodyEnterFrame=function(){var t=this._body.currentFrame;this._body.removeEventListener(egret.Event.RENDER,this.onBodyEnterFrame,this),this._weapon&&this._weapon.visible&&this._weapon.totalFrames>0&&this._weapon.currentFrame!=t&&this._weapon.gotoAndPlay(t,0),this._wing&&this._wing.visible&&this._wing.totalFrames>0&&this._wing.currentFrame!=t&&this._wing.gotoAndPlay(t,0)},e.prototype.getBodyFileName=function(){return ResMgr.getEntityBodyRes(this.entityType,this.data.bodyFileName,this.getDir(),this.action)},e.prototype.getWeaponFileName=function(){return ResMgr.getEntityWeaponRes(this.entityType,this.data.weaponFileName,this.getDir(),this.action,this.hasWing,this.weaponstrengthen)},e.prototype.getShengLingFileName=function(){return ResMgr.getEntityShengLingRes(this.entityType,this.data.shengLingFileName,this.getDir(),this.action,this.hasWing)},e.prototype.getHundunFileName=function(){return ResMgr.getEntityHuDunRes(this.entityType,this.data.hudunFileName)},e.prototype.getWingFileName=function(){return ResMgr.getEntityWingRes(this.entityType,this.data.wingFileName,this.getDir(),this.action)},e.prototype.getJuhunFileName=function(){return ResMgr.getEntityJuhunRes(this.entityType,this.getDir(),this.action,this.hasWing,this.job,this.juhunType,this.data.weaponFileName)},e.prototype.onAtkEnd=function(){this._isAtking=!1,this.AI.onAtkedEnd(this.action)},e.prototype.canMove=function(){return!this.isDead()&&!this.hasCantMoveBuff()&&!this.cfState},e.prototype.canAtk=function(){return!this.isDead()&&!this.hasCantAtkBuff()&&!this.cfState},e.prototype.canBeAtk=function(){return!this.isDead()&&!this.hasCantAtkBuff()},e.prototype.canBeAtked=function(){return!this.isDead()&&!this.hasCantBeAtkedBuff()},e.prototype.canBianShen=function(){return!(this.isDead()||this.hasCantBianShenBuff()||EntityType.isBianshen(this.entityType)||this.cfState)},e.prototype.updateTick=function(t){if(this.AI.updateTick(t),!this.isDead()){var e=Math.floor(this.x/MapBase.CELL_SIZE),i=Math.floor(this.y/MapBase.CELL_SIZE),n=this.alpha;MapContainer.ins().checkAlpha(e,i)?1==n&&(this.alpha=.6):.6==n&&(this.alpha=1)}this.updateChatBubble()},e.prototype.updateBuffPos=function(){for(var t=0,e=this.effs;t<e.length;t++){var i=e[t],n=i.buffId,a=Cfg.getConfig(EffectsConfig,n);a.pos?i.y=-this.myHeight*this.scale:i.y=0}},e.prototype.updatePos=function(){for(var t=0-this.myHeight,e=0,i=this.titleArr;e<i.length;e++){var n=i[e];n.parent&&n.visible&&(t-=n.height+3,n.y=t,n.cacheAsBitmap)}this.updateBuffPos(),this.chatBubble&&(this.chatBubble.y=-this.myHeight-20),this._hunduBar&&(this._hunduBar.y=this._hunduBar.y-4)},e.prototype.setBubble=function(t,e){void 0===e&&(e=10),this.chatBubble||(this.chatBubble=new ChatBubble,this.addChild(this.chatBubble)),this.chatBubble.visible=!0,this.chatBubble.setChatContent(t),e>0?this.bubbleTimer=Timer.ins().getTimer()+1e3*e:this.bubbleTimer=e,this.updatePos()},e.prototype.closeChatBubble=function(){this.chatBubble&&(this.chatBubble.visible=!1,this.chatBubble.setChatContent("")),this.bubbleTimer=0},e.prototype.updateChatBubble=function(){0!=this.bubbleTimer&&(-1==this.bubbleTimer?this.closeChatBubble():this.bubbleTimer<Timer.ins().getTimer()&&this.closeChatBubble())},e.prototype.setClickEnable=function(t){t?(this.hasEventListener(egret.TouchEvent.TOUCH_BEGIN)||this.addEventListener(egret.TouchEvent.TOUCH_BEGIN,this.onTap,this),this.touchChildren=this.touchEnabled=!0):(this.touchChildren=this.touchEnabled=!1,this.removeEventListener(egret.TouchEvent.TOUCH_BEGIN,this.onTap,this))},e.prototype.onTap=function(t){this._body.hitTestPoint(t.stageX,t.stageY)&&(this.canBeAtk()&&LogicSys.ins().atkTargetByHandle(this.handle),t.stopImmediatePropagation(),LogicSys.ins().patchEntityClick(this))},e.prototype.addAtkedEffect=function(t){var e=Cfg.getConfig(SkillsConfig,t).atkedEffectName;if(""!=e){var i=ObjPool.pop(MC);i.y=0-this.myHeight/2,i.visible=!1,i.playFile(ResMgr.getAtkedResource(e),1,function(){ObjPool.push(i)}),this.addChild(i)}},e.prototype.addEffect=function(t){var e=ObjPool.pop(MC);e.visible=!1,e.playFile(t,1,function(){ObjPool.push(e)}),this.addChild(e)},e.prototype.isHaveBuff=function(t){for(var e=0;e<this.effs.length;e++){var i=this.effs[e];if(i.buffId==t)return!0}return!1},e.prototype.addBuff=function(t){var e=Cfg.getConfig(EffectsConfig,t),i=new MCBuff;if(i.buffId=t,e.show){var n=e.effName;i.playFile(ResMgr.getBuffResource(n),-1),e.layer?this._effContainerUp.addChild(i):this._effContainerDown.addChild(i)}this.effs.push(i),this.updateBuffPos()},e.prototype.removeBuff=function(t){for(var e=0;e<this.effs.length;e++){var i=this.effs[e];if(i.buffId==t){this.removeABuff(i),this.effs.splice(e,1);break}}},e.prototype.removeABuff=function(t){DisUtil.remove(t),t.stop()},e.prototype.removeBuffs=function(){for(var t=0;t<this.effs.length;t++)this.removeABuff(this.effs[t]);this.effs.length=0},e.prototype.hasCantMoveBuff=function(){for(var t=0,e=this.effs;t<e.length;t++){var i=e[t],n=Cfg.getConfig(EffectsConfig,i.buffId),a=n.args;if(n.type==BuffType.AdditionalState&&(a.i==BuffEffectType.DING_SHEN||a.i==BuffEffectType.HUN_MI))return!0}return!1},e.prototype.hasCantAtkBuff=function(){for(var t=0,e=this.effs;t<e.length;t++){var i=e[t],n=Cfg.getConfig(EffectsConfig,i.buffId),a=n.args;if(n.type==BuffType.AdditionalState&&a.i==BuffEffectType.HUN_MI)return!0}return!1},e.prototype.hasCantBeAtkedBuff=function(){for(var t=0,e=this.effs;t<e.length;t++){var i=e[t],n=Cfg.getConfig(EffectsConfig,i.buffId),a=n.args;if(n.type==BuffType.AdditionalState&&a.i==BuffEffectType.BA_TI)return!0}return!1},e.prototype.hasCantBianShenBuff=function(){for(var t=0,e=this.effs;t<e.length;t++){var i=e[t],n=Cfg.getConfig(EffectsConfig,i.buffId),a=n.args;if(n.type==BuffType.AdditionalState&&a.i==BuffEffectType.HUN_MI)return!0}return!1},e.prototype.setProps=function(e){t.prototype.setProps.call(this,e),this.setHp(this.getProp(AttrType.atHp),this.getProp(AttrType.atHpMax)),this.setHuDunBar(this.getProp(AttrType.atShenYouShield),this.getProp(AttrType.atShenYouShieldMax))},e.prototype.setProp=function(e,i){t.prototype.setProp.call(this,e,i),e==AttrType.atHp?this.setHp(i):e==AttrType.atHpMax?this.setHp(this.getHP(),i):e==AttrType.atShenYouShieldTagNum?this.setYinJiComponent(this.getProp(AttrType.atShenYouShieldTag),i):e==AttrType.atShenYouShieldTag?this.setYinJiComponent(i,this.getProp(AttrType.atShenYouShieldTagNum)):e==AttrType.atShenYouShieldMax?this.setHuDunBar(this.getProp(AttrType.atShenYouShield),i):e==AttrType.atShenYouShield&&this.setHuDunBar(i,this.getProp(AttrType.atShenYouShieldMax))},e.prototype.setHuDunBar=function(t,e){if(this._isShowHunduBar){if(!this._hunduBar){this._hunduBar=new eui.ProgressBar,this._hunduBar.touchEnabled=!1,this._hunduBar.touchChildren=!1,this._hunduBar.skinName="bloodBarSkin6",this._hunduBar.anchorOffsetX=this._hunduBar.width>>1,this._hunduBar.direction=eui.Direction.LTR,this._hunduBar.slideDuration=1200,this.addChild(this._hunduBar);var i=this.yinJiComponent?1:0;this.titleArr.splice(i,0,this._hunduBar),this.updatePos()}this._hunduBar.maximum=Math.floor(e),this._hunduBar.value=Math.floor(t)}},e.prototype.setShowHuDunBar=function(t){this._isShowHunduBar=t,this.setHuDunBar(this.getProp(AttrType.atShenYouShield),this.getProp(AttrType.atShenYouShieldMax)),this.setYinJiComponent(this.getProp(AttrType.atShenYouShieldTag),this.getProp(AttrType.atShenYouShieldTagNum))},e.prototype.setYinJiComponent=function(t,e){this._isShowHunduBar&&(this.yinJiComponent||(this.yinJiComponent=new ShouYouYinJiComponent,this.yinJiComponent.anchorOffsetX=this.yinJiComponent.width>>1,this.addChild(this.yinJiComponent),this.titleArr.splice(0,0,this.yinJiComponent),this.updatePos()),this.yinJiComponent.setValue(t,e))},e.prototype.getMyHeight=function(){return this.myHeight},Object.defineProperty(e.prototype,"rate",{get:function(){var t=1;return EntityAction.isAtkAction(this.action)?t=1/this.getAtkTime():this.action==EntityAction.RUN&&(t=this.getProp(AttrType.atMvSpeed)/250),t},enumerable:!0,configurable:!0}),e.prototype.getDir=function(){return this._dir},e.prototype.setDir=function(t){this._dir!=t&&(this.dir=t,this.readyUpdateMC())},e.prototype.getBodyScale=function(){return this._bodyContainer.scaleY},e.prototype.getJob=function(){return this.job},e.prototype.setJob=function(t){this.job=t,this.mcOrder=GConst.mcOrderJob[this.job]},e.prototype.getCfgId=function(){return 0},Object.defineProperty(e.prototype,"entityType",{get:function(){return this._entityType},set:function(t){this._entityType=t,this.action=EntityAction.STAND,this.removeBuffs()},enumerable:!0,configurable:!0}),e.prototype.setBianShen=function(t,e,i){this.bianshenId=t,this.bianShenEndTick=e,this.bianShenCDTick=i},e.prototype.isBianShenStatus=function(){return this.bianShenEndTick>Timer.ins().getTimer()},e.prototype.getBianshenId=function(){return this.bianshenId},Object.defineProperty(e.prototype,"mapX",{get:function(){return this.x/MapBase.CELL_SIZE>>0},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"mapY",{get:function(){return this.y/MapBase.CELL_SIZE>>0},enumerable:!0,configurable:!0}),e.prototype.$setX=function(e){return this._shadow.x=e,this._guanghuan&&(this._guanghuan.x=e),t.prototype.$setX.call(this,Math.round(e))},e.prototype.$setY=function(e){return this._shadow.y=e,this._guanghuan&&(this._guanghuan.y=e),this.zIndex=e+.1*this.x,t.prototype.$setY.call(this,Math.round(e))},e.prototype.continuePlay=function(){for(var t in this.effs){var e=this.effs[t];e.gotoAndPlay(e.currentFrame,-1)}this._body.continuePlay()},e.prototype.setBodyVisible=function(t){this._isShowBody=this._shadow.visible=this._effContainerUp.visible=this._effContainerDown.visible=this._bodyContainer.visible=t},e.prototype.getMovieClip=function(){var t=new MC;return t},e.prototype.alive=function(t){void 0===t&&(t=0),0==t&&(t=this.getProp(AttrType.atHpMax)),this.setProp(AttrType.atHp,t),this.setHpAndNameVisible(!0),this.setAction(EntityAction.STAND),this.readyUpdateMC()},e.prototype.updateHuDun=function(){getLocation("isShowHundun",2)&&""!=this.data.hudunFileName?(this._hudun||this.initHudun(),this._hudun.playFile(this.getHundunFileName(),-1)):this._hudun&&(this._hudun.visible=!1)},e.prototype.reset=function(){t.prototype.reset.call(this),this.setCanBeCaiJi(!1),this.setCaiJiing(!1),this.setClickEnable(!1),this.removeEventListener(egret.TouchEvent.TOUCH_BEGIN,this.onTap,this),this._body.removeEventListener(egret.Event.RENDER,this.onBodyEnterFrame,this),DisUtil.remove(this),Timer.ins().removeAll(this),egret.Tween.removeTweens(this),this.filters=null,this.closeChatBubble(),this.action=EntityAction.STAND,this._hpBar.value=this._hpBar.maximum=1e8,this._nameGroup.visible=!1,this.setBodyVisible(!0),this.AI.destruct(),this.AI=new AIBase,this.AI.setEntity(this),this.removeBuffs(),this.visible=!0,this._entityType=-1,this._weapon&&(this._weapon.visible=!1,this._weapon.reset()),this._wing&&(this._wing.visible=!1,this._wing.reset()),this._mount&&(this._mount.visible=!1,this._mount2.visible=!1,this._mount.reset(),this._mount2.reset()),this._juhun&&(this._juhun.visible=!1,this._juhun.reset()),this._foot&&(this._foot.visible=!1,this._foot.reset()),this._guanghuan&&(egret.Tween.removeTweens(this._guanghuan),this._guanghuan.visible=!1,this._guanghuan.reset()),this._shengLing&&(this._shengLing.visible=!1,this._shengLing.reset()),this._hudun&&(DisUtil.remove(this._hudun),this._hudun.visible=!1,this._hudun.reset()),this.juhunType=0,this.bianshenId=0,this._body.reset(),this.mcTouXian.reset(),this._isAtking=!1,this.data=null,this._isShowHunduBar=!1,this.btmList.length=0,this.yinJiComponent&&this.yinJiComponent.reset()},e.prototype.removeDisplay=function(){this._guanghuan&&DisUtil.remove(this._guanghuan),DisUtil.remove(this._shadow)},e.prototype.addDisplay=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];this._guanghuan&&MapContainer.ins().addEffectToDown2(this._guanghuan),MapContainer.ins().addEffectToDown2(this._shadow),this.readyUpdateMC()},e.prototype.updateMount=function(){},e.prototype.updateGuanghuan=function(){},e.prototype.setCanBeCaiJi=function(t){this._isBeCaiJi=t},e.prototype.setCaiJiing=function(t){this._isCaiJiing=t},e.prototype.isBeCaiJi=function(){return this._isBeCaiJi},e.prototype.isCaiJiing=function(){return this._isCaiJiing},e.prototype.setData=function(t){this.data=t,this.setTeam(t.teamId)},e}(EntityBase);__reflect(Entity.prototype,"Entity");var ProgressBarEffBaseData=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.state=ProgressBarEffDataState.normal,e.isFisrt=!0,e.maxValue=1,e.value=-1,e.oldMaxValue=0,e.values=[],e.objWidth=0,e}return __extends(e,t),e.prototype.setData=function(t,e){this.setMaxValue(e),this.setValue(t),this.oldMaxValue=e,this.update()},e.prototype.setValue=function(t){if(this.value!=t||this.maxValue!=this.oldMaxValue){var e=this.value;this.value=t;var i=this.value==this.maxValue,n=this.maxValue>this.oldMaxValue&&this.oldMaxValue>0||this.value<e;if(this.values.length>1)for(var a=0;this.values.length;a++)if(0==this.values[a].isMax){this.values.splice(a,1);break}(n||i)&&this.values.push(new EffBaseValueData(this.getMaxValue(),this.getMaxValue(),!n)),i||this.values.push(new EffBaseValueData(this.getValue(),this.getMaxValue(),n)),this.update()}},e.prototype.getValue=function(){return 0==this.maxValue?1:this.value>=this.getMaxValue()?this.getMaxValue():this.value},e.prototype.getMaxValue=function(){return this.maxValue<=1?1:this.maxValue},e.prototype.setMaxValue=function(t){this.maxValue=t,this.update()},e.prototype.setState=function(t){this.state=t,this.update()},Object.defineProperty(e.prototype,"isMax",{get:function(){return this.getValue()==this.getMaxValue()},enumerable:!0,configurable:!0}),e.prototype.getCurWidth=function(){return this.values[0].value/this.values[0].maxValue*this.objWidth},e.prototype.isPlay=function(){return this.values.length>0},e.prototype.update=function(){},e.prototype.reset=function(){this.values=[],this.value=-1,this.maxValue=1,this.oldMaxValue=0,this.isFisrt=!0,this.state=ProgressBarEffDataState.normal},e}(egret.DisplayObjectContainer);__reflect(ProgressBarEffBaseData.prototype,"ProgressBarEffBaseData");var ProgressBarEffDataState;!function(t){t[t.normal=0]="normal",t[t.max=1]="max"}(ProgressBarEffDataState||(ProgressBarEffDataState={}));var EffBaseValueData=function(){function t(t,e,i){this.value=0,this.maxValue=0,this.isMax=!1,this.value=t,this.maxValue=e,this.isMax=i}return t}();__reflect(EffBaseValueData.prototype,"EffBaseValueData");var ShenDianPanel=function(t){function e(){var e=t.call(this)||this;return e.helpId=45,e.initUI(),e}return __extends(e,t),e.prototype.initUI=function(){this.setSkinName()},e.prototype.setSkinName=function(){this.skinName="ShenDianPanelEUI",this.list.itemRenderer=ItemBaseReward},e.prototype.open=function(){this.addClickE(this,this.onClick),this.addLsn(RpSys.ins().patchRp,this.updateRp),this.addLsn(FbSys.ins().patchShenDianData,this.updatePanel),this.addLsn(VipSys.ins().patchSvipLvChange,this.updatePanel),this.updatePanel(),this.updateRp()},e.prototype.close=function(){t.prototype.close.call(this)},e.prototype.updatePanel=function(){var t=FbSys.ins().shendianData,e=Cfg.getConfig(ShenghunFubenConfig,CondType.LessEqual,MolongFubenConfig.zslevel,Actor.ins().zsId),i=Cfg.getConfig(ShenghunCommonConfig);this.labelLv.text=GFunc.getZSNameBydb(e.zslevel),this.indexBmp.text=e.id.toString();var n=ActSys.ins().beishu,a=GFunc.setItemDataRewardValue(e.reward,ItemDataReward["double"],n);this.list.dataProvider=new eui.ArrayCollection(a),this.lbTjPower.textFlow=addColorTF(""+Lang.fb_str30+addColor(e.needpower,13486270)),this.lbCurPower.textFlow=addColorTF(""+Lang.fb_str31+addColor(Actor.ins().power,Actor.ins().power>=e.needpower?5949490:15733780)),this.lbZhuZhan.textFlow=addColorTF(Lang.mol_str23+"："+addColor(t.zhuzhanCount,0==t.zhuzhanCount?15733780:5949490)),this.lbDesc.textFlow=StrUtil.toTF(i.desc);var o=Cfg.getConfig(ShenghunFubenConfig,CondType.More,ShenghunFubenConfig.zslevel,Actor.ins().zsId);if(this.bitCeng.text=o.id.toString(),this.imgLevel.source="mlzc_zycs_"+o.zslevel,this.updateCouont(),this.currentState=t.isMax()?"max":"normal",t.canbuyCount>0)this.lbVip.text=Lang.mol_str22.replace("$count$",""+t.canbuyCount);else if(Actor.ins().sVipLv>=Cfg.getMaxConfig(SVipConfig).lv)this.lbVip.text="";else{var s=Cfg.getNextVipExp(FbGroup.ShenDian);s?this.lbVip.text=Lang.mol_str12.replace("$vip$",""+s):this.lbVip.text=""}},e.prototype.updateCouont=function(){var t=FbSys.ins().shendianData;this.lbSurplus.text=t.leftCount.toString()},e.prototype.updateStatus=function(){},e.prototype.updateRp=function(t){void 0===t&&(t=null),(!t||t.check(this))&&(this.btnintofuben.redPoint.visible=RpSys.ins().getData(ExtCom,FuBenWin,FuBenDuoRenPanel,e))},e.prototype.onClick=function(t){var e=FbSys.ins().shendianData;switch(t.target){case this.btnintofuben:if(0==e.leftCount)return void showTipsWarn(0==e.canbuyCount&&e.zhuzhanCount>0?Lang.mol_str13:e.canbuyCount>0?Lang.fb_str34.replace("$name$",Lang.sm_str1):Lang.mol_str15);FbSys.ins().sendShenDianGoToFuben();break;case this.btnSurplus:if(e.leftCount>0)showTipsWarn(Lang.fb_str36);else if(e.canbuyCount>0){var i=new PopupPriceData(Lang.ml_str4),n=Cfg.getConfig(ShenghunCommonConfig).needdiamond[e.buyCount];i.priceValue=n,i.priceType=CurType.yb,i.setFunction(this,function(){GFunc.checkCurrency(CurType.yb,n)&&FbSys.ins().sendShenDianBuyCount()}),openWin(CommonTipsWinNew,i)}else{var a=Cfg.getNextVipExp(FbGroup.ShenDian);a?(showTipsWarn(Lang.fb_str38.replace("$lv$",""+a)),openWin(RechargeWin)):showTipsWarn(Lang.fb_str39)}}},e.getSysId=function(){return 324},e.getTitle=function(){return"btz_zycs_fb"},e.getTabTitle=function(){return"fb_zycs_shsh"},e}(BasePanel);__reflect(ShenDianPanel.prototype,"ShenDianPanel"),window.ShenDianPanel=ShenDianPanel;var ShengLingLevelPanel=function(t){function e(){var e=t.call(this)||this;
return e.longPressBtnUp=new LongPress,e.datas=[],e.index=0,e._appearance="",e._mcKeduUrl="",e._mcQuanUrl="",e.skinName="ShengLingLevelPanelEUI",e.setSkinPart("comDaShi",new XingHunBarEff),e.list.itemRenderer=ShengLingItem,e.list.dataProvider=e.listData=new eui.ArrayCollection,e.mc=new MC,e.groupMc.addChild(e.mc),e.mcQuan=new MC,e.groupMc.addChild(e.mcQuan),e.mcKedu=new MC,e.groupMc.addChild(e.mcKedu),e.quanMask=new MaskSector,e.quanMask.y=11,e.quanMask.setParam(240,-90,270,0),e.groupMc.addChild(e.quanMask),e.mcQuan.mask=e.quanMask,e}return __extends(e,t),e.prototype.open=function(){t.prototype.open.call(this),this.addClickE(this.comDaShi,this.onClick),this.addClickE(this.btnSend,this.onClick),this.addItemTapE(this.list,this.onItemClick),this.addEvent(egret.Event.CHANGING,this.quanMask,this.maskChanging),this.addLsn(QiyuSys.ins().patchShengLingLevelUp,this.updatePanel),this.addLsn(QiyuSys.ins().patchShengLingDaShiUp,this.updatePanel),this.addLsn(BagSys.ins().patchItemChange,this.updateItem),this.addLsn(RpSys.ins().patchRp,this.updateRp),this.longPressBtnUp.setDisplay(this.btnSend,this.autoUp,this),this.infoPanel()},e.prototype.close=function(){t.prototype.close.call(this),this._appearance="",this._mcKeduUrl="",this._mcQuanUrl="",this.longPressBtnUp.close(),this.mc.reset(),this.mcQuan.reset(),this.mcKedu.reset()},e.prototype.updateRp=function(t){if(void 0===t&&(t=null),!t||t.check(this))for(var i=0;i<this.datas.length;i++){var n=this.list.getChildAt(i);n.showRedPoint(RpSys.ins().getData(RoleWin,RolePanel,ZhuangBanWin,ShengLingPanel,e,this.datas[i].id))}},e.prototype.infoPanel=function(){this.dataModel=QiyuSys.ins().shengLingModel,this.listData.source=this.datas=this.dataModel.shengLingDatas,this.index=0;for(var t=0;t<this.datas.length;t++)RpSys.ins().getData(RoleWin,RolePanel,ZhuangBanWin,ShengLingPanel,e,this.datas[t].id)&&(this.index=Math.max(this.index,t));this.list.selectedIndex=this.index,this.list.validateNow(),this.updatePanel(),this.updateRp()},e.prototype.updatePanel=function(){var t=this.datas[this.index];this.power.text=""+t.getLevelPower(),this.lb_name.text=t.getBaseConfig().name,this.imgQuan.source="shengling_zycs_jd"+t.id+"_png";var i=t.getJi(),n=t.getChong();this.lb_lv.text=n+"重"+i+"级",this.btnSend.label=10==i?Lang.btn_tp:Lang.btn_fl,this.quanMask.setValue(i,10,200);var a=AttrData.getFm(null,5767068,"","+");this.lbCurAttr.textFlow=addColorTF(AttrData.parse(t.getLevelConfig().attr,{fm:a}).join("\n")),this.lbNextAttr.textFlow=addColorTF(AttrData.parse(t.getNextLevelConfig().attr,{fm:a}).join("\n")),this.lbDaShi.text=Lang.sl_str2+"·"+t.daShiData.level+Lang.common_jie,this.comDaShi.setData(n,t.daShiData.getConfig().needLevel),this.comDaShi.redPoint.visible=RpSys.ins().getData(RoleWin,RolePanel,ZhuangBanWin,ShengLingPanel,e,t.id,ShengLingDaShiWin);var o=Cfg.getConfig(ShengLingAppearanceConfig,t.getBaseConfig().bodyIds[Actor.ins().job-1]).appearance;this._appearance!=o&&(this.mc.playFile(ResMgr.getShengLingUIEFFResource(o),-1),this._appearance=o);var s="shengling_zycs_d"+t.id;this._mcKeduUrl!=s&&(this.mcKedu.playFile(getEffName(s),-1),this.mcKedu.y=11,this._mcKeduUrl=s),s="shengling_zycs_jd"+t.id,this._mcQuanUrl!=s&&(this.mcQuan.playFile(getEffName(s),-1),this.mcQuan.y=11,this._mcQuanUrl=s),this.updateItem(),this.updateState()},e.prototype.maskChanging=function(t){var e=t.data,i=MathUtil.getAngle(e[1]),n=MathUtil.getRadian(i);this.mcKedu.x=160*Math.cos(n),this.mcKedu.y=160*Math.sin(n)+11,this.mcKedu.rotation=i-90},e.prototype.updateItem=function(){var t=this.datas[this.index];if(!t.isMaxLevel()){var i=GFunc.getItemCount(t.getLevelConfig().cost[0].id),n=t.getLevelConfig().cost[0].count;this.lbConsu.textFlow=addColorTF(i+"/"+n,n>i?15733780:5767068),this.btnSend.redPoint.visible=RpSys.ins().getData(RoleWin,RolePanel,ZhuangBanWin,ShengLingPanel,e,this.datas[this.index].id,"level")}},e.prototype.updateState=function(){var t=this.datas[this.index];this.dataModel.isAct(t)?t.isMaxLevel()?this.currentState="max":this.currentState="normal":(this.lbActDec.text=this.dataModel.getActDec(t),this.currentState="nojihuo")},e.prototype.onItemClick=function(t){this.index!=t.itemIndex&&(this.index=t.itemIndex,this.quanMask.setValue(0,10,0),this.updatePanel())},e.prototype.onClick=function(t){switch(t.currentTarget){case this.btnSend:this.autoUp();break;case this.comDaShi:openWin(ShengLingDaShiWin,this.datas[this.index].daShiData)}},e.prototype.autoUp=function(){var t=this.datas[this.index];GFunc.checkConsumeEnough(t.getLevelConfig().cost)?(10==t.getJi(),QiyuSys.ins().sendShengLingLevelUp(t.id)):this.longPressBtnUp.stop()},e.getTitle=function(){return"btz_zycs_sl"},e.getTabTitle=function(){return Lang.btn_fl},e.getSysId=function(){return 326},e}(BasePanel);__reflect(ShengLingLevelPanel.prototype,"ShengLingLevelPanel"),window.ShengLingLevelPanel=ShengLingLevelPanel;var ShengLingStagePanel=function(t){function e(){var e=t.call(this)||this;return e.datas=[],e.index=0,e.skinName="ShengLingStagePanelEUI",e.list.itemRenderer=ShengLingItem,e.list.dataProvider=e.listData=new eui.ArrayCollection,e.mc=new MC,e.groupMc.addChild(e.mc),e}return __extends(e,t),e.prototype.open=function(){t.prototype.open.call(this),this.addClickE(this.btnSend,this.onClick),this.addItemTapE(this.list,this.onItemClick),this.addLsn(QiyuSys.ins().patchShengLingStageUp,this.updatePanelUp),this.addLsn(BagSys.ins().patchItemChange,this.updateItem),this.addLsn(RpSys.ins().patchRp,this.updateRp),this.infoPanel()},e.prototype.close=function(){t.prototype.close.call(this),this.mc.reset()},e.prototype.updateRp=function(t){if(void 0===t&&(t=null),!t||t.check(this))for(var i=0;i<this.datas.length;i++){var n=this.list.getChildAt(i);n.showRedPoint(RpSys.ins().getData(RoleWin,RolePanel,ZhuangBanWin,ShengLingPanel,e,this.datas[i].id))}},e.prototype.infoPanel=function(){this.dataModel=QiyuSys.ins().shengLingModel,this.listData.source=this.datas=this.dataModel.shengLingDatas,this.index=0;for(var t=0;t<this.datas.length;t++)RpSys.ins().getData(RoleWin,RolePanel,ZhuangBanWin,ShengLingPanel,e,this.datas[t].id)&&(this.index=Math.max(this.index,t));this.list.selectedIndex=this.index,this.list.validateNow(),this.updatePanel(),this.updateRp()},e.prototype.updatePanelUp=function(){GFunc.playUIMovie("sl_zycs_jj",360,420,this,1),this.updatePanel()},e.prototype.updatePanel=function(){var t=this.datas[this.index];this.power.text=""+t.getStagePower(),this.lb_name.text=t.getBaseConfig().name,this.lb_lv.text=t.stage+"阶";var e=SkillSys.ins().getSkillPassivityDataById(t.getBaseConfig().skill);this.lbCurSkillName.text=e.getConfig().name+"Lv."+e.level,this.lbCurSkill.textFlow=StrUtil.toTF(e.getConfig().skinname),this.lbNextSkillName.text=e.getNextConfig().name+"Lv."+e.getNextConfig().level,this.lbNextSkill.textFlow=StrUtil.toTF(e.getNextConfig().skinname);var i=AttrData.getFm(null,5767068,"","+");this.lbCurAttr.textFlow=addColorTF(AttrData.parse(t.getStageAttrDatas(),{fm:i}).join("\n")),this.lbNextAttr.textFlow=addColorTF(AttrData.parse(t.getStageAttrDatas(t.stage+1),{fm:i}).join("\n"));var n=Cfg.getConfig(ShengLingAppearanceConfig,t.getBaseConfig().bodyIds[Actor.ins().job-1]).appearance;this.mc.playFile(ResMgr.getShengLingUIEFFResource(n),-1),this.updateItem(),this.updateState()},e.prototype.updateItem=function(){var t=this.datas[this.index];if(!t.isMaxStage()){var i=t.getStageConfig().needItem[0].id,n=t.getStageConfig().needItem[0].count,a=GFunc.getItemCount(i);this.lbConsu.textFlow=addColorTF(a+"/"+n,n>a?15733780:5767068),this.imgConsu.source="zycs_"+i,this.btnSend.redPoint.visible=RpSys.ins().getData(RoleWin,RolePanel,ZhuangBanWin,ShengLingPanel,e,t.id)}},e.prototype.updateState=function(){var t=this.datas[this.index];t.isMaxStage()?this.currentState="max":this.currentState="normal"},e.prototype.onItemClick=function(t){this.index=t.itemIndex,this.updatePanel()},e.prototype.onClick=function(t){switch(t.currentTarget){case this.btnSend:var e=this.datas[this.index];GFunc.checkConsumeEnough(e.getStageConfig().needItem)&&(QiyuSys.ins().sendShengLingStageUp(e.id),showtipsFail(Lang.sl_str15))}},e.getTitle=function(){return"btz_zycs_sl"},e.getTabTitle=function(){return Lang.btn_jj},e.getSysId=function(){return 326},e}(BasePanel);__reflect(ShengLingStagePanel.prototype,"ShengLingStagePanel"),window.ShengLingStagePanel=ShengLingStagePanel;var ShengLingYinJiPanel=function(t){function e(){var e=t.call(this)||this;return e.datas=[],e.index=0,e.yinjiDatas=[],e.yinJiIndex=0,e.dir=0,e.currentA=0,e.targetA=0,e.gapA=60,e.isRun=!1,e.posIndex=0,e.gapRad=Math.PI/3,e.rads=[1*e.gapRad,2*e.gapRad,3*e.gapRad,4*e.gapRad,5*e.gapRad,6*e.gapRad],e.isR=!0,e.skinName="ShengLingYinJiPanelEUI",e.yinJiItems=[e.yinJi6,e.yinJi7,e.yinJi8,e.yinJi9,e.yinJi10,e.yinJi11],e.list.itemRenderer=ShengLingItem,e.list.dataProvider=e.listData=new eui.ArrayCollection,e.entityRole=GFunc.createEntityUI(),e.entityRole.y=80,e.entityRole.scaleX=e.entityRole.scaleY=1.2,e.groupMc.addChild(e.entityRole),e}return __extends(e,t),e.prototype.open=function(){t.prototype.open.call(this);for(var e=0,i=this.yinJiItems;e<i.length;e++){var n=i[e];this.addClickE(n,this.onYinJiClick)}this.addClickE(this.btnSend,this.onClick),this.addClickE(this.helpBtn,this.onClick),this.addClickE(this.btnHuanHua,this.onClick),this.addClickE(this.btnTaoZhuang,this.onClick),this.addClickE(this.imgL1,this.onClick),this.addClickE(this.imgL2,this.onClick),this.addClickE(this.imgR1,this.onClick),this.addClickE(this.imgR2,this.onClick),this.addItemTapE(this.list,this.onItemClick),this.addLsn(QiyuSys.ins().patchShengLingHuanHua,this.updateHuanBtn),this.addLsn(QiyuSys.ins().patchShengLingYinJiUp,this.upAutoSelectYinji),this.addLsn(QiyuSys.ins().patchShengLingTaoZhuangUp,this.updateYinJi),this.addLsn(BagSys.ins().patchItemChange,this.updateItem),this.addLsn(RpSys.ins().patchRp,this.updateRp),Timer.ins()["do"](0,Timer.EVERY_FRAME,0,this.updateTick,this,TimerType.FIRST),this.infoPanel()},e.prototype.close=function(){t.prototype.close.call(this),this.entityRole.reset(),this.yinJiItems[this.yinJiIndex].selected=!1,Timer.ins().remove(this.updateTick,this)},e.prototype.updateRp=function(t){if(void 0===t&&(t=null),!t||t.check(this)){for(var i=0;i<this.datas.length;i++){var n=this.list.getChildAt(i);n.showRedPoint(RpSys.ins().getData(RoleWin,RolePanel,ZhuangBanWin,ShengLingPanel,e,this.datas[i].id))}for(var i=0;i<this.yinJiItems.length;i++)this.yinJiItems[i].showRedPoint(RpSys.ins().getData(RoleWin,RolePanel,ZhuangBanWin,ShengLingPanel,e,this.datas[this.index].id,this.yinjiDatas[i].id));this.btnTaoZhuang.redPoint.visible=RpSys.ins().getData(RoleWin,RolePanel,ZhuangBanWin,ShengLingPanel,e,this.datas[this.index].id,"taozhuang")}},e.prototype.infoPanel=function(){this.dataModel=QiyuSys.ins().shengLingModel,this.listData.source=this.datas=this.dataModel.shengLingDatas,this.index=0;for(var t=0;t<this.datas.length;t++)RpSys.ins().getData(RoleWin,RolePanel,ZhuangBanWin,ShengLingPanel,e,this.datas[t].id)&&(this.index=Math.max(this.index,t));this.list.selectedIndex=this.index,this.list.validateNow(),this.setYinJi(),this.updataMC(),this.updateRp()},e.prototype.updataMC=function(){var t=this.datas[this.index];this.updateEntity(t.id),this.lb_name.text=t.getBaseConfig().name,this.btnTaoZhuang.redPoint.visible=RpSys.ins().getData(RoleWin,RolePanel,ZhuangBanWin,ShengLingPanel,e,t.id,"taozhuang")},e.prototype.updateEntity=function(t){var e=Actor.ins().getMyData(),i=new EntityRoleData;i.szId=e.szId,i.damonId=e.damonId,i.job=e.job,i.wingId=e.wingId,i.sex=e.sex,i.shengLingId=t,i.type=EntityType.ROLE,this.entityRole.setData(i,3,EntityAction.STAND)},e.prototype.updateYinJi=function(){var t=this.yinjiDatas[this.yinJiIndex],e=AttrData.getFm(null,5767068,"","+");this.lbCurAttr.textFlow=addColorTF(AttrData.parse(t.getStageAttrDatas(),{fm:e}).join("\n")),this.lbNextAttr.textFlow=addColorTF(AttrData.parse(t.getStageAttrDatas(t.level+1),{fm:e}).join("\n")),this.btnSend.label=t.isAct()?Lang.btn_sj:Lang.btn_jh,this.yinJiItems[this.yinJiIndex].dataChanged(),this.updateHuanBtn(),this.updatePower(),this.updateItem(),this.updateState(),this.updateRp()},e.prototype.upAutoSelectYinji=function(){if(this.yinJiItems[this.yinJiIndex].playUpMc(),this.yinJiItems[this.yinJiIndex].dataChanged(),RpSys.ins().getData(RoleWin,RolePanel,ZhuangBanWin,ShengLingPanel,e,this.datas[this.index].id,this.yinjiDatas[this.yinJiIndex].id))this.updateYinJi();else{for(var t=0,i=0;i<this.yinJiItems.length;i++)if(this.yinJiItems[i].data=this.yinjiDatas[i],RpSys.ins().getData(RoleWin,RolePanel,ZhuangBanWin,ShengLingPanel,e,this.datas[this.index].id,this.yinjiDatas[i].id)){t=i;break}this.yinJiItems[this.yinJiIndex].selected=!1,this.yinJiIndex=t,this.yinJiItems[this.yinJiIndex].selected=!0,this.updateYinJi()}},e.prototype.upAutoSelectYinji2=function(){if(this.yinJiItems[this.yinJiIndex].playUpMc(),RpSys.ins().getData(RoleWin,RolePanel,ZhuangBanWin,ShengLingPanel,e,this.datas[this.index].id,this.yinjiDatas[this.yinJiIndex].id))this.updateYinJi();else{for(var t=-1,i=0;i<this.yinJiItems.length;i++)this.yinJiItems[i].data=this.yinjiDatas[i],RpSys.ins().getData(RoleWin,RolePanel,ZhuangBanWin,ShengLingPanel,e,this.datas[this.index].id,this.yinjiDatas[i].id)&&(t=i);var n=this.yinJiIndex-(-1==t?0:t);0==n||-1==t?this.updateYinJi():this.isR?1==n||-5==n?this.setPlay(1,0,this.isR?-1:-2):2==n||-4==n?this.setPlay(2,0,this.isR?-2:-3):3==n||-3==n?(this.setPlay(2,1,this.isR?3:2),this.isR=!1):4==n||-2==n?(this.setPlay(1,1,this.isR?2:1),this.isR=!1):(5==n||-1==n)&&(this.yinJiItems[this.yinJiIndex].selected=!1,this.yinJiIndex=t,this.yinJiItems[this.yinJiIndex].selected=!0,this.isR=!1,this.updateYinJi()):1==n||-5==n?(this.yinJiItems[this.yinJiIndex].selected=!1,this.yinJiIndex=t,this.yinJiItems[this.yinJiIndex].selected=!0,this.isR=!0,this.updateYinJi()):2==n||-4==n?(this.setPlay(1,0,this.isR?-1:-2),this.isR=!0):3==n||-3==n?(this.setPlay(2,0,this.isR?-2:-3),this.isR=!0):4==n||-2==n?this.setPlay(2,1,this.isR?3:2):(5==n||-1==n)&&this.setPlay(1,1,this.isR?2:1)}},e.prototype.updateHuanBtn=function(){var t=this.datas[this.index];if(this.dataModel.huanHuaId==t.id)this.imgSyz.visible=!0,this.btnHuanHua.visible=!1,this.groupBarAll.visible=!1;else{this.imgSyz.visible=!1;var e=this.dataModel.getYinJiActCountById(t.id);e==this.yinjiDatas.length?(this.btnHuanHua.visible=!0,this.groupBarAll.visible=!1):(this.btnHuanHua.visible=!1,this.groupBarAll.visible=!0,this.bar.value=e,this.bar.maximum=this.yinjiDatas.length)}},e.prototype.updatePower=function(){for(var t=0,e=[],i=0,n=this.yinjiDatas;i<n.length;i++){var a=n[i];t+=a.getPower(),e=AttrData.mergeAttr(e,a.getConfig().attr)}var o=this.datas[this.index],s=Cfg.getConfigs(ShengLingSuitConfig,o.id),r=null;for(var u in s)o.tzLevel>=s[u].level&&(t+=GFunc.getPower([s[u].addattr])+s[u].addPower,s[u].addattr.type==AttrType.shengLingYinjiAllPer&&(r=s[u].addattr));if(r){for(var h=0,l=e;h<l.length;h++){var p=l[h];p.value=p.value*r.value/1e4}t+=GFunc.getPower(e)}this.power.text=""+(t>>0)},e.prototype.updateItem=function(){var t=this.yinjiDatas[this.yinJiIndex];if(!t.isMax()){var i=t.getConfig().needItem[0].id,n=t.getConfig().needItem[0].count,a=GFunc.getItemCount(i);this.lbConsu.textFlow=addColorTF(a+"/"+n,n>a?15733780:5767068),this.imgConsu.source="zycs_"+i,this.btnSend.redPoint.visible=RpSys.ins().getData(RoleWin,RolePanel,ZhuangBanWin,ShengLingPanel,e,this.datas[this.index].id,this.yinjiDatas[this.yinJiIndex].id)}},e.prototype.updateState=function(){var t=this.yinjiDatas[this.yinJiIndex];t.isMax()?this.currentState="max":this.currentState="normal"},e.prototype.setYinJi=function(){var t=this.datas[this.index].id;this.yinjiDatas=this.dataModel.getYinJiDatasById(t),this.yinJiItems[this.yinJiIndex].selected=!1,this.yinJiIndex=0;for(var i=0;i<this.yinJiItems.length;i++)this.yinJiItems[i].data=this.yinjiDatas[i];for(var n=0;n<this.yinJiItems.length;n++)if(RpSys.ins().getData(RoleWin,RolePanel,ZhuangBanWin,ShengLingPanel,e,t,this.yinjiDatas[n].id)){this.yinJiIndex=n;break}this.yinJiItems[this.yinJiIndex].selected=!0,this.updateYinJi()},e.prototype.onYinJiClick=function(t){var e=this.yinJiItems.indexOf(t.currentTarget);this.isRun||this.yinJiIndex==e||(this.yinJiItems[this.yinJiIndex].selected=!1,this.yinJiIndex=e,this.yinJiItems[this.yinJiIndex].selected=!0,this.isR=!this.isR,this.updateYinJi())},e.prototype.onItemClick=function(t){this.isRun||this.index==t.itemIndex||(this.index=t.itemIndex,this.setYinJi(),this.updataMC())},e.prototype.onClick=function(t){switch(t.currentTarget){case this.btnSend:var e=this.yinjiDatas[this.yinJiIndex];!this.isRun&&GFunc.checkConsumeEnough(e.getConfig().needItem)&&QiyuSys.ins().sendShengLingYinJiUp(e.id);break;case this.btnHuanHua:QiyuSys.ins().sendShengLingHuanHua(this.datas[this.index].id);break;case this.btnTaoZhuang:openWin(ShengLingTaoZhuangWin,this.datas[this.index]);break;case this.helpBtn:openWin(HelpWin,Cfg.getConfig(HelpInfoConfig,112).text);break;case this.imgL1:this.setPlay(1,1,this.isR?2:1),this.isR=!1;break;case this.imgL2:this.setPlay(2,1,this.isR?3:2),this.isR=!1;break;case this.imgR1:this.setPlay(1,0,this.isR?-1:-2),this.isR=!0;break;case this.imgR2:this.setPlay(2,0,this.isR?-2:-3),this.isR=!0}},e.prototype.setYinjiInfoPos=function(t){this.isRun=!1,this.posIndex=(6-t)%6+1,this.targetA=this.posIndex*this.gapA,this.currentA=this.targetA,this.isR=!0,this.updateYinJiPos()},e.prototype.setPlay=function(t,e,i){if(void 0===e&&(e=0),void 0===i&&(i=0),!this.isRun){this.yinJiItems[this.yinJiIndex].selected=!1;var n=(this.yinJiIndex+6+i)%6-this.yinJiIndex;this.yinJiIndex=(this.yinJiIndex+6+n)%6,this.yinJiItems[this.yinJiIndex].selected=!0,this.updateYinJi(),this.targetA=this.currentA+t*this.gapA*(0==e?1:-1),this.dir=e,this.isRun=!0}},e.prototype.updateTick=function(){this.isRun&&(1==this.dir?(this.currentA-=4,this.currentA<=this.targetA&&(this.currentA=this.targetA,this.isRun=!1)):(this.currentA+=4,this.currentA>=this.targetA&&(this.currentA=this.targetA,this.isRun=!1)),this.updateYinJiPos())},e.prototype.updateYinJiPos=function(){for(var t=this.yinJiItems,e=t.length,i=(360+this.currentA%360)%360,n=0;e>n;n++){var a=(i+360*n/e)%360,o=MathUtil.getRadian(a);t[n].x=210*Math.cos(o),t[n].y=90*Math.sin(o)+50,o>Math.PI?this.groupMc.addChildAt(t[n],0):o<Math.PI&&this.groupMc.addChild(t[n]);var s=Math.floor(a/this.gapA),r=(this.gapRad-(this.rads[s]-o))/this.gapRad;0==s?t[n].scaleX=t[n].scaleY=.1*r+.9:1==s?t[n].scaleX=t[n].scaleY=1:2==s?t[n].scaleX=t[n].scaleY=.1-.1*r+.9:3==s?t[n].scaleX=t[n].scaleY=.1-.1*r+.8:4==s?t[n].scaleX=t[n].scaleY=.8:5==s&&(t[n].scaleX=t[n].scaleY=.1*r+.8)}},e.getTitle=function(){return"btz_zycs_sl"},e.getTabTitle=function(){return Lang.btn_yj},e.getSysId=function(){return 326},e}(BasePanel);__reflect(ShengLingYinJiPanel.prototype,"ShengLingYinJiPanel"),window.ShengLingYinJiPanel=ShengLingYinJiPanel;var ShenYouHuanHuaPanel=function(t){function e(){var e=t.call(this)||this;return e.selectIndex=0,e.huanHuaDatas=[],e.skinName="ShenYouHuanHuaPanelEUI",e.btnAttr.textFlow=addColorTF(StrUtil.addUnderLine(Lang.common_str116),5767068),e.attrs.itemRenderer=ComAttrItem,e.attrs.dataProvider=e.attrData=new eui.ArrayCollection,e.listConsume.itemRenderer=ItemBaseConsume,e.listConsume.dataProvider=e.listConsumeData=new eui.ArrayCollection,e.listIcon.itemRenderer=ShenYouHuanHuaPanelItem,e.listIcon.dataProvider=e.listIconData=new eui.ArrayCollection,e.pageArrowComponentBase=new PageArrowCom(e.scroller,135,105),e.pageArrowComponentBase.setBtn(e.btnLeft,e.btnRight),e.mc=new MC,e.groupMc.addChild(e.mc),e}return __extends(e,t),e.prototype.open=function(){t.prototype.open.call(this),this.addClickE(this.btnGengHuan,this.onClick),this.addClickE(this.btnSend,this.onClick),this.addClickE(this.btnAttr,this.onClick),this.addItemTapE(this.listIcon,this.onItemClick),this.addLsn(QiyuSys.ins().patchShenYouHuanHua,this.updatePanelUp),this.addLsn(QiyuSys.ins().patchShenYouHuanHuaUpLevel,this.updatePanelUp),this.addLsn(BagSys.ins().patchItemChange,this.updateConsume),this.addLsn(RpSys.ins().patchRp,this.updateRp),this.infoPanel(),this.pageArrowComponentBase.open()},e.prototype.close=function(){t.prototype.close.call(this),this.pageArrowComponentBase.close()},e.prototype.updateRp=function(t){if(!t||t.check(this))for(var e=0;e<this.listIcon.numChildren;e++){var i=this.listIcon.getChildAt(e);i&&i.dataChanged()}},e.prototype.infoPanel=function(){this.selectIndex=0,this.listIconData.source=this.huanHuaDatas=QiyuSys.ins().shenYouData.huanHuaDatas;for(var t=0;t<this.huanHuaDatas.length;t++)if(RpSys.ins().getData(RoleWin,RolePanel,ZhuangBanWin,ShenYouPanel,e,this.huanHuaDatas[t].id)){this.selectIndex=t;break}this.listIcon.selectedIndex=this.selectIndex,this.pageArrowComponentBase.setListIndex(this.selectIndex),this.updatePanel(),this.updateMC(),this.updateRp()},e.prototype.updatePanelUp=function(){this.listIconData.replaceAll(this.huanHuaDatas),this.updatePanel()},e.prototype.updatePanel=function(){var t=this.huanHuaDatas[this.selectIndex],i=t.getBaseConfig();this.power.text=""+t.getHuanHuaPower(),this.lb_name.text=i.name,this.bitHuDun.text=i.shieldPer/100+"%",this.bmpLv.text=""+t.stage,this.imgSyz.visible=t.isUse(),this.btnGengHuan.visible=t.stage>0&&!t.isUse(),this.attrData.source=t.getHuanHuaAttrDatas(),this.btnSend.label=t.stage>0?Lang.btn_sj:Lang.btn_jh,this.btnSend.redPoint.visible=RpSys.ins().getData(RoleWin,RolePanel,ZhuangBanWin,ShenYouPanel,e,t.id);var n=this.listIcon.getChildAt(this.selectIndex);n&&n.dataChanged();var a=addColor(""+i.desc,16751375);a+=Lang.common_str117+addColor("+"+i.power,16751375),this.lbActDec.textFlow=addColorTF(t.isAct()?"":a),this.updateConsume(),this.updateMax()},e.prototype.updateMC=function(){var t=this.huanHuaDatas[this.selectIndex],e=t.getBaseConfig(),i=Cfg.getConfig(ShenYouHuDunAppearanceConfig,e.bodyId);this.mc.playFile(ResMgr.getHuDunUISource(i.appearance),-1)},e.prototype.updateConsume=function(t){if(void 0===t&&(t=null),null==t||t.cfg.type==ItemType.ShenYouUpLevel){var e=this.huanHuaDatas[this.selectIndex];this.listConsumeData.source=e.getBaseConfig().needitem}},e.prototype.updateMax=function(){this.huanHuaDatas[this.selectIndex].isMax()?(this.imgYml.visible=!0,this.listConsume.visible=!1,this.btnSend.visible=!1):(this.imgYml.visible=!1,this.listConsume.visible=!0,this.btnSend.visible=!0)},e.prototype.onItemClick=function(t){this.selectIndex=t.itemIndex,this.updatePanel(),this.updateMC()},e.prototype.onClick=function(t){switch(t.currentTarget){case this.btnSend:var e=this.huanHuaDatas[this.selectIndex];GFunc.checkConsumeEnough(e.getBaseConfig().needitem)&&QiyuSys.ins().sendShenYouHuanHuaUpLevel(e.id);break;case this.btnGengHuan:QiyuSys.ins().sendShenYouHuanHua(this.huanHuaDatas[this.selectIndex].id);break;case this.btnAttr:openWin(ComAttrWin,QiyuSys.ins().shenYouData.getHuanHuaDatasAll(),ComAttrTitleEnum.HuanHua)}},e.getTitle=function(){return"btz_zycs_rw"},e.getTabTitle=function(){return Lang.btn_hh},e.getSysId=function(){return 325},e.openCheck=function(){if(GFunc.checkSysOpen(325)){var t=Cfg.getConfig(ShenYouBaseConfig).huanhuaOpen;return QiyuSys.ins().shenYouData.rank>=t?!0:(showtipsFail(Lang.sy_str5.replace("$rank$",""+t)),!1)}},e}(BasePanel);__reflect(ShenYouHuanHuaPanel.prototype,"ShenYouHuanHuaPanel"),window.ShenYouHuanHuaPanel=ShenYouHuanHuaPanel;var ShenYouLevelPanel=function(t){function e(){var e=t.call(this)||this;return e.longPressBtnUp=new LongPress,e.skinName="ShenYouLevelPanelEUI",e.attrs.itemRenderer=ComAttrItem,e.attrs.dataProvider=e.attrData=new eui.ArrayCollection,e.listConsume.itemRenderer=ItemBaseConsume,e.listConsume.dataProvider=e.listConsumeData=new eui.ArrayCollection,e.starExp=new Star(StarData.F_5()),e.starExp.x=45,e.groupStar.addChild(e.starExp),e.starExp.setMaxStar(10),e.btnSendMC=new MC,e.btnSendMC.x=86,e.btnSendMC.y=35,e.btnSend.addChildAt(e.btnSendMC,e.btnSend.numChildren-1),e.helpBtn.visible=!1,e.mc=new MC,e.groupMc.addChild(e.mc),e}return __extends(e,t),e.prototype.open=function(){t.prototype.open.call(this),this.addClickE(this,this.onClick),this.addLsn(RpSys.ins().patchRp,this.updateRp),this.addLsn(QiyuSys.ins().patchShenYouUplevel,this.updateUpStar),this.addLsn(BagSys.ins().patchItemChange,this.updateConsume),this.longPressBtnUp.setDisplay(this.btnSend,this.sengUpLevel,this),this.updatePanel(),this.updateMC(),this.updateRp()},e.prototype.close=function(){t.prototype.close.call(this),this.starExp.reset(),this.longPressBtnUp.close()},e.prototype.updateRp=function(t){if(null==t||t.check(this)){var i=RpSys.ins().getData(RoleWin,RolePanel,ZhuangBanWin,ShenYouPanel,e);this.btnSend.redPoint.visible=i,i?this.btnSendMC.playFile(getEffName("button1"),-1):(this.btnSendMC.stop(),this.btnSendMC.visible=!1)}},e.prototype.updateUpStar=function(){this.updatePanel();var t=QiyuSys.ins().shenYouData;1==t.star&&GFunc.playUIMovie("sl_zycs_tp",this.groupLv.width/2,this.groupLv.height/2,this.groupLv,1)},e.prototype.updatePanel=function(){var t=QiyuSys.ins().shenYouData,e=Cfg.getConfig(ShenYouLevelConfig,t.level);this.attrData.source=t.getLevelAttrDatas(),this.attrs.validateNow(),this.attrs.width=this.attrs.contentWidth,this.bitRank.text=t.rank.toString(),this.starExp.setCurStar(t.star),this.power.text=GFunc.getPower(e.attr).toFixed(0),this.updateSkill(),this.updateConsume(),this.currentState=t.isMaxLv()?"max":"normal",this.btnSend.label=10==t.star?Lang.btn_jj:Lang.btn_sx},e.prototype.updateMC=function(){var t=QiyuSys.ins().shenYouData,e=Cfg.getConfig(ShenYouHuanhuaConfig,0==t.huanHuaId?0:t.huanHuaId),i=Cfg.getConfig(ShenYouHuDunAppearanceConfig,e.bodyId);this.mc.playFile(ResMgr.getHuDunUISource(i.appearance),-1)},e.prototype.updateSkill=function(){var t=QiyuSys.ins().shenYouData,e=t.getNextSkill();this.lbSkillName.text=e.name,this.lbSkillDesc.textFlow=StrUtil.toTF(e.desc);var i=t.rank>=e.lockRank;this.lbSkillRank.text=i?Lang.common_str28:""+e.lockRank+Lang.sy_str0+"("+t.rank+"/"+e.lockRank+")",this.lbSkillRank.textColor=i?5767068:15733780,this.imgSkillIcon.source="shenyou_zycs_sk"+e.id},e.prototype.updateConsume=function(t){if(void 0===t&&(t=null),null==t||t.cfg.type==ItemType.ShenYouUpLevel){var e=QiyuSys.ins().shenYouData,i=Cfg.getConfig(ShenYouLevelConfig,e.level);this.listConsumeData.source=i.cost}},e.prototype.onClick=function(t){switch(t.target){case this.btnSend:this.sengUpLevel();break;case this.btnNengLiView:openWin(ShenYouNengLiWin);break;case this.helpBtn:openWin(HelpWin,HelpInfoConfig,this.helpId)}},e.prototype.sengUpLevel=function(){var t=QiyuSys.ins().shenYouData,e=Cfg.getConfig(ShenYouLevelConfig,t.level);0==t.isMaxLv()&&GFunc.checkConsumeEnough(e.cost)?QiyuSys.ins().sendShenYouUplevel():this.longPressBtnUp.stop()},e.getTitle=function(){return"btz_zycs_rw"},e.getTabTitle=function(){return Lang.btn_sx},e.getSysId=function(){return 325},e}(BasePanel);__reflect(ShenYouLevelPanel.prototype,"ShenYouLevelPanel"),window.ShenYouLevelPanel=ShenYouLevelPanel;var ShenYouSkillPanel=function(t){function e(){var e=t.call(this)||this;return e.items=[],e.skillDatas=[],e.curIndex=0,e.skinName="ShenYouSkillPanelEUI",e.items=[e.item0,e.item1,e.item2,e.item3,e.item4,e.item5,e.item6,e.item7],e.btnSendMC=new MC,e.btnSendMC.x=86,e.btnSendMC.y=35,e.btnSend.addChildAt(e.btnSendMC,e.btnSend.numChildren-1),e}return __extends(e,t),e.prototype.open=function(){t.prototype.open.call(this),this.addClickE(this,this.onClick),this.addClickE(this.groupItems,this.onItemClick),this.addLsn(RpSys.ins().patchRp,this.updateRp),this.addLsn(QiyuSys.ins().patchShenYouSkillUplevel,this.updateUpLevel),this.addLsn(QiyuSys.ins().patchShenYouSkillBuy,this.updateBuySkill),this.addLsn(BagSys.ins().patchItemChange,this.updateItem),this.iniPanel(),this.updatePanel(),this.updateRp()},e.prototype.close=function(){t.prototype.close.call(this)},e.prototype.updateRp=function(t){if(null==t||t.check(this))for(var i=this.items.length,n=0;i>n;n++){var a=this.items[n],o=a.data;if(a&&o){var s=RpSys.ins().getData(RoleWin,RolePanel,ZhuangBanWin,ShenYouPanel,e,ShenYouSkillPanelItem,"skillUp",o.id);a.showRedPoint(s)}}},e.prototype.iniPanel=function(){var t=QiyuSys.ins().shenYouData;this.skillDatas=t.skillDatas;for(var e=this.skillDatas.length,i=0;e>i;i++){var n=this.items[i],a=this.skillDatas[i];n&&a&&(n.data=a)}var o=this.getNextLockSkill();this.lbLockDesc.textFlow=addColorTF(null==o||0==o.stage?"":Lang.sy_str13.replace("$stage$",""+o.stage).replace("$count$",""+o.skillSlot)),this.groupBuy.y=null==o||0==o.stage?554:543,this.updatePower(),this.curIndex=this.getAutoSkillIndex();var s=this.skillDatas[this.curIndex];this.updateSkillData(s)},e.prototype.getNextLockSkill=function(){for(var t,e=QiyuSys.ins().shenYouData,i=0,n=Cfg.getConfigs(ShenYouStageConfig),a=0;a<n.length;a++)if(n[a].stage>e.rank&&n[a].skillSlot>0){i=n[a].stage,t=n[a];break}return t},e.prototype.getAutoSkillIndex=function(){for(var t=-1,i=QiyuSys.ins().shenYouData,n=i.skillDatas,a=n.length,o=0;a>o;o++){var s=n[o],r=RpSys.ins().getData(RoleWin,RolePanel,ZhuangBanWin,ShenYouPanel,e,ShenYouSkillPanelItem,"skillUp",s.id);if(r){t=o;break}}var u=i.actSkillCount();if(-1==t)for(var o=0;a>o;o++){var s=n[o],r=!1;if(r=u==i.skillCount&&u!=i.getSkillMaxCount()?0==s.isMax()&&s.isAct():0==s.isMax()){t=o;break}}return-1==t?0:t},e.prototype.updatePanel=function(){var t=QiyuSys.ins().shenYouData,e=t.actSkillCount(),i=t.skillCount>e?5767068:15733780;this.lbYiXue.textFlow=addColorTF(Lang.sy_str14+":"+addColor(e+"/"+t.skillCount,i));var n=Cfg.getConfig(ShenYouBaseConfig).buyPrice.length;this.btnSkillBuy.visible=t.skillCount>=Cfg.getConfig(ShenYouBaseConfig).buyMin&&t.skillCount<n,this.groupBuy.visible=e<t.getSkillMaxCount()},e.prototype.updateUpLevel=function(){this.items[this.curIndex].updateItem(),this.items[this.curIndex].playUpLeveMc(),this.updateSkillData(this.curSkillData),this.updatePower(),this.updatePanel()},e.prototype.updatePower=function(){for(var t=0,e=0,i=this.skillDatas;e<i.length;e++){var n=i[e];t+=n.getPower()}this.power.text=""+t.toFixed()},e.prototype.updateBuySkill=function(){for(var t=this.items.length,e=0;t>e;e++){var i=this.items[e];i.updateItem()}this.updatePanel()},e.prototype.updateSkillData=function(t){this.curSkillData=t;var i=t.getConfig();this.lbSkillName.text=i.skillname;var n=AttrData.getFm(null,5767068,"",":+"),a=t.getAttrs();this.lbCurAttr.textFlow=addColorTF(AttrData.parse(a,{fm:n}).join("\n")),this.lbDesc.textFlow=StrUtil.toTF(this.replaceAttr(i.desc,a));var o=t.isMax();if(o)this.lbNextAttr.text=Lang.common_str38;else{var s=AttrData.attrMultiple(t.getConfig().attr,t.level+1),r=AttrData.getFm(null,2686876,"",":+");this.lbNextAttr.textFlow=addColorTF(AttrData.parse(s,{fm:r}).join("\n"))}this.updateConsume();var u=RpSys.ins().getData(RoleWin,RolePanel,ZhuangBanWin,ShenYouPanel,e,ShenYouSkillPanelItem,"skillUp",t.id);this.btnSend.redPoint.visible=u,u?this.btnSendMC.playFile(getEffName("button1"),-1):(this.btnSendMC.stop(),this.btnSendMC.visible=!1),this.items[this.curIndex].setSelect(!0),this.currentState=o?"max":"normal"},e.prototype.replaceAttr=function(t,e){for(var i=0;i<e.length;i++)t=t.replace("{"+e[i].type+"}",""+AttrData.getAttrValue(e[i]));return t},e.prototype.getAttrs=function(t){},e.prototype.updateConsume=function(){var t=this.curSkillData.getConfig();if(t.cost.id){var e=Cfg.getItemCfg(t.cost.id);this.imgConsumeIcon.source=ResMgr.getItemIconMin(e.getIcon());var i=BagSys.ins().getItemCount(t.cost.id);this.lbConsumeCount.text=i+"/1",this.lbConsumeCount.textColor=i>=1?5949490:15733780}},e.prototype.updateItem=function(t){void 0===t&&(t=null),(null==t||t.cfg.type==ItemType.ShenYouSkill)&&this.updateConsume()},e.prototype.onClick=function(t){var e=QiyuSys.ins().shenYouData;switch(t.target){case this.btnSend:if(0==this.curSkillData.isAct()&&e.skillCount==e.actSkillCount())showtipsFail(Lang.sy_str1);else{var i=this.curSkillData.getConfig();GFunc.checkConsumeEnough(i.cost)&&QiyuSys.ins().sendShenYouSkillUplevel(this.curSkillData.id)}break;case this.btnSkillBuy:var n=Cfg.getConfig(ShenYouBaseConfig).buyPrice[QiyuSys.ins().shenYouData.skillCount],a=new PopupPriceData(Lang.sy_str2);a.priceValue=n,a.priceType=CurType.yb,a.setFunction(this,function(){GFunc.checkCurrency(CurType.yb,n)&&QiyuSys.ins().sendShenYouSkillBuy()
}),openWin(CommonTipsWinNew,a)}},e.prototype.onItemClick=function(t){var e=t.target;if(e&&e.parent&&e.parent instanceof ShenYouSkillPanelItem){var i=e.parent,n=i.data;QiyuSys.ins().shenYouData;this.items[this.curIndex].setSelect(!1),this.curIndex=this.items.indexOf(i),this.updateSkillData(n)}},e.getTitle=function(){return"btz_zycs_rw"},e.getTabTitle=function(){return Lang.sy_str3},e.getSysId=function(){return 325},e.openCheck=function(){if(GFunc.checkSysOpen(325)){var t=Cfg.getConfig(ShenYouBaseConfig).skillOpen;return QiyuSys.ins().shenYouData.rank>=t?!0:(showtipsFail(Lang.sy_str11.replace("$rank$",""+t)),!1)}},e}(BasePanel);__reflect(ShenYouSkillPanel.prototype,"ShenYouSkillPanel"),window.ShenYouSkillPanel=ShenYouSkillPanel;var ShenYouYinJiPanel=function(t){function e(){var e=t.call(this)||this;return e.skillDatas=[],e.skinName="ShenYouYinJiPanelEUI",e.setSkinPart("item",new ShenYouYinJiPanelItem),e.list.itemRenderer=SkillPassivityItem,e.list.dataProvider=e.listData=new eui.ArrayCollection,e.attrs.itemRenderer=ComAttrItem,e.attrs.dataProvider=e.attrData=new eui.ArrayCollection,e.btnHeCheng.textFlow=addColorTF(StrUtil.addUnderLine(e.btnHeCheng.text)),e.btnSendMC=new MC,e.btnSendMC.x=86,e.btnSendMC.y=35,e.btnSend.addChildAt(e.btnSendMC,e.btnSend.numChildren-1),e.mc=new MC,e.groupMc.addChild(e.mc),e}return __extends(e,t),e.prototype.open=function(){t.prototype.open.call(this),this.addClickE(this.btnHeCheng,this.onClick),this.addClickE(this.btnSend,this.onClick),this.addClickE(this.item,this.onClick),this.addItemTapE(this.list,this.onSkillItem),this.addLsn(BagSys.ins().patchItemChange,this.updateConsume),this.addLsn(RpSys.ins().patchRp,this.updateRp),this.addLsn(SkillSys.ins().patchSkillPassivityUp,this.updateSkill),this.addLsn(RpFun.showShenYouYinJiSkillRedPoint,this.updateSkill),this.addLsn(QiyuSys.ins().patchShenYouYinJiUpLevel,this.updateUpLevel),this.iniPanel(),this.updateRp()},e.prototype.close=function(){t.prototype.close.call(this)},e.prototype.updateRp=function(t){if(!t||t.check(this)){var i=RpSys.ins().getData(RoleWin,RolePanel,ZhuangBanWin,ShenYouPanel,e,"uplevel");this.btnSend.redPoint.visible=i,i?this.btnSendMC.playFile(getEffName("button1"),-1):(this.btnSendMC.stop(),this.btnSendMC.visible=!1),this.updateSkill()}},e.prototype.updateUpLevel=function(){this.updateAttr(),this.updateExp(),this.updatePower(),this.updateConsume()},e.prototype.iniPanel=function(){this.updateAttr(),this.updateExp(),this.updateConsume(),this.updatePower(),this.updateSkill(),this.updateMC();QiyuSys.ins().shenYouData;this.item.data=Cfg.getConfig(ShenYouBaseConfig).yinjiskill},e.prototype.updateMC=function(){var t=QiyuSys.ins().shenYouData,e=Cfg.getConfig(ShenYouHuanhuaConfig,0==t.huanHuaId?1:t.huanHuaId),i=Cfg.getConfig(ShenYouHuDunAppearanceConfig,e.bodyId);this.mc.playFile(ResMgr.getHuDunUISource(i.appearance),-1)},e.prototype.updateConsume=function(t){if(!t||t.cfg.type==ItemType.ShenYouYinJi){var e=QiyuSys.ins().shenYouData,i=Cfg.getConfig(ShenYouTagExpConfig,CondType.LessEqual,ShenYouTagExpConfig.minLv,e.yinjiLevel),n=Cfg.getItemCfg(i.itemid);this.imgConsu.source=ResMgr.getItemIconMin(n.getIcon());var a=BagSys.ins().getItemCount(i.itemid);this.lbConsu.text=a+"/1",this.lbConsu.textColor=a>=1?5949490:15733780}},e.prototype.updateSkill=function(){this.skillDatas=SkillSys.ins().getSkillPassivityDatasByIds(Cfg.getConfig(ShenYouBaseConfig).yinjiskills),this.listData.source=this.skillDatas,this.updatePower()},e.prototype.updatePower=function(){for(var t=0,e=0,i=this.skillDatas;e<i.length;e++){var n=i[e];t+=n.getPower()}this.power.text=""+(QiyuSys.ins().shenYouData.getYinJiPower()+t).toFixed()},e.prototype.updateAttr=function(){var t=QiyuSys.ins().shenYouData;this.attrData.source=t.getYinJiAttrDatas(),this.bmpLv.text="l"+t.yinjiLevel,this.currentState=t.yinjiMax()?"max":"normal"},e.prototype.updateExp=function(){var t=QiyuSys.ins().shenYouData;t.yinjiMax()?(this.barExp.value=1,this.barExp.maximum=1):(this.barExp.value=t.yinjiExp,this.barExp.maximum=t.getYinJiConfig().exp)},e.prototype.onSkillItem=function(t){var e=t.item;openWin(ShenYouYinJiSkillShowWin2,e,t.itemIndex)},e.prototype.onClick=function(t){switch(t.currentTarget){case this.btnSend:var e=QiyuSys.ins().shenYouData,i=Cfg.getConfig(ShenYouTagExpConfig,CondType.LessEqual,ShenYouTagExpConfig.minLv,e.yinjiLevel),n=new ItemDataReward;n.id=i.itemid,n.count=1,GFunc.checkConsumeEnough(n)&&QiyuSys.ins().sendShenYouYinJiUpLevel();break;case this.btnHeCheng:openWin(BagWin,BagWin.getTabIndexbyPanel(HeChengMainPanel),HeChengMainPanel.getTabIndexbyPanel(HeChengPanel));break;case this.item:var a=this.item.data;openWin(ShenYouYinJiSkillShowWin,a)}},e.getTitle=function(){return"btz_zycs_rw"},e.getTabTitle=function(){return Lang.sy_str4},e.getSysId=function(){return 325},e.openCheck=function(){if(GFunc.checkSysOpen(325)){var t=Cfg.getConfig(ShenYouBaseConfig).yinjiOpen;return QiyuSys.ins().shenYouData.rank>=t?!0:(showtipsFail(Lang.sy_str5.replace("$rank$",t.toString())),!1)}},e}(BasePanel);__reflect(ShenYouYinJiPanel.prototype,"ShenYouYinJiPanel"),window.ShenYouYinJiPanel=ShenYouYinJiPanel;var ShopYunBiaoPanel=function(t){function e(){var e=t.call(this)||this;return e.mc=new MC,e}return __extends(e,t),e.prototype.setSkinName=function(){this.skinName="ShopYunBiaoPanelEUI"},e.prototype.getListItemClass=function(){return ShopYunBiaoPanelItem},e.prototype.initUI=function(){t.prototype.initUI.call(this),this.listItemArr.source=ShopSys.ins().shopYunBiaoDatas,this.mc||(this.mc=new MC),this.mc.playFile(ResMgr.getUIMeilinRes("merlin_014"),-1),this.mc.x=185,this.mc.y=73,this.mc.scaleX=.8,this.mc.scaleY=.8,this.addChild(this.mc)},e.prototype.open=function(e){t.prototype.open.call(this,e),this.addClickE(this,this.onClick),this.addLsn(BagSys.ins().patchItemChange,this.updateConsumeCount),this.addLsn(ShopSys.ins().patchYunBiao,this.onRefresh),this.addLsn(ShopSys.ins().patchYunBiaoBuy,this.onBuy),this.updateConsumeCount(),e&&this.selectItem(this.itemId)},e.prototype.onRefresh=function(){this.listItemArr.replaceAll(ShopSys.ins().shopYunBiaoDatas)},e.prototype.onBuy=function(t){for(var e=this.listItem.numElements,i=0;e>i;i++){var n=this.listItem.getElementAt(i);if(n){var a=n.data;a.configIndex==t.configIndex&&(n.data=t)}}},e.prototype.updateConsumeCount=function(t){this.needitem||(this.needitem=Cfg.getConfig(DartStoreConfig,1).needitem),t&&t.id!=this.needitem||(this.imgIcon.source="zycs_"+this.needitem,this.labelCount.text=Cfg.getItemCfg(this.needitem).getName()+"："+GFunc.getItemCount(this.needitem))},e.prototype.onClick=function(t){var e=t.target;if(e&&e.name.indexOf("btnBuy")>-1){var i=parseInt(e.name.split("_")[1]),n=this.listItem.getElementAt(i),a=n.data;if(a.canBuy()){var o=Cfg.getItemCfg(a.config.id);if(o.type==ItemType.FootEquip&&FootSys.ins().isBagMax())return void showtipsFail(Lang.foot_str13);GFunc.checkConsumeEnough(a.getConsumeItem())&&openWin(BuyWin,a.getBuyData())}else showtipsFail(Lang.shop_str10)}},e.getTabTitle=function(){return"宝藏商店"},e.getSysId=function(){return 318},e}(MallBasePanel);__reflect(ShopYunBiaoPanel.prototype,"ShopYunBiaoPanel"),window.ShopYunBiaoPanel=ShopYunBiaoPanel;var ItemBase=function(t){function e(){var e=t.call(this)||this;return e.setSkinName(),e.init(),e}return __extends(e,t),e.prototype.init=function(){this.addClickE(this,this.onClick),this.once(egret.Event.REMOVED_FROM_STAGE,this.onRemoveFromStage,this),this.count.visible=!0,this.lbTimer.visible=!1},e.prototype.reInit=function(){this.addClickE(this,this.onClick),this.once(egret.Event.REMOVED_FROM_STAGE,this.onRemoveFromStage,this)},e.prototype.setSkinName=function(){this.skinName="ItemSkin"},e.prototype.onRemoveFromStage=function(t){this.close()},e.prototype.setRedPoint=function(t){this.redPoint.visible=t},e.prototype.dataChanged=function(){this.baseDataChanged()},e.prototype.baseDataChanged=function(){var t=this.data;if(t){var e=t.cfg;e?(this.imgIcon.source=ResMgr.getItemIcon(e.getIcon(),IconType.IT_80x80),this.imgColor.source=ResMgr.getItemqualityResource(e.quality),this.lbName.text=e.getName(),this.setColor(GConst.PZColor[e.quality]),this.setCount(t.count),this.setStar(e.star),this.setTimer(e.keep_time),this.setRank(ItemType.isShowRank(e.type)?e.rank:0),this.setItemKuangEffect(!0,ResMgr.getEquipEffName(e.quality)),this.setImgSR(e.srQuality),""!=e.itemeff&&e.itemeff?this.setItemEffect(!0,""+ResMgr.getItemEff(e.type,e.itemeff)):this.setItemEffect(!1)):this.clear()}else this.clear()},e.prototype.onClick=function(t){var e=this.data;GFunc.openItemTips(e)},e.prototype.clear=function(){this.imgIcon.source="",this.imgColor.source="",this.count.visible=!1,this.setStar(0)},e.prototype.getitemKuangMc=function(){return this.mcItemKuang||(this.mcItemKuang=this.mcItemKuang?this.mcItemKuang:new MC,this.mcItemKuang.scaleX=1,this.mcItemKuang.scaleY=1,this.groupMc.addChild(this.mcItemKuang),this.mcItemKuang.visible=!1,this.mcItemKuang.stop()),this.mcItemKuang},e.prototype.getitemMc=function(){return this.mcItem||(this.mcItem=this.mcItem?this.mcItem:new MC,this.mcItem.scaleX=1,this.mcItem.scaleY=1,this.mcItem.x=0,this.mcItem.y=0,this.groupMCTop.addChild(this.mcItem),this.mcItem.visible=!1,this.mcItem.stop()),this.mcItem},e.prototype.setColor=function(t){this.lbName.textColor=t},e.prototype.setCount=function(t){t>1?(this.count.text=GFunc.overLength(t),this.count.visible=!0):this.count.visible=!1},e.prototype.bgSelect=function(t){this.imgSelect.visible=t},e.prototype.setDiscountValue=function(t){t&&t>0&&1>t&&(this.imgDiscount.text=""+10*t,this.currentState="discount")},e.prototype.setDropType=function(t){t&&t>0?this.imgDropType.source=ResMgr.RewardDropType[t]:this.imgDropType.source=null},e.prototype.setItemEffect=function(t,e){if(void 0===e&&(e="quaeff4"),t){var i=this.getitemMc();i.playFile(getEffName(e),-1),i.play()}else this.mcItem&&(this.mcItem.visible=!1,this.mcItem.stop())},e.prototype.setItemKuangEffect=function(t,e){if(void 0===e&&(e="quaeff4"),t){var i=this.getitemKuangMc();i.playFile(getEffName(e),-1),i.play()}else this.mcItemKuang&&(this.mcItemKuang.visible=!1,this.mcItemKuang.stop())},e.prototype.setImgFmp=function(t){this.imgFmp.visible=t},e.prototype.setJueBna=function(t){this.imgJueBan.visible=t},e.prototype.setStar=function(t){this.groupStart.removeChildren();for(var e=0;t>e;e++){var i=new eui.Image;i.source="role_zycs_star",i.touchEnabled=!1,this.groupStart.addChild(i)}this.imgStarBg.visible=t>0},e.prototype.setYiLingQu=function(t){this.imgYilingqu.visible=t},e.prototype.setYiXue=function(t){this.lbYiXue.visible=t},e.prototype.setEquip=function(t){this.imgEquip.visible=t},e.prototype.setTimer=function(t){this.lbTimer.visible=t>0},e.prototype.setRank=function(t){this.bitlbRank.text=t>0?t+"r":""},e.prototype.setImgSR=function(t){this.imgSR.source=t>0?"shenqi_zycs_"+t:""},e.prototype.setAoyi=function(t){t&&(this.imgAoyi.source="pt_zycs_ay"),this.imgAoyi.visible=t},e.prototype.setImgUp=function(t){t&&(this.imgUp.source="public_zycs_lj"),this.imgUp.visible=t},e.prototype.getImgIcon=function(){return this.imgIcon},e.prototype.setDouble=function(t){this.imgDouble.visible=t},e}(BaseItemRender);__reflect(ItemBase.prototype,"ItemBase"),window.ItemBase=ItemBase;var MallItemPanel=function(t){function e(){return t.call(this)||this}return __extends(e,t),e.prototype.setSkinName=function(){this.skinName="MallItemPanelEUI"},e.prototype.getListItemClass=function(){return MallItemPanelItem},e.prototype.open=function(e){void 0===e&&(e=0),t.prototype.open.call(this,e),this.addClickE(this,this.onClick),this.listItemArr.source=SortUtil.sortOn(ShopSys.ins().mallItemDatas.concat(),["sort"]),e&&this.selectItem(this.itemId)},e.prototype.onClick=function(t){var e=t.target;if(e&&e.name.indexOf("btnBuy")>-1){var i=parseInt(e.name.split("_")[1]),n=this.listItem.getElementAt(i),a=n.data,o=a.config;Cfg.getItemCfg(a.config.itemId);if(GFunc.checkCurrency(CurType.yb,o.price)){var s=new BuyData;s.setBuyFun(function(t){var e=Cfg.getConfig(StoreItemConfig,CondType.Equal,StoreItemConfig.itemId,a.config.itemId);ShopSys.ins().sendItemShopBuy([[e.index,t]])}),s.price=o.price,s.itemId=a.config.itemId,s.limitCount=9999,s.consumeItemId=CurType.yb,s.itemCount=o.count,openWin(BuyWin,s)}}},e.getTabTitle=function(){return"日常道具"},e}(MallBasePanel);__reflect(MallItemPanel.prototype,"MallItemPanel"),window.MallItemPanel=MallItemPanel;var MallSVIPPanel=function(t){function e(){return t.call(this)||this}return __extends(e,t),e.prototype.setSkinName=function(){this.skinName="MallSVIPPanelEUI"},e.prototype.getListItemClass=function(){return MallSVIPPanelItem},e.prototype.open=function(e){void 0===e&&(e=0),t.prototype.open.call(this,e),this.addClickE(this,this.onClick),this.addLsn(ShopSys.ins().patchMallSVIPBuy,this.onBuy),this.addLsn(VipSys.ins().patchSvipLvChange,this.onSvipLvChange);var i=ShopSys.ins().mallSVIPDatas.concat();SortUtil.sortOn(i,["sort"]),this.listItemArr.source=i,this.itemId&&this.selectItem(this.itemId)},e.prototype.onSvipLvChange=function(){this.listItemArr.refresh()},e.prototype.onBuy=function(t){for(var e=this.listItem.numElements,i=0;e>i;i++){var n=this.listItem.getElementAt(i);if(n){var a=n.data;a.configIndex==t.configIndex&&(n.data=t)}}},e.prototype.onClick=function(t){var e=t.target;if(e&&(e.name.indexOf("btnBuy")>-1||e.name.indexOf("btnFree")>-1)){var i=parseInt(e.name.split("_")[1]),n=this.listItem.getElementAt(i),a=n.data,o=a.getConsumeItem();if(a.canBuy()){if(GFunc.checkConsumeEnough(o)){var s=new BuyData;s.setBuyFun(function(t){ShopSys.ins().sendMallSVIPBuy(a.config.index,t)}),s.itemId=a.getItemId(),s.price=a.getPrice(),s.consumeItemId=o.id,s.limitCount=a.getLeftBuyCount(),openWin(BuyWin,s)}}else showtipsFail(Lang.shop_str10)}},e.getTabTitle=function(){return"SVIP专属"},e.getSysId=function(){return 259},e}(MallBasePanel);__reflect(MallSVIPPanel.prototype,"MallSVIPPanel"),window.MallSVIPPanel=MallSVIPPanel;var MallXGTHPanel=function(t){function e(){return t.call(this)||this}return __extends(e,t),e.prototype.setSkinName=function(){this.skinName="MallXGTHPanelEUI"},e.prototype.getListItemClass=function(){return MallXGTHPanelItem},e.prototype.open=function(e){void 0===e&&(e=0),t.prototype.open.call(this,e),this.addClickE(this,this.onClick),this.addLsn(ShopSys.ins().patchMallXGTHBuy,this.onBuy),this.addLsn(ShopSys.ins().patchMallXGTH,this.onRefresh),this.addLsn(RpSys.ins().patchRp,this.updateRp),this.onRefresh(),this.itemId&&this.selectItem(this.itemId)},e.prototype.updateRp=function(t){if(!t||t.check(this.getThisDef()))for(var e=this.listItem.numElements,i=0;e>i;i++){var n=this.listItem.getElementAt(i);n&&n.updateRp()}},e.prototype.onRefresh=function(){var t=ShopSys.ins().mallXGTHDatas.concat();SortUtil.sortOn(t,["sort"]),this.listItemArr.replaceAll(t)},e.prototype.onBuy=function(t){for(var e=this.listItem.numElements,i=0;e>i;i++){var n=this.listItem.getElementAt(i);if(n){var a=n.data;a.configIndex==t.configIndex&&(n.data=t)}}},e.prototype.onClick=function(t){var e=t.target;if(e&&(e.name.indexOf("btnBuy")>-1||e.name.indexOf("btnFree")>-1)){var i=parseInt(e.name.split("_")[1]),n=this.listItem.getElementAt(i),a=n.data;GFunc.checkCurrency(CurType.yb,a.config.yuanbao)&&ShopSys.ins().sendMallXGTHBuy(a.config.index)}},e.getTabTitle=function(){return"限购特惠"},e}(MallBasePanel);__reflect(MallXGTHPanel.prototype,"MallXGTHPanel"),window.MallXGTHPanel=MallXGTHPanel;var MizangHuangguanPanel=function(t){function e(){return t.call(this)||this}return __extends(e,t),e.prototype.setSkinName=function(){this.skinName="MizangHuangguanPanelEUI"},e.prototype.getListItemClass=function(){return MizangHuangguanPanelItem},e.prototype.initUI=function(){t.prototype.initUI.call(this),this.listItemArr.source=ShopSys.ins().huangguanDatas},e.prototype.open=function(e){t.prototype.open.call(this,e),this.addClickE(this,this.onClick),this.addLsn(BagSys.ins().patchItemChange,this.updateConsumeCount),this.addLsn(ShopSys.ins().patchHuangguan,this.onRefresh),this.addLsn(ShopSys.ins().patchHuangguanBuy,this.onBuy),this.updateConsumeCount()},e.prototype.onRefresh=function(){this.listItemArr.replaceAll(ShopSys.ins().huangguanDatas)},e.prototype.onBuy=function(t){for(var e=this.listItem.numElements,i=0;e>i;i++){var n=this.listItem.getElementAt(i);if(n){var a=n.data;a.configIndex==t.configIndex&&(n.data=t)}}},e.prototype.updateConsumeCount=function(t){var e=Cfg.getConfig(EnumConfig).huangguanId;t&&t.id!=e||(this.imgIcon.source="zycs_"+e,this.labelCount.text=Cfg.getItemCfg(e).getName()+"："+GFunc.getItemCount(e))},e.prototype.onClick=function(t){var e=t.target;if(e&&e.name.indexOf("btnBuy")>-1){var i=parseInt(e.name.split("_")[1]),n=this.listItem.getElementAt(i),a=n.data;if(a.canBuy()){var o=a.getConsumeItem();if(GFunc.checkConsumeEnough(o)){var s=new BuyData;s.setBuyFun(function(t){ShopSys.ins().sendHuangguanBuy(a.configIndex,t)}),s.itemId=a.getItemId(),s.price=a.getPrice(),s.consumeItemId=o.id,s.limitCount=a.getLeftBuyCount(),openWin(BuyWin,s)}}else showtipsFail(Lang.shop_str10)}},e.getTabTitle=function(){return"仙宫宝库"},e}(MallBasePanel);__reflect(MizangHuangguanPanel.prototype,"MizangHuangguanPanel"),window.MizangHuangguanPanel=MizangHuangguanPanel;var MizangXingshiPanel=function(t){function e(){return t.call(this)||this}return __extends(e,t),e.prototype.setSkinName=function(){this.skinName="MizangXingshiPanelEUI"},e.prototype.getListItemClass=function(){return MizangXingshiPanelItem},e.prototype.initUI=function(){t.prototype.initUI.call(this),this.listItemArr.source=ShopSys.ins().xingshiDatas},e.prototype.open=function(e){t.prototype.open.call(this,e),this.addClickE(this,this.onClick),this.addLsn(BagSys.ins().patchItemChange,this.updateConsumeCount),this.addLsn(ShopSys.ins().patchXingshi,this.onRefresh),this.addLsn(ShopSys.ins().patchXingshiBuy,this.onBuy),this.updateConsumeCount()},e.prototype.onRefresh=function(){this.listItemArr.replaceAll(ShopSys.ins().xingshiDatas)},e.prototype.onBuy=function(t){for(var e=this.listItem.numElements,i=0;e>i;i++){var n=this.listItem.getElementAt(i);if(n){var a=n.data;a.configIndex==t.configIndex&&(n.data=t)}}},e.prototype.updateConsumeCount=function(t){var e=Cfg.getConfig(EnumConfig).xingshiId;t&&t.id!=e||(this.imgIcon.source="zycs_"+e,this.labelCount.text=Cfg.getItemCfg(e).getName()+"："+GFunc.getItemCount(e))},e.prototype.onClick=function(t){var e=t.target;if(e&&e.name.indexOf("btnBuy")>-1){var i=parseInt(e.name.split("_")[1]),n=this.listItem.getElementAt(i),a=n.data;if(a.canBuy()){var o=a.getConsumeItem();if(GFunc.checkConsumeEnough(o)){var s=new BuyData;s.setBuyFun(function(t){ShopSys.ins().sendXingshiBuy(a.configIndex,t)}),s.itemId=a.getItemId(),s.price=a.getPrice(),s.consumeItemId=o.id,s.limitCount=a.getLeftBuyCount(),openWin(BuyWin,s)}}else showtipsFail(Lang.shop_str10)}},e.getTabTitle=function(){return"龙宫宝库"},e}(MallBasePanel);__reflect(MizangXingshiPanel.prototype,"MizangXingshiPanel"),window.MizangXingshiPanel=MizangXingshiPanel;var ShopBossPanel=function(t){function e(){return t.call(this)||this}return __extends(e,t),e.prototype.setSkinName=function(){this.skinName="ShopBossPanelEUI"},e.prototype.getListItemClass=function(){return ShopBossPanelItem},e.prototype.initUI=function(){t.prototype.initUI.call(this),this.listItemArr.source=ShopSys.ins().shopBossDatas},e.prototype.open=function(e){t.prototype.open.call(this,e),this.addClickE(this,this.onClick),this.addLsn(BagSys.ins().patchItemChange,this.updateConsumeCount),this.addLsn(ShopSys.ins().patchBoss,this.onRefresh),this.addLsn(ShopSys.ins().patchBossBuy,this.onBuy),this.updateConsumeCount()},e.prototype.onRefresh=function(){this.listItemArr.replaceAll(ShopSys.ins().shopBossDatas)},e.prototype.onBuy=function(t){for(var e=this.listItem.numElements,i=0;e>i;i++){var n=this.listItem.getElementAt(i);if(n){var a=n.data;a.configIndex==t.configIndex&&(n.data=t)}}},e.prototype.updateConsumeCount=function(t){var e=Cfg.getConfig(EnumConfig).bossJingpoId;t&&t.id!=e||(this.imgIcon.source="zycs_"+e,this.labelCount.text=Cfg.getItemCfg(e).getName()+"："+GFunc.getItemCount(e))},e.prototype.onClick=function(t){var e=t.target;if(e&&e.name.indexOf("btnBuy")>-1){var i=parseInt(e.name.split("_")[1]),n=this.listItem.getElementAt(i),a=n.data;if(a.canBuy()){var o=a.getConsumeItem();if(GFunc.checkConsumeEnough(o)){var s=new BuyData;s.setBuyFun(function(t){ShopSys.ins().sendBossBuy(a.configIndex,t)}),s.itemId=a.getItemId(),s.price=a.getPrice(),s.consumeItemId=o.id,s.limitCount=a.getLeftBuyCount(),openWin(BuyWin,s)}}else showtipsFail(Lang.shop_str10)}},e.getTabTitle=function(){return"BOSS商店"},e}(MallBasePanel);__reflect(ShopBossPanel.prototype,"ShopBossPanel"),window.ShopBossPanel=ShopBossPanel;var ShopRongyuPanel=function(t){function e(){var e=t.call(this)||this;return e.initUI(),e}return __extends(e,t),e.prototype.setSkinName=function(){this.skinName="ShopRongyuPanelEUI"},e.prototype.getListItemClass=function(){return ShopRongyuPanelItem},e.prototype.initUI=function(){t.prototype.initUI.call(this),this.listItemArr.source=ShopSys.ins().shopRongyuDatas},e.prototype.open=function(e){void 0===e&&(e=0),t.prototype.open.call(this,e),this.addClickE(this,this.onClick),this.addLsn(LogicSys.ins().patchCurrency,this.onCurrency),this.addLsn(ShopSys.ins().patchRongyuBuy,this.onBuy),this.onCurrency(),this.itemId&&this.selectItem(this.itemId)},e.prototype.onBuy=function(t){for(var e=this.listItem.numElements,i=0;e>i;i++){var n=this.listItem.getElementAt(i);if(n){var a=n.data;a.configIndex==t.configIndex&&(n.data=t)}}},e.prototype.onCurrency=function(t){if(!t||t.type==CurType.JJCHoner){var e=Cfg.getItemCfg(CurType.JJCHoner);this.labelCount.text=Lang.shop_str9.replace("$name$",e.getName()).replace("$rongyu$",""+GFunc.overLength(Actor.ins().getCurrency(CurType.JJCHoner)))}},e.prototype.onClick=function(t){switch(t.target){case this.btnGoto:openWin(JJCWin);break;default:var e=t.target;if(e&&e.name.indexOf("btnBuy")>-1){var i=parseInt(e.name.split("_")[1]),n=this.listItem.getElementAt(i),a=n.data,o=a.getConsumeItem();if(a.canBuy()){if(GFunc.checkConsumeEnough(o)){var s=new BuyData;s.setBuyFun(function(t){ShopSys.ins().sendRongyuBuy(a.configIndex,t)}),s.itemId=a.getItemId(),s.price=a.getPrice(),s.consumeItemId=o.id,s.limitCount=a.getLeftBuyCount(),openWin(BuyWin,s)}}else showtipsFail(Lang.shop_str10)}}},e.getTabTitle=function(){return"荣誉商店"},e}(MallBasePanel);__reflect(ShopRongyuPanel.prototype,"ShopRongyuPanel"),window.ShopRongyuPanel=ShopRongyuPanel;var ShopYongZheDailyPanel=function(t){function e(){var e=t.call(this)||this;return e.oldselectedIndex=-1,e}return __extends(e,t),e.prototype.setSkinName=function(){this.skinName="ShopYongZhePanelEUI"},e.prototype.getListItemClass=function(){return ShopYongZheDailyPanelItem},e.prototype.open=function(e){t.prototype.open.call(this,e),this.addClickE(this.listItem,this.onClick),this.addClickE(this.btn,this.onClick),this.addLsn(ShopSys.ins().patchYongZheBuy,this.onBuy),this.updateList(),this.updateGuanQia()},e.prototype.updateList=function(){for(var t=0,e=ShopSys.ins().shopYongZheDatas[t],i=[],n=FbSys.ins().yongZheModel.floorId-1,a=0;a<e.length;a++)e[a].config.showcustom<=n&&i.push(e[a]);t==this.oldselectedIndex?this.listItemArr.replaceAll(i):this.listItemArr.source=i},e.prototype.updateGuanQia=function(){var t=FbSys.ins().yongZheModel.floorId-1,e="";if(t){var i=Cfg.getConfig(YongzheFubenConfig,t);e=""+i.name+i.index+"关"}else{var i=Cfg.getConfig(YongzheFubenConfig,1);e=""+i.name+i.index+"关"}this.labelCount.text="当前关卡："+e},e.prototype.onClick=function(t){if(t.currentTarget==this.btn)return void openWin(FuBenWin,FuBenWin.getTabIndexbyPanel(FuBenDanRenPanel),FuBenDanRenPanel.getTabIndexbyPanel(YongZhePanel));var e=t.target;if(e&&e.name.indexOf("btnBuy")>-1){var i=parseInt(e.name.split("_")[1]),n=this.listItem.getElementAt(i),a=n.data;a.canBuy()?GFunc.checkConsumeEnough(a.getConsumeItem())&&openWin(BuyWin,a.getBuyData()):showtipsFail(Lang.shop_str10)}},e.prototype.onBuy=function(t){for(var e=this.listItem.numElements,i=0;e>i;i++){var n=this.listItem.getElementAt(i);if(n){var a=n.data;a.type==t.type&&a.configIndex==t.configIndex&&(n.data=t)}}},e.getTitle=function(){return"btz_zycs_wybk"},e.getTabTitle=function(){return"每日限购"},e.getSysId=function(){return 327},e}(MallBasePanel);__reflect(ShopYongZheDailyPanel.prototype,"ShopYongZheDailyPanel"),window.ShopYongZheDailyPanel=ShopYongZheDailyPanel;var ShopYongZheFirstPanel=function(t){function e(){var e=t.call(this)||this;return e.oldselectedIndex=-1,e}return __extends(e,t),e.prototype.setSkinName=function(){this.skinName="ShopYongZhePanelEUI"},e.prototype.getListItemClass=function(){return ShopYongZheFirstPanelItem},e.prototype.open=function(e){t.prototype.open.call(this,e),ShopSys.ins().shopYongZhefirstRed=0,RpFun.showYongZheShopRedPoint(),this.addClickE(this.listItem,this.onClick),this.addClickE(this.btn,this.onClick),this.addLsn(ShopSys.ins().patchYongZheBuy,this.onBuy),this.updateList(),this.updateGuanQia()},e.prototype.updateList=function(){for(var t=1,e=ShopSys.ins().shopYongZheDatas[t],i=[],n=FbSys.ins().yongZheModel.floorId-1,a=0;a<e.length;a++)e[a].config.showcustom<=n&&i.push(e[a]);t==this.oldselectedIndex?this.listItemArr.replaceAll(i):this.listItemArr.source=i},e.prototype.updateGuanQia=function(){var t=FbSys.ins().yongZheModel.floorId-1,e="";if(t){var i=Cfg.getConfig(YongzheFubenConfig,t);e=""+i.name+i.index+"关"}else{var i=Cfg.getConfig(YongzheFubenConfig,1);e=""+i.name+i.index+"关"}this.labelCount.text="当前关卡："+e},e.prototype.onClick=function(t){if(t.currentTarget==this.btn)return void openWin(FuBenWin,FuBenWin.getTabIndexbyPanel(FuBenDanRenPanel),FuBenDanRenPanel.getTabIndexbyPanel(YongZhePanel));var e=t.target;if(e&&e.name.indexOf("btnBuy")>-1){var i=parseInt(e.name.split("_")[1]),n=this.listItem.getElementAt(i),a=n.data;a.canBuy()?GFunc.checkConsumeEnough(a.getConsumeItem())&&openWin(BuyWin,a.getBuyData()):showtipsFail(Lang.shop_str10)}},e.prototype.onBuy=function(t){for(var e=this.listItem.numElements,i=0;e>i;i++){var n=this.listItem.getElementAt(i);if(n){var a=n.data;a.type==t.type&&a.configIndex==t.configIndex&&(n.data=t)}}},e.getTitle=function(){return"btz_zycs_wybk"},e.getTabTitle=function(){return"首通奖励"},e.getSysId=function(){return 327},e}(MallBasePanel);__reflect(ShopYongZheFirstPanel.prototype,"ShopYongZheFirstPanel"),window.ShopYongZheFirstPanel=ShopYongZheFirstPanel;var BaseWinSingle=function(t){function e(){return t.call(this)||this}return __extends(e,t),e.prototype.open=function(){for(var e=[],i=0;i<arguments.length;i++)e[i]=arguments[i];t.prototype.open.call(this,0)},e.openCheck=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];var i,n=this.getSysId();return i=n>=0?GFunc.checkSysOpen(n):!0},e}(BaseWin);__reflect(BaseWinSingle.prototype,"BaseWinSingle");var ActBaseWin=function(t){function e(){var e=t.call(this)||this;return e.winType=WinType.MainWin,e.activityId=-1,e.subIndex=-1,e.onPlace=ActOnPlace.huodong,e.redPointHead=[ExtCom],e}return __extends(e,t),e.prototype.initUI=function(){this.setSkinName(),this.infoData(),t.prototype.initUI.call(this)},e.prototype.infoData=function(){this.dataBtns=ActSys.ins().getBtnConfigs(this.onPlace),this.panelNames=ActSys.ins().createPanelNames(this.dataBtns)},e.prototype.setTabItem=function(){this.tab.itemRenderer=ActTabBtn},e.prototype.getTabDatas=function(){return this.dataBtns},e.prototype.getTitle=function(){var e=t.prototype.getTitle.call(this);return e&&""!=e||(e="btz_zycs_"+this.dataBtns[this.tab.selectedIndex].imgTitle),e},e.prototype.open=function(e,i){void 0===e&&(e=-1),void 0===i&&(i=-1),this.activityId=e,this.subIndex=i;var n=this.getAutoIndexbyActId(e);t.prototype.open.call(this,n),this.addLsn(ActSys.ins().patchActivityPanel,this.updatePanel),this.addLsn(ActSys.ins().patchActivityIsGetAwards,this.updateTabRedPoint)},e.prototype.close=function(){t.prototype.close.call(this),Timer.ins().removeAll(this)},e.prototype.updateTabRedPoint=function(t){void 0===t&&(t=null);for(var e=0;e<this.tab.numElements;e++){var i=this.getTabDatas()[e];(!t||t.check(this.getThisDef())&&t.check(i.id))&&this.updateTabRedPointByIndex(e)}this.updateRp(t)},e.prototype.getTabRedpoint=function(t){var e=egret.getQualifiedClassName(this),i=this.getTabDatas()[t],n=[].concat(this.redPointHead).concat(e);i&&n.push(i.id);var a=callFunc(RpSys.ins(),RpSys.ins().getData,n);return a},e.prototype.oldIndexToNew=function(t){return t},e.prototype.updatePanel=function(t){var e=this.getCurPanel();e&&e.actId==t&&e.updateData()},e.prototype.getAutoIndexbyActId=function(t){var e=0,i=!0;if(-1==t)e=this.getAutoRedPointPage();else{for(var n=0;n<this.dataBtns.length;n++)if(this.dataBtns[n].id==t){e=n,i=!1;break}i&&(this.subIndex=-1)}return e},e.prototype.getParam=function(){return[this.dataBtns[this.tab.selectedIndex],this.subIndex]},e.openCheck=function(t){var e=ActSys.ins().getActDataById(t);return e&&e.getActOpenState()==ActOpenState.End?(showtipsFail(Lang.act_str48),!1):e&&e.getActOpenState()==ActOpenState.Unenabled?(showtipsFail(Lang.act_str6),!1):!0},e}(BaseWinAutoTab);__reflect(ActBaseWin.prototype,"ActBaseWin"),window.ActBaseWin=ActBaseWin;var ActDataBase=function(){function t(){this.onPlace=ActOnPlace.huodong,this.actId=0,this.isShowRp=!0,this.startTime=0,this.jiesuanTime=0,this.endTime=0,this.type=0,this.subType=0,this._record=0,this.records=new Array(64),this.changIndex=-1,this._commonData=0}return t.prototype.parser=function(t){this.record=t.readInt()},t.prototype.parserChange=function(t){t.readShort();return this.record=t.readInt(),this.changIndex},Object.defineProperty(t.prototype,"record",{set:function(t){if(this._record=t,0==t)this.reset();else{var e=new Array(64);MathUtil.writeIntToArray(t,e);var i=MathUtil.compareToArray(this.records,e);this.changIndex=i.length>0?i[0]:-1,this.records=e}},enumerable:!0,configurable:!0}),t.prototype.getConfigs=function(){return[]},t.prototype.getCondition=function(t){return!1},t.prototype.getConfig=function(t){return this.getConfigs()[t]},t.prototype.getItemDatas=function(){var t=this.getConfigs(),e=[];for(var i in t)e.push(new ActDataItem(t[i],this.getRewardStateById(t[i].index),this.actId,this.getActOpenState()));return e},t.prototype.redPoint=function(){var t=this.isOpenActivity()&&this.canReward();return t||(t=this.redPointAdd()),t},t.prototype.redPointAdd=function(){var t=!1,e=Cfg.getConfig(ActivityBtnConfig,this.actId);if(e.addId.length>0)for(var i=0,n=e.addId;i<n.length;i++){var a=n[i],o=ActSys.ins().getActDataById(a);if(o&&(t=o.redPoint()))break}return t},t.prototype.getRpKeyValues=function(){return[]},t.prototype.canReward=function(){var t=this.getConfigs();for(var e in t)if(0==this.deCodeRecord(t[e].index)&&this.getCondition(t[e]))return!0;return!1},t.prototype.completeReward=function(){return!1},t.prototype.getRewardStateById=function(t){var e=this.getConfig(t);return this.deCodeRecord(e.index)?ActRewardState.Geted:this.getCondition(e)?ActRewardState.CanGet:ActRewardState.NotReached},t.prototype.deCodeRecord=function(t){return this.records[t]||0},t.prototype.isOpenActivity=function(t){return void 0===t&&(t=Actor.ins().serverTime),this.getActOpenState(t)==ActOpenState.Open},t.prototype.isSeeActivity=function(t){void 0===t&&(t=Actor.ins().serverTime);var e=this.getActOpenState(t);return e==ActOpenState.Open||e==ActOpenState.Jiesuan},t.prototype.getActOpenState=function(t){void 0===t&&(t=Actor.ins().serverTime);var e=ActOpenState.Unenabled;return e=t<this.startTime?ActOpenState.Unenabled:t>this.endTime?ActOpenState.End:t>this.jiesuanTime?ActOpenState.Jiesuan:ActOpenState.Open},t.prototype.getformatTime=function(t,e,i){void 0===t&&(t=Actor.ins().serverTime);var n="";return n=t<this.startTime?Lang.act_str6:t>this.jiesuanTime?Lang.act_str7:this.getDateText((this.jiesuanTime-t)/1e3,e,i)},t.prototype.getDateText=function(t,e,i){return getFormatTime(t,e||"dd天hh小时mm分ss秒",i)},Object.defineProperty(t.prototype,"commonData",{set:function(t){this._commonData=t},enumerable:!0,configurable:!0}),t.prototype.reset=function(){this.changIndex=-1;for(var t=0;64>t;t++)this.records[t]=0},t}();__reflect(ActDataBase.prototype,"ActDataBase");var ActDataItem=function(){function t(t,e,i,n){void 0===t&&(t=null),void 0===e&&(e=ActRewardState.NotReached),void 0===i&&(i=0),void 0===n&&(n=ActOpenState.Unenabled),this.status=ActRewardState.NotReached,this.config=null,this.actId=0,this.actState=ActOpenState.Unenabled,this.config=t,this.status=e,this.actId=i,this.actState=n
}return Object.defineProperty(t.prototype,"sortStates",{get:function(){return this.status==ActRewardState.Geted?0:1},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"level",{get:function(){return this.config.level},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"index",{get:function(){return this.config.index},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"day",{get:function(){return this.config.day},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"power",{get:function(){return this.config.power},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"number",{get:function(){return this.config.number},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"second",{get:function(){return this.config.second},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"floor",{get:function(){return this.config.floor},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"consume",{get:function(){return this.config.consume},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"dabiao",{get:function(){return this.config.condition},enumerable:!0,configurable:!0}),t}();__reflect(ActDataItem.prototype,"ActDataItem");var ShenmoLevelPanel=function(t){function e(){var e=t.call(this)||this;return e.helpId=70,e.imgBg.source="shenmo_zycs_bg2_jpg",e}return __extends(e,t),e.prototype.open=function(){t.prototype.open.call(this),this.addLsn(ShouHuNewSys.ins().patchShenmoLevelUp,this.updateLevelUp),this.addLsn(SkillSys.ins().patchSkillPassivityUp,this.updateSkill)},e.prototype.getModel=function(){var t=Cfg.getConfig(ShenmoHuanhuaBaseConfig,this.dataModel.useId).uibody;return[t]},e.prototype.onClick=function(t){switch(t.currentTarget){case this.btnSend:GFunc.checkConsumeEnough(GFunc.creatRewardDataById(this.dataModel.getLevelitemid(),1))&&ShouHuNewSys.ins().sendShenmoLevelUp();break;case this.helpBtn:openWin(HelpWin,Cfg.getConfig(HelpInfoConfig,this.helpId).text)}},e.prototype.autoUp=function(){GFunc.checkConsumeEnough(GFunc.creatRewardDataById(this.dataModel.getLevelitemid(),1))?this.isChanging||ShouHuNewSys.ins().sendShenmoLevelUp():this.longPressBtnUp.stop()},e.getTitle=function(){return"btz_zycs_rw"},e.getSysId=function(){return 218},e}(DamonLevelPanel);__reflect(ShenmoLevelPanel.prototype,"ShenmoLevelPanel"),window.ShenmoLevelPanel=ShenmoLevelPanel;var ShenmoMoZhenPanel=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.helpId=87,e}return __extends(e,t),e.prototype.open=function(){t.prototype.open.call(this),this.addLsn(ShouHuNewSys.ins().patchShenmoMoZhenUp,this.updateHuanHuaUp),this.addLsn(ShouHuNewSys.ins().patchShenmoMoZhenHuanHua,this.updateHuanHua)},e.prototype.getNameRes=function(){return"shenmo_zycs_mz"+this.data.id},e.prototype.onClick=function(t){switch(t.currentTarget){case this.btnSend:if(this.data.isMax())return void showtipsFail(Lang.common_str38);var e=(Actor.ins().job,GFunc.getItemDataRewardByJob(this.data.getConsume()));GFunc.checkConsumeEnough(e)&&ShouHuNewSys.ins().sendShenmoMoZhenUp(this.data.id);break;case this.btnHuanHua:ShouHuNewSys.ins().sendShenmoMoZhenHuanHua(this.data.id);break;case this.btnAttr:openWin(ComAttrWin,this.dataModel.getMoZhenDatasAll(),ComAttrTitleEnum.ShenmoMoZhen);break;case this.helpBtn:openWin(HelpWin,Cfg.getConfig(HelpInfoConfig,this.helpId).text)}},e.getSysId=function(){return 305},e}(DamonMoZhenPanel);__reflect(ShenmoMoZhenPanel.prototype,"ShenmoMoZhenPanel"),window.ShenmoMoZhenPanel=ShenmoMoZhenPanel;var ShenmoStagePanel=function(t){function e(){var e=t.call(this)||this;return e.helpId=71,e.setSkinPart("skillItem0",new ShenMoSkillItem),e.setSkinPart("skillItem1",new ShenMoSkillItem),e.imgBg.source="shenmo_zycs_bg2_jpg",e.groupSkill.visible=!0,e}return __extends(e,t),e.prototype.open=function(){t.prototype.open.call(this),this.addClickE(this.skillItem0,this.onClick),this.addClickE(this.skillItem1,this.onClick),this.addLsn(ShouHuNewSys.ins().patchShenmoStageUp,this.updatePanelUp),this.addLsn(ShouHuNewSys.ins().patchShenmoHuanHua,this.updateHuanhua)},e.prototype.updataMC=function(){t.prototype.updataMC.call(this);var e=Cfg.getConfig(ShenmoHuanhuaBaseConfig,this.curStage);this.skillItem0.data=Cfg.getConfig(SkillsConfig,e.skillid[0]),this.skillItem1.data=Cfg.getConfig(SkillsConfig,e.skillid[1])},e.prototype.getModel=function(){var t=Cfg.getConfig(ShenmoHuanhuaBaseConfig,this.curStage),e=t.uibody,i=t.name;return this.imgStage=i,[e]},e.prototype.getNameRes=function(){return"shenmo_zycs__sm"+this.curStage},e.prototype.updateConsumeZhiSheng=function(t){t.cfg.type==ItemType.SMSJS&&this.updateZhiSheng()},e.prototype.onClick=function(t){switch(t.currentTarget){case this.btnSend:GFunc.checkConsumeEnough(GFunc.creatRewardDataById(this.dataModel.getStageitemid(),1))&&ShouHuNewSys.ins().sendShenmoStageUp();break;case this.btnGengHuan:ShouHuNewSys.ins().sendShenmoHuanHua(this.curStage);break;case this.btnHuanHua:openWin(ShouHuHuanHuaWin,ShouHuHuanHuaWin.getTabIndexbyPanel(ShenmoHuanHuaPanel));break;case this.skillItem0:case this.skillItem1:var e=t.currentTarget.data,i=new EntityBianshenData;i.bianshenId=this.curStage,i.type=EntityType.BIANSHEN,openWin(ShenMoEntityPlayWin,e,i);break;case this.btnUseZhiSheng:var n=this.itemZhiSheng.data;ShouHuNewSys.ins().sendShenmoUseZhiSheng(Cfg.getConfig(ShenmoHuanhuaBaseConfig,CondType.Equal,ShenmoHuanhuaBaseConfig.stoneid,n.id).id)}},e.prototype.autoUp=function(){GFunc.checkConsumeEnough(GFunc.creatRewardDataById(this.dataModel.getStageitemid(),1))?ShouHuNewSys.ins().sendShenmoStageUp():this.longPressBtnUp.stop()},e.getTitle=function(){return"btz_zycs_rw"},e.getSysId=function(){return 218},e}(DamonStagePanel);__reflect(ShenmoStagePanel.prototype,"ShenmoStagePanel"),window.ShenmoStagePanel=ShenmoStagePanel;var ShenmoYinJiPanel=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.helpId=73,e}return __extends(e,t),e.prototype.open=function(){t.prototype.open.call(this),this.addLsn(ShouHuNewSys.ins().patchShenmoYinJiUp,this.updatePanel)},e.prototype.sendPack=function(){ShouHuNewSys.ins().sendShenmoYinJiUp(this.data.id)},e.prototype.getComAttrTitleEnum=function(){return ComAttrTitleEnum.ShenmoYinJi},e.getSysId=function(){return 302},e}(DamonYinJiPanel);__reflect(ShenmoYinJiPanel.prototype,"ShenmoYinJiPanel"),window.ShenmoYinJiPanel=ShenmoYinJiPanel;var YongbingLevelPanel=function(t){function e(){var e=t.call(this)||this;return e.helpId=59,e.imgBg.source="yb_zycs_bg2_jpg",e}return __extends(e,t),e.prototype.open=function(){t.prototype.open.call(this),this.addLsn(ShouHuNewSys.ins().patchYongbingLevelUp,this.updateLevelUp),this.addLsn(SkillSys.ins().patchSkillPassivityUp,this.updateSkill)},e.prototype.getModel=function(){var t=Cfg.getConfig(YongbingHuanhuaBaseConfig,this.dataModel.useId).uibody;return[t]},e.prototype.onClick=function(t){switch(t.currentTarget){case this.btnSend:GFunc.checkConsumeEnough(GFunc.creatRewardDataById(this.dataModel.getLevelitemid(),1))&&ShouHuNewSys.ins().sendYongbingLevelUp();break;case this.helpBtn:openWin(HelpWin,Cfg.getConfig(HelpInfoConfig,this.helpId).text)}},e.prototype.autoUp=function(){GFunc.checkConsumeEnough(GFunc.creatRewardDataById(this.dataModel.getLevelitemid(),1))?this.isChanging||ShouHuNewSys.ins().sendYongbingLevelUp():this.longPressBtnUp.stop()},e.getTitle=function(){return"btz_zycs_rw"},e.getSysId=function(){return 217},e}(DamonLevelPanel);__reflect(YongbingLevelPanel.prototype,"YongbingLevelPanel"),window.YongbingLevelPanel=YongbingLevelPanel;var YongbingMoZhenPanel=function(t){function e(){var e=t.call(this)||this;return e.helpId=63,e}return __extends(e,t),e.prototype.open=function(){t.prototype.open.call(this),this.addLsn(ShouHuNewSys.ins().patchYongbingMoZhenUp,this.updateHuanHuaUp),this.addLsn(ShouHuNewSys.ins().patchYongbingMoZhenHuanHua,this.updateHuanHua)},e.prototype.getNameRes=function(){return""+this.data.id},e.prototype.onClick=function(t){switch(t.currentTarget){case this.btnSend:if(this.data.isMax())return void showtipsFail(Lang.common_str38);var e=(Actor.ins().job,GFunc.getItemDataRewardByJob(this.data.getConsume()));GFunc.checkConsumeEnough(e)&&ShouHuNewSys.ins().sendYongbingMoZhenUp(this.data.id);break;case this.btnHuanHua:ShouHuNewSys.ins().sendYongbingMoZhenHuanHua(this.data.id);break;case this.btnAttr:openWin(ComAttrWin,this.dataModel.getMoZhenDatasAll(),ComAttrTitleEnum.YongbingMoZhen);break;case this.helpBtn:openWin(HelpWin,Cfg.getConfig(HelpInfoConfig,this.helpId).text)}},e.getSysId=function(){return 293},e}(DamonMoZhenPanel);__reflect(YongbingMoZhenPanel.prototype,"YongbingMoZhenPanel"),window.YongbingMoZhenPanel=YongbingMoZhenPanel;var YongbingStagePanel=function(t){function e(){var e=t.call(this)||this;return e.helpId=60,e.imgBg.source="yb_zycs_bg2_jpg",e}return __extends(e,t),e.prototype.open=function(){t.prototype.open.call(this),this.addLsn(ShouHuNewSys.ins().patchYongbingStageUp,this.updatePanelUp),this.addLsn(ShouHuNewSys.ins().patchYongbingHuanHua,this.updateHuanhua)},e.prototype.getModel=function(){var t=Cfg.getConfig(YongbingHuanhuaBaseConfig,this.curStage),e=t.uibody,i=t.name;return this.imgStage=i,[e]},e.prototype.getNameRes=function(){return"yb_zycs_"+this.curStage},e.prototype.onClick=function(t){switch(t.currentTarget){case this.btnSend:GFunc.checkConsumeEnough(GFunc.creatRewardDataById(this.dataModel.getStageitemid(),1))&&ShouHuNewSys.ins().sendYongbingStageUp();break;case this.btnGengHuan:ShouHuNewSys.ins().sendYongbingHuanHua(this.curStage);break;case this.btnHuanHua:openWin(ShouHuHuanHuaWin,ShouHuHuanHuaWin.getTabIndexbyPanel(YongbingHuanHuaPanel));break;case this.btnUseZhiSheng:var e=this.itemZhiSheng.data;ShouHuNewSys.ins().sendYongbingUseZhiSheng(Cfg.getConfig(YongbingHuanhuaBaseConfig,CondType.Equal,YongbingHuanhuaBaseConfig.stoneid,e.id).id)}},e.prototype.autoUp=function(){GFunc.checkConsumeEnough(GFunc.creatRewardDataById(this.dataModel.getStageitemid(),1))?ShouHuNewSys.ins().sendYongbingStageUp():this.longPressBtnUp.stop()},e.prototype.updateConsumeZhiSheng=function(t){t.cfg.type==ItemType.YBSJS&&this.updateZhiSheng()},e.getTitle=function(){return"btz_zycs_rw"},e.getSysId=function(){return 217},e}(DamonStagePanel);__reflect(YongbingStagePanel.prototype,"YongbingStagePanel"),window.YongbingStagePanel=YongbingStagePanel;var YongbingYinJiPanel=function(t){function e(){var e=t.call(this)||this;return e.helpId=62,e}return __extends(e,t),e.prototype.open=function(){t.prototype.open.call(this),this.addLsn(ShouHuNewSys.ins().patchYongbingYinJiUp,this.updatePanel)},e.prototype.sendPack=function(){ShouHuNewSys.ins().sendYongbingYinJiUp(this.data.id)},e.prototype.getComAttrTitleEnum=function(){return ComAttrTitleEnum.YongbingYinJi},e.getSysId=function(){return 292},e}(DamonYinJiPanel);__reflect(YongbingYinJiPanel.prototype,"YongbingYinJiPanel"),window.YongbingYinJiPanel=YongbingYinJiPanel;var AoyiPanel=function(t){function e(){var e=t.call(this)||this;return e.tabTypes=[],e.skinName="AoyiPanelEUI",e.list.itemRenderer=AoyiItem,e.list.dataProvider=e.listData=new eui.ArrayCollection,e.tab.itemRenderer=BaseTabBtn4,e.tab.dataProvider=e.tabData=new eui.ArrayCollection,e}return __extends(e,t),e.prototype.open=function(){t.prototype.open.call(this),this.addItemTapE(this.tab,this.onTabClick),this.addClickE(this.list,this.onItemClick),this.addLsn(SkillSys.ins().patchSkillPassivityUp,this.updatePanel),this.addLsn(RpSys.ins().patchRp,this.updateRp),this.infoPanel()},e.prototype.updateRp=function(t){if(!t||t.check(this))for(var i=0;i<this.tab.numChildren;i++){var n=this.tab.getChildAt(i);n.showRedPoint(RpSys.ins().getData(SkillWin,SkillMainPanel,e,this.tabTypes[i]))}},e.prototype.infoPanel=function(){var t=[];this.tabTypes=SkillSys.ins().aoyiModel.getTabTypes();for(var i=0,n=!1,a=0;a<this.tabTypes.length;a++)n||(n=RpSys.ins().getData(SkillWin,SkillMainPanel,e,this.tabTypes[a]),n&&(i=a)),t.push("skay_zycs_"+this.tabTypes[a]);this.tabData.source=t,this.tab.selectedIndex=i,this.updatePanel(),this.updateRp()},e.prototype.updatePanel=function(){this.listData.source=SkillSys.ins().aoyiModel.getAoyiDatasByType(this.tabTypes[this.tab.selectedIndex])},e.prototype.onTabClick=function(t){this.scroller.stopAnimation(),this.list.scrollV=0,this.updatePanel()},e.prototype.onItemClick=function(t){if(t.target&&"AoyiItem.imgIcon"==t.target.name){var e=t.target.parent.data;!e.isAct()&&GFunc.checkConsumeEnough(e.getConsume())&&SkillSys.ins().sendSkillPassivityUp(e.skillid)}},e.getTitle=function(){return"btz_zycs_jn"},e.getTabTitle=function(){return Lang.btn_ay},e.getSysId=function(){return 230},e}(BasePanel);__reflect(AoyiPanel.prototype,"AoyiPanel"),window.AoyiPanel=AoyiPanel;var SkillPanel=function(t){function e(){var e=t.call(this)||this;return e.helpId=75,e.skillItems=[],e.curIndex=0,e.oneKeyCDTick=0,e.initUI(),e}return __extends(e,t),e.prototype.initUI=function(){this.skinName="SkillPanelEUI";for(var t=0;8>t;t++){var e=new SkillPanelItem;this.setSkinPart("skillItem"+t,e),this.skillItems[t]=e}this.listTab.itemRenderer=BaseTabBtn3,this.setRedPointHead(SkillWin)},e.prototype.open=function(){t.prototype.open.call(this),this.addClickE(this.btnUp,this.onClick),this.addClickE(this.btnOneKey,this.onClick),this.addClickE(this.helpBtn,this.onClick),this.addLsn(SkillSys.ins().patchSkillUp,this.onSkillUp),this.addLsn(SkillSys.ins().patchSkillUpOneKey,this.onOneKey),this.addLsn(LogicSys.ins().patchCurrency,this.onConsume),this.addLsn(RpSys.ins().patchRp,this.updateRp);for(var e=0;e<this.skillItems.length;e++){var i=this.skillItems[e];this.addClickE(i,this.onListItemTap),i.data=SkillSys.ins().skillDatas[e]}this.setNewIndex(this.getDefaultIndex()),this.updateList(),this.onConsume(),this.updateRp(),this.updateDesc(),this.updatePower()},e.prototype.getDefaultIndex=function(){for(var t=0,e=Number.MAX_VALUE,i=SkillSys.ins().skillDatas,n=0;n<i.length;n++){var a=i[n];a.isAct&&a.level<e&&(e=i[n].level,t=n)}return t},e.prototype.updateList=function(){for(var t=0;t<this.skillItems.length;t++){var e=this.skillItems[t];e.data=SkillSys.ins().getSkillDataByIndex(t)}},e.prototype.updateRp=function(t){if(void 0===t&&(t=null),!t||t.check(e)){for(var i=0;i<this.skillItems.length;i++){var n=this.skillItems[i].data;n&&this.skillItems[i].setRedPoint(RpSys.ins().getData(SkillWin,SkillMainPanel,e,n.skillId))}this.btnOneKey.redPoint.visible=RpSys.ins().getData(SkillWin,SkillMainPanel,e)}},e.prototype.setNewIndex=function(t){this.skillItems[this.curIndex].setSelect(!1),this.curIndex=t,this.skillItems[this.curIndex].setSelect(!0)},e.prototype.onListItemTap=function(t){var e=this.skillItems.indexOf(t.currentTarget);e!=this.curIndex&&(this.setNewIndex(e),this.updateDesc(),this.onConsume())},e.prototype.onSkillUp=function(t){var e=this.skillItems[this.curIndex];t.skillId==e.data.skillId&&(e.data=t,this.updateDesc(),this.updatePower(),this.onConsume())},e.prototype.onOneKey=function(){this.updateList(),this.onConsume(),this.updateRp(),this.updateDesc(),this.updatePower()},e.prototype.updateDesc=function(){var t=this.skillItems[this.curIndex].data;t.isAct||(t=t.clone(),t.level+=1),this.labelSkillName.text=t.skillConfig.name+" Lv."+t.level;var e=t.skillConfig.desc;e=e.replace("{a}",(t.skillLevelConfig.args.a/100).toFixed(0)+"%"),e=e.replace("{b}",""+t.skillLevelConfig.args.b),e=e.replace("{c}",""+t.skillLevelConfig.attr[0].value),this.labelDesc.textFlow=StrUtil.toTF(e)},e.prototype.updatePower=function(){for(var t=SkillSys.ins().skillDatas,e=0,i=0,n=t;i<n.length;i++){var a=n[i];e+=a.power}this.bmpLabelPower.text=e.toFixed(0)},e.prototype.onConsume=function(t){if(void 0===t&&(t=null),!t||t.type==CurType.talentValue){var e=this.skillItems[this.curIndex].data,i=e.isConsumeEnough()?5767068:13967392;this.labelConsume.textFlow=addColorTF(Actor.ins().getCurrency(CurType.talentValue)+"/"+e.skillLevelConfig.talentvalue,i)}},e.prototype.onClick=function(t){switch(t.currentTarget){case this.btnOneKey:var e=Timer.ins().getEgretTimer();if(e>this.oneKeyCDTick){this.oneKeyCDTick=e+200;for(var i=!1,n=!1,a=Number.MAX_VALUE,o=0,s=this.skillItems;o<s.length;o++){var r=s[o],u=r.data,h=u.canTisheng();h&&(n=n||u.isConsumeEnough(),a=Math.min(u.skillLevelConfig.talentvalue,a),i=!0)}i?n?SkillSys.ins().sendSkillUpOneKey():GFunc.checkCurrency(CurType.talentValue,a):showtipsFail("请提升法器觉醒等级！")}break;case this.btnUp:var l=this.skillItems[this.curIndex].data;l.isAct?l.isMax?showtipsFail("请提升法器觉醒等级！"):GFunc.checkCurrency(CurType.talentValue,l.skillLevelConfig.talentvalue)&&SkillSys.ins().sendSkillUp(this.curIndex):showtipsFail("主线任务开启！");break;case this.helpBtn:openWin(HelpWin,Cfg.getConfig(HelpInfoConfig,this.helpId).text)}},e.prototype.getSkillIcon=function(t){return this.skillItems[t].getIcon()},e.prototype.getActBtn=function(){return this.btnUp},e.prototype.getBtnOneKey=function(){return this.btnOneKey},e.getTitle=function(){return"btz_zycs_jn"},e.getTabTitle=function(){return Lang.btn_jn},e.getSysId=function(){return 214},e}(BasePanel);__reflect(SkillPanel.prototype,"SkillPanel"),window.SkillPanel=SkillPanel;var MeilinFuHunPanel=function(t){function e(){var e=t.call(this)||this;return e.helpId=69,e.imgBg.source="ml_zycs_bg2_jpg",e}return __extends(e,t),e.prototype.open=function(){t.prototype.open.call(this),this.addLsn(SqXySys.ins().patchMeilinFuHunUp,this.updatePanel)},e.prototype.sendPack=function(){SqXySys.ins().sendMeilinFuHunUp(this.data.id)},e.getSysId=function(){return 213},e}(ShenQiFuHunPanel);__reflect(MeilinFuHunPanel.prototype,"MeilinFuHunPanel"),window.MeilinFuHunPanel=MeilinFuHunPanel;var MeilinHuanHuaPanel=function(t){function e(){var e=t.call(this)||this;return e.helpId=68,e.imgBg.source="ml_zycs_bg1_jpg",e}return __extends(e,t),e.prototype.open=function(){t.prototype.open.call(this),this.addLsn(SqXySys.ins().patchMeilinHuanHuaUp,this.updateHuanHuaUp),this.addLsn(SqXySys.ins().patchMeilinHuanHua,this.updateHuanHua)},e.prototype.getNameRes=function(t){return"ml_zycs_"+this.data.id},e.prototype.getModel=function(){var t=Cfg.getConfig(MeilinAppearanceConfig,this.data.getApperaenceId()).appearance;return[ResMgr.getUIMeilinRes(t)]},e.prototype.onClick=function(t){switch(t.currentTarget){case this.btnSend:var e=GFunc.getItemDataRewardByJob(this.data.getConsume());GFunc.checkConsumeEnough(e)&&SqXySys.ins().snedMeilinHuanHuaUp(this.data.id);break;case this.btnHuanHua:SqXySys.ins().sendMeilinHuanHua(this.data.id)}},e.prototype.autoUp=function(){var t=GFunc.getItemDataRewardByJob(this.data.getConsume());GFunc.checkConsumeEnough(t)?SqXySys.ins().snedMeilinHuanHuaUp(this.data.id):this.longPressBtnUp.stop()},e.getTitle=function(){return"btz_zycs_rw"},e.getSysId=function(){return 213},e}(ShenQiHuanHuaPanel);__reflect(MeilinHuanHuaPanel.prototype,"MeilinHuanHuaPanel"),window.MeilinHuanHuaPanel=MeilinHuanHuaPanel;var MeilinLevelPanel=function(t){function e(){var e=t.call(this)||this;return e.helpId=67,e.imgBg.source="ml_zycs_bg1_jpg",e}return __extends(e,t),e.prototype.open=function(){t.prototype.open.call(this),this.addLsn(SqXySys.ins().patchMeilinUp,this.updatePanel)},e.prototype.getModel=function(){var t=Cfg.getConfig(MeilinAppearanceConfig,this.dataModel.getApperaenceId()).appearance;return[ResMgr.getUIMeilinRes(t)]},e.prototype.onClick=function(t){switch(t.currentTarget){case this.btnSend:GFunc.checkConsumeEnough(this.dataModel.getLevelConsume())&&(SqXySys.ins().sendMeilinUp(),this.playEff("pubsjeff"));break;case this.helpBtn:openWin(HelpWin,Cfg.getConfig(HelpInfoConfig,this.helpId).text)}},e.prototype.autoUp=function(){GFunc.checkConsumeEnough(this.dataModel.getLevelConsume())?(SqXySys.ins().sendMeilinUp(),this.playEff("pubsjeff")):this.longPressBtnUp.stop()},e.getTitle=function(){return"btz_zycs_rw"},e.getSysId=function(){return 213},e}(ShenQiLevelPanel);__reflect(MeilinLevelPanel.prototype,"MeilinLevelPanel"),window.MeilinLevelPanel=MeilinLevelPanel;var ActBasePanel=function(t){function e(){var e=t.call(this)||this;return e.actId=0,e}return __extends(e,t),e.prototype.open=function(e){void 0===e&&(e=null),t.prototype.open.call(this),this.actId=e?e.id:0,this.actBtnCfg=e,this.setImgTitle(),this.setImgBg(),this.actGroup&&(this.actGroup.visible=!urlParam.isShenhe)},e.prototype.setImgTitle=function(){this.imgTitle&&(this.imgTitle.source=""==this.actBtnCfg.imgMiddleTitle?"":"hddt_zycs_"+this.actBtnCfg.imgMiddleTitle)},e.prototype.setImgBg=function(){this.imgBg&&""!=this.actBtnCfg.bg&&(this.imgBg.source="hddt_zycs_"+this.actBtnCfg.bg+"_jpg")},e.prototype.updateData=function(){},e.prototype.updateTime=function(){},e.prototype.isShow=function(){var t=ActSys.ins().getActDataById(this.actId);return t.isSeeActivity()},e}(BasePanel);__reflect(ActBasePanel.prototype,"ActBasePanel"),window.ActBasePanel=ActBasePanel;var GuildBattleGerenScoreRankPanel=function(t){function e(){var e=t.call(this)||this;return e.skinName="GuildBattleGerenScoreRankPanelEUI",e.listRank.itemRenderer=GuildBattleGerenScoreRankItem,e.listRank.dataProvider=e.listRankData=new eui.ArrayCollection,e}return __extends(e,t),e.prototype.open=function(){t.prototype.open.call(this),this.addLsn(GuildBattleSys.ins().patchGerenScoreRank,this.updatePanel),GuildBattleSys.ins().sendGerenScoreRank()},e.prototype.updatePanel=function(t){this.listRankData.source=t.datas,this.lbMyRank.textFlow=addColorTF(""+Lang.act_str25+addColor(""+(0==t.myRank?Lang.common_str17:t.myRank),5767068)),this.lbMyScore.textFlow=addColorTF(""+Lang.fb_str199+addColor(""+GFunc.overLength(t.myScore),5767068))},e.getTitle=function(){return"btz_zycs_jfpm"},e.getTabTitle=function(){return"bqz_zycs_jfpm"},e}(BasePanel);__reflect(GuildBattleGerenScoreRankPanel.prototype,"GuildBattleGerenScoreRankPanel"),window.GuildBattleGerenScoreRankPanel=GuildBattleGerenScoreRankPanel;var BravePanel=function(t){function e(){var e=t.call(this)||this;return e.helpId=39,e.MCmonster=new MC,e.initUI(),e}return __extends(e,t),e.prototype.initUI=function(){this.skinName="BravePanelSkin",this.setSkinPart("priceIcon",new PriceIcon),this.priceIcon.setType(CurType.yb),this.list.itemRenderer=BravePanelItem,this.list.dataProvider=this.listData=new eui.ArrayCollection,this.listReward.itemRenderer=ItemBaseReward,this.listReward.dataProvider=this.listRewardData=new eui.ArrayCollection,this.labelSetting.textFlow=addColorTF('<a href="event:"><u>'+this.labelSetting.text+"</u></a>"),this.barhp.maximum=100,this.groupBoss.addChild(this.MCmonster),this.challengeBtn.redPoint.visible=!0},e.prototype.open=function(){t.prototype.open.call(this),FbSys.ins().sendBraveListInfo(),FbSys.ins().sendBraveInfo(),this.addLsn(FbSys.ins().patchBraveListInfo,this.updatePanel),this.addLsn(FbSys.ins().patchBraveInfo,this.updatePanel),this.addLsn(FbSys.ins().patchBraveHpChange,this.updateStatus),this.addLsn(FbSys.ins().patchBraveHpChange,this.updateListStatus),this.addLsn(RpSys.ins().patchRp,this.updateRp),this.addClickE(this,this.onClick),this.addItemTapE(this.list,this.onListItemTap),this.list.selectedIndex=0,this.list.useVirtualLayout=!1,this.updatePanel(),Timer.ins()["do"](0,1e3,0,this.updataTime,this,TimerType.LAST)},e.prototype.updataTime=function(){this.updateListTimer()},e.prototype.updateRp=function(t){if(!t||t.check(e))for(var i=this.list.numElements,n=0;i>n;n++){var a=this.list.getElementAt(n);if(a){var o=a.data;o&&!o.isDie&&a.updateRedPoint()}}},e.prototype.updatePanel=function(){for(var t=FbSys.ins().braveModel.getOpenBossArray(),e=[],i=[],n=0,a=t;n<a.length;n++){var o=a[n];o.chaoguoLevel?i.push(o):e.push(o)}SortUtil.sortOn(e,["isopenNumber","isDieNumber","getLv"],[SortType.down,SortType.down,SortType.up]),SortUtil.sortOn(i,["isopenNumber","isDieNumber","getLv"],[SortType.down,SortType.down,SortType.up]),t=e.concat(i),this.listData.source=t,this.curData=this.list.selectedItem,this.curData&&this.updateData(this.curData)},e.prototype.updateData=function(t){this.lbGuiShuName.text=Lang.brave_str1+(""+(""==t.belongName?Lang.common_str64:t.belongName)),this.listRewardData.source=t.config.desc,this.lbName.text=t.monsterName+" "+GFunc.getZSNameBydb(t.config.zslevel),this.barhp.value=t.hpPecent;var e=Cfg.getConfig(MonsterModelConfig,t.monsterModel),i=ResMgr.getMonsterSource(e.appearance,5,EntityAction.STAND);this.MCmonster.playFile(i,-1),this.MCmonster.scaleY=e.scale,this.MCmonster.scaleX=-1*e.scale,this.updateStatus(),this.updateBossHP()},e.prototype.updateBossHP=function(){this.barhp.value=this.curData.hpPecent},e.prototype.updateStatus=function(){var t=FbSys.ins().braveModel;if(this.curData.isopen?this.curData.chaoguoLevel?this.currentState="noChallenge":this.curData.isDie?this.currentState="die":t.getCount()?this.currentState="challenge":t.isBuy()?this.currentState="buy":this.currentState="nobuy":this.currentState="level",this.curData.isopen)if(this.curData.isDie)Timer.ins()["do"](0,1e3,0,this.updateDieTime,this,TimerType.LAST);else if(t.getCount())this.labelCount.textFlow=addColorTF(""+Lang.fb_str204+t.getCount()+"/"+t.getMaxCount(),5949490);else if(t.isBuy())this.priceIcon.setPrice(t.CommonConfig().price);else if(Actor.ins().sVipLv>=Cfg.getMaxConfig(VipConfig).lv)this.labelNoBuy.text=Lang.brave_str2;else{var e=Cfg.getNextVipExp(FbGroup.Brave);e?this.labelNoBuy.text=Lang.brave_str3.replace("$svip$",""+e):this.labelNoBuy.text=Lang.brave_str4}else this.lbLv.text=""+Lang.brave_str7+GFunc.getZSNameBydb(this.curData.config.zslevel)+Lang.common_str43},e.prototype.updateDieTime=function(){var t=this.curData.leftReviveTime;t>0&&this.curData.isDie?this.timeTxt.text=Lang.fb_str101.replace("$time$",""+getFormatTime(Math.floor(t/1e3),"hh:mm:ss")):Timer.ins().remove(this.updateDieTime,this)},e.prototype.updateListStatus=function(t){for(var e=this.list.numElements,i=0;e>i;i++){var n=this.list.getElementAt(i),a=n.data;n&&a.id==t&&n.updateTime()}this.updateBossHP()},e.prototype.updateListTimer=function(){for(var t=this.list.numElements,e=0;t>e;e++){var i=this.list.getElementAt(e);if(i){var n=i.data;n.isDie&&i.updateTime()}}},e.prototype.onListItemTap=function(t){var e=t.item;this.curData.id!=e.id&&(this.curData=e,this.updateData(this.curData))},e.prototype.onClick=function(t){switch(t.target){case this.challengeBtn:FbSys.ins().braveModel.getCount()>0?FbSys.ins().braveModel.leftCdTime<=0?(FbSys.ins().sendBraveFight(this.curData.id),closeWin(BossWin)):showtipsFail(Lang.fb_str11.replace("$second$",""+Math.ceil(FbSys.ins().braveModel.leftCdTime/1e3))):showtipsFail(Lang.brave_str5);break;case this.btnBuy:var e=FbSys.ins().braveModel.CommonConfig().price;if(GFunc.checkCurrency(CurType.yb,e)){var i=new PopupPriceData(Lang.brave_str6);i.priceValue=e,i.priceType=CurType.yb,i.setFunction(this,function(){FbSys.ins().sendBravebuyCount()}),openWin(CommonTipsWinNew,i)}break;case this.labelSetting:openWin(BraveRemindWin)}},e.getSysId=function(){return 341},e.getTitle=function(){return"btz_zycs_bssd"},e.getTabTitle=function(){return"fb_zycs_bssd"},e}(BasePanel);__reflect(BravePanel.prototype,"BravePanel"),window.BravePanel=BravePanel;var SzFuHunPanel=function(t){function e(){var e=t.call(this)||this;return e.helpId=66,e.imgBg.source="sz_zycs_bg2_jpg",e}return __extends(e,t),e.prototype.open=function(){t.prototype.open.call(this),this.addLsn(SqXySys.ins().patchSzFuHunUp,this.updatePanel)},e.prototype.sendPack=function(){SqXySys.ins().sendSzFuHunUp(this.data.id)},e.getSysId=function(){return 212},e}(ShenQiFuHunPanel);__reflect(SzFuHunPanel.prototype,"SzFuHunPanel"),window.SzFuHunPanel=SzFuHunPanel;var SzHuanHuaPanel=function(t){function e(){var e=t.call(this)||this;return e.helpId=65,e.imgBg.source="sz_zycs_bg1_jpg",e}return __extends(e,t),e.prototype.open=function(){t.prototype.open.call(this),this.addLsn(SqXySys.ins().patchSzHuanHuaUp,this.updateHuanHuaUp),this.addLsn(SqXySys.ins().patchSzHuanHua,this.updateHuanHua)},e.prototype.getNameRes=function(t){return"sz_zycs_"+Actor.ins().job+t},e.prototype.getModel=function(){return[Cfg.getConfig(SzHuanhuaBaseConfig,this.data.id).uibody[Actor.ins().sex]]},e.prototype.onClick=function(t){switch(t.currentTarget){case this.btnSend:var e=GFunc.getItemDataRewardByJob(this.data.getConsume());GFunc.checkConsumeEnough(e)&&SqXySys.ins().snedSzHuanHuaUp(this.data.id);break;case this.btnHuanHua:SqXySys.ins().sendSzHuanHua(this.data.id)}},e.prototype.autoUp=function(){var t=GFunc.getItemDataRewardByJob(this.data.getConsume());GFunc.checkConsumeEnough(t)?SqXySys.ins().snedSzHuanHuaUp(this.data.id):this.longPressBtnUp.stop()},e.getTitle=function(){return"btz_zycs_rw"},e.getSysId=function(){return 212},e}(ShenQiHuanHuaPanel);__reflect(SzHuanHuaPanel.prototype,"SzHuanHuaPanel"),window.SzHuanHuaPanel=SzHuanHuaPanel;var SzLevelPanel=function(t){function e(){var e=t.call(this)||this;return e.helpId=64,e.imgBg.source="sz_zycs_bg1_jpg",e}return __extends(e,t),e.prototype.open=function(){t.prototype.open.call(this),this.addLsn(SqXySys.ins().patchSzUp,this.updatePanel)},e.prototype.getModel=function(){return[Cfg.getConfig(SzHuanhuaBaseConfig,this.dataModel.huanHuaId).uibody[Actor.ins().sex]]},e.prototype.onClick=function(t){switch(t.currentTarget){case this.btnSend:GFunc.checkConsumeEnough(this.dataModel.getLevelConsume())&&(SqXySys.ins().sendSzUp(),this.playEff("pubsjeff"));break;case this.helpBtn:openWin(HelpWin,Cfg.getConfig(HelpInfoConfig,this.helpId).text)}},e.prototype.autoUp=function(){GFunc.checkConsumeEnough(this.dataModel.getLevelConsume())?(SqXySys.ins().sendSzUp(),this.playEff("pubsjeff")):this.longPressBtnUp.stop()},e.getTitle=function(){return"btz_zycs_rw"},e.getSysId=function(){return 212},e}(ShenQiLevelPanel);__reflect(SzLevelPanel.prototype,"SzLevelPanel"),window.SzLevelPanel=SzLevelPanel;var WingFuHunPanel=function(t){function e(){var e=t.call(this)||this;return e.helpId=58,e.imgBg.source="wing_zycs_bg2_jpg",e}return __extends(e,t),e.prototype.open=function(){t.prototype.open.call(this),this.addLsn(SqXySys.ins().patchWingFuHunUp,this.updatePanel)},e.prototype.sendPack=function(){SqXySys.ins().sendWingFuHunUp(this.data.id)},e.getSysId=function(){return 211},e}(ShenQiFuHunPanel);__reflect(WingFuHunPanel.prototype,"WingFuHunPanel"),window.WingFuHunPanel=WingFuHunPanel;var WingHuanHuaPanel=function(t){function e(){var e=t.call(this)||this;return e.helpId=57,e.imgBg.source="wing_zycs_bg1_jpg",e}return __extends(e,t),e.prototype.open=function(){t.prototype.open.call(this),this.addLsn(SqXySys.ins().patchWingHuanHuaUp,this.updateHuanHuaUp),this.addLsn(SqXySys.ins().patchWingHuanHua,this.updateHuanHua)},e.prototype.getNameRes=function(t){return"chibang_zycs_"+Actor.ins().job+t},e.prototype.getModel=function(){var t=Cfg.getConfig(WingAppearanceConfig,this.data.getApperaenceId(Actor.ins().job)).appearance;return[ResMgr.getWingUIEFFResource(t)]},e.prototype.onClick=function(t){switch(t.currentTarget){case this.btnSend:var e=GFunc.getItemDataRewardByJob(this.data.getConsume());GFunc.checkConsumeEnough(e)&&SqXySys.ins().snedWingHuanHuaUp(this.data.id);break;case this.btnHuanHua:SqXySys.ins().sendWingHuanHua(this.data.id)}},e.prototype.autoUp=function(){var t=GFunc.getItemDataRewardByJob(this.data.getConsume());GFunc.checkConsumeEnough(t)?SqXySys.ins().snedWingHuanHuaUp(this.data.id):this.longPressBtnUp.stop()},e.getTitle=function(){return"btz_zycs_rw"},e.getSysId=function(){return 211},e}(ShenQiHuanHuaPanel);__reflect(WingHuanHuaPanel.prototype,"WingHuanHuaPanel"),window.WingHuanHuaPanel=WingHuanHuaPanel;var WingLevelPanel=function(t){function e(){var e=t.call(this)||this;return e.helpId=56,e.imgBg.source="wing_zycs_bg1_jpg",e}return __extends(e,t),e.prototype.open=function(){t.prototype.open.call(this),this.addLsn(SqXySys.ins().patchWingUp,this.updatePanel)},e.prototype.getModel=function(){var t=Cfg.getConfig(WingAppearanceConfig,this.dataModel.getApperaenceId()).appearance;return[ResMgr.getWingUIEFFResource(t)]},e.prototype.onClick=function(t){switch(t.currentTarget){case this.btnSend:GFunc.checkConsumeEnough(this.dataModel.getLevelConsume())&&(SqXySys.ins().sendWingUp(),this.playEff("pubsjeff"));break;case this.helpBtn:openWin(HelpWin,Cfg.getConfig(HelpInfoConfig,this.helpId).text)}},e.prototype.autoUp=function(){GFunc.checkConsumeEnough(this.dataModel.getLevelConsume())?(SqXySys.ins().sendWingUp(),this.playEff("pubsjeff")):this.longPressBtnUp.stop()
},e.getTitle=function(){return"btz_zycs_rw"},e.getSysId=function(){return 211},e}(ShenQiLevelPanel);__reflect(WingLevelPanel.prototype,"WingLevelPanel"),window.WingLevelPanel=WingLevelPanel;var WCLevelPanel=function(t){function e(){var e=t.call(this)||this;return e.tabIndex=1,e.tabDatas=[],e.datas=[],e.skinName="WCLevelPanelEUI",e.list.itemRenderer=WCLevelItem,e.list.dataProvider=e.listData=new eui.ArrayCollection,e.tab.itemRenderer=WCLevelTabItem,e.tab.dataProvider=e.tabData=new eui.ArrayCollection,e.btnAttr.textFlow=addColorTF(StrUtil.addUnderLine(Lang.common_str116),5767068),e.btnAttr.visible=!1,e}return __extends(e,t),e.prototype.open=function(){t.prototype.open.call(this),this.addItemTapE(this.list,this.onList),this.addItemTapE(this.tab,this.onTab),this.addClickE(this.btnAttr,this.onClickCommon),this.addClickE(this.comDaShi,this.onClickCommon),this.addLsn(WCSys.ins().patchLevelUp,this.updatePanel),this.addLsn(WCSys.ins().patchDashiUp,this.updatePanel),this.addLsn(RpSys.ins().patchRp,this.updateRp),this.infoPanel()},e.prototype.close=function(){t.prototype.close.call(this)},e.prototype.updateRp=function(t){if(!t||t.check(this)){this.comDaShi.redPoint.visible=RpSys.ins().getData(RoleWin,RolePanel,MoJieWin,WCPanel,e,this.tabIndex+1,WCDashiWin),this.list.validateNow();for(var i=0;i<this.list.numChildren;i++){var n=this.list.getChildAt(i);n.updateRadPoint()}this.tab.validateNow();for(var a=0;a<this.tab.numChildren;a++){var o=this.tab.getChildAt(a);o.updateRadPoint()}}},e.prototype.infoPanel=function(){this.tabData.source=this.tabDatas=Cfg.getConfigs(WCQualityConfig),this.updateDefSelect(),this.updatePanel(),this.updateRp()},e.prototype.updateDefSelect=function(){this.tabIndex=0;for(var t=0;t<this.tabDatas.length;t++){var i=RpSys.ins().getData(RoleWin,RolePanel,MoJieWin,WCPanel,e,this.tabDatas[t].type);if(i){this.tabIndex=t;break}}this.tab.selectedIndex=this.tabIndex},e.prototype.updatePanel=function(){var t=this.tabIndex+1;this.datas=WCSys.ins().getLevelDatasByType(t),this.dashiData=WCSys.ins().getDashiDataByType(t),this.currentState=this.dashiData.isMaxRank()?"max":"normal",this.validateNow();var e=WCSys.ins().getPowerByLevelDatas(this.datas)+this.dashiData.genPower();this.power.text=""+e,SortUtil.sortOn(this.datas,["canAct","canUp","level","id"],[SortType.down,SortType.down,SortType.down,SortType.up]),this.listData.source=this.datas;var i=WCSys.ins().getLevelCountByType(t,this.dashiData.getConfig().needlv);this.dashiData.isMaxRank()?this.comDaShi.setData(i,i):this.comDaShi.setData(i,this.dashiData.getConfig().neednumber);var n=Cfg.getConfig(WCQualityConfig,t);this.lbDaShi.text=n.name+"·"+this.dashiData.level+Lang.common_jie;var a=Lang.wc_str3+":"+this.dashiData.getAttrDec()+addColor(" +"+this.dashiData.getConfig().per/100+"%",5767068);this.dashiData.noActRank()&&(a=Lang.wc_str3+":"+this.dashiData.getAttrDec()+addColor(" "+Lang.xh_str9,5767068)),this.lbCuAttr.textFlow=addColorTF(a);var o=addColor("("+i+"/"+this.dashiData.getConfig().neednumber+")",i<this.dashiData.getConfig().neednumber?16658994:5767068);a=Lang.foot_str2+":"+this.dashiData.getDec()+this.dashiData.getConfig().needlv+" "+o,this.lbNextNeed.textFlow=addColorTF(a);var s=Cfg.getNextConfig(WCDashiConfig,t,this.dashiData.level);a=""+this.dashiData.getAttrDec()+(" +"+s.per/100+"%")+addColor("("+Lang.common_str24+")",16658994),this.lbNextAttr.textFlow=addColorTF(a)},e.prototype.onList=function(t){var e=t.item;openWin(WCLevelTipsWin,e)},e.prototype.onTab=function(t){this.tabIndex!=t.itemIndex&&(this.tabIndex=t.itemIndex,this.list.scrollV=0,this.updatePanel(),this.updateRp())},e.prototype.onClickCommon=function(t){switch(t.currentTarget){case this.btnAttr:openWin(ComAttrWin,WCSys.ins().getLevelDatasAll(this.datas));break;case this.comDaShi:openWin(WCDashiWin,this.dashiData)}},e.getTitle=function(){return"btz_zycs_msbd"},e.getTabTitle=function(){return"宝 典"},e.getSysId=function(){return 357},e}(BasePanel);__reflect(WCLevelPanel.prototype,"WCLevelPanel"),window.WCLevelPanel=WCLevelPanel;var WCStagePanel=function(t){function e(){var e=t.call(this)||this;return e.longPressBtnUp=new LongPress,e.skinName="WCStagePanelEUI",e.starExp=new Star(StarData.F_5()),e.starExp.x=30,e.groupStar.addChild(e.starExp),e.starExp.setMaxStar(10),e.lbAddLv.visible=!1,e.mc=new MC,e.groupMC.addChild(e.mc),e}return __extends(e,t),e.prototype.open=function(){t.prototype.open.call(this),this.addClickE(this.btnSend,this.onClickCommon),this.longPressBtnUp.setDisplay(this.btnSend,this.autoUp,this),this.addLsn(WCSys.ins().patchStageUp,this.updatePanel),this.addLsn(BagSys.ins().patchItemChange,this.updateItem),this.addLsn(RpSys.ins().patchRp,this.updateRp),this.infoPanel()},e.prototype.close=function(){t.prototype.close.call(this),this.starExp.reset()},e.prototype.updateRp=function(t){(!t||t.check(this))&&(this.btnSend.redPoint.visible=RpSys.ins().getData(RoleWin,RolePanel,MoJieWin,WCPanel,e))},e.prototype.autoUp=function(){GFunc.checkConsumeEnough(this.data.getCurConfig().needitem)?WCSys.ins().sendStageUp():this.longPressBtnUp.stop()},e.prototype.infoPanel=function(){this.data=WCSys.ins().stageData,this.updatePanel(),this.updateRp()},e.prototype.updatePanel=function(){this.data.isMax()?this.currentState="max":this.currentState="normal",this.validateNow(),this.power.text=""+this.data.getPower();var t=this.data.getShowJ(),e="sh"+t+"_zycs";if(!~this.mc.name.indexOf(e)){this.mc.playFile(getEffName(e),-1);var i=Cfg.getConfig(WCCommonConfig).offsetX[t-1];this.groupMC.x=360+(i?i:0)}this.imgName.text=this.data.getStageName(),this.starExp.setCurStar(this.data.getShowX()),this.lbAddLv.text=Lang.wc_str1+"：+"+this.data.level;var n=this.data.getCurConfig(),a=AttrData.parse(n.addattr,{fm:AttrData.getFm(null,null,"：")}).join("\n");a=a+"\n"+addColor(Lang.wc_str2+"："+n.per/100+"%",5767068),this.lbCurAttr.textFlow=addColorTF(a);var o=this.data.getNextConfig();a=AttrData.parse(o.addattr,{fm:"%v"}).join("\n"),n.per!=o.per&&(a=a+"\n"+o.per/100+"%"),this.lbNextAttr.textFlow=addColorTF(a),this.updateItem();var s=this.data.getNextConfig().addattr.length+(n.per!=o.per?1:0);if(this.groupAttrUpIcon.numChildren!=s){this.groupAttrUpIcon.removeChildren();for(var r=0;s>r;r++){var u=new eui.Image;u.source="public_zycs_lj",this.groupAttrUpIcon.addChild(u)}}},e.prototype.updateItem=function(){if(!this.data.isMax()){var t=GFunc.getItemCount(this.data.getCurConfig().needitem.id),e=this.data.getCurConfig().needitem.count,i=Cfg.getItemCfg(this.data.getCurConfig().needitem.id).getName()+"：";i+=addColor(t+"/"+e,e>t?16729670:5767068),this.lbConsumeCount.textFlow=addColorTF("消耗"+i)}},e.prototype.onClickCommon=function(t){switch(t.currentTarget){case this.btnSend:GFunc.checkConsumeEnough(this.data.getCurConfig().needitem)&&WCSys.ins().sendStageUp()}},e.getTitle=function(){return"btz_zycs_msbd"},e.getTabTitle=function(){return"兽 魂"},e.getSysId=function(){return 357},e}(BasePanel);__reflect(WCStagePanel.prototype,"WCStagePanel"),window.WCStagePanel=WCStagePanel;var WxYqhlZsPanel=function(t){function e(){var e=t.call(this)||this;return e.wxTaskGroup=WxTaskGroup.zs,e.list.itemRenderer=WxYqhlZsItem,e}return __extends(e,t),e.prototype.setSkinName=function(){this.skinName="WxYqhlZsPanelEUI"},e.prototype.updatePanel=function(){var t=WxYqhlSys.ins().getTaskDatasByGroup(this.wxTaskGroup);SortUtil.sortOn(t,["sortState"],[SortType.up]),this.listData.source=t},e.getTitle=function(){return"btz_zycs_yqhl"},e.getTabTitle=function(){return"yqhl_zycs_hyzs"},e}(WxYqhlInvitePanel);__reflect(WxYqhlZsPanel.prototype,"WxYqhlZsPanel"),window.WxYqhlZsPanel=WxYqhlZsPanel;var XunBaoDianFengPanel=function(t){function e(){var e=t.call(this)||this;return e.lbGuangGao.source="xb_zycs_dfmsz",e.imgTitle.source="xb_zycs_dfxb",e}return __extends(e,t),e.prototype.updateTime=function(){var t=ActSys.ins().getActDataByIds(Cfg.getConfig(XunbaoConstConfig).acts4);if(t&&t.isOpenActivity())this.lbDoubleTimer.text=t.getformatTime();else{var e=XunBaoSys.ins().getDoubleTimer();e>0?this.lbDoubleTimer.text=""+getFormatTime(e,"dd天hh小时mm分ss秒"):this.lbDoubleTimer.text=""}},e.prototype.updateState=function(){var t=ActSys.ins().getActDataByIds(Cfg.getConfig(XunbaoConstConfig).acts4);t&&t.isOpenActivity()?this.currentState="act":this.currentState=XunBaoSys.ins().isDoubleTimer()?"7day":"none",this.validateNow()},e.getTitle=function(){return"btz_zycs_wmjt"},e.getTabTitle=function(){return"龙宫寻宝"},e.getSysId=function(){return 274},Object.defineProperty(e.prototype,"data",{get:function(){return XunBaoSys.ins().getXunBaoDataByType(XunbaoType.DianFeng)},enumerable:!0,configurable:!0}),e}(XunBaoEquipPanel);__reflect(XunBaoDianFengPanel.prototype,"XunBaoDianFengPanel"),window.XunBaoDianFengPanel=XunBaoDianFengPanel;var ChatDataGuild=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.eventType=0,e}return __extends(e,t),e.prototype.parserMessage=function(t){this.eventType=t.readUnsignedByte(),this.content=t.readString(),1==this.eventType&&(this.roleId=t.readInt(),this.roleName=t.readString(),this.job=t.readUnsignedByte(),this.sex=t.readUnsignedByte(),this.vipLevel=t.readByte(),this.svipLevel=t.readByte(),this.office=t.readUnsignedByte(),this.frameId=t.readShort(),this.headFrameId=t.readShort());var e=t.readInt();this.timer=DateUtil.formatMiniDateTime(e),this.type=ChatType.Guild},e.prototype.getHtmlTitle=function(){var t="";return this.roleName&&(t+=this.getVipContent()+this.getRoleName()),addColorTF(t)},e.prototype.getHtmlContent=function(){return StrUtil.toTF(this.getContent())},e.prototype.getContent=function(){var t=1==this.eventType?3821938:16777215;return StrUtil.addColor(this.content,t)},e}(ChatDataBase);__reflect(ChatDataGuild.prototype,"ChatDataGuild");var XunBaoFaBaoPanel=function(t){function e(){var e=t.call(this)||this;return e.lbGuangGao.source="xb_zycs_hqmszz",e.imgTitle.source="xb_zycs_hqxb",e}return __extends(e,t),e.prototype.setSkinName=function(){this.skinName="XunBaoFaBaoPanelEUI"},e.prototype.close=function(){for(var e=[],i=0;i<arguments.length;i++)e[i]=arguments[i];t.prototype.close.call(this),this.comGunDongBase.close()},e.prototype.open=function(){t.prototype.open.call(this),this.comGunDongBase.iniData(GFunc.creatItemsDataById(Cfg.getConfig(XunbaoConstConfig).hunqiItem),"XunBaoFaBaoPanelGunDongItem",34,ArrowDir.dirH),this.comGunDongBase.open()},e.prototype.updateXingYun=function(){},Object.defineProperty(e.prototype,"data",{get:function(){return XunBaoSys.ins().getXunBaoDataByType(XunbaoType.HunQi)},enumerable:!0,configurable:!0}),e.prototype.updateState=function(){var t=ActSys.ins().getActDataByIds(Cfg.getConfig(XunbaoConstConfig).acts2);t&&t.isOpenActivity()?this.currentState="act":this.currentState=XunBaoSys.ins().isDoubleTimer()?"7day":"none",this.validateNow()},e.prototype.updateTime=function(){var t=ActSys.ins().getActDataByIds(Cfg.getConfig(XunbaoConstConfig).acts2);if(t&&t.isOpenActivity())this.lbDoubleTimer.text=t.getformatTime();else{var e=XunBaoSys.ins().getDoubleTimer();e>0?this.lbDoubleTimer.text=""+getFormatTime(e,"dd天hh小时mm分钟ss秒"):this.lbDoubleTimer.text=""}},e.getTitle=function(){return"btz_zycs_hqxb"},e.getTabTitle=function(){return"法器寻宝"},e.getSysId=function(){return 271},e}(XunBaoEquipPanel);__reflect(XunBaoFaBaoPanel.prototype,"XunBaoFaBaoPanel"),window.XunBaoFaBaoPanel=XunBaoFaBaoPanel;var XunBaoFuWenPanel=function(t){function e(){var e=t.call(this)||this;return e.isScrol=!1,e.listItem.itemRenderer=XunBaoFuWenPanelItem,e.listItem.dataProvider=e.listItemArray=new eui.ArrayCollection,e.listItemJueBan.itemRenderer=XunBaoFuWenPanelMaxItem,e.listItemJueBan.dataProvider=e.listItemJueBanArray=new eui.ArrayCollection,e.imgTitle.source="xb_zycs_fwxb",e.setSkinPart("xunBaoBiDeTips",new XunBaoBiDeTips),e}return __extends(e,t),e.prototype.setSkinName=function(){this.skinName="XunBaoFuWenPanelEUI"},e.prototype.open=function(){t.prototype.open.call(this),this.animation(),this.scrollerItem.addEventListener(eui.UIEvent.CHANGE_START,this.changeStart,this),this.scrollerItem.addEventListener(eui.UIEvent.CHANGE_END,this.changeEnd,this),Timer.ins()["do"](0,33,0,this.animation,this,TimerType.FIRST)},e.prototype.animation=function(){this.scrollerItem.validateNow();var t=this.scrollerItem.viewport.contentHeight-this.scrollerItem.height;this.scrollerItem.viewport.scrollV=this.scrollerItem.viewport.scrollV+1,this.scrollerItem.viewport.scrollV>=t&&(this.scrollerItem.viewport.scrollV=0)},e.prototype.changeStart=function(){this.isScrol=!0,console.log("开始滚动")},e.prototype.changeEnd=function(){this.isScrol=!1,console.log("结束滚动")},e.prototype.updateRp=function(){},e.prototype.updatePanel=function(){t.prototype.updatePanel.call(this);var e=this.data.showItemDatas;this.listItemJueBanArray.source=e.concat().splice(0,4),this.listItemArray.source=e.concat().splice(4,e.length).concat(e.concat().splice(4,8))},e.prototype.updateXingYun=function(){this.progressExp.maximum=this.data.maxXingYun,this.progressExp.value=this.data.xingyun},e.prototype.updateTime=function(){var t=ActSys.ins().getActDataByIds(Cfg.getConfig(XunbaoConstConfig).acts3);t&&t.isOpenActivity()?this.lbDoubleTimer.text=t.getformatTime():this.lbDoubleTimer.text=""},e.prototype.updateState=function(){var t=ActSys.ins().getActDataByIds(Cfg.getConfig(XunbaoConstConfig).acts3);t&&t.isOpenActivity()?this.currentState="act":this.currentState="none",this.validateNow()},Object.defineProperty(e.prototype,"isUseYb",{get:function(){return 1==TipsSys.ins().saveReminds[this.data.getPanelName()]},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"data",{get:function(){return XunBaoSys.ins().getXunBaoDataByType(XunbaoType.FuWen)},enumerable:!0,configurable:!0}),e.getTitle=function(){return"btz_zycs_wmjt"},e.getTabTitle=function(){return"符文寻宝"},e.getSysId=function(){return 273},e}(XunBaoBasePanel);__reflect(XunBaoFuWenPanel.prototype,"XunBaoFuWenPanel"),window.XunBaoFuWenPanel=XunBaoFuWenPanel;var XunBaoZhiZunPanel=function(t){function e(){var e=t.call(this)||this;return e.lbGuangGao.source="xb_zycs_zzmsz",e.imgTitle.source="xb_zycs_zzxb",e}return __extends(e,t),e.prototype.updateTime=function(){var t=ActSys.ins().getActDataByIds(Cfg.getConfig(XunbaoConstConfig).acts5);if(t&&t.isOpenActivity())this.lbDoubleTimer.text=t.getformatTime();else{var e=XunBaoSys.ins().getDoubleTimer();e>0?this.lbDoubleTimer.text=""+getFormatTime(e,"dd天hh小时mm分ss秒"):this.lbDoubleTimer.text=""}},e.prototype.updateState=function(){var t=ActSys.ins().getActDataByIds(Cfg.getConfig(XunbaoConstConfig).acts5);t&&t.isOpenActivity()?this.currentState="act":this.currentState=XunBaoSys.ins().isDoubleTimer()?"7day":"none",this.validateNow()},e.getTitle=function(){return"btz_zycs_wmjt"},e.getTabTitle=function(){return"仙宫寻宝"},e.getSysId=function(){return 275},Object.defineProperty(e.prototype,"data",{get:function(){return XunBaoSys.ins().getXunBaoDataByType(XunbaoType.ZhiZun)},enumerable:!0,configurable:!0}),e}(XunBaoEquipPanel);__reflect(XunBaoZhiZunPanel.prototype,"XunBaoZhiZunPanel"),window.XunBaoZhiZunPanel=XunBaoZhiZunPanel;var YongZhePanel=function(t){function e(){var e=t.call(this)||this;e.selectIndex=-1,e.skinName="YongZhePanelEUI",e.bossListArr=[e.bosslist0,e.bosslist1,e.bosslist2],e.floorTab.itemRenderer=BaseTabBtn5_1;for(var i=Cfg.getConfig(YongzheFubenConfig,FbSys.ins().yongZheModel.floorId),n=Cfg.getConfigs(YongzheFubenConfig,CondType.LessEqual,"floor",i.floor+1),a=n.length,o=Math.ceil(a/9),s=[],r=1;o>=r;r++){var u=Cfg.getConfig(YongzheFubenConfig,CondType.Equal,"floor",r);u&&s.push([u.name])}return e.floorTab.dataProvider=e.tabArr=new eui.ArrayCollection(s),e.floorTab.validateNow(),e}return __extends(e,t),e.prototype.open=function(){var t=FbSys.ins();this.addLsn(t.patchUpdateYongZheInfo,this.updateBossList),this.addLsn(t.patchYongZheReceiveReward,this.receiveReward),this.addLsn(RpSys.ins().patchRp,this.updateRp),this.addLsn(YongZheBossList.clickCheng,this.onBoosClick),this.addItemTapE(this.floorTab,this.onFloorTab),this.addClickE(this,this.onClick),this.setTab(),this.updateRp()},e.prototype.receiveReward=function(t){1==t&&this.setTab()},e.prototype.updateRp=function(t){if(void 0===t&&(t=null),null==t||t.check(e)){var i=RpSys.ins();this.btnReward.redPoint.visible=i.getData(ExtCom,FuBenWin,FuBenDanRenPanel,e,"first"),this.btnShop.redPoint.visible=i.getData(ExtCom,FuBenWin,FuBenDanRenPanel,e,"shop");for(var n=this.tabArr.source,a=n.length,o=0;a>o;o++)n[o][1]=i.getData(ExtCom,FuBenWin,FuBenDanRenPanel,e,o+1);this.tabArr.replaceAll(n)}},e.prototype.setTab=function(){var t=this;this.selectIndex=-1;var e=FbSys.ins().yongZheModel,i=e.floorId;if(0==i)i=1;else{for(var n=Cfg.getConfigs(YongzheFubenConfig,CondType.Less,"floor",i),a=0,o=n;a<o.length;a++){var s=o[a],r=e.getGQState(s.id);if(1==r){i=s.id;break}}var u=Cfg.getConfigLength(YongzheFubenConfig);i>u&&(i=u)}var h=Cfg.getConfig(YongzheFubenConfig,i),l=h.zslevel<=Actor.ins().zsId?h.floor-1:h.floor-2;l=0>l?0:l,this.floorTab.selectedIndex=l,this.updateBossList(),Timer.ins()["do"](50,1,1,function(){t.updateFirstTab(l)},this)},e.prototype.updateFirstTab=function(t){var e=this.floorTab.getVirtualElementAt(0).width,i=0|this.floorTab.layout.gap,n=t+1,a=n*e+(n-1)*i,o=a-e;this.tabScroller.viewport.scrollH=o},e.prototype.updateTabScroller=function(){var t=this.floorTab.getVirtualElementAt(0).width,e=0|this.floorTab.layout.gap,i=this.floorTab.selectedIndex+1,n=i*t+(i-1)*e,a=this.tabScroller.viewport.scrollH+this.tabScroller.width,o=n-t,s=0;n>a?s=n-a:o<this.tabScroller.viewport.scrollH&&(s=o-this.tabScroller.viewport.scrollH),s&&(this.tabScroller.viewport.scrollH+=s)},e.prototype.onGqRewardClick=function(t){var e=t.getData(),i=e[0],n=e[1];1==n?FbSys.ins().sendYongZheReceiveReward(1,i.id):GFunc.showRewardTips(i.customReward[0])},e.prototype.onClick=function(t){var e=(FbSys.ins().yongZheModel,t.target);if("bossbtn"==e.name)return void FbSys.ins().doYongZheChallenge();if(e instanceof YongZheGQReward)return void this.onGqRewardClick(e);switch(e){case this.btnReward:openWin(YongZheFirstRewardWin);break;case this.btnShop:openWin(ShopWin,ShopWin.getTabIndexbyPanel(ShopYongZhePanel))}},e.prototype.onBoosClick=function(t){var e=t.getData().index-1;this.selectIndex!=e&&(this.selectIndex=e,this.setBossSelect(e))},e.prototype.setBossSelect=function(t){for(var e,i=0;9>i;i++){var n=Math.floor(i/3),a=i%3,o=i==t;this.bossListArr[n].setSelect(a,o),o&&(e=this.bossListArr[n].getSelectData())}this.bossinfo.setData(e);var s=Math.floor(t/3)+1;this.bossinfo.parent.addChildAt(this.bossinfo,s)},e.prototype.onFloorTab=function(t){this.selectIndex=-1,this.updateTabScroller(),this.updateBossList()},e.prototype.updateBossList=function(){var t=FbSys.ins().yongZheModel,e=this.floorTab.selectedIndex+1,i=Cfg.getConfigs(YongzheFubenConfig,CondType.Equal,"floor",e);if(this.bosslist0.setData(i.slice(0,3)),this.bosslist1.setData(i.slice(3,6)),this.bosslist2.setData(i.slice(6,9)),-1==this.selectIndex){var n=Cfg.getConfigLength(YongzheFubenConfig),a=t.floorId<=n?t.floorId:n,o=Cfg.getConfig(YongzheFubenConfig,a);o.floor==e?this.selectIndex=o.index-1:this.selectIndex=0,this.setBossSelect(this.selectIndex)}},e.getTitle=function(){return"btz_zycs_fb"},e.getTabTitle=function(){return"fb_zycs_yzzt"},e.getSysId=function(){return 323},e}(BasePanel);__reflect(YongZhePanel.prototype,"YongZhePanel"),window.YongZhePanel=YongZhePanel;var YZZHPanel=function(t){function e(){var e=t.call(this)||this;e.mcBtnAct=new MC,e.mcLiZi=new MC,e.page=1,e.setSkinName(),e.list.dataProvider=e.listArray=new eui.ArrayCollection,e.list.itemRenderer=YZZHPanelRewardItem,e.list.useVirtualLayout=!0,e.mcSH=new MC,e.mcSH.x=120,e.mcSH.y=142,e.groupMC.addChild(e.mcSH),e.mcIcon=new McIcon,e.mcIcon.touchEnabled=!1,e.mcIcon.touchChildren=!1,e.groupEntity.addChild(e.mcIcon),e.mcBtnAct.x=e.btnAct.width/2,e.mcBtnAct.y=e.btnAct.height/2,e.btnAct.addChildAt(e.mcBtnAct,e.btnAct.numChildren),e.groupMC.touchEnabled=!1,e.groupMC.touchChildren=!1;var i=MC.create(ResMgr.getEffName("public_zycs_button02"),-1);return i.x=62,i.y=30.5,e.btnOneKey.addChild(i),e}return __extends(e,t),e.prototype.setSkinName=function(){this.skinName="YZZHPanelEUI"},e.prototype.open=function(){this.addClickE(this,this.onClick),this.addLsn(RpSys.ins().patchRp,this.updateRp),this.addLsn(RechargeActSys.ins().patchYZZHBuyLevel,this.updateExpLevel),this.addLsn(RechargeActSys.ins().patchYZZHJieDuanTaskGet,this.updateExpLevel),this.addLsn(RechargeActSys.ins().patchYZZHGetReward,this.updateReward),this.addLsn(RechargeActSys.ins().patchYZZHBuyUpdate,this.updateActUpdate),this.list.dataProvider.addEventListener(eui.CollectionEvent.COLLECTION_CHANGE,this.updateNextReward,this),this.scroller.addEventListener(eui.UIEvent.CHANGE_START,this.updateNextReward,this),this.scroller.addEventListener(eui.UIEvent.CHANGE_END,this.updateNextReward,this),this.list.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onListClick,this),this.updatePanel(),this.updateRp()},e.prototype.close=function(){for(var e=[],i=0;i<arguments.length;i++)e[i]=arguments[i];t.prototype.close.call(this),this.mcIcon.close(),this.scroller.removeEventListener(eui.UIEvent.CHANGE_START,this.updateNextReward,this),this.scroller.removeEventListener(eui.UIEvent.CHANGE_END,this.updateNextReward,this),this.list.dataProvider.removeEventListener(eui.CollectionEvent.COLLECTION_CHANGE,this.updateNextReward,this),this.list.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.onListClick,this)},e.prototype.updateRp=function(t){if(void 0===t&&(t=null),null==t||t.check(e)){for(var i=this.list.numChildren,n=0;i>n;n++){var a=this.list.getChildAt(n);a&&a.updateRedPoint()}this.updatePageBtn()}},e.prototype.updatePanel=function(){var t=RechargeActSys.ins().yzzhData,e=Cfg.getConfig(YongZheSaiJiConfig,t.saiji);this.imgBg.source="yzsh_zycs_bg"+t.saiji+"_jpg",this.bitSaiJi.text=t.saiji.toString(),this.lbUpLevelDesc.textFlow=addColorTF("升至"+addColor("[指定等级]",5767068)+" 领取"+addColor("[全部等级奖励]",5767068)),this.lblRewardName1.textFlow=StrUtil.toTF(e.rewardName),this.lblRewardDesc.textFlow=StrUtil.toTF(e.rewardDesc);var i=addColor(DateUtil.formatTime(t.endTime,"dd天hh小时"),5767068);this.lblActTime.textFlow=addColorTF("剩余时间："+i),this.mcIcon.open(e.mcIcon);var n=t.getCanGetIndex();this.page=n>=80?2:1,this.updateList(),this.setListIndex(n),this.updateExpLevel(),this.updateStatus(),this.updateNextReward(),this.updateBtnState()},e.prototype.updateBtnState=function(){var t=RechargeActSys.ins().yzzhData;this.btnOneKey.visible=!!~t.getCanGetIndexxxx(),this.btnBuyLevel.visible=!this.btnOneKey.visible},e.prototype.updateList=function(){this.listArray.source=this.getDatalist(),this.scroller.validateNow(),this.updatePageBtn()},e.prototype.getDatalist=function(){var t=[],e=RechargeActSys.ins().yzzhData;e.rewardDatas.length;if(1==this.page)for(var i=0;i<e.rewardDatas.length&&(t.push(e.rewardDatas[i]),80!=t.length);i++);else for(var i=80;i<e.rewardDatas.length;i++)t.push(e.rewardDatas[i]);return t},e.prototype.updatePageBtn=function(){if(1==this.page){this.btnLastPage.visible=!1;var t=this.scroller.viewport.scrollV>=this.scroller.viewport.contentHeight-this.scroller.height;if(this.btnNextPage.visible=t,t){var e=RechargeActSys.ins().yzzhData;e.rewardDatas.length;this.btnNextPage.redPoint.visible=!1;for(var i=80;i<e.rewardDatas.length;i++)if(e.rewardDatas[i].canGet1||e.rewardDatas[i].canGet2){this.btnNextPage.redPoint.visible=t;break}}}else{var t=this.scroller.viewport.scrollV<=0;if(t){var e=RechargeActSys.ins().yzzhData;e.rewardDatas.length;this.btnLastPage.redPoint.visible=!1;for(var i=0;80>i;i++){var n=e.rewardDatas[i];if(n&&(n.canGet1||n.canGet2)){this.btnLastPage.redPoint.visible=t;break}}}this.btnLastPage.visible=t,this.btnNextPage.visible=!1}},e.prototype.updateExpLevel=function(){var t=RechargeActSys.ins().yzzhData,e=Cfg.getConfig(YongZheLevelConfig,t.level);this.bitLevel.text=t.nextLevel.toString(),t.isMax?this.progressExp.maximum=this.progressExp.value=t.exp:(this.progressExp.maximum=e.exp,this.progressExp.value=t.exp),this.updateBtnState()},e.prototype.updateReward=function(t){void 0===t&&(t=null);for(var e=RechargeActSys.ins().yzzhData,i=this.list.numChildren,n=0;i>n;n++){var a=this.list.getElementAt(n);if(a){var o=a.data;(null==t||t.level==o.level)&&a.updateData()}}var s=e.getCanGetIndex();this.setListIndex(s),this.updateBtnState()},e.prototype.updateActUpdate=function(t){this.updateReward(),this.updateStatus()},e.prototype.updateStatus=function(){var t=RechargeActSys.ins().yzzhData;this.btnAct.visible=!t.buyShengHui,this.lbAct.visible=t.buyShengHui,t.buyShengHui?(this.mcBtnAct.visible=!1,this.mcBtnAct.stop()):(this.mcSH.visible=!1,this.mcSH.stop())},e.prototype.updateNextReward=function(){var t=(RechargeActSys.ins().yzzhData,null),e=null,i=0,n=this.listArray.source.length,a=99,o=(this.list.layout.gap,this.listArray.source[this.listArray.source.length-1]),s=Math.floor(this.list.scrollV/a);s=s==n?n-1:s;for(var r=s;n>r&&(o=this.listArray.source[r],o.level%5!=0);r++);t=o.configReward.reward,e=o.configReward.reward2,i=o.level,this.lbLevelReward.text=i+"级可领取",this.comItem1.data=t,this.comItem1.visible=t,this.lbLevelReward1.visible=!t,this.comItem2.data=e,this.comItem2.visible=t,this.lbLevelReward2.visible=!t,this.updatePageBtn()},e.prototype.setListIndex=function(t){t=t>=80?t-80:t;var e=this.list.layout.gap,i=99*t+e,n=this.scroller.viewport.contentHeight-this.scroller.height;i>=n&&(i=n),0>i&&(i=0),this.scroller.viewport.scrollV=i},e.prototype.onClick=function(t){var e=RechargeActSys.ins().yzzhData;switch(t.target){case this.imgShengHui:case this.btnAct:0==e.buyShengHui&&openWin(YZZHActWin);break;case this.btnBuyLevel:e.level>=80?showtipsFail("等级已达80级,不可购买!"):openWin(YZZHBuyLevelWin);break;case this.btnRewardView:openWin(YZZHRewardViewWin);break;case this.btnLastPage:this.page=1,this.scroller.viewport.scrollV=0,this.updateList();break;case this.btnNextPage:this.page=2,this.scroller.viewport.scrollV=0,this.updateList();break;case this.btnOneKey:for(var i=e.rewardDatas,n=i.length,a=0;n>a;a++){var o=i[a];o.canGet1&&RechargeActSys.ins().sendYZZHGetReward(1,o.level),o.canGet2&&RechargeActSys.ins().sendYZZHGetReward(2,o.level)}}},e.prototype.onListClick=function(t){var e=t.target.parent,i=e.data;"comItem1"==t.target.name&&(i.canGet1?RechargeActSys.ins().sendYZZHGetReward(1,i.level):GFunc.openItemTips(i.configReward.reward)),"comItem2"==t.target.name&&(i.canGet2?RechargeActSys.ins().sendYZZHGetReward(2,i.level):GFunc.openItemTips(i.configReward.reward2))},e.getTitle=function(){return"btz_zycs_yzsh"},e.getTabTitle=function(){return"奖励"},e.getSysId=function(){return 315},e}(BasePanel);__reflect(YZZHPanel.prototype,"YZZHPanel"),window.YZZHPanel=YZZHPanel;var YZZHTaskPanel=function(t){function e(){var e=t.call(this)||this;e.selectIndex=0,e.skinName="YZZHTaskPanelEUI",e.list1.itemRenderer=YZZHTaskPanelJieDuanItem,e.list1.useVirtualLayout=!0,e.list2.itemRenderer=YZZHTaskPanelSaijiItem,e.list2.useVirtualLayout=!0,e.listExp.itemRenderer=YZZHTaskPanelExpItem,e.listExp.useVirtualLayout=!0,e.lbUpLevelDesc.textFlow=addColorTF("升至"+addColor("[指定等级]",16767625)+" 领取"+addColor("[全部等级奖励]",16767625));var i=[{source:"yzsh_zycs_jdtz",source1:"yzsh_zycs_jdtz_a"},{source:"yzsh_zycs_shjy",source1:"yzsh_zycs_shjy_a"},{source:"yzsh_zycs_sjtz",source1:"yzsh_zycs_sjtz_a"}];return e.tabType.dataProvider=new eui.ArrayCollection(i),e.list1.dataProvider=e.listItemArray1=new eui.ArrayCollection,e.list2.dataProvider=e.listItemArray2=new eui.ArrayCollection,e.listExp.dataProvider=e.listExpArray=new eui.ArrayCollection,e}return __extends(e,t),e.playPiao=function(t){return t},e.prototype.open=function(){t.prototype.open.call(this),this.addClickE(this,this.onClick),this.addItemTapE(this.tabType,this.onItemClick),this.addLsn(RpSys.ins().patchRp,this.updateRp),this.addLsn(RechargeActSys.ins().patchYZZHBuyLevel,this.updateExpLevel),this.addLsn(RechargeActSys.ins().patchYZZHJieDuanTaskGet,this.updateList),this.addLsn(RechargeActSys.ins().patchYZZHBuyUpdate,this.updateList),this.addLsn(RechargeActSys.ins().patchYZZHJieDuanTaskUpdate,this.updateList),this.addLsn(RechargeActSys.ins().patchYZZHGetExp,this.updateExpList),this.addLsn(e.playPiao,this.playPiaoMc);var i=this.getAutoIndex();this.setState(i),this.tabType.selectedIndex=this.selectIndex=i,this.updateData(),this.updateRp(),this.updateTime()},e.prototype.updateRp=function(t){if(void 0===t&&(t=null),null==t||t.check(e)){this.tabType.validateNow(),this.tabType.numElements>0&&(this.tabType.getElementAt(0).redPoint.visible=RpSys.ins().getData(YZZHWin,YZZHMainPanel,e,YZZHTaskPanelJieDuanItem),this.tabType.getElementAt(1).redPoint.visible=RpSys.ins().getData(YZZHWin,YZZHMainPanel,e,YZZHTaskPanelSaijiItem),this.tabType.getElementAt(2).redPoint.visible=RpSys.ins().getData(YZZHWin,YZZHMainPanel,e,YZZHTaskPanelExpItem));for(var i=this.listExp.numElements,n=0;i>n;n++){var a=this.listExp.getElementAt(n);a&&a.updateRedPoint()}}},e.prototype.updateData=function(){RechargeActSys.ins().yzzhData;this.updateList(),this.updateExpLevel(),this.updateExpList()},e.prototype.updateTime=function(){var t=RechargeActSys.ins().yzzhData,e=t.endTime,i=DateUtil.isDayTime(e)?"dd天hh小时mm分钟":"hh小时mm分钟ss秒";this.lbSaiJiEndTime.textFlow=addColorTF("本赛季任务结束倒计时:"+addColor(DateUtil.formatTime(e,i),16767625)),this.lbExpEndTime.textFlow=addColorTF("神龙令经验领取倒计时:"+addColor(DateUtil.formatTime(e,i),16767625));var n=t.jieduanEndTime;i=DateUtil.isDayTime(n)?"dd天hh小时mm分钟":"hh小时mm分钟ss秒",this.lbJieDuanEndTime.textFlow=addColorTF("本阶段任务结束倒计时:"+addColor(DateUtil.formatTime(n,i),16767625))},e.prototype.updateList=function(){var t=RechargeActSys.ins().yzzhData,e=t.taskData1.concat(),i=t.taskData2.concat();SortUtil.sortOn(e,["sort","taskId"],[SortType.down,SortType.up]),SortUtil.sortOn(i,["sort","taskId"],[SortType.down,SortType.up]),this.listItemArray1.source=e,this.listItemArray2.source=i},e.prototype.updateExpList=function(){var t=RechargeActSys.ins().yzzhData;this.listExpArray.source=t.expDatas},e.prototype.updateExpLevel=function(){var t=RechargeActSys.ins().yzzhData,e=Cfg.getConfig(YongZheLevelConfig,t.level);this.bitLevel.text=t.nextLevel.toString(),this.progressExp.maximum=e.exp,this.progressExp.value=t.exp,this.lbTaskCount.textFlow=addColorTF(t.saijiTaskExp()+"/"+t.saijiTaskMaxExp()),this.lbExp.textFlow=addColorTF(t.getExp()+"/"+t.maxExp()),this.lbExpCouont.textFlow=addColorTF(t.getShengHuiExp()+"/"+t.getShengHuiSumExp()),t.isMax?this.progressExp.maximum=this.progressExp.value=e.exp:(this.progressExp.maximum=e.exp,this.progressExp.value=t.exp),this.updateExpList()},e.prototype.onItemClick=function(t){this.selectIndex!=t.itemIndex&&(this.selectIndex=t.itemIndex,this.setState(this.selectIndex))},e.prototype.setState=function(t){this.currentState="s"+t,this.validateNow()},e.prototype.getAutoIndex=function(){return RpSys.ins().getData(YZZHWin,YZZHMainPanel,e,YZZHTaskPanelJieDuanItem)?0:RpSys.ins().getData(YZZHWin,YZZHMainPanel,e,YZZHTaskPanelSaijiItem)?1:RpSys.ins().getData(YZZHWin,YZZHMainPanel,e,YZZHTaskPanelExpItem)?2:0},e.prototype.onClick=function(t){var e=RechargeActSys.ins().yzzhData;switch(t.target){case this.btnBuyLevel:e.level>=80?showtipsFail("等级已达80级,不可购买!"):openWin(YZZHBuyLevelWin)}},e.prototype.playPiaoMc=function(t){var e=this;this.globalToLocal(t.x,t.y,t);var i=new MC;i.playFile(getEffName("bluesoul1"),-1),i.x=t.x+50,i.y=t.y+50,this.addChild(i);var n=egret.Tween.get(i);n.to({x:this.progressExp.x+this.progressExp.width/2,y:this.progressExp.y+this.progressExp.height/2},1300,egret.Ease.sineInOut).call(function(){e.removeChild(i),e.updateExpLevel()})},e.getTitle=function(){return"btz_zycs_yzsh"},e.getTabTitle=function(){return"任务"},e.getSysId=function(){return 315},__decorate([post()],e,"playPiao",null),e}(BasePanel);__reflect(YZZHTaskPanel.prototype,"YZZHTaskPanel"),window.YZZHTaskPanel=YZZHTaskPanel;var ZhuZaiBossPanel=function(t){function e(){var e=t.call(this)||this;return e.helpId=40,e.zhuZaiBossItems=[],e.initUI(),e}return __extends(e,t),e.prototype.initUI=function(){this.skinName="ZhuZaiBossPanelEUI",this.zhuZaiBossItems=[this.zhuZaiBossItem0,this.zhuZaiBossItem1,this.zhuZaiBossItem2,this.zhuZaiBossItem3],this.lbReward.textFlow=addColorTF(Lang.fb_str233,5949490,!0),this.lbIntoCD.visible=!1
},e.prototype.open=function(){t.prototype.open.call(this),this.addClickE(this.lbReward,this.onClick),this.addClickE(this.btnInTo,this.onClick),this.addClickE(this.groupItem,this.onItemClick),this.addLsn(FbSys.ins().patchZhuZaiFubenData,this.updateData),this.updateData()},e.prototype.updateData=function(){for(var t=FbSys.ins().zhuzaiMode,e=0;e<t.zhuZaiBosss.length;e++)this.zhuZaiBossItems[e].data=t.zhuZaiBosss[e]},e.prototype.updateTime=function(){var t=FbSys.ins().zhuzaiMode,e=t.leftRefreshTime,i="";1==t.refreshTickType?(this.btnInTo.enabled=!1,i=Lang.fb_str234+addColor(getFormatTime(e/1e3,"hh:mm:ss"),12588052)):(this.btnInTo.enabled=!0,i=t.getZhuZaiBossData().isLive?Lang.fb_str235+addColor(getFormatTime(e/1e3,"hh:mm:ss"),5949490):Lang.sjbs_str3),this.lbTime.textFlow=addColorTF(i)},e.prototype.onClick=function(t){switch(t.target){case this.btnInTo:var e=FbSys.ins().zhuzaiMode;if(e.getZhuZaiBossData().isLive){if(e.intoTime>0)return void showtipsFail(Lang.fb_str236.replace("$time$",""+Math.ceil(e.intoTime/1e3)));e.isIntoFuBen()?(FbSys.ins().sendZhuZaiChallenge(),closeWin(BossWin)):showtipsFail(e.leftRefreshTime<=0?Lang.sjbs_str1:Lang.sjbs_str2)}else showtipsFail(Lang.sjbs_str3);break;case this.lbReward:openWin(ZhuZaiRewardWin)}},e.prototype.onItemClick=function(t){var e=t.target;if(e&&"rank"==e.name&&e.parent instanceof ZhuZaiBossItem){var i=e.parent,n=i.data;FbSys.ins().sendZhuZaiHurtRank(n.id)}},e.getSysId=function(){return 342},e.getTitle=function(){return"btz_zycs_sjbs"},e.getTabTitle=function(){return"fb_zycs_zzbs"},e}(BasePanel);__reflect(ZhuZaiBossPanel.prototype,"ZhuZaiBossPanel"),window.ZhuZaiBossPanel=ZhuZaiBossPanel;var LiLianPanel=function(t){function e(){var e=t.call(this)||this;return e.mcBtnMeiRiReward=new MC,e.skinName="LiLianPanelEUI",e.setSkinPart("liLianPanelYuan",new LiLianPanelYuanPanel),e.attrs.itemRenderer=ComAttrItem,e.attrs.dataProvider=e.attrData=new eui.ArrayCollection,e.listMeiRiRewardArray=new eui.ArrayCollection,e.listMeiRiReward.itemRenderer=ItemBaseReward,e.listMeiRiReward.dataProvider=e.listMeiRiRewardArray,e.listRankRewardArray=new eui.ArrayCollection,e.listRankReward.itemRenderer=ItemBaseReward,e.listRankReward.dataProvider=e.listRankRewardArray,e.list.itemRenderer=LiLianPanelTaskItem,e.listArray=new eui.ArrayCollection,e.list.dataProvider=e.listArray,e.lbYaZhiDesc.textFlow=addColorTF("仙道压制："+addColor("高阶仙道",16751375)+"玩家受到"+addColor("低阶仙道",16751375)+"玩家伤害减免10%"),e.mcBtnMeiRiReward.x=e.btnMeiRiReward.width/2-1.5,e.mcBtnMeiRiReward.y=e.btnMeiRiReward.height/2+.5,e.mcBtnMeiRiReward.scaleY=e.mcBtnMeiRiReward.scaleX=.7,e.btnMeiRiReward.addChild(e.mcBtnMeiRiReward),e.mcBtnMeiRiReward.playFile(ResMgr.getEffName("public_zycs_button01"),-1),e}return __extends(e,t),e.prototype.open=function(){t.prototype.open.call(this),this.addClickE(this.btnMeiRiReward,this.onclick),this.addLsn(TaskSys.ins().patchLiLianTaskUpdate,this.updateTask),this.addLsn(TaskSys.ins().patchLiLianReceiveTaskReward,this.updateTask),this.addLsn(TaskSys.ins().patchLiLianReceiveDailyReward,this.updateMeiRiReward),this.addLsn(TaskSys.ins().patchLiLianJunXianpdate,this.updateUpLevel),this.addLsn(RpSys.ins().patchRp,this.updateRp),this.updatePanel(),this.updateTask(),this.updateRp(),this.liLianPanelYuan.open(TaskSys.ins().liLianData)},e.prototype.close=function(){t.prototype.close.call(this),this.liLianPanelYuan.close()},e.prototype.updateRp=function(t){if(void 0===t&&(t=null),!t||t.check(e))for(var i=this.list.numElements,n=0;i>n;n++){var a=this.list.getElementAt(n);a&&a.updateRedPoint()}},e.prototype.updatePanel=function(){var t=TaskSys.ins().liLianData,e=t.id,i=Cfg.getConfig(JunxianLevelConfig,e);this.totalPower.text=GFunc.getPower(i.attr).toFixed(0),this.imgName.source="lilian_zycs_jx"+i.junxian;var n=e==Cfg.getConfigLength(JunxianLevelConfig);this.attrData.source=AttrData.getAttrDatas(i.attr,n?[]:Cfg.getConfig(JunxianLevelConfig,e+1).attr,n);var a=Cfg.getJunxianNextRankReward(t.id);a?(this.imgRankReward.visible=!1,this.listRankRewardArray.source=a.rewards):(this.listRankRewardArray.source=[],this.imgRankReward.visible=!0),this.updateMeiRiReward()},e.prototype.updateValue=function(){var t=TaskSys.ins().liLianData,e=Cfg.getConfig(JunxianLevelConfig,t.id),i=Cfg.getConfig(JunxianDailyConfig,e.junxian),n=i.dialyrenown.length,a=i.dialyrenown[t.rewardIndex==n?n-1:t.rewardIndex];this.lbDailyValue.textFlow=addColorTF("今日累积声望:"+addColor(t.dailyValue+"/"+a,t.dailyValue>=a?5949490:15733780)),this.proValue.value=t.value,this.proValue.maximum=e.renown},e.prototype.updateUpLevel=function(){this.liLianPanelYuan.updateView(TaskSys.ins().liLianData),this.updatePanel()},e.prototype.updateMeiRiReward=function(){var t=TaskSys.ins().liLianData,e=Cfg.getConfig(JunxianLevelConfig,t.id),i=Cfg.getConfig(JunxianDailyConfig,e.junxian),n=i.dialyrenown.length,a=t.rewardIndex==n?n-1:t.rewardIndex;this.listMeiRiRewardArray.source=i.dailyreward[a];var o=t.dailyRewardState();this.btnMeiRiReward.visible=o==TaskRewardState.Geted,this.imgMeiRiReward.visible=o==TaskRewardState.CanGet,this.imgWeiDaCheng.visible=o==TaskRewardState.NotReached,this.updateValue()},e.prototype.updateTask=function(){var t=TaskSys.ins().liLianData,e=t.liLianTaskDatas.concat();SortUtil.sortOn(e,["sort"],[SortType.down]),this.listArray.replaceAll(e),this.updateValue(),this.updateMeiRiReward()},e.prototype.onclick=function(t){t.target===this.btnMeiRiReward&&TaskSys.ins().sendLiLianReceiveDailyReward()},e.getTitle=function(){return"btz_zycs_ll"},e.getSysId=function(){return 226},e.getTabTitle=function(){return"bqz_zycs_ll"},e.isShow=function(){return t.isShow.call(this)},e}(BasePanel);__reflect(LiLianPanel.prototype,"LiLianPanel"),window.LiLianPanel=LiLianPanel;var TouXianPanel=function(t){function e(){var e=t.call(this)||this;return e.curLevel=0,e.skinName="TouXianPanelEUI",e.attrs.itemRenderer=ComAttrItem,e.attrs.dataProvider=e.attrData=new eui.ArrayCollection,e.listMeiRiRewardArray=new eui.ArrayCollection,e.listMeiRiReward.itemRenderer=ItemBaseReward,e.listMeiRiReward.dataProvider=e.listMeiRiRewardArray,e.list.itemRenderer=TouXianPanelTaskItem,e.listArray=new eui.ArrayCollection,e.list.dataProvider=e.listArray,e}return __extends(e,t),e.prototype.open=function(){t.prototype.open.call(this),this.addClickE(this.btnMeiRiReward,this.onclick),this.addClickE(this.btnLeft,this.onclick),this.addClickE(this.btnRight,this.onclick),this.addLsn(TouXianPanelTaskItem.ItemGlobal,this.playPiaoMc),this.addLsn(TouXianSys.ins().patchTouXianTaskUpdate,this.updateTask),this.addLsn(TouXianSys.ins().patchTouXianTask,this.updateTask),this.addLsn(TouXianSys.ins().patchTouXianTask,this.updatePower),this.addLsn(TouXianSys.ins().patchTouXianMeiRi,this.updateMeiRiReward),this.addLsn(TouXianSys.ins().patchTouXianUpLevel,this.updateUpLevel),this.addLsn(RpSys.ins().patchRp,this.updateRp),this.curLevel=TouXianSys.ins().touxianData.level,this.updatePanel(),this.updatePower(),this.updateTask(),this.updateRp(),this.lbYaZhiDesc.textFlow=addColorTF("仙位压制："+addColor("高阶仙位",11685123)+"玩家对"+addColor("低阶玩家",11685123)+"造成伤害增加10%")},e.prototype.updateRp=function(t){if(void 0===t&&(t=null),!t||t.check(e))for(var i=this.list.numElements,n=0;i>n;n++){var a=this.list.getElementAt(n);a&&a.dataChanged()}},e.prototype.updatePanel=function(){var t=TouXianSys.ins().touxianData,e=Cfg.getConfig(TouxianConfig,this.curLevel);this.cq="x"+e.star,this.pin="s"+e.stage,this.xw="xw"+e.stage;var i=this.curLevel==Cfg.getConfigLength(TouxianConfig);this.attrData.source=AttrData.getAttrDatas(e.attr,i?[]:Cfg.getConfig(TouxianConfig,this.curLevel+1).attr,i);var n=Math.min(TouXianSys.ins().touxianData.level+1,Cfg.getConfigLength(TouxianConfig));this.btnLeft.visible=this.curLevel>1,this.btnRight.visible=this.curLevel<n,this.btnLeft.redPoint.visible=t.isReward1(1,this.curLevel-1),this.btnRight.redPoint.visible=t.isReward1(this.curLevel+1,Cfg.getConfigLength(TouxianConfig)),this.updatePower(),this.updateMeiRiReward()},e.prototype.updatePower=function(){var t=TouXianSys.ins().touxianData,e=Cfg.getConfig(TouxianConfig,this.curLevel);this.comRankBarEff.setData(t.value,e.soulvalue);var i=Cfg.getTouxianStagerewardConfig(this.curLevel);this.itemNextRewerd.data=i.stagereward[0],this.lbNextName.text=i.stage+"阶·["+i.name+"]奖励",this.imgNextRewerd.visible=t.rank>e.stage||t.isMaxRank;var n=Cfg.getConfig(TouxianConfig,t.level);this.totalPower.text=(GFunc.getPower(n.attr)+n.power).toFixed(0)},e.prototype.updateUpLevel=function(){this.curLevel=TouXianSys.ins().touxianData.level,this.updatePanel(),this.updatePower()},e.prototype.updateMeiRiReward=function(){var t=TouXianSys.ins().touxianData,e=Cfg.getConfig(TouxianConfig,this.curLevel);this.listMeiRiRewardArray.source=e.rewards,this.getGroup.visible=t.canReward(this.curLevel),this.btnMeiRiReward.redPoint.visible=!0,this.imgMeiRiReward.visible=t.isReward(this.curLevel)},e.prototype.updateTask=function(){for(var t=TouXianSys.ins().touxianData,e=[],i=0,n=t.touXianTaskDatas;i<n.length;i++){var a=n[i],o=a.config.isShenHe;urlParam.isShenhe&&0==o||e.push(a)}SortUtil.sortOn(e,["sort"],[SortType.down]),this.listArray.source=e},e.prototype.playPiaoMc=function(t){var e=this;this.globalToLocal(t.x,t.y,t);var i=new MC;i.playFile(getEffName("purplesoul1"),-1),i.x=t.x+50,i.y=t.y+50,this.addChild(i);var n=egret.Tween.get(i);n.to({x:this.comRankBarEff.x+this.comRankBarEff.width/2,y:this.comRankBarEff.y+this.comRankBarEff.height/2},1300,egret.Ease.sineInOut).call(function(){var t=egret.Tween.get(i);t.to({alpha:0},200).call(function(){e.removeChild(i)})})},e.prototype.onclick=function(t){switch(t.target){case this.btnMeiRiReward:TouXianSys.ins().sendTouXianMeiRi(this.curLevel);break;case this.btnLeft:this.curLevel>1&&(this.curLevel--,this.updatePanel());break;case this.btnRight:var e=Math.min(TouXianSys.ins().touxianData.level+1,Cfg.getConfigLength(TouxianConfig));this.curLevel<e&&(this.curLevel++,this.updatePanel())}},e.getTitle=function(){return"btz_zycs_tx"},e.getSysId=function(){return 201},e.getTabTitle=function(){return"bqz_zycs_tstx"},e.isShow=function(){return t.isShow.call(this)},e}(BasePanel);__reflect(TouXianPanel.prototype,"TouXianPanel"),window.TouXianPanel=TouXianPanel;var ZSPanel=function(t){function e(){var e=t.call(this)||this;return e.mcBtnOk=new MC,e.skinName="ZSPanelEUI",e.setSkinPart("itemCsReward1",new ItemBaseReward),e.setSkinPart("itemCsReward2",new ItemBaseReward),e.attrs.itemRenderer=ComAttrItem,e.attrs.dataProvider=e.attrData=new eui.ArrayCollection,e.taskListArray=new eui.ArrayCollection,e.taskList.itemRenderer=ZSPanelTaskItem,e.taskList.dataProvider=e.taskListArray,e.mcBtnOk.x=e.btnOk.width/2,e.mcBtnOk.y=e.btnOk.height/2,e.btnOk.addChild(e.mcBtnOk),e}return __extends(e,t),e.prototype.open=function(){t.prototype.open.call(this),this.addClickE(this.btnOk,this.onclick),this.addClickE(this.imgZsShi,this.onclick),this.addLsn(RpSys.ins().patchRp,this.updateRp),this.addLsn(BagSys.ins().patchItemChange,this.updateItem),this.addLsn(JobSys.ins().patchZSTaskUpdate,this.updateTask),this.addLsn(JobSys.ins().patchZSTask,this.updateTask),this.addLsn(JobSys.ins().patchZS,this.updatePanel),this.updatePanel(),this.updateRp()},e.prototype.close=function(){t.prototype.close.call(this)},e.prototype.updateRp=function(t){if(void 0===t&&(t=null),!t||t.check(e)){var i=RpSys.ins().getData(JobWin,e,"act");this.btnOk.redPoint.visible=i,i?this.mcBtnOk.playFile(ResMgr.getEffName("public_zycs_button01"),-1):(this.mcBtnOk.stop(),this.mcBtnOk.visible=!1)}},e.prototype.updateItem=function(t){t.cfg.type==ItemType.ZsItem&&this.updatePanel()},e.prototype.updatePanel=function(){var t=JobSys.ins().zsData;this.totalPower.text=t.power.toFixed(0),this.bitCurLevel.text=1e4==t.zsId?"wzs":GFunc.getZSName1(t.zsId),this.bitNextLevel.text=t.isMax()?"":GFunc.getZSName1(t.config.nextId),this.taskListArray.source=t.zsTaskDatas;var e=Cfg.getConfig(ZhuanShengLevelConfig,t.zsId),i=t.getCurUseItemId();if(t.isMax())this.attrData.source=AttrData.getAttrDatas(e.attr,[],!0),this.imgZsShi.source="zhuansheng_zycs_"+i,this.lbZsShiCount.text="";else{var n=Cfg.getConfig(ZhuanShengLevelConfig,e.nextId);this.attrData.source=AttrData.getAttrDatas(e.attr,n.attr,!1);var a=BagSys.ins().getItemCount(i),o=a>=1?5767068:15733780;this.lbZsShiCount.textFlow=addColorTF("当前拥有:"+addColor(a+"/1",o)),this.imgZsShi.source="zhuansheng_zycs_"+i}var s=Cfg.getConfig(ChongshengLevelConfig,t.isMaxChong()?t.config.cslevel:t.config.cslevel+1);this.lbLockLevel.text=t.isMaxChong()?"":GFunc.getChineseNum(e.cslevel+1)+"转解锁";var r=s.additem1,u=Cfg.getItemCfg(r.id);this.itemCsReward1.data=r,this.imgSkillIcon.source=ResMgr.getItemIcon(u.getIcon(),IconType.IT_80x80),this.lbCsRewardName1.text="天赋·"+u.getName(),this.lbCsRewardName1.textColor=GConst.PZColor[u.quality],this.lbCsRewardDesc1.textFlow=StrUtil.toTF(s.aoyidesc);var h=GFunc.getItemDataRewardByJob(s.additem2)[0],l=Cfg.getItemCfg(h.id);this.itemCsReward2.data=h,this.lbCsRewardName2.text=l.getName(),this.lbCsRewardName2.textColor=GConst.PZColor[l.quality],this.lbCsDesc.textFlow=StrUtil.toTF(s.desc);var p=t.config.cslevel>=s.level;this.groupCS.visible=!p,this.maxZsImg.visible=p,this.currentState=t.isMax()?"max":"normal"},e.prototype.updateTask=function(){var t=JobSys.ins().zsData;this.taskListArray.source=t.zsTaskDatas},e.prototype.onclick=function(t){switch(t.target){case this.btnOk:JobSys.ins().zsData.isSucceedAllTask()?JobSys.ins().zsData.isReceiveAllTask()?JobSys.ins().sendZS():showtipsFail("领取所有奖励后才可转生"):showtipsFail("请完成所有转生任务");break;case this.imgZsShi:JobSys.ins().zsData.isMax()?showtipsFail("转生已达到上限"):openWin(ZSPanelOneKeyZSTipsWin)}},e.prototype.getCurTaskItem_getbtnGoto=function(){for(var t,e=this.taskList.numElements,i=0;e>i;i++){var n=this.taskList.getChildAt(i);if(n){var a=n.data;if(0==a.state){t=n;break}}}return t?t.getbtnGoto():null},e.prototype.getZsBtn=function(){return this.btnOk},e.getTitle=function(){return"btz_zycs_zs"},e.getSysId=function(){return 202},e.getTabTitle=function(){return"bqz_zycs_zs"},e.isShow=function(){return t.isShow.call(this)},e}(BasePanel);__reflect(ZSPanel.prototype,"ZSPanel"),window.ZSPanel=ZSPanel;var ChatHeadFramePanel=function(t){function e(){var e=t.call(this)||this;return e.type=2,e.ingVis=!1,e.setSkinName(),e.attrList.itemRenderer=ComAttrItem3,e.attrList.dataProvider=e.attrData=new eui.ArrayCollection,e.setItemRenderer(),e.itemListPos.dataProvider=e.listArr=new eui.ArrayCollection,e}return __extends(e,t),e.prototype.setSkinName=function(){this.skinName="ChatHeadFramePanelEUI"},e.prototype.setItemRenderer=function(){this.itemListPos.itemRenderer=ChatHeadFramePanelItem},e.prototype.initList=function(){for(var t=[],e=Cfg.getConfigs(ChatFrameConfig,this.type),i=0,n=e;i<n.length;i++){var a=n[i];t.push(ChatSys.ins().getFrameData(this.type,a.id))}this.listArr.source=t,this.itemListPos.validateNow()},e.prototype.open=function(e){t.prototype.open.call(this,e),this.addClickE(this.btn,this.onClick),this.addClickE(this.btnup,this.onClick),this.addItemTapE(this.itemListPos,this.onListClick);var i=ChatSys.ins();this.addLsn(i.updateChatFrame,this.updateList),this.addLsn(i.selectFrame,this.updateList),this.addLsn(i.upgradeFrame,this.updateList),this.addLsn(RpSys.ins().patchRp,this.updateRp),this.listArr.length||this.initList(),this.updateList(),this.headImg&&(this.headImg.source=ResMgr.getHeadIcon(Actor.ins().sex))},e.prototype.onListClick=function(t){this.updatePanel()},e.prototype.onClick=function(t){var e=this.itemListPos.selectedItem;switch(t.currentTarget){case this.btn:0==e.lv?this.showNotTips():ChatSys.ins().sendSelectFrame(this.type,e.id);break;case this.btnup:var i=Cfg.getConfig(ChatFrameConfig,this.type,e.id).cost;GFunc.isConsumeEnough(i)?ChatSys.ins().sendUpgradeFrame(this.type,e.id):showtipsFail("材料不足")}},e.prototype.showNotTips=function(){showtipsFail("头像框未激活")},e.prototype.updateList=function(){for(var t=this.listArr.source,e=0;e<t.length;e++)this.listArr.itemUpdated(t[e]);this.doSelect()},e.prototype.doSelect=function(t){if(isNaN(t))if(this.itemListPos.selectedIndex<0){var e=ChatSys.ins().selectFrameId[this.type-1];t=e-1}else t=this.itemListPos.selectedIndex;t=0>t?0:t,t!=this.itemListPos.selectedIndex&&(this.itemListPos.selectedIndex=t,this.itemListPos.validateNow(),Timer.ins()["do"](0,200,1,this.updatePos,this),this.updatePos()),this.updatePanel()},e.prototype.updatePos=function(){},e.prototype.updatePanel=function(){var t=this.itemListPos.selectedItem,e=Cfg.getConfig(ChatFrameConfig,t.type,t.id),i="normal";0==t.lv?i="act":t.lv>=e.maxLevel&&(i="max"),this.currentState=i,this.validateNow(),this.updateFrameIcon(e.icon),this.lbLevel.text=t.lv+"r";var n=0==t.lv?addColor("("+e.route+")",16751616):addColor("(已激活)",5767068);this.lbRoute.textFlow=addColorTF(e.name+n);for(var a=AttrData.attrMultiple(e.attr,t.lv),o=AttrData.attrMultiple(e.attr,t.lv+1),s=t.lv>=e.maxLevel,r=[],u=a.length,h=0;u>h;h++){var l=new ComAttrData(a[h],o[h],s);r.push(l)}this.attrData.source=r,this.power0.text=GFunc.getPower(a)+"",this.btn.visible=ChatSys.ins().selectFrameId[this.type-1]!=t.id,this.ingVis=!this.btn.visible;var p=e.cost[0];this.itemConsume.data=e.cost[0];var c=GFunc.getItemCount(p.id);this.consumeStr=addColorTF(GFunc.overLength(c)+"/"+GFunc.overLength(p.count),p.count<=c?5767068:16188934),this.updateRp()},e.prototype.updateRp=function(t){if(void 0===t&&(t=null),!t||t.check(e)){var i=this.itemListPos.selectedItem;this.btnup.redPoint.visible=RpSys.ins().getData(SettingAndChatWin,e,this.type,i.id);for(var n=this.listArr.source,a=0,o=n;a<o.length;a++){var s=o[a];this.listArr.itemUpdated(s)}}},e.prototype.updateFrameIcon=function(t){this.iocnImg.source=ResMgr.getFrameIcon(t)},e.getTabTitle=function(){return"头像框"},e}(BasePanel);__reflect(ChatHeadFramePanel.prototype,"ChatHeadFramePanel"),window.ChatHeadFramePanel=ChatHeadFramePanel;var SkillEditorBaseItem=function(t){function e(){return t.call(this)||this}return __extends(e,t),e.prototype.save=function(){},Object.defineProperty(e.prototype,"isSelected",{get:function(){return!1},enumerable:!0,configurable:!0}),e}(BaseItemRender);__reflect(SkillEditorBaseItem.prototype,"SkillEditorBaseItem");var WxYqhlRankItem=function(t){function e(){var e=t.call(this)||this;return e.skinName="WxYqhlRankItemEUI",e.list.itemRenderer=ItemBaseReward,e}return __extends(e,t),e.prototype.dataChanged=function(){this.data instanceof WxYqhlRankData&&(4==this.data.rank?this.lbRank.text=Lang.common_di+"4-20"+Lang.common_str5:this.lbRank.text=""+Lang.common_di+this.data.rank+Lang.common_str5,this.lbDec.textFlow=addColorTF(this.data.getDec()),this.list.dataProvider=new eui.ArrayCollection(this.data.getConfig().rewards))},e}(BaseItemRender);__reflect(WxYqhlRankItem.prototype,"WxYqhlRankItem"),window.WxYqhlRankItem=WxYqhlRankItem;var WxYqhlEggPanel=function(t){function e(){var e=t.call(this)||this;e.items=[],e.skinName="WxYqhlEggPanelEUI",e.items=[e.item0,e.item1,e.item2,e.item3,e.item4,e.item5,e.item6,e.item7,e.item8],e.lb_link.textFlow=addColorTF("大奖预览",void 0,!0),e.lb_invite.textFlow=addColorTF("邀请",void 0,!0);var i=addColor("邀请好友",5570465),n=addColor("花费仙玉",5570465);return e.lb_tips.textFlow=addColorTF("以下九个金蛋有一个是大奖，可以通过"+i+"或者"+n+"进行砸蛋，祝您好运！"),e}return __extends(e,t),e.prototype.open=function(){t.prototype.open.call(this);for(var e=WxYqhlSys.ins(),i=0,n=this.items;i<n.length;i++){var a=n[i];this.addClickE(a,this.onItemClick)}this.addClickE(this.lb_link,this.onClick),this.addClickE(this.lb_invite,this.onClick),this.addLsn(e.patchEggCountInfo,this.updateCount),this.addLsn(e.patchSmashedEggInfo,this.eggInfoBack),this.addLsn(RpSys.ins().patchRp,this.updateRp),this.updatePanel(),this.updateRp(),RpFun.wxYqhlEggShow=!1,RpFun.showWxYqhlEggRp()},e.prototype.updateRp=function(t){(!t||t.check(e))&&(this.redPoint.visible=RpSys.ins().getData(WxYqhlWin,WxYqhlPanel,e,"yq"))},e.prototype.updateTime=function(){var t=this.getLeftTime();this.lb_time.textFlow=addColorTF(Lang.act_str29+(""+addColor(getFormatTime(t,"dd天hh小时mm分钟ss秒"),5177195)))},e.prototype.getLeftTime=function(){var t=0,e=new Date(Actor.ins().serverTime);return e.setDate(e.getDate()+1),e.setHours(0,0,0,0),t=Math.floor((e.getTime()-Actor.ins().serverTime)/1e3)},e.prototype.updatePanel=function(){for(var t=0;t<this.items.length;t++){var e=WxYqhlSys.ins().getEggDataByPos(t+1);this.items[t].updateData(e)}this.updateCount()},e.prototype.updateCount=function(){var t=WxYqhlSys.ins().isCanSmash();this.lb_count.textFlow=addColorTF("剩余砸蛋次数："+addColor(WxYqhlSys.ins().eggCount,t?5570465:15733780))},e.prototype.eggInfoBack=function(t){this.updatePanel(),this.playEff(t)},e.prototype.onClick=function(t){switch(t.target){case this.lb_link:openWin(WxYqhlEggSubWin);break;case this.lb_invite:WxYqhlSys.ins().sendShareSuccess(),RpFun.wxYqhlEggShow2=!1,RpFun.showWxYqhlEggRp2()}},e.prototype.onItemClick=function(t){var e=t.currentTarget;!t.target||t.target!==e.smashBtn&&t.target!==e.imgIocn||(WxYqhlSys.ins().isCanSmash()?WxYqhlSys.ins().sendSmashedEgg(e.pos):this.onFreeCount(e))},e.prototype.onFreeCount=function(t){var e=Cfg.getConfig(WeChatConstConfig).needCount,i=addColor(e+"仙玉",16751375),n="当前没有免费砸蛋次数，是否使用"+i+"砸蛋？"+addColor("\n（成功邀请好友后可获得免费砸蛋次数）",15733780),a=new PopupData(n);a.sureStr="砸蛋",a.canceStr="邀请",a.setFunction(this,function(){GFunc.checkCurrency(CurType.yb,e)&&WxYqhlSys.ins().sendSmashedEgg(t.pos)},null,function(){WxYqhlSys.ins().sendShareSuccess()}),openWin(CommonCheckTipsWin,a,"WxYqhlEggPanel.Check")},e.prototype.playEff=function(t){var e=this.items[t-1];e.setItemIcon(!1),e.showEggImg(!1);var i=MC.create(getEffName("eggbreak"),1,function(){e.showIcon(),e.showEggImg()});i.x=e.x+e.width/2+5,i.y=e.y+e.height/2-40,this.group.addChild(i)},e.isShow=function(){return WxYqhlSys.ins().isShow()},e.getTitle=function(){return"btz_zycs_yqhl"},e.getTabTitle=function(){return"yqhl_zycs_xyzd"},e}(BasePanel);__reflect(WxYqhlEggPanel.prototype,"WxYqhlEggPanel"),window.WxYqhlEggPanel=WxYqhlEggPanel;var WxYqhlGatherPanel=function(t){function e(){var e=t.call(this)||this;return e.wxTaskGroup=WxTaskGroup.jj,e}return __extends(e,t),e.prototype.setSkinName=function(){this.skinName="WxYqhlGatherPanelEUI"},e.prototype.updatePanel=function(){this.lbDec.text="每天最多邀请"+Cfg.getConfig(WeChatConstConfig).maxInviteCount+"位好友";var t=WxYqhlSys.ins().getTaskDatasByGroup(this.wxTaskGroup).concat();SortUtil.sortOn(t,["sortState"],[SortType.up]),this.listData.source=t},e.getTitle=function(){return"btz_zycs_yqhl"},e.getTabTitle=function(){return"yqhl_zycs_hyqj"},e}(WxYqhlInvitePanel);__reflect(WxYqhlGatherPanel.prototype,"WxYqhlGatherPanel"),window.WxYqhlGatherPanel=WxYqhlGatherPanel;var ActWin=function(t){function e(){var e=t.call(this)||this;return e.onPlace=ActOnPlace.huodong,e}return __extends(e,t),e.getTitle=function(){return"btz_zycs_hddt"},e}(ActBaseWin);__reflect(ActWin.prototype,"ActWin"),window.ActWin=ActWin;var WxYqhlRankPanel=function(t){function e(){var e=t.call(this)||this;return e.skinName="WxYqhlRankPanelEUI",e}return __extends(e,t),e.prototype.open=function(){t.prototype.open.call(this),this.addClickE(this.btnRank,this.onClick),this.addClickE(this.btnSend,this.onClick),this.addLsn(WxYqhlSys.ins().patchRankInfo,this.updatePanel),WxYqhlSys.ins().sendRankInfo(),this.updatePanel(),this.updateTime()},e.prototype.updateTime=function(){t.prototype.updateTime.call(this);var e=WxYqhlSys.ins().getRankTime(),i="dd天hh小时mm分钟ss秒";e<DateUtil.SECOND_PER_HOUR?i="mm分ss秒":e<DateUtil.SECOND_PER_DAY&&(i="hh小时mm分"),this.lbTime.textFlow=addColorTF(e>0?getFormatTime(e,i):Lang.fb_str83)},e.prototype.updatePanel=function(){var t=WxYqhlSys.ins(),e=t.wxYqhlRankDatas;this.itemRank1.data=e[0],this.itemRank2.data=e[1],this.itemRank3.data=e[2],this.itemRank4.data=e[3],this.lbRank.textFlow=addColorTF(Lang.act_str25+addColor(t.myRank||Lang.common_str17,5767068)),this.lbCount.textFlow=addColorTF("成功分享好友："+addColor(t.myCount,5767068))},e.prototype.onClick=function(t){switch(t.currentTarget){case this.btnRank:openWin(WxYqhlRankTipsWin);break;case this.btnSend:WxYqhlSys.ins().sendShareSuccess()}},e.isShow=function(){return WxYqhlSys.ins().isShow()},e.getTitle=function(){return"btz_zycs_yqhl"},e.getTabTitle=function(){return"yqhl_zycs_yqbp"},e}(BasePanel);__reflect(WxYqhlRankPanel.prototype,"WxYqhlRankPanel"),window.WxYqhlRankPanel=WxYqhlRankPanel;var WxYqhlSVIPPanel=function(t){function e(){var e=t.call(this)||this;return e.wxTaskGroup=WxTaskGroup.svip,e}return __extends(e,t),e.prototype.setSkinName=function(){this.skinName="WxYqhlSVIPPanelEUI"},e.getTitle=function(){return"btz_zycs_yqhl"},e.getTabTitle=function(){return"yqhl_zycs_svip"},e}(WxYqhlZsPanel);__reflect(WxYqhlSVIPPanel.prototype,"WxYqhlSVIPPanel"),window.WxYqhlSVIPPanel=WxYqhlSVIPPanel;var DartPanel=function(t){function e(){var e=t.call(this)||this;return e.helpId=107,e.redPointHead=[JJCWin],e.param=null,e}return __extends(e,t),e.prototype.open=function(e,i){void 0===e&&(e=-1),void 0===i&&(i=null),this.param=i,t.prototype.open.call(this,e),this.param=null},e.prototype.setTabItem=function(){this.tab.itemRenderer=BaseTabBtn5},e.prototype.setSkinName=function(){this.skinName="XunBaoMainPanelEUI"},e.prototype.getParam=function(){return[this.param]},e.getTitle=function(){return"btz_zycs_tdjj"},e.getTabTitle=function(){return"bqz_zycs_tdjj"},e.getSysId=function(){return 318},e.openCheck=function(e){void 0===e&&(e=-1);for(var i=[],n=1;n<arguments.length;n++)i[n-1]=arguments[n];var a=t.openCheck.apply(this,[e].concat(i));return a&&!GuildSys.ins().guildID?(showtipsFail("海上霸主需要加入仙盟后才能参与"),openWin(GuildNavWin),!1):a},e.panelNames=[DartPlunderPanel,DartJoinPanel,DartGuildRankPanel,DartRankPanel,ShopYunBiaoPanel],e}(BaseTabPanel);__reflect(DartPanel.prototype,"DartPanel"),window.DartPanel=DartPanel;var QiyuEventBaseData=function(){function t(){this.pos=1,this.state=0,this.timer=0}return t.prototype.parser=function(t){this.state=t.readByte()},t.prototype["goto"]=function(){1==this.getState()?QiyuSys.ins().sendQiyuEventReward(this.pos):(QiyuSys.ins().sendQiyuTaskChallenge(this.pos),closeWin(QiyuWin))},t.prototype.canGoto=function(){return QiyuSys.ins().yunLiValue<=0?(showtipsFail(Lang.qy_str12),!1):!0},t.prototype.getRewards=function(){return this.config.reward},t.prototype.getTime=function(){return Math.max((this.timer-Actor.ins().serverTime)/1e3>>0,0)},t.prototype.getState=function(){return this.state},t.prototype.getMaxPro=function(){return 0},t.prototype.getCurPro=function(){return 0},t.prototype.getBtnStr=function(){return""},t.prototype.getDesc=function(){return""},t.prototype.getRed=function(){return QiyuSys.ins().yunLiValue>0},t.prototype.getTitleRes=function(){return"qy_zycs_msz"+this.config.type},t}();__reflect(QiyuEventBaseData.prototype,"QiyuEventBaseData");var QiyuEventType;!function(t){t[t.XDYQ=1]="XDYQ",t[t.XNKY=2]="XNKY",t[t.DFYJ=3]="DFYJ",t[t.TXXM=4]="TXXM",t[t.YZSX=5]="YZSX",t[t.FYQKD=6]="FYQKD"}(QiyuEventType||(QiyuEventType={}));var CaiQuan;!function(t){t[t.Def=0]="Def",t[t.JD=1]="JD",t[t.ST=2]="ST",t[t.Bu=3]="Bu"}(CaiQuan||(CaiQuan={}));var QiyuEventPanel=function(t){function e(){var e=t.call(this)||this;return e.items=[],e.skinName="QiyuEventPanelEUI",e.items=[e.item1,e.item2,e.item3,e.item4],e}return __extends(e,t),e.prototype.open=function(){t.prototype.open.call(this),this.addClickE(this.helpBtn,this.onClick),this.addClickE(this.btnDuiHuan,this.onClick),this.addClickE(this.item1,this.onListClick),this.addClickE(this.item2,this.onListClick),this.addClickE(this.item3,this.onListClick),this.addClickE(this.item4,this.onListClick),this.addLsn(QiyuSys.ins().patchQiyuEventInfo,this.updateEventPanel),this.addLsn(QiyuSys.ins().patchQiyuRemind,this.updateRp),this.addLsn(QiyuSys.ins().patchQiyuYunliValue,this.updateYunLi),this.updateEventPanel(),this.updateRp()},e.prototype.close=function(){t.prototype.close.call(this)},e.prototype.updateRp=function(t){void 0===t&&(t=null),(!t||t.check(e))&&(this.btnDuiHuan.redPoint.visible=RpSys.ins().getData(QiyuWin,e,QiyuDuiHuanWin))},e.prototype.updateTime=function(){t.prototype.updateTime.call(this);for(var e=0;e<this.items.length;e++)this.items[e].updateTime()},e.prototype.updateEventPanel=function(){this.imgTips.visible=0==QiyuSys.ins().eventDatas.length;for(var t=0;t<this.items.length;t++){var e=QiyuSys.ins().getDataByPos(t+1);e?(this.items[t].data=e,this.items[t].visible=!0):this.items[t].visible=!1}this.updateTime(),this.updateYunLi()},e.prototype.updateYunLi=function(){this.lbValue.text=Lang.qy_str6+"："+QiyuSys.ins().yunLiValue+"/"+Cfg.getConfig(AdventureCommonConfig).yunliMax},e.prototype.onListClick=function(t){if(t&&"btnSend"==t.target.name){var e=t.target.parent.data;e.canGoto()&&e["goto"]()}},e.prototype.onClick=function(t){switch(t.currentTarget){case this.helpBtn:openWin(HelpWin,Cfg.getConfig(HelpInfoConfig,104).text);break;case this.btnDuiHuan:openWin(QiyuDuiHuanWin)}},e.getTitle=function(){return"btz_zycs_qy"},e.getTabTitle=function(){return"bqz_zycs_qy"},e.getSysId=function(){return 296},e}(BasePanel);__reflect(QiyuEventPanel.prototype,"QiyuEventPanel"),window.QiyuEventPanel=QiyuEventPanel;var QMDBPanel=function(t){function e(){var e=t.call(this)||this;e.skinName="QMDBPanelEUI",e.list.itemRenderer=ItemBaseReward,e.list.dataProvider=e.listArr=new eui.ArrayCollection;var i=addColor(Lang.db_str0,15733780),n=addColor(Lang.db_str1,15733780);e.lbdes.textFlow=addColorTF(Lang.db_str2.replace("$str$",i).replace("$str2$",n));var a=Cfg.getConfig(DropBoxConstConfig);return e.listArr.source=a.showRewards.concat(),e}return __extends(e,t),e.prototype.open=function(){t.prototype.open.call(this);var e=FbSys.ins();this.addLsn(e.patchQmdbInfo,this.updateView),this.addLsn(e.patchQmdbActState,this.updateView),this.addLsn(RpSys.ins().patchRp,this.updateRp),this.addClickE(this.btnSend,this.onClick),this.updateRp(),this.updateView()},e.prototype.updateTime=function(){t.prototype.updateTime.call(this)},e.prototype.updateRp=function(t){(!t||t.check(e))&&(this.btnSend.redPoint.visible=RpSys.ins().getData(QiyuWin,e))},e.prototype.updateView=function(){var t=FbSys.ins().qmdbModel,e=t.collectionTimes>0?5767068:15733780;this.lbCount.textFlow=addColorTF(addColor(t.collectionTimes,e)),this.timedata=t.getNextStartTime(),this.groupTime.visible=!1},e.prototype.onClick=function(){var t=FbSys.ins().qmdbModel;return t.isOpen()?t.collectionTimes?(GFunc.isInCity()||GFunc.enterCityOrGuaJi(),void this.closeMyWin()):void showtipsFail(Lang.db_str4):void showtipsFail(Lang.db_str3)},e.getTitle=function(){return"btz_zycs_qmdb"},e.getTabTitle=function(){return"bqz_zycs_qmdb"},e.getSysId=function(){return 345},e}(BasePanel);__reflect(QMDBPanel.prototype,"QMDBPanel"),window.QMDBPanel=QMDBPanel;var RankData=function(){function t(){this.userId=0,this.rank=0,this.playerName=Lang.act_str11,this.vipLv=0,this.svipLv=0}return t.prototype.parser=function(t){this.rank=t.readShort(),this.userId=t.readInt(),this.playerName=t.readString(),this.vipLv=t.readByte(),this.svipLv=t.readByte()},t.prototype.getRankName=function(){return this.playerName},t.prototype.getRankStr=function(){return""},t}();__reflect(RankData.prototype,"RankData");var RankPanel=function(t){function e(){var e=t.call(this)||this;return e.stars=[],e.skinName="RankPanelEUI",e.tab.itemRenderer=RankTabItem,e.tab.dataProvider=e.tabDatas=new eui.ArrayCollection,e.list.itemRenderer=RankItemBase,e.list.dataProvider=e.arrayCollection=new eui.ArrayCollection,e.txUIC=new MC,e.groupMc.addChild(e.txUIC),e.stars=[e.star0,e.star1,e.star2,e.star3],e.groupMcXY=new XY(e.groupMc.x,e.groupMc.y),e}return __extends(e,t),e.prototype.open=function(){t.prototype.open.call(this),this.addClickE(this.btnPraise,this.onClick),this.addClickE(this.list,this.onListItemTap),this.addClickE(this.list,this.onClick),this.addClickE(this.tab,this.onTabChange),this.addLsn(RankSys.ins().patchRankData,this.updateList),this.addLsn(RankSys.ins().patchPraiseResult,this.updateMoBaiSelect),this.addLsn(RankSys.ins().patchPraiseData,this.updateMoBai),this.addLsn(RankSys.ins().patchShowRankType,this.updateShowRankType),RankSys.ins().sendShowRankType(),this.updateShowRankType(),this.infoMC()},e.prototype.close=function(){t.prototype.close.call(this),this.txUIC.reset()
},e.prototype.infoMC=function(){this.txUIC.y=-330},e.prototype.updateShowRankType=function(){this.tabDatas.source=RankSys.ins().indexToType,this.tab.validateNow();var t=RankSys.ins().getCanPraiseIndex();t=isNaN(t)?0:t,this.setSelectedIndex(t),this.AotuSelect(t)},e.prototype.setSelectedIndex=function(t){this.tab.selectedIndex=t;var e=this.getType();this.list.itemRenderer=this.TypeItem,RankSys.ins().sendGetRankData(e),RankSys.ins().sendGetPraise(e)},e.prototype.updateMoBaiSelect=function(){var t=RankSys.ins().getCanPraiseIndex();isNaN(t)?this.setSelectedIndex(this.tab.selectedIndex):(this.setSelectedIndex(t),this.AotuSelect(t))},e.prototype.AotuSelect=function(t){var e=this.tab.getChildAt(t),i=this.scrollerTab.viewport.contentHeight-370,n=this.scrollerTab.viewport.scrollV;n>=i||(this.scrollerTab.viewport.scrollV=e.y)},e.prototype.updateList=function(t){t.type==this.getType()&&(this.firstItem&&(DisUtil.remove(this.firstItem),this.firstItem=null),t.top?(this.none.visible=!1,this.groupBody.visible=!0,this.groupMc.visible=!0,this.firstItem||(this.firstItem=new this.TypeItem,this.firstItem.x=50,this.firstItem.y=475,this.addClickE(this.firstItem,this.onClick),this.groupBody.addChildAt(this.firstItem,1)),this.labelMyRank.textFlow=addColorTF(t.myRank>0&&t.myRank<=1e3?Lang.act_str25+t.myRank:Lang.common_str17),this.firstItem.data=t.top,this.arrayCollection.source=t.dataList,this.list.validateProperties(),this.updateMoBaiBtn()):(this.none.visible=!0,this.groupBody.visible=!1,this.groupMc.visible=!1,this.arrayCollection.source=[],this.labelMyRank.textFlow=addColorTF(Lang.common_str17)))},e.prototype.updateMoBaiBtn=function(){this.btnPraise.enabled=RankSys.ins().canPraiseByType(this.getType()),this.tabDatas.replaceAll(RankSys.ins().indexToType)},e.prototype.onTabChange=function(){this.setSelectedIndex(this.tab.selectedIndex)},e.prototype.onClick=function(t){switch(t.currentTarget){case this.btnPraise:var e=this.getType();RankSys.ins().getRankData(e).praise.praiseCount<1?RankSys.ins().sendPraise(e):showtipsFail(Lang.rank_str7);break;case this.firstItem:var i=this.firstItem.data;i&&this.getType()!=RankType.ZMZL&&LogicSys.ins().sentOtherActor(i.userId)}},e.prototype.onListItemTap=function(){var t=this.list.selectedItem;t&&this.getType()!=RankType.ZMZL&&LogicSys.ins().sentOtherActor(t.userId)},e.prototype.updateMoBai=function(t){if(t.type==this.getType()){switch(this.groupMc.x=this.groupMcXY.x,this.groupMc.y=this.groupMcXY.y,this.hideMCAll(),t.type){case RankType.SQZL:this.updateSqMC(t);break;case RankType.CBZL:this.updateWingMC(t);break;case RankType.SZZL:this.updateSzMC(t);break;case RankType.MLZL:this.updateMeilinMC(t);break;case RankType.JLZL:this.updateDamonMC(t);break;case RankType.YBZL:this.updateYongbingMC(t);break;case RankType.SMZL:this.updateShenmoMC(t);break;case RankType.HQZL:this.updateHunqiMC(t),this.updateComMC(t);break;case RankType.LLDJ:this.updateLilianMC(t),this.updateComMC(t);break;case RankType.TXDJ:this.updateTxMC(t),this.updateComMC(t);break;default:this.updateComMC(t)}var e=Cfg.getWorshipConfig(t.type,Actor.ins().level).awards;this.labelMoney.text=GFunc.overLength(e[0].count),this.groupPraise.visible=t.isShowPraise(),this.updateMoBaiBtn()}},e.prototype.updateComMC=function(t){var e=t.praise,i=e.szId,n=e.damonId,a=e.wingId,o=e.sqId,s=e.sex;this.groupMc.removeChildren();var r=Cfg.getConfig(SzHuanhuaBaseConfig,i).uirole;n=0>=n?1:n;var u=Cfg.getConfig(DamonHuanhuaBaseConfig,n),h=u.uirole,l=u.uihigh;if(this.groupMc.addChild(MC.createCenterGruop(h,-1)),a){var p=Cfg.getConfig(WingHuanhuaBaseConfig,a).uirole,c=MC.createCenterGruop(p,-1);c.verticalCenter=-l,this.groupMc.addChild(c)}var d=MC.createCenterGruop(r[s],-1);d.verticalCenter=-l,this.groupMc.addChild(d),this.groupMc.addChild(MC.createCenterGruop("up_"+h,-1));var g=Cfg.getConfig(ShenqiHuanhuaBaseConfig,o).uirole;d=MC.createCenterGruop(g,-1),d.verticalCenter=-l,this.groupMc.addChild(d)},e.prototype.updateSqMC=function(t){if(this.groupMc.removeChildren(),t.praise.job){var e=Cfg.getConfig(ShenqiHuanhuaBaseConfig,t.praise.sqId).weaponIds[t.praise.job-1],i=Cfg.getConfig(WeaponAppearanceConfig,e).appearance,n=MC.createCenterGruop(ResMgr.getWeaponUIEFFResource(i),-1);this.groupMc.addChild(n)}},e.prototype.updateWingMC=function(t){if(this.groupMc.removeChildren(),t.praise.wingId){var e=Cfg.getConfig(WingHuanhuaBaseConfig,t.praise.wingId).wingIds[t.praise.job-1],i=Cfg.getConfig(WingAppearanceConfig,e).appearance,n=MC.createCenterGruop(ResMgr.getWingUIEFFResource(i),-1);this.groupMc.addChild(n)}},e.prototype.updateMeilinMC=function(t){if(this.groupMc.removeChildren(),t.praise.meilinId>=0){var e=Cfg.getConfig(MeilinHuanhuaBaseConfig,t.praise.meilinId).appearanceId,i=Cfg.getConfig(MeilinAppearanceConfig,e).appearance,n=MC.createCenterGruop(ResMgr.getUIMeilinRes(i),-1);this.groupMc.addChild(n)}},e.prototype.updateHunqiMC=function(t){t.praise.hqId&&(this.lx="lx"+t.praise.hqId,this.groupHunqi.visible=!0)},e.prototype.updateLilianMC=function(t){if(t.praise.junxianId){var e=Cfg.getConfig(JunxianLevelConfig,t.praise.junxianId);this.groupJunXian.visible=!0,this.imgJunXian.source="lilian_zycs_jx"+e.junxian}},e.prototype.updateTxMC=function(t){if(t.praise.txId){var e=Cfg.getConfig(TouxianConfig,t.praise.txId);this.txUIC.playFile(ResMgr.getEffName(ResMgr.touxianMCBystage(e.stage)),-1),this.txUIC.visible=!0,this.groupTouxian.visible=!0}},e.prototype.updateSzMC=function(t){if(this.groupMc.removeChildren(),t.praise.job){this.groupMc.x=360,this.groupMc.y=300;var e=Cfg.getConfig(SzHuanhuaBaseConfig,t.praise.szId).uibody[t.praise.sex],i=MC.createCenterGruop(e,-1);this.groupMc.addChild(i)}},e.prototype.updateYongbingMC=function(t){if(this.groupMc.removeChildren(),t.praise.yongbingId){var e=Cfg.getConfig(YongbingHuanhuaBaseConfig,t.praise.yongbingId).uibody,i=MC.createCenterGruop(e,-1);this.groupMc.addChild(i)}},e.prototype.updateDamonMC=function(t){if(this.groupMc.removeChildren(),t.praise.damonId){var e=Cfg.getConfig(DamonHuanhuaBaseConfig,t.praise.damonId).uibody,i=MC.createCenterGruop(e,-1);this.groupMc.addChild(i)}},e.prototype.updateShenmoMC=function(t){if(this.groupMc.removeChildren(),t.praise.shenmoId){var e=Cfg.getConfig(ShenmoHuanhuaBaseConfig,t.praise.shenmoId).uibody,i=MC.createCenterGruop(e,-1);this.groupMc.addChild(i)}},e.prototype.hideMCAll=function(){this.txUIC.visible=!1,this.groupTouxian.visible=!1,this.groupJunXian.visible=!1,this.groupHunqi.visible=!1},e.prototype.getType=function(){return this.tab.selectedItem},Object.defineProperty(e.prototype,"TypeItem",{get:function(){return this.getType()==RankType.JSZL?RankItemPower:RankItemBase},enumerable:!0,configurable:!0}),e.getSysId=function(){return 29},e.getTitle=function(){return"btz_zycs_phb"},e.getTabTitle=function(){return"bqz_zycs_phb"},e}(BasePanel);__reflect(RankPanel.prototype,"RankPanel"),window.RankPanel=RankPanel;var YYMSPanel=function(t){function e(){var e=t.call(this)||this;return e.selectIndex=0,e.initUI(),e}return __extends(e,t),e.prototype.initUI=function(){this.skinName="YYMSPanelEUI",t.prototype.initUI.call(this),this.listTab.itemRenderer=YYMSTabItem,this.listTab.dataProvider=this.listTabArr=new eui.ArrayCollection,this.listTabArr.source=[Cfg.getConfig(YYMSConfig,1),Cfg.getConfig(YYMSConfig,2),Cfg.getConfig(YYMSConfig,3)],this.listAward.itemRenderer=ItemBaseRewardColor,this.listAward.dataProvider=this.listAwardArr=new eui.ArrayCollection,this.btnRecharges=[this.btnRecharge0,this.btnRecharge1,this.btnRecharge2],this.mcBox=GFunc.playUIMovie("yyms1",0,0,this.groupBoxEff,-1),GFunc.playUIMovie("yyms2",89,35,this.btnRechargeAll,-1),GFunc.playUIMovie("yyms2",89,35,this.btnGet,-1)},e.prototype.open=function(){t.prototype.open.call(this),this.addClickE(this.btnLeft,this.onClick),this.addClickE(this.btnRight,this.onClick),this.addClickE(this.btnRecharge0,this.onClick),this.addClickE(this.btnRecharge1,this.onClick),this.addClickE(this.btnRecharge2,this.onClick),this.addClickE(this.btnRechargeAll,this.onClick),this.addClickE(this.btnGet,this.onClick),this.addItemTapE(this.listTab,this.onItemClick),this.addLsn(RechargeActSys.ins().patchYYMS,this.update),this.addLsn(RpSys.ins().patchRp,this.updateRp),this.listTab.validateNow(),this.listTab.selectedIndex=this.selectIndex=this.getAutoIndex(),this.update(),this.updateRp()},e.prototype.getAutoIndex=function(){for(var t=0,e=RechargeActSys.ins().yymsRechargeStates,i=0;i<e.length;i++)if(1==RechargeActSys.ins().getYYMSState(i)){t=i;break}return t},e.prototype.updateRp=function(t){if(!t||t.check(this.getThisDef()))for(var e=0;e<this.listTab.numElements;e++){var i=this.listTab.getElementAt(e);i&&i.updateRp()}},e.prototype.onItemClick=function(t){this.selectIndex=t.itemIndex,this.update()},e.prototype.update=function(){var t=this.getIdByIndex(this.selectIndex),e=Cfg.getConfig(YYMSConfig,t);this.imgBox.source="yyms_zycs_box"+t;for(var i=GFunc.getItemDataRewardByJob(e.rewards),n=[],a=0,o=i;a<o.length;a++){var s=o[a];s.tempColor=16759621,n.push(s)}this.listAwardArr.source=n,this.labelYuanjia.text="原价"+Cfg.getConfig(PayMoneyConfig,e.cash).yuanjia+"元",this.imgBoxName.source="yyms_zycs_s"+t,this.updateBtnState()},e.prototype.updateBtnState=function(){this.btnLeft.visible=this.selectIndex>0,this.btnRight.visible=this.selectIndex<this.listTabArr.length-1,this.btnRecharge0.visible=0==this.selectIndex,this.btnRecharge1.visible=1==this.selectIndex,this.btnRecharge2.visible=2==this.selectIndex;var t=RechargeActSys.ins().getYYMSState(this.selectIndex);this.groupRechargeBtn.visible=0==t,this.btnGet.visible=1==t,this.imgYLQ.visible=2==t;var e=RechargeActSys.ins().isYYMSBuyAll();this.btnRechargeAll.visible=!e,this.labelYGMAll.visible=e},e.prototype.getIdByIndex=function(t){return t+1},e.prototype.onClick=function(t){switch(t.currentTarget){case this.btnLeft:this.selectIndex>0&&this.selectIndex--,this.listTab.selectedIndex=this.selectIndex,this.update();break;case this.btnRight:this.selectIndex<this.listTabArr.length-1&&this.selectIndex++,this.listTab.selectedIndex=this.selectIndex,this.update();break;case this.btnRecharge0:VipSys.ins().showReCharge(Cfg.getConfig(YYMSConfig,1).cash);break;case this.btnRecharge1:VipSys.ins().showReCharge(Cfg.getConfig(YYMSConfig,2).cash);break;case this.btnRecharge2:VipSys.ins().showReCharge(Cfg.getConfig(YYMSConfig,3).cash);break;case this.btnRechargeAll:VipSys.ins().showReCharge(Cfg.getConfig(YYMSConfig,4).cash);break;case this.btnGet:var e=this.getIdByIndex(this.selectIndex);RechargeActSys.ins().sendYYMS(e)}},e.getTitle=function(){return"btz_zycs_1yuanms"},e.getTabTitle=function(){return"bqz_zycs_1yuanms"},e}(BasePanel);__reflect(YYMSPanel.prototype,"YYMSPanel"),window.YYMSPanel=YYMSPanel;var SVIPMSPanel=function(t){function e(){var e=t.call(this)||this;return e.selectIndex=0,e.initUI(),e}return __extends(e,t),e.prototype.initUI=function(){this.skinName="SVIPMSPanelEUI",t.prototype.initUI.call(this),this.listTab.itemRenderer=SVIPMSTabItem,this.listTab.dataProvider=this.listTabArr=new eui.ArrayCollection,this.listTabArr.source=[Cfg.getConfig(SVIPMSConfig,1),Cfg.getConfig(SVIPMSConfig,2),Cfg.getConfig(SVIPMSConfig,3)],this.listAward.itemRenderer=ItemBaseRewardName,this.listAward.dataProvider=this.listAwardArr=new eui.ArrayCollection,this.btnRecharges=[this.btnRecharge0,this.btnRecharge1,this.btnRecharge2,this.btnRechargeAll],this.mcBox=GFunc.playUIMovie("yyms1",0,0,this.groupBoxEff,-1),GFunc.playUIMovie("yyms2",89,35,this.btnRechargeAll,-1),GFunc.playUIMovie("yyms2",89,35,this.btnGet,-1)},e.prototype.open=function(){t.prototype.open.call(this),this.addClickE(this.btnLeft,this.onClick),this.addClickE(this.btnRight,this.onClick),this.addClickE(this.btnRecharge0,this.onClick),this.addClickE(this.btnRecharge1,this.onClick),this.addClickE(this.btnRecharge2,this.onClick),this.addClickE(this.btnRechargeAll,this.onClick),this.addClickE(this.btnGet,this.onClick),this.addItemTapE(this.listTab,this.onItemClick),this.addLsn(RechargeActSys.ins().patchSVIPMS,this.update),this.addLsn(RpSys.ins().patchRp,this.updateRp),this.listTab.validateNow(),this.listTab.selectedIndex=this.selectIndex=this.getAutoIndex(),this.update(),this.updateRp();var e=Cfg.getConfig(SVIPMSConfig,this.getIdByIndex(3));this.btnRechargeAll.label=Cfg.getPayMoneyRMBByYb(e.cash)+"元秒杀"},e.prototype.getAutoIndex=function(){for(var t=0,e=RechargeActSys.ins().svipmsRechargeStates,i=0;i<e.length;i++)if(1==RechargeActSys.ins().getSVIPMSState(i)){t=i;break}return t},e.prototype.updateRp=function(t){if(!t||t.check(this.getThisDef()))for(var e=0;e<this.listTab.numElements;e++){var i=this.listTab.getElementAt(e);i&&i.updateRp()}},e.prototype.onItemClick=function(t){this.selectIndex=t.itemIndex,this.update()},e.prototype.update=function(){var t=this.getIdByIndex(this.selectIndex),e=Cfg.getConfig(SVIPMSConfig,t);this.imgBox.source="yyms_zycs_box"+t,this.listAwardArr.source=GFunc.getItemDataRewardByJob(e.rewards),this.labelYuanjia.text="原价"+Cfg.getConfig(PayMoneyConfig,e.cash).yuanjia+"元",this.imgBoxName.source="svipms_zycs_s"+t;var i=this.btnRecharges[this.selectIndex];i.label=Cfg.getPayMoneyRMBByYb(e.cash)+"元秒杀",this.updateBtnState()},e.prototype.updateBtnState=function(){this.btnLeft.visible=this.selectIndex>0,this.btnRight.visible=this.selectIndex<this.listTabArr.length-1,this.btnRecharge0.visible=0==this.selectIndex,this.btnRecharge1.visible=1==this.selectIndex,this.btnRecharge2.visible=2==this.selectIndex;var t=RechargeActSys.ins().getSVIPMSState(this.selectIndex);this.groupRechargeBtn.visible=0==t,this.btnGet.visible=1==t,this.imgYLQ.visible=2==t;var e=RechargeActSys.ins().isSVIPMSBuyAll();this.btnRechargeAll.visible=!e,this.labelYGMAll.visible=e},e.prototype.getIdByIndex=function(t){return t+1},e.prototype.onClick=function(t){switch(t.currentTarget){case this.btnLeft:this.selectIndex>0&&this.selectIndex--,this.listTab.selectedIndex=this.selectIndex,this.update();break;case this.btnRight:this.selectIndex<this.listTabArr.length-1&&this.selectIndex++,this.listTab.selectedIndex=this.selectIndex,this.update();break;case this.btnRecharge0:case this.btnRecharge1:case this.btnRecharge2:case this.btnRechargeAll:var e=this.btnRecharges.indexOf(t.currentTarget),i=this.getIdByIndex(e),n=Cfg.getConfig(SVIPMSConfig,i);if(Actor.ins().sVipLv>=n.sviplv)VipSys.ins().showReCharge(n.cash);else{var a=new PopupData("购买礼包需要SVIP"+n.sviplv+",是否前往提升SVIP？");a.setFunction(this,function(){openWin(VipWin,1)}),openWin(CommonTipsWin2,a)}break;case this.btnGet:var o=this.getIdByIndex(this.selectIndex);RechargeActSys.ins().sendSVIPMS(o)}},e.getTitle=function(){return"btz_zycs_svipms"},e.getTabTitle=function(){return"bqz_zycs_svipms"},e}(BasePanel);__reflect(SVIPMSPanel.prototype,"SVIPMSPanel"),window.SVIPMSPanel=SVIPMSPanel;var DaZaoEquipPanel=function(t){function e(){var e=t.call(this)||this;return e.itemConsumes=[],e.setSkinName(),e.init(),e}return __extends(e,t),e.prototype.setSkinName=function(){this.skinName="DaZaoEquipPanelEUI"},e.prototype.init=function(){this.itemListPos.itemRenderer=DaZaoEquipPosTab,this.itemListPosArray=new eui.ArrayCollection,this.itemListPos.dataProvider=this.itemListPosArray,this.itemConsumes=[this.itemConsume0,this.itemConsume1,this.itemConsume2,this.itemConsume3,this.itemConsume4]},e.prototype.open=function(e){t.prototype.open.call(this),this.resetPanel(),this.data=e,this.addClickE(this.itemTarget,this.onClick),this.addClickE(this.btnFangRu,this.onClick),this.addClickE(this.btnDaZao,this.onClick),this.addClickE(this.itemConsume0,this.onClick),this.addClickE(this.itemConsume1,this.onClick),this.addClickE(this.itemConsume2,this.onClick),this.addClickE(this.itemConsume3,this.onClick),this.addClickE(this.itemConsume4,this.onClick),this.addItemTapE(this.itemListPos,this.onPosListClick),this.addLsn(EquipSys.ins().patchDaZaoEquip,this.updateDaZaoSucceed),this.addLsn(EquipSys.ins().patchDaZaoEquipSelect,this.onSelectConsume),this.addLsn(BagSys.ins().patchEquipChange,this.updatePanel),this.addLsn(BagSys.ins().patchEquiChange,this.updateCount),this.addLsn(RpSys.ins().patchRp,this.updateRp),this.updatePanel()},e.prototype.updatePanel=function(){this.lbConsumeDesc.textFlow=addColorTF(this.data.getConsumeDesc()),this.lbEquipDesc.textFlow=addColorTF(this.data.getEquipDaZaoDesc()),this.itemListPosArray.source=this.data.daZaoTabEqupPosData,this.itemListPos.validateNow(),this.validateNow(),this.updatePos(this.data.getTuiJianSubTabIndex()),this.updateCount(),this.updateConsumeName()},e.prototype.updateConsumeName=function(){this.lbConsumeName.textFlow=addColorTF("可放入"+addColor(this.data.stage+"阶红色"+(this.data.star-1)+"星",16773815)+"装备")},e.prototype.updateCount=function(){var t=BagSys.ins().getEquipByStarRank(this.data.star-1,this.data.stage).length;this.lbHaveCount.textFlow=addColorTF("拥有:"+addColor(t,16115290))},e.prototype.updateRp=function(t){void 0===t&&(t=null),(!t||t.check(DaZaoMainPanel))&&this.updatePanel()},e.prototype.updatePos=function(t){this.selectPos(t);var e=this.data.config,i=e.equipid[0][this.curPos],n=GFunc.creatItemDataById(i);this.itemTarget.data=n,this.lbEquipName.text=n.cfg.getName(),this.lbEquipName.textColor=16773815},e.prototype.selectPos=function(t){void 0===t&&(t=0),this.itemListPos.selectedIndex=t},e.prototype.onPosListClick=function(t){var e=t.itemRenderer.data;this.updatePos(e.pos)},e.prototype.showCostTips=function(){openWin(MeNeedLevelWin,2)},e.prototype.onClick=function(t){var e=[];switch(t.currentTarget){case this.itemTarget:var i=this.itemTarget.data;i&&GFunc.openItemTips(i);break;case this.btnFangRu:this.oneFangRu(),e=this.getCurSelectEquiphandle(),e.length<this.itemConsumes.length&&(showtipsFail("材料不足"),this.showCostTips());break;case this.btnDaZao:this.sendDaZao();break;case this.itemConsume0:case this.itemConsume1:case this.itemConsume2:case this.itemConsume3:case this.itemConsume4:var n=this.getEquipList();n.length>0?openWin(DaZaoEquipSelectWin,this.itemConsumes.indexOf(t.currentTarget),this.data.star-1,this.data.stage,n):(showtipsFail("材料不足"),this.showCostTips())}},e.prototype.sendDaZao=function(){for(var t=[],e=[],i=0;i<this.itemConsumes.length;i++){var n=this.itemConsumes[i].data;n&&(n.power>BagSys.ins().getEquipByIndex(n.cfg.subType).power&&e.push(n),t.push(n.handle))}if(t.length==this.itemConsumes.length){var a=this.itemTarget.data;e.length>0?openWin(DaZaoTipsWin,e,function(){EquipSys.ins().sendDaZaoEquip(a.id,t)}):EquipSys.ins().sendDaZaoEquip(a.id,t)}else showtipsFail("当前放入的材料不足"+this.itemConsumes.length+"件"),this.showCostTips()},e.prototype.resetPanel=function(){for(var t=0;t<this.itemConsumes.length;t++)this.itemConsumes[t].data=null},e.prototype.getCurSelectEquiphandle=function(){for(var t=[],e=0;e<this.itemConsumes.length;e++){var i=this.itemConsumes[e].data;i&&t.push(i.handle)}return t},e.prototype.oneFangRu=function(){for(var t=this.getEquipList(),e=0;e<t.length;e++){var i=t[e];if(i)for(var n=0;n<this.itemConsumes.length;n++)if(null==this.itemConsumes[n].data){this.itemConsumes[n].data=i;break}}},e.prototype.getEquipList=function(){for(var t=BagSys.ins().getEquipByStarRank(this.data.star-1,this.data.stage).concat(),e=this.getCurSelectEquiphandle(),i=t.length-1;i>=0;i--){var n=t[i];e.indexOf(n.handle)>-1&&t.splice(i,1)}return t},e.prototype.onSelectConsume=function(t,e){for(var i,n=0;n<this.itemConsumes.length;n++)if(i=this.itemConsumes[n].data,i&&i.handle==e.handle)return void showtipsFail("已经存在列表");this.itemConsumes[t].data=e},e.prototype.updateDaZaoSucceed=function(){this.resetPanel(),this.updateCount()},Object.defineProperty(e.prototype,"curPos",{get:function(){var t=this.itemListPos.selectedItem;return t.pos},enumerable:!0,configurable:!0}),__decorate([callDelay()],e.prototype,"updatePos",null),e}(BasePanel);__reflect(DaZaoEquipPanel.prototype,"DaZaoEquipPanel"),window.DaZaoEquipPanel=DaZaoEquipPanel;var DaZaoMainPanel=function(t){function e(){var e=t.call(this)||this;return e.panels=[],e.curPanelName="",e.init(),e}return __extends(e,t),e.prototype.init=function(){this.skinName="DaZaoMainPanelEUI",this.itemList.itemRenderer=DaZaoTabItem,this.itemListArray=new eui.ArrayCollection,this.itemList.dataProvider=this.itemListArray},e.prototype.open=function(){t.prototype.open.call(this),this.addLsn(EquipSys.ins().patchDaZaoFenJie,this.updateItem),this.addLsn(EquipSys.ins().patchDaZaoEquip,this.updateItem),this.addLsn(RpSys.ins().patchRp,this.updateRp),this.addClickE(this.itemList,this.onMenuClick),this.iniPanle()},e.prototype.close=function(){t.prototype.close.call(this),this.curItem.select(!1)},e.prototype.updateRp=function(t){if(void 0===t&&(t=null),!t||t.check(e))for(var i=this.itemList.numElements,n=0;i>n;n++){var a=this.itemList.getElementAt(n);a&&a.updateRedPoint()}},e.prototype.updateItem=function(){for(var t=this.itemList.numElements,e=0;t>e;e++){var i=this.itemList.getElementAt(e);i&&i.updateItem()}},e.prototype.updatePanel=function(){this.itemListArray.source=EquipSys.ins().daZaoTabDatas,this.itemList.validateNow()},e.prototype.iniPanle=function(){this.updatePanel();var t=this.getDefaultTabIndex();this.curItem=this.itemList.getElementAt(t),this.curItem.select(!0);var e=this.curItem.data,i=e.getRedPointSubTabIndex(),n=-1==i?e.getTuiJianSubTabIndex():i;this.curItem.selectSubTabIndex(n,!0),this.curItemSub=this.curItem.getItemIndex(n);var a=this.curItemSub.data;this.openPanel(a.getPanelName(),a)},e.prototype.getDefaultTabIndex=function(){for(var t=-1,i=this.itemList.numElements,n=0;i>n;n++){var a=this.itemList.getElementAt(n);if(a){var o=a.data,s=RpSys.ins().getData(ForgeWin,e,o.tabName);if(s){t=n;break}}}return t=-1==t?EquipSys.ins().getTuiJianTabIndex():t},e.prototype.onMenuClick=function(t){if("DaZaoTabItem"==t.target.name){var e=t.target,i=e.data;if(Actor.ins().zsId>=i.zslevel){this.curItem.select(!1),this.curItemSub.select(!1),e.select(!0);var n=i.getRedPointSubTabIndex(),a=-1==n?i.getTuiJianSubTabIndex():n;e.selectSubTabIndex(a,!0),this.curItem=e,this.curItemSub=e.getItemIndex(a);var o=this.curItemSub.data;this.openPanel(o.getPanelName(),o),this.itemScroller.validateNow()}else showtipsFail(GFunc.getZSNameBydb(i.zslevel)+"开启")}else if("DaZaoTabItemSub"==t.target.name){var e=t.target,i=e.data;Actor.ins().zsId>=i.zslevel?(this.curItemSub.select(!1),e.select(!0),this.curItemSub=e,this.openPanel(i.getPanelName(),i)):showtipsFail(GFunc.getZSNameBydb(i.zslevel)+"开启")}},e.prototype.openPanel=function(t,e){if(this.curPanelName!=t){var i=getDefinitionByName(t);this.curPanel&&this.curPanel.close(),this.curPanel=new i,this.curPanel.open(e),this.groupPanel.removeChildren(),this.groupPanel.addChild(this.curPanel),this.curPanelName=t}this.curData!=e&&(this.curData=e,this.curPanel.open(e))},e.prototype.onClick=function(t){t.target},e.getSysId=function(){return 221},e.getTitle=function(){return"btz_zycs_dz"},e.getTabTitle=function(){return"bqz_zycs_dz"},e}(BasePanel);__reflect(DaZaoMainPanel.prototype,"DaZaoMainPanel"),window.DaZaoMainPanel=DaZaoMainPanel;var DaZaoTabGodRingStageData=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.pos=EquipPos.RING1,e}return __extends(e,t),Object.defineProperty(e.prototype,"star",{get:function(){var t=BagSys.ins().getEquipByIndex(this.pos),e=t.hasEquipOn()?Cfg.getItemCfg(t.id).star:0;return e},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"stage",{get:function(){var t=BagSys.ins().getEquipByIndex(this.pos),e=t.hasEquipOn()?Cfg.getItemCfg(t.id).rank:0;return e},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"config",{get:function(){var t,e=BagSys.ins().getEquipByIndex(this.pos);return t=e.hasEquipOn()?Cfg.getConfig(DazaoRingStageConfig,e.id):Cfg.getConfig(DazaoRingStageConfig,this.getMinRingId())},enumerable:!0,configurable:!0}),e.prototype.getPanelName=function(){return egret.getQualifiedClassName(DaZaoRankPanel)},Object.defineProperty(e.prototype,"tabName",{get:function(){return"仙戒升阶"},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"consumeDesc",{get:function(){return"升阶消耗"},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"maxLevelDesc",{get:function(){return"当前装备已达最高阶,无法再提升"},enumerable:!0,configurable:!0}),e.prototype.getNoEquipRankTips=function(){return"穿戴戒指后才能升阶"},e.prototype.getEquipDaZaoDesc=function(){if(this.isMax())return"当前装备已达最高阶,无法在提升";var t=BagSys.ins().getEquipByIndex(this.pos),e=Cfg.getItemCfg(t.hasEquipOn()?t.id:this.getMinRingId());return"必定获得"+addColor(e.rank+1+"阶"+e.star+"星"+GFunc.getEquipNameByType(e.subType),16711680)+"一件"},e.prototype.getConsumeDesc=function(){return Cfg.getConfig(DazaoCommonConfig).ringConsumeDesc},e.prototype.getMinRingId=function(){return Cfg.getConfig(DazaoCommonConfig).minRankGodRing[this.job]},Object.defineProperty(e.prototype,"job",{get:function(){return 0},enumerable:!0,configurable:!0}),e.prototype.isMax=function(){return this.stage>=Cfg.getConfig(DazaoCommonConfig).ringMaxRank},e.prototype.sendUp=function(){EquipSys.ins().sendDaZaoRingUpRank(this.pos)},e.prototype.getRedPoint=function(){var t=BagSys.ins().getEquipByIndex(this.pos),e=!this.isMax()&&t.hasEquipOn()&&GFunc.isConsumeEnough(this.config.needitem);return e},e}(DaZaoTabSubDataBase);__reflect(DaZaoTabGodRingStageData.prototype,"DaZaoTabGodRingStageData");var ActData1_1=function(t){function e(){return t.call(this)||this}return __extends(e,t),e.prototype.parser=function(t){this.record=t.readDouble()},e.prototype.parserChange=function(t){t.readShort();return this.record=t.readDouble(),this.changIndex},e.prototype.getConfigs=function(){return this.configs||(this.configs=Cfg.getConfigs(ActivityType1Config,this.actId,CondType.NONE))},e.prototype.getCondition=function(t){var e=t;return this.dabiao>=e.condition},e.prototype.getItemDatas=function(){var t=this.getConfigs(),e=[];for(var i in t){var n=new ActDataItem1Dabiao(t[i],this.getRewardStateById(t[i].index),this.actId,this.getActOpenState());n.yidabiao=this.dabiao,e.push(n)}return e},Object.defineProperty(e.prototype,"dabiao",{get:function(){return Actor.ins().level},enumerable:!0,configurable:!0}),e}(ActDataBase);__reflect(ActData1_1.prototype,"ActData1_1");var ActDataItem1Dabiao=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.yidabiao=0,e}return __extends(e,t),e}(ActDataItem);__reflect(ActDataItem1Dabiao.prototype,"ActDataItem1Dabiao"),window.ActData1_1=ActData1_1;var RoleItem=function(t){function e(){var e=t.call(this)||this;return e.skinName="RoleEquipItemEUI",e.init(),e}return __extends(e,t),e.prototype.init=function(){this.redPoint.visible=!1,this.imgPlus.visible=!1,this.mcFujia=new MC,this.mcFujia.x=47,this.mcFujia.y=44,this.groupMc.addChild(this.mcFujia),this.mc=new MC,this.groupMc.addChild(this.mc),this.createClickSprite()},e.prototype.createClickSprite=function(){this.clickSpr1=new egret.Sprite,this.clickSpr1.graphics.beginFill(16777215,.001),this.clickSpr1.graphics.drawRect(0,0,80,80),this.clickSpr1.graphics.endFill(),this.clickSpr1.width=85,this.clickSpr1.height=85,this.clickSpr1.x=5,this.clickSpr1.y=5,this.addChild(this.clickSpr1)},e.prototype.dataChanged=function(){t.prototype.dataChanged.call(this);var e=this.data;this.updatePlus(),e.hasEquipOn()&&e.cfg.quality>=QualityType.Green?this.showMc(e.cfg.quality):(this.mc.visible=!1,this.mc.stop()),e.hasEquipOn()&&e.zyFuJia>0?this.showFujiaMc(!0):this.showFujiaMc(!1)},e.prototype.updateRedPoint=function(){var t=this.data;if(t){var e=RpSys.ins().getData(RoleWin,RolePanel,"equip",t.equipPos);this.imgPlus.visible=this.redPoint.visible=e,t.hasEquipOn()&&(this.imgPlus.visible=!1)}},e.prototype.updatePlus=function(){var t=this.data;t.hasEquipOn()?(this.bitRank.text=t.cfg.rank+"r",this.showIcon(t.cfg.getIcon()),this.imgPlus.visible=!1,this.bitRank.visible=!0,this.imgEquipBg.source=this.getEquipQualityBg(),this.setStar(t.cfg.star)):(this.setStar(0),this.imgIcon.source="",this.imgEquipBg.source=this.getEquipDefaulBg(),this.bitRank.visible=!1),this.bitlv.text=t.strengthen>0?"+"+t.strengthen:""},e.prototype.hidePlus=function(){this.imgPlus.visible=!1},e.prototype.showIcon=function(t){this.imgIcon.source=ResMgr.getItemIcon(t,IconType.IT_80x80)},e.prototype.showMc=function(t){this.mc.playFile(ResMgr.getEquipEffResource(t),-1)},e.prototype.showFujiaMc=function(t){t?(this.mcFujia.playFile(ResMgr.getEffName("fujia1"),-1),this.mcFujia.play()):(this.mcFujia.visible=!1,this.mcFujia.stop())},e.prototype.onClick=function(t){},e.prototype.getItemData=function(){return this.data},e.prototype.hitTestPoint=function(t,e,i){return this.clickSpr1.hitTestPoint(t,e,i)},e.prototype.setStar=function(t){this.groupStart.removeChildren();for(var e=0;t>e;e++){var i=new eui.Image;i.source="role_zycs_star",i.touchEnabled=!1,this.groupStart.addChild(i)}this.imgStarBg.visible=t>0},e.prototype.getEquipDefaulBg=function(){var t=this.data;return ResMgr.getEquipDefaultIcon(t.equipPos)},e.prototype.getEquipQualityBg=function(){var t=this.data;return ResMgr.getEquipQualityBg(t.cfg.quality)},e}(BaseItemRender);__reflect(RoleItem.prototype,"RoleItem"),window.RoleItem=RoleItem;var RolePanel=function(t){function e(){var e=t.call(this)||this;return e.mcbtnOneKeyEquip=new MC,e.init(),e.mcbtnOneKeyEquip.x=e.btnOneKeyEquip.width/2,e.mcbtnOneKeyEquip.y=e.btnOneKeyEquip.height/2,e.btnOneKeyEquip.addChild(e.mcbtnOneKeyEquip),urlParam.isShenhe&&(e.btnZLXZ.visible=e.btnShengbei.visible=e.btnZhaoCaiLong.visible=e.btnXLRing.visible=!1),e}return __extends(e,t),e.prototype.init=function(){this.skinName="RolePanelEUI",this.currentState="own",this.equips=[];for(var t=0;t<EquipPos.MAX;t++)this.equips[t]=this["item"+t],this.equips[t].touchEnabled=!0;this.setRedPointHead(RoleWin)},e.prototype.open=function(e){this.seePlayModel=e,t.prototype.open.call(this),this.addClickE(this,this.onClick),this.addClickE(this.item0,this.onClickItem),this.addClickE(this.item1,this.onClickItem),this.addClickE(this.item2,this.onClickItem),this.addClickE(this.item3,this.onClickItem),this.addClickE(this.item4,this.onClickItem),this.addClickE(this.item5,this.onClickItem),this.addClickE(this.item6,this.onClickItem),this.addClickE(this.item7,this.onClickItem),this.addClickE(this.item8,this.onClickItem),this.addClickE(this.item9,this.onClickItem),this.addLsn(LogicSys.ins().patchLevelChange,this.roleLevelChange),this.addLsn(BagSys.ins().patchEquipChange,this.updataEquip),this.addLsn(SqXySys.ins().patchShenQiHuanHua,this.updateEntity),this.addLsn(SqXySys.ins().patchWingHuanHua,this.updateEntity),this.addLsn(SqXySys.ins().patchSzHuanHua,this.updateEntity),this.addLsn(RechargePowerSys.ins().patchhaoCaiLongBuy,this.updateBtnState),this.addLsn(RechargePowerSys.ins().patchXunZhangBuy,this.updateBtnState),this.addLsn(RechargePowerSys.ins().patchShengbeiXiangqian,this.updateBtnState),this.addLsn(XianLuSys.ins().updateXianyuanInfo,this.updateBtnState),this.addLsn(RpSys.ins().patchRp,this.updateRp),this.updatePanel(),this.roleLevelChange(),this.updateRp(),this.updateEntity(),this.updateBtnState()},e.prototype.updateEntity=function(){this.groupEntity.removeChildren();var t,e=0;if(this.seePlayModel.damonId){var i=Cfg.getConfig(DamonHuanhuaBaseConfig,this.seePlayModel.damonId),n=i.uirole,a=i.uihigh;this.groupEntity.addChild(MC.createCenterGruop(n,-1)),e=a,t=n}var o,s=this.seePlayModel.getWingFileName();s&&(o=MC.createCenterGruop(this.seePlayModel.getWingFileName(),-1),o.verticalCenter=-e,this.groupEntity.addChild(o)),o=MC.createCenterGruop(this.seePlayModel.getBodyFileName(),-1),o.verticalCenter=-e,this.groupEntity.addChild(o),t&&this.groupEntity.addChild(MC.createCenterGruop("up_"+t,-1)),o=MC.createCenterGruop(this.seePlayModel.getWeaponFileName(),-1),o.verticalCenter=-e,this.groupEntity.addChild(o);var r=this.seePlayModel.getShengLingFileName();""!=r&&(o=MC.createCenterGruop(r,-1),o.verticalCenter=-e,this.groupEntity.addChild(o))},e.prototype.updatePanel=function(){this.updataEquip(),this.updateRoleRedPoint()},e.prototype.roleLevelChange=function(){},e.prototype.updataEquip=function(){var t=Actor.ins().attrData;this.setEquip(t)},e.prototype.updateRp=function(t){void 0===t&&(t=null),(!t||t.check(ShengLingWin))&&(this.btnFruit.redPoint.visible=RpSys.ins().getData(RoleWin,e,ShengLingWin)),(!t||t.check(FuwenSysWin))&&(this.btnElement.redPoint.visible=RpSys.ins().getData(RoleWin,e,FuwenSysWin)),(!t||t.check(SuitWin))&&(this.btnTaoZhuang.redPoint.visible=RpSys.ins().getData(RoleWin,e,SuitWin)),(!t||t.check(ZhuangBanWin))&&(this.btnZhuangBan.redPoint.visible=RpSys.ins().getData(RoleWin,e,ZhuangBanWin)),(!t||t.check(ShenQiPanel))&&(this.btnShenQi.redPoint.visible=RpSys.ins().getData(RoleWin,e,SqXyWin,ShenQiPanel)),(!t||t.check(WingPanel))&&(this.btnWing.redPoint.visible=RpSys.ins().getData(RoleWin,e,SqXyWin,WingPanel)),(!t||t.check(SzPanel))&&(this.btnSz.redPoint.visible=RpSys.ins().getData(RoleWin,e,SqXyWin,SzPanel)),(!t||t.check(MeilinPanel))&&(this.btnMeiLin.redPoint.visible=RpSys.ins().getData(RoleWin,e,SqXyWin,MeilinPanel)),(!t||t.check(ZhaoCaiLongWin))&&(this.btnZhaoCaiLong.redPoint.visible=RpSys.ins().getData(RoleWin,e,ZhaoCaiLongWin)),(!t||t.check(XunZhangWin))&&(this.btnZLXZ.redPoint.visible=RpSys.ins().getData(RoleWin,e,XunZhangWin)),(!t||t.check(ShengbeiWin))&&(this.btnShengbei.redPoint.visible=RpSys.ins().getData(RoleWin,e,ShengbeiWin)),(!t||t.check(MoJieWin))&&(this.btnShenJie.redPoint.visible=RpSys.ins().getData(RoleWin,e,MoJieWin)),(!t||t.check(e))&&this.updateRoleRedPoint()
},e.prototype.updateBtnState=function(){this.btnZhaoCaiLong.iconDisplay.source=RechargePowerSys.ins().zhaoCaiLongData.isAct()?"role_zycs_hjsl":"role_zycs_hjsl1",this.btnZLXZ.iconDisplay.source=RechargePowerSys.ins().xunZhangData.isAct()?"role_zycs_zlxz":"role_zycs_zlxz1",this.btnShengbei.iconDisplay.source=RechargePowerSys.ins().shengbeiData.isGet()?"role_zycs_bxsb":"role_zycs_bxsb1";var t=XianLuSys.ins().ringId;this.btnXLRing.iconDisplay.source=t>0?"role_zycs_jyjz"+t:"role_zycs_jyjz"},e.prototype.updateRoleRedPoint=function(){for(var t=this.seePlayModel.getEquipLen(),i=0;t>i;i++)this.equips[i].updateRedPoint();var n=RpSys.ins().getData(RoleWin,e,"equip");this.btnOneKeyEquip.redPoint.visible=n,n?this.mcbtnOneKeyEquip.playFile(ResMgr.getEffName("public_zycs_button01"),-1):(this.mcbtnOneKeyEquip.stop(),this.mcbtnOneKeyEquip.visible=!1)},e.prototype.setEquip=function(t){if(t){for(var e=this.seePlayModel.getEquipLen(),i=0;e>i;i++)this.equips[i].data=this.seePlayModel.getEquipByIndex(i);this.totalPower.text=this.seePlayModel.power.toFixed(0),this.updateEntity()}},e.prototype.onClickItem=function(t){var e=t.currentTarget;if(e.hitTestPoint(t.stageX,t.stageY)&&e instanceof RoleItem){var i=e;i.getItemData().hasEquipOn()?openWin(RoleEquipTipsWin,i.getItemData(),null,this.onShowSelectEquipWin,this):BagSys.ins().hasEquip(i.getItemData().equipPos)?this.onShowSelectEquipWin(i.getItemData()):GFunc.isRing(i.getItemData().equipPos)?openWin(XunBaoWin,0):(openWin(MeNeedLevelWin),showtipsFail(Lang.role_str15))}},e.prototype.onShowSelectEquipWin=function(t){openWin(RoleEquipSelectWin,t)},e.prototype.onClick=function(t){switch(t.target){case this.btnOneKeyEquip:var e=BagSys.ins().getZuiHaoEquipId();e.length>0?EquipSys.ins().sendOneKeyEquip(e):showtipsFail("没有可替换的装备");break;case this.btnShenJie:openWin(MoJieWin);break;case this.btnXLRing:if(XianLuSys.ins().ringId>0)openWin(XianluRingTipsWin,!1);else{var i=GFunc.creatRewardDataById(830102,1);GFunc.checkConsumeEnough(i)}break;case this.btnZLXZ:openWin(XunZhangWin);break;case this.btnZhaoCaiLong:openWin(ZhaoCaiLongWin);break;case this.btnDamon:openWin(ShouHuWin);break;case this.btnTaoZhuang:openWin(SuitWin);break;case this.btnAttr:openWin(RoleAttrWin1);break;case this.btnElement:openWin(FuwenSysWin);break;case this.btnFruit:openWin(ShengLingWin);break;case this.btnZhuangBan:openWin(ZhuangBanWin);break;case this.btnShenQi:openWin(SqXyWin,0);break;case this.btnWing:openWin(SqXyWin,1);break;case this.btnSz:openWin(SqXyWin,2);break;case this.btnMeiLin:openWin(SqXyWin,3);break;case this.btnShengbei:openWin(ShengbeiWin)}},e.prototype.getEquipItem=function(t){return this.equips[t]},e.prototype.getEquipItemCanPutOn=function(){for(var t=0,e=this.equips;t<e.length;t++){var i=e[t],n=i.data,a=n.equipPos;if(a>EquipPos.WEAPON&&a<EquipPos.EMBLEM&&!n.hasEquipOn()&&BagSys.ins().getEquipBySubType(a))return i}return null},e.prototype.getHuFuItem=function(){return null},e.prototype.getkillBtn=function(){return null},e.prototype.getFruitBtn=function(){return this.btnFruit},e.prototype.getElementBtn=function(){return this.btnElement},e.prototype.getSHengJie=function(){return this.btnShenJie},e.prototype.getDamonItem=function(){return null},e.prototype.getTujianBtn=function(){return null},e.prototype.getBtnOneKeyEquip=function(){return this.btnOneKeyEquip},e.getSysId=function(){return 0},e.getTitle=function(){return"btz_zycs_js"},e.getTabTitle=function(){return"bqz_zycs_js"},e}(BasePanel);__reflect(RolePanel.prototype,"RolePanel"),window.RolePanel=RolePanel;var RongLianEquipPanel=function(t){function e(){var e=t.call(this)||this;return e.itemRewear=[],e.rongLlianZhong=!1,e.oldLevel=0,e.initUI(),e}return __extends(e,t),e.prototype.initUI=function(){t.prototype.initUI.call(this),this.skinName="RongLianPanelEUI",this.attrs.itemRenderer=ComAttrItem,this.attrs.dataProvider=this.attrData=new eui.ArrayCollection,this.smeltEquips=[],this.itemList.itemRenderer=RongLianEquipItem,this.itemListArray=new eui.ArrayCollection,this.itemList.dataProvider=this.itemListArray,this.lbDesc1.textFlow=addColorTF("已自动为您选择"+addColor("橙品及以下",11887104)+"的"+addColor("低评分",11887104)+"装备，请放心熔炼。"),this.lbDesc2.textFlow=addColorTF("1星及以上装备较为珍贵，请前往"+addColor("[锻造]-[打造]-[装备分解]",11887104)+"\n进行分解。")},e.prototype.open=function(){t.prototype.open.call(this),this.itemRewear=[],this.addClickE(this.buyRongLian,this.onClick),this.addLsn(BagSys.ins().patchEquiChange,this.updateBagEquip),this.addLsn(EquipSys.ins().patchSmeltEquipComplete,this.updateRongLianSucceed),this.updateLevel(),this.oldLevel=EquipSys.ins().rongLianData.level,this.rongLlianZhong=!1,this.updateBagEquip()},e.prototype.close=function(){t.prototype.close.call(this),Timer.ins().removeAll(this)},e.prototype.updatePanel=function(t){this.smeltEquips=t;for(var e=this.smeltEquips.length;20>e;e++)this.smeltEquips.push(null);this.itemListArray.source=this.smeltEquips},e.prototype.updateLevel=function(){var t=EquipSys.ins().rongLianData;this.ljLv=Lang.replaceEnum("熔炉等级%s级",t.level),this.progressExp.maximum=t.config.needexp,this.progressExp.value=t.exp,this.totalPower.text=t.power.toString(),this.attrData.source=t.getLevelAttrDatas()},e.prototype.updateBagEquip=function(){if(0==this.rongLlianZhong){var t=BagSys.ins().getEquipByLessStar(0,20);this.updatePanel(t)}},e.prototype.updateRongLianSucceed=function(t){var e=this;if(this.updateLevel(),GFunc.mergeItemDataReward(this.itemRewear,t.itemRewear),t.itemRewear.length>0){for(var i=this.itemList.numElements,n=0,a=function(t){var i=o.itemList.getElementAt(t);n=100*Math.floor(t/5),Timer.ins()["do"](n,1,1,function(){if(i&&i.data){i.data=null;var t=i.localToGlobal(),n=e.groupMC.globalToLocal(t.x,t.y),a=new MC;a.x=n.x+46,a.y=n.y+45,a.playFile(getEffName("rl"),1),e.groupMC.addChild(a),e.playPiaoMc(i.localToGlobal(0,0))}},o,TimerType.NONE)},o=this,s=0;i>s;s++)a(s);Timer.ins()["do"](n+150,1,1,function(){var t=BagSys.ins().getEquipByLessStar(0,20);t.length>0?(e.updatePanel(t),e.sendSmeltEquip()):(e.updatePanel([]),e.rongLlianZhong=!1,e.oldLevel!=EquipSys.ins().rongLianData.level?(openWin(RongLianUpLevelTips,e.oldLevel,EquipSys.ins().rongLianData.level,function(){openWin(RongLianSuccessTips,e.itemRewear.concat()),e.itemRewear.length=0},e),e.oldLevel=EquipSys.ins().rongLianData.level):(openWin(RongLianSuccessTips,e.itemRewear.concat()),e.itemRewear.length=0))},this,TimerType.NONE)}},e.prototype.playPiaoMc=function(t){var e=this;this.globalToLocal(t.x,t.y,t);var i=new MC;i.playFile(getEffName("purplesoul1"),-1),i.x=t.x+50,i.y=t.y+50,this.groupMC1.addChild(i);var n=egret.Tween.get(i);n.to({x:this.progressExp.x+this.progressExp.width/2,y:this.progressExp.y+this.progressExp.height/2},1300,egret.Ease.sineInOut).call(function(){i.reset(),e.groupMC1.removeChild(i)})},e.prototype.onClick=function(t){switch(t.currentTarget){case this.buyRongLian:0==this.rongLlianZhong?this.sendSmeltEquip():showtipsFail("正在熔炼中")}},e.prototype.sendSmeltEquip=function(){this.smeltEquips[0]?(this.rongLlianZhong=!0,EquipSys.ins().sendSmeltEquip(this.smeltEquips)):showtipsFail("当前无装备可分解")},e.getSysId=function(){return 224},e.getTitle=function(){return"btz_zycs_bb"},e.getTabTitle=function(){return"bqz_zycs_rl"},e.prototype.getRongLianBtn=function(){return this.buyRongLian},e}(BasePanel);__reflect(RongLianEquipPanel.prototype,"RongLianEquipPanel"),window.RongLianEquipPanel=RongLianEquipPanel;var ActData23_1=function(t){function e(){var e=t.call(this)||this;return e.curDay=0,e.day=0,e.chongs=[],e.chongToday=0,e}return __extends(e,t),e.prototype.parser23=function(t){this.day=t.readShort();var e=t.readShort();this.chongs.length=e;for(var i=0;e>i;i++)this.chongs[i]=t.readByte();this.chongToday=t.readInt(),this.curDay=t.readShort()},e.prototype.getConfigs=function(){return this.configs||(this.configs=Cfg.getConfigs(ActivityType23Config,this.actId,CondType.NONE))},e.prototype.deCodeRecord=function(t){return this.chongs[t-1]},e.prototype.getCondition=function(t){var e=t;return this.day>=e.day},e}(ActDataBase);__reflect(ActData23_1.prototype,"ActData23_1"),window.ActData23_1=ActData23_1;var BossBenFuPanel=function(t){function e(){var e=t.call(this)||this;return e.redPointHead=[BossWin],e}return __extends(e,t),e.prototype.setSkinName=function(){this.skinName="FuBenPanelEUI"},e.prototype.setTabItem=function(){this.tab.itemRenderer=BaseTabBtn4},e.prototype.open=function(e){void 0===e&&(e=-1);var i=this.getAotuIndex(e);t.prototype.open.call(this,i),this.observeTabRedPoint()},e.getTitle=function(){return"btz_zycs_boss"},e.getTabTitle=function(){return"bqz_zycs_bfbs"},e.prototype.getTabBtn=function(t){return this.tab.validateNow(),this.tab.getElementAt(t)},e.prototype.getEquipBossPanelBtnChallenge=function(){return this.getPanel(EquipBossPanel).getBtnChallenge()},e.prototype.getJueWangPanel_BtnChallenge=function(){return this.getPanel(QuanMinPanel).getBtnChallenge()},e.panelNames=[EquipBossPanel,QuanMinPanel,BossHomePanel],e}(BaseTabPanel);__reflect(BossBenFuPanel.prototype,"BossBenFuPanel"),window.BossBenFuPanel=BossBenFuPanel;var AIRole=function(t){function e(){var e=t.call(this)||this;return e.nextBianshenTick=0,e.defaultEnemyType=[EntityType.MONSTER_SERVER,EntityType.ROLE_CLONE,EntityType.CLONEBIANSHEN],e.flag=!1,e.minRange=4,e.maxRange=10,e.cfCd=0,e.enemyType=[EntityType.MONSTER_SERVER,EntityType.ROLE_CLONE,EntityType.CLONEBIANSHEN],e.aiTime=260,e.params.followDis=120,e.params.followRadius=500,e}return __extends(e,t),e.prototype.setGuaji=function(e){t.prototype.setGuaji.call(this,e),this.isGuaji?(this.stopAndStand(),this.enemyType=this.defaultEnemyType,this.entity==LogicSys.ins().centerEntity&&LogicSys.ins().setOnClickMovie(!1,new XY),this.startAttack()):(this.enemyType=[],this.resetTargetHandle())},e.startAtk=function(t){return t},e.prototype.Atk=function(){if(!this.entity.isAtking()&&this.entity.canAtk()){if(this.isFaraway())return this.resetTargetHandle(),void this.startFollow(this.params.followHandle,this.params.followMasterHandle);e.startAtk(this.entity.handle);var t=this.getNextSkill();if(t){var i,n=this.isNeedCastTarget(t.skillConfig),a=this.params.targetHandle;if(i=this.getNextTarget(),i&&i.handle!=a)if(this.onTargetChange(i.handle),a){var o=LogicSys.ins().getEntityByHandle(a);o&&o.masterHandle!=i.masterHandle&&this.onTargetMasterHandleChange(i)}else this.onTargetMasterHandleChange(i);if(this.canPickItem()&&this.entity.canMove()){if(this.entity.isBianShenStatus())return void this.setAIState(AIState.PickItem);if(!i)return void this.setAIState(AIState.PickItem);if(!EntityType.isRole(i.entityType)&&!EntityType.isBianshen(i.entityType))return void this.setAIState(AIState.PickItem)}var s=25e4;if(i){var r=this.getFollowTarget();r&&MathUtil.getDistanceX2ByObject(i,r)>s&&(i=r.AI.getNewTarget())}if(!i&&n)return!1;i&&(this.resetTargetHandle(i.handle),this.params.x=i.x,this.params.y=i.y);var u=void 0;if(u=n?i:this.entity,GFunc.checkSkillDis(this.entity,this.getSkillTargetPoint(t),t.skillConfig.castRange)){var h=Timer.ins().getEgretTimer();if(h>t.skillCDTick){var l=t.skillConfig,p=this.getCastTargetHandle(t.skillConfig),c=this.params.targetHandle,d=this.isShowEff();this.playMyEntityAction(l,u,t.actionIndex),null!=t.skillConfig.actionParam[0].actionType&&(d?this.playActionMovie(l,t.actionIndex,u,this.useSkillComplete.bind(this,this.entity.handle,p,c,t,h),null,MapContainer.ins().isShow(),this.entity.masterHandle==LogicSys.ins().centerEntity.masterHandle):this.useSkillComplete(this.entity.handle,p,c,t,h));for(var g=this.skillDatas,f=0,y=g;f<y.length;f++){var m=y[f];null==m.skillConfig.actionParam[0].actionType&&m.isAct&&this.checkAttrCondition(m)&&h>m.skillCDTick&&m&&(l=m.skillConfig,p=this.getCastTargetHandle(m.skillConfig),this.updateSkillCd(l.id),d?this.playActionMovie(l,m.actionIndex,u,this.useSkillComplete1.bind(this,this.entity.handle,p,c,m,h),null,MapContainer.ins().isShow(),this.entity.masterHandle==LogicSys.ins().centerEntity.masterHandle):this.useSkillComplete1(this.entity.handle,p,c,m,h))}return GFunc.playShenmoHanZhao(t),!0}}else if(!this.isMoveing()&&this.entity.canMove()){var C=this.getPath(i,this.entity);if(C&&C.length){var v=new XY;C.length>2?(v.x=C[C.length-4],v.y=C[C.length-3]):(v.x=this.entity.x,v.y=this.entity.y);var S=MapBase.CELL_SIZE*Math.min(.8*t.skillConfig.castRange,1),b=MathUtil.getPByDistance(v,i,-S);return this.startMove(b),!0}this.resetTargetHandle()}}}},e.prototype.updateTick=function(e){var i=LogicSys.ins();if(this.entity==i.centerEntity&&!this.entity.isBianShenStatus()&&this.cfCd<Timer.ins().getEgretTimer()&&(this.isAIState(AIState.Atk)&&this.nextActionTick<=Timer.ins().getEgretTimer()||this.isAIState(AIState.MoveToXY))){var n=this.getNextTarget();if(n&&EntityType.isMonster(n.entityType)){var a=this.getPath(n,this.entity);if(a&&2==a.length&&GFunc.checkSkillDis(this.entity,n,this.maxRange,this.minRange)){var o=MapContainer.ins().getNearestAroundXY(n,this.entity);i.sendSpecialMove(this.entity.handle,2,o),this.setChongFengCD()}}}t.prototype.updateTick.call(this,e)},e.prototype.setChongFengCD=function(t){void 0===t&&(t=1e3),this.cfCd=t+Timer.ins().getEgretTimer()},e.prototype.isShowEff=function(){return this.entity.masterHandle==Actor.ins().handle||!!getLocation("isShowOtherEff",2)},e.prototype.getNewTarget=function(){var t=this.getFirstAtkMasterTarget()||this.getFirstAtkTarget()||this.getChouhenTarget()||this.getMonsterIdTarget()||this.getCurTarget()||this.getNearestTarget();return t},e.prototype.getNewTarget1=function(){for(var t,e=0,i=this.params.aiTargetList;e<i.length;e++){var n=i[e];t=n.getTarget(this)}return t},e.prototype.getFirstAtkMasterTarget=function(){var t;if(this.params.firstAtkMasterHandle){var e=LogicSys.ins().getMainRoleByMasterHandle(this.params.firstAtkMasterHandle);e&&!e.isDead()&&(t=e),t||(this.params.firstAtkMasterHandle=0)}return t},e.prototype.getFirstAtkTarget=function(){var t;if(this.params.firstAtkHandle){var e=LogicSys.ins().getEntityByHandle(this.params.firstAtkHandle);e&&!e.isDead()?t=e:this.params.firstAtkHandle=0}return t},e.prototype.getChouhenTarget=function(){var t;if(this.params.chouhenList.length){var e=LogicSys.ins().getMainRoleByMasterHandle(this.params.chouhenList[0].masterHandle);e&&!e.isDead()&&(t=e)}return t},e.prototype.getMonsterIdTarget=function(){var t;return this.params.firstMonsterId&&(t=LogicSys.ins().getNearestMonsterById(this,this.params.firstMonsterId)),t},e.prototype.getCurTarget=function(){var t;if(this.params.targetHandle){var e=LogicSys.ins().getEntityByHandle(this.params.targetHandle);e&&!e.isDead()?t=e:this.resetTargetHandle()}return t},e.prototype.getNearestTarget=function(){var t=LogicSys.ins().getNearestEnemyByAI(this);return t},e.prototype.onTargetChange=function(t){this.entity==LogicSys.ins().centerEntity&&LogicSys.ins().patchMainRoleTargetChange(t?t:-1)},e.prototype.onTargetMasterHandleChange=function(t){this.entity==LogicSys.ins().centerEntity&&LogicSys.ins().patchMainRoleTargetMasterChange(t.masterHandle)},e.prototype.isFaraway=function(){return this.params.followMasterHandle=this.entity.masterHandle,t.prototype.isFaraway.call(this)},e.prototype.Die=function(){t.prototype.Die.call(this),this.params.firstAtkHandle=this.params.firstAtkMasterHandle=0},e.prototype.getSkillTargetPoint=function(t){var e,i=t.skillConfig.castType;return i==CastType.Self||i==CastType.Friend?e=t.skillConfig.targetType==TargetType.Enemy?new XY(this.params.x,this.params.y):this.entity:i==CastType.Enemy?e=new XY(this.params.x,this.params.y):i==CastType.SelfByHp?e=this.entity:i==CastType.None&&(e=this.entity),e},e.prototype.stopMove=function(){t.prototype.stopMove.call(this),this.entity==LogicSys.ins().centerEntity&&LogicSys.ins().setOnClickMovie(!1,null)},e.prototype.sendMoveEntity=function(t){this.isSamePoint(t)?LogicSys.ins().sendStopMoveEntity(this.entity):LogicSys.ins().sendMoveEntity(this.entity,t)},e.prototype.setAutoBianshen=function(t){this.isAutoBianshen=t},e.prototype.checkBianshen=function(){return this.canBianshen()?!0:(showtipsFail("无法变身"),!1)},e.prototype.canAutoBianshen=function(){return(GFunc.isAutoBianShenFuBen(FbSys.ins().fubenConfig.group)||this.isAutoBianshen)&&this.canBianshen()},e.prototype.canBianshen=function(){if(this.entity.isBianShenStatus()||!this.entity.canBianShen()||this.entity.isCaiJiing())return!1;var t=LogicSys.ins().getEntityByHandle(this.params.targetHandle);return!t||EntityType.isCaiJi(t.entityType)?!1:!0},e.prototype.destruct=function(){t.prototype.destruct.call(this),this.flag=!1},__decorate([post()],e,"startAtk",null),e}(AIBase);__reflect(AIRole.prototype,"AIRole");var AITargetBase=function(){function t(){this.type=0}return t.prototype.getTarget=function(t){var e;return e},t.prototype.setParam=function(t){},t.prototype.addParam=function(t){},t.prototype.delParam=function(t){},t.prototype.reset=function(){},t}();__reflect(AITargetBase.prototype,"AITargetBase",["IAITarget"]);var FuBenDanRenPanel=function(t){function e(){var e=t.call(this)||this;return e.redPointHead=[ExtCom,FuBenWin],e}return __extends(e,t),e.prototype.setSkinName=function(){this.skinName="FuBenPanelEUI"},e.prototype.setTabItem=function(){this.tab.itemRenderer=BaseTabBtn4},e.prototype.open=function(e){void 0===e&&(e=-1);var i=this.getAotuIndex(e);t.prototype.open.call(this,i),this.observeTabRedPoint()},e.getTitle=function(){return"btz_zycs_fb"},e.getTabTitle=function(){return"bqz_zycs_drfb"},e.prototype.getTabBtn=function(t){return this.tab.validateNow(),this.tab.getElementAt(t)},e.prototype.getWanMoPanme_FightBtn=function(){return this.getPanel(WanMoPanel).getFightBtn()},e.prototype.getHeiAnPanel_FightBtn=function(){return this.getPanel(HeiAnPanel).getFightBtn()},e.prototype.getMeiRiFbPanel_BtnSend=function(t){return this.getPanel(MeiRiFbPanel).getBtnSend(t)},e.panelNames=[WanMoPanel,MeiRiFbPanel,HeiAnPanel,YongZhePanel],e}(BaseTabPanel);__reflect(FuBenDanRenPanel.prototype,"FuBenDanRenPanel"),window.FuBenDanRenPanel=FuBenDanRenPanel;var EntityMonster=function(t){function e(){var e=t.call(this)||this;return e.dropItems=[],e}return __extends(e,t),e.prototype.setData=function(e){t.prototype.setData.call(this,e);var i=Cfg.getMonstersConfigNew(e.configID);this.setProp(AttrType.atMvSpeed,64*i.MvSpeed/1e3),this.setProp(AttrType.atAtkSpeed,i.AtkSpeed),this.setProp(AttrType.atHpMax,i.HpMax),this.setProp(AttrType.atHp,i.HpMax),this.setProp(AttrType.atAtkMin,i.AtkMin),this.setProp(AttrType.atAtkMax,i.AtkMax),this.setProp(AttrType.atDef,i.Def),this.setProp(AttrType.atAtkSuc,i.AtkSuc),this.setProp(AttrType.atDefSuc,i.DefSuc);var n=e.avatarIndex?e.avatarIndex:0,a=Cfg.getConfig(MonsterModelConfig,i.avatar[n]);this.myHeight=a.height*a.scale,this.setDir(a.dir),this.setEntityScale(a.scale),""!=a.appearance&&e.setBodyFileName(a.appearance),this.setName(i.name,11184810),this.setHpAndNameVisible(!1),this.readyUpdateMC()},e.prototype.playAction=function(e,i){void 0===i&&(i=!1),t.prototype.playAction.call(this,e,i),e==EntityAction.DIE&&this.removeBuffs()},e.prototype.setDropItem=function(t){this.dropItems.length=0,this.dropItems=this.dropItems.concat(t)},e.prototype.getDropItems=function(){return this.dropItems},e.prototype.reset=function(){this._hpBar.visible=!1,this.dropItems.length=0,this._bodyContainer.filters=null,t.prototype.reset.call(this)},e.prototype.getCfgId=function(){return this.data.configID},e.prototype.isBoss=function(){var t=Cfg.getMonstersConfigNew(this.data.configID);return t.type==MonsterType.Boss||t.type==MonsterType.Boss2},e.prototype.addSlightFilter=function(){Timer.ins()["do"](0,200,1,this.onFilterChange,this),this._bodyContainer.filters&&0!=this._bodyContainer.filters.length||(this._bodyContainer.filters=DisUtil.whiteFilter())},e.prototype.onFilterChange=function(){this._bodyContainer.filters=null},e.prototype.canBeAtk=function(){return t.prototype.canBeAtk.call(this)&&!EntityType.isCaiJi(this.entityType)},e}(Entity);__reflect(EntityMonster.prototype,"EntityMonster"),window.EntityMonster=EntityMonster;var FuBenDuoRenPanel=function(t){function e(){var e=t.call(this)||this;return e.redPointHead=[ExtCom,FuBenWin],e}return __extends(e,t),e.prototype.setSkinName=function(){this.skinName="FuBenPanelEUI"},e.prototype.setTabItem=function(){this.tab.itemRenderer=BaseTabBtn4},e.prototype.open=function(e){void 0===e&&(e=-1);var i=this.getAotuIndex(e);t.prototype.open.call(this,i),this.observeTabRedPoint()},e.getTitle=function(){return"btz_zycs_fb"},e.getTabTitle=function(){return"bqz_zycs_duofb"},e.prototype.getTabBtn=function(t){return this.tab.validateNow(),this.tab.getElementAt(t)},e.panelNames=[MoLongPanel,ShenDianPanel],e}(BaseTabPanel);__reflect(FuBenDuoRenPanel.prototype,"FuBenDuoRenPanel"),window.FuBenDuoRenPanel=FuBenDuoRenPanel;var EntityData=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.tx=-1,e.ty=-1,e.buffs=[],e.skillDatas=[],e.avatarIndex=0,e._weaponFileName="",e._bodyFileName="",e._wingFileName="",e._mountFileName="",e._guanghuanFileName="",e._footFileName="",e._shengLingFileName="",e._hudunFileName="",e}return __extends(e,t),e.prototype.parserBase=function(t){this.type=t.readShort(),this.handle=t.readDouble(),this.configID=t.readInt(),this.masterHandle=t.readDouble(),this.appearType=t.readByte(),this.x=t.readInt(),this.y=t.readInt(),this.tx=t.readInt()||-1,this.ty=t.readInt()||-1},e.prototype.parser=function(t){this.parserBase(t),this.parserAtt(t),this.parserBuff(t)},e.prototype.parserBuff=function(t){for(var e=t.readByte(),i=0;e>i;i++){var n=t.readInt();this.buffs.push(n)}},e.prototype.parserSkill=function(t){this.skillDatas.length=0;for(var e=t.readByte(),i=0;e>i;i++){var n=new SkillData;n.skillId=t.readInt(),n.level=1,this.skillDatas.push(n)}},e.prototype.hasTargetPlace=function(){return-1!=this.tx&&-1!=this.ty&&this.x!=this.tx&&this.y!=this.ty},e.prototype.writeBaseDataToEntity=function(t){t.handle=this.handle,t.masterHandle=this.masterHandle,t.x=this.x,t.y=this.y},e.prototype.setWeaponFileName=function(t){this._weaponFileName=t},Object.defineProperty(e.prototype,"weaponFileName",{get:function(){return this._weaponFileName},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"shengLingFileName",{get:function(){return this._shengLingFileName},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"hudunFileName",{get:function(){return this._hudunFileName},enumerable:!0,configurable:!0}),e.prototype.setBodyFileName=function(t){this._bodyFileName=t},Object.defineProperty(e.prototype,"bodyFileName",{get:function(){return this._bodyFileName},enumerable:!0,configurable:!0}),e.prototype.setWingFileName=function(t){this._wingFileName=t},Object.defineProperty(e.prototype,"wingFileName",{get:function(){return this._wingFileName},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"mountFileName",{get:function(){return this._mountFileName},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"guanghuanFileName",{get:function(){return this._guanghuanFileName},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"footFileName",{get:function(){return this._footFileName},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"footPrintName",{get:function(){return""},enumerable:!0,configurable:!0}),e}(EntityAttrData);__reflect(EntityData.prototype,"EntityData");var RuleIconBase=function(){function t(t){this.type=RuleIconType.normal,this.isClick=!1,this._isShow=!1,this.redPoint=!1,this.index=0,this.sysId=0,this.effX=2,this.effY=2,t.RuleData=this,this.tar=t,this.index=t.parent.getChildIndex(t),this.tar.name=this.index.toString(),this.tarParent=t.parent,this.tar.addEventListener(eui.UIEvent.MOVE,this.updateMcPoint,this),this.tar.parent.addEventListener(eui.UIEvent.RESIZE,this.updateMcPoint,this),this.tar.parent.addEventListener(eui.UIEvent.MOVE,this.updateMcPoint,this)}return Object.defineProperty(t.prototype,"isShow",{get:function(){return this._isShow},set:function(t){this._isShow!=t&&(this._isShow=t,this.update())},enumerable:!0,configurable:!0}),t.prototype.setIsShow=function(t){},t.prototype.tapExecute=function(){this.isClick=!0,this.update()},t.prototype.update=function(){this.isShow?this.updateAddChiBtn():DisUtil.remove(this.tar),this.updateEff()},t.prototype.updateSys=function(){this.isShow=GFunc.isSysOpen(this.sysId)},t.prototype.updateAddChiBtn=function(){for(var t=this.tarParent.numChildren,e=!0,i=t-1;i>=0;i--){var n=this.tarParent.getChildAt(i);if(this.index>Number(n.name)){this.tarParent.addChildAt(this.tar,i+1),e=!1;break}}e&&this.tarParent.addChildAt(this.tar,0)},t.prototype.setRedPoint=function(t){this.tar.redPoint&&(this.tar.redPoint.visible=t),this.updateEff()},t.prototype.updateEff=function(){if(this.isShowEff()&&""!=this.getEffName()){this.mc||(this.mc=new MC,this.mc.touchEnabled=!1),this.mc.name!=this.getEffName()&&this.mc.playFile(getEffName(this.getEffName()),-1);var t=getWin(MainWin);t&&(t.com_ext.groupMcAddChild(this.mc),this.updateMcPoint())}else this.mc&&(this.mc.parent&&(this.mc.stop(),DisUtil.remove(this.mc)),this.mc.visible=!1)},t.prototype.setVisible=function(t){this.tar.visible=t,this.updateEff()},t.prototype.getEffName=function(){return""},t.prototype.isShowEff=function(){var t=getWin(MainWin),e=t?t.com_ext.getParentVisible(this.tar):!1;return!this.isClick&&this.isShow&&e&&this.tar.visible},t.prototype.updateMcPoint=function(){this.setMcPos()},t.prototype.setMcPos=function(){if(this.mc){var t=this.tar.localToGlobal(),e=getWin(MainWin).com_ext.getGroupMc().globalToLocal(t.x,t.y);this.mc.x=e.x+this.tar.width/2+this.effX,this.mc.y=e.y+this.tar.height/2+this.effY,this.mc.scaleX=this.getEffScaleX(),this.mc.scaleY=this.getEffScaleY(),this.mc.aaa=egret.getQualifiedClassName(this)}},t.prototype.getEffScaleX=function(){return 1},t.prototype.getEffScaleY=function(){return 1},t.prototype.setTime=function(t){var e=this.tar;if(e.labelDisplay){var i=e.labelDisplay;i.textFlow=addColorTF(t)}},t.prototype.getOpenTick=function(){return Number.MAX_VALUE},t.prototype.getOpenSysTick=function(){return Number.MAX_VALUE},t.prototype.updateTime=function(){},t.prototype.updateRedPoint=function(t){void 0===t&&(t=null),this.updateEff()},__decorate([callDelay()],t.prototype,"setMcPos",null),t}();__reflect(RuleIconBase.prototype,"RuleIconBase",["IRuleBase"]),window.RuleIconBase=RuleIconBase;var FuBenEXPPanel=function(t){function e(){var e=t.call(this)||this;return e.redPointHead=[ExtCom,FuBenWin],e}return __extends(e,t),e.prototype.setSkinName=function(){this.skinName="FuBenPanelEUI"},e.prototype.setTabItem=function(){this.tab.itemRenderer=BaseTabBtn4},e.prototype.open=function(e){void 0===e&&(e=-1);var i=this.getAotuIndex(e);t.prototype.open.call(this,i),this.observeTabRedPoint()},e.getTitle=function(){return"btz_zycs_fb"},e.getTabTitle=function(){return"bqz_zycs_srfb"},e.prototype.getTabBtn=function(t){return this.tab.validateNow(),this.tab.getElementAt(t)},e.prototype.getEmoPanel_EnterBtn=function(){return this.getPanel(EmoPanel).getEnterBtn()},e.prototype.getXueSePanel_EnterBtn=function(){return this.getPanel(XueSePanel).getEnterBtn()},e.panelNames=[EmoPanel],e}(BaseTabPanel);__reflect(FuBenEXPPanel.prototype,"FuBenEXPPanel"),window.FuBenEXPPanel=FuBenEXPPanel;var MaskBase=function(t){function e(){var e=t.call(this)||this;return e.curValue=0,e.maxValue=1,e}return __extends(e,t),e.prototype.setValue=function(t,e){this.curValue=t,e&&(this.maxValue=e,this.maxValue<this.curValue&&(this.maxValue=this.curValue)),this.draw()},e.prototype.setPercent=function(t){t>1?this.curValue=1:0>t?this.curValue=0:this.curValue=t,this.maxValue=1,this.draw()},Object.defineProperty(e.prototype,"percent",{get:function(){return this.curValue/this.maxValue},enumerable:!0,configurable:!0}),e.prototype.draw=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e]},Object.defineProperty(e.prototype,"value",{get:function(){return this.curValue},set:function(t){null!=t&&(this.curValue=t,this.draw())},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"max",{get:function(){return this.maxValue},set:function(t){null!=t&&(this.maxValue=t,this.draw())},enumerable:!0,configurable:!0}),e}(egret.Shape);__reflect(MaskBase.prototype,"MaskBase");var ShengLingPanel=function(t){function e(){var e=t.call(this)||this;return e.redPointHead=[RoleWin,RolePanel,ZhuangBanWin],e}return __extends(e,t),e.prototype.setTabItem=function(){this.tab.itemRenderer=BaseTabBtn3},e.prototype.setSkinName=function(){this.skinName="ShengLingPanelEUI"},e.getTitle=function(){return"btz_zycs_sl"},e.getTabTitle=function(){return"bqz_zycs_sl"},e.getSysId=function(){return 326},e.panelNames=[ShengLingYinJiPanel,ShengLingLevelPanel,ShengLingStagePanel],e}(BaseTabPanel);__reflect(ShengLingPanel.prototype,"ShengLingPanel"),window.ShengLingPanel=ShengLingPanel;var FbModelBase=function(){function t(){this.fbId=1,this.sysId=0,this.SweepEndTick=0}return t.prototype.parser=function(t){},t}();__reflect(FbModelBase.prototype,"FbModelBase");var TreeData=function(){function t(){this.keyStr=[]}return t.prototype.check=function(t){if(this.keyStr.length){var e=ComUtil.getObjName(t);return this.keyStr.indexOf(e)>-1}return!1},t.prototype.setKeys=function(t){this.keyStr.length=0,this.addKeys(t)},t.prototype.addKeys=function(t){for(var e=0,i=t;e<i.length;e++){var n=i[e];this.keyStr.push(ComUtil.getObjName(n))}},t.prototype.getValue=function(){return this.value},t.prototype.setValue=function(t){return this.value=t},t}();__reflect(TreeData.prototype,"TreeData");var FumoPanel=function(t){function e(){var e=t.call(this)||this;return e.itemFumos=[],e.longPressBtnOk=new LongPress,e.initUI(),e}return __extends(e,t),e.prototype.initUI=function(){this.skinName="FumoPanelEUI",this.item.touchChildren=!1,this.item.touchEnabled=!1,this.equipItems=[this.item0,this.item1,this.item2,this.item3,this.item4,this.item5,this.item6,this.item7,this.item8,this.item9],this.itemFumos=[this.itemFumo1,this.itemFumo2,this.itemFumo3,this.itemFumo4],this.listConsume.itemRenderer=ItemBaseConsume,this.listConsume.dataProvider=this.listConsumedData=new eui.ArrayCollection,this.lbSuiPian.textFlow=addColorTF(this.lbSuiPian.text,this.lbSuiPian.textColor,!0),this.item.setRedPoint(!1)},e.prototype.open=function(e){void 0===e&&(e=0),t.prototype.open.call(this,e),this.addClickE(this.groupItems,this.onItemClick),this.addClickE(this.groupGem,this.onGemItemClick),this.addClickE(this.btnOk,this.onClick),this.addClickE(this.lbSuiPian,this.onClick),this.addLsn(ForgeSys.ins().patchFumoUpdate,this.onUpdateData),this.addLsn(BagSys.ins().patchItemChange,this.updateConsumeItem),this.addLsn(RpSys.ins().patchRp,this.updateRp),this.longPressBtnOk.setDisplay(this.btnOk,this.autoUp,this,500,200),this.updatePanel(),this.updateRp()},e.prototype.close=function(){t.prototype.close.call(this),this.longPressBtnOk.close()},e.prototype.updateRp=function(t){if(void 0===t&&(t=null),!t||t.check(e)){for(var i=ForgeSys.ins().fumoData,n=0;n<this.equipItems.length;n++){var a=i.getPosDataByIndex(n),o=RpSys.ins().getData(RoleWin,RolePanel,ShengLingWin,ShenPanTaoZhuangMainPanel,e,a.pos);this.equipItems[n].setRedPoint(o)}this.itemFumo1.updateRedPoint(),this.itemFumo2.updateRedPoint(),this.itemFumo3.updateRedPoint(),this.itemFumo4.updateRedPoint(),this.redPointSplit.visible=RpSys.ins().getData(RoleWin,RolePanel,ShengLingWin,ShenPanTaoZhuangMainPanel,e,FenjieWin)}},e.prototype.updateConsumeItem=function(t){(t.cfg.type==ItemType.fumosuipian||t.cfg.type==ItemType.fumojuanzhou)&&this.updataConsume(this.curPointData)},e.prototype.updatePanel=function(){for(var t=ForgeSys.ins().fumoData,e=0;e<this.equipItems.length;e++){var i=t.getPosDataByIndex(e);this.equipItems[e].data=i}var n=t.getPosDataByPos(EquipPos.WEAPON);this.selectEquipItem(this.equipItems[n.pos]),this.updateGemItem(),this.updatePower()},e.prototype.onUpdateData=function(t,e,i,n){this.updateGemItem(i),this.selectGemItem(this.curPointData),this.updatePower();var a=this.itemFumos[i-1];1==n?GFunc.playUIMovie("fumojs",a.x+78,a.y+45,this.groupGem):t&&GFunc.playUIMovie("fumoxg",a.x+78,a.y+48,this.groupGem);var o="";o=1==n?"fumojh":t?"fumocg":"fumosb";var s=new MC;s.x=350,s.y=170,s.playFile(getEffName(o),1),this.addChild(s)
},e.prototype.updateGemItem=function(t){void 0===t&&(t=0);var e=this.getEquipData().pos,i=ForgeSys.ins().fumoData.getPosDataByPos(e);(0==t||1==t)&&(this.itemFumo1.data=i.getDataByPoint(1)),(0==t||2==t)&&(this.itemFumo2.data=i.getDataByPoint(2)),(0==t||3==t)&&(this.itemFumo3.data=i.getDataByPoint(3)),(0==t||4==t)&&(this.itemFumo4.data=i.getDataByPoint(4))},e.prototype.updataConsume=function(t){var e=t.getConfig();this.listConsumedData.source=e.items},e.prototype.updataStatus=function(t){var e=t.getConfig();if(this.lbDesc.text="",t.getSuitLv()<e.suitLv?this.currentState="not":t.isMax()?this.currentState="max":t.isAct()?this.currentState="atc":this.currentState="unAtc",t.getSuitLv()<e.suitLv){var i=Math.ceil(e.suitLv/4);i=0==i?1:i,this.lbDesc.text=Lang.fumo_str1.replace("$jie$",""+i)}},e.prototype.updataData=function(t){var e=Cfg.getConfig(EnchantAttrConfig,t.pos,t.point,0==t.lv?1:t.lv),i=AttrData.getFm(14931902,16777215," ",":");if(this.lbAttr.textFlow=addColorTF(AttrData.parse(e.attr,{fm:i}).join("\n")),!t.isMax()){var n=Cfg.getConfig(EnchantAttrConfig,t.pos,t.point,t.lv+1);this.lbAttrNext.textFlow=addColorTF(AttrData.parse(n.attr,{fm:"+%v"}).join("\n"))}},e.prototype.onGemItemClick=function(t){var e=t.target;if(e&&e.parent&&e.parent instanceof FumoItem){var i=e.parent,n=i.data;i.setSelect(!0),this.selectGemItem(n)}},e.prototype.selectGemItem=function(t){for(var e=0;4>e;e++)this.itemFumos[e].setSelect(e+1==t.point);var i=t.getConfig();this.bitRate.text=(i.rate/100).toFixed(0)+"%",this.curPointData=t,this.updataData(t),this.updataConsume(t),this.updataStatus(t)},e.prototype.onItemClick=function(t){var e=t.target;if(e&&e.parent&&e.parent instanceof FumoEquipItem){var i=e.parent;this.selectEquipItem(i)}},e.prototype.selectEquipItem=function(t){for(var e=0;e<this.equipItems.length;e++){var i=this.equipItems[e];i.setSelectBG(i==t)}var n=t.data;this.item.data=n,this.lbname.text=n.getName();for(var a=n.fumoPointDatas[0],e=0;e<this.getEquipData().fumoPointDatas.length;e++){var o=n.fumoPointDatas[e];if(o.isUp()){a=o;break}}this.selectGemItem(a),this.updateGemItem()},e.prototype.updatePower=function(){this.bitPower.text=this.getPower().toFixed(0)},e.prototype.getPower=function(){for(var t=0,e=ForgeSys.ins().fumoData,i=0;i<this.equipItems.length;i++){var n=e.getPosDataByIndex(i);t+=n.power}return t},e.prototype.onClick=function(t){switch(t.currentTarget){case this.btnOk:this.autoUp();break;case this.lbSuiPian:openWin(FenjieWin)}},e.prototype.autoUp=function(){var t=this.curPointData.getConfig();if(GFunc.checkConsumeEnough(t.items)){var e=new MC;e.x=350,e.y=200,e.playFile(getEffName("qhby"),1),this.addChild(e),ForgeSys.ins().sendEnchantUp(this.curPointData.pos,this.curPointData.point)}else this.longPressBtnOk.stop()},e.getTitle=function(){return"btz_zycs_sptz"},e.getTabTitle=function(){return Lang.fumo_str3},e.prototype.getEquipData=function(){return this.item.data},e.getSysId=function(){return 336},e}(BasePanel);__reflect(FumoPanel.prototype,"FumoPanel"),window.FumoPanel=FumoPanel;var ShenPanTaoZhuangPanel=function(t){function e(){var e=t.call(this)||this;return e.initUI(),e}return __extends(e,t),e.prototype.initUI=function(){this.skinName="ShenPanTaoZhuangPanelEUI",this.lbattr.lineSpacing=5,this.lbNextAttr.lineSpacing=5,this.shenPanTaoZhuangItem.touchChildren=!1,this.shenPanTaoZhuangItem.touchEnabled=!1,this.shenPanTaoZhuangItems=[this.shenPanTaoZhuangItem0,this.shenPanTaoZhuangItem7,this.shenPanTaoZhuangItem1,this.shenPanTaoZhuangItem2,this.shenPanTaoZhuangItem4,this.shenPanTaoZhuangItem8,this.shenPanTaoZhuangItem9,this.shenPanTaoZhuangItem5,this.shenPanTaoZhuangItem3,this.shenPanTaoZhuangItem6],this.curshenPanTaoZhuangItem=this.shenPanTaoZhuangItem1,this.listConsume.itemRenderer=ItemBaseConsume,this.listConsume.dataProvider=this.listConsumedData=new eui.ArrayCollection},e.prototype.open=function(){t.prototype.open.call(this),this.addClickE(this.btnOk,this.onclick),this.addClickE(this.groupItems,this.onItemClick),this.addLsn(RpSys.ins().patchRp,this.updateRp),this.addLsn(ForgeSys.ins().patchShenPanTaoZhuangUp,this.updataDataUp),this.addLsn(BagSys.ins().patchItemChange,this.updateCurrency),this.addLsn(BagSys.ins().patchEquipChange,this.setAllEquipData),this.iniData(),this.updateRp(),this.updatePower()},e.prototype.iniData=function(){var t=this.getDefaultIndex();this.equipData=ForgeSys.ins().shenPanTaoZhuangData.getSuitposData(t),this.equipData&&(this.curshenPanTaoZhuangItem.setSelectBG(!1),this.shenPanTaoZhuangItems[t].setSelectBG(!0),this.curshenPanTaoZhuangItem=this.shenPanTaoZhuangItems[t],this.shenPanTaoZhuangItem.data=this.equipData,this.setAllEquipData(),this.setEquipData(),this.setSelect(this.curshenPanTaoZhuangItem))},e.prototype.getDefaultIndex=function(){for(var t=ForgeSys.ins().shenPanTaoZhuangData.datas,e=0,i=Number.MAX_VALUE,n=0;n<t.length;n++){var a=GConst.fosterSort[n],o=t[a];o&&i>o.leve&&(i=o.leve,e=a)}return e},e.prototype.updateCurrency=function(t){t.cfg.type==ItemType.ShenPanTaoZhuanItemType&&(this.setEquipData(),this.setAllEquipData())},e.prototype.onItemClick=function(t){var e=t.target;if(e&&e.parent&&e.parent instanceof ShenPanTaoZhuangItem){var i=e.parent;i.data;this.setSelect(i)}},e.prototype.setSelect=function(t){var e=t.data;this.curshenPanTaoZhuangItem.setSelectBG(!1),this.curshenPanTaoZhuangItem=t,t.setSelectBG(!0),this.equipData=e,this.shenPanTaoZhuangItem.data=e,this.selectEquipData(),this.setEquipData()},e.prototype.updataDataUp=function(){this.setAllEquipData(),this.selectEquipData(),this.setEquipData(),this.updatePower();var t=MC.create(getEffName("qhby"));t.x=350,t.y=170,this.addChild(t);for(var e=0;e<this.shenPanTaoZhuangItems.length;e++){var i=this.shenPanTaoZhuangItems[e],n=i.data;if(i&&n.pos==this.equipData.pos){i.updateIcon();break}}},e.prototype.selectEquipData=function(){this.shenPanTaoZhuangItem.data=this.equipData,this.shenPanTaoZhuangItem.setRedPoint(!1),this.lbname.text=this.equipData.getConfig().name[Actor.ins().job-1]},e.prototype.setAllEquipData=function(){for(var t=ForgeSys.ins().shenPanTaoZhuangData,e=0;e<t.datas.length;e++){var i=t.datas[e],n=this.shenPanTaoZhuangItems[e];n.data?n.setlv(i.leve):n.data=i}},e.prototype.onclick=function(t){switch(t.currentTarget){case this.btnOk:GFunc.checkConsumeEnough(this.equipData.getConfig().items)&&ForgeSys.ins().sendShenPanTaoZhuangUp(this.equipData.pos)}},e.prototype.setEquipData=function(){this.strengthenPreview(this.equipData)},e.prototype.strengthenPreview=function(t){var e;e=t.isAct()?t.getConfig():Cfg.getConfig(SuitAttrConfig,t.pos,1);var i=e.attr;this.lbstrengthenlv.text=Lang.common_str66+Math.round(GFunc.getPower(i));var n=AttrData.parse(i,{fm:"%k：%v"}).join("\n");this.equipData.isMax()||(this.strengthenPreviewNext(t),this.listConsumedData.source=t.getConfig().items),this.lbattr.textFlow=addColorTF(n),this.btnOk.redPoint.visible=RpFun.getSuitRedPoint(t),this.updateStatus()},e.prototype.updatePower=function(){this.bitPower.text=this.getPower()+""},e.prototype.updateStatus=function(){0==this.equipData.leve?this.currentState="noact":this.equipData.isMax()?this.currentState="max":this.currentState="act"},e.prototype.strengthenPreviewNext=function(t){var e=Cfg.getConfig(SuitAttrConfig,t.pos,t.leve+1),i=e.attr;this.lbstrengthenlvNext.text=Lang.common_str66+Math.round(GFunc.getPower(i));var n=AttrData.parse(i,{fm:"+v%"}).join("\n");this.lbNextAttr.textFlow=addColorTF(n)},e.prototype.getPower=function(){for(var t=0,e=this.shenPanTaoZhuangItems,i=0;i<e.length;i++){var n=e[i].data;n&&(t+=n.power)}return t>>0},e.getTitle=function(){return"btz_zycs_sptz"},e.getTabTitle=function(){return Lang.fumo_str4},e.getSysId=function(){return 336},e}(BasePanel);__reflect(ShenPanTaoZhuangPanel.prototype,"ShenPanTaoZhuangPanel"),window.ShenPanTaoZhuangPanel=ShenPanTaoZhuangPanel;var ShenYouPanel=function(t){function e(){var e=t.call(this)||this;return e.redPointHead=[RoleWin,RolePanel,ZhuangBanWin],e}return __extends(e,t),e.prototype.setTabItem=function(){this.tab.itemRenderer=BaseTabBtn3},e.prototype.setSkinName=function(){this.skinName="ShenQiPanelEUI"},e.getTitle=function(){return"btz_zycs_shenyou"},e.getTabTitle=function(){return"bqz_zycs_sy"},e.getSysId=function(){return 325},e.panelNames=[ShenYouLevelPanel,ShenYouSkillPanel,ShenYouHuanHuaPanel,ShenYouYinJiPanel],e}(BaseTabPanel);__reflect(ShenYouPanel.prototype,"ShenYouPanel"),window.ShenYouPanel=ShenYouPanel;var ProgressBarEffBase=function(t){function e(){var e=t.call(this)||this;return e.isAnimation=!1,e.group=new eui.Group,e.groupDonw=new eui.Group,e.groupTop=new eui.Group,e.shapeBg=new eui.Image,e.addChild(e.group),e.addChild(e.groupDonw),e.addChild(e.groupTop),e.iniShape(),e.iniShapebg(),e.lbvalue=DisUtil.createEuiLabelText(e,"",170,27,20),e.lbvalue.width=200,e.lbvalue.textAlign="center",e.lbvalue.textColor=16772040,e.lbvalue.fontFamily="SimHei",e.lbvalue.stroke=1,e.groupTop.addChild(e.lbvalue),e.iniUI(),e}return __extends(e,t),e.prototype.iniUI=function(){},e.prototype.iniShape=function(){this.shape=new eui.Image,this.shape.source=this.getMaskImg(),this.shape.x=41,this.shape.y=27,this.shape.width=0,this.shape.fillMode="repeat"},e.prototype.iniShapebg=function(){this.shapeBg=new eui.Image,this.shapeBg.source=this.getMaskImg(),this.shapeBg.x=41,this.shapeBg.y=27,this.groupDonw.addChild(this.shapeBg)},e.prototype.update=function(){var t=this;if(this.isPlay()&&!this.isAnimation){this.isAnimation=!0,egret.Tween.removeTweens(this.shape);var e=this.values[0];e.isMax&&(this.shape.width=0);var i=this.getCurWidth();this.values.splice(0,1);var n=egret.Tween.get(this.shape,{onChange:function(){t.updateXiaoWeiBa()}});n.to({width:i},200).call(function(){t.isAnimation=!1,t.update()}),this.updasteValueText()}},e.prototype.updasteValueText=function(){this.lbvalue.text=this.getValue()+"/"+this.getMaxValue()},e.prototype.updateXiaoWeiBa=function(){},e.prototype.updateMan=function(){},e.prototype.getBgmcRes=function(){return""},e.prototype.getBgImg=function(){return""},e.prototype.getMaskImg=function(){return""},e.prototype.max=function(){this.setState(ProgressBarEffDataState.max),this.setData(1,1),this.update()},e.prototype.maxNoDesc=function(){this.setData(1,1),this.update()},e}(ProgressBarEffBaseData);__reflect(ProgressBarEffBase.prototype,"ProgressBarEffBase");var ActPanel1_1=function(t){function e(){var e=t.call(this)||this;return e.skinName="ActPanel1_1EUI",e.list.itemRenderer=ActItem1_1,e.list.dataProvider=e.listData=new eui.ArrayCollection,e}return __extends(e,t),e.prototype.setImgBg=function(){this.imgBg&&(this.imgBg.source="qmkh_zycs_bg2_jpg")},e.prototype.open=function(e){t.prototype.open.call(this,e),this.addClickE(this.btnSend,this.onClick),this.addLsn(LogicSys.ins().patchLevelChange,this.updateData),this.addLsn(ActSys.ins().patchActivityIsGetAwards,this.updateData),this.addLsn(RechargeActSys.ins().patchZZTQ,this.updateData),this.updateData()},e.prototype.updateData=function(){this.actData=ActSys.ins().getActDataById(this.actId);var t=this.actData.getItemDatas();SortUtil.sortOn(t,["status","dabiao"],[SortType.up,SortType.up]),this.listData.replaceAll(t);var e=this.isActCard();this.btnSend.visible=!e,this.imgYjh.visible=e},e.prototype.updateTime=function(){this.actData&&(this.lbTime.textFlow=addColorTF(this.actData.getformatTime()))},e.prototype.onClick=function(t){switch(t.target){case this.btnSend:this.onCardLink()}},e.prototype.isActCard=function(){var t=ActSys.ins().getActDataById(ActId.ID_99500);return t.isAct()},e.prototype.onCardLink=function(){RechargeActSys.ins().firstRechargeData.isRecharge()?openWin(ZZTQWin,ZZTQWin.getTabIndexbyPanel(ZZTQCardPanel)):openWin(FirstRechargeBuyWin)},e}(ActBasePanel);__reflect(ActPanel1_1.prototype,"ActPanel1_1"),window.ActPanel1_1=ActPanel1_1;var JJCManyPanel=function(t){function e(){var e=t.call(this)||this;return e.redPointHead=[JJCWin],e}return __extends(e,t),e.prototype.setTabItem=function(){this.tab.itemRenderer=BaseTabBtn4},e.prototype.setSkinName=function(){this.skinName="FuBenPanelEUI"},e.getTitle=function(){return"btz_zycs_srjj"},e.getTabTitle=function(){return"bqz_zycs_srjj"},e.panelNames=[RedFortPanel,MineMainPanel,GuZhanPanel],e}(BaseTabPanel);__reflect(JJCManyPanel.prototype,"JJCManyPanel"),window.JJCManyPanel=JJCManyPanel;var JJCSinglePanel=function(t){function e(){var e=t.call(this)||this;return e.redPointHead=[JJCWin],e}return __extends(e,t),e.prototype.setTabItem=function(){this.tab.itemRenderer=BaseTabBtn4},e.prototype.setSkinName=function(){this.skinName="FuBenPanelEUI"},e.getTitle=function(){return"btz_zycs_drjj"},e.getTabTitle=function(){return"bqz_zycs_drjj"},e.prototype.getJJCPanelNew_JJCItem=function(t){return this.getPanel(JJCPanelNew).getJJCItem(t)},e.panelNames=[JJCPanelNew,LadderMainPanel],e}(BaseTabPanel);__reflect(JJCSinglePanel.prototype,"JJCSinglePanel"),window.JJCSinglePanel=JJCSinglePanel;var MallPanel=function(t){function e(){var e=t.call(this)||this;return e.redPointHead=[ShopWin],e.param=null,e}return __extends(e,t),e.prototype.open=function(e,i){void 0===e&&(e=-1),void 0===i&&(i=null);var n=this.getAotuIndex(e);this.param=i,t.prototype.open.call(this,n),this.observeTabRedPoint()},e.prototype.getParam=function(){return[this.param]},e.prototype.setTabItem=function(){this.tab.itemRenderer=BaseTabBtn5},e.getTitle=function(){return"btz_zycs_sc"},e.getTabTitle=function(){return"bqz_zycs_sc"},e.panelNames=[MallXGTHPanel,MallItemPanel,MallSVIPPanel],e}(BaseTabPanel);__reflect(MallPanel.prototype,"MallPanel"),window.MallPanel=MallPanel;var MizangPanel=function(t){function e(){var e=t.call(this)||this;return e.redPointHead=[ShopWin],e}return __extends(e,t),e.prototype.setTabItem=function(){this.tab.itemRenderer=BaseTabBtn5},e.getTitle=function(){return"btz_zycs_mz"},e.getTabTitle=function(){return"bqz_zycs_mz"},e.panelNames=[MizangXingshiPanel,MizangHuangguanPanel],e}(BaseTabPanel);__reflect(MizangPanel.prototype,"MizangPanel"),window.MizangPanel=MizangPanel;var ShopPanel=function(t){function e(){var e=t.call(this)||this;return e.param=null,e}return __extends(e,t),e.prototype.open=function(e,i){void 0===e&&(e=-1),void 0===i&&(i=null);var n=this.getAotuIndex(e);this.param=i,t.prototype.open.call(this,n),this.observeTabRedPoint()},e.prototype.getParam=function(){return[this.param]},e.prototype.setTabItem=function(){this.tab.itemRenderer=BaseTabBtn5},e.getTitle=function(){return""},e.getTabTitle=function(){return"bqz_zycs_sd"},e.panelNames=[ShopBossPanel,ShopRongyuPanel],e}(BaseTabPanel);__reflect(ShopPanel.prototype,"ShopPanel"),window.ShopPanel=ShopPanel;var BagEquipPanel=function(t){function e(){var e=t.call(this)||this;return e.isSmeltWinOpen=!1,e.skinName="BagEquipPanelEUI",e.itemList.itemRenderer=ItemBagBase,e.itemCollection=new eui.ArrayCollection,e.itemList.dataProvider=e.itemCollection,e.labsvip.visible=!urlParam.isShenhe,e}return __extends(e,t),e.prototype.open=function(){t.prototype.open.call(this),this.addItemTapE(this.itemList,this.onListItemTap),this.addLsn(BagSys.ins().patchItemChange,this.updateBagData),this.addLsn(BagSys.ins().patchBagVolChange,this.updateCount),this.addLsn(RpSys.ins().patchRp,this.updateRp),this.addClickE(this.btnAdd,this.onTap),this.updatePanel()},e.prototype.updateRp=function(t){void 0===t&&(t=null)},e.prototype.updatePanel=function(){this.itemCollection.source=BagSys.ins().getBagSortEquips(),this.updateCount(),this.updateRp()},e.prototype.updateBagData=function(t){this.isSmeltWinOpen||ItemType.isEquip(t.cfg.type)&&(this.itemCollection.replaceAll(BagSys.ins().getBagSortEquips()),this.itemCollection.refresh(),this.itemScroller.viewport.scrollV=Math.max(this.itemScroller.viewport.contentHeight-this.itemScroller.height,0))},e.prototype.updateCount=function(){this.labelBagCapacity.text=BagSys.ins().getItemNumByType()+"/"+BagSys.ins().bagNum},e.prototype.onListItemTap=function(t){var e=t.item;GFunc.openItemTips(e)},e.prototype.onTap=function(t){switch(t.currentTarget){case this.btnAdd:var e=Cfg.getConfig(BagDataConfig,1),i=(BagSys.ins().bagNum-BagSys.ins().getBagAddCount())/e.rowSize;i==Cfg.getConfigs(BagExpandConfig).length?showtipsFail(Lang.bag_str4):openWin(OpenCellWin)}},e.prototype.getSmeltBtn=function(){return null},e.getTitle=function(){return"btz_zycs_bb"},e.getTabTitle=function(){return"bqz_zycs_zb"},e.getSysId=function(){return 301},e}(BasePanel);__reflect(BagEquipPanel.prototype,"BagEquipPanel"),window.BagEquipPanel=BagEquipPanel;var BuyWinBase=function(t){function e(){var e=t.call(this)||this;return e._num=1,e}return __extends(e,t),e.prototype.setSkinName=function(){this.skinName="BuySkin"},e.prototype.initUI=function(){t.prototype.initUI.call(this),this.layer=LayerMgr.Popup,this.addBg()},e.prototype.open=function(e){e instanceof BuyData&&(this.buyData=e,this._num=e.count),t.prototype.open.call(this),this.addClickE(this.add1Btn,this.onTap),this.addClickE(this.sub1Btn,this.onTap),this.addClickE(this.buyBtn,this.buy),this.addEvent(egret.TouchEvent.TOUCH_BEGIN,this.add1Btn,this.onAddBegin),this.addEvent(egret.TouchEvent.TOUCH_BEGIN,this.sub1Btn,this.onAddBegin),this.addEvent(egret.TouchEvent.TOUCH_END,this,this.onAddend),this.updateView()},e.prototype.close=function(){t.prototype.close.call(this),Timer.ins().remove(this.AddNum,this)},e.prototype.updateView=function(){this.iniNum(),this.lbDesc.visible=!1,this.lbDesc.text=Lang.shop_str1+this.buyData.limitCount,this.updatePrice()},e.prototype.iniNum=function(){this.numLabel.text=this.num.toString()},e.prototype.updatePrice=function(){},e.prototype.onAddBegin=function(t){this.isAutoAdd=!0,Timer.ins()["do"](500,Timer.EVERY_FRAME,0,this.AddNum,this,TimerType.FIRST,t.currentTarget)},e.prototype.onAddend=function(t){this.isAutoAdd=!1,Timer.ins().remove(this.AddNum,this)},e.prototype.onTap=function(t){this.AddNum(t.currentTarget)},e.prototype.AddNum=function(t){switch(t){case this.sub1Btn:this.num-=1;break;case this.add1Btn:this.num<this.buyData.limitCount?this.num<this.buyData.maxBuyCount?this.num+=1:(showtipsFail(Lang.shop_str18.replace("$name$",Cfg.getItemCfg(this.buyData.consumeItemId).getName())),this.isAutoAdd=!1,Timer.ins().remove(this.AddNum,this)):(this.isAutoAdd=!1,Timer.ins().remove(this.AddNum,this),showtipsFail(Lang.shop_str2))}this.numLabel.text=this.num.toString(),this.updatePrice()},e.prototype.buy=function(t){var e=GFunc.creatRewardDataById(this.buyData.consumeItemId,this.buyData.getTotalPrice(this.num));GFunc.checkConsumeEnough(e)&&(this.buyData.buyFun.obj=this,this.buyData.buyFun.param=[this.num],this.buyData.buyFun.call(),closeWin(this))},Object.defineProperty(e.prototype,"num",{get:function(){return this._num},set:function(t){if(this._num=t,this._num<=0)this._num=1;else{var e=Math.min(this.buyData.limitCount,this.buyData.maxBuyCount);this._num=this._num>=e?e:this._num,this._num=this._num<=0?1:this._num}},enumerable:!0,configurable:!0}),e}(BaseWinSingle);__reflect(BuyWinBase.prototype,"BuyWinBase"),window.BuyWinBase=BuyWinBase;var ShopBaseData=function(){function t(){this.configIndex=1,this.buyCount=0}return t.prototype.getConsumeItem=function(){return null},t.prototype.getItemSell=function(){return null},t.prototype.getItemId=function(){return 0},t.prototype.getPrice=function(){return 0},t.prototype.getLeftBuyCount=function(){return 9999},t.prototype.getBuyData=function(){var t=this,e=new BuyData;return e.setBuyFun(function(e){t.sendBuy(t.configIndex,e)}),e.itemId=this.getItemId(),e.price=this.getPrice(),e.consumeItemId=this.getConsumeItem().id,e.limitCount=this.getLeftBuyCount(),e},t.prototype.sendBuy=function(t,e){},t.prototype.isFastBuy=function(){return!1},t}();__reflect(ShopBaseData.prototype,"ShopBaseData");var BagItemPanel=function(t){function e(){var e=t.call(this)||this;return e.skinName="BagItemPanelEUI",e.itemListGoods.itemRenderer=ItemBagBase,e.itemListGoods.dataProvider=e.goodCollection=new eui.ArrayCollection,e}return __extends(e,t),e.prototype.open=function(){t.prototype.open.call(this),this.addItemTapE(this.itemListGoods,this.onListItemTap),this.addLsn(BagSys.ins().patchItemChange,this.updatePanel),this.updatePanel();var e=BagSys.ins().getBagGoods();SortUtil.sortOn(e,["redPointSort","quality"],[SortType.down,SortType.down]),this.goodCollection.source=e},e.prototype.updatePanel=function(t){if(void 0===t&&(t=null),!t||!ItemType.isEquip(t.cfg.type)){var e=BagSys.ins().getBagGoods();e.length>0?this.goodCollection.replaceAll(e):this.goodCollection.source=null}},e.prototype.onListItemTap=function(t){var e=t.item;GFunc.openItemTips(e)},e.prototype.getGroodsGridById=function(t){for(var e=0;e<this.itemListGoods.numElements;e++){var i=this.itemListGoods.getElementAt(e);if(i.data.id==t)return i}return null},e.prototype.getItemById=function(t){this.itemListGoods.validateNow();for(var e=this.itemListGoods.numElements,i=0;e>i;i++){var n=this.itemListGoods.getElementAt(i),a=n.data;if(a.id==t)return n}return null},e.prototype.getItemByType=function(t){this.itemListGoods.validateNow();for(var e=this.itemListGoods.numElements,i=0;e>i;i++){var n=this.itemListGoods.getElementAt(i),a=n.data;if(a.cfg.type==t)return n}return null},e.getTitle=function(){return"btz_zycs_bb"},e.getTabTitle=function(){return"bqz_zycs_dj"},e.getSysId=function(){return 301},e}(BasePanel);__reflect(BagItemPanel.prototype,"BagItemPanel"),window.BagItemPanel=BagItemPanel;var KfSys=function(t){function e(){var e=t.call(this)||this;return e.bossModel=new KfBossModel,e.smsdData=new FbModelSmsd,e.sysId=PackId.KuaFu,e.reg(60,e.patchSmsdInfo),e.reg(61,e.patchSmsdAutoTz),e.reg(63,e.patchSmsdBossInfo),e.reg(64,e.patchSmsdSVIPCount),e.reg(65,e.patchSmsdBoxInfo),e.reg(66,e.patchSmsdResult),e.reg(67,e.patchSmsdBoxReward),e.reg(100,e.patchBossData),e.reg(101,e.patchBossListData),e.reg(102,e.doBossFight),e.reg(103,e.doBossFightResult),e.reg(104,e.patchBossDataUpdate),e.reg(105,e.patchBossCountBuy),e}return __extends(e,t),e.ins=function(){return t.getIns.call(this,e)},e.prototype.sendSmsdInfo=function(){this.sendBase(60)},e.prototype.patchSmsdInfo=function(t){this.smsdData.parserInfo(t),RpFun.showKfBossSdRp()},e.prototype.sendSmsdAutoTz=function(t,e){var i=this.getBytes(61);i.writeByte(t),i.writeBoolean(e),this.send(i)},e.prototype.patchSmsdAutoTz=function(t){this.smsdData.parserAutoTz(t),RpFun.showKfBossSdRp()},e.prototype.sendSmsdEnter=function(t,e){var i=this.getBytes(62);i.writeByte(t),i.writeByte(e),this.send(i)},e.prototype.sendSmsdOpenBox=function(t,e){var i=this.getBytes(63);i.writeByte(t),i.writeByte(e),this.send(i)},e.prototype.patchSmsdBossInfo=function(t){var i=this;this.smsdData.parserBossInfo(t);var n=this.smsdData.getBossDatasByOpenAndRemind();if(n&&n.length>0){SortUtil.sortOn(n,["floor","showLv"],[SortType.down,SortType.down]);var a=getWin(MainWin).com_ext;a.showBossRemind(Lang.kfboss_str11,n[0].monsterName,GFunc.GetLvStrByLv(n[0].showLv),n[0].monsterHead,function(){if(e.ins().smsdData.enterCD>0)return void showtipsFail(Lang.fb_str11.replace("$second$",""+Math.ceil(e.ins().smsdData.enterCD/1e3)));var t=n[0];if(t.getConfig().zslv>Actor.ins().zsId)return void showtipsFail(Lang.common_str119.replace("$num$",GFunc.getZSNameBydb(t.getConfig().zslv)));if(e.ins().smsdData.atkBossData=t,t.getConfig().svip<=Actor.ins().sVipLv)e.ins().sendSmsdEnter(t.id,0),e.ins().smsdData.isAutoTz=!1,closeWin(BossWin);else{var a=Lang.kfboss_str6.replace("$num$",StrUtil.addColor(""+t.getConfig().diamond,5767068));a+=StrUtil.addColor("（"+Lang.kfboss_str7+"）",15733780);var o=new PopupData(a);o.setFunction(i,function(){GFunc.checkCurrency(CurType.JinZuan,t.getConfig().diamond)&&(e.ins().sendSmsdEnter(t.id,1),e.ins().smsdData.isAutoTz=!1,closeWin(BossWin))}),openWin(CommonTipsWin,o)}},ReliveType.Boss)}RpFun.showKfBossSdRp()},e.prototype.patchSmsdSVIPCount=function(t){this.smsdData.parserSVIPCount(t)},e.prototype.patchSmsdBoxInfo=function(t){this.smsdData.parserBoxInfo(t)},e.prototype.patchSmsdResult=function(t){var e=new FbResultKuafuBossSdData;e.parser(t),e.isBelonger?openWin(ResultWinKfBossSd,e):openWin(ResultWinKfBossSdLose,e)},e.prototype.patchSmsdBoxReward=function(t){for(var e=[],i=t.readByte(),n=0;i>n;n++){var a=new ItemDataReward;a.parser(t),e.push(a)}SortUtil.sortOn(e,["quality"],[SortType.down]),openWin(SmsdBoxRewardWin,e)},e.prototype.patchBossData=function(t){this.bossModel.parser(t),RpFun.showKfBossRedPoint()},e.prototype.patchBossListData=function(t){this.bossModel.parserBossData(t),RpFun.showKfBossRedPoint()},e.prototype.sendBossFight=function(t){var e=this.getBytes(102);e.writeByte(t),this.send(e)},e.prototype.doBossFight=function(t){t.readUnsignedByte()},e.prototype.doBossFightResult=function(t){var e=new FbResultKuafuBossData;e.parser(t),e.isBelonger?openWin(ResultWinBossHome,e):openWin(ResultWinKfBossLose,e)},e.prototype.patchBossDataUpdate=function(t){var i=t.readInt(),n=this.bossModel.getKfBossDatasByIndex(i);if(n&&(n.parserUpdate(t),this.bossModel.canEnterFb()&&this.bossModel.guishuCount>0&&n.isRemind&&n.isAlive()&&GFunc.isSysOpen(235))){var a=getWin(MainWin).com_ext;a.showBossRemind("跨服BOSS",n.monsterName,GFunc.getZSNameBydb(n.getZsLv),n.monsterHead,function(){e.ins().sendBossFight(n.index)},ReliveType.KFBoss)}RpFun.showKfBossRedPoint()},e.prototype.sendBossCountBuy=function(){this.sendBase(105)},e.prototype.patchBossCountBuy=function(t){this.bossModel.parserBossCount(t),RpFun.showKfBossRedPoint()},e.prototype.sendBossRemind=function(t,e){var i=this.getBytes(106);i.writeShort(t),this.send(i)},e}(BaseSys);__reflect(KfSys.prototype,"KfSys");var System;!function(t){t.kfSys=KfSys.ins.bind(KfSys)}(System||(System={})),window.KfSys=KfSys;var MallItemPanelItemBase=function(t){function e(){return t.call(this)||this}return __extends(e,t),e.prototype.dataChanged=function(){},e.prototype.playSelectMC=function(){this.btnBuyMc=this.btnBuyMc||new MC,this.btnBuyMc.x=this.btnBuy.width/2,this.btnBuyMc.y=this.btnBuy.height/2,this.btnBuyMc.scaleX=this.btnBuyMc.scaleY=.7,this.btnBuy.addChild(this.btnBuyMc),this.btnBuyMc.playFile(ResMgr.getEffName("public_zycs_button01"),-1)},e}(BaseItemRender);__reflect(MallItemPanelItemBase.prototype,"MallItemPanelItemBase"),window.MallItemPanelItemBase=MallItemPanelItemBase;var KfBossMainPanel=function(t){function e(){var e=t.call(this)||this;return e.redPointHead=[BossWin],e}return __extends(e,t),e.prototype.open=function(e){void 0===e&&(e=-1);var i=this.getAotuIndex(e);t.prototype.open.call(this,i),this.observeTabRedPoint()},e.prototype.setTabItem=function(){this.tab.itemRenderer=BaseTabBtn4},e.prototype.setSkinName=function(){this.skinName="FuBenPanelEUI"},e.getTitle=function(){return"btz_zycs_kfboss"},e.getTabTitle=function(){return"bqz_zycs_kfbs"},e.prototype.getKfBossPanel_BossItem=function(t){return this.getPanel(KfBossPanel).getBossItem(t)},e.panelNames=[KfBossPanel,SmsdPanel,BravePanel],e}(BaseTabPanel);__reflect(KfBossMainPanel.prototype,"KfBossMainPanel"),window.KfBossMainPanel=KfBossMainPanel;var ShengWuPanelNew=function(t){function e(){var e=t.call(this)||this;return e.mcBtnAct=new MC,e.mcBtnSend=new MC,e.skinName="ShengWuPanelNewEUI",e.setSkinPart("item0",new ShengWuItem),e.setSkinPart("item1",new ShengWuItem),e.setSkinPart("item2",new ShengWuItem),e.setSkinPart("item3",new ShengWuItem),e.items=[e.item0,e.item1,e.item2,e.item3],e.attrs.dataProvider=e.attrData=new eui.ArrayCollection,e.btnAttr.textFlow=addColorTF(StrUtil.addUnderLine(Lang.common_str116),1176860),e.btnAct.redPoint.visible=!0,e.btnSend.redPoint.visible=!0,e.mcBtnSend.x=e.btnSend.width/2,e.mcBtnSend.y=e.btnSend.height/2,e.mcBtnSend.playFile(ResMgr.getEffName("public_zycs_button01"),-1),e.btnSend.addChildAt(e.mcBtnSend,e.btnSend.numChildren-1),e.mcBtnAct.x=e.btnSend.width/2,e.mcBtnAct.y=e.btnSend.height/2,e.mcBtnAct.playFile(ResMgr.getEffName("public_zycs_button01"),-1),e.btnAct.addChildAt(e.mcBtnAct,e.btnAct.numChildren-1),e}return __extends(e,t),e.prototype.open=function(){t.prototype.open.call(this),this.addClickE(this.btnAttr,this.onClick),this.addClickE(this.btnAct,this.onClick),this.addClickE(this.btnSend,this.onClick),this.addClickE(this.btnGet,this.onClick),this.addClickE(this.leftBtn,this.onClick),this.addClickE(this.rightBtn,this.onClick);for(var e=0,i=this.items;e<i.length;e++){var n=i[e];this.addClickE(n,this.onItemClick)}this.addLsn(BagSys.ins().patchShengWuInfo,this.updatePanel),this.addLsn(BagSys.ins().patchShengWuAct,this.infoPanel),this.addLsn(BagSys.ins().patchShengWuFragmentAct,this.updatePanel),this.addLsn(RpSys.ins().patchRp,this.updateRp),this.infoPanel();var a=new XY;a.x=this.imgIcon.x,a.y=this.imgIcon.y-15;var o=new XY;o.x=this.imgIcon.x,o.y=this.imgIcon.y+15,egret.Tween.removeTweens(this.imgIcon),GFunc.move(this.imgIcon,a,o,1500)},e.prototype.removeDisplay=function(){egret.Tween.removeTweens(this.imgIcon)},e.prototype.updateRp=function(t){!t||t.check(this)},e.prototype.infoPanel=function(){this.dataModel=BagSys.ins().shengWuModel,this.dataModel.isMax()?this.curData=this.dataModel.getShengWuDataById(this.dataModel.shengWuId):this.curData=this.dataModel.getShengWuDataById(this.dataModel.shengWuId+1),this.updatePanel(),this.updateRp()},e.prototype.updatePanel=function(){this.currentState="state"+this.curData.getConfig().needitem.length,this.btnAct.visible=this.curData.isCanAct();for(var t=this.curData.fragmentDatas.length,e=0;t>e;e++){var i=this.curData.fragmentDatas[e];this.items[e].data=i}this.imgName.text=this.curData.getConfig().name,this.lbAttr.text=this.curData.getConfig().desc,this.imgYjh.visible=this.curData.isAct,this.imgWjh.visible=!this.curData.isAct;var n,a=this.curData.fragmentDatas.concat();this.curData.isAct?n=a[a.length-1]:(SortUtil.sortOn(a,["canAct","isAct","index"],[SortType.down,SortType.up,SortType.up]),n=a[0],n.isAct&&(n=a[a.length-1])),this.curItem&&(this.curItem.selected=!1),this.curItem=this.items[n.index],this.curItem.selected=!0,this.leftBtn.visible=this.curData.id>1;var o=this.dataModel.shengWuId+2;o=o>this.dataModel.getMaxId()?this.dataModel.getMaxId():o,this.rightBtn.visible=this.curData.id<o,this.updateAttrPanel(n),this.updataMC(),this.updatePower()},e.prototype.updataMC=function(){this.imgIcon.source="sw_zycs_ng"+this.curData.id+"_png",this.imgAttr.source="sw_zycs_"+this.curData.id},e.prototype.updatePower=function(){this.power.text=""+this.dataModel.getPower()},e.prototype.updateAttrPanel=function(t){this.lbFragmentName.text=t.getConfig().name;var e=AttrData.parse(t.getConfig().attrs,{fm:StrUtil.addColor("%k：",12704255)+"   "+StrUtil.addColor("+%v",5767068)});this.attrData.source=StrUtil.strsToTF(e),this.attrs.validateNow(),this.attrs.width=this.attrs.contentWidth,t.isAct?(this.imgYfr.visible=!0,this.btnSend.visible=!1,this.btnGet.visible=!1):(this.imgYfr.visible=!1,this.btnSend.visible=!1,this.btnGet.visible=!1,t.canAct?this.btnSend.visible=!0:this.btnGet.visible=!0)},e.prototype.onItemClick=function(t){this.curItem&&(this.curItem.selected=!1),this.curItem=t.currentTarget,this.curItem.selected=!0,this.updateAttrPanel(this.curItem.data)},e.prototype.onClick=function(t){switch(t.currentTarget){case this.btnAttr:openWin(ComAttrWin,this.dataModel.getTotalAttr(),ComAttrTitleEnum.ShengWu);break;case this.btnAct:BagSys.ins().sendShengWuAct(this.curData.id);break;case this.btnSend:var e=this.curItem.data;BagSys.ins().sendShengWuFragmentAct(this.curData.id,e.index);break;case this.btnGet:openWin(GuanJiWin);break;case this.leftBtn:var i=Math.max(this.curData.id-1,1);this.curData=this.dataModel.getShengWuDataById(i),this.updatePanel();break;case this.rightBtn:var n=this.dataModel.shengWuId+2;n=n>this.dataModel.getMaxId()?this.dataModel.getMaxId():n;var a=Math.min(this.curData.id+1,n);this.curData=this.dataModel.getShengWuDataById(a),this.updatePanel()}},e.prototype.getBtnAct=function(){return this.btnAct},e.prototype.getbtnGet=function(){return this.btnGet},e.getTitle=function(){return"btz_zycs_sw"},e.getTabTitle=function(){return"bqz_zycs_sw"},e.getSysId=function(){return 225},e}(BasePanel);__reflect(ShengWuPanelNew.prototype,"ShengWuPanelNew"),window.ShengWuPanelNew=ShengWuPanelNew;var GuildBattleFbFace=function(t){function e(){var e=t.call(this)||this;return e.skinName="GuildBattleFbFaceEUI",e.imgType.visible=!1,e.iniHpMc(),e
}return __extends(e,t),e.prototype.iniHpMc=function(){this.mcHP=GFunc.playUIMovie(this.hpMcName,47,46,this.groupMc,-1,null)},e.prototype.dataChanged=function(){this.data instanceof GuildBattleBossData?this.setBossData(this.data):"number"==typeof this.data&&this.setMasterHandle(this.data)},e.prototype.setBossData=function(t){this.groupScroller.height=this.groupMc.height*t.hpPer/100,t.isDie()?this.lbName.textFlow=addColorTF(getFormatTime(t.getTime(),"mm分ss秒")):this.lbName.textFlow=addColorTF(""+t.getName(),14931902)},e.prototype.setMasterHandle=function(t){var e=LogicSys.ins().getCanAtkByMasterHandle(t);if(e){var i=e.getHP(),n=e.getHpMax();this.groupScroller.height=this.groupMc.height*i/n,this.lbName.textFlow=addColorTF(e.getName(),14931902);GuildBattleSys.ins().lianZhanCounts[t]}},e.prototype.setShowAtk=function(t){t&&!this.mcAtk&&(this.mcAtk=GFunc.playUIMovie("boss_pk",72,56,this,-1,null)),this.mcAtk.visible=t},e.prototype.setImgSelect=function(t){this.imgSelect.visible=t},Object.defineProperty(e.prototype,"hpMcName",{get:function(){return"boss_xq"},enumerable:!0,configurable:!0}),e}(BaseItemRender);__reflect(GuildBattleFbFace.prototype,"GuildBattleFbFace"),window.GuildBattleFbFace=GuildBattleFbFace;var GuildBattleFinalsPanel=function(t){function e(){var e=t.call(this)||this;return e.skinName="GuildBattleFinalsPanelEUI",e}return __extends(e,t),e.prototype.open=function(e){void 0===e&&(e=null),t.prototype.open.call(this),this.manorData=e,this.item0.visible=this.item1.visible=!1,this.addLsn(GuildBattleSys.ins().patchRivalInfo,this.updatePanel),GuildBattleSys.ins().sendRivalInfo(e.id,2),this.updateTime()},e.prototype.updatePanel=function(t,e){this.imgIcon.source="ldsz_zycs_db"+this.manorData.id,this.imgName.source="ldsz_zycs_na"+this.manorData.id,this.imgSR.source="ldsz_zycs_s"+this.manorData.getConfig().level,this.item0.data=t,this.item1.data=e,this.item0.visible=this.item1.visible=!0},e.prototype.updateTime=function(){t.prototype.updateTime.call(this);var e=GuildBattleSys.ins().getGuildBattleState();this.lbTimeDec.text=Lang.gb_strs[e];var i=GuildBattleSys.ins().getGuildBattleTime(),n="dd天hh小时mm分钟ss秒";n=i<DateUtil.SECOND_PER_HOUR?"mm分ss秒":i<DateUtil.SECOND_PER_DAY?"hh小时mm分":"dd天hh小时mm分钟ss秒",this.lbTime.textFlow=addColorTF(i>0?getFormatTime(i,n):"")},e.openCheck=function(){var t=GuildBattleSys.ins().prelimTick-Actor.ins().serverTime,e=GuildBattleSys.ins().getGuildBattleState();return t>0||e==GuildBattleState.lottery?(showtipsFail(Lang.gb_str9),!1):!0},e.getTitle=function(){return"btz_zycs_ldzk"},e.getTabTitle=function(){return Lang.btn_js},e.getSysId=function(){return 334},e}(BasePanel);__reflect(GuildBattleFinalsPanel.prototype,"GuildBattleFinalsPanel"),window.GuildBattleFinalsPanel=GuildBattleFinalsPanel;var GuildBattleGerenScoreRankLastPanel=function(t){function e(){var e=t.call(this)||this;return e.skinName="GuildBattleGerenScoreRankLastPanelEUI",e.listRank.itemRenderer=GuildBattleGerenScoreRankItem,e.listRank.dataProvider=e.listRankData=new eui.ArrayCollection,e}return __extends(e,t),e.prototype.open=function(){t.prototype.open.call(this),this.addLsn(GuildBattleSys.ins().patchGerenScoreRank,this.updatePanel),GuildBattleSys.ins().sendGerenScoreRank()},e.prototype.updatePanel=function(t){this.listRankData.source=t.datas,this.lbMyRank.textFlow=addColorTF(""+Lang.act_str25+addColor(""+(0==t.myRank?Lang.common_str17:t.myRank),5767068)),this.lbMyScore.textFlow=addColorTF(""+Lang.fb_str199+addColor(""+GFunc.overLength(t.myScore),5767068))},e.getTitle=function(){return"btz_zycs_sjzk"},e.getTabTitle=function(){return Lang.gb_str69},e}(GuildBattleGerenScoreRankPanel);__reflect(GuildBattleGerenScoreRankLastPanel.prototype,"GuildBattleGerenScoreRankLastPanel"),window.GuildBattleGerenScoreRankLastPanel=GuildBattleGerenScoreRankLastPanel;var ShopCampPanel=function(t){function e(){var e=t.call(this)||this;return e.initUI(),e}return __extends(e,t),e.prototype.setSkinName=function(){this.skinName="ShopCampPanelEUI"},e.prototype.getListItemClass=function(){return ShopCampPanelItem},e.prototype.initUI=function(){t.prototype.initUI.call(this),this.listItemArr.source=ShopSys.ins().shopCampDatas},e.prototype.open=function(e){void 0===e&&(e=0),t.prototype.open.call(this,e),this.addClickE(this,this.onClick),this.addLsn(LogicSys.ins().patchCurrency,this.onCurrency),this.addLsn(ShopSys.ins().patchCampBuy,this.onBuy),this.onCurrency(),this.itemId&&this.selectItem(this.itemId)},e.prototype.onBuy=function(t){for(var e=this.listItem.numElements,i=0;e>i;i++){var n=this.listItem.getElementAt(i);if(n){var a=n.data;a.configIndex==t.configIndex&&(n.data=t)}}},e.prototype.onCurrency=function(t){if(!t||t.type==CurType.CampWar){var e=Cfg.getItemCfg(CurType.CampWar);this.labelCount.text=Lang.shop_str33.replace("$name$",e.getName()).replace("$camp$",""+GFunc.overLength(Actor.ins().getCurrency(CurType.CampWar)))}},e.prototype.onClick=function(t){switch(t.target){case this.btnGoto:openWin(JJCWin);break;default:var e=t.target;if(e&&e.name.indexOf("btnBuy")>-1){var i=parseInt(e.name.split("_")[1]),n=this.listItem.getElementAt(i),a=n.data;a.canBuy()?GFunc.checkConsumeEnough(a.getConsumeItem())&&openWin(BuyWin,a.getBuyData()):showtipsFail(Lang.shop_str10)}}},e.getTabTitle=function(){return Lang.shop_str32},e.getSysId=function(){return 360},e}(MallBasePanel);__reflect(ShopCampPanel.prototype,"ShopCampPanel"),window.ShopCampPanel=ShopCampPanel;var GuiderBase=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.isGuiding=!1,e.isPause=!1,e.pauseId=0,e.pauseStep=0,e.pauseHashCode=0,e}return __extends(e,t),e.ins=function(){return t.getIns.call(this,e)},e.prototype.show=function(t){var e=this;if(this.isGuiding=!0,this.guideData&&this.guideData.id==t.id&&(t.step<this.guideData.step||1==t.step)&&this.close(),this.isPause=!1,!t.isNewGuide()&&this.isPause)return void this.clearView();this.guideData=t,(null==this.view||this.view.type!=t.type)&&(this.clearView(),this.view=this.getViewByType(t.type)),this.save();var i;try{i=this.getDisplayObj(t.id,t.step)}catch(n){return this.guideData.wrongCount>=this.guideData.maxWrongCount?void this.close():(this.guideData.wrongCount++,this.clearView(),void Timer.ins()["do"](300,0,1,this.show.bind(this,this.guideData),this,TimerType.FIRST))}i?(Actor.ins().isLocation,this.view.reset(),Timer.ins()["do"](200,0,1,function(){if(i){e.view.open(i,e.guideData);var n=egret.MainContext.instance.stage;n.removeEventListener(egret.TouchEvent.TOUCH_TAP,e.onMouse,e),n.removeEventListener(egret.TouchEvent.TOUCH_TAP,e.onMouseBubble,e),n.removeEventListener(egret.TouchEvent.TOUCH_MOVE,e.onMouse,e),n.addEventListener(egret.TouchEvent.TOUCH_TAP,e.onMouse,e),n.addEventListener(egret.TouchEvent.TOUCH_TAP,e.onMouseBubble,e,!0),n.addEventListener(egret.TouchEvent.TOUCH_MOVE,e.onMouse,e),t.type==GuideType.Changzhu?i instanceof egret.DisplayObjectContainer&&e.view.addToParent(i.parent):e.view.addToParent(egret.MainContext.instance.stage),e.patchShowGuider()}},this)):this.close()},e.prototype.onMouseBubble=function(t){this.isPause&&(this.pauseHashCode=t.hashCode)},e.prototype.onMouse=function(t){var e=this.view.getMouseCode(t);switch(e){case 1:this.isPause?(this.pauseId==this.guideData.id&&this.pauseStep<this.guideData.step?this.next():this.pauseId==this.guideData.id&&this.pauseStep==this.guideData.step&&(this.view.close(),Timer.ins().removeAll(this)),this.pauseHashCode=0):t.hashCode!=this.pauseHashCode?this.next():this.pauseHashCode=0;break;case 2:this.close()}},e.prototype.patchShowGuider=function(){},e.prototype.patchCloseGuider=function(t){return t},e.prototype.setPauseParam=function(t,e){for(var i=[],n=2;n<arguments.length;n++)i[n-2]=arguments[n];this.isPause=!0,this.pauseId=t,this.pauseStep=e},e.prototype["continue"]=function(t,e){this.guideData&&this.guideData.id==t&&this.guideData.step+1==e&&(this.isPause=!1,this.guideData.step=e,this.show(this.guideData))},e.prototype.close=function(){var t=this.guideData?this.guideData.id:0;this.clearView(),this.view=null,this.guideData=null,this.isGuiding=!1,this.isPause=!1,this.pauseId=this.pauseStep=0,this.pauseHashCode=0,this.patchCloseGuider(t)},e.prototype.clearView=function(){if(this.view){this.view.close();var t=egret.MainContext.instance.stage;t.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.onMouse,this),t.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.onMouseBubble,this),t.removeEventListener(egret.TouchEvent.TOUCH_MOVE,this.onMouse,this),Timer.ins().removeAll(this)}},e.prototype.next=function(){this.guideData.isMoreLast()?this.close():(this.guideData.step++,this.view.visible=!1,this.show(this.guideData))},e.prototype.save=function(){},e.prototype.getDisplayObj=function(t,e){var i;return i},e.prototype.getViewByType=function(t){var e;switch(t){default:e=new GuideViewBase}return e.type=t,e},e}(BaseSys);__reflect(GuiderBase.prototype,"GuiderBase");var GuideType;!function(t){t[t.Strong=0]="Strong",t[t.Week=1]="Week",t[t.Changzhu=3]="Changzhu",t[t.WeekMask=4]="WeekMask"}(GuideType||(GuideType={})),window.GuiderBase=GuiderBase;var MineRobListPanel=function(t){function e(){var e=t.call(this)||this;return e.initUI(),e}return __extends(e,t),e.prototype.initUI=function(){t.prototype.initUI.call(this),this.list.itemRenderer=MineRobListPanelItem,this.list.dataProvider=this.listDatArr=new eui.ArrayCollection},e.prototype.setSkinName=function(){this.skinName="MineRobListPanelEUI"},e.prototype.open=function(){t.prototype.open.call(this),this.addLsn(MineSys.ins().patchMinePosChange,this.updatePanel),this.updatePanel()},e.prototype.updatePanel=function(){var t=MineSys.ins().getKeRobCount(),e=Cfg.getConfig(MineCommonConfig).rob;this.lbRobCount.textFlow=addColorTF(t+"/"+e,t>0?5767068:15733780),this.listDatArr.source=MineSys.ins().getMineRobDatas()},e.getTitle=function(){return"btz_zycs_kglb"},e.getTabTitle=function(){return"bqz_zycs_kglb"},e}(BasePanel);__reflect(MineRobListPanel.prototype,"MineRobListPanel"),window.MineRobListPanel=MineRobListPanel;var MineRobLogPanel=function(t){function e(){var e=t.call(this)||this;return e.skinName="MineRobLogPanelEUI",e.list.itemRenderer=MineRobLogItem,e.list.dataProvider=e.listArr=new eui.ArrayCollection,e}return __extends(e,t),e.prototype.open=function(){t.prototype.open.call(this),this.addLsn(MineSys.ins().patchRobLog,this.updatePanel),MineSys.ins().sendRobLog(),this.updatePanel()},e.prototype.updatePanel=function(){this.listArr.source=MineSys.ins().robLogDatas},e.getTitle=function(){return"btz_zycs_ldjl"},e.getTabTitle=function(){return"bqz_zycs_ldjl"},e}(BasePanel);__reflect(MineRobLogPanel.prototype,"MineRobLogPanel"),window.MineRobLogPanel=MineRobLogPanel;var ShopYongZhePanel=function(t){function e(){var e=t.call(this)||this;return e.redPointHead=[ShopWin],e.param=null,e}return __extends(e,t),e.prototype.open=function(i,n){void 0===i&&(i=-1),void 0===n&&(n=null),e.openCheng(!0);var a=this.getAotuIndex(i);this.param=n,t.prototype.open.call(this,a),this.observeTabRedPoint()},e.openCheng=function(t){return t},e.prototype.close=function(){t.prototype.close.call(this),e.openCheng(!1)},e.prototype.initUI=function(){t.prototype.initUI.call(this),this.setBg("sc_zycs_di2_jpg")},e.prototype.getParam=function(){return[this.param]},e.prototype.setTabItem=function(){this.tab.itemRenderer=BaseTabBtn5},e.getTitle=function(){return"btz_zycs_wybk"},e.getTabTitle=function(){return"bqz_zycs_yzsc"},e.getSysId=function(){return 327},e.panelNames=[ShopYongZheDailyPanel,ShopYongZheFirstPanel],__decorate([post()],e,"openCheng",null),e}(BaseTabPanel);__reflect(ShopYongZhePanel.prototype,"ShopYongZhePanel"),window.ShopYongZhePanel=ShopYongZhePanel;var DamonHuanHuaPanel=function(t){function e(){var e=t.call(this)||this;return e.datas=[],e.skinName="DamonHuanHuaPanelEUI",e.attrs.itemRenderer=ComAttrItem,e.attrs.dataProvider=e.attrData=new eui.ArrayCollection,e.listIcon.itemRenderer=HuanHuaItem,e.listIcon.dataProvider=e.listIconData=new eui.ArrayCollection,e.listConsume.itemRenderer=ItemBaseConsume,e.listConsume.dataProvider=e.listConsumeData=new eui.ArrayCollection,e.btnAttr.textFlow=addColorTF(StrUtil.addUnderLine(Lang.common_str116),1176860),e.imgBg.source="jl_zycs_bg1_jpg",e.groupSkill.visible=!1,e}return __extends(e,t),e.prototype.open=function(){t.prototype.open.call(this),this.addClickE(this.btnSend,this.onClick),this.addClickE(this.btnHuanHua,this.onClick),this.addClickE(this.btnAttr,this.onClick),this.addClickE(this.helpBtn,this.onClick),this.addItemTapE(this.listIcon,this.onListIcon),this.addLsn(ShouHuNewSys.ins().patchDamonHuanHuaUp,this.updateUp),this.addLsn(ShouHuNewSys.ins().patchDamonHuanHua,this.updateHuanHua),this.infoPanel()},e.prototype.close=function(){t.prototype.close.call(this),this.item.setSelect(!1)},e.prototype.infoPanel=function(){this.dataModel=ShouHuNewSys.ins().getModelBySysId(this.getSysId()),this.updateListIcon(),this.listIcon.validateNow(),this.updateDefSelect(),this.updatePanel(),this.updateSelectIcon()},e.prototype.updateDefSelect=function(){this.item&&(this.item.setSelect(!1),this.item.dataChanged());var t=0;if(this.data&&this.datas&&this.datas.length>0&&(t=this.datas.indexOf(this.data)),t=t>-1?t:0,!this.item||!GFunc.isConsumeEnough(GFunc.getItemDataRewardByJob(this.data.getConsume()))){for(var e=0;e<this.datas.length;e++){var i=this.datas[e];if(!i.isMax()){var n=GFunc.isConsumeEnough(GFunc.getItemDataRewardByJob(i.getConsume()));if(n){t=e;break}}}this.listIcon.selectedIndex=t,this.item=this.listIcon.getChildAt(t)}this.data=this.datas[t]},e.prototype.updateUp=function(){this.updateDefSelect(),this.updatePanel(),this.updateSelectIcon()},e.prototype.updatePanel=function(){this.power.text=""+this.dataModel.getHuanHuaPower(),this.bmpLv.text=""+this.data.level,this.imgName.text=this.data.getName(),this.groupLv.visible=this.data.level>0,this.imgWjh.visible=0==this.data.level;var t=addColor(this.data.getActDec(),16751375);t+=Lang.common_str117+addColor("+"+this.data.getActPower(),16751375),this.lbActDec.textFlow=addColorTF(0==this.data.level?t:""),this.attrData.source=this.dataModel.getHuanHuaAttrDatas(this.data),this.attrs.validateNow(),this.attrs.width=this.attrs.contentWidth;var e=GFunc.getItemDataRewardByJob(this.data.getConsume());this.listConsumeData.source=e,this.btnSend.redPoint.visible=GFunc.isConsumeEnough(e),this.btnSend.label=this.data.isAct()?Lang.btn_sj:Lang.btn_jh,this.item.dataChanged(),this.updataMC(),this.updateHuanHua(),this.updateMax()},e.prototype.updateMax=function(){this.data.isMax()?(this.imgYml.visible=!0,this.listConsume.visible=!1,this.btnSend.visible=!1):(this.imgYml.visible=!1,this.listConsume.visible=!0,this.btnSend.visible=!0),this.consumeBg.visible=!this.imgYml.visible},e.prototype.updataMC=function(){this.groupMc.removeChildren();for(var t=this.getModel(),e=0,i=t;e<i.length;e++){var n=i[e];this.groupMc.addChild(MC.createCenterGruop(n,-1))}},e.prototype.getModel=function(){var t=Cfg.getConfig(DamonHuanhuaBaseConfig,this.data.id).uibody;return[t]},e.prototype.updateHuanHua=function(){this.imgSyz.visible=this.data.id==this.dataModel.useId,this.btnHuanHua.visible=this.data.level>0?!this.imgSyz.visible:!1,this.updateListIcon()},e.prototype.updateListIcon=function(){this.datas=this.dataModel.getHuanHuaDatas(),this.listIconData.replaceAll(this.datas)},e.prototype.updateSelectIcon=function(){-1==this.datas.indexOf(this.data)?this.item.setSelect(!1):this.item.setSelect(!0)},e.prototype.onListIcon=function(t){this.item.setSelect(!1),this.item=t.itemRenderer,this.data=t.item,this.updatePanel(),this.updateSelectIcon()},e.prototype.onClick=function(t){switch(t.currentTarget){case this.btnSend:var e=GFunc.getItemDataRewardByJob(this.data.getConsume());GFunc.checkConsumeEnough(e)&&ShouHuNewSys.ins().sendDamonHuanHuaUp(this.data.id);break;case this.btnHuanHua:ShouHuNewSys.ins().sendDamonHuanHua(this.data.id);break;case this.btnAttr:openWin(ComAttrWin,this.dataModel.getHuanHuaAttrDatasAll());break;case this.helpBtn:openWin(HelpWin,Cfg.getConfig(HelpInfoConfig,53).text)}},e.getTitle=function(){return"btz_zycs_jingling"},e.getTabTitle=function(){return"bqz_zycs_jlhh"},e.getSysId=function(){return 216},e}(BasePanel);__reflect(DamonHuanHuaPanel.prototype,"DamonHuanHuaPanel"),window.DamonHuanHuaPanel=DamonHuanHuaPanel;var MinerPanel=function(t){function e(){var e=t.call(this)||this;return e.skinName="MinerPanelEUI",e.setSkinPart("qualityConsu",new PriceIcon),e.setSkinPart("miningConsu",new PriceIcon),e.qualityConsu.setType(CurType.yb),e.miningConsu.setType(CurType.yb),e.list.itemRenderer=MinerItem,e.list.dataProvider=e.listArr=new eui.ArrayCollection,e.sceneBar.labelDisplay.visible=!0,e.addClickE(e.qualityBtn,e.onClick),e.addClickE(e.miningBtn,e.onClick),e}return __extends(e,t),e.prototype.addDisplay=function(){this.addLsn(MineSys.ins().patchResult,this.upState),this.addLsn(MineSys.ins().patchMinerQuality,this.updatePanel),this.addLsn(MineSys.ins().patchMineInfo,this.updatePanel),this.addLsn(MineSys.ins().patchMinePosChange,this.upState),this.upState()},e.prototype.upState=function(){Timer.ins().removeAll(this);var t=MineSys.ins().getTime();t?(Timer.ins()["do"](0,1e3,Math.ceil(t/1e3),this.formatCountDown,this),this.currentState="opening",this.bxIcon="sjhj_zycs_mode"+MineSys.ins().minerQuality,this.bxName="sjhj_zycs_kg"+MineSys.ins().minerQuality):this.currentState="normal",this.updatePanel()},e.prototype.formatCountDown=function(t){this.timeStr=Lang.replaceEnum("开启剩余时间：%s",getFormatTime(t,"mm:ss"))},e.prototype.updatePanel=function(){if(this.listArr.source=MineSys.ins().getMinerConfigs(),MineSys.ins().minerQuality==Cfg.getConfig(MineCommonConfig).minerMaxQuality)this.sceneBar.maximum=1,this.sceneBar.value=1,this.sceneBar.labelFunction=function(t,e){return Lang.common_str60};else{var t=Cfg.getConfig(MinerConfig,MineSys.ins().minerQuality);this.sceneBar.maximum=t.showBless,this.sceneBar.value=MineSys.ins().bless,this.sceneBar.labelFunction=function(t,e){return t+"/"+e}}this.updateQualityBtn(),this.updateMiningBtn()},e.prototype.updateQualityBtn=function(){var t=MineSys.ins().getQualityConsu();t>0?(this.qualityTxt.text="",this.qualityConsu.setPrice(t),this.qualityConsuGroup.visible=!0):(this.qualityTxt.text=Lang.common_str61,this.qualityConsuGroup.visible=!1)},e.prototype.updateMiningBtn=function(){this.mineBuyData=MineSys.ins().getMineBuyData(),0==this.mineBuyData.type?(this.miningTxt.text=""+Lang.fb_str161+MineSys.ins().getMiningCount()+"/"+MineSys.ins().getMaxMiningCount(),this.miningBtn.label=Lang.guild_str112,this.miningConsuGroup.visible=!1):1==this.mineBuyData.type?(this.miningTxt.text=Lang.fb_str162,this.miningBtn.label=Lang.guild_str112,this.miningConsuGroup.visible=!1):2==this.mineBuyData.type?(this.miningTxt.text="",this.miningBtn.label=Lang.btn_ffgm,this.miningConsu.setPrice(this.mineBuyData.consu),this.miningConsuGroup.visible=!0):3==this.mineBuyData.type?(this.miningTxt.text=Lang.fb_str163.replace("$vip$",""+this.mineBuyData.vipLv),this.miningBtn.label=Lang.guild_str112,this.miningConsuGroup.visible=!1):4==this.mineBuyData.type&&(this.miningTxt.text=Lang.fb_str164,this.miningBtn.label=Lang.guild_str112,this.miningConsuGroup.visible=!1)},e.prototype.onClick=function(t){switch(t.currentTarget){case this.qualityBtn:this.addQuality();break;case this.miningBtn:this.mining()}},e.prototype.addQuality=function(){if(MineSys.ins().getTime()>0)return void showtipsFail(Lang.fb_str276);if(4==this.mineBuyData.type)return void showtipsFail(Lang.fb_str277);if(3==this.mineBuyData.type)return void showtipsFail(Lang.fb_str163.replace("$vip$",""+this.mineBuyData.vipLv));if(2==this.mineBuyData.type){var t=new PopupData;return t.desc=Lang.fb_str279.replace("$consu$",this.mineBuyData.consu.toString()),t.setFunction(this,this.sureFun),void openWin(CommonTipsWin,t)}return MineSys.ins().minerQuality>=Cfg.getConfig(MineCommonConfig).minerMaxQuality?void showtipsFail(Lang.fb_str278):Actor.ins().getCurrency(CurType.yb)<MineSys.ins().getQualityConsu()?void showtipsFail(Lang.fb_str143):void MineSys.ins().sendMinerQuality()},e.prototype.sureFun=function(){Actor.ins().getCurrency(CurType.yb)>=this.mineBuyData.consu?MineSys.ins().sendBuyMineCount():showtipsFail(Lang.fb_str143)},e.prototype.mining=function(){if(MineSys.ins().getTime()>0)return void showtipsFail(Lang.fb_str276);if(0==this.mineBuyData.type||1==this.mineBuyData.type){if(MineSys.ins().getFbMinerCount()>=Cfg.getConfig(MineCommonConfig).maxPos)return void showtipsFail(Lang.fb_str280);if(MineSys.ins().minerQuality<Cfg.getConfig(MineCommonConfig).minerMaxQuality){var t=new PopupData(Lang.fb_str281);t.setFunction(this,function(){MineSys.ins().sendMining()}),openWin(CommonTipsWin,t)}else MineSys.ins().sendMining()}else if(2==this.mineBuyData.type){var t=new PopupData;t.desc=Lang.fb_str279.replace("$consu$",this.mineBuyData.consu.toString()),t.setFunction(this,this.sureFun),openWin(CommonTipsWin,t)}else 3==this.mineBuyData.type?showtipsFail(Lang.fb_str163.replace("$vip$",""+this.mineBuyData.vipLv)):4==this.mineBuyData.type&&showtipsFail(Lang.fb_str164)},e.openCheck=function(t,e){return void 0===t&&(t=0),void 0===e&&(e=0),1==MineSys.ins().rewardStatus?(openWin(MineResultWin,MineSys.ins().resultconf,MineSys.ins().resultReward,MineSys.ins().resultlogDatas),!1):!0},e.getTitle=function(){return"btz_zycs_sjmg"},e.getTabTitle=function(){return"bqz_zycs_sjmg"},e}(BasePanel);__reflect(MinerPanel.prototype,"MinerPanel"),window.MinerPanel=MinerPanel;var GuildBattleManorRankLastPanel=function(t){function e(){var e=t.call(this)||this;return e.skinName="GuildBattleManorRankLastPanelEUI",e.listRank.itemRenderer=GuildBattleMobaiManorItem,e.listRank.dataProvider=e.listRankData=new eui.ArrayCollection,e}return __extends(e,t),e.prototype.open=function(){t.prototype.open.call(this),this.mobaiData=GuildBattleSys.ins().mobaiData,this.addLsn(GuildBattleSys.ins().patchMobai,this.updatePanel),this.addLsn(GuildBattleSys.ins().patchMobaiInfo,this.updatePanel),this.updatePanel()},e.prototype.updatePanel=function(){this.listRankData.source=this.mobaiData.manorDatas,this.lbTips.visible=0==this.mobaiData.manorDatas.length},e.getTitle=function(){return"btz_zycs_sjzk"},e.getTabTitle=function(){return Lang.gb_str72},e}(BasePanel);__reflect(GuildBattleManorRankLastPanel.prototype,"GuildBattleManorRankLastPanel"),window.GuildBattleManorRankLastPanel=GuildBattleManorRankLastPanel;var DamonPanel=function(t){function e(){var e=t.call(this)||this;return e.redPointHead=[ShouHuWin],e}return __extends(e,t),e.prototype.open=function(e){void 0===e&&(e=-1);var i=this.getAotuIndex(e);t.prototype.open.call(this,i),this.observeTabRedPoint()},e.prototype.setTabItem=function(){this.tab.itemRenderer=BaseTabBtn3},e.prototype.setSkinName=function(){this.skinName="DamonPanelEUI"},e.getTitle=function(){return"btz_zycs_jingling"},e.getTabTitle=function(){return"bqz_zycs_fairy"},e.getSysId=function(){return 216},e.prototype.getDamonLevelPanel_BtnSend=function(){return this.getPanel(DamonLevelPanel).getBtnSend()},e.prototype.getDamonStagePanel_BtnSend=function(){return this.getPanel(DamonStagePanel).getBtnSend()},e.panelNames=[DamonLevelPanel,DamonStagePanel,DamonYinJiPanel,DamonMoZhenPanel],e}(BaseTabPanel);__reflect(DamonPanel.prototype,"DamonPanel"),window.DamonPanel=DamonPanel;var GuildBattleMoBaiPanel=function(t){function e(){var e=t.call(this)||this;return e.skinName="GuildBattleMoBaiWinEUI",e.mc=new MC,e.mc.playFile(getEffName("ch_zycs_18"),-1),e.mc.x=350,e.mc.y=170,e.addChild(e.mc),e}return __extends(e,t),e.prototype.open=function(){t.prototype.open.call(this),this.addClickE(this.btnSend,this.onClick),this.addLsn(GuildBattleSys.ins().patchMobai,this.updatePanel),this.updatePanel()},e.prototype.updatePanel=function(){this.mobaiData=GuildBattleSys.ins().mobaiData;var t=this.mobaiData;this.lbName.text=t.mobaiName,this.lbGuildName.text=""+Lang.guild_str60+t.mobaiGuildName,this.lbTotalCount.text=""+t.beCount,this.lbCount.textFlow=addColorTF(Lang.gb_str20+"："+addColor(t.count,5767068)),this.lbAward.text=Lang.gb_str21.replace("$num$",""+Cfg.getConfig(GBConstConfig).worshipyuanbao),this.updateEntity()},e.prototype.updateEntity=function(){this.groupMc.removeChildren();var t,e=GuildBattleSys.ins().mobaiData,i=0;if(e.mountId){var n=Cfg.getConfig(DamonHuanhuaBaseConfig,e.mountId),a=n.uirole,o=n.uihigh;this.groupMc.addChild(MC.createCenterGruop(a,-1)),i=o,t=a}var s;if(e.wingId>0){var r=e.getWingFileName();s=MC.createCenterGruop(r,-1),s.verticalCenter=-i,this.groupMc.addChild(s)}var u=e.getBodyFileName();if(s=MC.createCenterGruop(u,-1),s.verticalCenter=-i,this.groupMc.addChild(s),t&&this.groupMc.addChild(MC.createCenterGruop("up_"+t,-1)),u=e.getWeaponFileName(),s=MC.createCenterGruop(u,-1),s.verticalCenter=-i,this.groupMc.addChild(s),e.shengLingId>0){var h=e.getShengLingFileName();s=MC.createCenterGruop(h,-1),s.verticalCenter=-i,this.groupMc.addChild(s)}},e.prototype.onClick=function(t){switch(t.target){case this.btnSend:this.mobaiData.count>0?GuildBattleSys.ins().sendMobai():showtipsFail(Lang.gb_str68)}},e.getTitle=function(){return"btz_zycs_lzmb"},e.getTabTitle=function(){return"bqz_zycs_lzmb"},e.openCheck=function(){return GuildBattleSys.ins().mobaiData.isMobai?!0:(showtipsFail(Lang.gb_str45),!1)},e}(BasePanel);__reflect(GuildBattleMoBaiPanel.prototype,"GuildBattleMoBaiPanel"),window.GuildBattleMoBaiPanel=GuildBattleMoBaiPanel;var GuildBattlePrelimPanel=function(t){function e(){var e=t.call(this)||this;return e.skinName="GuildBattlePrelimPanelEUI",e}return __extends(e,t),e.prototype.open=function(e){void 0===e&&(e=null),t.prototype.open.call(this),this.manorData=e,this.item0.visible=this.item1.visible=!1,this.addLsn(GuildBattleSys.ins().patchRivalInfo,this.updatePanel),GuildBattleSys.ins().sendRivalInfo(e.id,1),this.updateTime()},e.prototype.updatePanel=function(t,e){this.imgIcon.source="ldsz_zycs_db"+this.manorData.id,this.imgName.source="ldsz_zycs_na"+this.manorData.id,this.imgSR.source="ldsz_zycs_s"+this.manorData.getConfig().level,this.item0.data=t,this.item1.data=e,this.item0.visible=this.item1.visible=!0},e.prototype.updateTime=function(){t.prototype.updateTime.call(this);var e=GuildBattleSys.ins().getGuildBattleState();this.lbTimeDec.text=Lang.gb_strs[e];var i=GuildBattleSys.ins().getGuildBattleTime(),n="dd天hh小时mm分钟ss秒";n=i<DateUtil.SECOND_PER_HOUR?"mm分ss秒":i<DateUtil.SECOND_PER_DAY?"hh小时mm分":"dd天hh小时mm分钟ss秒",this.lbTime.textFlow=addColorTF(i>0?getFormatTime(i,n):"")},e.getTitle=function(){return"btz_zycs_ldzk"},e.getTabTitle=function(){return Lang.btn_cs},e.getSysId=function(){return 334},e}(BasePanel);__reflect(GuildBattlePrelimPanel.prototype,"GuildBattlePrelimPanel"),window.GuildBattlePrelimPanel=GuildBattlePrelimPanel;var WanMoRanPanel=function(t){function e(){var e=t.call(this)||this;return e.rankType=8,e.skinName="WanMoRankingSkin",e.itemScroller.viewport=e.itemList,e.addClickE(e.closeBtn,function(){return closeWin(e)}),e.addBg(),e}return __extends(e,t),e.prototype.open=function(e){t.prototype.open.call(this),this.rankType=e,this.rankType==RankType.WanMo?this.itemList.itemRenderer=WanMoRankingItem:this.rankType==RankType.HeiAn&&(this.itemList.itemRenderer=HeiAnRankingItem),this.addLsn(RankSys.ins().patchRankData,this.updateList),RankSys.ins().sendGetRankData(this.rankType)},e.prototype.updateList=function(t){if(t.type==this.rankType){var e=t.myRank+"";0==t.myRank&&(e="100+"),this.lbMyRanking.text=e,this.itemList.dataProvider=new eui.ArrayCollection(t.getFullDatalist())}},e.getTitle=function(){return"btz_zycs_ph"},e.getTabTitle=function(){return"bqz_zycs_ph"},e}(BaseWinSingle);__reflect(WanMoRanPanel.prototype,"WanMoRanPanel"),window.WanMoRanPanel=WanMoRanPanel;var BBFLLoginPanel=function(t){function e(){var e=t.call(this)||this;return e.skinName="BBFLLoginPanelEUI",e.list.itemRenderer=BBFLLoginItem,e.list.dataProvider=e.listData=new eui.ArrayCollection,e.imgBg.source="bbfl_zycs_10",e.type=BBFLType.Login,e}return __extends(e,t),e.prototype.open=function(){t.prototype.open.call(this),this.addClickE(this.btnSend,this.onClick),this.addLsn(RechargeActSys.ins().patchBBFLInfo,this.updatePanel),this.addLsn(RechargeActSys.ins().patchBBFLReward,this.updatePanel),this.addLsn(RechargeActSys.ins().patchBBFLBuy,this.updatePanel),this.addLsn(VipSys.ins().patchSvipLvChange,this.updatePanel),this.infoPanel()},e.prototype.close=function(){t.prototype.close.call(this)},e.prototype.infoPanel=function(){this.dataModel=RechargeActSys.ins().bbflModel,this.updatePanel()},e.prototype.updatePanel=function(){var t=this.dataModel.getListDataByType(this.type);if(SortUtil.sortOn(t,["isReward","canReward","index"],[SortType.up,SortType.down,SortType.up]),this.listData.source=t,this.dataModel.isBuyByType(this.type))this.btnSend.visible=!1,this.groupBuy.visible=!1;else{this.groupBuy.visible=!0,this.btnSend.visible=!0;var e=this.dataModel.getSvipLvByType(this.type);this.lbSVIP.text=Lang.act_str95.replace("$level$",""+e),this.lbSVIP.textColor=Actor.ins().sVipLv>=e?3821938:15733780;var i=this.dataModel.getBuyConsumeType(this.type);this.lbYB.text=""+i,this.lbYB.textColor=Actor.ins().getCurrency(CurType.yb)>=i?3821938:15733780,this.dataModel.canBuyType(this.type)?this.btnSend.redPoint.visible=!0:this.btnSend.redPoint.visible=!1}this.img.visible=!this.btnSend.visible},e.prototype.onClick=function(t){switch(t.currentTarget){case this.btnSend:if(!this.dataModel.canBuyType(this.type)){var e=new PopupData;return e.desc=Lang.act_str96.replace("$level$",""+this.dataModel.getSvipLvByType(this.type)),e.setFunction(this,function(){openWin(RechargeWin)}),void openWin(CommonTipsWin,e)}GFunc.checkCurrency(CurType.yb,this.dataModel.getBuyConsumeType(this.type))&&RechargeActSys.ins().sendBBFLBuy(this.type)}},e.getTitle=function(){return"btz_zycs_bbfl"},e.getTabTitle=function(){return"bqz_zycs_dlfl"},e.getSysId=function(){return 304},e}(BasePanel);__reflect(BBFLLoginPanel.prototype,"BBFLLoginPanel"),window.BBFLLoginPanel=BBFLLoginPanel;var ShenmoPanel=function(t){function e(){var e=t.call(this)||this;return e.redPointHead=[ShouHuWin],e}return __extends(e,t),e.prototype.setTabItem=function(){this.tab.itemRenderer=BaseTabBtn3},e.prototype.setSkinName=function(){this.skinName="DamonPanelEUI"},e.getTitle=function(){return"btz_zycs_sm"},e.getTabTitle=function(){return"bqz_zycs_sm"},e.getSysId=function(){return 218},e.prototype.getShenmoLevelPanel_BtnSend=function(){return this.getPanel(ShenmoLevelPanel).getBtnSend()},e.prototype.getShenmoStagePanel_BtnSend=function(){return this.getPanel(ShenmoStagePanel).getBtnSend()},e.panelNames=[ShenmoLevelPanel,ShenmoStagePanel,ShenmoYinJiPanel,ShenmoMoZhenPanel],e}(BaseTabPanel);__reflect(ShenmoPanel.prototype,"ShenmoPanel"),window.ShenmoPanel=ShenmoPanel;var ItemDataBase=function(){function t(){this.handle=0,this.id=-1,this.count=0,this.keepTime=0}return t.prototype.parser=function(t){this.handle=t.readDouble(),this.id=t.readInt(),this.count=t.readInt(),this.keepTime=DateUtil.formatMiniDateTime(t.readInt())},t}();__reflect(ItemDataBase.prototype,"ItemDataBase");var CampWarLinkPanel=function(t){function e(){var e=t.call(this)||this;return e.items=[],e.skinName="CampWarLinkPanelEUI",e.items=[e.item0,e.item1,e.item2,e.item3],e.helpId=125,e.lbState.visible=!1,e.hongMC=new MC,e.groupBarMc.addChild(e.hongMC),e.lanMC=new MC,e.lanMC.anchorOffsetX=-280,e.groupRatio.addChild(e.lanMC),e.ratioMC=new MC,e.groupRatio.addChild(e.ratioMC),e}return __extends(e,t),e.prototype.open=function(){t.prototype.open.call(this),this.hongMC.playFile(ResMgr.getEffName("smsz_zycs_hfdkt"),-1),this.lanMC.playFile(ResMgr.getEffName("smsz_zycs_lfdkt"),-1),this.ratioMC.playFile(ResMgr.getEffName("smsz_zycs_dk"),-1),this.addClickE(this.btnSend,this.onClick),this.addClickE(this.btnRank,this.onClick),this.addClickE(this.btnReward,this.onClick),this.addClickE(this.btnShop,this.onClick),this.addLsn(CampWarSys.ins().patchInfo,this.updatePanel),this.addLsn(CampWarSys.ins().patchDailyReward,this.updatePanel),this.addLsn(CampWarSys.ins().patchScoreCamp,this.updateProgBarRatio),this.addLsn(LogicSys.ins().patchEnterKFFail,this.updateEnterKFFail),this.addLsn(RpSys.ins().patchRp,this.updateRp),this.updatePanel(),this.updateTime(),this.updateRp(),CampWarSys.ins().sendScoreCamp(),RpFun.campWarTzRpShow=!1,RpFun.showCampWarTzRp()
},e.prototype.close=function(){t.prototype.close.call(this),this.hongMC.reset(),this.lanMC.reset(),this.ratioMC.reset()},e.prototype.updateRp=function(t){void 0===t&&(t=null),(!t||t.check(e))&&(this.btnReward.redPoint.visible=RpSys.ins().getData(CampWarLinkWin,e,CampWarRewardPanel))},e.prototype.updatePanel=function(){this.lbCamp.textFlow=addColorTF(addColor(CampWarSys.ins().getCampStr(),CampWarSys.ins().camp==CampType.mo?15733780:3183103)),this.imgCamp.source=ResMgr.getCampIcon(CampWarSys.ins().camp);var t=CampWarSys.ins().getTzCount();t>0?(this.lbPkCount.textFlow=addColorTF(Lang.zyz_str17+addColor(t+"/"+Cfg.getConfig(CampBattleCommonConfig).rewardCount,t>0?1306146:15733780)),this.lbHelpCount.text=""):(t=CampWarSys.ins().getHelpCount(),this.lbHelpCount.textFlow=addColorTF(Lang.zyz_str18+addColor(t+"/"+Cfg.getConfig(CampBattleCommonConfig).joinCount,t>0?1306146:15733780)),this.lbPkCount.text="");for(var e=CampWarSys.ins().getDailyRewardDatas(),i=0;i<this.items.length;i++)e[i]?(this.items[i].data=e[i],this.items[i].visible=!0):this.items[i].visible=!1;this.progBar.maximum=Cfg.getConfig(CampBattleCommonConfig).rewardCount,this.progBar.value=CampWarSys.ins().tzCount,this.updateProgBarRatio()},e.prototype.updateProgBarRatio=function(){this.lbScoreCampShen.textFlow=addColorTF(Lang.zyz_strs[CampType.shen]+"："+CampWarSys.ins().scoreCampShen,3183103),this.lbScoreCampMo.textFlow=addColorTF(CampWarSys.ins().scoreCampMo+"："+Lang.zyz_strs[CampType.mo],15733780);var t=CampWarSys.ins().scoreCampShen||1,e=CampWarSys.ins().scoreCampMo||1,i=Math.floor(t/(t+e)*100)/100;this.ratioMC.x=561*i,this.lanMC.scaleX=i},e.prototype.updateEnterKFFail=function(t){1==t?this.closeMyWin():GFunc.isInGuaJiFb()&&LogicSys.ins().centerEntity.AI.startAttack()},e.prototype.updateTime=function(){t.prototype.updateTime.call(this);var e="";if(CampWarSys.ins().sjStartTick>Actor.ins().serverTime)e=Lang.zyz_str16+addColor(Lang.act_str6,1306146);else if(CampWarSys.ins().sjEndTick<Actor.ins().serverTime)e=Lang.zyz_str16+addColor(Lang.gb_str67,1306146);else{var i=Math.max((CampWarSys.ins().sjEndTick-Actor.ins().serverTime)/1e3,0),n="dd天hh小时mm分钟";n=i<DateUtil.SECOND_PER_HOUR?"mm分钟ss秒":i<DateUtil.SECOND_PER_DAY?"hh小时mm分钟":"dd天hh小时mm分钟",e=Lang.zyz_str16+addColor(getFormatTime(i,n),1306146)}this.lbTime.textFlow=addColorTF(e)},e.prototype.onClick=function(t){switch(t.currentTarget){case this.btnSend:if(!CampWarSys.ins().isBattle())return void showtipsFail(Lang.zyz_str47);GFunc.checkFbCondition(GConst.MainCityFbId)&&(LogicSys.ins().centerEntity.AI.startfindNpc(GConst.CampNPCId),closeWin(CampWarLinkWin));break;case this.btnRank:openWin(CampWarRankWin);break;case this.btnReward:openWin(CampWarRewardWin);break;case this.btnShop:openWin(ShopWin,ShopWin.getTabIndexbyPanel(ShopPanel),ShopPanel.getTabIndexbyPanel(ShopCampPanel))}},e.getSysId=function(){return 349},e.getTitle=function(){return"btz_zycs_smsz"},e.getTabTitle=function(){return"bqz_zycs_smsz"},e}(BasePanel);__reflect(CampWarLinkPanel.prototype,"CampWarLinkPanel"),window.CampWarLinkPanel=CampWarLinkPanel;var CampWarRankPanelQF=function(t){function e(){var e=t.call(this)||this;return e.rankType=0,e.skinName="CampWarRankPanel2EUI",e.list.itemRenderer=CampWarRankItem,e.list.dataProvider=e.arrayCollection=new eui.ArrayCollection,e.entityRole=GFunc.createEntityUI(),e.entityRole.scaleX=e.entityRole.scaleY=.8,e.groupMc.addChild(e.entityRole),e.rankType=0,e}return __extends(e,t),e.prototype.open=function(){t.prototype.open.call(this),this.addLsn(CampWarSys.ins().patchRank,this.updatePanel),this.infoPanel(),CampWarSys.ins().sendRank(this.rankType)},e.prototype.close=function(){t.prototype.close.call(this),this.entityRole.reset()},e.prototype.infoPanel=function(){var t=new Date(CampWarSys.ins().sjStartTick),e=t.getMonth()+1;this.bmpY0.text=10>e?"0"+e:""+e,e=t.getDate(),this.bmpR0.text=10>e?"0"+e:""+e;var i=new Date(CampWarSys.ins().sjEndTick);e=i.getMonth()+1,this.bmpY1.text=10>e?"0"+e:""+e,e=i.getDate(),this.bmpR1.text=10>e?"0"+e:""+e,this.rankType!=CampType.wu?this.groupScore.visible=CampWarSys.ins().camp==this.rankType:this.groupScore.visible=!0},e.prototype.updateEntity=function(t){var e=new EntityRoleData;e.szId=t.szId,e.damonId=t.damonId,e.job=t.job,e.wingId=t.wingId,e.meilinId=t.meilinId,e.sex=t.sex,e.type=EntityType.ROLE,this.entityRole.setData(e,3,EntityAction.STAND)},e.prototype.updatePanel=function(t){void 0===t&&(t=null),t&&t.isFirst()?(this.none.visible=!1,this.groupMc.visible=!0,this.updateEntity(t)):(this.none.visible=!0,this.groupMc.visible=!1),this.arrayCollection.source=t.rankDatas,this.lbRank.text=""+Lang.act_str25+(t.myRank>0?t.myRank:Lang.common_str17),this.lbScore.text=Lang.common_str141+"："+t.myScore},e.getSysId=function(){return 349},e.getTitle=function(){return"btz_zycs_smszphb"},e.getTabTitle=function(){return"btz_zycs_qfb"},e}(BasePanel);__reflect(CampWarRankPanelQF.prototype,"CampWarRankPanelQF"),window.CampWarRankPanelQF=CampWarRankPanelQF;var FootPanel=function(t){function e(){var e=t.call(this)||this;return e.redPointHead=[RoleWin,RolePanel,ZhuangBanWin],e}return __extends(e,t),e.prototype.setTabItem=function(){this.tab.itemRenderer=BaseTabBtn3},e.prototype.setSkinName=function(){this.skinName="ShenQiPanelEUI"},e.getTitle=function(){return"btz_zycs_zuji"},e.getTabTitle=function(){return"bqz_zycs_zuji"},e.getSysId=function(){return 316},e.panelNames=[FootLevelPanel,FootHuanHuaPanel,FootMiYuPanel],e}(BaseTabPanel);__reflect(FootPanel.prototype,"FootPanel"),window.FootPanel=FootPanel;var YongbingPanel=function(t){function e(){var e=t.call(this)||this;return e.redPointHead=[ShouHuWin],e}return __extends(e,t),e.prototype.setTabItem=function(){this.tab.itemRenderer=BaseTabBtn3},e.prototype.setSkinName=function(){this.skinName="DamonPanelEUI"},e.getTitle=function(){return"btz_zycs_yb"},e.getTabTitle=function(){return"bqz_zycs_yb"},e.getSysId=function(){return 217},e.prototype.getYongbingLevelPanelBtnSend=function(){return this.getPanel(YongbingLevelPanel).getBtnSend()},e.prototype.getYongbingStagePanelBtnSend=function(){return this.getPanel(YongbingStagePanel).getBtnSend()},e.prototype.getYongbingStagePanel=function(){return this.getPanel(YongbingStagePanel)},e.prototype.getYongbingLevelPanel=function(){return this.getPanel(YongbingLevelPanel)},e.prototype.getYongbingYinJiPanel=function(){return this.getPanel(YongbingYinJiPanel)},e.prototype.getYongbingMoZhenPanel=function(){return this.getPanel(YongbingMoZhenPanel)},e.panelNames=[YongbingLevelPanel,YongbingStagePanel,YongbingYinJiPanel,YongbingMoZhenPanel],e}(BaseTabPanel);__reflect(YongbingPanel.prototype,"YongbingPanel"),window.YongbingPanel=YongbingPanel;var ForgeBoostPanel=function(t){function e(){var e=t.call(this)||this;e.initUI(),e.setSkinPart("comDaRen",new XingHunBarEff),e.setSkinPart("comDaShi",new XingHunBarEff),e.setSkinPart("equipItem",new ForgeBoostPanelItem);for(var i=0;10>i;i++)e.setSkinPart("equipItem"+i,new ForgeBoostPanelItem);return e.equipItem.touchChildren=!1,e.equipItem.touchEnabled=!1,e.equipItems=[e.equipItem0,e.equipItem1,e.equipItem2,e.equipItem3,e.equipItem4,e.equipItem5,e.equipItem6,e.equipItem7,e.equipItem8,e.equipItem9],e.curEquipItem=e.equipItem0,e.listConsume.itemRenderer=ItemBaseConsumeMin,e.listConsumeArray=new eui.ArrayCollection,e.listConsume.dataProvider=e.listConsumeArray,e}return __extends(e,t),e.prototype.setSkinName=function(){this.skinName="ForgeBoostPanelEUI"},e.prototype.initUI=function(){t.prototype.initUI.call(this),this.setRedPointHead(ForgeWin)},e.prototype.open=function(){t.prototype.open.call(this),this.addClickE(this.comDaShi,this.onclick),this.addClickE(this.comDaRen,this.onclick),this.addClickE(this.btnboost,this.onclick),this.addClickE(this.btnOneKey,this.onclick),this.addClickE(this.groupItems,this.onItemClick),this.addLsn(ForgeSys.ins().patchStrengthenUpRank,this.updateDaRen),this.addLsn(ForgeSys.ins().patchstrengthenUpdate,this.updataUpLvel),this.addLsn(ForgeSys.ins().patchStrengthenOneKey,this.updataUpLvel),this.addLsn(BagSys.ins().patchEquipChange,this.updateItemList),this.addLsn(BagSys.ins().patchItemChange,this.updataItem),this.addLsn(RpSys.ins().patchRp,this.updateRp),this.updatePanel(),this.updateDaRen(),this.updateRp()},e.prototype.updateRp=function(t){if(void 0===t&&(t=null),!t||t.check(e)){this.comDaRen.redPoint.visible=RpSys.ins().getData(ForgeWin,e,ForgeBoostDaRenWin),this.comDaShi.redPoint.visible=RpSys.ins().getData(ForgeWin,e,ForgeBoostDaShiWin);for(var i=0;i<this.equipItems.length;i++){var n=this.equipItems[i];n&&n.updateRedPoint()}}},e.prototype.updateItemList=function(){for(var t=BagSys.ins().equipDatas,e=0;e<t.length;e++){var i=t[e];this.equipItems[e].data=i,this.equipItems[e].setlv(i.strengthen)}},e.prototype.updatePanel=function(){this.updateItemList();var t=this.getDefaultIndex();this.setSelectItem(this.equipItems[t])},e.prototype.updateDaRen=function(){var t=ForgeSys.ins().strengthenDaRenData,e=Cfg.getEnhanceAddDaRenConfigById(t.level),i=BagSys.ins().getRoleBoostLevelNum(e.needlevel);this.comDaRen.setData(i,t.getDaBiaoCount()),this.lbDaRen.text="强化达人·"+t.level+"阶";var n=ForgeSys.ins().strengthenDaShiData;e=Cfg.getEnhanceAddDaRenConfigById(n.level),i=BagSys.ins().getRoleBoostLevelNum(e.needlevel),this.comDaShi.setData(i,n.getDaBiaoCount()),this.lbDaShi.text="强化大师·"+n.level+"阶",this.totalPower.text=this.getPower().toFixed()},e.prototype.getDefaultIndex=function(){for(var t=BagSys.ins().getStrengthenEquipsByRoleIndex(),e=0,i=Number.MAX_VALUE,n=0;n<t.length;n++){var a=GConst.fosterSort[n],o=t[a];o&&o.hasEquipOn()&&i>o.strengthen&&(i=o.strengthen,e=a)}return e},e.prototype.setSelectItem=function(t){var e=t.data;this.curEquipItem.setSelectBG(!1),this.curEquipItem=t,t.setSelectBG(!0),this.equipItem.data=e,this.equipData=e,this.equipData.hasEquipOn()&&this.updateEquipData()},e.prototype.updataItem=function(t){t.cfg.type==ItemType.ForgeItem&&this.updateConsumeList(this.equipData)},e.prototype.updataUpLvel=function(){for(var t=BagSys.ins().equipDatas,e=0;e<t.length;e++){var i=t[e],n=this.equipItems[e];if(n&&n.level!=i.strengthen){var a=n.width/2,o=n.height/2;GFunc.playUIMovie("qhbd",a,o,n,1),this.equipItems[e].setlv(i.strengthen)}}this.PlayMC(),this.updateEquipData(),this.updateDaRen()},e.prototype.updateEquipData=function(){var t=this.equipData,e=t.strengthen>=Cfg.getMaxConfig(EnhanceAttrConfig,0).level;this.totalPower.text=this.getPower().toFixed(),this.equipItem.data=this.equipData,this.equipItem.setlv(this.equipData.strengthen),e?this.lbstrengthenlv.textFlow=addColorTF(Lang.forge_str44+t.strengthen+StrUtil.addColor("(MAX)",16711680)):this.lbstrengthenlv.text=Lang.forge_str44+t.strengthen;var i="";if(0==t.strengthen)for(var n=Cfg.getConfig(EnhanceAttrConfig,t.cfg.subType,t.strengthen+1),a=0;a<n.attr.length;a++)i+=this.getAttrText(new AttrData(n.attr[a].type,0));else for(var n=Cfg.getConfig(EnhanceAttrConfig,t.cfg.subType,t.strengthen),a=0;a<n.attr.length;a++)i+=this.getAttrText(n.attr[a]);if(!e){var o="",s=Cfg.getConfig(EnhanceAttrConfig,t.cfg.subType,t.strengthen+1);this.lbstrengthenlvNext.text="+"+(t.strengthen+1);for(var a=0;a<s.attr.length;a++)o+=StrUtil.addColor("+"+s.attr[a].value,5767068)+"\n";this.lbNextAttr1.textFlow=addColorTF(o),this.updateConsumeList(t)}this.lbattr1.textFlow=addColorTF(i),this.currentState=e?"max":"normal"},e.prototype.updateConsumeList=function(t){var e=Cfg.getConfig(EnhanceCostConfig,t.strengthen);this.listConsumeArray.source=e.items},e.prototype.getAttrText=function(t){return StrUtil.addColor(AttrData.getAttrName(t.type)+"：",12704255)+StrUtil.addColor(t.value,15794098)+"\n"},e.prototype.getPower=function(){for(var t=0,e=BagSys.ins().equipDatas,i=0;i<e.length;i++){var n=e[i];if(n.hasEquipOn()){var a=Cfg.getConfig(EnhanceAttrConfig,n.cfg.subType,n.strengthen);t+=GFunc.getPower(a.attr)}}return t=t+ForgeSys.ins().strengthenDaRenData.genPower()+ForgeSys.ins().strengthenDaShiData.genPower()},e.prototype.onclick=function(t){switch(t.currentTarget){case this.btnOneKey:var e=Cfg.getConfig(EnhanceCostConfig,BagSys.ins().getStrengthenMinLevel());GFunc.checkConsumeEnough(e.items)&&ForgeSys.ins().sendStrengthenOneKey();break;case this.btnboost:e=Cfg.getConfig(EnhanceCostConfig,this.equipData.strengthen),GFunc.checkConsumeEnough(e.items)&&ForgeSys.ins().sendUpGrade(this.equipData.equipPos);break;case this.comDaRen:openWin(ForgeBoostDaRenWin,ForgeSys.ins().strengthenDaRenData);break;case this.comDaShi:openWin(ForgeBoostDaShiWin,ForgeSys.ins().strengthenDaShiData)}},e.prototype.onItemClick=function(t){var e=t.target;if(e&&e.parent&&e.parent instanceof ForgeBoostPanelItem){var i=e.parent,n=i.data;if(!n.hasEquipOn())return showTipsWarn(Lang.forge_str39),void(GFunc.isRing(n.equipPos)&&openWin(XunBaoWin,0));this.setSelectItem(i)}},e.prototype.PlayMC=function(){this.playFlameOK()},e.prototype.playFlameOK=function(){this.playFlame(getEffName("qhcg"))},e.prototype.playFlame=function(t){var e=new MC;e.x=350,e.y=170,e.playFile(t,1),this.addChild(e)},e.prototype.getGridByPos=function(t){return this.validateNow(),this.equipItems[t]},e.prototype.getLessGrid=function(){this.validateNow();for(var t,e=0;e<this.equipItems.length;e++){var i=GConst.fosterSort[e],n=this.equipItems[i],a=this.equipItems[i].data;t||(t=n),a.hasEquipOn()&&a.strengthen<t.data.strengthen&&(t=n)}return t},e.prototype.getBtnBoost=function(){return this.btnboost},e.prototype.getBtnOneKey=function(){return this.btnOneKey},e.getSysId=function(){return 219},e.getTitle=function(){return"btz_zycs_dz"},e.getTabTitle=function(){return"bqz_zycs_qh"},e}(BasePanel);__reflect(ForgeBoostPanel.prototype,"ForgeBoostPanel"),window.ForgeBoostPanel=ForgeBoostPanel;var ForgeFosterPanel=function(t){function e(){var e=t.call(this)||this;e.helpId=85,e.moneyType=CurType.gold,e.curSubType=0,e.nextAttr=[],e.isOkClick=!0,e.initUI(),e.lbattr1.lineSpacing=9,e.lbattr2.lineSpacing=9,e.lbNextAttr1.lineSpacing=9,e.setSkinPart("equipItem",new ForgeFosterPanelItem),e.setSkinPart("consume1",new ItemBaseConsumeMin);for(var i=0;10>i;i++)e.setSkinPart("equipItem"+i,new ForgeFosterPanelItem);return e.equipItem.touchChildren=!1,e.equipItem.touchEnabled=!1,e.equipItems=[e.equipItem0,e.equipItem1,e.equipItem2,e.equipItem3,e.equipItem4,e.equipItem5,e.equipItem6,e.equipItem7,e.equipItem8,e.equipItem9],e.imgAttrs=[e.imgAttr1,e.imgAttr2,e.imgAttr3,e.imgAttr4],e.curEquipItem=e.equipItem0,e.setRedPointHead(ForgeWin),e}return __extends(e,t),e.prototype.setSkinName=function(){this.skinName="ForgeFosterPanelEUI"},e.prototype.open=function(e){void 0===e&&(e=0),t.prototype.open.call(this,e),this.addClickE(this.btnboost,this.onTouch),this.addClickE(this.btnboost10,this.onTouch),this.addClickE(this.groupItems,this.onItemClick),this.addLsn(ForgeSys.ins().patchFosterUp,this.fosterOk),this.addLsn(RpSys.ins().patchRp,this.updateRp),this.addLsn(BagSys.ins().patchEquipChange,this.setAllEquipData),this.addEvent(eui.UIEvent.CHANGE,this.rdcoin,this.onConsume),this.addEvent(eui.UIEvent.CHANGE,this.rddiamond,this.onConsume),this.updatePanel()},e.prototype.updatePanel=function(){this.curEquipItem.setSelectBG(!1),this.equipItems[0].setSelectBG(!0),this.curEquipItem=this.equipItem0,this.setAllEquipData(),this.AutoSelect(),this.selectEquipData(),this.updateRp()},e.prototype.fosterOk=function(){this.PlayMC(),this.strengthenPreview(this.equipData)},e.prototype.updateRp=function(){this.btnboost.redPoint.visible=RpSys.ins().getData(ForgeWin,e);for(var t=BagSys.ins().equipDatas,i=0,n=0;n<t.length;n++)t[i].hasEquipOn()&&this.equipItems[i].setRedPoint(RpFun.showForgeFosterSingle(t[n])),i++},e.prototype.onItemClick=function(t){var e=t.target;if(e.parent&&e.parent instanceof ForgeFosterPanelItem){var i=e.parent,n=i.data;if(!n.hasEquipOn())return showTipsWarn(Lang.forge_str52),void(GFunc.isRing(n.equipPos)&&openWin(XunBaoWin,0));this.resetNextAttr(),this.setSelect(i)}},e.prototype.AutoSelect=function(){this.resetNextAttr();for(var t=BagSys.ins().equipDatas,e=0,i=-1,n=0;n<t.length;n++){var a=t[n];if(a.id<=0)e++;else{if(!ForgeSys.ins().getFosterIsMax(a,a.rank)){i=e;break}e++}}0>=i&&(i=0),this.setSelect(this.equipItems[i])},e.prototype.setSelect=function(t){var e=t.data;e.hasEquipOn()&&(this.curEquipItem.setSelectBG(!1),this.curEquipItem=t,t.setSelectBG(!0),this.equipItem.data=e,this.equipData=e,this.curSubType=this.equipData.equipPos,this.setEquipData())},e.prototype.setAllEquipData=function(){for(var t=BagSys.ins().equipDatas,e=0,i=0;i<t.length;i++)this.equipItems[e].data=t[i],t[e].hasEquipOn()&&this.equipItems[e].setRedPoint(RpFun.showForgeFosterSingle(t[i])),e++},e.prototype.onConsume=function(t){this.moneyType=t.currentTarget==this.rddiamond?CurType.yb:CurType.gold},e.prototype.selectEquipData=function(){this.equipItem.data=this.equipData,this.lbname.text=this.equipData.equipName,this.lbname.textColor=GConst.PZColor[this.equipData.cfg.quality]},e.prototype.onTouch=function(t){switch(t.currentTarget){case this.btnboost10:this.foster(10);break;case this.btnboost:this.foster(1)}},e.prototype.foster=function(t){if(this.isOkClick){this.isOkClick=!1,Timer.ins()["do"](500,0,1,this.setOkClick,this);var e;if(this.moneyType==CurType.gold){if(e=Cfg.getConfig(CultureTypeConfig,CurType.gold),!GFunc.checkCurrency(CurType.gold,e.num*t))return}else if(e=Cfg.getConfig(CultureTypeConfig,CurType.yb),!GFunc.checkCurrency(CurType.yb,e.num*t))return;for(var i=[],n=0;n<e.items.length;n++){var a=e.items[n],o=new ItemDataReward;o.id=a.id,o.count=a.count*t,i.push(o)}GFunc.checkConsumeEnough(i)&&ForgeSys.ins().sendFosterUp(this.curSubType,this.moneyType,t)}},e.prototype.setOkClick=function(){this.isOkClick=!0},e.prototype.setEquipData=function(){this.strengthenPreview(this.equipData),this.selectEquipData()},e.prototype.strengthenPreview=function(t){this.totalPower.text=this.getPower().toFixed();for(var e="",i="",n=Cfg.getCultureAttrByLv(t.cfg.subType,t.rank),a=0;a<t.epicAttr.length;a++){var o=t.epicAttr[a];if(4==this.nextAttr.length){var s=o.value-this.nextAttr[a];0>s?(this.imgAttrs[a].visible=!0,this.imgAttrs[a].source="public_zycs_hj"):s>0?(this.imgAttrs[a].visible=!0,this.imgAttrs[a].source="public_zycs_lj"):this.imgAttrs[a].visible=!1,i+=StrUtil.addColor((s>0?s:"").toString(),5767068)+"\r\n"}e+=this.getAttrText(o),n.limit[a]==o.value&&(e+=StrUtil.addColor(Lang.forge_str12,15733780)),e+="\n"}this.nextAttr.length=0;for(var a=0;a<t.epicAttr.length;a++){var o=t.epicAttr[a];this.nextAttr.push(o.value)}this.curEquipItem.setRedPoint(RpFun.showForgeFosterSingle(t)),this.full(!this.MaxAttr(t)),this.lbattr1.textFlow=addColorTF(e),this.lbattr2.textFlow=addColorTF(i),this.lbattr2.visible=!0},e.prototype.resetNextAttr=function(){this.nextAttr.length=0;for(var t=0;t<this.imgAttrs.length;t++)this.imgAttrs[t].visible=!1},e.prototype.full=function(t){this.lbDesc.visible=!t,this.imgpyym.visible=!t,this.btnboost.visible=t,this.btnboost10.visible=t,this.consume1.visible=t;var e=Cfg.getConfig(CultureTypeConfig,CurType.gold),i=Cfg.getConfig(CultureTypeConfig,CurType.yb);this.lbcoin.text=t?e.num.toString():"0",this.lbdiamond.text=t?i.num.toString():"0",this.consume1.data=e.items[0],t||RpFun.showForgeFosterRedPoint()},e.prototype.MaxAttr=function(t){for(var e="",i=!0,n=Cfg.getCultureAttrByLv(this.equipData.cfg.subType,t.rank),a=Cfg.getConfig(CulturePosConfig,t.cfg.subType),o=0;o<n.limit.length;o++){n.limit[o]>t.epicAttr[o].value&&(i=!1);var s=a.stage[o];e+=t.rank>=s?StrUtil.addColor(Lang.forge_str53.replace("$max$",n.limit[o].toString())+"\n",12704255):addColor("("+s+"阶"+GFunc.getEquipNameByType(this.equipData.cfg.subType)+"激活)\n",16726329)}return this.lbNextAttr1.textFlow=addColorTF(e),i},e.prototype.getAttrText=function(t){return AttrData.parse([t],{fm:addColor("%k：",12704255)+addColor("%v",15794098)}).join("")},e.prototype.getPower=function(){for(var t=0,e=BagSys.ins().equipDatas,i=0;i<e.length;i++){var n=e[i];n.hasEquipOn()&&(t+=GFunc.getPower(n.epicAttr))}return t},e.prototype.PlayMC=function(){this.playFlameOK()},e.prototype.playFlameOK=function(){this.playFlame(getEffName("pycg"))},e.prototype.playFlame=function(t){this.flameMC=new MC,this.flameMC.x=350,this.flameMC.y=170,this.flameMC.playFile(t,1,function(){}),this.addChild(this.flameMC)},e.prototype.getBtnPeiyang=function(){return this.btnboost},e.prototype.getGridByPos=function(t){return this.equipItems[t]},e.getSysId=function(){return 223},e.getTitle=function(){return"btz_zycs_dz"},e.getTabTitle=function(){return"bqz_zycs_py"},__decorate([callDelay()],e.prototype,"playFlameOK",null),e}(BasePanel);__reflect(ForgeFosterPanel.prototype,"ForgeFosterPanel"),window.ForgeFosterPanel=ForgeFosterPanel;var ForgeAddLvevlPanel=function(t){function e(){var e=t.call(this)||this;e.itemTunShiItems=[],e.initUI(),e.setSkinPart("equipItem",new ForgeAddItem);for(var i=0;10>i;i++)e.setSkinPart("equipItem"+i,new ForgeAddItem);for(var i=0;6>i;i++)e.setSkinPart("itemTunShiItem"+i,new ForgeAddPanelYuanShiItem);return e.equipItem.touchChildren=!1,e.equipItem.touchEnabled=!1,e.equipItems=[e.equipItem0,e.equipItem1,e.equipItem2,e.equipItem3,e.equipItem4,e.equipItem5,e.equipItem6,e.equipItem7,e.equipItem8,e.equipItem9],e.itemTunShiItems=[e.itemTunShiItem0,e.itemTunShiItem1,e.itemTunShiItem2,e.itemTunShiItem3,e.itemTunShiItem4,e.itemTunShiItem5],e.curEquipItem=e.equipItem0,e.listConsume.itemRenderer=ItemBaseConsumeMin,e.listConsumeArray=new eui.ArrayCollection,e.listConsume.dataProvider=e.listConsumeArray,e}return __extends(e,t),e.prototype.setSkinName=function(){this.skinName="ForgeAddPanelEUI"},e.prototype.initUI=function(){t.prototype.initUI.call(this)},e.prototype.open=function(){t.prototype.open.call(this),this.addClickE(this.groupItems,this.onItemClick),this.addClickE(this.groupTunShi,this.onYuanShiItemClick),this.addClickE(this.btnOneKey,this.onclick),this.addClickE(this.btnOk,this.onclick),this.addLsn(ForgeSys.ins().patchAddUpdate,this.updateUpLevel),this.addLsn(BagSys.ins().patchItemChange,this.updataItem),this.addLsn(ForgeSys.ins().patchAppendYuanShi,this.updatePower),this.addLsn(ForgeSys.ins().patchAppendYuanShi,this.updateYuanShi),this.addLsn(BagSys.ins().patchEquipChange,this.updatePanel),this.addLsn(RpSys.ins().patchRp,this.updateRp),this.updatePanel();var e=this.getDefaultIndex();this.setSelectItem(this.equipItems[e]),this.updateYuanShi(),this.updateRp()},e.prototype.updateRp=function(t){if(void 0===t&&(t=null),!t||t.check(ForgeAddYuanShiWin))for(var i=this.itemTunShiItems.length,n=0;i>n;n++){var a=this.itemTunShiItems[n];a&&a.updateRedPoint()}if(!t||t.check(e)){this.btnOneKey.redPoint.visible=RpSys.ins().getData(ForgeWin,e,ForgeAddItem),this.btnOk.redPoint.visible=RpSys.ins().getData(ForgeWin,e,ForgeAddItem,this.equipData.equipPos);for(var o=BagSys.ins().equipDatas,n=0;n<o.length;n++){o[n];this.equipItems[n].updateRedPoint()}}},e.prototype.updateUpLevel=function(){for(var t=BagSys.ins().equipDatas,e=0;e<t.length;e++){var i=t[e];this.equipItems[e].setlv(i.addlv)}this.equipItem.setlv(this.equipData.addlv),this.updateEquipData(),this.updateYuanShi()},e.prototype.updatePanel=function(){for(var t=BagSys.ins().equipDatas,e=0;e<t.length;e++){var i=t[e];this.equipItems[e].data=i,this.equipItems[e].setlv(i.addlv)}},e.prototype.getDefaultIndex=function(){for(var t=BagSys.ins().getStrengthenEquipsByRoleIndex(),e=0,i=Number.MAX_VALUE,n=0;n<t.length;n++){var a=GConst.fosterSort[n],o=t[a];o&&o.hasEquipOn()&&i>o.addlv&&(i=o.addlv,e=a)}return e},e.prototype.setSelectItem=function(t){var e=t.data;this.curEquipItem.setSelectBG(!1),this.curEquipItem=t,t.setSelectBG(!0),this.equipItem.data=e,this.equipData=e,this.equipData.hasEquipOn()&&this.updateEquipData()},e.prototype.updataItem=function(t){t.cfg.type==ItemType.ForgeItem&&this.updateConsumeList(this.equipData)},e.prototype.updataUpLvel=function(){this.PlayMC(),this.updatePanel(),this.updateYuanShi()},e.prototype.updateEquipData=function(){var t=this.equipData,i=t.addlv>=Cfg.getMaxConfig(AppendAttrConfig,0).level;this.equipItem.data=this.equipData,this.equipItem.setlv(this.equipData.addlv),this.addBmpNumber.text="l"+t.addlv.toFixed(0),this.posName=Lang.common_equipName[t.equipPos];var n,a="";n=Cfg.getConfig(AppendAttrConfig,t.equipPos,t.addlv);for(var o=0;o<n.attr.length;o++)a+=this.getAttrText(n.attr[o])+"\n";if(this.lbattr1.textFlow=addColorTF(a),!i){for(var s="",r=Cfg.getConfig(AppendAttrConfig,t.cfg.subType,t.addlv+1),o=0;o<r.attr.length;o++)s+="+"+(r.attr[o].value-n.attr[o].value)+"\n";this.lbNextAttr1.textFlow=addColorTF(s),this.updateConsumeList(t)}this.currentState=i?"max":"normal",this.updatePower(),this.btnOk.redPoint.visible=RpSys.ins().getData(ForgeWin,e,ForgeAddItem,this.equipData.equipPos)},e.prototype.updateConsumeList=function(t){var e=Cfg.getConfig(AppendCostConfig,t.addlv);this.listConsumeArray.source=e.items},e.prototype.getAttrText=function(t){var e=AttrData.getFm(12704255,15794098," ：");return AttrData.parse([t],{fm:e}).join("")},e.prototype.updateYuanShi=function(){for(var t=ForgeSys.ins().addYuanShiData,e=0;e<this.itemTunShiItems.length;e++){var i=this.itemTunShiItems[e];i.data=t.addYuanShiItemDatas[e]}this.updatePower()},e.prototype.updatePower=function(){this.totalPower.text=this.getPower().toFixed()},e.prototype.getPower=function(){for(var t=0,e=BagSys.ins().equipDatas,i=0;i<e.length;i++){var n=e[i];if(n.hasEquipOn()){var a=Cfg.getConfig(AppendAttrConfig,n.cfg.subType,n.addlv);t+=GFunc.getPower(a.attr)}}return t+ForgeSys.ins().addYuanShiData.poewr},e.prototype.onItemClick=function(t){var e=t.target;if(e&&e.parent&&e.parent instanceof ForgeAddItem){var i=e.parent,n=i.data;if(!n.hasEquipOn())return showTipsWarn(Lang.forge_str63),void(GFunc.isRing(n.equipPos)&&openWin(XunBaoWin,0));this.setSelectItem(i)}},e.prototype.onYuanShiItemClick=function(t){var e=t.target;if(e&&e.parent&&e.parent instanceof ForgeAddPanelYuanShiItem){var i=e.parent,n=i.data;if(n.isOpen)openWin(ForgeAddYuanShiWin,n);else{var a=n.getOpenData();showTipsWarn("任意"+a.equipCount+"件装备铸造等级达到"+a.equipLevel+"级解锁")}}},e.prototype.onclick=function(t){switch(t.currentTarget){case this.btnOneKey:var e=Cfg.getConfig(AppendCostConfig,BagSys.ins().getAddMinLevel());GFunc.checkConsumeEnough(e.items)&&ForgeSys.ins().sendAppend(2);break;case this.btnOk:e=Cfg.getConfig(AppendCostConfig,this.equipData.addlv),GFunc.checkConsumeEnough(e.items)&&ForgeSys.ins().sendAppend(1,this.equipData.equipPos)}},e.prototype.PlayMC=function(){this.playFlameOK()},e.prototype.playFlameOK=function(){this.playFlame(getEffName("zjcg"))},e.prototype.playFlame=function(t){var e=new MC;e.x=350,e.y=170;e.playFile(t,1),this.addChild(e)},e.prototype.getGridByPos=function(t){return this.validateNow(),this.equipItems[t]},e.prototype.getLessGrid=function(){this.validateNow();for(var t,e=0;e<this.equipItems.length;e++){var i=GConst.fosterSort[e],n=this.equipItems[i],a=this.equipItems[i].data;t||(t=n),a.hasEquipOn()&&a.addlv<t.data.addlv&&(t=n)}return t},e.prototype.getEquip0Grid=function(){return this.equipItem0},e.getSysId=function(){return 222},e.prototype.getZhuijia=function(){return this.btnOneKey},e.getTitle=function(){return"btz_zycs_dz"},e.getTabTitle=function(){return"bqz_zycs_zj"},e}(BasePanel);__reflect(ForgeAddLvevlPanel.prototype,"ForgeAddLvevlPanel"),window.ForgeAddLvevlPanel=ForgeAddLvevlPanel;var BuffPanel=function(t){function e(){var e=t.call(this)||this;return e.initUI(),e}return __extends(e,t),e.prototype.initUI=function(){this.skinName="BuffPanelEUI",this.listPT.itemRenderer=BuffPanelItemPT,this.listPT.dataProvider=this.listPTArr=new eui.ArrayCollection,this.listCZ.itemRenderer=BuffPanelItemCZ,this.listCZ.dataProvider=this.listCZArr=new eui.ArrayCollection},e.prototype.open=function(){t.prototype.open.call(this),this.addClickE(this.listCZ,this.onListItemClick),this.addLsn(SkillSys.ins().patchAddBuffUI,this.onUpdate),this.addLsn(SkillSys.ins().patchRemoveBuffUI,this.onUpdate),this.onUpdate(),this.updateBuffResidentList()},e.prototype.updateTime=function(){for(var t=0;t<this.listPT.numElements;t++){var e=this.listPT.getElementAt(t);e&&e.updateTime()}},e.prototype.onUpdate=function(){this.listPTArr.source=SkillSys.ins().buffDatas,this.listPTArr.refresh()},e.prototype.onListItemClick=function(t){var e=t.target.name;if(e&&e.indexOf("btnGoAct")>-1){var i=parseInt(e.split("_")[1]),n=this.listCZArr.getItemAt(i);n.tiaozhuan(),closeWin(BuffWin)}},e.prototype.updateBuffResidentList=function(){var t=this.createBuffList();SortUtil.sortOn(t,["isAct","sort"],[SortType.up,SortType.up]),this.listCZArr.source=t},e.prototype.createBuffList=function(){var t=[];if(!urlParam.isShenhe){var e=new BuffResidentDataMonth;e.sort=0;var i=new BuffResidentDataTSZF;i.sort=1,t.push(e),t.push(i)}var n=new BuffResidentDataWordLevel;return n.sort=5,t.push(n),t},e.getSysId=function(){return 99},e.getTitle=function(){return"btz_zycs_buff"},e.getTabTitle=function(){return"bqz_zycs_buff"},e}(BasePanel);__reflect(BuffPanel.prototype,"BuffPanel"),window.BuffPanel=BuffPanel;var HunqiPanel=function(t){function e(){var e=t.call(this)||this;return e.oldQuality=0,e.initUI(),e}return __extends(e,t),e.prototype.initUI=function(){this.skinName="HunqiPanelEUI",this.listTab.dataProvider=this.listTabArr=new eui.ArrayCollection,this.listTab.itemRenderer=HunqiPanelTabItem,this.listTabArr.source=Cfg.getConfigs(HunqiQualityConfig),this.listHunqi.itemRenderer=HunqiPanelItem,this.listHunqi.dataProvider=this.listHunqiArr=new eui.ArrayCollection,this.progressBar.labelFunction=this.progressLabelFunction.bind(this),this.setRedPointHead(SkillWin)},e.prototype.progressLabelFunction=function(t,e){return t>=e?"MAX":t+"/"+e},e.prototype.open=function(e){void 0===e&&(e=-1),t.prototype.open.call(this),this.addItemTapE(this.listHunqi,this.onListClick),this.addItemTapE(this.listTab,this.onTabListClick),this.addLsn(SkillSys.ins().patchHunqiUp,this.onUp),this.addLsn(RpSys.ins().patchRp,this.updateRp),this.addLsn(BagSys.ins().patchItemChange,this.onItemChange),this.listTab.selectedIndex=-1!=e?e:0,this.listTab.validateNow(),this.updateRp(),this.updatePanel()},e.prototype.updateRp=function(t){if(void 0===t&&(t=null),!t||t.check(this.getThisDef())){for(var e=this.listTab.numElements,i=0;e>i;i++){var n=this.listTab.getElementAt(i);n&&n.updateRp()}e=this.listHunqi.numElements;for(var i=0;e>i;i++){var a=this.listHunqi.getElementAt(i);a&&a.updateRp()}}},e.prototype.onItemChange=function(t){if(t&&t.cfg.type==ItemType.Hunqi)for(var e=this.listHunqi.numElements,i=0;e>i;i++){var n=this.listHunqi.getElementAt(i);if(n){var a=n.data;(a.getIdConfig().itemid==t.id||a.getQualityConfig().itemid)&&n.updateItemCount()}}},e.prototype.updatePanel=function(){this.updateList(this.listTab.selectedItem),this.updateValue(),this.updatePower()},e.prototype.onUp=function(t){this.updatePanel();for(var e=this.listHunqi.numElements,i=0;e>i;i++){var n=this.listHunqi.getElementAt(i);n&&n.data.id==t.id&&(n.data=t)}},e.prototype.updateList=function(t){for(var e=SkillSys.ins().getDatasByQuality(t.quality),i=[],n=[],a=[],o=[],s=0,r=e;s<r.length;s++){var u=r[s];!u.isAct()&&u.canUp()?i.push(u):u.canUp()?n.push(u):u.isAct()?a.push(u):o.push(u)}SortUtil.sortOn(n,["level"],[SortType.down]),SortUtil.sortOn(a,["id"],[SortType.up]),SortUtil.sortOn(o,["id"],[SortType.up]),this.listHunqiArr.source=[].concat(i).concat(n).concat(a).concat(o)},e.prototype.updateValue=function(){var t=Cfg.getConfig(HunqiAwakeConfig,SkillSys.ins().awakeLevel);this.lx="lx"+t.level,this.progressBar.maximum=t.exp,this.progressBar.value=SkillSys.ins().awakeExp;var e="仙术上限："+addColor(""+t.skillmax,1176860);this.labelSkillMax.textFlow=addColorTF(e);var i="仙术伤害："+addColor("+"+t.skilladd/100+"%",1176860);this.labelSkillDamage.textFlow=addColorTF(i)},e.prototype.updatePower=function(){for(var t=0,e=SkillSys.ins().hunqiDatas,i=0,n=e;i<n.length;i++){var a=n[i];t+=a.power}this.bmpLabelPower.text=MathUtil.toFixed(t,0).toString()},e.prototype.onTabListClick=function(t){var e=t.item;e.quality!=this.oldQuality&&(this.updateList(e),this.oldQuality=e.quality)},e.prototype.onListClick=function(t){var e=t.item;openWin(HunqiUpWin,e)},e.prototype.getHunqiPanelItem=function(t){return this.listHunqi.validateNow(),this.listHunqi.getElementAt(t)
},e.getSysId=function(){return 215},e.getTitle=function(){return"hq_zycs_hq"},e.getTabTitle=function(){return"bqz_zycs_hq"},e}(BasePanel);__reflect(HunqiPanel.prototype,"HunqiPanel"),window.HunqiPanel=HunqiPanel;var SkillMainPanel=function(t){function e(){var e=t.call(this)||this;return e.redPointHead=[SkillWin],e}return __extends(e,t),e.prototype.setTabItem=function(){this.tab.itemRenderer=BaseTabBtn3},e.prototype.setSkinName=function(){this.skinName="SkillMainPanelEUI"},e.prototype.getSkillIcon=function(t){return this.getPanel(SkillPanel).getSkillIcon(t)},e.prototype.getActBtn=function(){return this.getPanel(SkillPanel).getActBtn()},e.prototype.getBtnOneKey=function(){return this.getPanel(SkillPanel).getBtnOneKey()},e.getTitle=function(){return"btz_zycs_jn"},e.getTabTitle=function(){return"bqz_zycs_jn"},e.panelNames=[SkillPanel,AoyiPanel],e}(BaseTabPanel);__reflect(SkillMainPanel.prototype,"SkillMainPanel"),window.SkillMainPanel=SkillMainPanel;var GemPanel=function(t){function e(){var e=t.call(this)||this;return e.gemItems=[],e.skinName="GemPanelEUI",e.equipItem.touchChildren=!1,e.equipItem.touchEnabled=!1,e.gemItems=[e.gemItem1,e.gemItem2,e.gemItem3],e.equipItems=[e.equipItem0,e.equipItem1,e.equipItem2,e.equipItem3,e.equipItem4,e.equipItem5,e.equipItem6,e.equipItem7,e.equipItem8,e.equipItem9],e.curEquipItem=e.equipItem0,e.curEquipItem.setSelectBG(!0),e.equipItem.status1(),e.setRedPointHead(ForgeWin),e}return __extends(e,t),e.prototype.open=function(){t.prototype.open.call(this,0),this.addClickE(this.groupItems,this.onItemClick),this.addClickE(this.groupGem,this.onGemItemClick),this.addClickE(this.btnOneKey,this.onClick),this.addClickE(this.btnOneKeyUpLevel,this.onClick),this.addClickE(this.comRankBarEff,this.onClick),this.addLsn(ForgeSys.ins().patchGemUp,this.upUpdateData),this.addLsn(ForgeSys.ins().patchGemOneKeyUp,this.upUpdateData),this.addLsn(ForgeSys.ins().patchGemOneKeyXQ,this.upUpdateData),this.addLsn(ForgeSys.ins().patchGemUpRank,this.updateRankLevel),this.addLsn(BagSys.ins().patchEquipChange,this.updateAllEquipData),this.addLsn(RpSys.ins().patchRp,this.updateRp),this.updatePanel(),this.updateRp(),this.actRedPointGoto.open(),this.actRedPointGoto.setType(RankType.gem)},e.prototype.close=function(){t.prototype.close.call(this),this.actRedPointGoto.close()},e.prototype.updatePanel=function(){this.curEquipItem.setSelectBG(!1),this.curEquipItem=this.equipItem0,this.curEquipItem.setSelectBG(!0),this.equipData=ForgeSys.ins().gemEquipData.getGemPosDataByPos(0),this.updateAllEquipData(),this.selectEquipData(),this.gemUpdate(0),this.updateRankLevel()},e.prototype.updateRp=function(t){void 0===t&&(t=null),(!t||t.check(e))&&(this.gemItem1.updateRedPoint(),this.gemItem2.updateRedPoint(),this.gemItem3.updateRedPoint(),this.btnOneKey.redPoint.visible=RpSys.ins().getData(ForgeWin,e,"onekeyEquip"),this.btnOneKeyUpLevel.redPoint.visible=RpSys.ins().getData(ForgeWin,e,"onekey"),this.comRankBarEff.redPoint.visible=RpSys.ins().getData(ForgeWin,e,GemUpRankWin))},e.prototype.updateRankLevel=function(){var t=ForgeSys.ins().gemEquipData,e=t.getSumLevel(),i=Cfg.getStoneAddConfigByid(t.isMaxRank()?t.attrPlusLv-1:t.attrPlusLv);this.comRankBarEff.setData(e,i.needstar),this.lbRank.text="灵石大师"+t.attrPlusLv+"阶"},e.prototype.onClick=function(t){switch(t.currentTarget){case this.btnOneKeyUpLevel:var i=this.btnOneKeyUpLevel.redPoint.visible=RpSys.ins().getData(ForgeWin,e,"onekey");i?ForgeSys.ins().sendGemOneKeyUp():(showtipsFail("没有可升级的灵石"),TipsSys.ins().setBuyGoodsWarn(GConst.GemItem));break;case this.btnOneKey:if(ForgeSys.ins().gemIsfull())return void showTipsWarn(Lang.forge_str20);i=this.btnOneKey.redPoint.visible=RpSys.ins().getData(ForgeWin,e,"onekeyEquip"),i?ForgeSys.ins().sendGemOneKeyXQ():(showtipsFail("没有灵石可镶嵌"),TipsSys.ins().setBuyGoodsWarn(GConst.GemItem));break;case this.btnOneRemove:ForgeSys.ins().oneKeyRemove();break;case this.comRankBarEff:openWin(GemUpRankWin,ForgeSys.ins().gemEquipData)}},e.prototype.upUpdateData=function(){for(var t=ForgeSys.ins().gemEquipData,e=0;e<this.equipItems.length;e++){var i=this.equipItems[e];this.equipItems[e].updateRedPoint();var n=t.getGemPosDataByPos(e);if(i.lv!=n.getGemSumLevel()){var a=new MC;a.x=i.x+69,a.y=i.y+72,a.playFile(getEffName("gemupgrade"),1),a.scaleX=a.scaleY=.8,this.groupItems.addChild(a)}i.dataChanged()}for(var e=0;e<this.gemItems.length;e++){var i=this.gemItems[e],o=i.data;(0==o.gemId||o.stoneConfig.level!=i.lv)&&this.gemUpdate(o.index)}this.updateRankLevel(),this.updateAllEquipData()},e.prototype.updateAllEquipData=function(){for(var t=ForgeSys.ins().gemEquipData,e=0,i=0;i<t.gemPosDatas.length;i++){var n=t.getGemPosDataByPos(i);this.equipItems[i].data=n,e+=n.getGemSumPower()}this.sumPower=e},e.prototype.selectEquipData=function(){this.curEquipItem.data=this.equipData,this.equipItem.data=this.equipData;var t=this.equipData.pos;this.lbLevel.text=""+Lang.forge_str21+this.equipData.getGemSumLevel(),this.lbGem.text=""+Lang.forge_str22+Cfg.getConfig(StoneSlotConfig,t).name},e.prototype.gemUpdate=function(t){var e=this.equipData.pos,i=ForgeSys.ins().gemEquipData.getGemPosDataByPos(e);(0==t||1==t)&&(this.gemItem1.data=i.gemData[0],this.gemAttr1.data=i.gemData[0]),(0==t||2==t)&&(this.gemItem2.data=i.gemData[1],this.gemAttr2.data=i.gemData[1]),(0==t||3==t)&&(this.gemItem3.data=i.gemData[2],this.gemAttr3.data=i.gemData[2]),this.gemUpdateMc(t)},e.prototype.gemUpdateMc=function(t){this.selectEquipData();var e=this.equipData.pos,i=ForgeSys.ins().gemEquipData.getGemPosDataByPos(e);if(0!=t&&0!=i.gemData[t-1].gemId){var n=new MC,a=62;1==t?(n.x=this.gemItem1.x+a,n.y=this.gemItem1.y+a):2==t?(n.x=this.gemItem2.x+a,n.y=this.gemItem2.y+a):3==t&&(n.x=this.gemItem3.x+a,n.y=this.gemItem3.y+a),n.playFile(getEffName("gemupgrade"),1),n.scaleX=n.scaleY=.8,this.groupGem.addChild(n)}},e.prototype.onGemItemClick=function(t){var e=t.target;if(e&&e.parent&&e.parent instanceof GemItem){var i=e.parent,n=i.data;0==n.gemId?ForgeSys.ins().isPointhaveCanDressGem(n)?openWin(GemSelectWin,n):GFunc.getGainItemWayConfig(Cfg.getConfig(EnumConfig).ITEM_GEM_ID).length>0&&TipsSys.ins().setBuyGoodsWarn(Cfg.getConfig(EnumConfig).ITEM_GEM_ID):openWin(GemTipsWin,n)}},e.prototype.onItemClick=function(t){var e=t.target;if(e&&e.parent&&e.parent instanceof GemEquipItem){var i=e.parent,n=i.data;if(!BagSys.ins().getEquipByIndex(n.pos).hasEquipOn())return showTipsWarn(Lang.forge_str63),void(GFunc.isRing(n.pos)&&openWin(XunBaoWin,0));this.setSelect(i)}},e.prototype.setSelect=function(t){var e=t.data;e.id<=0||(this.curEquipItem.setSelectBG(!1),this.curEquipItem=t,t.setSelectBG(!0),this.equipItem.data=e,this.equipData=e,this.selectEquipData(),this.gemUpdate(0))},e.prototype.getBtnOneKey=function(){return this.btnOneKey},e.getTitle=function(){return"btz_zycs_bs"},e.getTabTitle=function(){return"bqz_zycs_bs"},e.getSysId=function(){return 220},e}(BasePanel);__reflect(GemPanel.prototype,"GemPanel"),window.GemPanel=GemPanel;var PurifyPanel=function(t){function e(){var e=t.call(this)||this;return e.equipItems=[],e.initUI(),e}return __extends(e,t),e.prototype.initUI=function(){this.skinName="PurifyPanelEUI",this.star=new Star(StarData.F_4()),this.star.x=155,this.star.y=675,this.addChild(this.star),this.equipItems=[this.equipItem0,this.equipItem1,this.equipItem2,this.equipItem3,this.equipItem4,this.equipItem5,this.equipItem6,this.equipItem7,this.equipItem8,this.equipItem9],this.listConsumeArray=new eui.ArrayCollection,this.listConsume.dataProvider=this.listConsumeArray,this.equipItem.touchEnabled=!1,this.setRedPointHead(ForgeWin),this.mcBg=new MC,this.groupMC.addChild(this.mcBg),this.mcBg.playFile(ResMgr.getEffName("zbjl_zycs_bg"),-1)},e.prototype.open=function(){t.prototype.open.call(this),this.addClickE(this.equipItem,this.onclick),this.addClickE(this.btnOk,this.onclick),this.addClickE(this.comDaShi,this.onclick),this.addClickE(this.comDaRen,this.onclick);for(var e=0,i=this.equipItems;e<i.length;e++){var n=i[e];this.addClickE(n,this.onItemClick)}this.addLsn(RpSys.ins().patchRp,this.updateRp),this.addLsn(ForgeSys.ins().patchPurifyUpLvel,this.upLevelUpdate),this.addLsn(BagSys.ins().patchItemChange,this.updateConsumeItem),this.addLsn(ForgeSys.ins().patchPurifyUpRank,this.updateDaRen),this.updatePanel(),this.updateDaRen()},e.prototype.updatePanel=function(){this.iniListDate(),this.updateRp()},e.prototype.iniListDate=function(){for(var t=ForgeSys.ins().purifyData,e=0;e<t.purifyEquipDatas.length;e++)this.equipItems[e].data=t.purifyEquipDatas[e],this.equipItems[e].setSelectBG(!1);var i=this.getDefaultIndex();this.equipItems[i].setSelectBG(!0),this.curData=this.equipItems[i].data,this.curData&&this.selectEquip(this.curData)},e.prototype.getDefaultIndex=function(){for(var t=ForgeSys.ins().purifyData.purifyEquipDatas,e=0,i=Number.MAX_VALUE,n=0;n<t.length;n++){var a=GConst.fosterSort[n],o=t[a],s=BagSys.ins().getEquipByIndex(a);o&&s.hasEquipOn()&&i>o.level&&(i=o.level,e=a)}return e},e.prototype.updateEquipData=function(t){this.equipItem.data=t},e.prototype.updateEquipAttr=function(t){if(!t.getIsMax()){var e=Cfg.getConfig(PurifyAttrConfig,t.pos,CondType.Equal,PurifyAttrConfig.level,t.level+1),i="%v",n=AttrData.parse(e.addattr,{fm:i}).join("\n");n+="\n"+e.plus/100+"%",n+="\n"+e.plus/100+"%",this.lbAttrNext.textFlow=addColorTF(n)}var a=t.getConfig(),o=a.addattr,s=AttrData.parse(o,{fm:"%k:%v",fix:function(t,e,i){var n=Cfg.getConfig(AttrPowerConfig,e).ishighattr,a=n?5767068:14931902;return addColor(t,a)}}).join("\n");s+=addColor("\n"+GFunc.getEquipNameByType(t.pos)+"基础属性:"+a.plus/100+"%",5767068),s+=addColor("\n"+GFunc.getEquipNameByType(t.pos)+"强化属性:"+a.plus/100+"%",5767068),this.lbAttr.textFlow=addColorTF(s);var r=o.length+2;if(this.groupAttrUpIcon.numChildren!=r){this.groupAttrUpIcon.removeChildren();for(var u=0;r>u;u++){var h=new eui.Image;h.source="public_zycs_lj",this.groupAttrUpIcon.addChild(h)}}this.totalPower.text=this.getPower().toFixed(0)},e.prototype.getPower=function(){for(var t=BagSys.ins(),e=0,i=ForgeSys.ins().purifyData,n=0;n<i.purifyEquipDatas.length;n++){var a=i.purifyEquipDatas[n];if(a.level>0){var o=a.getConfig().plus;e+=GFunc.getPower(a.getConfig().addattr);var s=t.getEquipByIndex(a.pos),r=s.cfg,u=AttrData.mergeAttrx(r.pattr,o);e+=GFunc.getPower(u);var h=Cfg.getConfig(EnhanceAttrConfig,s.cfg.subType,s.strengthen),l=AttrData.mergeAttrx(h.attr,o);e+=GFunc.getPower(l)}}return e},e.prototype.showStar=function(t,e){if(void 0===e&&(e=!0),e){for(var i=[],n=t.getMaxLevel(),a=0;n>a;a++)i[a]=t.level>a?Cfg.getConfig(PurifyAttrConfig,t.pos,CondType.Equal,PurifyAttrConfig.level,a+1).quality:0;var o=t.level>0?t.level:1,s=Cfg.getConfig(PurifyAttrConfig,t.pos,CondType.Equal,PurifyAttrConfig.level,o).quality,r=this.star.getData();r.staremptyImgName="jinglian_zycs_gem"+s+"a",r.starImgArrayName.length=0;for(var a=0;10>a;a++)r.starImgArrayName.push("jinglian_zycs_gem"+s);var u=0;t.level<10?u=t.level%10:(u=t.level%10,0==u&&(u=10)),this.star.setMaxStar(r.starImgArrayName.length),this.star.setCurStar(u,e)}},e.prototype.updateConsume=function(t){if(!t.getIsMax()){var e=this.getCostIndex(t),i=t.getCost();this.listConsume.itemRenderer=1==i.length?PurifyConsumeItem1:PurifyConsumeItem,this.listConsumeArray.source=i,this.listConsume.selectedIndex=0>e?0:e}},e.prototype.getCostIndex=function(t){var e=t.getCost(),i=this.listConsumeArray.source.length,n=this.listConsume.selectedIndex,a=n;if(i==e.length&&e[n]&&GFunc.isConsumeEnough(e[n].itemConsumeData.items));else for(var o=e.length-1;o>=0;o--){var s=GFunc.isConsumeEnough(e[o].itemConsumeData.items);if(s){a=o;break}}return a},e.prototype.selectEquip=function(t){this.updateEquipData(t),this.updateEquipAttr(t),this.updateConsume(t),this.updateStatsu(t),this.showStar(t)},e.prototype.upLevelUpdate=function(t,e){this.updateEquipAttr(e),this.showStar(e,t),this.updateStatsu(e),this.updateConsume(e),this.updateEquipData(e);for(var i=0;i<this.equipItems.length;i++){var n=this.equipItems[i],a=n.data;n&&a.pos==e.pos&&(n.data=e)}this.updateDaRen(),t&&GFunc.playUIMovie("zbjl_zycs_bao",this.equipItem.x+this.equipItem.width/2,this.equipItem.y+this.equipItem.height/2,this)},e.prototype.updateStatsu=function(t){t.getIsMax()?this.currentState="max":this.currentState="normal"},e.prototype.onclick=function(t){switch(t.currentTarget){case this.btnOk:var e=this.listConsume.selectedItem;GFunc.checkConsumeEnough(e.itemConsumeData.items)&&ForgeSys.ins().sendPurifyUpLvel(this.curData.pos,e.index);break;case this.comDaRen:openWin(PurifyDaRenWin,ForgeSys.ins().purifyDaRenData);break;case this.comDaShi:openWin(PurifyDaShiWin,ForgeSys.ins().purifyDaShiData);break;case this.equipItem:var i=BagSys.ins().getEquipByIndex(this.curData.pos),n=i.clone();if(n.setJingLian(Cfg.getMaxConfig(PurifyAttrConfig,i.equipPos).level),i.hasEquipOn()){var a=openWin(RoleEquipTipsWin,n);a.hideReplceBtn()}else showTipsWarn("该部位没有穿戴装备")}},e.prototype.onItemClick=function(t){var e=t.currentTarget,i=e.data;if(i){if(!BagSys.ins().getEquipByIndex(i.pos).hasEquipOn())return showTipsWarn("穿戴对应部位装备后才可操作"),void(GFunc.isRing(i.pos)&&openWin(XunBaoWin,0));this.curData=e.data;for(var n=0;n<this.equipItems.length;n++)this.equipItems[n].setSelectBG(!1);e.setSelectBG(!0),this.star.reset(),this.listConsume.selectedIndex=-1,this.selectEquip(this.curData)}},e.prototype.updateConsumeItem=function(t){t.cfg.type==ItemType.Purify&&this.updateConsume(this.curData)},e.prototype.updateRp=function(t){if(void 0===t&&(t=null),!t||t.check("PurifyPanel")){this.comDaRen.redPoint.visible=RpSys.ins().getData(ForgeWin,e,PurifyDaRenWin),this.comDaShi.redPoint.visible=RpSys.ins().getData(ForgeWin,e,PurifyDaShiWin);for(var i=0;i<this.equipItems.length;i++){var n=this.equipItems[i];n&&n.updateRedPoint()}}},e.prototype.updateDaRen=function(){var t=ForgeSys.ins().purifyDaRenData,e=Cfg.getPurifyDaRenConfigById(t.level),i=ForgeSys.ins().purifyData.getLevelNum(e.needlevel);this.comDaRen.setData(i,t.getDaBiaoCount()),this.lbDaRen.text="精炼达人·"+t.level+Lang.common_jie;var n=ForgeSys.ins().purifyDaShiData;e=Cfg.getPurifyDaShiConfigById(n.level),i=ForgeSys.ins().purifyData.getLevelNum(e.needlevel),this.comDaShi.setData(i,n.getDaBiaoCount()),this.lbDaShi.text="精炼大师·"+n.level+Lang.common_jie,this.totalPower.text=this.getPower().toFixed()},e.getSysId=function(){return 358},e.getTitle=function(){return"btz_zycs_dz"},e.getTabTitle=function(){return"bqz_zycs_jl"},e}(BasePanel);__reflect(PurifyPanel.prototype,"PurifyPanel"),window.PurifyPanel=PurifyPanel;var FruitPointPanel=function(t){function e(){var e=t.call(this)||this;return e.barDatas=[],e.setSkinName(),e.listBar.dataProvider=e.listBarArr=new eui.ArrayCollection,e.listBar.itemRenderer=FruitBaritem,e.list.dataProvider=e.listArr=new eui.ArrayCollection,e.list.itemRenderer=Fruititem,e.scroller.scrollPolicyH=eui.ScrollPolicy.OFF,e}return __extends(e,t),e.prototype.setSkinName=function(){this.skinName="FruitPointPanelEUI"},e.prototype.open=function(){t.prototype.open.call(this),this.addClickE(this.sendBtn,this.onClick),this.addItemTapE(this.listBar,this.onItemTap),this.addLsn(FruitSys.ins().patchFruitInfoType,this.updateUse),this.addLsn(RpSys.ins().patchRp,this.updateRp),this.infoPanel()},e.prototype.infoPanel=function(){this.listBarArr.source=this.barDatas=Cfg.getConfigs(FruitTypeConfig),this.updateDefSelect(),this.updatePanel()},e.prototype.updateDefSelect=function(){for(var t=this.listBar.selectedIndex,i=0;i<this.barDatas.length;i++){var n=RpSys.ins().getData(RoleWin,RolePanel,MoJieWin,e,this.barDatas[i].id);if(n){t=i;break}}this.listBar.selectedIndex=-1==t?0:t},e.prototype.updateRp=function(t){void 0===t&&(t=null),(!t||t.check(e))&&(this.sendBtn.redPoint.visible=RpSys.ins().getData(RoleWin,RolePanel,MoJieWin,e,this.type),this.listBarArr.itemUpdated(this.listBarArr.getItemAt(this.listBar.selectedIndex)))},e.prototype.updateUse=function(){this.updateDefSelect(),this.updatePanel()},e.prototype.updatePanel=function(){this.power.text=""+FruitSys.ins().getPower(),this.fruitTypeData=FruitSys.ins().getFruitTypeData(this.type),this.listArr.source=this.fruitTypeData.fruitDatas,this.lbProg.textFlow=addColorTF(Lang.task_str3+addColor(this.fruitTypeData.getProgText()+"%",65280)),this.sendBtn.redPoint.visible=RpSys.ins().getData(RoleWin,RolePanel,MoJieWin,e,this.type)},e.prototype.onItemTap=function(t){this.updatePanel()},e.prototype.onClick=function(t){switch(t.currentTarget){case this.sendBtn:if(!this.fruitTypeData.isUseTotal())return void showtipsFail(Lang.fruit_str6);var i=RpSys.ins().getData(RoleWin,RolePanel,MoJieWin,e,this.type);if(!i)return void TipsSys.ins().setBuyGoodsWarn(Cfg.getConfig(EnumConfig).getFruitId);FruitSys.ins().sendFruitInfo(this.type)}},Object.defineProperty(e.prototype,"type",{get:function(){return this.barDatas[this.listBar.selectedIndex].id},enumerable:!0,configurable:!0}),e.prototype.getUseBtn=function(){return this.sendBtn},e.getSysId=function(){return 208},e.getTitle=function(){return"btz_zycs_gs"},e.getTabTitle=function(){return"bqz_zycs_gs"},e}(BasePanel);__reflect(FruitPointPanel.prototype,"FruitPointPanel"),window.FruitPointPanel=FruitPointPanel;var DailyOnlinePanel=function(t){function e(){var e=t.call(this)||this;return e.skinName="DailyOnlinePanelEUI",e.list.itemRenderer=DailyOnlinePanelItem,e.list.dataProvider=e.listArr=new eui.ArrayCollection,e.actGroup.visible=!urlParam.isShenhe,e}return __extends(e,t),e.prototype.open=function(){t.prototype.open.call(this),this.addClickE(this.btnGoAct,this.onClick),this.addLsn(FuLiSys.ins().patchDailyOnlineData,this.updateData),this.addLsn(FuLiSys.ins().patchDailyOnlineAward,this.updateData),this.addLsn(RpSys.ins().patchRp,this.updateData),this.addLsn(RechargeActSys.ins().patchGetMonthDay,this.onGetMonthDay),this.updateData(),this.list.validateNow()},e.prototype.updateData=function(){var t=FuLiSys.ins().dailyOnlineData,e=t.dailyOnlineItemDatas.concat();SortUtil.sortOn(e,["state"],[SortType.up]),this.listArr.replaceAll(e)},e.prototype.onGetMonthDay=function(){this.listArr.refresh(),this.updateMonthCardTime()},e.prototype.updateTime=function(){for(var t=(FuLiSys.ins().dailyOnlineData,0);t<this.list.numElements;t++){var e=this.list.getChildAt(t);e&&e.updateTime()}this.updateMonthCardTime()},e.prototype.updateMonthCardTime=function(){var t=ActSys.ins().getActDataById(ActId.ID_99900);if(t.isInYueKaTime()){var e=t.jiesuanTime-Actor.ins().serverTime,i=void 0;i=e<DateUtil.MS_PER_DAY?""+getFormatTime(e/1e3,"hh小时mm分ss秒"):""+getFormatTime(e/1e3,"dd天");var n="（已激活，剩余"+i+"）";this.labelTime.textFlow=addColorTF(n,5767068),this.labelTime.visible=!0}else this.labelTime.visible=!1},e.prototype.onClick=function(t){switch(t.target){case this.btnGoAct:openWin(YKWin,YKWin.getTabIndexbyPanel(MonthCardPanel))}},e.getTabTitle=function(){return"bqz_zycs_zxlb"},e}(BasePanel);__reflect(DailyOnlinePanel.prototype,"DailyOnlinePanel"),window.DailyOnlinePanel=DailyOnlinePanel;var MeilinPanel=function(t){function e(){var e=t.call(this)||this;return e.redPointHead=[RoleWin,RolePanel,SqXyWin],e}return __extends(e,t),e.prototype.setTabItem=function(){this.tab.itemRenderer=BaseTabBtn3},e.prototype.setSkinName=function(){this.skinName="ShenQiPanelEUI"},e.getTitle=function(){return"btz_zycs_mlzs"},e.getTabTitle=function(){return"bqz_zycs_mlzs"},e.getSysId=function(){return 213},e.panelNames=[MeilinLevelPanel,MeilinHuanHuaPanel,MeilinFuHunPanel],e}(BaseTabPanel);__reflect(MeilinPanel.prototype,"MeilinPanel"),window.MeilinPanel=MeilinPanel;var DLHLPanel=function(t){function e(){var e=t.call(this)||this;return e.skinName="DLHLPanelEUI",e.list.itemRenderer=DLHLPanelItem,e.list.dataProvider=e.listArr=new eui.ArrayCollection,e.actGruop.visible=!urlParam.isShenhe,e}return __extends(e,t),e.prototype.open=function(){t.prototype.open.call(this),this.addClickE(this.btnGo,this.onClick),this.addLsn(FuLiSys.ins().patchDLHLData,this.update),this.addLsn(FuLiSys.ins().patchDLHLAward,this.onGetAward),this.addLsn(RechargePowerSys.ins().patchZhaoCaiLongDate,this.updateBtnState),this.addLsn(RechargePowerSys.ins().patchhaoCaiLongBuy,this.updateBtnState),this.update(),this.updateBtnState()},e.prototype.update=function(){for(var t=[],e=0,i=FuLiSys.ins().DLHLData.datas;e<i.length;e++){var n=i[e];urlParam.isShenhe&&n.config.sviplevel||t.push(n)}SortUtil.sortOn(t,["yiget"],[SortType.up]),this.listArr.source=t},e.prototype.updateTime=function(){var t=(new Date(new Date(Actor.ins().serverTime).toLocaleDateString()).getTime()+DateUtil.MS_PER_DAY-1-Actor.ins().serverTime)/1e3;this.lbTime.textFlow=addColorTF(""+getFormatTime(t,"hh小时mm分ss秒"))},e.prototype.onGetAward=function(){this.update()},e.prototype.updateBtnState=function(){this.btnGo.visible=!RechargePowerSys.ins().zhaoCaiLongData.isAct()&&!urlParam.isShenhe,this.imgYjh.visible=RechargePowerSys.ins().zhaoCaiLongData.isAct()},e.prototype.onClick=function(t){switch(t.target){case this.btnGo:openWin(RechargeActSys.ins().firstRechargeData.isRecharge()?ZhaoCaiLongWin:FirstRechargeBuyWin)}},e.getSysId=function(){return 6},e.getTitle=function(){return"btz_zycs_dlhl"},e.getTabTitle=function(){return"bqz_zycs_dlhl"},e}(BasePanel);__reflect(DLHLPanel.prototype,"DLHLPanel"),window.DLHLPanel=DLHLPanel;var SigninPanel=function(t){function e(){var e=t.call(this)||this;return e.skinName="SigninPanelEUI",e.setSkinPart("item",new ItemBaseRewardActivity),e.list.itemRenderer=SigninItem,e.list.dataProvider=e.listData=new eui.ArrayCollection,e.actGroup.visible=!urlParam.isShenhe,e}return __extends(e,t),e.prototype.open=function(){t.prototype.open.call(this),this.addClickE(this.btnSend,this.onClick),this.addClickE(this.btnGoAct,this.onClick),this.addItemTapE(this.list,this.onItemTap),this.addLsn(FuLiSys.ins().patchSigninInfo,this.updatePanel),this.addLsn(RechargeActSys.ins().patchGetMonthDay,this.updatePanel),this.updatePanel()},e.prototype.updatePanel=function(){this.model=FuLiSys.ins().signinModel,this.listData.source=this.model.signinDatas,this.item.data=this.model.totalSigninConfig.reward[0],this.item.setItemKuangEffect(this.model.isTotalReward);var t="";if(this.model.isTotalRewardFinish)t=Lang.fuli_str15;else{var e=StrUtil.addColor(""+this.model.dayNum,this.model.getDifferenceDay()>0?16711680:5949490),i=Lang.fuli_str13.replace("$day1$",""+e).replace("$day2$",""+this.model.totalSigninConfig.day);i+="\n",i+=Lang.fuli_str14.replace("$day$",""+StrUtil.addColor(this.model.getDifferenceDay()+Lang.common_tian,2773370)),t=i}this.labDesc.textFlow=addColorTF(t),this.btnSend.enabled=this.model.isTotalReward,this.btnSend.redPoint.visible=this.model.isTotalReward,this.btnSend.visible=!this.model.isTotalRewardFinish,this.onMonthCardTime()},e.prototype.onMonthCardTime=function(){var t=ActSys.ins().getActDataById(ActId.ID_99900);t.isInYueKaTime()&&Timer.ins()["do"](0,1e3,0,this.updateMonthCardTime,this)},e.prototype.updateMonthCardTime=function(){var t=ActSys.ins().getActDataById(ActId.ID_99900);if(t.isInYueKaTime()){var e=t.jiesuanTime-Actor.ins().serverTime,i=void 0;i=e<DateUtil.MS_PER_DAY?""+getFormatTime(e/1e3,"hh小时mm分ss秒"):""+getFormatTime(e/1e3,"dd天");var n="（已激活，剩余"+i+"）";this.labelTime.textFlow=addColorTF(n,5767068),this.labelTime.visible=!0}else this.labelTime.visible=!1},e.prototype.onItemTap=function(t){var e=t.item;if(e&&1==e.state)if(Actor.ins().sVipLv<e.getConfig().level){var i=Lang.chat_str17+StrUtil.addColor(Lang.common_str10,16711680)+"\n";i+=Lang.fuli_str24+StrUtil.addColor(Lang.fuli_str25,65280),i+=Lang.fuli_str26+StrUtil.addColor(Lang.fuli_str27,65280)+Lang.fuli_str16;var n=new PopupData(i);n.sureIcon="anz_zycs_qwcz",n.canceIcon="anz_zycs_crlq",n.setFunction(this,function(){openWin(RechargeWin)},null,function(){FuLiSys.ins().sendSigninReward(e.day),showtipsSuc(Lang.fuli_str17)}),openWin(CommonTipsWin,n)}else FuLiSys.ins().sendSigninReward(e.day),showtipsSuc(Lang.fuli_str17)},e.prototype.onClick=function(t){switch(t.currentTarget){case this.btnSend:FuLiSys.ins().signinModel.isTotalReward&&FuLiSys.ins().sendSigninRewards();break;case this.btnGoAct:openWin(YKWin,YKWin.getTabIndexbyPanel(MonthCardPanel))}},e.getSysId=function(){return 43},e.getTabTitle=function(){return"bqz_zycs_mrqd"},e}(BasePanel);__reflect(SigninPanel.prototype,"SigninPanel"),window.SigninPanel=SigninPanel;var CdkeyPanel=function(t){function e(){var e=t.call(this)||this;return e.skinName="CDkeyPanelEUI",e}return __extends(e,t),e.prototype.open=function(){this.addClickE(this.sendBtn,this.onTap)},e.prototype.onTap=function(t){switch(t.currentTarget){case this.sendBtn:CDKeySys.ins().sendCdkey(this.input.text)}},e.getTabTitle=function(){return"bqz_zycs_jhm"},e}(BasePanel);__reflect(CdkeyPanel.prototype,"CdkeyPanel"),window.CdkeyPanel=CdkeyPanel;var ShenQiPanel=function(t){function e(){var e=t.call(this)||this;return e.redPointHead=[RoleWin,RolePanel,SqXyWin],e}return __extends(e,t),e.prototype.setTabItem=function(){this.tab.itemRenderer=BaseTabBtn3},e.prototype.setSkinName=function(){this.skinName="ShenQiPanelEUI"},e.getTitle=function(){return"btz_zycs_sq"},e.getTabTitle=function(){return"bqz_zycs_sq"},e.getSysId=function(){return 210},e.panelNames=[ShenQiLevelPanel,ShenQiHuanHuaPanel,ShenQiFuHunPanel],e}(BaseTabPanel);__reflect(ShenQiPanel.prototype,"ShenQiPanel"),window.ShenQiPanel=ShenQiPanel;var MonthCardPanel=function(t){function e(){var e=t.call(this)||this;return e.skinName="MonthCardPanelEUI",e}return __extends(e,t),e.prototype.open=function(){this.addClickE(this.sendBtn,this.onTap),this.addLsn(RechargeActSys.ins().patchGetMonthDay,this.updateTime),this.addLsn(RpSys.ins().patchRp,this.updateRp),this.updateRp(),this.updateTime(),RpFun.monthCardPanelShow=!1,RpFun.showMonthCardRedPoint(),this.sendBtn.label=Cfg.getPayMoneyRMBByYb(this.monthData.getConfig().money)+"元抢购"},e.prototype.updateRp=function(t){void 0===t&&(t=null)},e.prototype.updateTime=function(){if(this.monthData=ActSys.ins().getActDataById(ActId.ID_99900),this.monthData.isInYueKaTime()){this.lastTime.textFlow=addColorTF(this.monthData.getformatTime(),5949490);var t=this.monthData.jiesuanTime-Actor.ins().serverTime;t<DateUtil.MS_PER_DAY&&Timer.ins()["do"](0,1e3,Math.floor(t/1e3),this.monthTimeFun,this)}else this.lastTime.text=Lang.fuli_str12.replace("$day$",""+this.monthData.getConfig().buyDay)},e.prototype.monthTimeFun=function(){this.lastTime.textFlow=addColorTF(this.monthData.getformatTime(),15733780)},e.prototype.onTap=function(t){switch(t.currentTarget){case this.sendBtn:VipSys.ins().showReCharge(this.monthData.getConfig().money)}},e.getSysId=function(){return 262},e.getTitle=function(){return"btz_zycs_zsyk"},e.getTabTitle=function(){return"bqz_zycs_zsyk"},e}(ActBasePanel);__reflect(MonthCardPanel.prototype,"MonthCardPanel"),window.MonthCardPanel=MonthCardPanel;var ZZTQCardPanel=function(t){function e(){var e=t.call(this)||this;return e.skinName="ZZTQCardPanelEUI",e}return __extends(e,t),e.prototype.open=function(){this.addClickE(this.tszfBtn,this.onTap),this.addLsn(RechargeActSys.ins().patchZZTQ,this.updateTime2),this.addLsn(RpSys.ins().patchRp,this.updateRp),this.updateRp(),this.updateTime2(),RpFun.zztqCardPanelShow=!1,RpFun.showZZTQCardRedPoint()},e.prototype.updateRp=function(t){void 0===t&&(t=null)},e.prototype.updateTime2=function(){this.tszfData=ActSys.ins().getActDataById(ActId.ID_99500),this.power.text=""+this.tszfData.getConfig().power,this.buyImg.visible=this.tszfData.isAct(),this.tszfBtn.visible=!this.buyImg.visible},e.prototype.onTap=function(t){switch(t.currentTarget){case this.tszfBtn:this.tszfData.isAct()?showtipsFail(Lang.act_str8):VipSys.ins().showReCharge(this.tszfData.getConfig().money)}},e.getSysId=function(){return 261},e.getTitle=function(){return"btz_zycs_zztq"},e.getTabTitle=function(){return"bqz_zycs_zztq"},e}(ActBasePanel);__reflect(ZZTQCardPanel.prototype,"ZZTQCardPanel"),window.ZZTQCardPanel=ZZTQCardPanel;var FuwenEquipPanel=function(t){function e(){var e=t.call(this)||this;return e.skinName="FuwenEquipPanelEUI",e.fws=[e.fw0,e.fw1,e.fw2,e.fw3,e.fw4,e.fw5,e.fw6,e.fw7],e}return __extends(e,t),e.prototype.open=function(e){void 0===e&&(e=0),t.prototype.open.call(this,e),this.currentState="own",this.addClickE(this.equipBtn,this.onClickBtn),this.addClickE(this.equipBtn0,this.onClickBtn),this.addClickE(this.levelBtn,this.onClickBtn);for(var i=0,n=this.fws;i<n.length;i++){var a=n[i];this.addClickE(a,this.onClickList)}this.addLsn(FuwenSys.ins().patchUpdateEquip,this.update),this.addLsn(RpSys.ins().patchRp,this.updateRp),this.updatePanel()},e.prototype.updatePanel=function(){this.setData(FuwenSys.ins().getEquipDatas());for(var t="",e=0,i=this.fws;e<i.length;e++){var n=i[e].data.pos,a=Cfg.getConfig(ElementLockPosConfig,n).lockLevel;if(Actor.ins().level<a){t=Lang.replaceEnum("等级达到%s级开启下个镶嵌槽",GFunc.GetLvStrByLv(a));break}}t||(t="已全部开启"),this.nextOpen=t},e.prototype.updateRp=function(t){(!t||t.check(e))&&(this.equipBtn0.redPoint.visible=RpSys.ins().getData(RoleWin,RolePanel,FuwenSysWin,e,"zb"),this.selectData&&(this.equipBtn.redPoint.visible=RpSys.ins().getData(RoleWin,RolePanel,FuwenSysWin,e,"th",this.selectData.pos)))},e.prototype.update=function(t){t?(this.fws[t.pos].data=t,this.setData(FuwenSys.ins().getEquipDatas())):this.setData(FuwenSys.ins().getEquipDatas())},e.prototype.updateAttr2=function(t){if(!t||t.isNullEquip())return this.currAttr0.text="",this.currAttr1.text="",this.currAttr2.text="",this.consuCountTxt.text="",this.nameTxt.text="",this.levelTxt.text="",this.equipBtn.label=Lang.fuwen_str2,this.hintTxt.visible=!0,this.img0.visible=!1,this.img1.visible=!1,this.img2.visible=!1,void(this.levelBtn.redPoint.visible=!1);this.hintTxt.visible=!1,this.img0.visible=!0,this.img1.visible=t.lvCfg.attr.length>1,this.img2.visible=!0,this.equipBtn.label=Lang.fuwen_str18;var e=t.baseConfig.name+"("+Lang.common_quality[t.baseConfig.quality]+")";if(e=StrUtil.addColor(e,16772274),this.nameTxt.textFlow=addColorTF(e),e=StrUtil.addColor("Lv."+t.level,16772274),this.levelTxt.textFlow=addColorTF(e),this.currAttr0.text=AttrData.parse(t.lvCfg.attr).join("\n"),this.currAttr1.textFlow=addColorTF(e),t.level<Cfg.getConfig(ElementOtherConfig).maxLevel){e="";var i=Cfg.getConfig(ElementLevelConfig,t.id+1);for(var n in i.attr)e+=AttrData.getAttrValue(i.attr[n])+"\n";this.currAttr2.text=e;var a=Actor.ins().getCurrency(CurType.elementEssence)<t.lvCfg.upLevelConsu?16712708:3821938;e=StrUtil.addColor(""+Actor.ins().getCurrency(CurType.elementEssence),a),this.consuCountTxt.textFlow=addColorTF(e+"/"+t.lvCfg.upLevelConsu)}else e=t.lvCfg.attr.length>1?Lang.common_str38+"\n"+Lang.common_str38:Lang.common_str38,this.currAttr2.text=e,this.consuCountTxt.text=Lang.common_str38;this.levelBtn.redPoint.visible=RpFun.getElementLevelUpRed(t),this.updateRp()},e.prototype.setData=function(t){for(var e in t)this.fws[e].itemIndex=+e,this.fws[e].data=t[e];this.power.text=""+FuwenSys.ins().getPower(),this.setSelectElementData(t),this.updateRp()},e.prototype.setSelectElementData=function(t){if(this.selectData)this.selectData=t[this.selectData.pos];else{for(var e=0,i=t;e<i.length;e++){var n=i[e];if(!n.isNullEquip()){this.selectData=n,this.fws[n.pos].selected=!0;break}}this.selectData||(this.selectData=t[0],this.fw0.selected=!0)}this.fwicon=this.selectData.id?ResMgr.getElementIconRes(this.selectData.baseConfig.icon):"",this.updateAttr2(this.selectData)},e.prototype.onClickList=function(t){var e=t.currentTarget,i=e,n=i.data,a=i.currentState,o=i.itemIndex;if(n.isNullEquip()){if(a==FuwenItem.STATE_LOCK){var s=Cfg.getConfig(ElementLockPosConfig,o).lockLevel;return void showtipsFail(""+Lang.common_str98+GFunc.GetLvStrByLv(s)+Lang.jewel_str3)}a==FuwenItem.STATE_IDLE&&openWin(FuwenEquipListPanel,n)}else;this.selectData=n;for(var r=0,u=this.fws;r<u.length;r++){var h=u[r];h.selectImg.visible=h==e,h==e&&(this.fwicon=h.data.id?ResMgr.getElementIconRes(h.data.baseConfig.icon):"")}this.updateAttr2(n)},e.prototype.onClickBtn=function(t){switch(t.target){case this.equipBtn0:this.fastEquip();break;case this.equipBtn:openWin(FuwenEquipListPanel,this.selectData);break;case this.levelBtn:this.elementUpgrade()}},e.prototype.elementUpgrade=function(){if(this.selectData.isNullEquip())return void showtipsFail(Lang.fuwen_str6);
var t=GFunc.creatRewardDataById(CurType.elementEssence,this.selectData.lvCfg.upLevelConsu);GFunc.checkConsumeEnough(t)&&FuwenSys.ins().sendEquipUpgrade(this.selectData.pos)},e.prototype.fastEquip=function(){for(var t,e,i=FuwenSys.ins().sortBag(),n=FuwenSys.ins().equipType,a=this.fws.length,o=[],s=0;a>s;s++)if(t=this.fws[s],e=t.data,t.currentState!=FuwenItem.STATE_LOCK)for(var r=0,u=i;r<u.length;r++){var h=u[r],l=h.baseConfig.type;if(0!=h.baseConfig.quality)if(e.isNullEquip()){if(-1==n.indexOf(l)&&-1==o.indexOf(l)){FuwenSys.ins().sendEquip(t.data.pos,h.id),o.push(l);break}}else if(e.baseConfig.type==h.baseConfig.type)if(e.baseConfig.quality==h.baseConfig.quality){if(h.level>e.level){FuwenSys.ins().sendEquip(t.data.pos,h.id);break}}else if(h.power>e.power){FuwenSys.ins().sendEquip(t.data.pos,h.id);break}}},e.prototype.getEquipItem=function(t){return this.fws[t]},e.getSysId=function(){return 209},e.getTitle=function(){return"btz_zycs_fw"},e.getTabTitle=function(){return"bqz_zycs_fwpd"},e}(BasePanel);__reflect(FuwenEquipPanel.prototype,"FuwenEquipPanel"),window.FuwenEquipPanel=FuwenEquipPanel;var SzPanel=function(t){function e(){var e=t.call(this)||this;return e.redPointHead=[RoleWin,RolePanel,SqXyWin],e}return __extends(e,t),e.prototype.setTabItem=function(){this.tab.itemRenderer=BaseTabBtn3},e.prototype.setSkinName=function(){this.skinName="ShenQiPanelEUI"},e.getTitle=function(){return"btz_zycs_sz"},e.getTabTitle=function(){return"bqz_zycs_sz"},e.getSysId=function(){return 212},e.panelNames=[SzLevelPanel,SzHuanHuaPanel,SzFuHunPanel],e}(BaseTabPanel);__reflect(SzPanel.prototype,"SzPanel"),window.SzPanel=SzPanel;var FuwenUpgradePanel=function(t){function e(){var e=t.call(this)||this;return e.previewExp=0,e.skinName="FuwenUpgradePanelEUI",e.init(),e}return __extends(e,t),e.prototype.init=function(){this.qualitys=[],this.list.itemRenderer=FuwenItem3,this.list.dataProvider=this.listArray=new eui.ArrayCollection,this.checkBoxs=[this.checkBox0,this.checkBox1,this.checkBox2,this.checkBox3];for(var t=this.checkBoxs.length,e=0;t>e;e++)this.checkBoxs[e].labelDisplay.textColor=GConst.PZColor[e+1]},e.prototype.open=function(){this.addClickE(this.btnTunshi,this.onClickBtn),this.addChangeE(this.checkBox0,this.onCheckBox),this.addChangeE(this.checkBox1,this.onCheckBox),this.addChangeE(this.checkBox2,this.onCheckBox),this.addChangeE(this.checkBox3,this.onCheckBox),this.addItemTapE(this.list,this.onClickList),this.addLsn(FuwenSys.ins().patchInitBag,this.updateListData),this.addLsn(FuwenSys.ins().patchBagAdd,this.updateListData),this.addLsn(FuwenSys.ins().patchBagdel,this.deleBack),this.addLsn(LogicSys.ins().patchCurrency,this.updateEssenceCount),this.selecteDatas=[],this.infoPanel(),this.setPanelData()},e.prototype.infoPanel=function(){for(var t=this.checkBoxs.length,e=0;t>e;e++)this.checkBoxs[e].selected=!1;this.list.selectedIndices=[],this.previewExp=0},e.prototype.setPanelData=function(){this.updateListData(),this.updateEssenceCount()},e.prototype.deleBack=function(){this.selecteDatas=[],this.updateListData()},e.prototype.updateListData=function(){var t;t=FuwenSys.ins().fuwenDatas,this.listArray.source=t},e.prototype.updateEssenceCount=function(t){t&&t.type!=CurType.elementEssence||(this.labelCurCount.text=""+Actor.ins().getCurrency(CurType.elementEssence),this.labelAddCount.text=0==this.previewExp?"":" +"+this.previewExp,this.labelAddCount.x=this.labelCurCount.x+this.labelCurCount.width)},e.prototype.onCheckBox=function(t){void 0===t&&(t=null),this.qualitys=[];for(var e=this.checkBoxs.length,i=0;e>i;i++)this.checkBoxs[i].selected&&this.qualitys.push(i+1);this.updateListItem(this.qualitys)},e.prototype.updateListItem=function(t){if(this.selecteDatas=[],this.previewExp=0,!t||0==t.length)return void this.updateEssenceCount();for(var e=this.listArray.source,i=e.length-1;i>=0;i--){var n=e[i];-1!=t.indexOf(n.baseConfig.quality)&&(this.selecteDatas.push(n),this.previewExp+=n.lvCfg.clearGain)}this.updateEssenceCount()},e.prototype.onClickList=function(t){var e=t.itemRenderer,i=e.data;e&&0==e.selected?(this.previewExp+=i.lvCfg.clearGain,this.selecteDatas.push(i)):(this.previewExp-=i.lvCfg.clearGain,this.deleEvent(i.handle)),this.updateEssenceCount()},e.prototype.deleEvent=function(t){for(var e=0;e<this.selecteDatas.length;e++)if(t==this.selecteDatas[e].handle){this.selecteDatas.splice(e,1);break}},e.prototype.onClickBtn=function(t){switch(t.target){case this.btnTunshi:this.upgradeHandler()}},e.prototype.upgradeHandler=function(){var t=this.selecteDatas;if(!t||0==t.length)return void showtipsFail(this.checkBox0.selected||this.checkBox1.selected||this.checkBox2.selected||this.checkBox3.selected?Lang.fuwen_str14:Lang.fuwen_str15);if(-1!=this.qualitys.indexOf(2)||-1!=this.qualitys.indexOf(3)||-1!=this.qualitys.indexOf(4)){var e=new PopupData(Lang.fuwen_str16);e.setFunction(this,function(){FuwenSys.ins().sendBagUpgrade(t)}),openWin(CommonTipsWin,e)}else FuwenSys.ins().sendBagUpgrade(t);this.infoPanel()},e.getSysId=function(){return 209},e.getTitle=function(){return"btz_zycs_fw"},e.getTabTitle=function(){return"bqz_zycs_fwfj"},__decorate([callDelay(100)],e.prototype,"deleBack",null),e}(BasePanel);__reflect(FuwenUpgradePanel.prototype,"FuwenUpgradePanel"),window.FuwenUpgradePanel=FuwenUpgradePanel;var GuideView=function(t){function e(){var e=t.call(this)||this;return e.mc=new MC,e.infoGroup.addChild(e.mc),e.from=new XY,e.to=new XY,e}return __extends(e,t),e.prototype.open=function(e,i){t.prototype.open.call(this,e,i),this.mc.playFile(getEffName("guideff"),-1);var n=i.getSkintype();this.arrow?this.arrow.type!=n&&(this.arrow.close(),DisUtil.remove(this.arrow),this.arrow=this.creatArrowByType(n),null!=i.getSound()&&SoundUtil.play(i.getSound())):(this.arrow=this.creatArrowByType(n),null!=i.getSound()&&SoundUtil.play(i.getSound())),this.infoGroup.addChild(this.arrow),egret.Tween.removeTweens(this.arrow),this.arrow.currentState="s"+i.getDir(),this.arrow.validateNow(),this.arrow.x=0,this.arrow.y=0;var a=new egret.Rectangle;switch(a.x=this.mc.x,a.y=this.mc.y,a.width=80,a.height=80,i.getDir()){case 1:default:this.arrow.y=0-a.height/2,this.to.x=this.arrow.x,this.to.y=this.arrow.y-40;break;case 2:this.arrow.x=a.width/2,this.to.x=this.arrow.x+40,this.to.y=this.arrow.y;break;case 3:this.arrow.y=a.height/2,this.to.x=this.arrow.x,this.to.y=this.arrow.y+40;break;case 4:this.arrow.x=0-a.width/2,this.to.x=this.arrow.x-40,this.to.y=this.arrow.y}this.from.x=this.arrow.x,this.from.y=this.arrow.y,this.arrow.alpha=0,this.arrow.setText(i.getText()),GFunc.move(this.arrow,this.from,this.to)},e.prototype.close=function(){t.prototype.close.call(this),this.arrow&&(this.arrow.close(),egret.Tween.removeTweens(this.arrow))},e.prototype.reset=function(){t.prototype.reset.call(this),this.mc.visible=!1},e.prototype.creatArrowByType=function(t){var e;switch(t){case 0:default:e=new GuideComponentArrow;break;case 1:e=new GuideComponentArrow1}return e},e}(GuideViewBase);__reflect(GuideView.prototype,"GuideView"),window.GuideView=GuideView;var GuildBossPanel=function(t){function e(){var e=t.call(this)||this;return e.currGuanqiaId=0,e.hpResList=["zm_zycs_xt3","zm_zycs_xt2","zm_zycs_xt1"],e.skinName="GuildBossPanelEUI",e.leftBtn.visible=!1,e.rightBtn.visible=!1,e.lineTxt.textFlow=addColorTF(Lang.guild_str1,2343978,!0),e.list.itemRenderer=ItemBaseRewardActivity,e.hpBar.labelFunction=e.progressLabelFunction,e.hpBar.maximum=100,e.setShowHelp(!1),e}return __extends(e,t),e.prototype.open=function(){t.prototype.open.call(this),this.addClickE(this.teamBtn,this.onClick),this.addClickE(this.leftBtn,this.onClick),this.addClickE(this.rightBtn,this.onClick),this.addClickE(this.lineTxt,this.onClick),this.addClickE(this,this.onWinClick),this.addLsn(GuildActSys.ins().patchGuildBossInfo,this.updatePanel),this.addLsn(GuildActSys.ins().patchGuildBossReward,this.updateBossReward),this.addLsn(ConfigSys.ins().patchSimpleMonsterConfig,this.updateMonster),this.addLsn(RpSys.ins().patchRp,this.updateRp),this.dataInfo()},e.prototype.close=function(){this.entityMonster&&this.entityMonster.reset(),t.prototype.close.call(this)},e.prototype.dataInfo=function(){var t=[],e=Cfg.getConfigs(GuildBossConfig,CondType.NONE);for(var i in e)Cfg.getMonstersConfigNew(e[i].bossId,!1)||t.push(e[i].bossId);t.length>0?ConfigSys.ins().sendSimpleMonsterConfig(t):this.updateMonster()},e.prototype.updateMonster=function(){GuildActSys.ins().sendGuildBossInfo()},e.prototype.updatePanel=function(){var t=Cfg.getGuildBossCount();this.currGuanqiaId=GuildActSys.ins().guanqiaId>=t?t:GuildActSys.ins().guanqiaId,this.setData(this.currGuanqiaId),this.setBossTimer()},e.prototype.updateBossReward=function(){this.setChallengeState(this.currGuanqiaId)},e.prototype.updateRp=function(){if(this.leftBtn.redPoint.visible=!1,this.currGuanqiaId>1)for(var t=1;t<this.currGuanqiaId;t++)if(1==RpSys.ins().getData(GuildMapWin,GuildActivityWin2,e,t)){this.leftBtn.redPoint.visible=!0;break}var i=this.maxPage();if(this.rightBtn.redPoint.visible=!1,this.currGuanqiaId<i)for(var n=this.currGuanqiaId+1;i>=n;n++)if(1==RpSys.ins().getData(GuildMapWin,GuildActivityWin2,e,n)){this.rightBtn.redPoint.visible=!0;break}this.teamBtn.label==Lang.common_str70?this.teamBtn.redPoint.visible=RpSys.ins().getData(GuildMapWin,GuildActivityWin2,e,this.currGuanqiaId):this.teamBtn.redPoint.visible=RpSys.ins().getData(GuildMapWin,GuildActivityWin2,e,"TZ")},e.prototype.setData=function(t){t=t>0?t:1;var e=Cfg.getConfig(GuildBossConfig,t),i=Cfg.getMonstersConfigNew(e.bossId),n=Cfg.getConfig(MonsterModelConfig,i.avatar[0]),a=ResMgr.getMonsterSource(n.appearance,4,EntityAction.STAND);this.entityMonster?this.entityMonster.name!=a&&this.entityMonster.playFile(a,-1):(this.entityMonster=MC.create(a,-1),this.monsterGroup.addChild(this.entityMonster)),this.nameTXt.text=""+i.name,this.powerTxt.text=""+Lang.guild_str2+e.power,this.list.dataProvider=new eui.ArrayCollection(e.passRewards);var o=Cfg.getConfig(GuildBossCommonConfig).count-GuildActSys.ins().bossCount,s=StrUtil.addColor(o,o>0?16751375:16712708);s+=StrUtil.addColor("/"+Cfg.getConfig(GuildBossCommonConfig).count,16751375),this.countTxt.textFlow=addColorTF(""+Lang.fb_str204+s),this.setChallengeState(t),this.setShowBtn(),this.updateRp()},e.prototype.setBossTimer=function(){var t=GuildActSys.ins().time-Timer.ins().getTimer();t?Timer.ins()["do"](0,1e3,Math.ceil(t/1e3),this.formatCountDown,this):this.timeTxt.text=Lang.guild_str3},e.prototype.formatCountDown=function(t){var e=""+Lang.guild_str4+StrUtil.addColor(getFormatTime(t,"dd天hh小时mm分钟ss秒"),16712708);this.timeTxt.textFlow=addColorTF(e)},e.prototype.setHpBar=function(t){t>75?this.hpBar.thumb.source=this.hpResList[0]:75>=t&&t>25?this.hpBar.thumb.source=this.hpResList[1]:this.hpBar.thumb.source=this.hpResList[2],this.hpBar.value=t},e.prototype.progressLabelFunction=function(t,e){return Math.ceil(t/e*100)+"%"},e.prototype.setChallengeState=function(t){if(this.unlockTxt.visible=!1,this.countTxt.visible=!1,this.helpBtn.visible=!1,this.teamBtn.visible=!1,this.ylqImg.visible=!1,this.stateImg.visible=!1,this.unlockTxt0.visible=!1,this.lineTxt.visible=!1,t<GuildActSys.ins().guanqiaId)this.stateImg.visible=!0,this.stateImg.source="zhanmeng_zycs_yjs",1==(GuildActSys.ins().record>>t&1)?this.ylqImg.visible=!0:(this.teamBtn.visible=!0,this.teamBtn.label=Lang.common_str70),this.setHpBar(0);else if(t>GuildActSys.ins().guanqiaId)this.unlockTxt.visible=!0,this.stateImg.visible=!0,this.stateImg.source="zhanmeng_zycs_wkq",this.setHpBar(100);else{var e=GuildSys.ins().getBuildingLevel(GuildBuildingType.GUILD_ACTIVITY),i=Cfg.getConfig(GuildBossConfig,t);e<i.level?(this.stateImg.visible=!0,this.stateImg.source="zhanmeng_zycs_wkq",this.unlockTxt0.visible=!0,this.lineTxt.visible=!0,this.setHpBar(100)):(this.countTxt.visible=!0,this.helpBtn.visible=!0,this.teamBtn.visible=!0,this.teamBtn.label=Lang.guild_str5,this.setHpBar(GuildActSys.ins().bossHp))}},e.prototype.onWinClick=function(t){t.target==this.helpBtn?this.setShowHelp(!this.helpTxt.visible):this.setShowHelp(!1)},e.prototype.setShowHelp=function(t){this.helpBg.visible=t,this.helpTxt.visible=t},e.prototype.onClick=function(t){switch(t.target){case this.teamBtn:if(!GFunc.checkGotoFuben())return void closeWin(GuildActivityWin2);if(this.teamBtn.label==Lang.guild_str5){if(GuildActSys.ins().bossCount>=Cfg.getConfig(GuildBossCommonConfig).count)return void showtipsFail(Lang.guild_str6);GuildActSys.ins().sendGuildBossTeamInfo()}else this.teamBtn.label==Lang.common_str70&&GuildActSys.ins().sendGuildBossReward(this.currGuanqiaId);break;case this.leftBtn:this.currGuanqiaId>1&&this.currGuanqiaId--,this.setData(this.currGuanqiaId);break;case this.rightBtn:this.currGuanqiaId<this.maxPage()&&this.currGuanqiaId++,this.setData(this.currGuanqiaId);break;case this.lineTxt:openWin(GuildWin,1),closeWin(GuildActivityWin2)}},e.prototype.setShowBtn=function(){this.currGuanqiaId>1?this.leftBtn.visible=!0:this.leftBtn.visible=!1,this.currGuanqiaId<this.maxPage()?this.rightBtn.visible=!0:this.rightBtn.visible=!1},e.prototype.maxPage=function(){if(GuildActSys.ins().guanqiaId<Cfg.getConfig(GuildBossCommonConfig).maxId){var t=GuildSys.ins().getBuildingLevel(GuildBuildingType.GUILD_ACTIVITY),e=Cfg.getConfig(GuildBossConfig,GuildActSys.ins().guanqiaId);return t<e.level?GuildActSys.ins().guanqiaId:GuildActSys.ins().guanqiaId+1}return Cfg.getConfig(GuildBossCommonConfig).maxId},e.getTitle=function(){return"btz_zycs_hddt"},e.getSysId=function(){return 255},e.getTabTitle=function(){return"bqz_zycs_mwlx"},e.openCheck=function(){return GFunc.checkSysOpen(143)?GuildSys.ins().isAddGuild()?!0:(openWin(GuildNavWin),showTipsWarn(Lang.guild_str7),!1):void 0},e.prototype.getTeamBtn=function(){return this.teamBtn},e}(BasePanel);__reflect(GuildBossPanel.prototype,"GuildBossPanel"),window.GuildBossPanel=GuildBossPanel;var WingPanel=function(t){function e(){var e=t.call(this)||this;return e.redPointHead=[RoleWin,RolePanel,SqXyWin],e}return __extends(e,t),e.prototype.setTabItem=function(){this.tab.itemRenderer=BaseTabBtn3},e.prototype.setSkinName=function(){this.skinName="ShenQiPanelEUI"},e.getTitle=function(){return"btz_zycs_cb"},e.getTabTitle=function(){return"bqz_zycs_cb"},e.getSysId=function(){return 211},e.panelNames=[WingLevelPanel,WingHuanHuaPanel,WingFuHunPanel],e}(BaseTabPanel);__reflect(WingPanel.prototype,"WingPanel"),window.WingPanel=WingPanel;var SuitPanel=function(t){function e(){var e=t.call(this)||this;e.helpId=74,e.lastTabIndex=0,e.curTabIndex=0,e.suitSelectIndex=0,e.skinName="SuitPanelEUI",e.listItem.itemRenderer=SuitPanelItem,e.listItem.dataProvider=e.listItemArray=new eui.ArrayCollection,e.listSuit.itemRenderer=SuitPanelTabItem,e.listSuit.dataProvider=e.listSuitArray=new eui.ArrayCollection,e.listTab.itemRenderer=BaseTabBtn,e.listTab.dataProvider=e.listTabArray=new eui.ArrayCollection;for(var i=Cfg.getConfigs(SuitXLConfig),n=[],a=0,o=i;a<o.length;a++){var s=o[a];n.push("bqz_zycs_"+Actor.ins().job+"_"+s.xlId+"_")}return e.listTabArray.source=n,e.setRedPointHead(RoleWin,RolePanel,SuitWin),e}return __extends(e,t),e.prototype.open=function(e,i){void 0===e&&(e=-1),void 0===i&&(i=0),t.prototype.open.call(this),this.addClickE(this.btnGetEquip,this.onclick),this.addClickE(this.btnDesc,this.onclick),this.addItemTapE(this.listItem,this.onItemClick),this.addItemTapE(this.listSuit,this.onSuitClick),this.addChangeE(this.listTab,this.onTabClick),this.addChangingE(this.listTab,this.checkIsOpen),this.addLsn(ForgeSys.ins().patchSuitUp,this.onSuitUp),this.addLsn(RpSys.ins().patchRp,this.onRedPoint);var n,a;if(-1==e?(s=this.getAutoTabIndex(),n=s[0],a=s[1]):(n=e,a=i),this.listTab.selectedIndex=this.curTabIndex=n,this.listSuit.selectedIndex=this.suitSelectIndex=a,this.updateSuitList(),this.updateItemList(),this.updateCurSuit(),this.updatePower(),this.updateBtnImg(),this.onRedPoint(),this.curTabIndex>3){var o=95*this.curTabIndex;o=o>=600?this.scrollerBase.viewport.contentWidth-490:o,this.scrollerBase.viewport.scrollH=o}var s},e.prototype.close=function(){t.prototype.close.call(this)},e.prototype.getAutoTabIndex=function(){for(var t=Cfg.getConfigs(SuitXLConfig),e=0;e<t.length;e++)for(var i=t[e].xlId,n=ForgeSys.ins().getSuitDatasByXLId(i),a=0;a<n.length;a++)if(n[a].canDianliang())return[e,a];var o,s;for(o=0;o<t.length;o++){var i=t[o].xlId,n=ForgeSys.ins().getSuitDatasByXLId(i);for(s=0;s<n.length;s++)if(n[s].getMinPos())return[o,s]}return this.getLastPos()},e.prototype.getLastPos=function(){var t=Cfg.getConfigs(SuitXLConfig),e=t[t.length-1].xlId,i=ForgeSys.ins().getSuitDatasByXLId(e);return[t.length-1,i.length-1]},e.prototype.onSuitUp=function(t){this.listItemArray.itemUpdated(t),this.updateSuitList(),this.updateCurSuit(),this.updateBtnImg(),this.updatePower()},e.prototype.onRedPoint=function(t){if(void 0===t&&(t=null),!t||t.check(this.getThisDef())){this.listTab.validateNow();for(var i=0;i<this.listTab.numElements;i++){var n=this.listTab.getChildAt(i);if(n){var a=this.getXLIdByIndex(i);n.redPoint.visible=RpSys.ins().getData(RoleWin,RolePanel,SuitWin,e,a)}}this.listSuit.validateNow();for(var o=0;o<this.listSuit.numElements;o++){var s=this.listSuit.getChildAt(o);s&&s.updateRp()}}},e.prototype.getCurXLId=function(){return this.getXLIdByIndex(this.curTabIndex)},e.prototype.getXLIdByIndex=function(t){return t+1},e.prototype.updateSuitList=function(){this.listSuitArray.source=ForgeSys.ins().getSuitDatasByXLId(this.getCurXLId())},e.prototype.updateItemList=function(){for(var t=Cfg.getConfig(SuitXLConfig,this.getCurXLId()).ids[this.suitSelectIndex],i=ForgeSys.ins().getSuitDataById(t),n=[],a=e.orders,o=0;o<a.length;o++)n.push(i.getPosData(a[o]));this.listItemArray.source=n,this.listItemArray.refresh()},e.prototype.updateBtnImg=function(){var t=Cfg.getConfig(SuitXLConfig,this.getCurXLId()).ids[this.suitSelectIndex],e=ForgeSys.ins().getSuitDataById(t),i=e.isMax();this.btnGetEquip.visible=!i,this.imgDianliang.visible=i},e.prototype.updatePower=function(){var t=Cfg.getConfig(SuitXLConfig,this.getCurXLId()).ids[this.suitSelectIndex],e=ForgeSys.ins().getSuitDataById(t);this.bmpLabelPower.text=e.power.toFixed(0)},e.prototype.onItemClick=function(t){var e=t.itemIndex,i=this.listItemArray.getItemAt(e);i.state?showtipsFail("此部位已点亮,不可重复点亮！"):i.canDianliang()?ForgeSys.ins().sendSuitUp(i.id,i.pos):showtipsFail("未达到点亮条件！")},e.prototype.onSuitClick=function(t){this.suitSelectIndex=t.itemIndex,this.updateItemList(),this.updateCurSuit(),this.updatePower(),this.updateBtnImg()},e.prototype.checkIsOpen=function(t){var e=this.listTab.selectedIndex,i=Cfg.getConfig(SuitXLConfig,this.getXLIdByIndex(e)),n=!1;Actor.ins().zsId<i.zsId&&(showtipsFail(Lang.job_str30.replace("$str$",""+GFunc.getZSNameBydb(i.zsId))),n=!0),n&&(t.preventDefault(),this.curTabIndex=this.lastTabIndex,this.updateTabClick())},e.prototype.onTabClick=function(){this.lastTabIndex=this.curTabIndex,this.curTabIndex=this.listTab.selectedIndex,this.updateTabClick()},e.prototype.updateTabClick=function(){this.suitSelectIndex=0,this.listSuit.selectedIndex=0,this.updateSuitList(),this.updateItemList(),this.updateCurSuit(),this.updatePower(),this.updateBtnImg()},e.prototype.updateCurSuit=function(){var t=Cfg.getConfig(SuitXLConfig,this.getCurXLId()).ids[this.suitSelectIndex],e=ForgeSys.ins().getSuitDataById(t),i=e.config.condition,n=12704255,a="点亮条件：穿戴装备阶数≥"+addColor(i.rank+"阶，",n);a+="品质≥"+addColor(Lang.common_quality[i.quality]+"，",GConst.PZColor[i.quality]),a+="星数≥"+addColor(i.star+"星",n),this.labelCondition.textFlow=addColorTF(a);var o=e.getDianliangCount();this.labelDianliangCur.text="当前"+o+"件";var s=Cfg.getSuitAttrConfigByCount(t,o);if(this.labelAttr.text=AttrData.parse(s).join("\n"),!e.isMax()){this.labelDianliangNext.text="点亮"+(o+1)+"件";var r=Cfg.getSuitAttrConfigByCount(t,o+1),u=AttrData.diffAttr(s,r);this.labelAttrNext.textFlow=addColorTF(AttrData.parse(u,{fm:" +%v"}).join("\n"))}this.currentState=e.isMax()?"max":"normal";var h=e.config.skilldesc[Actor.ins().job-1],l="";8>o&&(l="\n"+addColor("(点亮8件后激活)",15733780)),this.labelSkill.textFlow=addColorTF(h+l)},e.prototype.onclick=function(t){switch(t.currentTarget){case this.btnGetEquip:openWin(MeNeedLevelWin,2);break;case this.btnDesc:openWin(HelpWin,Cfg.getConfig(HelpInfoConfig,this.helpId).text)}},e.getTitle=function(){return"btz_zycs_tz"},e.getTabTitle=function(){return"bqz_zycs_sq"},e.getSysId=function(){return 204},e.orders=[EquipPos.WEAPON,EquipPos.CLOTHES,EquipPos.HAND,EquipPos.LEG,EquipPos.HEAD,EquipPos.NECKLACE,EquipPos.EMBLEM,EquipPos.CALIGA],e}(BasePanel);__reflect(SuitPanel.prototype,"SuitPanel"),window.SuitPanel=SuitPanel;var TaskNavDataBase=function(){function t(t){this.succeedFun=new Caller,this.succeedFrontFun=new Caller,this.loserFun=new Caller,this.controlTarget=t}return t.prototype.setLoserFun=function(t,e){void 0===e&&(e=null),this.loserFun.func=t,this.loserFun.obj=e},t.prototype.setsucceedFrontFun=function(t,e){void 0===e&&(e=null),this.succeedFrontFun.func=t,this.succeedFrontFun.obj=e},t.prototype["goto"]=function(t){void 0===t&&(t=null),this.param=t},Object.defineProperty(t.prototype,"type",{get:function(){return this.controlTarget[0]},enumerable:!0,configurable:!0}),t.prototype.getParam=function(t,e){return t[e]},t}();__reflect(TaskNavDataBase.prototype,"TaskNavDataBase");var TclyPanel=function(t){function e(){var e=t.call(this)||this;return e.skinName="TclyPanelEUI",e.list.itemRenderer=TclyItem,e.list.dataProvider=e.listArr=new eui.ArrayCollection,e}return __extends(e,t),e.prototype.open=function(){t.prototype.open.call(this),this.actData=ActSys.ins().getActDataById(2001),this.addLsn(ActSys.ins().patchActivityPanel,this.updateEvent),this.updateEvent()},e.prototype.updateEvent=function(){var t=this.actData.getItemDatas();SortUtil.sortOn(t,["status","dabiao"],[SortType.up,SortType.up]),this.listArr.source=t},e.prototype.updateTime=function(){this.lbTime.textFlow=addColorTF(this.actData.getformatTime())},e.getTabTitle=function(){return"bqz_zycs_tcly"},e}(BasePanel);__reflect(TclyPanel.prototype,"TclyPanel"),window.TclyPanel=TclyPanel;var TianMoEquipUpLevelPanel=function(t){function e(){var e=t.call(this)||this;return e.equipItems=[],e.attrType1=[AttrType.atdkzy,AttrType.atdkhx,AttrType.atdkzm,AttrType.atdkws],e.initUI(),e}return __extends(e,t),e.prototype.setSkinName=function(){this.skinName="TianMoEquipUpLevelPanelEUI"},e.prototype.initUI=function(){t.prototype.initUI.call(this),this.equipItems=[this.equipItem0,this.equipItem1,this.equipItem2,this.equipItem3],this.itemMC=new MC,this.itemMC.x=370,this.itemMC.y=400,this.itemMC.playFile(getEffName("szty"),-1),this.addChild(this.itemMC),this.lbMaterial.textFlow=addColorTF(Lang.DuoLuo_str1,this.lbMaterial.textColor,!0),this.starView=new Star(StarData.F_1()),this.starView.setMaxStar(5),this.starView.x=-108,this.starView.y=0,this.groupStar.addChild(this.starView)},e.prototype.open=function(){t.prototype.open.call(this),this.addClickE(this,this.onclick),this.addLsn(ForgeSys.ins().patchTianMoUpLevel,this.upLevelUpdate),this.addLsn(RpSys.ins().patchRp,this.updateRp),this.addLsn(BagSys.ins().patchItemChange,this.updateConsumeItem),this.updatePanel()},e.prototype.updatePanel=function(){this.reset(),this.iniListDate(),this.updateRp()},e.prototype.iniListDate=function(){for(var t=ForgeSys.ins().tianMoData,e=0;e<t.tianMoUpLevelDatas.length;e++)this.equipItems[e].data=t.tianMoUpLevelDatas[e],this.equipItems[e].setSelectBG(!1);this.equipItems[0].setSelectBG(!0),this.curData=this.equipItems[0].data,this.selectEquip(this.curData)},e.prototype.updateEquipData=function(t){this.imgName.source=ResMgr.TianMoNameIcons(t.pos),this.imgIcon.source=ResMgr.TianMoIcons(t.pos)},e.prototype.updateEquipAttr=function(t){var e=t.getConfig(),i=AttrData.getFm(void 0,void 0,"：");this.lbCurAttr.textFlow=addColorTF(AttrData.parse(e.attr,{fm:i}).join("\n")),this.btnOk.label=t.getIsAct()?t.isUpLevel()?Lang.btn_sjie:Lang.btn_sx:Lang.btn_jh,this.powerBmp.text=GFunc.getPower(e.attr).toFixed(0);var n=t.chekLevelUpStar(Actor.ins().zsId)?5949490:15733780;if(this.lbLevel.textFlow=addColorTF(GFunc.getZSNameBydb(e.zslevel),n),this.bitlbRota.text=Math.floor(e.rate/100)+"%",!t.getIsMax()){var a=Cfg.getConfig(TianMoAttrConfig,t.pos,t.star+1);i=AttrData.getFm(void 0,void 0," ","："),this.lbNextAttr.textFlow=addColorTF(AttrData.parse(a.attr,{fm:i}).join("\n"))}this.imgIcon.filters=t.isAct?[]:DisUtil.grayFilter(),this.starView.setCurStar(t.showStart())},e.prototype.updateConsume=function(t){if(!t.getIsMax()){var e=t.getConfig().items;if(0==e.length)this.lbConsume.textFlow=addColorTF(Lang.DuoLuo_str2);else{var i=e[0].id,n=e[0].count,a=BagSys.ins().getItemById(i),o=Cfg.getItemCfg(i),s=a?a.count:0;this.imgConsume.source=ResMgr.getItemIcon(o.getIcon(),IconType.IT_80x80),s>=n?this.lbConsume.textFlow=addColorTF(s+"/"+n):this.lbConsume.textFlow=addColorTF(s+"/"+n,15732752)}}},e.prototype.selectEquip=function(t){this.reset(),this.updateEquipData(t),this.updateEquipAttr(t),this.updateConsume(t),this.updateStatsu(t)},e.prototype.upLevelUpdate=function(t){this.updateEquipAttr(t),this.updateStatsu(t),this.updateConsume(t);for(var e=0;e<this.equipItems.length;e++){var i=this.equipItems[e],n=i.data;if(i&&n.pos==t.pos){i.data=t;break}}},e.prototype.updateStatsu=function(t){t.getIsAct()?t.getIsMax()?this.currentState="max":this.currentState="normal":this.currentState="noact"},e.prototype.onclick=function(t){switch(t.target){case this.btnOk:this.curData.chekLevelUpStar(Actor.ins().zsId)?GFunc.checkConsumeEnough(this.curData.getConfig().items)&&ForgeSys.ins().sendTianMoUpLevel(this.curData.pos):showTipsWarn(Lang.DuoLuo_str3);break;case this.lbMaterial:openWin(TianMoMaterialWin);break;case this.equipItem0:case this.equipItem1:case this.equipItem2:case this.equipItem3:var e=t.target;this.curData=e.data;for(var i=0;i<this.equipItems.length;i++)this.equipItems[i].setSelectBG(!1);e.setSelectBG(!0),this.selectEquip(this.curData)}},e.prototype.updateConsumeItem=function(t){(t.cfg.type==ItemType.TianMoGodEquipcl||t.cfg.type==ItemType.TianMoGodEquip)&&this.updateConsume(this.curData)},e.prototype.updateRp=function(t){if(void 0===t&&(t=null),!t||t.check(e)){for(var i=0;i<this.equipItems.length;i++){var n=this.equipItems[i];n&&n.updateRedPoint()}this.redPointMaterial.visible=RpSys.ins().getData(RoleWin,RolePanel,ShengLingWin,TianMoMainPanel,e,TianMoMaterialWin)}},e.prototype.reset=function(){this.starView.reset()},e.getSysId=function(){return 338},e.getTitle=function(){return"btz_zycs_dlsz"},e.getTabTitle=function(){return Lang.btn_sjie},e}(BasePanel);__reflect(TianMoEquipUpLevelPanel.prototype,"TianMoEquipUpLevelPanel"),window.TianMoEquipUpLevelPanel=TianMoEquipUpLevelPanel;var TianMoEquipUpRankPanel=function(t){function e(){var e=t.call(this)||this;return e.equipItems=[],e.initUI(),e}return __extends(e,t),e.prototype.setSkinName=function(){this.skinName="TianMoEquipUpRankPanelEUI"},e.prototype.initUI=function(){t.prototype.initUI.call(this),this.equipItems=[this.equipItem0,this.equipItem1,this.equipItem2,this.equipItem3],this.itemMC=new MC,this.itemMC.x=370,this.itemMC.y=400,this.itemMC.playFile(getEffName("szty"),-1),this.addChild(this.itemMC)},e.prototype.open=function(){t.prototype.open.call(this),this.addClickE(this,this.onclick),this.addLsn(ForgeSys.ins().patchTianMoUpRank,this.upLevelUpdate),this.addLsn(RpSys.ins().patchRp,this.updateRp),this.addLsn(BagSys.ins().patchItemChange,this.updateConsumeItem),this.iniListDate(),this.updateRp()},e.prototype.iniListDate=function(){for(var t=ForgeSys.ins().tianMoData,e=0;e<t.tianMoEquipRankData.length;e++)this.equipItems[e].data=t.tianMoEquipRankData[e],this.equipItems[e].setSelectBG(!1);this.equipItems[0].setSelectBG(!0),this.curData=this.equipItems[0].data,this.selectEquip(this.curData)},e.prototype.updateEquipData=function(t){this.imgName.source=ResMgr.TianMoNameIcons(t.pos),this.imgIcon.source=ResMgr.TianMoIcons(t.pos)},e.prototype.updateEquipAttr=function(t){var e=AttrData.getFm(void 0,void 0,"：");this.lbCurAttr.textFlow=addColorTF(AttrData.parse(t.getConfig().attr,{fm:e}).join("\n")),this.powerBmp.text=GFunc.getPower(t.getConfig().attr).toFixed(0);var i=t.chekLevelUpRank()?5949490:15733780;if(this.lbLevel.textFlow=addColorTF(t.getNextUpRankLevelDesc(),i),!t.getIsMax()){var n=Cfg.getConfig(TianMoRankConfig,t.pos,t.rankLevel+1);e=AttrData.getFm(void 0,void 0," ","："),this.lbNextAttr.textFlow=addColorTF(AttrData.parse(n.attr,{fm:e}).join("\n"))}},e.prototype.updateConsume=function(t){if(!t.getIsMax()){var e=t.getConfig().items;if(0==e.length)this.lbConsume.textFlow=addColorTF(Lang.DuoLuo_str2);else{var i=e[0].id,n=e[0].count,a=BagSys.ins().getItemById(i),o=Cfg.getItemCfg(i),s=a?a.count:0;this.imgConsume.source=ResMgr.getItemIcon(o.getIcon(),IconType.IT_80x80),s>=n?this.lbConsume.textFlow=addColorTF(s+"/"+n):this.lbConsume.textFlow=addColorTF(s+"/"+n,15732752)}}},e.prototype.selectEquip=function(t){this.updateEquipData(t),this.updateEquipAttr(t),this.updateConsume(t),this.updateStatsu(t)},e.prototype.upLevelUpdate=function(t){this.updateEquipAttr(t),this.updateStatsu(t),this.updateConsume(t);for(var e=0;e<this.equipItems.length;e++){var i=this.equipItems[e],n=i.data;if(i&&n.pos==t.pos){i.data=t;break}}},e.prototype.updateStatsu=function(t){t.getIsMax()?this.currentState="max":this.currentState="normal"},e.prototype.onclick=function(t){switch(t.target){case this.btnOk:this.curData.chekLevelUpRank()?GFunc.checkConsumeEnough(this.curData.getConfig().items)&&ForgeSys.ins().sendTianMoUpRank(this.curData.pos):showtipsFail(Lang.DuoLuo_str4);break;case this.equipItem0:case this.equipItem1:case this.equipItem2:case this.equipItem3:var e=t.target;this.curData=e.data;for(var i=0;i<this.equipItems.length;i++)this.equipItems[i].setSelectBG(!1);e.setSelectBG(!0),this.selectEquip(this.curData)}},e.prototype.updateConsumeItem=function(t){(t.cfg.type==ItemType.TianMoGodEquipcl||t.cfg.type==ItemType.TianMoGodEquip)&&this.updateConsume(this.curData)},e.prototype.updateRp=function(t){if(void 0===t&&(t=null),!t||t.check(e))for(var i=0;i<this.equipItems.length;i++){var n=this.equipItems[i];n&&n.updateRedPoint()}},e.getSysId=function(){return 338},e.getTitle=function(){return"btz_zycs_dlsz"},e.getTabTitle=function(){return Lang.btn_jj},e}(BasePanel);__reflect(TianMoEquipUpRankPanel.prototype,"TianMoEquipUpRankPanel"),window.TianMoEquipUpRankPanel=TianMoEquipUpRankPanel;var SVipPanel=function(t){function e(){var e=t.call(this)||this;return e.curShowLv=1,e.initUI(),e}return __extends(e,t),e.prototype.initUI=function(){this.skinName="SVipPanelEUI",this.listAward.itemRenderer=ItemBaseReward,this.listAward.dataProvider=this.listAwardArr=new eui.ArrayCollection,this.listAttr.itemRenderer=SvipPanelAttrItem,this.listAttr.dataProvider=this.listAttrArr=new eui.ArrayCollection,this.labelTequan.textFlow=addColorTF(this.labelTequan.text,5949490,!0),this.progressBarExp.labelFunction=function(t,e){return t+"/"+e},this.mcIcon=new McIcon,this.groupBox.addChild(this.mcIcon)},e.prototype.open=function(){t.prototype.open.call(this),this.addClickE(this.btnRecharge,this.onClick),this.addClickE(this.btnRecharge1,this.onClick),this.addClickE(this.btnGet,this.onClick),this.addClickE(this.btnLeft,this.onClick),this.addClickE(this.btnRight,this.onClick),this.addClickE(this.labelTequan,this.onClick),this.addClickE(this.btnMZLB,this.onClick),this.addClickE(this.btnZK,this.onClick),this.addLsn(VipSys.ins().patchSvipData,this.update),this.addLsn(VipSys.ins().patchSVipAwardstate,this.updateGetAward),this.addLsn(VipSys.ins().patchSvipEveryDayAward,this.updateEveryDayAward),this.addLsn(RpSys.ins().patchRp,this.updateRp),this.curShowLv=this.getAwardMinLv(),this.update()},e.prototype.close=function(){t.prototype.close.call(this),this.mcIcon.close()},e.prototype.getAwardMinLv=function(){for(var t=Actor.ins().sVipLv,e=0;t>=e;e++)if(VipSys.ins().canGetSVipAward(e)){t=e;break}return Math.max(t,1)},e.prototype.update=function(){this.updateMyVip(),this.updateCurVip(),this.updateEveryDayAward()},e.prototype.updateGetAward=function(){this.curShowLv=this.getAwardMinLv(),this.updateCurVip()},e.prototype.updateEveryDayAward=function(){this.imgMRLBYLQ.visible=Actor.ins().sVipLv>0&&!VipSys.ins().hasSvipEveryDayAwarCanGet()
},e.prototype.updateCurVip=function(){var t=Cfg.getConfig(SVipConfig,this.curShowLv);this.mcIcon.open(t.mcIcon),this.bmpLabelZSGift.text=t.lv.toString(),this.bmpLabelTQGift.text=t.lv.toString(),this.listAwardArr.source=t.awards,this.listAttrArr.source=t.attrdesc;var e=VipSys.ins().getSVipAwardState(this.curShowLv);this.imgYLQ.visible=e==ActRewardState.Geted,this.btnGet.visible=e==ActRewardState.CanGet,this.btnRecharge1.visible=e==ActRewardState.NotReached,this.bmpLabelPower.text=t.power.toString(),this.updateLeftRightBtn()},e.prototype.updateMyVip=function(){var t=Actor.ins().sVipLv,e=0;t<Cfg.getSVipMaxLv()?(e=t+1,this.groupRechargeAgain.visible=!0,this.labelMax.visible=!1):(e=t,this.groupRechargeAgain.visible=!1,this.labelMax.visible=!0);var i=(Cfg.getConfig(SVipConfig,t),Cfg.getConfig(SVipConfig,e));this.bmpLabelLv.text=t.toString(),this.bmpLabelLvNext.text=e.toString(),this.bmpLabelRecharge.text=Math.max(i.needYb-VipSys.ins().sVipExp,0).toString(),this.bmpLabelRechargeLv.text=e.toString(),this.progressBarExp.maximum=i.needYb,this.progressBarExp.value=VipSys.ins().sVipExp},e.prototype.updateLeftRightBtn=function(){this.btnLeft.visible=this.curShowLv>1,this.btnRight.visible=this.curShowLv<Cfg.getSVipMaxLv(),this.updateRp()},e.prototype.updateRp=function(t){if(void 0===t&&(t=null),!t||t.check(e)){for(var i=!1,n=!1,a=VipSys.ins().sVipAwardStates,o=Actor.ins().sVipLv,s=0;s<a.length;s++)o>=s&&(s<this.curShowLv&&(i=i||VipSys.ins().canGetSVipAward(s)),s>this.curShowLv&&(n=n||VipSys.ins().canGetSVipAward(s)));this.btnLeft.redPoint.visible=i,this.btnRight.redPoint.visible=n,this.btnGet.redPoint.visible=RpSys.ins().getData(VipWin,e,"sviplv",Actor.ins().sVipLv),this.btnMZLB.redPoint.visible=RpSys.ins().getData(VipWin,e,"mrlb")}},e.prototype.onClick=function(t){var e;switch(t.currentTarget){case this.btnRecharge:case this.btnRecharge1:openWin(RechargeWin);break;case this.btnLeft:this.curShowLv>1&&this.curShowLv--,this.updateCurVip();break;case this.btnRight:this.curShowLv<Cfg.getSVipMaxLv()&&this.curShowLv++,this.updateCurVip();break;case this.btnGet:e=Cfg.getConfig(SVipConfig,this.curShowLv),BagSys.ins().checkBagFreeByItems(e.awards)&&VipSys.ins().getSVipAwardState(this.curShowLv)==ActRewardState.CanGet&&VipSys.ins().sendGetSVipAward(this.curShowLv);break;case this.labelTequan:openWin(SVipTequanTipsWin,this.curShowLv);break;case this.btnMZLB:openWin(SVipEveryDayAwardWin);break;case this.btnZK:openWin(ShopWin,ShopWin.getTabIndexbyPanel(MallPanel),MallPanel.getTabIndexbyPanel(MallSVIPPanel))}},e.getSysId=function(){return 259},e.getTitle=function(){return"btz_zycs_svip"},e.getTabTitle=function(){return"bqz_zycs_svip"},e}(BasePanel);__reflect(SVipPanel.prototype,"SVipPanel"),window.SVipPanel=SVipPanel;var VipPanel=function(t){function e(){var e=t.call(this)||this;return e.curShowLv=1,e.initUI(),e}return __extends(e,t),e.prototype.initUI=function(){t.prototype.initUI.call(this),this.listAward.itemRenderer=ItemBaseReward,this.listAward.dataProvider=this.listAwardArr=new eui.ArrayCollection,this.labelTequan.textFlow=addColorTF(this.labelTequan.text,5949490,!0),this.progressBarExp.labelFunction=function(t,e){return t+"/"+e},this.mcIcon=new McIcon,this.groupMcIcon.addChild(this.mcIcon)},e.prototype.setSkinName=function(){this.skinName="VipPanelEUI"},e.prototype.open=function(){t.prototype.open.call(this),this.addClickE(this.btnRecharge,this.onClick),this.addClickE(this.btnGet,this.onClick),this.addClickE(this.btnLeft,this.onClick),this.addClickE(this.btnRight,this.onClick),this.addClickE(this.labelTequan,this.onClick),this.addLsn(VipSys.ins().patchVipUpdate,this.update),this.addLsn(VipSys.ins().patchGetVipAward,this.updateGetVipAward),this.curShowLv=this.getAutoVipLv(),this.update()},e.prototype.close=function(){this.mcIcon.close(),t.prototype.close.call(this)},e.prototype.getAutoVipLv=function(){for(var t=1;t<=Actor.ins().vipLv;t++)if(VipSys.ins().canGetVipAward(t))return t;return Actor.ins().vipLv<Cfg.getVipMaxLv()?Actor.ins().vipLv+1:Actor.ins().vipLv},e.prototype.update=function(){this.updateMyVip(),this.updateCurVip()},e.prototype.updateGetVipAward=function(){this.curShowLv=this.getAutoVipLv(),this.updateCurVip(),GFunc.playUIMovie("vipeff2",360,600,this)},e.prototype.updateCurVip=function(){var t=Cfg.getConfig(VipConfig,this.curShowLv);this.mcIcon.open(t.mcIcon),this.bmpLabelZSGift.text=t.lv.toString(),this.bmpLabelTQGift.text=t.lv.toString(),this.listAwardArr.source=t.awards,this.listAward.dataProvider=new eui.ArrayCollection(t.awards),this.imgBoxName.source=Actor.ins().job+"01vip"+t.lv;var i=VipSys.ins().xjhbData.totalNum;this.labelGuan.visible=!1;var n=VipSys.ins().getVipAwardState(this.curShowLv);if(i<Cfg.getHongbaoMaxLv()&&n==ActRewardState.NotReached){var a=Cfg.getConfig(VipHongbaoConfig,VipSys.ins().xjhbData.totalNum);ComUtil.isXianYuApp?this.labelGuan.text="通过天路第"+a.needCustom+"层送仙玉红包":this.labelGuan.text="通过天路第"+a.needCustom+"层送现金红包",this.labelGuan.visible=!0}this.imgYLQ.visible=n==ActRewardState.Geted,this.btnGet.visible=n==ActRewardState.CanGet,this.btnGet.redPoint.visible=RpSys.ins().getData(VipWin,e,this.curShowLv),this.updateLeftRightBtn()},e.prototype.updateMyVip=function(){var t,e=Actor.ins().vipLv,i=Cfg.getConfig(VipConfig,e),n=0,a=VipSys.ins().vipExp;e<Cfg.getVipMaxLv()?(this.currentState="normal",n=e+1,t=i.needYb):(this.currentState="max",n=e,t=a=2300);var o=t-a;this.bmpLabelLv.text=e.toString(),this.bmpLabelLvNext.text=n.toString(),this.bmpLabelRecharge.text=o.toString(),this.bmpLabelRechargeLv.text=n.toString(),this.progressBarExp.maximum=t,this.progressBarExp.value=a,this.group1.visible&&(this.group1.visible=!urlParam.isShenhe),this.btnRecharge.visible&&(this.btnRecharge.visible=!urlParam.isShenhe)},e.prototype.updateLeftRightBtn=function(){this.btnLeft.visible=this.curShowLv>1,this.btnRight.visible=this.curShowLv<Cfg.getVipMaxLv()},e.prototype.updateRp=function(t){if(void 0===t&&(t=null),!t||t.check(this.getThisDef())){for(var e=!1,i=!1,n=VipSys.ins().vipAwardStates,a=Actor.ins().vipLv,o=0;o<n.length;o++)a>=o&&(o<this.curShowLv&&(e=e||1==n[o]),o>this.curShowLv&&(i=i||1==n[o]));this.btnLeft.redPoint.visible=e,this.btnRight.redPoint.visible=i}},e.prototype.onClick=function(t){var e;switch(t.currentTarget){case this.btnRecharge:openWin(RechargeWin);break;case this.btnLeft:this.curShowLv>1&&this.curShowLv--,this.updateCurVip();break;case this.btnRight:this.curShowLv<Cfg.getVipMaxLv()&&this.curShowLv++,this.updateCurVip();break;case this.btnGet:e=Cfg.getConfig(VipConfig,this.curShowLv),BagSys.ins().checkBagFreeByItems(e.awards)&&VipSys.ins().getVipAwardState(this.curShowLv)==ActRewardState.CanGet&&VipSys.ins().sendGetVipAward(this.curShowLv);break;case this.labelTequan:openWin(VipTequanTipsWin,this.curShowLv)}},e.getSysId=function(){return 227},e.getTitle=function(){return"btz_zycs_vip"},e.getTabTitle=function(){return"bqz_zycs_vip"},e}(BasePanel);__reflect(VipPanel.prototype,"VipPanel"),window.VipPanel=VipPanel;var GuildGiftPanel=function(t){function e(){var e=t.call(this)||this;return e.skinName="GuildGiftPanelEUI",e.list.itemRenderer=GuildGiftItem,e.logingTxt.textFlow=addColorTF(Lang.guild_str9,1945142,!0),e}return __extends(e,t),e.prototype.open=function(){t.prototype.open.call(this),this.addClickE(this.rewardBtn,this.onClick),this.addClickE(this.logingTxt,this.onClick),this.addLsn(GuildActSys.ins().patchGuildGiftInfo,this.updatePanel),this.addLsn(RpSys.ins().patchRp,this.updateRp),GuildActSys.ins().sendGuildGiftInfo(),this.updateRp()},e.prototype.updateRp=function(){this.rewardBtn.redPoint.visible=RpSys.ins().getData(GuildMapWin,GuildActivityWin2,e)},e.prototype.updatePanel=function(){if(GuildActSys.ins().giftRechargelogs[0]){var t=GuildActSys.ins().giftRechargelogs[0],e=StrUtil.addColor(Lang.guild_str10.replace("$yb$",""+t.yb),1945142);if(this.rechargeLogTxt0.textFlow=addColorTF(t.getTimer()+"  "+t.roleName+"  "+e),GuildActSys.ins().giftRechargelogs[1]){var i=GuildActSys.ins().giftRechargelogs[1];e=StrUtil.addColor(Lang.guild_str10.replace("$yb$",""+i.yb),1945142),this.rechargeLogTxt1.textFlow=addColorTF(i.getTimer()+"  "+i.roleName+"  "+e)}else this.rechargeLogTxt1.text=""}else this.rechargeLogTxt0.text="",this.rechargeLogTxt1.text="";var n=StrUtil.addColor(""+GuildActSys.ins().giftLevel,14207310);this.giftLevelTxt.textFlow=addColorTF(""+Lang.guild_str11+n);var a=Cfg.getConfig(GuildGiftConfig,GuildActSys.ins().giftLevel);this.integralBar.labelFunction=this.progressLabelFunction,this.integralBar.maximum=a.exp,this.integralBar.value=GuildActSys.ins().giftIntegral;var o=GuildActSys.ins().giftIntegral<a.exp?""+a.exp:"MAX";this.integralBarTxt.text=GuildActSys.ins().giftIntegral+"/"+o;var s=GuildActSys.ins().giftRewardDatas;this.list.dataProvider=new eui.ArrayCollection(s)},e.prototype.progressLabelFunction=function(t,e){return Math.ceil(t/e*100)+"%"},e.prototype.onClick=function(t){switch(t.target){case this.rewardBtn:if(GuildActSys.ins().giftRewardDatas.length<=0)return void showtipsFail(Lang.guild_str12);GuildActSys.ins().sendGuildGiftReward();break;case this.logingTxt:openWin(GuildGiftRechargeLogWin)}},e.getTitle=function(){return"btz_zycs_hddt"},e.getSysId=function(){return 255},e.getTabTitle=function(){return"bqz_zycs_zmlw"},e.openCheck=function(){return GFunc.checkSysOpen(143)?GuildSys.ins().isAddGuild()?!0:(openWin(GuildNavWin),showTipsWarn(Lang.guild_str7),!1):void 0},e}(BasePanel);__reflect(GuildGiftPanel.prototype,"GuildGiftPanel"),window.GuildGiftPanel=GuildGiftPanel;var WCPanel=function(t){function e(){var e=t.call(this)||this;return e.redPointHead=[RoleWin,RolePanel,MoJieWin],e}return __extends(e,t),e.prototype.setTabItem=function(){this.tab.itemRenderer=BaseTabBtn3},e.prototype.setSkinName=function(){this.skinName="WCPanelEUI"},e.getTitle=function(){return"btz_zycs_msbd"},e.getTabTitle=function(){return"bqz_zycs_msbd"},e.getSysId=function(){return 357},e.panelNames=[WCLevelPanel,WCStagePanel],e}(BaseTabPanel);__reflect(WCPanel.prototype,"WCPanel"),window.WCPanel=WCPanel;var GuildSiegePanel=function(t){function e(){var e=t.call(this)||this;return e.skinName="GuildSiegePanelEUI",e.list.itemRenderer=ItemBaseRewardActivity,e.list.dataProvider=e.listData=new eui.ArrayCollection,e.imgHead.source=ResMgr.getMonsterHead("monhead10001"),e}return __extends(e,t),e.prototype.open=function(){t.prototype.open.call(this),this.addClickE(this.helpBtn,this.onClick),this.addClickE(this.btnEnter,this.onClick),this.addLsn(GuildActSys.ins().patchGuildSiegeInfo,this.updatePanel),this.addLsn(RpSys.ins().patchRp,this.updateRp),this.updateRp(),this.updatePanel()},e.prototype.updateRp=function(){this.btnEnter.redPoint.visible=RpSys.ins().getData(GuildMapWin,GuildActivityWin2,e)},e.prototype.updatePanel=function(){if(this.config=Cfg.getConfig(GuildSiegeCommonConfig),this.siegeModel=GuildActSys.ins().siegeModel,this.listData.source=this.config.showReward,this.siegeModel.isOpen){var t=Math.ceil(this.siegeModel.getTime()/1e3);Timer.ins()["do"](0,1e3,t,this.updateTime,this,TimerType.LAST);var e=""+Lang.fb_str204+this.siegeModel.fightcount+"/"+this.config.fightcount;this.countTxt.textFlow=addColorTF(e,5949490),this.btnEnter.visible=!0}else this.countTime.text="",this.countTxt.textFlow=addColorTF(Lang.act_str6,16711680),this.btnEnter.visible=!1},e.prototype.updateTime=function(){var t=Math.ceil(this.siegeModel.getTime()/1e3),e=StrUtil.addColor(this.siegeModel.getMonsCount()+"/"+this.config.mostcount,5949490);e+=StrUtil.addColor("（"+getFormatTime(t,"mm:ss")+Lang.fb_str10+"）",16751375),this.countTime.textFlow=addColorTF(""+Lang.guild_str119+e)},e.prototype.onClick=function(t){switch(t.target){case this.btnEnter:openWin(GuildMapWin),closeWin(GuildActivityWin2);break;case this.helpBtn:openWin(HelpWin,Cfg.getConfig(HelpInfoConfig,29).text)}},e.getTitle=function(){return"btz_zycs_hddt"},e.getSysId=function(){return 119},e.getTabTitle=function(){return"bqz_zycs_zmhd"},e.openCheck=function(){return GFunc.checkSysOpen(143)?GuildSys.ins().isAddGuild()?!0:(openWin(GuildNavWin),showTipsWarn(Lang.guild_str7),!1):void 0},e}(BasePanel);__reflect(GuildSiegePanel.prototype,"GuildSiegePanel"),window.GuildSiegePanel=GuildSiegePanel;var GuaJiPanel=function(t){function e(){var e=t.call(this)||this;return e.skinName="GuaJiPanelEUI",e.listRank.itemRenderer=GuaJiPanelItem,e.listRank.dataProvider=e.listRankData=new eui.ArrayCollection,e.listReward.itemRenderer=ItemBaseReward,e.listReward.dataProvider=e.listRewardData=new eui.ArrayCollection,e.list.itemRenderer=ItemBaseRewardName,e.list.dataProvider=e.listData=new eui.ArrayCollection,e}return __extends(e,t),e.prototype.open=function(){t.prototype.open.call(this),this.addClickE(this.btnKsgj,this.onClick),this.addClickE(this.imgTouch,this.onClick),this.addClickE(this.btnRank,this.onClick),this.addClickE(this.btnSend,this.onClick),this.addClickE(this.btnHelp,this.onClick),this.addLsn(FbSys.ins().patchGuaJiInfo,this.updatePanel),this.addLsn(FbSys.ins().patchGuaJiReward,this.updateMaxGuan),this.addLsn(FbSys.ins().patchGuaJiBoCount,this.updateBoCount),this.addLsn(RankSys.ins().patchRankData,this.uodateRank),this.addLsn(RpSys.ins().patchRp,this.updateRp),RankSys.ins().sendGetRankData(RankType.GuaJi),this.infoPanel()},e.prototype.close=function(){t.prototype.close.call(this)},e.prototype.updateRp=function(t){(!t||t.check(e))&&(this.btnSend.redPoint.visible=RpSys.ins().getData(GuanJiWin,e,"tz"),this.redPointReward.visible=RpSys.ins().getData(GuanJiWin,e,"reward"),this.btnKsgj.redPoint.visible=RpSys.ins().getData(GuanJiWin,e,GuaJiKuaiSuWin))},e.prototype.infoPanel=function(){this.dataModel=FbSys.ins().guajiData,this.updatePanel(),this.updateRp()},e.prototype.updatePanel=function(){this.bmpGuan.text=Lang.replaceEnum("第%s关",this.dataModel.challengeGuanId);var t;t=this.dataModel.isTongGuan()?this.dataModel.getConfig():Cfg.getGuajiFubenConfigById(this.dataModel.challengeGuanId+1),this.lbGold.text=GFunc.overLength(t.gold,t.gold<1e8?1:2)+"/"+Lang.common_xs,this.lbExp.text=GFunc.overLength(t.exp,t.exp<1e8?1:2)+"/"+Lang.common_xs,this.listData.source=t.rewards,this.updateMaxGuan(),this.updateBoCount()},e.prototype.updateMaxGuan=function(){this.guaJiMaxData=this.dataModel.getGuaJiMaxData(),this.imgTouch.visible=2==this.guaJiMaxData.state,this.listRewardData.source=this.guaJiMaxData.config.rewards,this.lbGuan.textFlow=addColorTF(this.guaJiMaxData.getDes())},e.prototype.updateBoCount=function(){var t=this.dataModel.getConfig().waves;this.dataModel.boCount<t?(this.barBo.maximum=t,this.barBo.value=this.dataModel.boCount,this.lbBoCount.text=Lang.gj_str4.replace("$count$",""+Math.max(t-this.dataModel.boCount,0)),this.barBo.visible=this.lbBoCount.visible=!0,this.btnSend.visible=!1):(this.barBo.visible=this.lbBoCount.visible=!1,this.btnSend.visible=!0)},e.prototype.uodateRank=function(){var t=RankSys.ins().getRankData(RankType.GuaJi);this.listRankData.source=t.getFullDatalist().slice(0,3)},e.prototype.onClick=function(t){switch(t.currentTarget){case this.btnKsgj:openWin(GuaJiKuaiSuWin);break;case this.imgTouch:FbSys.ins().sendGuaJiReward(this.guaJiMaxData.id);break;case this.btnRank:openWin(GuaJiRankWin);break;case this.btnSend:if(!GFunc.checkGotoFuben())return void closeWin(GuanJiWin);BagSys.ins().checkBagVolumn()&&(GFunc.isInCity()&&LogicSys.ins().sendEnterFb(FbSys.ins().guajiFbId),FbSys.ins().sendGuaJiChallenge(),closeWin(GuanJiWin));break;case this.btnHelp:if(!GFunc.checkGotoFuben())return;if(!this.dataModel.isChallenge()){var e=Math.max(this.dataModel.getConfig().waves-this.dataModel.boCount,0);return void showtipsFail(Lang.gj_str27.replace("$count$",""+e))}var i=this.dataModel.getHelpCD();if(i>0)return void showtipsFail(Lang.gj_str20.replace("$count$",""+i));openWin(GuaJiHelpWin)}},e.getTitle=function(){return"btz_zycs_cg"},e.getTabTitle=function(){return"bqz_zycs_cg"},e.getSysId=function(){return 249},e.prototype.getBtnSend=function(){return this.btnSend},e.prototype.getImgTouch=function(){return this.imgTouch},e}(BasePanel);__reflect(GuaJiPanel.prototype,"GuaJiPanel"),window.GuaJiPanel=GuaJiPanel;var XianluTaskPanel=function(t){function e(){var e=t.call(this)||this;return e.skinName="XianluTaskPanelEUI",e.itemList.itemRenderer=XianluTaskItem,e.itemList.dataProvider=e.listData=new eui.ArrayCollection,e}return __extends(e,t),e.prototype.open=function(){XianLuSys.ins().sendTaskInfo(),this.addLsn(XianLuSys.ins().updateXianyuanTaskInfo,this.updateView),this.addLsn(RpSys.ins().patchRp,this.updateRp)},e.prototype.updateView=function(){var t=XianLuSys.ins().dayTaskList;SortUtil.sortOn(t,["taskState","taskId"],[SortType.down,SortType.down]),this.listData.source=t},e.getSysId=function(){return 351},e.getTitle=function(){return"xianlu_title_xyrw"},e.getTabTitle=function(){return"每日任务"},e}(BasePanel);__reflect(XianluTaskPanel.prototype,"XianluTaskPanel"),window.XianluTaskPanel=XianluTaskPanel;var XianluTaskZSPanel=function(t){function e(){var e=t.call(this)||this;return e.skinName="XianluTaskPanelEUI",e.itemList.itemRenderer=XianluTaskZSItem,e.itemList.dataProvider=e.listData=new eui.ArrayCollection,e}return __extends(e,t),e.prototype.open=function(){XianLuSys.ins().sendTaskInfo(),this.addLsn(XianLuSys.ins().updateXianyuanTaskInfo,this.updateView),this.addLsn(RpSys.ins().patchRp,this.updateRp)},e.prototype.updateView=function(){var t=XianLuSys.ins().longTaskList;SortUtil.sortOn(t,["taskState","taskId"],[SortType.down,SortType.down]);var e=Cfg.getConfig(MateQuestConfig),i={};for(var n in e){var a=e[n],o=this.getTaskData(a.id);if(i[a.tasktype]){var s=i[a.tasktype],r=this.getTaskData(s.taskId);0==r.taskState&&(i[a.tasktype]=o)}else i[a.tasktype]=o}var u=[];for(var n in i)u.push(i[n]);SortUtil.sortOn(u,["taskState","taskId"],[SortType.down,SortType.down]),this.listData.source=u},e.prototype.getTaskData=function(t){for(var e=XianLuSys.ins().longTaskList,i=0,n=e;i<n.length;i++){var a=n[i];if(t==a.taskId)return a}return null},e.getSysId=function(){return 351},e.getTitle=function(){return"xianlu_title_xyrw"},e.getTabTitle=function(){return"终身任务"},e}(BasePanel);__reflect(XianluTaskZSPanel.prototype,"XianluTaskZSPanel"),window.XianluTaskZSPanel=XianluTaskZSPanel;var XianLuListPanel=function(t){function e(){var e=t.call(this)||this;return e.skinName="XianluListPanelEUI",e.tabType.dataProvider=new eui.ArrayCollection(["跨服仙缘","本服仙缘"]),e.labelList=[e.item0,e.item1,e.item2,e.item3,e.item4,e.item5,e.item6,e.item7],e.list.itemRenderer=XianluListPanelItem,e.list.dataProvider=e.listArr=new eui.ArrayCollection,e}return __extends(e,t),e.prototype.open=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];var i=XianLuSys.ins();this.addClickE(this,this.onClick),this.addItemTapE(this.tabType,this.onTab),this.addLsn(i.updateXianyuanList,this.updateList),this.addLsn(i.updateMyXianyuan,this.updateList),this.tabType.selectedIndex=i.tabIndex,this.requestXianyuanInfo(),this.updateLabelList()},e.prototype.updateLabelList=function(){for(var t=Cfg.getConfig(MateCommonConfig).labelList,e=this.labelList.length,i=0;e>i;i++)t[i]&&(this.labelList[i].data=t[i])},e.prototype.requestXianyuanInfo=function(){for(var t=[],e=0;e<this.labelList.length;e++)this.labelList[e].getSelect()&&t.push(e+1);var i=this.tabType.selectedIndex?1:2;XianLuSys.ins().sendXianyuanList(i,t)},e.prototype.updateList=function(){var t=XianLuSys.ins().xianYuanList;this.listArr.source=t},e.prototype.onTab=function(){XianLuSys.ins().tabIndex=this.tabType.selectedIndex,this.requestXianyuanInfo()},e.prototype.onClick=function(t){var e=t.target,i=Cfg.getConfig(MateCommonConfig);if(~this.labelList.indexOf(e))if(e.getSelect())e.setSelect(!1),this.requestXianyuanInfo();else{for(var n=0,a=0;a<this.labelList.length;a++)this.labelList[a].getSelect()&&n++;n>=i.labellimit[1]?showtipsFail("最多可选中"+i.labellimit[1]+"个标签"):(e.setSelect(),this.requestXianyuanInfo())}else switch(e){case this.btnClean:for(var a=0;a<this.labelList.length;a++)this.labelList[a].setSelect(!1);this.requestXianyuanInfo();break;case this.btnHelp:var o=Cfg.getConfig(MateCommonConfig).tips;openWin(HelpWin,o);break;case this.btnSearch:openWin(XianluSearchWin);break;case this.btnOK:openWin(XianluReleaseWin)}},e.getTitle=function(){return"xianlu_title_xyq"},e.getTabTitle=function(){return"bqz_zycs_xianluqiang"},e}(BasePanel);__reflect(XianLuListPanel.prototype,"XianLuListPanel"),window.XianLuListPanel=XianLuListPanel;var XingHunPanel=function(t){function e(){var e=t.call(this)||this;return e.imgStars=[],e.mcStars=[],e.flameMC=new MC,e.isAutoAdd=!1,e.isOkClick=!0,e.init(),e}return __extends(e,t),e.prototype.init=function(){this.skinName="XingHunPanelEUI",this.setSkinPart("comXingHunBarEff",new XingHunBarEff),this.cursor=new MC,this.cursor.visible=!1,this.imgStars=[this.imgStar0,this.imgStar1,this.imgStar2,this.imgStar3,this.imgStar4,this.imgStar5,this.imgStar6,this.imgStar7];for(var t=0;t<this.imgStars.length;t++)this.mcStars[t]=new MovieEui,this.mcStars[t].verticalCenter=this.mcStars[t].horizontalCenter=0,this.imgStars[t].parent.addChild(this.mcStars[t]);this.setRedPointHead(RoleWin),this.attrs.itemRenderer=ComAttrItem4,this.attrs.dataProvider=this.attrData=new eui.ArrayCollection},e.prototype.open=function(e){void 0===e&&(e=0),t.prototype.open.call(this,e),this.addClickE(this.comXingHunBarEff,this.onClick),this.addClickE(this.boostBtn,this.onClick),this.addClickE(this.labelStrong,this.onClick),this.addEvent(egret.TouchEvent.TOUCH_BEGIN,this.boostBtn,this.onAddBegin),this.addEvent(egret.TouchEvent.TOUCH_END,this,this.onAddend),this.addLsn(XingHunSys.ins().patchUpRank,this.updateKunDun),this.addLsn(XingHunSys.ins().patchUpLevel,this.updataData),this.addLsn(XingHunSys.ins().patchUpRank,this.updataData),this.addLsn(LogicSys.ins().patchCurrency,this.onStarsoulValueChange),this.addLsn(RpSys.ins().patchRp,this.updateRp),this.updatePanel(),this.updateKunDun(),this.updateRp()},e.prototype.updateRp=function(t){void 0===t&&(t=null),(!t||t.check(e))&&(this.boostBtn.redPoint.visible=RpSys.ins().getData(RoleWin,RolePanel,MoJieWin,e,"upLevel"),this.comXingHunBarEff.redPoint.visible=RpSys.ins().getData(RoleWin,RolePanel,MoJieWin,e,XingHunAttrWin))},e.prototype.onStarsoulValueChange=function(t){if(!t||t.type==CurType.gold){var e=Cfg.getConfig(StarsoulLevelConfig,this.xhData.level),i=Actor.ins().getCurrency(CurType.gold)>=e.count?5767068:16662592,n=StrUtil.addColor(Actor.ins().getCurrency(CurType.gold)+"/",i)+StrUtil.addColor(e.count+"",13171455);this.lbcount.textFlow=addColorTF(n)}},e.prototype.onClick=function(t){switch(t.currentTarget){case this.boostBtn:var e=Cfg.getConfig(StarsoulLevelConfig,this.xhData.level);GFunc.checkCurrency(CurType.gold,e.count)&&(this.isOkClick=!1,XingHunSys.ins().sendUpLevel());break;case this.labelStrong:openWin(MeNeedLevelWin,1);break;case this.comXingHunBarEff:openWin(XingHunAttrWin,XingHunSys.ins().getData(0))}},e.prototype.onAddBegin=function(){this.isAutoAdd=!0,Timer.ins()["do"](500,100,0,this.autoUp,this)},e.prototype.onAddend=function(){this.isAutoAdd=!1,Timer.ins().remove(this.autoUp,this)},e.prototype.autoUp=function(){var t=Cfg.getConfig(StarsoulLevelConfig,this.xhData.level);GFunc.checkCurrency(CurType.gold,t.count)?XingHunSys.ins().sendUpLevel():this.onAddend()},e.prototype.setOkClick=function(){this.isOkClick=!0},e.prototype.updataData=function(){this.setOkClick(),this.updatePanel(),this.updateKunDun(),this.PlayMC()},e.prototype.updatePanel=function(){this.xhData=XingHunSys.ins().getData(0);var t=Cfg.getConfig(StarsoulLevelConfig,this.xhData.level),e=this.xhData.level>=Cfg.getConfig(StarsoulCommonConfig).max_level;this.totalPower.text=(GFunc.getPower(t.attr)+this.xhData.getMoJiePlusPower()).toFixed(0);var i=this.xhData.level%9;this.lbstages.text=""+t.name;var n=this.xhData.isJinJie();this.onStarsoulValueChange(),this.attrData.source=this.xhData.getLevelAttrDatas();for(var a=0;a<this.imgStars.length;a++){var o=this.imgStars[a];i>a?(o.source="mj_zycs_hzl",this.mcStars[a].data=getEffName("xhkq")):(o.source="mj_zycs_hzh",this.mcStars[a].data="")}e||n||(this.mcStars[i].data=getEffName("xhdkq")),e?this.currentState="max":Actor.ins().level<t.needLv?(this.currentState="lock",this.labelLock.text=""+GFunc.GetLvStrByLv(t.needLv)+Lang.xh_str2):n?(this.lbcount.visible=0!=t.count,this.currentState="jinjie"):(this.lbcount.visible=0!=t.count,this.currentState="normal")},e.prototype.PlayMC=function(){this.xhData=XingHunSys.ins().getData(0);var t=this.xhData.level%9,e=this.mcStars[t-1];e&&e.addChild(MC.createCenterGruop(getEffName("xhsj"),1))},e.prototype.updateKunDun=function(){var t=XingHunSys.ins().getData(0),e=Cfg.getConfig(StarsoulLevelConfig,t.level).rank,i=t.rank-1,n=0;if(i>=0){var a=Cfg.getConfig(StarsoulStageConfig,i);n=Cfg.getConfig(StarsoulLevelConfig,a.needstar).rank}var o=Cfg.getConfig(StarsoulStageConfig,t.rank),s=t.isMaxRank()?e:Cfg.getConfig(StarsoulLevelConfig,o.needstar).rank;this.comXingHunBarEff.setData(e-n,s-n),this.lbJie.text="经脉大师"+t.rank+"阶"},e.getSysId=function(){return 207},e.prototype.getStarsoulUpBtn=function(){return this.boostBtn},e.getTitle=function(){return"btz_zycs_mj"},e.getTabTitle=function(){return"bqz_zycs_mj"},e}(BasePanel);__reflect(XingHunPanel.prototype,"XingHunPanel"),window.XingHunPanel=XingHunPanel;var XunBaoBaseData=function(){function t(){this.tabName="装备寻宝",this.type=0,this._showItemDatas=[],this.xunBaoJiLuOtherDatas=[],this.xunBaoJiLuMyDatas=[],this._xunBaoDuiHuanDatas=[],this.biDe=0,this.score=0,this.mianFei=1}return t.prototype.parser=function(t){var e=t.readByte(),i=t.readByte(),n=t.readShort(),a=t.readInt(),o=t.readInt();this.setScore(a),this.setRemind(o),this.setXingYun(n),this.setBiDe(e),this.setMianFei(i)},Object.defineProperty(t.prototype,"isMianFei",{get:function(){return 0==this.mianFei},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"isBiDe",{get:function(){return 0==this.biDe},enumerable:!0,configurable:!0}),t.prototype.setMianFei=function(t){this.mianFei=t},t.prototype.setBiDe=function(t){this.biDe=t},t.prototype.setXingYun=function(t){this.xingyun=t},t.prototype.setScore=function(t){this.score=t},t.prototype.setRemind=function(t){var e=this.xunBaoDuiHuanDatas.length,i=[];this.xunBaoDuiHuanDatas;i.length=e,MathUtil.writeIntToArray(t,i);for(var n=0;e>n;n++)this.xunBaoDuiHuanDatas[n].remind=i[n]},t.prototype.getConfig=function(){return null},Object.defineProperty(t.prototype,"maxXingYun",{get:function(){return Cfg.getConfig(XunbaoConstConfig).xunbaolucky[this.type-1]},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"gailvdesc",{get:function(){return Cfg.getConfig(XunbaoConstConfig).gailvdesc[this.type-1]},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"equipid",{get:function(){return Cfg.getConfig(XunbaoConstConfig).itemid[this.type-1]},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"wanfadesc",{get:function(){return Cfg.getConfig(XunbaoConstConfig).wanfadesc[this.type-1]},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"costitem",{get:function(){return Cfg.getConfig(XunbaoConstConfig).costcount},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"showItemDatas",{get:function(){return[]},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"xunBaoDuiHuanDatas",{get:function(){if(0==this._xunBaoDuiHuanDatas.length)for(var t=Cfg.getConfigs(XunbaoExchangeConfig,this.type,CondType.ALL),e=0;e<t.length;e++){var i=t[e],n=new XunBaoDuiHuanData;n.config=i,this._xunBaoDuiHuanDatas.push(n)}return this._xunBaoDuiHuanDatas},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"bideItemData",{get:function(){var t;return t},enumerable:!0,configurable:!0}),t.prototype.getPanelName=function(){return null},t}();__reflect(XunBaoBaseData.prototype,"XunBaoBaseData");var XunBaoBagPanel=function(t){function e(){var e=t.call(this)||this;return e.skinName="XunBaoBagPanelEUI",e.listItem.itemRenderer=XunBaoBagPanelItem,e.listItem.dataProvider=e.listItemArray=new eui.ArrayCollection,e.listItem.useVirtualLayout=!0,e}return __extends(e,t),e.prototype.open=function(){this.addClickE(this.buyQuChu,this.onClick),this.addClickE(this.buyAllQuChu,this.onClick),this.addItemTapE(this.listItem,this.onlistBagItemClick),this.addLsn(RpSys.ins().patchRp,this.updateRp),this.addLsn(XunBaoSys.ins().patchAddItem,this.updateData),this.addLsn(XunBaoSys.ins().patchDeleteItem,this.updateData),this.addLsn(XunBaoSys.ins().patchUpDateItem,this.updateData),this.updateData(),this.updateRp()},e.prototype.updateRp=function(){},e.prototype.updateData=function(){this.listItemArray.source=XunBaoSys.ins().xunBaoBagItemDatas},e.prototype.onlistBagItemClick=function(t){var e=t.itemRenderer;e.data;e.setSelect(!e.isSelect())},e.prototype.onClick=function(t){var e=0,i=0;switch(t.currentTarget){case this.buyQuChu:for(var n=[],a=this.listItem.numChildren,o=0;a>o;o++){var s=this.listItem.getChildAt(o),r=s.data;if(s.isSelect()){var u=Cfg.getItemCfg(r.id);u.type==ItemType.equip?(e++,n.push(r.handle)):u.type==ItemType.element?(i++,n.push(r.handle)):n.push(r.handle)}}if(!(n.length>0))return void showtipsFail("当前仓库无可取出道具");BagSys.ins().sendBagTo(BagSys.XUNBAO,n),i>FuwenSys.ins().getBagCount()&&showtipsFail("符文背包已满，请分解符文后再取出"),e>BagSys.ins().getSurplusCount()&&showtipsFail("装备背包已满，请熔炼装备后再取出");break;case this.buyAllQuChu:if(0==XunBaoSys.ins().xunBaoBagItemDatas.length)return void showtipsFail("当前仓库无可取出道具");for(var o=0;o<XunBaoSys.ins().xunBaoBagItemDatas.length;o++){var r=XunBaoSys.ins().xunBaoBagItemDatas[o],u=Cfg.getItemCfg(r.id);u.type==ItemType.equip?e++:u.type==ItemType.element&&i++}var h=!1,l=!1;if(i>FuwenSys.ins().getBagCount()&&(showtipsFail("符文背包已满，请分解符文后再取出"),h=!0),e>BagSys.ins().getSurplusCount()&&(showtipsFail("装备背包已满，请熔炼装备后再取出"),l=!0),h&&l)return;BagSys.ins().sendBagTo(BagSys.XUNBAO,[])}},e.prototype.getBuyAllQuChu=function(){return this.buyAllQuChu},e.getTitle=function(){return"btz_zycs_xb"},e.getTabTitle=function(){return"bqz_zycs_ck"},e.getSysId=function(){return 0},e}(BasePanel);__reflect(XunBaoBagPanel.prototype,"XunBaoBagPanel"),window.XunBaoBagPanel=XunBaoBagPanel;var ItemBaseReward=function(t){function e(){return t.call(this)||this}return __extends(e,t),e.prototype.dataChanged=function(){var t=this.data;if(!t)return void this.clear();var e=Cfg.getItemCfg(t.id);this.imgIcon.source=ResMgr.getItemIcon(e.getIcon(),IconType.IT_80x80),this.imgColor.source=ResMgr.getItemqualityResource(e.quality),this.setCount(t.count),this.setDiscountValue(t.discount),this.setDropType(t.dropType),this.setImgFmp(1==t.fmp),this.setJueBna(1==t.jueban),this.setStar(e.star),this.setRank(ItemType.isShowRank(e.type)?e.rank:0),this.setImgSR(e.srQuality),this.setAoyi(e.type==ItemType.Aoyi),this.setItemKuangEffect(!0,ResMgr.getEquipEffName(e.quality)),this.setDouble(1==t["double"]),""!=e.itemeff&&e.itemeff?this.setItemEffect(!0,""+ResMgr.getItemEff(e.type,e.itemeff)):this.setItemEffect(!1)},e}(ItemBase);__reflect(ItemBaseReward.prototype,"ItemBaseReward"),window.ItemBaseReward=ItemBaseReward;var GuildShopPanel=function(t){function e(){var e=t.call(this)||this;e.items=[],e.skinName="GuildShopPanelEUI",e.setSkinPart("item1",new ItemRewardGuildShop),e.setSkinPart("item2",new ItemRewardGuildShop),e.setSkinPart("item3",new ItemRewardGuildShop),e.setSkinPart("item4",new ItemRewardGuildShop),e.setSkinPart("item5",new ItemRewardGuildShop),e.setSkinPart("item6",new ItemRewardGuildShop),e.setSkinPart("item7",new ItemRewardGuildShop),e.setSkinPart("itemBox",new ItemRewardGuildShop),e.items=[e.item1,e.item2,e.item3,e.item4,e.item5,e.item6,e.item7],e.labelLog.textFlow=addColorTF(Lang.guild_str9,null,!0),e.labelUp.textFlow=addColorTF(Lang.guild_str1,null,!0);for(var i=e.items.length,n=0;i>n;n++)e.items[n].data=GFunc.creatRewardDataById(Cfg.getConfig(GuildStoreConfig).item[n]);return e.labelRecord1.text="",e.labelRecord2.text="",e}return __extends(e,t),e.prototype.open=function(){t.prototype.open.call(this),this.addClickE(this.labelUp,this.onClick),this.addClickE(this.btnOpen,this.onClick),this.addClickE(this.labelLog,this.onClick),this.addLsn(GuildShopSys.ins().patchGuildShopInfo,this.onUpdate),this.addLsn(GuildShopSys.ins().patchOpenBox,this.onOpenBox),this.addLsn(GuildShopSys.ins().patchGetBoxRecord,this.onBoxRecord),this.addLsn(GuildSys.ins().patchMyGuildInfo,this.onUpdateGX),this.addLsn(RpSys.ins().patchRp,this.updateRp),GuildShopSys.ins().sendGetInfo(),GuildShopSys.ins().sendGetBoxRecord(),this.onUpdate(),this.updateRp()
},e.prototype.updateRp=function(t){void 0===t&&(t=null),(!t||t.check(e))&&(this.btnOpen.redPoint.visible=RpSys.ins().getData(GuildMapWin,GuildShopWin,e))},e.prototype.onUpdate=function(){GuildShopSys.ins().isOpen()?(this.currentState="sOpen",this.onUpdateGX()):this.currentState="sUnopen"},e.prototype.onUpdateGX=function(){var t=Actor.ins().getCurrency(CurType.guildContrib)>=Cfg.getConfig(GuildStoreConfig).needContrib?13486270:15733780;this.labelGXHave.textFlow=addColorTF(Actor.ins().getCurrency(CurType.guildContrib),t),this.labelGXCost.text=Cfg.getConfig(GuildStoreConfig).needContrib.toString(),this.updateCount()},e.prototype.updateCount=function(){var t=Cfg.getGuildShopOpenBoxCount(GuildShopSys.ins().level),e=""+Lang.guild_str40+GuildShopSys.ins().useCount+"/"+t,i="";if(!GuildShopSys.ins().isMax()){var n=Cfg.getGuildShopOpenBoxCount(GuildShopSys.ins().level+1);i=StrUtil.addColor(Lang.guild_str41.replace("$lv$",""+(GuildShopSys.ins().level+1)).replace("$count$",""+(n-t)),15733780)}this.labelLeftCount.textFlow=addColorTF(e+i)},e.prototype.onBoxRecord=function(){var t=GuildShopSys.ins().records;if(t[0]){var e=StrUtil.addColor(t[0].roleName,15794098),i=StrUtil.addColor(Lang.guild_str42,12704255),n=GFunc.getItemName(t[0].itemId);this.labelRecord1.textFlow=addColorTF(e+" "+i+" "+n)}if(t[1]){var a=StrUtil.addColor(t[1].roleName,15794098),i=StrUtil.addColor(Lang.guild_str42,12704255),n=GFunc.getItemName(t[1].itemId);this.labelRecord2.textFlow=addColorTF(a+" "+i+" "+n)}},e.prototype.onOpenBox=function(){GuildShopSys.ins().hasBoxAward()&&(this.currentState="sOpenBox",this.itemBox.data=GuildShopSys.ins().boxs[0]),this.updateCount()},e.prototype.onClick=function(t){switch(t.currentTarget){case this.labelUp:closeWin(GuildShopWin),openWin(GuildWin,GuildWin.PAGE_MANAGER);break;case this.btnOpen:if(GuildShopSys.ins().useCount<=0)return void showtipsFail(Lang.guild_str43);if(Actor.ins().getCurrency(CurType.guildContrib)<Cfg.getConfig(GuildStoreConfig).needContrib)return void showtipsFail(Lang.guild_str44);if(!BagSys.ins().bagSatisfy())return;GuildShopSys.ins().sendOpenBox();break;case this.labelLog:openWin(GuildShopRecordWin)}},e.getTitle=function(){return"btz_zycs_zmsd"},e.getTabTitle=function(){return"bqz_zycs_zmsd"},e.getSysId=function(){return 285},e.openCheck=function(){return GFunc.checkSysOpen(285)?GuildSys.ins().isAddGuild()?!0:(openWin(GuildNavWin),showtipsFail(Lang.guild_str7),!1):void 0},e}(BasePanel);__reflect(GuildShopPanel.prototype,"GuildShopPanel"),window.GuildShopPanel=GuildShopPanel;var XunBaoDuiHuanPanel=function(t){function e(){var e=t.call(this)||this;return e.skinName="XunBaoDuiHuanPanelEUI",e.listItem.itemRenderer=XunBaoDuiHuanPanelItem,e.listItem.dataProvider=e.listItemArray=new eui.ArrayCollection,e.tab.itemRenderer=XunBaoTab,e}return __extends(e,t),e.prototype.setTabItem=function(){},e.prototype.open=function(){this.addItemTapE(this.tab,this.onTabClick),this.addClickE(this.listItem,this.onlistDuiHuantemClick),this.addLsn(RpSys.ins().patchRp,this.updateRp),this.addLsn(XunBaoSys.ins().patchXunBaoRemind,this.updateLlist),this.addLsn(XunBaoSys.ins().patchXunBaoDuiHuan,this.updateLlist),this.addLsn(XunBaoSys.ins().patchXunBaoDuiHuan,this.updateScore),this.tab.dataProvider=new eui.ArrayCollection(XunBaoSys.ins().xunbaoDatas),this.tab.validateNow();var t=0;this.tab.selectedIndex=t,this.updateRp(),this.setData(XunBaoSys.ins().xunbaoDatas[t])},e.prototype.updateRp=function(t){if(void 0===t&&(t=null),null==t||t.check(e)){for(var i=this.listItem.numElements,n=0;i>n;n++){var a=this.listItem.getElementAt(n);a&&a.updateRedPoint()}for(var o=this.tab.numElements,n=0;o>n;n++){var a=this.tab.getChildAt(n);if(a){var s=RpSys.ins().getData(ExtCom,XunBaoWin,e,XunBaoDuiHuanPanelItem,n+1);a.updateRedPoint(s)}}}},e.prototype.updateLlist=function(){for(var t=this.listItem.numElements,e=0;t>e;e++){var i=this.listItem.getElementAt(e);i&&i.updateItem()}},e.prototype.updateScore=function(){this.lbJiFen.text=this.curData.tabName+"积分:"+this.curData.score},e.prototype.setData=function(t){this.curData=t,this.listItemArray.source=t.xunBaoDuiHuanDatas,this.updateScore()},e.prototype.onTabClick=function(t){var e=t.item;this.setData(e)},e.prototype.onlistDuiHuantemClick=function(t){if("btnDuiHuan"==t.target.name){var e=t.target.parent.data,i=e.config;this.curData.score>=i.score?XunBaoSys.ins().sendXunBaoDuiHuan(i.type,i.index):showtipsFail("积分不足")}if("checkBoxTiXing"==t.target.name){var e=t.target.parent.data,i=e.config;XunBaoSys.ins().sendXunBaoRemind(i.type,i.index)}},e.getTitle=function(){return"btz_zycs_xb"},e.getTabTitle=function(){return"bqz_zycs_dh"},e.getSysId=function(){return 0},e}(BasePanel);__reflect(XunBaoDuiHuanPanel.prototype,"XunBaoDuiHuanPanel"),window.XunBaoDuiHuanPanel=XunBaoDuiHuanPanel;var GuildWarMainPanel=function(t){function e(){var e=t.call(this)||this;return e.helpId=43,e.skinName="GuildWarMainPanelEUI",e.rewardList.itemRenderer=ItemBaseReward,e.rewardList.dataProvider=new eui.ArrayCollection(Cfg.getConfig(GuildBattleConst).occupationAwardShow),e.entityRole=GFunc.createEntityUI(),e.mcGroup.addChild(e.entityRole),e.roleData=new EntityRoleData,e.entityDamon=new EntityDamon,e.entityDamon.x=100,e.mcGroup.addChild(e.entityDamon),e.mcTitle=new MC,e.addChild(e.mcTitle),e.mcTitle.playFile(getEffName("ch_zycs_18"),-1),e.mcTitle.x=360,e.mcTitle.y=343,e.rewardSee.textFlow=addColorTF(Lang.guild_str78,null,!0),e.LastSee.textFlow=addColorTF(Lang.guild_str79,null,!0),e.eff=new MC,e.eff.x=e.play.x+75,e.eff.y=e.play.y+30,e.eff.playFile(getEffName("button1"),-1),e.addChild(e.eff),e}return __extends(e,t),e.prototype.open=function(){t.prototype.open.call(this),this.model=GuildWarSys.ins().getModel(),GuildSys.ins().sendGuildMembers(),this.addClickE(this.rewardSee,this.onTap),this.addClickE(this.redBag,this.onTap),this.addClickE(this.play,this.onTap),this.addClickE(this.dailyAward,this.onTap),this.addClickE(this.help,this.onTap),this.addClickE(this.LastSee,this.onTap),this.addClickE(this.guildAwardBtn,this.onTap),this.addLsn(GuildWarSys.ins().patchGuildWarStarInfo,this.updateGuildWarStarInfo),this.addLsn(GuildWarSys.ins().patchWinGuildInfo,this.refushWinGuild),this.addLsn(GuildWarSys.ins().patchRedBagInfo,this.updateRedBagInfo),this.addLsn(GuildWarSys.ins().patchAssignsReward,this.updateAssignsReward),this.addLsn(RpSys.ins().patchRp,this.updateRp),this.updateGuildWarStarInfo(),this.refushWinGuild(),this.updateRedBagInfo(),this.updateAssignsReward(),this.updateRp()},e.prototype.updateRp=function(t){void 0===t&&(t=null),(!t||t.check(GuildWarMainWin))&&(this.guildAwardBtn.redPoint.visible=RpSys.ins().getData(GuildMapWin,GuildWarMainWin,"FenpeiAward"),this.redBag.redPoint.visible=RpSys.ins().getData(GuildMapWin,GuildWarMainWin,"RedBagAward"),this.dailyAward.redPoint.visible=RpSys.ins().getData(GuildMapWin,GuildWarMainWin,"DayAward"))},e.prototype.updateGuildWarStarInfo=function(){var t="";this.model.isWatStart?(this.eff.alpha=1,t=StrUtil.addColor(Lang.guild_str80,5949490)):(this.eff.alpha=0,t=StrUtil.addColor(""+this.model.setOpenDesc()+Lang.guild_str81,15733780)),this.openDesc.textFlow=addColorTF(t),this.LastSee.visible=this.model.openstate>0&&!this.model.isWatStart},e.prototype.updateRedBagInfo=function(){this.redBag.visible=this.model.isHaveRedBag(),this.redBagNum.text=this.model.remainRedNum+"/"+this.model.maxRedNum,this.redBagNum.visible=this.model.canRod},e.prototype.updateAssignsReward=function(){this.guildAwardBtn.visible=this.model.isguildAward()},e.prototype.refushWinGuild=function(){var t=this.model.winGuildInfo.guildId>0;if(this.entityRole.visible=t,this.none.visible=!t,this.entityDamon.visible=!1,t){var e=this.model.winGuildInfo;this.roleData.szId=e.clothID,this.roleData.sqId=e.wapenId,this.roleData.wingId=e.wingId,this.roleData.job=e.guildOwnJob,this.entityRole.setData(this.roleData,4)}},e.prototype.onTap=function(t){switch(t.currentTarget){case this.rewardSee:openWin(GuildWarRewardWin);break;case this.redBag:openWin(this.model.canRod||this.model.canSend?GuildWarRedBagWin:GuildWarRedBagDetailWin);break;case this.play:if(!GuildSys.ins().isAddGuild())return void showtipsFail(Lang.guild_str82);if(!this.model.isWatStart)return void showtipsFail(Lang.act_str6);GuildWarSys.ins().requestJoinAc();break;case this.dailyAward:openWin(GuildWarDailyAwardWin);break;case this.help:openWin(HelpWin,Cfg.getConfig(HelpInfoConfig,10).text);break;case this.LastSee:openWin(GuildWarLastRankWin);break;case this.guildAwardBtn:this.model.sendList=[],openWin(GuildWarSelectMemberAwardWin)}},e.openCheck=function(){return showtipsFail("敬请期待"),!1},e.getSysId=function(){return 144},e.getTitle=function(){return"btz_zycs_llcz"},e.getTabTitle=function(){return"bqz_zycs_llzb"},e}(BasePanel);__reflect(GuildWarMainPanel.prototype,"GuildWarMainPanel"),window.GuildWarMainPanel=GuildWarMainPanel;var XunBaoEquipPanelItem=function(t){function e(){var e=t.call(this)||this;return e.setSkinName(),e.setSkinPart("item",new ItemBase),e}return __extends(e,t),e.prototype.setSkinName=function(){this.skinName="XunBaoEquipPanelItemEUI"},e.prototype.dataChanged=function(){var t=this.data;this.item.data=t},e}(BaseItemRender);__reflect(XunBaoEquipPanelItem.prototype,"XunBaoEquipPanelItem"),window.XunBaoEquipPanelItem=XunBaoEquipPanelItem;var BaseDuoPanelWin=function(t){function e(){var e=t.call(this)||this;return e.panelTabIndex=-1,e.param=null,e}return __extends(e,t),e.prototype.open=function(e,i,n){void 0===n&&(n=null),this.panelTabIndex=i,this.param=n,t.prototype.open.call(this,e),this.panelTabIndex=-1,this.param=null},e.prototype.getParam=function(){return[this.panelTabIndex,this.param]},e}(BaseWinAutoTab);__reflect(BaseDuoPanelWin.prototype,"BaseDuoPanelWin");var HeChengMainPanel=function(t){function e(){var e=t.call(this)||this;return e.redPointHead=[BagWin],e}return __extends(e,t),e.prototype.setSkinName=function(){this.skinName="XunBaoMainPanelEUI"},e.prototype.setTabItem=function(){this.tab.itemRenderer=BaseTabBtn5},e.getTitle=function(){return"btz_zycs_hc"},e.getTabTitle=function(){return"bqz_zycs_hcfj"},e.panelNames=[HeChengPanel,FenJiePanel],e}(BaseTabPanel);__reflect(HeChengMainPanel.prototype,"HeChengMainPanel"),window.HeChengMainPanel=HeChengMainPanel;var XunBaoMainPanel=function(t){function e(){var e=t.call(this)||this;return e.redPointHead=[ExtCom,XunBaoWin],e}return __extends(e,t),e.prototype.setSkinName=function(){this.skinName="XunBaoMainPanelEUI"},e.prototype.setTabItem=function(){this.tab.itemRenderer=BaseTabBtn5},e.prototype.open=function(e){void 0===e&&(e=0),t.prototype.open.call(this,e)},e.getTitle=function(){return"btz_zycs_xb"},e.getTabTitle=function(){return"bqz_zycs_xb"},e.prototype.getTabBtn=function(t){return this.tab.validateNow(),this.tab.getElementAt(t)},e.prototype.getXunBaoEquipPanel_MianFeiXunBaoBtn=function(){return this.getPanel(XunBaoEquipPanel).getMianFeiXunBaoBtn()},e.prototype.getXunBaoFaBaoPanel_MianFeiXunBaoBtn=function(){return this.getPanel(XunBaoFaBaoPanel).getMianFeiXunBaoBtn()},e.panelNames=[XunBaoEquipPanel,XunBaoFaBaoPanel,XunBaoFuWenPanel,XunBaoDianFengPanel,XunBaoZhiZunPanel],e}(BaseTabPanel);__reflect(XunBaoMainPanel.prototype,"XunBaoMainPanel"),window.XunBaoMainPanel=XunBaoMainPanel;var ChatDataShenDian=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return __extends(e,t),e.prototype.parserMessage=function(t){this.roleId=t.readUnsignedInt(),this.roleName=t.readString(),this.fbId=t.readInt()},e.prototype.getHtmlTitle=function(){return addColorTF(Lang.chat_str1,2948987)},e.prototype.getHtmlContent=function(){var t=this.getVipContent();return t+=this.getRoleName(),t+=this.getContent(),addColorTF(t)},e.prototype.getRoleName=function(){return StrUtil.addColor(this.roleName,16737792)},e.prototype.getSexIcon=function(){return""},e.prototype.getContent=function(){var t=this.getRoleName()+StrUtil.addColor(this.content,16777215);return t},e.prototype.isRole=function(){return!1},e}(ChatDataGuild);__reflect(ChatDataShenDian.prototype,"ChatDataShenDian");var EquipTipsOtherItemAttr=function(t){function e(){var e=t.call(this)||this;return e.skinName="EquipTipsJiChuItemAttrEUI",e}return __extends(e,t),e.prototype.dataChanged=function(){var t=this.data;this.lbAttr.textFlow=addColorTF(GFunc.getEquipAttrColor(t.attr,this.lbAttr.textColor))},e}(BaseItemRender);__reflect(EquipTipsOtherItemAttr.prototype,"EquipTipsOtherItemAttr"),window.EquipTipsOtherItemAttr=EquipTipsOtherItemAttr;var YZZHMainPanel=function(t){function e(){var e=t.call(this)||this;return e.redPointHead=[YZZHWin],e.helpId1=105,e}return __extends(e,t),e.prototype.setSkinName=function(){this.skinName="YZZHMainPanelEUI"},e.prototype.setTabItem=function(){this.tab.itemRenderer=BaseTabBtn3},e.prototype.open=function(e){void 0===e&&(e=0),t.prototype.open.call(this,e),this.addClickE(this,this.onClick)},e.getTitle=function(){return"btz_zycs_yzsh"},e.getTabTitle=function(){return"bqz_zycs_yzsh"},e.prototype.getJinZuanBagPanelTab=function(){return this.getTab(YZZHPanel)},e.prototype.onClick=function(t){switch(t.target){case this.helpBtn:openWin(HelpWin,Cfg.getConfig(HelpInfoConfig,this.helpId1).text)}},e.panelNames=[YZZHPanel,YZZHTaskPanel],e}(BaseTabPanel);__reflect(YZZHMainPanel.prototype,"YZZHMainPanel"),window.YZZHMainPanel=YZZHMainPanel;var JinZuanBagPanel=function(t){function e(){var e=t.call(this)||this;return e.skinName="JinZuanBagPanelEUI",e.listItem.itemRenderer=JinZuanBagPanelItem,e.listItem.useVirtualLayout=!0,e}return __extends(e,t),e.prototype.open=function(){this.addClickE(this.buyQuChu,this.onClick),this.addClickE(this.buyAllQuChu,this.onClick),this.addItemTapE(this.listItem,this.onlistBagItemClick),this.addLsn(RpSys.ins().patchRp,this.updateRp),this.addLsn(RechargeActSys.ins().patchAddItem,this.updateData),this.addLsn(RechargeActSys.ins().patchDeleteItem,this.updateData),this.addLsn(RechargeActSys.ins().patchUpDateItem,this.updateData),this.listItem.dataProvider=this.listItemArray=new eui.ArrayCollection,this.updateData(),this.updateRp()},e.prototype.updateRp=function(){},e.prototype.updateData=function(){this.listItem.dataProvider=new eui.ArrayCollection(RechargeActSys.ins().jinZuanBagItemDatas)},e.prototype.onlistBagItemClick=function(t){var e=t.itemRenderer;e.data;e.setSelect(!e.isSelect())},e.prototype.onClick=function(t){switch(t.currentTarget){case this.buyQuChu:for(var e=[],i=this.listItem.numChildren,n=0;i>n;n++){var a=this.listItem.getChildAt(n),o=a.data;if(a.isSelect()){Cfg.getItemCfg(o.id);e.push(o.handle)}}if(!(e.length>0))return void showtipsFail("当前仓库无可取出道具");BagSys.ins().sendBagTo(BagSys.JINZUAN,e);break;case this.buyAllQuChu:BagSys.ins().sendBagTo(BagSys.JINZUAN,[])}},e.getTitle=function(){return"btz_zycs_jz"},e.getTabTitle=function(){return"仓库"},e.getSysId=function(){return 2},e}(BasePanel);__reflect(JinZuanBagPanel.prototype,"JinZuanBagPanel"),window.JinZuanBagPanel=JinZuanBagPanel;var JinZuanCJPanel=function(t){function e(){var e=t.call(this)||this;return e.items1=[],e.items2=[],e.setSkinName(),e.setSkinPart("zjBarEffEUI",new JinZuanBarEff),e.setSkinPart("item0",new JinZuanCJPanelItem),e.setSkinPart("item1",new JinZuanCJPanelItem),e.setSkinPart("item2",new JinZuanCJPanelItem),e.setSkinPart("item3",new JinZuanCJPanelItem),e.setSkinPart("item4",new JinZuanCJPanelItem),e.setSkinPart("item5",new JinZuanCJPanelItem),e.setSkinPart("item6",new JinZuanCJPanelItem),e.setSkinPart("item7",new JinZuanCJPanelItem),e.setSkinPart("item8",new JinZuanCJPanelItem),e.setSkinPart("item9",new JinZuanCJPanelZHuFuItem),e.setSkinPart("item10",new JinZuanCJPanelZHuFuItem),e.setSkinPart("item11",new JinZuanCJPanelZHuFuItem),e.setSkinPart("item12",new JinZuanCJPanelZHuFuItem),e.setSkinPart("item13",new JinZuanCJPanelZHuFuItem),e.listJiLuMy.itemRenderer=XunBaoJiLuItem,e.listJiLuMy.dataProvider=e.listJiLuMyArray=new eui.ArrayCollection,e.listJiLu.dataProvider=new eui.ArrayCollection([{labelDisplay:"全服记录"},{labelDisplay:"个人记录"}]),e.lbGaiLv.textFlow=addColorTF(StrUtil.addUnderLine(e.lbGaiLv.text)),e.lbReward.textFlow=addColorTF(StrUtil.addUnderLine(e.lbReward.text)),e.comGunDongOtherJiLu=new ComGunDongBase,e.comGunDongOtherJiLu.width=e.groupJiLu.width,e.comGunDongOtherJiLu.height=e.groupJiLu.height,e.groupJiLu.addChild(e.comGunDongOtherJiLu),e.items1=[e.item0,e.item1,e.item2,e.item3,e.item4,e.item5,e.item6,e.item7,e.item8],e.items2=[e.item9,e.item10,e.item11,e.item12,e.item13],e.mcCircleMask=new MaskSector,e.mcCircleMask.setParam(202,-180,0),e.groupMC.addChild(e.mcCircleMask),e.progressMC=new MC,e.progressMC.y=-100,e.progressMC.mask=e.mcCircleMask,e.progressMC.playFile(getEffName("jzjdt"),-1),e.groupMC.addChild(e.progressMC),e}return __extends(e,t),e.prototype.setSkinName=function(){this.skinName="JinZuanCJPanelEUI"},e.prototype.open=function(){this.addItemTapE(this.listJiLu,this.onListJiLuClick),this.addClickE(this.lbReward,this.onClick),this.addClickE(this.lbGaiLv,this.onClick),this.addClickE(this.buyXunBao1,this.onClick),this.addClickE(this.buyXunBao10,this.onClick),this.addClickE(this.buyXunBao50,this.onClick),this.addClickE(this.item9,this.onClick),this.addClickE(this.item10,this.onClick),this.addClickE(this.item11,this.onClick),this.addClickE(this.item12,this.onClick),this.addClickE(this.item13,this.onClick),this.addLsn(RpSys.ins().patchRp,this.updateRp),this.addLsn(RechargeActSys.ins().patchJinZuanOtherJiLuUpdate,this.updateOtherJiLu),this.addLsn(RechargeActSys.ins().patchJinZuanJiLu,this.updateJiLu),this.addLsn(RechargeActSys.ins().patchJinZuanChouJian,this.updateChouJiang),this.addLsn(RechargeActSys.ins().patchJinZuanZhuFuReward,this.updateZhuFuItem),this.addLsn(LogicSys.ins().patchCurrency,this.updataItem),this.updatePanel(),this.updateRp(),this.onListJiLuClick(),this.listJiLu.selectedIndex=0,this.comGunDongOtherJiLu.iniData(this.data.xunBaoJiLuOtherDatas,"JinZuanJiLuItem",6,ArrowDir.dirV),this.comGunDongOtherJiLu.open()},e.prototype.close=function(){for(var e=[],i=0;i<arguments.length;i++)e[i]=arguments[i];t.prototype.close.call(this),this.comGunDongOtherJiLu.close()},e.prototype.updateRp=function(t){void 0===t&&(t=null),t&&t.check(e)&&this.updateZhuFuItem()},e.prototype.updateChouJiang=function(){this.updateBtn(),this.updateZhuFu(),this.updateZhuFuItem()},e.prototype.updatePanel=function(){this.updateConsume(),this.updateJiLu(),this.updateBtn(),this.updateZhuFu(),this.updateZhuFuRewardEff();for(var t=this.data.showItemDatas,e=0;e<t.length;e++){var i=this.items1[e],n=t[e];i&&n&&(i.data=n)}for(var a=this.data.jinZuanZhuFuDatas,e=0;e<a.length;e++){var i=this.items2[e],n=a[e];i&&n&&(i.data=n)}},e.prototype.updateZhuFuRewardEff=function(){this.mcCircleMask.setValue(this.data.getRecelveCount(),this.data.jinZuanZhuFuDatas.length-1)},e.prototype.updateZhuFuItem=function(){for(var t=this.data.jinZuanZhuFuDatas,e=0;e<t.length;e++){var i=this.items2[e],n=t[e];i&&n&&(i.data=n)}this.updateZhuFu(),this.updateZhuFuRewardEff()},e.prototype.updateZhuFu=function(){this.zjBarEffEUI.setData(this.data.zhufuValue,Cfg.getConfig(JinzhuanZhufuConfig,this.data.zhufuType,this.data.getRecelveCount1()).score)},e.prototype.updataItem=function(t){t.type==CurType.JinZuan&&this.updateConsume()},e.prototype.updateConsume=function(){this.updateSingleConsume(0,this.lbXunBao1),this.updateSingleConsume(1,this.lbXunBao10),this.updateSingleConsume(2,this.lbXunBao50)},e.prototype.updateSingleConsume=function(t,e){var i=CurType.JinZuan,n=GFunc.getItemCount(i),a=this.jinzhuanConstConfig.drawcost[t];e.text=n+"/"+a},e.prototype.updateBtn=function(){this.buyXunBao1.labelDisplay.text="抽奖"+this.jinzhuanConstConfig.drawtimes[0]+"次",this.buyXunBao10.labelDisplay.text="抽奖"+this.jinzhuanConstConfig.drawtimes[1]+"次",this.buyXunBao50.labelDisplay.text="抽奖"+this.jinzhuanConstConfig.drawtimes[2]+"次"},e.prototype.updateJiLu=function(){this.updateMyJiLu()},e.prototype.updateMyJiLu=function(){this.listJiLuMyArray.source=this.data.xunBaoJiLuMyDatas},e.prototype.updateOtherJiLu=function(t){this.comGunDongOtherJiLu.addData([t])},e.prototype.onListJiLuClick=function(t){void 0===t&&(t=null);var e=t?t.itemIndex:0,i=1==e;this.comGunDongOtherJiLu.visible=!i,this.scrollerJiLuMy.visible=i,RechargeActSys.ins().sendJinZuanJiLu(i?0:1)},e.prototype.onClick=function(t){switch(t.currentTarget){case this.item9:case this.item10:case this.item11:case this.item12:case this.item13:var e=t.currentTarget.data;e.canGet&&RechargeActSys.ins().sendJinZuanZhuFuReward(e.index);break;case this.lbReward:openWin(JinZuanRewardViewWin);break;case this.lbGaiLv:for(var i=this.jinzhuanConstConfig.gailvdesc,n=Cfg.getConfigs(JinzhuanXunbaoConfig),a=0;a<n.length;a++){var o=n[a],s=n[a].item,r=Cfg.getItemCfg(s.id),u=o.probability1,h=addColor(r.getName()+"  "+Math.ceil(u/100)+"%",GConst.PZColor[r.quality]);i+="\n"+h}openWin(XunBaoGaiLvTipsWin,i);break;case this.buyXunBao1:this.sendChouJiang(0);break;case this.buyXunBao10:this.sendChouJiang(1);break;case this.buyXunBao50:this.sendChouJiang(2)}},e.prototype.sendChouJiang=function(t){var e=this.jinzhuanConstConfig.drawcost[t];GFunc.checkCurrency(CurType.JinZuan,e)&&RechargeActSys.ins().sendJinZuanChouJian(t+1)},Object.defineProperty(e.prototype,"jinzhuanConstConfig",{get:function(){return Cfg.getConfig(JinzhuanConstConfig)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"data",{get:function(){return RechargeActSys.ins().jinZuanData},enumerable:!0,configurable:!0}),e.getTitle=function(){return"btz_zycs_jz"},e.getTabTitle=function(){return"仙券抽奖"},e.getSysId=function(){return 2},e}(BasePanel);__reflect(JinZuanCJPanel.prototype,"JinZuanCJPanel"),window.JinZuanCJPanel=JinZuanCJPanel;var ChengHaoPanel=function(t){function e(){var e=t.call(this)||this;return e.skinName="ChengHaoPanelEUI",e.attrsTotal.dataProvider=e.attrsTotalDatas=new eui.ArrayCollection([]),e.list.itemRenderer=ChengHaoItem,e.list.dataProvider=e.arrDatas=new eui.ArrayCollection([]),e.setRedPointHead(ForgeWin),e}return __extends(e,t),e.prototype.open=function(e){void 0===e&&(e=0),e=0,t.prototype.open.call(this,e),this.addLsn(ChengHaoSys.ins().patchListUpdate,this.updateList),this.addLsn(ChengHaoSys.ins().patchUpdateShow,this.updateList),0==ChengHaoSys.ins().infoList.length?ChengHaoSys.ins().sendGetList():this.updateList()},e.prototype.updateList=function(){this.attrsTotalDatas.replaceAll(StrUtil.strsToTF(AttrData.parse(ChengHaoSys.ins().getTotalAttrs()))),this.arrDatas.replaceAll(ChengHaoSys.ins().infoList.concat())},e.prototype.updateTime=function(){for(var t=this.list.numChildren-1;t>=0;t--){var e=this.list.getElementAt(t);e&&e.updateTime()}},e.getTitle=function(){return"btz_zycs_ch"},e.getTabTitle=function(){return"bqz_zycs_ch"},e}(BasePanel);__reflect(ChengHaoPanel.prototype,"ChengHaoPanel"),window.ChengHaoPanel=ChengHaoPanel;var HuoDongPanel=function(t){function e(){var e=t.call(this)||this;return e.skinName="HuoDongPanelEUI",e.list.itemRenderer=HuoDongPanelItem,e.list.dataProvider=e.listArr=new eui.ArrayCollection,e}return __extends(e,t),e.prototype.open=function(){this.updateView()},e.prototype.updateView=function(){for(var t=FbSys.ins().getHuoDongList(),e=[],i=0,n=t;i<n.length;i++){var a=n[i];e.push(a)}e.sort(this.sort),this.listArr.source=e},e.prototype.sort=function(t,e){return t.isOpen()?-1:e.isOpen()?1:t.isGoTo()&&e.isGoTo()?t.nextActTime()-e.nextActTime():t.isEnd()&&!e.isEnd()?1:!t.isEnd()&&e.isEnd()?-1:t.id-e.id},e.getTitle=function(){return"btz_zycs_hdlb"},e.getTabTitle=function(){return"bqz_zycs_hdlb"},e}(BasePanel);__reflect(HuoDongPanel.prototype,"HuoDongPanel"),window.HuoDongPanel=HuoDongPanel;var ZhuZaiMainPanel=function(t){function e(){var e=t.call(this)||this;return e.redPointHead=[BossWin],e}return __extends(e,t),e.prototype.open=function(e){void 0===e&&(e=-1);var i=this.getAotuIndex(e);t.prototype.open.call(this,i),this.observeTabRedPoint()},e.prototype.setTabItem=function(){this.tab.itemRenderer=BaseTabBtn4},e.getSysId=function(){return 342},e.prototype.setSkinName=function(){this.skinName="FuBenPanelEUI"},e.getTitle=function(){return"btz_zycs_sjbs"},e.getTabTitle=function(){return"fb_zycs_shbs"},e.panelNames=[ZhuZaiBossPanel,KlmPanel,MonsterSiegeMainPanel],e}(BaseTabPanel);__reflect(ZhuZaiMainPanel.prototype,"ZhuZaiMainPanel"),window.ZhuZaiMainPanel=ZhuZaiMainPanel;var GuildMemberPanel=function(t){function e(){var e=t.call(this)||this;return e.initUI(),e}return __extends(e,t),e.prototype.initUI=function(){this.skinName="GuildMemberPanelEUI",this.list.itemRenderer=GuildMemberRender,this.arrayCollecttion=new eui.ArrayCollection,this.list.dataProvider=this.arrayCollecttion},e.prototype.open=function(){t.prototype.open.call(this),this.addClickE(this.btnQuit,this.onClick),this.addClickE(this.list,this.onListTouch),this.addLsn(GuildSys.ins().patchGuildMembers,this.updateMemberList),this.addLsn(GuildSys.ins().patchMyGuildInfo,this.updateMyInfo),this.addLsn(GuildSys.ins().patchChangeOffice,this.onChangeOffice),this.updateMyInfo(),this.updateMemberList()},e.prototype.onListTouch=function(t){if(t.target instanceof eui.Button){var e=t.target.parent;e.onClick(t.target)}},e.prototype.onChangeOffice=function(t){for(var e=0;e<this.list.numElements;e++){var i=this.list.getElementAt(e);if(i){var n=i.data;t.userId==n.userId&&(i.data=n)}}},e.prototype.updateMemberList=function(){this.arrayCollecttion.replaceAll(GuildSys.ins().getGuildMembers(1))},e.prototype.onClick=function(t){switch(t.target){case this.btnQuit:if(GuildWarSys.ins().getModel().isWatStart)return void showtipsFail(Lang.guild_str38);openWin(WarnWin,Lang.guild_str39,function(){GuildSys.ins().sendQuitGuild()},this)}},e.prototype.updateMyInfo=function(){this.labelOffice.text=GuildSys.ins().getOfficeName(),this.labelGongxian.text=GuildSys.ins().myTotalCon.toString()},e.getTitle=function(){return"btz_zycs_zmgl"},e.getSysId=function(){return 140},e.openCheck=function(){return GFunc.checkSysOpen(140)?GuildSys.ins().isAddGuild()?!0:(openWin(GuildNavWin),showtipsFail(Lang.guild_str7),!1):void 0},e.getTabTitle=function(){return"bqz_zycs_cy"},e}(BasePanel);__reflect(GuildMemberPanel.prototype,"GuildMemberPanel"),window.GuildMemberPanel=GuildMemberPanel;var FuwenEquipListPanel=function(t){function e(){var e=t.call(this)||this;return e.skinName="FuwenEquipListPanelEUI",e.initUI(),e.addBg(),e.addClickE(e.closeBtn,function(){return closeWin(e)}),e}return __extends(e,t),e.prototype.initUI=function(){this.list.itemRenderer=FuwenEquipItem,this.qualitys=[],this.checkBoxs=[this.checkBox0,this.checkBox1];for(var t=this.checkBoxs.length,e=0;t>e;e++)this.checkBoxs[e].labelDisplay.textColor=GConst.PZColor[e+1],this.checkBoxs[e].labelDisplay.size=24},e.prototype.open=function(i){void 0===i&&(i=null),t.prototype.open.call(this),e.posElementData=i,this.setListData(),this.addChangeE(this.checkBox0,this.onCheckBox),this.addChangeE(this.checkBox1,this.onCheckBox),this.addLsn(FuwenSys.ins().patchUpdateEquip,this.setListData)},e.prototype.onCheckBox=function(t){this.qualitys=[];for(var e=this.checkBoxs.length,i=0;e>i;i++)this.checkBoxs[i].selected&&this.qualitys.push(i+1);this.setListData()},e.prototype.setListData=function(){var t=[];t=FuwenSys.ins().sortBag().concat();for(var i=0,n=this.qualitys;i<n.length;i++)for(var a=n[i],o=t.length,s=0;o>s;)t[s].baseConfig.quality==a&&(t.splice(s,1),s--,o--),s++;e.posElementData.isNullEquip()||t.unshift(e.posElementData),this.list.dataProvider=new eui.ArrayCollection(t)},e.prototype.getPeiDaiBtn=function(){return this.list.validateNow(),this.list.getElementAt(0).getPeiDaiBtn()},e.getSysId=function(){return 209},e.getTitle=function(){return"btz_zycs_fwpd"},e.getTabTitle=function(){return"bqz_zycs_fwpd"},e}(BaseWinSingle);__reflect(FuwenEquipListPanel.prototype,"FuwenEquipListPanel"),window.FuwenEquipListPanel=FuwenEquipListPanel;var Lang=function(){function t(){}return t.replaceEnum=function(t){for(var e=[],i=1;i<arguments.length;i++)e[i-1]=arguments[i];for(var n=0,a=e;n<a.length;n++){var o=a[n];t=t.replace("%s",o)}return t},t.common_quality=["白品","绿品","蓝品","紫品","橙品","红品"],t.common_xiyoudu=["普通","稀有","史诗","传说","无双"],t.common_jobName=["剑","剑","魔","弓"],t.common_jobName1=["通用","剑士","魔法师","弓箭手","魔剑士","圣导师","召唤师"],t.common_equipName=["武器","头盔","战甲","护手","护腿","靴","项链","护符","仙戒","魔戒","仙灵饰品"],t.common_zuJiName=["星魂","神纹","晶石","神瞳","沙漏"],t.common_attrTypeName=["普通","追加","卓越","幸运","史诗"],t.common_number=["零","一","二","三","四","五","六","七","八","九"],t.common_sign=["","十","百","千"],t.common_sign2=["","万","亿","万亿"],t.common_damageTypeName=["不显示","命中","无视一击","MISS","会心一击","卓越一击","暴击一击","反伤"],t.common_shenmoequipName=["武器","头盔","战甲","护肩","护手","腰带","护腿","战靴","项链","戒指"],t.common_ShenDianZuDui=["","无法加入自己的队伍","队伍已解散","副本已开启，无法加入队伍",""],t.common_nian="年",t.common_yue="月",t.common_tian="天",t.common_ri="日",t.common_shi="时",t.common_xs="小时",t.common_fen="分",t.common_fen1="份",t.common_miao="秒",t.common_zhou="周",t.common_power="战斗力",t.common_ci="次",t.common_dian="点",t.common_chang="场",t.common_zs="仙玉",t.common_jb="元宝",t.common_wu="无",t.common_ji="级",t.common_jie="阶",t.common_xing="星",t.common_jian="件",t.common_qian="前",t.common_hao="号",t.common_ren="人",t.common_week=["日","一","二","三","四","五","六"],t.common_zhui="追",t.common_zhuan="转",t.common_yuan="元",t.common_bei="倍",t.common_fz="分钟",t.common_ceng="层",t.common_se="色",t.common_di="第",t.common_huan="环",t.common_guan="关",t.common_yi="亿",t.common_wan="万",t.common_ge="个",t.common_zhe="折",t.common_man="满",t.common_str1="时装",t.common_str2="卓越的",t.common_str3="我的伤害",t.common_str5="名",t.common_str6="已达成",t.common_str7="已充值",t.common_str8="剩余",t.common_str9="背包已满，请清理背包",t.common_str10="SVIP等级不足",t.common_str11="剩余时间：",t.common_str12="仙玉不足",t.common_str13="【领奖】",t.common_str14="仙玉不足，是否充值？",t.common_str15="活动结束",t.common_str17="未上榜",t.common_str19="未达到要求",t.common_str20="没有获取途径",t.common_str22="装备评分",t.common_str23="激活",t.common_str24="未激活",t.common_str25="评分",t.common_str28="已激活",t.common_str29="战斗力：",t.common_str30="等级",t.common_str37="升级",t.common_str38="已满级",t.common_str40="（"+t.common_str23+"）",t.common_str43="开启",t.common_str45="挑战",t.common_str47="领取奖励($second$s)",t.common_str48="确定($second$s)",t.common_str49="失去",t.common_str50="次数不足！",t.common_str51="当前战斗力：",t.common_str52="剩余次数：",t.common_str53="历史最高：",t.common_str56="已刷新",t.common_str57="等级不足",t.common_str58="已领取",t.common_str60="已满",t.common_str61="免费提升",t.common_str64="暂无",t.common_str66=t.common_str25+"：",t.common_str70="领取",t.common_str71="道具不足",t.common_str72="在线",t.common_str76="（完成）",t.common_str77="（未领取）",t.common_str78="（已读）",t.common_str79="（未读）",t.common_str81="领取奖励",t.common_str83="重置",t.common_str84="等级：",t.common_str85="剩余时间",t.common_str87="永久",t.common_str92="不足！",t.common_str93="当前是合成数量最小值",t.common_str94="当前是合成数量最大值",t.common_str95="奖励详情",t.common_str96="次",t.common_str98="角色",t.common_str99="$count$秒后自动进入游戏",t.common_str100="进入游戏.....",t.common_str101="有效时间：",t.common_str102="我的等级",t.common_str103="世界等级",t.common_str104="世界等级为$level$\n等级低于世界等级的玩家\n可额外获得经验加成",t.common_str107="已达到",t.common_str109="装备($second$s)",t.common_str110="使用",t.common_str111="装备",t.common_str113="战力",t.common_str116="总加成",t.common_str117="获得，激活后战力",t.common_str118="开启($second$s)",t.common_str119="转生达到$num$或以上可进入圣殿",t.common_str120="使用($second$s)",t.common_str121="扫荡",t.common_str122="VIP$lv$解锁SVIP",t.common_str124="当前是分解数量最小值",t.common_str123="当前是分解数量最大值",t.common_str126="奖励",t.common_str127=["此功能跨服内不能操作！","返回本服后才能进行充值！"],t.common_str128="仙盟",t.common_str129="被",t.common_str130="击败了",t.common_str131="未加入仙盟",t.common_str132="个人排行",t.common_str133="退出",t.common_str134="双倍领取",t.common_str135="关注成功",t.common_str136="分享成功",t.common_str137="不能挑战",t.common_str138="无法变身",t.common_str139="获取途径",t.common_str140="积分不足",t.common_str141="积分",t.common_str142="战区",t.common_str143=["基础属性","卓越属性","追加属性","培养属性","宝石属性","精炼属性"],t.common_str144="未转生",t.common_str145=["白色","绿色","蓝色","紫色","橙色","红色"],t.common_str146=["听说寻宝里能出神戒和魔戒。","这游戏还护肝休闲，玩法多真不错。","本人萌新，求大佬教我怎么玩。","这游戏的仙玉不要钱的吗？竟然敢给这么多？","首充送的武器好像还不错哦。","真棒，月卡太划算了，我仙玉都花不完了！","这么炫酷的游戏，肯定很多小哥哥小姐姐在玩。","说出来你可能不信，这是我最喜欢的游戏！","我在Boss之家差点就抢到Boss了！","这里个个都是人才，说话又nice又好听。","你们的战力怎么那么高啊，首充了吗？","刚来的萌新一枚，求各位大佬带我飞！","Boss太多人抢了，幸好SVIP可以随便打Boss之家！","原来快速挂机可以获得大量经验和元宝。","哈哈，充了至尊特权，我也是大佬了吧！"],t.common_str147="恭喜",t.common_str148="抽奖中",t.common_str149="激活至尊特权开启可用",t.common_str150="您未激活至尊特权,不可自动挑战,是否前往激活?",t.common_str151="复活倒计时",t.common_str152="是否购买挑战次数",t.common_str153="全部颜色",t.common_str154="全部星级",t.common_str155="及以下",t.common_str156="星及以下",t.common_str157="请选择你要分解的装备",t.common_str158="无星级",t.common_str159="卸下",t.common_str160="镶嵌",t.common_str161="敬请期待",t.common_str162="未命名",t.common_str163="正在杀怪中",t.common_str164="经验",t.common_str165="并且",t.common_str166="大师",t.common_str167="倒计时",t.common_str168="服务器断开连接,点击确定重新连接",t.common_str169="阶数",t.common_str170="购买",t.common_str171="级升到",t.common_str172="转生等级",t.common_str173="充值",t.common_str174="的佣兵",t.common_str175="消耗",t.common_str176="已通关",t.common_str177="结束",t.common_str178="免费",t.common_str179="本次免费",t.common_str180="仙玉抽取",t.common_str181="消耗",t.common_str182="特殊属性",t.common_str183="收到socket关闭消息",t.common_str184="IO错误",t.common_str185="重连的服务器断开连接,点击确定重新连接",t.common_str186="跨服服务器断开连接,点击确定重新连接",t.sys_1="跨服已关闭，于次日零点再次开启跨服！",t.btn_hh="进 阶",t.btn_fh="附 魂",t.btn_py="培 养",t.btn_yj="灵 性",t.btn_mz="法 阵",t.btn_jh="激 活",t.btn_sj="升 阶",t.btn_sjie="升 级",t.btn_qd="确 定",t.btn_qx="取 消",t.btn_ay="神 功",t.btn_jn="仙 术",t.btn_ffgm="付费购买",t.btn_sn="铭 文",t.btn_cd="穿 戴",t.btn_fj="分 解",t.btn_bb="背 包",t.btn_fl="附 灵",t.btn_tp="突 破",t.btn_jj="进 阶",t.btn_cs="第一轮",t.btn_js="第二轮",t.btn_lq="领 取",t.btn_sx="升 星",t.btn_ts="提 升",t.btn_hc="合 成",t.common_attrName=["当前血量","生命","最小攻击","最大攻击","防御力","命中","闪避","移动速度","攻击速度","卓越一击","会心一击","暴击","无视一击","力量","敏捷","体力","智力","生命加成","攻击力","防御力","命中","闪避","伤害加成","伤害减少","伤害反射","打怪金钱掉落","附加伤害","减少伤害","击杀怪物恢复","击杀怪物恢复","攻击力","防御力","攻击力","经验加成万分比","重生概率","易伤概率","破甲概率","减速概率","中毒概率","天使一击","神圣一击","韧性卓越一击","韧性会心一击","韧性","韧性无视一击","卓越一击伤害加成","会心一击伤害加成","暴击一击伤害加成","无视一击伤害加成","天使一击伤害加成","神圣一击伤害加成","腐蚀","暴击","嗜血","冰冻","猛击","BOSS增伤","仙灵仙术对怪物伤害增加","仙灵仙术对玩家伤害增加","PVP伤害加成","PVP伤害减少","仙灵生命百分比加成","破防","暴击增伤","暴击减伤","仙兵总属性","神羽总属性","时装总属性","法宝总属性","坐骑总属性","灵宠总属性","仙灵总属性","破防","装备攻击力","装备生命","装备破防","装备防御","装备暴击","装备韧性","装备命中","装备闪避","铸造属性增幅","足迹生命","足迹防御","足迹闪避","足迹总属性","神佑护盾当前值","护盾值","神佑总属性加成","神格攻击力","神佑护盾减免","神佑技能书总属性加成","神佑护盾存在时减伤","神佑护盾自动恢复","神佑印记数量","神佑印记充能速度提升","神佑印记伤害加成","神佑印记","妖灵印记总属性","PVP增伤","PVP减伤","神兽总属性","经验加成"],t.act_str1="今日购买次数",t.act_str2="可购买",t.act_str6="活动未开启",t.act_str7="活动已结束",t.act_str8="已购买",t.act_str9=["强化等级","神羽星级","灵石等级","法宝战力","法阵星级","聚魂战力","符文战力"],t.act_str11="暂无排名",t.act_str12="月卡已到期",t.act_str14="购买特惠商品",t.act_str16="活动期间累计充值$yb$仙玉可领取",t.act_str17="活动期间内每日充值$yb$仙玉即可领取",t.act_str19="已累计消费$yb$仙玉",t.act_str20="请点击$lj$按钮领取",t.act_str21="剩余挖宝次数",t.act_str22="挖宝时间到期",t.act_str23="挖宝次数不足",t.act_str24=["我的等级：","我的星级：","我的等级：","我的战力：","我的星级：","我的战力：","我的战力："],t.act_str25="我的排名：",t.act_str26="登陆天数不足，无法领取",t.act_str28="登录豪礼已领取完毕，无法前往",t.act_str29="活动倒计时：",t.act_str33="已消费",t.act_str34="充值数额不足，请前往充值",t.act_str35="本次活动次数已用完",t.act_str36="再充值$count$仙玉可增加次数",t.act_str37="抽奖记录",t.act_str38="恭喜$name$抽取到了$count$倍返利，获得了$yb$返利仙玉",t.act_str39="本次活动次数已达上限",t.act_str44="活动期间内每日充值$count$仙玉即可领取",t.act_str48="活动已结束",t.act_str59="已累计充值$rmb$元",t.act_str61="开服冲榜",t.act_str62=["","经验加成","血色之地","幽冥地宫","经验副本","环任务"],t.act_str64="已登录$day$天",t.act_str66="需要消费仙玉才可获得奖励",t.act_str68="可领取",t.act_str69="我的战力：",t.act_str70=["","仙灵","灵宠","仙兵","神羽","坐骑","时装","法宝"],t.act_str71="培养达到$str$，可领取！",t.act_str72="每次抽奖可获得$count$积分",t.act_str73="概率公示",t.act_str74="我的记录",t.act_str75="运气爆棚，$name$获得了$item$",t.act_str76="运气爆棚，抽奖获得了$str$",t.act_str77="积分达到$count$可领取（$str$）",t.act_str78="$count$件开启",t.act_str79="当前$zhe$哦~再购买$jian$开启下一折扣",t.act_str80="当前$zhe$哦，已达到最低购买折扣！",t.act_str81="当前已购",t.act_str82="SVIP$vip$可购买$jian$",t.act_str83="已达最大购买次数上限",t.act_str84="累计充值达到$str$，可领取奖励！",t.act_str85="累计消费达到$str$，可领取奖励！",t.act_str86="排名已截止",t.act_str87="虚位以待",t.act_str88="88元即享",t.act_str89="战力排行榜",t.act_str90="您还差$power$战力超过第$rank$名\n获得$str$道具$name$",t.act_str91="极品",t.act_str92="主角等级达到$str$，可领取奖励！",t.act_str93="战力达到$str$，可领取奖励！",t.act_str94="通过天路第$str$层，可领取奖励！",t.act_str95="(SVIP$level$特惠)",t.act_str96="立即投资需要SVIP$level$，是否立即前往提升SVIP",t.act_str97="累计登录$str$，可领取奖励！",t.act_str98="通过天路$str$，可领取奖励！",t.act_str99="累计达到$str$，可领取奖励！",t.act_str100="消费仙玉",t.act_str101="单笔充值$str$，可领取奖励！",t.act_str102="今日充值",t.act_str103="充值天数",t.act_str104="积分达到$count$可领取",t.act_str105="消耗1个$name$获得10积分",t.act_str106="累积消耗$count$个$name$",t.act_str107="培养",t.act_str108="您还差$power$积分超过第$rank$名\n获得$str$道具$name$",t.act_str109="升级飞升榜",t.act_str110="派对值:$num$点/次",t.act_str111="轮",t.act_str112="派对值",t.act_str114="消费点券",t.act_str115="派对值达到$str$可领取",t.act_str116="全民派对$str$可领取",t.act_str117=["个人奖励","全民奖励"],t.act_str118="效果：直接增加$num$\n最大派对值",t.act_str119="派对值达到$num$可上榜",t.act_str120="我的派对值：",t.act_str121="您还差$power$派对值超过第$rank$名\n获得$str$道具$name$",t.act_str122="本次活动总派对值已达最大，无法进行派对",t.act_str123="派对祝福进度条满后才可使用派对祝福",t.act_str124="派对值达到$num$可上榜",t.act_str125="使用成功，派对值",t.act_str126="本轮派对值达到$count$可领取（$str$）",t.act_str127="需要使用了派对祝福后才能继续使用道具",t.act_str129="刷新冷却中，请$num$秒稍后再次刷新",t.act_str130="刷新成功",t.act_str131="兑换上限",t.act_str132="兑换奖励所需道具不足",t.act_str133="活动时间：",t.act_str134="竞技模式：",t.act_str135="今日登录可领取",t.act_str136="SVIP$svip$可额外领取",t.act_str137="明日可领取",t.act_str138="认证成功",t.act_str139="本区排名",t.act_str140="本区积分",t.act_str141="个人积分达到1000可领取区服排行奖励",t.act_str142="已领取完所有奖励",t.act_str143="派对值已达最大上限",t.act_str144="剩余抽奖次数不足，请充值",t.act_str145="活动已结算",t.act_str146="可兑换",t.act_str147="连续充值$day$每天充值$price$,可领取奖励",t.act_str148="嗨点可领取",t.act_str149="活动次数",t.act_str150="积分达到一定值可以领取额外奖励。\n转盘概率：\n",t.act_str151="幸运值达到一定值可以领取额外奖励。\n转盘概率：\n",t.act_str152="嗨点$count$点",t.act_str153="上榜积分",t.act_str154="剩余抽奖次数不足，请充值",t.act_str155="剩余抽奖次数不足，请充值",t.act_str156="幸运值达到$count$可领取（$str$）",t.act_str157="限购次数",t.act_str158="剩余购买数量",t.act_str159="全服剩余",t.act_str160="当天充值数",t.act_str161="嗨点数量",t.act_str162="连续登录$day$天,可领取奖励!",t.act_str163="请记得在活动时间内兑换哦",t.act_str164="累计万魔巨塔达到$ceng$层,可领取奖励!",t.act_str165="挑战天赋试炼达到$dabiao$,可领取奖励!",t.act_str166="请重新分享!",t.act_str167="累积击杀$count$个BOSS,可领取奖励!",t.act_str168="通过黑暗深渊第$count$层,可领取奖励!",t.act_str169="恶魔要塞单次经验上限达到$dabiao$,可领取奖励!",t.act_str170="挑战元宝试炼达到$dabiao$,可领取奖励!",t.act_str171="分享次数!",t.act_str172="积分达到一定值可以领取额外奖励。\n寻宝概率：\n",t.act_str173="冰爽大礼，$name$寻宝获得$item$",t.act_str174="冰爽大礼，$name$寻宝获得$str$",t.act_str175="每次使用奖券可获得$score$积分",t.act_str176="后可领取点券",t.act_str177="积分尚未达标",t.act_str178="今天已购买过该礼包",t.act_str179="请先购买一元秒杀礼包！",t.act_str180="魅力值",t.act_str181="守护者",t.act_str182="赠送值",t.act_str183="魅力值达到$value$可上榜",t.act_str184="已送出魅力值:",t.act_str185="赠送$count$\n魅力值可上榜",t.act_str186="赠送魅力值：",t.act_str187="赠送魅力值达到$count$可领取",t.act_str188="消耗1个$name$获得10赠送魅力值",t.act_str189="赠送$qkl$、$mg$、$xs$可获得赠送魅力值",t.bag_str1=["使用成功","背包满了","","不能被使用","级别不足","数量不足够","仙玉不足","仙盟礼包需要加入仙盟后才能打开"],t.bag_str2="当前背包空间不足 $count$ , 请先清理背包!\r\n以免不能获得掉落物品!",t.bag_str4="格子不能继续扩张",t.bag_str5="已经是最小扩张数",t.bag_str6="已经是最大扩张数",t.bag_str7="道具合成",t.bag_str8="道具分解",t.chat_str1="[仙盟]",t.chat_str2="[当前]",t.chat_str3="好友",t.chat_str4="关注列表或最近列表没有此玩家id",t.chat_str5="[系统]",t.chat_str6="[世界]",t.chat_str7="点击输入咨询内容",t.chat_str9="发言次数过快",t.chat_str10="输入的内容重复过多",t.chat_str11="请输入聊天内容",t.chat_str12="点击输入聊天内容",t.chat_str13="[测试]",t.chat_str14="[跨服]",t.chat_str15="跨服玩法未开启",t.chat_str16="世界",t.chat_str17="当前",t.chat_str18="仙盟",t.chat_str19="跨服",t.chat_str20="系统",t.chat_str21="@$targetName$，踏上危险天路，冲破艰难险阻！别怕，我来帮你闯过第$guanId$层。",t.chat_str22="仙侣",t.com_str1="敌人",t.com_str2="你被 $name$ 击杀",t.com_str3="$second$秒 自动复活",t.damon_str35="仙玉不足，请前往充值",t.damon_str50="坐骑",t.damon_str59="灵性等级已达上限，请提升角色等级",t.fb_str1="归属",t.fb_str2="攻击BOSS",t.fb_str3="攻击归属者",t.fb_str4="正在攻击归属者",t.fb_str5="正在攻击BOSS",t.fb_str6="我是归属者",t.fb_str7="没有归属者",t.fb_str8="你不能攻击自己",t.fb_str10="后刷新",t.fb_str11="$second$秒CD中",t.fb_str13="挑战Boss可获得仙盟贡献\n击杀Boss可获得仙盟资金",t.fb_str15="伤害排行第1可获得击杀大奖\n其他玩家将获得参与奖",t.fb_str16="即将离开",t.fb_str17="$second$秒 自动离开",t.fb_str18="第$count$次",t.fb_str19="进入下层($second$s)",t.fb_str20="血色之地",t.fb_str21="入场时间：",t.fb_str22="副本倒计时：",t.fb_str23="攻击+",t.fb_str24="已经消耗时间:",t.fb_str25="秒内通关可保 ",t.fb_str26="是否退出当前副本",t.fb_str27="鼓舞已达上限，无法再鼓舞!",t.fb_str28="累计获得",t.fb_str29="幽冥地宫",t.fb_str30="推荐战力：",t.fb_str31="当前战力：",t.fb_str33="后可进入",t.fb_str34="请购买$name$进入次数",t.fb_str35="$name$处于冷却时间！",t.fb_str36="还有可用次数！",t.fb_str37="购买1次进入$name$机会",t.fb_str38="提升至SVIP$lv$,可以购买额外次数！",t.fb_str39="今日可购买的次数已达上限！",t.fb_str40="击败怪物：",t.fb_str41="击败怪物达",t.fb_str42="只可保 ",t.fb_str50="解散队伍",t.fb_str51="退出队伍",t.fb_str52="是否解散当前队伍？",t.fb_str53="是否退出当前队伍？",t.fb_str54="是否将",t.fb_str55="踢出当前队伍？",t.fb_str59="扫荡中",t.fb_str61="扫荡次数不足，无法扫荡！",t.fb_str73="排行榜",t.fb_str74="首次挑战",t.fb_str75="背包符文数量已达上限",t.fb_str76="你还没挑战过符文秘境！",t.fb_str77="现在可扫荡至 $name$ 并可获得全部普通奖励",t.fb_str78="重置符文秘境",t.fb_str79="现在可扫荡至$floor$层并可获得全部普通奖励",t.fb_str80="今日重置次数已用完",t.fb_str81="不足,无法重置！",t.fb_str83="已结算",t.fb_str85="无可购买次数！",t.fb_str86="挑战次数不足！",t.fb_str89="当前排名：",t.fb_str90="购买1次竞技场挑战次数？",t.fb_str91="冷却中",t.fb_str94="可用挑战次数不足",t.fb_str96="($time$后恢复1次)",t.fb_str98="$lv$开启",t.fb_str101="$time$后重生",t.fb_str104="boss归属：$count$次",t.fb_str106="秒后可进入",t.fb_str113="积分：",t.fb_str117="排名：",t.fb_str125="今日已购买：",t.fb_str130="未匹配到对手",t.fb_str132="积分",t.fb_str134="仙玉段位第$rank$名",t.fb_str135="段",t.fb_str136="查看排名",t.fb_str138="我的段位：",t.fb_str139="净胜场次：",t.fb_str140="本日购买次数已用完",t.fb_str141="确认花费$yb$仙玉购买1次天梯斗法挑战次数？\n今日已购买：$count$",t.fb_str142="休战期间，无法匹配对手",t.fb_str143="仙玉数量不足，无法购买",t.fb_str144="净胜场：$count$场",t.fb_str145=["青铜","白银","黄金","仙玉"],t.fb_str146="$name$成功掠夺了我的$mine$",t.fb_str147="$name$掠夺我的$mine$失败了",t.fb_str148="我成功掠夺了$name$的$mine$",t.fb_str149="我掠夺了$name$的$mine$，失败了",t.fb_str150="复仇",t.fb_str151="已复仇",t.fb_str152="立即完成",t.fb_str153="当前人数：",t.fb_str154="当前宝箱：",t.fb_str156="是否使用$yb$仙玉立即完成本次采集？",t.fb_str157="仙玉数量不足，无法快速完成",t.fb_str158="寻宝次数：",t.fb_str159="掠夺次数：",t.fb_str160="已经复仇啦",t.fb_str161="今日剩余开启次数：",t.fb_str162="已购买次数",t.fb_str163="SVIP$vip$可购买更多次数",t.fb_str164="今日次数已用完",t.fb_str165="仙玉不足，无法领取",t.fb_str166="掠夺者：",t.fb_str167="掠夺时间：",t.fb_str168="主人名字：",t.fb_str169="主人仙盟：",t.fb_str170="掠夺剩余次数：",t.fb_str171="可掠夺",t.fb_str172="不可掠夺",t.fb_str173="今日掠夺次数已用完",t.fb_str174="宝箱品质提升成功",t.fb_str175="提升失败，祝福值+$num$",t.fb_str176="今日免费重置次数：",t.fb_str177="付费重置次数：",t.fb_str178="SVIP$vip$可额外重置",t.fb_str179="请先领取通关奖励再重置",t.fb_str180="魔炼之地进行重置\n重置后将从第一层重新挑战",t.fb_str181="当前挑战",t.fb_str182="通关$floor$层后可以领取",t.fb_str183="紫云仙宫$floor$层",t.fb_str184="本层上限：",t.fb_str185="无上限",t.fb_str186="当前连杀：",t.fb_str187="当前积分：",t.fb_str188="击杀对手",t.fb_str189="角色阵亡",t.fb_str190="区域积分",t.fb_str191="击杀怪物",t.fb_str192="积分+",t.fb_str193="对手信息",t.fb_str194="积分不足，不能前往下一层",t.fb_str195="第$floor$层",t.fb_str196="积分达到$jifen$可领取（$score$/$maxScore$）",t.fb_str197="$second$秒后可再次进入紫云仙宫",t.fb_str198="我的层数：",t.fb_str199="我的积分：",t.fb_str200="复活时间：$second$秒",t.fb_str201="积分：",t.fb_str202="层数：",t.fb_str203="$second$s关闭",t.fb_str204="挑战次数：",t.fb_str225="剩余：",t.fb_str226="推荐战斗力：",t.fb_str239="仙玉不足：$yb$,无法原地复活！",t.fb_str240="花费$yb$仙玉原地复活！",t.fb_str253="杀戮值：",t.fb_str258="主城在$lv$等级开启",t.fb_str259="在$lv$开启",t.fb_str260="此功能跨服内不能操作！",t.fb_str261="开服第$day$天开启",t.fb_str262="此功能暂未开启",t.fb_str264="每次鼓舞可增加角色10%的攻击",t.fb_str265="$scoreRate$级评分可获得额外$exp$经验",t.fb_str266="角色达到$level$级可挑战$name$,获得更多的经验",t.fb_str267="点我寻宝",t.fb_str268="当前鼓舞$jiacheng$%",t.fb_str272="鼓舞成功",t.fb_str274="竞技模式前15分钟不可进入",t.fb_str276="正在采集中，请耐心等候",t.fb_str277="今日次数已用完，无法提升品质",t.fb_str278="当前已经是最高级别宝箱",t.fb_str279="是否消耗$consu$仙玉购买寻宝次数？",t.fb_str280="当前宝箱已满，请前往下一个幻境进行采集。",t.fb_str281="当前选择的不是最高品质的宝箱，是否立即开启？",t.fb_str283="可直接进入副本进行挑战",t.fb_str287="是否退出当前场景？\n（离开场景不会影响正在进行的采矿）",t.fb_str294="不符合等级要求，无法加入队伍。",t.fb_str295="助战次数不足，无法加入队伍。",t.fb_str296="无法加入自己的队伍。",t.fb_str297="防守剩余时间:$time$",t.fb_str298="怪物当前波数:$count$",t.fb_str299="已击败怪物数量:$count$",t.fb_str300="助战奖励",t.fb_str301="挑战奖励",t.fb_str302="发送成功",t.fb_str303="$miao$秒后才能再次发起邀请",t.fb_str304="召集队友中，无法鼓舞",t.fb_str309="暗黑之灵$count$阶",t.fb_str310="剩余归属次数：",t.fb_str311="挑战要求：暗黑之灵$count$阶",t.fb_str314="仙玉不足$count$,无法复活!",t.fb_str315="花费$count$仙玉原地复活!",t.fb_str317="开启中",t.fb_str320="通关至第$count$层开启快速挑战",t.fb_str321="已挑战至与你战力相近的层数",t.fb_str322="全民BOSS",t.fb_str330="通关第$count$层开启",t.fb_str331="今日扫荡次数已用完",t.fb_str332="挑战次数已达上限",t.fb_str339="今日挑战次数",t.fb_str340="今日扫荡次数",t.fb_str341="svip$count$增加扫荡次数",t.fb_str342="激活$str$可开启一键挑战特权，是否前往激活",t.fb_str343="激活$str$可开启一键扫荡特权，是否前往激活",t.fb_str344="【至尊特权】",t.fb_str345="达到$str$可进入第$count$层，获得更多材料",t.fb_str346="杀怪数量",t.fb_str347="请先挑战完所有副本",t.fb_str348="通过天路$count$层开启",t.fb_str349="是否进行一键扫荡？",t.fb_str350="开启更高级副本，首次挑战后可一键挑战",t.fb_str351="当前正在副本中，无法前往挑战",t.fb_str352="没有可扫荡副本，请前往挑战",t.fb_str353="是否继续掠夺？",t.fb_str354="开服第$day$天",t.fb_str355="请先领取等级宝箱奖励",t.fb_str356=["","时间不多，赶紧前往寻找天使武器","击败黄金天使寻找天使武器下落","使武器一定被藏起来，继续探索肯定能找到","赶紧拾取天使武器，帮助恢复大天使长能力"],t.fb_str357="正前往守护$level$大天使米迦勒，请求高手支援$desc$",t.fb_str358="已挑战完",t.fb_str359="转生达到$zslevel$可挑战",t.fb_str360="退出副本将扣减1次挑战次数",t.fb_str361="$s$秒后才可返回战区",t.fb_str362="当前正在副本中，请稍后再试",t.fb_str363="正在复活",t.fb_str364="扫荡完毕后请前往邮件领取奖励",t.fb_str365="上轮第一",t.fb_str366="争夺人数",t.fb_str367="BOSS复活中",t.fb_str368="黄金部队已满级",t.fb_str369="击杀数",t.fb_str370="逃跑",t.fb_str371="跨服BOSS",t.fb_str372="伤害达标奖励",t.fb_str373="造成$damge$伤害可领取",t.fb_str374="击败",t.fb_str375="击败$count$只怪物可获",t.fb_str376="已挑战至$ceng$层",t.fb_str377="当前关卡",t.fb_str378="是否消耗 $name$\n增加一次归属次数?\n\n当前拥有$yy$",t.fb_str379="第$guan$关解锁",t.fb_str380="第$guan$关",t.fb_str381="第$guan$关开启",t.fb_str382="当前血量",t.fb_str383="第$ceng$层",t.fb_str384="未解锁",t.fb_str385="角色已死亡",t.fb_str386="已通关全部关卡",t.fb_str387="退出副本将被判定为",t.fb_str388="挑战失败，角色阵亡",t.fb_str389="是否确定退出副本",t.fb_str390="重置成功",t.fb_str391="通关层数",t.fb_str392="叹息神殿",t.fb_str393="挑战次数不足，无法进行挑战！",t.fb_str394="参与$count$次叹息神殿战斗后可领取",t.fb_str395="重生",t.forge_str12="(满)",t.forge_str19="灵石 未激活",t.forge_str20="所有孔位都镶嵌了灵石",t.forge_str21="灵石等级：",t.forge_str22="可镶嵌：",t.forge_str39="穿戴对应部位装备后才可强化",t.forge_str44="强化等级 +",t.forge_str52="穿戴对应部位装备后才可强化",t.forge_str53="(上限$max$)",t.forge_str54="升级为",t.forge_str55="本次升级需要消耗：",t.forge_str56="没有可镶嵌的灵石",t.forge_str62="没有可升级的灵石",t.forge_str63="穿戴对应部位装备后才可操作",t.friend_str1="是否要将该玩家从黑名单中删除？",t.friend_str2="是否要将该玩家加入黑名单？",t.friend_str3="正在与$name$进行聊天",t.friend_str4="是否要取消关注该玩家？",t.friend_str5="是否要将该玩家加入黑名单？",t.friend_str6="不能添加自己为好友",t.fruit_strs=["","攻击","血量","防御","破防","命中","闪避","暴击","韧性"],t.fruit_str2="今日$name$仙丹使用个数：",t.fruit_str3="提升至$count$可以增加次数",t.fruit_str6="该类型仙丹已达到使用总上限",t.fruit_str7="已达到最大使用次数",t.fuli_str12="持续$day$天",t.fuli_str13="已累计签到($day1$/$day2$)天，",t.fuli_str14="再签到$day$领取奖励",t.fuli_str15="累计奖励已领完",t.fuli_str16="等级领取双倍奖励",t.fuli_str17="签到成功",t.fuli_str18="请输入激活码",t.fuli_str19="兑换成功,请在邮件中领取奖励",t.fuli_str20="激活码已被使用",t.fuli_str21="激活码不存在",t.fuli_str22="已使用过同类型",t.fuli_str23="兑换失败",t.fuli_str24="建议",t.fuli_str25="前往充值",t.fuli_str26="提升",t.fuli_str27="SVIP",t.fuli_str33="消费$yb$仙玉,开通$day$天内挂助手",t.fuli_str34="内挂助手开通成功",t.fuli_str35="开通内挂助手快速挑战副本",t.fuli_str36="恭喜声望等级提升,获得以下奖励",t.fuli_str37="获得了月卡双倍奖励",t.fuli_str38=["挑战","挑战","两倍挑战","三倍挑战"],t.fuwen_str1="卸 下",t.fuwen_str2="佩 戴",t.fuwen_str3="直接购买",t.fuwen_str4="白色品质不能被装备",t.fuwen_str6="未装备符文",t.fuwen_str7="购买成功",t.fuwen_str8="符文整理太过频繁",t.fuwen_str9="符文背包空间不足10个",t.fuwen_str10="背包符文数量已达上限",t.fuwen_str11="当前已有高概率抽到优质符文",t.fuwen_str12="正在炼取符文",t.fuwen_str13="是否消耗$yb$仙玉，\n提升抽取高品质符文的概率？",t.fuwen_str14="背包没有该类型符文",t.fuwen_str15="请选择需要吞噬的符文",t.fuwen_str16="选择了包含高品质的符文，\n是否确认回收？",t.fuwen_str17="自动炼取",t.fuwen_str18="替 换",t.guild_str1="前往提升",t.guild_str2="BOSS战力：",t.guild_str3="活动重置时间：等待重置",t.guild_str4="活动重置时间：",t.guild_str5="组队挑战",t.guild_str6="没有挑战次数",t.guild_str7="请加入仙盟或者创建仙盟",t.guild_str8="当前挑战奖励加成 +$extra$%",t.guild_str9="更多记录",t.guild_str10="购买了$yb$仙玉",t.guild_str11="当前礼物等级：",t.guild_str12="当前没有仙盟礼物可以领取",t.guild_str13="本日捐献次数已满",t.guild_str14="需审核",t.guild_str15="已申请",t.guild_str16="申请",t.guild_str17="仅盟主可操作",t.guild_str18="等级已满",t.guild_str19="请先升级管理大厅",t.guild_str20="资金不足",t.guild_str21="升级要求：管理大厅达到$lv$级",t.guild_str22="贡献度：",t.guild_str23="小于1小时",t.guild_str24="是否消耗$yb$仙玉弹劾盟主？（弹劾后成为盟主）",t.guild_str25="是否转让盟主职位给[$name$]？",t.guild_str26="是否免除[$name$]副盟主之职？",t.guild_str27="确定将[$name$]踢出仙盟？",t.guild_str28="确定任命[$name$]为副盟主？",t.guild_str29="副盟主人数已达上限",t.guild_str30="获得了",t.guild_str31="虚位以待",t.guild_str32="还有奖励未被分配，请选择",t.guild_str33="已退出仙盟",t.guild_str34="罗兰城战期间不能加入仙盟",t.guild_str35="战斗力过低",t.guild_str36="仙盟商店要在开服$day$天开启",t.guild_str37="功能即将开放",t.guild_str38="罗兰城战期间不能退出仙盟",t.guild_str39="是否确定退出仙盟？\n\n退出后贡献值清零,仙盟仙术继续生效。",t.guild_str40="本日剩余次数：",t.guild_str41="($lv$级商店每日次数+$count$)",t.guild_str42="获得了",t.guild_str43="本日剩余次数为0",t.guild_str44="贡献度不足",t.guild_str45="未学习",t.guild_str46="修炼",t.guild_str47="学习",t.guild_str48="捐献",t.guild_str49="贡献+",t.guild_str50="资金+",t.guild_str51="容纳$count$仙盟成员",t.guild_str52="返还$gx$仙盟贡献",t.guild_str53="创建消耗：",t.guild_str54="仙盟名不可用",t.guild_str55="你将消耗$yb$仙玉，创建$lv$级仙盟[$name$]，确定创建？",t.guild_str56="仙盟成员已满",t.guild_str57="战意：",t.guild_str58="已获得所有奖励",t.guild_str59="当前可拔剑",t.guild_str60="仙盟：",t.guild_str61="正在城堡拔剑($time$)",t.guild_str62="秒后可拔剑",t.guild_str63=" 拔剑中.....",t.guild_str64="拔剑成功剩余时间：",t.guild_str65="复活状态，不能切换地图",t.guild_str66="战意值不足，不能进入下一层",t.guild_str67="击破BOSS后可进入下一层",t.guild_str68="变身状态下无法拔剑",t.guild_str69="你正在拔剑",t.guild_str70="$second$秒后才能拔剑",t.guild_str71="当前不可拔剑",t.guild_str72="没有旗子",t.guild_str73="积分不足，无法领取",t.guild_str74="第$count$名",t.guild_str75="不在罗兰城",t.guild_str76="活动结束仙盟积分排名第一",t.guild_str77="成功拔出罗兰之剑",t.guild_str78="攻城奖励",t.guild_str79="上届战况",t.guild_str80="活动进行中",t.guild_str81="开启罗兰城战",t.guild_str82="加入仙盟后才能参与罗兰城战活动",t.guild_str83="占领仙盟才能领取每日奖励",t.guild_str84="已领取过每日奖励",t.guild_str85="$name$ 投出 $count$ 点",t.guild_str86="抽奖时间已过，无法投掷骰子",t.guild_str87="秒后自动切换区域",t.guild_str88="秒后在峡谷大门复活",t.guild_str89="秒后自动退出活动",t.guild_str90="你被 $name$ 怪物击败！",t.guild_str91="你被 $name$ 玩家击败！",t.guild_str92="所属仙盟：",t.guild_str93="已选择",t.guild_str94="分配人数已满",t.guild_str95="准备挑战仙盟boss，请求各位强者前往助战 $str$",t.guild_str96="点击加入队伍",t.guild_str97="仙盟创建成功",t.guild_str98="升级成功",t.guild_str99="修炼值 +",t.guild_str100="  [$name$]加入仙盟",t.guild_str101="  [$name$]离开仙盟",t.guild_str102="  [$name$]被任命副盟主",t.guild_str103="  [$name$]成为新的盟主",t.guild_str104="  [$name$]发起弹劾",t.guild_str105="  [$name$]仙盟副本进度首通",t.guild_str106="  [$name$]捐献了",t.guild_str107="  [$name$]把$name1$升级到$name2$级",t.guild_str108="  [$name$]在仙盟商店获得了$name1$",t.guild_str109="仙盟强盗已经全部击杀",t.guild_str110=["成员","先锋","精英","队长","长老","副盟主","盟主"],t.guild_str111="获得 $count$积分",t.guild_str112="开启宝箱",t.guild_str113="奖励分配成功",t.guild_str114="奖励分配失败",t.guild_str115="红包发送失败",t.guild_str116="红包领取失败",t.guild_str117="请先加入仙盟",t.guild_str118="额外捐献",t.guild_str119="本轮剩余魔物：",t.guild_str120="挑战中",t.guild_str121="当前怪物正在被其他玩家挑战",t.guild_str122="请加入仙盟或创建仙盟",t.guild_str123="红包发放成功",t.guild_str124="仙盟排行",t.guild_str125="内容不合法,设置失败,请重新设置",t.guild_str126="周六",t.itemtips_str1="职业需求：",t.itemtips_str11="大量",t.itemtips_str12="使用等级：",t.itemtips_str13="等级：",t.itemtips_str14="职业：",t.itemtips_str22="当前使用：",t.itemtips_str25="打开可获得稀有道具",t.itemtips_str26="拥有数量：",t.itemtips_str27="激活或提升$type$【$name$】，为主角增加以下属性：",t.itemtips_str28="仙兵",t.itemtips_str29="神羽",t.itemtips_str30="法宝之书",t.itemtips_str31="灵宠",t.itemtips_str32="仙灵",t.itemtips_str33="法阵",t.job_str30="转生等级不足$str$，无法查看",t.jewel_str3="解锁",t.mount_str1="灵气",t.mail_str1="领取附件",t.notice_str1="领取礼包",t.npc_str21="正在挑战副本中，请稍后再试",t.npc_str47="正在跨服中，请稍后再试",t.notice_str2="你尚未结缘",t.rank_str7="每个排行榜只能膜拜一次",t.rank_str11="坐骑战力",t.rank_str14="距离结算时间：",t.rank_str15="法器战力",t.rank_str16="仙道",t.rank_str17="仙位",t.rank_Type=["战力榜","等级榜","关卡榜","万魔榜","黑暗榜","竞技榜","仙盟榜","坐骑榜","灵宠榜","仙兵榜","神羽榜","时装榜","法宝榜","法器榜","仙道榜","仙位榜","装备榜","仙灵榜"],t.junxianName=["","聚气","聚灵","聚元","灵动","炼体","通智","开灵","凝元","锻体","元心","出窍","魂丹","炼骨","心炼","妖丹","明心","化形","舍利","凝体","凝魄","魂动","离识","太虚"],t.recharge_str1="充值$yb$仙玉",t.recharge_str2="累计充值$yuan$，马上获得",t.recharge_str9="小伙伴们快来领",t.recharge_str10="点击查看手气",t.recharge_str11="下次要抓紧时间",t.recharge_str12="红包数量不足",t.recharge_str13="红包已派发，快快抢",t.recharge_str14="领取人数：",t.recharge_str15="来自 ",t.recharge_str16="红包已过期",t.recharge_str26="至尊特权",t.report_str1="提交问题成功！",t.report_str2="网络出故障，请重新提交问题！",t.role_str15="该部位暂无可穿戴装备！",t.scene_str1="拔剑中攻击玩家会导致拔剑$str$，确定要攻击玩家吗？",t.scene_str2="进度归0",t.scene_str3="不能掠夺自己的宝箱",t.scene_str4="你已经掠夺过该宝箱，无法重复掠夺。",t.scene_str5="此宝箱正在被掠夺中",t.scene_str6="该宝箱已经被掠夺了$count$次，请放过他吧。",t.scene_str13="问题发生时间：",t.scene_str14="请输入反馈内容",t.scene_str15="$second$秒后才可再次提交",t.scene_str16="（最多输入120字）",t.scene_str17="建议",t.scene_str18="投诉",t.scene_str19="其他",t.scene_str20="拔剑状态下无法变身",t.scene_str21="当前无法手动释放变身",t.scene_str22="变身状态中",t.scene_str23="变身CD中",t.scene_str33="拔剑中移动会导致拔剑$str$，确定要移动吗？",t.scene_str34="下方",t.scene_str35="右方",t.scene_str36="受到$name$玩家的攻击，点击$dir$头像进行反击",t.scene_str37="背包空间不足",t.scene_str38="该玩家最近没登陆，无法查看该信息",t.shop_str1="限购数量：",t.shop_str2="已达购买上限！",t.shop_str9="我的$name$：$rongyu$（竞技场获得）",t.shop_str10="超过本日限购数量！",t.shop_str18="$name$不足",t.shop_str19=["","每日限购","每周限购","终身限购"],t.shop_str20="每日限购",t.shop_str21="首通限购",t.shop_str32="神魔商店",t.shop_str33="我的$name$：$camp$（神魔圣战获得）",t.shop_str34="巅峰商店",t.shop_str35="巅峰积分",t.skill_str1="挂机经验、元宝$jb$，\n生命$sm$，防御$fy$",t.skill_str2="月卡特权",t.skill_str3="挂机经验$jy$，\n挂机元宝$jb$，\n攻击力$gj$",t.skill_str26="激活条件：",t.skill_str27="升级条件：",t.skill_str28=["","仙兵等级Lv.","坐骑培养Lv.","坐骑 ","神羽等级Lv.","灵宠培养Lv.","灵宠 ","时装等级Lv.","法宝等级Lv.","仙灵培养Lv.","仙灵 ","","","","5件铭文等级Lv.",""],t.skill_str29="还差",t.skill_str30="可激活仙术",t.task_str1="成就积分：",t.task_str2="没有可领取的奖励",t.task_str3="进度：",t.task_str4="需要激活$name$后开启",t.vip_str1="再充值$yb$仙玉|成为SVIP$vip$",t.vip_str2="SVIP等级已满",t.vip_str4="每日可额外购买",t.vip_str5="每日可购买",t.xh_str2="解锁更多戒魂",t.xh_str4="当前阶段",t.xh_str5="下一阶段",t.xh_str6="经脉达到",t.xh_str7="经脉攻击",t.xh_str8="经脉生命",t.xh_str9="无加成",t.redFort_str1="等级限制：",t.redFort_str2="竞技进行中：",t.redFort_str3="距离下次竞技：",t.redFort_str4="第$count$名",t.redFort_str5="我的排名：$count$",t.zb_str2="稀有度：",t.zb_str3="更换",t.zb_str4="穿戴",t.zb_str5="有效期：",t.zb_str15="拥有：",t.gmk_str3="您尚未输入名字",t.gmk_str4="改名成功，重新登录即可生效",t.gmk_str8="最多只能输入七个字",t.sw_str1="可放入",t.gj_str1="难度：",t.gj_str2="层奖励",t.gj_str3="点击领取",t.gj_str4="还需击杀$count$波小怪，才能挑战闯关！",t.gj_str5="发送到跨服频道，向跨服高手求助",t.gj_str6="发送到仙盟频道，向仙盟高手求助",t.gj_str7="求助次数：",t.gj_str8="协助次数：",t.gj_str9="扫荡次数：",t.gj_str10="第$count$层",t.gj_str11="天路艰险，求各路高手助我一臂之力，帮我闯过第$count$层！",t.gj_str12="天路艰险，求仙盟各位大佬带飞，帮我闯过第$count$层！",t.gj_str13="一键协助",t.gj_str14="自己无法协助自己！",t.gj_str15="今日协助次数已用完！",t.gj_str16="战力不足！是否继续协助？",t.gj_str17="已挑战完成",t.gj_str18="协助成功",t.gj_str19="自动挑战第$count$关开启",t.gj_str20="$count$秒后才能再次求助！",t.gj_str21="$name$道友莫慌，我来助你",t.gj_str22="每日首次免费",t.gj_str23="扫荡消耗：",t.gj_str24="通过第$count$层开启",t.gj_str25="是否购买扫荡次数？",t.gj_str26="今日求助次数已用完！",t.gj_str27="还需要击杀$count$波小怪才能求助！",t.gj_str28="求助已发送",t.gj_str29="您已挑战到最后一关",t.gj_str30="实力不足，协助失败",t.jjc_str6="竞技场挑战CD中",t.jjc_str7="是否清除竞技场挑战CD？",t.jjc_str8="排名奖励",t.jjc_str9="段位奖励",t.jjc_str10=["仙玉奖励","黄金奖励","白银奖励","青铜奖励"],t.ml_str4="购买次数",t.kfboss_str1="$lv$以上，",t.kfboss_str2="进入，$svip$免费",t.kfboss_str3="宝箱于$time$后消失",t.kfboss_str4="今日归属宝箱开启次数已达上限",t.kfboss_str5="后复活",t.kfboss_str6="是否消耗$num$仙券进入boss地宫？",t.kfboss_str7="消耗仙券进入boss地宫，死亡后会自动退出副本",t.kfboss_str8="可消耗$str$",t.kfboss_str9="转生等级过高，击杀Boss没有掉落",t.kfboss_str10="转生等级过高，击杀无掉落，不可关注",t.kfboss_str11="boss地宫",t.qy_strs=["","1倍复仇","2倍复仇","3倍复仇"],t.qy_str1="探索一番",t.qy_str2="前 往",t.qy_str3="前往击杀",t.qy_str4="前往应战",t.qy_str5="解除封印",t.qy_str6="体力值",t.qy_str7="离 开",t.qy_str8="很遗憾您输了",t.qy_str9="恭喜您获得胜利",t.qy_str10="奇遇点",t.qy_str11="解封中...",t.qy_str12="体力不足，无法执行",t.qy_str13="来一把",t.qy_str14="接受试炼",t.DuoLuo_str1="获得材料",t.DuoLuo_str2="无消耗",t.DuoLuo_str3="角色转生等级不足",t.DuoLuo_str4="堕落圣衣等级不足，无法进阶",t.DuoLuo_str5="获得更多神装碎片",t.DuoLuo_str6="需要达到$lv$才可以升级",t.DuoLuo_str7="转生等级不足",t.DuoLuo_str8="等级需求",t.sjbs_str0="上次排名",t.sjbs_str1="世界BOSS即将刷新",t.sjbs_str2="世界BOSS还未来袭，无法进入",t.fb_str233="奖励预览",t.fb_str234="距离boss来袭时间：",t.fb_str235="boss逃离时间：",t.fb_str236="$time$秒后可以进入",t.sjbs_str3="该世界BOSS已被击杀",t.foot_str1="足迹等级提升",t.foot_str2="下一阶段",t.foot_str3="前往合成",t.foot_str4="足迹大师",t.foot_str5="请先穿戴铭文",t.foot_str6="足迹",t.foot_str7="五个铭文的等级均达到",t.foot_str8="足迹未激活，请前往激活",t.foot_str9="铭文评分",t.foot_str10="未穿戴",t.foot_str11="我的装备",t.foot_str12="我的铭文",t.foot_str13="铭文背包已满，请清理背包",t.fumo_str1=" 需要该部位打造到$jie$阶才可以激活",t.fumo_str2="分解获得：",t.fumo_str3="附 魔",t.fumo_str4="打 造",t.db_str0="斗神宝箱",t.db_str1="灭魔宝箱",t.db_str2="战区内点击$str$或$str2$进行采集，获取宝箱奖励采集有次数限制，采集任意宝箱都会消耗次数",t.db_str3="活动未开启，无法前往",t.db_str4="今日采集已达上限",t.db_str5="该宝箱正在被采集中!",t.db_str6="宝箱正在刷新中，请稍后再试",t.db_str7="今日采集次数已用完!",t.db_str8="变身状态无法采集!",t.sl_str1="需要$name$达到$chong$重$ji$级后开启",t.sl_str2="妖灵大师",t.sl_str3="达到",t.sl_str4="重",t.sl_str5="激活$max$个不同的印记$str$，即可激活炫酷武器妖灵外观",t.sl_str6="可激活",t.sl_str7="六个印记",t.sl_str8="用于激活$name$中的印记，集齐印记可觉醒妖灵特效",t.sl_str9="妖灵全属性",t.sl_str10="印记评分",t.sl_str11="不同的印记可幻化",t.sl_str12="妖灵",t.sl_str13="外观",t.sl_str14="需要激活满6个印记才可进阶",t.sl_str15="妖灵进阶成功",t.sy_str0="阶解锁",t.sy_str1="技能未解锁，不可学习",t.sy_str2="购买技能学习数量上限",t.sy_str3="技能",t.sy_str4="神格",t.sy_str5="神佑升星达到$rank$阶开启",t.sy_str6="最大等级",t.sy_str7="神格达到",t.sy_str8="级可",t.sy_str9="当前等级",t.sy_str10="充能时间",t.sy_str11="神佑升星达到$rank$阶开启",t.sy_str12="神佑总护盾值：",t.sy_str13="(升星达到$stage$阶可增加$count$个技能上限)",t.sy_str14="已学技能",t.mol_strs=["","无法加入自己的队伍","队伍已解散","副本已开启，无法加入队伍",""],t.mol_str1="副本剩余时间",t.mol_str2="已消耗",t.mol_str3="内通关可获",t.mol_str4="助战奖励",t.mol_str5="挑战奖励",t.mol_str6="正前往",t.mol_str7="请求高手支援",t.mol_str8="等待队友加入中",t.mol_str9="召集队友中，无法鼓舞",t.mol_str10="发送成功",t.mol_str11="$miao$秒后才能再次发起邀请",t.mol_str12="SVIP$vip$可额外购买",t.mol_str13="加入其它队伍进行助战获取丰富奖励",t.mol_str14="魔龙之城",t.mol_str15="今日可进入次数已用完",t.mol_str16="不符合等级要求，无法加入队伍。",t.mol_str17="助战次数不足，无法加入队伍。",t.mol_str18="无法加入自己的队伍。",t.mol_str19="退出副本将扣减次数，是否退出副本？",t.mol_str20="邀请",t.mol_str21="购买一次进入魔龙之城机会",t.mol_str22="剩余$count$次可购买",t.mol_str23="助战次数",t.sm_str1="苍龙试炼",t.common_footequipName=["星魂","神纹","晶石","神瞳","沙漏"],t.gwgc_str17=["稀有","史诗","传说"],t.zyz_strs=["无","神","魔"],t.zyz_str1="确定要解散并离开队伍吗？",t.zyz_str2="确定要离开$name$的队伍吗？",t.zyz_str3="您不是队长！",t.zyz_str4="确定要把$name$请离队伍吗？",t.zyz_str5="解 散",t.zyz_str6="请 离",t.zyz_str7="队长$name$已把你移出队伍",t.zyz_str8="创建的$team$队伍正诚邀您的加入！",t.zyz_str9="神魔圣战",t.zyz_str10="我要出战！",t.zyz_str11="伤害排名越高奖励越丰富",t.zyz_str12="后",t.zyz_str13="复活",t.zyz_str14="整顿",t.zyz_str15="每周日晚 22：00 结算时，排名第$rank$的玩家\n可获得以下奖励",t.zyz_str16="本赛季结束倒计时：",t.zyz_str17="可获得奖励次数：",t.zyz_str18="助战奖励次数：",t.zyz_str19="本赛季所属阵营：",t.zyz_str20="发送",t.zyz_str21="累计胜点",t.zyz_str22="请先发送邀请同阵营玩家或守卫",t.zyz_str23=["跨服榜","神王榜","魔王榜"],t.zyz_str24="当前赛季",t.zyz_str25="所属阵营：",t.zyz_str26="阵营积分达到$num$，可领取奖励",t.zyz_str27="参与次数",t.zyz_str28="参与次数达到$num$场可获得以下奖励：",t.zyz_str29="对战次数不足，无法领取",t.zyz_str30="申请成功，等待队长审核",t.zyz_str31="双倍",t.zyz_str32="奖励次数已用完，继续参战只会获得助战奖励",t.zyz_str33="请等待队长邀请队友",t.zyz_str34="队伍已满员，快去匹配对手",t.zyz_str35="邀请成功",t.zyz_str36="队长已取消匹配",t.zyz_str37="（队伍胜负信息会以邮件形式告知）",t.zyz_str38="确定不再观战离开副本吗？",t.zyz_str39="您的战斗尚未进行，现在离开将被判负",t.zyz_str40="确定要离开战斗吗？",t.zyz_str41="您正在进行战斗，现在离开将被判负",t.zyz_str42="阵营无在线玩家，请手动邀请守卫",t.zyz_str43="参战次数已满，只能获得助战奖励",t.zyz_str44="周六除外",t.zyz_str45="胜点",t.zyz_str46="阵营",t.zyz_str47="每天20：00~20：30开启 （周六除外）",t.zyz_str48="邀请已发送",t.zyz_str49="冷却",t.wc_str1="宝典等级上限",t.wc_str2="宝典总属性",t.wc_str3="当前属性",t.wc_str4="下阶属性",t.wc_str5="宝典",t.gb_strs=["","报名截止倒计时：","竞猜截止倒计时：","第一轮准备剩余时间：","第一轮剩余时间：","第二轮准备剩余时间：","第二轮剩余时间：","距离下次比赛报名："],t.gb_str1="查看全部",t.gb_str2="活动奖励",t.gb_str3="已报名仙盟数",t.gb_str4="进入战场",t.gb_str5="火热对战中",t.gb_str6="盟主",t.gb_str7="仙盟人数",t.gb_str8="仙盟等级",t.gb_str9="第一轮结束后才能查看",t.gb_str10="领地报名",t.gb_str11="取消报名",t.gb_str12="仙盟战力差",t.gb_str13="领地战当天19：30-20：00开始竞猜",t.gb_str14="领地圣战丶第一轮",t.gb_str15="领地圣战丶第二轮",t.gb_str16="活动结束后可领取",t.gb_str17="参与过活动才能领取",t.gb_str18=["SSS领地","SS领地","S领地"],t.gb_str19="被膜拜次数",t.gb_str20="膜拜次数",t.gb_str21="膜拜冠军每次奖励$num$仙玉",t.gb_str22="第一轮获胜仙盟",t.gb_str23="第二轮获胜仙盟",t.gb_str24="胜利积分：",t.gb_str25="您的积分",t.gb_str26="没有仙盟参加对战",t.gb_str27="当前积分",t.gb_str28="击杀小怪获得积分",t.gb_str29="击杀敌人获得积分",t.gb_str30="击杀守卫获得积分",t.gb_str31="击杀Boss获得积分",t.gb_str32="终结了",t.gb_str33="的",t.gb_str34="连杀",t.gb_str35="第一轮准备",t.gb_str36="第一轮",t.gb_str37="第二轮准备",t.gb_str38="第二轮",t.gb_str39="排行奖励",t.gb_str40="每次鼓舞可增加$juese$：1%生攻击 10万攻击和200万生命",t.gb_str41="每次鼓舞可增加$zan$所有成员：5%生命和攻击\n额外20万攻击",t.gb_str42="获得额外积分",t.gb_str43="只有$str$才可获得",t.gb_str44="参与领地圣战的仙盟成员",t.gb_str45="暂未决出领地战第一名，无法进行领主膜拜",t.gb_str46="领地前4名才能发放红包奖励",t.gb_str47="需要盟主或者副盟主才能发放红包奖励",t.gb_str48="活动结束后才能打开红包奖励",t.gb_str49="查看战况",t.gb_str50="报名成功，请时刻留意名次是否可入选竞争领地",t.gb_str51="取消领地报名成功，您的仙盟已退出该领地的竞争",t.gb_str52="仅盟主或副盟主可进行报名",t.gb_str53="第$num$名每日奖励",t.gb_str54="积分不足，无法领取奖励",t.gb_str56="达标奖励领取成功",t.gb_str57="竞猜时间已结束",t.gb_str58="击杀了",t.gb_str59="我方仙盟",t.gb_str60="敌方仙盟",t.gb_str61="进行了仙盟鼓舞\n使仙盟所有成员士气大涨，战力飙升！",t.gb_str62="仅盟主或副盟主可取消该领地报名",t.gb_str63="备战倒计时中，无法移动出指定区域",t.gb_str64="自身",t.gb_str65="仙盟所有成员",t.gb_str66="请选择您认为哪个仙盟成为领地第一名",t.gb_str67="比赛已结束",t.gb_str68="膜拜次数已达上限",t.gb_str69="个人积分",t.gb_str70="你被$name$杀死了，即将在出生点复活。",t.gb_str71="领地战结束后才能退出仙盟",t.gb_str72="领地战况",t.gb_str73="总积分",t.gb_str74="我方守卫",t.gb_str75="敌方守卫",t.gb_str76="，获得了高额积分",t.guzhan_str0="本日杀敌数达到\n$count$可获取",t.guzhan_str1="当前为双倍掉落时间",t.guzhan_str2="当前非双倍掉落时间",t.guzhan_str3="$second$秒CD中",t.guzhan_str4="本日杀敌数已达上限，次日0点刷新",t.guzhan_str5="远古战场",t.guzhan_str6="已杀敌数：",t.guzhan_str7="对手信息",t.guzhan_str8="当前累积第一名次数:$count$次",t.guzhan_str9="当前累积参加活动次数:$count$次",t.guzhan_str10="2.累积$count$次达到第一名,可以获得特殊称号",t.guzhan_str11="3.累积参加活动$count$次,可以获得特殊称号",t.guzhan_str12="累积次数",t.tssd_str1="提升圣盾等级可增加使用上限",t.tssd_str2="$count$阶天使圣盾",t.tssd_str3="天使圣盾$jie$激活",t.tssd_str4="圣盾经验 + ",t.tssd_str5="道具使用已达上限",t.brave_str0="勇者圣殿",t.brave_str1="上次归属者：",t.brave_str2="今日购买次数已用完",t.brave_str3="SVIP$svip$可额外购买",t.brave_str4="今日购买次数已用完",t.brave_str5="挑战次数不足，无法进行挑战！",t.brave_str6="购买一次勇者圣殿挑战次数",t.brave_str7="转生",t.hjbd_str0="黄金魔王",t.hjbd_str1="点击领取奖励",t.hjbd_str2="$time$后遭遇",t.hjbd_str3="$time$后消失",t.hjbd_str4="已击败该黄金魔王！",t.hjbd_str5="未遭遇该黄金魔王！",t.hjbd_str6="当前没有的黄金遗迹！",t.hjbd_str7="点击领取奖励",t.hjbd_str8="该物品已售罄！",t.hjbd_str9="限购：$count$件",t.hjbd_str10="剩余：",t.hjbd_str11="推荐战斗力：",t.hjbd_str12="达标战斗力：",t.hjbd_str13="差距（$power$）",t.hjbd_str14="条件不符，无法领取",t.hjbd_str15="当前已击杀:$count$",t.hjbd_str16="击杀可增加 $count$ 点灵王神殿怒气",t.hjbd_str17="剩余boss归属：$count$次",t.hjbd_str18="神庙BOSS",t
}();__reflect(Lang.prototype,"Lang");var BaseTabBtn=function(t){function e(){var e=t.call(this)||this;return e.skinName="BtnTab1ZYCSSkin",e}return __extends(e,t),e.prototype.setSkinName=function(){},e.prototype.dataChanged=function(){var t=this.data;t&&""!=t&&(this.selectIcon.source=""+t+0,this.iconDisplay.source=""+t+1,this.iconDisplay.visible=!0)},e}(eui.ItemRenderer);__reflect(BaseTabBtn.prototype,"BaseTabBtn");var FuwenSysWin=function(t){function e(){var e=t.call(this)||this;return e.redPointHead=[RoleWin,RolePanel],e.winType=WinType.OverlayWin,e}return __extends(e,t),e.prototype.getCuiQuBtn=function(){return this.getPanel(FuwenTilianPanel).getCuiQuBtn()},e.prototype.getEquipItem=function(t){return void 0===t&&(t=0),this.getPanel(FuwenEquipPanel).getEquipItem(t)},e.prototype.getCloseBtn=function(){return this.closeBtn},e.panelNames=[FuwenEquipPanel,FuwenUpgradePanel],e}(BaseWinAutoTab);__reflect(FuwenSysWin.prototype,"FuwenSysWin"),window.FuwenSysWin=FuwenSysWin;var MeNeedLevelWin=function(t){function e(){var e=t.call(this)||this;return e.titleImgs=["","hd_zycs_hdjy","hd_zycs_hdzb","hd_zycs_hdjy"],e.layer=LayerMgr.Popup,e.skinName="MeNeedLevelWinEUI",e.addBg(),e.list0.itemRenderer=MeNeedLevelItem,e}return __extends(e,t),e.prototype.open=function(e){void 0===e&&(e=1),t.prototype.open.call(this),this.type=0==e?1:e,this.addItemTapE(this.list0,this.onListItem),this.setData()},e.prototype.setData=function(){var t=Cfg.getConfigs(ChannelConfig,CondType.Equal,ChannelConfig.funtype,this.type);t=t.sort(function(t,e){return SortUtil.sortAsc(t.order,e.order)});for(var e=[],i=0;i<t.length;i++){var n=new ChannelData,a=t[i];n.id=a.idx,n.config=a,e.push(n)}for(var o=[],i=0;i<e.length;i++){var n=e[i];n.isopen&&o.push(n)}for(var s=[],i=0;i<e.length;i++){var n=e[i];n.isopen||s.push(n)}SortUtil.sortOn(o,["order"],[SortType.up]),SortUtil.sortOn(s,["custom"],[SortType.up]),o=o.concat(s),this.list0.dataProvider=new eui.ArrayCollection(o),this.imgtitle.source=this.titleImgs[this.type]},e.prototype.onListItem=function(t){var i=t.itemRenderer,n=i.data;if(i){var a=GFunc.createTaskNavData(n.config.controlTarget);a.setsucceedFrontFun(function(){WinMgr.ins().closeAllWin(),closeWin(e)}),a["goto"]()}},e}(BaseWinSingle);__reflect(MeNeedLevelWin.prototype,"MeNeedLevelWin");var ChannelData=function(){function t(){}return Object.defineProperty(t.prototype,"limitConfig",{get:function(){return this._limitConfig||(this._limitConfig=Cfg.getConfig(LimitConfig,this.config.limitId))},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"custom",{get:function(){return this.limitConfig.custom},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"order",{get:function(){return this.config.order},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"isopen",{get:function(){return FbSys.ins().guajiData.guanId>=this.custom},enumerable:!0,configurable:!0}),t}();__reflect(ChannelData.prototype,"ChannelData"),window.MeNeedLevelWin=MeNeedLevelWin;var GuideComponentArrow=function(t){function e(){var e=t.call(this)||this;return e.type=0,e.initUI(),e}return __extends(e,t),e.prototype.initUI=function(){this.skinName="GuideWeekSkin",this.touchChildren=!1,this.touchEnabled=!1},e.prototype.setText=function(t){void 0===t&&(t=""),this.labelWord.text=void 0,this.labelWord.width=0/0,this.labelWord.height=0/0,this.labelWord.text=t,this.labelWord.validateNow(),this.addEvent(egret.Event.RESIZE,this.imgScale,this.onResize),this.onResize(null)},e.prototype.onResize=function(t){var e=this.labelWord.width+50,i=this.labelWord.height+40;this.imgScale.width!=e&&(this.imgScale.width=e),this.imgScale.height!=i&&(this.imgScale.height=i)},e}(BaseEUI);__reflect(GuideComponentArrow.prototype,"GuideComponentArrow"),window.GuideComponentArrow=GuideComponentArrow;var Guider=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return __extends(e,t),e.ins=function(){return t.getIns.call(this,e)},e.prototype.save=function(){1==this.guideData.step&&this.view.type==GuideType.Strong&&WinMgr.ins().closeTopLevel()},e.prototype.getViewByType=function(e){var i;switch(e){case GuideType.Strong:i=new GuideViewStrong;break;case GuideType.Week:i=new GuideViewWeek;break;case GuideType.Changzhu:i=new GuideViewWeekChangZhu;break;case GuideType.WeekMask:i=new GuideViewWeekMask;break;default:i=t.prototype.getViewByType.call(this,e)}return i.type=e,i},e.prototype.getDisplayObj=function(t,e){var i;switch(t){case GuiderId.Id1000:1==e&&(i=getWin(MainWin).getCom_TaskGroupdesc());break;case GuiderId.Id1001:1==e?i=getWin(MainWin).getCom_TaskGroupdesc():2==e?i=getWin(TipsWin).getTipsWinItemNewEquipBnt():3==e&&(i=getWin(TipsWin).getTipsWinItemNewEquipBnt());break;case GuiderId.Id1002:1==e?i=getWin(MainWin).getCom_TaskGroupdesc():2==e?i=getWin(SkillWin).getBtnOneKey():3==e?i=getWin(SkillWin).getcloseBtn0():4==e&&(i=getWin(MainWin).getCom_TaskGroupdesc());break;case GuiderId.Id1003:1==e?i=getWin(MainWin).getCom_TaskGroupdesc():2==e?i=getWin(ShouHuWin).getYongbingPanelBtnSend():3==e?i=getWin(ShouHuWin).getcloseBtn0():4==e&&(i=getWin(MainWin).getCom_TaskGroupdesc());break;case GuiderId.Id1005:1==e?i=getWin(MainWin).getCom_TaskGroupdesc():2==e?i=getWin(BagWin).getRongLianBtn():3==e?i=getWin(BagWin).getcloseBtn0():4==e&&(i=getWin(MainWin).getCom_TaskGroupdesc());break;case GuiderId.Id1004:1==e?i=getWin(MainWin).getCom_TaskGroupdesc():2==e?i=getWin(MainWin).getBossBtn():3==e?i=getWin(BossWin).getEquipBossPanelBtnChallenge():4==e&&(i=getWin(MainWin).getCom_TaskGroupdesc());break;case GuiderId.Id1006:1==e?i=getWin(MainWin).getCom_TaskGroupdesc():2==e?i=getWin(ForgeWin).getBtnOneKey():3==e?i=getWin(ForgeWin).getcloseBtn0():4==e&&(i=getWin(MainWin).getCom_TaskGroupdesc());break;case GuiderId.Id1007:1==e?i=getWin(MainWin).getCom_TaskGroupdesc():2==e&&(i=getWin(ShouHuWin).getYongbingStagePanelBtnSend());break;case GuiderId.Id1008:1==e?i=getWin(MainWin).getCom_TaskGroupdesc():2==e&&(i=getWin(ShouHuWin).getDamonLevelPanel_BtnSend());break;case GuiderId.Id1009:1==e?i=getWin(MainWin).getCom_TaskGroupdesc():2==e&&(i=getWin(ShouHuWin).getDamonStagePanel_BtnSend());break;case GuiderId.Id1010:1==e?i=getWin(MainWin).getCom_TaskGroupdesc():2==e&&(i=getWin(BossWin).getJueWangPanel_BtnChallenge());break;case GuiderId.Id1011:1==e&&(i=getWin(FuBenWin).getWanMoPanme_FightBtn());break;case GuiderId.Id1012:if(1==e){var n=getWin(MainWin);n&&n.com_ext.showQieHuan(!0),i=getWin(MainWin).getXunBaoBtn()}else 2==e?i=getWin(XunBaoWin).getXunBaoFaBaoPanel_MianFeiXunBaoBtn():3==e?i=getWin(XunBaoWin).getBagTab():4==e?i=getWin(XunBaoWin).getXunBaoBagPanel_getBuyAllQuChu():5==e?i=getWin(XunBaoWin).getcloseBtn0():6==e&&(i=getWin(MainWin).getCom_TaskGroupdesc());break;case GuiderId.Id1013:1==e?i=getWin(SkillWin).getHunqiPanelItem(0):2==e&&(i=getWin(HunqiUpWin).getBtnAct());break;case GuiderId.Id1014:1==e&&(i=getWin(ForgeWin).getGemPanel_BtnOneKey());break;case GuiderId.Id1015:1==e&&(i=getWin(MoJieWin).getStarsoulUpBtn());break;case GuiderId.Id1016:1==e&&(i=getWin(FuBenWin).getMeiRiFbPanel_BtnSend(FbGroup.Gold));break;case GuiderId.Id1017:1==e?i=getWin(MainWin).getGuaJiBtn():2==e&&(i=getWin(GuanJiWin).getImgTouch());break;case GuiderId.Id1018:1==e?i=getWin(ChatWin).getSendBtn():2==e&&(i=getWin(ChatWin).getCloseBtn0Bg());break;case GuiderId.Id1019:1==e&&(i=getWin(XunBaoWin).getXunBaoEquipPanel_MianFeiXunBaoBtn());break;case GuiderId.Id1020:1==e&&(i=getWin(FuBenWin).getEmoPanel_EnterBtn());break;case GuiderId.Id1021:1==e&&(i=getWin(JobWin).getZsBtn());break;case GuiderId.Id1022:break;case GuiderId.Id1023:1==e&&(i=getWin(BagWin).getShengWuPanelNew_BtnAct(),0==i.visible&&(i=getWin(BagWin).getShengWuPanelNew_btnGet()));break;case GuiderId.Id1024:1==e&&(i=getWin(JJCWin).getJJCPanelNew_JJCItem(1));break;case GuiderId.Id1025:1==e&&(i=getWin(FuBenWin).getMeiRiFbPanel_BtnSend(FbGroup.TianFu));break;case GuiderId.Id1026:1==e&&(i=getWin(FuBenWin).getMeiRiFbPanel_BtnSend(FbGroup.Damon));break;case GuiderId.Id1027:1==e?i=getWin(MainWin).com_ext.btn_Guild:2==e?i=getWin(BossWin).getTab(KfBossMainPanel):3==e&&(i=getWin(BossWin).getKfBossPanel_BossItem(0));break;case GuiderId.Id1028:1==e?i=getWin(MainWin).com_ext.btn_Guild:2==e?i=getWin(GuildMapWin).getBtnAct():3==e?i=getWin(GuildActivityWin2).getGuildBossPanel_TeamBtn():4==e?i=getWin(GuildBossTeamWin).getInvitationBtn():5==e&&(i=getWin(GuildBossTeamWin).getIntoBtn());break;case GuiderId.Id1035:1==e?i=getWin(MainWin).getCom_TaskGroupdesc():2==e?i=getWin(RoleWin).getBtnOneKeyEquip():3==e?i=getWin(RoleWin).getcloseBtn0():4==e&&(i=getWin(MainWin).getCom_TaskGroupdesc());break;case GuiderId.Id1037:1==e&&(i=getWin(FuBenWin).getMeiRiFbPanel_BtnSend(FbGroup.Yongbing));break;case GuiderId.Id1039:1==e?i=getWin(MainWin).getGuaJiBtn():2==e&&(i=getWin(GuanJiWin).getBtnSend());break;case GuiderId.Id1040:1==e?i=getWin(MainWin).getCom_TaskGroupdesc():2==e&&(i=getWin(ShouHuWin).getShenmoLevelPanel_BtnSend());break;case GuiderId.Id1041:1==e?i=getWin(MainWin).getCom_TaskGroupdesc():2==e&&(i=getWin(ShouHuWin).getShenmoStagePanel_BtnSend());break;case GuiderId.Id1042:1==e&&(i=getWin(FuBenWin).getMeiRiFbPanel_BtnSend(FbGroup.Shenmo));break;case GuiderId.Id1043:1==e&&(i=getWin(MainWin).getBtn_QuYu());break;case GuiderId.Id2001:1==e?i=getWin(MainWin).getXueseFbGrowBtn():(this.guideData.step=1,i=getWin(MainWin).getXueseFbGrowBtn());break;case GuiderId.Id2002:1==e?i=getWin(MainWin).getEmoFbGrowBtn():(this.guideData.step=1,i=getWin(MainWin).getEmoFbGrowBtn());break;case GuiderId.Id9995:1==e&&(i=getWin(MainWin).getCom_TaskGroupdesc());break;case GuiderId.Id9996:1==e&&(i=getWin(MainWin).getCom_TaskGroupdesc());break;case GuiderId.Id9997:1==e?i=getWin(MainWin).getCom_TaskGroupdesc():2==e&&(i=getWin(MainWin).getCom_TaskGroupdesc());break;case GuiderId.Id9999:1==e&&(i=getWin(MainWin).getMowangBtn());break;case GuiderId.Id9989:1==e&&(i=getWin(XJHBWin).getBtn())}return i},e.prototype.setPauseParam=function(e,i,n){for(var a=[],o=3;o<arguments.length;o++)a[o-3]=arguments[o];if(!this.isPause)if(t.prototype.setPauseParam.call(this,e,i),n==PauseType.OpenWin){var s=a[0];this.winName=ComUtil.getObjName(s),this.addLsn(WinMgr.ins().patchWinOpen,this.onWinOpen)}else n==PauseType.EnterFuben&&(this.fbGroup=a[0],this.addLsn(LogicSys.ins().patchEnterMap,this.enterMap))},e.prototype.onWinOpen=function(t){t==this.winName&&(this["continue"](this.guideData.id,this.guideData.step+1),this.winName=null,this.removeAll())},e.prototype.enterMap=function(){FbSys.ins().fubenConfig.group==this.fbGroup&&(this["continue"](this.guideData.id,this.guideData.step+1),this.fbGroup=null,this.removeAll())},e.prototype.close=function(){this.removeAll(),t.prototype.close.call(this)},e.prototype.closeById=function(e){this.guideData&&e==this.guideData.id&&(this.removeAll(),t.prototype.close.call(this))},e.prototype.patchGuideContinue=function(t){return this.guideData&&this.guideData.id==t&&(this["continue"](this.guideData.id,this.guideData.step+1),this.removeAll()),t},e.prototype.getGuideData=function(){return this.guideData},e}(GuiderBase);__reflect(Guider.prototype,"Guider");var PauseType;!function(t){t[t.OpenWin=0]="OpenWin",t[t.EnterFuben=1]="EnterFuben",t[t.DIY=2]="DIY"}(PauseType||(PauseType={}));var GuiderId;!function(t){t[t.Id1000=1e3]="Id1000",t[t.Id1001=1001]="Id1001",t[t.Id1002=1002]="Id1002",t[t.Id1003=1003]="Id1003",t[t.Id1004=1004]="Id1004",t[t.Id1005=1005]="Id1005",t[t.Id1006=1006]="Id1006",t[t.Id1007=1007]="Id1007",t[t.Id1008=1008]="Id1008",t[t.Id1009=1009]="Id1009",t[t.Id1010=1010]="Id1010",t[t.Id1011=1011]="Id1011",t[t.Id1012=1012]="Id1012",t[t.Id1013=1013]="Id1013",t[t.Id1014=1014]="Id1014",t[t.Id1015=1015]="Id1015",t[t.Id1016=1016]="Id1016",t[t.Id1017=1017]="Id1017",t[t.Id1018=1018]="Id1018",t[t.Id1019=1019]="Id1019",t[t.Id1020=1020]="Id1020",t[t.Id1021=1021]="Id1021",t[t.Id1022=1022]="Id1022",t[t.Id1023=1023]="Id1023",t[t.Id1024=1024]="Id1024",t[t.Id1025=1025]="Id1025",t[t.Id1026=1026]="Id1026",t[t.Id1027=1027]="Id1027",t[t.Id1028=1028]="Id1028",t[t.Id1035=1035]="Id1035",t[t.Id1036=1036]="Id1036",t[t.Id1037=1037]="Id1037",t[t.Id1039=1039]="Id1039",t[t.Id1040=1040]="Id1040",t[t.Id1041=1041]="Id1041",t[t.Id1042=1042]="Id1042",t[t.Id1043=1043]="Id1043",t[t.Id2000=2e3]="Id2000",t[t.Id2001=2001]="Id2001",t[t.Id2002=2002]="Id2002",t[t.Id9989=9989]="Id9989",t[t.Id9995=9995]="Id9995",t[t.Id9996=9996]="Id9996",t[t.Id9997=9997]="Id9997",t[t.Id9999=9999]="Id9999"}(GuiderId||(GuiderId={})),window.Guider=Guider;var ActPanel1_3=function(t){function e(){var e=t.call(this)||this;return e.list.itemRenderer=ActItem1_3,e.imgBg&&(e.imgBg.source="qmkh_zycs_bg1_jpg"),e.actBg.source="activity_zlhf",e}return __extends(e,t),e.prototype.open=function(e){t.prototype.open.call(this,e),this.addLsn(RechargePowerSys.ins().patchXunZhangBuy,this.updateData)},e.prototype.isActCard=function(){return RechargePowerSys.ins().xunZhangData.isAct()},e.prototype.onItemLink=function(){openWin(RoleWin)},e.prototype.onCardLink=function(){openWin(RechargeActSys.ins().firstRechargeData.isRecharge()?XunZhangBuyWin:FirstRechargeBuyWin)},e}(ActPanel1_1);__reflect(ActPanel1_3.prototype,"ActPanel1_3"),window.ActPanel1_3=ActPanel1_3;var GuideViewWeek=function(t){function e(){return t.call(this)||this}return __extends(e,t),e.prototype.getMouseCode=function(t){var e;switch(t.type){case egret.TouchEvent.TOUCH_TAP:e=this.rect.contains(t.stageX,t.stageY)?1:2;break;case egret.TouchEvent.TOUCH_MOVE:e=this.globalRect.contains(t.stageX,t.stageY)?0:2;break;default:e=0}return e},e}(GuideView);__reflect(GuideViewWeek.prototype,"GuideViewWeek"),window.GuideViewWeek=GuideViewWeek;var GuildActivityWin2=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.redPointHead=[GuildMapWin],e.winType=WinType.OverlayWin,e}return __extends(e,t),e.prototype.getGuildBossPanel_TeamBtn=function(){return this.getPanel(GuildBossPanel).getTeamBtn()},e.panelNames=[GuildBossPanel,GuildGiftPanel,GuildSiegePanel],e}(BaseWinAutoTab);__reflect(GuildActivityWin2.prototype,"GuildActivityWin2"),window.GuildActivityWin2=GuildActivityWin2;var ActPanel1_7=function(t){function e(){var e=t.call(this)||this;return e.initUI(),e}return __extends(e,t),e.prototype.initUI=function(){t.prototype.initUI.call(this),this.list.itemRenderer=ActItem1_7,this.list.dataProvider=this.listData=new eui.ArrayCollection},e.prototype.setSkinName=function(){this.skinName="ActPanel1_7EUI"},e.prototype.open=function(e){t.prototype.open.call(this,e),this.addClickE(this.btnSend,this.onClick),this.addLsn(ActSys.ins().patchRechargeEveryDay,this.updateData),this.addLsn(ActSys.ins().patchActivityIsGetAwards,this.updateData),this.addLsn(RechargePowerSys.ins().patchXunZhangBuy,this.updateData),this.updateData()},e.prototype.updateData=function(){this.actData=ActSys.ins().getActDataById(this.actId);var t=this.actData.getItemDatas();SortUtil.sortOn(t,["status","dabiao"],[SortType.up,SortType.up]),this.listData.replaceAll(t),this.btnSend.visible=!RechargePowerSys.ins().xunZhangData.isAct(),this.imgYjh.visible=RechargePowerSys.ins().xunZhangData.isAct()},e.prototype.updateTime=function(){this.actData&&(this.lbTime.textFlow=addColorTF(this.actData.getformatTime()))},e.prototype.onClick=function(t){switch(t.target){case this.btnSend:openWin(RechargeActSys.ins().firstRechargeData.isRecharge()?XunZhangWin:FirstRechargeBuyWin)}},e}(ActBasePanel);__reflect(ActPanel1_7.prototype,"ActPanel1_7"),window.ActPanel1_7=ActPanel1_7;var ActPanel12_1=function(t){function e(){var e=t.call(this)||this;return e.skinName="ActPanel12_1EUI",e}return __extends(e,t),e.prototype.open=function(e){t.prototype.open.call(this,e),this.actData=ActSys.ins().getActDataById(this.actId);var i=this.actData.getConfig(1);this.lbDesc.textFlow=StrUtil.toTF(i.desc)},e.prototype.close=function(){t.prototype.close.call(this)},e.prototype.updateTime=function(){this.actData&&(this.lbTime.textFlow=addColorTF(this.actData.getformatTime()))},e}(ActBasePanel);__reflect(ActPanel12_1.prototype,"ActPanel12_1"),window.ActPanel12_1=ActPanel12_1;var LoginAwardPanel=function(t){function e(){var e=t.call(this)||this;return e.menuArray=new eui.ArrayCollection,e.rewardArray=new eui.ArrayCollection,e.initUI(),e}return __extends(e,t),e.prototype.initUI=function(){this.skinName="LoginAwardPanelEUI",this.menuList.itemRenderer=LoginAwardPanelItem,this.awardList.itemRenderer=ItemBaseRewardActivity,this.menuList.dataProvider=this.menuArray,this.awardList.dataProvider=this.rewardArray,this.mcIcon=new McIcon,this.groupMcIcon.addChild(this.mcIcon),this.mcBtnGet=new MC,this.mcBtnGet.x=this.btnGetAward.width/2,this.mcBtnGet.y=this.btnGetAward.height/2,this.btnGetAward.addChildAt(this.mcBtnGet,this.btnGetAward.numChildren-1)},e.prototype.open=function(){t.prototype.open.call(this),this.addClickE(this.btnGetAward,this.onClick),this.addItemTapE(this.menuList,this.onItemClick),this.addLsn(ActSys.ins().patchLoginAwardData,this.updateDefaultSelect),this.addLsn(RpSys.ins().patchRp,this.updateRp),this.updateDefaultSelect()},e.prototype.close=function(){t.prototype.close.call(this),this.mcIcon.close()},e.prototype.updateRp=function(t){if(!t||t.check(e))for(var i=this.menuList.numElements,n=0;i>n;n++){var a=this.menuList.getElementAt(n);a&&a.updateRedPoint()}},e.prototype.updateDefaultSelect=function(){var t=ActSys.ins().getActDataById(ActId.ID_99800);this.menuArray.source=t.actDataLogins,this.menuList.validateNow();for(var e=t.actDataLogins.length,i=0;e>i;i++){var n=t.actDataLogins[i];if(!n.hasGetAward||i==e-1){e-4>i?this.menuList.scrollH=141*i+-10*(i-1):this.menuList.scrollH=141*(e-4)+-10*(e-5),this.setMenuSelect(i),this.updateCurSelect(n);break}}},e.prototype.updateCurSelect=function(t){if(this.rewardArray.source=t.config.rewards,this.rewardArray.refresh(),this.desc=t.config.desc,this.dayStr=Lang.replaceEnum("第%s天",t.day),this.mcIcon.open(t.config.mcIcon),t.hasGetAward)this.imgYlq.visible=!0,this.btnGetAward.visible=!1;else{this.imgYlq.visible=!1,this.btnGetAward.visible=!0;var e=t.hasAwardCanGet();this.btnGetAward.redPoint.visible=e,this.mcBtnGet.visible=e,e&&this.mcBtnGet.playFile(getEffName("public_zycs_button01"),-1)}},e.prototype.onItemClick=function(t){this.setMenuSelect(t.itemIndex),this.updateCurSelect(t.item)},e.prototype.setMenuSelect=function(t){this.menuList.selectedIndex=t;for(var e=this.menuList.numElements,i=0;e>i;i++){var n=this.menuList.getElementAt(i);n&&n.setSelectStatus(t==i)}},e.prototype.onClick=function(t){switch(t.currentTarget){case this.btnGetAward:var e=ActSys.ins().getActDataById(ActId.ID_99800),i=e.getDataLoginByIndex(this.menuList.selectedIndex);i&&i.hasAwardCanGet()?BagSys.ins().bagSatisfy()&&ActSys.ins().sendGetSevenDayAwards(i.id):showtipsFail(Lang.act_str26)}},e.openCheck=function(){var e=t.openCheck.call(this);if(e){var i=ActSys.ins().getActDataById(ActId.ID_99800);e=i.isSeeActivity(),e||showTipsWarn(Lang.act_str28)}return e},e.getSysId=function(){return 267},e.getTitle=function(){return"btz_zycs_dljl"},e.getTabTitle=function(){return"bqz_zycs_dljl"},e}(BasePanel);__reflect(LoginAwardPanel.prototype,"LoginAwardPanel"),window.LoginAwardPanel=LoginAwardPanel;var GuildApplyPanel=function(t){function e(){var e=t.call(this)||this;return e.skinName="GuildApplyPanelEUI",e.list.itemRenderer=GuildApplyRender,e.arrayCollection=new eui.ArrayCollection,e.list.dataProvider=e.arrayCollection,e}return __extends(e,t),e.prototype.open=function(){t.prototype.open.call(this),this.addClickE(this.btnCreat,this.onClick),this.addLsn(GuildSys.ins().patchGuildList,this.updateList),this.addLsn(GuildSys.ins().patchGuildJoinResult,this.updateList),GuildSys.ins().sendGuildList(),this.updateList()},e.prototype.updateList=function(){this.currentState=0!=GuildSys.ins().guildListInfos.length?"sHasGuild":"sNoGuild",this.arrayCollection.replaceAll(GuildSys.ins().guildListInfos)},e.prototype.onClick=function(t){switch(t.currentTarget){case this.btnCreat:openWin(GuildCreateWin)}},e.getSysId=function(){return 255},e.openCheck=function(){return GFunc.checkSysOpen(255)?!0:!1},e.getTitle=function(){return"btz_zycs_zm"},e.getTabTitle=function(){return"bqz_zycs_zm"},e}(BasePanel);__reflect(GuildApplyPanel.prototype,"GuildApplyPanel"),window.GuildApplyPanel=GuildApplyPanel;var GuildInfoPanel=function(t){function e(){var e=t.call(this)||this;return e.initUI(),e}return __extends(e,t),e.prototype.initUI=function(){this.skinName="GuildInfoPanelEUI",this.labelSeeApply.textFlow=addColorTF('<a href="event:"><u>'+this.labelSeeApply.text+"</u></a>"),this.labelSeeApply.touchEnabled=!0,this.labelChangeNotice.textFlow=addColorTF('<a href="event:"><u>'+this.labelChangeNotice.text+"</u></a>"),this.labelChangeNotice.touchEnabled=!0,this.list.itemRenderer=GuildInfoRender,this.arrayCollecttion=new eui.ArrayCollection,this.list.dataProvider=this.arrayCollecttion},e.prototype.open=function(){t.prototype.open.call(this),this.addLinkE(this.labelChangeNotice,this.onLinkChange),this.addClickE(this.labelSeeApply,this.onLinkApply),this.addClickE(this.labelChangeNotice,this.onLinkChange),this.addClickE(this.btnJX,this.onClick),this.addLsn(GuildSys.ins().patchGuildInfo,this.onGuildInfo),this.addLsn(GuildSys.ins().patchGuildMembers,this.onUpdateMember),this.addLsn(GuildSys.ins().patchMyGuildInfo,this.onUpdateMyInfo),this.addLsn(GuildSys.ins().patchChangeNotice,this.onGuildNotice),this.addLsn(GuildSys.ins().patchGuildMoney,this.onGuildMoney),this.addLsn(RpSys.ins().patchRp,this.updateRp),GuildSys.ins().sendGuildMembers(),this.onUpdateMyInfo(),this.onGuildInfo(),this.updateRp()},e.prototype.updateRp=function(t){void 0===t&&(t=null),(!t||t.check(e))&&(this.redPointApply.visible=RpSys.ins().getData(GuildMapWin,GuildWin,e,"hasApplys"),this.btnJX.redPoint.visible=RpSys.ins().getData(GuildMapWin,GuildWin,e,GuildConWin))},e.prototype.onClick=function(t){switch(t.currentTarget){case this.btnJX:openWin(GuildConWin)}},e.prototype.onUpdateMyInfo=function(){this.labelMy.text=""+Actor.ins().getCurrency(CurType.guildContrib),this.labelSeeApply.visible=GuildSys.ins().myOffice>=GuildOffice.FU_MENG_ZHU,this.labelChangeNotice.visible=GuildSys.ins().myOffice>=GuildOffice.FU_MENG_ZHU},e.prototype.onGuildInfo=function(){this.labelName.text=GuildSys.ins().guildName,this.labelLv.text=GuildSys.ins().guildLv.toString(),this.onGuildMoney(),this.onGuildNotice(),this.onUpdateMember()},e.prototype.onGuildNotice=function(){this.labelNotice.text=GuildSys.ins().notice},e.prototype.onGuildMoney=function(){this.labelMoney.text=""+Actor.ins().getCurrency(CurType.fuildfund)},e.prototype.onUpdateMember=function(){this.labelMemberCount.text=GuildSys.ins().getMemberNum()+"/"+Cfg.getConfig(GuildConfig).maxMember[GuildSys.ins().guildLv-1],this.arrayCollecttion.replaceAll(GuildSys.ins().getGuildMembers(1))},e.prototype.onLinkChange=function(t){openWin(GuildNoticeWin)},e.prototype.onLinkApply=function(){openWin(GuildOtherApplyWin)},e.getTitle=function(){return"btz_zycs_zmgl"},e.getSysId=function(){return 140},e.openCheck=function(){return GFunc.checkSysOpen(140)?GuildSys.ins().isAddGuild()?!0:(openWin(GuildNavWin),showtipsFail(Lang.guild_str7),!1):void 0},e.getTabTitle=function(){return"bqz_zycs_jc"},e}(BasePanel);__reflect(GuildInfoPanel.prototype,"GuildInfoPanel"),window.GuildInfoPanel=GuildInfoPanel;var GuildListPanel=function(t){function e(){var e=t.call(this)||this;return e.initUI(),e}return __extends(e,t),e.prototype.initUI=function(){this.skinName="GuildListPanelEUI",this.list.itemRenderer=GuildListRender},e.prototype.open=function(){this.addLsn(GuildSys.ins().patchGuildList,this.updateList),GuildSys.ins().sendGuildList(),this.updateList()},e.prototype.updateList=function(){this.list.dataProvider=new eui.ArrayCollection(GuildSys.ins().guildListInfos)},e.getTitle=function(){return"btz_zycs_zmgl"},e.getSysId=function(){return 140},e.openCheck=function(){return GFunc.checkSysOpen(140)?GuildSys.ins().isAddGuild()?!0:(openWin(GuildNavWin),showtipsFail(Lang.guild_str7),!1):void 0},e.getTabTitle=function(){return"bqz_zycs_lb"},e}(BasePanel);__reflect(GuildListPanel.prototype,"GuildListPanel"),window.GuildListPanel=GuildListPanel;var GuildManagePanel=function(t){function e(){var e=t.call(this)||this;return e.initUI(),e}return __extends(e,t),e.prototype.initUI=function(){this.skinName="GuildManagePanelEUI",this.listBuild.itemRenderer=GuildManageRender,this.listEvent.itemRenderer=GuildManagerEvenRender},e.prototype.open=function(){t.prototype.open.call(this),this.addClickE(this.listBuild,this.onListTouch),this.addLsn(GuildSys.ins().patchGuildInfo,this.updateList),this.addLsn(GuildSys.ins().patchUpBuilding,this.updateList),this.addLsn(GuildSys.ins().patchManageList,this.update),this.addLsn(GuildSys.ins().patchGuildMoney,this.update),GuildSys.ins().sendGuildInfo(),GuildSys.ins().sendManageList(),this.updateList()},e.prototype.update=function(){this.listEvent.dataProvider=new eui.ArrayCollection(GuildSys.ins().records)},e.prototype.updateList=function(){this.listBuild.dataProvider=new eui.ArrayCollection([GuildBuildingType.GUILD_HALL,GuildBuildingType.GUILD_SKILL,GuildBuildingType.GUILD_SHOP,GuildBuildingType.GUILD_ACTIVITY])},e.prototype.onListTouch=function(t){if(t.target instanceof eui.Button){var e=t.target.parent;e.onClick(t.target)}},e.getTitle=function(){return"btz_zycs_zmgl"},e.getSysId=function(){return 140},e.openCheck=function(){return GFunc.checkSysOpen(140)?GuildSys.ins().isAddGuild()?!0:(openWin(GuildNavWin),showtipsFail(Lang.guild_str7),!1):void 0},e.getTabTitle=function(){return"bqz_zycs_gl"},e}(BasePanel);__reflect(GuildManagePanel.prototype,"GuildManagePanel"),window.GuildManagePanel=GuildManagePanel;var GuildMapPanel=function(t){function e(){var e=t.call(this)||this;return e.skinName="GuildMapPanelEUI",e.list.itemRenderer=GuildMapRender,e.arrayCollection=new eui.ArrayCollection,e.list.dataProvider=e.arrayCollection,e}return __extends(e,t),e.prototype.open=function(){t.prototype.open.call(this),this.addClickE(this.btnShow,this.onClick),this.addClickE(this.btnManager,this.onClick),this.addClickE(this.btnWar,this.onClick),this.addClickE(this.btnAct,this.onClick),this.addClickE(this.btnShop,this.onClick),this.addClickE(this.btnSkill,this.onClick),this.addLsn(GuildSys.ins().patchGuildMembers,this.updateList),this.addLsn(RpSys.ins().patchRp,this.updateRp),this.addLsn(GuildWarSys.ins().patchGuildWarStarInfo,this.updateGuildWarStarInfo),this.addLsn(GuildActSys.ins().patchGuildSiegeInfo,this.updaeGuildSiegeMons),GuildSys.ins().sendGuildInfo(),GuildSys.ins().sendOtherApplyInfos(),GuildSys.ins().sendGuildMembers(),GuildSys.ins().sendMyGuildInfo(),this.updateRp(),this.updateGuildWarStarInfo(),this.updaeGuildSiegeMons(),this.siegeMonsPanel&&this.siegeMonsPanel.open()},e.prototype.close=function(){t.prototype.close.call(this),this.siegeMonsPanel&&this.siegeMonsPanel.close()},e.prototype.updateRp=function(t){void 0===t&&(t=null),(!t||t.check(GuildActivityWin2))&&(this.btnAct.redPoint.visible=RpSys.ins().getData(GuildMapWin,GuildActivityWin2)),(!t||t.check(GuildSkillWin))&&(this.btnSkill.redPoint.visible=RpSys.ins().getData(GuildMapWin,GuildSkillWin)),(!t||t.check(GuildWin))&&(this.btnManager.redPoint.visible=RpSys.ins().getData(GuildMapWin,GuildWin)),(!t||t.check(GuildWarMainWin))&&(this.btnWar.redPoint.visible=RpSys.ins().getData(GuildMapWin,GuildBattleMainWin)),(!t||t.check(GuildShopWin))&&(this.btnShop.redPoint.visible=RpSys.ins().getData(GuildMapWin,GuildShopWin))},e.prototype.updateGuildWarStarInfo=function(){GuildWarSys.ins().getModel().isWatStart?(this.eff1||(this.eff1=new MC,this.eff1.x=79,this.eff1.y=300,this.eff1.playFile(getEffName("loran_mountain"),-1),this.eff2=new MC,this.eff2.x=80,this.eff2.y=310,this.eff2.playFile(getEffName("loran_sword"),-1)),this.group.addChild(this.eff1),this.group.addChild(this.eff2)):this.eff1&&(this.group.removeChild(this.eff1),this.group.removeChild(this.eff2))},e.prototype.updaeGuildSiegeMons=function(){var t=GuildActSys.ins().siegeModel;t.isOpen?this.siegeMonsPanel||(this.siegeMonsPanel=new GuildSiegeMonsPanel,this.addChild(this.siegeMonsPanel),this.siegeMonsPanel.open()):this.siegeMonsPanel&&(this.siegeMonsPanel.close(),DisUtil.remove(this.siegeMonsPanel),this.siegeMonsPanel=null)},e.prototype.onClick=function(t){switch(t.target){case this.btnShow:this.list.visible=!this.list.visible;break;case this.btnSkill:openWin(GuildSkillWin);break;case this.btnAct:openWin(GuildActivityWin2);break;case this.btnManager:openWin(GuildWin);break;case this.btnWar:openWin(GuildBattleMainWin);break;case this.btnShop:Actor.ins().serverOpenDay>=Cfg.getConfig(GuildStoreConfig).day-1?openWin(GuildShopWin):showtipsFail(Lang.guild_str36.replace("$day$",""+Cfg.getConfig(GuildStoreConfig).day));break;case this.btnAct:showtipsFail(Lang.guild_str37)}},e.prototype.updateList=function(){this.arrayCollection.replaceAll(GuildSys.ins().getGuildMembers(2))},e.getTitle=function(){return"btz_zycs_zm"},e.getTabTitle=function(){return"bqz_zycs_sq"},e.openCheck=function(){return GuildSys.ins().isAddGuild()?!0:(openWin(GuildNavWin),showtipsFail(Lang.guild_str122),!1)},e.prototype.getBtnAct=function(){return this.btnAct},e}(BasePanel);__reflect(GuildMapPanel.prototype,"GuildMapPanel"),window.GuildMapPanel=GuildMapPanel;var SevenDayRankInfoPanel=function(t){function e(){var e=t.call(this)||this;return e.index=0,e.skinName="SevenDayRankInfoPanelEUI",e.list.itemRenderer=SevenDayRankInfoItem,e.list.dataProvider=e.arrDatas=new eui.ArrayCollection,e}return __extends(e,t),e.prototype.open=function(){t.prototype.open.call(this),this.index=Actor.ins().serverOpenDay,Actor.ins().serverOpenDay>this.index?ActSys.ins().sendSevenDayRank(GConst.rankType[this.index]):Actor.ins().serverOpenDay==this.index&&RankSys.ins().sendGetRankData(GConst.rankType[this.index]),this.addLsn(RankSys.ins().patchRankData,this.updatePanel1),this.addLsn(ActSys.ins().patchSevenDayRank,this.updatePanel2),e.RankType=GConst.rankType[this.index]},e.prototype.updatePanel1=function(){var t=RankSys.ins().getRankData(GConst.rankType[this.index]).getFullDatalist().concat();t=t.slice(0,20),this.arrDatas.replaceAll(t),this.dabiaoTxt.text=""+Lang.act_str9[this.index]},e.prototype.updatePanel2=function(t){var e=t.getFullDatalist();e=e.slice(0,10),this.arrDatas.replaceAll(e),this.dabiaoTxt.text=""+Lang.act_str9[this.index]},e.getTitle=function(){return"btz_zycs_ph"},e.RankType=0,e}(BasePanel);__reflect(SevenDayRankInfoPanel.prototype,"SevenDayRankInfoPanel"),window.SevenDayRankInfoPanel=SevenDayRankInfoPanel;var ItemData=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.count=0,e.keepTime=0,e.attZY=[],e.attXY=new AttrData,e._power=-1,e}return __extends(e,t),e.prototype.parser=function(e){t.prototype.parser.call(this,e),this.id=0!=this.id?this.id:-1,this._power=-1},Object.defineProperty(e.prototype,"cfg",{get:function(){return this.id>-1?(this._itemConfig&&this._itemConfig.id!=this.id&&(this._itemConfig=Cfg.getItemCfg(this.id)),this._itemConfig||(this._itemConfig=Cfg.getItemCfg(this.id))):null},enumerable:!0,configurable:!0}),e.prototype.isZhuoYe=function(){for(var t=0;t<this.attZY.length;t++)if(this.attZY[t].value>0)return!0;return!1},Object.defineProperty(e.prototype,"power",{get:function(){return this.id>CurType.max?(this._power=-1==this._power?BagSys.ins().getPowerOfItem(this):this._power,this._power):0},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"quality",{get:function(){return this.cfg.quality},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"equipName",{get:function(){var t="";return t=ItemType.isGodEquip(this.cfg.type)?Lang.common_str1+"-"+this.cfg.getName():(this.isZhuoYe()?Lang.common_str2:"")+this.cfg.getName()},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"rank",{get:function(){return this.cfg.rank},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"level",{get:function(){return this.cfg.level},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"star",{get:function(){return this.cfg.star},enumerable:!0,configurable:!0}),e.prototype.hasEquipOn=function(){return this.id>CurType.max
},e.prototype.getMaxUseCount=function(){return Math.min(200,this.count)},Object.defineProperty(e.prototype,"redPointSort",{get:function(){return RpSys.ins().getData(BagWin,BagItemPanel,this.cfg.type)},enumerable:!0,configurable:!0}),e}(ItemDataBase);__reflect(ItemData.prototype,"ItemData");var GuildSkillPanel=function(t){function e(){var e=t.call(this)||this;return e.initUI(),e}return __extends(e,t),e.prototype.initUI=function(){this.skinName="GuildSkillPanelEUI",this.setSkinPart("priceGongXiang",new PriceIcon),this.setSkinPart("priceXiaoHao",new PriceIcon),this.setSkinPart("pricejb",new PriceIcon),this.setSkinPart("skillItem",new GuildSkillItem),this.listArray=new eui.ArrayCollection,this.listSkill.dataProvider=this.listArray,this.listSkill.itemRenderer=GuildSkillItem,this.lbCurAttr.lineSpacing=5,this.lbNextAttr.lineSpacing=5,this.priceGongXiang.setType(CurType.guildContrib),this.priceXiaoHao.setType(CurType.guildContrib),this.pricejb.setType(CurType.gold),this.lbGoto.textFlow=addColorTF(Lang.guild_str1,null,!0),this.progressBar.labelDisplay.visible=!0,this.skillItem.showLv(!1),this.setRedPointHead(GuildMapWin,GuildSkillWin),t.prototype.initUI.call(this)},e.prototype.open=function(e){void 0===e&&(e=0),t.prototype.open.call(this,e),this.addLsn(GuildSys.ins().patchGuildSkillInfo,this.update),this.addLsn(GuildSys.ins().patchMyGuildInfo,this.updateGongXian),this.addClickE(this.btnOk,this.onClick),this.addClickE(this.lbGoto,this.onClick),this.addItemTapE(this.listSkill,this.onListItemTap),GuildSys.ins().sendGuildSkillInfo(),this.addLsn(RpSys.ins().patchRp,this.updateRp),this.updateRp(),this.update(),this.updateGongXian()},e.prototype.update=function(){this.showSkillList()},e.prototype.showSkillList=function(){var t=GuildSys.ins().getGuildSkillArray(0);if(this.listArray.source=t,this.curData)1==this.curData.type?this.curData=t[this.curData.index]:this.curData=t[this.curData.index+3];else{this.listSkill.validateNow();var e=this.listSkill.getElementAt(0);this.curItem=e,this.curItem&&(this.curItem.setSelect(!0),this.curData=t[0])}this.showSkillData(this.curData)},e.prototype.showSkillData=function(t){this.curData=t,1==t.type?(this.updateSkillData(),this.currentState="h1"):(this.updateSkillData(),this.currentState="h2")},e.prototype.updateSkillData=function(){var t,i,n=this.curData.level,a="",o=0;1==this.curData.type?(t=Cfg.getGuildCommonSkillConfig(this.curData.index+1,n),i=Cfg.getGuildCommonSkillConfig(this.curData.index+1,n+1),this.lbDesc.text=Cfg.getConfig(GuildConfig).skillDesc[this.curData.index],a=Cfg.getConfig(GuildConfig).commonSkillNames[this.curData.index],o=13470975):(t=Cfg.getGuildPracticeSkillConfig(this.curData.index+1,n),i=Cfg.getGuildPracticeSkillConfig(this.curData.index+1,n+1),0!=this.curData.level&&t.level>=i.level?this.progressBar.alpha=0:(this.progressBar.maximum=i.upExp,this.progressBar.value=this.curData.exp,this.progressBar.alpha=1),a=Cfg.getConfig(GuildConfig).practiceSkillNames[this.curData.index],o=16751375),this.skillItem.data=this.curData,this.lbName.text=a+"（Lv．"+this.curData.level+"）",this.lbName.textColor=o,this.priceXiaoHao.setPrice(i.contribute),this.priceXiaoHao.priceLabel.textColor=Actor.ins().getCurrency(CurType.guildContrib)<i.contribute?16727614:16773541,this.pricejb.setPrice(i.money),this.pricejb.priceLabel.textColor=Actor.ins().getCurrency(CurType.gold)<i.money?16727614:16773541;var s=addColor("%k",5949490)+addColor("：%v",5949490),r=addColorTF(AttrData.parse(t.attrs,{fm:s}).join("\n"));0==this.curData.level?this.lbCurAttr.textFlow=addColorTF(Lang.guild_str45,5949490):this.lbCurAttr.textFlow=r;var u=GuildSys.ins().chekUpSkill(this.curData);this.groupGoto.visible=!u,this.btnOk.visible=u,0!=this.curData.level&&t.level>=i.level?(this.attrGroup.visible=!1,this.groupGoto.visible=!1,this.maxGroup.visible=!0,this.lbCurAttr0.textFlow=r):(this.attrGroup.visible=!0,this.maxGroup.visible=!1,this.lbNextAttr.textFlow=addColorTF(AttrData.parse(i.attrs,{fm:s}).join("\n"))),this.btnOk.redPoint.visible=RpSys.ins().getData(GuildMapWin,GuildSkillWin,e,0,this.curData.type+"_"+this.curData.index),2==this.curData.type?this.btnOk.label=Lang.guild_str46:this.btnOk.label=0==this.curData.level?Lang.guild_str47:Lang.common_str37},e.prototype.onClick=function(t){switch(t.currentTarget){case this.btnOk:var e=void 0,i=this.curData.level+1;if(e=1==this.curData.type?Cfg.getGuildCommonSkillConfig(this.curData.index+1,i):Cfg.getGuildPracticeSkillConfig(this.curData.index+1,i),!GFunc.checkCurrency(CurType.guildContrib,e.contribute))return;if(!GFunc.checkCurrency(CurType.gold,e.money))return;1==this.curData.type?GuildSys.ins().sendLearnGuildSkill(0,this.curData.index+1):GuildSys.ins().sendPracticeGuildSkill(0,this.curData.index+1);break;case this.lbGoto:openWin(GuildWin,1),closeWin(GuildSkillWin)}},e.prototype.onListItemTap=function(t){var e=t.itemRenderer,i=t.item;void 0!=i&&(this.showSkillData(i),this.curItem.setSelect(!1),e.setSelect(!0),this.curItem=e)},e.prototype.updateGongXian=function(){this.priceGongXiang.setPriceColor(16773541),this.priceGongXiang.setPrice(Actor.ins().getCurrency(CurType.guildContrib))},e.getTitle=function(){return"btz_zycs_zmst"},e.getTabTitle=function(){return"bqz_zycs_zmst"},e.getSysId=function(){return 229},e.openCheck=function(){return GFunc.checkSysOpen(229)?GuildSys.ins().isAddGuild()?!0:(openWin(GuildNavWin),showTipsWarn(Lang.guild_str7),!1):void 0},e}(BasePanel);__reflect(GuildSkillPanel.prototype,"GuildSkillPanel"),window.GuildSkillPanel=GuildSkillPanel;var GuildNavWin=function(t){function e(){return t.call(this)||this}return __extends(e,t),e.openCheck=function(){return openWin(GuildSys.ins().isAddGuild()?GuildMapWin:GuildApplyWin),!1},e}(BaseWinSingle);__reflect(GuildNavWin.prototype,"GuildNavWin"),window.GuildNavWin=GuildNavWin;var GuildShopWin=function(t){function e(){var e=t.call(this)||this;return e.winType=WinType.OverlayWin,e}return __extends(e,t),e.panelNames=[GuildShopPanel],e}(BaseWinAutoTab);__reflect(GuildShopWin.prototype,"GuildShopWin"),window.GuildShopWin=GuildShopWin;var GuildInteRankInfo=function(t){function e(){var e=t.call(this)||this;return e.skinName="GuildInteRankInfoEUI",e.list.itemRenderer=GuildInteRankItemRenderer,e.data=new eui.ArrayCollection([]),e}return __extends(e,t),e.prototype.open=function(){this.list.dataProvider=this.data,this.addLsn(GuildWarSys.ins().patchRankInfo,this.refushList),GuildWarSys.ins().requestGuildRank()},e.prototype.refushList=function(){this.data.replaceAll(GuildWarSys.ins().getModel().guildRankList.concat())},e.getTitle=function(){return"btz_zycs_gcjl"},e.getSysId=function(){return 0},e.getTabTitle=function(){return"bqz_zycs_zmph"},e.isShow=function(){return t.isShow.call(this)&&GuildWarSys.ins().getModel().isWatStart},e}(BasePanel);__reflect(GuildInteRankInfo.prototype,"GuildInteRankInfo"),window.GuildInteRankInfo=GuildInteRankInfo;var GuildInteRankInfo2=function(t){function e(){var e=t.call(this)||this;return e.skinName="GuildInteRankInfo2EUI",e.list.itemRenderer=GuildInteRankItemRenderer,e.data=new eui.ArrayCollection([]),e}return __extends(e,t),e.prototype.open=function(){this.list.dataProvider=this.data,this.addLsn(GuildWarSys.ins().patchRankInfo,this.refushList),GuildWarSys.ins().requestGuildRank()},e.prototype.refushList=function(){var t=GuildWarSys.ins().getModel(),e=t.guildRankList.concat();e&&e.length>0&&this.data.replaceAll(e),this.guildName.text=""+t.winGuildInfo.guildName;var i="";1==t.winGuildInfo.yuanyin?i=Lang.guild_str76:2==t.winGuildInfo.yuanyin&&(i=Lang.guild_str77),this.guildDes.text=i},e.getTitle=function(){return"btz_zycs_gcjl"},e.getSysId=function(){return 255},e.getTabTitle=function(){return"bqz_zycs_sjpm"},e}(BasePanel);__reflect(GuildInteRankInfo2.prototype,"GuildInteRankInfo2"),window.GuildInteRankInfo2=GuildInteRankInfo2;var GuildInteRewardInfo=function(t){function e(){var e=t.call(this)||this;return e.skinName="GuildInteRewardInfoEUI",e.dataArr=new eui.ArrayCollection,e.dataArr1=new eui.ArrayCollection,e.itemList.itemRenderer=ItemBaseReward,e.list1.itemRenderer=GuildInteRewardItemRenderer,e}return __extends(e,t),e.prototype.open=function(){var t=GuildWarSys.ins().getModel().creatGuildRewardList();this.dataArr1.source=t,this.list1.dataProvider=this.dataArr1;var e=Cfg.getConfig(GuildBattleConst).occupationAward;this.dataArr.source=e,this.itemList.dataProvider=this.dataArr},e.getTitle=function(){return"btz_zycs_gcjl"},e.getSysId=function(){return 0},e.getTabTitle=function(){return"bqz_zycs_zmjl"},e}(BasePanel);__reflect(GuildInteRewardInfo.prototype,"GuildInteRewardInfo"),window.GuildInteRewardInfo=GuildInteRewardInfo;var ProgressBarEff1=function(t){function e(){var e=t.call(this)||this;return e.valueName="",e}return __extends(e,t),e.prototype.iniUI=function(){t.prototype.iniUI.call(this);var e=new MC;e.mask=this.shape,this.groupDonw.addChild(this.shape),e.playFile(getEffName(this.getBgmcRes()),-1),e.x=278,e.y=36,this.bgmc=e,this.groupDonw.addChild(this.bgmc),this.xianmc=new MC,this.xianmc.playFile(getEffName(this.getXianmcRes()),-1),this.xianmc.x=0,this.xianmc.y=37,this.groupDonw.addChild(this.xianmc),this.bgimg=new eui.Image,this.bgimg.x=14,this.bgimg.y=13,this.bgimg.source=this.getBgImg(),this.groupDonw.addChild(this.bgimg),this.objWidth=470},e.prototype.updasteValueText=function(){this.lbvalue.visible=!this.isMax||this.state==ProgressBarEffDataState.max,this.lbvalue.text=this.state==ProgressBarEffDataState.max?"MAX":this.valueName+this.getValue()+"/"+this.getMaxValue(),this.isFisrt||this.updateMan(),this.isFisrt=!1},e.prototype.updateXiaoWeiBa=function(){this.xianmc.x=this.shape.x+this.shape.width-1},e.prototype.updateMan=function(){if(""!=this.getBkRes()){var t=new MC;t.x=278,t.y=37,t.playFile(getEffName(this.getBkRes()),1),this.addChild(t)}},e.prototype.setQianZhuiName=function(t){this.valueName=t},e.prototype.getMaskImg=function(){return"public_zycs_jdt2"},e.prototype.getBgImg=function(){return"public_zycs_jdt1"},e.prototype.getBgmcRes=function(){return"jdt"},e.prototype.getXianmcRes=function(){return"jdtw"},e.prototype.getBkRes=function(){return"jdtbk"},e}(ProgressBarEffBase);__reflect(ProgressBarEff1.prototype,"ProgressBarEff1");var PersonalInteRankInfo=function(t){function e(){var e=t.call(this)||this;return e.skinName="PersonalInteRankInfoEUI",e.list.itemRenderer=GuildInteRankItemRenderer2,e.data=new eui.ArrayCollection([]),e}return __extends(e,t),e.prototype.open=function(){this.list.dataProvider=this.data,this.addLsn(GuildWarSys.ins().patchRankInfo,this.refushList),GuildWarSys.ins().requestOwnGuildRank()},e.prototype.refushList=function(){this.data.replaceAll(GuildWarSys.ins().getModel().guildRankList)},e.getTitle=function(){return"btz_zycs_gcjl"},e.getSysId=function(){return 0},e.getTabTitle=function(){return"bqz_zycs_grph"},e.isShow=function(){return t.isShow.call(this)&&GuildWarSys.ins().getModel().isWatStart},e}(BasePanel);__reflect(PersonalInteRankInfo.prototype,"PersonalInteRankInfo"),window.PersonalInteRankInfo=PersonalInteRankInfo;var PersonInteRewardInfo=function(t){function e(){var e=t.call(this)||this;return e.skinName="PersonInteRewardInfoEUI",e.list.itemRenderer=PersonRewardRenderer,e.list1.itemRenderer=GuildInteRewardItemRenderer,e.dataArr=new eui.ArrayCollection,e.dataArr1=new eui.ArrayCollection,e.pageArrowComponent=new PageArrowCom(e.scroller,125,66),e.pageArrowComponent.setBtn(e.leftBtn,e.rightBtn),e}return __extends(e,t),e.prototype.open=function(){t.prototype.open.call(this),this.updatePanel(),this.pageArrowComponent.open()},e.prototype.close=function(){t.prototype.close.call(this),this.pageArrowComponent.close()},e.prototype.updatePanel=function(){if(!this.dataList){this.dataList=[];var t=Cfg.getConfigs(GuildBattlePersonalAward);for(var e in t)this.dataList.push(t[e])}if(this.dataArr.source=this.dataList,this.list.dataProvider=this.dataArr,!this.dataList1){this.dataList1=[];var t=Cfg.getConfigs(GuildBattlePersonalRankAward);for(var e in t)this.dataList1.push(t[e])}this.dataArr1.source=this.dataList1,this.list1.dataProvider=this.dataArr1},e.getTitle=function(){return"btz_zycs_gcjl"},e.getSysId=function(){return 0},e.getTabTitle=function(){return"bqz_zycs_grjl"},e}(BasePanel);__reflect(PersonInteRewardInfo.prototype,"PersonInteRewardInfo"),window.PersonInteRewardInfo=PersonInteRewardInfo;var GuildWarMainWin=function(t){function e(){var e=t.call(this)||this;return e.winType=WinType.OverlayWin,e}return __extends(e,t),e.prototype.initUI=function(){t.prototype.initUI.call(this),this.addBg()},e.panelNames=[GuildWarMainPanel],e}(BaseWinAutoTab);__reflect(GuildWarMainWin.prototype,"GuildWarMainWin"),window.GuildWarMainWin=GuildWarMainWin;var BagWin=function(t){function e(){var e=t.call(this)||this;return e.winType=WinType.MainWin,e}return __extends(e,t),e.prototype.initUI=function(){t.prototype.initUI.call(this),this.destroyTime=10},e.prototype.open=function(i){void 0===i&&(i=-1),-1==i&&!BagSys.ins().getSurplusCount()&&BagSys.ins().getEquipByLessStar(0,1).length>0&&(openWin(RongLianTipsWin),i=e.getTabIndexbyPanel(RongLianEquipPanel)),t.prototype.open.call(this,i)},e.prototype.getGroodsGridById=function(t){return this.getPanel(BagItemPanel).getGroodsGridById(t)},e.prototype.getSmeltBtn=function(){return this.getPanel(BagEquipPanel).getSmeltBtn()},e.prototype.getFitBtn=function(){return this.getTab(HeChengPanel)},e.prototype.getItemById=function(t){return this.getPanel(BagItemPanel).getItemById(t)},e.prototype.getItemByType=function(t){return this.getPanel(BagItemPanel).getItemByType(t)},e.prototype.getRongLianBtn=function(){return this.getPanel(RongLianEquipPanel).getRongLianBtn()},e.prototype.getShengWuPanelNew_BtnAct=function(){return this.getPanel(ShengWuPanelNew).getBtnAct()},e.prototype.getShengWuPanelNew_btnGet=function(){return this.getPanel(ShengWuPanelNew).getbtnGet()},e.panelNames=[BagEquipPanel,BagItemPanel,RongLianEquipPanel,ShengWuPanelNew,HeChengMainPanel],e}(BaseWinAutoTab);__reflect(BagWin.prototype,"BagWin"),window.BagWin=BagWin;var GuZhanRankPanel=function(t){function e(){var e=t.call(this)||this;return e.skinName="GuZhanRankPanelEUI",e.itemFirstReward.touchChildren=!1,e.itemGotoReward.touchChildren=!1,e.listRank.itemRenderer=GuZhanRankItem,e.listRank.dataProvider=e.listRankData=new eui.ArrayCollection,e}return __extends(e,t),e.prototype.open=function(){t.prototype.open.call(this),this.addClickE(this,this.onClick),this.addLsn(FbSys.ins().patchGuZhanRank,this.updateList),this.addLsn(FbSys.ins().parserRankRewardUpdate,this.updatePanel),this.addLsn(FbSys.ins().patchGuZhanReceivek,this.updatePanel),this.addLsn(RpSys.ins().patchRp,this.updateRp),FbSys.ins().sendGuZhanRank(),this.updatePanel(),this.updateRp()},e.prototype.updateRp=function(t){void 0===t&&(t=null),(!t||t.check(e))&&(this.itemFirstReward.redPoint.visible=RpSys.ins().getData(JJCWin,JJCManyPanel,GuZhanPanel,e,"FirstReward"),this.itemGotoReward.redPoint.visible=RpSys.ins().getData(JJCWin,JJCManyPanel,GuZhanPanel,e,"GotoReward"))},e.prototype.updateList=function(){var t=FbSys.ins().guZhanMode;this.listRank.dataProvider=new eui.ArrayCollection(t.guZhanRankDatas),this.updatePanel()},e.prototype.updatePanel=function(){var t=FbSys.ins().guZhanMode,i=Cfg.getConfig(GuzhanchangConfig);this.listRankData.source=t.guZhanRankDatas,this.lbMyRank.textFlow=addColorTF(""+Lang.act_str25+addColor(""+(0==t.myRank?Lang.common_str17:t.myRank),0==t.myRank?15733780:5767068)),this.lbDesc2.textFlow=addColorTF(Lang.guzhan_str10.replace("$count$",""+i.firsttimes)),this.lbDesc3.textFlow=addColorTF(Lang.guzhan_str11.replace("$count$",""+i.jointimes)),this.barFirstCount.value=t.firstCount,this.barFirstCount.maximum=i.firsttimes,this.barGotoCount.value=t.gotoCount,this.barGotoCount.maximum=i.jointimes,this.imgFirstLyq.visible=1==t.firstReward,this.imgGotoLyq.visible=1==t.gotoReward,this.barFirstCount.labelFunction=function(t,e){return Lang.guzhan_str12+":"+t+"/"+e},this.barGotoCount.labelFunction=function(t,e){return Lang.guzhan_str12+":"+t+"/"+e},this.lbRankDesc.textFlow=StrUtil.toTF(i.phdesc),this.itemFirstReward.data=GFunc.creatRewardDataById(i.firsttitle),this.itemGotoReward.data=GFunc.creatRewardDataById(i.jointtitle),this.itemGotoReward.redPoint.visible=RpSys.ins().getData(JJCWin,JJCManyPanel,GuZhanPanel,e,"GotoReward")},e.prototype.onClick=function(t){var e=Cfg.getConfig(GuzhanchangConfig),i=FbSys.ins().guZhanMode;switch(t.target){case this.itemFirstReward:i.firstCount>=e.firsttimes&&0==i.firstReward&&(FbSys.ins().sendGuZhanReceive(1),t.stopImmediatePropagation());break;case this.itemGotoReward:i.gotoCount>=e.jointimes&&0==i.gotoReward&&FbSys.ins().sendGuZhanReceive(2)}},e.getTitle=function(){return"btz_zycs_hdph"},e.getTabTitle=function(){return"bqz_zycs_hdph"},e}(BasePanel);__reflect(GuZhanRankPanel.prototype,"GuZhanRankPanel"),window.GuZhanRankPanel=GuZhanRankPanel;var SkillEditorTypeItem=function(t){function e(){var e=t.call(this)||this;return e.typeNames=["常规","弹道飞行特效","声音","空","点对点飞行特效","直线飞行"],e.layerNames=["角色下下","角色下","角色上","角色上上","角色层"],e.sDisNames=["圆形","暂时不使用","正八边形","自定义8边型"],e.init(),e.cacheAsBitmap=!0,e}return __extends(e,t),e.prototype.init=function(){this.skinName="SkillEditorTypeItemEUI",this.currentState="normal",this.setSkinPart("dropDownType",new DropDown),this.setSkinPart("dropDownLayer",new DropDown),this.setSkinPart("dropDownSDis",new DropDown),this.dropDownType.bindData(this.typeNames),this.dropDownLayer.bindData(this.layerNames),this.dropDownSDis.bindData(this.sDisNames),this.radioIsDirGroup=new eui.RadioButtonGroup,this.radioIsDir1.group=this.radioIsDirGroup,this.radioIsDir2.group=this.radioIsDirGroup,this.radioIsRotGroup=new eui.RadioButtonGroup,this.radioIsRot1.group=this.radioIsRotGroup,this.radioIsRot2.group=this.radioIsRotGroup,this.radioIsFollowRotGroup=new eui.RadioButtonGroup,this.radioIsFollowRot1.group=this.radioIsFollowRotGroup,this.radioIsFollowRot2.group=this.radioIsFollowRotGroup,this.radioIsRateGroup=new eui.RadioButtonGroup,this.radioIsRate1.group=this.radioIsRateGroup,this.radioIsRate2.group=this.radioIsRateGroup,this.radioLayerGroup=new eui.RadioButtonGroup,this.radioLayer1.group=this.radioLayerGroup,this.radioLayer2.group=this.radioLayerGroup,this.btnDetail.name="btnDetail",this.btnPlay.name="btnPlay"},e.prototype.dataChanged=function(){if(this.data){this.labelIndex.text=this.itemIndex.toString(),this.updateData(this.data);var t=this.data;this.radioIsSelected.selected=this.itemIndex==SkillEditorWin.baseSelectedIndex,this.radioIsHit.selected=1==t.hit}},e.prototype.updateData=function(t){void 0===t&&(t=this.data);var e=t,i=new SkillEditorConfig,n=null!=e.type?e.type:i.type,a=this.getIndexByType(n);this.dropDownType.text=this.typeNames[a],this.dropDownLayer.text=this.layerNames[e.layer],this.dropDownSDis.text=this.sDisNames[e.sDisType],this.tiFileName.text=null!=e.effectId?e.effectId:i.effectId;var o=1==e.isLayerByDir;this.radioLayer1.selected=o,this.radioLayer2.selected=!o;var s=1==e.isDir;this.radioIsDir1.selected=s,this.radioIsDir2.selected=!s,this.tiIsDirParam.text=null!=e.isDirParam?e.isDirParam:i.isDirParam,this.tiX.text=(null!=e.x?e.x:i.x).toString(),this.tiY.text=(null!=e.y?e.y:i.y).toString(),this.tiR.text=(null!=e.r?e.r:i.r).toString(),this.tiCX.text=(null!=e.cx?e.cx:i.cx).toString(),this.tiCY.text=(null!=e.cy?e.cy:i.cy).toString(),this.tiDelay.text=(null!=e.delay?e.delay:i.delay).toString(),this.tiRate.text=(null!=e.rate?e.rate:i.rate).toString(),this.tiMoveSpeed.text=(null!=e.moveSpeed?e.moveSpeed:i.moveSpeed).toString(),this.tiPlayCount.text=(null!=e.playCount?e.playCount:i.playCount).toString(),this.tiScaleX.text=(null!=e.scaleX?e.scaleX:i.scaleX).toString(),this.tiScaleY.text=(null!=e.scaleY?e.scaleY:i.scaleY).toString(),this.tiRotation.text=(null!=e.rotation?e.rotation:i.rotation).toString();var r=1==e.isRot;this.radioIsRot1.selected=r,this.radioIsRot2.selected=!r;var u=1==e.isFollowRot;this.radioIsFollowRot1.selected=u,this.radioIsFollowRot2.selected=!u,this.tiDis.text=(null!=e.dis?e.dis:i.dis).toString(),this.tiSDis.text=(null!=e.sDis?e.sDis:i.sDis).toString(),this.tiEndX.text=(null!=e.endX?e.endX:i.endX).toString(),this.tiEndY.text=(null!=e.endY?e.endY:i.endY).toString(),this.tiAlpha.text=(null!=e.alpha?e.alpha:i.alpha).toString();var h=1==e.isRate;this.radioIsRate1.selected=h,this.radioIsRate2.selected=!h;var l=new TweenParam,p=e.tween&&e.tween[0]?e.tween[0]:l;this.tiTweenStartTime.text=p.startDelay.toString(),this.tiTweenEndTime.text=p.endDelay.toString(),this.tiTweenScaleX.text=p.scaleX.toString(),this.tiTweenScaleY.text=p.scaleY.toString(),this.tiTweenAlpha.text=p.alpha.toString(),this.tiTweenRotation.text=p.rotation.toString()},e.prototype.save=function(){this.saveTo(this.data)},e.prototype.updateIndex=function(t){this.labelIndex.text=t.toString()},e.prototype.saveTo=function(t){var e=new SkillEditorConfig,i=this.typeNames.indexOf(this.dropDownType.text);i=-1!=i?i:0,(null!=t.type||i!=e.type)&&(t.type=i);var n=this.layerNames.indexOf(this.dropDownLayer.text);n=-1!=n?n:0,(null!=t.layer||n!=e.layer)&&(t.layer=n);var a=this.radioLayer1.selected?1:0;(null!=t.isLayerByDir||a!=e.isLayerByDir)&&(t.isLayerByDir=a),(null!=t.effectId||this.tiFileName.text!=e.effectId)&&(t.effectId=this.tiFileName.text);var o=this.radioIsDir1.selected?1:0;(null!=t.isDir||o!=e.isDir)&&(t.isDir=o),(null!=t.isDirParam||this.tiIsDirParam.text!=e.isDirParam)&&(t.isDirParam=this.tiIsDirParam.text),(null!=t.x||this.tiX.text!=e.x)&&(t.x=this.tiX.text),(null!=t.y||this.tiY.text!=e.y)&&(t.y=this.tiY.text),(null!=t.r||this.tiR.text!=e.r)&&(t.r=this.tiR.text),(null!=t.cx||this.tiCX.text!=e.cx)&&(t.cx=this.tiCX.text),(null!=t.cy||this.tiCY.text!=e.cy)&&(t.cy=this.tiCY.text),(null!=t.delay||this.tiDelay.text!=e.delay)&&(t.delay=this.tiDelay.text),(null!=t.rate||parseFloat(this.tiRate.text)!=e.rate)&&(t.rate=parseFloat(this.tiRate.text)),(null!=t.moveSpeed||parseInt(this.tiMoveSpeed.text)!=e.moveSpeed)&&(t.moveSpeed=parseInt(this.tiMoveSpeed.text)),(null!=t.playCount||parseInt(this.tiPlayCount.text)!=e.playCount)&&(t.playCount=parseInt(this.tiPlayCount.text)),(null!=t.scaleX||this.tiScaleX.text!=e.scaleX)&&(t.scaleX=this.tiScaleX.text),(null!=t.scaleY||this.tiScaleY.text!=t.scaleY)&&(t.scaleY=this.tiScaleY.text),(null!=t.rotation||parseInt(this.tiRotation.text)!=e.rotation)&&(t.rotation=parseInt(this.tiRotation.text));var s=this.radioIsRot1.selected?1:0;(null!=t.isRot||s!=e.isRot)&&(t.isRot=s);var r=this.radioIsFollowRot1.selected?1:0;(null!=t.isFollowRot||r!=e.isFollowRot)&&(t.isFollowRot=r),(null!=t.dis||parseFloat(this.tiDis.text)!=e.dis)&&(t.dis=parseFloat(this.tiDis.text)),(null!=t.sDis||this.tiSDis.text!=e.sDis)&&(t.sDis=this.tiSDis.text);var u=this.sDisNames.indexOf(this.dropDownSDis.text);u=-1!=u?u:0,(null!=t.sDisType||u!=e.sDisType)&&(t.sDisType=u),(null!=t.endX||parseInt(this.tiEndX.text)!=e.endX)&&(t.endX=parseInt(this.tiEndX.text)),(null!=t.endY||parseInt(this.tiEndY.text)!=e.endY)&&(t.endY=parseInt(this.tiEndY.text)),(null!=t.alpha||parseFloat(this.tiAlpha.text)!=e.alpha)&&(t.alpha=parseFloat(this.tiAlpha.text));var h=this.radioIsRate1.selected?1:0;(null!=t.isRate||h!=e.isRate)&&(t.isRate=h);var l=new TweenParam,p=parseInt(this.tiTweenStartTime.text)!=l.startDelay||parseInt(this.tiTweenEndTime.text)!=l.endDelay||parseFloat(this.tiTweenScaleX.text)!=l.scaleX||parseFloat(this.tiTweenScaleY.text)!=l.scaleY||parseFloat(this.tiTweenAlpha.text)!=l.alpha||parseInt(this.tiTweenRotation.text)!=l.rotation;(p||t.tween&&t.tween[0])&&(t.tween[0]=new TweenParam,t.tween[0].startDelay=parseInt(this.tiTweenStartTime.text),t.tween[0].endDelay=parseInt(this.tiTweenEndTime.text),t.tween[0].scaleX=parseFloat(this.tiTweenScaleX.text),t.tween[0].scaleY=parseFloat(this.tiTweenScaleY.text),t.tween[0].alpha=parseFloat(this.tiTweenAlpha.text),t.tween[0].rotation=parseInt(this.tiTweenRotation.text)),this.isSelected&&(SkillEditorWin.baseSelectedIndex=this.itemIndex);var c=this.radioIsHit.selected?1:0;(null!=t.hit||c!=e.hit)&&(t.hit=c);var d=this.toggleBtnHide.selected?1:0;(null!=t.isShow||d!=e.isShow)&&(t.isShow=d)},e.prototype.getIndexByType=function(t){var e;switch(t){case 95:e=2;break;case 99:e=3;break;default:e=t}return e},Object.defineProperty(e.prototype,"isSelected",{get:function(){return this.radioIsSelected.selected},enumerable:!0,configurable:!0}),e}(SkillEditorBaseItem);__reflect(SkillEditorTypeItem.prototype,"SkillEditorTypeItem");var GuildBattleMoBaiWin=function(t){function e(){var e=t.call(this)||this;return e.winType=WinType.OverlayWin,e}return __extends(e,t),e.prototype.initUI=function(){t.prototype.initUI.call(this),this.addBg()},e.panelNames=[GuildBattleMoBaiPanel],e}(BaseWinAutoTab);__reflect(GuildBattleMoBaiWin.prototype,"GuildBattleMoBaiWin"),window.GuildBattleMoBaiWin=GuildBattleMoBaiWin;var EquipTipsJiChuItemAttr=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return __extends(e,t),e.prototype.dataChanged=function(){var t=this.data,e="";t.strengthenAttr&&(e=addColor("(强化+"+AttrData.getAttrValue(t.strengthenAttr)+")",5949490)),t.levelUpAttr&&(e=addColor("(升级+"+AttrData.getAttrValue(t.levelUpAttr)+")",5949490)),this.lbAttr.textFlow=addColorTF(AttrData.parse([t.attr],{fm:"%k：%v"+e}).join(""))},e}(EquipTipsOtherItemAttr);__reflect(EquipTipsJiChuItemAttr.prototype,"EquipTipsJiChuItemAttr"),window.EquipTipsJiChuItemAttr=EquipTipsJiChuItemAttr;var GuildBattleAwardItem1=function(t){function e(){var e=t.call(this)||this;return e.skinName="GuildBattleAwardItem1EUI",e.list.itemRenderer=ItemBaseReward,e}return __extends(e,t),e.prototype.dataChanged=function(){if(this.data&&this.data.rank){var t=this.data;t.rank<=3?(this.imgRank.source="ldsz_zycs_ph"+t.rank,this.lbRank.text=""):(this.imgRank.source="",this.lbRank.text=""+t.rank),this.setAwwrd()}},e.prototype.setAwwrd=function(){var t=this.data;this.list.dataProvider=new eui.ArrayCollection(t.rewardRankShow)},e}(BaseItemRender);__reflect(GuildBattleAwardItem1.prototype,"GuildBattleAwardItem1"),window.GuildBattleAwardItem1=GuildBattleAwardItem1;var EquipTipsWin=function(t){function e(){var e=t.call(this)||this;return e.isShowBtn=!0,e}return __extends(e,t),e.prototype.initUI=function(){t.prototype.initUI.call(this),this.skinName="EquipTipsEUI",this.addBg(),this.layer=LayerMgr.Popup,this.setSkinPart("itemIcon",new ItemIcon),this.setSkinPart("beaseAttrItem",new EquipTipsJiChuItem),this.setSkinPart("zhuoYueAttrItem",new EquipTipsOtherItem),this.setSkinPart("zhuiJiaAttrItem",new EquipTipsOtherItem),this.setSkinPart("peiyangAttrItem",new EquipTipsOtherItem),this.setSkinPart("gemAttrItem",new EquipTipsGemItem),this.groupSign.scaleY=0,this.imageState.visible=!1,this.zhuiJiaAttrItem.scaleY=0,this.peiyangAttrItem.scaleY=0,this.gemAttrItem.scaleY=0,this.currentState="item"},e.prototype.open=function(e,i,n){t.prototype.open.call(this),this.equipsData=e,this.setData(e,i),this.updateStatus(),this.updateAttr(e,i)},e.prototype.setData=function(t,e){var i=t.cfg,n=this.getItemDataPower(t);this.lbEquipScore.textFlow=addColorTF("装备评分："+addColor(n.toFixed(0),5949490));var a=e?this.getItemDataPower(e):0;this.imgQualityBg.source=ResMgr.getEquipTipsQualityBg(i.quality),this.imgEquipScore.source=ResMgr.getEquipAttrContrastIcon1(n,a),this.lbEquipScoreB.textFlow=addColorTF(this.showDuiBi()?""+Math.abs(n-a).toFixed(0):""),this.lbEquipScoreB.textColor=ResMgr.getEquipAttrContrastColor(n,a),this.LabelTotalScore.textFlow=addColorTF("综合评分："+addColor(this.getItemDataPower(t).toFixed(0),5949490)),this.itemIcon.setDataByItemConfig(i),this.labelName.text=i.getName()+(Actor.ins().isLocation?"("+i.id+")":""),this.labelName.textColor=8009748,this.LabelEquipType.text=GFunc.getEquipName(i),this.LabelEquipTypeB.text=e?GFunc.getEquipName(e.cfg):"未穿戴",this.LabelCareer.textFlow=addColorTF(""+Lang.itemtips_str1+addColor(GFunc.getJobNameByJob(Actor.ins().job),5949490));var o=Actor.ins().level>=i.level&&Actor.ins().zsId>=i.zslevel?5949490:15733780,s=1e4==i.zslevel?""+GFunc.GetLvStrByLv(i.level):""+GFunc.getZSNameBydb(i.zslevel);if(e)if(1e4==i.zslevel){var r=Actor.ins().level>=i.level;s+=r?"":"(等级不足)",o=r?5949490:15733780}else{var r=Actor.ins().zsId>=i.zslevel;s+=r?"":"(转生等级不足)",o=r?5949490:15733780}this.LabelLevelLimit.textFlow=addColorTF("等级需求："+addColor(s,o))},e.prototype.updateAttr=function(t,e){this.beaseAttrItem.setData(EquipAttrType.base,t.hasEquipOn()?t.cfg.pattr:[],e?e.cfg.pattr:[],[],this.showDuiBi()),this.zhuoYueAttrItem.scaleY=0==t.cfg.exattr.length?0:1,this.zhuoYueAttrItem.setData(EquipAttrType.zhuoyue,t.hasEquipOn()?t.cfg.exattr:[],e?e.cfg.exattr:[],this.showDuiBi()),this.validateNow()},e.prototype.updateStatus=function(){var t=this.equipsData;0!=t.cfg.output.length?(this.groupTUjing.scaleY=1,this.lbtujin.text=t.cfg.output):this.groupTUjing.scaleY=0},e.prototype.getItemDataPower=function(t){var e=BagSys.ins().getPowerOfItem(t);return e},e.prototype.showDuiBi=function(){return!0},e}(BaseWinSingle);__reflect(EquipTipsWin.prototype,"EquipTipsWin"),window.EquipTipsWin=EquipTipsWin;var ItemDataReward=function(){function t(){this.id=0,this.count=0,this.job=0,this.discount=1,this.eff=0,this.fmp=0,this.dropType=0,this.shiyongCount=0,this.maxCount=0,this.rate=100,this.jueban=0,this["double"]=0,this.double10=0}return t.prototype.setData=function(t,e,i,n){void 0===n&&(n=1),this.id=t,this.count=i,this.discount=n},t.prototype.parser=function(t){t.readInt();this.id=t.readInt(),this.count=t.readInt()},t.prototype.parser1=function(t){t.readInt();this.id=t.readInt(),this.count=t.readDouble()},t.prototype.parser2=function(t){this.id=t.readInt(),this.count=t.readInt()},t.prototype.parser3=function(t){t.readInt();this.id=t.readInt(),this.count=t.readDouble()},t.prototype.parser4=function(t){this.id=t.readInt(),this.count=t.readDouble()},t.prototype.parser5=function(t){this.id=t.readInt(),this.count=t.readInt(),this["double"]=t.readByte()},t.prototype.reset=function(){this.id=0,this.count=0,this.job=0,this.discount=1,this.eff=0,this.dropType=0},Object.defineProperty(t.prototype,"quality",{get:function(){return this.config.quality},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"config",{get:function(){return this._config||(this._config=Cfg.getItemCfg(this.id))},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"sortType",{get:function(){return 0!=this.config.type?1:0},enumerable:!0,configurable:!0}),t.prototype.clone=function(){var e=new t;return e.id=this.id,e.count=this.count,e},t.clone=function(e){var i=new t;return i.id=e.id,i.count=e.count,i.discount=e.discount,i.eff=e.eff,i.fmp=e.fmp,i.shiyongCount=e.shiyongCount,i.maxCount=e.maxCount,i.rate=e.rate,i.jueban=e.jueban,i.double10=e.double10,i["double"]=e["double"],i},t["double"]="double",t}();__reflect(ItemDataReward.prototype,"ItemDataReward");var JinZuanCJMainPanel=function(t){function e(){var e=t.call(this)||this;return e.redPointHead=[ExtCom,JinZuanWin],e}return __extends(e,t),e.prototype.setSkinName=function(){this.skinName="JinZuanCJMainPanelEUI"},e.prototype.setTabItem=function(){this.tab.itemRenderer=BaseTabBtn5},e.prototype.open=function(e){void 0===e&&(e=0),t.prototype.open.call(this,e)},e.getTitle=function(){return"btz_zycs_jzcj"},e.getTabTitle=function(){return"bqz_zycs_jzcj"},e.prototype.getJinZuanBagPanelTab=function(){return this.getTab(JinZuanBagPanel)},e.panelNames=[JinZuanCJPanel,JinZuanBagPanel],e}(BaseTabPanel);__reflect(JinZuanCJMainPanel.prototype,"JinZuanCJMainPanel"),window.JinZuanCJMainPanel=JinZuanCJMainPanel;var GuildBattleFbFaceTop=function(t){function e(){var e=t.call(this)||this;return e.imgType.visible=!0,e}return __extends(e,t),e.prototype.setBossData=function(e){t.prototype.setBossData.call(this,e),e.guildId==GuildBattleSys.ins().guildId?this.imgType.source="ldsz_zycs_shsw":0==e.guildId?this.imgType.source="ldsz_zycs_zlbs":this.imgType.source="ldsz_zycs_jgsw"},e}(GuildBattleFbFace);__reflect(GuildBattleFbFaceTop.prototype,"GuildBattleFbFaceTop"),window.GuildBattleFbFaceTop=GuildBattleFbFaceTop;var JinZuanPanel=function(t){function e(){var e=t.call(this)||this;return e.skinName="JinZuanPanelEUI",e}return __extends(e,t),e.prototype.open=function(){this.addClickE(this.btnHelp,this.onClick),this.addClickE(this.buyRecharge,this.onClick),this.addLsn(RechargeActSys.ins().patchJinZuanValueUpdate,this.updateData),this.addLsn(VipSys.ins().patchSvipLvChange,this.updateData),this.updateData()
},e.prototype.updateData=function(){var t=RechargeActSys.ins().jinZuanData,e=Cfg.getConfig(SVipConfig,Actor.ins().sVipLv);this.lbJinZuanValue.text=""+t.jinzuanValue,this.lbDesc.textFlow=addColorTF(addColor("仙玉充值",5767068)+"可获得仙券，每日最大获取上限为"+addColor(""+e.jinzhuan,5767068))},e.prototype.onClick=function(t){switch(t.currentTarget){case this.btnHelp:openWin(HelpWin,Cfg.getConfig(HelpInfoConfig,86).text);break;case this.buyRecharge:openWin(RechargeWin)}},e.getTitle=function(){return"btz_zycs_jz"},e.getTabTitle=function(){return"bqz_zycs_jz"},e.getSysId=function(){return 2},e}(BasePanel);__reflect(JinZuanPanel.prototype,"JinZuanPanel"),window.JinZuanPanel=JinZuanPanel;var JinZuanShopPanel=function(t){function e(){var e=t.call(this)||this;return e.skinName="JinZuanShopPanelEUI",e.setSkinPart("priceIcon",new PriceIcon),e.listItem.itemRenderer=JinZuanShopPanelItem,e.listItem.dataProvider=e.listItemArray=new eui.ArrayCollection,e.priceIcon.setType(CurType.yb),e}return __extends(e,t),e.prototype.open=function(){this.addClickE(this.btnRefresh,this.onClick),this.addClickE(this.listItem,this.onlistitemClick),this.addLsn(RpSys.ins().patchRp,this.updateRp),this.addLsn(RechargeActSys.ins().patchJinZuanShopBuy,this.updatePanel),this.addLsn(RechargeActSys.ins().patchJinZuanShopBuy,this.updateItemList),this.addLsn(RechargeActSys.ins().patchJinZuanShopRefresh,this.updatePanel),this.priceIcon.setPrice(Cfg.getConfig(JinzhuanConstConfig).needyuanbao),this.updatePanel()},e.prototype.updateRp=function(t){if(void 0===t&&(t=null),!t||t.check(e))for(var i=0;i<this.listItem.numChildren;i++){var n=this.listItem.getChildAt(i);n&&n.updateRedPoint()}},e.prototype.updateItemList=function(){for(var t=0;t<this.listItem.numChildren;t++){var e=this.listItem.getChildAt(t);e&&e.updateRedPoint()}},e.prototype.updatePanel=function(){var t=RechargeActSys.ins().jinZuanData;this.listItemArray.source=t.jinZuanShopDatas},e.prototype.updateTime=function(){var t=RechargeActSys.ins().jinZuanData;this.lbTime.text=getFormatTime(t.leftShopTime,"hh:mm:ss")+"后自动刷新"},e.prototype.onlistitemClick=function(t){if("btnBuy"==t.target.name){var e=t.target.parent.data;GFunc.checkCurrency(CurType.JinZuan,e.price)&&RechargeActSys.ins().sendJinZuanShopBuy(e.index+1)}},e.prototype.onClick=function(t){switch(t.currentTarget){case this.btnRefresh:GFunc.checkCurrency(CurType.yb,Cfg.getConfig(JinzhuanConstConfig).needyuanbao)&&RechargeActSys.ins().sendJinZuanShopRefresh()}},e.getTitle=function(){return"btz_zycs_smsd"},e.getTabTitle=function(){return"bqz_zycs_smsd"},e.getSysId=function(){return 2},e}(BasePanel);__reflect(JinZuanShopPanel.prototype,"JinZuanShopPanel"),window.JinZuanShopPanel=JinZuanShopPanel;var JobWin=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.winType=WinType.MainWin,e}return __extends(e,t),e.prototype.open=function(e){t.prototype.open.call(this,e)},e.prototype.getZsBtn=function(){return this.getPanel(ZSPanel).getZsBtn()},e.prototype.getCurTaskItem_getbtnGoto=function(){return this.getPanel(ZSPanel).getCurTaskItem_getbtnGoto()},e.panelNames=[TouXianPanel,ZSPanel],e}(BaseWinAutoTab);__reflect(JobWin.prototype,"JobWin"),window.JobWin=JobWin;var GuildBattleDailyAwardPanel=function(t){function e(){var e=t.call(this)||this;return e.skinName="GuildBattleDailyAwardPanelEUI",e.listRank.itemRenderer=GuildBattleDailyAwardItem,e.listRank.dataProvider=e.listRankArr=new eui.ArrayCollection,e.tab.itemRenderer=BaseTabBtn5,e.tab.dataProvider=new eui.ArrayCollection(Lang.gb_str18),e}return __extends(e,t),e.prototype.open=function(){t.prototype.open.call(this),this.addItemTapE(this.tab,this.onListClick),this.addClickE(this.helpBtn,this.onClick),this.updatePanel()},e.prototype.onClick=function(t){openWin(GuildBattleFAQWin)},e.prototype.updatePanel=function(){this.tab.selectedIndex=0,this.listRankArr.source=Cfg.getConfigs(GBManorConfig,3)},e.prototype.onListClick=function(t){this.listRankArr.source=Cfg.getConfigs(GBManorConfig,3-t.itemIndex)},e.getTitle=function(){return"btz_zycs_lingdjl"},e.getTabTitle=function(){return"bqz_zycs_mrijl"},e.getSysId=function(){return 334},e}(BasePanel);__reflect(GuildBattleDailyAwardPanel.prototype,"GuildBattleDailyAwardPanel"),window.GuildBattleDailyAwardPanel=GuildBattleDailyAwardPanel;var GuildBattleDetailsPanel=function(t){function e(){var e=t.call(this)||this;return e.skinName="GuildBattleDetailsPanelEUI",e}return __extends(e,t),e.prototype.open=function(){t.prototype.open.call(this),this.addLsn(GuildBattleSys.ins().patchDetailsInfo,this.updatePanel),GuildBattleSys.ins().sendDetailsInfo(),this.updateTime()},e.prototype.updatePanel=function(t,e){var i,n;t.guildId==GuildBattleSys.ins().guildId?(i=t,n=e):(i=e,n=t),this.lbGuildName0.text=""+i.guildName,this.lbScore0.text=Lang.gb_str27+"："+i.totalScore,this.lbScoreMon0.text=Lang.gb_str28+"："+i.monScore,this.lbScoreEne0.text=Lang.gb_str29+"："+i.eneScore,this.lbScoreNpc0.text=Lang.gb_str30+"："+i.npcScore,this.lbScoreBoss0.text=Lang.gb_str31+"："+i.bossScore,this.lbGuildName1.text=""+n.guildName,this.lbScore1.text=Lang.gb_str27+"："+n.totalScore,this.lbScoreMon1.text=Lang.gb_str28+"："+n.monScore,this.lbScoreEne1.text=Lang.gb_str29+"："+n.eneScore,this.lbScoreNpc1.text=Lang.gb_str30+"："+n.npcScore,this.lbScoreBoss1.text=Lang.gb_str31+"："+n.bossScore},e.prototype.updateTime=function(){t.prototype.updateTime.call(this);var e="",i=0,n=GuildBattleSys.ins().prelimTick-Actor.ins().serverTime;n>0?(e=Lang.gb_strs[4],i=Cfg.getConfig(GBConstConfig).semifinalscore):(n=GuildBattleSys.ins().finalsTick-Actor.ins().serverTime,e=Lang.gb_strs[6],i=Cfg.getConfig(GBConstConfig).finalscore),this.lbTime.textFlow=addColorTF(addColor(e,16777215)+(n>0?getFormatTime(n/1e3,"mm分ss秒"):"")),this.lbWinScore.textFlow=addColorTF(addColor(Lang.gb_str24,16777215)+i)},e.getTitle=function(){return"ldsz_zycs_bsxq"},e.getTabTitle=function(){return"bqz_zycs_ldzk"},e}(BasePanel);__reflect(GuildBattleDetailsPanel.prototype,"GuildBattleDetailsPanel"),window.GuildBattleDetailsPanel=GuildBattleDetailsPanel;var LiLianWin=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.winType=WinType.OverlayWin,e}return __extends(e,t),e.prototype.open=function(e){t.prototype.open.call(this,e)},e.panelNames=[LiLianPanel,HuoDongPanel],e}(BaseWinAutoTab);__reflect(LiLianWin.prototype,"LiLianWin"),window.LiLianWin=LiLianWin;var HuoDongBaseData=function(){function t(){this.curStatetime=0}return t.prototype.getTitle=function(){return 1==this.id?"竞技模式：":"活动时间："},t.prototype.getTimeStr=function(){for(var t="",e=this.times.length,i=0;e>i;i++){var n=this.times[i];t+=n.startHour+":",t+=0==n.startMinute?"00":""+n.startMinute,t+="-",t+=n.endHour+":",t+=0==n.endMinute?"00":""+n.endMinute,t+=e>2?(i+1)%2==0?"\n":"  ":"\n"}return t},t.prototype.unOpen=function(){var t=this.getState();return 0==t},t.prototype.isGoTo=function(){var t=this.getState();return 1==t},t.prototype.isOpen=function(){var t=this.getState();return 2==t},t.prototype.isEnd=function(){var t=this.getState();return 3==t},t.prototype.nextActTime=function(){if(!this.isGoTo())return 0;for(var t=new Date(Actor.ins().serverTime),e=t.getHours(),i=t.getMinutes(),n=0;n<this.times.length;n++){var a=this.times[n];if(a.startHour>e||a.startHour==e&&a.startMinute>i){var o=a.startHour-e,s=a.startMinute-i;return 0>s&&(s+=60,o--),60*o*60+60*s}}},t.prototype.getState=function(){var t=Actor.ins().serverTime-this.curStatetime;if(2e3>t)return this.state;if(this.curStatetime=Actor.ins().serverTime,!GFunc.isSysOpen(this.sysId))return this.state=0,0;for(var e=new Date(Actor.ins().serverTime),i=e.getHours(),n=e.getMinutes(),a=1,o=0;o<this.times.length;o++){var s=this.times[o];if(s.startHour<i||s.startHour==i&&s.startMinute<=n){if(!(s.endHour<i||s.endHour==i&&s.endMinute<=n)){a=2;break}a=3}else a=1}return this.state=a,a},t}();__reflect(HuoDongBaseData.prototype,"HuoDongBaseData");var GuildBattleFAQPanel=function(t){function e(){var e=t.call(this)||this;return e.btnHelps=[],e.imgHelps=[],e.skinName="GuildBattleFAQPanelEUI",e.imgHelps=[e.imgHelp0,e.imgHelp1,e.imgHelp2,e.imgHelp3,e.imgHelp4,e.imgHelp5,e.imgHelp6],e.btnHelps=[e.btnHelp0,e.btnHelp1,e.btnHelp2,e.btnHelp3,e.btnHelp4,e.btnHelp5,e.btnHelp6],e}return __extends(e,t),e.prototype.open=function(){t.prototype.open.call(this);for(var e=0,i=this.imgHelps;e<i.length;e++){var n=i[e];this.addClickE(n,this.onImgClick)}for(var a=0,o=this.btnHelps;a<o.length;a++){var s=o[a];this.addClickE(s,this.onBtnClick)}},e.prototype.onImgClick=function(t){var e=this.imgHelps.indexOf(t.currentTarget);openWin(GuildBattleFAQSubWin,e)},e.prototype.onBtnClick=function(t){var e=this.btnHelps.indexOf(t.currentTarget);openWin(GuildBattleFAQSubWin,e)},e.getTitle=function(){return"btz_zycs_faq"},e.getTabTitle=function(){return"bqz_zycs_faq"},e}(BasePanel);__reflect(GuildBattleFAQPanel.prototype,"GuildBattleFAQPanel"),window.GuildBattleFAQPanel=GuildBattleFAQPanel;var FollowComBase=function(t){function e(){var e=t.call(this)||this;return e._trail=0,e.init(),e}return __extends(e,t),e.prototype.init=function(){this.mcTrail=new MC,this.addChild(this.mcTrail),this.mcBall=new MC,this.addChild(this.mcBall),this.trail=0},e.prototype.playMovie=function(){},e.prototype.setDir=function(t){this.mcTrail.rotation=MathUtil.getAngle(t)},e.prototype.setTrailVisible=function(t){t?this.addChildAt(this.mcTrail,0):DisUtil.remove(this.mcTrail)},Object.defineProperty(e.prototype,"trail",{get:function(){return this._trail},set:function(t){this._trail=this.mcTrail.scaleX=this.mcTrail.scaleY=2*t},enumerable:!0,configurable:!0}),e.prototype.reset=function(){this.mcBall.reset(),this.mcTrail.reset(),this.setTrailVisible(!1),this.trail=0,this.x=0,this.y=0},e}(egret.DisplayObjectContainer);__reflect(FollowComBase.prototype,"FollowComBase");var KlmKunDunShowPanel=function(t){function e(){var e=t.call(this)||this;return e.MCmonster=new MC,e.isnpcopen=!1,e.skinName="KlmKunDunBossShowPanelEUI",e.list.itemRenderer=ItemBaseReward,e.groupBoss.addChild(e.MCmonster),e.lbDesc.lineSpacing=4,e.lbGoto.textFlow=addColorTF(StrUtil.addUnderLine(e.lbGoto.text)),e}return __extends(e,t),e.prototype.open=function(){t.prototype.open.call(this),this.addClickE(this,this.onclick),this.addLsn(FbSys.ins().patchKlmKunDunData,this.updateExp),this.addLsn(FbSys.ins().patchKlmKunDunBoss,this.updateData),this.updateData()},e.prototype.updateData=function(){var t=FbSys.ins().klmModel,e=Cfg.getConfig(QuaintonFubenConfig,1);this.lbCount.textFlow=addColorTF(Lang.hjbd_str15.replace("$count$",""+addColor(""+t.count+Lang.common_ci,5949490))),this.btnOk.label=Lang.common_str45,this.btnOk.visible=t.isKunDunOpen(),this.lbBossName.text=t.kunDunMonsterName,this.list.dataProvider=new eui.ArrayCollection(e.desc),this.lbDesc.textFlow=addColorTF(e.descStr);var i=Cfg.getConfig(MonsterModelConfig,t.kunDunMonsterModel),n=ResMgr.getMonsterSource(i.appearance,5,EntityAction.STAND);this.MCmonster.playFile(n,-1),this.MCmonster.scaleY=i.scale,this.MCmonster.scaleX=-1*i.scale,this.updateExp();t.leftKunDun;this.updateTime()},e.prototype.updateExp=function(){this.kunDunEff.setData(FbSys.ins().klmModel.kunDunValue,FbSys.ins().klmModel.kunDunMax)},e.prototype.updateTime=function(){var t=FbSys.ins().klmModel.leftKunDun;t>0&&Timer.ins()["do"](0,1e3,Math.ceil(t/1e3),this.formatCountDown,this);var e=FbSys.ins().klmModel;e.kunDunValue>=e.kunDunMax?t>0?this.currentState="time":this.currentState="challenge":this.currentState="goto"},e.prototype.formatCountDown=function(t){var e=t>0?16711680:5949490,i=addColor(getFormatTime(t,"hh:mm:ss")+Lang.fb_str10,e);this.labelTime.textFlow=addColorTF(i)},e.prototype.onclick=function(t){switch(t.target){case this.btnOk:FbSys.ins().sendKlmKunDunFight(),closeWin(BossWin),closeWin(KlmKunDunShowWin);break;case this.lbGoto:openWin(BossWin,BossWin.getTabIndexbyPanel(ZhuZaiMainPanel),ZhuZaiMainPanel.getTabIndexbyPanel(KlmPanel))}},e.getSysId=function(){return 339},e.getTitle=function(){return"btz_zycs_lwsd"},e.getTabTitle=function(){return"bqz_zycs_lwsd"},e}(BasePanel);__reflect(KlmKunDunShowPanel.prototype,"KlmKunDunShowPanel"),window.KlmKunDunShowPanel=KlmKunDunShowPanel;var GuildBattleGerenAwardPanel=function(t){function e(){var e=t.call(this)||this;return e.skinName="GuildBattleGerenAwardPanelEUI",e.listRank.itemRenderer=GuildBattleGerenRankItem,e.listRank.dataProvider=e.listRankArr=new eui.ArrayCollection,e.listDabiao.itemRenderer=GuildBattleGerenDabiaoItem,e.listDabiao.dataProvider=e.listDabiaoArr=new eui.ArrayCollection,e}return __extends(e,t),e.prototype.open=function(){t.prototype.open.call(this),this.addClickE(this.helpBtn,this.onClick),this.updatePanel()},e.prototype.onClick=function(t){openWin(GuildBattleFAQWin)},e.prototype.updatePanel=function(){this.listRankArr.source=Cfg.getConfigs(GBRankRewardConfig),this.listDabiaoArr.source=Cfg.getConfigs(GBDabiaoRewardConfig)},e.getTitle=function(){return"btz_zycs_lingdjl"},e.getTabTitle=function(){return"bqz_zycs_gerjl"},e.getSysId=function(){return 334},e}(BasePanel);__reflect(GuildBattleGerenAwardPanel.prototype,"GuildBattleGerenAwardPanel"),window.GuildBattleGerenAwardPanel=GuildBattleGerenAwardPanel;var MailPanel=function(t){function e(){var e=t.call(this)||this;return e.initUI(),e}return __extends(e,t),e.prototype.initUI=function(){this.skinName="MailPanelEUI",this._mails=[],this.mailList.itemRenderer=MailItem,this.mailScroller.viewport=this.mailList},e.prototype.open=function(){t.prototype.open.call(this),this.addClickE(this.allReceiveBtn,this.onTap),this.addClickE(this.mailList,this.onSendMail),this.addLsn(MailSys.ins().patchMailDetail,this.setOpenMail),this.addLsn(RpSys.ins().patchRp,this.updateRp),this.setMailData(),this.updateRp()},e.prototype.updateRp=function(){this.allReceiveBtn.redPoint.visible=RpSys.ins().getData(MailWin)},e.prototype.onTap=function(t){switch(t.currentTarget){case this.allReceiveBtn:for(var e=[],i=MailSys.ins().getMailByReceive2(),n=0;n<i.length;n++)e.push(i[n].handle);MailSys.ins().sendGetItem(e)}},e.prototype.onSendMail=function(t){if(void 0!=t){var e=t.target.parent;if(e){var i=e.data;i&&MailSys.ins().sendMailContentData(i.handle)}}},e.prototype.setMailData=function(){this._mails=MailSys.ins().mailData,this.mailList.dataProvider=new eui.ArrayCollection(this._mails),this.allReceiveBtn.visible=Boolean(MailSys.ins().getMailByReceive2().length),MailSys.ins().mailData.length>0&&(this.noMailTip.visible=!1)},e.prototype.setOpenMail=function(t){for(var e=0;e<this.mailList.numChildren;e++){var i=this.mailList.getChildAt(e);if(i.data.handle==t.handle)return void(i.data=t)}},e.getSysId=function(){return 100},e.getTitle=function(){return"btz_zycs_yj"},e.getTabTitle=function(){return"bqz_zycs_yj"},e}(BasePanel);__reflect(MailPanel.prototype,"MailPanel"),window.MailPanel=MailPanel;var MonsterSiegeSingleData=function(){function t(){this.id=1,this.hp=0,this.tick=0,this.rankDatas=[]}return t.prototype.iniData=function(){},t.prototype.patchData=function(t){this.id=t.readByte(),this.hp=t.readByte();var e=t.readInt();this.tick=1e3*e+Timer.ins().getEgretTimer();for(var i=t.readByte(),n=0;3>n;n++){var a=new MonsterSiegeSingleRankData;a.id=this.id,a.rank=n+1,this.rankDatas[n]=a}for(var n=0;i>n;n++){var a=this.rankDatas[n];a.id=this.id,a.rank=n+1,a.actorId=t.readInt(),a.name=t.readString(),a.hurt=t.readDouble()}},t.prototype.gethuiFuTimer=function(){return Math.max(0,(this.tick-Timer.ins().getEgretTimer())/1e3)},Object.defineProperty(t.prototype,"config",{get:function(){return this._config||(this._config=Cfg.getConfig(MSMonsterConfig,this.id))},enumerable:!0,configurable:!0}),t.prototype.isTz=function(){for(var t=0;t<this.rankDatas.length;t++){var e=this.rankDatas[t];if(e.actorId==Actor.ins().actorID)return!0}return!1},t.prototype.getBossBloodData=function(){var t=new BossBloodData;t.fbId=this.config.fbid;for(var e=[],i=0;i<this.rankDatas.length;i++){var n=this.rankDatas[i];if(n.actorId>0){var a=new BossBloodPlayerData;a.id=n.actorId,a.damage=n.hurt,a.roleName=n.name,e.push(a)}}var o=new BossBloodPlayerData;return o.id=Actor.ins().actorID,o.roleName=Actor.ins().myName,o.damage=MonsterSiegeSys.ins().curHurt,e.push(o),t.playerList=e,t},t}();__reflect(MonsterSiegeSingleData.prototype,"MonsterSiegeSingleData"),window.MonsterSiegeSingleData=MonsterSiegeSingleData;var MonsterSiegeSingleRankData=function(){function t(){this.actorId=0,this.id=1,this.rank=1,this.name="",this.hurt=0}return Object.defineProperty(t.prototype,"config",{get:function(){return this._config||(this._config=Cfg.getConfig(MSMonsterConfig,this.id))},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"hurtRankConfig",{get:function(){return this._hurtRankConfig||(this._hurtRankConfig=Cfg.getConfig(MSHurtRankConfig,this.config.monsterid,this.rank))},enumerable:!0,configurable:!0}),t}();__reflect(MonsterSiegeSingleRankData.prototype,"MonsterSiegeSingleRankData"),window.MonsterSiegeSingleRankData=MonsterSiegeSingleRankData;var PopupData=function(){function t(t){void 0===t&&(t=""),this.desc="",this.sureIcon="anz_zycs_qd",this.sureStr=Lang.btn_qd,this.canceIcon="anz_zycs_qx",this.canceStr=Lang.btn_qx,this.sureCall=null,this.checkCall=null,this.cancelCall=null,this.desc=t}return t.prototype.setFunction=function(t,e,i,n){this.sureCall=new Caller(e,t),this.checkCall=new Caller(i,t),this.cancelCall=new Caller(n,t)},t.prototype.sureFun=function(t){this.sureCall&&(this.sureCall.param=[t],this.sureCall.call())},t.prototype.checkFun=function(t){this.checkCall&&(this.checkCall.param=[t],this.checkCall.call())},t.prototype.cancelFun=function(t){this.cancelCall&&(this.checkCall.param=[t],this.cancelCall.call())},t}();__reflect(PopupData.prototype,"PopupData");var MonsterSiegeRankPanel=function(t){function e(){var e=t.call(this)||this;return e.skinName="MonsterSiegeRankPanelEUI",e.list.itemRenderer=MonsterSiegeRankPanelListItem,e.entityRole=GFunc.createEntityUI(),e.groupEntity.addChild(e.entityRole),e.groupEntity.touchEnabled=!1,e.groupEntity.touchChildren=!1,e}return __extends(e,t),e.prototype.open=function(){t.prototype.open.call(this),this.addItemTapE(this.list,this.onlistReward),this.addLsn(RpSys.ins().patchRp,this.updateRp),this.addLsn(MonsterSiegeSys.ins().patchScoreRankData,this.iniPanel),this.updateRp(),this.iniPanel(),MonsterSiegeSys.ins().sendScoreRankData()},e.prototype.close=function(){t.prototype.close.call(this),this.entityRole.reset()},e.prototype.iniPanel=function(){var t=MonsterSiegeSys.ins();if(this.lbRank.text=""+Lang.act_str25+(0==t.myRank?Lang.common_str17:t.myRank),this.lbScore.textFlow=addColorTF(""+Lang.fb_str187+GFunc.getItemCount(CurType.gongchengJifen)),this.list.dataProvider=new eui.ArrayCollection(t.scoreRankDatas),t.scoreRankDatas.length>0){var e=t.rankTop1Appearance;e&&this.entityRole.setData(e,3),this.lbName.text=""+t.scoreRankDatas[0].name,this.currentState="top1"}else this.currentState="noTop1"},e.prototype.onlistReward=function(t){var e=t.item;t.currentTarget instanceof eui.List&&(openWin(MonsterSiegeRankRewardTipsWin,e),t.stopImmediatePropagation())},e.prototype.onclick=function(t){t.target},e.prototype.updateRp=function(t){void 0===t&&(t=null),!t||t.check(e)},e.getTitle=function(){return"btz_zycs_jfph"},e.getSysId=function(){return 354},e.getTabTitle=function(){return"bqz_zycs_wcjf"},e}(BasePanel);__reflect(MonsterSiegeRankPanel.prototype,"MonsterSiegeRankPanel"),window.MonsterSiegeRankPanel=MonsterSiegeRankPanel;var WxYqhlInviteItem=function(t){function e(){var e=t.call(this)||this;return e.mcBtnSend=new MC,e.setSkinName(),e.btnSend.redPoint.visible=!0,e.mcBtnSend.x=e.btnSend.width/2,e.mcBtnSend.y=e.btnSend.height/2,e.btnSend.addChildAt(e.mcBtnSend,e.btnSend.numChildren-1),e.list.itemRenderer=ItemBaseReward,e.addClickE(e.btnSend,e.onClick),e}return __extends(e,t),e.prototype.setSkinName=function(){this.skinName="WxYqhlInviteItemEUI"},e.prototype.onClick=function(){WxYqhlSys.ins().sendTaskUp(this.data.group,this.data.id)},e.prototype.dataChanged=function(){this.data instanceof WxYqhlTaskData&&(this.lbDec.textFlow=addColorTF(this.data.getDec()),this.list.dataProvider=new eui.ArrayCollection(this.data.getConfig().rewards),this.imgWdc.visible=0==this.data.state,this.btnSend.visible=1==this.data.state,this.imgYlq.visible=2==this.data.state,1==this.data.state?this.mcBtnSend.playFile(getEffName("public_zycs_button01"),-1):this.mcBtnSend.stop())},e}(BaseItemRender);__reflect(WxYqhlInviteItem.prototype,"WxYqhlInviteItem"),window.WxYqhlRankItem=WxYqhlRankItem;var ItemBaseConsume=function(t){function e(){var e=t.call(this)||this;return e.lbName.visible=!1,e}return __extends(e,t),e.prototype.setCount=function(t){var e=this.data;if(e){var i=GFunc.getItemCount(e.id);this.count.visible=!0,this.count.text=GFunc.overLength(i)+"/"+GFunc.overLength(e.count),e.count>i?this.count.textColor=16188934:this.count.textColor=5949490}},e}(ItemBaseReward);__reflect(ItemBaseConsume.prototype,"ItemBaseConsume"),window.ItemBaseConsume=ItemBaseConsume;var GuildBattleLingdiAwardPanel=function(t){function e(){var e=t.call(this)||this;return e.skinName="GuildBattleLingdiAwardPanelEUI",e.listRank.itemRenderer=GuildBattleLingdiAwardItem,e.listRank.dataProvider=e.listRankArr=new eui.ArrayCollection,e.tab.itemRenderer=BaseTabBtn5,e.tab.dataProvider=new eui.ArrayCollection(Lang.gb_str18),e}return __extends(e,t),e.prototype.open=function(){t.prototype.open.call(this),this.addItemTapE(this.tab,this.onListClick),this.addClickE(this.helpBtn,this.onClick),this.updatePanel()},e.prototype.onClick=function(t){openWin(GuildBattleFAQWin)},e.prototype.updatePanel=function(){this.tab.selectedIndex=0,this.listRankArr.source=Cfg.getConfigs(GBManorConfig,3)},e.prototype.onListClick=function(t){this.listRankArr.source=Cfg.getConfigs(GBManorConfig,3-t.itemIndex)},e.getTitle=function(){return"btz_zycs_lingdjl"},e.getTabTitle=function(){return"bqz_zycs_paihangjl"},e.getSysId=function(){return 334},e}(BasePanel);__reflect(GuildBattleLingdiAwardPanel.prototype,"GuildBattleLingdiAwardPanel"),window.GuildBattleLingdiAwardPanel=GuildBattleLingdiAwardPanel;var GuildBattleLotteryPanel=function(t){function e(){var e=t.call(this)||this;return e.datas=[],e.skinName="GuildBattleLotteryPanelEUI",e.list.itemRenderer=GuildBattleLotteryItem,e.list.dataProvider=e.listData=new eui.ArrayCollection,e}return __extends(e,t),e.prototype.open=function(){t.prototype.open.call(this),this.addItemTapE(this.list,this.onItemClick),this.addClickE(this.list,this.onListClick),this.addLsn(GuildBattleSys.ins().patchLottery,this.updatePanel),this.infoPanel()},e.prototype.close=function(){t.prototype.close.call(this)},e.prototype.infoPanel=function(){this.listData.source=this.datas=GuildBattleSys.ins().getManorDatas(),this.list.selectedIndex=0,this.updateAward(this.list.selectedIndex)},e.prototype.updatePanel=function(){this.listData.replaceAll(this.datas)},e.prototype.updateAward=function(t){},e.prototype.onListClick=function(t){if(t.target&&"GuildBattleLotteryItem.btnSend"==t.target.name){var e=t.target.parent.parent;if(null==e.getSelectGuildIindex())return void showtipsFail(Lang.gb_str66);GFunc.checkCurrency(CurType.yb,this.datas[e.itemIndex].getGuessConfig().needyuanbao)&&GuildBattleSys.ins().sendLottery(this.datas[e.itemIndex].id,e.getSelectGuildIindex())}else if(t.target&&"checkBox0"==t.target.name){var e=this.list.getChildAt(this.list.selectedIndex);e.updateSelect(0)}else if(t.target&&"checkBox1"==t.target.name){var e=this.list.getChildAt(this.list.selectedIndex);e.updateSelect(1)}else if(t.target&&"checkBox2"==t.target.name){var e=this.list.getChildAt(this.list.selectedIndex);e.updateSelect(2)}else if(t.target&&"checkBox3"==t.target.name){var e=this.list.getChildAt(this.list.selectedIndex);e.updateSelect(3)}},e.prototype.onItemClick=function(t){this.updateAward(t.itemIndex)},e.openCheck=function(){var t=GuildBattleSys.ins().getGuildBattleState();return t==GuildBattleState.lottery?!0:(showtipsFail(Lang.gb_str13),!1)},e.getSysId=function(){return 334},e.getTitle=function(){return"btz_zycs_lzjc"},e.getTabTitle=function(){return"bqz_zycs_lzjc"},e}(BasePanel);__reflect(GuildBattleLotteryPanel.prototype,"GuildBattleLotteryPanel"),window.GuildBattleLotteryPanel=GuildBattleLotteryPanel;var GuildBattleMainPanel=function(t){function e(){var e=t.call(this)||this;return e.items=[],e.state=GuildBattleState.end,e.skinName="GuildBattleMainPanelEUI",e.items=[e.item0,e.item1,e.item2,e.item3,e.item4,e.item5],e}return __extends(e,t),e.prototype.open=function(){t.prototype.open.call(this),this.addClickE(this.btnRan,this.onClick),this.addClickE(this.btnDaily,this.onClick),this.addClickE(this.btnRedBag,this.onClick),this.addLsn(GuildBattleSys.ins().patchSignUpInfo,this.updatePanel),this.addLsn(GuildBattleSys.ins().patchSignUp,this.updatePanel),this.addLsn(GuildBattleSys.ins().patchVSInfo,this.updatePanel),this.addLsn(GuildBattleSys.ins().patchDailyAward,this.updatePanel),this.addLsn(GuildBattleSys.ins().patchRedBagInfo,this.updatePanel),this.addLsn(GuildBattleSys.ins().patchTimeInfo,this.updateTimeChange),this.addLsn(GuildBattleSys.ins().patchState,this.updateTimeChange),this.addLsn(RpSys.ins().patchRp,this.updateRp),this.updateTimeChange(),this.updatePanel(),this.updateRp()},e.prototype.close=function(){t.prototype.close.call(this)},e.prototype.updateTimeChange=function(){this.updateTime(),this.state=GuildBattleSys.ins().getGuildBattleState(),this.state==GuildBattleState.signUp?GuildBattleSys.ins().sendSignUpInfo():(GuildBattleSys.ins().sendVSInfo(),GuildBattleSys.ins().sendQuickInfo())},e.prototype.updateRp=function(t){void 0===t&&(t=null),(!t||t.check(GuildBattleDailyAwardWin))&&(this.btnDaily.redPoint.visible=RpSys.ins().getData(GuildMapWin,GuildBattleMainWin,e,GuildBattleDailyAwardWin)),(!t||t.check(GuildBattleRedBagWin))&&(this.btnRedBag.redPoint.visible=RpSys.ins().getData(GuildMapWin,GuildBattleMainWin,e,GuildBattleRedBagWin))},e.prototype.updateTime=function(){t.prototype.updateTime.call(this),this.state=GuildBattleSys.ins().getGuildBattleState(),this.lbTimeDec.text=Lang.gb_strs[this.state];var e=GuildBattleSys.ins().getGuildBattleTime(),i="dd天hh小时mm分钟ss秒";i=e<DateUtil.SECOND_PER_HOUR?"mm分ss秒":e<DateUtil.SECOND_PER_DAY?"hh小时mm分":"dd天hh小时mm分钟ss秒",this.lbTime.textFlow=addColorTF(e>0?getFormatTime(e,i):"")},e.prototype.updatePanel=function(){for(var t=GuildBattleSys.ins().isBattle(),e=0;e<this.items.length;e++){var i=GuildBattleSys.ins().getManorDataById(e+1);this.items[e].updateData(i,this.state,t)}this.lbDec.visible=this.state==GuildBattleState.lottery?!t:!1,this.btnDaily.visible=1==GuildBattleSys.ins().dailyAwardState,this.btnRedBag.visible=GuildBattleSys.ins().redBagData.canRod||1==GuildBattleSys.ins().redBagData.canSend},e.prototype.onClick=function(t){switch(t.target){case this.btnRan:openWin(GuildBattleAwardWin2);break;case this.btnDaily:openWin(GuildBattleDailyAwardWin);break;case this.btnRedBag:if(!GuildBattleSys.ins().getGuildBattleIsOver())return void showtipsFail(Lang.gb_str48);if(0==GuildBattleSys.ins().redBagData.canSend)return void showtipsFail(Lang.gb_str46);openWin(1==GuildBattleSys.ins().redBagData.canSend||GuildBattleSys.ins().redBagData.canRod?GuildBattleRedBagWin:GuildBattleRedBagResultWin)}},e.getSysId=function(){return 334},e.getTitle=function(){return"btz_zycs_ldsz"},e.getTabTitle=function(){return"bqz_zycs_ldsz"},e.openCheck=function(){return GFunc.checkSysOpen(334)?GuildSys.ins().isAddGuild()?!0:(openWin(GuildNavWin),showTipsWarn(Lang.guild_str7),!1):void 0},e}(BasePanel);__reflect(GuildBattleMainPanel.prototype,"GuildBattleMainPanel"),window.GuildBattleMainPanel=GuildBattleMainPanel;var WxYqhlPanel=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.redPointHead=[WxYqhlWin],e}return __extends(e,t),e.prototype.setSkinName=function(){this.skinName="WxYqhlPanelEUI"},e.prototype.setTabItem=function(){this.tab.itemRenderer=WxyqhlTabBtn},e.prototype.open=function(e){if(void 0===e&&(e=-1),-1!=e){var i=this.getPanelNames(),n=this.getShowPanelNames();e=n.indexOf(i[e])}t.prototype.open.call(this,e)},e.getTitle=function(){return"btz_zycs_yqhl"},e.getTabTitle=function(){return"bqz_zycs_yqhl"},e.panelNames=[WxYqhlRankPanel,WxYqhlEggPanel,WxYqhlInvitePanel,WxYqhlGatherPanel,WxYqhlZsPanel,WxYqhlSVIPPanel],e}(BaseTabPanel);__reflect(WxYqhlPanel.prototype,"WxYqhlPanel"),window.WxYqhlPanel=WxYqhlPanel;var ItemBaseName=function(t){function e(){var e=t.call(this)||this;return e.setSkinName(),e}return __extends(e,t),e.prototype.setSkinName=function(){this.skinName="ItemSkin",this.currentState="name"},e}(ItemBase);__reflect(ItemBaseName.prototype,"ItemBaseName");var MapBase=function(t){function e(){var e=t.call(this)||this;return e.shapes=[],e.mapCells=new MapCells,e.aStar=new AStar,e}return __extends(e,t),e.ins=function(){return this.instance||(this.instance=new e)},e.prototype.initMap=function(t){e.CELL_SIZE=t.title_wh,this.maxHeight=t.pixHeight,this.maxWidth=t.pixWidth,this.col=t.maxX,this.row=t.maxY,this.mapCells.setData(t),this.aStar.setData(this.mapCells)},e.prototype.getPath=function(t,i,n,a){void 0===n&&(n=e.ins().checkWalkable),void 0===a&&(a=1);var o=t.x>>0,s=t.y>>0,r=i.x>>0,u=i.y>>0;if(r==o&&u==s)return null;var h,l,p,c,d,g,f=64,y=64,m=i.x/f,C=i.y/y,v=t.x/f,S=t.y/y,b=0,I=0;if(l=AStarLine.canPass(m,C,v,S,n,!1),l[0])return h=[],h[0]=o,h[1]=s,h;if(d=Timer.ins().getEgretTimer(),p=this.aStar.getPath(m>>0,C>>0,v>>0,S>>0,n),d=Timer.ins().getEgretTimer()-d,p){g=Timer.ins().getEgretTimer(),h=[];for(var _=p.length,w=_;w>0;w--){w!=_&&(c=p[w],m=c.nX+.5,C=c.nY+.5);var D=0;for(D=0;w>D;D++)if(0!=D?(c=p[D],v=c.nX+.5,S=c.nY+.5):(v=o/f,S=s/y),l=AStarLine.canPass(m,C,v,S,n,!1),l[0]){h[h.length]=v*f,h[h.length]=S*y,w=D+1;break}D==w&&(w==_||1==w?(v>m?n(m+1>>0,C>>0)?(b=1,I=0):(b=0,I=S>C?1:-1):n(m-1>>0,C>>0)?(b=-1,I=0):(b=0,I=S>C?1:-1),m=v>m?m+1>>0:m>>0,C=S>C?C+1>>0:C>>0,h[h.length]=m*f+b,h[h.length]=C*y+I,1==w?(h[h.length]=o,h[h.length]=s):(m=h[h.length-2]/f,C=h[h.length-1]/y,w++)):(h[h.length]=v*f,h[h.length]=S*y))}g=Timer.ins().getEgretTimer()-g}return d+g>=500&&console.log("寻路耗时",d,"修正耗时",g),h},e.prototype.getAroundPath=function(t,i,n){void 0===n&&(n=e.ins().checkWalkableTemp);for(var a=e.CELL_SIZE,o=Math.floor(t.x/a),s=Math.floor(t.y/a),r=null,u=Number.MAX_VALUE,h=0,l=0,p=0;24>p;++p){var c=8>p?AStar.OFFSET_X[p]:AStar.OFFSET_X2[p-8],d=8>p?AStar.OFFSET_Y[p]:AStar.OFFSET_Y2[p-8],g=o+c,f=s+d;if(!(0>g||g>=this.col||0>f||f>=this.row)&&n(g,f)){var y=(g+.5)*a,m=(f+.5)*a,C=Math.pow(y-i.x,2)+Math.pow(m-i.y,2);if(u>C&&(u=C,h=y,l=m),7==p&&h&&l)break}}if(h&&l){var v=this.mapCells.getCell(o,s);v&&(v.handle=Number.MAX_VALUE),r=this.getPath(new XY(h,l),i,n),v&&(v.handle=0)}return r},e.prototype.getNearestAroundXY=function(t,i,n){void 0===n&&(n=e.ins().checkWalkable);for(var a=e.CELL_SIZE,o=Math.floor(t.x/a),s=Math.floor(t.y/a),r=Number.MAX_VALUE,u=new XY(t.x,t.y),h=0;8>h;++h){var l=8>h?AStar.OFFSET_X[h]:AStar.OFFSET_X2[h-8],p=8>h?AStar.OFFSET_Y[h]:AStar.OFFSET_Y2[h-8],c=o+l,d=s+p;if(!(0>c||c>=this.col||0>d||d>=this.row)&&n(c,d)){var g=(c+.5)*a,f=(d+.5)*a,y=Math.pow(g-i.x,2)+Math.pow(f-i.y,2);r>y&&(r=y,u.x=g,u.y=f)}}return u},e.prototype.getNearestRandomXY=function(t,i){void 0===i&&(i=e.ins().checkWalkable);for(var n=e.CELL_SIZE,a=Math.floor(t.x/n),o=Math.floor(t.y/n),s=[],r=0;8>r;++r){var u=AStar.OFFSET_X[r],h=AStar.OFFSET_Y[r],l=a+u,p=o+h;0>l||l>=this.col||0>p||p>=this.row||!i(l,p)||s.push(r)}var c=MathUtil.randomArray(s);return a=(a+AStar.OFFSET_X[c]+.5)*n,o=(o+AStar.OFFSET_Y[c]+.5)*n,new XY(a,o)},e.prototype.checkWalkable=function(t,e){var i=!1,n=this.mapCells.getCell(t,e);return n&&(i=n.walkable),i},e.prototype.checkWalkableTemp=function(t,e){var i=!1,n=this.mapCells.getCell(t,e);return n&&(i=n.walkable&&0==n.handle),i},e.prototype.checkWalkableByPixel=function(t,i){var n=Math.floor(t/e.CELL_SIZE),a=Math.floor(i/e.CELL_SIZE);return this.checkWalkable(n,a)},e.prototype.checkAlpha=function(t,e){var i=!1,n=this.mapCells.getCell(t,e);return n&&(i=n.hidden),i},e.prototype.checkAlphaByPixel=function(t,i){var n=Math.floor(t/e.CELL_SIZE),a=Math.floor(i/e.CELL_SIZE);return this.checkAlpha(n,a)},e.prototype.capture=function(t,i,n){void 0===n&&(n=0);
var a=Math.floor(t/e.CELL_SIZE),o=Math.floor(i/e.CELL_SIZE),s=this.mapCells.getCell(a,o);s&&(s.handle=n)},e.prototype.checkInMap=function(t,i){return t/e.CELL_SIZE<=this.col&&i/e.CELL_SIZE<=this.row},e.prototype.setCellFlags=function(t,e,i){var n=this.mapCells.getCell(t,e);n&&(n.flags=i)},e.prototype.getCellFlags=function(t,e){var i=this.mapCells.getCell(t,e);return i?i.flags:0},e.prototype.drawGrid=function(){this.clearDrawGrid(),this.shapesContainer=this.shapesContainer||new egret.DisplayObjectContainer,this.shapesContainer.touchEnabled=!1,this.shapesContainer.touchChildren=!1;for(var t=this.col,i=this.row,n=e.CELL_SIZE,a=0;t>a;a++)for(var o=0;i>o;o++){var s=a*i+o,r=this.shapes[s];r||(r=this.shapes[s]=new egret.Shape);var u=r.graphics;this.checkAlpha(a,o)?u.beginFill(16776960,.1):this.checkWalkable(a,o)?u.beginFill(65280,.1):u.beginFill(16711680,.1),u.lineStyle(2,0),u.drawRect(0,0,n,n),u.endFill(),r.x=a*n,r.y=o*n;var h=new eui.Label;h.size=12,h.text=a+","+o,h.x=a*n,h.y=o*n,h.name="label"+a+","+o,this.shapesContainer.addChild(h),this.shapesContainer.addChild(r)}this.addChild(this.shapesContainer),this.shapesContainer.cacheAsBitmap=!0},e.prototype.clearDrawGrid=function(){if(this.shapesContainer&&this.shapes){for(;this.shapesContainer.numChildren>0;)this.shapesContainer.removeChildAt(0);this.shapes.length=0}},e.CELL_SIZE=64,e}(egret.DisplayObjectContainer);__reflect(MapBase.prototype,"MapBase");var GuildBattleMoBaiRankPanel=function(t){function e(){var e=t.call(this)||this;return e.skinName="GuildBattleMoBaiRankPanelEUI",e.mcTitle=new MC,e.addChild(e.mcTitle),e.mcTitle.playFile(getEffName("ch_zycs_18"),-1),e.mcTitle.x=345,e.mcTitle.y=200,e}return __extends(e,t),e.prototype.open=function(){t.prototype.open.call(this),this.addClickE(this.btnSend,this.onClick),this.mobaiData=GuildBattleSys.ins().mobaiData,this.addLsn(GuildBattleSys.ins().patchMobai,this.updatePanel),this.addLsn(GuildBattleSys.ins().patchMobaiInfo,this.updatePanel),this.addLsn(RpSys.ins().patchRp,this.updateRp),this.updatePanel(),this.updateRp()},e.prototype.updateRp=function(t){void 0===t&&(t=null),(!t||t.check(e))&&(this.btnSend.redPoint.visible=RpSys.ins().getData(GuildMapWin,GuildBattleMainWin,e))},e.prototype.updatePanel=function(){this.mobaiData.isMobai&&this.updateEntity(),this.imgXwyd.visible=!this.mobaiData.isMobai,this.groupMc.visible=this.mobaiData.isMobai,this.imgNameBg.visible=this.mobaiData.isMobai,this.lbName.visible=this.mobaiData.isMobai,this.lbName.text=this.mobaiData.mobaiName,this.lbGuildName.visible=this.mobaiData.isMobai,this.lbGuildName.text=""+Lang.guild_str60+this.mobaiData.mobaiGuildName,this.lbAward.text=Lang.gb_str21.replace("$num$",""+Cfg.getConfig(GBConstConfig).worshipyuanbao),this.updateCount()},e.prototype.updateEntity=function(){this.groupMc.removeChildren();var t,e=GuildBattleSys.ins().mobaiData,i=0;if(e.mountId){var n=Cfg.getConfig(DamonHuanhuaBaseConfig,e.mountId),a=n.uirole,o=n.uihigh;this.groupMc.addChild(MC.createCenterGruop(a,-1)),i=o,t=a}var s;if(e.wingId>0){var r=e.getWingFileName();s=MC.createCenterGruop(r,-1),s.verticalCenter=-i,this.groupMc.addChild(s)}var u=e.getBodyFileName();if(s=MC.createCenterGruop(u,-1),s.verticalCenter=-i,this.groupMc.addChild(s),t&&this.groupMc.addChild(MC.createCenterGruop("up_"+t,-1)),u=e.getWeaponFileName(),s=MC.createCenterGruop(u,-1),s.verticalCenter=-i,this.groupMc.addChild(s),e.shengLingId>0){var h=e.getShengLingFileName();s=MC.createCenterGruop(h,-1),s.verticalCenter=-i,this.groupMc.addChild(s)}},e.prototype.updateCount=function(){this.lbCount.visible=this.mobaiData.isMobai,this.lbCount.textFlow=addColorTF(Lang.gb_str20+"："+addColor(this.mobaiData.count,5767068))},e.prototype.onClick=function(t){switch(t.target){case this.btnSend:GFunc.checkFbCondition(GConst.MainCityFbId)&&(LogicSys.ins().centerEntity.AI.startfindNpc(GConst.GuildBattleMoBaiNPCId),closeWin(GuildBattleMainWin),closeWin(GuildMapWin))}},e.getSysId=function(){return 334},e.getTitle=function(){return"btz_zycs_lzmb"},e.getTabTitle=function(){return"bqz_zycs_lzmb"},e}(BasePanel);__reflect(GuildBattleMoBaiRankPanel.prototype,"GuildBattleMoBaiRankPanel"),window.GuildBattleMoBaiRankPanel=GuildBattleMoBaiRankPanel;var QiyuWin=function(t){function e(){var e=t.call(this)||this;return e.redPointHead=[],e.winType=WinType.MainWin,e}return __extends(e,t),e.panelNames=[QiyuEventPanel,QMDBPanel],e}(BaseWinAutoTab);__reflect(QiyuWin.prototype,"QiyuWin"),window.QiyuWin=QiyuWin;var ItemBaseRewardActivity=function(t){function e(){return t.call(this)||this}return __extends(e,t),e.prototype.setSkinName=function(){this.skinName="ItemSkin",this.currentState="shop",this.lbName.visible=!1},e.prototype.dataChanged=function(){t.prototype.dataChanged.call(this);var e=this.data;if(e){var i=Cfg.getItemCfg(e.id);return this.lbName.text=i.getName(),this.lbName.textColor=GConst.PZColor[i.quality],this.setItemKuangEffect(!0,ResMgr.getEquipEffName(i.quality)),void this.setImgFmp(1==e.fmp)}},e}(ItemBaseReward);__reflect(ItemBaseRewardActivity.prototype,"ItemBaseRewardActivity");var QiyuEventData3=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.fuchou=0,e}return __extends(e,t),e.prototype.parser=function(t){this.state=t.readByte(),this.fuchou=t.readInt()},e.prototype.getBtnStr=function(){return Lang.qy_str1},e.prototype.getDesc=function(){var t=Lang.qy_strs[this.fuchou];return""!=t&&(t=addColor(t,5308240)),t},e}(QiyuEventBaseData);__reflect(QiyuEventData3.prototype,"QiyuEventData3"),window.QiyuEventData3=QiyuEventData3;var QiyuDuiHuanPanel=function(t){function e(){var e=t.call(this)||this;return e.skinName="QiyuDuiHuanPanelEUI",e.list.itemRenderer=QiyuDuiHuanItem,e.list.dataProvider=e.listData=new eui.ArrayCollection,e}return __extends(e,t),e.prototype.open=function(){t.prototype.open.call(this),this.addClickE(this.list,this.onlistDuiHuantemClick),this.addLsn(QiyuSys.ins().patchQiyuRemind,this.updatePanel),this.addLsn(LogicSys.ins().patchCurrency,this.updateScore),this.addLsn(RpSys.ins().patchRp,this.updateRp),this.updateScore(),this.updateRp()},e.prototype.updateRp=function(t){if(void 0===t&&(t=null),null==t||t.check(e))for(var i=this.list.numElements,n=0;i>n;n++){var a=this.list.getElementAt(n);a&&a.updateRedPoint()}},e.prototype.updatePanel=function(){for(var t=this.list.numElements,e=0;t>e;e++){var i=this.list.getElementAt(e);i&&i.updateItem()}},e.prototype.updateScore=function(t){t&&t.type!=CurType.QiyuValue||(this.listData.replaceAll(QiyuSys.ins().getDuiHuanDatas().concat()),this.lbJiFen.text=Lang.qy_str10+"："+GFunc.getItemCount(CurType.QiyuValue))},e.prototype.onlistDuiHuantemClick=function(t){if("btnDuiHuan"==t.target.name){var e=t.target.parent.data;GFunc.checkCurrency(CurType.QiyuValue,e.config.need)&&openWin(BuyWin,e.getBuyData())}if("checkBoxTiXing"==t.target.name){var i=t.target.parent.data;QiyuSys.ins().sendQiyuRemind(i.config.id)}},e.getTitle=function(){return"btz_zycs_dh"},e.getTabTitle=function(){return"btz_zycs_qydh"},e.getSysId=function(){return 296},e}(BasePanel);__reflect(QiyuDuiHuanPanel.prototype,"QiyuDuiHuanPanel"),window.QiyuDuiHuanPanel=QiyuDuiHuanPanel;var GuildBattleRivalLastPanel=function(t){function e(){return t.call(this)||this}return __extends(e,t),e.prototype.setTabItem=function(){this.tab.itemRenderer=BaseTabBtn3},e.prototype.setSkinName=function(){this.skinName="GuildBattleRivalLastPanelEUI"},e.getTitle=function(){return"btz_zycs_sjzk"},e.getTabTitle=function(){return"bqz_zycs_sjzk"},e.getSysId=function(){return 334},e.panelNames=[GuildBattleManorRankLastPanel,GuildBattleGerenScoreRankLastPanel],e}(BaseTabPanel);__reflect(GuildBattleRivalLastPanel.prototype,"GuildBattleRivalLastPanel"),window.GuildBattleRivalLastPanel=GuildBattleRivalLastPanel;var GuildBattleRivalPanel=function(t){function e(){return t.call(this)||this}return __extends(e,t),e.prototype.setTabItem=function(){this.tab.itemRenderer=BaseTabBtn5},e.prototype.setSkinName=function(){this.skinName="GuildBattleRivalPanelEUI"},e.prototype.open=function(e,i){void 0===i&&(i=null),this.data=i,t.prototype.open.call(this,e)},e.prototype.getParam=function(){return this.data},e.getTitle=function(){return"btz_zycs_ldzk"},e.getTabTitle=function(){return"bqz_zycs_ldzk"},e.getSysId=function(){return 334},e.panelNames=[GuildBattlePrelimPanel,GuildBattleFinalsPanel],e}(BaseTabPanel);__reflect(GuildBattleRivalPanel.prototype,"GuildBattleRivalPanel"),window.GuildBattleRivalPanel=GuildBattleRivalPanel;var GuildBattleSignUpPanel=function(t){function e(){var e=t.call(this)||this;return e.skinName="GuildBattleSignUpPanelEUI",e.listRank.itemRenderer=GuildBattleSignUpItem,e.listRank.dataProvider=e.listRankData=new eui.ArrayCollection,e}return __extends(e,t),e.prototype.open=function(e){t.prototype.open.call(this),this.manordata=e,this.addClickE(this.btnSend,this.onClick),this.addLsn(GuildBattleSys.ins().patchSignUpInfo,this.updatePanel),this.addLsn(GuildBattleSys.ins().patchSignUp,this.updatePanel),this.updatePanel()},e.prototype.close=function(){t.prototype.close.call(this)},e.prototype.updatePanel=function(){var t=GuildBattleSys.ins().getSignUpId();if(t>0){var e=t==this.manordata.id;this.btnSend.visible=e,this.lbTips1.visible=e,this.lbTips2.visible=!e}else this.btnSend.visible=!0,this.lbTips1.visible=!0,this.lbTips2.visible=!1;this.lbRoleName.text=Lang.gb_str6+"："+GuildBattleSys.ins().guildRoleName,this.lbCount.text=Lang.gb_str7+"："+GuildBattleSys.ins().guildCount,this.totalPower.text=""+GuildBattleSys.ins().guildPower,this.listRankData.source=this.manordata.signUpDatas,this.lbTips3.visible=0==this.manordata.signUpDatas.length,this.btnSend.label=this.manordata.getSignUpRank()>0?Lang.gb_str11:Lang.gb_str10},e.prototype.onClick=function(t){GuildSys.ins().myOffice==GuildOffice.FU_MENG_ZHU||GuildSys.ins().myOffice==GuildOffice.MENG_ZHU?GuildBattleSys.ins().sendSignUp(this.manordata.id):showtipsFail(0==this.manordata.getSignUpRank()?Lang.gb_str52:Lang.gb_str62)},e.getSysId=function(){return 334},e.getTitle=function(){return"btz_zycs_ldbm"},e.getTabTitle=function(){return"bqz_zycs_ldbm"},e}(BasePanel);__reflect(GuildBattleSignUpPanel.prototype,"GuildBattleSignUpPanel"),window.GuildBattleSignUpPanel=GuildBattleSignUpPanel;var RankDataPower=function(t){function e(){var e=t.call(this)||this;return e.power=0,e}return __extends(e,t),e.prototype.parser=function(e){t.prototype.parser.call(this,e),this.power=e.readDouble()},e.prototype.getRankStr=function(){return this.power>=1e8?Lang.common_str113+"："+GFunc.overLength(this.power,2):Lang.common_str113+"："+GFunc.overLength(this.power)},e}(RankData);__reflect(RankDataPower.prototype,"RankDataPower");var RankType;!function(t){t[t.JSZL=0]="JSZL",t[t.JSDJ=1]="JSDJ",t[t.GuaJi=2]="GuaJi",t[t.WanMo=3]="WanMo",t[t.HeiAn=4]="HeiAn",t[t.JJC=5]="JJC",t[t.ZMZL=6]="ZMZL",t[t.JLZL=7]="JLZL",t[t.YBZL=8]="YBZL",t[t.SQZL=9]="SQZL",t[t.CBZL=10]="CBZL",t[t.SZZL=11]="SZZL",t[t.MLZL=12]="MLZL",t[t.HQZL=13]="HQZL",t[t.LLDJ=14]="LLDJ",t[t.TXDJ=15]="TXDJ",t[t.ZBZL=16]="ZBZL",t[t.SMZL=17]="SMZL",t[t.Ladder=18]="Ladder",t[t.Fort=19]="Fort",t[t.JOB_ZS=20]="JOB_ZS",t[t.JOB_FS=21]="JOB_FS",t[t.JOB_GJS=22]="JOB_GJS",t[t.FieldPk=25]="FieldPk",t[t.Qizhi=26]="Qizhi",t[t.YongZheShiLian=28]="YongZheShiLian",t[t.QHZL=30]="QHZL",t[t.MZZL=31]="MZZL",t[t.weiwang=999]="weiwang",t[t.emoisle=999]="emoisle",t[t.QHDJ=999]="QHDJ",t[t.PYZL=999]="PYZL",t[t.YSZL=999]="YSZL",t[t.HFDJ=999]="HFDJ",t[t.gem=999]="gem",t[t.juhun=999]="juhun"}(RankType||(RankType={}));var TSSZPanel=function(t){function e(){var e=t.call(this)||this;return e.jobArr=[JobConst.ZhanShi,JobConst.FaShi,JobConst.GongJianShou],e.initUI(),e}return __extends(e,t),e.prototype.setSkinName=function(){this.skinName="TSSZPanelEUI"},e.prototype.initUI=function(){t.prototype.initUI.call(this),this.list.itemRenderer=TSSZPanelItem,this.list.dataProvider=this.listArr=new eui.ArrayCollection,this.listTab.itemRenderer=TSSZPanelTabItem,this.listTab.dataProvider=this.listTabArr=new eui.ArrayCollection,this.listTabArr.source=this.jobArr,this.mcIcon=new McIcon,this.groupMC.addChild(this.mcIcon)},e.prototype.open=function(){t.prototype.open.call(this),this.addClickE(this.btnHelp,this.onClick),this.addLsn(RankSys.ins().patchRankData,this.updatePanel),this.addItemTapE(this.listTab,this.onTabListClick);var e=RankSys.ins().getTSSZLeftTime();e>0?Timer.ins()["do"](0,1e3,Math.ceil(e),this.formatTime,this):this.formatTime(0),this.listTab.selectedIndex=this.jobArr.indexOf(Actor.ins().job),this.listTab.validateNow(),this.updatePanel(),RankSys.ins().sendGetRankData(RankSys.ins().getRankTypeByJob(Actor.ins().job))},e.prototype.formatTime=function(t){var e="";e=t>0?Lang.rank_str14+StrUtil.addColor(""+getFormatTime(t,"dd天hh小时mm分钟ss秒"),5767068):Lang.fb_str83,this.labelTime.textFlow=addColorTF(e)},e.prototype.updatePanel=function(){var t=this.listTab.selectedItem||JobConst.ZhanShi;this.updateList(t)},e.prototype.onTabListClick=function(t){var e=this.listTab.selectedItem||JobConst.ZhanShi;this.updateList(e),RankSys.ins().sendGetRankData(RankSys.ins().getRankTypeByJob(e))},e.prototype.updateList=function(t){var e=Cfg.getConfig(TSSZConfig,t);this.imgName.source="shenqi_zycs_"+t+"13",this.mcIcon.open(e.mcIcon,t),this.bmpPower.text=e.power.toString();var i=RankSys.ins().getRankTypeByJob(t),n=RankSys.ins().getRankData(i);this.listArr.source=n.getFullDatalist(),this.labelMyRank.visible=this.labelMyPower.visible=t==Actor.ins().job,this.labelMyRank.textFlow=addColorTF("我的排名："+addColor(""+(n.myRank>0?n.myRank:"未上榜"),16115290)),this.labelMyPower.textFlow=addColorTF("我的战力："+addColor(""+Actor.ins().power,16115290)),this.labelDesc.visible=t!=Actor.ins().job},e.prototype.onClick=function(t){switch(t.target){case this.btnHelp:openWin(HelpWin,Cfg.getConfig(HelpInfoConfig,94).text)}},e.getSysId=function(){return 12},e.getTitle=function(){return"btz_zycs_tssz"},e.getTabTitle=function(){return"bqz_zycs_tssz"},e}(BasePanel);__reflect(TSSZPanel.prototype,"TSSZPanel"),window.TSSZPanel=TSSZPanel;var RankItemBase=function(t){function e(){var e=t.call(this)||this;return e.touchEnabled=!0,e.initSkinName("RankItemBaseRendererEUI"),e}return __extends(e,t),e.prototype.initSkinName=function(t){this.skinName=t},e.prototype.dataChanged=function(){var t=this.data;2==t.rank||3==t.rank?this.currentState="max":this.currentState="min",this.validateNow(),t.rank<=3?(this.imgRank.source=1==t.rank?"phb_zycs_no1":"jjc_zycs_no"+t.rank,this.imgRank.visible=!0,this.labelRank.visible=!1):(this.imgRank.visible=!1,this.labelRank.visible=!0,this.labelRank.text=t.rank.toString()),this.imgBg.visible=this.imgChunk.visible=1!=t.rank,this.labelName.textColor=1==t.rank?15794098:3821938,this.labelPower.textColor=1==t.rank?16771851:16737792,this.labelName.text=""+t.getRankName(),this.labelPower.text=""+t.getRankStr(),this.labelName.size=1==t.rank?24:20,this.labelPower.size=1==t.rank?24:20,this.imgBg.source=2==t.rank?"phb_zycs_d1":"phb_zycs_d2",this.imgLine.visible=1!=t.rank,this.imgVip.visible=t.vipLv>0||t.svipLv>0,this.imgVip.source=t.svipLv>0?"phb_zycs_V":"phb_zycs_V1"},e}(BaseItemRender);__reflect(RankItemBase.prototype,"RankItemBase"),window.RankItemBase=RankItemBase;var BBFLLoginData=function(){function t(t){this.index=1,this.type=BBFLType.Login,t&&(this.config=t,this.index=t.index)}return Object.defineProperty(t.prototype,"isBuy",{get:function(){return RechargeActSys.ins().bbflModel.isBuyLogin},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"dabiao",{get:function(){return RechargeActSys.ins().bbflModel.loginDay},enumerable:!0,configurable:!0}),t.prototype.getDec=function(){return Lang.act_str97.replace("$str$",addColor(""+this.config.day+Lang.common_tian,6225800))},t.prototype.getValue=function(){return addColor(this.dabiao+"/"+this.config.day,this.dabiao<this.config.day?13967392:46913)},t.prototype.getRewards=function(){return this.config.reward},Object.defineProperty(t.prototype,"record",{get:function(){return RechargeActSys.ins().bbflModel.recordLogin},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"isReward",{get:function(){return 1==(this.record>>this.index&1)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"canReward",{get:function(){var t=!1;return this.isReward||(t=this.dabiao>=this.config.day),t},enumerable:!0,configurable:!0}),t}();__reflect(BBFLLoginData.prototype,"BBFLLoginData");var RankTabItem=function(t){function e(){var e=t.call(this)||this;return e.skinName="RankTabItemEUI",e.redPoint.visible=!1,e}return __extends(e,t),e.prototype.dataChanged=function(){var t=this.data;this.consuTxt.text=""+Lang.rank_Type[t],this.redPoint.visible=RankSys.ins().canPraiseByType(t)},e}(BaseItemRender);__reflect(RankTabItem.prototype,"RankTabItem"),window.RankTabItem=RankTabItem;var RankWin=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.winType=WinType.MainWin,e.index=0,e}return __extends(e,t),e.prototype.open=function(e,i){void 0===i&&(i=0),this.index=i,t.prototype.open.call(this,e)},e.prototype.getParam=function(){return[this.index]},e.panelNames=[RankPanel],e}(BaseWinAutoTab);__reflect(RankWin.prototype,"RankWin"),window.RankWin=RankWin;var FirstRechargeBuyWin=function(t){function e(){var e=t.call(this)||this;return e.init(),e}return __extends(e,t),e.prototype.init=function(){this.skinName="FirstRechargeBuyWinEUI",this.addBg(),this.layer=LayerMgr.Popup,this.listArray=new eui.ArrayCollection,this.list.itemRenderer=ItemBaseReward,this.list.dataProvider=this.listArray,this.mc=new MC,this.mc.touchEnabled=!1,this.entityGroup.touchEnabled=!1,this.entityGroup.addChild(this.mc),this.menuList.itemRenderer=FirstRechargeBuyWinBtnRender,this.mcIcon=new McIcon,this.groupMcIcon.addChild(this.mcIcon)},e.prototype.updateRp=function(t){if(void 0===t&&(t=null),!t||t.check(e))for(var i=this.menuList.numElements,n=0;i>n;n++){var a=this.menuList.getElementAt(n);a&&a.updateRedPoint()}},e.prototype.open=function(){t.prototype.open.call(this),this.addLsn(RechargeActSys.ins().patchFirstRecharge,this.updateReceive),this.addClickE(this.btnBuy,this.onClick),this.addClickE(this.btnReceive,this.onClick),this.addItemTapE(this.menuList,this.onMenuClick),this.addLsn(RpSys.ins().patchRp,this.updateRp),this.menuList.dataProvider=new eui.ArrayCollection(RechargeActSys.ins().firstRechargeData.firstRechargeItemDatas),this.menuList.selectedIndex=RechargeActSys.ins().firstRechargeData.getCurDay()-1,this.panelIni()},e.prototype.close=function(){t.prototype.close.call(this),this.mcIcon.close()},e.prototype.updateReceive=function(){this.menuList.selectedIndex=RechargeActSys.ins().firstRechargeData.getCurDay()-1,this.updatePanel()},e.prototype.panelIni=function(){var t=this.menuList.selectedItem,e=t.config;this.btnBuy.label="充值"+Cfg.getPayMoneyRMBByYb(e.pay)+"元",this.updatePanel()},e.prototype.updatePanel=function(){var t=this.menuList.selectedItem,e=t.config;this.listArray.source=GFunc.getItemDataRewardByJob(e.awardList),this.imgDay.source="schl_zycs_"+e.day+"day",this.bitPower.text=e.power.toString(),this.imgPowerBg.visible=e.power>0,this.groupPower.visible=e.power>0;var i=Actor.ins().job,n=i-1;this.mc.playFile(ResMgr.getEffName("bigweapon"+e.mc[n]),-1),this.mcIcon.open(t.config.mcIcon),this.entityGroup.visible=1==e.day,this.groupMcIcon.visible=1!=e.day,this.imgRightGG.source="schl_zycs_day"+e.day,RechargeActSys.ins().firstRechargeData.isRecharge()?0==t.state?this.currentState="noreceive":1==t.state?this.currentState="receive":this.currentState="yireceive":this.currentState="buy"},e.prototype.onMenuClick=function(t){this.updatePanel()},e.prototype.onClick=function(t){switch(t.currentTarget){case this.btnBuy:VipSys.ins().showReCharge(Cfg.getConfig(FirstRechargeConfig,1).pay);break;case this.btnReceive:var e=this.menuList.selectedItem;RechargeActSys.ins().senbFirstRecharge(e.day)}},e.getSysId=function(){return 258},e}(BaseWin);__reflect(FirstRechargeBuyWin.prototype,"FirstRechargeBuyWin"),window.FirstRechargeBuyWin=FirstRechargeBuyWin;var FirstRechargeEveryDayPanel=function(t){function e(){var e=t.call(this)||this;return e.selectIndex=0,e.initUI(),e}return __extends(e,t),e.prototype.initUI=function(){this.skinName="FirstreChargeeVeryDayEUI",this.setSkinPart("panel1",new FirstRechargeEveryDayPanel1),this.setSkinPart("panel2",new FirstRechargeEveryDayPanel2),this.setSkinPart("panel3",new FirstRechargeEveryDayPanel3),this.panel1.visible=!1,this.panel2.visible=!1,this.panel3.visible=!1,this.tab.dataProvider=new eui.ArrayCollection([Lang.recharge_str1.replace("$yb$","100"),Lang.recharge_str1.replace("$yb$","500"),Lang.recharge_str1.replace("$yb$","1000")])},e.prototype.open=function(e){void 0===e&&(e=0),t.prototype.open.call(this),this.addLsn(RpSys.ins().patchRp,this.updateRp),this.updateRp(),RechargeActSys.ins().firstRechargeEveryDay.hasGetAward()?this.setTabIndex(2):this.setTabIndex(e)},e.prototype.close=function(){t.prototype.close.call(this),this.currPanel&&this.currPanel.close()},e.prototype.updateRp=function(t){void 0===t&&(t=null),(!t||t.check(e))&&(this.tab.validateNow(),this.tab.getElementAt(0).redPoint.visible=RpSys.ins().getData(RechargeWin1,e,1),this.tab.getElementAt(1).redPoint.visible=RpSys.ins().getData(RechargeWin1,e,2),this.tab.getElementAt(2).redPoint.visible=RpSys.ins().getData(RechargeWin1,e,3))},e.prototype.onTabClicked=function(t){void 0===t&&(t=null),this.setTabIndex(this.tab.selectedIndex)},e.prototype.setTabIndex=function(t){this.currPanel&&this.currPanel.close(),this.currPanel=this.viewStack.getElementAt(t);var e=egret.getQualifiedClassName(this.currPanel),i=getDefinitionByName(e);i.openCheck()?(this.viewStack.selectedIndex=this.tab.selectedIndex=t,this.currPanel.open()):this.tab.selectedIndex=this.selectIndex},e.getTitle=function(){return"btz_zycs_mrsc"},e.getTabTitle=function(){return"bqz_zycs_mrsc"},e.isShow=function(){RechargeActSys.ins().isFirstRechargeEveryDay();return!0},e}(BasePanel);__reflect(FirstRechargeEveryDayPanel.prototype,"FirstRechargeEveryDayPanel"),window.FirstRechargeEveryDayPanel=FirstRechargeEveryDayPanel;var FirstRechargeEveryDayPanel1=function(t){function e(){var e=t.call(this)||this;return e.index=1,e.setSkinName(),e.btnGetAward.redPoint.visible=!0,e.list.itemRenderer=ItemBaseRewardActivity,e.list.dataProvider=e.listAwardCollection=new eui.ArrayCollection,e.imgIcons=[e.imgIcon0,e.imgIcon1,e.imgIcon2],e}return __extends(e,t),e.prototype.setSkinName=function(){this.skinName="FirstreChargeeVeryDayEUI1",this.index=1},e.prototype.open=function(){t.prototype.open.call(this),this.addLsn(RechargeActSys.ins().patchUpdateRecharge,this.update),this.addClickE(this.btnRecharge,this.onClick),this.addClickE(this.btnGetAward,this.onClick),this.update()},e.prototype.update=function(){var t,e=(Actor.ins().job,RechargeActSys.ins().firstRechargeEveryDay.states[this.index-1]);0==e?(this.btnGetAward.visible=!0,this.btnRecharge.visible=!1,this.btnHasGet.visible=!1):1==e?(this.btnGetAward.visible=!1,this.btnRecharge.visible=!1,this.btnHasGet.visible=!0):-1==e&&(this.btnGetAward.visible=!1,this.btnRecharge.visible=!0,this.btnHasGet.visible=!1);var i=RechargeActSys.ins().firstRechargeEveryDay,n=i.configs[this.index];t=GFunc.getItemDataRewardByJob(n.awardList),this.listAwardCollection.replaceAll(t),this.labelRechargeOne.textFlow=addColorTF(Lang.recharge_str2.replace("$yuan$",""+StrUtil.addColor(n.pay/10+Lang.common_yuan,16751375)));for(var a=0;a<this.imgIcons.length;a++);},e.prototype.onClick=function(t){switch(t.currentTarget){case this.btnRecharge:openWin(RechargeWin);break;case this.btnGetAward:BagSys.ins().checkBagFreeCount(5)&&RechargeActSys.ins().sendRechargeEveryday(this.index)}},e.getTitle=function(){return"btz_zycs_mrsc"},e}(BasePanel);__reflect(FirstRechargeEveryDayPanel1.prototype,"FirstRechargeEveryDayPanel1"),window.FirstRechargeEveryDayPanel1=FirstRechargeEveryDayPanel1;var FirstRechargePanel=function(t){function e(){var e=t.call(this)||this;return e.btnRecharges=[],e.lbRecharges=[],e.initUI(),e}return __extends(e,t),e.prototype.initUI=function(){this.skinName="FirstRechargePanelEUI",this.menuList.itemRenderer=FirstRechargeBtnRender,this.list.itemRenderer=ItemBaseRewardActivity,this.list.dataProvider=this.listAwardCollection=new eui.ArrayCollection,this.btnRecharges=[this.btnRecharge1,this.btnRecharge2,this.btnRecharge3,this.btnRecharge4],this.lbRecharges=[this.lbRecharge1,this.lbRecharge2,this.lbRecharge3,this.lbRecharge4],this.mc3=new MC,this.mc3.x=560,this.mc3.y=320,this.mc3.touchEnabled=!1,this.addChild(this.mc3),this.mc2=new MC,this.mc2.x=295,this.mc2.y=295,this.mc2.touchEnabled=!1,this.addChild(this.mc2),this.mc1=new MC,this.mc1.x=150,this.mc1.y=295,this.mc1.touchEnabled=!1,this.addChild(this.mc1)},e.prototype.open=function(){t.prototype.open.call(this),this.addItemTapE(this.menuList,this.onMenuClick),this.addClickE(this.btnOk,this.onClick),this.addClickE(this.btnRecharge1,this.onClick),this.addClickE(this.btnRecharge2,this.onClick),this.addClickE(this.btnRecharge3,this.onClick),this.addClickE(this.btnRecharge4,this.onClick),this.addLsn(RechargeActSys.ins().patchFirstRecharge,this.update),this.addLsn(RpSys.ins().patchRp,this.updateRedPoint),this.menuList.dataProvider=new eui.ArrayCollection(Cfg.getConfigs(FirstRechargeConfig)),this.update()},e.prototype.close=function(){t.prototype.close.call(this)},e.prototype.onMenuClick=function(t){this.updatePanel()},e.prototype.update=function(){this.menuList.validateNow(),this.updatePanel(),this.updateRedPoint()},e.prototype.updateRedPoint=function(t){if(void 0===t&&(t=null),!t||t.check(e))for(var i=this.menuList.numElements,n=0;i>n;n++){var a=this.menuList.getElementAt(n);a&&a.updateRedPoint()}},e.prototype.updatePanel=function(){this.config=Cfg.getConfig(FirstRechargeConfig,this.menuList.selectedIndex+1);var t=Actor.ins().job,i=t-1;this.groupPower.visible=this.config.power>0,this.imgDay.source="sc_zycs_day"+this.config.day,this.mc1.playFile(ResMgr.getEffName("sc"+this.config.mc[0][i%this.config.mc[0].length]),-1),this.mc2.playFile(ResMgr.getEffName("sc"+this.config.mc[1][i%this.config.mc[1].length]),-1),this.mc3.playFile(ResMgr.getEffName("sc"+this.config.mc[2][i%this.config.mc[2].length]),-1),this.imgName1.source=ResMgr.getFirstRechargeRes(this.config.name[0][0]),this.imgName2.source=ResMgr.getFirstRechargeRes(this.config.name[1][0]),this.imgName3.source=ResMgr.getFirstRechargeRes(this.config.name[2][0]),this.bmpPower.text=this.config.power.toString();var n=GFunc.getItemDataRewardByJob(this.config.awardList);this.listAwardCollection.replaceAll(n),this.btnOk.redPoint.visible=RpSys.ins().getData(RechargeWin1,e,FirstRechargeBtnRender,this.config.day),this.updateStatsu()},e.prototype.updateStatsu=function(){var t=RechargeActSys.ins().firstRechargeData;t.isRecharge()?t.firstRechargeState>=this.config.day?t.canGet()?this.currentState="get":this.currentState="yetget":this.currentState="day":this.currentState="nobuy"},e.prototype.onClick=function(t){switch(t.currentTarget){case this.btnOk:break;default:this.btnRecharges.indexOf(t.currentTarget)}},e.getTitle=function(){return"btz_zycs_schl"},e.getTabTitle=function(){return"bqz_zycs_fbsc"},e.isShow=function(){var t=RechargeActSys.ins().firstRechargeData.canGet();return t},e}(BasePanel);__reflect(FirstRechargePanel.prototype,"FirstRechargePanel"),window.FirstRechargePanel=FirstRechargePanel;var BBFLCustomPanel=function(t){function e(){var e=t.call(this)||this;return e.imgBg.source="bbfl_zycs_30",e.type=BBFLType.Custom,e}return __extends(e,t),e.prototype.open=function(){t.prototype.open.call(this)},e.prototype.close=function(){t.prototype.close.call(this)},e.getTabTitle=function(){return"bqz_zycs_cgfl"},e}(BBFLLoginPanel);__reflect(BBFLCustomPanel.prototype,"BBFLCustomPanel"),window.BBFLCustomPanel=BBFLCustomPanel;var YYMSWin=function(t){function e(){var e=t.call(this)||this;return e.winType=WinType.OverlayWin,e}return __extends(e,t),e.panelNames=[YYMSPanel],e}(BaseWinAutoTab);__reflect(YYMSWin.prototype,"YYMSWin"),window.YYMSWin=YYMSWin;var RechargeOtherItem=function(t){function e(){var e=t.call(this)||this;return e.skinName="RechargeOtherItemEUI",e}return __extends(e,t),e.prototype.open=function(){},e}(BaseEUI);__reflect(RechargeOtherItem.prototype,"RechargeOtherItem"),window.RechargeOtherItem=RechargeOtherItem;var RechargePanel=function(t){function e(){var e=t.call(this)||this;return e.dataArr=[],e.itemIndex=0,e.initUI(),e}return __extends(e,t),e.prototype.initUI=function(){this.skinName="RechargePanelEUI",this.setSkinPart("rechargeOtherMonthCardItem",new RechargeOtherMonthCardItem),this.setSkinPart("rechargeOtherTeQuanCardItem",new RechargeOtherTeQuanCardItem),this.list.itemRenderer=RechargeItem,this.scrollBar.viewport=this.list;var t=Cfg.getConfigs(PayItemsConfig);this.dataArr=[];for(var e=0,i=t;e<i.length;e++){var n=i[e];n.isShow&&this.dataArr.push(n)}this.list.useVirtualLayout=!1,this.list.dataProvider=this.arrData=new eui.ArrayCollection(this.dataArr)},e.prototype.open=function(e){void 0===e&&(e=0),t.prototype.open.call(this),this.addClickE(this.rechargeOtherMonthCardItem,this.onClick),this.addClickE(this.rechargeOtherTeQuanCardItem,this.onClick),this.addClickE(this.btnVip,this.onClick),this.addClickE(this.list,this.onClick),this.addLsn(RechargeActSys.ins().patchUpDataItem,this.updatePanel),this.addLsn(RechargeActSys.ins().patchUpDataItem,this.updatePanel),this.addLsn(RechargeActSys.ins().patchZZTQ,this.updatePanel),this.addLsn(VipSys.ins().patchSvipData,this.changeExpBar),this.addLsn(RechargeActSys.ins().patchJinZuanValueUpdate,this.updateJinZuanData),this.addLsn(VipSys.ins().patchSvipLvChange,this.updateJinZuanData),this.updatePanel(),this.changeExpBar(),this.updateJinZuanData(),this.list.validateNow(),this.scroller.validateNow();for(var i=this.list.numElements,n=-1,a=0;i>a;a++){var o=this.list.getElementAt(a);if(o&&o.data){var s=o.data;if(s.amount==e){n=a;break}}}if(n>=0){var r=213*Math.floor(n/2),u=this.scroller.viewport.contentHeight-this.scroller.height;r>=u&&(r=u),0>r&&(r=0),this.scroller.viewport.scrollV=r;var o=this.list.getElementAt(n);o&&o.playSelectMC()}},e.prototype.updatePanel=function(){this.rechargeOtherMonthCardItem.open(),this.rechargeOtherTeQuanCardItem.open();for(var t=this.list.numElements,e=0;t>e;e++){var i=this.list.getElementAt(e);i&&i.updasteState()}},e.prototype.updateJinZuanData=function(){var t=RechargeActSys.ins().jinZuanData,e=Cfg.getConfig(SVipConfig,Actor.ins().sVipLv);this.lbDesc.textFlow=addColorTF(addColor("购买仙玉赠送的仙券",5767068)+"会计入每日仙券获取上限,每日仙券上限"+addColor(""+e.jinzhuan,5767068)),this.lbDesc1.textFlow=addColorTF("今日已获取仙券:"+addColor(t.jinzuanValue+"/"+e.jinzhuan+"(提升SVIP等级可以提高每日仙券获取上限)",5767068))},e.prototype.onClick=function(t){switch(t.currentTarget){case this.rechargeOtherMonthCardItem:openWin(YKWin),closeWin(RechargeWin2);break;case this.rechargeOtherTeQuanCardItem:openWin(ZZTQWin),closeWin(RechargeWin2);break;case this.btnVip:openWin(SVipTequanTipsWin,Actor.ins().sVipLv);break;default:var e=t.target.parent,i=e.data;this.itemIndex=e.itemIndex,i&&VipSys.ins().showReCharge(i.amount)}},e.prototype.changeExpBar=function(){var t=Cfg.getConfig(SVipConfig,Actor.ins().sVipLv),e=0,i=VipSys.ins().sVipExp;t&&(e=Actor.ins().sVipLv,this.curVip.text=e.toString());var n=e+1;n=n>Cfg.getSVipMaxLv()?Cfg.getSVipMaxLv():n;var a=Cfg.getConfig(SVipConfig,n),o=0,s="";e<Cfg.getSVipMaxLv()?(o=a.needYb-i,s=Lang.vip_str1.replace("$yb$",""+StrUtil.addColor(""+o+Lang.common_zs,16755236)).replace("$vip$",""+(Actor.ins().sVipLv+1)),this.expBar.maximum=a.needYb,this.expBar.value=i):(s=Lang.vip_str2,this.expBar.labelDisplay.visible=!1,this.expBar.maximum=1,this.expBar.value=1),this.titleLabel.textFlow=StrUtil.toTF(s)},e.getSysId=function(){return 258},e.getTitle=function(){return"btz_zycs_zscz"},e.getTabTitle=function(){return"bqz_zycs_cz"},e.isShow=function(){return!0},e}(BasePanel);__reflect(RechargePanel.prototype,"RechargePanel"),window.RechargePanel=RechargePanel;var RechargeWin=function(t){function e(){return t.call(this)||this}return __extends(e,t),e.prototype.open=function(e){void 0===e&&(e=-1);for(var i=[],n=1;n<arguments.length;n++)i[n-1]=arguments[n];
t.prototype.open.call(this,-1)},e.openCheck=function(){return openWin(RechargeActSys.ins().firstRechargeData.isRecharge()?RechargeWin2:FirstRechargeBuyWin),!1},e.panelNames=[],e}(BaseWinAutoTab);__reflect(RechargeWin.prototype,"RechargeWin"),window.RechargeWin=RechargeWin;var RedBaoRobPanel=function(t){function e(){var e=t.call(this)||this;return e.skinName="RedBaoRobEUI",e.scroller.scrollPolicyH=eui.ScrollPolicy.OFF,e.list.itemRenderer=RedBaoRobItem,e.list.dataProvider=e.listDatas=new eui.ArrayCollection,e}return __extends(e,t),e.prototype.open=function(){t.prototype.open.call(this),this.addLsn(RechargeActSys.ins().patchRedbaoRobInfo,this.updatePanel),this.addLsn(RechargeActSys.ins().patchRedbaoInfo2,this.updatePanel),this.addLsn(RechargeActSys.ins().patchRedbaoRobResult,this.updateResultPanel),this.addItemTapE(this.list,this.onClickList),this.updatePanel()},e.prototype.updatePanel=function(){var t=RechargeActSys.ins().redbaoRobDatas.concat();this.listDatas.source=t},e.prototype.updateResultPanel=function(){var t=RechargeActSys.ins().redbaoRobDatas.concat();SortUtil.sortOn(t,["receiveState","time"],[SortType.up,SortType.down]),this.listDatas.source=t},e.prototype.onClickList=function(t){var e=t.itemRenderer,i=e.data;i&&i.receiveState==RedbaoReceiveState.weiLing?RechargeActSys.ins().sendRedbaoRob(i.redbaoId):openWin(RedBaoResultWin,i)},e.getTitle=function(){return"btz_zycs_hb"},e.getTabTitle=function(){return"bqz_zycs_qhb"},e.getSysId=function(){return 999},e}(BasePanel);__reflect(RedBaoRobPanel.prototype,"RedBaoRobPanel"),window.RedBaoRobPanel=RedBaoRobPanel;var RedBaoSendPanel=function(t){function e(){var e=t.call(this)||this;return e.skinName="RedBaoSendEUI",e}return __extends(e,t),e.prototype.open=function(){t.prototype.open.call(this),this.addClickE(this.sendBtn,this.onClick),this.addLsn(RechargeActSys.ins().patchRedbaoInfo,this.updatePanel),this.updatePanel()},e.prototype.updatePanel=function(){this.bitBaoCountTxt.text=""+RechargeActSys.ins().redbaoNum;var t=RechargeActSys.ins().getNextRedbaoByYuanbao();-1!=t?(this.titleVip.text=(RechargeActSys.ins().getNextRedbaoByYuanbao()/10).toFixed(0),this.titleVip.visible=!0,this.rechargeImg.source="czhb_zycs_zc"):(this.titleVip.visible=!1,this.rechargeImg.source="czhb_zycs_ndlj")},e.prototype.onClick=function(t){RechargeActSys.ins().redbaoNum>0?openWin(RedBaoBuySendWin,RechargeActSys.ins().redbaoNum):showtipsFail(Lang.recharge_str12)},e.getTitle=function(){return"btz_zycs_hb"},e.getTabTitle=function(){return"bqz_zycs_fhb"},e.getSysId=function(){return 999},e}(BasePanel);__reflect(RedBaoSendPanel.prototype,"RedBaoSendPanel"),window.RedBaoSendPanel=RedBaoSendPanel;var BBFLLevelPanel=function(t){function e(){var e=t.call(this)||this;return e.imgBg.source="bbfl_zycs_100",e.type=BBFLType.Level,e}return __extends(e,t),e.prototype.open=function(){t.prototype.open.call(this)},e.prototype.close=function(){t.prototype.close.call(this)},e.getTabTitle=function(){return"bqz_zycs_czfl"},e}(BBFLLoginPanel);__reflect(BBFLLevelPanel.prototype,"BBFLLevelPanel"),window.BBFLLevelPanel=BBFLLevelPanel;var SVIPMSWin=function(t){function e(){var e=t.call(this)||this;return e.winType=WinType.OverlayWin,e}return __extends(e,t),e.panelNames=[SVIPMSPanel],e}(BaseWinAutoTab);__reflect(SVIPMSWin.prototype,"SVIPMSWin"),window.SVIPMSWin=SVIPMSWin;var XunZhangWin=function(t){function e(){var e=t.call(this)||this;return e.init(),e}return __extends(e,t),e.prototype.init=function(){this.skinName="XunZhangWinEUI",this.addBg(),this.layer=LayerMgr.Popup,this.setSkinPart("itemIcon",new ItemBaseReward),this.listArray=new eui.ArrayCollection,this.list.itemRenderer=XunZhangWinItem,this.list.dataProvider=this.listArray,this.lbTuJin.textFlow=addColorTF(StrUtil.addUnderLine("获取途径"))},e.prototype.open=function(){t.prototype.open.call(this),this.addLsn(RpSys.ins().patchRp,this.updateRp),this.addLsn(RechargePowerSys.ins().patchXunZhangReceive,this.updatePanel),this.addLsn(RechargePowerSys.ins().patchXunZhangBuy,this.updatePanel),this.addClickE(this.btnOneKey,this.onClick),this.addClickE(this.lbTuJin,this.onClick);var e=Cfg.getConfig(RechagePowerConstConfig),i=Cfg.getItemCfg(e.zlxzItem.id);this.itemIcon.data=e.zlxzItem,this.lbName.text=i.getName(),this.lbName.textColor=GConst.PZColor[i.quality],this.updatePanel(),this.updateRp()},e.prototype.updateRp=function(t){void 0===t&&(t=null),(null==t||t.check(e))&&(this.btnOneKey.redPoint.visible=RpSys.ins().getData(RoleWin,RolePanel,e))},e.prototype.updatePanel=function(){var t=RechargePowerSys.ins().xunZhangData,e=t.xunZhangItemData.concat();this.listArray.replaceAll(e),this.list.validateNow(),this.lbdescAct.textFlow=addColorTF(""+(t.isAct()?"已激活":"未激活")),this.lbPower.text=""+t.getPower(),this.lbTuJin.visible=!RechargePowerSys.ins().xunZhangData.isAct(),this.currentState=t.isReceivaAll()?"max":"normal",this.AotuSelect()},e.prototype.AotuSelect=function(){var t=RechargePowerSys.ins().xunZhangData,e=t.getReceiveIndex();if(e>3){var i=this.list.getChildAt(e-3);i.y>this.scrollBar.viewport.contentHeight-444?this.scrollBar.viewport.scrollV=this.scrollBar.viewport.contentHeight-444:this.scrollBar.viewport.scrollV=i.y}},e.prototype.onClick=function(t){switch(t.currentTarget){case this.btnOneKey:var e=RechargePowerSys.ins().xunZhangData;RechargePowerSys.ins().xunZhangData.isAct()?e.canReceiva()?RechargePowerSys.ins().sendXunZhangReceive():showtipsFail("未达到转生条件"):RechargeActSys.ins().firstRechargeData.isRecharge()?(openWin(XunZhangBuyWin),0==RechargePowerSys.ins().xunZhangData.buyState&&VipSys.ins().showReCharge(Cfg.getConfig(RechagePowerConstConfig).zlxzbuycount)):openWin(FirstRechargeBuyWin);break;case this.lbTuJin:openWin(RechargeActSys.ins().firstRechargeData.isRecharge()?XunZhangBuyWin:FirstRechargeBuyWin)}},e.openCheck=function(){return GFunc.checkSysOpen(231)},e}(BaseWinSingle);__reflect(XunZhangWin.prototype,"XunZhangWin"),window.XunZhangWin=XunZhangWin;var ZhaoCaiLongWin=function(t){function e(){var e=t.call(this)||this;return e.init(),e}return __extends(e,t),e.prototype.init=function(){this.skinName="ZhaoCaiLongWinEUI",this.addBg(),this.layer=LayerMgr.Popup,this.setSkinPart("itemIcon",new ItemBaseReward),this.listArray=new eui.ArrayCollection,this.list.itemRenderer=ZhaoCaiLongWinItem,this.list.dataProvider=this.listArray,this.lbTuJin.textFlow=addColorTF(StrUtil.addUnderLine("获取途径"))},e.prototype.open=function(){t.prototype.open.call(this),this.addLsn(RpSys.ins().patchRp,this.updateRp),this.addLsn(RechargePowerSys.ins().patchhaoCaiLongReceive,this.updatePanel),this.addLsn(RechargePowerSys.ins().patchhaoCaiLongBuy,this.updatePanel),this.addClickE(this.btnOneKey,this.onClick),this.addClickE(this.lbTuJin,this.onClick);var e=Cfg.getConfig(RechagePowerConstConfig),i=Cfg.getItemCfg(e.zclItem.id);this.itemIcon.data=e.zclItem,this.lbName.text=i.getName(),this.lbName.textColor=GConst.PZColor[i.quality],this.lbDesc.textFlow=addColorTF("购买招财猫可获得"+e.zclpower+"战斗力"),this.updatePanel(),this.updateRp()},e.prototype.updateRp=function(t){void 0===t&&(t=null),(null==t||t.check(e))&&(this.btnOneKey.redPoint.visible=RpSys.ins().getData(RoleWin,RolePanel,e))},e.prototype.updatePanel=function(){var t=RechargePowerSys.ins().zhaoCaiLongData,e=t.zhaoCaiLongItemDatas.concat();t.getReceiveIndex();this.listArray.replaceAll(e),this.list.validateNow(),this.lbdescAct.textFlow=addColorTF(""+(t.isAct()?"已激活":"未激活")),this.lbyb.text=""+t.getYb(),this.lbTuJin.visible=!RechargePowerSys.ins().zhaoCaiLongData.isAct(),this.currentState=t.isReceivaAll()?"max":"normal",this.AotuSelect()},e.prototype.AotuSelect=function(){var t=RechargePowerSys.ins().zhaoCaiLongData,e=t.getReceiveIndex();if(e>3){var i=this.list.getChildAt(e-3);i.y>this.scrollBar.viewport.contentHeight-444?this.scrollBar.viewport.scrollV=this.scrollBar.viewport.contentHeight-444:this.scrollBar.viewport.scrollV=i.y}},e.prototype.onClick=function(t){switch(t.currentTarget){case this.btnOneKey:var e=RechargePowerSys.ins().zhaoCaiLongData;RechargePowerSys.ins().zhaoCaiLongData.isAct()?e.canReceiva()?RechargePowerSys.ins().sendhaoCaiLongReceive():showtipsFail("未达到转生条件"):RechargeActSys.ins().firstRechargeData.isRecharge()?(openWin(ZhaoCaiLongBuyWin),0==RechargePowerSys.ins().zhaoCaiLongData.buyState&&VipSys.ins().showReCharge(Cfg.getConfig(RechagePowerConstConfig).zclbuycount)):openWin(FirstRechargeBuyWin);break;case this.lbTuJin:openWin(RechargeActSys.ins().firstRechargeData.isRecharge()?ZhaoCaiLongBuyWin:FirstRechargeBuyWin)}},e.openCheck=function(){return GFunc.checkSysOpen(205)},e}(BaseWinSingle);__reflect(ZhaoCaiLongWin.prototype,"ZhaoCaiLongWin"),window.ZhaoCaiLongWin=ZhaoCaiLongWin;var ItemBaseRewardName=function(t){function e(){var e=t.call(this)||this;return e.setSkinName(),e.addClickE(e,e.onClick),e}return __extends(e,t),e.prototype.setSkinName=function(){this.skinName="ItemSkin",this.currentState="name"},e.prototype.dataChanged=function(){t.prototype.dataChanged.call(this);var e=this.data;if(e){var i=Cfg.getItemCfg(e.id);return this.lbName.text=i.getName(),void this.setColor(GConst.PZColor[i.quality])}},e}(ItemBaseReward);__reflect(ItemBaseRewardName.prototype,"ItemBaseRewardName"),window.ItemBaseRewardName=ItemBaseRewardName;var DaZaoFootEquipPanel1=function(t){function e(){return t.call(this)||this}return __extends(e,t),e.prototype.open=function(e){t.prototype.open.call(this,e),this.addLsn(FootSys.ins().patchFootMiYuDaZao,this.updateDaZaoSucceed),this.addLsn(FootSys.ins().patchEquiChange,this.updateCount)},e.prototype.updateConsumeName=function(){this.lbConsumeName.textFlow=addColorTF("可放入"+addColor(this.data.star-1+"星",16711680)+"铭文")},e.prototype.updateCount=function(){var t=FootSys.ins().getEquipByStar(this.data.star-1).concat().length;this.lbHaveCount.textFlow=addColorTF("拥有:"+addColor(t,16115290))},e.prototype.getEquipList=function(){for(var t=FootSys.ins().getEquipByStar(this.data.star-1).concat(),e=this.getCurSelectEquiphandle(),i=t.length-1;i>=0;i--){var n=t[i];e.indexOf(n.handle)>-1&&t.splice(i,1)}return t},e.prototype.sendDaZao=function(){for(var t=[],e=0,i=this.itemConsumes;e<i.length;e++){var n=i[e];n.data&&t.push(n.data.id)}if(t.length==this.itemConsumes.length){var a=this.itemTarget.data;FootSys.ins().sendFootMiYuDaZao(a.id,t)}else showtipsFail("当前放入的材料不足"+this.itemConsumes.length+"件"),this.showCostTips()},e.prototype.showCostTips=function(){openWin(MeNeedLevelWin,3)},e}(DaZaoEquipPanel);__reflect(DaZaoFootEquipPanel1.prototype,"DaZaoFootEquipPanel1"),window.DaZaoFootEquipPanel1=DaZaoFootEquipPanel1;var PageArrowCom=function(t){function e(e,i,n,a){void 0===a&&(a=ArrowDir.dirH);var o=t.call(this)||this;return o.dir=ArrowDir.dirH,o.itemWd=0,o.itemHig=0,o.isScrol=!1,o.autoShowBtn=!0,o.time=0,o.scroller=e,o.list=e.viewport,o.itemWd=i,o.itemHig=n,o.dir=a,o}return __extends(e,t),e.prototype.setBtn=function(t,e){this.leftBtn=t,this.rightBtn=e},e.prototype.setAutoShowBtn=function(t){this.autoShowBtn!=t&&(this.autoShowBtn=t,t?this.updateBtnShow():(this.leftBtn.visible=!0,this.rightBtn.visible=!0))},e.prototype.showLeftOrUpBtnRedPoint=function(t){this.leftBtn.redPoint.visible=t},e.prototype.showRightOrDownBtnRedPoint=function(t){this.rightBtn.redPoint.visible=t},e.prototype.open=function(){t.prototype.open.call(this),this.addClickE(this.rightBtn,this.onclick),this.addClickE(this.leftBtn,this.onclick),this.scroller.addEventListener(eui.UIEvent.CHANGE_START,this.changeStart,this),this.scroller.addEventListener(eui.UIEvent.CHANGE_END,this.changeEnd,this),this.list.dataProvider.addEventListener(eui.CollectionEvent.COLLECTION_CHANGE,this.updateRedPoint,this),this.updateRedPoint(),this.updateBtnShow()},e.prototype.close=function(){t.prototype.close.call(this),this.scroller.removeEventListener(eui.UIEvent.CHANGE_START,this.changeStart,this),this.scroller.removeEventListener(eui.UIEvent.CHANGE_END,this.changeEnd,this),this.list.dataProvider.removeEventListener(eui.CollectionEvent.COLLECTION_CHANGE,this.updateRedPoint,this)},e.prototype.onclick=function(t){switch(t.currentTarget){case this.leftBtn:this.updateScrollPolicy(-1);break;case this.rightBtn:this.updateScrollPolicy(1)}},e.prototype.changeStart=function(){this.isScrol=!0},e.prototype.changeEnd=function(){this.isScrol=!1,this.updateRedPoint(),this.updateBtnShow()},e.prototype.updateRedPoint=function(){if(!(Timer.ins().getTimer()<this.time)){this.time=Timer.ins().getTimer()+500,this.list.validateNow();var t=this.list.numChildren,e=this.list.layout.gap,i=!1;if(this.showLeftOrUpBtnRedPoint(i),this.showRightOrDownBtnRedPoint(i),this.dir==ArrowDir.dirH){for(var n=Math.ceil(this.list.scrollH/(this.itemWd+e))-1,a=0;n>a;a++){var o=this.list.getElementAt(a);if(o&&(i=o.redPoint.visible)){this.showLeftOrUpBtnRedPoint(i);break}}var s=Math.floor((this.list.scrollH+this.scroller.width+e)/(this.itemWd+e));s=s==t?t-1:s;for(var r=s;t>r;r++){var o=this.list.getElementAt(r);if(o&&(i=o.redPoint.visible)){this.showRightOrDownBtnRedPoint(i);break}}}else{for(var n=Math.ceil(this.list.scrollV/(this.itemHig+e))-1,u=0;n>u;u++){var o=this.list.getElementAt(u);if(o&&(i=o.redPoint.visible)){this.showLeftOrUpBtnRedPoint(i);break}}var s=Math.floor((this.list.scrollV+this.scroller.height+e)/(this.itemHig+e));s=s==t?t-1:s;for(var h=s;t>h;h++){var o=this.list.getElementAt(h);if(o&&(i=o.redPoint.visible)){this.showRightOrDownBtnRedPoint(i);break}}}}},e.prototype.updateScrollPolicy=function(t){if(!this.isScrol){var e=this.dir==ArrowDir.dirH?this.scroller.viewport.scrollH+this.scroller.width*t:this.scroller.viewport.scrollV+this.scroller.height*t;if(0>e&&(e=0),this.dir==ArrowDir.dirH){var i=this.scroller.viewport.contentWidth-this.scroller.width;e>i&&(e=i),this.scroller.viewport.scrollH=e}else{var n=this.scroller.viewport.contentHeight-this.scroller.height;e>n&&(e=n),this.scroller.viewport.scrollV=e}this.updateRedPoint(),this.updateBtnShow()}},e.prototype.updateBtnShow=function(){if(this.autoShowBtn)if(this.dir==ArrowDir.dirH){var t=this.scroller.viewport.contentWidth-this.scroller.width;this.scroller.viewport.scrollH<=0?this.leftBtn.visible=!1:this.leftBtn.visible=!0,this.scroller.viewport.scrollH>=t?this.rightBtn.visible=!1:this.rightBtn.visible=!0}else{var e=this.scroller.viewport.contentHeight-this.scroller.height;this.scroller.viewport.scrollV<=0?this.leftBtn.visible=!1:this.leftBtn.visible=!0,this.scroller.viewport.scrollV>=e?this.rightBtn.visible=!1:this.rightBtn.visible=!0}},e.prototype.setListIndex=function(t){this.validateNow(),this.list.validateNow(),this.scroller.validateNow();var e=this.list.layout.gap;if(this.dir==ArrowDir.dirH){var i=t*this.itemWd+e,n=this.scroller.viewport.contentWidth-this.scroller.width;i>=n&&(i=n),0>i&&(i=0),this.scroller.viewport.scrollH=i}else{var i=t*this.itemHig+e,a=this.scroller.viewport.contentHeight-this.scroller.height;i>=a&&(i=a),0>i&&(i=0),this.scroller.viewport.scrollV=i}this.time=0,this.updateBtnShow(),this.updateRedPoint()},e.prototype.setListPage=function(t){this.validateNow(),this.list.validateNow(),this.scroller.validateNow();var e=this.list.layout.gap;if(this.dir==ArrowDir.dirH){var i=Math.floor(this.scroller.width/(this.itemWd+e));t=Math.floor(t/i)*i;var n=t*this.itemWd+e,a=this.scroller.viewport.contentWidth-this.scroller.width;n>=a&&(n=a),0>n&&(n=0),this.scroller.viewport.scrollH=n}else{var i=Math.floor(this.scroller.height/(this.itemHig+e));t=Math.floor(t/i)*i;var n=t*this.itemHig+e,o=this.scroller.viewport.contentHeight-this.scroller.height;n>=o&&(n=o),0>n&&(n=0),this.scroller.viewport.scrollV=n}this.time=0,this.updateBtnShow(),this.updateRedPoint()},e.prototype.reset=function(){this.scroller=null,this.list=null,this.rightBtn.icon="",this.leftBtn.icon="",this.dir=ArrowDir.dirH,this.itemWd=0,this.itemHig=0,this.isScrol=!1,this.autoShowBtn=!0},e}(BaseEUI);__reflect(PageArrowCom.prototype,"PageArrowCom");var ArrowDir;!function(t){t[t.dirH=0]="dirH",t[t.dirV=1]="dirV"}(ArrowDir||(ArrowDir={}));var DaZaoTabEqupPosData=function(){function t(){this.pos=0,this.equipId=0,this.tabName=""}return t.prototype.isTuiJian=function(){var t=GFunc.creatItemDataById(this.equipId).power>BagSys.ins().getEquipByIndex(this.pos).power;return t},t}();__reflect(DaZaoTabEqupPosData.prototype,"DaZaoTabEqupPosData");var DaZaoTabFootEqupData1=function(t){function e(){var e=t.call(this)||this;return e.daZaoTabEqupPosData=[],e}return __extends(e,t),Object.defineProperty(e.prototype,"star",{get:function(){return this.config.star},enumerable:!0,configurable:!0}),e.prototype.iniData=function(){for(var t=0;5>t;t++)this.daZaoTabEqupPosData[t]=new DaZaoTabFootEqupPosData,this.daZaoTabEqupPosData[t].pos=t,this.daZaoTabEqupPosData[t].tabName=GFunc.getZuJiNameByType(t),this.daZaoTabEqupPosData[t].equipId=this.config.equipid[0][t]},e.prototype.getPanelName=function(){return"DaZaoFootEquipPanel"+this.config.viewType},Object.defineProperty(e.prototype,"tabName",{get:function(){return this.star+"星"+this.config.name[0]},enumerable:!0,configurable:!0}),e.prototype.getEquipDaZaoDesc=function(){return"必定获得"+addColor(this.star+"星",16711680)+"铭文一件(指定部位)"},e.prototype.getConsumeDesc=function(){return Cfg.getConfig(DazaoCommonConfig).footConsumeDesc},e.prototype.isTuiJian=function(){for(var t=!1,e=0;e<this.daZaoTabEqupPosData.length;e++)if(this.daZaoTabEqupPosData[e].isTuiJian()&&Actor.ins().zsId>=this.zslevel){t=!0;break}return t},e.prototype.getTuiJianSubTabIndex=function(){for(var t=0,e=0;e<this.daZaoTabEqupPosData.length;e++)if(this.daZaoTabEqupPosData[e].isTuiJian()){t=e;break}return t},Object.defineProperty(e.prototype,"zslevel",{get:function(){return this.config.needzslevel},enumerable:!0,configurable:!0}),e.prototype.getRedPoint=function(){var t=FootSys.ins().getEquipByStar(this.star-1).concat(),e=t.length>=5&&Actor.ins().zsId>=this.zslevel;return e},e}(DaZaoTabSubDataBase);__reflect(DaZaoTabFootEqupData1.prototype,"DaZaoTabFootEqupData1"),window.DaZaoTabFootEqupData1=DaZaoTabFootEqupData1;var CampWarInviteData=function(){function t(){this.roleId=0,this.svipLv=0,this.job=JobConst.ZhanShi,this.power=0,this.roleName="",this.isRobot=!1,this.isInvite=!1}return t.prototype.parser=function(t){this.roleId=t.readInt(),this.job=t.readByte(),this.power=t.readDouble(),this.roleName=t.readString(),this.isRobot=1==t.readByte()?!0:!1,this.isInvite=!1},t}();__reflect(CampWarInviteData.prototype,"CampWarInviteData");var DaZaoTabGodRingStarData=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return __extends(e,t),Object.defineProperty(e.prototype,"config",{get:function(){var t,e=BagSys.ins().getEquipByIndex(this.pos);return t=e.hasEquipOn()?Cfg.getConfig(DazaoRingStarConfig,e.id):Cfg.getConfig(DazaoRingStarConfig,this.getMinRingId())},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"tabName",{get:function(){return"仙戒升星"},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"consumeDesc",{get:function(){return"升星消耗"},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"maxLevelDesc",{get:function(){return"当前装备已达最高星,无法再提升"},enumerable:!0,configurable:!0}),e.prototype.getNoEquipRankTips=function(){return"穿戴戒指后才能升星"},e.prototype.sendUp=function(){EquipSys.ins().sendDaZaoRingUpStar(this.pos)},e.prototype.isMax=function(){return this.star>=Cfg.getConfig(DazaoCommonConfig).ringMaxStar},e.prototype.getMinRingId=function(){return Cfg.getConfig(DazaoCommonConfig).minStarGodRing[this.job]},e.prototype.getEquipDaZaoDesc=function(){if(this.isMax())return"当前装备已达最高星,无法在提升";var t=BagSys.ins().getEquipByIndex(this.pos),e=Cfg.getItemCfg(t.hasEquipOn()?t.id:this.getMinRingId());return"必定获得"+addColor(e.rank+"阶"+(e.star+1)+"星"+GFunc.getEquipNameByType(e.subType),16711680)+"一件"},e}(DaZaoTabGodRingStageData);__reflect(DaZaoTabGodRingStarData.prototype,"DaZaoTabGodRingStarData");var CampWarFbFaceL=function(t){function e(){var e=t.call(this)||this;return e.tickEmoji=0,e.setSkinName(),e.groupEmoji.visible=!1,e}return __extends(e,t),e.prototype.setSkinName=function(){this.skinName="CampWarFbFaceLEUI"},e.prototype.dataChanged=function(){this.data instanceof CampWarFbFaceData&&(this.imgPos.source="smsz_zycs_lb"+this.data.pos,this.imgIcon.source=ResMgr.getHeadIcon(this.data.job),this.lbName.textFlow=addColorTF(""+this.data.roleName,this.data.roleId==Actor.ins().actorID?1306146:14931902),this.lbPower.text=Lang.common_str113+"："+GFunc.overLength(this.data.power),this.tick())},e.prototype.setEmoji=function(t){this.lbEmoji.textFlow=addColorTF(t),this.tickEmoji=Timer.ins().getTimer()+3e3,this.groupEmoji.visible=!0},e.prototype.tick=function(){if(this.groupEmoji.visible=this.tickEmoji>Timer.ins().getTimer(),this.data instanceof CampWarFbFaceData){this.imgYlx.visible=this.data.isLiXian();var t=CampWarSys.ins().getFbPkStateByPos(this.data.camp,this.data.pos);switch(this.imgZdz.source="",this.imgWin.source="",t){case 0:break;case 1:this.imgZdz.source="smsz_zycs_zdz";break;case 2:this.imgWin.source="smsz_zycs_sl";break;case 3:this.imgWin.source="smsz_zycs_xb"}}},e}(BaseItemRender);__reflect(CampWarFbFaceL.prototype,"CampWarFbFaceL"),window.CampWarFbFaceL=CampWarFbFaceL;var OtherRoleInfoPanel=function(t){function e(){return t.call(this)||this}return __extends(e,t),e.prototype.init=function(){t.prototype.init.call(this),this.currentState="otherPlay"},e.prototype.open=function(t){this.seePlayModel=t,this.setEquip(new EntityAttrData);var e=this.seePlayModel.xianluRingId;this.btnXLRing.iconDisplay.source=this.seePlayModel.xianluRingId>0?"role_zycs_jyjz"+e:"role_zycs_jyjz",this.addClickE(this.btnXLRing,this.onClickRing)},e.prototype.onClickRing=function(){this.seePlayModel.xianluRingId>0?openWin(XianluRingTipsWin,!0):showtipsFail("对方尚未结缘")},e.prototype.updateRoleRedPoint=function(){},e.getTitle=function(){return"btz_zycs_js"},e.getTabTitle=function(){return"bqz_zycs_zb"},e}(RolePanel);__reflect(OtherRoleInfoPanel.prototype,"OtherRoleInfoPanel"),window.OtherRoleInfoPanel=OtherRoleInfoPanel;var SeePlayModel=function(){function t(){this._power=0,this._titleId=0,this._meilinId=-1,this._damonId=0,this._damonMozhenId=0,this._yongbingId=0,this._yongbingMozhenId=0,this._shenmoId=0,this.equipDatas=[],this._vipState=0,this._xianluRingId=0,this._shenglingId=0,this._skillDatas=[];for(var t=0;t<EquipPos.MAX;t++)this.equipDatas[t]=new EquipsData,this.equipDatas[t].equipPos=t}return t.prototype.parser=function(t){this._job=t.readByte(),this._sex=t.readByte(),this._actorID=t.readInt(),this.serverID=t.readInt(),this._myName=t.readString(),this._level=t.readShort(),this._power=t.readDouble(),this._szId=t.readInt(),this._sqId=t.readInt(),this._wingId=t.readInt(),this._meilinId=t.readInt(),this._damonId=t.readInt(),this._shenglingId=t.readInt(),this._xianluRingId=t.readInt();for(var e=t.readByte(),i=0;e>i;i++)this.equipDatas[i].parserEquip(t);this._xianLuName=t.readString(),this._xianLuSex=t.readByte();for(var n=t.readByte(),i=0;n>i;i++){var a=new SkillPassivityData(t.readInt());a.level=t.readShort(),a.level>0?a.isOpen=1:a.isOpen=0,this._skillDatas[a.id]=a}},t.prototype.getSkills=function(){var t=[],e=Cfg.getConfigs(MateRingConfig);for(var i in e)t.push(e[i].skill);var n=this.getSkillPassivityDatasByIds(t);return n},t.prototype.getSkillPassivityDatasByIds=function(t){for(var e=[],i=0,n=t;i<n.length;i++){var a=n[i];e.push(this.getSkillPassivityDataById(a))}return e},t.prototype.getSkillPassivityDataById=function(t){return this.skillDatas[t]||(this.skillDatas[t]=new SkillPassivityData(t))},Object.defineProperty(t.prototype,"actorID",{get:function(){return this._actorID},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"sex",{get:function(){return this._sex},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"level",{get:function(){return this._level},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"vip",{get:function(){return this._vip},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"power",{get:function(){return this._power},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"myName",{get:function(){return this._myName},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"job",{get:function(){return this._job},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"vipState",{get:function(){return this._vipState},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"titleId",{get:function(){return this._titleId},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"szId",{get:function(){return this._szId},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"sqId",{get:function(){return this._sqId},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"wingId",{get:function(){return this._wingId},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"meilinId",{get:function(){return this._meilinId},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"damonId",{get:function(){return this._damonId},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"damonMozhenId",{get:function(){return this._damonMozhenId},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"yongbingId",{get:function(){return this._yongbingId},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"yongbingMozhenId",{get:function(){return this._yongbingMozhenId},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"shenmoId",{get:function(){return this._shenmoId},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"xianluRingId",{get:function(){return this._xianluRingId},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"xianLuName",{get:function(){return this._xianLuName},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"xianLuSex",{get:function(){return this._xianLuSex},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"skillDatas",{get:function(){return this._skillDatas},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"shenglingId",{get:function(){return this._shenglingId},enumerable:!0,configurable:!0}),t.prototype.getRoleModel=function(){return Actor.ins().attrData},t.prototype.getEquipByIndex=function(t){return this.equipDatas[t]},t.prototype.getEquipLen=function(){return this.equipDatas.length},t.prototype.getRemindByIndex=function(t){return 1==(this._vipState>>t&1)},t.prototype.getTitleFileName=function(){if(this.titleId>0){var t=Cfg.getConfig(TitleConfig,this.titleId);return getEffName("ch_zycs_"+t.img)}return""},t.prototype.getBodyFileName=function(){var t=Cfg.getConfig(SzHuanhuaBaseConfig,this.szId).uirole;return t[this.sex]},t.prototype.getWeaponFileName=function(){var t=Cfg.getConfig(ShenqiHuanhuaBaseConfig,this.sqId).uirole;return t},t.prototype.getWingFileName=function(){if(this.wingId>0){var t=Cfg.getConfig(WingHuanhuaBaseConfig,this.wingId).uirole;return t}return""},t.prototype.getMeilinFileName=function(){if(this.meilinId>-1){var t=Cfg.getConfig(MeilinHuanhuaBaseConfig,this.meilinId);return Cfg.getConfig(MeilinAppearanceConfig,t.appearanceId).appearance}return""},t.prototype.getDamonFileName=function(){if(this.damonId>0){var t=Cfg.getConfig(DamonHuanhuaBaseConfig,this.damonId);return t.facade}return""},t.prototype.getDamonHeight=function(){if(this.damonId>0){var t=Cfg.getConfig(DamonHuanhuaBaseConfig,this.damonId);return-t.high}return 0},t.prototype.getDamonMozhenFileName=function(){if(this.damonMozhenId>0){var t=Cfg.getConfig(DamonMozhenBaseConfig,this.damonMozhenId);return Cfg.getConfig(GuanghuanAppearanceConfig,t.appearanceId).appearance}return""},t.prototype.getYongbingFileName=function(){return""},t.prototype.getYongbingMozhenFileName=function(){return""},t.prototype.getShenmoBodyFileName=function(){return""},t.prototype.getShenmoWingFileName=function(){if(this.shenmoId>0){var t=Cfg.getConfig(ShenmoHuanhuaBaseConfig,this.shenmoId);return t.wingId?Cfg.getConfig(WingAppearanceConfig,t.wingId).appearance:""}return""},t.prototype.getShenmoFootFileName=function(){if(this.shenmoId>0){var t=Cfg.getConfig(ShenmoHuanhuaBaseConfig,this.shenmoId);return t.footId?Cfg.getConfig(FootAppearanceConfig,t.footId).appearance:""}return""},t.prototype.getShengLingFileName=function(){if(this.shenglingId>0){var t=Cfg.getConfig(ShengLingConfig,this.shenglingId);return Cfg.getConfig(ShengLingAppearanceConfig,t.bodyIds[this.job-1]).appearance}return""},t}();__reflect(SeePlayModel.prototype,"SeePlayModel");var CampWarTeamReadyItemL=function(t){function e(){var e=t.call(this)||this;return e.setSkinName(),e.imgCaptain.visible=!1,e.imgIcon.name="imgIcon",e}return __extends(e,t),e.prototype.setSkinName=function(){this.skinName="CampWarTeamReadyItemLEUI"},e.prototype.dataChanged=function(){if(this.data instanceof CampWarTeamMemberData){CampWarSys.ins().camp==CampType.shen?(this.imgPos.source="smsz_zycs_dy"+this.data.pos,this.groupName.visible=!0,this.groupWh.visible=!1,this.imgIcon.source=ResMgr.getHeadIcon(this.data.job)):(this.imgPos.source=3==this.data.matchState?"smsz_zycs_dy"+this.data.pos:"smsz_zycs_ds",this.groupName.visible=1!=this.data.matchState,this.groupWh.visible=1==this.data.matchState,1==this.data.matchState?this.randomHead():this.imgIcon.source=ResMgr.getHeadIcon(this.data.job)),this.lbName.textFlow=addColorTF(""+this.data.roleName,this.data.roleId==Actor.ins().actorID?1306146:14931902),this.bmpNum.text=""+Cfg.getConfig(CampBattleCommonConfig).winPoint[this.data.pos-1];var t=CampWarSys.ins().formatPower(this.data.power);this.bmpPower.text=""+t[0],this.bmpU.text=""+t[1]}},e.prototype.onTap=function(t,e){var i=this.data;this.hitTestPoint(t.stageX,t.stageY)&&e.camp==i.camp&&e.pos!=i.pos&&CampWarSys.ins().sendTeamPosChange(e.pos,i.pos)},e.prototype.randomHead=function(){var t=MathUtil.randomInteger(1,3);this.imgIcon.source=ResMgr.getHeadIcon(t)},e}(BaseItemRender);__reflect(CampWarTeamReadyItemL.prototype,"CampWarTeamReadyItemL"),window.CampWarTeamReadyItemL=CampWarTeamReadyItemL;var RoleItemBig=function(t){function e(){var e=t.call(this)||this;return e.skinName="RoleEquipItemRingEUI",e.init(),e}return __extends(e,t),e.prototype.getEquipDefaulBg=function(){var t=this.data;return ResMgr.getEquipDefaultIcon(t.equipPos,!0)},e.prototype.getEquipQualityBg=function(){var t=this.data;return ResMgr.getEquipQualityBg(t.cfg.quality,!0)},e.prototype.showMc=function(t){this.mc.playFile(ResMgr.getEffName("sjeff"),-1)},e}(RoleItem);__reflect(RoleItemBig.prototype,"RoleItemBig"),window.RoleItemBig=RoleItemBig;var MC=function(t){function e(){var e=t.call(this)||this;return e.startTick=0,e.rate=1,e.dy=0,e.key="",e.dir=0,e._scaleX=1,e._scaleY=1,e.jsonScaleX=1,e.jsonScaleY=1,e.hasSetVisibleFalse=!1,e}return __extends(e,t),Object.defineProperty(e.prototype,"data",{set:function(t){this.playFile(t,-1)},enumerable:!0,configurable:!0}),e.create=function(t,i,n,a){void 0===i&&(i=1),void 0===n&&(n=null),void 0===a&&(a=!0);var o=new e;return o.playFile(t,i,n,a),o},e.createCenterGruop=function(t,e,i,n){void 0===e&&(e=1),void 0===i&&(i=null),void 0===n&&(n=!0);var a=new eui.Group;return a.horizontalCenter=a.verticalCenter=0,a.addChild(this.create(t,e,i,n)),a},e.prototype.playFile=function(t,i,n,a){void 0===i&&(i=1),void 0===n&&(n=null),void 0===a&&(a=!0),~t.indexOf("/")||(t="res/mc/"+t),this.startTick=Timer.ins().getRateTime(),this.completeCallback=n,this.playCount=i,this.isAutoRemove=a,this.hasSetVisibleFalse=!1,Timer.ins().remove(this.playComp,this),e.removeCount(this),this.name==t&&this.texture&&this.texture.bitmapData?this.createBody():this.loadAndPlay(t)},e.prototype.loadAndPlay=function(t){var e=this;this.name=t,this.jsonData=null,this.texture=null;var i=this.getJSONname(this.name),n=this.getPNGname(this.name);RES.getResByUrl(i,function(i){e.name==t&&i&&(e.jsonData=i,e.createBody())},this,RES.ResourceItem.TYPE_JSON),RES.getResByUrl(n,function(i){e.name==t&&i&&(e.texture=i,e.texture.bitmapData||RES.destroyRes(e.name+".png"),e.createBody())},this,RES.ResourceItem.TYPE_IMAGE)},e.prototype.$onAddToStage=function(i,n){t.prototype.$onAddToStage.call(this,i,n),e.addCount(this),this.hasSetVisibleFalse||!this.name||this.texture&&this.texture.bitmapData||this.loadAndPlay(this.name)
},e.prototype.$onRemoveFromStage=function(){t.prototype.$onRemoveFromStage.call(this),e.removeCount(this)},e.addCount=function(t){if(t.stage&&t.texture&&t.texture.bitmapData){var i=t.texture.bitmapData.hashCode;if(!e.displayList[i])return void(e.displayList[i]=[t]);var n=e.displayList[i];n.indexOf(t)<0&&n.push(t)}},e.removeCount=function(t){if(t.texture&&t.texture.bitmapData){var i=t.texture.bitmapData.hashCode;if(e.displayList[i]){var n=e.displayList[i],a=n.indexOf(t);a>=0&&n.splice(a,1),0==n.length&&delete e.displayList[i]}}},e.prototype.createBody=function(){if(this.jsonData&&this.texture){e.addCount(this);var t=this.getPNGname(this.name);this.movieClipData=this.getMovieClipData(this.name),e.oldRate[t]||(e.oldRate[t]=this.movieClipData.frameRate),this.frameRate=e.oldRate[t]*this.rate>>0,this.setJsonScaleX((this.jsonData.scaleX||100)/100),this.setJsonScaleY((this.jsonData.scaleY||100)/100);var i,n=Timer.ins().getRateTime()-this.startTick;if(this.playCount>0){var a=this.playTime/this.playCount;n%=a,i=n>100?Math.min(Math.floor(n/a*this.totalFrames),1):1}else i=1;if(this.gotoAndPlay(i,this.playCount),this.visible=!this.hasSetVisibleFalse,this.hasSetVisibleFalse=!1,this.playCount>0){var o=this.playTime*this.playCount-n;o>0?Timer.ins()["do"](o,0,1,this.playComp,this):this.playComp()}this.dispatchEventWith(egret.Event.CHANGE)}},e.prototype.$setVisible=function(e){t.prototype.$setVisible.call(this,e),this.hasSetVisibleFalse=!e},e.prototype.getPNGname=function(t){return t+".png"},e.prototype.getJSONname=function(t){return t+".json"},e.prototype.getMovieClipData=function(t){var i=t.split("/"),n=i.pop();return e.factory.mcDataSet=this.jsonData,e.factory.texture=this.texture,e.factory.generateMovieClipData(n)},e.prototype.playComp=function(){this.isAutoRemove&&DisUtil.remove(this),this.completeCallback&&this.completeCallback()},Object.defineProperty(e.prototype,"playTime",{get:function(){return this.movieClipData?1/this.frameRate*this.totalFrames*1e3:0},enumerable:!0,configurable:!0}),e.prototype.clearComFun=function(){this.completeCallback=null},e.prototype.continuePlay=function(){this.totalFrames&&(this.currentFrame+1<this.totalFrames?this.gotoAndPlay(this.currentFrame+1,this.playCount):this.gotoAndPlay(1,this.playCount))},Object.defineProperty(e.prototype,"fullName",{get:function(){return this.name+".png"},enumerable:!0,configurable:!0}),e.prototype.hasRes=function(t){return RES.hasRes(t+".json")||RES.hasRes(t+".png")},e.prototype.setSortDy=function(t){void 0===t&&(t=32),this.dy=t;var e=this.parent;this.dy&&e instanceof ContainerSort&&e.sortChilds(Timer.ins().getTimer(),!0)},e.prototype.updateTick=function(t){if(this.mover&&(this.mover.updateTick(t),this.dy)){var e=this.mover.getCurXY(),i=Math.abs(e.y-this.oldXY.y),n=this.parent;i>this.dy&&n instanceof ContainerSort&&(n.sortChilds(t,!0),this.oldXY=e)}},e.prototype.setDir=function(t){this.dir=t,this.$setScaleX(this._scaleX),this.$setScaleY(this._scaleY)},e.prototype.$setScaleX=function(e){this._scaleX=e,t.prototype.$setScaleX.call(this,this.getScaleX())},e.prototype.$setScaleY=function(e){this._scaleY=e,t.prototype.$setScaleY.call(this,this.getScaleY())},e.prototype.getScaleX=function(){return this.getSign()*this._scaleX*this.jsonScaleX},e.prototype.getScaleY=function(){return this._scaleY*this.jsonScaleY},e.prototype.getSign=function(){return this.dir>=5?-1:1},e.prototype.setJsonScaleX=function(e){this.jsonScaleX=e||1,t.prototype.$setScaleX.call(this,this.getScaleX())},e.prototype.setJsonScaleY=function(e){this.jsonScaleY=e||1,t.prototype.$setScaleY.call(this,this.getScaleY())},e.prototype.moveTo=function(t,e,i){var n=MathUtil.getTimeFromSpeed(this,e,i);this.mover||(this.mover=new MoverLine(this),this.oldXY=new XY(this.x,this.y)),this.mover.moveTo(t,e,n)},e.prototype.setCompleteFunc=function(t,e){this.mover||(this.mover=new MoverLine(this),this.oldXY=new XY(this.x,this.y)),this.mover.setCompleteFunc(t,e)},e.prototype.setIndex=function(t){},e.prototype.reset=function(){this.mover&&(this.mover.setCompleteFunc(null,null),this.mover.stopMove()),this.clearComFun(),this.x=0,this.y=0,this.scaleX=1,this.scaleY=1,this.jsonScaleX=1,this.jsonScaleY=1,this.dir=0,this.alpha=1,this.rotation=0,this.filters=[],this.dy=0,this.hasSetVisibleFalse=!1,this.name="",this.stop()},e.clearCache=function(){this.factory.clearCache()},e.displayList=egret.createMap(),e.oldRate={},e.func=function(){var t=new egret.MovieClipDataFactory;return t.enableCache=!1,t},e.factory=e.func(),e}(egret.MovieClip);__reflect(MC.prototype,"MC",["IObjectPool"]),window.MC=MC;var RoleWin=function(t){function e(){var e=t.call(this)||this;return e.winType=WinType.MainWin,e}return __extends(e,t),e.prototype.initUI=function(){t.prototype.initUI.call(this),this.destroyTime=10},e.prototype.open=function(e){t.prototype.open.call(this,e)},e.prototype.getParam=function(){return[Actor.ins().getMyData()]},e.prototype.getEquipGrid=function(t){return this.validateNow(),this.getPanel(RolePanel).getEquipItem(t)},e.prototype.getEquipItemCanPutOn=function(){return this.validateNow(),this.getPanel(RolePanel).getEquipItemCanPutOn()},e.prototype.getHuFuGrid=function(){return this.validateNow(),this.getPanel(RolePanel).getHuFuItem()},e.prototype.getCloseBtn=function(){return this.closeBtn},e.prototype.getkillBtn=function(){return this.validateNow(),this.getPanel(RolePanel).getkillBtn()},e.prototype.getElementBtn=function(){return this.validateNow(),this.getPanel(RolePanel).getElementBtn()},e.prototype.getDamonItem=function(){return this.getPanel(RolePanel).getDamonItem()},e.prototype.getSHengJie=function(){return this.getPanel(RolePanel).getSHengJie()},e.prototype.getStarsoulUpBtn=function(){return null},e.prototype.getFruitBtn=function(){return this.validateNow(),this.getPanel(RolePanel).getFruitBtn()},e.prototype.getTujianBtn=function(){return this.getPanel(RolePanel).getTujianBtn()},e.prototype.getBtnOneKeyEquip=function(){return this.getPanel(RolePanel).getBtnOneKeyEquip()},e.panelNames=[RolePanel],e}(BaseWinAutoTab);__reflect(RoleWin.prototype,"RoleWin"),window.RoleWin=RoleWin;var CampWarMainPanel=function(t){function e(){var e=t.call(this)||this;return e.items=[],e.skinName="CampWarMainPanelEUI",e.items=[e.item0,e.item1,e.item2,e.item3],e.helpId=125,e.hongMC=new MC,e.groupBarMc.addChild(e.hongMC),e.lanMC=new MC,e.lanMC.anchorOffsetX=-280,e.groupRatio.addChild(e.lanMC),e.ratioMC=new MC,e.groupRatio.addChild(e.ratioMC),e}return __extends(e,t),e.prototype.open=function(){t.prototype.open.call(this),this.hongMC.playFile(ResMgr.getEffName("smsz_zycs_hfdkt"),-1),this.lanMC.playFile(ResMgr.getEffName("smsz_zycs_lfdkt"),-1),this.ratioMC.playFile(ResMgr.getEffName("smsz_zycs_dk"),-1),this.addClickE(this.btnDaTing,this.onClick),this.addClickE(this.btnRank,this.onClick),this.addClickE(this.btnReward,this.onClick),this.addClickE(this.btnShop,this.onClick),this.addLsn(CampWarSys.ins().patchInfo,this.updatePanel),this.addLsn(CampWarSys.ins().patchDailyReward,this.updatePanel),this.addLsn(CampWarSys.ins().patchScoreCamp,this.updateProgBarRatio),this.addLsn(RpSys.ins().patchRp,this.updateRp),this.updatePanel(),this.updateTime(),this.updateRp(),CampWarSys.ins().sendScoreCamp()},e.prototype.close=function(){t.prototype.close.call(this),this.hongMC.reset(),this.lanMC.reset(),this.ratioMC.reset()},e.prototype.updateRp=function(t){void 0===t&&(t=null),(!t||t.check(CampWarLinkPanel))&&(this.btnReward.redPoint.visible=RpSys.ins().getData(CampWarLinkWin,CampWarLinkPanel,CampWarRewardPanel))},e.prototype.updatePanel=function(){this.lbCamp.textFlow=addColorTF(addColor(CampWarSys.ins().getCampStr(),CampWarSys.ins().camp==CampType.mo?15733780:3183103)),this.imgCamp.source=ResMgr.getCampIcon(CampWarSys.ins().camp);var t=CampWarSys.ins().getTzCount();t>0?(this.lbPkCount.textFlow=addColorTF(Lang.zyz_str17+addColor(t+"/"+Cfg.getConfig(CampBattleCommonConfig).rewardCount,t>0?1306146:15733780)),this.lbHelpCount.text=""):(t=CampWarSys.ins().getHelpCount(),this.lbHelpCount.textFlow=addColorTF(Lang.zyz_str18+addColor(t+"/"+Cfg.getConfig(CampBattleCommonConfig).joinCount,t>0?1306146:15733780)),this.lbPkCount.text="");for(var e=CampWarSys.ins().getDailyRewardDatas(),i=0;i<this.items.length;i++)e[i]?(this.items[i].data=e[i],this.items[i].visible=!0):this.items[i].visible=!1;this.progBar.maximum=Cfg.getConfig(CampBattleCommonConfig).rewardCount,this.progBar.value=CampWarSys.ins().tzCount,this.updateProgBarRatio()},e.prototype.updateProgBarRatio=function(){this.lbScoreCampShen.textFlow=addColorTF(Lang.zyz_strs[CampType.shen]+"："+CampWarSys.ins().scoreCampShen,3183103),this.lbScoreCampMo.textFlow=addColorTF(CampWarSys.ins().scoreCampMo+"："+Lang.zyz_strs[CampType.mo],15733780);var t=CampWarSys.ins().scoreCampShen||1,e=CampWarSys.ins().scoreCampMo||1,i=Math.floor(t/(t+e)*100)/100;this.ratioMC.x=561*i,this.lanMC.scaleX=i},e.prototype.updateTime=function(){t.prototype.updateTime.call(this);var e="";if(CampWarSys.ins().sjStartTick>Actor.ins().serverTime)e=Lang.zyz_str16+addColor(Lang.act_str6,1306146);else if(CampWarSys.ins().sjEndTick<Actor.ins().serverTime)e=Lang.zyz_str16+addColor(Lang.gb_str67,1306146);else{var i=Math.max((CampWarSys.ins().sjEndTick-Actor.ins().serverTime)/1e3,0),n="dd天hh小时mm分钟";n=i<DateUtil.SECOND_PER_HOUR?"mm分钟ss秒":i<DateUtil.SECOND_PER_DAY?"hh小时mm分钟":"dd天hh小时mm分钟",e=Lang.zyz_str16+addColor(getFormatTime(i,n),1306146)}this.lbTime.textFlow=addColorTF(e)},e.prototype.onClick=function(t){switch(t.currentTarget){case this.btnDaTing:CampWarSys.ins().isBattle()?openWin(CampWarTeamListWin):showtipsFail(Lang.zyz_str47);break;case this.btnRank:openWin(CampWarRankWin);break;case this.btnReward:openWin(CampWarRewardWin);break;case this.btnShop:openWin(ShopWin,ShopWin.getTabIndexbyPanel(ShopPanel),ShopPanel.getTabIndexbyPanel(ShopCampPanel))}},e.getSysId=function(){return 349},e.getTitle=function(){return"btz_zycs_smsz"},e.getTabTitle=function(){return"bqz_zycs_smsz"},e}(BasePanel);__reflect(CampWarMainPanel.prototype,"CampWarMainPanel"),window.CampWarMainPanel=CampWarMainPanel;var LogicSys=function(t){function e(){var e=t.call(this)||this;e.entityList=[],e.dropItems=[],e.isFirstEnterCity=!0,e.isFirstCreatRole=!0,e.isFirstRegister=!1,e.nextExpTick=0,e.showMasterHandles={},e.entityListShowTick=0,e.isShowOtherEff=!0,e.isShowHit=!0,e.isShowOtherWing=!0,e.isAutoCamera=!0,e.isInJJCGroup=!1,e.firstCreateMap=!0,e.aotuOpenWin=!0,e.isFubenLose=!1,e.onceReport=!0,e.entityShowCount=2,e.loger={},e.count=0,e.sysId=PackId.Default,e.reg(1,e.patchActorInfo),e.reg(3,e.patchEnterMap),e.reg(4,e.doCreateOtherEntity),e.reg(5,e.doCurrencyChange),e.reg(7,e.doExp),e.reg(8,e.patchSubRoleAtt),e.reg(9,e.doBloodUpdata),e.reg(10,e.doRemoveEntity),e.reg(11,e.doMoveEntity),e.reg(12,e.doStopMoveEntity),e.reg(13,e.doSyncPos),e.reg(14,e.doServerTime),e.reg(16,e.patchOtherActor),e.reg(18,e.doFirstRegister),e.reg(20,e.doDieNotice),e.reg(21,e.doGuildChange),e.reg(22,e.doRename),e.reg(23,e.patchGetOpenServer),e.reg(24,e.patchHefuTimer),e.reg(25,e.patchEntityProp),e.reg(26,e.patchLvExp),e.reg(27,e.doCurrencyInit),e.reg(28,e.doLvAttr),e.reg(30,e.patchFbInfo),e.reg(32,e.doPickUpItem),e.reg(33,e.doCreatDropItem),e.reg(34,e.patchEntityModelChange),e.reg(40,e.doEntityDie),e.reg(41,e.doChatBubble),e.reg(42,e.doBloodMaxUpdate),e.reg(43,e.patchEntityAlive),e.reg(45,e.patchChouhenList),e.reg(46,e.patchChouhenUpdate),e.reg(47,e.patchChouhenClear),e.reg(49,e.doDeBloodUpdata),e.reg(55,e.patchCaijiEntity),e.reg(56,e.patchAllSysInit),e.reg(59,e.patchEntityYongbingChange),e.reg(60,e.patchEntitySkillChange),e.reg(61,e.patchNewDayBegin),e.reg(63,e.onEnterMap),e.reg(64,e.patchEnterKFFail),e.reg(65,e.onTodayFirstLogin),egret.startTick(e.onEnterFrame,e),e.addLsn(MapContainer.ins().patchGridClick,e.onMapGridClick);var i=6e4;return Timer.ins()["do"](i,i,0,function(){e.sendBase(255)},e),e.mcOnClick=new MC,e}return __extends(e,t),Object.defineProperty(e.prototype,"camera",{get:function(){return this.tempCenter||this.centerEntity},enumerable:!0,configurable:!0}),e.ins=function(){return t.getIns.call(this,e)},e.prototype.onEnterFrame=function(t){for(var e=Timer.ins().getTimer(),i=0,n=this.entityList;i<n.length;i++){var a=n[i];a.updateTick(t)}var o=MapContainer.ins();if(this.centerEntity&&(this.isInJJCGroup?o.focusTo(this.camera.x+1.2*MapBase.CELL_SIZE,this.camera.y):o.focusTo(this.camera.x,this.camera.y)),e-this.entityListShowTick>=500){this.entityListShowTick=e;for(var s=0,r=this.entityList;s<r.length;s++){var a=r[s];this.updateEntitySingleShowStatus(a)}}for(var u=0;u<this.dropItems.length;u++){var h=this.dropItems[u];h.item.isMy&&0!=h.item.tick&&e>h.item.tick&&this.canItemPick(h)&&(h.hasPicked=!0,this.sendPickUpItem(h))}return o.updateTick(t),!1},e.prototype.updateEntitySingleShowStatus=function(t){if(this.centerEntity){var e=new egret.Rectangle(-MapContainer.ins().x,-MapContainer.ins().y,LayerMgr.getStage().stageWidth,LayerMgr.getStage().stageHeight),i=e.contains(t.x,t.y);i?t.visible||(t.visible=!0):t.visible&&(t.visible=!1)}},e.prototype.addShowList=function(t){if(!GFunc.isInCity()&&t.masterHandle!=Actor.ins().handle)if(this.showMasterHandles[t.masterHandle])t.setBodyVisible(!0);else{var e=ComUtil.getObjLen(this.showMasterHandles);3>e?(this.showMasterHandles[t.masterHandle]=1,t.setBodyVisible(!0)):t.setBodyVisible(!1)}},e.prototype.delShowList=function(t){var e=this.getMainRoleByMasterHandle(t);e||delete this.showMasterHandles[t]},e.prototype.sendGMCommad=function(t){var e=this.getBytes(0);e.writeString(t),this.send(e)},e.prototype.setClickMapEnable=function(t){MapContainer.ins().touchEnabled=MapContainer.ins().touchChildren=t},e.prototype.onMapGridClick=function(t,e){void 0===e&&(e=null);var i=this.centerEntity.AI;return GuildWarSys.ins().getModel().getIsBaJian()?void openWin(WarnWin,Lang.scene_str33.replace("$str$",""+StrUtil.addColor(Lang.scene_str2,16758826)),function(){i.resetCaiji(),i.startMoveToXY(t,-1,e)},this):(i.resetCaiji(),void i.startMoveToXY(t,-1,e))},e.prototype.patchEntityClick=function(t){return t},e.prototype.setOnClickMovie=function(t,e){t?(this.mcOnClick.x=e.x,this.mcOnClick.y=e.y,this.mcOnClick.alpha=MapContainer.ins().checkAlphaByPixel(this.mcOnClick.x,this.mcOnClick.y)?.6:1,this.mcOnClick.playFile(getEffName("dianji"),-1),MapContainer.ins().addEffectToDown1(this.mcOnClick)):(DisUtil.remove(this.mcOnClick),this.mcOnClick.stop())},e.prototype.addBuff=function(t,e){var i=this.getEntityByHandle(t);if(i){i.addBuff(e);var n=Cfg.getConfig(EffectsConfig,e),a=n.args;n.type==BuffType.AdditionalState&&a.i==BuffEffectType.DING_SHEN&&i.AI.isMoveing()&&i.AI.stopAndStand()}},e.prototype.removeBuff=function(t,e){var i=this.getEntityByHandle(t);i&&i.removeBuff(e)},e.prototype.sendEnterFb=function(t){var e=this.getBytes(30);e.writeInt(t),this.send(e)},e.prototype.patchFbInfo=function(t){return Actor.ins().outboardExp=t.readInt(),Actor.ins().outboardGold=t.readInt(),Actor.ins().outboardExp},e.prototype.sendQuitFb=function(){this.sendBase(31)},e.prototype.patchActorInfo=function(t){var e=Actor.ins(),i=e.level;if(e.handle=t.readDouble(),e.actorID=t.readInt(),e.serverID=t.readInt(),e.serverName=t.readString(),e.serverEnv=t.readByte(),e.myName=t.readString(),e.job=t.readByte(),e.sex=t.readByte(),e.level=t.readInt(),e.exp=t.readDouble(),e.power=t.readDouble(),window.platform.setShareInfo(),this.onceReport){var n="?";for(var a in urlParam)if("last"!=a)if("root"!=a||urlParam[a])n+="&"+a+"="+urlParam[a];else{var o=location.origin,s=location.pathname;if(~s.indexOf(".")){var r=s.split("/");r[r.length-1]="",n+="&"+a+"="+o+r.join("/")}else n+="&"+a+"="+o+s}console.log("登录参数",n),window.platform.report("loginOK"),this.onceReport=!1}if(e.setCurrency(CurType.gold,t.readDouble()),e.setCurrency(CurType.yb,t.readDouble()),e.setCurrency(CurType.talentValue,t.readDouble()),e.sVipLv=t.readInt(),e.setCurrency(CurType.mojing,t.readDouble()),BagSys.ins().bagNum=t.readInt(),e.setCurrency(CurType.feats,t.readDouble()),e.setCurrency(CurType.JinZuan,t.readDouble()),e.setCurrency(CurType.starsoul,t.readDouble()),t.readInt(),e.attrData.parserAtt(t),Actor.ins().getMyData(),0==i&&urlParam.useKTX){for(var u=navigator.userAgent.toString(),h=u.indexOf("MI ")>-1,l=u.indexOf("Redmi ")>-1,p=u.indexOf("OPPO ")>-1,c=u.indexOf("vivo ")>-1,d=!1,g=["m2 note","PRO 6","PRO 5","MX6","MX5","MX4","metal"],f=0,y=g;f<y.length;f++){var m=y[f];if(u.indexOf(m)>-1){d=!0;break}}var C=u.indexOf("iPhone")>-1||u.indexOf("iPad")>-1,v=h||l||p||c||d||C;v&&Actor.ins().level>400&&ResMgr.initKTX()}},e.prototype.sendCreateSunRole=function(t,e){var i=this.getBytes(2);i.writeShort(t),i.writeShort(e),this.send(i)},e.prototype.patchEnterMap=function(t){this.tempCenter=null,this.loger={},SkillSys.ins().tongji=new SkillDamageTongji;var e=FbSys.ins().fbId,i=t.readInt(),n=FbSys.ins().fubenConfig=Cfg.getConfig(FubenConfig,i),a=Cfg.getConfig(FubenConfig,e),o=FbSys.ins().mapId;FbSys.ins().mapId=t.readInt();var s=t.readShort(),r=t.readShort();if(openWin(GameMapGcEffWin,FbSys.ins().mapId,o),GameBlackCom.ins().hideBlackMapEff(),this.clearAllEntity(),this.showMasterHandles={},MapContainer.ins().changeMap(FbSys.ins().mapId,s,r),Socket.ins().isFenzhen=-1==GConst.fenzhenFubenGroup.indexOf(n.group),this.creatNpc(),ObjPool.clear(5),GFunc.isFb(n.fbid)){var u=getWin(MainWin);u&&u.com_ext_closeRemind()}GFunc.isInCity()?(this.isFirstEnterCity=!1,this.setClickMapEnable(!0),this.addLsn(RpSys.ins().patchRp,this.onNpcState),this.onNpcState(),SkillEditor.ins().clear(0)):(n.group==FbGroup.RedFortress||n.group==FbGroup.GuildWarPVP||n.group==FbGroup.Mine||n.group==FbGroup.MoLong||n.group==FbGroup.ShenDian||n.group==FbGroup.GuildBattle||n.group==FbGroup.Guzhanchang?this.setClickMapEnable(!0):this.setClickMapEnable(!1),this.removeLsn(RpSys.ins().patchRp,this.onNpcState),SkillEditor.ins().clear(1)),closeWin(FirstRechargeTipsWin),closeWin(SevenDayLoginTipsWin),closeWin(BossBloodWin),closeWin(DamageListWin),closeWin(ReliveWin),closeWin(GuWuWin),closeWin(BossWarnWin),closeWin(MoLongZuZuiTimeWin),closeWin(ShenDianZuZuiTimeWin),closeWin(GuildBattleQuickWin),closeWin(GuildBattleMainWin),closeWin(GuildMapWin),this.isFubenLose&&(RechargeActSys.ins().openFirstRechargeTipsWin(),this.isFubenLose=!1),this.aotuOpenWin&&(a.group==FbGroup.TianTi&&openWin(JJCWin,JJCWin.getTabIndexbyPanel(JJCSinglePanel),JJCSinglePanel.getTabIndexbyPanel(LadderMainPanel)),a.group==FbGroup.EQUIP&&FbSys.ins().guajiData.guanId>Cfg.getConfig(ShilianCommonConfig).guanqia&&openWin(BossWin),(n.group==FbGroup.Wanmo||n.group==FbGroup.HeiAn)&&openWin(PaTaTitleWin,n.group,n.fbid),a.group==FbGroup.JJC&&openWin(JJCWin,JJCWin.getTabIndexbyPanel(JJCSinglePanel),JJCSinglePanel.getTabIndexbyPanel(JJCPanelNew)),a.group==FbGroup.ShengDian&&openWin(FuBenWin,FuBenWin.getTabIndexbyPanel(FuBenDanRenPanel),FuBenDanRenPanel.getTabIndexbyPanel(YongZhePanel)),a.group==FbGroup.GuildMonFb&&openWin(GuildMapWin),a.group==FbGroup.GuildBoss&&(openWin(GuildMapWin),openWin(GuildActivityWin2)),a.group==FbGroup.Kalima&&openWin(BossWin,BossWin.getTabIndexbyPanel(ZhuZaiMainPanel),ZhuZaiMainPanel.getTabIndexbyPanel(KlmPanel)),TaskSys.ins().isTaskIsOk(60)&&GFunc.isDailyFb(a.group)&&openWin(FuBenWin,FuBenWin.getTabIndexbyPanel(FuBenDanRenPanel),FuBenDanRenPanel.getTabIndexbyPanel(MeiRiFbPanel))),a.group==FbGroup.GuildWarPVP&&closeWin(WarnWin),this.isInJJCGroup=GFunc.isJJCGroup(FbSys.ins().fubenGroupConfig.group),closeWin(CountDownWin),closeWin(GuildWarLuckDrawWin),ShouHuNewSys.ins().resetTime(),SoundUtil.playBg(Cfg.getConfig(ScenesConfig,FbSys.ins().mapId).sound+"_mp3");var h=Cfg.getConfig(FubenGroupConfig,n.group);GFunc.isShowExtActIcon=1==h.isTopActIcon,this.firstCreateMap&&(openWin(MainUIButton),openWin(MainWin),this.firstCreateMap=!1),this.aotuOpenWin=!0},e.prototype.onNpcState=function(t){void 0===t&&(t=null);var e;(!t||t.check(EmoPanel))&&(e=10004,this.setNpcRedPoint(e,RpSys.ins().getData(EmoWin,EmoPanel))),(!t||t.check(XueSePanel))&&(e=10005,this.setNpcRedPoint(e,RpSys.ins().getData(EmoWin,XueSePanel))),(!t||t.check(WanMoWin))&&(e=10001,this.setNpcRedPoint(e,RpSys.ins().getData(WanMoWin))),(!t||t.check(HeiAnWin))&&(e=10002,this.setNpcRedPoint(e,RpSys.ins().getData(HeiAnWin))),(!t||t.check(JJCWin))&&(e=10008,this.setNpcRedPoint(e,RpSys.ins().getData(JJCWin)))},e.prototype.setNpcRedPoint=function(t,e){if(t){var i=this.getNpcById(t);i?i.showRedPoint(e):console.log("npc:"+t+"不存在")}},e.prototype.doCreateOtherEntity=function(t){var e=t.readShort(),i=t.readDouble();this.loger[i]=1,t.position-=10;var n=this.getEntityDataByType(e);n.parser(t),this.creatEntityByData(n)},e.prototype.getEntityDataByType=function(t){var e;return EntityType.isMonster(t)?e=new EntityMonsterData:EntityType.isRole(t)?e=new EntityRoleData:EntityType.isBianshen(t)?e=new EntityBianshenData:EntityType.isYongbing(t)?e=new EntityYongbingData:EntityType.isCaiJi(t)?e=new EntityCollectionMonsterData:EntityType.isOther(t)?e=new EntityGatherMonsterData:t==EntityType.MEILIN&&(e=new EntityFaBaoData),e.type=t,e},e.prototype.creatEntityByData=function(t){var e=FbSys.ins().fubenConfig.group,i=t.type;if(EntityType.isMonster(i)||EntityType.isOther(i)){var n=t,a=Cfg.getMonstersConfigNew(n.configID);i=a.type==MonsterType.FriendMonster?EntityType.FRIEND_MONSTER:i;var o=this.createEntityByType(i);n.writeBaseDataToEntity(o),o.setData(n),this.addEntity(o),n.isAlive()||o.setAction(EntityAction.DIE);for(var s=0;s<n.buffs.length;s++)this.addBuff(o.handle,n.buffs[s]);var r=!1;a.type==MonsterType.FriendMonster?o.setAI(new AINpc):EntityType.isMonster(i)?(i==EntityType.MONSTER_SERVER?o.setAI(new AIMonsterServer):i==EntityType.MONSTER_CLIENT&&o.setAI(new AIMonsterClient),e==FbGroup.RedFortress||e==FbGroup.GuildWarPVP||e==FbGroup.MoLong||e==FbGroup.ShenDian||e==FbGroup.Guzhanchang?r=!0:e==FbGroup.GuildBattle&&this.centerEntity.teamId!=n.teamId&&(r=!0)):EntityType.isCaiJi(i)&&n instanceof EntityCollectionMonsterData&&(r=!0,this.updateCaijiInfo(o,n.state,n.tick,n.tMasterHandle)),o.setClickEnable(r);var u=egret.Tween.get(o);o.alpha=.1,u.to({alpha:1},800),t.hasTargetPlace()&&o.AI.startMove(new XY(t.tx,t.ty))}else if(EntityType.isRole(i)){var h=t;if(h.meilinId>=0){var l=this.getFollowersByEntityType(h.masterHandle,EntityType.MEILIN),p=Cfg.getConfig(MeilinHuanhuaBaseConfig,h.meilinId);if(l){var c=l.data;c.configID!=h.meilinId&&(c.setConfig(p),l.setData(c))}else{var c=this.getEntityDataByType(EntityType.MEILIN);c.setConfig(p),l=this.createEntityByType(EntityType.MEILIN),l.masterHandle=c.masterHandle=h.masterHandle,l.handle=c.handle=VirtualServer.ins().getHandle();var d=MapContainer.ins().getNearestRandomXY(h);l.x=d.x,l.y=d.y,l.setData(c),l.setFlow(),l.setAI(new AIMeilin),l.AI.start(),l.AI.startFollow(h.handle,h.masterHandle),this.addEntity(l)}}var g,f=h.masterHandle==Actor.ins().handle,y=void 0;f?h.appearType==AppearType.maindAppear?(y=this.centerEntity.bianShenClone(),y.handle=this.centerEntity.handle,y.masterHandle=this.centerEntity.masterHandle,g=this.centerEntity,g.entityType=EntityType.ROLE,g.handle=h.handle,g.masterHandle=h.masterHandle):(g=this.createEntityByType(i),this.centerEntity=g,h.writeBaseDataToEntity(g)):(g=this.createEntityByType(i),h.writeBaseDataToEntity(g)),g.setData(h),this.addEntity(g);for(var s=0;s<h.buffs.length;s++)this.addBuff(g.handle,h.buffs[s]);if(f){switch(h.appearType){case AppearType.maindAppear:Timer.ins()["do"](1e3,1e3,1,function(){var t=new MC,e=h.appearType==AppearType.maindAppear?"juhun_explosion_l":"bsdc";t.playFile(getEffName(e),1),t.x=g.x,t.y=g.y,MapContainer.ins().addEffectToUp1(t)},null)}if(h.appearType==AppearType.maindAppear)g.AI.resetMove();else if(g.setAI(this.getMyAI(e)),g.AI.start(),g.isDead())g.setHpAndNameVisible(!1),g.AI.startDie();else if(GFunc.isInCity())g.AI.startNone();else if(GFunc.isPkFuben(e)){var m=this.centerEntity.AI.getGuaJi();m?(g.AI.setGuaji(m),g.AI.startAttack()):g.AI.startNone()}else g.AI.startAttack();g.AI.setSkillData(SkillSys.ins().skillDatas.concat(h.skillDatas)),g.AI.setAutoBianshen(ShouHuNewSys.ins().autoBianShen),urlParam.isnew&&this.isFirstCreatRole||(this.isFirstCreatRole=!1,g.addEffect(getEffName("dtqh"))),h.appearType==AppearType.common&&this.patchCreateCommEntity()}else g.setHPBarVisible(!GFunc.isInCity()),h.hasTargetPlace()&&g.AI.startMove(new XY(h.tx,h.ty)),e==FbGroup.RedFortress||e==FbGroup.GuildWarPVP?g.setClickEnable(!0):e==FbGroup.GuildBattle&&this.centerEntity.teamId!=h.teamId&&g.setClickEnable(!0);this.addShowList(g),y&&this.addShowList(y)}else if(EntityType.isYongbing(i)){var C=t,o=this.createEntityByType(i);if(C.writeBaseDataToEntity(o),o.setData(C),o.masterHandle==Actor.ins().handle){if(o.setAI(this.getMyYongbingAI(e)),GFunc.isPkFuben(e)){var m=this.centerEntity.AI.getGuaJi();m&&o.AI.setGuaji(m)}o.AI.start(),o.AI.startFollow(this.centerEntity.handle,this.centerEntity.masterHandle)}o.AI.setSkillData(C.skillDatas),this.addEntity(o)}else if(i==EntityType.NPC);else if(EntityType.isBianshen(i)){var v=t;if(v.meilinId>=0){var l=this.getFollowersByEntityType(v.masterHandle,EntityType.MEILIN),p=Cfg.getConfig(MeilinHuanhuaBaseConfig,v.meilinId);if(l){var c=l.data;c.configID!=v.meilinId&&(c.setConfig(p),l.setData(c))}else{var c=this.getEntityDataByType(EntityType.MEILIN);c.setConfig(p),l=this.createEntityByType(EntityType.MEILIN),l.masterHandle=c.masterHandle=v.masterHandle,l.handle=c.handle=VirtualServer.ins().getHandle();var d=MapContainer.ins().getNearestRandomXY(v);l.x=d.x,l.y=d.y,l.setData(c),l.setFlow(),l.setAI(new AIMeilin),l.AI.start(),l.AI.startFollow(v.handle,v.masterHandle),this.addEntity(l)}}var f=v.masterHandle==Actor.ins().handle,S=void 0,b=void 0;f?(S=this.centerEntity.bianShenClone(),S.handle=this.centerEntity.handle,S.masterHandle=this.centerEntity.masterHandle,b=this.centerEntity,b.entityType=EntityType.BIANSHEN,3==v.appearType&&b.AI.setSkillData(v.skillDatas)):b=this.createEntityByType(i),f?(b.handle=v.handle,b.masterHandle=v.masterHandle):v.writeBaseDataToEntity(b),b.setData(v),this.addEntity(b);for(var s=0;s<v.buffs.length;s++)this.addBuff(b.handle,v.buffs[s]);if(f)b.AI.playAtk(),this.patchCreateEntity(AppearType.bianshendAppear);else{var I=this.getMainRoleByMasterHandle(v.masterHandle);I&&b.setDir(I.dir),b.setHPBarVisible(!GFunc.isInCity()),v.hasTargetPlace()&&b.AI.mustMove(new XY(v.tx,v.ty)),e==FbGroup.RedFortress||e==FbGroup.GuildWarPVP?b.setClickEnable(!0):e==FbGroup.GuildBattle&&this.centerEntity.teamId!=v.teamId&&b.setClickEnable(!0)}this.addShowList(b),S&&this.addShowList(S)}else console.log("创建未知类型实体:"+i)},e.prototype.patchCreateCommEntity=function(){},e.prototype.patchCreateEntity=function(t){return void 0===t&&(t=AppearType.common),t},e.prototype.getMyAI=function(t){var e;return e=t==FbGroup.XueSe?new AIXuese:GFunc.isJJCGroup(t)?new AIRoleJJC:t==FbGroup.BossHome?new AIBossHome:t==FbGroup.RedFortress?new AIRedFort:t==FbGroup.GuildWarPVE?new AIGuildWarPVE:t==FbGroup.GuildWarPVP?new AIGuildWarPVP:t==FbGroup.JueWang?new AIRoleJueWang:t==FbGroup.kfbosssd?new AIRoleKfBossSd:t==FbGroup.ShenDian||t==FbGroup.Guzhanchang?new AIRedFort:t==FbGroup.MoLong?new AIRedFort:t==FbGroup.GuildBattle?new AIGuildBattleRole:Actor.ins().MyAI},e.prototype.getMyYongbingAI=function(t){var e;return e=GFunc.isJJCGroup(t)?new AIYongbingJJC:t==FbGroup.kfbosssd?new AIYongbingKfBossSd:t==FbGroup.MoLong||t==FbGroup.ShenDian||t==FbGroup.Guzhanchang?new AIYongbingMoLong:t==FbGroup.GuildBattle?new AIGuildBattleYongbing:new AIYongbing},e.prototype.sendMoveEntity=function(t,e){var i=this.getBytes(11);i.writeDouble(t.handle),i.writeInt(FbSys.ins().fbId),i.writeInt(e.x),i.writeInt(e.y),i.writeInt(t.x),i.writeInt(t.y),this.send(i)},e.prototype.doMoveEntity=function(t){var e=t.readDouble(),i=this.getEntityByHandle(e);if(i&&i.masterHandle!=Actor.ins().handle){var n=new XY(t.readInt(),t.readInt()),a=new XY(t.readInt(),t.readInt()),o=Math.pow(n.x-a.x,2),s=Math.pow(n.y-a.y,2);o+s>3600&&(i.masterHandle!=Actor.ins().handle&&i instanceof EntityMonster,i.AI.stopMove(),i.x=a.x,i.y=a.y),i.AI.mustMove(n)}},e.prototype.sendStopMoveEntity=function(t){var e=this.getBytes(12);e.writeDouble(t.handle),e.writeInt(FbSys.ins().fbId),e.writeInt(t.x),e.writeInt(t.y),this.send(e)},e.prototype.doStopMoveEntity=function(t){var e=t.readDouble(),i=new XY(t.readInt(),t.readInt()),n=this.getEntityByHandle(e);if(n&&n.masterHandle!=Actor.ins().handle){var a=Math.pow(i.x-n.x,2),o=Math.pow(n.y-i.y,2);n.AI.stopAndStand(),3600>a+o||(n.x=i.x,n.y=i.y)}},e.prototype.getXYStr=function(t,e){return void 0===e&&(e=1),"("+(t.x/MapBase.CELL_SIZE).toFixed(e)+","+(t.y/MapBase.CELL_SIZE).toFixed(e)+")"},e.prototype.createEntityByType=function(t){var e;return EntityType.isRole(t)||EntityType.isBianshen(t)?e=new EntityRole:EntityType.isYongbing(t)?e=new EntityYongbing:EntityType.isMonster(t)?e=t==EntityType.FRIEND_MONSTER?new EntityFriendMonster:ObjPool.pop(EntityMonster):t==EntityType.NPC?e=new EntityNPC:EntityType.isOther(t)?e=t==EntityType.OTHER?new EntityOtherName:ObjPool.pop(EntityOther):EntityType.isDamon(t)?e=ObjPool.pop(EntityDamon):EntityType.isMeilin(t)?e=ObjPool.pop(EntityMeilin):t==EntityType.MINER?e=new EntityMiner:t==EntityType.SIEGE&&(e=new EntityMonsterSiege),e.entityType=t,e},e.prototype.creatNpc=function(){var t=Cfg.getConfig(ScenesConfig,FbSys.ins().mapId);for(var e in t.npcPos){var i=t.npcPos[e];this.createSingleNpc(i)}},e.prototype.createSingleNpc=function(t){var e=this.createEntityByType(EntityType.NPC),i=new EntityData;i.configID=t;var n=Cfg.getConfig(NPCConfig,t);e.scaleX=e.scaleY=n.scale/100,e.setData(i),i.handle=e.handle=VirtualServer.ins().getHandle(),n.isShow?e.AI.startStand():e.visible=!1;var a=n.pos;return e.x=(a.mapX+.5)*MapBase.CELL_SIZE,e.y=(a.mapY+.5)*MapBase.CELL_SIZE,this.addEntity(e),e},e.prototype.creatMinePos=function(t){var e=this.createEntityByType(EntityType.MINE_DIAMOND),i=new EntityGatherMonsterData;e.setData(i),e.setHpAndNameVisible(!1),e.setClickEnable(!1),e.x=(t.getMineFBConfig().shuijingXY[0]+.5)*MapBase.CELL_SIZE,e.y=(t.getMineFBConfig().shuijingXY[1]+.5)*MapBase.CELL_SIZE,e.handle=t.posHandle,e.AI.startStand(),this.addEntity(e)},e.prototype.creatMiner=function(t){var e=this.createEntityByType(EntityType.MINER);e.setData(t),e.x=(t.getMineFBConfig().kuanggongXY[0]+.5)*MapBase.CELL_SIZE,e.y=(t.getMineFBConfig().kuanggongXY[1]+.5)*MapBase.CELL_SIZE,e.handle=t.minerHandle,e.AI.startStand(),this.addEntity(e)},e.prototype.creatSiege=function(t){var e=this.createEntityByType(EntityType.SIEGE);e.setData(t),e.x=(t.config.pos[0]+.5)*MapBase.CELL_SIZE,e.y=(t.config.pos[1]+.5)*MapBase.CELL_SIZE,e.setClickEnable(!0),e.handle=VirtualServer.ins().getHandle(),t.isDie()?e.setAction(EntityAction.DIE):e.AI.startStand(),this.addEntity(e)},e.prototype.setEntityNPCConfig=function(t){for(var e=0,i=this.entityList;e<i.length;e++){var n=i[e];n instanceof EntityNPC&&n.getCfgId()==t.id&&(n.AI.startStand(),n.visible=!0)}},e.prototype.getEntityByHandle=function(t){for(var e=0,i=this.entityList;e<i.length;e++){var n=i[e];if(n.handle==t)return n}return null},e.prototype.removeEntityByHandle=function(t){for(var e=0;e<this.entityList.length;e++)if(this.entityList[e].handle==t){var i=this.entityList.splice(e,1)[0];return ObjPool.push(i),i}return null},e.prototype.getEntitysByMasterHandle=function(t){for(var e=[],i=0,n=this.entityList;i<n.length;i++){var a=n[i];a.masterHandle==t&&e.push(a)}return e},e.prototype.getEntitysByType=function(t){for(var e=[],i=0,n=this.entityList;i<n.length;i++){var a=n[i];a.entityType==t&&e.push(a)}return e},e.prototype.getEntityByType=function(t){for(var e=0,i=this.entityList;e<i.length;e++){var n=i[e];if(n.entityType==t)return n}return null},e.prototype.getMainRoleByMasterHandle=function(t){for(var e=0,i=this.entityList;e<i.length;e++){var n=i[e];if(n.masterHandle==t&&n.isAlive()&&(EntityType.isRole(n.entityType)||EntityType.isBianshen(n.entityType)))return n}return null},e.prototype.getCanAtkByMasterHandle=function(t){for(var e=0,i=this.entityList;e<i.length;e++){var n=i[e];if(n.masterHandle==t&&n.isAlive()&&(EntityType.isRole(n.entityType)||EntityType.isMonster(n.entityType)||EntityType.isBianshen(n.entityType)))return n}return null},e.prototype.getFollowersByMasterHandle=function(t){for(var e=[],i=0,n=this.entityList;i<n.length;i++){var a=n[i];
a.masterHandle==t&&(EntityType.isDamon(a.entityType)||EntityType.isMeilin(a.entityType))&&e.push(a)}return e},e.prototype.getFollowersByEntityType=function(t,e){for(var i=0,n=this.entityList;i<n.length;i++){var a=n[i];if(a.masterHandle==t&&e==a.entityType)return a}return null},e.prototype.getYongbingByMasterHandle=function(t){for(var e=0,i=this.entityList;e<i.length;e++){var n=i[e];if(n.masterHandle==t&&EntityType.isYongbing(n.entityType))return n}return null},e.prototype.getEntityAliveCountByName=function(t){for(var e=0,i=0,n=this.entityList;i<n.length;i++){var a=n[i];egret.getQualifiedClassName(a)!=t||a.isDead()||e++}return e},e.prototype.getEntityAliveCountByEntityType=function(t){for(var e=0,i=0,n=this.entityList;i<n.length;i++){var a=n[i];a.entityType!=t||a.isDead()||e++}return e},e.prototype.getNpcById=function(t){for(var e=0,i=this.entityList;e<i.length;e++){var n=i[e];if(n instanceof EntityNPC&&n.getCfgId()==t)return n}return null},e.prototype.getAliveEnemysByAI=function(t){for(var e=[],i=0,n=this.entityList;i<n.length;i++){var a=n[i];t.isEnemy(a)&&!a.isDead()&&e.push(a)}return e},e.prototype.clearAllEntity=function(){for(var t=0,e=this.entityList;t<e.length;t++){var i=e[t];ObjPool.push(i)}this.entityList.length=0,this.clearAllDropItems()},e.prototype.getEntityList=function(){return this.entityList},e.prototype.getFirstRolesList=function(){for(var t=[],e=[],i=0,n=this.entityList;i<n.length;i++){var a=n[i];EntityType.isMainRole(a.entityType)&&a.isAlive()&&-1==t.indexOf(a.masterHandle)&&a.masterHandle!=Actor.ins().handle&&(t.push(a.masterHandle),e.push(a))}return e},e.prototype.getEntityMasterHandleList=function(){for(var t=[],e=0,i=this.entityList;e<i.length;e++){var n=i[e];EntityType.isMainRole(n.entityType)&&n.isAlive()&&-1==t.indexOf(n.masterHandle)&&n.masterHandle!=Actor.ins().handle&&t.push(n.masterHandle)}return t},e.prototype.getMyYongbing=function(){for(var t=0,e=this.entityList;t<e.length;t++){var i=e[t];if(EntityType.isYongbing(i.entityType)&&i.masterHandle==Actor.ins().handle)return i}return null},e.prototype.isAliveByMasterHandle=function(t){for(var e=!1,i=0,n=this.entityList;i<n.length;i++){var a=n[i];if(a instanceof EntityRole&&a.masterHandle==t&&a.isAlive()){e=!0;break}}return e},e.prototype.addEntity=function(t){-1==this.entityList.indexOf(t)&&(this.entityList.push(t),MapContainer.ins().addEntity(t),this.updateEntityIsShowWing(t))},e.prototype.addMapEff=function(t){-1==this.entityList.indexOf(t)&&(this.entityList.push(t),MapContainer.ins().addMapEff(t))},e.prototype.doBloodUpdata=function(t){var e=t.readDouble(),i=(t.readByte(),t.readDouble()),n=this.getEntityByHandle(e);if(n){var a=t.readBoolean(),o=(t.readByte(),Math.floor(i-n.getHP()));if(a&&o>0&&n.handle==this.centerEntity.handle){var s=new SkillDamageRange;s.senderPos=n,s.targetPos=n,s.damageType=DamageTypes.HUIXUE,SkillSys.ins().showBlood1(o,s)}n.setProp(AttrType.atHp,i),n.masterHandle==Actor.ins().handle&&EntityType.isRole(n.entityType)&&Actor.ins().attrData.setAtt(AttrType.atHp,i)}},e.prototype.doDeBloodUpdata=function(t){var e=t.readDouble(),i=t.readDouble(),n=this.getEntityByHandle(e),a=t.readByte();if(1==a&&i>=1){var o=new SkillDamageRange;o.senderPos=n,o.targetPos=n,o.damageType=DamageTypes.ZD,o.value=-i,SkillSys.ins().showBlood1(-i,o)}},e.prototype.doBloodMaxUpdate=function(t){var e=t.readDouble(),i=t.readDouble(),n=this.getEntityByHandle(e);n&&(n.setProp(AttrType.atHpMax,i),n.masterHandle==Actor.ins().handle&&n instanceof EntityRole&&Actor.ins().attrData.setAtt(AttrType.atHpMax,i))},e.prototype.patchEntityModelChange=function(t){var e=t.readDouble(),i=this.getEntityByHandle(e);if(i&&EntityType.isRole(i.entityType)){var n=i.data;if(n.entityName=t.readString(),n.job=t.readByte(),n.szId=t.readInt(),n.sqId=t.readInt(),n.wingId=t.readInt(),n.touxianStage=t.readInt(),n.title=t.readInt(),n.guildID=t.readInt(),n.guildName=t.readString(),n.guildOffice=t.readInt(),n.mozhenId=t.readInt(),n.damonId=t.readInt(),n.damonFazhenId=t.readInt(),n.meilinId=t.readInt(),n.footId=t.readInt(),n.shengLingId=t.readInt(),n.huDunId=t.readInt(),n.isShowHunduBar=1==t.readByte(),n.meilinId>=0){var a=this.getFollowersByEntityType(n.masterHandle,EntityType.MEILIN),o=Cfg.getConfig(MeilinHuanhuaBaseConfig,n.meilinId);if(a){var s=a.data;s.configID!=n.meilinId&&(s.setConfig(o),a.setData(s))}else{var s=this.getEntityDataByType(EntityType.MEILIN);s.setConfig(o),a=this.createEntityByType(EntityType.MEILIN),a.masterHandle=s.masterHandle=n.masterHandle,a.handle=s.handle=VirtualServer.ins().getHandle(),a.setData(s),a.setFlow(),a.setAI(new AIMeilin),a.AI.start(),a.AI.startFollow(n.handle,n.masterHandle),this.addEntity(a)}}i.updateHuDun()}else console.log("0-34协议,实体不存在:"+e);return e},e.prototype.patchEntityYongbingChange=function(t){var e=new EntityYongbingData;e.parserChange(t);var i=this.getEntityByHandle(e.handle);EntityType.isYongbing(i.entityType)?i.data=e:console.log("0-59协议,实体不存在:"+e.handle)},e.prototype.patchEntitySkillChange=function(t){var e=t.readDouble(),i=this.getEntityByHandle(e);if(i){for(var n=t.readByte(),a=[],o=i.getCfgId(),s=Cfg.getConfig(YongbingHuanhuaBaseConfig,o),r=0;n>r;r++){var u=a[r]=new SkillData;u.skillId=t.readInt(),u.level=1,u.actionIndex=s.effect-1}i.AI.setSkillData(a)}else console.log("0-60协议,实体不存在:"+e)},e.prototype.patchNewDayBegin=function(t){RpSys.ins().isPatch=!1,RpFun.doAllSysInit(),RpSys.ins().isPatch=!0,RpSys.ins().patchRp(new RpDataUpdateAll)},e.prototype.sendFcm=function(t,e){var i=this.getBytes(62);i.writeByte(t),i.writeInt(e),this.send(i)},e.prototype.onEnterMap=function(t){var e=t.readByte();0==e&&GameBlackCom.ins().hideBlackMapEff()},e.prototype.patchEnterKFFail=function(t){var e=t.readByte();return 0==e&&showtipsFail(Lang.sys_1),e},e.prototype.onTodayFirstLogin=function(t){void 0===t&&(t=null),console.log("下发今日首次登录")},e.prototype.doRemoveEntity=function(t){var e=t.readDouble(),i=t.readUnsignedByte(),n=this.getEntityByHandle(e);if(delete this.loger[e],n)if(2>=i){var a=n.masterHandle,o=n.entityType;if(this.removeEntityByHandle(e),(EntityType.isRole(o)||EntityType.isBianshen(o))&&(this.delShowList(a),1==i))for(var s=this.getFollowersByMasterHandle(a),r=0,u=s;r<u.length;r++){var h=u[r];this.removeEntityByHandle(h.handle)}}else 3==i&&this.removeEntityByHandle(e)},e.prototype.entityAddPickItem=function(t){for(var e=t.length,i=this.getMyYongbing(),n=0;e>n;n++){var a=t[n],o=void 0;o=a.item.id==Cfg.getConfig(EnumConfig).XUESE_DATIANSHI?this.centerEntity:null!=i?i:this.centerEntity;var s=new ItemPick;s.handle=a.item.handle,s.x=a.x,s.y=a.y,s.itemId=a.item.id,s.type=Cfg.getItemCfg(a.item.id).type,o.AI.addPickItem(s)}},e.prototype.setPickItem=function(t){t.masterHandle==Actor.ins().handle&&this.entityAddPickItem(this.dropItems)},e.prototype.doEntityDie=function(t){var e=t.readDouble(),i=t.readDouble(),n=t.readInt(),a=this.getEntityByHandle(e);if(a){this.setPickItem(a);var o=this.getEntityByHandle(i);this.patchEntityDie(a,o,n)}},e.prototype.patchEntityDie=function(t,e,i){var n=this;void 0===e&&(e=null),void 0===i&&(i=0);var a=1e3;t.AI.startDie(a,e);var o=t.handle;if(t.setProp(AttrType.atHp,0),delete this.loger[o],e&&e.masterHandle==Actor.ins().handle){var s=this.getEntityByHandle(o);if(s){var r=new XY;r.x=s.x,r.y=s.y-s.getMyHeight()/2;var u=ObjPool.pop(FollowComBlue),h=ObjPool.pop(FollowComGreen);MapContainer.ins().addEffectToUp1(u),MapContainer.ins().addEffectToUp1(h),this.addKillEff(r,e,u),this.addKillEff(r,e,h)}if(i){var l=Cfg.getConfig(SkillsConfig,i).isShake;l&&DisUtil.shakeIt(MapContainer.ins(),l,200)}}if(t.handle==this.centerEntity.handle){var p=this.getYongbingByMasterHandle(t.masterHandle);p&&p.AI.startFollow(t.handle,t.masterHandle)}return(EntityType.isMonster(t.entityType)||EntityType.isBianshen(t.entityType))&&Timer.ins()["do"](a,0,1,function(){n.removeEntityByHandle(o)},null),[t,e,i]},e.prototype.addKillEff=function(t,e,i){i.x=t.x+50*(.5-Math.random()),i.y=t.y+50*(.5-Math.random()),i.playMovie();var n=MathUtil.randomInteger(200,300),a=80*(.5-Math.random()),o=80*(.5-Math.random()),s=egret.Tween.get(i);s.to({x:t.x+a,y:t.y+o},n,egret.Ease.sineInOut).call(function(){i.setTrailVisible(!0);var t=new XY;t.x=e.x,t.y=e.y-60;var n=MathUtil.getRadianByP(i,t);MathUtil.getDistance(i,t);i.setDir(n);var a=egret.Tween.get(i,{});a.to({x:t.x,y:t.y,trail:1},250,egret.Ease.backIn).call(function(){ObjPool.push(i),DisUtil.remove(i)})})},e.prototype.sendSpecialMove=function(t,e,i){void 0===e&&(e=1);var n=this.getBytes(13);n.writeDouble(t),n.writeByte(e),i?(n.writeInt(i.x),n.writeInt(i.y)):(n.writeInt(0),n.writeInt(0)),this.send(n)},e.prototype.doSyncPos=function(t){var e=t.readDouble(),i=t.readShort(),n=t.readInt(),a=t.readInt(),o=t.readInt(),s=this.getEntityByHandle(e);if(s)switch(i){case 0:s.handle==this.centerEntity.handle&&MapContainer.ins().focusTo(n,a),s.AI.startShunyi(new XY(n,a));for(var r=this.getFollowersByMasterHandle(s.masterHandle),u=0,h=r;u<h.length;u++){var l=h[u];if(EntityType.isMeilin(l.entityType)||EntityType.isDamon(l.entityType)){var p=MapContainer.ins().getNearestRandomXY(s);s.AI.startShunyi(p)}}break;case 1:s.AI.stopMove(),s.playAction(EntityAction.RUN),s.setCfState(!0),s.setDir(GFunc.getDirBy2Point(s,new XY(n,a))),s.startSpeedShadow();var c=egret.Tween.get(s,{onChange:function(){s.AI.isMoveing()&&s.AI.stopMove()}});c.to({x:n,y:a},o).call(function(){s.stopSpeedShadow(),s.AI.resetMove(),s.setCfState(!1)});break;case 2:this.atkedTarget(e,n,a,o)}},e.prototype.testPos=function(t,e){var i=new XY;i.x=t*MapBase.CELL_SIZE,i.y=e*MapBase.CELL_SIZE,this.centerEntity.AI.stopAndStand(),this.centerEntity.x=i.x,this.centerEntity.y=i.y,MapContainer.ins().focusTo(i.x,i.y);for(var n=this.getFollowersByMasterHandle(this.centerEntity.masterHandle),a=0,o=n;a<o.length;a++){var s=o[a];if(EntityType.isMeilin(s.entityType)||EntityType.isDamon(s.entityType)){s.AI.removePickItems();var r=MapContainer.ins().getNearestRandomXY(i);s.x=r.x,s.y=r.y,s.AI.stopAndStand(),s.AI.startFollow(this.centerEntity.handle,this.centerEntity.masterHandle)}}},e.prototype.atkedTarget=function(t,e,i,n,a){void 0===a&&(a=0);var o=this.getEntityByHandle(t);o&&MapContainer.ins().checkWalkableByPixel(e,i)&&(o.x=e,o.y=i)},e.prototype.patchEntityAlive=function(t){var e=t.readDouble(),i=t.readDouble(),n=this.getEntityByHandle(e);return n?(n.AI.startAlive(i),n.masterHandle!=Actor.ins().handle&&n.setHPBarVisible(!GFunc.isInCity())):console.log("想要复活的实体不存在"+e),n},e.prototype.patchChouhenList=function(t){for(var e=t.readUnsignedShort(),i=0;e>i;i++){var n=t.readDouble(),a=t.readDouble();this.centerEntity.AI.addChouhen(n,a)}},e.prototype.patchChouhenUpdate=function(t){var e=t.readByte(),i=t.readDouble(),n=t.readDouble();if(0==e?this.centerEntity.AI.delChouhen(i):this.centerEntity.AI.addChouhen(i,n),1==e){var a=this.getMainRoleByMasterHandle(i);if(a){var o="",s=FbSys.ins().fubenConfig.group;s==FbGroup.RedFortress||s==FbGroup.GuildWarPVP?o=Lang.scene_str34:s==FbGroup.BossHome&&(o=Lang.scene_str35),showTipsWarn(Lang.scene_str36.replace("$name$",""+a.getName()).replace("$dir$",""+o))}}},e.prototype.patchChouhenClear=function(t){this.centerEntity.AI.addChouhen(0)},e.prototype.sendAtkTarget=function(t){var e=this.getBytes(48);e.writeDouble(t),this.send(e)},e.prototype.sendCollectionEntity=function(t){var e=this.getBytes(55);e.writeDouble(t),this.send(e)},e.prototype.patchCaijiEntity=function(t){var e=t.readDouble(),i=t.readByte(),n=t.readInt();n=DateUtil.formatMiniDateTime(n);var a=t.readDouble(),o=this.getEntityByHandle(e);return this.updateCaijiInfo(o,i,n,a),[e,i,n,a]},e.prototype.updateCaijiInfo=function(t,i,n,a){t&&EntityType.isCaiJi(t.entityType)&&t.setCanBeCaiJi(0==i||1==i),a==Actor.ins().handle&&e.ins().centerEntity.setCaiJiing(2==i)},e.prototype.patchAllSysInit=function(t){if(RpFun.doAllSysInit(),ActSys.ins().openFirstActRankTipsWin(),ActSys.ins().openCZCBTipsWin(),RpSys.ins().isPatch=!0,RpSys.ins().patchRp(new RpDataUpdateAll),ChatSys.ins().sendChatFrame(),GFunc.isInGuaJiFb()&&VipSys.ins().sendVipRedpacketInfo(),this.isFirstRegister&&FbSys.ins().guajiData.challengeGuanId<=Cfg.GuajiFubenBossPosConfigMaxId()){ResMgr.addPreload(ResMgr.getEffFullName("bslx"));for(var e=Cfg.getSkillEditorConfig("10000")||[],i=0;i<e.length;i++){var n=e[i];2!=n.type&&ResMgr.addPreload(ResDir.RES_DIR_SKILLEFF+n.effectId+".png")}}PfActivitySys.ins().getRenZhengReward()},e.prototype.getNearestEnemyByAI=function(t){for(var e=null,i=Number.MAX_VALUE,n=0,a=this.entityList;n<a.length;n++){var o=a[n];if(t.isEnemy(o)&&o.canBeAtk()){var s=MathUtil.getDistanceX2ByObject(t.getEntity(),o);i>s&&(i=s,e=o)}}return e},e.prototype.getNearestMonsterByAI=function(t){for(var e=null,i=Number.MAX_VALUE,n=0,a=this.entityList;n<a.length;n++){var o=a[n];if(t.isEnemy(o)&&o.canBeAtk()&&EntityType.isMonster(o.entityType)){var s=MathUtil.getDistanceX2ByObject(t.getEntity(),o);i>s&&(i=s,e=o)}}return e},e.prototype.getNearestMonsterById=function(t,e){void 0===e&&(e=0);for(var i=null,n=Number.MAX_VALUE,a=0,o=this.entityList;a<o.length;a++){var s=o[a];if(s instanceof EntityMonster&&s.canBeAtk()&&(s.getCfgId()==e||0==e)){var r=MathUtil.getDistanceX2ByObject(t.getEntity(),s);n>r&&(n=r,i=s)}}return i},e.prototype.getNearestCaijiById=function(t,e){void 0===e&&(e=0);for(var i=null,n=Number.MAX_VALUE,a=0,o=this.entityList;a<o.length;a++){var s=o[a];if(EntityType.isCaiJi(s.entityType)&&s.isBeCaiJi()&&(s.getCfgId()==e||0==e)){var r=MathUtil.getDistanceX2ByObject(t,s);n>r&&(n=r,i=s)}}return i},e.prototype.getNearestEntity=function(t){for(var e=null,i=Number.MAX_VALUE,n=0,a=this.entityList;n<a.length;n++){var o=a[n];if(o!=t){var s=MathUtil.getDistanceX2ByObject(t,o);i>s&&(i=s,e=o)}}return e},e.prototype.getBossById=function(t){for(var e=0,i=this.entityList;e<i.length;e++){var n=i[e];if(n.getCfgId()==t)return n}},e.prototype.atkTargetByHandle=function(t){var e=this.getEntityByHandle(t);if(e&&e.masterHandle&&this.sendAtkTarget(e.masterHandle),this.centerEntity.isAlive()){this.centerEntity.AI.resetTargetALL(),this.centerEntity.AI.addAtkHandle(t),this.centerEntity.AI.startAttack(e);var i=this.getYongbingByMasterHandle(this.centerEntity.masterHandle);i&&(i.AI.resetTargetALL(),i.AI.addAtkHandle(t),i.AI.startAttack(e))}this.setOnClickMovie(!1,null)},e.prototype.atkTargetByMasterHandle=function(t){if(t&&this.sendAtkTarget(t),this.centerEntity.isAlive()){var e=this.getMainRoleByMasterHandle(t);this.centerEntity.AI.addAtkMasterHandle(t),this.centerEntity.AI.startAttack(e);var i=this.getYongbingByMasterHandle(this.centerEntity.masterHandle);i&&(i.AI.resetTargetALL(),i.AI.addAtkMasterHandle(t),i.AI.startAttack(e))}this.setOnClickMovie(!1,null)},e.prototype.setCenterEntityGuaji=function(t){this.centerEntity.AI.setGuaji(t);var e=this.getYongbingByMasterHandle(this.centerEntity.masterHandle);e&&e.AI.setGuaji(t)},e.prototype.setActorEntitysVisible=function(t,e){for(var i=this.getEntitysByMasterHandle(t),n=0,a=i;n<a.length;n++){var o=a[n];o.visible=e}},e.prototype.sendPickUpItem=function(t){var e=this.getBytes(32);e.writeInt(t.item.handle),this.send(e)},e.prototype.doPickUpItem=function(t){var e=t.readInt(),i=t.readShort();0==i||1==i||3==i?this.pickUpItemHandle(e,i):2==i&&showtipsFail(Lang.scene_str37),this.patchPickUpItem()},e.prototype.pickUpItemHandle=function(t,e){for(var i=this.dropItems.length,n=0;i>n;n++){var a=this.dropItems[n];if(a.item.handle==t){0==e&&a.item.isMy&&GFunc.flyToBag(a.item.id,a,32,32),DisUtil.remove(a),this.dropItems.splice(n,1),ObjPool.push(a);break}}},e.prototype.patchPickUpItem=function(){},e.prototype.doCreatDropItem=function(t){var e=t.readInt(),i=t.readInt(),n=t.readString(),a=t.readInt();if(a){for(var o=[],s=0;a>s;s++){var r=new ItemDataDrop;r.parser(t),r.roleName=n,r.isMy=n==Actor.ins().myName||""==n,n==Actor.ins().myName&&(r.tick=Timer.ins().getTimer()+5e3),o.push(r)}this.doCreatDropItem1(e,i,o)}},e.prototype.doCreatDropItem1=function(t,e,i){for(var n=i.length,a=4*MapBase.CELL_SIZE,o=!1,s={},r=0;n>r;r++){var u=ObjPool.pop(EntityDropItem);if(0==r)u.x=t,u.y=e;else{var h=0;for(u.x=-1,u.y=-1;!MapContainer.ins().checkWalkableByPixel(u.x,u.y);){if(h>20){u.x=t,u.y=e;break}u.x=t+(Math.random()-.5)*a,u.y=e+(Math.random()-.5)*a,h++}}u.setData(i[r]),this.dropItems.push(u),MapContainer.ins().addDropTo(u),u.playDropMovie();var l=this.getMyYongbing();if(i[r].isMy){var p=void 0;p=this.centerEntity.isBianShenStatus()?this.centerEntity:i[r].id==Cfg.getConfig(EnumConfig).XUESE_DATIANSHI?this.centerEntity:null!=l?l:this.centerEntity,s[p.handle]=p;var c=new ItemPick;c.handle=i[r].handle,c.x=u.x,c.y=u.y,c.itemId=i[r].id,c.type=Cfg.getItemCfg(i[r].id).type,p.AI.addPickItem(c),u.pickerHandle=p.handle}o||Cfg.getItemCfg(i[r].id).type!=ItemType.ForgeItem||(o=!0)}for(var d in s){var p=s[d];p.AI.startPickItem()}o&&SoundUtil.play("egem_wav")},e.prototype.getDropItemCount=function(){return this.dropItems.length},e.prototype.getDropIsItem=function(){for(var t=this.dropItems.length,e=0;t>e;e++){if(GFunc.isCur(this.dropItems[e].item.id))return!0;if(!GFunc.isCur(this.dropItems[e].item.id)){var i=Cfg.getItemCfg(this.dropItems[e].item.id);if(!ItemType.isEquip(i.type))return!0}}return!1},e.prototype.clearAllDropItems=function(){for(var t=0;t<this.dropItems.length;t++){var e=this.dropItems[t];DisUtil.remove(e),ObjPool.push(e)}this.dropItems.length=0},e.prototype.canItemPick=function(t){return BagSys.ins().getSurplusCount()>0||GFunc.isCur(t.item.id)||!ItemType.isEquip(Cfg.getItemCfg(t.item.id).type)&&0==t.hasPicked?!0:!1},e.prototype.getNeedBagCount=function(t){return GFunc.isCur(t.item.id)||!ItemType.isEquip(Cfg.getItemCfg(t.item.id).type)?0:1},e.prototype.getItemList=function(){return this.dropItems},e.prototype.getItemByHandle=function(t){for(var e=0,i=this.dropItems;e<i.length;e++){var n=i[e];if(n.item.handle==t)return n}return null},e.prototype.doCurrencyInit=function(t){for(var e=t.readByte(),i=0;e>i;i++){var n=t.readShort(),a=t.readDouble();this.patchCurrency(n,a),RpFun.updateCurrency(n,PCode.UPD)}},e.prototype.doCurrencyChange=function(t){var e=t.readShort(),i=t.readDouble(),n=t.readByte(),a=Actor.ins().getCurrency(e),o=i-a;this.patchCurrency(e,i);var s=o>=0?PCode.ADD:PCode.DEL;if(RpFun.updateCurrency(e,s),s==PCode.ADD&&o>0&&0==n){var r=Cfg.getItemCfg(e);TipsSys.ins().showtipsNew(r.getName()+" +"+GFunc.overLength(o),GConst.PZColor[r.quality])}},e.prototype.patchCurrency=function(t,e){return Actor.ins().setCurrency(t,e),new CurrencyData(t,e)},e.prototype.doExp=function(t){var e=this,i=Actor.ins().level,n=t.readInt();Actor.ins().level=n;var a=Actor.ins().exp,o=t.readDouble();Actor.ins().exp=o;var s=t.readDouble();Actor.ins().totalexp=t.readDouble();var r=(t.readByte(),t.readShort());if(a!=o&&this.patchExpChange(),i!=Actor.ins().level){window.platform.reportLevelup();var u=Actor.ins().level-i;if(u>=2){var h=new RoleUpLevelTipsWin;h.x=LayerMgr.Tips.width/2-h.width/2,h.bottom=350,h.alpha=0,h.open(u);var l=egret.Tween.get(h);l.to({y:320,alpha:1},300).wait(350).to({alpha:0},300).call(function(){DisUtil.remove(h)}),LayerMgr.Tips.addChild(h)}else this.centerEntity&&this.centerEntity.addEffect(getEffName("jssj"));0==i&&Actor.ins().level<=400&&ResUtil.ins().loadGroup("preloadSound",function(){},null,null),this.patchLevelChange(),RpFun.updateLevel(PCode.UPD)}if(GFunc.isCurExpFb()&&this.centerEntity){var p=Timer.ins().getTimer()-this.nextExpTick;p>0?(SkillSys.ins().showExp(s,r,this.centerEntity),this.nextExpTick=Timer.ins().getTimer()+300):(p=-p,1500>p&&(Timer.ins()["do"](p,0,1,function(){SkillSys.ins().showExp(s,r,e.centerEntity)},this),this.nextExpTick+=300))}},e.prototype.patchLvExp=function(t){},e.prototype.patchLevelChange=function(){},e.prototype.patchExpChange=function(){},e.prototype.patchNameChange=function(){},e.prototype.patchPowerChange=function(){},e.prototype.patchSubRoleAtt=function(t){var e=Actor.ins().attrData.getAttTotles();Actor.ins().attrData.parserAtt(t);var i=Actor.ins().power,n=t.readDouble();Actor.ins().attrData.parserAttAdd(t);t.readDouble();Actor.ins().power=n,i!=n&&(openWin(PowerUpWin,i,n),this.patchPowerChange()),n>i&&RpFun.showActRp(303);var a=Actor.ins().attrData.getAttTotles();this.showRoleAttrChang(a,e);var o=this.getMainRoleByMasterHandle(Actor.ins().handle);o&&(o.setProps(a),o.setProp(AttrType.atShenYouShieldTagNum,o.getProp(AttrType.atShenYouShieldTagNum)))},e.prototype.showRoleAttrChang=function(t,e){var i=[],n=t.length,a=!1;t[AttrType.atAtkLvl]&&(a=e[AttrType.atAtkLvl]?t[AttrType.atAtkLvl]>e[AttrType.atAtkLvl]:!0);for(var o=[],s=0;n>s;s++)if((!a||s!=AttrType.atAtkMin&&s!=AttrType.atAtkMax)&&1==Cfg.getConfig(AttrPowerConfig,s).isShowChang){var r=t[s],u=e[s];if(r>0){var h=new AttrData(s,r);if(u>0){if(!(r-u>=1))continue;h.value=r-u}o.push(h)}}o.length&&TipsSys.ins().showAttrAddTips(o),i.length>0&&(isShowWin(MainUITipsPower2)?getWin(MainUITipsPower2).addAttrData(i):openWin(MainUITipsPower2,i))},e.prototype.patchMainRoleTargetChange=function(t){return t},e.prototype.patchMainRoleTargetMasterChange=function(t){return t},e.prototype.getRangeEnemenys=function(t,e,i,n,a){void 0===i&&(i=0),void 0===a&&(a=Number.MAX_VALUE);for(var o=[],s=MapBase.CELL_SIZE,r=Math.floor(e.x/s),u=Math.floor(e.y/s),h=Math.max(r-i,0)*s,l=Math.max(u-i,0)*s,p=(r+i+1)*s,c=(u+i+1)*s,d=0,g=n;d<g.length;d++){var f=g[d];if(o.length>=a)break;f.x>h&&f.y>l&&f.x<p&&f.y<c&&o.push(f)}return o},e.prototype.getRectEnemenys=function(t,e,i,n,a,o){void 0===o&&(o=Number.MAX_VALUE);for(var s=[],r=i*MapBase.CELL_SIZE,u=e.x-t.x,h=e.y-t.y,l=Math.atan2(h,u),p=n*MapBase.CELL_SIZE/2,c=0,d=a;c<d.length;c++){var g=d[c];if(s.length>=o)break;var f=g.x-t.x,y=g.y-t.y,m=Math.abs(Math.atan2(y,f)-l),C=f*f+y*y,v=Math.cos(m),S=Math.sin(m);(m<=Math.PI/2||m>=3*Math.PI/2)&&r*r>=v*v*C&&p*p>=S*S*C&&s.push(g)}return s},e.prototype.getFanshapedEnemenys=function(t,e,i,n,a,o){void 0===o&&(o=Number.MAX_VALUE);var s,r,u,h,l=[],p=MapBase.CELL_SIZE,c=i*p*i*p,d=n*Math.PI/180/2;s=e.x-t.x,u=e.y-t.y;for(var g=0,f=a;g<f.length;g++){var y=f[g];r=y.x-t.x,h=y.y-t.y;var m=r*r+h*h,C=Math.abs(Math.atan2(u,s)-Math.atan2(h,r));if(c>m&&d>C&&l.push(y),l.length>=o)break}return l},e.prototype.doChatBubble=function(t){var e=t.readDouble(),i=t.readString(),n=this.getEntityByHandle(e);n&&n.setBubble(i)},e.prototype.doLvAttr=function(t){var e=(t.readShort(),t.readByte());JobSys.ins().roleUpLvAttr.length=0;for(var i=0;e>i;i++){var n=new AttrData;n.type=t.readByte(),n.value=t.readInt(),n.value>0&&JobSys.ins().roleUpLvAttr.push(n)}openWin(MainUITipsPower)},e.prototype.patchOtherActor=function(t){var e=t.readByte(),i=t.readInt();t.position-=4,0==i?showTipsWarn(Lang.scene_str38):(Actor.ins().seePlayModel=new SeePlayModel,Actor.ins().seePlayModel.parser(t),e==SeeActorType.See&&openWin(OtherRoleWin))},e.prototype.sentOtherActor=function(t,e){if(void 0===e&&(e=SeeActorType.See),GFunc.isKuaFu())return void showtipsFail(Lang.fb_str260);var i=this.getBytes(16);i.writeInt(t),i.writeByte(e),this.send(i)},e.prototype.doFirstRegister=function(t){this.isFirstRegister=!0,!urlParam.isShenhe&&openWin(VipLoginWin)},e.prototype.doDieNotice=function(t){},e.prototype.doGuildChange=function(t){GuildSys.ins().setGuild(t.readInt(),t.readString()),GuildSys.ins().setOffice(GuildOffice.MEMBER),Actor.ins().setCurrency(CurType.fuildfund,0),RpFun.showGuildSiegeRedPoint(),RpFun.guildUpLvRedPoint(PCode.DEL)},e.prototype.sendRename=function(t){var e=this.getBytes(22);e.writeString(t),this.send(e)},e.prototype.doRename=function(t){var e=t.readByte();0==e?(Socket.ins().close(),closeWin(RoleEditorNameWin),GameLogin.ins().showErrorWin(Lang.gmk_str4)):GameLogin.ins().showServerError(e)},e.prototype.sendChangeAttrPoint=function(t){var e=this.getBytes(25);e.writeDouble(t),this.send(e)},e.prototype.sendSaveGuide=function(t,e){var i=this.getBytes(19);i.writeByte(t),i.writeByte(e),i.writeInt(0),this.send(i)},e.prototype.doServerTime=function(t){var e=t.readUnsignedInt();Actor.ins().setServerTime(e)},e.prototype.patchGetOpenServer=function(t){Actor.ins().serverOpenDay=t.readInt();var e=t.readInt();Actor.ins().serverOpenTimer=DateUtil.formatMiniDateTime(e)},e.prototype.patchHefuTimer=function(t){Actor.ins().serverHefuTimer=DateUtil.formatMiniDateTime(t.readInt())},e.prototype.patchEntityProp=function(t){var e=t.readDouble(),i=t.readShort(),n=t.readDouble(),a=this.getEntityByHandle(e);if(a){var o=a.getProp(i);a.setProp(i,n),o!=n&&i==AttrType.atMvSpeed&&o>n&&a.stopSpeedShadow()}},e.prototype.updateIsShowWing=function(){for(var t=0,e=this.entityList;t<e.length;t++){var i=e[t];this.updateEntityIsShowWing(i)}},e.prototype.updateEntityIsShowWing=function(t){var e=t.masterHandle!=Actor.ins().handle&&EntityType.isRole(t.entityType)&&!getLocation("isShowOtherWing",2);t.setWingVisible(!e)},e.prototype.onSocketClose=function(){this.firstCreateMap=!0},e.prototype.test=function(t){t==KeyboardUtil.SPACE&&(this.centerEntity&&(this.count%2!=0?(this.centerEntity.isAlive()&&(this.centerEntity.AI.stopAndStand(),this.centerEntity.AI.startAttack()),MapContainer.ins().touchChildren=MapContainer.ins().touchEnabled=!1):(this.centerEntity.isAlive()&&(this.centerEntity.AI.stopAndStand(),this.centerEntity.AI.startNone()),MapContainer.ins().touchChildren=MapContainer.ins().touchEnabled=!0)),this.count++)},e.prototype.updateIsShowHuDun=function(){for(var t=0,e=this.entityList;t<e.length;t++){var i=e[t];EntityType.isMainRole(i.entityType)&&i.updateHuDun()}},e.prototype.getEntityMasterHandleListByTeamId=function(){for(var t=[],e=0,i=this.entityList;e<i.length;e++){var n=i[e];EntityType.isMainRole(n.entityType)&&n.isAlive()&&-1==t.indexOf(n.masterHandle)&&n.teamId!=this.centerEntity.teamId&&t.push(n.masterHandle)}return t},e.prototype.setEntityNPCByRank=function(t,e){for(var i=0,n=this.entityList;i<n.length;i++){var a=n[i];a instanceof EntityNPC&&a.getCfgId()==t&&(e.configID=t,a.setData(e),a.setName(e.entityName,16767075,20))}},e.prototype.resetShowList=function(){for(var t in this.showMasterHandles)for(var e=this.getEntitysByMasterHandle(+t),i=0,n=e;i<n.length;i++){var a=n[i];a.setBodyVisible(!1)}this.showMasterHandles={}},__decorate([callDelay()],e.prototype,"showRoleAttrChang",null),e}(BaseSys);__reflect(LogicSys.prototype,"LogicSys");var System;!function(t){t.logicSys=LogicSys.ins.bind(LogicSys)}(System||(System={})),window.LogicSys=LogicSys;var CampWarRankPanelMw=function(t){function e(){var e=t.call(this)||this;return e.rankType=2,e}return __extends(e,t),e.getSysId=function(){return 349},e.getTitle=function(){return"btz_zycs_smszphb"},e.getTabTitle=function(){return"btz_zycs_mwb"},e}(CampWarRankPanelQF);__reflect(CampWarRankPanelMw.prototype,"CampWarRankPanelMw"),window.CampWarRankPanelMw=CampWarRankPanelMw;var AppearanceConfig=function(){function t(){}return t}();__reflect(AppearanceConfig.prototype,"AppearanceConfig");var AIDamon=function(t){function e(){var e=t.call(this)||this;return e.aiTime=400,e.params.pickRadio=MapBase.CELL_SIZE,e.params.followDis=100,e}return __extends(e,t),e.prototype.getPath=function(t){return MapContainer.ins().getPath(t,this.entity,function(t,e){return!0})},e.prototype.getFollowXY=function(t){var e=DirUtil.get8Dir(this.entity,t),i=DirUtil.getGridByDir((e+1)%8,this.params.followDis/MapBase.CELL_SIZE,t);return i},e.prototype.Follow=function(){if(this.isMoveing())return!1;this.canPickItem()&&this.startPickItem();var t=this.getFollowTarget();return t&&this.isFaraway(t)&&!this.isSameGrid(new XY(this.params.x,this.params.y),t)?(this.startFollow(this.params.followHandle,this.params.followMasterHandle),!0):!1},e.prototype.PickItem=function(){return this.getPickItemCount()>0?t.prototype.PickItem.call(this):void this.startFollow(this.params.followHandle,this.params.followMasterHandle)},e.prototype.Stand=function(){this.isFaraway()&&this.startFollow(this.params.followHandle,this.params.followMasterHandle)},e}(AIBase);__reflect(AIDamon.prototype,"AIDamon");var AIMonster=function(t){function e(){return t.call(this)||this}return __extends(e,t),e.prototype.startDie=function(e,i){void 0===e&&(e=0),t.prototype.startDie.call(this,e),this.entity.setHpAndNameVisible(!1);var n=Cfg.getMonstersModelCfgByMonsterId(this.entity.getCfgId()),a=n.dieDistance*MapBase.CELL_SIZE;if(0!=a){var o;o=i?MathUtil.getPByDistance(i,this.entity,a):DirUtil.getGridByDir(this.entity.dir,3,this.entity),egret.Tween.removeTweens(this.entity),this.mover.reset(),this.mover=new MoverBSE(this.entity),this.mover.setCompleteFunc(this.dieEnd,this),this.mover.moveTo(Timer.ins().getEgretTimer(),o,.5*this.params.dieTime)}},e.prototype.dieEnd=function(){this.mover=new MoverLine(this.entity);var t=egret.Tween.get(this.entity);t.wait(.2*this.params.dieTime).to({alpha:0,scaleY:1},.3*this.params.dieTime)},e.prototype.startAtked=function(e){t.prototype.startAtked.call(this,e),this.entity.isDead()||this.entity.isAtking()||!this.entity.canBeAtked()||this.playAction(EntityAction.ATKED)},e}(AIBase);__reflect(AIMonster.prototype,"AIMonster");var AIRedFort=function(t){function e(){var e=t.call(this)||this;return e.defaultEnemyType=[EntityType.MONSTER_SERVER],e.enemyType=e.defaultEnemyType,e}return __extends(e,t),e.prototype.startMoveToXY=function(e,i,n){var a=this;void 0===i&&(i=-1),void 0===n&&(n=null);var o;this.returnToAtkTick=Timer.ins().getTimer()+1e8,o=n?function(){a.callback(),n()}:n,t.prototype.startMoveToXY.call(this,e,i,o)},e.prototype.startAtked=function(e){t.prototype.startAtked.call(this,e),Timer.ins().getTimer()-this.returnToAtkTick>0&&this.startAttack()},e.prototype.callback=function(){this.returnToAtkTick=Timer.ins().getTimer()+2e3,this.isGuaji&&this.startAttack()},e}(AIRole);__reflect(AIRedFort.prototype,"AIRedFort");var CampWarRankPanelSw=function(t){function e(){var e=t.call(this)||this;return e.rankType=1,e}return __extends(e,t),e.getSysId=function(){return 349},e.getTitle=function(){return"btz_zycs_smszphb"},e.getTabTitle=function(){return"btz_zycs_swb"},e}(CampWarRankPanelQF);__reflect(CampWarRankPanelSw.prototype,"CampWarRankPanelSw"),window.CampWarRankPanelSw=CampWarRankPanelSw;var AIYongbing=function(t){function e(){var e=t.call(this)||this;return e.defaultEnemyType=[EntityType.MONSTER_SERVER,EntityType.ROLE_CLONE,,EntityType.CLONEBIANSHEN],e.flagTime=0,e.params.followRadius=256,e.params.followDis=200,e.params.pickRadio=64,e.enemyType=e.defaultEnemyType,e}return __extends(e,t),e.prototype.setGuaji=function(e){t.prototype.setGuaji.call(this,e),this.isGuaji!=e&&(this.isGuaji?(this.stopAndStand(),this.enemyType=[EntityType.MONSTER_SERVER,EntityType.ROLE_CLONE,,EntityType.CLONEBIANSHEN],this.startAttack()):(this.stopAndStand(),this.enemyType.length=0,this.resetTargetHandle()))},e.prototype.Follow=function(){if(this.isMoveing())return!0;var e=this.getFollowTarget();if(e&&MathUtil.getDistance(this.entity,e)>=384&&Timer.ins().getTimer()-this.flagTime>1e3)return this.flagTime=Timer.ins().getTimer(),LogicSys.ins().sendSpecialMove(this.entity.handle,0),this.stopAndStand(),!1;var i=t.prototype.Follow.call(this);if(i)return!0;var n=this.getFollowTarget();if(n&&!n.isDead()){var a=LogicSys.ins().getNearestEnemyByAI(n.AI);if(a&&this.hasSkill()){var o=n.AI.getCurTarget();return this.startAttack(o),!0}return!1}return!1},e.prototype.isEnemy=function(t){var e=this.getFollowTarget();return-1!=this.enemyType.indexOf(t.entityType)&&e&&e.AI.isEnemy(t)},e.prototype.getNextTarget=function(){var t,e=this.getFollowTarget();if(e&&!e.isDead()){var i=e.AI.getCurTarget();i&&this.hasSkill()&&(t=e.AI.getCurTarget())}return t},e}(AIRole);__reflect(AIYongbing.prototype,"AIYongbing");var CampWarRewardPanel=function(t){function e(){var e=t.call(this)||this;return e.skinName="CampWarRewardPanelEUI",e.list.itemRenderer=CampWarRewardItem,e.list.dataProvider=e.listData=new eui.ArrayCollection,e}return __extends(e,t),e.prototype.open=function(){t.prototype.open.call(this),this.addLsn(CampWarSys.ins().patchScoreReward,this.updatePanel),this.addLsn(CampWarSys.ins().patchScoreCamp,this.updatePanel),this.infoPanel(),CampWarSys.ins().sendScoreCamp()},e.prototype.close=function(){t.prototype.close.call(this)},e.prototype.infoPanel=function(){var t=new Date(CampWarSys.ins().sjStartTick),e=""+(t.getMonth()+1)+Lang.common_yue+t.getDate()+Lang.common_ri+"-",i=new Date(CampWarSys.ins().sjEndTick);
e+=""+(i.getMonth()+1)+Lang.common_yue+i.getDate()+Lang.common_ri,this.lbTimeDec.textFlow=addColorTF(Lang.zyz_str24+"："+addColor(e,1306146)),this.lbCamp.textFlow=addColorTF(Lang.zyz_str25+addColor(CampWarSys.ins().getCampStr(),16751375)),this.updatePanel()},e.prototype.updatePanel=function(){var t=CampWarSys.ins().scoreRewardDatas;SortUtil.sortOn(t,["rewardState","id"],[SortType.up,SortType.up]),this.listData.source=t},e.getSysId=function(){return 349},e.getTitle=function(){return"btz_zycs_smsz"},e.getTabTitle=function(){return"bqz_zycs_zyjl"},e}(BasePanel);__reflect(CampWarRewardPanel.prototype,"CampWarRewardPanel"),window.CampWarRewardPanel=CampWarRewardPanel;var AITargetHandle=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.handle=0,e}return __extends(e,t),e.prototype.getTarget=function(){var t;if(this.handle){var e=LogicSys.ins().getEntityByHandle(this.handle);e&&!e.isDead()?t=e:this.reset()}return t},e.prototype.setParam=function(t){this.handle=t},e.prototype.addParam=function(t){this.handle=t},e.prototype.delParam=function(t){this.handle=t},e.prototype.reset=function(){this.handle=0},e}(AITargetBase);__reflect(AITargetHandle.prototype,"AITargetHandle");var BossStoreConfig=function(){function t(){}return t}();__reflect(BossStoreConfig.prototype,"BossStoreConfig");var ChatDataGuaJi=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return __extends(e,t),e.prototype.parserMessage=function(t){this.roleName=t.readString(),this.roleId=t.readInt(),this.guanId=t.readShort()},e.prototype.getHtmlTitle=function(){return addColorTF(Lang.chat_str1,2948987)},e.prototype.getHtmlContent=function(){var t=this.getVipContent();return t+=this.getRoleName(),t+=StrUtil.addColor(":"+this.content,16777215),addColorTF(t)},e}(ChatDataBase);__reflect(ChatDataGuaJi.prototype,"ChatDataGuaJi");var EntityOther=function(t){function e(){return t.call(this)||this}return __extends(e,t),e.prototype.canBeAtk=function(){return!1},e}(EntityMonster);__reflect(EntityOther.prototype,"EntityOther"),window.EntityOther=EntityOther;var EntityRole=function(t){function e(){var e=t.call(this)||this;return e.shouHuShengDunLv=0,e.shouHuShengDunShowTime=0,e.fpNextTick=1,e.isFindWay=!1,e._nameTxt.visible=!0,e._nameTxt.textColor=16769375,e._hpBar.skinName="bloodBarSkin1",e._guildNameTxt=new eui.Label,e._guildNameTxt.fontFamily="黑体",e._guildNameTxt.width=240,e._guildNameTxt.textAlign="center",e._guildNameTxt.size=16,e._guildNameTxt.height=e._guildNameTxt.size,e._guildNameTxt.stroke=1,e._guildNameTxt.strokeColor=0,e._guildNameTxt.textColor=2342605,e._guildNameTxt.anchorOffsetX=e._guildNameTxt.width>>1,e._guildNameTxt.visible=!1,e._guildNameTxt.verticalAlign="bottom",e._guildNameTxt.touchEnabled=!1,e.addChild(e._guildNameTxt),e.titleArr.push(e._guildNameTxt),e._titleMC=e.getMovieClip(),e._titleMC.visible=!1,e.addChild(e._titleMC),e.titleArr.push(e._titleMC),e._teamIcon=new eui.Image,e._teamIcon.visible=!1,e.addChild(e._teamIcon),e._nameTxt.width=void 0,e._findWay=e.getMovieClip(),e._findWay.height=42,e._findWay.x=0,e._findWay.y=-110,e._bodyContainer.addChild(e._findWay),e.updatePos(),e}return __extends(e,t),e.prototype.setData=function(e){t.prototype.setData.call(this,e),EntityType.isRole(e.type)?this.setBianShen(e.bianshenId,0,e.bianShenCDTick):EntityType.isBianshen(e.type)&&this.setBianShen(e.bianshenId,e.bianShenEndTick,Number.MAX_VALUE),e.masterHandle==Actor.ins().handle?(this.setVIPCom(),this.setShowTeamIcon(e.teamId)):LogicSys.ins().centerEntity.data.teamId==e.teamId?this.setShowTeamIcon(e.teamId):this.setShowTeamIcon2(e.teamId),(GFunc.isInCity()||GFunc.isGuildWar())&&0!=e.guildID?this.setGuildName(e.guildName+"["+GuildSys.ins().getOfficeName(e.guildOffice)+"]",e.guildID):this.setGuildName(),this.setName(e.entityName),this.setJob(e.job),this.setProps(e.getAttTotles()),this.setShowHuDunBar(e.isShowHunduBar),this.updateHuDun(),this.setTitle(e.title),e.isAlive()||this.setAction(EntityAction.DIE),EntityType.isBianshen(e.type)&&this.setDir(this.dir),this.updateBianshen(),this.readyUpdateMC(),this.updateHuDun()},e.prototype.setDir=function(e){this.data&&EntityType.isBianshen(this.data.type)&&(e=DirUtil.dirTo4dir(e)),t.prototype.setDir.call(this,e)},e.prototype.setVIPCom=function(){if(!this.isBianShenStatus()&&Actor.ins().vipLv<Cfg.getVipMaxLv()){if(!this.vipChuanguanCom&&!urlParam.isShenhe){this.vipChuanguanCom=new VipComponent,this.vipChuanguanCom.open(),this.addChild(this.vipChuanguanCom);var t=this.titleArr.indexOf(this._titleMC);this.titleArr.splice(t,1,this.vipChuanguanCom),this.titleArr.push(this._titleMC),this.updatePos()}}else if(this.vipChuanguanCom){this.vipChuanguanCom.close(),DisUtil.remove(this.vipChuanguanCom);var t=this.titleArr.indexOf(this.vipChuanguanCom);this.titleArr.splice(t,1),this.vipChuanguanCom=null}},e.prototype.setShowFindWay=function(t){this.isFindWay!=t&&(this.isFindWay=t,this._findWay.playFile(getEffName("zdxl"),-1),this._findWay.alpha=t?1:0,this.updatePos())},e.prototype.setName=function(t,e){void 0===e&&(e=16769375),this.entityName=t,this.entityNameColor=e,this._nameTxt.textFlow=addColorTF(this.entityName,this.entityNameColor),this.updateNameGroupSize()},e.prototype.updateTouXian=function(){var t=this.data.touXianFileName;t?(this.groupTouXian.width=45,this.groupTouXian.height=18,this.mcTouXian.playFile(getEffName(""+t),-1),this._nameGroup.addEventListener(eui.UIEvent.RESIZE,this.updateNameGroupSize,this),this.updateNameGroupSize()):(this.groupTouXian.width=0,this.groupTouXian.height=0)},e.prototype.setTeam=function(e,i){void 0===i&&(i=!1),t.prototype.setTeam.call(this,e)},e.prototype.setShowTeamIcon=function(t){this._teamIcon.visible=t>0,this._teamIcon.visible&&(this._teamIcon.source="zhanmeng_zycs_zudui1"),this.updatePos()},e.prototype.setShowTeamIcon2=function(t){this._teamIcon.visible=t>0,this._teamIcon.visible&&(this._teamIcon.source="zhanmeng_zycs_zudui2"),this.updatePos()},e.prototype.setTitle=function(t){if(t&&!this.isBianShenStatus()){var e=Cfg.getConfig(TitleConfig,t);this._titleMC.playFile(getEffName("ch_zycs_"+e.img),-1),this._titleMC.visible=!0,this._titleMC.height=e.height/2}else this._titleMC.stop(),this._titleMC.visible=!1;this.updatePos()},e.prototype.setGuildName=function(t,e){void 0===t&&(t=""),void 0===e&&(e=0),this._guildNameTxt.text=t,this._guildNameTxt.visible=""!=t,this.guildID=e,this.updatePos()},e.prototype.setFootReset=function(){this.fpNextTick=Timer.ins().getTimer()},e.prototype.setHPBarVisible=function(e){t.prototype.setHPBarVisible.call(this,e),this.updatePos()},e.prototype.updatePos=function(){if(this.isBianShenStatus()&&this.data){var e=Cfg.getConfig(ShenmoHuanhuaBaseConfig,this.data.bianshenId);this.myHeight=e.height}else this.myHeight=this.getEntityHeight();t.prototype.updatePos.call(this),this._teamIcon.x=this._hpBar.x-80,this._teamIcon.y=this._hpBar.y-2},e.prototype.updateTick=function(e){if(t.prototype.updateTick.call(this,e),this._isShowBody&&""!=this.data.footPrintName&&0!=this.fpNextTick&&e>this.fpNextTick&&this.AI.isMoveing()){this.fpNextTick=e+500;var i=ObjPool.pop(MC);i.alpha=this.alpha,i.playFile(this.data.footPrintName,1,function(){i.name="",i.alpha=1,i.x=i.y=0,ObjPool.push(i)},!0),i.x=this.x,i.y=this.y,MapContainer.ins().addDropTo(i)}},e.prototype.onTap=function(t){this._body.hitTestPoint(t.stageX,t.stageY)&&(LogicSys.ins().atkTargetByMasterHandle(this.masterHandle),t.stopImmediatePropagation(),LogicSys.ins().patchEntityClick(this))},e.prototype.clone=function(){var t=new e;return t.entityType=this.entityType,t.job=this.job,t.alpha=this.alpha,t.setHp(100,100),t.setDir(this._dir),t},e.prototype.bianShenClone=function(){var t=this.clone();return t.data=this.data,t.x=this.x,t.y=this.y,t.bianshenId=this.bianshenId,t.setFootReset(),t.setDir(this._dir),t},e.prototype.reset=function(){if(this.setHPBarVisible(!0),this._findWay.reset(),this._titleMC.reset(),this._nameGroup.removeEventListener(eui.UIEvent.RESIZE,this.updateNameGroupSize,this),this.vipChuanguanCom){this.vipChuanguanCom.close(),DisUtil.remove(this.vipChuanguanCom);var e=this.titleArr.indexOf(this.vipChuanguanCom);this.titleArr.splice(e,1),this.vipChuanguanCom=null}t.prototype.reset.call(this)},e.prototype.addDisplay=function(){t.prototype.addDisplay.call(this),MessageMgr.ins().addLsn(LogicSys.ins().patchEntityModelChange,this.updateModel,this),this.updateModel()},e.prototype.removeDisplay=function(){t.prototype.removeDisplay.call(this),this.removeBianShen()},e.prototype.updateModel=function(t){(isNaN(t)||t==this.handle)&&(this.updateTouXian(),this.updateMount(),this.updateBianshen(),this.readyUpdateMC())},e.prototype.updateMount=function(){this._bodyContainer.y=0;var t=this.data,e=Cfg.getConfig(DamonHuanhuaBaseConfig,t.damonId);this._mountHeight=isNaN(e.high)?0:-e.high,this.myHeight=this.getEntityHeight(),this._juhun&&(this._juhun.y=this._mountHeight),this._wing&&(this._wing.y=this._mountHeight),this._weapon&&(this._weapon.y=this._mountHeight),this._body.y=this._mountHeight,this._shengLing&&(this._shengLing.y=this._mountHeight),this._hudun&&(this._hudun.y=this._mountHeight),this.updatePos()},e.prototype.updateBianshen=function(){var t=this.data;if(t.type==EntityType.BIANSHEN){var e=this.data.faZhenFileName;if(e){var i=this._disOrder[McOrder.XIANLINGFZ]||new MC;i.playFile(ResMgr.getFootSource(e),-1),i.y=this._body.y,this._disOrder[McOrder.XIANLINGFZ]=i,this._bodyContainer.addChild(i)}this._hpBar.skinName="bloodBarSkin5",this._hpBar.anchorOffsetX=this._hpBar.width>>1}else this.removeBianShen();this.updatePos()},e.prototype.removeBianShen=function(){this._hpBar.skinName="bloodBarSkin1",this._hpBar.anchorOffsetX=this._hpBar.width>>1,DisUtil.remove(this._disOrder[McOrder.XIANLINGFZ]),delete this._disOrder[McOrder.XIANLINGFZ]},e.prototype.getBodyFileName=function(){return ResMgr.getEntityBodyRes(this.entityType,this.data.bodyFileName,this.getDir(),this.action,this.hasWing,this.data.sex)},__decorate([callDelay()],e.prototype,"updatePos",null),e}(Entity);__reflect(EntityRole.prototype,"EntityRole");var ChallengefbBaseConfig=function(){function t(){}return t}();__reflect(ChallengefbBaseConfig.prototype,"ChallengefbBaseConfig");var ChatDataGuildTeam=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return __extends(e,t),e.prototype.parserMessage=function(t){this.roleId=t.readInt(),this.roleName=t.readString(),this.vipLevel=t.readByte(),this.svipLevel=t.readByte()},e.prototype.getHtmlTitle=function(){return addColorTF(Lang.chat_str1,2948987)},e.prototype.getHtmlContent=function(){var t=this.getVipContent();return t+=StrUtil.addColor(this.roleName,1487615),t+=this.getContent(),addColorTF(t)},e}(ChatDataBase);__reflect(ChatDataGuildTeam.prototype,"ChatDataGuildTeam");var EntityGatherMonsterData=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.belongName="",e.teamId=0,e}return __extends(e,t),e.prototype.parser=function(e){t.prototype.parser.call(this,e),this.avatarIndex=e.readByte(),this.belongName=e.readString(),this.teamId=e.readInt()},e.prototype.writeBaseDataToEntity=function(t){t.handle=this.handle,t.masterHandle=this.handle,t.x=this.x,t.y=this.y},e}(EntityData);__reflect(EntityGatherMonsterData.prototype,"EntityGatherMonsterData");var EntityRoleData=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.entityName="",e.lv=0,e.sqId=0,e.szId=0,e.wingId=0,e.title=0,e.guildID=0,e.guildName="",e.footStage=0,e.teamId=0,e.guildOffice=0,e.mozhenId=0,e.touxianStage=0,e.juhunType=0,e.bianshenId=0,e.bianShenCDTick=0,e.damonId=0,e.damonFazhenId=0,e.meilinId=-1,e._huDunId=-1,e.isShowHunduBar=!1,e}return __extends(e,t),e.prototype.parser=function(e){t.prototype.parser.call(this,e),this.parserData(e)},e.prototype.parserData=function(t){this.entityName=t.readString(),this.job=t.readByte(),this.sex=t.readByte(),this.lv=t.readInt(),this.szId=t.readInt(),this.sqId=t.readInt(),this.wingId=t.readInt(),this.touxianStage=t.readInt(),this.title=t.readInt(),this.guildID=t.readInt(),this.guildName=t.readString(),this.teamId=t.readInt(),this.guildOffice=t.readInt(),this.mozhenId=t.readInt(),this.bianshenId=t.readInt();var e=t.readInt();this.bianShenCDTick=e+Timer.ins().getTimer(),this.damonId=t.readInt(),this.damonFazhenId=t.readInt(),this.meilinId=t.readInt(),this.footId=t.readInt(),this.shengLingId=t.readInt();var i=t.readInt();Cfg.hasConfig(ShenYouHuanhuaConfig,i)&&(this.huDunId=i),this.isShowHunduBar=1==t.readByte(),this.parserSkill(t)},Object.defineProperty(e.prototype,"huDunId",{get:function(){return this._huDunId},set:function(t){this._huDunId=t},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"index",{get:function(){return this.configID},set:function(t){this.configID=t},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"weaponFileName",{get:function(){var t="";if(this.damonId){var e=Cfg.getConfig(ShenqiHuanhuaBaseConfig,this.sqId).weaponIds[this.job-1];t=e?Cfg.getConfig(WeaponAppearanceConfig,e).appearance:""}else t="weapon99";return t},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"bodyFileName",{get:function(){var t="";if(this.damonId){var e=Cfg.getConfig(SzHuanhuaBaseConfig,this.szId).bodyIds[this.job-1];t=e?Cfg.getConfig(BodyAppearanceConfig,e).appearance:""}else t="body99";return t},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"wingFileName",{get:function(){if(this.wingId){var t=Cfg.getConfig(WingHuanhuaBaseConfig,this.wingId).wingIds[this.job-1];return Cfg.getConfig(WingAppearanceConfig,t).appearance}return""},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"mountFileName",{get:function(){var t="";if(this.damonId){var e=Cfg.getConfig(DamonHuanhuaBaseConfig,this.damonId);t=e.facade}return t},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"touXianFileName",{get:function(){var t=0==this.touxianStage?"":ResMgr.touxianEntityMCBystage(this.touxianStage);return t},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"guanghuanFileName",{get:function(){if(this.damonFazhenId){var t=Cfg.getConfig(DamonMozhenBaseConfig,this.damonFazhenId).appearanceId;return Cfg.getConfig(GuanghuanAppearanceConfig,t).appearance}return""},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"footPrintName",{get:function(){if(this.footId){var t=Cfg.getConfig(FootHuanhuaBaseConfig,this.footId);return t.facade}return""},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"shengLingFileName",{get:function(){if(this.shengLingId){var t=Cfg.getConfig(ShengLingConfig,this.shengLingId).bodyIds[this.job-1];return Cfg.getConfig(ShengLingAppearanceConfig,t).appearance}return""},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"hudunFileName",{get:function(){if(this.huDunId>=0&&this.isShowHunduBar){var t=Cfg.getConfig(ShenYouHuanhuaConfig,this.huDunId).bodyId;return Cfg.getConfig(ShenYouHuDunAppearanceConfig,t).appearance}return""},enumerable:!0,configurable:!0}),e}(EntityData);__reflect(EntityRoleData.prototype,"EntityRoleData");var SettingsWin=function(t){function e(){var e=t.call(this)||this;return e.layer=LayerMgr.Popup,e.winType=WinType.NormalWin,e.skinName="SettingsWinEUI",e}return __extends(e,t),e.prototype.open=function(){t.prototype.open.call(this),this.addChangeE(this.checkBoxHideSound,this.onHideSound),this.addChangeE(this.checkBoxHideOtherEff,this.onHideOtherEff),this.addChangeE(this.checkBoxHideHit,this.onHideHit),this.addChangeE(this.checkBoxHideOtherWing,this.onHideOtherWing),this.addChangeE(this.checkBoxLiuhai,this.onSetLiuhai),this.checkBoxHideHuDun&&this.addChangeE(this.checkBoxHideHuDun,this.onHideHuDun),this.addChangeE(this.eCheckShake,this.onCheckShake),this.addEvent(egret.Event.CHANGE,this.sliderYinyue,this.sliderYinyueChangeHandler),this.addEvent(egret.Event.CHANGE,this.sliderYinxiao,this.sliderYinxiaoChangeHandler),this.checkBoxHideSound.selected=!!getLocation("sound",2),this.checkBoxHideOtherEff.selected=!getLocation("isShowOtherEff",2),this.checkBoxHideHit.selected=!getLocation("isShowHit",2),this.checkBoxHideOtherWing.selected=!getLocation("isShowOtherWing",2),this.checkBoxLiuhai.selected=!!getLocation("setLiuhai",2),this.checkBoxHideHuDun&&(this.checkBoxHideHuDun.selected=!getLocation("isShowHundun",2)),this.eCheckShake.selected=!!getLocation(4,2),this.sliderYinyue.value=10*SoundUtil.volumeBG,this.sliderYinyueChangeHandler(),this.sliderYinxiao.value=10*SoundUtil.volume,this.sliderYinxiaoChangeHandler()},e.prototype.skinComplete=function(){var t=window.platform.checkLogout(),e=t.open,i=t.fun;this.btnQHZH.visible=e,this.groupQHZH.scaleX=e?1:0,this.addChangeE(this.btnQHZH,i)},e.prototype.sliderYinyueChangeHandler=function(t){SoundUtil.volumeBG=this.sliderYinyue.value/10},e.prototype.sliderYinxiaoChangeHandler=function(t){SoundUtil.volume=this.sliderYinxiao.value/10},e.prototype.onHideSound=function(t){setLocation("sound",this.checkBoxHideSound.selected+"")},e.prototype.onHideOtherEff=function(t){setLocation("isShowOtherEff",!this.checkBoxHideOtherEff.selected+"")},e.prototype.onHideHit=function(t){setLocation("isShowHit",!this.checkBoxHideHit.selected+"")},e.prototype.onHideOtherWing=function(t){setLocation("isShowOtherWing",!this.checkBoxHideOtherWing.selected+"")},e.prototype.onSetLiuhai=function(t){setLocation("setLiuhai",this.checkBoxLiuhai.selected+"")},e.prototype.onHideHuDun=function(t){setLocation("isShowHundun",!this.checkBoxHideHuDun.selected+"")},e.prototype.onCheckShake=function(){setLocation(4,this.eCheckShake.selected+"")},e.getTabTitle=function(){return"系统设置"},e}(BasePanel);__reflect(SettingsWin.prototype,"SettingsWin"),window.SettingsWin=SettingsWin;var ChatDataMoLong=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return __extends(e,t),e.prototype.parserMessage=function(t){this.roleId=t.readInt(),this.roleName=t.readString(),this.fbId=t.readInt()},e}(ChatDataShenDian);__reflect(ChatDataMoLong.prototype,"ChatDataMoLong");var RuleIconBaseHuchi=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.type=RuleIconType.huchi,e.effX=-7,e.effY=-29,e}return __extends(e,t),e.prototype.updateSys=function(){},e.prototype.getOpenTick=function(){var t=0;if(GFunc.isSysOpen(this.sysId)){var e=this.getOpenSysTick();t=e>Actor.ins().serverTime&&DateUtil.isSameDate(Actor.ins().serverTime,e)?e:Number.MAX_VALUE}else t=Number.MAX_VALUE;return t},e.prototype.setIsShow=function(t){this.isShow=t},e}(RuleIconBase);__reflect(RuleIconBaseHuchi.prototype,"RuleIconBaseHuchi"),window.RuleIconBaseHuchi=RuleIconBaseHuchi;var ZhuoYueWin=function(t){function e(){var e=t.call(this)||this;return e.skinName="ZhuoYueWinEUI",e.addBg(),e.listRewrd.itemRenderer=ItemBaseReward,e.listItem.itemRenderer=ZhuoYueWinItem,e.listItem.dataProvider=e.listData=new eui.ArrayCollection,e}return __extends(e,t),e.prototype.open=function(e){void 0===e&&(e=0),t.prototype.open.call(this),this.addClickE(this.btnOk,this.onClick),this.addItemTapE(this.listItem,this.onMenuClick),this.addLsn(JobSys.ins().patchQiJizl,this.updateItem),this.addLsn(FbSys.ins().patchGuaJiChallenge,this.updateItem),this.iniList(),this.listItem.validateNow();var i=this.getCutIndex();this.listItem.selectedIndex=i,this.updatePanel(),this.upateSccc(i)},e.prototype.updateItemList=function(){for(var t=this.listItem.numChildren,e=0;t>e;e++){var i=this.listItem.getChildAt(e);i&&i.updateState()}},e.prototype.updateItem=function(){var t=this.getCutIndex();this.listItem.selectedIndex=t,this.updatePanel(),this.updateItemList(),this.upateSccc(t)},e.prototype.iniList=function(){this.listData.source=Cfg.getConfigs(WayConfig)},e.prototype.getCutIndex=function(){return JobSys.ins().getQijiReceiveMinAwardData().idx-1},e.prototype.updatePanel=function(){var t=this.data,e=Cfg.getConfig(LimitConfig,t.id);this.image_desc.source="zyzl_zycs_ms"+t.idx,this.listRewrd.dataProvider=new eui.ArrayCollection(GFunc.getItemDataRewardByJob(t.rewards)),this.imgIcon.source=ResMgr.getQijiIconRes1(t.id),this.lbName.text=""+e.sysName;var i=JobSys.ins().QijiReceiveAwardByIdx(t.idx),n=FbSys.ins().guajiData.guanId>=t.guanqia;this.imgYyq.visible=i,this.btnOk.visible=!i&&n,this.lbGuaQia.visible=!n,this.lbGuaQia.textFlow=addColorTF("通过天路第"+t.guanqia+"层开启")},e.prototype.upateSccc=function(t){var e=206*Math.floor(t/3),i=this.scrollerItem.viewport.contentHeight-this.scrollerItem.height;e>=i&&(e=i),0>e&&(e=0),this.scrollerItem.viewport.scrollV=e},e.prototype.onClick=function(t){switch(t.target){case this.btnOk:JobSys.ins().sendQiJizl(this.data.idx)}},e.prototype.onMenuClick=function(t){this.updatePanel()},Object.defineProperty(e.prototype,"data",{get:function(){return this.listItem.selectedItem},enumerable:!0,configurable:!0}),e.getSysId=function(){return 0},e.isShow=function(){return t.isShow.call(this)&&!JobSys.ins().getQijiIsEnd()},e.prototype.getCurBtn=function(){return this.btnOk},e}(BaseWinSingle);__reflect(ZhuoYueWin.prototype,"ZhuoYueWin"),window.ZhuoYueWin=ZhuoYueWin;var ShengbeiWin=function(t){function e(){var e=t.call(this)||this;return e.items=[],e.imgStones=[],e.selectIndex=6,e}return __extends(e,t),e.prototype.initUI=function(){this.skinName="ShengbeiWinEUI",t.prototype.initUI.call(this),this.layer=LayerMgr.Popup;for(var e=0;6>e;e++){var i=this.items[e]=new ShengbeiWinItem;this.setSkinPart("item"+e,i),this.imgStones[e]=this["imgStone"+e]}this.addBg()},e.prototype.open=function(){t.prototype.open.call(this),this.addClickE(this.btnUp,this.onClick),this.addClickE(this.btnUp1,this.onClick),this.addClickE(this.btnShuxing,this.onClick),this.addClickE(this.groupBei,this.onItemClick);for(var e=0,i=this.items;e<i.length;e++){var n=i[e];this.addClickE(n,this.onItemClick)}this.addLsn(RechargePowerSys.ins().patchShengbeiXiangqian,this.onXiangqian),this.addLsn(BagSys.ins().patchItemChange,this.updateConsume),this.addLsn(RpSys.ins().patchRp,this.updateRp),this.updateItems(),this.updateGroupState(),this.updatePower(),this.updateRp()},e.prototype.updateRp=function(t){if(!t||t.check(this.getThisDef())){for(var i=0,n=this.items;i<n.length;i++){var a=n[i];a.updateRp()}if(this.selectIndex<this.items.length){var o=RechargePowerSys.ins().shengbeiData.getStoneDataByIndex(this.selectIndex),s=RpSys.ins().getData(RoleWin,RolePanel,e,o.id);this.btnUp.redPoint=this.btnUp1.redPoint=s}}},e.prototype.onXiangqian=function(t){this.items[t.index].data=t,this.imgStones[t.index].visible=t.isAct(),this.updateUpBtnState(),this.updateStoneAttr(),this.updatePower()},e.prototype.updateUpBtnState=function(){if(this.selectIndex<this.items.length){var t=RechargePowerSys.ins().shengbeiData.getStoneDataByIndex(this.selectIndex),e=t.isAct();this.btnUp.visible=!e,this.btnUp1.visible=e}},e.prototype.updateItems=function(){for(var t=0;t<this.items.length;t++){var e=RechargePowerSys.ins().shengbeiData.getStoneDataByIndex(t);this.items[t].data=e,this.imgStones[t].visible=e.isAct()}},e.prototype.updateGroupState=function(){var t=this.selectIndex<this.items.length;this.groupShengbei.visible=!t,this.groupStone.visible=t,t?(this.updateUpBtnState(),this.updateStoneAttr(),this.updateConsume()):(this.updateBeiAttr(),this.updateSkill())},e.prototype.updateBeiAttr=function(){for(var t=Cfg.getConfig(RechagePowerConstConfig).grailattr.concat(),e=t.slice(0,3),i=t.slice(3,6),n=0,a=0,o=this.items;a<o.length;a++){var s=o[a],r=s.data;n+=r.config.percent}var u=function(t,e,i){if(n>0){var a=Math.floor(i*n/1e4);return t+addColor("（+"+a+"）",5949490)}return t},h=AttrData.parse(e,{fm:""+addColor("%k：",12704255)+addColor("%v",12704255),fix:u}),l=AttrData.parse(i,{fm:""+addColor("%k：",12704255)+addColor("%v",12704255),fix:u});this.labelBeiAttr1.textFlow=addColorTF(h.join("\n")),this.labelBeiAttr2.textFlow=addColorTF(l.join("\n"))},e.prototype.updateSkill=function(){var t=Cfg.getConfig(SkillPassiveConfig,Cfg.getConfig(RechagePowerConstConfig).grailskill,1);this.imgSkillIcon.source=ResMgr.getSkillPassivityItemName(t.id,!0),this.labelSkillName.text=t.name,this.labelSkillDesc.textFlow=StrUtil.toTF(t.skinname)},e.prototype.updateStoneAttr=function(){if(this.selectIndex<this.items.length){var t=this.items[this.selectIndex].data,e=t.isMax();this.groupUp.visible=!e,this.imgMax.visible=e,this.labelStoneName.text=t.idConfig.name;var i=t.idConfig.desc1.replace("{a}",AttrData.getAttrValue(t.config.attr[0])),n=t.idConfig.desc2.replace("{a}",(t.config.percent/100).toFixed(0)+"%"),a="",o="";if(!e){var s=new ShengbeiStoneData;s.id=t.id,s.level=t.level+1,a=addColor("（下级效果+"+AttrData.getAttrValue(s.config.attr[0])+"）",5767068),o=addColor("（下级效果+"+(s.config.percent/100).toFixed(0)+"%）",5767068)}this.labelStoneAttr1.textFlow=StrUtil.toTF(i+a),this.labelStoneAttr2.textFlow=StrUtil.toTF(n+o)}},e.prototype.updateConsume=function(t){if(void 0===t&&(t=null),(!t||t.cfg.type==ItemType.Shengbei)&&this.selectIndex<this.items.length){var e=this.items[this.selectIndex],i=e.data,n=Cfg.getConfig(RechagePowerConstConfig).grailitems[i.index],a=BagSys.ins().getItemCount(n),o=1,s=a>=o?13486270:15733780;this.labelComsume.textFlow=addColorTF(a+"/"+o,s),this.imgConsume.source=ResMgr.getItemIconMin(Cfg.getItemCfg(n).getIcon())}},e.prototype.updatePower=function(){this.bmpLabelPower.text=RechargePowerSys.ins().shengbeiData.power.toFixed(0)},e.prototype.onItemClick=function(t){t.currentTarget==this.groupBei?(this.selectIndex<this.items.length&&this.items[this.selectIndex].setSelect(!1),this.selectIndex=this.items.length):(this.selectIndex<this.items.length&&this.items[this.selectIndex].setSelect(!1),this.selectIndex=this.items.indexOf(t.currentTarget),this.items[this.selectIndex].setSelect(!0)),this.updateGroupState()},e.prototype.onClick=function(t){switch(t.currentTarget){case this.btnUp:case this.btnUp1:if(this.selectIndex>=0&&this.selectIndex<this.items.length)if(RechargePowerSys.ins().shengbeiData.isBuy()){var e=this.items[this.selectIndex].data,i=Cfg.getShengbeiConsumeItemId(e.id);GFunc.checkConsumeEnough(GFunc.creatRewardDatasById(i,1))?RechargePowerSys.ins().sendShengbeiXiangqian(e.id):showtipsFail("购买神石后可镶嵌")}else showtipsFail("请先购买六道神镜");break;case this.btnShuxing:openWin(ShengbeiTipsWin)}},e}(BaseWinSingle);__reflect(ShengbeiWin.prototype,"ShengbeiWin"),window.ShengbeiWin=ShengbeiWin;var ChallengefbConfig=function(){function t(){this.idx=0,this.normalAwards=[],this.saodangAwards=[],this.name="",this.avatar=1,this.power=0}return t.prototype.parser=function(t){this.idx=t.readInt();for(var e=t.readShort(),i=0;e>i;i++){var n=new ItemDataReward;n.parser(t),this.normalAwards[i]=n}e=t.readShort();for(var i=0;e>i;i++){var n=new ItemDataReward;n.parser(t),this.saodangAwards[i]=n}this.name=t.readString(),this.avatar=t.readShort(),this.power=t.readDouble()},t}();__reflect(ChallengefbConfig.prototype,"ChallengefbConfig");var ChatModelBase=function(){function t(){this.charMax=0,this.nextSpeakTick=0,this.interval=0,this.type=0,this.chatBaseDatas=[]}return t.prototype.addMsg=function(t){this.chatBaseDatas.length>=this.charMax&&this.chatBaseDatas.shift(),this.chatBaseDatas.push(t)},t.prototype.canSpeak=function(){return Timer.ins().getTimer()>this.nextSpeakTick},t.prototype.updateSpeakTick=function(){this.nextSpeakTick=Timer.ins().getTimer()+this.interval},t.prototype.destruct=function(){this.charMax=0,this.nextSpeakTick=0,this.interval=0,this.type=0,this.chatBaseDatas.length=0},t}();__reflect(ChatModelBase.prototype,"ChatModelBase");var ChatFramePanel=function(t){function e(){var e=t.call(this)||this;return e.type=1,e}return __extends(e,t),e.prototype.setSkinName=function(){this.skinName="ChatFramePanelEUI"},e.prototype.setItemRenderer=function(){this.itemListPos.itemRenderer=ChatFramePanelItem},e.prototype.updatePos=function(){this.scroller.validateNow();var t=this.itemListPos.selectedIndex,e=102*t+-17*(t>0?t-1:0);console.log(e,this.scroller.viewport.contentHeight,this.scroller.height);var i=this.scroller.viewport.contentHeight-this.scroller.height;e>i?this.scroller.viewport.scrollV=i:this.scroller.viewport.scrollV=e},e.prototype.showNotTips=function(){showtipsFail("聊天框未激活")},e.prototype.updateRp=function(t){if(void 0===t&&(t=null),!t||t.check(e)){var i=this.itemListPos.selectedItem;this.btnup.redPoint.visible=RpSys.ins().getData(SettingAndChatWin,e,this.type,i.id);for(var n=this.listArr.source,a=0,o=n;a<o.length;a++){var s=o[a];this.listArr.itemUpdated(s)}}},e.prototype.updateFrameIcon=function(t){this.iocnImg.source=ResMgr.getFrameIcon(t+"_s")},e.getTabTitle=function(){return"聊天框"},e}(ChatHeadFramePanel);__reflect(ChatFramePanel.prototype,"ChatFramePanel"),window.ChatFramePanel=ChatFramePanel;var DailyOnlineConfig=function(){function t(){}return t}();__reflect(DailyOnlineConfig.prototype,"DailyOnlineConfig");var ChatItemMainChat=function(t){function e(){var e=t.call(this)||this;return e.setSkinName(),e}return __extends(e,t),e.prototype.setSkinName=function(){this.skinName="ChatMainItemEUI"},e.prototype.initEmojiText=function(){this.newText=new TextImage,this.newText.x=this.lbstr.x,this.newText.y=this.lbstr.y,this.lbstr.parent.addChild(this.newText),this.newText.size=this.lbstr.size,this.newText.textColor=this.lbstr.textColor,this.newText.lineSpacing=this.lbstr.lineSpacing,this.newText.width=this.lbstr.width,this.newText.top=this.lbstr.top,this.newText.bottom=this.lbstr.bottom,this.newText.left=this.lbstr.left,this.newText.right=this.lbstr.right},e.prototype.dataChanged=function(){var t=this.data;this.newText||this.initEmojiText(),this.chattype="chat_type"+t.type,this.newText.text=t.getBaseContent(),this.validateNow()},e}(BaseItemRender);__reflect(ChatItemMainChat.prototype,"ChatItemMainChat"),window.ChatItemMainChat=ChatItemMainChat;var ChatWin=function(t){function e(){var e=t.call(this)||this;return e.fistOpenGuild=!0,e.types=[],e.chatTypes=[],e.layer=LayerMgr.Popup,e.skinName="ChatWinEUI2",e.defaultText=Lang.chat_str7,e.chatList.itemRenderer=ChatWinItem,e.chatList.dataProvider=e.chatListArr=new eui.ArrayCollection,e}return __extends(e,t),e.showChatWin=function(){},e.prototype.setTabItem=function(){},e.prototype.initUI=function(){t.prototype.initUI.call(this),this.types=[Lang.chat_str19,Lang.chat_str16,Lang.chat_str17,Lang.chat_str18,Lang.chat_str22,Lang.chat_str20],this.chatTypes=[ChatType.KuaFu,ChatType.World,ChatType.Local,ChatType.Guild,ChatType.Xianlu,ChatType.System],this.tab.dataProvider=new eui.ArrayCollection(this.types),this.chatInput.promptColor=this.chatInput.textColor,this.chatInput.prompt=this.chatInput.text},e.prototype.open=function(i){void 0===i&&(i=-1),t.prototype.open.call(this),this.addClickE(this.closeBtn0Bg,this.onTap),this.addClickE(this.sendBtn,this.onTap),this.addClickE(this.emojiBtn,this.onTap),this.addClickE(this.chatList,this.onListTap),this.addItemTapE(this.chatList,this.onItemTap),this.addItemTapE(this.emojiList,this.onItemEmojiTap),this.addChangeE(this.tab,this.selectIndexChange),this.addChangingE(this.tab,this.checkIsOpen),this.addLsn(ChatSys.ins().updateSingleMsg,this.updateSingleMsg),this.addLsn(ChatSys.ins().patchSendInfoSuccess,this.onFocusIn),this.addLsn(GuildSys.ins().patchAllGuildMessage,this.updataList),this.addLsn(FbSys.ins().patchGuaJiAssist,this.updataGuaJiAssist),this.addLsn(ChatSys.ins().updateXianluChat,this.xianluShowRed),this.addLsn(WinMgr.ins().patchWinOpen,this.winOpen),this.tab.selectedIndex=-1==i?e.cruIndex:i,this.selectIndexChange(null),e.showChatWin(),ChatSys.ins().isNewXianluChat&&this.xianluShowRed()},e.prototype.xianluShowRed=function(){4!=this.tab.selectedIndex&&(this.tab.getChildAt(4).redPoint.visible=!0)},e.prototype.close=function(){t.prototype.close.call(this),ChatSys.ins().isNewXianluChat=!1,getWin(MainWin)&&getWin(MainWin).setShowMainUI(!0),getWin(GuildBossTeamWin)&&getWin(GuildBossTeamWin).setShowMainUI(!0),DisUtil.removeInput(this.chatInput),e.showChatWin()},e.prototype.winOpen=function(t){var e=getWin(getDefinitionByName(t));!e||e.winType!=WinType.MainWin&&e.winType!=WinType.OverlayWin&&"ZhuoYueWin"!=t||closeWin(this)},e.prototype.checkIsOpen=function(t){var e=!1,i=t.target;this.types[i.selectedIndex]!=Lang.chat_str18||GuildSys.ins().guildID||(showtipsFail(Lang.guild_str117),e=!0),this.types[i.selectedIndex]!=Lang.chat_str22||XianLuSys.ins().isJieYuan()||(showtipsFail(Lang.notice_str2),e=!0),e?t.preventDefault():this.updataList()
},e.prototype.selectIndexChange=function(t){e.oldChangle=e.cruIndex,e.cruIndex=this.tab.selectedIndex,3==e.cruIndex&&this.fistOpenGuild&&(this.fistOpenGuild=!1,ChatSys.ins().getMsgsByType(ChatType.Guild).chatBaseDatas.length<=0&&GuildSys.ins().sendAllGuildMessage()),4==e.cruIndex&&(this.tab.getChildAt(e.cruIndex).redPoint.visible=!1,ChatSys.ins().isNewXianluChat=!1),this.updataList()},e.prototype.updateSingleMsg=function(t,i){var n=this.chatTypes[e.cruIndex];n==t&&(this.chatListArr.addItem(i),this.refushBar())},e.prototype.updataList=function(){this.chatInput.maxChars=30;var t=ChatSys.ins();switch(this.types[e.cruIndex]){case Lang.chat_str16:this.currentState="world",this.chatListArr.source=t.getMsgsByType(ChatType.World).chatBaseDatas.concat();break;case Lang.chat_str17:this.currentState="world",this.chatListArr.source=t.getMsgsByType(ChatType.Local).chatBaseDatas.concat();break;case Lang.chat_str18:this.currentState="world",this.chatListArr.source=t.getMsgsByType(ChatType.Guild).chatBaseDatas.concat();break;case Lang.chat_str19:this.currentState="world",this.chatListArr.source=t.getMsgsByType(ChatType.KuaFu).chatBaseDatas.concat();break;case Lang.chat_str20:this.currentState="sys",this.chatListArr.source=t.getMsgsByType(ChatType.System).chatBaseDatas.concat();break;case Lang.chat_str22:this.currentState="world",this.chatListArr.source=t.getMsgsByType(ChatType.Xianlu).chatBaseDatas.concat();break;case"":this.currentState="customer",this.chatInput.maxChars=100}this.refushBar()},e.prototype.openEmoji=function(){if(this.emojiGroup.visible=!0,this.emojiBtn.source="chat_emojiClose",!this.emojiArr){this.emojiList.itemRenderer=ChatWinEmojiItem,this.emojiList.dataProvider=this.emojiArr=new eui.ArrayCollection;var t=Cfg.getConfigs(ChatEmojiConfig,CondType.More,"id",0);this.emojiArr.source=t}},e.prototype.closeEmoji=function(){this.emojiGroup.visible=!1,this.emojiBtn.source="chat_emojiOpen"},e.prototype.refushBar=function(t){void 0===t&&(t=!1);var e=this.chatList,i=e.contentHeight,n=e.height;this.barList.validateNow(),i>n&&(this.barList.viewport.scrollV=i-n),this.listBottom()},e.prototype.listBottom=function(){var t=this.chatList,e=t.contentHeight,i=t.height;this.barList.validateNow(),e>i&&(this.barList.viewport.scrollV=e-i)},e.prototype.refushBarListTop=function(){this.barList.viewport.scrollV=0},e.prototype.onFocusIn=function(){this.chatInput.text=""},e.prototype.onListTap=function(t){if("ChatItemMin2.imgTap"==t.target.name){var e=t.target.parent,i=e.data;if(this.oldItem==e)return void e.setSelected(!e.getSelected());this.oldItem&&this.oldItem.setSelected(!1),i.roleId!=Actor.ins().actorID&&(e.setSelected(!e.getSelected()),this.oldItem=e)}else if("ChatItemMin2.btn_chat"==t.target.name){if(!GFunc.checkSysOpen(33))return;var n=this.oldItem.data,i=new FriendData;i.id=n.roleId,i.roleName=n.roleName,openWin(FriendsWin,FriendsWin.page_chat,i)}else if("ChatItemMin2.btn_add"==t.target.name){if(!GFunc.checkSysOpen(33))return;var i=this.oldItem.data;FriendSys.ins().sendGuanzhu(i.roleId,i.roleName),this.oldItem.setSelected(!1)}else if("ChatItemMin2.btn_delete"==t.target.name){if(!GFunc.checkSysOpen(33))return;var i=this.oldItem.data;FriendSys.ins().sendDefriend(i.roleId,i.roleName),this.oldItem.setSelected(!1)}},e.prototype.onItemEmojiTap=function(t){var e=t.item;this.chatInput.text+="#emoji"+e.id+"#",this.closeEmoji()},e.prototype.onItemTap=function(t){var e=t.item;if(this.chatBase=e,!GFunc.isKuaFu()&&e)switch(e.subType){case ChatSubType.GuildBoss:GuildActSys.ins().sendGuildBossTeam(e.roleId);break;case ChatSubType.GuaJi:e.roleId!=Actor.ins().actorID?FbSys.ins().guajiData.getAssistCount()>0?FbSys.ins().sendGuaJiAssist(e.roleId,e.guanId,e.assistType):showTipsWarn(Lang.gj_str15):showTipsWarn(Lang.gj_str14);break;case ChatSubType.MoLong:if(e.roleId!=Actor.ins().actorID){var i=Cfg.getConfig(MolongFubenConfig,CondType.Equal,MolongFubenConfig.fbId,e.fbId);i.zslevel>Actor.ins().zsId?showTipsWarn("不符合等级要求，无法加入队伍。"):0==FbSys.ins().molongData.zhuzhanCount?showTipsWarn("助战次数不足，无法加入队伍。"):GFunc.checkGotoFuben()&&(FbSys.ins().guajiData.isGuanQia?openWin(WarnWin,"当前正在挑战天路，是否退出?",function(){FbSys.ins().sendMoLongGoToFuben(e.roleId)},this):FbSys.ins().sendMoLongGoToFuben(e.roleId))}else showTipsWarn("无法加入自己的队伍。");break;case ChatSubType.shenhunShenDian:if(e.roleId!=Actor.ins().actorID){var n=Cfg.getConfig(ShenghunFubenConfig,CondType.Equal,ShenghunFubenConfig.fbId,e.fbId);n.zslevel>Actor.ins().zsId?showTipsWarn(Lang.mol_str16):0==FbSys.ins().shendianData.zhuzhanCount?showTipsWarn(Lang.mol_str17):FbSys.ins().sendShenDianGoToFuben(e.roleId)}else showTipsWarn(Lang.mol_str18);break;case ChatSubType.ACT37_QQSH:var a=e,o=ActSys.ins().getActDataById(a.actId);if(o&&o.isOpenActivity()){var s=new ActData37_1Player(a.actId);s.job=a.job,s.sex=a.sex,s.name=a.roleName,s.actorid=a.roleId,s.serverid=a.serverid,s.zsLevel=a.zsLevel,s.power=a.power,s.guildName=a.guildName,openWin(Act37_1ZSLWWin,o,s),closeWin(this)}else showTipsWarn("活动已结束")}},e.prototype.updataGuaJiAssist=function(t){1==t?showtipsFail(Lang.gj_str18):2==t?showtipsFail(Lang.gj_str17):3==t&&showtipsFail(Lang.gj_str30)},e.prototype.onTap=function(t){return __awaiter(this,void 0,void 0,function(){var i,n,a,o,s,r;return __generator(this,function(u){switch(u.label){case 0:switch(i=t.currentTarget){case this.emojiBtn:return[3,1];case this.closeBtn0Bg:return[3,2];case this.sendBtn:return[3,3]}return[3,8];case 1:return this.emojiGroup.visible?this.closeEmoji():this.openEmoji(),[3,8];case 2:return closeWin(this),[3,8];case 3:if(""==this.chatInput.text.replace(/\s/g,""))return showtipsFail(Lang.chat_str11),[2];if(this.chatInput.text==Lang.chat_str12)return showtipsFail(Lang.chat_str11),[2];n=0,a=this.chatTypes[this.tab.selectedIndex],a==ChatType.KuaFu?n=1:a==ChatType.Guild?n=2:a==ChatType.World&&(n=5),o=void 0,u.label=4;case 4:return u.trys.push([4,6,,7]),[4,platform.checkStr(this.chatInput.text,1,n)];case 5:return o=u.sent(),[3,7];case 6:return s=u.sent(),showtipsFail(s),[2];case 7:if(r=this.types[e.cruIndex],r==Lang.chat_str18&&ChatSys.ins().canSpeak(ChatType.Guild))GuildSys.ins().sendGuildMessage(o),this.chatInput.text="",ChatSys.ins().updateSpeakTick();else if(r==Lang.chat_str16&&ChatSys.ins().canSpeak(ChatType.World)){if(this.chatInput.text.indexOf("@rp")>-1)return[2];if(this.chatInput.text.indexOf("@")>-1)return LogicSys.ins().sendGMCommad(this.chatInput.text),[2];ChatSys.ins().checkRepeatString(this.chatInput.text)&&(ChatSys.ins().sendChatInfo(ChatType.World,o),ChatSys.ins().lastSpeak=o,this.chatInput.text="",ChatSys.ins().updateSpeakTick())}else if(r==Lang.chat_str17&&ChatSys.ins().canSpeak(ChatType.Local))ChatSys.ins().checkRepeatString(this.chatInput.text)&&(ChatSys.ins().sendChatInfo(ChatType.Local,o),ChatSys.ins().lastSpeak=o,this.chatInput.text="",ChatSys.ins().updateSpeakTick());else if(r==Lang.chat_str19&&ChatSys.ins().canSpeak(ChatType.KuaFu))GFunc.checkSysOpen(130)&&ChatSys.ins().checkRepeatString(this.chatInput.text)&&(ChatSys.ins().sendChatInfo(ChatType.KuaFu,o),ChatSys.ins().lastSpeak=o,this.chatInput.text="",ChatSys.ins().updateSpeakTick());else if(r==Lang.chat_str22&&ChatSys.ins().canSpeak(ChatType.Xianlu)){if(GFunc.checkSysOpen(351)&&XianLuSys.ins().isJieYuan()&&ChatSys.ins().checkRepeatString(this.chatInput.text)){if(!XianLuSys.ins().isOnline())return showtipsFail("对方不在线"),[2];ChatSys.ins().sendChatInfo(ChatType.Xianlu,o),ChatSys.ins().lastSpeak=o,this.chatInput.text="",ChatSys.ins().updateSpeakTick()}}else""==r&&ChatSys.ins().canSpeak(ChatType.World)&&ChatSys.ins().checkRepeatString(this.chatInput.text)&&(ChatSys.ins().lastSpeak=this.chatInput.text,ChatSys.ins().updateSpeakTick());return[3,8];case 8:return[2]}})})},e.prototype.callBack=function(){this.chatInput.text=""},e.prototype.autoSetMsg=function(){this.chatInput.text=MathUtil.randomArray(GConst.chatMessage)},e.prototype.getSendBtn=function(){return this.sendBtn},e.prototype.getCloseBtn0Bg=function(){return this.closeBtn0Bg},e.cruIndex=0,e.oldChangle=0,__decorate([callDelay(100)],e.prototype,"refushBar",null),__decorate([callDelay(50)],e.prototype,"listBottom",null),__decorate([post()],e,"showChatWin",null),e}(BaseWinSingle);__reflect(ChatWin.prototype,"ChatWin"),window.ChatWin=ChatWin;var ShenPanTaoZhuangMainPanel=function(t){function e(){var e=t.call(this)||this;return e.redPointHead=[RoleWin,RolePanel,ShengLingWin],e}return __extends(e,t),e.prototype.setSkinName=function(){this.skinName="XunBaoMainPanelEUI"},e.prototype.setTabItem=function(){this.tab.itemRenderer=BaseTabBtn3},e.getTitle=function(){return"btz_zycs_sptz"},e.getTabTitle=function(){return"bqz_zycs_sptz"},e.getSysId=function(){return 336},e.panelNames=[ShenPanTaoZhuangPanel,FumoPanel],e}(BaseTabPanel);__reflect(ShenPanTaoZhuangMainPanel.prototype,"ShenPanTaoZhuangMainPanel"),window.ShenPanTaoZhuangMainPanel=ShenPanTaoZhuangMainPanel;var ComAttrItem=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.fm="%k：%v",e.nextFm="%v",e}return __extends(e,t),e.prototype.dataChanged=function(){if(this.data instanceof ComAttrData){if(this.curKV=addColorTF(AttrData.parse([this.data.curAttr],{fm:this.fm}).join("\n")),this.lbCurAttr&&(this.lbCurAttr.textFlow=addColorTF(AttrData.parse([this.data.curAttr],{fm:this.fm}).join("\n"))),this.data.isMax)this.lbNextAttr&&(this.lbNextAttr.text="",this.width=this.lbCurAttr.width),this.currentState="max";else{if(this.data.nextAttr){var t=AttrData.diffAttr([this.data.curAttr],[this.data.nextAttr]);this.nextV=addColorTF(AttrData.parse([t[0]],{fm:this.nextFm}).join("\n")),this.lbNextAttr&&(this.lbNextAttr.textFlow=addColorTF(AttrData.parse([t[0]],{fm:this.nextFm}).join("\n")),this.width=this.lbNextAttr.x+this.lbNextAttr.width)}else this.lbNextAttr&&(this.lbNextAttr.text="",this.width=this.lbCurAttr.width);this.currentState="normal"}this.imgUp&&(this.imgUp.visible=!this.data.isMax)}},e}(BaseItemRender);__reflect(ComAttrItem.prototype,"ComAttrItem"),window.ComAttrItem=ComAttrItem;var LHJ=function(t){function e(e){var i=t.call(this)||this;return i.dir=0,i.state=0,i.params=[],i.disObj=e,i.caller=new Caller,i.curRoller=new RollerCircle(e),i}return __extends(e,t),e.prototype.start=function(t,e,i,n,a){if(void 0===t&&(t=0),void 0===n&&(n=0),this.isRuning)console.log("请不要反复开启老虎机");else{a&&(this.caller.func=a.func,this.caller.obj=a.obj),this.dir=n,this.curRoller.setCompleteFunc(this.callback,this),this.isRuning=!0;var o=i/1e3,s=void 0,r=void 0;s=.4*o,r=.4*o;var u=.2*o,h=2*(e-t)/(3*s*s)*(0==n?1:-1),l=new RollerParam(h,s,0,t),p=new RollerParam(0,u,l.vt),c=new RollerParam(-h,r,p.vt);this.params=[l,p,c],this.startRoll(),egret.startTick(this.onEnterFrame,this)}},e.prototype.stop=function(){this.state=0,this.isRuning=!1,egret.stopTick(this.onEnterFrame,this),this.curRoller.reset(),this.caller.reset()},e.prototype.roll=function(t){var e=this.params[t],i=this.curRoller.getCurAngle();this.curRoller.setParam(i,e),this.curRoller.startMove(),this.dispatchEventWith(egret.Event.CHANGE,!1,this.state)},e.prototype.callback=function(){this.state++,this.startRoll()},e.prototype.startRoll=function(){this.state>=this.params.length?(this.caller.call(),this.stop(),this.dispatchEventWith(egret.Event.COMPLETE)):this.roll(this.state)},e.prototype.isEnd=function(){return!this.isRuning},e.prototype.onEnterFrame=function(t){return this.curRoller.updateTick(t),!1},e.UP=0,e.NOCHANGE=1,e.DOWN=2,e}(egret.EventDispatcher);__reflect(LHJ.prototype,"LHJ"),window.LHJ=LHJ;var CommonTipsWin=function(t){function e(){return t.call(this)||this}return __extends(e,t),e.prototype.initUI=function(){this.setSkinName(),t.prototype.initUI.call(this),this.layer=LayerMgr.Popup,this.addBg()},e.prototype.setSkinName=function(){this.skinName="CommonTipsWinEUI"},e.prototype.open=function(e){t.prototype.open.call(this),this.popupBaseData=e,this.addClickE(this,this.onClick),this.lbContent.textFlow=addColorTF(e.desc),this.btnOk.label=e.sureStr,this.closeBtn.label=e.canceStr},e.prototype.onClick=function(t){switch(t.target){case this.btnOk:this.popupBaseData.sureFun(),closeWin(this);break;case this.closeBtn:this.popupBaseData.cancelFun(),closeWin(this);break;case this.closeBtn0:closeWin(this);break;case this.colorCanvas:this.clickClose&&closeWin(this)}},e}(BaseWinSingle);__reflect(CommonTipsWin.prototype,"CommonTipsWin"),window.CommonTipsWin=CommonTipsWin;var DazaoRingStarConfig=function(){function t(){}return t}();__reflect(DazaoRingStarConfig.prototype,"DazaoRingStarConfig");var DevilCommonConfig=function(){function t(){}return t}();__reflect(DevilCommonConfig.prototype,"DevilCommonConfig");var DevilfbConfig=function(){function t(){}return t.zslevel="zslevel",t}();__reflect(DevilfbConfig.prototype,"DevilfbConfig");var DevilInspireConfig=function(){function t(){}return t}();__reflect(DevilInspireConfig.prototype,"DevilInspireConfig");var EnhanceAddDaRenConfig=function(){function t(){}return t}();__reflect(EnhanceAddDaRenConfig.prototype,"EnhanceAddDaRenConfig");var UseArg=function(){function t(){}return t}();__reflect(UseArg.prototype,"UseArg");var ShopSys=function(t){function e(){var e=t.call(this)||this;e.mallItemDatas=[],e.mallXGTHDatas=[],e.mallSVIPDatas=[],e.shopYongZheDatas=[],e.shopYongZhefirstRed=1,e.shopBossDatas=[],e.shopRongyuDatas=[],e.shopYunBiaoDatas=[],e.xingshiDatas=[],e.huangguanDatas=[],e.shopDatas=[[]],e.shopCampDatas=[],e.sysId=PackId.Shop,e.reg(2,e.patchMallItemBuy),e.reg(11,e.patchRongyuBuy),e.reg(12,e.patchRongyu),e.reg(16,e.patchBossBuy),e.reg(21,e.patchBoss),e.reg(17,e.patchMallSVIPBuy),e.reg(18,e.patchMallSVIP),e.reg(19,e.patchMallXGTHBuy),e.reg(20,e.patchMallXGTH),e.reg(22,e.patchXingshiBuy),e.reg(23,e.patchXingshi),e.reg(24,e.patchHuangguanBuy),e.reg(25,e.patchHuangguan),e.reg(26,e.patchYunBiaoBuy),e.reg(27,e.patchYunBiao),e.reg(28,e.patchYongZheBuy),e.reg(29,e.patchYongZhe),e.reg(30,e.patchCampBuy),e.reg(31,e.patchCamp);for(var i=Cfg.getConfigs(StoreItemConfig),n=0,a=i;n<a.length;n++){var o=a[n],s=new MallItemData;s.index=o.index,e.mallItemDatas.push(s)}return e.shopDatas=[e.mallItemDatas,e.shopBossDatas],e}return __extends(e,t),e.ins=function(){return t.getIns.call(this,e)},e.prototype.sendMallSVIPBuy=function(t,e){void 0===e&&(e=1);var i=this.getBytes(17);i.writeShort(t),i.writeShort(e),this.send(i)},e.prototype.patchMallSVIPBuy=function(t){var e=t.readShort(),i=t.readShort(),n=this.getMallSVIPByConfigIndex(e);return n?n.buyCount=i:console.log("61-17 数据不存在,index:"+e),n},e.prototype.patchMallSVIP=function(t){var e=t.readShort();this.mallSVIPDatas.length=e;for(var i=0;e>i;i++){var n=this.mallSVIPDatas[i]=new MallSVIPData;n.configIndex=i+1,n.buyCount=t.readShort()}},e.prototype.getMallSVIPByIndex=function(t){return this.mallSVIPDatas[t]},e.prototype.getMallSVIPByConfigIndex=function(t){return this.getMallSVIPByIndex(t-1)},e.prototype.sendMallXGTHBuy=function(t){var e=this.getBytes(19);e.writeShort(t),this.send(e)},e.prototype.patchMallXGTHBuy=function(t){var e=t.readShort(),i=t.readShort(),n=this.getMallXGTHByConfigIndex(e);return n?n.buyCount=i:console.log("61-19 数据不存在,index:"+e),RpFun.showShopXGTHRedPoint(),n},e.prototype.patchMallXGTH=function(t){var e=t.readShort();this.mallXGTHDatas.length=e;for(var i=0;e>i;i++){var n=this.mallXGTHDatas[i]=new MallXGTHData;n.configIndex=i+1,n.buyCount=t.readShort()}},e.prototype.getMallXGTHByIndex=function(t){return this.mallXGTHDatas[t]},e.prototype.getMallXGTHByConfigIndex=function(t){return this.getMallXGTHByIndex(t-1)},e.prototype.sendItemShopBuy=function(t){var e=this.getBytes(2);e.writeInt(t.length);for(var i=0;i<t.length;i++)e.writeInt(t[i][0]),e.writeInt(t[i][1]);this.send(e)},e.prototype.patchMallItemBuy=function(t){var e=t.readByte();e?closeWin(ShopGoodsWarn):showtipsFail(Lang.common_str12)},e.prototype.getMallItemByIndex=function(t){return this.mallItemDatas[t]},e.prototype.sendBossBuy=function(t,e){void 0===e&&(e=1);var i=this.getBytes(16);i.writeShort(t),i.writeShort(e),this.send(i)},e.prototype.patchBossBuy=function(t){var e=t.readShort(),i=t.readShort(),n=this.getBossDataByIndex(e);return n&&(n.buyCount=i),n},e.prototype.patchBoss=function(t){var e=t.readShort();this.shopBossDatas.length=e;for(var i=0;e>i;i++){var n=this.shopBossDatas[i]=new ShopBossData;n.configIndex=i+1,n.buyCount=t.readShort()}},e.prototype.getBossDataByIndex=function(t){return this.shopBossDatas[t-1]},e.prototype.sendRongyuBuy=function(t,e){var i=this.getBytes(11);i.writeInt(t),i.writeInt(e),this.send(i)},e.prototype.patchRongyuBuy=function(t){var e=(t.readBoolean(),t.readInt()),i=t.readInt(),n=this.getRongyuDataByConfigIndex(e);return n&&(n.buyCount=i),n},e.prototype.sendRongyuInfo=function(){this.sendBase(12)},e.prototype.patchRongyu=function(t){var e=t.readInt();this.shopRongyuDatas.length=e;for(var i=0;e>i;i++){var n=this.shopRongyuDatas[i]=new ShopRongyuData;n.configIndex=t.readInt(),n.buyCount=t.readInt()}},e.prototype.getRongyuDataByIndex=function(t){return this.shopRongyuDatas[t]},e.prototype.getRongyuDataByConfigIndex=function(t){return this.getRongyuDataByIndex(t-1)},e.prototype.sendXingshiBuy=function(t,e){void 0===e&&(e=1);var i=this.getBytes(22);i.writeShort(t),i.writeShort(e),this.send(i)},e.prototype.patchXingshiBuy=function(t){var e=t.readShort(),i=t.readShort(),n=this.getXingshiDataByConfigIndex(e);return n&&(n.buyCount=i),n},e.prototype.patchXingshi=function(t){var e=t.readShort();this.xingshiDatas.length=e;for(var i=0;e>i;i++){var n=this.xingshiDatas[i]=new MizangXingshiData;n.configIndex=i+1,n.buyCount=t.readShort()}},e.prototype.getXingshiDataByIndex=function(t){return this.xingshiDatas[t]},e.prototype.getXingshiDataByConfigIndex=function(t){return this.getXingshiDataByIndex(t-1)},e.prototype.sendHuangguanBuy=function(t,e){void 0===e&&(e=1);var i=this.getBytes(24);i.writeShort(t),i.writeShort(e),this.send(i)},e.prototype.patchHuangguanBuy=function(t){var e=t.readShort(),i=t.readShort(),n=this.getHuangguanDataByConfigIndex(e);return n&&(n.buyCount=i),n},e.prototype.patchHuangguan=function(t){var e=t.readShort();this.huangguanDatas.length=e;for(var i=0;e>i;i++){var n=this.huangguanDatas[i]=new MizangHuangguanData;n.configIndex=i+1,n.buyCount=t.readShort()}},e.prototype.getHuangguanDataByIndex=function(t){return this.huangguanDatas[t]},e.prototype.getHuangguanDataByConfigIndex=function(t){return this.getHuangguanDataByIndex(t-1)},e.prototype.getDayCountName=function(t){void 0===t&&(t=1);var e=["","每日限购","每周限购","终身限购"];return e[t]},e.prototype.getShopData=function(t){for(var e=0;e<this.shopDatas.length;e++)for(var i=this.shopDatas[e],n=0;n<i.length;n++){var a=i[n];if(a.getItemId()==t&&a.isFastBuy())return a}return null},e.prototype.sendYunBiaoBuy=function(t,e){void 0===e&&(e=1);var i=this.getBytes(26);i.writeShort(t),i.writeShort(e),this.send(i)},e.prototype.patchYunBiaoBuy=function(t){var e=t.readShort(),i=t.readShort(),n=this.getYunBiaoDataByConfigIndex(e);return n&&(n.buyCount=i),n},e.prototype.patchYunBiao=function(t){var e=t.readShort();this.shopYunBiaoDatas.length=e;for(var i=0;e>i;i++){var n=this.shopYunBiaoDatas[i]=new ShopYunBiaoData;n.configIndex=i+1,n.buyCount=t.readShort()}},e.prototype.getYunBiaoDataByIndex=function(t){return this.shopYunBiaoDatas[t]},e.prototype.getYunBiaoDataByConfigIndex=function(t){return this.getYunBiaoDataByIndex(t-1)},e.prototype.sendYongZheBuy=function(t,e,i){void 0===i&&(i=1);var n=this.getBytes(28);n.writeByte(t),n.writeShort(e),n.writeInt(i),this.send(n)},e.prototype.patchYongZheBuy=function(t){var e=t.readByte(),i=t.readShort(),n=t.readInt(),a=this.getYongZheData(e,i);return a&&(a.buyCount=n),RpFun.showYongZheShopRedPoint(),a},e.prototype.patchYongZhe=function(t){for(var e=t.readByte(),i=t.readShort(),n=0;i>n;n++){var a=this.getYongZheData(e,n+1);a.buyCount=t.readInt()}e=t.readByte(),i=t.readShort();for(var n=0;i>n;n++){var a=this.getYongZheData(e,n+1);a.buyCount=t.readInt()}RpFun.showYongZheShopRedPoint()},e.prototype.getYongZheData=function(t,e){var i=this.shopYongZheDatas[t-1];i||(i=this.shopYongZheDatas[t-1]=[]);var n=i[e-1];return n||(n=i[e-1]=new ShopYongZheData,n.type=t,n.configIndex=e),n},e.prototype.sendCampBuy=function(t,e){var i=this.getBytes(30);i.writeInt(t),i.writeInt(e),this.send(i)},e.prototype.patchCampBuy=function(t){var e=(t.readBoolean(),t.readInt()),i=t.readInt(),n=this.getCampDataByConfigIndex(e);return n&&(n.buyCount=i),n},e.prototype.patchCamp=function(t){var e=t.readInt();this.shopCampDatas.length=e;for(var i=0;e>i;i++){var n=this.shopCampDatas[i]=new ShopCampData;n.configIndex=t.readInt(),n.buyCount=t.readInt()}},e.prototype.getCampDataByIndex=function(t){return this.shopCampDatas[t]},e.prototype.getCampDataByConfigIndex=function(t){return this.getCampDataByIndex(t-1)},e}(BaseSys);__reflect(ShopSys.prototype,"ShopSys");var System;!function(t){t.shopSys=ShopSys.ins.bind(ShopSys)}(System||(System={})),window.ShopSys=ShopSys;var ShopWin=function(t){function e(){var e=t.call(this)||this;return e.winType=WinType.OverlayWin,e.addLsn(ShopYongZhePanel.openCheng,e.chengEvent),e}return __extends(e,t),e.prototype.chengEvent=function(t){var e="public_zycs_quxiao";e=t?"public_zycs_quxiao":"sc_zycs_x",this.closeBtn.icon=e},e.prototype.initUI=function(){t.prototype.initUI.call(this),this.closeBtn.icon="sc_zycs_x",this.eGroup.visible=!1},e.panelNames=[MallPanel,ShopPanel,MizangPanel,ShopYongZhePanel,ShopCampPanel],e}(BaseDuoPanelWin);__reflect(ShopWin.prototype,"ShopWin"),window.ShopWin=ShopWin;var BossWin=function(t){function e(){var e=t.call(this)||this;return e.winType=WinType.MainWin,e}return __extends(e,t),e.prototype.getEquipBossPanelBtnChallenge=function(){return this.getPanel(BossBenFuPanel).getEquipBossPanelBtnChallenge()},e.prototype.getJueWangPanel_BtnChallenge=function(){return this.getPanel(BossBenFuPanel).getJueWangPanel_BtnChallenge()},e.prototype.BossBenFuPanel_TabBtn=function(t){return this.getPanel(BossBenFuPanel).getTabBtn(t)},e.prototype.getKfBossPanel_BossItem=function(t){return this.getPanel(KfBossMainPanel).getKfBossPanel_BossItem(t)},e.panelNames=[BossBenFuPanel,KfBossMainPanel,ZhuZaiMainPanel],e}(BaseDuoPanelWin);__reflect(BossWin.prototype,"BossWin"),window.BossWin=BossWin;var BuyWin=function(t){function e(){return t.call(this)||this}return __extends(e,t),e.prototype.initUI=function(){t.prototype.initUI.call(this)},e.prototype.open=function(e){t.prototype.open.call(this,e),this.addClickE(this.add10Btn,this.onTap),this.addClickE(this.sub10Btn,this.onTap),this.addEvent(egret.TouchEvent.TOUCH_BEGIN,this.add10Btn,this.onAddBegin),this.addEvent(egret.TouchEvent.TOUCH_BEGIN,this.sub10Btn,this.onAddBegin),this.addEvent(egret.TouchEvent.TOUCH_END,this,this.onAddend),this.updateView()},e.prototype.updateView=function(){t.prototype.updateView.call(this);var e=Cfg.getItemCfg(this.buyData.itemId);this.itemIcon.data=GFunc.creatUnknown(e.id,this.buyData.itemCount),this.itemName.text=e.getName(),this.itemName.textColor=GConst.PZColor[e.quality]},e.prototype.updatePrice=function(){t.prototype.updatePrice.call(this),this.unitPrice.setType(this.buyData.consumeItemId),this.unitPrice.setPrice(this.buyData.price),this.allPrice.setType(this.buyData.consumeItemId),this.allPrice.setPrice(this.buyData.getTotalPrice(this.num))},e.prototype.AddNum=function(e){switch(t.prototype.AddNum.call(this,e),e){case this.sub10Btn:this.num-=10;break;case this.add10Btn:this.num<this.buyData.limitCount?this.num<this.buyData.maxBuyCount?this.num+=10:showtipsFail(Lang.shop_str18.replace("$name$",Cfg.getItemCfg(this.buyData.consumeItemId).getName())):(this.isAutoAdd=!1,Timer.ins().remove(this.AddNum,this),showtipsFail(Lang.shop_str2))}this.numLabel.text=this.num.toString(),this.updatePrice()},e}(BuyWinBase);__reflect(BuyWin.prototype,"BuyWin"),window.BuyWin=BuyWin;var XunbaoEquipConfig=function(){function t(){}return t}();__reflect(XunbaoEquipConfig.prototype,"XunbaoEquipConfig");var BuyData=function(){function t(){this.itemId=0,this.itemCount=1,this.buyFun=new Caller,this._limitCount=9999,this.consumeItemId=CurType.gold,this.price=0,this.count=1,this.desc=""}return Object.defineProperty(t.prototype,"limitCount",{get:function(){return this._limitCount},set:function(t){t>0&&(this._limitCount=t)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"maxBuyCount",{get:function(){var t=GFunc.getItemCount(this.consumeItemId),e=Math.floor(t/this.price);return e},enumerable:!0,configurable:!0}),t.prototype.getTotalPrice=function(t){return t*this.price},t.prototype.setBuyFun=function(t,e){void 0===e&&(e=null),this.buyFun.func=t,this.buyFun.obj=e},t}();__reflect(BuyData.prototype,"BuyData");var Act23_4Win=function(t){function e(){var e=t.call(this)||this;return e.winType=WinType.NormalWin,e.onPlace=ActOnPlace.TaQingActFisrtRecharge,e}return __extends(e,t),e.prototype.initUI=function(){t.prototype.initUI.call(this),this.addBg(),this.layer=LayerMgr.Popup},e.prototype.getParam=function(){var t=Cfg.getConfig(ActivityBtnConfig,1151);return[t,this.subIndex]},e.prototype.setSkinName=function(){this.skinName="BaseWinSkin3"},e}(ActBaseWin);__reflect(Act23_4Win.prototype,"Act23_4Win"),window.Act23_4Win=Act23_4Win;var ShopBossData=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return __extends(e,t),Object.defineProperty(e.prototype,"config",{get:function(){return this._config||(this._config=Cfg.getConfig(BossStoreConfig,this.configIndex))},enumerable:!0,configurable:!0}),e.prototype.getConsumeItem=function(){return GFunc.creatRewardDataById(this.config.needitem,this.config.needcount)},e.prototype.getItemSell=function(){return GFunc.creatRewardDataById(this.config.id,this.config.count)},e.prototype.getItemId=function(){return this.config.id},e.prototype.getPrice=function(){return this.config.needcount},e.prototype.canBuy=function(){return this.buyCount<this.config.daycount.count||0==this.config.daycount.count},e.prototype.getLeftBuyCount=function(){return 0==this.config.daycount.count?9999:this.config.daycount.count-this.buyCount},e.prototype.sendBuy=function(t,e){ShopSys.ins().sendBossBuy(t,e)},e.prototype.isFastBuy=function(){return 1==this.config.faseBuy},e}(ShopBaseData);__reflect(ShopBossData.prototype,"ShopBossData");var MaskRect=function(t){function e(){var e=t.call(this)||this;return e.w=10,e.h=10,e.dir=MoveDir.R_To_L,e}return __extends(e,t),e.prototype.setParam=function(t,e,i){void 0===i&&(i=MoveDir.R_To_L),this.w=t,this.h=e,i&&(this.dir=i),this.draw()},e.prototype.draw=function(){var t=this.graphics;t.clear(),t.beginFill(65535,1),this.dir==MoveDir.R_To_L?t.drawRect(this.w*(1-this.percent),0,this.w,this.h):this.dir==MoveDir.L_To_R?t.drawRect(this.w*this.percent,0,this.w,this.h):this.dir==MoveDir.U_To_D?t.drawRect(0,this.h*this.percent,this.w,this.h):this.dir==MoveDir.D_To_U&&t.drawRect(0,this.h*(1-this.percent),this.w,this.h),t.endFill()},Object.defineProperty(e.prototype,"width",{set:function(t){this.w=t,this.draw()},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"height",{set:function(t){this.h=t,this.draw()},enumerable:!0,configurable:!0}),e}(MaskBase);__reflect(MaskRect.prototype,"MaskRect");var FuBenWin=function(t){function e(){var e=t.call(this)||this;return e.redPointHead=[ExtCom],e.winType=WinType.MainWin,e}return __extends(e,t),e.prototype.getWanMoPanme_FightBtn=function(){return this.getPanel(FuBenDanRenPanel).getWanMoPanme_FightBtn()},e.prototype.getHeiAnPanel_FightBtn=function(){return this.getPanel(FuBenDanRenPanel).getHeiAnPanel_FightBtn()},e.prototype.getMeiRiFbPanel_Tab=function(){return this.getPanel(FuBenDanRenPanel).getTab(MeiRiFbPanel)},e.prototype.getFuBenEXPPanel_EmoTab=function(){return this.getPanel(FuBenEXPPanel).getTab(EmoPanel)},e.prototype.getFuBenEXPPanel_XueSeTab=function(){return this.getPanel(FuBenEXPPanel).getTab(XueSePanel)},e.prototype.getXueSePanel_EnterBtn=function(){return this.getPanel(FuBenEXPPanel).getXueSePanel_EnterBtn()},e.prototype.getEmoPanel_EnterBtn=function(){return this.getPanel(FuBenEXPPanel).getEmoPanel_EnterBtn()},e.prototype.getMeiRiFbPanel_BtnSend=function(t){return this.getPanel(FuBenDanRenPanel).getMeiRiFbPanel_BtnSend(t)},e.panelNames=[FuBenDanRenPanel,FuBenEXPPanel,FuBenDuoRenPanel],e}(BaseDuoPanelWin);__reflect(FuBenWin.prototype,"FuBenWin"),window.FuBenWin=FuBenWin;var BossAutoChallengeDataBase=function(){function t(){this.sysId=0}return t.prototype["goto"]=function(){var t=!1;return t},t.prototype.reset=function(){},Object.defineProperty(t.prototype,"isAuto",{get:function(){var t=ActSys.ins().getActDataById(ActId.ID_99500);return t?1==t.getBossState(this.sysId):!1},set:function(t){RechargeActSys.ins().sendZZTQBossAutoTZ(this.sysId,t?1:0)},enumerable:!0,configurable:!0}),t}();__reflect(BossAutoChallengeDataBase.prototype,"BossAutoChallengeDataBase");var BossHomeFbPanel=function(t){function e(){var e=t.call(this)||this;return e.initUI(),e}return __extends(e,t),e.prototype.initUI=function(){this.skinName="BossHomeFbPanelSkin",this.list.itemRenderer=BossHomeFbPanelFace2,this.list.dataProvider=this.arrayCollection=new eui.ArrayCollection,this.bossBloodComponent.visible=!1,this.listItemReward.itemRenderer=ItemBaseRewardNameBig,this.groupRawead.visible=!1,this.btnAtkBelongMC=new MC,this.btnAtkBelongMC.playFile(ResMgr.getEffName("tsgj"),-1),this.btnAtkBelongMC.x=this.btnAtkBelong.width/2,this.btnAtkBelongMC.y=this.btnAtkBelong.height/2+4,this.btnAtkBelong.addChild(this.btnAtkBelongMC)},e.prototype.open=function(){t.prototype.open.call(this),this.addLsn(FbSys.ins().patchFubenBelongerChange,this.onBelongerChange),this.addLsn(LogicSys.ins().patchChouhenUpdate,this.onUpdateAtkerList),this.addLsn(LogicSys.ins().patchChouhenClear,this.onUpdateAtkerList),this.addLsn(FbSys.ins().patchBossBlood,this.onBossBlood),this.addLsn(LogicSys.ins().patchMainRoleTargetChange,this.onMainRoleTargetChange),this.addLsn(LogicSys.ins().patchMainRoleTargetMasterChange,this.onMainRoleTargetChange),this.addLsn(LogicSys.ins().patchEntityDie,this.onEntityDie),this.addLsn(LogicSys.ins().patchEntityAlive,this.onEntityAlive),this.addLsn(FbSys.ins().patchBossHuDun,this.onDunChange),this.patchRelive(),this.addClickE(this,this.onClick),this.addItemTapE(this.list,this.onListClick),this.onBelongerChange(),this.onAtkerChange(),this.onUpdateAtkerList(),this.onUpdateBtnState(),this.onDunChange(),this.showReward(),FbSys.ins().bossBloodData.hp>0&&(this.bossBloodComponent.open(FbSys.ins().bossBloodData),this.onBossBlood())},e.prototype.patchRelive=function(){this.addLsn(FbSys.ins().patchReliveCd,this.onUpdateAtkerList)},e.prototype.updateTime=function(){this.onBelongerChange(),this.onUpdateAtkerList()},e.prototype.onBossBlood=function(){this.bossBloodComponent.isInit?this.bossBloodComponent.visible=!0:this.bossBloodComponent.open(FbSys.ins().bossBloodData),this.groupRawead.visible=this.bossBloodComponent.visible&&this.listItemReward.dataProvider.length>0,this.bossBloodComponent.updateHp(FbSys.ins().bossBloodData.hp),this.target.update()},e.prototype.onMainRoleTargetChange=function(t){this.onAtkerChange(t),this.onUpdateBtnState()},e.prototype.onEntityDie=function(t){t&&t.handle==LogicSys.ins().centerEntity.handle&&this.onUpdateBtnState()},e.prototype.onEntityAlive=function(t){t&&t.handle==LogicSys.ins().centerEntity.handle&&this.onUpdateBtnState()},e.prototype.onBelongerChange=function(){var t=FbSys.ins().guiShuTypeFuBenModel,e=t.belongerMasterHandle;if(e){this.labelNameBelong.textFlow=addColorTF(StrUtil.addColor(Lang.fb_str1+"：",16115290)+StrUtil.addColor(t.belongerName,16777215)),this.labelNameBelong.stroke=1;var i=ResMgr.getHeadIcon(t.belongerSex);this.imgFaceBelong.source=i;var n=LogicSys.ins().getMainRoleByMasterHandle(e);n?(this.hpBarBelong.maximum=n.getHpMax(),this.hpBarBelong.value=n.getHP()):(this.hpBarBelong.maximum=t.belongerHpMax,this.hpBarBelong.value=t.belongerHp),this.groupBelonger.visible=!0}else this.groupBelonger.visible=!1;this.btnQiangduo.visible=e!=Actor.ins().handle,this.onUpdateBtnState()},e.prototype.onAtkerChange=function(t){void 0===t&&(t=-1);var e;e=-1==t?LogicSys.ins().centerEntity.AI.getNextTarget():LogicSys.ins().getEntityByHandle(t),e?(this.target.data=e.masterHandle,this.onUpdateBtnState(),this.groupAtk.visible=this.target.visible=!0,this.target.playMovie()):(this.groupAtk.visible=this.target.visible=!1,this.target.stopMovie())
},e.prototype.onUpdateAtkerList=function(){var t=LogicSys.ins().centerEntity.AI.getChouhenHandleList();this.arrayCollection.source=t,this.arrayCollection.refresh(),this.groupBeAtk.visible=t.length>0},e.prototype.onUpdateBtnState=function(){var t=LogicSys.ins().centerEntity.AI.getNextTarget();this.btnAtkBoss.enabled=!0,this.btnAtkBelong.enabled=!0,this.btnAtkBelongMC.stop(),this.btnAtkBelongMC.visible=!1,LogicSys.ins().centerEntity.isDead()?(this.btnAtkBoss.enabled=!1,this.btnAtkBelong.enabled=!1,this.btnAtkBoss.label=Lang.fb_str2,this.btnAtkBelong.label=Lang.fb_str3):0==FbSys.ins().guiShuTypeFuBenModel.belongerMasterHandle?(this.btnAtkBoss.enabled=!1,this.btnAtkBelong.enabled=!1,this.btnAtkBoss.label=Lang.fb_str2,this.btnAtkBelong.label=Lang.fb_str3):LogicSys.ins().centerEntity.masterHandle!=FbSys.ins().guiShuTypeFuBenModel.belongerMasterHandle?t?t instanceof EntityRole?(this.btnAtkBoss.enabled=!0,this.btnAtkBelong.enabled=!1,this.btnAtkBoss.label=Lang.fb_str2,this.btnAtkBelong.label=Lang.fb_str4):t instanceof EntityMonster&&(this.btnAtkBoss.enabled=!1,this.btnAtkBelong.enabled=!0,this.btnAtkBoss.label=Lang.fb_str5,this.btnAtkBelong.label=Lang.fb_str3,this.btnAtkBelongMC.play(),this.btnAtkBelongMC.visible=!0):(this.btnAtkBoss.enabled=!0,this.btnAtkBelong.enabled=!0,this.btnAtkBoss.label=Lang.fb_str2,this.btnAtkBelong.label=Lang.fb_str3):t?t instanceof EntityRole?(this.btnAtkBoss.enabled=!0,this.btnAtkBelong.enabled=!1,this.btnAtkBoss.label=Lang.fb_str2,this.btnAtkBelong.label=Lang.fb_str6):t instanceof EntityMonster&&(this.btnAtkBoss.enabled=!1,this.btnAtkBelong.enabled=!1,this.btnAtkBoss.label=Lang.fb_str5,this.btnAtkBelong.label=Lang.fb_str6):(this.btnAtkBoss.enabled=!0,this.btnAtkBelong.enabled=!1,this.btnAtkBoss.label=Lang.fb_str2,this.btnAtkBelong.label=Lang.fb_str6),this.btnAtkBoss.validateNow(),this.btnAtkBelong.validateNow()},e.prototype.onListClick=function(t){var e=t.item;e&&(LogicSys.ins().atkTargetByMasterHandle(e),this.onAtkerChange())},e.prototype.onDunChange=function(){this.bossBloodComponent.updateDunChange(FbSys.ins().bossHuDun)},e.prototype.onClick=function(t){switch(t.target){case this.btnQiangduo:case this.btnAtkBelong:var e=FbSys.ins().guiShuTypeFuBenModel.belongerMasterHandle;if(0==e)return void showtipsFail(Lang.fb_str7);LogicSys.ins().centerEntity.masterHandle!=e?(LogicSys.ins().atkTargetByMasterHandle(e),this.onAtkerChange()):showtipsFail(Lang.fb_str8);break;case this.btnAtkBoss:var i=LogicSys.ins().getNearestMonsterById(LogicSys.ins().centerEntity.AI);LogicSys.ins().centerEntity.AI.addAtkMasterHandle(0),LogicSys.ins().centerEntity.AI.startAttack(i),this.onAtkerChange()}},e.prototype.showReward=function(){var t=Cfg.getConfig(BosshomeFubenConfig,CondType.Equal,BosshomeFubenConfig.fbId,FbSys.ins().fbId);t&&(this.listItemReward.dataProvider=new eui.ArrayCollection(t.firstReward))},e}(BasePanel);__reflect(BossHomeFbPanel.prototype,"BossHomeFbPanel"),window.BossHomeFbPanel=BossHomeFbPanel;var ActHeFuWin=function(t){function e(){var e=t.call(this)||this;return e.onPlace=ActOnPlace.ActHefu,e}return __extends(e,t),e.getTitle=function(){return"btz_zycs_hfhd"},e.getTabTitle=function(){return"hfhd_zycs_hfhd"},e}(ActWin);__reflect(ActHeFuWin.prototype,"ActHeFuWin"),window.ActHeFuWin=ActHeFuWin;var BossBloodComponentData=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.maxHp=100,e.curHp=100,e.bloodLength=1,e}return __extends(e,t),Object.defineProperty(e.prototype,"remainPart",{get:function(){var t=this.hpPerPart,e=Math.ceil(this.curHp/t);return e},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"hpPerPart",{get:function(){var t=this.maxHp/this.bloodLength;return t},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"curProg",{get:function(){var t=this.hpPerPart,e=this.remainPart,i=Number(((this.curHp-(e-1)*t)/t).toFixed(3));return i=100*i},enumerable:!0,configurable:!0}),e}(BaseEUI);__reflect(BossBloodComponentData.prototype,"BossBloodComponentData");var ActHFSYWin=function(t){function e(){var e=t.call(this)||this;return e.onPlace=ActOnPlace.ActHFSY,e}return __extends(e,t),e}(ActBaseWin);__reflect(ActHFSYWin.prototype,"ActHFSYWin"),window.ActHFSYWin=ActHFSYWin;var FbModelDevil=function(t){function e(){var e=t.call(this)||this;return e.count=0,e.buyCount=0,e.zhuihuiCount=0,e.userCount=0,e.score=0,e.guwuAttrData=new GuwuAttrData,e.countDown=0,e.countDownType=1,e.gotoCount=0,e.jinruCount=0,e.fbId=1,e}return __extends(e,t),e.prototype.parser=function(t){var e=(t.readBoolean(),t.readInt());this.SweepEndTick=Timer.ins().getTimer()+1e3*e,this.count=t.readShort(),this.buyCount=t.readShort(),this.fbId=t.readInt(),this.zhuihuiCount=t.readByte(),this.jinruCount=t.readInt(),this.initConfig()},e.prototype.initConfig=function(){this.commonConfig=Cfg.getConfig(DevilCommonConfig,1),this.fbConfig=Cfg.getConfig(DevilfbConfig,this.fbId)},e.prototype.getfreeCount=function(){return this.buyCount-this.count},Object.defineProperty(e.prototype,"leftCount",{get:function(){return this.commonConfig.count+this.buyCount-this.count+this.zhuihuiCount},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"canbuyCount",{get:function(){return VipSys.ins().getCurSVipConfig().devilsbuy-this.buyCount},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"leftCdTime",{get:function(){return Math.max(0,this.SweepEndTick-Timer.ins().getTimer())},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"result",{get:function(){return this.leftCount>0&&0==this.leftCdTime},enumerable:!0,configurable:!0}),e.prototype.isMax=function(){return Cfg.getConfig(DevilfbConfig,CondType.LessEqual,DevilfbConfig.zslevel,Actor.ins().zsId).id>=Cfg.getConfigLength(DevilfbConfig)},e.prototype.istixingguwu=function(){var t=this.guwuAttrData.ybCount+this.guwuAttrData.rmbCount;return 3>=t&&4>=t&&GFunc.isConsumeEnough(this.fbConfig.goldSp[0])},e}(FbModelBase);__reflect(FbModelDevil.prototype,"FbModelDevil");var ShopBossPanelItem=function(t){function e(){var e=t.call(this)||this;return e.skinName="ShopBossPanelItemEUI",e.setSkinPart("item",new ItemShop),e.setSkinPart("priceIcon",new PriceIcon),e}return __extends(e,t),e.prototype.dataChanged=function(){var t=this.data;this.btnBuy.name="btnBuy_"+this.itemIndex,this.labelName.textFlow=GFunc.getItemName1(t.config.id);var e=ShopSys.ins().getDayCountName(t.config.daycount.type);this.labelDesc.text=e+"："+t.buyCount+"/"+t.config.daycount.count,this.labelDesc.visible=0!=t.config.daycount.count;var i=t.canBuy();this.btnBuy.visible=i,this.labelMax.visible=!i,this.item.data=t.getItemSell(),this.priceIcon.setData(t.getConsumeItem())},e}(MallItemPanelItemBase);__reflect(ShopBossPanelItem.prototype,"ShopBossPanelItem"),window.ShopBossPanelItem=ShopBossPanelItem;var FbRewardDescWin=function(t){function e(){var e=t.call(this)||this;return e.rewardDesc="",e.firstReward=[],e.otherReward=[],e}return __extends(e,t),e.prototype.setSkinName=function(){this.skinName="FbRewardDescWinEUI",this.currentState="s1"},e.prototype.initUI=function(){this.setSkinName(),t.prototype.initUI.call(this),this.layer=LayerMgr.Popup,this.addBg(),this.firstlist.itemRenderer=ItemBaseReward,this.firstlist.dataProvider=this.firstlistData=new eui.ArrayCollection,this.otherlist.itemRenderer=ItemBaseReward,this.otherlist.dataProvider=this.otherlistData=new eui.ArrayCollection},e.prototype.open=function(e,i,n,a){void 0===i&&(i=[]),void 0===n&&(n=[]),void 0===a&&(a=0),t.prototype.open.call(this),this.rewardDesc=e,this.firstReward=i,this.otherReward=n,this.fbGroup=a,this.iniData()},e.prototype.iniData=function(){this.lbDesc.text=this.rewardDesc,this.firstlistData.source=this.firstReward,this.otherlistData.source=this.otherReward,this.imgFirstTitle.source=this.fbGroup==FbGroup.BossHome||this.fbGroup==FbGroup.KuaFuBoss?"klm_zycs_gsj":"llcz_zycs_bsj",this.imgOtherTitle.source="llcz_zycs_cyj"},e}(BaseWinSingle);__reflect(FbRewardDescWin.prototype,"FbRewardDescWin"),window.FbRewardDescWin=FbRewardDescWin;var ResultLostItem=function(t){function e(){var e=t.call(this)||this;return e.skinName="ResultLostItemSkin",e}return __extends(e,t),e.prototype.dataChanged=function(){var t=this.data;this.iconDisplay.source="shibai_zycs_"+t.icon},e}(BaseItemRender);__reflect(ResultLostItem.prototype,"ResultLostItem"),window.ResultLostItem=ResultLostItem;var ResultWinBossHome=function(t){function e(){var e=t.call(this)||this;return e.resultData=new FbResultBossHomeData,e}return __extends(e,t),e.prototype.initUI=function(){this.layer=LayerMgr.Popup,this.skinName="ResultWinBossHomeSkin",this.addBg(),this.listData=new eui.ArrayCollection,this.clickClose=!1,this.lbTips.visible=!1,this.bg.visible=!1;var t=MC.create(ResMgr.getEffName("win"),-1);this.titleGroup.addChild(t)},e.prototype.open=function(e){t.prototype.open.call(this),this.resultData=e,this.addClickE(this.closeBtn,this.onTap),this.list.itemRenderer=ItemBaseReward,this.list.dataProvider=this.listData,this.iniData()},e.prototype.iniData=function(){Timer.ins()["do"](0,1e3,5,this.updateLabel,this),SortUtil.sortOn(this.resultData.rewardItem,["sortType","quality"],[SortType.up,SortType.down]),this.listData.source=this.resultData.rewardItem,this.lbName.text=this.resultData.belongerName,this.imgHead.source=ResMgr.getHeadIcon(this.resultData.belongerSex),this.lbScore.text=this.resultData.bossScore.toString(),this.groupBossScore.visible=this.resultData.bossScore>0},e.prototype.close=function(){t.prototype.close.call(this),Timer.ins().removeAll(this)},e.prototype.escFubBen=function(){Timer.ins().remove(this.updateLabel,this),this.closeFunc&&(this.closeFunc(),this.closeFunc=null)},e.prototype.updateLabel=function(t){0>=t&&this.onCloseBtn(),this.closeBtn.label=Lang.common_str47.replace("$second$",t.toString())},e.prototype.onTap=function(t){switch(t.currentTarget){case this.closeBtn:this.onCloseBtn();break;case this.closeBtn0:this.sendExitFb(),closeWin(this)}},e.prototype.onCloseBtn=function(){this.sendExitFb(),this.escFubBen(),closeWin(this)},e.prototype.sendExitFb=function(){FbSys.ins().sendExitFb()},e}(BaseWinSingle);__reflect(ResultWinBossHome.prototype,"ResultWinBossHome"),window.ResultWinBossHome=ResultWinBossHome;var ResultWinKfBossLose=function(t){function e(){return t.call(this)||this}return __extends(e,t),e.prototype.initUI=function(){t.prototype.initUI.call(this),this.layer=LayerMgr.Popup,this.skinName="ResultWinKfBossLoseEUI",this.setSkinPart("resultCreateRole",new ResultCreateRole),this.addBg()},e.prototype.open=function(e){var i=this;t.prototype.open.call(this),this.resultData=e,this.updatePanel(),this.resultCreateRole.open(!1,function(){closeWin(i)},this)},e.prototype.close=function(){t.prototype.close.call(this),Timer.ins().remove(this.updateLabel,this),this.sendExitFb()},e.prototype.sendExitFb=function(){FbSys.ins().sendExitFb()},e.prototype.updatePanel=function(){var t=""==this.resultData.belongerName;this.labelW.visible=t,this.groupHead.visible=!t,this.lbName.text=this.resultData.belongerName,this.imgHead.source=ResMgr.getHeadIcon(this.resultData.belongerSex),Timer.ins()["do"](0,1e3,5,this.updateLabel,this)},e.prototype.updateLabel=function(t){0>=t&&closeWin(this),this.closeBtn.label=Lang.common_str48.replace("$second$",t.toString())},e}(BaseWinSingle);__reflect(ResultWinKfBossLose.prototype,"ResultWinKfBossLose"),window.ResultWinKfBossLose=ResultWinKfBossLose;var ActKFLCWin=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.onPlace=ActOnPlace.KFLC,e}return __extends(e,t),e.prototype.initUI=function(){t.prototype.initUI.call(this),this.addChangeE(this.tab,this.setGroup)},e.prototype.open=function(){for(var e=[],i=0;i<arguments.length;i++)e[i]=arguments[i];t.prototype.open.apply(this,e),this.setGroup()},e.prototype.setGroup=function(){this.eGroup.visible=1!=this.tab.selectedIndex,this.closeBtn.icon=1!=this.tab.selectedIndex?"public_zycs_quxiao":"svip_zycs_close"},e}(ActBaseWin);__reflect(ActKFLCWin.prototype,"ActKFLCWin"),window.ActKFLCWin=ActKFLCWin;var DamonBaseModel=function(){function t(){this.useId=0,this.moZhenId=0,this.level=0,this.levelExp=0,this.stageLevel=0,this.stageExp=0,this.actZhiZhengItemId=[]}return t.prototype.getHuanHuaDataById=function(t){return null},t.prototype.getHuanHuaDatas=function(){return[]},t.prototype.getYinJuDataById=function(t){return null},t.prototype.getYinJuDatas=function(){return[]},t.prototype.getMoZhenDataById=function(t){return null},t.prototype.getMoZhenDatas=function(){return[]},t.prototype.getMoZhenGroupNames=function(){return[]},t.prototype.getMoZhenDatasByGroupId=function(t){return[]},t.prototype.getLevelAttrDatas=function(){return[]},t.prototype.getStageAttrDatas=function(){return[]},t.prototype.getYinJiAttrDatas=function(t){return[]},t.prototype.getYinJiAttrDatasAll=function(){return[]},t.prototype.getMoZhenAttrDatas=function(t){return[]},t.prototype.getMoZhenDatasAll=function(){return[]},t.prototype.getHuanHuaAttrDatas=function(t){return[]},t.prototype.getHuanHuaAttrDatasAll=function(){return[]},t.prototype.getLevelPower=function(){return 0},t.prototype.getStagePower=function(){return 0},t.prototype.getYinJinPower=function(){return 0},t.prototype.getMoZhenPower=function(){return 0},t.prototype.getHuanHuaPower=function(){return 0},t.prototype.getLevelMaxExp=function(){return 0},t.prototype.getStage=function(){return 0},t.prototype.getStageMaxExp=function(){return 0},t.prototype.getStart=function(t){return 0},t.prototype.getStarPerLevel=function(){return 0},t.prototype.getStageitemid=function(){return 0},t.prototype.getStageitemExp=function(){return 0},t.prototype.getStageskills=function(){return[]},t.prototype.getLevelitemid=function(){return 0},t.prototype.getLevelitemExp=function(){return 0},t.prototype.getLevelskills=function(){return[]},t.prototype.getApperaenceId=function(){return 0},t.prototype.isMaxLv=function(){return!1},t.prototype.isMaxStage=function(){return!1},t.prototype.getMaxStage=function(){return 0},t.prototype.getZhiShengItemId=function(){return 0},t.prototype.isHuanHua=function(){return this.useId>t.S},t.prototype.actHasItem=function(){for(var t=!1,e=this.getZhiShengItemId(),i=Cfg.getItemCfg(e),n=0;n<this.actZhiZhengItemId.length;n++){var a=this.actZhiZhengItemId[n];if(Cfg.getItemCfg(a).type==i.type){t=!0;break}}return t},t.prototype.getCanUseZhiShengItemIds=function(){var t=[];return t},t.prototype.getActCanUseZhiShengItemIds=function(){for(var t=this.getCanUseZhiShengItemIds(),e=[],i=0;i<t.length;i++)this.actZhiZhengItemId.indexOf(t[i])>=0&&e.push(t[i]);return e},t.S=100,t}();__reflect(DamonBaseModel.prototype,"DamonBaseModel");var ShouHuWin=function(t){function e(){var e=t.call(this)||this;return e.winType=WinType.MainWin,e}return __extends(e,t),e.prototype.open=function(e,i){t.prototype.open.call(this,e,i),this.panelTabIndex=-1},e.prototype.getYongbingPanelBtnSend=function(){return this.getPanel(YongbingPanel).getYongbingLevelPanelBtnSend()},e.prototype.getYongbingStagePanelBtnSend=function(){return this.getPanel(YongbingPanel).getYongbingStagePanelBtnSend()},e.prototype.getgetYongbingStagePanel=function(){return this.getPanel(YongbingPanel).getYongbingStagePanel()},e.prototype.getYongbingStagePanelTabBtn=function(){return this.getgetYongbingStagePanel().getTab(YongbingStagePanel)},e.prototype.getDamonLevelPanel_BtnSend=function(){return this.getPanel(DamonPanel).getDamonLevelPanel_BtnSend()},e.prototype.getDamonStagePanel_BtnSend=function(){return this.getPanel(DamonPanel).getDamonStagePanel_BtnSend()},e.prototype.getDamonStagePanel_Tab=function(){return this.getPanel(DamonPanel).getTab(DamonStagePanel)},e.prototype.getShenmoLevelPanel_BtnSend=function(){return this.getPanel(ShenmoPanel).getShenmoLevelPanel_BtnSend()},e.prototype.getShenmoStagePanel_BtnSend=function(){return this.getPanel(ShenmoPanel).getShenmoStagePanel_BtnSend()},e.panelNames=[DamonPanel,YongbingPanel,ShenmoPanel],e}(BaseDuoPanelWin);__reflect(ShouHuWin.prototype,"ShouHuWin"),window.ShouHuWin=ShouHuWin;var XueSePanel=function(t){function e(){return t.call(this)||this}return __extends(e,t),e.prototype.setSkinName=function(){this.skinName="EmoPanelSkin"},e.prototype.initIcons=function(){this.sysName=Lang.fb_str20,this.model=FbSys.ins().xueSeModel,this.imgBg.source="xs_zycs_di_jpg"},e.prototype.sendEnterFb=function(){GFunc.checkGotoFuben()&&FbSys.ins().sendXueSeInto(),closeWin(FuBenWin)},e.prototype.sendBuyCount=function(){FbSys.ins().sendXueSeBugCount()},e.prototype.open=function(){this.addClickE(this.btnintofuben,this.onclick),this.addClickE(this.btnConsumeAdd,this.onclick),this.addClickE(this.btnSurplus,this.onclick),this.addLsn(FbSys.ins().patchXueSeData,this.onUpdate),this.addLsn(FbSys.ins().patchXueSeDataTimer,this.onUpdate),this.addLsn(BagSys.ins().patchItemChange,this.onUpdateConsumeCount),this.addLsn(RpSys.ins().patchRp,this.onUpdateRedPoint),FbSys.ins().sendXueSeData(),this.onUpdate(),this.onOpenTimeUpdate(),this.onUpdateRedPoint()},e.prototype.onUpdateRedPoint=function(t){void 0===t&&(t=null),(!t||t.check(EmoPanel))&&(this.btnintofuben.redPoint.visible=RpSys.ins().getData(FuBenWin,FuBenEXPPanel,e))},e.prototype.getDevilfbByLevel=function(){return Cfg.getConfig(XuesefbConfig,CondType.More,XuesefbConfig.zslevel,Actor.ins().zsId)},e.openCheck=function(){return GFunc.checkSysOpen(288)},e.prototype.getktzNmae=function(){return"xs_zycs_ktzxs"},e.getTitle=function(){return"btz_zycs_fb"},e.getTabTitle=function(){return"em_zycs_gn2"},e.getSysId=function(){return 288},e.prototype.getExpBtn=function(){return this.validateNow(),null},e.prototype.getEnterBtn=function(){return this.btnintofuben},e}(EmoPanel);__reflect(XueSePanel.prototype,"XueSePanel"),window.XueSePanel=XueSePanel;var ActPlace15Win=function(t){function e(){var e=t.call(this)||this;return e.onPlace=ActOnPlace.Actqingming,e}return __extends(e,t),e}(ActBaseWin);__reflect(ActPlace15Win.prototype,"ActPlace15Win"),window.ActPlace15Win=ActPlace15Win;var ActRankWin=function(t){function e(){var e=t.call(this)||this;return e.onPlace=ActOnPlace.openserver,e}return __extends(e,t),e.prototype.initUI=function(){t.prototype.initUI.call(this),this.addChangeE(this.tab,this.setGroup),this.setGroup()},e.prototype.setGroup=function(){this.eGroup.visible=this.tab.selectedIndex>1,this.closeBtn.icon=this.tab.selectedIndex>1?"public_zycs_quxiao":"svip_zycs_close"},e.prototype.getAutoIndexbyActId=function(t){if(-1!=t){for(var e=0;e<this.dataBtns.length;e++)if(this.dataBtns[e].id==t)return e;this.subIndex=-1}return 0},e}(ActBaseWin);__reflect(ActRankWin.prototype,"ActRankWin"),window.ActRankWin=ActRankWin;var ActRankWin2=function(t){function e(){var e=t.call(this)||this;return e.onPlace=ActOnPlace.CZCB,e}return __extends(e,t),e.prototype.getAutoIndexbyActId=function(t){if(-1!=t){for(var e=0;e<this.dataBtns.length;e++)if(this.dataBtns[e].id==t)return e;this.subIndex=-1}return 0},e.prototype.initUI=function(){t.prototype.initUI.call(this),this.addChangeE(this.tab,this.setGroup)},e.prototype.open=function(e){void 0===e&&(e=-1);for(var i=[],n=1;n<arguments.length;n++)i[n-1]=arguments[n];t.prototype.open.apply(this,[e].concat(i)),this.setGroup()},e.prototype.setGroup=function(){var t=this.viewStack.selectedChild;t instanceof ActPanel31_5||t instanceof ActPanel34_1?(this.closeBtn.icon="svip_zycs_close",this.eGroup.visible=!1):(this.closeBtn.icon="public_zycs_quxiao",this.eGroup.visible=!0)},e}(ActBaseWin);__reflect(ActRankWin2.prototype,"ActRankWin2"),window.ActRankWin2=ActRankWin2;var RpData=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return __extends(e,t),e.prototype.getValue=function(){return this.value},e.prototype.setValue=function(t){return this.value=t},e}(TreeData);__reflect(RpData.prototype,"RpData");var JJCWin=function(t){function e(){var e=t.call(this)||this;return e.redPointHead=[],e.winType=WinType.OverlayWin,e.subTabIndex=0,e.layer=LayerMgr.Main,e}return __extends(e,t),e.prototype.getJJCPanelNew_JJCItem=function(t){return this.getPanel(JJCSinglePanel).getJJCPanelNew_JJCItem(t)},e.panelNames=[JJCSinglePanel,JJCManyPanel,DartPanel,CampWarLinkPanel],e}(BaseDuoPanelWin);__reflect(JJCWin.prototype,"JJCWin"),window.JJCWin=JJCWin;var EntityPlayWin=function(t){function e(){var e=t.call(this)||this;return e.layer=LayerMgr.Popup,e.winType=WinType.NormalWin,e.skillConfig=new SkillsConfig,e.entityXYs=[new XY(-300,-300),new XY(0,0),new XY(-300,100)],e.monsterXYs=[new XY(-290,-290),new XY(0,10),new XY(-290,90)],e}return __extends(e,t),e.prototype.setSkinName=function(){this.skinName="ShenMoEntityPlayWinEUI"},e.prototype.initUI=function(){t.prototype.initUI.call(this),this.addBg(),this.target=new EntityBase,this.groupMiddle.addChild(this.target),this.entity=GFunc.createEntityUI(),this.groupMiddle.addChild(this.entity)},e.prototype.open=function(e,i,n){void 0===e&&(e=null),void 0===i&&(i=null),void 0===n&&(n=-1),t.prototype.open.call(this),this.skillConfig=e,this.data=i,this.updateView(),this.updatePos(),this.currentState=n==EntityType.BIANSHEN?"shenmo":"role"},e.prototype.close=function(){t.prototype.close.call(this),this.entity.reset(),Timer.ins().removeAll(this)},e.prototype.updatePos=function(){var t=1,e=this.entityXYs[t];this.entity.x=e.x,this.entity.y=e.y;var i=this.monsterXYs[t];this.target.x=i.x,this.target.y=i.y},e.prototype.updateView=function(){this.updateEntity(),this.updateData()},e.prototype.updateEntity=function(){},e.prototype.updateData=function(){this.lbName.text=this.skillConfig.name,this.lbDesc.textFlow=StrUtil.toTF(this.getDesc(this.skillConfig))},e.prototype.getDesc=function(t){var e=t.desc,i="",n=t.args,a=t.monargs,o=1;if(t.tarEff.length>0){var s=Cfg.getConfig(EffectsConfig,t.tarEff[0]);s.args.c>0&&(e=e.replace("{c}",(.01*s.args.c*o).toFixed(1)+"%"+i))}else n.a>=0&&(e=e.replace("{a1}",(n.a/100*o).toFixed(1)+"%"+i)),n.b>=0&&(e=e.replace("{b1}",n.b*o+""+i)),a.a>=0&&(e=e.replace("{a2}",(a.a/100*o).toFixed(1)+"%"+i)),a.b>=0&&(e=e.replace("{b2}",a.b*o+""+i));return ComUtil.IsPC?e:e.replace("          ","                   ")},e}(BaseWinSingle);__reflect(EntityPlayWin.prototype,"EntityPlayWin"),window.EntityPlayWin=EntityPlayWin;var ShenmoHuanHuaPanel=function(t){function e(){var e=t.call(this)||this;return e.setSkinPart("skillItem0",new ShenMoSkillItem),e.setSkinPart("skillItem1",new ShenMoSkillItem),e.groupSkill.visible=!0,e.imgBg.source="shenmo_zycs_bg1_jpg",e}return __extends(e,t),e.prototype.open=function(){t.prototype.open.call(this),this.addClickE(this.skillItem0,this.onClick),this.addClickE(this.skillItem1,this.onClick),this.addLsn(ShouHuNewSys.ins().patchShenmoHuanHuaUp,this.updateUp),this.addLsn(ShouHuNewSys.ins().patchShenmoHuanHua,this.updateHuanHua)},e.prototype.updataMC=function(){t.prototype.updataMC.call(this);var e=Cfg.getConfig(ShenmoHuanhuaBaseConfig,this.data.id);this.skillItem0.data=Cfg.getConfig(SkillsConfig,e.skillid[0]),this.skillItem1.data=Cfg.getConfig(SkillsConfig,e.skillid[1])},e.prototype.getModel=function(){var t=Cfg.getConfig(ShenmoHuanhuaBaseConfig,this.data.id).uibody;return[t]},e.prototype.onClick=function(t){switch(t.currentTarget){case this.btnSend:var e=(Actor.ins().job,GFunc.getItemDataRewardByJob(this.data.getConsume()));GFunc.checkConsumeEnough(e)&&ShouHuNewSys.ins().sendShenmoHuanHuaUp(this.data.id);break;case this.btnHuanHua:ShouHuNewSys.ins().sendShenmoHuanHua(this.data.id);break;case this.btnAttr:openWin(ComAttrWin,this.dataModel.getHuanHuaAttrDatasAll());break;case this.helpBtn:openWin(HelpWin,Cfg.getConfig(HelpInfoConfig,72).text);break;case this.skillItem0:case this.skillItem1:var i=t.currentTarget.data,n=new EntityBianshenData;n.bianshenId=this.data.id,n.type=EntityType.BIANSHEN,openWin(ShenMoEntityPlayWin,i,n)}},e.getTitle=function(){return"btz_zycs_sm"},e.getTabTitle=function(){return"bqz_zycs_smhh"},e.getSysId=function(){return 218},e}(DamonHuanHuaPanel);__reflect(ShenmoHuanHuaPanel.prototype,"ShenmoHuanHuaPanel"),window.ShenmoHuanHuaPanel=ShenmoHuanHuaPanel;var ActItem1_1=function(t){function e(){var e=t.call(this)||this;return e.mcBtnSend=new MC,e.skinName="ActItem1_1EUI",e.btnSend.redPoint.visible=!0,e.list.itemRenderer=ItemBaseRewardActivity,e.mcBtnSend.x=e.btnSend.width/2,e.mcBtnSend.y=e.btnSend.height/2,e.btnSend.addChildAt(e.mcBtnSend,e.btnSend.numChildren-1),e.addClickE(e,e.onClick),e}return __extends(e,t),e.prototype.onClick=function(t){switch(t.target){case this.btnSend:var e=this.data.config;ActSys.ins().sendReward(e.id,e.index);break;case this.btnLink:openWin(MeNeedLevelWin)}},e.prototype.dataChanged=function(){if(this.data instanceof ActDataItem1Dabiao){var t=this.data.config;this.lbDec.textFlow=addColorTF(this.getDec(this.data)),this.lbValue.textFlow=addColorTF(this.getValue(this.data)),this.list.dataProvider=new eui.ArrayCollection(t.rewards),this.btnLink.visible=!1,this.btnSend.visible=!1,this.imgYlq.visible=!1,this.data.status==ActRewardState.CanGet?(this.btnSend.visible=!0,this.mcBtnSend.playFile(ResMgr.getEffName("public_zycs_button01"),-1)):this.data.status==ActRewardState.Geted?(this.imgYlq.visible=!0,this.mcBtnSend.stop()):this.data.status==ActRewardState.NotReached&&(this.btnLink.visible=!0,this.mcBtnSend.stop())}},e.prototype.getDec=function(t){return Lang.act_str92.replace("$str$",addColor(""+GFunc.GetLvStrByLv(t.dabiao),65424))},e.prototype.getValue=function(t){return addColor(GFunc.overLength(t.yidabiao)+"/"+GFunc.overLength(t.dabiao),t.yidabiao<t.dabiao?2508416:46913)},e}(BaseItemRender);__reflect(ActItem1_1.prototype,"ActItem1_1"),window.ActItem1_1=ActItem1_1;var JJCRankPanel=function(t){function e(){var e=t.call(this)||this;return e.initUI(),e}return __extends(e,t),e.prototype.initUI=function(){var t=this;this.skinName="JJCRankPanelSkin",this.list.itemRenderer=JJCRankPanelItem,this.addBg(),this.addClickE(this.closeBtn,function(){return closeWin(t)})},e.prototype.open=function(){t.prototype.open.call(this),RankSys.ins().sendGetRankData(RankType.JJC),this.addLsn(RankSys.ins().patchRankData,this.update)},e.prototype.update=function(){this.list.dataProvider=new eui.ArrayCollection(RankSys.ins().getRankData(RankType.JJC).getFullDatalist())},e.getTitle=function(){return"btz_zycs_jjc"},e.getTabTitle=function(){return"bqz_zycs_ph"},e.getSysId=function(){return 256},e}(BaseWinSingle);__reflect(JJCRankPanel.prototype,"JJCRankPanel"),window.JJCRankPanel=JJCRankPanel;var ActItem1_28=function(t){function e(){var e=t.call(this)||this;return e.mcBtnSend=new MC,e.skinName="ActItem1_28EUI",e.btnLink.name="btnLink",e.btnSend.name="btnSend",e.btnSend.redPoint.visible=!0,e.list.itemRenderer=ItemBaseRewardActivity,e.mcBtnSend.x=e.btnSend.width/2,e.mcBtnSend.y=e.btnSend.height/2,e.btnSend.addChildAt(e.mcBtnSend,e.btnSend.numChildren-1),e}return __extends(e,t),e.prototype.dataChanged=function(){if(this.data instanceof ActDataItem1Dabiao){var t=this.data.config,e=Lang.act_str115.replace("$str$",addColor(""+this.data.dabiao,5767068));this.lbDec.textFlow=addColorTF(e),this.lbValue.textFlow=addColorTF(this.data.yidabiao+"/"+this.data.dabiao,this.data.yidabiao<this.data.dabiao?16712991:2199040),this.list.dataProvider=new eui.ArrayCollection(t.rewards),this.btnLink.visible=!1,this.btnSend.visible=!1,this.imgYlq.visible=!1,this.data.status==ActRewardState.CanGet?(this.btnSend.visible=!0,this.mcBtnSend.playFile(getEffName("public_zycs_button01"),-1)):this.data.status==ActRewardState.Geted?(this.imgYlq.visible=!0,this.mcBtnSend.stop()):this.data.status==ActRewardState.NotReached&&(this.btnLink.visible=!0,this.mcBtnSend.stop())}},e}(BaseItemRender);__reflect(ActItem1_28.prototype,"ActItem1_28"),window.ActItem1_28=ActItem1_28;var ActItem1_7=function(t){function e(){var e=t.call(this)||this;return e.mcBtnSend=new MC,e.skinName="ActItem1_7EUI",e.btnSend.redPoint.visible=!0,e.list.itemRenderer=ItemBaseRewardActivity,e.mcBtnSend.x=e.btnSend.width/2,e.mcBtnSend.y=e.btnSend.height/2,e.btnSend.addChildAt(e.mcBtnSend,e.btnSend.numChildren-1),e.addClickE(e,e.onClick),e}return __extends(e,t),e.prototype.onClick=function(t){switch(t.target){case this.btnLink:openWin(RechargeWin);break;case this.btnSend:var e=this.data,i=e.config;ActSys.ins().sendReward(i.id,i.index)}},e.prototype.dataChanged=function(){if(this.data instanceof ActDataItem1Dabiao){var t=this.data.config,e=Lang.act_str84.replace("$str$",addColor(""+this.data.dabiao+Lang.common_zs,5767068));this.lbDec.textFlow=addColorTF(e),this.lbValue.textFlow=addColorTF(this.data.yidabiao+"/"+this.data.dabiao,this.data.yidabiao<this.data.dabiao?13967392:46913),this.list.dataProvider=new eui.ArrayCollection(t.rewards),this.btnLink.visible=!1,this.btnSend.visible=!1,this.imgYlq.visible=!1,this.data.status==ActRewardState.CanGet?(this.btnSend.visible=!0,this.mcBtnSend.playFile(ResMgr.getEffName("public_zycs_button01"),-1)):this.data.status==ActRewardState.Geted?(this.imgYlq.visible=!0,this.mcBtnSend.stop()):this.data.status==ActRewardState.NotReached&&(this.btnLink.visible=!0,this.mcBtnSend.stop())}},e}(BaseItemRender);__reflect(ActItem1_7.prototype,"ActItem1_7"),window.ActItem1_7=ActItem1_7;var ActItem11_1=function(t){function e(){var e=t.call(this)||this;return e.skinName="ActItem11_1EUI",e}return __extends(e,t),e.prototype.dataChanged=function(){if(this.data instanceof ActDataItem){var t=this.data.config;this.imgName.source="hjds_zycs_t"+t.index,this.redPoint.visible=this.data.status==ActRewardState.CanGet}},e}(BaseItemRender);__reflect(ActItem11_1.prototype,"ActItem11_1"),window.ActItem11_1=ActItem11_1;var YongbingHuanHuaPanel=function(t){function e(){var e=t.call(this)||this;return e.imgBg.source="yb_zycs_bg1_jpg",e}return __extends(e,t),e.prototype.open=function(){t.prototype.open.call(this),this.addLsn(ShouHuNewSys.ins().patchYongbingHuanHuaUp,this.updateUp),this.addLsn(ShouHuNewSys.ins().patchYongbingHuanHua,this.updateHuanHua)},e.prototype.getModel=function(){var t=Cfg.getConfig(YongbingHuanhuaBaseConfig,this.data.id).uibody;return[t]},e.prototype.onClick=function(t){switch(t.currentTarget){case this.btnSend:var e=(Actor.ins().job,GFunc.getItemDataRewardByJob(this.data.getConsume()));GFunc.checkConsumeEnough(e)&&ShouHuNewSys.ins().sendYongbingHuanHuaUp(this.data.id);break;case this.btnHuanHua:ShouHuNewSys.ins().sendYongbingHuanHua(this.data.id);break;case this.btnAttr:openWin(ComAttrWin,this.dataModel.getHuanHuaAttrDatasAll());break;case this.helpBtn:openWin(HelpWin,Cfg.getConfig(HelpInfoConfig,61).text)}},e.getTitle=function(){return"btz_zycs_yb"},e.getTabTitle=function(){return"bqz_zycs_ybhh"},e.getSysId=function(){return 217},e}(DamonHuanHuaPanel);__reflect(YongbingHuanHuaPanel.prototype,"YongbingHuanHuaPanel"),window.YongbingHuanHuaPanel=YongbingHuanHuaPanel;var ActItem36_1SH=function(t){function e(){var e=t.call(this)||this;return e.skinName="ActItem36_1SHEUI",e}return __extends(e,t),e.prototype.dataChanged=function(){var t=this.data;this.imgHead.source=ResMgr.getHeadIcon(t.sex),this.lbName.text=t.name,this.lbValue.textFlow=addColorTF(Lang.act_str182+"："+addColor(t.sendValue,2199040)),this.lbTiaoJian.textFlow=addColorTF(""+Lang.act_str185.replace("$count$",""+addColor(t.activityType36Config.shouhuneed,2199040))),this.currentState=t.hasPlayer()?"hasPlayer":"noPlayer"},e}(BaseItemRender);__reflect(ActItem36_1SH.prototype,"ActItem36_1SH"),window.ActItem36_1SH=ActItem36_1SH;var ActItem37_1_1=function(t){function e(){var e=t.call(this)||this;return e.setSkinName(),e}return __extends(e,t),e.prototype.setSkinName=function(){this.skinName="ActItem37_1_1EUI",this.addClick()},e.prototype.addClick=function(){this.addClickE(this.btnSend,this.onClick)},e.prototype.onClick=function(){var t=this.data,e=ActSys.ins().getActDataById(t.actId);e.getActOpenState()==ActOpenState.Jiesuan?showtipsFail(Lang.act_str7):openWin(Act37_1ZSLWWin,e,t)},e.prototype.dataChanged=function(){var t=this.data;this.imgHead.source=t.hasPlayer()?ResMgr.getHeadIcon(t.sex):"jsdd_zycs_wh",this.lbName.text=t.hasPlayer()?t.name:Lang.act_str87,this.currentState=t.hasPlayer()?"hasPlayer":"noPlayer"},e}(BaseItemRender);__reflect(ActItem37_1_1.prototype,"ActItem37_1_1"),window.ActItem37_1_1=ActItem37_1_1;var LadderAwardDuanPanel=function(t){function e(){var e=t.call(this)||this;
return e.skinName="LadderAwardDuanPanelEUI",e.listRank.itemRenderer=LadderAwardDuanItem,e.listRank.dataProvider=e.listRankData=new eui.ArrayCollection,e}return __extends(e,t),e.prototype.open=function(){t.prototype.open.call(this),this.updatePanel()},e.prototype.updatePanel=function(){var t=Cfg.getConfig(TianTiConstConfig).danAward.concat();this.listRankData.source=t.reverse()},e.getSysId=function(){return 253},e.getTitle=function(){return"dfwz_zycs_dwjl"},e.getTabTitle=function(){return Lang.jjc_str9},e}(BasePanel);__reflect(LadderAwardDuanPanel.prototype,"LadderAwardDuanPanel"),window.LadderAwardDuanPanel=LadderAwardDuanPanel;var LadderAwardRankPanel=function(t){function e(){var e=t.call(this)||this;return e.skinName="LadderAwardRankPanelEUI",e.listRank.itemRenderer=LadderAwardRankItem2,e.listRank.dataProvider=e.listRankArr=new eui.ArrayCollection,e}return __extends(e,t),e.prototype.open=function(){t.prototype.open.call(this),this.updatePanel()},e.prototype.updatePanel=function(){this.listRankArr.source=Cfg.getConfigs(TianTiRankAwardConfig)},e.getSysId=function(){return 253},e.getTitle=function(){return"dfwz_zycs_phjl"},e.getTabTitle=function(){return Lang.jjc_str8},e}(BasePanel);__reflect(LadderAwardRankPanel.prototype,"LadderAwardRankPanel"),window.LadderAwardRankPanel=LadderAwardRankPanel;var MoverBase=function(){function t(t){this.fromXY=new XY,this.toXY=new XY,this.curXY=new XY,this.startTick=0,this.endTick=0,this.distance=0,this.caller=new Caller,this.disObj=t}return t.prototype.destruct=function(){this.reset()},t.prototype.reset=function(){this.stopMove(),this.setCompleteFunc(null,null)},t.prototype.setCompleteFunc=function(t,e){this.caller.func=t,this.caller.obj=e},t.prototype.moveTo=function(t,e,i){if(MathUtil.isSamePoint(e,this.disObj))this.toXY.x=e.x,this.toXY.y=e.y,this.toTarget();else{this.fromXY.x=this.disObj.x,this.fromXY.y=this.disObj.y,this.toXY.x=e.x,this.toXY.y=e.y,this.startTick=t,this.endTick=this.startTick+i;var n=e.x-this.fromXY.x,a=e.y-this.fromXY.y;this.distance=Math.sqrt(n*n+a*a),this.updateMoveParam(),this.updateXY(t)}},t.prototype.updateTick=function(t){0!=this.startTick&&(t>=this.endTick?this.toTarget():this.updateXY(t))},t.prototype.updateMoveParam=function(){},t.prototype.updateXY=function(t){},t.prototype.toTarget=function(){this.stopMove(),this.curXY.x=this.toXY.x,this.curXY.y=this.toXY.y,this.disObj&&(this.disObj.x=this.toXY.x,this.disObj.y=this.toXY.y),this.caller.call()},t.prototype.stopMove=function(){this.startTick=0},Object.defineProperty(t.prototype,"moving",{get:function(){return this.startTick>0},enumerable:!0,configurable:!0}),t.prototype.getToXY=function(){return this.toXY},t.prototype.getCurXY=function(){return this.curXY},Object.defineProperty(t.prototype,"totleTime",{get:function(){return this.endTick-this.startTick},enumerable:!0,configurable:!0}),t}();__reflect(MoverBase.prototype,"MoverBase");var LadderRankPanel=function(t){function e(){var e=t.call(this)||this;return e.skinName="LadderRankPanelEUI",e.list.itemRenderer=LadderRankItem,e.list.dataProvider=e.listArr=new eui.ArrayCollection,e}return __extends(e,t),e.prototype.open=function(){t.prototype.open.call(this),this.addLsn(LadderSys.ins().patchRankInfoList,this.updatePanel),this.updatePanel()},e.prototype.updatePanel=function(){this.listArr.source=LadderSys.ins().currRankDatas,this.icon.source="ladder_zycs_rank"+LadderSys.ins().level+"a_png",this.duanBmp.font=LadderSys.ins().level%2?"ladderyellow_1_fnt":"ladderwhite_1_fnt",this.duanBmp.text=""+LadderSys.ins().getCurrTianTiDanConfig().showDan,this.rankTxt.text=""+Lang.fb_str117+LadderSys.ins().upWeekRank,this.point.text=Lang.fb_str144.replace("$count$",""+LadderSys.ins().winNum)},e.getTitle=function(){return"btz_zycs_ttpm"},e.getTabTitle=function(){return"bqz_zycs_dqpm"},e}(BasePanel);__reflect(LadderRankPanel.prototype,"LadderRankPanel"),window.LadderRankPanel=LadderRankPanel;var LadderRankPanel2=function(t){function e(){var e=t.call(this)||this;return e.skinName="LadderRankPanel2EUI",e.list.itemRenderer=LadderRankItem,e.list.dataProvider=e.listArr=new eui.ArrayCollection,e}return __extends(e,t),e.prototype.open=function(){t.prototype.open.call(this),this.addLsn(LadderSys.ins().patchRankInfoList,this.updatePanel),this.updatePanel()},e.prototype.updatePanel=function(){this.listArr.source=LadderSys.ins().lastRankDatas},e.getTitle=function(){return"btz_zycs_ttpm"},e.getTabTitle=function(){return"bqz_zycs_szpm"},e}(BasePanel);__reflect(LadderRankPanel2.prototype,"LadderRankPanel2"),window.LadderRankPanel2=LadderRankPanel2;var BuffWin=function(t){function e(){var e=t.call(this)||this;return e.winType=WinType.OverlayWin,e}return __extends(e,t),e.panelNames=[BuffPanel],e}(BaseWinAutoTab);__reflect(BuffWin.prototype,"BuffWin"),window.BuffWin=BuffWin;var BuffResidentData=function(){function t(){this.type=0,this.vipLevel=0,this.sort=0}return t.prototype.getDesc=function(){var t=addColor("%k",15129784)+"+"+addColor("%v",32047),e=AttrData.parse(this.config.levelAttr,{fm:t}).join("\n");return e},t.prototype.getName=function(){return"VIP"+this.config.lv},t.prototype.getIcon=function(){return ResMgr.getBuffIcon(this.isAct?"buff_zcsy_iconv"+this.vipLevel:"buff_zcsy_iconv"+this.vipLevel+"a")},t.prototype.getTime=function(){return Lang.common_str87},Object.defineProperty(t.prototype,"isAct",{get:function(){return Actor.ins().sVipLv>=this.vipLevel},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"config",{get:function(){return this._config||(this._config=Cfg.getConfig(SVipConfig,this.vipLevel))},enumerable:!0,configurable:!0}),t.prototype.tiaozhuan=function(){openWin(VipWin)},t}();__reflect(BuffResidentData.prototype,"BuffResidentData");var ActData1_17=function(t){function e(){var e=t.call(this)||this;return e.score=0,e}return __extends(e,t),e.prototype.parserScore=function(t){this.score=t.readInt()},e.prototype.getCurConfig=function(){var t,e=this.getConfigs();for(var i in e){if(t=e[i],this.getRewardStateById(e[i].index)==ActRewardState.CanGet)break;if(this.getRewardStateById(e[i].index)==ActRewardState.NotReached)break}return t},e.prototype.getActDataPreview=function(){var t=[],e=this.getConfigs();for(var i in e)t.push(new ActDataPreview1_17(e[i],this.getRewardStateById(e[i].index),this.score));return SortUtil.sortOn(t,["state","needScore"],[SortType.up,SortType.up]),t},Object.defineProperty(e.prototype,"dabiao",{get:function(){return this.score},enumerable:!0,configurable:!0}),e}(ActData1_1);__reflect(ActData1_17.prototype,"ActData1_17");var ActDataPreview1_17=function(){function t(t,e,i){this.score=0,this.dec="",this.config=t,this.state=e,this.score=i}return Object.defineProperty(t.prototype,"needScore",{get:function(){return this.config.condition},enumerable:!0,configurable:!0}),t}();__reflect(ActDataPreview1_17.prototype,"ActDataPreview1_17"),window.ActData1_17=ActData1_17;var ActData1_3=function(t){function e(){return t.call(this)||this}return __extends(e,t),Object.defineProperty(e.prototype,"dabiao",{get:function(){return Actor.ins().power},enumerable:!0,configurable:!0}),e}(ActData1_1);__reflect(ActData1_3.prototype,"ActData1_3"),window.ActData1_3=ActData1_3;var ActData1_7=function(t){function e(){return t.call(this)||this}return __extends(e,t),Object.defineProperty(e.prototype,"dabiao",{get:function(){return this._commonData},enumerable:!0,configurable:!0}),e}(ActData1_1);__reflect(ActData1_7.prototype,"ActData1_7"),window.ActData1_7=ActData1_7;var SkillPassivityItem=function(t){function e(){var e=t.call(this)||this;return e.skinName="SkillPassivityItemEUI",e.touchEnabled=!1,e.imgKjh.visible=!1,e.imgKsj.visible=!1,e.upMc=GFunc.playUIMovie("jljn",0,0,e.groupMc,-1,function(){e.upMc.touchEnabled=!1}),e.showRedPoint(!1),e}return __extends(e,t),e.prototype.dataChanged=function(){if(this.data instanceof SkillPassivityData){this.imgIcon.source=ResMgr.getSkillPassivityItemName(this.data.id,this.data.level>0),this.lbLv.text=this.data.isMax()?Lang.common_man:""+this.data.level;var t=(e=RpSys.ins()).getData.apply(e,SkillSys.ins().getSkillPassivityRedPointKey(this.data));this.showRedPoint(t),t?(this.imgKjh.visible=0==this.data.level,this.imgKsj.visible=this.data.level>0):(this.imgKjh.visible=!1,this.imgKsj.visible=!1)}var e},e.prototype.showRedPoint=function(t){this.redPoint.visible=t,this.upMc.visible=t},e}(BaseItemRender);__reflect(SkillPassivityItem.prototype,"SkillPassivityItem"),window.SkillPassivityItem=SkillPassivityItem;var SkillPassivityUpWin=function(t){function e(){return t.call(this)||this}return __extends(e,t),e.prototype.setSkinName=function(){this.skinName="SkillPassivityUpWinEUI"},e.prototype.initUI=function(){t.prototype.initUI.call(this),this.layer=LayerMgr.Popup,this.addBg(),this.setSkinPart("item",new SkillPassivityItem)},e.prototype.open=function(e){t.prototype.open.call(this),this.data=e,this.addClickE(this.btnSend,this.onTap),this.addLsn(SkillSys.ins().patchSkillPassivityUp,this.upatePanel),this.upatePanel()},e.prototype.upatePanel=function(){this.item.data=this.data,this.lbName.text=this.data.getConfig().name+" Lv."+this.data.level,this.power=Lang.replaceEnum("战力: %s",this.data.getPower()),this.groupUp.visible=!this.data.isMax(),this.lbCur.text=this.data.getConfig().skinname,this.lbCur.textColor=8593920,this.lbNext.text=this.data.getNextConfig().skinname;var t=SkillSys.ins().isSkillPassivityUp(this.data);if(this.btnSend.enabled=t,this.btnSend.label=this.data.level>0?Lang.btn_sjie:Lang.btn_jh,this.needGroup.visible=!1,15!=this.data.getConfig().typeUp){var e=this.data.level>0?Lang.skill_str27:Lang.skill_str26;e+=Lang.skill_str28[this.data.getConfig().typeUp]+SkillSys.ins().getSkillPassivityLevelStr(this.data),this.lbAct.text=t?"":e}else{this.lbAct.text="",this.needGroup.visible=!0;var i=t?1834881:15733780,n=this.data.getConfig().item.id,a=this.data.getConfig().item.count,o=Cfg.getItemCfg(n),s=BagSys.ins().getItemCount(o.id);this.lbNum.textFlow=addColorTF(addColor(s+"/"+a,i)),this.consumeIcon.source=ResMgr.getItemIcon(o.getIcon())}},e.prototype.onTap=function(t){if(15==this.data.getConfig().typeUp&&this.data.level<=0){var e=this.data.getConfig().item.id;XianLuSys.ins().sendUseRing(e)}else SkillSys.ins().sendSkillPassivityUp(this.data.id);GFunc.playUIMovie("public_qxt",108,103,this.group,1)},e}(BaseWinSingle);__reflect(SkillPassivityUpWin.prototype,"SkillPassivityUpWin"),window.SkillPassivityUpWin=SkillPassivityUpWin;var SkillWin=function(t){function e(){var e=t.call(this)||this;return e.winType=WinType.MainWin,e}return __extends(e,t),e.prototype.getSkillIcon=function(t){return this.getPanel(SkillMainPanel).getSkillIcon(t)},e.prototype.getActBtn=function(){return this.getPanel(SkillMainPanel).getActBtn()},e.prototype.getCloseBtn=function(){return this.closeBtn0},e.prototype.getBtnOneKey=function(){return this.getPanel(SkillMainPanel).getBtnOneKey()},e.prototype.getHunqiPanelItem=function(t){return this.getPanel(HunqiPanel).getHunqiPanelItem(t)},e.panelNames=[SkillMainPanel,HunqiPanel],e}(BaseDuoPanelWin);__reflect(SkillWin.prototype,"SkillWin"),window.SkillWin=SkillWin;var SqXyActTipsWin=function(t){function e(){var e=t.call(this)||this;return e.layer=LayerMgr.Popup,e.skinName="SqXyActTipsWinEUI",e}return __extends(e,t),e.prototype.open=function(e,i,n){t.prototype.open.call(this),this.closeFun=n,this.updatePanel(e,i),this.addClickE(this,this.onTap)},e.prototype.close=function(){t.prototype.close.call(this),this.mc&&this.mc.reset()},e.prototype.onTap=function(t){this.closeFun&&this.closeFun(),closeWin(this)},e.prototype.updatePanel=function(t,e){var i="",n=Actor.ins().job,a=t.id>9?""+t.id:"0"+t.id;if(this.imgTitle.source="shenqi_zycs_xwg",this.groupEntity.removeChildren(),216==e){this.imgTitle.source="public_zycs_x1";var o=Cfg.getConfig(DamonHuanhuaBaseConfig,t.id).uibody,s=MC.createCenterGruop(o,-1);this.groupEntity.addChild(s)}else if(217==e){this.imgTitle.source="public_zycs_x3";var o=Cfg.getConfig(YongbingHuanhuaBaseConfig,t.id).uibody,s=MC.createCenterGruop(o,-1);this.groupEntity.addChild(s)}else if(218==e){this.imgTitle.source="public_zycs_x2";var o=Cfg.getConfig(ShenmoHuanhuaBaseConfig,t.id).uibody,s=MC.createCenterGruop(o,-1);this.addChild(s)}else if(212==e){var r=Cfg.getConfig(SzHuanhuaBaseConfig,t.id).uibody[Actor.ins().sex],s=MC.createCenterGruop(r,-1);this.addChild(s)}else{this.mc=this.mc||new MC,this.groupEntity.addChild(this.mc);var u="";switch(e){case 210:u=Cfg.getConfig(WeaponAppearanceConfig,t.getApperaenceId(n)).appearance,u=ResMgr.getWeaponUIEFFResource(u),i="shenqi_zycs_"+n+a;break;case 211:u=Cfg.getConfig(WingAppearanceConfig,t.getApperaenceId(n)).appearance,u=ResMgr.getWingUIEFFResource(u),i="chibang_zycs_"+n+a,this.groupEntity.y=544;break;case 213:var h=Cfg.getConfig(MeilinAppearanceConfig,t.getApperaenceId()).appearance;u=ResMgr.getUIMeilinRes(h),i="ml_zycs_"+t.id}this.mc.playFile(u,-1)}this.imgName.textFlow=(new egret.HtmlTextParser).parse(t.getName()),this.totalPower.text=""+t.getActPower()},e}(BaseWinSingle);__reflect(SqXyActTipsWin.prototype,"SqXyActTipsWin"),window.SqXyActTipsWin=SqXyActTipsWin;var SqXyBaseModel=function(){function t(){this.huanHuaId=0,this.level=0}return t.prototype.getHuanHuaDataById=function(t){return null},t.prototype.getHuanHuaGroupNames=function(){return[]},t.prototype.getHuanHuaDatasByGroupId=function(t){return[]},t.prototype.getHuanHuaDatas=function(){return[]},t.prototype.getFuHunDataById=function(t){return null},t.prototype.getFuHunDatas=function(){return[]},t.prototype.getLevelConsume=function(){return[]},t.prototype.getLevelAttrDatas=function(){return[]},t.prototype.getLevelHuanHuaDatas=function(t){return[]},t.prototype.getLevelHuanHuaDatasAll=function(){return[]},t.prototype.getLevelFuHunDatas=function(t){return[]},t.prototype.getLevelFuHunDatasAll=function(){return[]},t.prototype.getLevelPower=function(){return 0},t.prototype.getHuanHuaPower=function(){return 0},t.prototype.getFuHunPower=function(){return 0},t.prototype.getApperaenceId=function(){return 0},t.prototype.getSkillIds=function(){return[]},t.prototype.isMaxLv=function(){return!1},t}();__reflect(SqXyBaseModel.prototype,"SqXyBaseModel");var SqXyWin=function(t){function e(){var e=t.call(this)||this;return e.winType=WinType.OverlayWin,e.redPointHead=[RoleWin,RolePanel],e}return __extends(e,t),e.prototype.open=function(e,i){t.prototype.open.call(this,e,i),this.panelTabIndex=-1},e.panelNames=[ShenQiPanel,WingPanel,SzPanel,MeilinPanel],e}(BaseDuoPanelWin);__reflect(SqXyWin.prototype,"SqXyWin"),window.SqXyWin=SqXyWin;var ActData11_1=function(t){function e(){var e=t.call(this)||this;return e.datas=[],e}return __extends(e,t),e.prototype.parser=function(t){var e=t.readByte();this.datas.length=0;for(var i=0;e>i;i++){var n=new ActDataBuyData11_1;n.index=i,n.buyCount=t.readByte(),n.state=t.readByte(),this.datas.push(n)}},e.prototype.parserChange=function(t){var e=t.readByte(),i=this.datas[e-1];return i.buyCount=t.readByte(),i.state=t.readByte(),e},e.prototype.getConfigs=function(){return this.configs||(this.configs=Cfg.getConfigs(ActivityType11Config,this.actId,CondType.NONE))},e.prototype.canReward=function(){for(var t=0,e=this.datas;t<e.length;t++){var i=e[t];if(1==i.state)return!0}return!1},e.prototype.isRewardALL=function(){for(var t=0,e=this.datas;t<e.length;t++){var i=e[t];if(2!=i.state)return!1}return!0},e.prototype.isBuyAll=function(){for(var t=0,e=this.datas;t<e.length;t++){var i=e[t];if(0==i.state)return!1}return!0},e.prototype.getItemDatas=function(){for(var t=[],e=1;e<=this.datas.length;e++)t.push(new ActDataItem(this.getConfig(e),this.getRewardStateById(e),this.actId,this.getActOpenState()));return t},e.prototype.getRewardStateById=function(t){var e=this.datas[t-1];return 2==e.state?ActRewardState.Geted:1==e.state?ActRewardState.CanGet:ActRewardState.NotReached},e}(ActDataBase);__reflect(ActData11_1.prototype,"ActData11_1");var ActDataBuyData11_1=function(){function t(){this.index=0,this.buyCount=0,this.state=0}return t}();__reflect(ActDataBuyData11_1.prototype,"ActDataBuyData11_1"),window.ActData11_1=ActData11_1;var ActData12_1=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return __extends(e,t),e.prototype.getConfigs=function(){return this.configs||(this.configs=Cfg.getConfigs(ActivityType12Config,this.actId,CondType.NONE))},e}(ActDataBase);__reflect(ActData12_1.prototype,"ActData12_1"),window.ActData12_1=ActData12_1;var MinerWin=function(t){function e(){var e=t.call(this)||this;return e.winType=WinType.MainWin,e}return __extends(e,t),e.prototype.initUI=function(){t.prototype.initUI.call(this),this.clickClose=!1,this.addClickE(this.closeBtn,this.exitFb),this.addClickE(this.closeBtn0,this.exitFb),this.addLsn(LogicSys.ins().patchEnterMap,this.closeThis)},e.prototype.exitFb=function(t){t.stopPropagation(),FbSys.ins().sendExitFb()},e.prototype.closeThis=function(){closeWin(this)},e.openCheck=function(){return!0},e.panelNames=[MinerPanel,MineRobListPanel,MineRobLogPanel],e}(BaseWinAutoTab);__reflect(MinerWin.prototype,"MinerWin"),window.MinerWin=MinerWin;var ActData15_1=function(t){function e(){var e=t.call(this)||this;return e.actData15TaskDatas=[],e}return __extends(e,t),e.prototype.parserTask=function(t){var e=t.readByte();this.actData15TaskDatas.length=0;for(var i=0;e>i;i++){var n=t.readByte(),a=t.readInt(),o=new ActData15_1TaskData;o.value=a,o.index=i+1,o.actId=this.actId,o.state=n,this.actData15TaskDatas.push(o)}},e.prototype.parserTaskUpdate=function(t){var e=t.readByte(),i=t.readByte(),n=t.readInt(),a=this.actData15TaskDatas[e-1];a.state=i,a.value=n},e.prototype.getTaskList=function(){for(var t=[],e=this.getCurTaskGroup(),i=0;i<this.actData15TaskDatas.length;i++){var n=this.actData15TaskDatas[i];e==n.config.group&&t.push(n)}return t},e.prototype.getCurTaskGroup=function(){var t=1;if(this.actData15TaskDatas.length>0){t=this.actData15TaskDatas[this.actData15TaskDatas.length-1].config.group;for(var e=0;e<this.actData15TaskDatas.length;e++){var i=this.actData15TaskDatas[e];if(2!=i.state){t=i.config.group;break}}}return t},e.prototype.redPoint=function(){for(var e=!1,i=this.getCurTaskGroup(),n=0;n<this.actData15TaskDatas.length;n++){var a=this.actData15TaskDatas[n];a.canAct()&&i==a.config.group&&(e=!0)}return e||t.prototype.redPoint.call(this)},e.prototype.getRewardItems=function(){return Cfg.getConfig(ActivityType16Config,this.actId)[1]},e.prototype.getTask=function(){return this.actData15TaskDatas},e}(ActDataBase);__reflect(ActData15_1.prototype,"ActData15_1"),window.ActData15_1=ActData15_1;var ActData15_1TaskData=function(){function t(){this.actId=0,this.index=0,this.state=0,this.value=0}return Object.defineProperty(t.prototype,"config",{get:function(){return this._config||(this._config=Cfg.getConfig(ActivityType15Config,this.actId,this.index))},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"configTask",{get:function(){return(null==this._configTask||this._configTask.id!=this.taskId)&&(this._configTask=Cfg.getConfig(Act15TaskConfig,this.taskId)),this._configTask},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"taskId",{get:function(){return this.config.taskid},enumerable:!0,configurable:!0}),t.prototype.isAct=function(){return 2==this.state},t.prototype.canAct=function(){return 1==this.state},Object.defineProperty(t.prototype,"status",{get:function(){var t=ActRewardState.NotReached;return t=0==this.state?ActRewardState.NotReached:1==this.state?ActRewardState.CanGet:ActRewardState.Geted},enumerable:!0,configurable:!0}),t}();__reflect(ActData15_1TaskData.prototype,"ActData15_1TaskData"),window.ActData15_1TaskData=ActData15_1TaskData;var BaseFuHunData=function(){function t(t){this.id=0,this.attrs=[],this._level=0,this.id=t}return t.prototype.getLv=function(){return this._level},t.prototype.setLv=function(t){this._level=t,this.attrs.length=0;for(var e=this.getBaseAttr(),i=0,n=e;i<n.length;i++){var a=n[i];this.attrs.push(new AttrData(a.type,a.value*t))}},t.prototype.getIcon=function(){return""},t.prototype.getMaxLv=function(){return 0},t.prototype.getName=function(){return""},t.prototype.getConsume=function(){return[]},t.prototype.isAct=function(){return!1},t.prototype.getBaseAttr=function(){return[]},t.prototype.isMax=function(){return!1},t.prototype.isMaxCur=function(){return!1},t}();__reflect(BaseFuHunData.prototype,"BaseFuHunData");var BaseHuanHuaData=function(){function t(t){this.id=0,this.level=0,this.id=t}return t.prototype.getIcon=function(){var t=GFunc.getItemDataRewardByJob(this.getConsume()),e=Cfg.getItemCfg(t[0].id);return ResMgr.getItemIcon(e.getIcon())},t.prototype.getName=function(){return""},t.prototype.getQuality=function(){return 0},t.prototype.getSrQuality=function(){return 0},t.prototype.getActDec=function(){return""},t.prototype.getActPower=function(){return 0},t.prototype.getConsume=function(){return[]},t.prototype.getApperaenceId=function(t){return 0},t.prototype.getGroupId=function(){return 0},t.prototype.isAct=function(){return!1},t.prototype.isMax=function(){return!1},t.prototype.isUse=function(){return!1},t}();__reflect(BaseHuanHuaData.prototype,"BaseHuanHuaData");var RedFortLastRankPanel=function(t){function e(){var e=t.call(this)||this;return e.skinName="RedFortLastRankPanelEUI",e.scroller.scrollPolicyH=eui.ScrollPolicy.OFF,e.list.itemRenderer=RedFortLastRankItem,e.list.dataProvider=e.arrData=new eui.ArrayCollection,e}return __extends(e,t),e.prototype.open=function(){t.prototype.open.call(this),this.addLsn(FbSys.ins().patchRedFortLastRank,this.updatePanel),FbSys.ins().sendRedFortLastRank(),this.updatePanel()},e.prototype.updatePanel=function(){var t=FbSys.ins().redFort.lastRankData;if(t.length>0){this.arrData.source=t;var e=FbSys.ins().redFort.lastMyRan>0?""+FbSys.ins().redFort.lastMyRan:Lang.common_str17;this.labMyRan.text=Lang.redFort_str5.replace("$count$",e),this.labDes.visible=!1}else this.labMyRan.text="",this.labDes.visible=!0},e.getTitle=function(){return"btz_zycs_jlyl"},e.getTabTitle=function(){return"bqz_zycs_sjpm"},e}(BasePanel);__reflect(RedFortLastRankPanel.prototype,"RedFortLastRankPanel"),window.RedFortLastRankPanel=RedFortLastRankPanel;var ActData2_1=function(t){function e(){var e=t.call(this)||this;return e.buyDatas=[],e}return __extends(e,t),e.prototype.parser=function(t){this.buyDatas.length=0;for(var e=t.readShort(),i=0;e>i;i++){var n=new ActData2BuyData;n.count=t.readShort(),n.actId=this.actId,n.configIndex=i+1,this.buyDatas[i]=n}},e.prototype.parserChange=function(t){var e=t.readShort(),i=this.buyDatas[e-1];return i.count=t.readInt(),this.changIndex},e.prototype.getConfigs=function(){return this.configs||(this.configs=Cfg.getConfigs(ActivityType2Config,this.actId,CondType.NONE))},e.prototype.getBgImgRes=function(){return this.getConfigs()[1].bgImg},e.prototype.canReward=function(){return this.canBuy()},e.prototype.completeReward=function(){return!this.canBuy()},e.prototype.getDateText=function(t){return getFormatTime(t,"hh小时mm分ss秒")},e.prototype.getformatTime2=function(t){void 0===t&&(t=Actor.ins().serverTime);var e="";return e=t<this.startTime?Lang.act_str6:t>this.jiesuanTime?Lang.act_str7:Lang.act_str8},e.prototype.canBuy=function(){for(var t=!1,e=0,i=this.buyDatas;e<i.length;e++){var n=i[e];if(t=n.hasBuy)return t}return t},e}(ActDataBase);__reflect(ActData2_1.prototype,"ActData2_1");var ActData2BuyData=function(){function t(){this.count=0,this.actId=0,this.configIndex=0}return Object.defineProperty(t.prototype,"leftCount",{get:function(){return this.config.count-this.count},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"config",{get:function(){return this.conf||(this.conf=Cfg.getConfig(ActivityType2Config,this.actId,this.configIndex))},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"hasBuy",{get:function(){return this.leftCount>0},enumerable:!0,configurable:!0}),t}();__reflect(ActData2BuyData.prototype,"ActData2BuyData"),window.ActData2_1=ActData2_1;var RedFortRankFloorPanel=function(t){function e(){var e=t.call(this)||this;return e.skinName="RedFortRankFloorPanelEUI",e.scroller.scrollPolicyH=eui.ScrollPolicy.OFF,e.list.itemRenderer=RedFortRankFloorPanelItem,e.list.dataProvider=e.arrData=new eui.ArrayCollection,e}return __extends(e,t),e.prototype.open=function(){t.prototype.open.call(this),this.setData()},e.prototype.setData=function(){var t=[],e=Cfg.getConfigs(FortConfig);for(var i in e)t.push(e[i]);this.arrData.source=t},e.getTitle=function(){return"btz_zycs_jlyl"},e.getTabTitle=function(){return"bqz_zycs_csjl"},e}(BasePanel);__reflect(RedFortRankFloorPanel.prototype,"RedFortRankFloorPanel"),window.RedFortRankFloorPanel=RedFortRankFloorPanel;var RedFortRankJifenPanel=function(t){function e(){var e=t.call(this)||this;return e.skinName="RedFortRankJifenPanelEUI",e.scroller.scrollPolicyH=eui.ScrollPolicy.OFF,e.list.itemRenderer=RedFortRankJifenPanelItem,e.list.dataProvider=e.arrData=new eui.ArrayCollection,e}return __extends(e,t),e.prototype.open=function(){t.prototype.open.call(this),this.setData()},e.prototype.setData=function(){this.arrData.source=Cfg.getConfigs(FortRankConfig)},e.getTitle=function(){return"btz_zycs_jlyl"},e.getTabTitle=function(){return"bqz_zycs_jfph"},e}(BasePanel);__reflect(RedFortRankJifenPanel.prototype,"RedFortRankJifenPanel"),window.RedFortRankJifenPanel=RedFortRankJifenPanel;var WanMoItem=function(t){function e(){var e=t.call(this)||this;return e.skinName="WanMoItemSkin2",e.mcMonster=new MC,e.lbPower.visible=!1,e}return __extends(e,t),e.prototype.open=function(){},e.prototype.setData=function(t){this.lbname.text=t.name,this.lbPower.text=Lang.fb_str226+t.power;var e=Cfg.getConfig(MonsterModelConfig,t.avatar),i=ResMgr.getMonsterSource(e.appearance,4,EntityAction.STAND);this.mcMonster.x=190,this.mcMonster.y=80,this.addChild(this.mcMonster),this.mcMonster.playFile(i,-1),this.imgbg.source="pt_zycs_pt2"},e}(BaseItemRender);__reflect(WanMoItem.prototype,"WanMoItem"),window.WanMoItem=WanMoItem;var TreeSys=function(t){function e(){var e=t.call(this)||this;return e.datas={},e.keySaves={},e.count=0,e.split1=",",e.split2="|",e.defaultValue=!1,e.isPatch=!1,e}return __extends(e,t),e.ins=function(){return t.getIns.call(this,e)},e.prototype.setData=function(t){for(var e=[],i=1;i<arguments.length;i++)e[i-1]=arguments[i];return this.count=0,e.length?this.save(t,this.datas,0,e):void console.log("TreeSys.setData 保存设置参数错误,至少有一个参数")},e.prototype.getData=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return this.count=0,this.read(this.datas,0,t)},e.prototype.getDataAllTrue=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return this.count=0,this.read(this.datas,0,t,!1)},e.prototype.setKeys=function(t,e){for(var i="",n=0,a=0,o=e;a<o.length;a++){var s=o[a];i+=this.arrToStr(s),n!=e.length-1&&(i+=this.split2),n++}this.save(i,this.datas,0,t)},e.prototype.arrToStr=function(t){for(var e="",i=0,n=0,a=t;n<a.length;n++){var o=a[n],s="";i!=t.length-1&&(s=this.split1),e+="function"==typeof o?""+egret.getQualifiedClassName(o)+s:""+o+s,i++}return e},e.prototype.save=function(t,i,n,a){if(this.count++,this.count>e.MAX_KEYS)return void this.showErr(a,"存储数据超出循环次数");var o=ComUtil.getObjName(a[n]);if(n<a.length-1)i[o]?"object"!=typeof i[o]&&"string"!=typeof i[o]&&(i[o]={},this.showErr(a,"本层已设置为值,无法在设置一下层")):i[o]={},this.save(t,i[o],n+1,a);else if("object"!=typeof i[o]){if(i[o]!=t)if(i[o]=t,"boolean"==typeof t||"number"==typeof t)this.doData(t,a);else if("string"==typeof t)for(var s=t.split(this.split2),r=0,u=s;r<u.length;r++){var h=u[r];this.keySaves[h]=this.arrToStr(a)}}else this.showErr(a,"下层有值,设置错误");return this.datas},e.prototype.read=function(t,i,n,a){if(void 0===a&&(a=!0),this.count++,this.count>e.MAX_KEYS)return this.showErr(n,"获取数据超出循环次数"),this.defaultValue;var o=ComUtil.getObjName(n[i]);return i<n.length?i<n.length-1&&t[o]?this.read(t[o],i+1,n,a):t?a?this.getObjectValue(t[o]):this.getObjectValueAll(t[o]):this.defaultValue:this.defaultValue},e.prototype.getObjectValue=function(t){var e=typeof t;if("object"==e){var i=this.defaultValue;for(var n in t)if(i=this.getObjectValue(t[n]))break;return i}if("number"==e||"boolean"==e)return t;if("string"==e){for(var a=t.split(this.split2),i=this.defaultValue,o=0,s=a;o<s.length;o++){var r=s[o],n=r.split(this.split1);if(i=this.read(this.datas,0,n))break}return i}return this.defaultValue},e.prototype.getObjectValueAll=function(t){var e=typeof t;if("object"==e){var i=!0;for(var n in t)if(i=this.getObjectValueAll(t[n]),!i)break;return i?!0:!1}if("number"==e||"boolean"==e)return t;if("string"==e){for(var a=t.split(this.split2),i=!0,o=0,s=a;o<s.length;o++){var r=s[o],n=r.split(this.split1);if(i=this.read(this.datas,0,n,!1),!i)break}return i}return!1},e.prototype.showErr=function(t,e){for(var i="",n=0;n<t.length;n++)i+=ComUtil.getObjName(t[n]),n<t.length-1&&(i+="_");console.log(e+":"+i)},e.prototype.doData=function(t,e){this.patchData(t,e,TreeData)},e.prototype.patchData=function(t,e,i){var n=new i;n.setValue(!!t),n.setKeys(e);var a=this.arrToStr(e);if(this.keySaves[a]){var o=this.keySaves[a].split(this.split1);n.addKeys(o)}return n},e.prototype.getDatas=function(){return this.datas},e.prototype.getKeySaves=function(){return this.keySaves},e.MAX_KEYS=100,e}(BaseSys);__reflect(TreeSys.prototype,"TreeSys"),window.TreeSys=TreeSys;var WanMoRanking=function(t){function e(){var e=t.call(this)||this;return e.winType=WinType.OverlayWin,e}return __extends(e,t),e.prototype.getParam=function(){return[RankType.WanMo]},e.panelNames=[WanMoRanPanel],e}(BaseWinAutoTab);__reflect(WanMoRanking.prototype,"WanMoRanking"),window.WanMoRanking=WanMoRanking;var ActData23_2=function(t){function e(){return t.call(this)||this}return __extends(e,t),e.prototype.getformatTime=function(e){return void 0===e&&(e=Actor.ins().serverTime),StrUtil.addColor(t.prototype.getformatTime.call(this),65400)},e.prototype.getItemDatas=function(){var t=this.getConfigs(),e=[];for(var i in t){var n=new ActDataItem23_2(t[i],this.getRewardStateById(t[i].index),this.actId,this.getActOpenState());n.dabaioDay=this.day,e.push(n)}return e},e}(ActData23_1);__reflect(ActData23_2.prototype,"ActData23_2");var ActDataItem23_2=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.dabaioDay=0,e}return __extends(e,t),e}(ActDataItem);__reflect(ActDataItem23_2.prototype,"ActDataItem23_2"),window.ActData23_2=ActData23_2;var ActData3_1=function(t){function e(){var e=t.call(this)||this;return e.jindu=[],e.states=[],e.jifen=0,e}return __extends(e,t),e.prototype.parser=function(t){var e=t.readByte();this.jindu.length=0,this.states.length=0;for(var i=0;e>i;i++)this.jindu[i]=t.readByte(),this.states[i]=t.readByte();this.jifen=t.readShort(),this.record=t.readInt()},e.prototype.updateParser=function(t){var e=t.readByte();this.jindu.length=0,this.states.length=0;for(var i=0;e>i;i++)this.jindu[i]=t.readByte(),this.states[i]=t.readByte();this.jifen=t.readShort()},e.prototype.getConfigs=function(){return this.configs||(this.configs=Cfg.getConfigs(ActivityType3Config,this.actId,CondType.NONE))},e.prototype.deCodeRecord=function(t){this.getConfig(t);return 2==this.states[t-1]?1:0},e.prototype.getCondition=function(t){var e=t;return 1==this.states[e.index-1]},e.prototype.getJindu=function(t){return this.jindu[t-1]||0},e}(ActDataBase);__reflect(ActData3_1.prototype,"ActData3_1"),window.ActData3_1=ActData3_1;var FootItem=function(t){function e(){var e=t.call(this)||this;return e.skinName="FootItemEUI",e.showRedPoint(!1),e.setSelect(!1),e}return __extends(e,t),e.prototype.dataChanged=function(){if(this.data instanceof FootHuanHuaData)if(this.imgIcon.source=this.data.getIcon(),this.imgPz.source="zuji_zycs_pz"+this.data.getBaseConfig().quality,this.imgLock.visible=!this.data.isAct(),this.imgAn.visible=!this.data.isAct(),this.data.isMax())this.showRedPoint(!1);else{var t=this.data.getBaseConfig().needitem;this.showRedPoint(GFunc.isConsumeEnough(t))}},e.prototype.showRedPoint=function(t){this.redPoint.visible=t},e.prototype.setSelect=function(t){this.imgSelect.visible=t},e}(BaseItemRender);__reflect(FootItem.prototype,"FootItem"),window.FootItem=FootItem;
var FootEquipBagPanel=function(t){function e(){var e=t.call(this)||this;return e.skinName="FootEquipBagPanelEUI",e.list.itemRenderer=ItemBase,e.list.dataProvider=e.listData=new eui.ArrayCollection,e.scroller.scrollPolicyH=eui.ScrollPolicy.OFF,e.btnHeCheng.textFlow=addColorTF(StrUtil.addUnderLine(Lang.foot_str3),1176860),e}return __extends(e,t),e.prototype.open=function(e){t.prototype.open.call(this),this.equipData=e,this.addClickE(this.btnHeCheng,this.onClick),this.updatePanel()},e.prototype.updatePanel=function(){this.listData.source=FootSys.ins().bagModel,this.lbCount.text=FootSys.ins().bagModel.length+"/"+FootSys.ins().getBagMaxCount()},e.prototype.onClick=function(t){switch(t.currentTarget){case this.btnHeCheng:openWin(ForgeWin,2,4),this.closeMyWin()}},e.getTitle=function(){return"btz_zycs_bb"},e.getTabTitle=function(){return"背 包"},e.getSysId=function(){return 316},e}(BasePanel);__reflect(FootEquipBagPanel.prototype,"FootEquipBagPanel"),window.FootEquipBagPanel=FootEquipBagPanel;var FootEquipChuanDaiPanel=function(t){function e(){var e=t.call(this)||this;return e.skinName="FootEquipChuanDaiPanelEUI",e.list.itemRenderer=FootEquipChuanDaiItem,e.list.dataProvider=e.listData=new eui.ArrayCollection,e.btnHeCheng.textFlow=addColorTF(StrUtil.addUnderLine(Lang.foot_str3),1176860),e}return __extends(e,t),e.prototype.open=function(e){t.prototype.open.call(this),this.equipData=e,this.addClickE(this.btnHeCheng,this.onClick),this.addClickE(this.list,this.onListClick),this.updatePanel()},e.prototype.close=function(){t.prototype.close.call(this)},e.prototype.updatePanel=function(){var t=this.equipData.itemId,e=FootSys.ins().getEquipDatasById(t),i=[];if(this.equipData.isEquip){var n=GFunc.creatItemDataById(t);i.push(new FootChuanDaiData(this.equipData,n,!1))}for(var a=0,o=e;a<o.length;a++){var s=o[a],r=new FootChuanDaiData(this.equipData,s);i.push(r)}this.listData.source=i,this.lbCount.text=FootSys.ins().bagModel.length+"/"+FootSys.ins().getBagMaxCount()},e.prototype.onListClick=function(t){if(t.target)switch(t.target.name){case"btnEquip":var e=FootSys.ins().getHuanHuaDataById(this.equipData.footId);e.isAct()?(FootSys.ins().sendFootMiYuEquip(this.equipData.footId,this.equipData.pos),this.closeMyWin()):showtipsFail(Lang.foot_str8);break;case"imgClick":var i=(FootSys.ins().getHuanHuaDataById(this.equipData.footId),t.target.parent.data);if(i.isBagData){var n=GFunc.creatItemDataById(this.equipData.itemId);openWin(FootEquipTipsWin,i,new FootChuanDaiData(this.equipData,n,!1))}else openWin(FootEquipTipsWin,i)}},e.prototype.onClick=function(t){switch(t.currentTarget){case this.btnHeCheng:openWin(ForgeWin,2,4),this.closeMyWin()}},e.getTitle=function(){return"zuji_zycs_cdlb"},e.getTabTitle=function(){return"穿 戴"},e.getSysId=function(){return 316},e}(BasePanel);__reflect(FootEquipChuanDaiPanel.prototype,"FootEquipChuanDaiPanel"),window.FootEquipChuanDaiPanel=FootEquipChuanDaiPanel;var SuitDataBase=function(){function t(){this.xlId=1,this.id=1}return Object.defineProperty(t.prototype,"config",{get:function(){return this._config||(this._config=Cfg.getConfig(SuitConfig,this.id))},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"xlConfig",{get:function(){return this._xlConfig||(this._xlConfig=Cfg.getSuitXLConfigById(this.id))},enumerable:!0,configurable:!0}),t.prototype.isInCondition=function(t,e,i){var n=this.config.condition;return t>=n.rank&&e>=n.star&&i>=n.quality},t}();__reflect(SuitDataBase.prototype,"SuitDataBase");var FootEquipFenJiePanel=function(t){function e(){var e=t.call(this)||this;return e.selectItemDatas=[],e.curStar=99,e.curQuality=99,e.skinName="FootEquipFenJiePanelEUI",e.list.itemRenderer=FootEquipFenJiePanelItem,e.listArray=new eui.ArrayCollection,e.list.dataProvider=e.listArray,e.list.useVirtualLayout=!1,e.listQuality.itemRenderer=FootEquipFenJiePanelQualitySaiXuan,e.listQualityArray=new eui.ArrayCollection,e.listQuality.dataProvider=e.listQualityArray,e.listStar.itemRenderer=FootEquipFenJiePanelStarSaiXuan,e.listStarArray=new eui.ArrayCollection,e.listStar.dataProvider=e.listStarArray,e.btnHeCheng.textFlow=addColorTF(StrUtil.addUnderLine(Lang.foot_str3),1176860),e}return __extends(e,t),e.prototype.open=function(){t.prototype.open.call(this),this.addClickE(this,this.onClick),this.addItemTapE(this.list,this.onlistClick),this.addItemTapE(this.listQuality,this.onlistQualityClick),this.addItemTapE(this.listStar,this.onlistStarClick),this.addLsn(FootSys.ins().patchFootMiYuFenJie,this.updateFenJie);var e=[4,3,2,1,0],i=[5,4,3,2];this.listStarArray.source=e,this.listQualityArray.source=i,this.updatePanel(),this.autoSelect()},e.prototype.close=function(){t.prototype.close.call(this)},e.prototype.updateFenJie=function(){this.resetPanel(),this.updatePanel(),this.updateCount()},e.prototype.updatePanel=function(){this.selectItemDatas.length=0;var t=[];t=99==this.curStar&&99==this.curQuality?FootSys.ins().bagModel:FootSys.ins().getEquipByStarQuality(this.curStar,this.curQuality),SortUtil.sortOn(t,["quality","star"],[SortType.down,SortType.down]),this.listArray.source=t,this.validateNow(),this.list.validateNow(),this.lbCurQuality.textFlow=addColorTF(99==this.curQuality?"全部颜色":addColor(GConst.pzName[this.curQuality],GConst.PZColor[this.curQuality])+"及以下"),this.lbCurStar.textFlow=addColorTF(99==this.curStar?"全部星级":this.curStar+"星及以下")},e.prototype.autoSelect=function(){var t=this.list.numElements;this.selectItemDatas.length=0;for(var e=0;t>e;e++){var i=this.list.getElementAt(e);i&&(i.setSelect(!0),this.selectItemDatas.push(i.data))}this.updateCount()},e.prototype.updateCount=function(){for(var t=this.selectItemDatas.length,e=0,i=0;t>i;i++){var n=this.selectItemDatas[i],a=Cfg.getConfig(FootFenjieConfig,n.quality,n.star);a&&(e+=a.index)}this.lbCount.text=e.toString()},e.prototype.onClick=function(t){switch(t.target){case this.btnHeCheng:openWin(ForgeWin,2,4),this.closeMyWin();break;case this.btnSend:this.selectItemDatas.length>0?FootSys.ins().sendFootMiYuFenJie(this.selectItemDatas):showtipsFail("请选择你要分解的装备");break;case this.lbAllQuality:this.curQuality=99,this.groupQuality.visible=!1,this.updatePanel(),this.autoSelect();break;case this.lbAllStar:this.curStar=99,this.groupStar.visible=!1,this.updatePanel(),this.autoSelect();break;case this.imgQuality:this.groupQuality.visible=!0;break;case this.imgStar:this.groupStar.visible=!0;break;case this.imgQualityClose:this.groupQuality.visible=!1;break;case this.imgStarClose:this.groupStar.visible=!1}},e.prototype.onlistClick=function(t){var e=t.itemRenderer,i=e.data;-1==this.selectItemDatas.indexOf(i)?(this.selectItemDatas.push(i),e.setSelect(!0)):(e.setSelect(!1),this.selectItemDatas.splice(this.selectItemDatas.indexOf(i),1)),this.updateCount()},e.prototype.onlistQualityClick=function(t){var e=t.itemRenderer,i=e.data;null!=i&&(this.curQuality=i,this.groupQuality.visible=!1,this.updatePanel(),this.autoSelect())},e.prototype.onlistStarClick=function(t){var e=t.itemRenderer,i=e.data;null!=i&&(this.curStar=i,this.groupStar.visible=!1,this.updatePanel(),this.autoSelect())},e.prototype.resetPanel=function(){this.listArray.removeAll(),this.listArray=new eui.ArrayCollection,this.list.dataProvider=this.listArray,this.selectItemDatas.length=0,this.updatePanel()},e.getTitle=function(){return"zuji_zycs_fjlb"},e.getTabTitle=function(){return"分 解"},e.getSysId=function(){return 316},e}(BasePanel);__reflect(FootEquipFenJiePanel.prototype,"FootEquipFenJiePanel"),window.FootEquipFenJiePanel=FootEquipFenJiePanel;var SuitWin=function(t){function e(){var e=t.call(this)||this;return e.redPointHead=[RoleWin,RolePanel],e.winType=WinType.OverlayWin,e.tabIndex=-1,e.suitIndex=0,e}return __extends(e,t),e.prototype.open=function(e,i){void 0===e&&(e=-1),void 0===i&&(i=0),this.tabIndex=e,this.suitIndex=i,t.prototype.open.call(this,0)},e.prototype.initUI=function(){t.prototype.initUI.call(this),this.groupPage.visible=!1},e.prototype.getParam=function(){return[this.tabIndex,this.suitIndex]},e.openCheck=function(){return t.openCheck.call(this,0)},e.panelNames=[SuitPanel],e}(BaseWinAutoTab);__reflect(SuitWin.prototype,"SuitWin"),window.SuitWin=SuitWin;var ChengJiuPanel=function(t){function e(){var e=t.call(this)||this;e.btnNum=0,e.isTouch=!1,e.skinName="ChengJiuPanelEUI",e.list.itemRenderer=ChengJiuItem;var i=TaskSys.ins().getAchieveTabData();return e.tabList.itemRenderer=ChengjiuTabItem,e.tabList.dataProvider=e.tabArrColl=new eui.ArrayCollection(i),e.btnNum=i.length,e.leftBtn.visible=e.rightBtn.visible=!1,e}return __extends(e,t),e.prototype.open=function(){this.addClickE(this.list,this.onSendFunc),this.addClickE(this.leftBtn,this.onTouchBtn),this.addClickE(this.rightBtn,this.onTouchBtn),this.addClickE(this.receiveBtn,this.onClick),this.addChangeE(this.tabList,this.onTabChange),this.addLsn(TaskSys.ins().patchAchievePanel,this.updateListPanel),this.addLsn(LogicSys.ins().patchCurrency,this.updateAchScore),this.tabList.selectedIndex=0,this.updateListPanel(),this.updateAchScore()},e.prototype.updateAchScore=function(t){t&&t.type!=CurType.achieve||(this.scoreTxt.text=""+Lang.task_str1+Actor.ins().getCurrency(CurType.achieve),this.isTouch&&(this.isTouch=!1,GFunc.playUIMovie("qjzlxg",190,68,this)))},e.prototype.onClick=function(t){switch(t.target){case this.receiveBtn:var i=RpSys.ins().getData(ExtCom,ChengJiuWin,e);if(!i)return showtipsFail(Lang.task_str2);this.isTouch=!0,TaskSys.ins().sendChengjiuRewardAll()}},e.prototype.onSendFunc=function(t){if("ChengJiuItem.sendBtn"==t.target.name){var e=t.target.parent.data;switch(e.state){case 0:GFunc.createTaskNavData(e.config.controlTarget)["goto"]();break;case 1:this.isTouch=!0,TaskSys.ins().sendChengjiuReward(e.id)}}},e.prototype.updateListPanel=function(){var t=TaskSys.ins().getChengjiuDataByType(this.tabList.selectedItem);t.sort(TaskSys.ins().achieveSort),this.list.dataProvider=new eui.ArrayCollection(t),this.tabArrColl.source=TaskSys.ins().getAchieveTabData()},e.prototype.onTabChange=function(t){var e=TaskSys.ins().getChengjiuDataByType(this.tabList.selectedItem);e.sort(TaskSys.ins().achieveSort),this.list.dataProvider=new eui.ArrayCollection(e)},e.prototype.onTouchBtn=function(t){var e=470;switch(t.target){case this.leftBtn:this.tabList.scrollH<=e?this.tabList.scrollH=0:this.tabList.scrollH-=e;break;case this.rightBtn:this.tabList.scrollH+e>94*(this.tabList.dataProvider.length-5)?this.tabList.scrollH=94*(this.tabList.dataProvider.length-5):this.tabList.scrollH+=e}},e.prototype.onScrollerChange=function(){this.tabList.scrollH<20?(this.leftBtn.visible=!1,this.rightBtn.visible=!0):this.tabList.scrollH>88*(this.tabList.dataProvider.length-5)+2?(this.leftBtn.visible=!0,this.rightBtn.visible=!1):(this.leftBtn.visible=!0,this.rightBtn.visible=!0),this.btnNum<=4&&(this.leftBtn.visible=!1,this.rightBtn.visible=!1)},e.getTitle=function(){return"btz_zycs_cj"},e.getTabTitle=function(){return"bqz_zycs_cj"},e.getSysId=function(){return 999},e}(BasePanel);__reflect(ChengJiuPanel.prototype,"ChengJiuPanel");var ChengjiuTabItem=function(t){function e(){var e=t.call(this)||this;return e.skinName="ChengjiuTabItemEUI",e}return __extends(e,t),e.prototype.dataChanged=function(){"number"==typeof this.data&&(this.iconDisplay.source=ResMgr.getAchieveTabIcon(this.data),this.selectIcon.source=ResMgr.getAchieveTabSelectIcon(this.data),this.redPoint.visible=RpSys.ins().getData(ExtCom,ChengJiuWin,ChengJiuPanel,this.data))},e}(BaseItemRender);__reflect(ChengjiuTabItem.prototype,"ChengjiuTabItem");var ChengJiuItem=function(t){function e(){var e=t.call(this)||this;return e.skinName="ChengJiuItemEUI",e.sendBtn.name="ChengJiuItem.sendBtn",e.list.itemRenderer=ItemBaseReward,e}return __extends(e,t),e.prototype.dataChanged=function(){var t=this.data;if(t&&0!=t.id){this.titleTF.text=t.config.desc;var e="进度：";e+=StrUtil.addColor(""+t.value,1945142),this.progressTF.textFlow=addColorTF(e),this.list.dataProvider=new eui.ArrayCollection(t.config.awardList),this.enabled=!0,0==t.state?this.sendBtn.icon="anz_zycs_qw":1==t.state?this.sendBtn.icon="anz_zycs_lq":2==t.state&&(this.sendBtn.icon="anz_zycs_ylq",this.enabled=!1),this.sendBtn.redPoint.visible=1==t.state}},e}(BaseItemRender);__reflect(ChengJiuItem.prototype,"ChengJiuItem"),window.ChengJiuPanel=ChengJiuPanel;var QiYuePanel=function(t){function e(){var e=t.call(this)||this;return e.selectedIndex=0,e.skinName="QiYuePanelEUI",e.list.itemRenderer=QiYueItem,e.list.dataProvider=e.listArray=new eui.ArrayCollection,e.menuList.itemRenderer=QiYuePanelBtn,e.menuList.dataProvider=e.menuArrColl=new eui.ArrayCollection(TaskSys.ins().agreementData.agreementTypes),e.eff=new MC,e.eff.x=340,e.eff.y=350,e.addChild(e.eff),e}return __extends(e,t),e.prototype.open=function(){this.addClickE(this.menuList,this.onTabChange),this.addLsn(TaskSys.ins().patchAgreementData,this.updateListPanel),this.addLsn(TaskSys.ins().patchAgreementUpdate,this.updateListPanel),this.addLsn(RpSys.ins().patchRp,this.updateRp),this.selectedIndex=TaskSys.ins().agreementData.getSelectTypeIndex(),this.menuList.selectedIndex=this.selectedIndex,this.updateListPanel(),this.updateRp()},e.prototype.updateRp=function(t){if(void 0===t&&(t=null),!t||t.check(e))for(var i=this.menuList.numElements,n=0;i>n;n++){var a=this.menuList.getElementAt(n);a&&a.updateRedPoint()}},e.prototype.updateListPanel=function(){var t=this.menuList.selectedItem,e=TaskSys.ins().agreementData.getAgreementTypeByType(t.type).agreementInfos;e.sort(this.achieveSort),this.listArray.source=e;var i=t.getSuccessCount()==t.getCount()?3473271:11870240,n=StrUtil.addColor(t.getSuccessCount()+"/"+t.getCount(),i);this.lbJinDu.textFlow=addColorTF(""+Lang.task_str3+n),this.sName=t.getConfig().name,this.desc=t.getConfig().desc,this.icon=t.getIcon(),this.eff.playFile(getEffName("jssg"+t.type),-1),this.imgYjh.visible=t.isAct()},e.prototype.onTabChange=function(t){var e=this.menuList.selectedItem;if(TaskSys.ins().agreementData.isOpen(e.type))this.selectedIndex=this.menuList.selectedIndex,this.updateListPanel();else{var i=TaskSys.ins().agreementData.isOpenData(e.type);showTipsWarn(Lang.task_str4.replace("$name$",i.getConfig().name)),this.menuList.selectedIndex=this.selectedIndex}},e.prototype.achieveSort=function(t,e){var i=0;return 1!=t.state&&1==e.state?1:1==t.state&&1!=e.state?-1:0!=t.state&&0==e.state?1:0==t.state&&0!=e.state?-1:0!=i?i:i},e.getTitle=function(){return"btz_zycs_emqy"},e.getTabTitle=function(){return"bqz_zycs_emqy"},e.getSysId=function(){return 1},e}(BasePanel);__reflect(QiYuePanel.prototype,"QiYuePanel"),window.QiYuePanel=QiYuePanel;var QiYueInfo=function(){function t(){this.id=0,this.type=0,this.value=0,this.state=0}return t.prototype.setType=function(t){this.type=t},t.prototype.setvalue=function(t){this.value=t},t.prototype.setstate=function(t){this.state=t},t.prototype.parser=function(t){this.id=t.readShort(),this.value=t.readDouble(),this.state=t.readByte()},t.prototype.isSuccess=function(){return this.state==RewardStatus.YiLinQu},t.prototype.chekReceive=function(){return this.state==RewardStatus.KeLinQu},t.prototype.getConfig=function(){return this.config||(this.config=Cfg.getConfig(AgreementConfig,this.type,this.id)),this.config},t.prototype.getShowProg=function(){if(5==this.getConfig().type){var t=this.value>=this.getConfig().target;return StrUtil.addColor(t?"（1/1）":"（0/1）",t?3821938:11870240)}return StrUtil.addColor("（"+this.value+"/"+this.getConfig().target+"）",this.value<this.getConfig().target?11870240:3821938)},t}();__reflect(QiYueInfo.prototype,"QiYueInfo");var TaskData=function(){function t(){this.id=1,this.value=0,this.state=0}return t.prototype.canGetAward=function(){return 1==this.state},t.prototype.hasGetAward=function(){return 2==this.state},t.prototype.isDoing=function(){return 0==this.state},t}();__reflect(TaskData.prototype,"TaskData");var ActData30_1=function(t){function e(){var e=t.call(this)||this;return e.myRank=0,e.score=0,e.rankDatas=[],e}return __extends(e,t),e.prototype.getConfigs=function(){return this.configs||(this.configs=Cfg.getConfigs(ActivityType30Config,this.actId,CondType.NONE))},e.prototype.parserRankData=function(t){this.rankDatas.length=0;for(var e=t.readByte(),i=0;e>i;i++){var n=new ActDataRank30_1;n.actid=this.actId,n.rank=i+1,n.roleName=t.readString(),n.score=t.readInt(),this.rankDatas.push(n)}this.myRank=t.readByte(),this.score=t.readInt()},e.prototype.getFirstRankData=function(){return this.rankDatas[0]},e.prototype.getItemDatas=function(){return[]},e}(ActDataBase);__reflect(ActData30_1.prototype,"ActData30_1");var ActDataRank30_1=function(){function t(){this.actid=1,this.rank=1,this.roleName="",this.score=0}return t}();__reflect(ActDataRank30_1.prototype,"ActDataRank30_1"),window.ActData30_1=ActData30_1;var TaskNavDataType1=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return __extends(e,t),e.prototype["goto"]=function(){t.prototype["goto"].call(this);var e=checkOpenWin(this.winName,this.winPage,this.winParam);if(e?this.succeedFrontFun.call():this.loserFun.call(),e){var i=openWin(this.winName,this.winPage,this.winParam),n=null!=i;n&&this.succeedFun.call()}},Object.defineProperty(e.prototype,"winName",{get:function(){return Cfg.getWinClassById(this.winSysId)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"winSysId",{get:function(){return this.controlTarget[1]},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"winPage",{get:function(){return this.controlTarget[2]},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"winParam",{get:function(){return this.controlTarget[3]},enumerable:!0,configurable:!0}),e}(TaskNavDataBase);__reflect(TaskNavDataType1.prototype,"TaskNavDataType1"),window.TaskNavDataType1=TaskNavDataType1;var ActData31_1=function(t){function e(){var e=t.call(this)||this;return e.rewards=[],e.rewardIndex=1,e.worldLogs=[],e.mylogs=[],e.total=0,e.totalMax=0,e.weightDec="",e}return __extends(e,t),e.prototype.parser=function(t){this.total=t.readInt()},e.prototype.parserLuckDraw=function(t){this.rewards.length=0;for(var e=t.readByte(),i=0;e>i;i++){var n=new ItemDataReward;n.parser2(t),this.rewards.push(n)}this.rewardIndex=t.readByte()},e.prototype.getConfig=function(){return Cfg.getConfig(ActivityType31Config,this.actId)[1]},e.prototype.canReward=function(){return!1},e.prototype.getConsume1=function(){return this.getConfig().drawcount[0][1]},e.prototype.getConsume10=function(){return this.getConfig().drawcount[1][1]},e.prototype.getRewardPool=function(){return this.getConfig().rewards},e.prototype.getWorldDec=function(){for(var t="",e=0,i=this.worldLogs;e<i.length;e++){var n=i[e];t+=n.getWorldDec()+"\n"}return t},e.prototype.getMyDec=function(){for(var t="",e=0,i=this.mylogs;e<i.length;e++){var n=i[e];t+=n.getMyDec()+"\n"}return t},e.prototype.getWeightDec=function(){if(""==this.weightDec){this.weightDec="积分达到一定值可以领取额外奖励。\n转盘概率：\n";var t=this.getConfig().gailvrewards.concat();SortUtil.sortOn(t,["per"],[SortType.up]);for(var e=0;e<t.length;e++){var i=GFunc.creatItemDataByReward(t[e]),n=i.cfg.getName();n+=i.count>1?"*"+i.count:"",this.weightDec+=addColor(n+"   "+t[e].per/100+"%",GConst.PZColor[i.quality])+"\n"}}return this.weightDec},e}(ActDataBase);__reflect(ActData31_1.prototype,"ActData31_1"),window.ActData31_1=ActData31_1;var TclyWin=function(t){function e(){var e=t.call(this)||this;return e.redPointHead=[ExtCom],e.winType=WinType.MainWin,e}return __extends(e,t),e.prototype.open=function(e){void 0===e&&(e=-1);for(var i=[],n=1;n<arguments.length;n++)i[n-1]=arguments[n];t.prototype.open.apply(this,[e].concat(i)),this.addLsn(ActSys.ins().patchActivityIsGetAwards,this.updateTabRedPoint)},e.getTitle=function(){return"btz_zycs_tcly"},e.prototype.updateTabRedPoint=function(t){void 0===t&&(t=null);for(var e=0;e<this.tab.numElements;e++){var i=this.getTabDatas()[e];(!t||t.check(this.getThisDef())&&t.check(i.id))&&this.updateTabRedPointByIndex(e)}this.updateRp(t)},e.prototype.getTabRedpoint=function(t){var e=egret.getQualifiedClassName(this),i=(this.getTabDatas()[t],[].concat(this.redPointHead).concat(e)),n=callFunc(RpSys.ins(),RpSys.ins().getData,i);return n},e.panelNames=[TclyPanel],e}(BaseWinAutoTab);__reflect(TclyWin.prototype,"TclyWin"),window.TclyWin=TclyWin;var TianMoEquipItem=function(t){function e(){var e=t.call(this)||this;return e.setSkinName(),e}return __extends(e,t),e.prototype.setSkinName=function(){this.skinName="TianMoEquipUpLevelItemEUI"},e.prototype.dataChanged=function(){var t=this.data,e=Cfg.getItemCfg(parseInt(t.getConfig().id[Actor.ins().job-1]));this.imgIcon.source=ResMgr.getItemIcon(e.getIcon(),IconType.IT_80x80),this.imgIcon.filters=t.isAct?[]:DisUtil.grayFilter(),this.lbLevel.text=t.showLevel()+"级",this.lbLevel.visible=this.imgLvBg.visible=t.getIsAct(),this.updateRedPoint()},e.prototype.updateRedPoint=function(){var t=this.data;t&&(this.redPoint.visible=RpSys.ins().getData(RoleWin,RolePanel,ShengLingWin,TianMoMainPanel,TianMoEquipUpLevelPanel,t.pos))},e.prototype.setSelectBG=function(t){this.imgSelect.visible=t},e}(BaseItemRender);__reflect(TianMoEquipItem.prototype,"TianMoEquipItem"),window.TianMoEquipItem=TianMoEquipItem;var ActData32_1=function(t){function e(){var e=t.call(this)||this;return e.myRank=0,e.score=0,e.rankDatas=[],e}return __extends(e,t),e.prototype.getConfigs=function(){return this.configs||(this.configs=Cfg.getConfigs(ActivityType32Config,this.actId,CondType.NONE))},e.prototype.parserRankData=function(t){this.rankDatas.length=0;for(var e=t.readByte(),i=0;e>i;i++){var n=new ActDataRank30_1;n.actid=this.actId,n.rank=i+1,n.roleName=t.readString(),n.score=t.readInt(),this.rankDatas.push(n)}this.myRank=t.readByte(),this.score=t.readInt()},e.prototype.getFirstRankData=function(){return this.rankDatas[0]},e.prototype.getItemDatas=function(){return[]},e}(ActDataBase);__reflect(ActData32_1.prototype,"ActData32_1"),window.ActData32_1=ActData32_1;var ActData33_1=function(t){function e(){var e=t.call(this)||this;return e.rankDatas=[],e.myRank=0,e.myValue=0,e}return __extends(e,t),e.prototype.parserRank=function(t){this.rankDatas.length=0;for(var e=t.readShort(),i=0;e>i;i++){var n=t.readString(),a=t.readInt(),o=new ActRankData33(i+1);o.roleName=""==n?Lang.act_str87:n,o.value=a,o.config=this.getConfig(i+1),this.rankDatas.push(o)}this.myRank=t.readShort(),this.myValue=t.readInt()},e.prototype.getEndRank=function(){return this.rankDatas.length>0?this.rankDatas[this.rankDatas.length-1]:null},e.prototype.getConfigs=function(){return this.configs||(this.configs=Cfg.getConfigs(ActivityType33Config,this.actId,CondType.NONE))},e}(ActDataBase);__reflect(ActData33_1.prototype,"ActData33_1");var ActRankData33=function(){function t(t){this.rank=1,this.roleName="",this.value=0,this.rank=t}return t}();__reflect(ActRankData33.prototype,"ActRankData33"),window.ActData33_1=ActData33_1;var TianMoMainPanel=function(t){function e(){var e=t.call(this)||this;return e.redPointHead=[RoleWin,RolePanel,ShengLingWin],e}return __extends(e,t),e.prototype.setSkinName=function(){this.skinName="SkillMainPanelEUI",this.tab.y=960},e.prototype.setTabItem=function(){this.tab.itemRenderer=BaseTabBtn3},e.getSysId=function(){return 338},e.getTitle=function(){return"btz_zycs_dlsz"},e.getTabTitle=function(){return"bqz_zycs_dlsz"},e.panelNames=[TianMoEquipUpLevelPanel,TianMoEquipUpRankPanel],e}(BaseTabPanel);__reflect(TianMoMainPanel.prototype,"TianMoMainPanel"),window.TianMoMainPanel=TianMoMainPanel;var kfSys=System.kfSys,TianShiShengDunPanel=function(t){function e(){var e=t.call(this)||this;e.imgStars=[],e.mcStars=[],e.radiobtns=[],e.lbitems=[],e.shuxingitems=[],e.upItemConfigs=[],e.selectItemIndex=2,e.longPressBtnUp=new LongPress,e.longPressAttrDan1=new LongPress,e.longPressAttrDan2=new LongPress,e.longPressAttrDan3=new LongPress,e.skinName="TianShiShengDunPanelEUI",e.btnAct.redPoint.visible=!0,e.listSkill.itemRenderer=TianShiShengDunSkillItem,e.listSkill.dataProvider=e.listSkillData=new eui.ArrayCollection,e.radiobtns=[e.radiobtn1,e.radiobtn2,e.radiobtn3],e.lbitems=[e.lbitem1,e.lbitem2,e.lbitem3],e.shuxingitems=[e.shuxingitem1,e.shuxingitem2,e.shuxingitem3],e.imgStars=[e.imgStar0,e.imgStar1,e.imgStar2,e.imgStar3,e.imgStar4,e.imgStar5,e.imgStar6,e.imgStar7,e.imgStar8,e.imgStar9];for(var i=0;i<e.imgStars.length;i++)e.mcStars[i]=new MC,e.mcStars[i].x=e.imgStars[i].x+20,e.mcStars[i].y=e.imgStars[i].y+20,e.groupStar.addChild(e.mcStars[i]);return e.proEff=new ProgressBarEff2,e.proEff.x=75,e.proEff.y=880,e.groupMc.addChild(e.proEff),e.mcBg=new MC,e.mcBg.x=361,e.mcBg.y=403,e.groupMc2.addChild(e.mcBg),e.mcBg.playFile(getEffName("tssd_fz"),-1),e.mcIcon=new MC,e.mcIcon.x=361,e.mcIcon.y=400,e.groupMc2.addChild(e.mcIcon),e}return __extends(e,t),e.prototype.open=function(){t.prototype.open.call(this),this.addClickE(this.btnAct,this.onClick),this.addClickE(this.btnUp,this.onClick),this.addItemTapE(this.listSkill,this.listTap),this.addLsn(TianShiShengDunSys.ins().patchInfo,this.updatePanel),this.addLsn(TianShiShengDunSys.ins().patchLevel,this.updatePanel),this.addLsn(TianShiShengDunSys.ins().patchAct,this.updateAct),this.addLsn(BagSys.ins().patchItemChange,this.updateItemChange),this.addLsn(RpSys.ins().patchRp,this.updateRp),this.longPressBtnUp.setDisplay(this.btnUp,this.upLevel,this),this.longPressAttrDan1.setDisplay(this.shuxingitem1,this.attrDan1,this),this.longPressAttrDan2.setDisplay(this.shuxingitem2,this.attrDan2,this),this.longPressAttrDan3.setDisplay(this.shuxingitem3,this.attrDan3,this);for(var e=0,i=this.radiobtns;e<i.length;e++){var n=i[e];this.addClickE(n,this.radiobtnClick)}for(var a=0,o=this.shuxingitems;a<o.length;a++){var s=o[a];this.addClickE(s,this.onArrDanItem)}this.proEff.reset(),this.updatePanel(),this.showOpenWing(),this.updateItemChange(),this.updateRp()},e.prototype.close=function(){t.prototype.close.call(this),this.longPressBtnUp.close(),this.longPressAttrDan1.close(),this.longPressAttrDan2.close(),this.longPressAttrDan3.close()},e.prototype.updateRp=function(t){void 0===t&&(t=null),(!t||t.check(e))&&(this.btnUp.redPoint.visible=RpSys.ins().getData(RoleWin,RolePanel,ShengLingWin,e,"up"))},e.prototype.updateAct=function(){this.btnAct.visible=!1,this.openAnimation()},e.prototype.updatePanel=function(t){void 0===t&&(t=!1),this.curData=TianShiShengDunSys.ins().shengDunData,this.currentState=this.curData.isMax()?"max":"normal",e.curStage=this.curData.getStage(),e.skillConfig=Cfg.getConfig(ShengdunSkillConfig,CondType.More,ShengdunSkillConfig.stage,e.curStage),this.imgStage.source="zuji_zycs_"+this.curData.getStage(),this.totalPower0.text=this.curData.isAct?""+this.curData.getPower():"0",this.mcIcon.playFile(getEffName("tssd_zycs_sd"+(this.curData.getStage()-1)),-1);for(var i=0;i<this.imgStars.length;i++){var n=this.imgStars[i];this.curData.getLevel()>i?(n.source="shenmo_zycs_zhu_02",this.mcStars[i].visible=!0,this.mcStars[i].name!=getEffName("sdgz2")&&this.mcStars[i].playFile(getEffName("sdgz2"),-1)):(n.source="shenmo_zycs_zhu_01",this.mcStars[i].visible=!1)}if(!this.curData.isMax()&&this.curData.getLevel()<this.imgStars.length){var a=this.curData.getLevel();this.mcStars[a].visible=!0,this.mcStars[a].name!=getEffName("sdgz1")&&this.mcStars[a].playFile(getEffName("sdgz1"),-1)}t&&this.curData.getLevel()>0&&(this.flameMC||(this.flameMC=new MC),this.flameMC.x=this.mcStars[this.curData.getLevel()-1].x,this.flameMC.y=this.mcStars[this.curData.getLevel()-1].y,this.groupStar.addChild(this.flameMC),this.flameMC.playFile(getEffName("sdbz1")));var o="",s=this.curData.getLvCfg().attr,r=AttrData.getFm(null,5767068,"","：");o=this.curData.isMax()?AttrData.parse(s,{fm:r}).join("\n")+addColor(Lang.forge_str12,15733780)+"\n":AttrData.parse(s,{fm:r}).join("\n")+"\n",this.labelAttr.textFlow=addColorTF(o),o="",s=this.curData.getNextLevelConfig().attr;for(var i=0;i<s.length;i++)o+=s[i].value+"\n";if(this.labelAttrNext.text=o,this.listSkillData.source=Cfg.getConfigs(ShengdunSkillConfig),this.curData.isMax())this.proEff.max(),this.groupConsume.visible=!1;else{this.curData.getLvCfg().exp>0?(this.btnUp.label=Lang.btn_ts,this.groupConsume.visible=!0):(this.btnUp.label=Lang.btn_jj,this.groupConsume.visible=!1);var u=this.curData.getLvCfg().exp;0==u?this.proEff.maxNoDesc():this.proEff.getMaxValue()!=u?this.proEff.setData(this.curData.exp,u):this.proEff.setValue(this.curData.exp)}this.updateItemChange()},e.prototype.updateItemChange=function(t){if(void 0===t&&(t=null),!t||t.cfg.type==ItemType.TianShiShengDunLinShi){this.upItemConfigs&&0!=this.upItemConfigs.length||(this.upItemConfigs=Cfg.getConfigs(UpItemConfig));for(var e=0;this.upItemConfigs.length>e;e++){var i=GFunc.getItemCount(this.upItemConfigs[e].itemid);this.lbitems[e].text=i+"/1",this.lbitems[e].textColor=i>0?GConst.PZColor[0]:15733780}var n=!0;if(GFunc.getItemCount(this.upItemConfigs[this.selectItemIndex].itemid)>0)n=!1,this.radiobtns[this.selectItemIndex].selected=!0;else for(var e=this.upItemConfigs.length-1;e>=0;e--){var i=GFunc.getItemCount(this.upItemConfigs[e].itemid);this.radiobtns[e].selected=!1,!t&&i>0&&n&&(this.radiobtns[e].selected=!0,this.selectItemIndex=e,n=!1)}n&&(this.radiobtns[this.selectItemIndex].selected=!0)}if(this.curData&&this.curData.attrDanDatas)for(var e=0;e<this.shuxingitems.length;e++)this.shuxingitems[e].data=this.curData.attrDanDatas[e]},e.prototype.openAnimation=function(){var t=this,e=new MC;e.x=347,e.y=453,e.playFile(getEffName("sdjh1")),this.groupOpen.addChild(e),Timer.ins()["do"](750,1,1,function(){var e=egret.Tween.get(t.imgbg1,{onChange:function(){t.imgbg2.x=346-t.imgbg1.x}});e.to({x:-346},500).call(function(){var e=new MC;e.x=347,e.y=453,e.playFile(getEffName("sdjh2"),1,function(){t.showOpenWing()}),t.groupOpen.addChild(e)})},this)},e.prototype.showOpenWing=function(){this.groupOpen.visible=!this.curData.isAct,this.btnAct.visible=!this.curData.isAct,this.groupOpen.visible&&(this.imgbg2.x=346,this.imgbg1.x=8)},e.prototype.listTap=function(t){var e=t.item;openWin(TianShiShengDunSkillTipsWin,e)},e.prototype.radiobtnClick=function(t){var e=this.radiobtns.indexOf(t.currentTarget);this.selectItemIndex=e},e.prototype.onArrDanItem=function(t){var e=t.currentTarget,i=e.data;this.attrDan(i)},e.prototype.attrDan1=function(){this.attrDan(this.shuxingitem1.data)},e.prototype.attrDan2=function(){this.attrDan(this.shuxingitem2.data)},e.prototype.attrDan3=function(){this.attrDan(this.shuxingitem3.data)},e.prototype.attrDan=function(t){var e=new ItemDataReward;e.id=t.config.itemid,e.count=BagSys.ins().getItemCount(e.id),e.maxCount=t.maxUseCount,e.shiyongCount=t.useCount,e.shiyongCount>=t.maxCount?(showtipsFail(Lang.tssd_str5),openWin(TianShiShengDunAttrDanTipsWin,e,Lang.tssd_str5)):e.count>0?e.shiyongCount>=e.maxCount?openWin(TianShiShengDunAttrDanTipsWin,e,Lang.tssd_str1):TianShiShengDunSys.ins().sendUseDanYao(t.id):openWin(TianShiShengDunAttrDanTipsWin,e,Lang.tssd_str1)},e.prototype.onClick=function(t){switch(t.target){case this.btnAct:TianShiShengDunSys.ins().sendAct();break;case this.btnUp:this.upLevel()}},e.prototype.upLevel=function(){if(this.curData.getLvCfg().exp>0){var t=this.upItemConfigs[this.selectItemIndex].itemid,e=BagSys.ins().getItemCount(t);if(0==e)return TipsSys.ins().setBuyGoodsWarn(t),void this.longPressBtnUp.stop()}TianShiShengDunSys.ins().sendLevel(this.selectItemIndex+1),showtipsSuc(Lang.tssd_str4+this.upItemConfigs[this.selectItemIndex].addexp)},e.getSysId=function(){return 337},e.getTitle=function(){return"btz_zycs_tssd"},e.getTabTitle=function(){return"bqz_zycs_tssd"},e.curStage=0,e.skillConfig=null,e}(BasePanel);__reflect(TianShiShengDunPanel.prototype,"TianShiShengDunPanel"),window.TianShiShengDunPanel=TianShiShengDunPanel;var VipWin=function(t){function e(){var e=t.call(this)||this;return e.winType=WinType.OverlayWin,e}return __extends(e,t),e.prototype.initUI=function(){t.prototype.initUI.call(this),this.addChangeE(this.tab,this.setGroup)},e.prototype.open=function(e){void 0===e&&(e=-1);for(var i=[],n=1;n<arguments.length;n++)i[n-1]=arguments[n];t.prototype.open.apply(this,[e].concat(i)),this.setGroup()},e.prototype.setGroup=function(){this.closeBtn.icon=this.tab.selectedIndex<=0?"public_zycs_quxiao":"svip_zycs_close",this.eGroup.visible=this.tab.selectedIndex<=0
},e.panelNames=[VipPanel,SVipPanel],e}(BaseWinAutoTab);__reflect(VipWin.prototype,"VipWin"),window.VipWin=VipWin;var StrengthenDaRenData=function(){function t(){this.level=0}return t.prototype.noActRank=function(){return 0==this.level},t.prototype.isMaxRank=function(){return this.level>=Cfg.getMaxConfig(EnhanceAddDaRenConfig).stage},t.prototype.canRank=function(){var t=this.getConfig(this.level);return!this.isMaxRank()&&BagSys.ins().getRoleBoostLevelNum(t.needlevel)>=this.getDaBiaoCount()},t.prototype.getDaBiaoCount=function(){return Cfg.getConfig(EquipConstConfig).darencount},t.prototype.getRankAttr=function(){for(var t=[],e=this.getConfig(this.level),i=BagSys.ins().equipDatas,n=0;n<i.length;n++){var a=i[n];if(a.strengthen>0)for(var o=Cfg.getConfig(EnhanceAttrConfig,a.cfg.subType,a.strengthen),s=0;s<o.attr.length;s++){var r=o.attr[s];if(r.type==AttrType.Atk){var u=new AttrData;u.type=AttrType.Atk,u.value=r.value*e.atkper/1e4,t.push(u)}if(r.type==AttrType.atHpMax){var u=new AttrData;u.type=AttrType.atHpMax,u.value=r.value*e.hpper/1e4,t.push(u)}}}return t},t.prototype.genPower=function(){return GFunc.getPower(this.getRankAttr())},t.prototype.getConfig=function(t){return Cfg.getEnhanceAddDaRenConfigById(t)},t}();__reflect(StrengthenDaRenData.prototype,"StrengthenDaRenData");var SVipTipsWin=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return __extends(e,t),e.prototype.setSkinName=function(){this.skinName="SVipTipsWinEUI"},e.prototype.initUI=function(){t.prototype.initUI.call(this),this.layer=LayerMgr.Popup,this.addBg(),this.setSkinPart("price",new PriceIcon),this.price.setType(CurType.yb),this.groupBuy.visible=!1},e.prototype.open=function(e){t.prototype.open.call(this),this.addClickE(this.btnOk,this.onTap),this.updatePanel(e)},e.openCheck=function(t){var e=!0,i=VipSys.ins().getCurSVipConfig(),n=Cfg.getNextVipExpBySysId(t),a=Cfg.getConfig(SVipConfig,n);if(Cfg.getVipCount(i,t)>=Cfg.getVipCount(a,t)){var o="";switch(t){case 276:o=Lang.act_str83;break;case 295:o=Lang.fb_str352;break;case 256:o=Lang.fb_str85;break;case 253:o=Lang.fb_str140;case 307:o=Lang.kfboss_str4;break;default:o=Lang.fruit_str7}showtipsFail(o),e=!1}return e},e.prototype.updatePanel=function(t){var e=VipSys.ins().getCurSVipConfig(),i=Cfg.getNextVipExpBySysId(t),n=Cfg.getConfig(SVipConfig,i),a=addColor("SVIP"+n.lv,65280);switch(a=Lang.fruit_str3.replace("$count$",a),this.lbTips.textFlow=addColorTF(a),this.curVip.text=""+e.lv,this.nextVip.text=""+n.lv,a="",t){case 256:case 253:a=Lang.vip_str5+"\n";break;default:a=Lang.vip_str4+"\n"}this.lbCountL.textFlow=addColorTF(a+addColor(""+Cfg.getVipCount(e,t),65280)+Lang.common_ci),this.lbCountR.textFlow=addColorTF(a+addColor(""+Cfg.getVipCount(n,t),65280)+Lang.common_ci)},e.prototype.onTap=function(t){openWin(RechargeWin),closeWin(e)},e}(BaseWinSingle);__reflect(SVipTipsWin.prototype,"SVipTipsWin"),window.SVipTipsWin=SVipTipsWin;var ForgeBoostDaRenWin=function(t){function e(){return t.call(this)||this}return __extends(e,t),e.prototype.initUI=function(){this.skinName="XingHunAttrWinEUI",this.imgTitle.source="qianghua_zycs_qhdr",this.addBg(),t.prototype.initUI.call(this),this.layer=LayerMgr.Popup},e.prototype.open=function(e){t.prototype.open.call(this),this.strengthenData=e,this.addClickE(this.btnUp,this.onClick),this.addLsn(ForgeSys.ins().patchStrengthenUpRank,this.update),this.addLsn(RpSys.ins().patchRp,this.updateRp),this.update(),this.updateRp()},e.prototype.updateRp=function(t){void 0===t&&(t=null),(!t||t.check(this))&&(this.btnUp.redPoint.visible=RpSys.ins().getData(ForgeWin,ForgeBoostPanel,this))},e.prototype.update=function(){var t=this.strengthenData;this.totalPower.text=t.genPower().toFixed(),this.bitLevel.text="."+t.level+"r";var e=this.getConfig(t.level),i=BagSys.ins().getRoleBoostLevelNum(e.needlevel),n=this.getConfig(t.noActRank()?0:t.level-1),a="强化攻击"+addColor("+"+e.atkper/100+"%",12704255)+"\n强化生命"+addColor("+"+e.hpper/100+"%",12704255);this.lbCurAttr.textFlow=t.noActRank()?addColorTF(Lang.xh_str9,15129784):addColorTF(a);var o=t.getDaBiaoCount(),s=t.canRank(),r=t.level>=n.stage,u=r?addColor(Lang.common_str40,12704255):addColor("("+i+"/"+o+")",s?9094450:15733780);if(this.lbCurLevel.textFlow=t.noActRank()?addColorTF(Lang.xh_str4,15129784):addColorTF("当前阶段 "+t.getDaBiaoCount()+"件装备强化+"+n.needlevel+u),!t.isMaxRank()){var h=this.getConfig(t.level+1),l=this.getConfig(t.noActRank()?0:t.level),p="强化攻击"+addColor("+"+h.hpper/100+"%",12704255)+"\n强化生命"+addColor("+"+h.atkper/100+"%",12704255);this.lbNextAttr.textFlow=addColorTF(p);var c=t.getDaBiaoCount(),d=i>=c,g=addColor("("+i+"/"+c+")",d?5949490:15733780);this.lbNextLevel.textFlow=addColorTF("下一阶段  "+t.getDaBiaoCount()+"件装备强化+"+l.needlevel+g)}t.noActRank()?this.currentState=s?"canAct":"noAct":t.isMaxRank()?this.currentState="max":s?this.currentState="upRank":this.currentState="noRank"},e.prototype.onClick=function(t){switch(t.currentTarget){case this.btnUp:this.strengthenData.canRank()&&ForgeSys.ins().sendStrengthenUpRank(this.type())}},e.prototype.getConfig=function(t){return Cfg.getEnhanceAddDaRenConfigById(t)},e.prototype.type=function(){return 1},e}(BaseWinSingle);__reflect(ForgeBoostDaRenWin.prototype,"ForgeBoostDaRenWin"),window.ForgeBoostDaRenWin=ForgeBoostDaRenWin;var ActData34_1=function(t){function e(){var e=t.call(this)||this;return e.myRank=0,e.lastDabiao=0,e.dabiao=0,e.rankDatas=[],e}return __extends(e,t),e.prototype.getConfigs=function(){return this.configs||(this.configs=Cfg.getConfigs(ActivityType34Config,this.actId,CondType.NONE))},e.prototype.parserRankData=function(t){this.rankDatas.length=0;for(var e=t.readShort(),i=0;e>i;i++){var n=new ActDataRank34_1;n.rank=i+1;var a=t.readString();n.roleName=""==a?Lang.act_str87:a;var o=t.readDouble();n.value=""!=a?o:this.getConfigByRank(n.rank).value,n.config=this.getConfig(i+1),this.rankDatas.push(n)}this.myRank=t.readShort(),this.dabiao=t.readDouble()},e.prototype.parserRankAppearance=function(t){},e.prototype.getFirstRankData=function(){return this.rankDatas[0]},e.prototype.getNextRank=function(){var t;return this.rankDatas.length>0&&(t=0==this.myRank?this.rankDatas[this.rankDatas.length-1]:1==this.myRank?this.getFirstRankData():this.rankDatas[this.myRank-2]),t},e.prototype.getConfigByRank=function(t){var e,i=this.getConfigs();for(var n in i){var a=i[n];if(a.ranking[0]<=t&&t<=a.ranking[1]){e=a;break}}return e},e.prototype.getItemDatas=function(){return[]},e.prototype.getItemRankData=function(t){var e=new SevenDayRankItemData,i=RankSys.ins().getRankData(GConst.rankType[Actor.ins().serverOpenDay]).getFullDatalist().concat();this.getConfig(t);return e.config=this.getConfig(t),e.rankName=Lang.act_str9[Actor.ins().serverOpenDay],e.rankTxt=t>3?"4-20"+Lang.common_str5:"",i.length>=t?(e.playerName=i[t-1].playerName,e.rankValue=RankSys.ins().getRankNumber(i[t-1],GConst.rankType[Actor.ins().serverOpenDay])):(e.playerName=Lang.act_str11,e.rankValue=0),e},e}(ActDataBase);__reflect(ActData34_1.prototype,"ActData34_1"),window.ActData34_1=ActData34_1;var ActDataRank34_1=function(){function t(){this.rank=1,this.roleName="",this.value=0}return t}();__reflect(ActDataRank34_1.prototype,"ActDataRank34_1"),window.ActDataRank34_1=ActDataRank34_1;var ActData36_1=function(t){function e(){var e=t.call(this)||this;return e.myRank=0,e.myMeiLiValue=0,e.actData36_1Ranks=[],e.job=JobConst.ZhanShi,e.sex=0,e.szId=0,e.sqId=0,e.wingId=0,e.shengLingId=0,e.meilinId=0,e.damonId=0,e}return __extends(e,t),e.prototype.parserUpdate=function(t){var e=this.getConfigs(),i=0;for(var n in e){var a=e[n];if(!this.actData36_1Ranks[i]){var o=new ActData36_1Rank;o.activityType36Config=a,this.actData36_1Ranks[i]=o}i++}for(var s=t.readShort(),r=0;s>r;r++){var o=this.actData36_1Ranks[r];o.parser(t),this.actData36_1Ranks[r]=o}this.myRank=t.readShort(),this.myMeiLiValue=t.readInt(),this.job=t.readByte(),this.sex=t.readByte(),this.szId=t.readInt(),this.sqId=t.readInt(),this.wingId=t.readInt(),this.shengLingId=t.readInt(),this.meilinId=t.readInt(),this.damonId=t.readInt()},e.prototype.getConfigs=function(){return this.configs||(this.configs=Cfg.getConfigs(ActivityType36Config,this.actId,CondType.NONE))},e.prototype.redPointAdd=function(){return!1},e.prototype.redPoint=function(){return!1},e}(ActDataBase);__reflect(ActData36_1.prototype,"ActData36_1"),window.ActData36_1=ActData36_1;var ActData36_1Rank=function(){function t(){this.actorId=0,this.name="",this.job=JobConst.ZhanShi,this.sex=0,this.value=0,this.count=0,this.actData36_1ShouHus=[]}return t.prototype.parser=function(t){this.actorId=t.readInt(),this.name=t.readString(),this.job=t.readByte(),this.sex=t.readByte(),this.value=t.readInt(),this.count=t.readShort();for(var e=t.readByte(),i=0;2>i;i++){var n=this.actData36_1ShouHus[i]||new ActData36_1ShouHu;n.activityType36Config=this.activityType36Config,this.actData36_1ShouHus[i]=n}for(var i=0;e>i;i++){var n=this.actData36_1ShouHus[i]||new ActData36_1ShouHu;n.activityType36Config=this.activityType36Config,n.parser(t),n.activityType36Config=this.activityType36Config}},t.prototype.hasPlayer=function(){return""!=this.name},t}();__reflect(ActData36_1Rank.prototype,"ActData36_1Rank"),window.ActData36_1Rank=ActData36_1Rank;var ActData36_1ShouHu=function(){function t(){this.name="",this.job=JobConst.ZhanShi,this.sex=0,this.sendValue=0}return t.prototype.parser=function(t){this.name=t.readString(),this.job=t.readByte(),this.sex=t.readByte(),this.sendValue=t.readInt()},t.prototype.hasPlayer=function(){return""!=this.name},t}();__reflect(ActData36_1ShouHu.prototype,"ActData36_1ShouHu"),window.ActData36_1ShouHu=ActData36_1ShouHu;var ForgeItem=function(t){function e(){var e=t.call(this)||this;return e.level=0,e.setSkinName(),e.clear(),e}return __extends(e,t),e.prototype.setSkinName=function(){this.skinName="ForgeItemEUI",this.mc=new MC,this.groupMc.addChild(this.mc)},e.prototype.updateRedPoint=function(){var t=this.data;this.redPoint.visible=RpSys.ins().getData(ForgeWin,ForgeFosterPanel,t.equipPos)},e.prototype.setRedPoint=function(t){this.redPoint.visible=t},e.prototype.dataChanged=function(){this.clear();var t=this.data;t.hasEquipOn()?(this.imgIcon.source=ResMgr.getItemIcon(t.cfg.getIcon(),IconType.IT_80x80),this.imgEquipBg.source=ResMgr.getEquipQualityBg(t.cfg.quality),this.bitRank.text=t.cfg.rank+"r",t.cfg.quality>=QualityType.Green?this.mc.playFile(ResMgr.getEquipEffResource(t.cfg.quality),-1):(this.mc.visible=!1,this.mc.stop())):(this.imgIcon.source="",this.imgEquipBg.source=ResMgr.getEquipDefaultIcon(t.equipPos),this.bitRank.text=""),this.imgLock.visible=!t.hasEquipOn(),this.imgLock.source=GFunc.isRing(t.equipPos)?"public_zycs_jh1":"qianghua_zycs_suo",this.updateRedPoint()},e.prototype.setlv=function(t,e){void 0===e&&(e="+"),this.level=t,t>=1?(this.totalPower.visible=!0,this.totalPower.text=e+t):this.totalPower.visible=!1},e.prototype.clear=function(){this.imgIcon.source=null,this.totalPower.visible=!1},e.prototype.setCanStrengthen=function(t){},e.prototype.setSelectBG=function(t){this.imgSelect.visible=t},e}(BaseItemRender);__reflect(ForgeItem.prototype,"ForgeItem"),window.ForgeItem=ForgeItem;var GuaJiKuaiSuWin=function(t){function e(){return t.call(this)||this}return __extends(e,t),e.prototype.setSkinName=function(){this.skinName="GuaJiKuaiSuWinEUI"},e.prototype.initUI=function(){t.prototype.initUI.call(this),this.layer=LayerMgr.Popup,this.addBg(),this.setSkinPart("price",new PriceIcon),this.price.setType(CurType.yb),this.price.scaleX=0,this.price.visible=!1,this.list.itemRenderer=ItemBaseRewardName,this.list.dataProvider=this.listData=new eui.ArrayCollection,this.group1.visible=!urlParam.isShenhe},e.prototype.open=function(){t.prototype.open.call(this),this.addClickE(this.btnYueka,this.onClick),this.addClickE(this.btnZhiZun,this.onClick),this.addClickE(this.btnSend,this.onClick),this.addClickE(this.btnAdd,this.onClick),this.addLsn(FbSys.ins().patchGuaJiKsgjUp,this.updateReward),this.addLsn(FbSys.ins().patchGuaJiKsgjBuy,this.updatePanel),this.addLsn(FbSys.ins().patchGuaJiKsgjBuy,this.updatePanel),this.addLsn(RpSys.ins().patchRp,this.updateRp),this.updatePanel(),this.updateRp(),FbSys.ins().sendGuaJiKsgj(1)},e.prototype.updateRp=function(t){(!t||t.check(GuaJiPanel))&&(this.btnSend.redPoint.visible=RpSys.ins().getData(GuanJiWin,GuaJiPanel,e))},e.prototype.updateReward=function(t,e){1==t&&(this.listData.source=e),this.updatePanel()},e.prototype.updatePanel=function(){this.dataModel=FbSys.ins().guajiData;var t=ActSys.ins().getActDataById(ActId.ID_99900);this.btnYueka.filters=t.isInYueKaTime()?[]:DisUtil.grayFilter(),this.lbYueka.visible=!t.isInYueKaTime();var e=ActSys.ins().getActDataById(ActId.ID_99500);this.btnZhiZun.filters=e.isAct()?[]:DisUtil.grayFilter(),this.lbZhuZun.visible=!e.isAct();var i=this.dataModel.getKsgjSdConsume();i>0?(this.lbPrice.text=Lang.gj_str23,this.lbPrice.textColor=5767068,this.price.scaleX=1,this.price.visible=!0,this.price.setPrice(i)):(this.lbPrice.text=Lang.gj_str22,this.lbPrice.textColor=1176860,this.price.scaleX=0,this.price.visible=!1);var n=this.dataModel.getKsgjSdCount(),a=Cfg.getGuajiConstConfig().quickCount,o=Lang.gj_str9+addColor(n+"/"+a,n>0?1176860:16711680);this.lbCount.textFlow=addColorTF(o)},e.prototype.onClick=function(t){switch(t.currentTarget){case this.btnYueka:openWin(YKWin),closeWin(e);break;case this.btnZhiZun:openWin(ZZTQWin),closeWin(e);break;case this.btnSend:if(this.dataModel.getKsgjSdCount()<=0)return void showtipsFail(Lang.fb_str61);if(!GFunc.isCurrency(CurType.yb,this.dataModel.getKsgjSdConsume()))return void showtipsFail(Lang.damon_str35);FbSys.ins().sendGuaJiKsgj(2);break;case this.btnAdd:if(0==this.dataModel.getKsgjBuyCount())return void openWin(SVipTipsWin,249);var i=GFunc.creatRewardDataById(CurType.yb,this.dataModel.getKsgjBuyConsume()),n=new PopupPriceData(Lang.gj_str25);n.priceValue=i.count,n.priceType=i.id,n.setFunction(this,function(){GFunc.checkConsumeEnough(i)&&FbSys.ins().sendGuaJiKsgjBuy()}),openWin(CommonTipsWinNew,n)}},e.openCheck=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return GFunc.checkSysOpen(257)},e}(BaseWinSingle);__reflect(GuaJiKuaiSuWin.prototype,"GuaJiKuaiSuWin"),window.GuaJiKuaiSuWin=GuaJiKuaiSuWin;var GuanJiWin=function(t){function e(){var e=t.call(this)||this;return e.winType=WinType.MainWin,e}return __extends(e,t),e.prototype.getBtnSend=function(){return this.getPanel(GuaJiPanel).getBtnSend()},e.prototype.getImgTouch=function(){return this.getPanel(GuaJiPanel).getImgTouch()},e.panelNames=[GuaJiPanel],e}(BaseWinAutoTab);__reflect(GuanJiWin.prototype,"GuanJiWin"),window.GuanJiWin=GuanJiWin;var ForgeWin=function(t){function e(){var e=t.call(this)||this;return e.winType=WinType.MainWin,e}return __extends(e,t),e.prototype.getGridByPos=function(t){return this.validateNow(),this.getPanel(ForgeBoostPanel).getGridByPos(t)},e.prototype.getLessGrid=function(){return this.validateNow(),this.getPanel(ForgeBoostPanel).getLessGrid()},e.prototype.getBtnBoost=function(){return this.getPanel(ForgeBoostPanel).getBtnBoost()},e.prototype.getBtnOneKey=function(){return this.getPanel(ForgeBoostPanel).getBtnOneKey()},e.prototype.getGemPanel_BtnOneKey=function(){return this.getPanel(GemPanel).getBtnOneKey()},e.prototype.getBtnClose=function(){return this.closeBtn},e.prototype.getZhuijia=function(){return this.getPanel(ForgeAddLvevlPanel).getZhuijia()},e.prototype.getPeiyangGridByPos=function(t){return this.validateNow(),this.getPanel(ForgeFosterPanel).getGridByPos(t)},e.prototype.getBtnPeiyang=function(){return this.getPanel(ForgeFosterPanel).getBtnPeiyang()},e.panelNames=[ForgeBoostPanel,GemPanel,DaZaoMainPanel,ForgeAddLvevlPanel,ForgeFosterPanel,PurifyPanel],e}(BaseWinAutoTab);__reflect(ForgeWin.prototype,"ForgeWin"),window.ForgeWin=ForgeWin;var XianLuSys=function(t){function e(){var e=t.call(this)||this;return e.qmLv=0,e.qmExp=0,e.jieyuanType=0,e.xianLuName="",e.downTime=0,e.jieyuanTime=0,e.rewardLv=0,e.rangList=[],e.otherSex=1,e.dayTaskList=[],e.longTaskList=[],e.xianYuanList=[],e.isSendJieyuan=!1,e.hadHongBao=!1,e.tempType=0,e.isSearch=!1,e.tabIndex=0,e.sysId=PackId.Xianlu,e.reg(1,e.updateMyXianyuan),e.reg(2,e.updateXianyuanList),e.reg(3,e.updateJieyuanError),e.reg(5,e.updateXianyuanInfo),e.reg(8,e.updateXianyuanTaskInfo),e.reg(30,e.updateXianyuanHBInfo),e.reg(31,e.openXianyuanHBInfo),e}return __extends(e,t),e.ins=function(){return t.getIns.call(this,e)},Object.defineProperty(e.prototype,"totalPower",{get:function(){return 0},enumerable:!0,configurable:!0}),e.prototype.isJieYuan=function(){return this.jieyuanType>0},e.prototype.getImgStr=function(){var t="",e=Actor.ins().sex;return 0==e&&0==this.otherSex?t="xianlu_img_yjy3":0==e&&1==this.otherSex?t="xianlu_img_yjy":1==e&&0==this.otherSex?t="xianlu_img_yjy1":1==e&&1==this.otherSex&&(t="xianlu_img_yjy2"),t},e.prototype.QMDIsMax=function(){return this.qmLv>=Cfg.getXianluQMDMaxLv()},e.prototype.isOnline=function(){return this.downTime<=0},e.prototype.sendReleaseXianyuan=function(t,e,i,n){void 0===n&&(n="");var a=this.getBytes(1);a.writeByte(t);var o=e.length;a.writeByte(o);for(var s=0;o>s;s++)a.writeShort(e[s]);a.writeByte(i),a.writeString(n),this.send(a)},e.prototype.updateMyXianyuan=function(t){for(var e=new XianYuanData(t),i=0;i<this.xianYuanList.length;i++)if(this.xianYuanList[i].actorId==e.actorId){this.xianYuanList.splice(i,1);break}this.xianYuanList.unshift(e),showtipsSuc("发布成功")},e.prototype.sendXianyuanList=function(t,e,i){void 0===i&&(i=100);var n=this.getBytes(2);n.writeByte(t);var a=e.length;n.writeByte(a);for(var o=0;a>o;o++)n.writeShort(e[o]);n.writeByte(i),this.send(n),this.tempType=t},e.prototype.updateXianyuanList=function(t){var e=t.readByte();if(this.isSearch){if(e>0){this.xianYuanList=[];for(var i=0;e>i;i++)this.xianYuanList.push(new XianYuanData(t))}else showtipsFail("搜索对象未发布仙缘信息");this.isSearch=!1}else{this.xianYuanList=[];for(var i=0;e>i;i++)this.xianYuanList.push(new XianYuanData(t))}},e.prototype.sendRequestJieyuan=function(t,e){var i=this.getBytes(3);i.writeInt(t),i.writeInt(e),this.send(i),this.isSendJieyuan=!0},e.prototype.updateJieyuanError=function(t){var e=t.readByte();1==e&&(showtipsFail("对方已结缘"),this.sendXianyuanList(this.tempType,[]))},e.prototype.sendDissolutionJieyuan=function(){this.sendBase(4)},e.prototype.sendXianyuanInfo=function(){this.sendBase(5)},e.prototype.updateXianyuanInfo=function(t){this.ringId=t.readInt();var e=t.readByte();this.rangList=[];for(var i=0;e>i;i++)this.rangList.push(t.readInt());if(this.jieyuanType=t.readByte(),this.jieyuanType>0){this.qmLv=t.readShort(),this.qmExp=t.readInt(),this.xianLuName=t.readString(),this.otherSex=t.readByte(),this.downTime=t.readInt();var n=DateUtil.formatMiniDateTime(t.readInt());this.jieyuanTime=Actor.ins().serverTime-n>0?Actor.ins().serverTime-n:0,this.rewardLv=t.readShort()}this.isJieYuan()&&this.isSendJieyuan&&(showtipsSuc("恭喜您结缘成功"),closeWin(XianluJieYuanWin),closeWin(XianLuListWin),openWin(XianLuWin),this.isSendJieyuan=!1),RpFun.showXianluRp(),RpFun.showXianluTaskRp()},e.prototype.sendUpgradeQm=function(){this.sendBase(6)},e.prototype.sendGetReward=function(){this.sendBase(7)},e.prototype.sendTaskInfo=function(){this.sendBase(8)},e.prototype.updateXianyuanTaskInfo=function(t){var e=t.readByte();this.dayTaskList=[];for(var i=0;e>i;i++)this.dayTaskList.push(new XianluTaskData(t));this.longTaskList=[];for(var n=t.readByte(),i=0;n>i;i++)this.longTaskList.push(new XianluTaskData(t));RpFun.showXianluTaskRp()},e.prototype.sendUseRing=function(t){var e=this.getBytes(9);e.writeInt(t),this.send(e)},e.prototype.sendGetTaskReward=function(t,e){var i=this.getBytes(10);i.writeByte(t),i.writeInt(e),this.send(i)},e.prototype.sendSearch=function(t){this.isSearch=!0;var e=this.getBytes(11);e.writeString(t),this.send(e)},e.prototype.updateXianyuanHBInfo=function(t){var e=t.readByte();this.hadHongBao=1==e},e.prototype.sendOpenHongbao=function(){this.sendBase(31)},e.prototype.openXianyuanHBInfo=function(t){var e=t.readByte();if(1==e){var i=t.readByte();this.hadHongBao=1==i;var n=new XianYuanHongBaoData;n.parse(t),this.xyHongBaodata=n,2==this.xyHongBaodata.type&&openWin(XianluHBWin)}else this.hadHongBao=!1,showtipsFail("手慢了，红包派完了")},e.prototype.getSkills=function(){var t=[],e=Cfg.getConfigs(MateRingConfig);for(var i in e)t.push(e[i].skill);var n=SkillSys.ins().getSkillPassivityDatasByIds(t);return n},e.prototype.checkIsEdit=function(t){for(var e=Cfg.getConfigs(MateReqStrConfig),i=0,n=e;i<n.length;i++){var a=n[i];if(a.msg==t)return a.id}return 0},e.prototype.getCurrCg=function(){var t=Cfg.getConfig(MateLevelConfig),i=(e.ins().qmLv,e.ins().rewardLv);for(var n in t)if(t[n].lv>i&&t[n].award.length>0)return t[n];return null},e.prototype.ShowYdssRule=function(){if(!GFunc.isSysOpen(353))return!1;if(!ActSys.ins().getBtnConfigs(ActOnPlace.YDSS).length)return!1;var t=ActSys.ins().getActDataById(2003);if(t)for(var e=0,i=t.buyDatas;e<i.length;e++){var n=i[e];if(0==n.count)return!0}var a=ActSys.ins().getActDataById(2002),o=a&&a.getActOpenState()==ActOpenState.Open;return o},__decorate([post()],e.prototype,"updateMyXianyuan",null),__decorate([post()],e.prototype,"updateXianyuanList",null),__decorate([post()],e.prototype,"updateXianyuanInfo",null),__decorate([post()],e.prototype,"updateXianyuanTaskInfo",null),__decorate([post()],e.prototype,"updateXianyuanHBInfo",null),__decorate([post()],e.prototype,"openXianyuanHBInfo",null),e}(BaseSys);__reflect(XianLuSys.prototype,"XianLuSys");var System;!function(t){t.xianLuSys=XianLuSys.ins.bind(XianLuSys)}(System||(System={})),window.XianLuSys=XianLuSys;var XianluPanel=function(t){function e(){var e=t.call(this)||this;return e.skinName="XianluPanelEUI",e.lbway.textFlow=addColorTF(e.lbway.text,e.lbway.textColor,!0),e.skillList.itemRenderer=SkillPassivityItem,e.skillList.dataProvider=e.skillListdata=new eui.ArrayCollection,e}return __extends(e,t),e.prototype.open=function(){t.prototype.open.call(this),this.addClickE(this,this.onClick),this.addItemTapE(this.skillList,this.onSkillItem),this.addLsn(XianLuSys.ins().updateXianyuanInfo,this.updateView),this.addLsn(RpSys.ins().patchRp,this.updateRp),this.addLsn(BagSys.ins().patchItemChange,this.updateView),this.addLsn(SkillSys.ins().patchSkillPassivityUp,this.updateSkill),this.tempLv=XianLuSys.ins().qmLv,XianLuSys.ins().sendXianyuanInfo(),this.updateView(),this.updateRp()},e.prototype.updateSkill=function(){this.skillListdata.source=XianLuSys.ins().getSkills(),this.updatePower()},e.prototype.updatePower=function(){for(var t=0,e=XianLuSys.ins().getSkills(),i=0,n=e;i<n.length;i++){var a=n[i];t+=a.getPower()}var o=XianLuSys.ins().ringId,s=GFunc.creatRewardDataById(o),r=GFunc.getPower(s.config.pattr);t+=r,this.bmpLabelPower.text=""+t},e.prototype.updateConsume=function(){if(XianLuSys.ins().isJieYuan()){var t=Cfg.getConfig(MateCommonConfig).expItem,e=BagSys.ins().getItemCount(t),i=e?16770953:15733780,n=Cfg.getItemCfg(t);this.consumeIcon.source=ResMgr.getItemIcon(n.getIcon()),this.lbConsume.textFlow=addColorTF(addColor(e,i)+"/1")}},e.prototype.updateRp=function(){this.taskBtn.redPoint.visible=RpSys.ins().getData(XianLuWin,e,XianluTaskWin),this.rewardBtn.redPoint.visible=RpSys.ins().getData(XianLuWin,e,"canGet"),this.btnOnekey.redPoint.visible=RpSys.ins().getData(XianLuWin,e,"canUp")},e.prototype.updateView=function(){var t=XianLuSys.ins();this.validateNow(),this.updateSkill();var e="unmarried";t.isJieYuan()&&(e="married",t.QMDIsMax()&&(e="max"),this.updateMateView()),this.currentState=e},e.prototype.updateMateView=function(){var t=XianLuSys.ins(),e=Actor.ins().myName+addColor("    在线",5767068);this.lbname0.textFlow=addColorTF(e);var i=Math.floor(XianLuSys.ins().jieyuanTime/DateUtil.MS_PER_DAY)+1;this.lbDay.text="结缘"+i+"天";var n=t.xianLuName;if(0==t.downTime)n+=addColor("    在线",5767068);else{var a=(Actor.ins().serverTime-DateUtil.formatMiniDateTime(t.downTime))/1e3;n+=a>=DateUtil.SECOND_PER_DAY?StrUtil.addColor("  ("+getFormatTime(a,"dd天前",!1)+")",15733780):a>=DateUtil.SECOND_PER_HOUR?StrUtil.addColor("  ("+getFormatTime(a,"hh小时前",!1)+")",15733780):a>=DateUtil.SECOND_PER_MUNITE?StrUtil.addColor("  ("+getFormatTime(a,"mm分钟前",!1)+")",15733780):StrUtil.addColor("  (1分钟前)",15733780)}this.lbname1.textFlow=addColorTF(n),this.marriedImg.source=t.getImgStr(),this.lbLv.text="亲密度\nLv."+t.qmLv;var o=Cfg.getConfig(MateLevelConfig,t.qmLv);if(t.QMDIsMax())this.barExp.value=1,this.barExp.maximum=1,this.barExp.labelDisplay.visible=!1;else{if(this.barExp.slideDuration=500,t.qmLv>this.tempLv){this.tempLv=t.qmLv;var s=this.barExp.maximum;this.barExp.value=s,this.updateExp()}else this.barExp.value=t.qmExp,this.barExp.maximum=o.needExp;this.barExp.labelDisplay.visible=!0}this.updateConsume()},e.prototype.updateExp=function(){this.barExp.slideDuration=0;var t=XianLuSys.ins(),e=Cfg.getConfig(MateLevelConfig,t.qmLv);this.barExp.value=t.qmExp,this.barExp.maximum=e.needExp},e.prototype.onSkillItem=function(t){var e=t.item;return XianLuSys.ins().isJieYuan()?void openWin(SkillPassivityUpWin,e):void showtipsFail(e.level>0?"需要结缘后才可升级":"需要结缘后才可激活")},e.prototype.onClick=function(t){switch(t.target){case this.fenliBtn:openWin(XianluFenliWin);break;case this.listBtn:case this.btnSearch:openWin(XianLuListWin);break;case this.chatBtn:openWin(ChatWin,4),closeWin(XianLuWin);break;case this.taskBtn:openWin(XianluTaskWin);break;case this.btnOnekey:var e=Cfg.getConfig(MateCommonConfig).expItem,i=BagSys.ins().getItemCount(e);if(1>i)return void this.getGoodsWarn();XianLuSys.ins().sendUpgradeQm();break;case this.rewardBtn:openWin(XianluQmRewardWin);break;case this.lbway:this.getGoodsWarn()}},e.prototype.getGoodsWarn=function(){var t=Cfg.getConfig(MateCommonConfig).expItem;openWin(ShopGoodsWarn,t)},e.getSysId=function(){return 351},e.getTitle=function(){return"xianlu_title_xl"},e.getTabTitle=function(){return"bqz_zycs_xianlu"},__decorate([callDelay(400)],e.prototype,"updateExp",null),e}(BasePanel);__reflect(XianluPanel.prototype,"XianluPanel"),window.XianluPanel=XianluPanel;var XianluTaskMainPanel=function(t){function e(){var e=t.call(this)||this;return e.redPointHead=[XianLuWin,XianluPanel,XianluTaskWin],e}return __extends(e,t),e.prototype.open=function(e){void 0===e&&(e=-1),t.prototype.open.call(this,e)},e.prototype.setSkinName=function(){this.skinName="XianluTaskMainPanelEUI"},e.prototype.setTabItem=function(){this.tab.itemRenderer=BaseTabBtn5},e.getTitle=function(){return"xianlu_title_xyrw"},e.getTabTitle=function(){return"bqz_zycs_xianluTask"},e.panelNames=[XianluTaskPanel,XianluTaskZSPanel],e}(BaseTabPanel);__reflect(XianluTaskMainPanel.prototype,"XianluTaskMainPanel"),window.XianluTaskMainPanel=XianluTaskMainPanel;var DateUtil=function(){function t(){}return t.baseTime=function(t,e,i,n){for(var a=[],o=[],s=0,r=i;s<r.length;s++){var u=r[s];o.push(e.indexOf(u))}for(var u=0;u<o.length;u++){var h=o[u];if(~h){void 0==a[0]&&(a[0]=h?e.slice(0,h):"");for(var l=e.length,p=u+1;p<o.length;p++)if(o[p]>=0){l=Math.min(l,o[p]);break}a[u+1]=e.slice(h,l)}else a[u+1]=""}for(var u in a){var c=t[+u-1];a[+u-1]||a[u]&&c?a[u]=a[u].replace(i[+u-1],n&&10>c?"0"+c:c+""):a[u]=""}return a.join("")},t.formatTime=function(t,e,i){void 0===e&&(e="dd天hh小时mm分钟"),void 0===i&&(i=!0);var n=[Math.floor(t/this.MS_PER_DAY),Math.floor(t/this.MS_PER_HOUR)%24,Math.floor(t/this.MS_PER_MINUTE)%60,Math.floor(t/this.MS_PER_SECOND)%60],a=["dd","hh","mm","ss"];return this.baseTime(n,e,a,i)},t.formatDayTime=function(t,e,i){void 0===e&&(e="yy年mo月dd天hh小时mm分ss秒"),void 0===i&&(i=!0);var n=new Date(t),a=[n.getFullYear(),n.getMonth()+1,n.getDate(),n.getHours(),n.getMinutes(),n.getSeconds()],o=["yy","mo","dd","hh","mm","ss"];return this.baseTime(a,e,o,i)},t.isDayTime=function(t){return t>=this.MS_PER_DAY},t.isHourTime=function(t){return t>=this.MS_PER_HOUR},t.formatMiniDateTime=function(e){return t.MINI_DATE_TIME_BASE+(2147483647&e)*t.MS_PER_SECOND},t.isSameDate=function(e,i){return Math.ceil((e-t.timezoneOffset)/this.MS_PER_DAY)==Math.ceil((i-t.timezoneOffset)/this.MS_PER_DAY)},t.MS_PER_SECOND=1e3,t.MS_PER_MINUTE=6e4,t.MS_PER_HOUR=36e5,t.MS_PER_DAY=864e5,t.DAYS_PER_WEEK=7,t.SECOND_PER_HOUR=3600,t.SECOND_PER_DAY=86400,t.SECOND_PER_WEEK=604800,t.SECOND_PER_MONTH=2592e3,t.SECOND_PER_YEAR=31104e3,t.YEAR_PER_YEAR=1,t.MONTH_PER_YEAR=12,t.DAYS_PER_MONTH=30,t.HOURS_PER_DAY=24,t.MUNITE_PER_HOUR=60,t.SECOND_PER_MUNITE=60,t.SECOND_PER_SECOND=1,t.timezoneOffset=(new Date).getTimezoneOffset()*t.MS_PER_MINUTE,t.MINI_DATE_TIME_BASE=Date.UTC(2020,0)+t.timezoneOffset,t}();__reflect(DateUtil.prototype,"DateUtil");var GemEquipItem=function(t){function e(){var e=t.call(this)||this;return e.lv=0,e.setSkinName(),e.clear(),e}return __extends(e,t),e.prototype.setSkinName=function(){this.skinName="GemEquipItemEUI",this.mc=new MC,this.groupMc.addChild(this.mc)},e.prototype.updateRedPoint=function(){var t=this.data;this.redPoint.visible=RpSys.ins().getData(ForgeWin,GemPanel,"onekey",t.pos)},e.prototype.dataChanged=function(){this.clear();var t=this.data;this.setlv(t.getGemSumLevel(),""),this.setGem(t),this.updateRedPoint();var e=BagSys.ins().getEquipByIndex(t.pos),i=BagSys.ins().getEquipByIndex(t.pos).hasEquipOn();i?(this.imgIcon.source=ResMgr.getItemIcon(e.cfg.getIcon(),IconType.IT_80x80),this.imgEquipBg.source=ResMgr.getEquipQualityBg(e.cfg.quality),e.cfg.quality>=QualityType.Green?this.mc.playFile(ResMgr.getEquipEffResource(e.cfg.quality),-1):(this.mc.visible=!1,this.mc.stop())):(this.imgIcon.source="",this.imgEquipBg.source=ResMgr.getEquipDefaultIcon(e.equipPos),this.mc.visible=!1,this.mc.stop()),this.imgLock.visible=!i,this.imgLock.source=GFunc.isRing(e.equipPos)?"public_zycs_jh1":"qianghua_zycs_suo"},e.prototype.setGem=function(t){this.imgGem1.source=0!=t.getGemId(1)?""+Cfg.getItemCfg(t.getGemId(1)).getIcon():"bs_zycs_lx",this.imgGem2.source=0!=t.getGemId(2)?""+Cfg.getItemCfg(t.getGemId(2)).getIcon():"bs_zycs_lx",this.imgGem3.source=0!=t.getGemId(3)?""+Cfg.getItemCfg(t.getGemId(3)).getIcon():"bs_zycs_lx"},e.prototype.setlv=function(t,e){void 0===e&&(e="+"),this.lv=t,t>=1?this.bitLevel.text="l"+t:this.bitLevel.text=""},e.prototype.clear=function(){this.imgIcon.source=null},e.prototype.lvjing=function(t){this.imgBg.filters=t,this.imgIcon.filters=t},e.prototype.setSelectBG=function(t){this.imgSelect.visible=t},e.prototype.status1=function(){this.imgGem1.visible=!1,this.imgGem1.visible=!1,this.imgGem2.visible=!1,this.imgGem3.visible=!1,this.imgGemBg.visible=!1},e}(BaseItemRender);__reflect(GemEquipItem.prototype,"GemEquipItem"),window.GemEquipItem=GemEquipItem;var RollerBase=function(){function t(t){this.fromAngle=0,this.toAngle=0,this.startTick=0,this.endTick=0,this.caller=new Caller,this.curAngle=0,this.disObj=t}return t.prototype.destruct=function(){this.reset()},t.prototype.reset=function(){this.fromAngle=0,this.toAngle=0,this.startTick=0,this.endTick=0,this.curAngle=0,this.stopMove(),this.setCompleteFunc(null,null)},t.prototype.setCompleteFunc=function(t,e){this.caller.func=t,this.caller.obj=e},t.prototype.setParam=function(t,e){this.fromAngle=this.curAngle=t+e.offs,this.toAngle=this.fromAngle+e.s,this.startTick=Timer.ins().getEgretTimer(),this.endTick=this.startTick+1e3*e.t,this.param=e,this.updateMoveParam()},t.prototype.startMove=function(){this.fromAngle==this.toAngle?this.toTarget():this.updateAngle(this.startTick)},t.prototype.updateTick=function(t){0!=this.startTick&&(t>=this.endTick?this.toTarget():this.updateAngle(t))},t.prototype.updateMoveParam=function(){},t.prototype.updateAngle=function(t){},t.prototype.toTarget=function(){this.updateAngle(this.endTick),this.stopMove(),this.caller.call()},t.prototype.stopMove=function(){this.startTick=0},Object.defineProperty(t.prototype,"moving",{get:function(){return this.startTick>0},enumerable:!0,configurable:!0}),t.prototype.getToAngle=function(){return this.toAngle},t.prototype.getCurAngle=function(){return this.curAngle},t.prototype.getCurAngle360=function(){return this.curAngle%360},t.prototype.getRotation=function(){var t=this.getCurAngle360(),e=0;return e=180>=t?t:t-360},t}();__reflect(RollerBase.prototype,"RollerBase");var XianLuListWin=function(t){function e(){var e=t.call(this)||this;
return e.winType=WinType.NeverCloseWin,e}return __extends(e,t),e.prototype.initUI=function(){t.prototype.initUI.call(this),this.addBg("background_zycs_bg_jpg",null)},e.prototype.setSkinName=function(){this.skinName="BaseWinSkin2"},e.prototype.close=function(){t.prototype.close.call(this),isShowWin(XianLuWin)||openWin(XianLuWin)},e.panelNames=[XianLuListPanel],e}(BaseWinAutoTab);__reflect(XianLuListWin.prototype,"XianLuListWin"),window.XianLuListWin=XianLuListWin;var MoJieWin=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.redPointHead=[RoleWin,RolePanel],e.winType=WinType.OverlayWin,e}return __extends(e,t),e.prototype.getStarsoulUpBtn=function(){return this.getPanel(XingHunPanel).getStarsoulUpBtn()},e.prototype.getUseBtn=function(){return this.getPanel(FruitPointPanel).getUseBtn()},e.panelNames=[XingHunPanel,FruitPointPanel,WCPanel],e}(BaseWinAutoTab);__reflect(MoJieWin.prototype,"MoJieWin"),window.MoJieWin=MoJieWin;var PurifyConsumeItem=function(t){function e(){var e=t.call(this)||this;return e.descColor=[5949490,5949490,2342605,16751375],e.setSkinName(),e}return __extends(e,t),e.prototype.setSkinName=function(){this.skinName="PurifyConsumeItemEUI"},e.prototype.dataChanged=function(){var t=this.data,e=t.itemConsumeData.items[0],i=Cfg.getItemCfg(e.id);this.imgIcon.source=ResMgr.getItemIcon(i.getIcon()),this.lbrate.text=t.desc[t.type],this.lbrate.textColor=this.descColor[t.type];var n=e.count,a=(Cfg.getItemCfg(e.id),BagSys.ins().getItemById(e.id)),o=a?a.count:0;o>=n?this.lbCount.textFlow=addColorTF(o+"/"+n):this.lbCount.textFlow=addColorTF(o+"/"+n,15732752)},e}(BaseItemRender);__reflect(PurifyConsumeItem.prototype,"PurifyConsumeItem");var PurifyDaRenWin=function(t){function e(){return t.call(this)||this}return __extends(e,t),e.prototype.initUI=function(){this.skinName="XingHunAttrWinEUI",this.imgTitle.source="jinglian_zycs_jldr",this.addBg(),t.prototype.initUI.call(this),this.layer=LayerMgr.Popup},e.prototype.open=function(e){t.prototype.open.call(this),this.darenData=e,this.addClickE(this.btnUp,this.onClick),this.addLsn(ForgeSys.ins().patchPurifyUpRank,this.update),this.addLsn(RpSys.ins().patchRp,this.updateRp),this.update(),this.updateRp()},e.prototype.updateRp=function(t){void 0===t&&(t=null),(!t||t.check(this))&&(this.btnUp.redPoint.visible=RpSys.ins().getData(ForgeWin,PurifyPanel,this))},e.prototype.update=function(){var t=this.darenData;this.totalPower.text=t.genPower().toFixed(),this.bitLevel.text="."+t.level+"r";var e=this.getConfig(t.level),i=ForgeSys.ins().purifyData.getLevelNum(e.needlevel),n=this.getConfig(t.noActRank()?0:t.level-1),a=AttrData.getFm(null,null,":"),o=AttrData.parse(e.addAttr,{fm:a}).join("\n");this.lbCurAttr.textFlow=t.noActRank()?addColorTF(Lang.xh_str9,15129784):addColorTF(o);var s=t.getDaBiaoCount(),r=t.canRank(),u=t.level>=n.stage,h=u?addColor(Lang.common_str40,5767068):addColor("("+i+"/"+s+")",r?9094450:15733780);if(this.lbCurLevel.textFlow=t.noActRank()?addColorTF(Lang.xh_str4,15129784):addColorTF(Lang.xh_str4+" "+t.getDaBiaoCount()+"件装备精炼+"+n.needlevel+h),!t.isMaxRank()){var l=this.getConfig(t.level+1),p=this.getConfig(t.noActRank()?0:t.level),c=AttrData.parse(l.addAttr,{fm:a}).join("\n");this.lbNextAttr.textFlow=addColorTF(c);var d=t.getDaBiaoCount(),g=i>=d,f=addColor("("+i+"/"+d+")",g?5767068:15733780);this.lbNextLevel.textFlow=addColorTF(Lang.xh_str5+"  "+t.getDaBiaoCount()+"件装备精炼+"+p.needlevel+f)}t.noActRank()?this.currentState=r?"canAct":"noAct":t.isMaxRank()?this.currentState="max":r?this.currentState="upRank":this.currentState="noRank"},e.prototype.onClick=function(t){switch(t.currentTarget){case this.btnUp:this.darenData.canRank()&&ForgeSys.ins().sendPurifyUpRank(this.type())}},e.prototype.getConfig=function(t){return Cfg.getPurifyDaRenConfigById(t)},e.prototype.type=function(){return 1},e}(BaseWinSingle);__reflect(PurifyDaRenWin.prototype,"PurifyDaRenWin"),window.PurifyDaRenWin=PurifyDaRenWin;var XunBaoEquipData=function(t){function e(){var e=t.call(this)||this;return e.tabName="装备寻宝",e.type=XunbaoType.Equip,e}return __extends(e,t),e.prototype.parser=function(e){t.prototype.parser.call(this,e)},Object.defineProperty(e.prototype,"gailvdesc",{get:function(){for(var t=XunBaoSys.ins().getDoubleTimer()>0,e=Cfg.getConfig(XunbaoConstConfig).gailvdesc[this.type-1],i=this.getXunbaoEquipByPondid(),n=0;n<i.length;n++){var a=i[n],o=i[n].item,s=Cfg.getItemCfg(o.id),r=t?a.probability2:a.probability1,u=addColor(s.getName()+"  "+Math.ceil(r/100)+"%",GConst.PZColor[s.quality]);e+="\n"+u}return e},enumerable:!0,configurable:!0}),e.prototype.getXunbaoEquipByPondid=function(){return Cfg.getConfigs(XunbaoEquipConfig,0,CondType.ALL)},Object.defineProperty(e.prototype,"showItemDatas",{get:function(){if(0==this._showItemDatas.length){var t=this.getConfig();SortUtil.sortOn(t,["show"],[SortType.up]);for(var e=0;e<t.length;e++){var i=t[e],n=i.item,a=GFunc.creatItemDataById(n.id);this._showItemDatas.push(a)}}return this._showItemDatas},enumerable:!0,configurable:!0}),e.prototype.getConfig=function(){return Cfg.getConfigs(XunbaoEquipConfig,0,CondType.MoreEqual,"show",1)},Object.defineProperty(e.prototype,"bideItemData",{get:function(){var t;if(this.isBiDe){var e=Cfg.getConfig(XunbaoConstConfig).costcount[2][0],i=this.getXunbaoEquipConfigById(e,1);if(1==i.status){var n=i.item.id;t=GFunc.creatItemDataById(n)}}return t},enumerable:!0,configurable:!0}),e.prototype.getXunbaoEquipConfigById=function(t,e){return Cfg.getConfig(XunbaoEquipConfig,t,1)},e.prototype.getPanelName=function(){return egret.getQualifiedClassName(XunBaoEquipPanel)},e}(XunBaoBaseData);__reflect(XunBaoEquipData.prototype,"XunBaoEquipData");var Act25LogPanel=function(t){function e(){var e=t.call(this)||this;return e.skinName="Act25LogPanelEUI",e.list.itemRenderer=Act25LogItem,e.list.dataProvider=e.listData=new eui.ArrayCollection,e}return __extends(e,t),e.prototype.open=function(){t.prototype.open.call(this),this.addLsn(ActSys.ins().patchYBLuckDrawLog,this.updatePanel),ActSys.ins().sendYBLuckDrawLog()},e.prototype.updatePanel=function(t){this.listData.source=t},e.getSysId=function(){return 0},e.getTitle=function(){return"btz_zycs_cjjl"},e.getTabTitle=function(){return"bqz_zycs_zscj"},e}(BasePanel);__reflect(Act25LogPanel.prototype,"Act25LogPanel"),window.Act25LogPanel=Act25LogPanel;var XunBaoBagPanelItem=function(t){function e(){var e=t.call(this)||this;return e.skinName="XunBaoBagPanelItemEUI",e.setSkinPart("item",new ItemBase),e.item.touchEnabled=!1,e.item.touchChildren=!1,e.setSelect(!1),e}return __extends(e,t),e.prototype.dataChanged=function(){var t=this.data,e=GFunc.creatItemDataById(t.id);e.count=t.count,this.item.data=e},e.prototype.setSelect=function(t){this.imgSelect.visible=t},e.prototype.isSelect=function(){return this.imgSelect.visible},e}(BaseItemRender);__reflect(XunBaoBagPanelItem.prototype,"XunBaoBagPanelItem"),window.XunBaoBagPanelItem=XunBaoBagPanelItem;var PurifyDaRenConfig=function(){function t(){}return t}();__reflect(PurifyDaRenConfig.prototype,"PurifyDaRenConfig");var PurifyDarenData=function(){function t(){this.level=0}return t.prototype.noActRank=function(){return 0==this.level},t.prototype.isMaxRank=function(){return this.level>=Cfg.getMaxConfig(PurifyDaRenConfig).stage},t.prototype.canRank=function(){var t=this.getConfig();return!this.isMaxRank()&&ForgeSys.ins().purifyData.getLevelNum(t.needlevel)>=this.getDaBiaoCount()},t.prototype.getDaBiaoCount=function(){return Cfg.getConfig(EquipConstConfig).darencount},t.prototype.getRankAttr=function(){var t=this.getConfig();return t.addAttr},t.prototype.genPower=function(){return GFunc.getPower(this.getRankAttr())+this.getConfig().power},t.prototype.getConfig=function(){return Cfg.getPurifyDaRenConfigById(this.level)},t}();__reflect(PurifyDarenData.prototype,"PurifyDarenData");var FriendsBlackListPanel=function(t){function e(){var e=t.call(this)||this;return e.lastTime=0,e.skinName="FriendsBlackListPanelEUI",e.list_blackList.itemRenderer=FriendBlackListItem,FriendSys.ins().sendFriendsList(FriendsType.heiMingDan),e}return __extends(e,t),e.prototype.open=function(){t.prototype.open.call(this),Timer.ins().getEgretTimer()-this.lastTime>FriendSys.ins().interval&&(FriendSys.ins().sendFriendsList(FriendsType.heiMingDan),this.lastTime=Timer.ins().getEgretTimer()),this.addChangeE(this.checkBox0,this.onCheckBox),this.addLsn(FriendSys.ins().patchHeiMingDanData,this.updatePanel),this.addLsn(FriendSys.ins().patchHoldChat,this.updateHoldChat),this.updatePanel(),this.updateHoldChat()},e.prototype.updatePanel=function(){var t=FriendSys.ins().heiMingDanDatas;SortUtil.sortOn(t,["onlineTime"],[SortType.down]),this.list_blackList.dataProvider=new eui.ArrayCollection(t),this.label_num.text=t.length+"/"+Cfg.getConfig(FriendLimit).blacklistLen},e.prototype.updateHoldChat=function(){this.checkBox0.selected=FriendSys.ins().isHoldChat},e.prototype.onCheckBox=function(t){switch(t.currentTarget){case this.checkBox0:FriendSys.ins().sendHoldChat(this.checkBox0.selected?1:0)}},e.getSysId=function(){return 33},e.getTitle=function(){return"btz_zycs_hy"},e.getTabTitle=function(){return"bqz_zycs_hmd"},e}(BasePanel);__reflect(FriendsBlackListPanel.prototype,"FriendsBlackListPanel"),window.FriendsBlackListPanel=FriendsBlackListPanel;var FriendsChatPanel=function(t){function e(){var e=t.call(this)||this;return e.skinName="FriendsChatPanelEUI",e.list_chat.itemRenderer=FriendChatItem,e.list_chat.dataProvider=e.arrData=new eui.ArrayCollection,e.editText_input.maxChars=Cfg.getConfig(FriendLimit).contentLen,e}return __extends(e,t),e.prototype.open=function(e){t.prototype.open.call(this),this.currData=e,RpFun.friendRedPoint(this.currData.id,!1),FriendSys.ins().clearNewMsgCount(this.currData.id),FriendSys.ins().currChatRoleID=this.currData.id,0==FriendSys.ins().getChatLogs(this.currData.id).length?FriendSys.ins().sendOldFriendsChat(this.currData.id):this.updatePanel(),this.addClickE(this.btn_send,this.onTap),this.addClickE(this.btn_add,this.onTap),this.addClickE(this.btn_delete,this.onTap),this.addLsn(FriendSys.ins().patchOldFriendsChat,this.updatePanel),this.addLsn(FriendSys.ins().patchFriendsChat,this.updatePanel)},e.prototype.close=function(){t.prototype.close.call(this),FriendSys.ins().currChatRoleID=0},e.prototype.onTap=function(t){var e=this;switch(t.target){case this.btn_send:this.editText_input.text.length>0&&(FriendSys.ins().sendFriendsChat(FriendSys.ins().currChatRoleID,""+this.editText_input.text),this.editText_input.text="");break;case this.btn_add:FriendSys.ins().sendGuanzhu(this.currData.id,this.currData.roleName);break;case this.btn_delete:var i=new PopupData(Lang.friend_str2);i.setFunction(this,function(){FriendSys.ins().sendDefriend(e.currData.id,e.currData.roleName)}),openWin(CommonTipsWin,i)}},e.prototype.updatePanel=function(){var t=Lang.friend_str3.replace("$name$",""+StrUtil.addColor(this.currData.roleName,2342605));this.label_name.textFlow=addColorTF(t);var e=FriendSys.ins().getChatLogs(FriendSys.ins().currChatRoleID);this.arrData.replaceAll(e),this.list_chat.validateNow(),this.scrollerChatToBottom()},e.prototype.scrollerChatToBottom=function(){this.scroller_chat&&(this.scroller_chat.viewport.scrollV=Math.max(this.scroller_chat.viewport.contentHeight-this.scroller_chat.height,0))},e.getSysId=function(){return 33},e.getTitle=function(){return"btz_zycs_hy"},e.getTabTitle=function(){return"bqz_zycs_zuijin"},e}(BasePanel);__reflect(FriendsChatPanel.prototype,"FriendsChatPanel"),window.FriendsChatPanel=FriendsChatPanel;var FriendsGuanzhuPanel=function(t){function e(){var e=t.call(this)||this;return e.lastTime=0,e.skinName="FriendsGuanzhuPanelEUI",e.list_friends.itemRenderer=FriendListItem,FriendSys.ins().sendFriendsList(FriendsType.guanZhu),e}return __extends(e,t),e.prototype.open=function(){t.prototype.open.call(this),Timer.ins().getEgretTimer()-this.lastTime>FriendSys.ins().interval&&(FriendSys.ins().sendFriendsList(FriendsType.guanZhu),this.lastTime=Timer.ins().getEgretTimer()),this.addClickE(this.btn_add,this.onTap),this.addItemTapE(this.list_friends,this.onItemTap),this.addLsn(FriendSys.ins().patchGuanZhuData,this.updatePanel),this.updatePanel()},e.prototype.updatePanel=function(){var t=FriendSys.ins().guanZhuDatas;SortUtil.sortOn(t,["onlineTime"],[SortType.down]),this.list_friends.dataProvider=new eui.ArrayCollection(t),this.label_num.text=t.length+"/"+Cfg.getConfig(FriendLimit).attentionListLen},e.prototype.onItemTap=function(t){var e=t.itemRenderer;e.data;return this.oldItem==e?void e.setSelected(!e.getSelected()):(this.oldItem&&this.oldItem.setSelected(!1),e.setSelected(!e.getSelected()),void(this.oldItem=e))},e.prototype.onTap=function(t){switch(t.target){case this.btn_add:openWin(FriendsAddWin)}},e.getSysId=function(){return 33},e.getTitle=function(){return"btz_zycs_hy"},e.getTabTitle=function(){return"bqz_zycs_gz"},e}(BasePanel);__reflect(FriendsGuanzhuPanel.prototype,"FriendsGuanzhuPanel"),window.FriendsGuanzhuPanel=FriendsGuanzhuPanel;var XunBaoEquipPanelItem1=function(t){function e(){return t.call(this)||this}return __extends(e,t),e.prototype.setSkinName=function(){this.skinName="XunBaoEquipPanelItem1EUI"},e.prototype.dataChanged=function(){t.prototype.dataChanged.call(this);var e=this.data;this.lbName.text=e.cfg.getName(),this.lbName.textColor=GConst.PZColor[e.cfg.quality],this.item.setItemKuangEffect(!0,"eff5")},e}(XunBaoEquipPanelItem);__reflect(XunBaoEquipPanelItem1.prototype,"XunBaoEquipPanelItem1"),window.XunBaoEquipPanelItem1=XunBaoEquipPanelItem1;var FriendsZuijinPanel=function(t){function e(){var e=t.call(this)||this;return e.lastTime=0,e.skinName="FriendsZuijinPanelEUI",e.list_recent.itemRenderer=FriendRecentListItem,FriendSys.ins().sendFriendsList(FriendsType.zuiJin),e}return __extends(e,t),e.prototype.open=function(){t.prototype.open.call(this),Timer.ins().getEgretTimer()-this.lastTime>FriendSys.ins().interval&&(FriendSys.ins().sendFriendsList(FriendsType.zuiJin),this.lastTime=Timer.ins().getEgretTimer()),this.addItemTapE(this.list_recent,this.onRecentListItemTap),this.addLsn(FriendSys.ins().patchZuiJinData,this.updatePanel),this.addLsn(FriendSys.ins().patchFriendsChat,this.updatePanel),this.updatePanel()},e.prototype.updatePanel=function(){var t=FriendSys.ins().zuiJinDatas;SortUtil.sortOn(t,["onlineTime"],[SortType.down]),this.list_recent.dataProvider=new eui.ArrayCollection(t)},e.prototype.onRecentListItemTap=function(t){var e=t.item;e&&e.id&&openWin(FriendsWin,FriendsWin.page_chat,e)},e.getSysId=function(){return 33},e.getTitle=function(){return"btz_zycs_hy"},e.getTabTitle=function(){return"bqz_zycs_zuijin"},e}(BasePanel);__reflect(FriendsZuijinPanel.prototype,"FriendsZuijinPanel"),window.FriendsZuijinPanel=FriendsZuijinPanel;var Act31JiLuItem=function(t){function e(){var e=t.call(this)||this;return e.skinName="Act31JiLuItemEUI",e}return __extends(e,t),e.prototype.dataChanged=function(){var t=this.data,e=GFunc.creatUnknown(t.itemId,t.count),i=Lang.act_str75.replace("$name$",addColor(t.roleName,3183103)),n=e.cfg.type==ItemType.ZSDB?"":"*"+t.count;i=i.replace("$item$",addColor(""+e.cfg.getName()+n,GConst.PZColor[e.quality])),this.lbDesc.textFlow=addColorTF(i),this.lbDesc.validateNow(),this.validateNow()},e}(BaseItemRender);__reflect(Act31JiLuItem.prototype,"Act31JiLuItem"),window.Act31JiLuItem=Act31JiLuItem;var XunBaoFuWenPanelItem=function(t){function e(){var e=t.call(this)||this;return e.skinName="XunBaoFuWenPanelItemEUI",e.addClickE(e,e.onClick),e}return __extends(e,t),e.prototype.dataChanged=function(){var t=this.data;this.imgIcon.source=ResMgr.getElementIconRes(t.cfg.getIcon()),this.lbName.text=t.cfg.getName(),this.lbName.textColor=GConst.PZColor[t.cfg.quality]},e.prototype.onClick=function(t){var e=this.data;GFunc.openItemTips(e)},e}(BaseItemRender);__reflect(XunBaoFuWenPanelItem.prototype,"XunBaoFuWenPanelItem"),window.XunBaoFuWenPanelItem=XunBaoFuWenPanelItem;var Act31RankItem=function(t){function e(){var e=t.call(this)||this;return e.skinName="Act31RankWinItemEUI",e.listReward.itemRenderer=ItemBaseReward,e}return __extends(e,t),e.prototype.dataChanged=function(){var t=this.data;t.rank<=3?(this.imgBg.source="cg_zycs_di"+t.rank,this.imgRank.source="jjc_zycs_no"+t.rank,this.imgRank.visible=!0,this.lbRank.visible=!1):(this.imgRank.visible=!1,this.lbRank.visible=!0,this.lbRank.text=t.rank.toString()),this.listReward.dataProvider=new eui.ArrayCollection(this.config.consume);var e=""!=this.roleName;this.lbName.text=e?""+this.roleName:"虚位以待...",this.lbNum.textFlow=addColorTF(e?"积分:"+addColor(t.score,5767068):"上榜积分:"+addColor(this.config.score,5767068))},Object.defineProperty(e.prototype,"roleName",{get:function(){var t=this.data;return t.roleName},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"config",{get:function(){var t=this.data;return Cfg.getConfig(ActivityType30Config,t.actid,t.rank)},enumerable:!0,configurable:!0}),e}(BaseItemRender);__reflect(Act31RankItem.prototype,"Act31RankItem"),window.Act31RankItem=Act31RankItem;var XunBaoWin=function(t){function e(){var e=t.call(this)||this;return e.redPointHead=[ExtCom],e.winType=WinType.OverlayWin,e}return __extends(e,t),e.prototype.getBagTab=function(){return this.getTab(XunBaoBagPanel)},e.prototype.getXunBaoBagPanel_getBuyAllQuChu=function(){return this.getPanel(XunBaoBagPanel).getBuyAllQuChu()},e.prototype.getXunBaoEquipPanel_MianFeiXunBaoBtn=function(){return this.getPanel(XunBaoMainPanel).getXunBaoEquipPanel_MianFeiXunBaoBtn()},e.prototype.getXunBaoFaBaoPanel_MianFeiXunBaoBtn=function(){return this.getPanel(XunBaoMainPanel).getXunBaoFaBaoPanel_MianFeiXunBaoBtn()},e.prototype.getXunBaoFaBaoPanel_Tab=function(){return this.getPanel(XunBaoMainPanel).getTab(XunBaoFaBaoPanel)},e.prototype.getXunBaoEquipPanel_Tab=function(){return this.getPanel(XunBaoMainPanel).getTab(XunBaoEquipPanel)},e.panelNames=[XunBaoMainPanel,XunBaoBagPanel,XunBaoDuiHuanPanel],e}(BaseDuoPanelWin);__reflect(XunBaoWin.prototype,"XunBaoWin"),window.XunBaoWin=XunBaoWin;var Act6RewarWin=function(t){function e(){var e=t.call(this)||this;return e.layer=LayerMgr.Popup,e.winType=WinType.NeverCloseWin,e.skinName="Act6RewarWinEUI",e.addBg(),e.setRewardItem(),e.list.dataProvider=e.listData=new eui.ArrayCollection,e.mc=new MC,e.mc.y=70,e.mc.playFile(getEffName("smzl_gxhd"),-1),e.groupMc.addChildAt(e.mc,0),e}return __extends(e,t),e.prototype.setRewardItem=function(){this.list.itemRenderer=ItemBaseRewardName},e.prototype.open=function(e){t.prototype.open.call(this),this.updatePanel(e)},e.prototype.updatePanel=function(t){this.listData.source=t},e}(BaseWinSingle);__reflect(Act6RewarWin.prototype,"Act6RewarWin"),window.Act6RewarWin=Act6RewarWin;var YdssWin=function(t){function e(){var e=t.call(this)||this;return e.mcBtn=new MC,e.mcBtn2=new MC,e.skinName="YdssWinEUI",e.layer=LayerMgr.Popup,e.addBg(),e.tabList.itemRenderer=YdssTabItem,e.tabList.dataProvider=e.tabData=new eui.ArrayCollection,e.list.itemRenderer=ItemBaseReward,e.list.dataProvider=e.listData=new eui.ArrayCollection,e.btn_get.redPoint.visible=!0,e.mcBtn.x=e.btn_get.width/2,e.mcBtn.y=e.btn_get.height/2,e.mcBtn.playFile(ResMgr.getEffName("public_zycs_button01"),-1),e.btn_get.addChildAt(e.mcBtn,e.btn_get.numChildren-1),e.mcBtn2.x=e.btn_get1.width/2,e.mcBtn2.y=e.btn_get1.height/2,e.mcBtn2.playFile(ResMgr.getEffName("public_zycs_button01"),-1),e.btn_get.addChildAt(e.mcBtn2,e.btn_get1.numChildren-1),e}return __extends(e,t),e.prototype.open=function(e){t.prototype.open.call(this),this.curIndex=e,this.group1.visible=!0,this.group2.visible=!this.group1.visible,this.addLsn(RpSys.ins().patchRp,this.infoPanel),this.addLsn(ActSys.ins().patchActivityPanel,this.infoPanel),this.addLsn(ActSys.ins().doRewardResult,this.infoPanel),this.addClickE(this.btn_go,this.onClick),this.addClickE(this.btn_get,this.onClick),this.addClickE(this.btn_go1,this.onClick),this.addClickE(this.btn_get1,this.onClick),this.addClickE(this.btn_buy,this.onClick),this.addItemTapE(this.tabList,this.onItemList),this.infoPanel()},e.prototype.infoPanel=function(){var t=[];this.actData22_1=ActSys.ins().getActDataById(2003);var e=t.concat(this.actData22_1.buyDatas);this.group.visible=!1,this.actData=ActSys.ins().getActDataById(2002),this.actData.getActOpenState()==ActOpenState.Open&&(this.group.visible=!0,e.push([])),this.tabData.source=e,isNaN(this.curIndex)?this.updateState():(this.tabList.selectedIndex=this.curIndex,this.updatePanel())},e.prototype.updateState=function(){var t=this.tabList.selectedIndex>=0?this.tabList.selectedIndex:0;this.tabList.selectedIndex=t,this.updatePanel()},e.prototype.updatePanel=function(){this.group1.visible=this.group2.visible=!1,this.img_tips.source="xianyuanhd_tips"+(this.tabList.selectedIndex+1),this.lb_name.text=Cfg.getConfig(MateCommonConfig).names[this.tabList.selectedIndex],this.tabList.selectedIndex>1?this.setStateGroup2():this.setStateGroup1()},e.prototype.setStateGroup2=function(){this.group2.visible=!0;var t=this.actData.getItemDatas();this.btn_go1.visible=t[0].status==ActRewardState.NotReached,this.btn_get1.visible=t[0].status==ActRewardState.CanGet,this.btn_get1.redPoint.visible=this.btn_get1.visible,this.imgYlq.visible=t[0].status==ActRewardState.Geted,this.listData.source=t[0].config.rewards;var e=t[0],i=MathUtil.toInteger(e.dabiao/100),n=MathUtil.toInteger(e.yidabiao/100),a="累计充值："+addColor(i+"元",46913)+"可领取\n已充值："+addColor(n+"元",46913);this.lb_tips.textFlow=addColorTF(a)},e.prototype.setStateGroup1=function(){this.group1.visible=!0,this.actData22_1=ActSys.ins().getActDataById(2003);var t=this.actData22_1.buyDatas[this.tabList.selectedIndex],e=t.config;this.listData.source=e.rewards,this.oldPrice.setType(e.currencyType),this.oldPrice.setPrice(e.yuanprice),this.nowPrice.setType(e.currencyType),this.nowPrice.setPrice(e.price);var i=Actor.ins().getCurrency(e.currencyType),n=t.count;this.btn_get.visible=this.btn_buy.visible=this.btn_go.visible=this.imgYgm.visible=!1,1==n?this.imgYgm.visible=!0:0==n?i>=e.price?(this.btn_buy.visible=!0,this.btn_buy.redPoint.visible=!0):i<e.price&&(this.btn_go.visible=!0):this.imgYgm.visible=!0},e.prototype.onClick=function(t){var i=this;switch(t.target){case this.btn_go:case this.btn_go1:openWin(RechargeWin),closeWin(e);break;case this.btn_get:break;case this.btn_get1:if(BagSys.ins().checkBagFreeCount(5)){var n=this.actData.getItemDatas(),a=n[0],o=a.config;ActSys.ins().sendReward(o.id,o.index)}break;case this.btn_buy:var s=this.actData22_1.getConfig(this.tabList.selectedIndex);if(BagSys.ins().checkBagFreeByItems(s.rewards)&&GFunc.checkCurrency(s.currencyType,s.price)){var r=new PopupPriceData("仙侣特惠礼包");r.priceValue=s.price,r.priceType=s.currencyType,r.setFunction(this,function(){ActSys.ins().sendReward(2003,i.tabList.selectedIndex+1)}),openWin(CommonTipsWinNew,r)}}},e.prototype.onItemList=function(t){this.updatePanel()},e.prototype.updateTime=function(){this.actData?this.lb_time.textFlow=addColorTF(this.actData.getformatTime()):this.lb_time.textFlow=addColorTF("")},__decorate([callDelay(100)],e.prototype,"updateState",null),e}(BaseWinSingle);__reflect(YdssWin.prototype,"YdssWin"),window.YdssWin=YdssWin;var Act8RankPanel=function(t){function e(){var e=t.call(this)||this;return e.skinName="Act8RankPanelEUI",e.list.itemRenderer=Act8RankItem,e.list.dataProvider=e.listData=new eui.ArrayCollection,e}return __extends(e,t),e.prototype.open=function(e){t.prototype.open.call(this),this.updatePanel(e)},e.prototype.updatePanel=function(t){this.listData.source=t.rankDatas,this.lbMyRank.textFlow=addColorTF(""+Lang.act_str25+StrUtil.addColor(t.myRank?t.myRank:Lang.common_str17,16751375))},e.getSysId=function(){return 0},e.getTitle=function(){return"btz_zycs_hfhd"},e.getTabTitle=function(){return""},e}(BasePanel);__reflect(Act8RankPanel.prototype,"Act8RankPanel"),window.Act8RankPanel=Act8RankPanel;var FuliWin=function(t){function e(){var e=t.call(this)||this;return e.redPointHead=[ExtCom],e.winType=WinType.MainWin,e}return __extends(e,t),e.getTitle=function(){return"btz_zycs_fl"},e.panelNames=[SigninPanel,DailyOnlinePanel,DLHLPanel,CdkeyPanel],e}(BaseWinAutoTab);__reflect(FuliWin.prototype,"FuliWin"),window.FuliWin=FuliWin;var YKWin=function(t){function e(){var e=t.call(this)||this;return e.redPointHead=[ExtCom],e.winType=WinType.OverlayWin,e}return __extends(e,t),e.panelNames=[MonthCardPanel,ZZTQCardPanel],e}(BaseWinAutoTab);__reflect(YKWin.prototype,"YKWin"),window.YKWin=YKWin;var ZZTQWin=function(t){function e(){var e=t.call(this)||this;return e.redPointHead=[ExtCom],e.winType=WinType.OverlayWin,e}return __extends(e,t),e.openCheck=function(){return openWin(YKWin,YKWin.getTabIndexbyPanel(ZZTQCardPanel)),!1},e.panelNames=[ZZTQCardPanel],e}(BaseWinAutoTab);__reflect(ZZTQWin.prototype,"ZZTQWin"),window.ZZTQWin=ZZTQWin;var YZZHWin=function(t){function e(){var e=t.call(this)||this;return e.redPointHead=[],e.winType=WinType.OverlayWin,e}return __extends(e,t),e.panelNames=[YZZHMainPanel],e}(BaseDuoPanelWin);__reflect(YZZHWin.prototype,"YZZHWin"),window.YZZHWin=YZZHWin;var ZhuangBanWin=function(t){function e(){var e=t.call(this)||this;return e.redPointHead=[RoleWin,RolePanel],e.winType=WinType.OverlayWin,e}return __extends(e,t),e.panelNames=[ChengHaoPanel,FootPanel,ShengLingPanel,ShenYouPanel],e}(BaseWinAutoTab);__reflect(ZhuangBanWin.prototype,"ZhuangBanWin"),window.ZhuangBanWin=ZhuangBanWin;var ActRankBtnPanel=function(t){function e(){var e=t.call(this)||this;return e.b=!0,e.layer=LayerMgr.Main_Down1,e.skinName="ActRankBtnPanelEUI",e.winType=WinType.NeverCloseWin,e}return __extends(e,t),e.prototype.addDisplay=function(){this.actData=ActSys.ins().getActivityDataByType(ActType.TYPE_4,ActSubType.TYPE_1),this.addClickE(this,this.onClick),this.rr=this.eGroup.right,this.addLsn(ActSys.ins().patchSevenDayMyRank2,this.updatePanel),this.addLsn(ActSys.ins().patchInfoActivityData,this.updateInfo),this.addLsn(RpSys.ins().patchRp,this.updateRp),this.addLsn(ExtCom.showOrHide,this.showOrHide),this.updatePanel(),this.updateRp(),Timer.ins()["do"](0,1e3,0,this.timerFunc,this),this.actData&&ActSys.ins().sendSevenDayMyRank2(this.actData.actId)},e.prototype.removeDisplay=function(){Timer.ins().remove(this.timerFunc,this)},e.prototype.updateInfo=function(){this.actData=ActSys.ins().getActivityDataByType(ActType.TYPE_4,ActSubType.TYPE_1),this.actData&&ActSys.ins().sendSevenDayMyRank2(this.actData.actId)},e.prototype.showOrHide=function(t){this.b!=t&&(this.b=t,egret.Tween.get(this.eGroup).to({right:t?this.rr:this.rr-200},100))},e.prototype.updateRp=function(t){(!t||t.check(ActRankWin))&&(this.redPoint.visible=RpSys.ins().getData(ExtCom,ActRankWin))},e.openCheck=function(){var t=ActSys.ins().getActivityDataByType(ActType.TYPE_4,ActSubType.TYPE_1);return GFunc.isSysOpen(276)&&t?!0:(closeWin(this),!1)},e.prototype.timerFunc=function(){this.lbTime.textFlow=addColorTF(this.actData.getformatTime(Actor.ins().serverTime,"hh:mm:ss"))},e.prototype.updatePanel=function(){if(this.actData){var t=Cfg.getConfig(ActivityBtnConfig,this.actData.actId);this.imgTitle.source="mianui_zycs_phb"+t.showday;var e=this.actData.getFirstRankData();e&&""!=e.roleName?(this.lbName.text=""+e.roleName,this.lbName.textColor=5767068,this.mcName=ResMgr.getEffName("cbsg")):(this.lbName.text=""+Lang.act_str87,this.lbName.textColor=13486270,this.mcName="");var i=this.actData.getConfig(1);this.updateMC(i)}},e.prototype.updateMC=function(t){var e=GFunc.getItemTipsMCData(GFunc.creatUnknown(t.itemid,1));this.mc=e.getFileName()},e.prototype.onClick=function(t){openWin(ActRankWin)},e}(BaseEuiWin);__reflect(ActRankBtnPanel.prototype,"ActRankBtnPanel"),window.ActRankBtnPanel=ActRankBtnPanel;var ActRankTipsWin1=function(t){function e(){var e=t.call(this)||this;return e.skinName="ActRankTipsWin1EUI",e.list.itemRenderer=ItemBaseReward,e}return __extends(e,t),e.prototype.open=function(){t.prototype.open.call(this),this.addClickE(this,this.onClick),this.addLsn(LogicSys.ins().patchEnterMap,this.onClose),this.addLsn(WinMgr.ins().patchTopWinClose,this.countDown),Timer.ins()["do"](15e3,1e3,1,this.countDown,this),this.updatePanel()},e.prototype.close=function(){t.prototype.close.call(this),Timer.ins().remove(this.countDown,this)},e.prototype.onClose=function(){GFunc.isGuaJiFb()||closeWin(this)},e.prototype.countDown=function(){closeWin(e)},e.prototype.onClick=function(t){t.target!=this.closeBtn0&&(closeWin(e),openWin(ActRankWin))},e.prototype.updatePanel=function(){this.actData=ActSys.ins().getActivityDataByType(ActType.TYPE_4,ActSubType.TYPE_1);var t=this.actData.getConfig(1);this.bmpPower.text="+"+t.showPower,this.list.dataProvider=new eui.ArrayCollection(t.rewards),this.updateMC(t)},e.prototype.updateMC=function(t){this.offsMc.scaleX=this.offsMc.scaleY=t.scale/100;var e=GFunc.getItemTipsMCData(GFunc.creatUnknown(t.itemid,1));this.mc=e.getFileName()},e.prototype.addToParent=function(t){this.addToParentAt(t,0)},e}(BaseWinSingle);__reflect(ActRankTipsWin1.prototype,"ActRankTipsWin1"),window.ActRankTipsWin1=ActRankTipsWin1;var ActRankTipsWin2=function(t){function e(){var e=t.call(this)||this;return e.skinName="ActRankTipsWin2EUI",e.layer=LayerMgr.Tips,e}return __extends(e,t),e.prototype.open=function(e){t.prototype.open.call(this),this.actData=e,this.addClickE(this.imgBg,this.countDown),this.addClickE(this.closeBtn0,this.onClose),Timer.ins()["do"](15e3,1e3,1,this.onTimeClose,this,TimerType.LAST),this.updatePanel()},e.prototype.close=function(){t.prototype.close.call(this),Timer.ins().remove(this.onTimeClose,this)},e.prototype.countDown=function(){closeWin(e),openWin(ActRankWin)},e.prototype.onClose=function(){e.isOpen=!1,closeWin(e)},e.prototype.onTimeClose=function(){closeWin(e)},e.prototype.updatePanel=function(){var t,e,i=0,n=0,a="";if(0==this.actData.myRank){var o=Math.min(this.actData.rankDatas.length-1,19);e=this.actData.rankDatas[o],n=e.rank}else{for(var s=Math.min(this.actData.rankDatas.length-1,19),r=s;r>=0;r--)if(e=this.actData.rankDatas[r],this.actData.dabiao<e.power){n=e.rank;break}0==n&&(e=this.actData.rankDatas[0],n=e.rank)}i=Math.max(e.power-this.actData.dabiao,1),t=this.actData.getConfigByRank(e.rank).rewards[0];var u=Cfg.getItemCfg(t.id);a=addColor(u.getName()+"x"+t.count,GConst.PZColor[u.quality]);var h=Lang.act_str90.replace("$str$",addColor(Lang.act_str91,16751375));h=h.replace("$power$",addColor(i,5767068)),h=h.replace("$rank$",addColor(n,5767068)),h=h.replace("$name$",a),this.lbDec.textFlow=addColorTF(h)},e.prototype.addToParent=function(t){this.addToParentAt(t,0)},e.isOpen=!0,e}(BaseWinSingle);__reflect(ActRankTipsWin2.prototype,"ActRankTipsWin2"),window.ActRankTipsWin2=ActRankTipsWin2;var TemplateItem=function(t){function e(){var e=t.call(this)||this;return e.setSkinName(),e}return __extends(e,t),e.prototype.setSkinName=function(){this.skinName=""},e.prototype.dataChanged=function(){this.data},e.prototype.updateStatus=function(){},e}(BaseItemRender);__reflect(TemplateItem.prototype,"TemplateItem"),window.TemplateItem=TemplateItem;var TemplatePanel=function(t){function e(){var e=t.call(this)||this;return e.initUI(),e}return __extends(e,t),e.prototype.setSkinName=function(){this.skinName=""},e.prototype.initUI=function(){},e.prototype.open=function(){this.addClickE(this,this.onClick),this.addLsn(RpSys.ins().patchRp,this.updateRp),this.updatePanel()},e.prototype.updatePanel=function(){},e.prototype.updateStatus=function(){},e.prototype.updateRp=function(t){void 0===t&&(t=null),!t||t.check(this)},e.prototype.onClick=function(t){t.currentTarget},e.getSysId=function(){return 0},e.getTitle=function(){return""},e}(BasePanel);__reflect(TemplatePanel.prototype,"TemplatePanel"),window.TemplatePanel=TemplatePanel;var LoginEditor=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return __extends(e,t),e.ins=function(){return t.getIns.call(this,e)},e.prototype.login=function(){LayerMgr.init(),this.onLogin()},e.prototype.onLogin=function(){ResUtil.ins().loadConfig("default.res.json","resource/",this.onConfigComplete,this)},e.prototype.onConfigComplete=function(){var t=new eui.Theme("resource/default.thm.json",LayerMgr.getStage());t.addEventListener(eui.UIEvent.COMPLETE,this.onThemeLoadComplete,this)
},e.prototype.onThemeLoadComplete=function(){ResUtil.ins().loadGroup("preloadAll",this.onComplete,function(){},this,10)},e.prototype.onComplete=function(){Cfg.init(ResMgr.getConfigSourceName());var t=egret.MovieClip.prototype,e=t.advanceTime,i=function(t){var i=Timer.ins().getRateTime();return e.call(this,i),!1};t.advanceTime=i;var n=egret.Tween.tick,a=function(t){var e=Timer.ins().getRateTime();return n.call(this,e),!1};egret.Tween.tick=a,SoundUtil.enable=!0,this.openWin()},e.prototype.openWin=function(){openWin(SkillEditorWin)},e}(BaseSys);__reflect(LoginEditor.prototype,"LoginEditor"),window.LoginEditor=LoginEditor;var FuwenData=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.pos=-1,e}return __extends(e,t),e.prototype.parser=function(e){t.prototype.parser.call(this,e)},Object.defineProperty(e.prototype,"baseConfig",{get:function(){return this._baseConfig&&this._baseConfig.id==this.lvCfg.id?this._baseConfig:this._baseConfig=Cfg.getConfig(ElementBaseConfig,this.lvCfg.id)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"lvCfg",{get:function(){return this._levelConfig&&this._levelConfig.soleid==this.id||(this._levelConfig=Cfg.getConfig(ElementLevelConfig,this.id)),this._levelConfig},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"level",{get:function(){return this.lvCfg.level},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"power",{get:function(){return GFunc.getPower(this.lvCfg.attr)},enumerable:!0,configurable:!0}),e.prototype.isNullEquip=function(){return!1},e.prototype.isPos=function(){return!1},e.prototype.getPower=function(){return this.isNullEquip()?0:GFunc.getPower(this.lvCfg.attr)>>0},e}(ItemDataBase);__reflect(FuwenData.prototype,"FuwenData");var ActivityType6Config=function(){function t(){}return t}();__reflect(ActivityType6Config.prototype,"ActivityType6Config");var VipHongbaoConfig=function(){function t(){}return t}();__reflect(VipHongbaoConfig.prototype,"VipHongbaoConfig");var WayConfig=function(){function t(){}return t.guanqia="guanqia",t}();__reflect(WayConfig.prototype,"WayConfig");var WCCommonConfig=function(){function t(){}return t}();__reflect(WCCommonConfig.prototype,"WCCommonConfig");var WCDashiConfig=function(){function t(){}return t}();__reflect(WCDashiConfig.prototype,"WCDashiConfig");var WCLevelConfig=function(){function t(){}return t}();__reflect(WCLevelConfig.prototype,"WCLevelConfig");var WCQualityConfig=function(){function t(){}return t}();__reflect(WCQualityConfig.prototype,"WCQualityConfig");var WCStageConfig=function(){function t(){}return t}();__reflect(WCStageConfig.prototype,"WCStageConfig");var WeaponAppearanceConfig=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return __extends(e,t),e}(AppearanceConfig);__reflect(WeaponAppearanceConfig.prototype,"WeaponAppearanceConfig");var WeChatConstConfig=function(){function t(){}return t}();__reflect(WeChatConstConfig.prototype,"WeChatConstConfig");var WeChatEggConfig=function(){function t(){}return t}();__reflect(WeChatEggConfig.prototype,"WeChatEggConfig");var WeChatRankConfig=function(){function t(){}return t}();__reflect(WeChatRankConfig.prototype,"WeChatRankConfig");var WeChatTaskConfig=function(){function t(){}return t}();__reflect(WeChatTaskConfig.prototype,"WeChatTaskConfig");var WingAppearanceConfig=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return __extends(e,t),e}(AppearanceConfig);__reflect(WingAppearanceConfig.prototype,"WingAppearanceConfig");var WingConstConfig=function(){function t(){}return t}();__reflect(WingConstConfig.prototype,"WingConstConfig");var WingHuanhuaBaseConfig=function(){function t(){}return t}();__reflect(WingHuanhuaBaseConfig.prototype,"WingHuanhuaBaseConfig");var WingHuanhuaGroupConfig=function(){function t(){}return t}();__reflect(WingHuanhuaGroupConfig.prototype,"WingHuanhuaGroupConfig");var WingLevelConfig=function(){function t(){}return t}();__reflect(WingLevelConfig.prototype,"WingLevelConfig");var WingPillConfig=function(){function t(){}return t}();__reflect(WingPillConfig.prototype,"WingPillConfig");var WingPillMaxConfig=function(){function t(){}return Object.defineProperty(t,"max",{get:function(){return"max"},enumerable:!0,configurable:!0}),t}();__reflect(WingPillMaxConfig.prototype,"WingPillMaxConfig");var WinHyperlinkConfig=function(){function t(){}return t}();__reflect(WinHyperlinkConfig.prototype,"WinHyperlinkConfig");var WorldLevelConfig=function(){function t(){}return t}();__reflect(WorldLevelConfig.prototype,"WorldLevelConfig");var WorldMapConfig=function(){function t(){}return t}();__reflect(WorldMapConfig.prototype,"WorldMapConfig");var WorshipConfig=function(){function t(){}return t}();__reflect(WorshipConfig.prototype,"WorshipConfig");var XBDianfengExConfig=function(){function t(){}return t}();__reflect(XBDianfengExConfig.prototype,"XBDianfengExConfig");var XBElementExConfig=function(){function t(){}return t}();__reflect(XBElementExConfig.prototype,"XBElementExConfig");var XunbaoExchangeConfig=function(){function t(){}return t}();__reflect(XunbaoExchangeConfig.prototype,"XunbaoExchangeConfig");var XBHunqiExConfig=function(){function t(){}return t}();__reflect(XBHunqiExConfig.prototype,"XBHunqiExConfig");var XBZhizhunExConfig=function(){function t(){}return t}();__reflect(XBZhizhunExConfig.prototype,"XBZhizhunExConfig");var XueseCommonConfig=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return __extends(e,t),e}(DevilCommonConfig);__reflect(XueseCommonConfig.prototype,"XueseCommonConfig");var XuesefbConfig=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return __extends(e,t),e}(DevilfbConfig);__reflect(XuesefbConfig.prototype,"XuesefbConfig");var XueseInspireConfig=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return __extends(e,t),e}(DevilInspireConfig);__reflect(XueseInspireConfig.prototype,"XueseInspireConfig");var XunbaoConstConfig=function(){function t(){}return t}();__reflect(XunbaoConstConfig.prototype,"XunbaoConstConfig");var XunbaoDianfengConfig=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return __extends(e,t),e}(XunbaoEquipConfig);__reflect(XunbaoDianfengConfig.prototype,"XunbaoDianfengConfig");var XunbaoElementConfig=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return __extends(e,t),e}(XunbaoEquipConfig);__reflect(XunbaoElementConfig.prototype,"XunbaoElementConfig");var StrUtil=function(){function t(){}return t.trimSpace=function(t){return t.replace(/^\s*(.*?)[\s\n]*$/g,"$1")},t.getStringLength=function(t){for(var e=t.split(""),i=0,n=0;n<e.length;n++){var a=e[n];i+=this.isChinese(a)?2:1}return i},t.isChinese=function(t){var e=/^[\u4E00-\u9FA5]+$/;return e.test(t)?!1:!0},t.strByteLen=function(t){for(var e=0,i=t.length,n=0;i>n;n++)e+=t.charCodeAt(n)>=127?2:1;return e},t.complementByChar=function(t,e,i,n){void 0===i&&(i=" "),void 0===n&&(n=!0);var a=this.strByteLen(n?t.replace(RegUtil.HTML,""):t);return t+this.repeatStr(i,e-a)},t.repeatStr=function(t,e){for(var i="",n=0;e>n;n++)i+=t;return i},t.addColor=function(t,e){var i;return"string"==typeof e?i=String(e):"number"==typeof e&&(i=Number(e).toString(10)),'<font color="'+i+'">'+t+"</font>"},t.addColorTF=function(t,e,i){return void 0===i&&(i=!1),i&&(t=this.addUnderLine(t.toString())),e?this.htmlParser.parser(this.addColor(t.toString(),e)):this.htmlParser.parser(t.toString())},t.addUnderLine=function(t){return"<u>"+t+"</u>"},t.getStrLength=function(t){for(var e=0,i=0;i<t.length;i++)" "==t[i]?e+=.5:e++;return Math.floor(e)},t.toTF=function(t){t||(t="");for(var e=t.split("|"),i="",n=0,a=e.length;a>n;n++)i+=StringUtil.getSingleTextFlow1(e[n]);return this.htmlParser.parser(i)},t.toTF2=function(t){t||(t="");for(var e=t.split("|"),i="",n=0,a=e.length;a>n;n++)i+=StringUtil.getSingleTextFlow1(e[n]);return i},t.strsToTF=function(t){var e=[];for(var i in t)e[i]=this.htmlParser.parser(t[i]);return e},t.htmlParser=new egret.HtmlTextParser,t}();__reflect(StrUtil.prototype,"StrUtil");var XunbaoHunqiConfig=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return __extends(e,t),e}(XunbaoEquipConfig);__reflect(XunbaoHunqiConfig.prototype,"XunbaoHunqiConfig");var XunbaoZhizhunConfig=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return __extends(e,t),e}(XunbaoEquipConfig);__reflect(XunbaoZhizhunConfig.prototype,"XunbaoZhizhunConfig");var YongbingConstConfig=function(){function t(){}return t}();__reflect(YongbingConstConfig.prototype,"YongbingConstConfig");var YongbingHuanhuaBaseConfig=function(){function t(){}return Object.defineProperty(t,"id",{get:function(){return"id"},enumerable:!0,configurable:!0}),Object.defineProperty(t,"stoneid",{get:function(){return"stoneid"},enumerable:!0,configurable:!0}),t}();__reflect(YongbingHuanhuaBaseConfig.prototype,"YongbingHuanhuaBaseConfig");var YongbingLevelConfig=function(){function t(){}return t}();__reflect(YongbingLevelConfig.prototype,"YongbingLevelConfig");var YongbingMozhenBaseConfig=function(){function t(){}return t}();__reflect(YongbingMozhenBaseConfig.prototype,"YongbingMozhenBaseConfig");var YongbingMozhenGroupConfig=function(){function t(){}return t}();__reflect(YongbingMozhenGroupConfig.prototype,"YongbingMozhenGroupConfig");var YongbingPillConfig=function(){function t(){}return t}();__reflect(YongbingPillConfig.prototype,"YongbingPillConfig");var YongbingPillMaxConfig=function(){function t(){}return Object.defineProperty(t,"max",{get:function(){return"max"},enumerable:!0,configurable:!0}),t}();__reflect(YongbingPillMaxConfig.prototype,"YongbingPillMaxConfig");var YongbingStageConfig=function(){function t(){}return t}();__reflect(YongbingStageConfig.prototype,"YongbingStageConfig");var YongZheConfig=function(){function t(){}return t}();__reflect(YongZheConfig.prototype,"YongZheConfig");var YongzheFubenConfig=function(){function t(){}return t}();__reflect(YongzheFubenConfig.prototype,"YongzheFubenConfig");var YongZheLevelConfig=function(){function t(){}return t.level="level",t}();__reflect(YongZheLevelConfig.prototype,"YongZheLevelConfig");var YongZheRewardConfig=function(){function t(){}return t.level="level",t}();__reflect(YongZheRewardConfig.prototype,"YongZheRewardConfig");var YongZheSaiJiConfig=function(){function t(){}return t}();__reflect(YongZheSaiJiConfig.prototype,"YongZheSaiJiConfig");var YongZheSeasonTaskConfig=function(){function t(){}return t}();__reflect(YongZheSeasonTaskConfig.prototype,"YongZheSeasonTaskConfig");var YongzheStoreConfig=function(){function t(){}return t}();__reflect(YongzheStoreConfig.prototype,"YongzheStoreConfig");var YongZheTaskConfig=function(){function t(){}return t}();__reflect(YongZheTaskConfig.prototype,"YongZheTaskConfig");var YYMSConfig=function(){function t(){}return t}();__reflect(YYMSConfig.prototype,"YYMSConfig");var ZCLConfig=function(){function t(){}return t}();__reflect(ZCLConfig.prototype,"ZCLConfig");var ZeroBuyConfig=function(){function t(){}return t}();__reflect(ZeroBuyConfig.prototype,"ZeroBuyConfig");var ZhuanShengLevelConfig=function(){function t(){}return t}();__reflect(ZhuanShengLevelConfig.prototype,"ZhuanShengLevelConfig");var ZhuanshengTaskConfig=function(){function t(){}return t}();__reflect(ZhuanshengTaskConfig.prototype,"ZhuanshengTaskConfig");var ZhuZaiCommonConfig=function(){function t(){}return t}();__reflect(ZhuZaiCommonConfig.prototype,"ZhuZaiCommonConfig");var ZhuZaiDamageRewardConfig=function(){function t(){}return t}();__reflect(ZhuZaiDamageRewardConfig.prototype,"ZhuZaiDamageRewardConfig");var ZhuZaiFubenConfig=function(){function t(){}return t}();__reflect(ZhuZaiFubenConfig.prototype,"ZhuZaiFubenConfig");var ZhuZaiRankRewardConfig=function(){function t(){}return t}();__reflect(ZhuZaiRankRewardConfig.prototype,"ZhuZaiRankRewardConfig");var ZLXZConfig=function(){function t(){}return t}();__reflect(ZLXZConfig.prototype,"ZLXZConfig");var ZuJiAppearanceConfig=function(){function t(){}return t}();__reflect(ZuJiAppearanceConfig.prototype,"ZuJiAppearanceConfig");var xianLuSys=System.xianLuSys,RpFun=function(t){function e(){var e=t.call(this)||this;return RpSys.ins().setKeys([ShouHuHuanHuaWin,DamonHuanHuaPanel],[[ShouHuWin,DamonPanel,DamonStagePanel,ShouHuHuanHuaWin,DamonHuanHuaPanel]]),RpSys.ins().setKeys([ShouHuHuanHuaWin,YongbingHuanHuaPanel],[[ShouHuWin,YongbingPanel,YongbingStagePanel,ShouHuHuanHuaWin,YongbingHuanHuaPanel]]),RpSys.ins().setKeys([ShouHuHuanHuaWin,ShenmoHuanHuaPanel],[[ShouHuWin,ShenmoPanel,ShenmoStagePanel,ShouHuHuanHuaWin,ShenmoHuanHuaPanel]]),RpSys.ins().setKeys([ExtCom,SuitWin],[[RoleWin,RolePanel,SuitWin]]),e}return __extends(e,t),e.ins=function(){return t.getIns.call(this,e)},e.checkCode=function(t,e){return t!=PCode.DEL||e?t==PCode.ADD&&e?e:void 0:!e},e.doAllSysInit=function(){this.showBossHomeRedPoint(),this.showFruit(),this.showFuwen(),this.showComposeRedPoint(PCode.UPD),this.showFenJieRedPoint(PCode.UPD),this.showBagItemByTitle(PCode.UPD),this.showGemRedPoint(),this.showBagItemByBaoXiang(PCode.UPD),this.showBagItemByMeilinBox(PCode.UPD),this.showBagItemByWanZheBox(PCode.UPD),this.showBagItemBySelectBox(PCode.UPD),this.showBagItemByCZK(PCode.UPD),this.showSmeltPoint(PCode.UPD),this.showEquipRedPoint(),this.showForgeRedPoint(PCode.UPD),this.guildUpLvRedPoint(PCode.UPD),this.showFuwenLevelUp(),this.showFuwenChoujiang(),this.showShopRedPoint(),this.showYongZheShopRedPoint(),this.showDaZaoEquipRedPoint(),this.guildSkillRedPoint(),this.updateGoldFunc(),this.showDamonLvRedPoint(216),this.showDamonLvSkillRedPoint(216),this.showDamonStageRedPoint(216),this.showDamonStageSkillRedPoint(216),this.showHuanHuaRedPoint(216),this.showYinJiRedPoint(289),this.showMoZhenRedPoint(290),this.showDamonLvRedPoint(217),this.showDamonLvSkillRedPoint(217),this.showDamonStageRedPoint(217),this.showDamonStageSkillRedPoint(217),this.showHuanHuaRedPoint(217),this.showYinJiRedPoint(292),this.showMoZhenRedPoint(293),this.showDamonLvRedPoint(218),this.showDamonLvSkillRedPoint(218),this.showDamonStageRedPoint(218),this.showDamonStageSkillRedPoint(218),this.showHuanHuaRedPoint(218),this.showYinJiRedPoint(302),this.showMoZhenRedPoint(305),this.showShenQiLvRedPoint(210),this.showShenQiSkillRedPoint(210),this.showShenQiHuanHuaRedPoint(210),this.showShenQiFuHunRedPoint(210),this.showShenQiLvRedPoint(211),this.showShenQiSkillRedPoint(211),this.showShenQiHuanHuaRedPoint(211),this.showShenQiFuHunRedPoint(211),this.showShenQiLvRedPoint(212),this.showShenQiSkillRedPoint(212),this.showShenQiHuanHuaRedPoint(212),this.showShenQiFuHunRedPoint(212),this.showShenQiLvRedPoint(213),this.showShenQiSkillRedPoint(213),this.showShenQiHuanHuaRedPoint(213),this.showShenQiFuHunRedPoint(213),this.showHunqiRedPoint(),this.showShengWuNewRedPoint(PCode.UPD),this.showAoyiRedPoint(),this.showZhaoCaiLongRedPoint(),this.showZhaoCaiLongBuyRp(),this.showXunZhangRedPoint(),this.showXunZhangBuyRp(),this.showZSRedPoint(),this.showShengbeiRp(),this.showShengbeiBuyRp(),this.showSuitRp(),this.showGuajiTZRp(),this.showGuajiRewardRp(),this.showGuajiKsgjRp(),this.showMeiRiFbRp(),this.showMonthCardRedPoint(),this.showZZTQCardRedPoint(),this.showXunBaoRedPoint(),this.showXunBaobagRedPoint(),this.showXunBaoDuiHuanRedPoint(),this.showSigninRedPoint(),this.showVipAwardRp(),this.showVipRedPacketRp(),this.showSVipAwardRp(),this.showSVipEveryDayAwardRp(),this.showSkillRp(),this.showLiLianRedPoint(),this.showQiJiluRedPoint(),this.showQiyuEventRp(),this.showQiyuDuihuanRp(),this.showDailyOnlineRedPoint(),this.showLoginAwardRedPoint(),this.showKfBossRedPoint(),this.showHeiAnTZRedPoint(PCode.UPD),this.showHeiAnSDRedPoint(PCode.UPD),this.showWanMoTZRedPoint(PCode.UPD),this.showYongZheRedPoint(PCode.UPD),this.showYongZheRewardRedPoint(),this.showLadderRedPoint(),this.showMineCaiji(),this.showMineLueDuo(),this.showStarRedPoint(),this.showYYMSRp(),this.showSVIPMSRp(),this.showJinZuanRedPoint(),this.showAgreementRedPoint(PCode.UPD),this.showBBFLLoginRp(),this.showBBFLCustomRp(),this.showBBFLLevelRp(),this.showZeroBuyRp(),this.showDLHLRedPoint(),this.showYiYuanRedPoint(),this.showFirstRechargeEverydayRedPoint(),this.showYiYuanRedPoint(),this.showYZZHRedPoint(),this.showYZZHTaskRedPoint(),this.showYZZHBoxRedPoint(),this.showMoLongRedPoint(),this.showTianMoRedPoint(PCode.UPD),this.showTianMoRankRedPoint(PCode.UPD),this.showTianMoSplitRedPoint(PCode.UPD),this.showZhuZaiRedPoint(PCode.UPD),this.showFootLevelRp(),this.showFootDaShiRp(),this.showFootHuanHuaRp(),this.showFootMiYuEquipRp(),this.showFootMiYuLevelRp(),this.showFootMiYuSkillRp(),this.showDartJifenRedPoint(),this.showDartJoinPoint(),this.showWxYqhlEggRp(),this.showWxYqhlEggRp2(),this.showWxYqhlYqkRp(),this.showWxYqhlJjkRp(),this.showWxYqhlZsRp(),this.showWxYqhlSvipRp(),this.showQMDBRedPoint(),this.showXianluRp(),this.showXianluTaskRp(),this.showShengLingLevelRp(),this.showShengLingDaShiRp(),this.showShengLingYinJiRp(),this.showShengLingTaoZhuangRp(),this.showShengLingStageRp(),this.showMonsterSiegeRp(),this.showShenYouUpLevelRedPoint(),this.showShenYouHuanHuaRedPoint(),this.showShenYouYinJiRedPoint(),this.showShenYouSkillRedPoint(),this.showShenYouYinJiSkillRedPoint(),this.showShenDianRedPoint(),this.showWCLevelRp(),this.showWCDashiRp(),this.showWCStageRp(),this.showPurifyRedPoin(PCode.UPD),this.showPurifyDaShiRedPoint(),this.showGuZhanRedPoint(PCode.UPD),this.showGuZhanReweardRedPoint(PCode.UPD),this.showTianShiShengDun(),this.showTianShiShengDunDan(),this.showBraveRedPoint(PCode.UPD),this.showKlmRedPoint(PCode.UPD),this.showKlmKunDunRedPoint(PCode.UPD),this.showEnchantRedPoint(PCode.UPD),this.showEnchantSplitRedPoint(PCode.UPD),this.showSuitSingle(),this.showCampWarTzRp(),this.showCampWarDailyRewardRp(),this.showCampWarScoreRewardRp(),this.updateHuoDong()},e.updateGoldFunc=function(){this.showZSRedPoint(),this.showForgeFosterRedPoint(),this.showGuildConRedPoint(PCode.ADD),this.showStarRedPoint()},e.updateItem=function(t,i){this.showComposeRedPoint(PCode.UPD),this.showFenJieRedPoint(PCode.UPD);var n=i.cfg.type;if(n==ItemType.GodRing||n==ItemType.MoRing)return void this.showDaZaoEquipRedPoint();if(i.id==Cfg.getConfig(MateCommonConfig).expItem||n==ItemType.Xianlu)return this.showXianluRp(),void this.showXianluTaskRp();if(i.id==Cfg.getConfig(EnumConfig).EMO_ITEM)return void this.showEmoRedPoint(t);if(i.id==Cfg.getConfig(EnumConfig).XUESE_ITEM)return void this.showXueSeRedPoint(t);if(n==ItemType.equip)return this.showSmeltPoint(PCode.UPD),void this.shoeEquipItemRedPoint(i);if(n==ItemType.TianMoGodEquip||n==ItemType.TianMoGodEquipcl)return this.showTianMoRedPoint(PCode.UPD),this.showTianMoRankRedPoint(PCode.UPD),void this.showTianMoSplitRedPoint(PCode.UPD);if(n==ItemType.guoshi)return void this.showFruitSingle(i,t);if(this.showForgeRedPoint(t,i),i.cfg.type==ItemType.ZsItem)return void this.showZSRedPoint();if(n==ItemType.title)return void this.showBagItemByTitle(t);if(n==ItemType.baoxiang)return void this.showBagItemByBaoXiang(PCode.UPD);if(n==ItemType.meilinBox&&this.showBagItemByMeilinBox(PCode.UPD),n==ItemType.WangZheBox&&this.showBagItemByWanZheBox(PCode.UPD),n==ItemType.CZK&&this.showBagItemByCZK(PCode.UPD),n==ItemType.SelectBox&&this.showBagItemBySelectBox(PCode.UPD),n==ItemType.gem)return void this.showGemRedPoint();if(n==ItemType.BossHome)return void this.showBossHomeRedPoint();if(n!=ItemType.TouXian){if(n==ItemType.ShenqiLv)return this.showShenQiLvRedPoint(210),e.showActRp(276),void e.showActRp(308);if(n==ItemType.WingLv)return this.showShenQiLvRedPoint(211),e.showActRp(276),void e.showActRp(308);if(n==ItemType.SzLv)return this.showShenQiLvRedPoint(212),e.showActRp(276),void e.showActRp(308);if(n==ItemType.MeilinLv)return this.showShenQiLvRedPoint(213),e.showActRp(276),void e.showActRp(308);if(n==ItemType.ShenqiHuanHua)return void this.showShenQiHuanHuaRedPoint(210);if(n==ItemType.WingHuanHua)return void this.showShenQiHuanHuaRedPoint(211);if(n==ItemType.SzHuanHua)return void this.showShenQiHuanHuaRedPoint(212);if(n==ItemType.MeilinHuanHua)return void this.showShenQiHuanHuaRedPoint(213);if(n==ItemType.ShenqiFuhun)return void this.showShenQiFuHunRedPoint(210);if(n==ItemType.WingFuhun)return void this.showShenQiFuHunRedPoint(211);if(n==ItemType.SzFuhun)return void this.showShenQiFuHunRedPoint(212);if(n==ItemType.MeilinFuhun)return void this.showShenQiFuHunRedPoint(213);if(i.id==Cfg.getConfig(DamonConstConfig).levelitemid)return this.showDamonLvRedPoint(216),e.showActRp(276),void e.showActRp(308);if(i.id==Cfg.getConfig(YongbingConstConfig).levelitemid)return this.showDamonLvRedPoint(217),e.showActRp(276),void e.showActRp(308);if(i.id==Cfg.getConfig(ShenmoConstConfig).levelitemid)return this.showDamonLvRedPoint(218),e.showActRp(276),void e.showActRp(308);if(i.id==Cfg.getConfig(DamonConstConfig).stageitemid)return void this.showDamonStageRedPoint(216);if(i.id==Cfg.getConfig(YongbingConstConfig).stageitemid)return void this.showDamonStageRedPoint(217);if(i.id==Cfg.getConfig(ShenmoConstConfig).stageitemid)return void this.showDamonStageRedPoint(218);if(i.cfg.type==ItemType.JLSJS)return void this.showDamonStageRedPoint(216);if(i.cfg.type==ItemType.YBSJS)return void this.showDamonStageRedPoint(217);if(i.cfg.type==ItemType.SMSJS)return void this.showDamonStageRedPoint(218);if(n==ItemType.DamonHuanHua)return void this.showHuanHuaRedPoint(216);if(n==ItemType.YongbingHuanHua)return void this.showHuanHuaRedPoint(217);if(n==ItemType.ShenmoHuanHua)return void this.showHuanHuaRedPoint(218);if(n==ItemType.DamonYinji)return void this.showYinJiRedPoint(289);if(n==ItemType.YongbingYinji)return void this.showYinJiRedPoint(292);if(n==ItemType.ShenmoYinji)return void this.showYinJiRedPoint(302);if(n==ItemType.DamonMozhen)return void this.showMoZhenRedPoint(290);if(n==ItemType.YongbingMozhen)return void this.showMoZhenRedPoint(293);if(n==ItemType.ShenmoMozhen)return void this.showMoZhenRedPoint(305);if(n==ItemType.Hunqi)return void this.showHunqiRedPoint();if(n==ItemType.Shengwu)return void this.showShengWuNewRedPoint(t);if(n==ItemType.YuanShi)return void this.showForgeAddYuanShiRedPoint();if(n==ItemType.Aoyi)return void this.showAoyiRedPoint();if(n==ItemType.XunBaoItem)return void this.showXunBaoRedPoint();if(n==ItemType.Shengbei)return void this.showShengbeiRp();if(i.id==Cfg.getConfig(FootConstConfig).dazaoneeditem.id)return void this.showDaZaoEquipRedPoint();if(n==ItemType.FootLv)return void this.showFootLevelRp();if(n==ItemType.FootHuanHua)return void this.showFootHuanHuaRp();if(n==ItemType.FootEquip)return void this.showFootMiYuEquipRp();if(n==ItemType.ShenYouUpLevel)return void this.showShenYouUpLevelRedPoint();if(n==ItemType.ShenYouHuanHua)return void this.showShenYouHuanHuaRedPoint();if(n==ItemType.ShenYouSkill)return void this.showShenYouSkillRedPoint();if(n==ItemType.ShenYouYinJi)return void this.showShenYouYinJiRedPoint();if(n==ItemType.ShenYouYinJiiSkill)return void this.showShenYouYinJiSkillRedPoint();if(n==ItemType.ShengLingLevel)return void this.showShengLingLevelRp();if(n==ItemType.ShengLingYinJi)return void this.showShengLingYinJiRp();if(n==ItemType.ShengLingStage)return void this.showShengLingStageRp();if(n==ItemType.WCLevelType)return void this.showWCLevelRp();if(n==ItemType.Purify)return this.showPurifyRedPoin(PCode.UPD),void this.showPurifyDaShiRedPoint();if(n==ItemType.TianShiShengDunLinShi)return void this.showTianShiShengDun();if(n==ItemType.TianShiShengDunDan)return void this.showTianShiShengDunDan();if(n==ItemType.ShenPanTaoZhuanItemType&&this.showSuitSingle(),n==ItemType.fumosuipian)return this.showEnchantRedPoint(PCode.UPD),void this.showEnchantSplitRedPoint(PCode.UPD);if(n==ItemType.fumojuanzhou)return void this.showEnchantRedPoint(PCode.UPD);if(n==ItemType.QingMingItem)return this.showActRp(333),this.showActRp(332),void this.showActRp(320);if(i.id==Cfg.getConfig(EnumConfig).kalima_ItemId)return void this.showKlmRedPoint(PCode.UPD);n==ItemType.ForgeItem&&this.showKlmRedPoint(PCode.UPD),this.showChatFrameRp()}},e.updateCurrency=function(t,e){t==CurType.gold?Timer.ins()["do"](3e3,0,1,this.updateGoldFunc,this,TimerType.FIRST):t==CurType.guildContrib?this.guildSkillRedPoint():t==CurType.fuildfund?this.guildUpLvRedPoint(e):t==CurType.elementEssence?this.showFuwenLevelUp():t==CurType.elementDust?this.showFuwenChoujiang():t==CurType.talentValue?this.showSkillRp():t==CurType.JinZuan?(this.showZeroBuyRp(),this.showActSingleRp(2003)):t==CurType.footMiYu?this.showFootMiYuLevelRp():t==CurType.QiyuValue?this.showQiyuDuihuanRp():t==CurType.DartLueduoLing?this.showDartLueduoRp():t==CurType.DartScore?this.showDartJifenRedPoint():t==CurType.gongchengJifen?this.showMonsterSiegeRp():t==CurType.WCStage&&this.showWCStageRp()},e.updateHuoDong=function(){this.showActRp(45),this.showActRp(276),this.showActRp(268),this.showActRp(303),this.showActRp(304),this.showActRp(306),this.showActRp(266),this.showActRp(308),this.showActRp(333),this.showActRp(332),this.showActRp(320),this.showActSingleRp(2003)},e.newFunOpenupdateRed=function(t){this.showZSRedPoint(),237==t&&this.showWanMoTZRedPoint(PCode.UPD),323==t&&(this.showYongZheRedPoint(PCode.UPD),this.showYongZheRewardRedPoint()),248==t&&this.showHeiAnTZRedPoint(PCode.UPD),250==t&&this.showEmoRedPoint(PCode.UPD),288==t&&this.showXueSeRedPoint(PCode.UPD),209==t&&this.showFuwen(),208==t&&this.showFruit(),233==t&&this.showEquipBossRedPoint(),224==t&&this.showSmeltPoint(PCode.UPD),222==t&&(this.showForgeAddRedPoint(),this.showForgeAddYuanShiRedPoint()),219==t&&this.showForgeBoostRedPoint(PCode.UPD),223==t&&this.showForgeFosterRedPoint(),207==t&&this.showStarRedPoint(),256==t&&this.ShowJJCRedPoint(),234==t&&this.showJueWangRedPoint(PCode.UPD),45==t&&this.showActRp(45),262==t&&this.showMonthCardRedPoint(),296==t&&(this.showQiyuEventRp(),this.showQiyuDuihuanRp()),267==t&&this.showLoginAwardRedPoint(),1==t&&this.showAgreementRedPoint(PCode.UPD),304==t&&(this.showBBFLLoginRp(),this.showBBFLCustomRp(),this.showBBFLLevelRp()),43==t&&this.showSigninRedPoint(),270==t&&this.showDailyOnlineRedPoint(),130==t&&this.showActRp(276),268==t&&this.showActRp(268),303==t&&this.showActRp(303),304==t&&this.showActRp(304),306==t&&this.showActRp(306),266==t&&this.showActRp(266),308==t&&this.showActRp(308),221==t&&this.showDaZaoEquipRedPoint(),226==t&&this.showLiLianRedPoint(),205==t&&(this.showZhaoCaiLongRedPoint(),this.showZhaoCaiLongBuyRp()),205==t&&this.showXunBaoRedPoint(),204==t&&this.showSuitRp(),216==t&&(this.showDamonLvRedPoint(216),this.showDamonLvSkillRedPoint(216),this.showDamonStageRedPoint(216),this.showDamonStageSkillRedPoint(216),this.showHuanHuaRedPoint(216),this.showMoZhenRedPoint(290)),289==t&&this.showYinJiRedPoint(289),217==t&&(this.showDamonLvRedPoint(217),this.showDamonLvSkillRedPoint(217),this.showDamonStageRedPoint(217),this.showDamonStageSkillRedPoint(217),this.showHuanHuaRedPoint(217),this.showMoZhenRedPoint(293)),292==t&&this.showYinJiRedPoint(292),218==t&&(this.showDamonLvRedPoint(218),this.showDamonLvSkillRedPoint(218),this.showDamonStageRedPoint(218),this.showDamonStageSkillRedPoint(218),this.showHuanHuaRedPoint(218),this.showMoZhenRedPoint(305)),302==t&&this.showYinJiRedPoint(302),210==t&&(this.showShenQiLvRedPoint(210),this.showShenQiSkillRedPoint(210),this.showShenQiHuanHuaRedPoint(210),this.showShenQiFuHunRedPoint(210)),211==t&&(this.showShenQiLvRedPoint(211),this.showShenQiSkillRedPoint(211),this.showShenQiHuanHuaRedPoint(211),this.showShenQiFuHunRedPoint(211)),212==t&&(this.showShenQiLvRedPoint(212),this.showShenQiSkillRedPoint(212),this.showShenQiHuanHuaRedPoint(212),this.showShenQiFuHunRedPoint(212)),213==t&&(this.showShenQiLvRedPoint(213),this.showShenQiSkillRedPoint(213),this.showShenQiHuanHuaRedPoint(213),this.showShenQiFuHunRedPoint(213)),291==t&&this.showShopRedPoint(),252==t&&(this.showMineCaiji(),this.showMineLueDuo()),263==t&&this.showYYMSRp(),263==t&&this.showSVIPMSRp(),2==t&&this.showJinZuanRedPoint(),261==t&&this.showZZTQCardRedPoint(),6==t&&this.showDLHLRedPoint(),235==t&&this.showKfBossRedPoint(),11==t&&this.showYiYuanRedPoint(),315==t&&(this.showYZZHRedPoint(),this.showYZZHTaskRedPoint(),this.showYZZHBoxRedPoint()),314==t&&this.showMoLongRedPoint(),316==t&&(this.showFootLevelRp(),this.showFootDaShiRp(),this.showFootHuanHuaRp(),this.showFootMiYuEquipRp(),this.showFootMiYuLevelRp(),this.showFootMiYuSkillRp()),338==t&&(this.showTianMoRedPoint(PCode.UPD),this.showTianMoRankRedPoint(PCode.UPD),this.showTianMoSplitRedPoint(PCode.UPD)),342==t&&this.showZhuZaiRedPoint(PCode.UPD),343==t&&(this.showWxYqhlEggRp(),this.showWxYqhlEggRp2(),this.showWxYqhlYqkRp(),this.showWxYqhlJjkRp(),this.showWxYqhlZsRp(),this.showWxYqhlSvipRp()),351==t&&(this.showXianluRp(),this.showXianluTaskRp()),345==t&&this.showQMDBRedPoint(),326==t&&(this.showShengLingLevelRp(),this.showShengLingDaShiRp(),this.showShengLingYinJiRp(),this.showShengLingTaoZhuangRp(),this.showShengLingStageRp()),(t=325)&&(this.showShenYouUpLevelRedPoint(),this.showShenYouHuanHuaRedPoint(),this.showShenYouYinJiRedPoint(),this.showShenYouSkillRedPoint(),this.showShenYouYinJiSkillRedPoint()),324==t&&this.showShenDianRedPoint(),354==t&&this.showMonsterSiegeRp(),357==t&&(this.showWCLevelRp(),this.showWCDashiRp(),this.showWCStageRp()),358==t&&(this.showPurifyRedPoin(PCode.UPD),this.showPurifyDaShiRedPoint()),359==t&&(this.showGuZhanRedPoint(PCode.UPD),this.showGuZhanReweardRedPoint(PCode.UPD)),337==t&&(this.showTianShiShengDun(),this.showTianShiShengDunDan()),341==t&&this.showBraveRedPoint(PCode.UPD),336==t&&(this.showSuitSingle(),this.showEnchantRedPoint(PCode.UPD),this.showEnchantSplitRedPoint(PCode.UPD)),333==t&&this.showActRp(333),332==t&&this.showActRp(332),339==t&&(this.showKlmRedPoint(PCode.UPD),this.showKlmKunDunRedPoint(PCode.UPD)),349==t&&(this.showCampWarTzRp(),this.showCampWarDailyRewardRp(),this.showCampWarScoreRewardRp())},e.updateGuanQia=function(){this.showQiJiluRedPoint(),this.showGuajiRewardRp(),this.showActRp(303),this.showActRp(304),this.showBBFLCustomRp()},e.updateZS=function(){this.showZhaoCaiLongRedPoint(),this.showZhaoCaiLongBuyRp(),this.showXunZhangRedPoint(),this.showXunZhangBuyRp(),this.showSuitRp(),this.showYongZheRedPoint(),this.showEquipBossRedPoint(),this.showEquipRedPoint(),this.showTianMoRankRedPoint(PCode.UPD),this.showTianMoRedPoint(PCode.UPD)},e.updateLevel=function(t){this.showEquipBossRedPoint(),this.showJueWangRedPoint(PCode.UPD),this.showEquipRedPoint(),this.showActRp(303),this.showActRp(304),this.showBBFLLevelRp()},e.showBagItemByTitle=function(t,e){var i=RpSys.ins().getData(BagWin,BagItemPanel,ItemType.title);if(!this.checkCode(t,i)){var n=BagSys.ins().getItemByType(ItemType.title);RpSys.ins().setData(n.length>0,BagWin,BagItemPanel,ItemType.title)}},e.showBagItemByBaoXiang=function(t,e){var i=RpSys.ins().getData(BagWin,BagItemPanel,ItemType.baoxiang);if(!this.checkCode(t,i)){var n=BagSys.ins().getItemByType(ItemType.baoxiang);RpSys.ins().setData(n.length>0,BagWin,BagItemPanel,ItemType.baoxiang)}},e.showBagItemByMeilinBox=function(t,e){var i=RpSys.ins().getData(BagWin,BagItemPanel,ItemType.meilinBox);if(!this.checkCode(t,i)){var n=BagSys.ins().getItemByType(ItemType.meilinBox);RpSys.ins().setData(n.length>0,BagWin,BagItemPanel,ItemType.meilinBox)}},e.showBagItemByWanZheBox=function(t,e){var i=RpSys.ins().getData(BagWin,BagItemPanel,ItemType.WangZheBox);if(!this.checkCode(t,i)){var n=BagSys.ins().getItemByType(ItemType.WangZheBox);RpSys.ins().setData(n.length>0,BagWin,BagItemPanel,ItemType.WangZheBox)}},e.showBagItemByCZK=function(t,e){var i=RpSys.ins().getData(BagWin,BagItemPanel,ItemType.CZK);if(!this.checkCode(t,i)){var n=BagSys.ins().getItemByType(ItemType.CZK);RpSys.ins().setData(n.length>0,BagWin,BagItemPanel,ItemType.CZK)}},e.showBagItemBySelectBox=function(t,e){var i=RpSys.ins().getData(BagWin,BagItemPanel,ItemType.SelectBox);if(!this.checkCode(t,i)){var n=BagSys.ins().getItemByType(ItemType.SelectBox);RpSys.ins().setData(n.length>0,BagWin,BagItemPanel,ItemType.SelectBox)}},e.showHunqiRedPoint=function(){if(GFunc.isSysUpdate(215))for(var t=SkillSys.ins().hunqiDatas,e=0,i=t;e<i.length;e++){var n=i[e];
this.showHunqiRedPointSingle(n)}},e.showHunqiRedPointSingle=function(t){RpSys.ins().setData(t.canUp(),SkillWin,HunqiPanel,t.getQuality(),t.id)},e.showSkillRp=function(){for(var t=SkillSys.ins().skillDatas,e=0,i=t;e<i.length;e++){var n=i[e];this.showSkillSingleRp(n)}},e.showSkillSingleRp=function(t){RpSys.ins().setData(t.canUp(),SkillWin,SkillMainPanel,SkillPanel,t.skillId)},e.showSmeltPoint=function(t){if(GFunc.isSysUpdate(224)){var e=RpSys.ins().getData(BagWin,RongLianEquipPanel);this.checkCode(t,e)||RpSys.ins().setData(BagSys.ins().getEquipByLessStar(0,50).length>=50,BagWin,RongLianEquipPanel)}},e.showWanMoSDRedPoint=function(t){if(GFunc.isSysUpdate(237)){var e=FbSys.ins().wanmoModel.fbId;if(0!=e){var i=FbSys.ins().wanmoModel.canSaodang();RpSys.ins().setData(i,ExtCom,FuBenWin,FuBenDanRenPanel,WanMoPanel,"sd")}}},e.showWanMoTZRedPoint=function(t){if(GFunc.isSysUpdate(237)){var e=FbSys.ins().wanmoModel;e.isMax()?RpSys.ins().setData(!1,ExtCom,FuBenWin,FuBenDanRenPanel,WanMoPanel,"tz"):RpSys.ins().setData(e.isShowRedPoint,ExtCom,FuBenWin,FuBenDanRenPanel,WanMoPanel,"tz"),RpSys.ins().setData(e.maxGuanQiaReward.canGet(),ExtCom,FuBenWin,FuBenDanRenPanel,WanMoPanel,"maxReward"),RpSys.ins().setData(e.minGuanQiaReward.canGet(),ExtCom,FuBenWin,FuBenDanRenPanel,WanMoPanel,"minReward")}},e.showHeiAnSDRedPoint=function(t){if(GFunc.isSysUpdate(248)){var e=FbSys.ins().heianModel.fbId;if(0!=e){var i=FbSys.ins().heianModel.canSaodang();RpSys.ins().setData(i,ExtCom,FuBenWin,FuBenDanRenPanel,HeiAnPanel,"sd")}}},e.showHeiAnTZRedPoint=function(t){GFunc.isSysUpdate(248)&&(FbSys.ins().heianModel.isMax()?RpSys.ins().setData(!1,ExtCom,FuBenWin,FuBenDanRenPanel,HeiAnPanel,"tz"):RpSys.ins().setData(FbSys.ins().heianModel.isShowRedPoint,ExtCom,FuBenWin,FuBenDanRenPanel,HeiAnPanel,"tz"))},e.showZSRedPoint=function(){if(GFunc.isSysUpdate(202)){for(var t=JobSys.ins().zsData,e=!0,i=0;i<t.zsTaskDatas.length;i++){var n=t.zsTaskDatas[i];RpSys.ins().setData(1==n.state,JobWin,ZSPanel,ZSPanelTaskItem,n.index)}e=!t.isMax()&&t.isSucceedAllTask()&&JobSys.ins().zsData.isReceiveAllTask(),RpSys.ins().setData(e,JobWin,ZSPanel,"act")}},e.showMailSRedPoint=function(t){var e=RpSys.ins().getData(MailWin);this.checkCode(t,e)||RpSys.ins().setData(MailSys.ins().hasMailCanGet(),MailWin)},e.showEmoRedPoint=function(t){if(GFunc.isSysUpdate(250)){var e=RpSys.ins().getData(ExtCom,FuBenWin,FuBenEXPPanel,EmoPanel);if(!this.checkCode(t,e)){var i=!1;FbSys.ins().emoModel.fbId>0&&(i=FbSys.ins().emoModel.result&&FbSys.ins().emoModel.leftCount>0),RpSys.ins().setData(i,ExtCom,FuBenWin,FuBenEXPPanel,EmoPanel)}}},e.showXueSeRedPoint=function(t){if(GFunc.isSysUpdate(288)){var e=RpSys.ins().getData(ExtCom,FuBenWin,FuBenEXPPanel,XueSePanel);if(!this.checkCode(t,e)){var i=!1;FbSys.ins().xueSeModel.fbId>0&&(i=FbSys.ins().xueSeModel.result&&FbSys.ins().xueSeModel.leftCount>0),RpSys.ins().setData(i,ExtCom,FuBenWin,FuBenEXPPanel,XueSePanel)}}},e.showJueWangRedPoint=function(t){if(GFunc.isSysUpdate(234))for(var e=!1,i=FbSys.ins().juewangModel.bossInfo,n=0;n<i.length;n++){var a=i[n];e=FbSys.ins().juewangModel.challengeCount>0&&!a.isDie&&a.isopen&&a.isRemind,RpSys.ins().setData(e,BossWin,BossBenFuPanel,QuanMinPanel,a.id)}},e.showEquipRedPoint=function(){for(var t=BagSys.ins().getBagEuips(),e=[],i=0;i<BagSys.ins().equipDatas.length;i++)e[i]=!1;for(var n=0,a=t;n<a.length;n++){var o=a[n],s=o.cfg.subType;if(!e[s]){var r=BagSys.ins().getEquipByIndex(s),u=Actor.ins().level>=o.cfg.level&&Actor.ins().zsId>=o.cfg.zslevel&&o.power>r.power;e[s]=u,RpSys.ins().setData(u,RoleWin,RolePanel,"equip",s)}}},e.shoeEquipItemRedPoint=function(t){var e=Actor.ins().attrData;if(e){var i=BagSys.ins().getEquipByIndex(t.cfg.subType),n=!1;n=i.hasEquipOn()?BagSys.ins().hasBetterEquip(i):BagSys.ins().hasEquip(t.cfg.subType),RpSys.ins().setData(n,RoleWin,RolePanel,"equip",t.cfg.subType)}},e.showEquipSingleRedPoint=function(t){var e=Actor.ins().attrData;if(e){var i=BagSys.ins().hasBetterEquip(t);RpSys.ins().setData(i,RoleWin,RolePanel,"equip",t.cfg.subType)}},e.showStarRedPoint=function(){if(GFunc.isSysUpdate(207)){var t=XingHunSys.ins().getData(0),e=Cfg.getConfig(StarsoulLevelConfig,t.level),i=Actor.ins().getCurrency(CurType.gold)>=e.count,n=i&&t.level<Cfg.getConfig(StarsoulCommonConfig).max_level;RpSys.ins().setData(n,RoleWin,RolePanel,MoJieWin,XingHunPanel,"upLevel"),n=t.canRank(),RpSys.ins().setData(n,RoleWin,RolePanel,MoJieWin,XingHunPanel,XingHunAttrWin)}},e.updateForgeRedPoint=function(t){222==t&&(this.showForgeAddRedPoint(),this.showForgeAddYuanShiRedPoint()),219==t&&(this.showForgeBoostRedPoint(PCode.UPD),this.getDaRenDaShiRedPoint()),223==t&&this.showForgeFosterRedPoint()},e.showForgeRedPoint=function(t,e){void 0===e&&(e=null),GFunc.isSysUpdate(222)&&this.showForgeAddRedPoint(e),GFunc.isSysUpdate(219)&&this.showForgeBoostRedPoint(t,e),GFunc.isSysUpdate(223)&&this.showForgeFosterRedPoint(e)},e.showForgeAddRedPoint=function(t){if(void 0===t&&(t=null),GFunc.isSysUpdate(222)&&(!t||t.cfg.id==Cfg.getConfig(EnumConfig).ITEM_SHENGMING))for(var e=BagSys.ins().equipDatas,i=0;i<e.length;i++){var n=e[i],a=Cfg.getConfig(AppendCostConfig,n.addlv),o=n.hasEquipOn()&&n.addlv<Cfg.getMaxConfig(AppendAttrConfig,0).level&&GFunc.isConsumeEnough(a.items);RpSys.ins().setData(o,ForgeWin,ForgeAddLvevlPanel,ForgeAddItem,n.equipPos)}},e.showForgeAddYuanShiRedPoint=function(t){if(void 0===t&&(t=null),GFunc.isSysUpdate(222))for(var e=ForgeSys.ins().addYuanShiData.addYuanShiItemDatas,i=0;i<e.length;i++){var n=e[i],a=new ItemDataReward;a.id=n.config.itemid,a.count=1;var o=!n.isMax&&n.isOpen&&GFunc.isConsumeEnough(a);RpSys.ins().setData(o,ForgeWin,ForgeAddLvevlPanel,ForgeAddPanelYuanShiItem,ForgeAddYuanShiWin,n.id)}},e.showForgeBoostRedPoint=function(t,e){void 0===e&&(e=null),GFunc.isSysUpdate(219)&&(e&&Cfg.getConfig(EnumConfig).EQUIBOOST_ITEM.indexOf(e.cfg.id)<0||this.showForgeBoostSingle())},e.showForgeBoostSingle=function(){if(GFunc.isSysUpdate(219))for(var t=BagSys.ins().equipDatas,e=0;e<t.length;e++){var i=t[e];if(i.hasEquipOn()){var n=this.getBoostRedPoint(i);RpSys.ins().setData(n,ForgeWin,ForgeBoostPanel,e)}}},e.getBoostRedPoint=function(t){if(!t.hasEquipOn())return!1;if(Cfg.getMaxConfig(EnhanceAttrConfig,0).level==t.strengthen)return!1;var e=Cfg.getConfig(EnhanceCostConfig,t.strengthen),i=Cfg.getConfig(CultureTypeConfig,1);i.money;return GFunc.isConsumeEnough(e.items)?!0:!1},e.getDaRenDaShiRedPoint=function(){if(GFunc.isSysUpdate(219)){var t=ForgeSys.ins().strengthenDaRenData.canRank();RpSys.ins().setData(t,ForgeWin,ForgeBoostPanel,ForgeBoostDaRenWin),t=ForgeSys.ins().strengthenDaShiData.canRank(),RpSys.ins().setData(t,ForgeWin,ForgeBoostPanel,ForgeBoostDaShiWin)}},e.showForgeFosterRedPoint=function(t){if(void 0===t&&(t=null),GFunc.isSysUpdate(223)&&(!t||Cfg.getConfig(EnumConfig).EQUIPFOSTER_ITEM==t.id))for(var e=1,i=!1,n=0;e>n;n++){for(var a=BagSys.ins().equipDatas,o=!1,s=0;s<a.length;s++){var r=a[s];if(r.hasEquipOn()){if(this.showForgeFosterSingle(r)){i=!0,o=!0;break}o=!1}}RpSys.ins().setData(o,ForgeWin,ForgeFosterPanel)}},e.showForgeFosterSingle=function(t){var e=Cfg.getConfig(CultureTypeConfig,CurType.gold),i=!1;return i=Actor.ins().getCurrency(CurType.gold)>=e.num&&GFunc.isConsumeEnough(e.items)&&!ForgeSys.ins().getFosterIsMax(t,t.rank)?!0:!1},e.showLoginAwardRedPoint=function(){if(GFunc.isSysUpdate(267))for(var t=ActSys.ins().getActDataById(ActId.ID_99800),e=0,i=t.actDataLogins;e<i.length;e++){var n=i[e];RpSys.ins().setData(n.hasAwardCanGet(),ExtCom,LoginAwardWin,LoginAwardPanel,n.id)}},e.showFruit=function(){if(GFunc.isSysUpdate(208))for(var t=FruitSys.ins().fruitTypeDatas,e=0,i=t;e<i.length;e++)for(var n=i[e],a=n.fruitDatas,o=0,s=a;o<s.length;o++){var r=s[o],u=this.showFruitSingle(r,PCode.UPD);if(u)break}},e.showFruitSingle=function(t,e){if(!GFunc.isSysUpdate(208))return!1;var i=Cfg.getConfig(FruitConfig,t.id),n=RpSys.ins().getData(RoleWin,RolePanel,MoJieWin,FruitPointPanel,i.type);if(this.checkCode(e,n))return n;var a=FruitSys.ins().getFruitTypeData(i.type),o=a.isUse();if(o){var s=BagSys.ins().getItemCount(i.id);o=s>0}return RpSys.ins().setData(o,RoleWin,RolePanel,MoJieWin,FruitPointPanel,i.type),o},e.showFuwenChoujiang=function(){GFunc.isSysUpdate(209)&&(Actor.ins().getCurrency(CurType.elementDust)<Cfg.getConfig(ElementLibraryConfig,FuwenSys.ins().posLibrary).huntOnce?RpSys.ins().setData(!1,RoleWin,RolePanel,FuwenSysWin,FuwenTilianPanel):RpSys.ins().setData(!0,RoleWin,RolePanel,FuwenSysWin,FuwenTilianPanel))},e.showFuwen=function(){if(GFunc.isSysUpdate(209)){for(var t=!1,e=FuwenSys.ins().getEquipDatas(),i=0;i<e.length;i++){var n=e[i];if(!t&&this.getElementRed(n)&&(t=!0),!n.isNullEquip()){var a=this.getElementReplaceRed(n);RpSys.ins().setData(a,RoleWin,RolePanel,FuwenSysWin,FuwenEquipPanel,"th",n.pos)}}RpSys.ins().setData(t,RoleWin,RolePanel,FuwenSysWin,FuwenEquipPanel,"zb")}},e.getElementReplaceRed=function(t){for(var e=!1,i=FuwenSys.ins().fuwenDatas,n=FuwenSys.ins().equipType,a=0;a<i.length;a++){var o=i[a];if(0!=o.baseConfig.quality&&!t.isNullEquip())if(o.baseConfig.type==t.baseConfig.type){if(o.baseConfig.quality==t.baseConfig.quality){if(o.level>t.level){e=!0;break}}else if(o.power>t.power){e=!0;break}}else if(n.indexOf(o.baseConfig.type)<0&&o.power>t.power){e=!0;break}}return e},e.getElementRed=function(t){for(var e=!1,i=FuwenSys.ins().fuwenDatas,n=FuwenSys.ins().equipType,a=0;a<i.length;a++){var o=i[a];if(0!=o.baseConfig.quality){if(!t.isNullEquip())break;if(-1!=n.indexOf(o.baseConfig.type)){e=!1;break}var s=Cfg.getConfig(ElementLockPosConfig,t.pos).lockLevel;if(FuwenSys.ins().fuwenDatas.length>0&&Actor.ins().level>=s){e=!0;break}}}return e},e.showFuwenLevelUp=function(){if(GFunc.isSysUpdate(209)){for(var t=FuwenSys.ins().getEquipDatas(),e=!1,i=0;i<t.length;i++){var n=t[i];if(e=this.getElementLevelUpRed(n))break}RpSys.ins().setData(e,RoleWin,RolePanel,FuwenSysWin,FuwenEquipPanel,"sj")}},e.getElementLevelUpRed=function(t){return t.isNullEquip()?!1:t.level>=Cfg.getConfig(ElementOtherConfig).maxLevel?!1:t.lvCfg.upLevelConsu>Actor.ins().getCurrency(CurType.elementEssence)?!1:!0},e.showSuitRp=function(){if(GFunc.isSysUpdate(204))for(var t=ForgeSys.ins().suitDatas,e=0,i=t;e<i.length;e++)for(var n=i[e],a=n.posDatas,o=0,s=a;o<s.length;o++){var r=s[o];this.showSuitSingleRp(r)}},e.showSuitPosRp=function(t){if(GFunc.isSysUpdate(204))for(var e=ForgeSys.ins().suitDatas,i=0,n=e;i<n.length;i++){var a=n[i],o=a.getPosData(t);this.showSuitSingleRp(o)}},e.showSuitSingleRp=function(t){var e=t.canDianliang();RpSys.ins().setData(e,RoleWin,RolePanel,SuitWin,SuitPanel,t.xlId,t.id,t.pos)},e.showVipAwardRp=function(){for(var t=Cfg.getVipMaxLv(),e=1;t>=e;e++){var i=VipSys.ins().hasVipAwardCanGet(e);RpSys.ins().setData(i,VipWin,VipPanel,e)}},e.showVipRedPacketRp=function(){var t=VipSys.ins().xjhbData.redTimes>0;RpSys.ins().setData(t,XJHBWin)},e.showSVipAwardRp=function(){if(GFunc.isSysUpdate(259))for(var t=Cfg.getSVipMaxLv(),e=0;t>=e;e++){var i=VipSys.ins().hasSVipAwardCanGet(e);RpSys.ins().setData(i,VipWin,SVipPanel,"sviplv",e)}},e.showSVipEveryDayAwardRp=function(){if(GFunc.isSysUpdate(259)){var t=VipSys.ins().canGetSvipEveryDayAward();RpSys.ins().setData(t,VipWin,SVipPanel,"mrlb")}},e.showActRp=function(t){if(GFunc.isSysUpdate(t)){var e=[];if(45==t)e.push(ActOnPlace.huodong),e.push(ActOnPlace.ACT12);else if(276==t)e.push(ActOnPlace.openserver);else if(268==t)e.push(ActOnPlace.YiYuanHaoLi);else if(303==t)e.push(ActOnPlace.QMKH);else if(306==t)e.push(ActOnPlace.CSK);else if(266==t)e.push(ActOnPlace.KFLC);else if(308==t)e.push(ActOnPlace.CZCB);else if(319==t)e.push(ActOnPlace.TaQingActFisrtRecharge);else if(361==t)e.push(ActOnPlace.zqFisrtRecharge);else if(332==t)e.push(ActOnPlace.ActHefu);else if(333==t)e.push(ActOnPlace.ActHFSY);else{if(320!=t)return;e.push(ActOnPlace.Actqingming)}for(var i=0,n=e;i<n.length;i++){var a=n[i];this.showActWinByPlace(a)}}},e.showActWinByPlace=function(t){for(var e=ActSys.ins().getBtnConfigs(t),i=0,n=e;i<n.length;i++){var a=n[i];this.showActSingleRp(a.id);for(var o=a.addId,s=0,r=o;s<r.length;s++){var u=r[s];this.showActSingleRp(u)}}},e.showActSingleRp=function(t){var e,i=Cfg.getConfig(ActivityBtnConfig,t).onPlace;if(i==ActOnPlace.huodong)e=ActWin;else if(i==ActOnPlace.openserver)e=ActRankWin;else if(i==ActOnPlace.YiYuanHaoLi)e=ActYiYuanHaoLiWin;else if(i==ActOnPlace.QMKH)e=ActQMKHWin;else if(i==ActOnPlace.CSK)e=ActCSKWin;else if(i==ActOnPlace.KFLC)e=ActKFLCWin;else if(i==ActOnPlace.CZCB)e=ActRankWin2;else if(i==ActOnPlace.TCLY)e=TclyWin;else if(i==ActOnPlace.YDSS||i==ActOnPlace.YDSS2)e=YdssWin;else if(i==ActOnPlace.ACT12)e=ActPlace12Win;else if(i==ActOnPlace.Actqingming)e=ActPlace15Win;else if(i==ActOnPlace.ActHefu)e=ActHeFuWin;else if(i==ActOnPlace.TaQingActFisrtRecharge)e=Act23_4Win;else if(i==ActOnPlace.zqFisrtRecharge)e=Act23_4Win2;else if(i==ActOnPlace.ActHFSY)e=ActHFSYWin;else if(i==ActOnPlace.ACT21)e=ActPlace21Win;else{if(i!=ActOnPlace.ACT24){if(i==ActOnPlace.bansheng){for(var n=Cfg.getActivityBtnConfigsByBanshengId(t),a=0,o=n;a<o.length;a++){var s=o[a];this.showActSingleRp(s.id)}return}return}e=ActPlace24Win}var r=[ExtCom,e,t],u=ActSys.ins().getActDataById(t);if(u){var h=u.getRpKeyValues();if(h&&h.length)for(var l=0,p=h;l<p.length;l++){var c=p[l],d=r.concat();d.unshift(c.value),d.push(c.key),callFunc(RpSys.ins(),RpSys.ins().setData,d)}else{var d=r.concat();d.unshift(u.redPoint()),callFunc(RpSys.ins(),RpSys.ins().setData,d)}}},e.showActTypeRp=function(t,e){var i=Cfg.getConfigs(ActivityBtnConfig,CondType.NONE);for(var n in i){var a=i[n];a.type==t&&a.subType==e&&this.showActSingleRp(a.id)}},e.showMonthCardRedPoint=function(){var t=1!=RechargeActSys.ins().monthFlag&&GFunc.isSysUpdate(262)&&this.monthCardPanelShow;RpSys.ins().setData(t,ExtCom,YKWin,MonthCardPanel)},e.showZZTQCardRedPoint=function(){if(GFunc.isSysUpdate(261)){var t=ActSys.ins().getActDataById(ActId.ID_99500);if(t){var e=!t.isAct()&&this.zztqCardPanelShow;RpSys.ins().setData(e,ExtCom,ZZTQWin,ZZTQCardPanel)}}},e.showRankRedpoint=function(){RpSys.ins().setData(RankSys.ins().canRankWinPraise(),RankWin,RankPanel)},e.RedFortBoxRewardRedPoint=function(){if(GFunc.isSysUpdate(999)){var t=Cfg.getConfigs(FortConfig);RpSys.ins().setData(FbSys.ins().redFort.dabiaoFloor<t.length,JJCWin,JJCManyPanel,RedFortPanel,"boxReward")}},e.RedFortOpenRedPoint=function(){GFunc.isSysUpdate(999)&&RpSys.ins().setData(1==FbSys.ins().redFort.fbType,JJCWin,JJCManyPanel,RedFortPanel,"open")},e.friendRedPoint=function(t,e){Actor.ins().actorID!=t&&FriendSys.ins().currChatRoleID!=t&&RpSys.ins().setData(e,FriendsWin,FriendsZuijinPanel,t)},e.showShopRedPoint=function(){GFunc.isSysUpdate(291)&&this.showShopXGTHRedPoint()},e.showShopXGTHRedPoint=function(){for(var t=ShopSys.ins().mallXGTHDatas,e=0,i=t;e<i.length;e++){var n=i[e];RpSys.ins().setData(n.canFreeBuy(),ShopWin,MallPanel,MallXGTHPanel,n.configIndex)}},e.guildGiftRedPoint=function(t){RpSys.ins().setData(t,GuildMapWin,GuildActivityWin2,GuildGiftPanel)},e.guildBossRedPoint=function(){var t=0;t=GuildActSys.ins().guanqiaId>=Cfg.getConfig(GuildBossCommonConfig).maxId&&0==GuildActSys.ins().bossHp?GuildActSys.ins().guanqiaId:GuildActSys.ins().guanqiaId-1;for(var e=1;t>=e;e++)1==(GuildActSys.ins().record>>e&1)?RpSys.ins().setData(!1,GuildMapWin,GuildActivityWin2,GuildBossPanel,e):RpSys.ins().setData(!0,GuildMapWin,GuildActivityWin2,GuildBossPanel,e)},e.guildBossTZRedPoint=function(){var t=Cfg.getConfig(GuildBossCommonConfig).count-GuildActSys.ins().bossCount;RpSys.ins().setData(t>0,GuildMapWin,GuildActivityWin2,GuildBossPanel,"TZ")},e.showGuildInfoRedPoint=function(){RpSys.ins().setData(GuildSys.ins().hasApplys(),GuildMapWin,GuildWin,GuildInfoPanel,"hasApplys")},e.showGuildWarFenpeiAward=function(){RpSys.ins().setData(GuildWarSys.ins().getModel().isguildAward(),GuildMapWin,GuildWarMainWin,"FenpeiAward")},e.showGuildWarRedBagAward=function(){RpSys.ins().setData(GuildWarSys.ins().getModel().isRedBagRedPoint(),GuildMapWin,GuildWarMainWin,"RedBagAward")},e.showGuildWarDayAward=function(){var t=GuildWarSys.ins().getModel(),e=t.canGetDay&&!t.getDayReward;RpSys.ins().setData(e,GuildMapWin,GuildWarMainWin,"DayAward")},e.showGuildConRedPoint=function(t){var e=GuildSys.ins().getConCount()[1];t=e>0?t:PCode.DEL;var i=RpSys.ins().getData(GuildMapWin,GuildWin,GuildInfoPanel,GuildConWin,"gold");if(!this.checkCode(t,i))if(GuildSys.ins().isAddGuild()&&e>0){var n=Actor.ins().getCurrency(CurType.gold)>=Cfg.getConfig(GuildDonateConfig,2).count;RpSys.ins().setData(n,GuildMapWin,GuildWin,GuildInfoPanel,GuildConWin,"gold")}else RpSys.ins().setData(!1,GuildMapWin,GuildWin,GuildInfoPanel,GuildConWin,"gold")},e.showEquipBossRedPoint=function(){if(GFunc.isSysUpdate(233))for(var t=FbSys.ins().equipBossModel.bossDatas,e=0;e<t.length;e++){var i=t[e],n=!i.isDie&&i.isopen&&i.count>0;RpSys.ins().setData(n,BossWin,BossBenFuPanel,EquipBossPanel,EquipBossPanelItem,i.id)}},e.guildSkillRedPoint=function(){for(var t=1,e=0;t>e;e++){var i=GuildSys.ins().getGuildSkillArray(e);if(i)for(var n=0;n<i.length;n++){var a=i[n],o=GuildSys.ins().chelGuildUp(a);RpSys.ins().setData(o,GuildMapWin,GuildSkillWin,GuildSkillPanel,e,a.type+"_"+a.index)}}},e.guildUpLvRedPoint=function(t){if(GFunc.isSysUpdate(255)){var e=RpSys.ins().getData(GuildMapWin,GuildWin,GuildManagePanel);if(!this.checkCode(t,e)){var i=GuildSys.ins();if(i.isAddGuild()){if(i.myOffice==GuildOffice.MENG_ZHU)for(var n=i.guildLv,a=GuildBuildingType.GUILD_HALL;a<=GuildBuildingType.GUILD_ACTIVITY;a++)if(i.isMaxLevel(a))RpSys.ins().setData(!1,GuildMapWin,GuildWin,GuildManagePanel,a);else{var o=i.getBuildingLevel(a),s=Cfg.getConfig(GuildLevelConfig,a,o),r=Actor.ins().getCurrency(CurType.fuildfund)>=s.upFund;if(a!=GuildBuildingType.GUILD_HALL&&(r=r&&n>o),RpSys.ins().setData(r,GuildMapWin,GuildWin,GuildManagePanel,a),r)break}}else for(var a=GuildBuildingType.GUILD_HALL;a<=GuildBuildingType.GUILD_ACTIVITY;a++)RpSys.ins().setData(!1,GuildMapWin,GuildWin,GuildManagePanel,a)}}},e.showGuildShopRedPoint=function(){if(GFunc.isSysUpdate(255)&&GuildSys.ins().isAddGuild()&&GuildShopSys.ins().isOpen()){var t=GuildShopSys.ins().useCount>0;t=t&&Actor.ins().getCurrency(CurType.guildContrib)>=Cfg.getConfig(GuildStoreConfig).needContrib,RpSys.ins().setData(t,GuildMapWin,GuildShopWin,GuildShopPanel)}},e.showGuildSiegeRedPoint=function(){if(GFunc.isSysUpdate(255))if(GuildSys.ins().isAddGuild()&&GuildActSys.ins().siegeModel.isOpen){var t=GuildActSys.ins().siegeModel.fightcount>0;RpSys.ins().setData(t,GuildMapWin,GuildActivityWin2,GuildSiegePanel)}else RpSys.ins().setData(!1,GuildMapWin,GuildActivityWin2,GuildSiegePanel)},e.showGuildBattleDailyRp=function(){if(GFunc.isSysUpdate(334)){var t=1==GuildBattleSys.ins().dailyAwardState;RpSys.ins().setData(t,GuildMapWin,GuildBattleMainWin,GuildBattleMainPanel,GuildBattleDailyAwardWin)}},e.showGuildBattleRedBagRp=function(){if(GFunc.isSysUpdate(334)){var t=GuildBattleSys.ins().redBagData.canRod||1==GuildBattleSys.ins().redBagData.canSend;RpSys.ins().setData(t,GuildMapWin,GuildBattleMainWin,GuildBattleMainPanel,GuildBattleRedBagWin)}},e.showGuildBattleSignUpRp=function(){if(GFunc.isSysUpdate(334)){var t=!1;GuildBattleSys.ins().getGuildBattleState()==GuildBattleState.signUp&&(GuildSys.ins().myOffice==GuildOffice.FU_MENG_ZHU||GuildSys.ins().myOffice==GuildOffice.MENG_ZHU)&&(t=0==GuildBattleSys.ins().getSignUpId()),RpSys.ins().setData(t,GuildMapWin,GuildBattleMainWin,GuildBattleMainPanel,"signUp")}},e.showGuildBattleMoBaiRp=function(){if(GFunc.isSysUpdate(334)){var t=GuildBattleSys.ins().mobaiData,e=GuildBattleSys.ins().mobaiData.isMobai&&t.count>0;RpSys.ins().setData(e,GuildMapWin,GuildBattleMainWin,GuildBattleMoBaiRankPanel)}},e.showHuoDongRedPoint=function(){for(var t=FbSys.ins().getHuoDongList(),e=!1,i=0,n=t;i<n.length;i++){var a=n[i];if(a.isOpen()){e=!0;break}}RpSys.ins().setData(e,LiLianWin,HuoDongPanel)},e.showFirstRechargeEverydayRedPoint=function(){if(GFunc.isSysUpdate(287)&&RechargeActSys.ins().firstRechargeEveryDay.isEverydayFirst)for(var t=RechargeActSys.ins().firstRechargeEveryDay.states,e=0;e<t.length;e++)RpSys.ins().setData(0==t[e],FirstRechargeVeryDayWin,e+1)},e.showFirstRecharge=function(){for(var t=(Cfg.getConfigs(FirstRechargeConfig),RechargeActSys.ins().firstRechargeData),e=0;e<t.firstRechargeItemDatas.length;e++){var i=t.firstRechargeItemDatas[e];RpSys.ins().setData(1==i.state,FirstRechargeBuyWin,FirstRechargeBuyWinBtnRender,i.day)}},e.showQiJiluRedPoint=function(){var t=JobSys.ins().getQijiReceiveAward();RpSys.ins().setData(t,ZhuoYueWin)},e.showComposeRedPoint=function(t){for(var e=Cfg.getConfigs(HeChengConfig),i=0;i<e.length;i++){var n=e[i],a=GFunc.isConsumeEnough(n.item);RpSys.ins().setData(a,BagWin,HeChengMainPanel,HeChengPanel,HeChengListWin,n.viewType2,n.id)}},e.showSendRedBaoRedPoint=function(){RpSys.ins().setData(RechargeActSys.ins().redbaoNum>0,RedBaoWin,RedBaoSendPanel)},e.showGemRedPoint=function(){if(GFunc.isSysUpdate(220)){var t=ForgeSys.ins();t.zhuanhuangbaoshi();for(var e=ForgeSys.ins().gemEquipData,i=0;i<e.gemPosDatas.length;i++)for(var n=e.getGemPosDataByPos(i),a=0;a<n.gemData.length;a++){var o=n.gemData[a];if(BagSys.ins().getEquipByIndex(o.pos).hasEquipOn()){var s=t.isPointhaveCanDressGem(o);RpSys.ins().setData(s,ForgeWin,GemPanel,"onekeyEquip",o.pos,o.index,"equip"),RpSys.ins().setData(s,ForgeWin,GemPanel,"onekey",o.pos,o.index,"equip"),RpSys.ins().setData(t.isPointhaveCanUpGem(o),ForgeWin,GemPanel,"onekey",o.pos,o.index,"up"),RpSys.ins().setData(t.isPointhaveHighReplace(o),ForgeWin,GemPanel,"onekey",o.pos,o.index,"tihuan")}}RpSys.ins().setData(e.canRank(),ForgeWin,GemPanel,GemUpRankWin)}},e.showBossHomeRedPoint=function(){if(GFunc.isSysUpdate(236)){for(var t=FbSys.ins().bossHomeModel.bossHomeInfos,e=!1,i=Cfg.getConfig(BosshomeCommonConfig),n=i.needitem,a=0;a<t.length;a++){var o=t[a],s=BagSys.ins().getItemCount(n)>0;if(e=!o.isDie&&Actor.ins().zsId>=o.config.zslevel&&(Actor.ins().sVipLv>=Cfg.getConfig(BosshomeCommonConfig).vip||s))break}RpSys.ins().setData(e,BossWin,BossBenFuPanel,BossHomePanel)}},e.showGameUpdateNoticeRedPoint=function(t){var e=NoticeSys.ins().noticeGameUpdateData.rewardStatus;RpSys.ins().setData(e,ExtCom,FuliWin,NoticeGameUpdatePanel)},e.showMineCaiji=function(){if(GFunc.isSysUpdate(252)){var t=MineSys.ins().getMiningCount()>0&&0==MineSys.ins().getTime();RpSys.ins().setData(t,JJCWin,JJCManyPanel,MineMainPanel,"Caiji")}},e.showMineLueDuo=function(){if(GFunc.isSysUpdate(252)){var t=MineSys.ins().getKeRobCount()>0&&this.mineLueDuoShow;RpSys.ins().setData(t,JJCWin,JJCManyPanel,MineMainPanel,"LueDuo")}},e.showMineLueDuoLog=function(t){GFunc.isSysUpdate(252)&&RpSys.ins().setData(t,JJCWin,JJCManyPanel,MineMainPanel,"LueDuoLog")},e.showMineReward=function(t){GFunc.isSysUpdate(252)&&RpSys.ins().setData(t,JJCWin,JJCManyPanel,MineMainPanel,"Reward")},e.showAgreementRedPoint=function(t){if(GFunc.isSysUpdate(1))for(var e=TaskSys.ins().agreementData,i=0;i<e.agreementTypes.length;i++){var n=e.getAgreementTypeByIndex(i),a=n.chekReceive();RpSys.ins().setData(a,ExtCom,QiYueWin,QiYuePanel,n.type)}},e.ShowJJCRedPoint=function(){if(GFunc.isSysUpdate(256)){var t=JJCSys.ins().getLeftFightCount()>0;RpSys.ins().setData(t,JJCWin,JJCSinglePanel,JJCPanelNew)}},e.showLadderRedPoint=function(){GFunc.isSysUpdate(253)&&RpSys.ins().setData(LadderSys.ins().isOpen&&LadderSys.ins().challgeNum>0,JJCWin,JJCSinglePanel,LadderMainPanel,"tz")},e.showKfBossRedPoint=function(){if(GFunc.isSysUpdate(235))for(var t=KfSys.ins().bossModel,e=0,i=t.kfBossItemDatas;e<i.length;e++){var n=i[e],a=n.canFight()&&t.guishuCount>0&&n.isRemind;RpSys.ins().setData(a,BossWin,KfBossMainPanel,KfBossPanel,KfBossPanelItem,n.bossId)}},e.showSigninRedPoint=function(){if(GFunc.isSysUpdate(43)){var t=FuLiSys.ins().signinModel.isTotalReward;if(!t)for(var e=FuLiSys.ins().signinModel.signinDatas,i=0,n=e;i<n.length;i++){var a=n[i];if(1==a.state){t=!0;break}}RpSys.ins().setData(t,ExtCom,FuliWin,SigninPanel)}},e.showDailyOnlineRedPoint=function(){GFunc.isSysUpdate(270)&&RpSys.ins().setData(FuLiSys.ins().dailyOnlineData.canGetAward(),ExtCom,FuliWin,DailyOnlinePanel)},e.showSkillPassivityRedPoint=function(t){var e=SkillSys.ins().getSkillPassivityRedPointKey(t);(i=RpSys.ins()).setData.apply(i,[SkillSys.ins().isSkillPassivityUp(t)].concat(e));var i},e.showShenQiSkillRedPoint=function(t){if(GFunc.isSysUpdate(t))for(var e=SqXySys.ins().getModelBySysId(t),i=SkillSys.ins().getSkillPassivityDatasByIds(e.getSkillIds()),n=0,a=i;n<a.length;n++){var o=a[n];this.showSkillPassivityRedPoint(o)}},e.showDamonLvSkillRedPoint=function(t){if(GFunc.isSysUpdate(t))for(var e=ShouHuNewSys.ins().getModelBySysId(t),i=SkillSys.ins().getSkillPassivityDatasByIds(e.getLevelskills()),n=0,a=i;n<a.length;n++){var o=a[n];this.showSkillPassivityRedPoint(o)}},e.showDamonStageSkillRedPoint=function(t){if(GFunc.isSysUpdate(t))for(var e=ShouHuNewSys.ins().getModelBySysId(t),i=SkillSys.ins().getSkillPassivityDatasByIds(e.getStageskills()),n=0,a=i;n<a.length;n++){var o=a[n];this.showSkillPassivityRedPoint(o)}},e.showAoyiRedPoint=function(){if(GFunc.isSysUpdate(230))for(var t=SkillSys.ins().aoyiModel.getTabTypes(),e=0,i=t;e<i.length;e++)for(var n=i[e],a=SkillSys.ins().aoyiModel.getAoyiDatasByType(n),o=0,s=a;o<s.length;o++){var r=s[o];r.isAct()||this.showSkillPassivityRedPoint(r.getSkillData())}},e.showShenQiLvRedPoint=function(t){if(GFunc.isSysUpdate(t)){var e=SqXySys.ins().getModelBySysId(t),i=!1;e.isMaxLv()||(i=GFunc.isConsumeEnough(e.getLevelConsume()));for(var n=SqXyWin.getPanelNames(),a=0,o=n;a<o.length;a++){var s=o[a];if(s.getSysId()==t){RpSys.ins().setData(i,RoleWin,RolePanel,SqXyWin,s,s.getPanelNames()[0],"levelUp");break}}}},e.showShenQiHuanHuaRedPoint=function(t){if(GFunc.isSysUpdate(t))for(var e=SqXySys.ins().getModelBySysId(t),i=e.getHuanHuaDatas(),n=SqXyWin.getPanelNames(),a=0,o=n;a<o.length;a++){var s=o[a];if(s.getSysId()==t){for(var r=0,u=i;r<u.length;r++){var h=u[r];if(h.isMax())RpSys.ins().setData(!1,RoleWin,RolePanel,SqXyWin,s,s.getPanelNames()[1],h.getGroupId(),h.id);else{var l=GFunc.getItemDataRewardByJob(h.getConsume());RpSys.ins().setData(GFunc.isConsumeEnough(l),RoleWin,RolePanel,SqXyWin,s,s.getPanelNames()[1],h.getGroupId(),h.id)}}break}}},e.showShenQiFuHunRedPoint=function(t){if(GFunc.isSysUpdate(t))for(var e=SqXySys.ins().getModelBySysId(t),i=e.getFuHunDatas(),n=SqXyWin.getPanelNames(),a=0,o=n;a<o.length;a++){var s=o[a];if(s.getSysId()==t){for(var r=0,u=i;r<u.length;r++){var h=u[r];if(h.isMaxCur())RpSys.ins().setData(!1,RoleWin,RolePanel,SqXyWin,s,s.getPanelNames()[2],h.id);else{var l=GFunc.getItemDataRewardByJob(h.getConsume());RpSys.ins().setData(GFunc.isConsumeEnough(l),RoleWin,RolePanel,SqXyWin,s,s.getPanelNames()[2],h.id)}}break}}},e.showDamonLvRedPoint=function(t){if(GFunc.isSysUpdate(t))for(var e=ShouHuNewSys.ins().getModelBySysId(t),i=ShouHuWin.getPanelNames(),n=0,a=i;n<a.length;n++){var o=a[n];if(o.getSysId()==t){if(e.isMaxLv())RpSys.ins().setData(!1,ShouHuWin,o,o.getPanelNames()[0],"levelUp");else{var s=(e.getLevelMaxExp()-e.levelExp)/e.getLevelitemExp(),r=GFunc.isConsumeEnoughByItemId(e.getLevelitemid(),Math.ceil(s));RpSys.ins().setData(r,ShouHuWin,o,o.getPanelNames()[0],"levelUp")}break}}},e.showDamonStageRedPoint=function(t){if(GFunc.isSysUpdate(t))for(var e=ShouHuNewSys.ins().getModelBySysId(t),i=ShouHuWin.getPanelNames(),n=0,a=i;n<a.length;n++){var o=a[n];if(o.getSysId()==t){if(e.isMaxStage())RpSys.ins().setData(!1,ShouHuWin,o,o.getPanelNames()[1],"stageUp"),RpSys.ins().setData(!1,ShouHuWin,o,o.getPanelNames()[1],"zhiSheng");else{var s=(e.getStageMaxExp()-e.stageExp)/e.getStageitemExp(),r=GFunc.isConsumeEnoughByItemId(e.getStageitemid(),Math.ceil(s));RpSys.ins().setData(r,ShouHuWin,o,o.getPanelNames()[1],"stageUp");var u=BagSys.ins().getItemsById(e.getCanUseZhiShengItemIds());RpSys.ins().setData(u.length>0,ShouHuWin,o,o.getPanelNames()[1],"zhiSheng")}break}}},e.showHuanHuaRedPoint=function(t){if(GFunc.isSysUpdate(t)){for(var e,i=ShouHuNewSys.ins().getModelBySysId(t),n=ShouHuWin.getPanelNames(),a=0,o=n;a<o.length&&(e=o[a],e.getSysId()!=t);a++);for(var s,r=ShouHuHuanHuaWin.getPanelNames(),u=0,h=r;u<h.length&&(s=h[u],s.getSysId()!=t);u++);for(var l=i.getHuanHuaDatas(),p=0,c=l;p<c.length;p++){var d=c[p];if(d.isMax())RpSys.ins().setData(!1,ShouHuWin,e,e.getPanelNames()[1],ShouHuHuanHuaWin,s,d.id);else{var g=GFunc.getItemDataRewardByJob(d.getConsume());RpSys.ins().setData(GFunc.isConsumeEnough(g),ShouHuWin,e,e.getPanelNames()[1],ShouHuHuanHuaWin,s,d.id)}}}},e.showYinJiRedPoint=function(t){if(GFunc.isSysUpdate(t)){var e,i=ShouHuNewSys.ins().getModelBySysId(t),n=i.getYinJuDatas();switch(t){case 289:e=DamonPanel;break;case 292:e=YongbingPanel;break;case 302:e=ShenmoPanel}for(var a=0,o=n;a<o.length;a++){var s=o[a];if(s.isMaxCur())RpSys.ins().setData(!1,ShouHuWin,e,e.getPanelNames()[2],s.id);else{var r=GFunc.getItemDataRewardByJob(s.getConsume());RpSys.ins().setData(GFunc.isConsumeEnough(r),ShouHuWin,e,e.getPanelNames()[2],s.id)}}}},e.showMoZhenRedPoint=function(t){if(GFunc.isSysUpdate(t)){var e,i=ShouHuNewSys.ins().getModelBySysId(t),n=i.getMoZhenDatas();switch(t){case 290:e=DamonPanel;break;case 293:e=YongbingPanel;break;case 305:e=ShenmoPanel}for(var a=0,o=n;a<o.length;a++){var s=o[a];if(s.isMax())RpSys.ins().setData(!1,ShouHuWin,e,e.getPanelNames()[3],s.getGroupId(),s.id);else{var r=GFunc.getItemDataRewardByJob(s.getConsume());RpSys.ins().setData(GFunc.isConsumeEnough(r),ShouHuWin,e,e.getPanelNames()[3],s.getGroupId(),s.id)}}}},e.showDaZaoEquipRedPoint=function(){if(GFunc.isSysUpdate(221))for(var t=EquipSys.ins().daZaoTabDatas,e=0;e<t.length;e++)for(var i=t[e],n=i.daZaoTabSubDatas,a=0;a<n.length;a++){var o=n[a],s=o.getRedPoint();RpSys.ins().setData(s,ForgeWin,DaZaoMainPanel,i.tabName,o.redTabName)}},e.showShengWuNewRedPoint=function(t){if(GFunc.isSysUpdate(225)){var e=RpSys.ins().getData(BagWin,ShengWuPanelNew);if(!this.checkCode(t,e)){e=!1;for(var i=BagSys.ins().shengWuModel.shengWuDatas,n=0,a=i;n<a.length;n++){var o=a[n];if(o.isCanAct()){e=!0;break}for(var s=0,r=o.fragmentDatas;s<r.length;s++){var u=r[s];if(u.canAct){e=!0;break}}}RpSys.ins().setData(e,BagWin,ShengWuPanelNew)}}},e.showTouXianRedPoint=function(){if(GFunc.isSysUpdate(201)){var t=TouXianSys.ins().touxianData,e=t.canReceiveReward();RpSys.ins().setData(e,JobWin,TouXianPanel,"meiriReward");for(var i=0;i<t.touXianTaskDatas.length;i++){var n=t.touXianTaskDatas[i];RpSys.ins().setData(n.canGetAward,JobWin,TouXianPanel,TouXianPanelTaskItem,n.type)}}},e.showLiLianRedPoint=function(){if(GFunc.isSysUpdate(226)){var t=TaskSys.ins().liLianData,e=1==t.dailyRewardState();RpSys.ins().setData(e,LiLianWin,LiLianPanel,"meiriReward");for(var i=0;i<t.liLianTaskDatas.length;i++){var n=t.liLianTaskDatas[i];RpSys.ins().setData(n.canGetAward,LiLianWin,LiLianPanel,LiLianPanelTaskItem,n.id)}}},e.showZhaoCaiLongRedPoint=function(){if(GFunc.isSysUpdate(205)){var t=RechargePowerSys.ins().zhaoCaiLongData;RpSys.ins().setData(t.canReceiva(),RoleWin,RolePanel,ZhaoCaiLongWin)}},e.showZhaoCaiLongBuyRp=function(){if(GFunc.isSysUpdate(205)){var t=RechargePowerSys.ins().zhaoCaiLongData;RpSys.ins().setData(t.canGet(),ExtCom,ZhaoCaiLongBuyWin)}},e.showXunZhangRedPoint=function(){if(GFunc.isSysUpdate(231)){var t=RechargePowerSys.ins().xunZhangData;RpSys.ins().setData(t.canReceiva(),RoleWin,RolePanel,XunZhangWin)}},e.showXunZhangBuyRp=function(){if(GFunc.isSysUpdate(231)){var t=RechargePowerSys.ins().xunZhangData;RpSys.ins().setData(t.canGet(),ExtCom,XunZhangBuyWin)}},e.showShengbeiRp=function(){if(GFunc.isSysUpdate(286)){var t=RechargePowerSys.ins().shengbeiData;if(RechargePowerSys.ins().shengbeiData.isGet())for(var e=t.stoneDatas,i=0,n=e;i<n.length;i++){var a=n[i];this.showShengbeiRpSingle(a)}}},e.showShengbeiRpSingle=function(t){RpSys.ins().setData(t.canUp(),RoleWin,RolePanel,ShengbeiWin,t.id)},e.showShengbeiBuyRp=function(){GFunc.isSysUpdate(286)&&RpSys.ins().setData(RechargePowerSys.ins().shengbeiData.canGet(),ExtCom,ShengbeiBuyWin)},e.showGuajiTZRp=function(){if(GFunc.isSysUpdate(249)){var t=FbSys.ins().guajiData.isChallenge();RpSys.ins().setData(t,GuanJiWin,GuaJiPanel,"tz")}},e.showGuajiRewardRp=function(){if(GFunc.isSysUpdate(249)){for(var t=!1,e=FbSys.ins().guajiData.guaJiMaxDatas,i=0,n=e;i<n.length;i++){var a=n[i];
if(2==a.state){t=!0;break}}RpSys.ins().setData(t,GuanJiWin,GuaJiPanel,"reward")}},e.showGuajiKsgjRp=function(){if(GFunc.isSysUpdate(249)&&FbSys.ins().guajiData.guanId>=Cfg.getGuajiConstConfig().ksgjRp){var t=FbSys.ins().guajiData.getKsgjSdCount()>0;RpSys.ins().setData(t,GuanJiWin,GuaJiPanel,GuaJiKuaiSuWin)}},e.showMeiRiFbRp=function(){if(GFunc.isSysUpdate(238)){var t=FbSys.ins().isCanYJTZ()||FbSys.ins().isCanYJSD();RpSys.ins().setData(t,ExtCom,FuBenWin,FuBenDanRenPanel,MeiRiFbPanel)}},e.showXunBaoRedPoint=function(){if(GFunc.isSysUpdate(271)){var t=!1,e=XunBaoSys.ins().getXunBaoDataByType(XunbaoType.Equip);t=e.isMianFei||BagSys.ins().getItemCount(e.equipid)>0,RpSys.ins().setData(t,ExtCom,XunBaoWin,XunBaoMainPanel,XunBaoEquipPanel);var i=XunBaoSys.ins().getXunBaoDataByType(XunbaoType.HunQi);t=i.isMianFei||BagSys.ins().getItemCount(i.equipid)>0,RpSys.ins().setData(t,ExtCom,XunBaoWin,XunBaoMainPanel,XunBaoFaBaoPanel);var n=XunBaoSys.ins().getXunBaoDataByType(XunbaoType.FuWen);t=n.isMianFei||BagSys.ins().getItemCount(n.equipid)>0,RpSys.ins().setData(t,ExtCom,XunBaoWin,XunBaoMainPanel,XunBaoFuWenPanel);var a=XunBaoSys.ins().getXunBaoDataByType(XunbaoType.DianFeng);t=a.isMianFei||BagSys.ins().getItemCount(a.equipid)>0,RpSys.ins().setData(t,ExtCom,XunBaoWin,XunBaoMainPanel,XunBaoDianFengPanel);var o=XunBaoSys.ins().getXunBaoDataByType(XunbaoType.ZhiZun);t=o.isMianFei||BagSys.ins().getItemCount(o.equipid)>0,RpSys.ins().setData(t,ExtCom,XunBaoWin,XunBaoMainPanel,XunBaoZhiZunPanel)}},e.showXunBaobagRedPoint=function(){if(GFunc.isSysUpdate(271)){var t=XunBaoSys.ins().xunBaoBagItemDatas.length>0;RpSys.ins().setData(t,ExtCom,XunBaoWin,XunBaoBagPanel)}},e.showXunBaoDuiHuanRedPoint=function(){if(GFunc.isSysUpdate(271))for(var t=!1,e=XunBaoSys.ins().xunbaoDatas,i=0;i<e.length;i++)for(var n=e[i],a=n.xunBaoDuiHuanDatas,o=0;o<a.length;o++){var s=a[o],r=s.config;t=1==s.remind&&n.score>=r.score,RpSys.ins().setData(t,ExtCom,XunBaoWin,XunBaoDuiHuanPanel,XunBaoDuiHuanPanelItem,r.type,r.index)}},e.showSVIPMSRp=function(){if(GFunc.isSysUpdate(263))for(var t=RechargeActSys.ins().svipmsRechargeStates,e=0;e<t.length;e++)RpSys.ins().setData(RechargeActSys.ins().isSVIPMSBuy(e),SVIPMSWin,SVIPMSPanel,e)},e.showYYMSRp=function(){if(GFunc.isSysUpdate(263))for(var t=RechargeActSys.ins().yymsRechargeStates,e=0;e<t.length;e++)RpSys.ins().setData(RechargeActSys.ins().isYYMSBuy(e),YYMSWin,YYMSPanel,e)},e.showZeroBuyRp=function(){if(GFunc.isSysUpdate(3))for(var t=RechargeActSys.ins().zeroBuyDatas,e=0;e<t.length;e++)this.showZeroBuyRpSingle(t[e])},e.showZeroBuyRpSingle=function(t){RpSys.ins().setData(t.canGetAward(),ExtCom,ZeroBuyWin,t.id,"award"),RpSys.ins().setData(t.isNotBuy()&&t.isConsumeEnough(),ExtCom,ZeroBuyWin,t.id,"buy")},e.showJinZuanRedPoint=function(){if(GFunc.isSysUpdate(2)){var t=RechargeActSys.ins().jinZuanBagItemDatas,e=t.length>0;RpSys.ins().setData(e,ExtCom,JinZuanWin,JinZuanCJMainPanel,JinZuanBagPanel);for(var i=RechargeActSys.ins().jinZuanData.jinZuanZhuFuDatas,n=0;n<i.length;n++){var a=i[n],o=a.canGet;RpSys.ins().setData(o,ExtCom,JinZuanWin,JinZuanCJMainPanel,JinZuanCJPanel,JinZuanCJPanelZHuFuItem,a.index)}}},e.showJinZuanShopRedPoint=function(){if(GFunc.isSysUpdate(2))for(var t=RechargeActSys.ins().jinZuanData.jinZuanShopDatas,e=0;e<t.length;e++){var i=t[e],n=!i.isBuy&&GFunc.isCurrency(CurType.JinZuan,i.price);RpSys.ins().setData(n,ExtCom,JinZuanWin,JinZuanShopPanel,JinZuanShopPanelItem,i.index)}},e.showBBFLLoginRp=function(){if(GFunc.isSysUpdate(304)){var t=!1;if(RechargeActSys.ins().bbflModel.isBuyLogin)for(var e=RechargeActSys.ins().bbflModel.loginDatas,i=0,n=e;i<n.length;i++){var a=n[i];if(a.canReward){t=!0;break}}RpSys.ins().setData(t,ExtCom,BBFLWin,BBFLLoginPanel,"reward"),t=RechargeActSys.ins().bbflModel.canBuyType(BBFLType.Login),RpSys.ins().setData(t,ExtCom,BBFLWin,BBFLLoginPanel,"buy")}},e.showBBFLCustomRp=function(){if(GFunc.isSysUpdate(304)){var t=!1;if(RechargeActSys.ins().bbflModel.isBuyCustom)for(var e=RechargeActSys.ins().bbflModel.customDatas,i=0,n=e;i<n.length;i++){var a=n[i];if(a.canReward){t=!0;break}}RpSys.ins().setData(t,ExtCom,BBFLWin,BBFLCustomPanel,"reward"),t=RechargeActSys.ins().bbflModel.canBuyType(BBFLType.Custom),RpSys.ins().setData(t,ExtCom,BBFLWin,BBFLCustomPanel,"buy")}},e.showBBFLLevelRp=function(){if(GFunc.isSysUpdate(304)){var t=!1;if(RechargeActSys.ins().bbflModel.isBuyLevel)for(var e=RechargeActSys.ins().bbflModel.levelDatas,i=0,n=e;i<n.length;i++){var a=n[i];if(a.canReward){t=!0;break}}RpSys.ins().setData(t,ExtCom,BBFLWin,BBFLLevelPanel,"reward"),t=RechargeActSys.ins().bbflModel.canBuyType(BBFLType.Level),RpSys.ins().setData(t,ExtCom,BBFLWin,BBFLLevelPanel,"buy")}},e.showShareRp=function(){var t=PfActivitySys.ins().canGetShareAward();RpSys.ins().setData(t,ExtCom,ShareWin)},e.showDLHLRedPoint=function(){GFunc.isSysUpdate(6)&&RpSys.ins().setData(FuLiSys.ins().DLHLData.canGet(),ExtCom,FuliWin,DLHLPanel)},e.showGzhlRp=function(){if(GFunc.isSysUpdate(8)){var t=PfActivitySys.ins().isFocus(),e=PfActivitySys.ins().isGetFocusAward;RpSys.ins().setData(t&&!e,ExtCom,FocusWin)}},e.showYiYuanRedPoint=function(){if(GFunc.isSysUpdate(11)){var t=RechargeActSys.ins().rechargeYiYuanData.canReceived();RpSys.ins().setData(t,ExtCom,RechargeYiYuanWin)}},e.showKfBossSdRp=function(){if(GFunc.isSysUpdate(307)){var t=KfSys.ins().smsdData.getBossDatas();for(var e in t)t[e].isRemind&&!t[e].isDie()?RpSys.ins().setData(!0,BossWin,KfBossMainPanel,SmsdPanel,t[e].getConfig().floor,t[e].id):RpSys.ins().setData(!1,BossWin,KfBossMainPanel,SmsdPanel,t[e].getConfig().floor,t[e].id)}},e.showQiyuEventRp=function(){if(GFunc.isSysUpdate(296)){var t=QiyuSys.ins().eventDatas.length>0&&QiyuSys.ins().yunLiValue>0;RpSys.ins().setData(t,QiyuWin,QiyuEventPanel,"event")}},e.showQiyuDuihuanRp=function(){if(GFunc.isSysUpdate(296))for(var t=QiyuSys.ins().getDuiHuanDatas(),e=0;e<t.length;e++){var i=t[e],n=1==i.remind&&GFunc.isCurrency(CurType.QiyuValue,i.config.need);RpSys.ins().setData(n,QiyuWin,QiyuEventPanel,QiyuDuiHuanWin,QiyuDuiHuanPanel,i.id)}},e.showYZZHRedPoint=function(){if(GFunc.isSysUpdate(315))for(var t=RechargeActSys.ins().yzzhData,e=t.rewardDatas,i=0;i<e.length;i++){var n=e[i],a=n.canGet1,o=n.canGet2;RpSys.ins().setData(a,YZZHWin,YZZHMainPanel,YZZHPanel,YZZHPanelRewardItem,"reward1",n.level),RpSys.ins().setData(o,YZZHWin,YZZHMainPanel,YZZHPanel,YZZHPanelRewardItem,"reward2",n.level)}},e.showYZZHBoxRedPoint=function(){if(GFunc.isSysUpdate(315))for(var t=RechargeActSys.ins().yzzhData,e=t.expDatas,i=0;i<e.length;i++){var n=e[i],a=!1;a=t.buyShengHui?1==n.status:1==n.status&&n.clickRedPint,RpSys.ins().setData(a,YZZHWin,YZZHMainPanel,YZZHTaskPanel,YZZHTaskPanelExpItem,n.id)}},e.showYZZHTaskRedPoint=function(){if(GFunc.isSysUpdate(315)){for(var t=RechargeActSys.ins().yzzhData,e=t.taskData1,i=0;i<e.length;i++){var n=e[i],a=1==n.state;RpSys.ins().setData(a,YZZHWin,YZZHMainPanel,YZZHTaskPanel,YZZHTaskPanelJieDuanItem,n.taskId)}for(var o=t.taskData2,i=0;i<o.length;i++){var s=o[i],a=1==s.state;RpSys.ins().setData(a,YZZHWin,YZZHMainPanel,YZZHTaskPanel,YZZHTaskPanelSaijiItem,s.taskId)}}},e.showMoLongRedPoint=function(){if(GFunc.isSysUpdate(314)){var t=FbSys.ins().molongData.leftCount>0;RpSys.ins().setData(t,ExtCom,FuBenWin,FuBenDuoRenPanel,MoLongPanel)}},e.showFootLevelRp=function(){if(GFunc.isSysUpdate(316)){var t=!1;if(!FootSys.ins().isMaxLevel()){var e=Cfg.getConfigs(FootItemConfig);for(var i in e)if(GFunc.getItemCount(e[i].itemid)>0){t=!0;break}}RpSys.ins().setData(t,RoleWin,RolePanel,ZhuangBanWin,FootPanel,FootLevelPanel,"levelUp")}},e.showFootDaShiRp=function(){GFunc.isSysUpdate(316)&&RpSys.ins().setData(FootSys.ins().daShiData.canRank(),RoleWin,RolePanel,ZhuangBanWin,FootPanel,FootLevelPanel,FootDaShiWin)},e.showFootHuanHuaRp=function(){if(GFunc.isSysUpdate(316))for(var t=FootSys.ins().huanHuaDatas,e=0,i=t;e<i.length;e++){var n=i[e],a=!1;n.isMax()||(a=GFunc.isConsumeEnough(n.getBaseConfig().needitem)),RpSys.ins().setData(a,RoleWin,RolePanel,ZhuangBanWin,FootPanel,FootHuanHuaPanel,n.id)}},e.showFootMiYuEquipRp=function(){if(GFunc.isSysUpdate(316))for(var t=FootSys.ins().huanHuaDatas,e=0,i=t;e<i.length;e++){var n=i[e],a=n.equipDatas;if(n.isAct())for(var o=0,s=a;o<s.length;o++){var r=s[o],u=!1;r.isEquip||(u=FootSys.ins().getEquipDatasById(r.itemId).length>0),RpSys.ins().setData(u,RoleWin,RolePanel,ZhuangBanWin,FootPanel,FootMiYuPanel,n.id,r.pos)}}},e.showFootMiYuLevelRp=function(){if(GFunc.isSysUpdate(316))for(var t=FootSys.ins().huanHuaDatas,e=0,i=t;e<i.length;e++){var n=i[e],a=!1;n.isHaveEquip()&&!n.isEquipMax()&&(a=GFunc.getItemCount(CurType.footMiYu)>=n.getEquipUpConsu()),RpSys.ins().setData(a,RoleWin,RolePanel,ZhuangBanWin,FootPanel,FootMiYuPanel,n.id,"levelUp")}},e.showFootMiYuSkillRp=function(){if(GFunc.isSysUpdate(316))for(var t=FootSys.ins().huanHuaDatas,e=0,i=t;e<i.length;e++)for(var n=i[e],a=0,o=n.skillDatas;a<o.length;a++){var s=o[a];this.showSkillPassivityRedPoint(s)}},e.showChatFrameRp=function(){for(var t=[1,2],e=[ChatFramePanel,ChatHeadFramePanel],i=0,n=t;i<n.length;i++)for(var a=n[i],o=Cfg.getConfigs(ChatFrameConfig,a),s=0,r=o;s<r.length;s++){var u=r[s],h=ChatSys.ins().getFrameData(a,u.id),l=!1;h.lv<u.maxLevel&&(l=GFunc.isConsumeEnough(u.cost)),RpSys.ins().setData(l,SettingAndChatWin,e[a-1],a,u.id)}},e.showTianMoRedPoint=function(t){if(GFunc.isSysUpdate(338))for(var e=!1,i=ForgeSys.ins().tianMoData.tianMoUpLevelDatas,n=0;n<i.length;n++){var a=i[n];e=a.chekUp(),RpSys.ins().setData(e,RoleWin,RolePanel,ShengLingWin,TianMoMainPanel,TianMoEquipUpLevelPanel,a.pos)}},e.showTianMoRankRedPoint=function(t){if(GFunc.isSysUpdate(338))for(var e=!1,i=ForgeSys.ins().tianMoData.tianMoEquipRankData,n=0;n<i.length;n++){var a=i[n];e=a.chekUp(),RpSys.ins().setData(e,RoleWin,RolePanel,ShengLingWin,TianMoMainPanel,TianMoEquipUpRankPanel,a.pos)}},e.showTianMoSplitRedPoint=function(t){if(GFunc.isSysUpdate(338)){var e=BagSys.ins().getTianMoEquipSmes().length>0;RpSys.ins().setData(e,RoleWin,RolePanel,ShengLingWin,TianMoMainPanel,TianMoEquipUpLevelPanel,TianMoMaterialWin)}},e.showZhuZaiRedPoint=function(t){if(GFunc.isSysUpdate(342)){var e=FbSys.ins().zhuzaiMode.isIntoFuBen()&&FbSys.ins().zhuzaiMode.getZhuZaiBossData().isLive;RpSys.ins().setData(e,BossWin,ZhuZaiBossPanel)}},e.showDartJifenRedPoint=function(){if(GuildSys.ins().guildID&&GFunc.isSysUpdate(318)){var t=Cfg.getConfigs(DartJifenConfig);for(var e in t){var i=t[e].idx,n=DartSys.ins().getRewardStateById(i);RpSys.ins().setData(1==n,JJCWin,DartPanel,DartPlunderPanel,"jf",i)}}},e.showDartLueduoRp=function(){GuildSys.ins().isAddGuild()&&GFunc.isSysUpdate(318)&&RpSys.ins().setData(DartSys.ins().canLueduo()&&Actor.ins().getCurrency(CurType.DartLueduoLing)>0,JJCWin,DartPanel,DartPlunderPanel,"lueduo")},e.showDartJoinPoint=function(){if(GuildSys.ins().isAddGuild()&&GFunc.isSysUpdate(318)){var t=DartSys.ins(),e=t.hasJoinCarNum(),i=Cfg.getConfig(DartConstConfig),n=i.dartCarNumber,a=t.guildCarData;for(var o in a){var s=a[o],r=t.hasJoinCarById(s.id),u=0==s.state&&!r&&e<DartSys.MAXJOIN&&s.dartDivisions.length<n[GuildSys.ins().guildLv];RpSys.ins().setData(u,JJCWin,DartPanel,DartJoinPanel,"join"+s.id)}}},e.showFenJieRedPoint=function(t){var e=0==ActSys.ins().getBtnConfigs(ActOnPlace.Actqingming).length,i=ActSys.ins().getActDataById(ActId.ID_1000),n=i&&i.isMax();if(GFunc.isSysUpdate(321))for(var a=Cfg.getConfigs(FenJieConfig),o=0;o<a.length;o++){var s=a[o],r=(e||n)&&GFunc.getItemCount(s.id)>0;RpSys.ins().setData(r,BagWin,HeChengMainPanel,FenJiePanel,FenJieListWin,s.viewType2,s.id)}},e.showWxYqhlYqkRp=function(){if(GFunc.isSysUpdate(343)){for(var t=!1,e=WxYqhlSys.ins().getTaskDatasByGroup(WxTaskGroup.yq),i=0,n=e;i<n.length;i++){var a=n[i];if(1==a.state){t=!0;break}}RpSys.ins().setData(t,WxYqhlWin,WxYqhlPanel,WxYqhlInvitePanel)}},e.showWxYqhlJjkRp=function(){if(GFunc.isSysUpdate(343)){for(var t=!1,e=WxYqhlSys.ins().getTaskDatasByGroup(WxTaskGroup.jj),i=0,n=e;i<n.length;i++){var a=n[i];if(1==a.state){t=!0;break}}RpSys.ins().setData(t,WxYqhlWin,WxYqhlPanel,WxYqhlGatherPanel)}},e.showWxYqhlZsRp=function(){if(GFunc.isSysUpdate(343)){for(var t=!1,e=WxYqhlSys.ins().getTaskDatasByGroup(WxTaskGroup.zs),i=0,n=e;i<n.length;i++){var a=n[i];if(1==a.state){t=!0;break}}RpSys.ins().setData(t,WxYqhlWin,WxYqhlPanel,WxYqhlZsPanel)}},e.showWxYqhlSvipRp=function(){if(GFunc.isSysUpdate(343)){for(var t=!1,e=WxYqhlSys.ins().getTaskDatasByGroup(WxTaskGroup.svip),i=0,n=e;i<n.length;i++){var a=n[i];if(1==a.state){t=!0;break}}RpSys.ins().setData(t,WxYqhlWin,WxYqhlPanel,WxYqhlSVIPPanel)}},e.showWxYqhlEggRp=function(){if(GFunc.isSysUpdate(343)){var t=WxYqhlSys.ins().isShow();if(t=t&&(WxYqhlSys.ins().isCanSmash()||this.wxYqhlEggShow)){for(var e=!1,i=WxYqhlSys.ins().wxYqhlEggData,n=0,a=i;n<a.length;n++){var o=a[n];if(0==o.itemId){e=!0;break}}t=e}RpSys.ins().setData(t,WxYqhlWin,WxYqhlPanel,WxYqhlEggPanel,"za")}},e.showWxYqhlEggRp2=function(){if(GFunc.isSysUpdate(343)){var t=WxYqhlSys.ins().isShow();t?RpSys.ins().setData(this.wxYqhlEggShow2,WxYqhlWin,WxYqhlPanel,WxYqhlEggPanel,"yq"):RpSys.ins().setData(!1,WxYqhlWin,WxYqhlPanel,WxYqhlEggPanel,"yq")}},e.showXianluRp=function(){if(GFunc.isSysUpdate(351)){var t=XianLuSys.ins().isJieYuan(),e=Cfg.getConfig(MateCommonConfig).expItem,i=BagSys.ins().getItemCount(e),n=i>0&&!XianLuSys.ins().QMDIsMax();RpSys.ins().setData(t&&n,XianLuWin,XianluPanel,"canUp");var a=XianLuSys.ins().getCurrCg(),o=XianLuSys.ins().qmLv;n=!1,a&&(n=o>=a.lv),RpSys.ins().setData(t&&n,XianLuWin,XianluPanel,"canGet"),this.showXianluSkillRp()}},e.showXianluSkillRp=function(){if(GFunc.isSysUpdate(351))for(var t=XianLuSys.ins().getSkills(),e=0,i=t;e<i.length;e++){var n=i[e];this.showSkillPassivityRedPoint(n)}},e.showXianluTaskRp=function(){if(GFunc.isSysUpdate(351)){for(var t=XianLuSys.ins().isJieYuan(),e=XianLuSys.ins().dayTaskList,i=0;i<e.length;i++){var n=e[i];RpSys.ins().setData(t&&2==n.taskState,XianLuWin,XianluPanel,XianluTaskWin,XianluTaskMainPanel,XianluTaskPanel,XianluTaskItem,n.taskId)}for(var a=XianLuSys.ins().longTaskList,i=0;i<a.length;i++){var o=a[i];RpSys.ins().setData(t&&2==o.taskState,XianLuWin,XianluPanel,XianluTaskWin,XianluTaskMainPanel,XianluTaskZSPanel,XianluTaskZSItem,o.taskId)}}},e.showYongZheRedPoint=function(t){void 0===t&&(t=null);var e=FbSys.ins().yongZheModel;if(GFunc.isSysUpdate(323)&&e.floorId){var i=Cfg.getConfigLength(YongzheFubenConfig);if(i<e.floorId)RpSys.ins().setData(!1,ExtCom,FuBenWin,FuBenDanRenPanel,YongZhePanel,"tz");else{var n=Cfg.getConfig(YongzheFubenConfig,e.floorId),a=e.challengeResult;a&&n.zslevel>Actor.ins().zsId&&(a=!1),RpSys.ins().setData(a,ExtCom,FuBenWin,FuBenDanRenPanel,YongZhePanel,"tz")}}},e.showYongZheRewardRedPoint=function(){var t=FbSys.ins().yongZheModel;if(GFunc.isSysUpdate(323)&&t.floorId){for(var e=t.firstDatas,i=!1,n=0,a=e;n<a.length;n++){var o=a[n];if(1==o.getState()){i=!0;break}}RpSys.ins().setData(i,ExtCom,FuBenWin,FuBenDanRenPanel,YongZhePanel,"first");var s=Cfg.getConfigs(YongzheFubenConfig,CondType.Less,"id",t.floorId);for(var r in s){var u=s[r],h=t.getGQState(u.id);i=!1,1==h&&(i=!0),RpSys.ins().setData(i,ExtCom,FuBenWin,FuBenDanRenPanel,YongZhePanel,u.floor,"gq",u.id)}}},e.showYongZheShopRedPoint=function(){if(GFunc.isSysUpdate(327)){var t=ShopSys.ins().shopYongZheDatas,e=!1;for(var i in t)if(1!=Number(i))for(var n=t[i],a=0;a<n.length;a++){var o=n[a],s=o.getConsumeItem();if(s.id!=CurType.yb){var r=!o.isGuanQin()&&o.canBuy()&&GFunc.isConsumeEnough(o.getConsumeItem()),u=1==o.config.storetype?ShopYongZheDailyPanel:ShopYongZheFirstPanel;RpSys.ins().setData(r,ShopWin,ShopYongZhePanel,u,o.config.index),r&&(e=!0)}}RpSys.ins().setData(1==ShopSys.ins().shopYongZhefirstRed,ShopWin,ShopYongZhePanel,ShopYongZheFirstPanel),e||(e=1==ShopSys.ins().shopYongZhefirstRed),RpSys.ins().setData(e,ExtCom,FuBenWin,FuBenDanRenPanel,YongZhePanel,"shop")}},e.showQMDBRedPoint=function(){GFunc.isSysUpdate(345)&&RpSys.ins().setData(FbSys.ins().qmdbModel.canCaiji(),QiyuWin,QMDBPanel)},e.showShengLingLevelRp=function(){if(GFunc.isSysUpdate(326))for(var t=QiyuSys.ins().shengLingModel,e=t.shengLingDatas,i=0,n=e;i<n.length;i++){var a=n[i];t.isAct(a)&&!a.isMaxLevel()?RpSys.ins().setData(GFunc.isConsumeEnough(a.getLevelConfig().cost),RoleWin,RolePanel,ZhuangBanWin,ShengLingPanel,ShengLingLevelPanel,a.id,"level"):RpSys.ins().setData(!1,RoleWin,RolePanel,ZhuangBanWin,ShengLingPanel,ShengLingLevelPanel,a.id,"level")}},e.showShengLingDaShiRp=function(){if(GFunc.isSysUpdate(326))for(var t=QiyuSys.ins().shengLingModel,e=t.shengLingDatas,i=0,n=e;i<n.length;i++){var a=n[i];t.isAct(a)?RpSys.ins().setData(a.daShiData.canRank(),RoleWin,RolePanel,ZhuangBanWin,ShengLingPanel,ShengLingLevelPanel,a.id,ShengLingDaShiWin):RpSys.ins().setData(!1,RoleWin,RolePanel,ZhuangBanWin,ShengLingPanel,ShengLingLevelPanel,a.id,ShengLingDaShiWin)}},e.showShengLingYinJiRp=function(){if(GFunc.isSysUpdate(326)){var t=QiyuSys.ins().shengLingModel,e=t.yinJiDatas;for(var i in e){var n=(t.getShengLingDataById(e[i].getShengLingId()),e[i]);e[i].isMax()?RpSys.ins().setData(!1,RoleWin,RolePanel,ZhuangBanWin,ShengLingPanel,ShengLingYinJiPanel,n.getConfig().shengLingId,n.id):RpSys.ins().setData(GFunc.isConsumeEnough(n.getConfig().needItem),RoleWin,RolePanel,ZhuangBanWin,ShengLingPanel,ShengLingYinJiPanel,n.getConfig().shengLingId,n.id)}}},e.showShengLingTaoZhuangRp=function(){if(GFunc.isSysUpdate(326))for(var t=QiyuSys.ins().shengLingModel,e=t.shengLingDatas,i=0,n=e;i<n.length;i++){var a=n[i];if(a.tzLevel<a.getBaseConfig().maxSuitLv){for(var o=t.getYinJiDatasById(a.id),s=Number.MAX_VALUE,r=0,u=o;r<u.length;r++){var h=u[r];s=Math.min(s,h.level)}var l=!1,p=Cfg.getConfigs(ShengLingSuitConfig,a.id);for(var c in p){var d=p[c];if(d.level<a.getBaseConfig().maxSuitLv&&d.level>=a.tzLevel&&s>=d.needLevel){l=!0;break}}RpSys.ins().setData(l,RoleWin,RolePanel,ZhuangBanWin,ShengLingPanel,ShengLingYinJiPanel,a.id,"taozhuang")}else RpSys.ins().setData(!1,RoleWin,RolePanel,ZhuangBanWin,ShengLingPanel,ShengLingYinJiPanel,a.id,"taozhuang")}},e.showShengLingStageRp=function(){if(GFunc.isSysUpdate(326))for(var t=QiyuSys.ins().shengLingModel,e=t.shengLingDatas,i=0,n=e;i<n.length;i++){var a=n[i];t.getYinJiActCountById(a.id);a.isMaxStage()?RpSys.ins().setData(!1,RoleWin,RolePanel,ZhuangBanWin,ShengLingPanel,ShengLingStagePanel,a.id):RpSys.ins().setData(GFunc.isConsumeEnough(a.getStageConfig().needItem),RoleWin,RolePanel,ZhuangBanWin,ShengLingPanel,ShengLingStagePanel,a.id)}},e.showMonsterSiegeRp=function(){if(GFunc.isSysUpdate(354)){for(var t=MonsterSiegeSys.ins(),e=0;e<t.scoreRewardDatas.length;e++){var i=t.scoreRewardDatas[e],n=i.canGet();RpSys.ins().setData(n,BossWin,ZhuZaiMainPanel,MonsterSiegeMainPanel,MonsterSiegeBox,i.id)}RpSys.ins().setData(t.count>0&&1==t.isOpen,BossWin,ZhuZaiMainPanel,MonsterSiegeMainPanel,"goto")}},e.showShenYouUpLevelRedPoint=function(){if(GFunc.isSysUpdate(325)){var t=QiyuSys.ins().shenYouData,e=Cfg.getConfig(ShenYouLevelConfig,t.level),i=0==t.isMaxLv()&&GFunc.isConsumeEnough(e.cost);RpSys.ins().setData(i,RoleWin,RolePanel,ZhuangBanWin,ShenYouPanel,ShenYouLevelPanel)}},e.showShenYouHuanHuaRedPoint=function(){if(GFunc.isSysUpdate(325)&&QiyuSys.ins().shenYouData.rank>=Cfg.getConfig(ShenYouBaseConfig).huanhuaOpen)for(var t=QiyuSys.ins().shenYouData,e=t.huanHuaDatas,i=0,n=e;i<n.length;i++){var a=n[i],o=!1;a.isMax()||(o=GFunc.isConsumeEnough(a.getBaseConfig().needitem)),RpSys.ins().setData(o,RoleWin,RolePanel,ZhuangBanWin,ShenYouPanel,ShenYouHuanHuaPanel,a.id)}},e.showShenYouYinJiRedPoint=function(){if(GFunc.isSysUpdate(325)&&QiyuSys.ins().shenYouData.rank>=Cfg.getConfig(ShenYouBaseConfig).yinjiOpen){var t=QiyuSys.ins().shenYouData,e=Cfg.getConfig(ShenYouTagExpConfig,CondType.LessEqual,ShenYouTagExpConfig.minLv,t.yinjiLevel),i=new ItemDataReward;i.id=e.itemid,i.count=1;var n=0==t.yinjiMax()&&GFunc.isConsumeEnough(i);RpSys.ins().setData(n,RoleWin,RolePanel,ZhuangBanWin,ShenYouPanel,ShenYouYinJiPanel,"uplevel")}},e.showShenYouYinJiSkillRedPoint=function(){if(GFunc.isSysUpdate(325)&&QiyuSys.ins().shenYouData.rank>=Cfg.getConfig(ShenYouBaseConfig).yinjiOpen)for(var t=SkillSys.ins().getSkillPassivityDatasByIds(Cfg.getConfig(ShenYouBaseConfig).yinjiskills),e=0,i=t;e<i.length;e++){var n=i[e];this.showSkillPassivityRedPoint(n)}},e.showShenYouSkillRedPoint=function(){if(GFunc.isSysUpdate(325)&&QiyuSys.ins().shenYouData.rank>=Cfg.getConfig(ShenYouBaseConfig).skillOpen)for(var t=QiyuSys.ins().shenYouData,e=t.skillDatas,i=0,n=e;i<n.length;i++){var a=n[i],o=GFunc.isConsumeEnough(a.getConfig().cost)&&0==a.isMax();t.skillCount==t.actSkillCount()&&t.skillCount!=t.getSkillMaxCount()&&(o=o&&a.isAct()),RpSys.ins().setData(o,RoleWin,RolePanel,ZhuangBanWin,ShenYouPanel,ShenYouSkillPanel,ShenYouSkillPanelItem,"skillUp",a.id)}},e.showShenDianRedPoint=function(){if(GFunc.isSysUpdate(324)){var t=FbSys.ins().shendianData.leftCount>0;RpSys.ins().setData(t,ExtCom,FuBenWin,FuBenDuoRenPanel,ShenDianPanel)}},e.showWCLevelRp=function(){if(GFunc.isSysUpdate(357)){var t=WCSys.ins().levelDatas;for(var e in t){var i=t[e],n=!1;if(!i.isMax()){var a=i.getConfig().needitem;n=GFunc.isConsumeEnoughByItemId(a.id,a.count)}RpSys.ins().setData(n,RoleWin,RolePanel,MoJieWin,WCPanel,WCLevelPanel,i.getConfig().type,i.id)}}},e.showWCDashiRp=function(){if(GFunc.isSysUpdate(357)){var t=WCSys.ins(),e=t.dashiDatas;for(var i in e){var n=e[i],a=!1;n.isMaxRank()||(a=t.getLevelCountByType(n.type,n.getConfig().needlv)>=n.getConfig().neednumber),RpSys.ins().setData(a,RoleWin,RolePanel,MoJieWin,WCPanel,WCLevelPanel,n.type,WCDashiWin)}}},e.showWCStageRp=function(){if(GFunc.isSysUpdate(357)){var t=!1;if(!WCSys.ins().stageData.isMax()){var e=WCSys.ins().stageData.getCurConfig().needitem;t=GFunc.isConsumeEnough(e)}RpSys.ins().setData(t,RoleWin,RolePanel,MoJieWin,WCPanel,WCStagePanel)}},e.showPurifyRedPoin=function(t){if(GFunc.isSysUpdate(358)){var e=ForgeSys.ins().purifyData;if(!e)return;for(var i=0;i<e.purifyEquipDatas.length;i++){var n=e.purifyEquipDatas[i],a=!1;if(n.getIsMax())a=!1;else if(BagSys.ins().getEquipByIndex(n.pos).hasEquipOn())for(var o=0;o<n.getConfig().cost.length&&!(a=GFunc.isConsumeEnough(n.getConfig().cost[o].items));o++);RpSys.ins().setData(a,ForgeWin,PurifyPanel,n.pos)}}},e.showPurifyDaShiRedPoint=function(){var t=ForgeSys.ins();if(GFunc.isSysUpdate(358)&&t.purifyDaRenData&&t.purifyDaShiData){var e=t.purifyDaRenData.canRank();RpSys.ins().setData(e,ForgeWin,PurifyPanel,PurifyDaRenWin),e=t.purifyDaShiData.canRank(),RpSys.ins().setData(e,ForgeWin,PurifyPanel,PurifyDaShiWin)}},e.showGuZhanRedPoint=function(t){if(GFunc.isSysUpdate(359)){var e=FbSys.ins().guZhanMode.isOpen&&FbSys.ins().guZhanMode.isIntoFuben();RpSys.ins().setData(e,JJCWin,JJCManyPanel,GuZhanPanel,"IntoFuben"),e=FbSys.ins().guZhanMode.rewardKeMai()&&0==FbSys.ins().guZhanMode.rewardYiMai()&&FbSys.ins().guZhanMode.showRewardRedPoint,RpSys.ins().setData(e,JJCWin,JJCManyPanel,GuZhanPanel,"BuyReward")}},e.showGuZhanReweardRedPoint=function(t){if(GFunc.isSysUpdate(359)){var e=FbSys.ins().guZhanMode,i=e.canGetFirstReward();RpSys.ins().setData(i,JJCWin,JJCManyPanel,GuZhanPanel,GuZhanRankPanel,"FirstReward"),i=e.canGetgotoReward(),RpSys.ins().setData(i,JJCWin,JJCManyPanel,GuZhanPanel,GuZhanRankPanel,"GotoReward")}},e.showTianShiShengDun=function(){if(GFunc.isSysUpdate(337)){for(var t=!1,e=Cfg.getConfigs(UpItemConfig),i=0,n=e;i<n.length;i++){var a=n[i];if(t=BagSys.ins().getItemCount(a.itemid)>0)break}var o=TianShiShengDunSys.ins().shengDunData;o.isAct?o.isMax()?RpSys.ins().setData(!1,RoleWin,RolePanel,ShengLingWin,TianShiShengDunPanel,"up"):o.getLvCfg().exp>0?RpSys.ins().setData(t,RoleWin,RolePanel,ShengLingWin,TianShiShengDunPanel,"up"):RpSys.ins().setData(!0,RoleWin,RolePanel,ShengLingWin,TianShiShengDunPanel,"up"):RpSys.ins().setData(!0,RoleWin,RolePanel,ShengLingWin,TianShiShengDunPanel,"up")}},e.showTianShiShengDunDan=function(){if(GFunc.isSysUpdate(337))for(var t=TianShiShengDunSys.ins().shengDunData,e=0,i=t.attrDanDatas;e<i.length;e++){var n=i[e];if(n.useCount<n.maxUseCount){var a=BagSys.ins().getItemCount(n.config.itemid)>0;RpSys.ins().setData(a,RoleWin,RolePanel,ShengLingWin,TianShiShengDunPanel,"dan",n.id)}else RpSys.ins().setData(!1,RoleWin,RolePanel,ShengLingWin,TianShiShengDunPanel,"dan",n.id)}},e.showBraveRedPoint=function(t){if(GFunc.isSysUpdate(341)){var e=FbSys.ins().braveModel.getCount()>0&&FbSys.ins().braveModel.isHasCanChallenge();RpSys.ins().setData(e,BossWin,KfBossMainPanel,BravePanel)}},e.showSuitSingle=function(){if(GFunc.isSysUpdate(336))for(var t=ForgeSys.ins().shenPanTaoZhuangData.datas,e=!1,i=0;i<t.length;i++){var n=t[i];e=this.getSuitRedPoint(n),RpSys.ins().setData(e,RoleWin,RolePanel,ShengLingWin,ShenPanTaoZhuangMainPanel,ShenPanTaoZhuangPanel,n.pos)}},e.getSuitRedPoint=function(t){var e=t.getConfig(),i=!t.isMax()&&GFunc.isConsumeEnough(e.items);return i},e.showEnchantRedPoint=function(t){if(GFunc.isSysUpdate(336))for(var e=ForgeSys.ins().fumoData,i=0;i<e.fumoPosDatas.length;i++)for(var n=e.getPosDataByIndex(i),a=0;a<n.fumoPointDatas.length;a++){var o=n.getDataByIndex(a),s=o.isUp();RpSys.ins().setData(s,RoleWin,RolePanel,ShengLingWin,ShenPanTaoZhuangMainPanel,FumoPanel,o.pos,o.point)}},e.showEnchantSplitRedPoint=function(t){if(GFunc.isSysUpdate(336)){var e=ForgeSys.ins().getEnchantSplitItem().length>0;RpSys.ins().setData(e,RoleWin,RolePanel,ShengLingWin,ShenPanTaoZhuangMainPanel,FumoPanel,FenjieWin)}},e.showKlmRedPoint=function(t){if(GFunc.isSysUpdate(339))for(var e=FbSys.ins().klmModel.klmInfos,i=0;i<e.length;i++){var n=e[i],a=n.config.item,o=!1;!n.isDie&&Actor.ins().zsId>=Cfg.getConfig(KalimaFubenConfig,n.id).zslevel&&GFunc.isConsumeEnough(a)&&(o=!0),RpSys.ins().setData(o,BossWin,ZhuZaiMainPanel,KlmPanel,n.id)}},e.showKlmKunDunRedPoint=function(t){if(GFunc.isSysUpdate(339)){var e=FbSys.ins().klmModel.isKunDunOpen();RpSys.ins().setData(e,BossWin,ZhuZaiMainPanel,KlmPanel,KlmKunDunShowWin,KlmKunDunShowPanel)}},e.showCampWarTzRp=function(){if(GFunc.isSysUpdate(349)){var t=CampWarSys.ins().isBattle()&&this.campWarTzRpShow;RpSys.ins().setData(t,CampWarLinkWin,CampWarLinkPanel,"tz"),RpSys.ins().setData(t,JJCWin,CampWarLinkPanel,"tz")}},e.showCampWarDailyRewardRp=function(){if(GFunc.isSysUpdate(349)){for(var t=!1,e=CampWarSys.ins().getDailyRewardDatas(),i=0,n=e;i<n.length;i++){var a=n[i];if(a.getRewardState()==ActRewardState.CanGet){t=!0;break}}RpSys.ins().setData(t,CampWarLinkWin,CampWarLinkPanel,CampWarMainBoxItem),RpSys.ins().setData(t,JJCWin,CampWarLinkPanel,CampWarMainBoxItem)}},e.showCampWarScoreRewardRp=function(){if(GFunc.isSysUpdate(349)){for(var t=!1,e=CampWarSys.ins().scoreRewardDatas,i=0,n=e;i<n.length;i++){var a=n[i];if(a.rewardState==ActRewardState.CanGet){t=!0;break}}RpSys.ins().setData(t,CampWarLinkWin,CampWarLinkPanel,CampWarRewardPanel),RpSys.ins().setData(t,JJCWin,CampWarLinkPanel,CampWarRewardPanel)}},e.monthCardPanelShow=!0,e.zztqCardPanelShow=!0,e.mineLueDuoShow=!0,e.wxYqhlEggShow=!0,e.wxYqhlEggShow2=!0,e.campWarTzRpShow=!0,__decorate([callDelay(100)],e,"showChatFrameRp",null),__decorate([post()],e,"showShenYouYinJiSkillRedPoint",null),e}(BaseSys);__reflect(RpFun.prototype,"RpFun");var System;!function(t){t.rpFun=RpFun.ins.bind(RpFun)}(System||(System={}));var PCode;!function(t){t[t.DEL=0]="DEL",t[t.ADD=1]="ADD",t[t.UPD=2]="UPD"}(PCode||(PCode={})),window.RpFun=RpFun;var Act23_4Win2=function(t){function e(){var e=t.call(this)||this;return e.winType=WinType.NormalWin,e.onPlace=ActOnPlace.zqFisrtRecharge,e}return __extends(e,t),e.prototype.initUI=function(){t.prototype.initUI.call(this),this.addBg(),this.layer=LayerMgr.Popup},e.prototype.setSkinName=function(){this.skinName="BaseWinSkin3"},e}(ActBaseWin);__reflect(Act23_4Win2.prototype,"Act23_4Win2"),window.Act23_4Win2=Act23_4Win2;var GConst=function(){function t(){}return t.Gb_Bag_Length=20,t.MainCityFbId=0,t.MainCityMapId=1,t.DefaultColer=11508595,t.MingxianColor=16115290,t.PZColor=[13486270,5767068,36345,16726198,16737792,16711680,16711680,16711680,16711680,16711680,16711680],t.SXColor=[13486270,16115290,5767068,2342605,16751375],t.MinerRobColor=[13486270,13486270,5767068,13470975,15733780],t.MAX_ZS_LV=12,t.MIN_DSZS_LV=5,t.MINCSZS_LV=10,t.fbrate=["C","B","A","S","SS","SSS"],t.addPointLv=3,t.FASHION="fashion",t.rankType=[RankType.QHDJ,RankType.CBZL,RankType.gem,RankType.MLZL,RankType.Qizhi,RankType.juhun,RankType.YSZL],t.rareColor=[5767068,2342605,13470975,16751375,16711681],t.wingStart=33,t.ZhuoYueColor=[5767068,10703614,16541454,14876693],t.YiJianRongLianVipLevel=3,t.YiJianRongLianLevel=700,t.JueWangFirstFuBenId=27001,t.ChongShengSkillIndex=6,t.ConfigLevel=5,t.DamonBagMax=200,t.fenzhenFubenGroup=[10001,10020],t.expBuffIds=[40001,40002,40003],t.hechengOpenLevel=100,t.ChibangEquip=39e4,t.ShenMoEquip=395e3,t.hefuDuiHuanItemId=340016,t.GemItem=699999,t.XinShouItemId=[291101,292101,293101],t.GuiderId2EquiId=[101001,111001],t.RankNPCId=[0,0,0,10011,10012,10013],t.RankNPCJob=[0,0,0,JobConst.ZhanShi,JobConst.FaShi,JobConst.GongJianShou],t.scaleMS=1.538,t.ZCMID=321001,t.ZLXZID=321002,t.AUTOEQUIPID1=101696,t.AUTOEQUIPID2=121696,t.AUTOACTGODID=1010107,t.GuildBattleMoBaiNPCId=10035,t.CampNPCId=10036,t.FbGroupMeiRi=[FbGroup.Gold,FbGroup.TianFu,FbGroup.Damon,FbGroup.Yongbing,FbGroup.Shenmo,FbGroup.Shenqi,FbGroup.Wing,FbGroup.Sz,FbGroup.Meilin],t.fosterSort=[EquipPos.WEAPON,EquipPos.CLOTHES,EquipPos.HAND,EquipPos.LEG,EquipPos.RING1,EquipPos.HEAD,EquipPos.NECKLACE,EquipPos.EMBLEM,EquipPos.CALIGA,EquipPos.RING2],t.SevenBrothersItemTypes=[ItemType.ShenqiHuanHua,ItemType.WingHuanHua,ItemType.SzHuanHua,ItemType.MeilinHuanHua,ItemType.DamonHuanHua,ItemType.YongbingHuanHua,ItemType.ShenmoHuanHua],t.SevenBrothersSysIds=[210,211,212,213,216,217,218],t.moZhenItemTypes=[ItemType.DamonMozhen,ItemType.YongbingMozhen,ItemType.ShenmoMozhen],t.moZhenSysIds=[290,293,305],t.moZhenMainSysIds=[216,217,218],t.WinLink={1:RoleWin,2:SqXyWin,3:ShouHuWin,4:SkillWin,5:ForgeWin,6:BagWin,7:ZhaoCaiLongWin,8:ShengbeiWin,9:XunZhangWin,10:ShopWin,11:RankWin,12:JobWin,13:JJCWin,14:LiLianWin,15:FuBenWin,16:BossWin,17:GuildNavWin,18:FuliWin,19:YKWin,20:ZZTQWin,21:ActRankWin,22:ActWin,23:XunBaoWin,24:MoJieWin,25:ZhuangBanWin,27:FuwenSysWin,28:SuitWin,29:VipWin,30:BuffWin,31:RechargeWin,32:ZhuoYueWin,33:GuanJiWin,34:GuildActivityWin2,35:ChatWin,36:GuaJiKuaiSuWin,37:GuildWarMainWin,38:SVIPMSWin,39:ShopWin,40:YYMSWin,41:GuildShopWin,42:MeNeedLevelWin,43:MinerWin,44:FirstRechargeBuyWin,45:ActKFLCWin,46:ActRankWin2,48:QiyuWin,49:YZZHWin,50:XianLuListWin,51:TclyWin,52:YdssWin,53:ActHFSYWin,54:ActHeFuWin,57:GuildBattleMoBaiWin,58:GuildNavWin,59:Act23_4Win,60:ActPlace15Win},t.mcOrderDir0=[McOrder.FOOT,McOrder.MOUNT,McOrder.JUHUN,McOrder.WEAPON,McOrder.SHENGLING,McOrder.BODY,McOrder.MOUNT2,McOrder.WING,McOrder.XIANLINGFZ],t.mcOrderDir1=[McOrder.FOOT,McOrder.MOUNT,McOrder.BODY,McOrder.MOUNT2,McOrder.JUHUN,McOrder.WEAPON,McOrder.SHENGLING,McOrder.WING,McOrder.XIANLINGFZ],t.mcOrderDir2=[McOrder.FOOT,McOrder.MOUNT,McOrder.BODY,McOrder.WING,McOrder.JUHUN,McOrder.MOUNT2,McOrder.WEAPON,McOrder.SHENGLING,McOrder.XIANLINGFZ],t.mcOrderDir3=[McOrder.FOOT,McOrder.MOUNT,McOrder.WING,McOrder.BODY,McOrder.MOUNT2,McOrder.WEAPON,McOrder.SHENGLING,McOrder.JUHUN,McOrder.XIANLINGFZ],t.mcOrderDir4=[McOrder.FOOT,McOrder.WING,McOrder.MOUNT,McOrder.BODY,McOrder.WEAPON,McOrder.SHENGLING,McOrder.MOUNT2,McOrder.JUHUN,McOrder.XIANLINGFZ],t.mcOrderDir5=[McOrder.FOOT,McOrder.MOUNT,McOrder.WING,McOrder.BODY,McOrder.MOUNT2,McOrder.WEAPON,McOrder.SHENGLING,McOrder.JUHUN,McOrder.XIANLINGFZ],t.mcOrderDir6=[McOrder.FOOT,McOrder.MOUNT,McOrder.BODY,McOrder.WING,McOrder.JUHUN,McOrder.MOUNT2,McOrder.WEAPON,McOrder.SHENGLING,McOrder.XIANLINGFZ],t.mcOrderDir7=[McOrder.FOOT,McOrder.MOUNT,McOrder.BODY,McOrder.WEAPON,McOrder.SHENGLING,McOrder.JUHUN,McOrder.WING,McOrder.MOUNT2,McOrder.XIANLINGFZ],t.mcOrderDirFS0=[McOrder.FOOT,McOrder.MOUNT,McOrder.JUHUN,McOrder.BODY,McOrder.MOUNT2,McOrder.WING,McOrder.WEAPON,McOrder.SHENGLING],t.mcOrderDirFSUI4=[McOrder.FOOT,McOrder.WING,McOrder.WEAPON,McOrder.SHENGLING,McOrder.MOUNT2,McOrder.BODY,McOrder.JUHUN,McOrder.MOUNT],t.mcOrderDir=[t.mcOrderDir0,t.mcOrderDir1,t.mcOrderDir2,t.mcOrderDir3,t.mcOrderDir4,t.mcOrderDir5,t.mcOrderDir6,t.mcOrderDir7],t.mcOrderFS=[t.mcOrderDirFS0,t.mcOrderDir1,t.mcOrderDir2,t.mcOrderDir3,t.mcOrderDir4,t.mcOrderDir5,t.mcOrderDir6,t.mcOrderDir7],t.mcOrderFSUI=[t.mcOrderDir0,t.mcOrderDir1,t.mcOrderDir2,t.mcOrderDir3,t.mcOrderDirFSUI4,t.mcOrderDir5,t.mcOrderDir6,t.mcOrderDir7],t.mcOrderJob=[t.mcOrderDir,t.mcOrderDir,t.mcOrderFS,t.mcOrderDir],t.mcOrderJobUI=[t.mcOrderDir,t.mcOrderDir,t.mcOrderFSUI,t.mcOrderDir],t.QualityEquipIds=[310501,310502,310503,310504,310505,310506],t.chatMessage=["听说寻宝里能出仙戒和魔戒。","这游戏还护肝休闲，玩法多真不错。","本人萌新，求大佬教我怎么玩。","这游戏的仙玉不要钱的吗？竟然敢给这么多？","首充送的武器好像还不错哦。","真棒，月卡太划算了，我仙玉都花不完了！","这么炫酷的游戏，肯定很多小哥哥小姐姐在玩。","说出来你可能不信，这是我最喜欢的游戏！","我在Boss之家差点就抢到Boss了！","这里个个都是人才，说话又nice又好听。","你们的战力怎么那么高啊，首充了吗？","刚来的萌新一枚，求各位大佬带我飞！","Boss太多人抢了，幸好SVIP可以随便打Boss之家！","原来快速挂机可以获得大量经验和元宝。","哈哈，充了至尊特权，这下我也是大佬了吧！"],t.jieduanZhouqi=7*DateUtil.SECOND_PER_DAY,t.saijiZhouqi=28*DateUtil.SECOND_PER_DAY,t.pzName=["白色","绿色","蓝色","紫色","橙色","红色"],t
}();__reflect(GConst.prototype,"GConst");var ActCSKWin=function(t){function e(){var e=t.call(this)||this;return e.onPlace=ActOnPlace.CSK,e}return __extends(e,t),e}(ActBaseWin);__reflect(ActCSKWin.prototype,"ActCSKWin"),window.ActCSKWin=ActCSKWin;var AStarLine=function(){function t(){}return t.canPass=function(t,e,i,n,a,o){void 0===a&&(a=function(t,e){return!0}),void 0===o&&(o=!0);var s=0,r=0,u=0,h=0,l=0,p=0,c=0,d=0,g=0,f=0,y=0,m=0,C=0,v=0;this.results||(this.results=new Array(4)),this.results[0]=0,this.results[1]=0,m=(n-e)/(i-t),C=n-m*i,l=i>t?1:-1,p=n>e?1:-1,s=t>>0,r=e>>0,u=i>>0,h=n>>0,c=u-s,c=(c^c>>31)-(c>>31),d=s,f=r,this.results[2]=d,this.results[3]=f,o&&(console.log("--------------------------------------"),console.log("("+t+","+e+") -> ("+i+","+n+")"));var S=0;for(v=0;c>v;v++){for(d+=l,y=m*(l>0?d:d+1)+C,g=y+1e-8>>0;f!=g&&(S++,!(S>1e3));){if(f+=p,o&&console.log("("+(d-l)+","+f+")"),!a(d-l,f))return this.results;this.results[2]=d-l,this.results[3]=f}if(!a(d,g))return this.results;this.results[2]=d,this.results[3]=g,o&&console.log("2("+d+","+g+")")}for(S=0;f!=h&&(S++,!(S>1e3));){if(f+=p,!a(d,f))return this.results;this.results[2]=d,this.results[3]=f,o&&console.log("("+d+","+f+")")}return o&&console.log("========================================="),this.results[0]=1,this.results},t.getGridsByTwoPoint=function(t,e,i,n){var a=0,o=0,s=0,r=0,u=0,h=0,l=0,p=0,c=0,d=0,g=0,f=0,y=0,m=0;for(this.coords.length=0,f=(n-e)/(i-t),y=n-f*i,u=i>t?1:-1,h=n>e?1:-1,a=t>>0,o=e>>0,s=i>>0,r=n>>0,l=s-a,l=(l^l>>31)-(l>>31),this.coords[this.coords.length]=a,this.coords[this.coords.length]=o,p=a,d=o,m=0;l>m;m++){for(p+=u,g=f*(u>0?p:p+1)+y,c=g>>0;d!=c;)d+=h,this.coords[this.coords.length]=p-u,this.coords[this.coords.length]=d;this.coords[this.coords.length]=p,this.coords[this.coords.length]=c}for(;d!=r;)d+=h,this.coords[this.coords.length]=p,this.coords[this.coords.length]=d;return this.coords},t.getPointOnLine=function(t,e,i,n,a){var o=0,s=0,r=0,u=0;return r=i-t,u=n-e,o=Math.sqrt(r*r+u*u),s=o+a,[Math.round(t+r*s/o),Math.round(e+u*s/o)]},t.shortPath=function(t,e,i,n){var a,o=t,s=e,r=i[i.length-2],u=i[i.length-1],h=0,l=0;i.length>=4&&(o=i[i.length-4],s=i[i.length-3]),h=r-o,l=u-s,h*h+l*l>n*n?(a=this.getPointOnLine(o,s,r,u,-n),i[i.length-2]=a[0],i[i.length-1]=a[1]):i.length-=2},t.coords=[],t.results=[],t}();__reflect(AStarLine.prototype,"AStarLine");var MapCell=function(){function t(){this.handle=0}return Object.defineProperty(t.prototype,"hidden",{get:function(){return(2&this.flags)>0},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"walkable",{get:function(){return(1&this.flags)>0},enumerable:!0,configurable:!0}),t.prototype.reset=function(){this.handle=0},t}();__reflect(MapCell.prototype,"MapCell");var ActJueZhanWin=function(t){function e(){var e=t.call(this)||this;return e.onPlace=ActOnPlace.juezhan,e}return __extends(e,t),e.getTitle=function(){return"btz_zycs_kfjz"},e.getTabTitle=function(){return"jzhd_zycs_kfjz"},e}(ActWin);__reflect(ActJueZhanWin.prototype,"ActJueZhanWin"),window.ActJueZhanWin=ActJueZhanWin;var ActOpenServerWin=function(t){function e(){var e=t.call(this)||this;return e.winType=WinType.OverlayWin,e}return __extends(e,t),e.prototype.getParam=function(){return this.activityId},e.prototype.infoData=function(){this.dataBtns=ActSys.ins().getBtnConfigs(this.onPlace);for(var t=0;t<this.dataBtns.length;t++){var e=this.dataBtns[t];if(e.type==ActType.TYPE_4){var i=ActSys.ins().getActDataById(e.id);if(i&&i.isSeeActivity()){var n=new ActivityBtnConfig;n.id=ActId.ID_90100,n.type=ActType.TYPE_203,n.order=e.order,n.icon="day"+(Actor.ins().serverOpenDay+1)+"ph",this.dataBtns.splice(t,0,n);break}}}this.panelNames=ActSys.ins().createPanelNames(this.dataBtns)},e.getTitle=function(){return"btz_zycs_kfhd"},e.getTabTitle=function(){return"btz_zycs_kfhd"},e.getSysId=function(){return 999},e}(ActBaseWin);__reflect(ActOpenServerWin.prototype,"ActOpenServerWin"),window.ActOpenServerWin=ActOpenServerWin;var ActPlace12Win=function(t){function e(){var e=t.call(this)||this;return e.onPlace=ActOnPlace.ACT12,e}return __extends(e,t),e.getTitle=function(){return"btz_zycs_zmkh"},e}(ActBaseWin);__reflect(ActPlace12Win.prototype,"ActPlace12Win"),window.ActPlace12Win=ActPlace12Win;var ActRpData=function(){function t(){}return t}();__reflect(ActRpData.prototype,"ActRpData");var ActPlace21Win=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.onPlace=ActOnPlace.ACT21,e}return __extends(e,t),e}(ActBaseWin);__reflect(ActPlace21Win.prototype,"ActPlace21Win"),window.ActPlace21Win=ActPlace21Win;var ActPlace24Win=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.onPlace=ActOnPlace.ACT24,e}return __extends(e,t),e}(ActBaseWin);__reflect(ActPlace24Win.prototype,"ActPlace24Win"),window.ActPlace24Win=ActPlace24Win;var ActQMKHWin=function(t){function e(){var e=t.call(this)||this;return e.onPlace=ActOnPlace.QMKH,e}return __extends(e,t),e}(ActBaseWin);__reflect(ActQMKHWin.prototype,"ActQMKHWin"),window.ActQMKHWin=ActQMKHWin;var AttrData=function(t){function e(e,i){return void 0===e&&(e=0),void 0===i&&(i=0),t.call(this,e,i)||this}return __extends(e,t),e.parse=function(t,e){if(void 0===e&&(e={}),!t)return null;var i=Lang.common_attrName,n=e.fm,a=e.fix;n=n||"%k %v";for(var o=[],s=0,r=t;s<r.length;s++){var u=r[s],h=u.type,l=u.value,p=this.getAttrValue({type:h,value:l}),c=n.replace("%k",i[h]).replace("%v",p+"");c=a?a(c,h,l):c,c&&o.push(c)}return o},e.getFm=function(t,e,i,n){void 0===i&&(i=""),void 0===n&&(n="");var a="";return a=t?addColor("%k"+i,t):"%k"+i,a+=e?addColor(n+"%v",e):n+"%v"},e.attrMultiple=function(i,n){return t.attrMultiple.call(this,i,n,e)},e.mergeAttrx=function(i,n){return t.mergeAttrx.call(this,i,n,e)},e.mergeAttr=function(i,n){return t.mergeAttr.call(this,i,n,e)},e.diffAttr=function(i,n){return t.diffAttr.call(this,i,n,e)},e.getAttrValue=function(t){var e="";switch(t.type){case AttrType.atZYYJ:case AttrType.atHXYJ:case AttrType.atWSYJ:case AttrType.atHpPer:case AttrType.atAtkPer:case AttrType.atDefPer:case AttrType.atDamagePer:case AttrType.atReductionPer:case AttrType.atReflex:case AttrType.atDropPer:case AttrType.atChongsheng:case AttrType.atTSYJ:case AttrType.atSSYJ:case AttrType.atdkhx:case AttrType.atdkws:case AttrType.atdkzy:case AttrType.tesuboss:case AttrType.smtomonster:case AttrType.smtoplay:case AttrType.toplay:case AttrType.detoplay:case AttrType.shenmohp:case AttrType.zmzs:case AttrType.zmjs:case AttrType.shenqiAll:case AttrType.wingAll:case AttrType.szAll:case AttrType.meilinAll:case AttrType.damonAll:case AttrType.yongbingAll:case AttrType.shenmoAll:case AttrType.pofangPer:case AttrType.zbAtkPer:case AttrType.zbHpPer:case AttrType.zbPofangPer:case AttrType.zbDefPer:case AttrType.zbZmPer:case AttrType.zbTkPer:case AttrType.zbAtkSucPer:case AttrType.zbDefSucPer:case AttrType.zjsxzfPer:case AttrType.footHpPer:case AttrType.footDefPer:case AttrType.footDefSucPer:case AttrType.footAllPer:case AttrType.shengLingYinjiAllPer:case AttrType.atShenYouSkillTotalPer:case AttrType.atShenYouShieldRecoverPer:case AttrType.atShenYouShieldReducePer:case AttrType.atShenYouShieldTagDmgPer:case AttrType.atShenYouShieldTagCD:var i=t.value/100;e=i>Math.floor(i)?i.toFixed(1)+"%":i+"%";break;case AttrType.atMonRecoverPer:e="生命值 / "+Math.floor(1e4/t.value).toString();break;case AttrType.atAtkLvl:case AttrType.atDefLvl:e=" 等级 / "+Math.floor(1e4/t.value).toString();break;case AttrType.Unknown:e="???";break;default:e=t.value.toString()}return e},e.getAttrName=function(t,e){void 0===e&&(e=!0);var i=Lang.common_attrName[t],n=[[],[],["    "],[" "," "]],a="";if(e&&i.length<4)for(var o=0;o<i.length;o++){var s=i[o],r="",u=n[i.length];u.length>=o&&u[o]&&(r=u[o]),a=a+s+r}else a=i;return a},e.getAttrDatas=function(t,i,n){for(var a=[],o=t.length,s=0;o>s;s++){var r=t[s]?t[s]:new e,u=i[s]?i[s]:new e,h=new ComAttrData(r,u,n);a.push(h)}return a},e}(TypeValue);__reflect(AttrData.prototype,"AttrData");var AttrType;!function(t){t[t.atHp=0]="atHp",t[t.atHpMax=1]="atHpMax",t[t.atAtkMin=2]="atAtkMin",t[t.atAtkMax=3]="atAtkMax",t[t.atDef=4]="atDef",t[t.atAtkSuc=5]="atAtkSuc",t[t.atDefSuc=6]="atDefSuc",t[t.atMvSpeed=7]="atMvSpeed",t[t.atAtkSpeed=8]="atAtkSpeed",t[t.atZYYJ=9]="atZYYJ",t[t.atHXYJ=10]="atHXYJ",t[t.atZMYJ=11]="atZMYJ",t[t.atWSYJ=12]="atWSYJ",t[t.atPower=13]="atPower",t[t.atAgile=14]="atAgile",t[t.atStrength=15]="atStrength",t[t.atIntellect=16]="atIntellect",t[t.atHpPer=17]="atHpPer",t[t.atAtkPer=18]="atAtkPer",t[t.atDefPer=19]="atDefPer",t[t.atAtkSucPer=20]="atAtkSucPer",t[t.atDefSucPer=21]="atDefSucPer",t[t.atDamagePer=22]="atDamagePer",t[t.atReductionPer=23]="atReductionPer",t[t.atReflex=24]="atReflex",t[t.atDropPer=25]="atDropPer",t[t.atAtkExtra=26]="atAtkExtra",t[t.atReduceAtk=27]="atReduceAtk",t[t.atMonRecover=28]="atMonRecover",t[t.atMonRecoverPer=29]="atMonRecoverPer",t[t.atAtkLvl=30]="atAtkLvl",t[t.atDefLvl=31]="atDefLvl",t[t.Atk=32]="Atk",t[t.expPer=33]="expPer",t[t.atChongsheng=34]="atChongsheng",t[t.atYishang=35]="atYishang",t[t.atPojia=36]="atPojia",t[t.atJiansu=37]="atJiansu",t[t.atZhogndu=38]="atZhogndu",t[t.atTSYJ=39]="atTSYJ",t[t.atSSYJ=40]="atSSYJ",t[t.atdkzy=41]="atdkzy",t[t.atdkhx=42]="atdkhx",t[t.atdkzm=43]="atdkzm",t[t.atdkws=44]="atdkws",t[t.atzysh=45]="atzysh",t[t.athxsh=46]="athxsh",t[t.atzmsh=47]="atzmsh",t[t.atwhsh=48]="atwhsh",t[t.attssh=49]="attssh",t[t.atsssh=50]="atsssh",t[t.fushi=51]="fushi",t[t.zhimin=52]="zhimin",t[t.xixue=53]="xixue",t[t.bingdong=54]="bingdong",t[t.menji=55]="menji",t[t.tesuboss=56]="tesuboss",t[t.smtomonster=57]="smtomonster",t[t.smtoplay=58]="smtoplay",t[t.toplay=59]="toplay",t[t.detoplay=60]="detoplay",t[t.shenmohp=61]="shenmohp",t[t.pofang=62]="pofang",t[t.zmzs=63]="zmzs",t[t.zmjs=64]="zmjs",t[t.shenqiAll=65]="shenqiAll",t[t.wingAll=66]="wingAll",t[t.szAll=67]="szAll",t[t.meilinAll=68]="meilinAll",t[t.damonAll=69]="damonAll",t[t.yongbingAll=70]="yongbingAll",t[t.shenmoAll=71]="shenmoAll",t[t.pofangPer=72]="pofangPer",t[t.zbAtkPer=73]="zbAtkPer",t[t.zbHpPer=74]="zbHpPer",t[t.zbPofangPer=75]="zbPofangPer",t[t.zbDefPer=76]="zbDefPer",t[t.zbZmPer=77]="zbZmPer",t[t.zbTkPer=78]="zbTkPer",t[t.zbAtkSucPer=79]="zbAtkSucPer",t[t.zbDefSucPer=80]="zbDefSucPer",t[t.zjsxzfPer=81]="zjsxzfPer",t[t.footHpPer=82]="footHpPer",t[t.footDefPer=83]="footDefPer",t[t.footDefSucPer=84]="footDefSucPer",t[t.footAllPer=85]="footAllPer",t[t.atShenYouShield=86]="atShenYouShield",t[t.atShenYouShieldMax=87]="atShenYouShieldMax",t[t.atShenYouTotalPer=88]="atShenYouTotalPer",t[t.atShenYouTagAtk=89]="atShenYouTagAtk",t[t.atShenYouShieldResPer=90]="atShenYouShieldResPer",t[t.atShenYouSkillTotalPer=91]="atShenYouSkillTotalPer",t[t.atShenYouShieldReducePer=92]="atShenYouShieldReducePer",t[t.atShenYouShieldRecoverPer=93]="atShenYouShieldRecoverPer",t[t.atShenYouShieldTagNum=94]="atShenYouShieldTagNum",t[t.atShenYouShieldTagCD=95]="atShenYouShieldTagCD",t[t.atShenYouShieldTagDmgPer=96]="atShenYouShieldTagDmgPer",t[t.atShenYouShieldTag=97]="atShenYouShieldTag",t[t.shengLingYinjiAllPer=98]="shengLingYinjiAllPer",t[t.pvpzs=99]="pvpzs",t[t.pvpjs=100]="pvpjs",t[t.atCount=101]="atCount",t[t.Unknown=102]="Unknown"}(AttrType||(AttrType={}));var ActSys=function(t){function e(){var e=t.call(this)||this;return e.activityData={},e.beishu=0,e.btnConfigs=[],e.tipsDatas=[],e.sysId=PackId.Activity,e.reg(1,e.patchLoginAwardData),e.reg(11,e.patchInfoActivityData),e.reg(12,e.doRewardResult),e.reg(14,e.doAutoRewardResult),e.reg(15,e.patchCZCBDabiaoScore),e.reg(16,e.patchCZCBDabiaoItemCount),e.reg(17,e.patchCZCBRank),e.reg(18,e.patchCZCBRankResult),e.reg(19,e.patchFSQGCount),e.reg(20,e.patchQMKGUpdate),e.reg(21,e.patchRechargeRecord),e.reg(22,e.patchGuildZhaoJi),e.reg(23,e.patchLianxuDengluTianshu),e.reg(24,e.patchConsuRecord),e.reg(25,e.patchOnLineTime),e.reg(26,e.patchWabaoInfo),e.reg(27,e.patchWabaoResult),e.reg(30,e.patchQingMingInfo),e.reg(31,e.patchQingMingRank),e.reg(32,e.patchSevenDayMyRank),e.reg(33,e.patchRechargeEveryDay),e.reg(34,e.patchLianxuChongzhi),e.reg(35,e.patchSevenDayRank),e.reg(36,e.patchSevenDayMyRank2),e.reg(38,e.patchBossKillDatas),e.reg(39,e.patchBossKillData),e.reg(40,e.patchMeiRi60),e.reg(41,e.patchXiaoFeiFanLi),e.reg(42,e.patchYBLuckDraw),e.reg(43,e.patchYBLuckDrawLog),e.reg(44,e.patchXSFL),e.reg(45,e.patchXfRankData),e.reg(46,e.patchJifenData),e.reg(50,e.patchRankLuckDraw),e.reg(51,e.patchRankLuckDrawLog),e.reg(52,e.patchRankResult),e.reg(53,e.patchZSDBLuckDraw),e.reg(54,e.patchZSDBLuckDrawLog),e.reg(55,e.patchZSDBPlayRank),e.reg(56,e.patchZSDBServerRank),e.reg(57,e.patchZDDBScore),e.reg(58,e.patchZDDBData),e.reg(59,e.patchCSKChange),e.reg(60,e.patchKFXFRank),e.reg(61,e.patchRankScore),e.reg(62,e.patchZhiShuReward),e.reg(63,e.patchZhiShuTask),e.reg(64,e.patchZhiShuTaskGet),e.reg(65,e.patchZhiShuLottery),e.reg(66,e.patchCJZPInfo),e.reg(67,e.patchCJZPLuckDraw),e.reg(68,e.doCJZPLuckDrawLog),e.reg(69,e.patchCJZPLucky),e.reg(70,e.patchMultipleRecharge),e.reg(71,e.patchXunBaoJiLu),e.reg(72,e.patchXunBaoGetReward),e.reg(81,e.patchQQShRankData),e.reg(82,e.patchQQShSendData),e.reg(83,e.patchQQShLogData),e.reg(84,e.patchQQShSongLiData),e.reg(85,e.patchQQShSendSongLiData),e.reg(86,e.patchQQShScore),e.reg(87,e.patchQQShShopBuy),e.reg(88,e.patchQQShShopData),e.reg(89,e.patchQQShPlayerData),e.createData(ActId.ID_99800,ActType.TYPE_200),e.addLsn(LogicSys.ins().patchAllSysInit,e.openActRankBtn),e.addLsn(JobSys.ins().patchSysOpen,e.openActRankBtn),e}return __extends(e,t),e.ins=function(){return t.getIns.call(this,e)},e.prototype.openActRankBtn=function(){openWin(ActRankBtnPanel),openWin(ActRankBtnPanel2)},e.prototype.patchLoginAwardData=function(t){var e=this.getActDataById(ActId.ID_99800);e.parser(t),RpFun.showLoginAwardRedPoint()},e.prototype.sendGetSevenDayAwards=function(t){var e=this.getBytes(2);e.writeShort(t),this.send(e)},e.prototype.getActDataById=function(t){return this.activityData[t]},e.prototype.getActivityDataByType=function(t,e){var i=this.getActivityDatasByType(t,e);return i[0]||null},e.prototype.getActivityDatasByType=function(t,e,i){void 0===e&&(e=ActSubType.TYPE_1);var n=[];for(var a in this.activityData){var o=this.activityData[a];o&&o.type==t&&o.subType==e&&o.isSeeActivity()&&n.push(o)}return i&&SortUtil.sortOn(n,["id"],[i]),n},e.prototype.patchInfoActivityData=function(t){for(var i=1==t.readByte(),n=t.readShort(),a=0;n>a;a++){var o=t.readInt(),s=t.readInt(),r=t.readInt(),u=Cfg.getConfig(ActivityConfig,o),h=t.readShort(),l=t.readInt(),p=i?this.createData(o,h):this.activityData[o]||this.createData(o,h);if(p)p.startTime=DateUtil.formatMiniDateTime(s),p.jiesuanTime=DateUtil.formatMiniDateTime(r),p.endTime=DateUtil.formatMiniDateTime(r+60*u.time),p.parser(t);else for(var c=0;l>c;c++)t.readByte()}var d=Cfg.getActivityType12ConfigIdByGroup(1),g=e.ins().getActDataByIds(d);this.beishu=g&&g.isOpenActivity()?1:0,this.setBtnConfigs(),this.openFirstActRankTipsWin(),this.openCZCBTipsWin(),RpFun.updateHuoDong(),this.openActRankBtn()},e.prototype.patchActivityIsGetAwards=function(){},e.prototype.patchActivityPanel=function(t,e){return void 0===e&&(e=-1),[t,e]},e.prototype.sendReward=function(t,e,i,n){if(void 0===i&&(i=0),void 0===n&&(n=0),this.getActDataById(t).getActOpenState()==ActOpenState.Jiesuan)showTipsWarn("活动已结算，24点后奖励通过邮件发送");else{var a=this.getBytes(12);a.writeInt(t),a.writeShort(e),a.writeShort(i),a.writeShort(n),this.send(a)}},e.prototype.doRewardResult=function(t){var e=t.readBoolean();if(e){var i=t.readInt(),n=this.getActDataById(i).parserChange(t);this.patchActivityIsGetAwards(),this.patchActivityPanel(i,n),RpFun.showActSingleRp(i)}},e.prototype.doAutoRewardResult=function(t){var e=t.readInt(),i=t.readInt(),n=this.getActDataById(e);n&&(n.record=i),this.patchActivityIsGetAwards(),RpFun.showActSingleRp(e)},e.prototype.patchCZCBDabiaoScore=function(t){this.doCommonData(t,15)},e.prototype.patchCZCBDabiaoItemCount=function(t){this.doCommonData(t,16)},e.prototype.sendCZCBRank=function(t){var e=this.getBytes(17);e.writeInt(t),this.send(e)},e.prototype.patchCZCBRank=function(t){var e=t.readInt(),i=this.getActDataById(e);i||(i=this.createData(e,ActType.TYPE_34)),i.parserRankData(t),this.openCZCBTipsWin2(i),this.openActRankBtn()},e.prototype.patchCZCBRankResult=function(t){for(var e=t.readInt(),i=t.readByte(),n=new ActDataResult6_1(Lang.act_str109),a=[],o=0;i>o;o++){var s=new RankData;s.rank=o+1,s.userId=t.readInt(),s.playerName=t.readString(),a.push(s),Actor.ins().actorID==s.userId&&(n.myRank=s.rank)}n.actId=e,n.time=DateUtil.formatMiniDateTime(t.readInt()),n.ranks=a,openWin(Act6ResultWin,n)},e.prototype.sendFSQGCount=function(t){var e=this.getBytes(19);e.writeInt(t),this.send(e)},e.prototype.patchFSQGCount=function(t){var e=t.readInt(),i=this.getActDataById(e);i&&i.parserChangeQuanFuCount(t)},e.prototype.patchQMKGUpdate=function(t){var e=t.readInt(),i=t.readDouble(),n=this.getActDataById(e);n&&(n.commonData=i),RpFun.showActSingleRp(e),RpFun.showActRp(303)},e.prototype.patchRechargeRecord=function(t){this.doCommonData(t,21)},e.prototype.patchGuildZhaoJi=function(t){var e=t.readInt(),i=this.getActDataById(e);i||(i=this.createData(e,ActType.TYPE_3)),i.updateParser(t),this.patchActivityIsGetAwards(),RpFun.showActSingleRp(e)},e.prototype.patchRechargeDay=function(t){this.doCommonData(t,22)},e.prototype.patchLianxuDengluTianshu=function(t){this.doCommonData(t,23)},e.prototype.patchConsuRecord=function(t){this.doCommonData(t,24)},e.prototype.patchOnLineTime=function(t){this.doCommonData(t,25)},e.prototype.patchWabaoInfo=function(t){var e=t.readInt(),i=t.readInt(),n=(t.readInt(),this.getActDataById(e));n.commonData=i},e.prototype.sendWabaoResult=function(t){var e=this.getBytes(27);e.writeInt(t),this.send(e)},e.prototype.patchWabaoResult=function(t){var e=t.readInt(),i=t.readInt(),n=(t.readInt(),t.readInt(),this.getActDataById(e));n&&(n.commonData=i)},e.prototype.sendQingMingHun=function(t){var e=this.getBytes(29);e.writeInt(t),this.send(e)},e.prototype.patchQingMingInfo=function(t){var e=t.readInt(),i=t.readInt(),n=t.readInt(),a=this.getActDataById(e);switch(i){case 1:a.geRenValue=n;break;case 2:a.quanFuValue=n;break;case 3:a.hunValue=n}return RpFun.showActSingleRp(e),a.isMax()&&RpFun.showFenJieRedPoint(PCode.UPD),[i,n]},e.prototype.sendQingMingRank=function(t){var e=this.getBytes(31);e.writeInt(t),this.send(e)},e.prototype.patchQingMingRank=function(t){var e=t.readInt(),i=this.getActDataById(e);i.parserRankData(t),i.isMax()&&RpFun.showFenJieRedPoint(PCode.UPD)},e.prototype.patchSevenDayMyRank=function(t){var e=t.readInt(),i=t.readInt(),n=t.readDouble(),a=this.getActDataById(e);a||(a=this.createData(e,ActType.TYPE_4)),a.myRank=i,a.dabiao=n},e.prototype.patchRechargeEveryDay=function(t){this.doCommonData(t,33)},e.prototype.patchLianxuChongzhi=function(t){},e.prototype.sendSevenDayRank=function(t){var e=this.getBytes(35);e.writeShort(t),this.send(e)},e.prototype.patchSevenDayRank=function(t){var e=new RankTypeData;return e.parser(t),e},e.prototype.sendSevenDayMyRank2=function(t){var e=this.getBytes(36);e.writeInt(t),this.send(e)},e.prototype.patchSevenDayMyRank2=function(t){var e=t.readInt(),i=this.getActDataById(e);i||(i=this.createData(e,ActType.TYPE_4)),i.parserRankData(t),this.openActRankTipsWin2(i)},e.prototype.doCommonData=function(t,e){var i=t.readInt(),n=t.readInt(),a=this.getActDataById(i);a&&(a.commonData=n),RpFun.showActSingleRp(i)},e.prototype.sendLianxuReward=function(t){var e=this.getBytes(13);e.writeInt(t),this.send(e)},e.prototype.sendDabiaoInfo=function(t){var e=this.getBytes(3);e.writeInt(t),this.send(e)},e.prototype.sendGetDabiaoReward=function(t){var e=this.getBytes(4);e.writeInt(t),this.send(e)},e.prototype.patchIsGetAwards=function(t){t.readBoolean()},e.prototype.getBtnConfigs=function(t){var e=this.btnConfigs[t];return e||[]},e.prototype.setBtnConfigs=function(){for(var t=0;t<ActOnPlace.max;t++){var e=this.btnConfigs[t]=[];for(var i in this.activityData)if(this.isConfigActivity(i)&&this.activityData[i].isSeeActivity()){var n=Cfg.getConfig(ActivityBtnConfig,+i);urlParam.isShenhe&&!isNaN(n.isShenHe)&&!n.isShenHe||n.onPlace!=t||e.push(n)}SortUtil.sortOn(e,["order"],[SortType.up])}},e.prototype.isConfigActivity=function(t){return t<ActId.ID_90000},e.prototype.isShowActivityRedPoint=function(t){var e=Cfg.getConfigs(ActivityBtnConfig,CondType.NONE);for(var i in e){var n=e[i];if(n.onPlace==t){var a=this.checkAcCanGet(n.id);if(a)return!0}}return!1},e.prototype.checkAcCanGet=function(t){var e=this.getActDataById(t);return e&&e.isOpenActivity()&&e.canReward()?!0:!1},e.prototype.sendRankLuckDraw=function(t,e){var i=this.getBytes(50);i.writeInt(t),i.writeByte(e),this.send(i)},e.prototype.patchRankLuckDraw=function(t){var e=t.readInt(),i=this.getActDataById(e);i.parserLuckDraw(t)},e.prototype.sendRankLuckDrawLog=function(t,e){var i=this.getBytes(51);i.writeInt(t),i.writeByte(e),this.send(i)},e.prototype.patchRankLuckDrawLog=function(t){var e=t.readInt(),i=this.getActDataById(e);i.parserLog(t)},e.prototype.patchRankResult=function(t){for(var e=t.readInt(),i=t.readByte(),n=new ActDataResult6_1,a=[],o=0;i>o;o++){var s=new RankData;s.rank=o+1,s.userId=t.readInt(),s.playerName=t.readString(),a.push(s),Actor.ins().actorID==s.userId&&(n.myRank=s.rank)}n.actId=e,n.time=DateUtil.formatMiniDateTime(t.readInt()),n.ranks=a,openWin(Act6ResultWin,n)},e.prototype.getEveryDayPrice=function(){var t=0,e=this.getActDataById(ActId.ID_111);if(e.isSeeActivity())t=e.dabiao;else{var i=this.getActDataById(ActId.ID_112);t=i.dabiao}return 0>=t&&(t=0),t},e.prototype.sendBossKillData=function(t){var e=this.getBytes(38);e.writeShort(t),this.send(e)},e.prototype.patchBossKillDatas=function(t){var e=t.readShort(),i=this.getActDataById(e);i?i.parserData(t):console.log("71-38 活动id:"+e+"数据不存在"),this.patchActivityIsGetAwards(),RpFun.showActSingleRp(e)},e.prototype.sendGetBossKillAward=function(t,e,i){var n=this.getBytes(39);n.writeShort(t),n.writeShort(e),n.writeByte(i),this.send(n)},e.prototype.patchBossKillData=function(t){var e=t.readShort(),i=t.readShort(),n=this.getActDataById(e),a=n.getBossDataByBossIndex(i);return a&&(a.killerName=t.readString(),a.stateQFSS=t.readByte(),a.stateGRSS=t.readByte()),this.patchActivityIsGetAwards(),RpFun.showActSingleRp(e),a},e.prototype.patchMeiRi60=function(t){var i=t.readInt(),n=this.getActDataById(i);if(n){var a=e.ins().getActDataById(n.actId);a.parser23(t),RpFun.showActSingleRp(i),this.patchActivityIsGetAwards()}},e.prototype.patchXiaoFeiFanLi=function(t){var e=t.readShort(),i=this.getActDataById(e);i||(i=this.createData(e,ActType.TYPE_24)),i.chong=t.readInt(),i.xiao=t.readInt(),RpFun.showActRp(45),RpFun.showActRp(276),RpFun.showActRp(268),this.patchActivityIsGetAwards()},e.prototype.sendYBLuckDraw=function(){this.sendBase(42)},e.prototype.patchYBLuckDraw=function(t){var e=t.readInt(),i=this.getActDataById(e);i||(i=this.createData(e,ActType.TYPE_25)),i.parserLuckDraw(t),i.rewarIndex>0,RpFun.showActRp(45),RpFun.showActRp(266),this.patchActivityIsGetAwards()},e.prototype.sendYBLuckDrawLog=function(){this.sendBase(43)},e.prototype.patchYBLuckDrawLog=function(t){for(var e=t.readShort(),i=[],n=0;e>n;n++){var a=new ActData25Log;a.parser(t),i.push(a)}return[i]},e.prototype.patchXSFL=function(t){var e=t.readInt(),i=this.getActDataById(e);i&&(i.parser(t),this.patchActivityIsGetAwards(),RpFun.showActSingleRp(e))},e.prototype.sendXfRankData=function(t){var e=this.getBytes(45);e.writeInt(t),this.send(e)},e.prototype.patchXfRankData=function(t){var e=this.getActDataById(ActId.ID_256);e||(e=this.createData(ActId.ID_256,ActType.TYPE_8)),e.parserRankData(t)},e.prototype.sendJifenData=function(t,e){var i=this.getBytes(46);i.writeInt(t),i.writeByte(e),this.send(i)},e.prototype.patchJifenData=function(t){this.doCommonData(t,46)},e.prototype.sendRankAppearance=function(t){var e=this.getBytes(47);e.writeInt(t),this.send(e)},e.prototype.patchRankAppearance=function(t){var e=t.readInt(),i=this.getActDataById(e);i.parserRankAppearance(t)},e.prototype.openFirstActRankTipsWin=function(){var t=this.getActivityDataByType(ActType.TYPE_4,ActSubType.TYPE_1);if(t&&t.isOpenActivity()){var e=!1;if(isShowWin(MainWin)){var i=getWin(MainWin);e=i.com_ext.getIsShowBtn()}e&&GFunc.isSysOpen(276)&&openWin(ActRankTipsWin1)}},e.prototype.openCZCBTipsWin=function(){var t=this.getActivityDataByType(ActType.TYPE_34,ActSubType.TYPE_1);if(t&&t.isOpenActivity()){var e=!1;if(isShowWin(MainWin)){var i=getWin(MainWin);e=i.com_ext.getIsShowBtn()}e&&GFunc.isSysOpen(308)&&openWin(ActCZCBTipsWin1)}},e.prototype.doTimerOpenActRankTipsWin=function(t){if(t&&t.isOpenActivity()&&t.myRank>1&&GFunc.isSysOpen(276)){var e=!1,i=getWin(MainWin);i&&(e=i.com_ext.getIsShowBtn());var n=Cfg.getConfig(ActivityBtnConfig,t.actId),a=Cfg.getConfig(ActivityCommonConfig);e&&t.lastDabiao>0?(e=t.dabiao-t.lastDabiao>=a.actRankPowers[n.showday-1],e&&(t.lastDabiao=t.dabiao)):(e=!1,t.lastDabiao=t.dabiao),e&&this.openActRankTipsWin(t),Timer.ins().remove(this.openActRankTipsWin,this);var o=1e3*a.actRankTipsCD;Timer.ins()["do"](o,o,0,this.openActRankTipsWin,this,TimerType.LAST,t)}else Timer.ins().remove(this.openActRankTipsWin,this)},e.prototype.openActRankTipsWin=function(t){var e=!1,i=getWin(MainWin);i&&(e=i.com_ext.getIsShowBtn()),e=e&&(GFunc.isInCity()||GFunc.isInGuaJiFb()),e&&t&&t.isOpenActivity()&&t.myRank>1&&GFunc.isSysOpen(276)&&openWin(ActRankTipsWin2,t),this.doTimerOpenActRankTipsWin(t)},e.prototype.openActRankTipsWin2=function(t){if(ActRankTipsWin2.isOpen){var e=!1;e=t.lastDabiao>0&&t.lastDabiao<t.dabiao,t.lastDabiao=t.dabiao,e=e&&GFunc.isBenFu(),e&&t&&t.isOpenActivity()&&(t.myRank>1||0==t.myRank)&&GFunc.isSysOpen(276)&&openWin(ActRankTipsWin2,t)}},e.prototype.openCZCBTipsWin2=function(t){if(ActCZCBTipsWin2.isOpen){var e=!1;e=t.lastDabiao>0&&t.lastDabiao<t.dabiao,t.lastDabiao=t.dabiao,e=e&&GFunc.isBenFu(),e&&t&&t.isOpenActivity()&&(t.myRank>1||0==t.myRank)&&GFunc.isSysOpen(308)&&openWin(ActCZCBTipsWin2,t)}},e.prototype.sendZSDBLuckDraw=function(t,e){var i=this.getBytes(53);i.writeInt(t),i.writeByte(e),this.send(i)},e.prototype.patchZSDBLuckDraw=function(t){var e=t.readInt(),i=this.getActDataById(e);i&&i.parserLuckDraw(t)},e.prototype.sendZSDBLuckDrawLog=function(t,e){var i=this.getBytes(54);i.writeInt(t),i.writeByte(e),this.send(i)},e.prototype.patchZSDBLuckDrawLog=function(t){var e=t.readInt(),i=this.getActDataById(e),n=t.readByte(),a=t.readByte();if(i){var o=[],s=0;o=1==n?i.mylogs:i.worldLogs,s=o.length;for(var r=0;a>r;r++)if(r>s-1){var u=new ActDataLog6_1(t.readString(),t.readInt(),t.readInt());o.push(u),2==n&&this.patchZSDBJiLuUpdate(u)}}},e.prototype.patchZSDBJiLuUpdate=function(t){return t},e.prototype.sendZSDBPlayRank=function(t){var e=this.getBytes(55);e.writeInt(t),this.send(e)},e.prototype.patchZSDBPlayRank=function(t){var e=t.readInt(),i=this.getActDataById(e);i&&i.parserRankData(t)},e.prototype.sendZSDBServerRank=function(t){var e=this.getBytes(56);e.writeInt(t),this.send(e)},e.prototype.patchZSDBServerRank=function(t){var e=t.readInt(),i=this.getActDataById(e);i&&i.parserRankData(t)},e.prototype.patchZDDBScore=function(t){var e=t.readInt(),i=this.getActDataById(e);i&&i.parserScore(t),RpFun.showActRp(45),RpFun.showActRp(266),this.patchActivityIsGetAwards()},e.prototype.sendZDDBData=function(t){var e=this.getBytes(58);e.writeInt(t),this.send(e)},e.prototype.patchZDDBData=function(t){var e=t.readInt(),i=this.getActDataById(e);i&&i.parser(t),RpFun.showActRp(45),RpFun.showActRp(266),this.patchActivityIsGetAwards()},e.prototype.patchCSKChange=function(t){var e=t.readInt(),i=this.getActDataById(e);i&&i.parser(t),RpFun.showActRp(306),this.patchActivityIsGetAwards()},e.prototype.sendKFXFRank=function(t){var e=this.getBytes(60);e.writeInt(t),this.send(e)},e.prototype.patchKFXFRank=function(t){var e=t.readInt(),i=this.getActDataById(e);i&&i.parserRank(t)},e.prototype.patchRankScore=function(t){var e=t.readInt(),i=this.getActDataById(e);i&&i.parserScore(t),RpFun.showActRp(276),this.patchActivityIsGetAwards()},e.prototype.patchZhiShuReward=function(t){var e=t.readInt(),i=this.getActDataById(e);i?i.parserRewardLog(t):console.log("活动:"+e+" 不存在"),RpFun.showActSingleRp(e)},e.prototype.patchZhiShuTask=function(t){var e=t.readInt(),i=this.getActDataById(e);i?i.parserTask(t):console.log("71-63 活动不存在:"+e),RpFun.showActSingleRp(e)},e.prototype.sendZhiShuTaskGet=function(t,e){var i=this.getBytes(64);i.writeInt(t),i.writeByte(e),this.send(i)},e.prototype.patchZhiShuTaskGet=function(t){var e=t.readInt(),i=this.getActDataById(e);i?i.parserTaskUpdate(t):console.log("活动:"+e+" 不存在"),RpFun.showActSingleRp(e)},e.prototype.sendZhiShuLottery=function(t){var e=this.getBytes(65);e.writeInt(t),this.send(e)},e.prototype.patchZhiShuLottery=function(t){var e=t.readInt(),i=this.getActDataById(e);i?i.parserLottery(t):console.log("活动:"+e+" 不存在"),RpFun.showActSingleRp(e)},e.prototype.taqingFisrtRechargeRewardState=function(){for(var t=e.ins().getBtnConfigs(ActOnPlace.TaQingActFisrtRecharge),i=0;i<t.length;i++){var n=t[i],a=this.getActDataById(n.id);if(a instanceof ActData23_4)return a.curDayRewardState()}return 0},e.prototype.zqFisrtRechargeRewardState=function(){for(var t=e.ins().getBtnConfigs(ActOnPlace.zqFisrtRecharge),i=0;i<t.length;i++){var n=t[i],a=this.getActDataById(n.id);if(a instanceof ActData23_4)return a.curDayRewardState()}return 0},e.prototype.patchCJZPInfo=function(t){var e=t.readInt(),i=this.getActDataById(e);i?i.count=t.readShort():console.log("71-66 活动:"+e+" 不存在"),RpFun.showActSingleRp(e)},e.prototype.sendCJZPLuckDraw=function(t,e){var i=this.getBytes(67);i.writeInt(t),i.writeByte(e),this.send(i)},e.prototype.patchCJZPLuckDraw=function(t){var e=t.readInt(),i=this.getActDataById(e);i?i.parserLuckDraw(t):console.log("71-67 活动:"+e+" 不存在"),RpFun.showActSingleRp(e)},e.prototype.sendCJZPLuckDrawLog=function(t,e){var i=this.getBytes(68);i.writeInt(t),i.writeByte(e),this.send(i)},e.prototype.doCJZPLuckDrawLog=function(t){var e=t.readInt(),i=this.getActDataById(e);if(!i)return void console.log("71-68 活动:"+e+" 不存在");for(var n=t.readByte(),a=2==n?i.logs:i.mylogs,o=t.readByte(),s=[],r=0;o>r;r++){var u=a[r];u||(u=a[r]=new ActDataLog35_1,s.push(u)),u.update(t.readString(),t.readInt(),t.readInt())}2==n?this.patchCJZPLuckDrawLog(s):this.patchCJZPMyLuckDrawLog(),RpFun.showActSingleRp(e)},e.prototype.patchCJZPMyLuckDrawLog=function(){},e.prototype.patchCJZPLuckDrawLog=function(t){return t.length?[t]:null},e.prototype.patchCJZPLucky=function(t){var e=t.readInt(),i=this.getActDataById(e);i?i.parserScore(t):console.log("71-69 活动:"+e+" 不存在"),RpFun.showActSingleRp(e)},e.prototype.patchMultipleRecharge=function(t){var e=t.readInt(),i=this.getActDataById(e);i?i.parserUpdate(t):console.log("活动:"+e+" 不存在"),RpFun.showActSingleRp(e)},e.prototype.patchXunBaoJiLu=function(t){var e=t.readInt(),i=this.getActDataById(e),n=t.readByte(),a=t.readByte(),o=[],s=0;o=0==n?i.mylogs:i.worldLogs,s=o.length;for(var r=0;a>r;r++)if(r>s-1){var u=new ActDataLog17_1(t.readString(),t.readInt(),t.readDouble());o.push(u),1==n&&this.patchXunBaoOtherJiLuUpdate(u)}},e.prototype.sendXunBaoJiLu=function(t,e){var i=this.getBytes(71);i.writeInt(t),i.writeByte(e),this.send(i)},e.prototype.patchXunBaoGetReward=function(t){for(var e=t.readInt(),i=this.getActDataById(e),n=t.readByte(),a=[],o=0;n>o;o++){var s=new ItemDataReward;s.parser4(t),a.push(s)}this.tipsDatas.length=0;for(var r=i.getConfig().tipsitemIds,u=0,h=a;u<h.length;u++){var l=h[u];-1!=r.indexOf(l.id)&&this.tipsDatas.push(GFunc.creatItemDataById(l.id))}if(a.length>1)i&&openWin(Act17RewardListTipsWin,a,i);else{var s=GFunc.creatItemDataByReward(a[0]),p=new eui.Image(ResMgr.getItemIcon(s.cfg.getIcon()));p.x=LayerMgr.Tips.width/2,p.y=LayerMgr.Tips.height/2,GFunc.flyToBag(s.id,p)}this.showJiPingItem()},e.prototype.showJiPingItem=function(){if(this.tipsDatas.length>0){var t=this.tipsDatas[0];openWin(XunBaoJiPingItemTipsWin,t,this.showJiPingItem,this,XunBaoJiPingItemTipsWin.ACT_DW),this.tipsDatas.splice(0,1)}},e.prototype.sendQQShRankData=function(t){var e=this.getBytes(81);e.writeInt(t),this.send(e)},e.prototype.patchQQShRankData=function(t){var e=t.readInt(),i=this.getActDataById(e);
i?i.parserUpdate(t):console.log("71-81 守护送礼--请求送礼排行榜-返回活动 活动ID:"+e+" 未初始化")},e.prototype.patchQQShSendData=function(t){var e=t.readInt(),i=this.getActDataById(e);i?i.parserUpdate(t):console.log("71-82 守护送礼--请求送礼界面-返回 活动ID:"+e+" 未初始化")},e.prototype.sendQQShSendData=function(t){var e=this.getBytes(82);e.writeInt(t),this.send(e)},e.prototype.patchQQShLogData=function(t){var e=t.readInt(),i=this.getActDataById(e);i?i.parserLog(t):console.log("71-83 守护送礼--请求送礼界面-返回 活动ID:"+e+" 未初始化")},e.prototype.sendQQShLogData=function(t,e){var i=this.getBytes(83);i.writeInt(t),i.writeByte(e),this.send(i)},e.prototype.patchQQShSongLiData=function(t){showtipsSuc("赠送成功")},e.prototype.sendQQShSongLiData=function(t,e,i,n,a,o,s,r,u,h,l){var p=this.getBytes(84);p.writeInt(t),p.writeInt(e),p.writeInt(i),p.writeString(n),p.writeDouble(a),p.writeInt(o),p.writeString(s),p.writeByte(r),p.writeByte(u),p.writeByte(h),p.writeInt(l),this.send(p)},e.prototype.patchQQShSendSongLiData=function(t){for(var e=t.readByte(),i=0;e>i;i++){var n=t.readByte();if(1==n){var a=ChatFactory.createData(ChatType.KuaFu,ChatSubType.ACT37_QQSH);a.parserMessage(t),ChatSys.ins().addMsg(a)}else{var o=ChatFactory.createData(ChatType.Guild,ChatSubType.ACT37_QQSH);o.parserMessage(t),ChatSys.ins().addMsg(o)}}},e.prototype.sendQQShSendSongLiData=function(t,e){var i=this.getBytes(85);i.writeInt(t),i.writeByte(e),this.send(i)},e.prototype.patchQQShScore=function(t){var e=t.readInt(),i=this.getActDataById(e);if(i){var n=t.readInt();i.commonData=n,RpFun.showActSingleRp(e)}else console.log("71-87 活动ID:"+e+" 未初始化")},e.prototype.sendQQShShopBuy=function(t,e,i){var n=this.getBytes(87);n.writeInt(t),n.writeByte(e),n.writeShort(i),this.send(n)},e.prototype.patchQQShShopBuy=function(t){var e=t.readInt(),i=this.getActDataById(e);i?i.parserBuyUpdate(t):console.log("71-87 活动ID:"+e+" 未初始化")},e.prototype.patchQQShShopData=function(t){var e=t.readInt(),i=this.getActDataById(e);i?i.parserShop(t):console.log("71-88 活动ID:"+e+" 未初始化")},e.prototype.patchQQShPlayerData=function(t){var e=t.readInt(),i=this.getActDataById(e);if(i){var n=new ActData37_1Player(i.actId);n.serverid=t.readInt(),n.actorid=t.readInt(),n.name=t.readString(),n.power=t.readDouble(),n.zsLevel=t.readInt(),n.guildName=t.readString(),n.job=t.readByte(),openWin(Act37_1ZSLWWin,i,n)}},e.prototype.sendQQShPlayerData=function(t,e){var i=this.getBytes(89);i.writeInt(t),i.writeInt(e),this.send(i)},e.prototype.patchXunBaoOtherJiLuUpdate=function(t){return t},e.prototype.createData=function(t,e){var i=1,n=ActOnPlace.huodong;if(e<ActType.TYPE_200){var a=Cfg.getConfig(ActivityBtnConfig,t);i=a.subType,n=a.onPlace}var o,s=getDefinitionByName("ActData"+e+"_"+i);return s&&(o=new s,o.actId=t,o.type=e,o.subType=i,o.onPlace=n,this.activityData[t]=o),o},e.prototype.getActDataByIds=function(t){for(var e=0;e<t.length;e++){var i=t[e],n=this.activityData[i];if(n&&n.isOpenActivity())return n}return null},e.prototype.createPanelNames=function(t){for(var e=[],i=0,n=t;i<n.length;i++){var a=n[i],o=this.createPanelName(a);o&&e.push(o)}return e},e.prototype.createPanelName=function(t){return getDefinitionByName("ActPanel"+t.type+"_"+t.subType)},__decorate([post()],e.prototype,"doRewardResult",null),e}(BaseSys);__reflect(ActSys.prototype,"ActSys");var System;!function(t){t.actSys=ActSys.ins.bind(ActSys)}(System||(System={})),window.ActSys=ActSys;var CurrencyData=function(t){function e(e,i){return void 0===e&&(e=CurType.gold),void 0===i&&(i=0),t.call(this,e,i)||this}return __extends(e,t),e}(TypeValue);__reflect(CurrencyData.prototype,"CurrencyData");var ActYiYuanHaoLiWin=function(t){function e(){var e=t.call(this)||this;return e.onPlace=ActOnPlace.YiYuanHaoLi,e}return __extends(e,t),e.getTitle=function(){return"btz_zycs_hddt"},e}(ActBaseWin);__reflect(ActYiYuanHaoLiWin.prototype,"ActYiYuanHaoLiWin"),window.ActYiYuanHaoLiWin=ActYiYuanHaoLiWin;var EquipsData=function(t){function e(){var e=t.call(this)||this;return e.purifgLevel=0,e.strengthen=0,e.addlv=0,e.zyFuJia=0,e._epicAttr=[],e}return __extends(e,t),e.prototype.iniData=function(t){this.equipPos=t},Object.defineProperty(e.prototype,"epicAttr",{get:function(){if(0==this._epicAttr.length)for(var t=Cfg.getConfig(CulturePosConfig,this.equipPos),e=0;e<t.attr.length;e++){var i=t.attr[e],n=new AttrData;n.type=i,this._epicAttr.push(n)}return this._epicAttr},enumerable:!0,configurable:!0}),e.prototype.parserEquip=function(t){var e=t.readInt();this.updateEquipId(e)},e.prototype.updateEquipId=function(t){this.id=t,this.id=0!=this.id?this.id:-1,this._power=-1},e.prototype.getGemData=function(){return ForgeSys.ins().gemEquipData.getGemPosDataByPos(this.equipPos)},Object.defineProperty(e.prototype,"totalPower",{get:function(){var t=this.power;if(this.strengthen>0){var e=Cfg.getConfig(EnhanceAttrConfig,this.cfg.subType,this.strengthen);t+=GFunc.getPower(e.attr)}if(this.addlv>0){var i=Cfg.getConfig(AppendAttrConfig,this.cfg.subType,this.addlv);t+=GFunc.getPower(i.attr)}return t+=GFunc.getPower(this.epicAttr),t+=this.getGemData().getGemSumPower()},enumerable:!0,configurable:!0}),e.prototype.setStrengthenLevel=function(t){this.strengthen=t},e.prototype.setAddLevel=function(t){this.addlv=t},e.prototype.setJingLian=function(t){this.purifgLevel=t},e.prototype.setePicAttr=function(t,e){var i=this.getPicAttr(t);i.value=e},e.prototype.getPicAttr=function(t){for(var e,i=0;i<this.epicAttr.length;i++){var n=this.epicAttr[i];if(n.type==t){e=n;break}}return e},e.prototype.clone=function(){var t=new e;return t._itemConfig=this._itemConfig,t._power=-1,t.id=this.id,t.attZY=this.attZY,t.attXY=this.attXY,t.count=this.id,t._epicAttr=this._epicAttr,t.equipPos=this.equipPos,t.handle=this.handle,t.purifgLevel=this.purifgLevel,t.strengthen=this.strengthen,t.zyFuJia=this.zyFuJia,t},e}(ItemData);__reflect(EquipsData.prototype,"EquipsData");var ActItem1_16=function(t){function e(){return t.call(this)||this}return __extends(e,t),e.prototype.getDec=function(t){return Lang.act_str94.replace("$str$",addColor(""+t.dabiao,5767068))},e}(ActItem1_1);__reflect(ActItem1_16.prototype,"ActItem1_16"),window.ActItem1_16=ActItem1_16;var ActItem1_2=function(t){function e(){var e=t.call(this)||this;return e.mcBtnSend=new MC,e.skinName="ActItem1_2EUI",e.btnSend.redPoint.visible=!0,e.list.itemRenderer=ItemBaseRewardActivity,e.mcBtnSend.x=e.btnSend.width/2,e.mcBtnSend.y=e.btnSend.height/2,e.btnSend.addChild(e.mcBtnSend),e.addClickE(e.btnSend,e.onClick),e}return __extends(e,t),e.prototype.onClick=function(t){var e=this.data.config;ActSys.ins().sendReward(e.id,e.index)},e.prototype.dataChanged=function(){if(this.data instanceof ActDataItem1_2){var t=this.data.config,e=Lang.act_str85.replace("$str$",addColor(""+this.data.dabiao+Lang.common_zs,65424));this.lbDec.textFlow=addColorTF(e),this.lbValue.textFlow=addColorTF(this.data.yxf+"/"+this.data.dabiao,this.data.yxf<this.data.dabiao?2508416:46913),this.list.dataProvider=new eui.ArrayCollection(t.rewards),this.btnSend.visible=!1,this.imgYlq.visible=!1,this.data.status==ActRewardState.CanGet?(this.btnSend.visible=!0,this.mcBtnSend.playFile(ResMgr.getEffName("public_zycs_button01"),-1)):this.data.status==ActRewardState.Geted?(this.imgYlq.visible=!0,this.mcBtnSend.stop()):this.data.status==ActRewardState.NotReached&&this.mcBtnSend.stop()}},e}(BaseItemRender);__reflect(ActItem1_2.prototype,"ActItem1_2"),window.ActItem1_2=ActItem1_2;var ActItem1_20=function(t){function e(){var e=t.call(this)||this;return e.mcBtnSend=new MC,e.skinName="ActItem1_20EUI",e.btnSend.redPoint.visible=!0,e.list.itemRenderer=ItemBaseRewardActivity,e.mcBtnSend.x=e.btnSend.width/2,e.mcBtnSend.y=e.btnSend.height/2,e.btnSend.addChild(e.mcBtnSend),e.addClickE(e,e.onClick),e}return __extends(e,t),e.prototype.onClick=function(t){var e=this.data.config;switch(t.target){case this.btnSend:ActSys.ins().sendReward(e.id,e.index);break;case this.btnLink:GFunc.createTaskNavData(e.controlTarget)["goto"]()}},e.prototype.dataChanged=function(){if(this.data instanceof ActDataItem1_20){var t=this.data.config,e=Lang.act_str106.replace("$count$",addColor(t.condition.toString(),5767068));e=e.replace("$name$",addColor(Cfg.getItemCfg(t.needitem).getName(),5767068)),this.lbDec.textFlow=addColorTF(e),this.lbValue.textFlow=addColorTF(this.data.yxf+"/"+this.data.dabiao,this.data.yxf<this.data.dabiao?15733780:5767068),this.list.dataProvider=new eui.ArrayCollection(t.rewards),this.btnSend.visible=!1,this.btnLink.visible=!1,this.imgYlq.visible=!1,this.data.status==ActRewardState.CanGet?(this.btnSend.visible=!0,this.mcBtnSend.playFile(ResMgr.getEffName("public_zycs_button01"),-1)):this.data.status==ActRewardState.Geted?(this.imgYlq.visible=!0,this.mcBtnSend.stop()):this.data.status==ActRewardState.NotReached&&(this.mcBtnSend.stop(),this.btnLink.visible=!0)}},e}(BaseItemRender);__reflect(ActItem1_20.prototype,"ActItem1_20"),window.ActItem1_20=ActItem1_20;var ActItem1_21=function(t){function e(){return t.call(this)||this}return __extends(e,t),e.prototype.dataChanged=function(){if(this.data instanceof ActDataItem1Dabiao){var t=this.data.config,e=Lang.act_str84.replace("$str$",addColor(""+this.data.dabiao/100+Lang.common_yuan,5767068));this.lbDec.textFlow=addColorTF(e),this.lbValue.textFlow=addColorTF((this.data.yidabiao/100).toFixed(0)+"/"+(this.data.dabiao/100).toFixed(),this.data.yidabiao<this.data.dabiao?13967392:5767068),this.list.dataProvider=new eui.ArrayCollection(t.rewards),this.btnLink.visible=!1,this.btnSend.visible=!1,this.imgYlq.visible=!1,this.data.status==ActRewardState.CanGet?(this.btnSend.visible=!0,this.mcBtnSend.playFile(ResMgr.getEffName("public_zycs_button01"),-1)):this.data.status==ActRewardState.Geted?(this.imgYlq.visible=!0,this.mcBtnSend.stop()):this.data.status==ActRewardState.NotReached&&(this.btnLink.visible=!0,this.mcBtnSend.stop())}},e}(ActItem1_7);__reflect(ActItem1_21.prototype,"ActItem1_21"),window.ActItem1_21=ActItem1_21;var ActItem1_22=function(t){function e(){return t.call(this)||this}return __extends(e,t),e.prototype.getDec=function(t){return"累积击杀"+addColor(""+GFunc.overLength(t.dabiao),5767068)+"个BOSS,可领取奖励!"},e}(ActItem1_1);__reflect(ActItem1_22.prototype,"ActItem1_22"),window.ActItem1_22=ActItem1_22;var ActItem1_23=function(t){function e(){return t.call(this)||this}return __extends(e,t),e.prototype.getDec=function(t){return"通过符文秘境第"+addColor(""+GFunc.overLength(t.dabiao),5767068)+"层,可领取奖励!"},e}(ActItem1_1);__reflect(ActItem1_23.prototype,"ActItem1_23"),window.ActItem1_23=ActItem1_23;var ActItem1_24=function(t){function e(){return t.call(this)||this}return __extends(e,t),e.prototype.getDec=function(t){return"幽冥地宫累计经验上限达到"+addColor(""+GFunc.overLength(t.dabiao),5767068)+",可领取奖励!"},e}(ActItem1_1);__reflect(ActItem1_24.prototype,"ActItem1_24"),window.ActItem1_24=ActItem1_24;var ActItem1_25=function(t){function e(){return t.call(this)||this}return __extends(e,t),e.prototype.getDec=function(t){return"挑战灵气副本获得灵气"+addColor(""+GFunc.overLength(t.dabiao),5767068)+",可领取奖励!"},e}(ActItem1_1);__reflect(ActItem1_25.prototype,"ActItem1_25"),window.ActItem1_25=ActItem1_25;var ActItem1_26=function(t){function e(){return t.call(this)||this}return __extends(e,t),e.prototype.getDec=function(t){return"挑战元宝副本获得元宝"+addColor(""+GFunc.overLength(t.dabiao),5767068)+",可领取奖励!"},e}(ActItem1_1);__reflect(ActItem1_26.prototype,"ActItem1_26"),window.ActItem1_26=ActItem1_26;var ItemConsumeData=function(){function t(){}return t}();__reflect(ItemConsumeData.prototype,"ItemConsumeData");var ActItem1_29=function(t){function e(){return t.call(this)||this}return __extends(e,t),e.prototype.dataChanged=function(){if(this.data instanceof ActDataItem1Dabiao){var t=this.data.config,e=Lang.act_str116.replace("$str$",addColor(""+this.data.dabiao+Lang.act_str111,5767068));this.lbDec.textFlow=addColorTF(e),this.lbValue.textFlow=addColorTF(this.data.yidabiao+"/"+this.data.dabiao,this.data.yidabiao<this.data.dabiao?16712991:2199040),this.list.dataProvider=new eui.ArrayCollection(t.rewards),this.btnLink.visible=!1,this.btnSend.visible=!1,this.imgYlq.visible=!1,this.data.status==ActRewardState.CanGet?(this.btnSend.visible=!0,this.mcBtnSend.playFile(getEffName("public_zycs_button01"),-1)):this.data.status==ActRewardState.Geted?(this.imgYlq.visible=!0,this.mcBtnSend.stop()):this.data.status==ActRewardState.NotReached&&(this.btnLink.visible=!0,this.mcBtnSend.stop())}},e}(ActItem1_28);__reflect(ActItem1_29.prototype,"ActItem1_29"),window.ActItem1_29=ActItem1_29;var ActItem1_3=function(t){function e(){return t.call(this)||this}return __extends(e,t),e.prototype.getDec=function(t){return Lang.act_str93.replace("$str$",addColor(""+GFunc.overLength(t.dabiao,t.dabiao<1e8?1:2),65424))},e.prototype.getValue=function(t){var e=GFunc.overLength(t.yidabiao,t.yidabiao<1e8?1:2)+"/"+GFunc.overLength(t.dabiao,t.dabiao<1e8?1:2);return addColor(e,t.yidabiao<t.dabiao?2508416:65424)},e}(ActItem1_1);__reflect(ActItem1_3.prototype,"ActItem1_3"),window.ActItem1_3=ActItem1_3;var ActItem1_4=function(t){function e(){return t.call(this)||this}return __extends(e,t),e.prototype.dataChanged=function(){t.prototype.dataChanged.call(this);this.data},e}(ActItem1_1);__reflect(ActItem1_4.prototype,"ActItem1_4"),window.ActItem1_4=ActItem1_4;var ActItem1_5=function(t){function e(){return t.call(this)||this}return __extends(e,t),e.prototype.dataChanged=function(){t.prototype.dataChanged.call(this);var e=this.data;e.config},e.prototype.getDec=function(t){return"累计莽荒巨塔达到"+addColor(""+addColor(""+t.config.condition,5767068),5767068)+"层,可领取奖励!"},e}(ActItem1_1);__reflect(ActItem1_5.prototype,"ActItem1_5"),window.ActItem1_5=ActItem1_5;var ActItem1_6=function(t){function e(){var e=t.call(this)||this;return e.mcBtnSend=new MC,e.skinName="ActItem1_6EUI",e.btnSend.redPoint.visible=!0,e.list.itemRenderer=ItemBaseRewardActivity,e.mcBtnSend.x=e.btnSend.width/2,e.mcBtnSend.y=e.btnSend.height/2,e.btnSend.addChildAt(e.mcBtnSend,e.btnSend.numChildren-1),e.addClickE(e.btnSend,e.btnClick),e}return __extends(e,t),e.prototype.btnClick=function(){var t=this.data,e=t.config;ActSys.ins().sendReward(e.id,e.index)},e.prototype.dataChanged=function(){if(t.prototype.dataChanged.call(this),this.data instanceof ActDataItem1Dabiao){var e=this.data.config;this.lbDec.textFlow=addColorTF(this.getDec(this.data)),this.lbValue.textFlow=addColorTF(this.getValue(this.data)),this.list.dataProvider=new eui.ArrayCollection(e.rewards),this.btnSend.visible=!1,this.imgYlq.visible=!1,this.imgWlq.visible=!1,this.data.status==ActRewardState.CanGet?(this.btnSend.visible=!0,this.mcBtnSend.playFile(getEffName("public_zycs_button01"),-1)):this.data.status==ActRewardState.Geted?(this.imgYlq.visible=!0,this.mcBtnSend.stop()):this.data.status==ActRewardState.NotReached&&(this.imgWlq.visible=!0,this.mcBtnSend.stop())}},e.prototype.getValue=function(t){return addColor(GFunc.overLength(t.yidabiao)+"/"+GFunc.overLength(t.dabiao),t.yidabiao<t.dabiao?13486270:5767068)},e.prototype.getDec=function(t){return Lang.act_str162.replace("$day$",""+addColor(""+addColor(""+t.config.condition,5767068),5767068))},e}(BaseItemRender);__reflect(ActItem1_6.prototype,"ActItem1_6"),window.ActItem1_6=ActItem1_6;var MapCells=function(t){function e(){var e=t.call(this)||this;return e.touchEnabled=!1,e}return __extends(e,t),e.prototype.getCell=function(t,e){return this.cells[t]?this.cells[t][e]:void 0},e.prototype.canWalk=function(t,e){return 0>t||t>=this.col||0>e||e>=this.row?!1:this.cells[t][e].walkable},e.prototype.setData=function(t){this.row=t.maxY,this.col=t.maxX,!this.cells&&(this.cells=[]);for(var e,i=0;i<this.col;i++){for(var n=this.cells[i]||(this.cells[i]=[]),a=0;a<this.row;a++)e=n[a]||(n[a]=new MapCell),e.flags=t.grids[i*this.row+a],e.reset();n.length=this.row}this.cells.length=this.col},e.prototype._trace=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];null!=this.debugTrace&&this.debugTrace.apply(null,t)},e}(egret.Sprite);__reflect(MapCells.prototype,"MapCells");var ActItem1_8=function(t){function e(){var e=t.call(this)||this;return e.skinName="ActItem1_8EUI",e.redPoint.visible=!1,e}return __extends(e,t),e.prototype.dataChanged=function(){var t=this.data,e=t.config;this.lbRmb.textFlow=StrUtil.toTF(e.btnDes),this.redPoint.visible=t.status==ActRewardState.CanGet},e}(BaseItemRender);__reflect(ActItem1_8.prototype,"ActItem1_8"),window.ActItem1_8=ActItem1_8;var ActItem10_1=function(t){function e(){var e=t.call(this)||this;return e.mcBtn=new MC,e.skinName="ActItem10_1EUI",e.listAward.itemRenderer=ItemBaseRewardActivity,e.listAward.dataProvider=e.listAwardArr=new eui.ArrayCollection,e.mcBtn.x=e.btnGet.width/2,e.mcBtn.y=e.btnGet.height/2,e.btnGet.addChildAt(e.mcBtn,e.btnGet.numChildren-1),e.addClickE(e.btnGet,e.onClick),e}return __extends(e,t),e.prototype.onClick=function(){var t=this.data;1==this.itemIndex?GFunc.checkSVIP(t.getConfig().needsvip)&&ActSys.ins().sendReward(t.actId,this.itemIndex+1):ActSys.ins().sendReward(t.actId,this.itemIndex+1)},e.prototype.dataChanged=function(){var t=this.data,e=t.getConfig(),i="";0==this.itemIndex?(i="今日登录可领取",this.listAwardArr.source=e.rewards,this.btnGet.visible=t.canRewardNormal(),this.imgYlq.visible=!t.canRewardNormal(),this.mcBtn.playFile(ResMgr.getEffName("public_zycs_button01"),-1),this.labelGetNextDay.visible=!1):1==this.itemIndex?(i="SVIP"+t.getConfig().needsvip+"可额外领取",this.listAwardArr.source=e.srewards,this.imgYlq.visible=t.hasGetSvipAward(),this.labelGetNextDay.visible=!1,Actor.ins().sVipLv>=e.needsvip?t.hasGetSvipAward()?this.btnGet.visible=!1:(this.btnGet.visible=!0,this.mcBtn.playFile(ResMgr.getEffName("public_zycs_button01"),-1)):this.btnGet.visible=!0):2==this.itemIndex&&(i="明日登录可领取",this.listAwardArr.source=t.getConfig(t.day+1).rewards,this.btnGet.visible=!1,this.imgYlq.visible=!1,this.labelGetNextDay.visible=!0),this.lbDec.text=i},e}(BaseItemRender);__reflect(ActItem10_1.prototype,"ActItem10_1"),window.ActItem10_1=ActItem10_1;var BaseImage=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return __extends(e,t),e.prototype.reset=function(){this.x=0,this.y=0,this.alpha=1,this.scaleX=1,this.scaleY=1,this.source=null,DisUtil.remove(this),egret.Tween.removeTweens(this)},e}(eui.Image);__reflect(BaseImage.prototype,"BaseImage",["IObjectPool"]);var ActItem11_2=function(t){function e(){var e=t.call(this)||this;return e.skinName="ActItem11_2EUI",e}return __extends(e,t),e.prototype.dataChanged=function(){if(this.data instanceof ActDataItem){var t=this.data.config,e=Cfg.getPayMoneyVipExpByYb(t.pay);this.lbm.text=e+"仙玉",this.redPoint.visible=this.data.status==ActRewardState.CanGet}},e}(ActItem11_1);__reflect(ActItem11_2.prototype,"ActItem11_2"),window.ActItem11_2=ActItem11_2;var ActItem12_1=function(t){function e(){var e=t.call(this)||this;return e.skinName="ActItem12_1EUI",e.list.itemRenderer=ItemBaseRewardActivity,e.suerBtn.redPoint.visible=!0,e.mc=new MC,e.mc.x=e.suerBtn.x+e.suerBtn.width/2,e.mc.y=e.suerBtn.y+e.suerBtn.height/2,e.addChild(e.mc),e.addClickE(e.suerBtn,e.onClick),e}return __extends(e,t),e.prototype.onClick=function(t){},e.prototype.dataChanged=function(){},e}(BaseItemRender);__reflect(ActItem12_1.prototype,"ActItem12_1"),window.ActItem12_1=ActItem12_1;var ActItem14_1=function(t){function e(){var e=t.call(this)||this;return e.mcBtn=new MC,e.skinName="ActItem14_1EUI",e.listAward.itemRenderer=ItemBaseRewardActivity,e.listAward.dataProvider=e.listAwardArr=new eui.ArrayCollection,e.mcBtn.x=e.btnGet.width/2,e.mcBtn.y=e.btnGet.height/2,e.btnGet.addChildAt(e.mcBtn,e.btnGet.numChildren-1),e.addClickE(e.btnGet,e.onClick),e}return __extends(e,t),e.prototype.onClick=function(){var t=this.data.config;GFunc.checkSVIP(t.sviplevel)&&ActSys.ins().sendReward(t.id,t.index)},e.prototype.dataChanged=function(){if(this.data instanceof ActDataItem14_1){var t=this.data.config;this.listAwardArr.source=t.rewards;var e="";e=0==t.sviplevel?"今日登录可领取":"SVIP"+t.sviplevel+"可额外领取",this.lbDec.text=e,this.data.status==ActRewardState.CanGet?this.mcBtn.playFile(ResMgr.getEffName("public_zycs_button01"),-1):(this.mcBtn.stop(),this.mcBtn.visible=!1),this.btnGet.redPoint.visible=this.data.status==ActRewardState.CanGet,this.currentState=this.data.status.toString()}},e}(BaseItemRender);__reflect(ActItem14_1.prototype,"ActItem14_1"),window.ActItem14_1=ActItem14_1;var ActItem18_1=function(t){function e(){var e=t.call(this)||this;return e.skinName="ActItem18_1EUI",e.setSkinPart("item",new ItemShop),e.setSkinPart("priceIconOld",new PriceIcon),e.setSkinPart("priceIcon",new PriceIcon),e}return __extends(e,t),e.prototype.dataChanged=function(){var t=this.data,e=t.config;this.priceIconOld.setType(e.currencyType),this.priceIcon.setType(e.currencyType);var i=e.rewards[0];this.btnBuy.name="btnBuy_"+this.itemIndex,this.btnFree.name="btnFree_"+this.itemIndex,this.priceIconOld.setPrice(e.yuanprice),this.priceIcon.setPrice(e.price);var n=ShopSys.ins().getDayCountName(e.limit.type);this.labelDesc.text=n+"："+t.buyCount+"/"+e.limit.count,this.item.data=GFunc.creatRewardDataById(i.id,i.count),this.labelName.textFlow=GFunc.getItemName1(i.id),this.bmpLabelDiscount.text=""+e.discount/10;var a=t.canBuy();this.groupFree.visible=a&&0==t.config.discount,this.groupDiscount.visible=a&&t.config.discount>0,this.labelMax.visible=!a;var o=Actor.ins().sVipLv>=e.vip;this.groupSVip.visible=!o,o||(this.imgSVIPLv.source="store_zycs_sv"+e.vip),this.btnBuy.visible=this.btnFree.visible=o},e}(BaseItemRender);__reflect(ActItem18_1.prototype,"ActItem18_1");var ActItem2_1=function(t){function e(){var e=t.call(this)||this;return e.skinName="ActItem2_1EUI",e.setSkinPart("price",new PriceIcon),e.setSkinPart("price0",new PriceIcon),e.list.itemRenderer=ItemBaseRewardActivity,e.addClickE(e.btnBuy,e.onClick),e}return __extends(e,t),e.prototype.onClick=function(t){var e=this.data.config;if(GFunc.checkSVIP(e.vip)&&BagSys.ins().checkBagFreeCount(e.rewards.length))if(GFunc.checkCurrency(e.currencyType,e.price)){var i=new PopupPriceData(Lang.act_str14);i.priceValue=e.price,i.priceType=e.currencyType,i.setFunction(this,function(){ActSys.ins().sendReward(e.id,e.index)}),openWin(CommonTipsWinNew,i)}else openWin(RechargeWin)},e.prototype.dataChanged=function(){var t=this.data,e=t.config;this.list.dataProvider=new eui.ArrayCollection(e.rewards),this.imgTitle.source=e.vip>0?"hddt_zycs_v"+e.vip:"hddt_zycs_th",this.labelBuyCount.text=Lang.act_str1+"："+t.leftCount;var i=0==t.leftCount?15733780:5949490,n=StrUtil.addColor(t.leftCount+"/"+e.count,i);this.labelBuyCount.textFlow=addColorTF("（"+Lang.act_str2+"："+n+"）"),this.bmpDiscount.text=""+e.discount/10,this.btnBuy.enabled=t.leftCount>0,this.price.setType(e.currencyType),this.price.setPrice(e.price),this.price.setPriceColor(16761393),this.price0.setType(e.currencyType),this.price0.setPrice(e.yuanprice),this.price0.setIsYuanJia(!0)},e}(BaseItemRender);__reflect(ActItem2_1.prototype,"ActItem2_1"),window.ActItem2_1=ActItem2_1;var ActItem2_2=function(t){function e(){var e=t.call(this)||this;return e.mcBtnSend=new MC,e.skinName="ActItem2_2EUI",e.setSkinPart("price",new PriceIcon),e.setSkinPart("price0",new PriceIcon),e.list.itemRenderer=ItemBaseRewardActivity,e.mcBtnSend.x=e.btnBuy.width/2,e.mcBtnSend.y=e.btnBuy.height/2,e.btnBuy.addChildAt(e.mcBtnSend,e.btnBuy.numChildren-1),e.addClickE(e.btnBuy,e.onClick),e}return __extends(e,t),e.prototype.onClick=function(t){var e=this.data,i=e.config;GFunc.checkSVIP(i.vip)&&BagSys.ins().checkBagFreeCount(i.rewards.length)&&GFunc.checkCurrency(i.currencyType,i.price)&&ActSys.ins().sendReward(i.id,e.configIndex)},e.prototype.dataChanged=function(){var t=this.data,e=t.config;this.list.dataProvider=new eui.ArrayCollection(e.rewards),this.imgZbg.source=e.index<3?"public_zycs_tab2":"public_zycs_tab1",this.imgDay.visible=1==e.index,this.imgSvip.visible=e.vip>0,this.groupPrice.y=1==e.index||e.vip>0?74:49;var i=0==t.leftCount?15733780:5767068,n=StrUtil.addColor(t.leftCount+"/"+e.count,i);this.labelBuyCount.textFlow=addColorTF(Lang.act_str2+"："+n),this.bmpDiscount.text=e.discount/10+"z",this.btnBuy.enabled=t.leftCount>0,t.leftCount>0&&e.vip>0?(this.mcBtnSend.playFile(ResMgr.getEffName("public_zycs_button01"),-1),this.mcBtnSend.visible=!0):(this.mcBtnSend.stop(),this.mcBtnSend.visible=!1),this.price.setType(e.currencyType),this.price.setPrice(e.price),this.price0.setType(e.currencyType),this.price0.setPrice(e.yuanprice),this.price0.setIsYuanJia(!0)},e}(BaseItemRender);__reflect(ActItem2_2.prototype,"ActItem2_2"),window.ActItem2_2=ActItem2_2;var ActItem2_3=function(t){function e(){var e=t.call(this)||this;return e.skinName="ActItem2_3EUI",e}return __extends(e,t),e.prototype.dataChanged=function(){var t=this.data,e=t.config;this.lb_vip.text="SVIP"+e.vip;var i=Cfg.getItemCfg(e.itemid);this.iconDisplay.source=ResMgr.getItemIcon(i.getIcon(),IconType.IT_80x80),this.updateRedPoint()},e.prototype.updateRedPoint=function(){var t=this.data;this.redPoint.visible=t.hasBuy&&Actor.ins().sVipLv>=t.config.vip},e}(BaseItemRender);__reflect(ActItem2_3.prototype,"ActItem2_3"),window.ActItem2_3=ActItem2_3;var ActItem21_1=function(t){function e(){var e=t.call(this)||this;return e.skinName="ActItem21_1EUI",e}return __extends(e,t),e.prototype.dataChanged=function(){var t=this.data;this.iconDisplay.source=ResMgr.getMonsterHead(t.bosshead),this.updateRedPoint()},e.prototype.updateRedPoint=function(){var t=this.data;this.redPoint.visible=t.canReward()},e}(BaseItemRender);__reflect(ActItem21_1.prototype,"ActItem21_1"),window.ActItem21_1=ActItem21_1;var ActItem22_1=function(t){function e(){var e=t.call(this)||this;return e.skinName="ActItem22_1EUI",e}return __extends(e,t),e.prototype.dataChanged=function(){var t=this.data;this.imgBg.source="hddt_zycs_t"+t.configIndex+"_jpg",this.updateRedPoint(),this.update()},e.prototype.update=function(){var t=this.data;this.imgYGM.visible=!t.canBuy()},e.prototype.updateRedPoint=function(){var t=this.data;this.redPoint.visible=t.redPoint()},e}(BaseItemRender);__reflect(ActItem22_1.prototype,"ActItem22_1"),window.ActItem22_1=ActItem22_1;var ActItem23_1=function(t){function e(){var e=t.call(this)||this;e.skinName="ActItem23_1EUI",e.btnGet.redPoint.visible=!0,e.listAward.itemRenderer=ItemBaseRewardActivity;var i=new MC;return i.x=e.btnGet.width/2,i.y=e.btnGet.height/2,i.$setScaleX(.7),i.$setScaleY(.7),i.playFile(getEffName("public_zycs_button01"),-1),e.btnGet.addChildAt(i,e.btnGet.numChildren-1),e.addClickE(e,e.onClick),e}return __extends(e,t),e.prototype.dataChanged=function(){var t=this.data,e=t.config;this.dayStr="累计充值"+e.day+"天",this.listAward.dataProvider=new eui.ArrayCollection(e.reward),this.currentState=t.status.toString()},e.prototype.onClick=function(t){switch(t.target){case this.btnGet:var e=this.data.config;ActSys.ins().sendReward(e.id,e.index);break;case this.btnRecharge:openWin(RechargeWin)}},e}(BaseItemRender);__reflect(ActItem23_1.prototype,"ActItem23_1"),window.ActItem23_1=ActItem23_1;var ActItem23_2=function(t){function e(){var e=t.call(this)||this;e.skinName="ActItem23_2EUI",e.btnGet.redPoint.visible=!0,e.list.itemRenderer=ItemBaseRewardActivity;var i=new MC;return i.x=e.btnGet.width/2,i.y=e.btnGet.height/2,i.scaleX=i.scaleY=.7,i.playFile(getEffName("public_zycs_button01"),-1),e.btnGet.addChildAt(i,e.btnGet.numChildren-1),e.addClickE(e.btnGet,e.onClick),e}return __extends(e,t),e.prototype.onClick=function(t){var e=this.data,i=e.config;ActSys.ins().sendReward(i.id,i.index)},e.prototype.dataChanged=function(){var t=this.data,e=t.config;this.lbDay.text=""+Lang.common_str107+t.dabaioDay+"/"+e.day+Lang.common_tian,this.list.dataProvider=new eui.ArrayCollection(e.reward),t.status==ActRewardState.Geted?(this.btnGet.visible=!1,this.lbDay.visible=!1,this.imgYLQ.visible=!0):(this.imgYLQ.visible=!1,t.actState==ActOpenState.End?(this.btnGet.visible=!1,this.lbDay.visible=!1):t.actState==ActOpenState.Open?t.status==ActRewardState.CanGet?(this.btnGet.visible=!0,this.lbDay.visible=!1):(this.btnGet.visible=!1,this.lbDay.visible=!0):t.actState==ActOpenState.Unenabled&&(this.btnGet.visible=!1,this.lbDay.visible=!1))},e}(BaseItemRender);__reflect(ActItem23_2.prototype,"ActItem23_2"),window.ActItem23_2=ActItem23_2;var ActItem23_3=function(t){function e(){var e=t.call(this)||this;return e.skinName="ActItem23_3EUI",e}return __extends(e,t),e.prototype.dataChanged=function(){if(this.data instanceof ActDataItem23_2){this.data.config;this.redPoint.visible=this.data.status==ActRewardState.CanGet,this.dayStr=Lang.replaceEnum("第%s天",this.data.day)}},e}(BaseItemRender);__reflect(ActItem23_3.prototype,"ActItem23_3"),window.ActItem23_3=ActItem23_3;var ActItem24_1=function(t){function e(){var e=t.call(this)||this;return e.skinName="ActItem24_1EUI",e.list.itemRenderer=ItemBaseRewardActivity,e.addClickE(e.rewardBtn,e.onClick),e}return __extends(e,t),e.prototype.onClick=function(t){var e=this.data,i=e.config,n=ActSys.ins().getActDataById(i.id);return n.chong<i.pay?(showtipsFail(Lang.act_str34),void openWin(RechargeWin)):n.xiao<i.pay?void showtipsFail(Lang.act_str66):void ActSys.ins().sendReward(i.id,i.index)},e.prototype.dataChanged=function(){var t=this.data,e=t.config;this.bmpValue.text=""+e.consume,this.list.dataProvider=new eui.ArrayCollection(e.reward),t.status!=ActRewardState.NotReached?t.status==ActRewardState.Geted?(this.rewardBtn.visible=!1,this.rewardedTip.visible=!0,this.rewardBtn.currentState=null):(this.rewardBtn.redPoint.visible=!0,this.rewardBtn.visible=!0,this.rewardBtn.enabled=!0,this.rewardedTip.visible=!1,this.rewardBtn.currentState=null):(this.rewardBtn.redPoint.visible=!1,this.rewardBtn.visible=!0,this.rewardBtn.currentState="hui",this.rewardedTip.visible=!1)},e}(BaseItemRender);__reflect(ActItem24_1.prototype,"ActItem24_1"),window.ActItem24_1=ActItem24_1;var ActItem25_1=function(t){function e(){var e=t.call(this)||this;return e.skinName="ActItem25_1EUI",e}return __extends(e,t),e.prototype.dataChanged=function(){"number"==typeof this.data&&(this.imgNum.source="hddt_zycs_"+this.data)},e.prototype.setSelect=function(t,e){void 0===e&&(e=1),this.imgSelect.visible=t,this.imgSelect.alpha=e},e}(BaseItemRender);__reflect(ActItem25_1.prototype,"ActItem25_1"),window.ActItem25_1=ActItem25_1;var ActItem26_1=function(t){function e(){var e=t.call(this)||this;return e.mcBtnDuiHuan=new MC,e.skinName="ActItem26_1EUI",e.redPoint.visible=!1,e.mcBtnDuiHuan.x=e.btnDuiHuan.width/2,e.mcBtnDuiHuan.y=e.btnDuiHuan.height/2,e.mcBtnDuiHuan.scaleY=e.mcBtnDuiHuan.scaleX=.7,e.btnDuiHuan.addChildAt(e.mcBtnDuiHuan,e.btnDuiHuan.numChildren-1),e.addClickE(e.btnDuiHuan,e.onDuihuanClick),e.addClickE(e.checkBoxTiXing,e.onClick),e}return __extends(e,t),e.prototype.onClick=function(){var t=this.data,e=t.config;ActSys.ins().sendReward(e.id,e.index,1,1==t.remind?0:1)},e.prototype.onDuihuanClick=function(){var t=this.data.config;GFunc.checkCurrency(t.needitem,t.needcount)&&openWin(BuyWin,this.data.getBuyData())},e.prototype.dataChanged=function(){var t=this.data,e=t.config,i=GFunc.creatItemDataById(e.itemid);i.count=e.count,this.itemIcon.data=i,this.lbName.text=i.cfg.getName(),this.lbName.textColor=GConst.PZColor[i.cfg.quality],this.labelDesc.textFlow=addColorTF("可兑换："+addColor(""+(e.daycount.count-t.buyCount),e.daycount.count==t.buyCount?15733780:5767068));var n=t.canBuy();this.labelMax.visible=!n,this.btnDuiHuan.visible=n,this.imgConsume.source=ResMgr.getItemIconMin(e.needitem),this.updateItem()},e.prototype.updateItem=function(){var t=this.data,e=t.config,i=GFunc.getItemCount(e.needitem),n=i>=e.needcount?5767068:15733780;this.lbConsumeCount.textFlow=addColorTF(""+e.needcount,n),this.updateRemind()},e.prototype.updateRemind=function(){var t=this.data;this.checkBoxTiXing.selected=1==t.remind,this.updateRedPoint()},e.prototype.updateRedPoint=function(){var t=this.data,e=t.config,i=t.canBuy()&&GFunc.isConsumeEnoughByItemId(e.needitem,e.needcount)&&1==t.remind;this.btnDuiHuan.redPoint.visible=i,i?this.mcBtnDuiHuan.playFile(ResMgr.getEffName("public_zycs_button01"),-1):(this.mcBtnDuiHuan.stop(),this.mcBtnDuiHuan.visible=!1)},e}(BaseItemRender);__reflect(ActItem26_1.prototype,"ActItem26_1"),window.ActItem26_1=ActItem26_1;var ActItem27_1=function(t){function e(){var e=t.call(this)||this;
return e.mcBtnSend=new MC,e.skinName="ActItem27_1EUI",e.btnSend.redPoint.visible=!0,e.list.itemRenderer=ItemBaseRewardActivity,e.mcBtnSend.x=e.btnSend.width/2,e.mcBtnSend.y=e.btnSend.height/2,e.btnSend.addChildAt(e.mcBtnSend,e.btnSend.numChildren-1),e.addClickE(e.btnSend,e.onSendClick),e.addClickE(e.btnLink,e.onLinkClick),e}return __extends(e,t),e.prototype.onLinkClick=function(){openWin(RechargeWin)},e.prototype.onSendClick=function(){var t=this.data.config;ActSys.ins().sendReward(t.id,t.index)},e.prototype.dataChanged=function(){var t=this.data.config;this.lbDec.textFlow=addColorTF(this.getDec(this.data)),this.lbValue.textFlow=addColorTF(this.getValue(this.data)),this.list.dataProvider=new eui.ArrayCollection(t.rewards),this.btnLink.visible=!1,this.btnSend.visible=!1,this.imgYlq.visible=!1,this.data.status==ActRewardState.CanGet?(this.btnSend.visible=!0,this.mcBtnSend.playFile(ResMgr.getEffName("public_zycs_button01"),-1)):this.data.status==ActRewardState.Geted?(this.imgYlq.visible=!0,this.mcBtnSend.stop()):this.data.status==ActRewardState.NotReached&&(this.btnLink.visible=!0,this.mcBtnSend.stop())},e.prototype.getDec=function(t){var e=this.data.config;return"连续充值"+addColor(e.condition+"天",5767068)+"每天充值"+addColor(e.price+"元",5767068)+",可领取奖励"},e.prototype.getValue=function(t){var e=this.data.config;return addColor("("+t.count+"/"+e.condition+")",t.count>=e.condition?46913:15733780)},e}(BaseItemRender);__reflect(ActItem27_1.prototype,"ActItem27_1"),window.ActItem27_1=ActItem27_1;var ActItem3_1=function(t){function e(){var e=t.call(this)||this;return e.skinName="ActItem3_1EUI",e.rewardBtn.redPoint.visible=!0,e.list.itemRenderer=ItemBaseRewardActivity,e.addClickE(e,e.onClick),e}return __extends(e,t),e.prototype.onClick=function(t){var e=this.data;switch(t.target){case this.rewardBtn:e.status==ActRewardState.CanGet?ActSys.ins().sendReward(e.config.id,e.config.index):showtipsFail(Lang.common_str19);break;case this.btnGoto:var i=e.config,n=Cfg.getConfig(GuildConveneTaskConfig,i.taskid);GFunc.createTaskNavData(n.controlTarget)["goto"]()}},e.prototype.dataChanged=function(){var t=this.data,e=t.config,i=ActSys.ins().getActDataById(t.actId);this.list.dataProvider=new eui.ArrayCollection(e.rewards);var n;n.type==TaskType.loginDay?(this.groupDay.visible=!0,this.lbDesc.visible=!1,this.bitDay.text=n.target.toString(),this.lbDay.text=Lang.act_str64.replace("$day$",i.getJindu(t.index).toString())):(this.groupDay.visible=!1,this.lbDesc.visible=!0,this.lbDesc.text=n.desc,this.lbDay.text=""),this.currentState=t.status.toString()},e}(BaseItemRender);__reflect(ActItem3_1.prototype,"ActItem3_1"),window.ActItem3_1=ActItem3_1;var ActItem3_2=function(t){function e(){var e=t.call(this)||this;return e.skinName="ActItem3_2EUI",e.rewardBtn.redPoint.visible=!0,e.list.itemRenderer=ItemBaseRewardActivity,e.addClickE(e,e.onClick),e}return __extends(e,t),e.prototype.onClick=function(t){var e=this.data;switch(t.target){case this.rewardBtn:e.status==ActRewardState.CanGet?ActSys.ins().sendReward(e.config.id,e.config.index):showtipsFail(Lang.common_str19);break;case this.btnGoto:var i=e.config,n=Cfg.getConfig(GuildConveneTaskConfig,i.taskid);i.taskType==Act3_2TabType.JYFB?GFunc.createTaskNavData(n.controlTarget)["goto"](999):GFunc.createTaskNavData(n.controlTarget)["goto"](),closeWin(ActJueZhanWin)}},e.prototype.dataChanged=function(){var t=this.data,e=t.config;this.list.dataProvider=new eui.ArrayCollection(e.rewards.concat(e.jifenShow));var i;this.bitDay.text=i.target.toString();var n=i.desc.split("$count$");this.lbDay1.textFlow=StrUtil.toTF(n[0]),this.lbDay2.textFlow=StrUtil.toTF(n[1]),this.lbDay2.visible=n.length>1;var a=addColor(""+t.jindu,t.jindu<i.target?16711680:4048384);this.lbCount.textFlow=addColorTF(a+"/"+i.target),this.currentState=t.status.toString()},e}(BaseItemRender);__reflect(ActItem3_2.prototype,"ActItem3_2"),window.ActItem3_2=ActItem3_2;var ActItem3_3=function(t){function e(){var e=t.call(this)||this;return e.skinName="ActItem3_3EUI",e.listAward.itemRenderer=ItemBaseRewardActivity,e.listAward.dataProvider=e.listAwardArr=new eui.ArrayCollection,e.btnSend.redPoint.visible=!0,e}return __extends(e,t),e.prototype.dataChanged=function(){var t=this.data;this.btnSend.name="btnSend_"+t.itemIndex;var e=addColor(t.sbhdJifeng,5767068)+" "+Lang.act_str148;this.labelDesc.textFlow=addColorTF(e),this.listAwardArr.source=t.sbhdRewards,this.btnSend.visible=t.canGetAward,this.btnHighDian.visible=!t.isHighdianEnough,this.imgYLQ.visible=t.hasGetAward},e}(BaseItemRender);__reflect(ActItem3_3.prototype,"ActItem3_3"),window.ActItem3_3=ActItem3_3;var ActItemData3_3=function(){function t(){this.itemIndex=0,this._type3exConfigs=[]}return Object.defineProperty(t.prototype,"activityCommonConfig",{get:function(){return this._activityCommonConfig||(this._activityCommonConfig=Cfg.getConfig(ActivityCommonConfig))},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"sbhdJifeng",{get:function(){return Cfg.getConfig(ActivityType3exConfig,this.data3_3.actId,this.itemIndex+1).jifen},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"sbhdRewards",{get:function(){return Cfg.getConfig(ActivityType3exConfig,this.data3_3.actId,this.itemIndex+1).rewards},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"canGetAward",{get:function(){return this.data3_3.canGetAward(this.itemIndex)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"isHighdianEnough",{get:function(){return this.data3_3.isHighdianEnough(this.itemIndex)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"hasGetAward",{get:function(){return this.data3_3.hasGetAward(this.itemIndex)},enumerable:!0,configurable:!0}),t}();__reflect(ActItemData3_3.prototype,"ActItemData3_3"),window.ActItemData3_3=ActItemData3_3;var ActItem31_1=function(t){function e(){var e=t.call(this)||this;return e.skinName="ActPanel31_1ItemEUI",e.imgBg.touchEnabled=!1,e}return __extends(e,t),e.prototype.dataChanged=function(){var t=this.data,e=Cfg.getItemCfg(t.id);this.item.data=t,e.type==ItemType.ZSDB?(this.imgBg.visible=!0,this.imgBg.source="hddt_zycs_db"+t.id):this.imgBg.visible=!1},e.prototype.setSelect=function(t){this.imgSelect.visible=t},e}(BaseItemRender);__reflect(ActItem31_1.prototype,"ActItem31_1"),window.ActItem31_1=ActItem31_1;var ActItem33_1=function(t){function e(){var e=t.call(this)||this;return e.skinName="ActItem33_1EUI",e.list.itemRenderer=ItemBaseReward,e}return __extends(e,t),e.prototype.dataChanged=function(){this.data instanceof ActRankData33&&(this.lbRank.text=Lang.guild_str74.replace("$count$",""+this.data.rank),this.imgRank.source=this.data.rank<=5?"public_zycs_ranknum_"+this.data.rank+"_a":"",this.lbName.text=this.data.roleName,this.lbValue.text=Lang.act_str100+"："+this.data.value,this.list.dataProvider=new eui.ArrayCollection(this.data.config.rewards))},e}(BaseItemRender);__reflect(ActItem33_1.prototype,"ActItem33_1"),window.ActItem33_1=ActItem33_1;var ActItem34_1=function(t){function e(){var e=t.call(this)||this;return e.skinName="ActItem34_1EUI",e.list.itemRenderer=ItemBaseReward,e}return __extends(e,t),e.prototype.dataChanged=function(){this.data instanceof ActDataRank34_1&&(this.lbRank.text=Lang.guild_str74.replace("$count$",""+this.data.rank),this.imgRank.source=this.data.rank<=3?"public_zycs_ranknum_"+this.data.rank+"_a":"",this.lbName.text=this.data.roleName,this.lbValue.textFlow=addColorTF(""+Lang.fb_str113+addColor(this.data.value,5177195)),this.list.dataProvider=new eui.ArrayCollection(this.data.config.rewards))},e}(BaseItemRender);__reflect(ActItem34_1.prototype,"ActItem34_1"),window.ActItem34_1=ActItem34_1;var ActItem34_2=function(t){function e(){var e=t.call(this)||this;return e.skinName="ActItem34_2EUI",e.list.itemRenderer=ItemBaseReward,e}return __extends(e,t),e.prototype.dataChanged=function(){this.data instanceof ActDataRank34_1&&(this.lbRank.text=this.data.rank>3?Lang.guild_str74.replace("$count$",""+this.data.rank):"",this.imgRank.source=this.data.rank<=3?"jsdd_zycs_pm"+this.data.rank:"",this.list.dataProvider=new eui.ArrayCollection(this.data.config.rewards),""==this.data.roleName?(this.lbName.text=Lang.act_str87,this.lbValue.textFlow=addColorTF(Lang.act_str124.replace("$num$",addColor(this.data.value,1306146)))):(this.lbName.text=this.data.roleName,this.lbValue.textFlow=addColorTF(Lang.act_str112+"："+addColor(this.data.value,1306146))))},e}(BaseItemRender);__reflect(ActItem34_2.prototype,"ActItem34_2"),window.ActItem34_2=ActItem34_2;var ActItem36_1=function(t){function e(){var e=t.call(this)||this;return e.skinName="ActItem36_1EUI",e.list.itemRenderer=ActItem36_1SH,e.list.dataProvider=e.listData=new eui.ArrayCollection,e.lbSend.textFlow=addColorTF(StrUtil.addUnderLine(e.lbSend.text)),e.addClickE(e.lbSend,e.onClick),e}return __extends(e,t),e.prototype.onClick=function(){var t=ActSys.ins(),e=this.data,i=e.activityType36Config,n=Cfg.getConfig(ActivityBtnConfig,i.id),a=t.getActDataById(n.addId[0]),o=a.getActOpenState();o==ActOpenState.Jiesuan||o==ActOpenState.End?showtipsFail(Lang.act_str7):t.sendQQShPlayerData(a.actId,e.actorId)},e.prototype.dataChanged=function(){var t=this.data,e=t.activityType36Config;this.imgHead.source=ResMgr.getHeadIcon(t.sex),this.lbName.text=t.name,this.imgRank.source=e.index<=3?"jsdd_zycs_pm"+e.index:"",this.lbRank.text=""+Lang.guild_str74.replace("$count$",""+e.index),this.lbRank.visible=e.index>3,this.lbValue.textFlow=addColorTF(Lang.act_str180+"："+addColor(t.value,2199040)),this.lbShouHuCount.textFlow=addColorTF(Lang.act_str181+"："+addColor(t.count+Lang.common_ren,2199040)),this.lbTiaoJian.textFlow=addColorTF(""+Lang.act_str183.replace("$value$",""+addColor(e.need,2199040))),this.listData.source=t.actData36_1ShouHus,this.currentState=t.hasPlayer()?"player":"noplayer"},e}(BaseItemRender);__reflect(ActItem36_1.prototype,"ActItem36_1"),window.ActItem36_1=ActItem36_1;var ItemDataDrop=function(t){function e(){var e=t.call(this)||this;return e.roleName="",e.tick=0,e.isMy=!0,e}return __extends(e,t),e.prototype.parser=function(t){this.handle=t.readInt();t.readInt();this.id=t.readInt(),this.count=t.readInt()},e.prototype.reset=function(){t.prototype.reset.call(this),this.handle=0},e}(ItemDataReward);__reflect(ItemDataDrop.prototype,"ItemDataDrop"),window.ItemDataDrop=ItemDataDrop;var ActItem36_1SH2=function(t){function e(){var e=t.call(this)||this;return e.skinName="ActItem36_1SH2EUI",e}return __extends(e,t),e.prototype.dataChanged=function(){var t=this.data;this.imgHead.source=ResMgr.getHeadIcon(t.sex),this.lbName.text=t.name,this.lbValue.textFlow=addColorTF(Lang.act_str182+"："+addColor(t.sendValue,2199040)),this.lbTiaoJian.textFlow=addColorTF(""+Lang.act_str185.replace("$count$",""+addColor(t.activityType36Config.shouhuneed,2199040))),this.currentState=t.hasPlayer()?"hasPlayer":"noPlayer"},e}(ActItem36_1SH);__reflect(ActItem36_1SH2.prototype,"ActItem36_1SH2"),window.ActItem36_1SH2=ActItem36_1SH2;var ActItem36_2=function(t){function e(){var e=t.call(this)||this;return e.skinName="ActItem36_2EUI",e.list1.itemRenderer=ItemBaseReward,e.list2.itemRenderer=ItemBaseReward,e}return __extends(e,t),e.prototype.dataChanged=function(){var t=this.data,e=t.config;this.imgRank.source=e.index<=4?"qqsh_zycs_pm"+e.index:"",this.lbRank.text=""+Lang.guild_str74.replace("$count$",""+e.index),this.lbRank.visible=e.index>4,this.list1.dataProvider=new eui.ArrayCollection(e.rewards),this.list2.dataProvider=new eui.ArrayCollection(e.sendRewards)},e}(BaseItemRender);__reflect(ActItem36_2.prototype,"ActItem36_2"),window.ActItem36_2=ActItem36_2;var ActItem37_1_2=function(t){function e(){return t.call(this)||this}return __extends(e,t),e.prototype.setSkinName=function(){this.skinName="ActItem37_1_2EUI",this.addClick()},e}(ActItem37_1_1);__reflect(ActItem37_1_2.prototype,"ActItem37_1_2"),window.ActItem37_1_1=ActItem37_1_1;var ActItem37_1_3=function(t){function e(){return t.call(this)||this}return __extends(e,t),e.prototype.setSkinName=function(){this.skinName="ActItem37_1_3EUI",this.addClick()},e}(ActItem37_1_1);__reflect(ActItem37_1_3.prototype,"ActItem37_1_3"),window.ActItem37_1_1=ActItem37_1_1;var ActItem4_1To1=function(t){function e(){var e=t.call(this)||this;return e.skinName="ActItem4_1To1EUI",e.list.itemRenderer=ItemIcon,e.mcIcon=new McIcon,e.groupMc.addChild(e.mcIcon),e}return __extends(e,t),e.prototype.close=function(){t.prototype.close.call(this),this.mcIcon.close()},e.prototype.dataChanged=function(){var t=this.data,e=t.getConfig(1),i=Cfg.getConfig(ActivityBtnConfig,e.Id);this.list.dataProvider=new eui.ArrayCollection(GFunc.getItemDataRewardByJob(e.rewards)),this.lbDabiao.text=""+Lang.act_str70[i.showday]+Lang.common_str113+"："+e.value;var n=t.getFirstRankData();n&&""!=n.roleName?this.lbName.text=""+n.roleName:this.lbName.text="虚位以待";var a=GFunc.getItemTipsMCData(GFunc.creatUnknown(e.itemid,1));this.updateMC(a)},e.prototype.updateMC=function(t){if(this.mcIcon.open(t.config),t instanceof TipsMcDamonData){var e=Cfg.getConfig(DamonHuanhuaBaseConfig,t.itemData.cfg.huanhuaId);this.mcIcon.scaleX=this.mcIcon.scaleY=e.scaleC/100}else t instanceof TipsMcShenmoData?this.mcIcon.scaleX=this.mcIcon.scaleY=.95:this.mcIcon.scaleX=this.mcIcon.scaleY=.75},e}(BaseItemRender);__reflect(ActItem4_1To1.prototype,"ActItem4_1To1"),window.ActItem4_1To1=ActItem4_1To1;var ActItem4_1To2=function(t){function e(){var e=t.call(this)||this;return e.skinName="ActItem4_1To2EUI",e.list1.itemRenderer=ItemIcon,e}return __extends(e,t),e.prototype.dataChanged=function(){var t=this.data,e=t.Id,i=t.ranking,n=t.rewards,a=t.value,o=Cfg.getConfig(ActivityBtnConfig,e);this.rankTxt.text=""+Lang.common_di+i[0]+"-"+i[1]+Lang.common_str5+Lang.act_str68,this.list1.dataProvider=new eui.ArrayCollection(GFunc.getItemDataRewardByJob(n)),this.lbDabiao.text=""+Lang.act_str70[o.showday]+Lang.common_str113+"："+a},e}(BaseItemRender);__reflect(ActItem4_1To2.prototype,"ActItem4_1To2"),window.ActItem4_1To2=ActItem4_1To2;var ActItem5_1=function(t){function e(){var e=t.call(this)||this;return e.mcBtnSend=new MC,e.skinName="ActItem5_1EUI",e.btnSend.redPoint.visible=!0,e.list.itemRenderer=ItemBaseRewardActivity,e.list.dataProvider=e.listArr=new eui.ArrayCollection,e.mcBtnSend.x=e.btnSend.width/2,e.mcBtnSend.y=e.btnSend.height/2,e.btnSend.addChildAt(e.mcBtnSend,e.btnSend.numChildren-1),e.addClickE(e,e.onClick),e}return __extends(e,t),e.prototype.onClick=function(t){var e=this.data;switch(t.target){case this.btnLink:var i=e.config;RechargeActSys.ins().firstRechargeData.isRecharge()?openWin(RechargeWin2,0,i.yuanbao):openWin(FirstRechargeBuyWin);break;case this.btnSend:i=e.config,ActSys.ins().sendReward(i.id,i.index)}},e.prototype.dataChanged=function(){if(this.data instanceof ActDataItem5_1){var t=this.data.config,e=Cfg.getPayMoneyRMBByYb(t.yuanbao),i=Lang.act_str101.replace("$str$",addColor(""+e+Lang.common_yuan,5767068));this.lbDec.textFlow=addColorTF(i);for(var n=[],a=Cfg.getPayMoneyPercent(t.yuanbao),o=0,s=t.rewards;o<s.length;o++){var r=s[o],u=ItemDataReward.clone(r);u.count=Math.ceil(u.count*a),n.push(u)}this.listArr.source=n,this.lbValue.textFlow=addColorTF("1/1",5767068);var h=t.times-this.data.yxf==0?15733780:46913;this.lbCount.textFlow=addColorTF("活动次数:"+addColor(t.times-this.data.yxf+"/"+t.times,h)),this.lbCount.visible=t.times>1,this.btnLink.visible=!1,this.btnSend.visible=!1,this.imgYlq.visible=!1,this.data.status==ActRewardState.CanGet?(this.btnSend.visible=!0,this.mcBtnSend.playFile(ResMgr.getEffName("public_zycs_button01"),-1)):this.data.status==ActRewardState.Geted?(this.imgYlq.visible=!0,this.mcBtnSend.stop()):this.data.status==ActRewardState.NotReached&&(this.btnLink.visible=!0,this.mcBtnSend.stop(),this.lbValue.textFlow=addColorTF("0/1",15733780))}},e}(BaseItemRender);__reflect(ActItem5_1.prototype,"ActItem5_1"),window.ActItem5_1=ActItem5_1;var ActItem8_1To1=function(t){function e(){var e=t.call(this)||this;return e.skinName="ActItem8_1To1EUI",e.list.itemRenderer=ItemBaseRewardActivity,e.mcTitle=new MC,e.addChild(e.mcTitle),e.mcTitle.x=175,e.mcTitle.y=240,e.mcTitle.playFile(getEffName("ch_zycs_28"),-1),e.img.visible=!1,e}return __extends(e,t),e.prototype.dataChanged=function(){var t=this.data,e=t.getConfig(1);this.lbXf.text=""+e.consume,this.list.dataProvider=new eui.ArrayCollection(e.rewards);var i=t.getRankData(1);i&&""!=i.roleName?(this.lbName.text=""+i.roleName,this.lbLjxf.text=Lang.act_str19.replace("$yb$",""+i.num),this.imgXwyd.visible=!1):(this.lbName.text="",this.lbLjxf.text="",this.imgXwyd.visible=!0)},e}(BaseItemRender);__reflect(ActItem8_1To1.prototype,"ActItem8_1To1"),window.ActItem8_1To1=ActItem8_1To1;var ActItem8_1To2=function(t){function e(){var e=t.call(this)||this;return e.skinName="ActItem8_1To2EUI",e.list.itemRenderer=ItemBaseRewardActivity,e}return __extends(e,t),e.prototype.dataChanged=function(){var t=this.data;this.rankTxt.text=t.rank[0]+"-"+t.rank[1]+Lang.common_str5,this.list.dataProvider=new eui.ArrayCollection(t.rewards),t.consume>0?(this.lbXf.text=""+t.consume,this.groupXf.visible=!0):(this.lbXf.text="",this.groupXf.visible=!1)},e}(BaseItemRender);__reflect(ActItem8_1To2.prototype,"ActItem8_1To2"),window.ActItem8_1To2=ActItem8_1To2;var ActItem9_1=function(t){function e(){var e=t.call(this)||this;return e.skinName="ActItem9_1EUI",e}return __extends(e,t),e.prototype.dataChanged=function(){this.data instanceof ActDataZhe9_1&&(this.lbCount.text=this.data.isAct?Lang.chat_str17:Lang.act_str78.replace("$count$",""+this.data.count),this.imgZhe.source="hddt_zycs_"+this.data.zhe+"z",this.currentState=this.data.isAct?"down":"up")},e}(BaseItemRender);__reflect(ActItem9_1.prototype,"ActItem9_1"),window.ActItem9_1=ActItem9_1;var ActItemTask15_1=function(t){function e(){var e=t.call(this)||this;return e.mcbtnAct=new MC,e.skinName="ActItemTask15_1EUI",e.btnGoto.name="btnGoto",e.btnAct.name="btnAct",e.btnAct.redPoint.visible=!0,e.redPoint.visible=!1,e.setSkinPart("itemReward",new ItemBaseReward),e.mcbtnAct.x=e.btnAct.width/2,e.mcbtnAct.y=e.btnAct.height/2,e.btnAct.addChildAt(e.mcbtnAct,e.btnAct.numChildren-1),e}return __extends(e,t),e.prototype.dataChanged=function(){var t=this.data,e=t.config,i=t.configTask;this.itemReward.data=e.rewards[0],this.taskName.text=i.desc;var n=t.value>=i.target;this.lbjd.textFlow=addColorTF("("+t.value+"/"+i.target+")",n?5767068:15733780),t.isAct()?(this.currentState="act",this.mcbtnAct.stop(),this.mcbtnAct.visible=!1):t.canAct()?this.currentState="canact":this.currentState="noact",t.canAct()?this.mcbtnAct.playFile(getEffName("public_zycs_button02"),-1):(this.mcbtnAct.stop(),this.mcbtnAct.visible=!1),this.updateRedPoint()},e.prototype.updateRedPoint=function(){},e.prototype.getbtnAct=function(){return this.btnAct},e.prototype.getbtnGoto=function(){return this.btnGoto},e}(BaseItemRender);__reflect(ActItemTask15_1.prototype,"ActItemTask15_1"),window.ActItemTask15_1=ActItemTask15_1;var ActItemTask15_2=function(t){function e(){var e=t.call(this)||this;return e.mcbtnAct=new MC,e.skinName="ActItemTask15_2EUI",e.btnGoto.name="btnGoto",e.btnAct.name="btnAct",e.btnAct.redPoint.visible=!0,e.mcbtnAct.x=e.btnAct.width/2,e.mcbtnAct.y=e.btnAct.height/2,e.btnAct.addChildAt(e.mcbtnAct,e.btnAct.numChildren-1),e.list.itemRenderer=ItemBaseRewardActivity,e}return __extends(e,t),e.prototype.dataChanged=function(){var t=this.data,e=t.config,i=t.configTask;this.list.dataProvider=new eui.ArrayCollection(e.rewards),this.taskName.textFlow=StringUtil.toTF(i.desc);var n=t.value>=i.target;this.lbjd.textFlow=addColorTF("("+t.value+"/"+i.target+")",n?46913:15733780),t.isAct()?(this.currentState="act",this.mcbtnAct.stop(),this.mcbtnAct.visible=!1):t.canAct()?this.currentState="canact":this.currentState="noact",t.canAct()?this.mcbtnAct.playFile(getEffName("public_zycs_button01"),-1):(this.mcbtnAct.stop(),this.mcbtnAct.visible=!1),this.updateRedPoint()},e.prototype.updateRedPoint=function(){},e.prototype.getbtnAct=function(){return this.btnAct},e.prototype.getbtnGoto=function(){return this.btnGoto},e}(BaseItemRender);__reflect(ActItemTask15_2.prototype,"ActItemTask15_2"),window.ActItemTask15_2=ActItemTask15_2;var ActTabBtn=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return __extends(e,t),e.prototype.dataChanged=function(){var t=this.data;null!=t&&(this.selectIcon.source="bqz_zycs_"+t.icon+0,this.iconDisplay.source="bqz_zycs_"+t.icon+1)},e}(BaseTabBtn);__reflect(ActTabBtn.prototype,"ActTabBtn"),window.ActTabBtn=ActTabBtn;var MCBuff=function(t){function e(){var e=t.call(this)||this;return e.buffId=0,e}return __extends(e,t),e}(MC);__reflect(MCBuff.prototype,"MCBuff"),window.MCBuff=MCBuff;var ActData1_16=function(t){function e(){return t.call(this)||this}return __extends(e,t),Object.defineProperty(e.prototype,"dabiao",{get:function(){return FbSys.ins().guajiData.guanId},enumerable:!0,configurable:!0}),e}(ActData1_1);__reflect(ActData1_16.prototype,"ActData1_16"),window.ActData1_3=ActData1_3;var PopupEquipData=function(t){function e(e){void 0===e&&(e="");var i=t.call(this,e)||this;return i.equipData=null,i}return __extends(e,t),e}(PopupData);__reflect(PopupEquipData.prototype,"PopupEquipData");var ActData1_18=function(t){function e(){return t.call(this)||this}return __extends(e,t),e}(ActData1_17);__reflect(ActData1_18.prototype,"ActData1_18"),window.ActData1_18=ActData1_18;var ActData1_19=function(t){function e(){return t.call(this)||this}return __extends(e,t),e.prototype.getCurConfig=function(){var t,e=this.getConfigs();for(var i in e){if(t=e[i],this.getRewardStateById(e[i].index)==ActRewardState.CanGet)break;if(this.getRewardStateById(e[i].index)==ActRewardState.NotReached)break}return t},e.prototype.canReward=function(){var e=t.prototype.canReward.call(this);return e||this.completeReward()||(e=this.canUp()),e},e.prototype.completeReward=function(){var t=this.getConfigs();for(var e in t)if(0==this.deCodeRecord(t[e].index))return!1;return!0},e.prototype.canUp=function(){var t=!1,e=Cfg.getConfig(ActivityBtnConfig,this.actId);switch(e.showday){case 1:t=RpSys.ins().getData(ShouHuWin,ShenmoPanel,ShenmoLevelPanel,"levelUp");break;case 2:t=RpSys.ins().getData(ShouHuWin,YongbingPanel,YongbingLevelPanel,"levelUp");break;case 3:t=RpSys.ins().getData(RoleWin,RolePanel,SqXyWin,ShenQiPanel,ShenQiLevelPanel,"levelUp");break;case 4:t=RpSys.ins().getData(RoleWin,RolePanel,SqXyWin,WingPanel,WingLevelPanel,"levelUp");break;case 5:t=RpSys.ins().getData(ShouHuWin,DamonPanel,DamonLevelPanel,"levelUp");break;case 6:t=RpSys.ins().getData(RoleWin,RolePanel,SqXyWin,SzPanel,SzLevelPanel,"levelUp");break;case 7:t=RpSys.ins().getData(RoleWin,RolePanel,SqXyWin,MeilinPanel,MeilinLevelPanel,"levelUp")}return t},Object.defineProperty(e.prototype,"dabiao",{get:function(){return this._commonData},enumerable:!0,configurable:!0}),e}(ActData1_1);__reflect(ActData1_19.prototype,"ActData1_19"),window.ActData1_19=ActData1_19;var ActData1_2=function(t){function e(){return t.call(this)||this}return __extends(e,t),Object.defineProperty(e.prototype,"dabiao",{get:function(){return this._commonData},enumerable:!0,configurable:!0}),e.prototype.getItemDatas=function(){var t=this.getConfigs(),e=[];for(var i in t){var n=new ActDataItem1_2(t[i],this.getRewardStateById(t[i].index),this.actId,this.getActOpenState());n.yxf=this.dabiao,e.push(n)}return e},e.prototype.getformatTime=function(e){return void 0===e&&(e=Actor.ins().serverTime),Lang.common_str11+StrUtil.addColor(t.prototype.getformatTime.call(this),5767068)},e}(ActData1_1);__reflect(ActData1_2.prototype,"ActData1_2");var ActDataItem1_2=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.yxf=0,e}return __extends(e,t),e}(ActDataItem);__reflect(ActDataItem1_2.prototype,"ActDataItem1_2"),window.ActData1_2=ActData1_2;var ActData1_20=function(t){function e(){return t.call(this)||this}return __extends(e,t),Object.defineProperty(e.prototype,"dabiao",{get:function(){return this._commonData},enumerable:!0,configurable:!0}),e.prototype.getItemDatas=function(){var t=this.getConfigs(),e=[];for(var i in t){var n=new ActDataItem1_20(t[i],this.getRewardStateById(t[i].index),this.actId,this.getActOpenState());n.yxf=this.dabiao,e.push(n)}return e},e.prototype.getformatTime=function(e){return void 0===e&&(e=Actor.ins().serverTime),StrUtil.addColor(t.prototype.getformatTime.call(this),5767068)},e}(ActData1_1);__reflect(ActData1_20.prototype,"ActData1_20");var ActDataItem1_20=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.yxf=0,e}return __extends(e,t),e}(ActDataItem);__reflect(ActDataItem1_20.prototype,"ActDataItem1_20"),window.ActData1_20=ActData1_20;var ActData1_2001=function(t){function e(){return t.call(this)||this}return __extends(e,t),Object.defineProperty(e.prototype,"dabiao",{get:function(){return this._commonData},enumerable:!0,configurable:!0}),e.prototype.getformatTime=function(e){return void 0===e&&(e=Actor.ins().serverTime),Lang.common_str11+StrUtil.addColor(t.prototype.getformatTime.call(this,e,"dd天hh小时mm分ss秒",!1),5767068)},e.prototype.getformatTime2=function(e){void 0===e&&(e=Actor.ins().serverTime);var i=this.jiesuanTime-e,n="dd天hh小时";return i<DateUtil.MS_PER_HOUR&&(n="mm分ss秒"),StrUtil.addColor(t.prototype.getformatTime.call(this,e,n,!1),5767068)},e}(ActData1_1);__reflect(ActData1_2001.prototype,"ActData1_2001"),window.ActData1_2001=ActData1_2001;var ActData1_2002=function(t){function e(){return t.call(this)||this}return __extends(e,t),Object.defineProperty(e.prototype,"dabiao",{get:function(){return this._commonData},enumerable:!0,configurable:!0}),e.prototype.getformatTime=function(e){void 0===e&&(e=Actor.ins().serverTime);var i=this.jiesuanTime-e,n="dd天hh小时mm分";return i<DateUtil.MS_PER_DAY&&(n="hh小时mm分ss秒"),StrUtil.addColor(t.prototype.getformatTime.call(this,e,n,!1),5767068)},e.prototype.getformatTime2=function(e){return void 0===e&&(e=Actor.ins().serverTime),StrUtil.addColor(t.prototype.getformatTime.call(this,e,"dd天hh小时",!1),5767068)},e}(ActData1_1);__reflect(ActData1_2002.prototype,"ActData1_2002"),window.ActData1_2002=ActData1_2002;var ActData1_21=function(t){function e(){return t.call(this)||this}return __extends(e,t),Object.defineProperty(e.prototype,"dabiao",{get:function(){return this._commonData},enumerable:!0,configurable:!0}),e}(ActData1_7);__reflect(ActData1_21.prototype,"ActData1_21"),window.ActData1_21=ActData1_21;var ActData1_22=function(t){function e(){return t.call(this)||this}return __extends(e,t),Object.defineProperty(e.prototype,"dabiao",{get:function(){return this._commonData},enumerable:!0,configurable:!0}),e}(ActData1_1);__reflect(ActData1_22.prototype,"ActData1_22"),window.ActData1_22=ActData1_22;var ActData1_23=function(t){function e(){return t.call(this)||this}return __extends(e,t),Object.defineProperty(e.prototype,"dabiao",{get:function(){return FbSys.ins().heianModel.fbId},enumerable:!0,configurable:!0}),e}(ActData1_1);__reflect(ActData1_23.prototype,"ActData1_23"),window.ActData1_23=ActData1_23;var ActData1_24=function(t){function e(){return t.call(this)||this}return __extends(e,t),Object.defineProperty(e.prototype,"dabiao",{get:function(){return this._commonData},enumerable:!0,configurable:!0}),e}(ActData1_1);__reflect(ActData1_24.prototype,"ActData1_24"),window.ActData1_24=ActData1_24;var ActData1_25=function(t){function e(){return t.call(this)||this}return __extends(e,t),Object.defineProperty(e.prototype,"dabiao",{get:function(){return FbSys.ins().getFbModelDailyByFbGroup(FbGroup.TianFu).take},enumerable:!0,configurable:!0}),e}(ActData1_1);__reflect(ActData1_25.prototype,"ActData1_25"),window.ActData1_25=ActData1_25;var ActData1_26=function(t){function e(){return t.call(this)||this}return __extends(e,t),Object.defineProperty(e.prototype,"dabiao",{get:function(){return FbSys.ins().getFbModelDailyByFbGroup(FbGroup.Gold).take},enumerable:!0,configurable:!0}),e}(ActData1_1);__reflect(ActData1_26.prototype,"ActData1_26"),window.ActData1_26=ActData1_26;var ActData1_27=function(t){function e(){return t.call(this)||this}return __extends(e,t),Object.defineProperty(e.prototype,"commonData",{set:function(t){this.score=t},enumerable:!0,configurable:!0}),e.prototype.getActDataPreview=function(){var t=[],e=this.getConfigs();for(var i in e){var n=new ActDataPreview1_17(e[i],this.getRewardStateById(e[i].index),this.score),a=addColor(n.score+"/"+n.needScore,n.score<n.needScore?15733780:1306146);n.dec=Lang.act_str126.replace("$count$",addColor(n.needScore,1306146)).replace("$str$",a),t.push(n)}return SortUtil.sortOn(t,["state","needScore"],[SortType.up,SortType.up]),t},e}(ActData1_17);__reflect(ActData1_27.prototype,"ActData1_27"),window.ActData1_27=ActData1_27;var ActData1_28=function(t){function e(){return t.call(this)||this}return __extends(e,t),Object.defineProperty(e.prototype,"dabiao",{get:function(){return this._commonData},enumerable:!0,configurable:!0}),e}(ActData1_1);__reflect(ActData1_28.prototype,"ActData1_28"),window.ActData1_28=ActData1_28;var ActData1_29=function(t){function e(){return t.call(this)||this}return __extends(e,t),Object.defineProperty(e.prototype,"dabiao",{get:function(){return this._commonData},enumerable:!0,configurable:!0}),e}(ActData1_1);__reflect(ActData1_29.prototype,"ActData1_29"),window.ActData1_29=ActData1_29;var PopupNumData=function(t){function e(e){void 0===e&&(e="");var i=t.call(this,e)||this;return i.curNum=0,i.maxNum=0,i.minNum=0,i}return __extends(e,t),e}(PopupData);__reflect(PopupNumData.prototype,"PopupNumData");var ActData1_30=function(t){function e(){var e=t.call(this)||this;return e.score=0,e}return __extends(e,t),e.prototype.parserScore=function(t){this.score=t.readInt()},Object.defineProperty(e.prototype,"dabiao",{get:function(){return this.score},enumerable:!0,configurable:!0}),e.prototype.getCurConfig=function(){var t,e=this.getConfigs();for(var i in e){if(t=e[i],this.getRewardStateById(e[i].index)==ActRewardState.CanGet)break;if(this.getRewardStateById(e[i].index)==ActRewardState.NotReached)break}return t},e.prototype.getActDataPreview=function(){var t=[],e=this.getConfigs();for(var i in e)t.push(new ActDataPreview1_30(e[i],this.getRewardStateById(e[i].index),this.score));return SortUtil.sortOn(t,["state","needScore"],[SortType.up,SortType.up]),t},e}(ActData1_1);__reflect(ActData1_30.prototype,"ActData1_30"),window.ActData1_30=ActData1_30;var ActData1_31=function(t){function e(){var e=t.call(this)||this;return e.score=0,e}return __extends(e,t),e.prototype.parserScore=function(t){this.score=t.readInt()},Object.defineProperty(e.prototype,"dabiao",{get:function(){return this.score},enumerable:!0,configurable:!0}),e.prototype.getCurConfig=function(){var t,e=this.getConfigs();for(var i in e){if(t=e[i],this.getRewardStateById(e[i].index)==ActRewardState.CanGet)break;if(this.getRewardStateById(e[i].index)==ActRewardState.NotReached)break}return t},e.prototype.getActDataPreview=function(){var t=[],e=this.getConfigs();for(var i in e){var n=new ActDataPreview1_31(e[i],this.getRewardStateById(e[i].index),this.score),a=addColor(n.score+"/"+n.needScore,n.score<n.needScore?15733780:5767068);n.dec=Lang.act_str77.replace("$count$",addColor(n.needScore,5767068)).replace("$str$",a),t.push(n)}return SortUtil.sortOn(t,["state","needScore"],[SortType.up,SortType.up]),t},e}(ActData1_1);__reflect(ActData1_31.prototype,"ActData1_31"),window.ActData1_31=ActData1_31;var ActDataPreview1_31=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return __extends(e,t),e}(ActDataPreview1_17);__reflect(ActDataPreview1_31.prototype,"ActDataPreview1_31"),window.ActDataPreview1_31=ActDataPreview1_31;var ActData1_32=function(t){function e(){return t.call(this)||this}return __extends(e,t),e.prototype.getCurConfig=function(){var t,e=this.getConfigs();for(var i in e){if(t=e[i],this.getRewardStateById(e[i].index)==ActRewardState.CanGet)break;if(this.getRewardStateById(e[i].index)==ActRewardState.NotReached)break}return t},e.prototype.canReward=function(){var e=t.prototype.canReward.call(this);return e||this.completeReward()||(e=this.canUp()),e},e.prototype.completeReward=function(){var t=this.getConfigs();
for(var e in t)if(0==this.deCodeRecord(t[e].index))return!1;return!0},e.prototype.canUp=function(){var t=!1;return t},Object.defineProperty(e.prototype,"dabiao",{get:function(){return this._commonData},enumerable:!0,configurable:!0}),e}(ActData1_1);__reflect(ActData1_32.prototype,"ActData1_32"),window.ActData1_32=ActData1_32;var ActData1_4=function(t){function e(){return t.call(this)||this}return __extends(e,t),e.prototype.getDateText=function(t){return getFormatTime(this.dabiao,"dd天hh小时mm分钟ss秒")},Object.defineProperty(e.prototype,"dabiao",{get:function(){return Math.max((Timer.ins().getEgretTimer()+this._commonData)/1e3,0)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"commonData",{set:function(t){this._commonData=1e3*t-Timer.ins().getEgretTimer()},enumerable:!0,configurable:!0}),e}(ActData1_1);__reflect(ActData1_4.prototype,"ActData1_4"),window.ActData1_4=ActData1_4;var ActData1_5=function(t){function e(){return t.call(this)||this}return __extends(e,t),Object.defineProperty(e.prototype,"dabiao",{get:function(){return FbSys.ins().wanmoModel.fbId},enumerable:!0,configurable:!0}),e}(ActData1_1);__reflect(ActData1_5.prototype,"ActData1_5"),window.ActData1_5=ActData1_5;var ActData1_6=function(t){function e(){return t.call(this)||this}return __extends(e,t),Object.defineProperty(e.prototype,"dabiao",{get:function(){return this._commonData},enumerable:!0,configurable:!0}),e}(ActData1_1);__reflect(ActData1_6.prototype,"ActData1_6"),window.ActData1_6=ActData1_6;var PopupPriceData=function(t){function e(e){void 0===e&&(e="");var i=t.call(this,e)||this;return i.priceValue=0,i.priceType=0,i}return __extends(e,t),e}(PopupData);__reflect(PopupPriceData.prototype,"PopupPriceData");var ActData1_8=function(t){function e(){return t.call(this)||this}return __extends(e,t),Object.defineProperty(e.prototype,"dabiao",{get:function(){return this._commonData},enumerable:!0,configurable:!0}),e.prototype.getformatTime=function(e){return void 0===e&&(e=Actor.ins().serverTime),Lang.common_str11+StrUtil.addColor(t.prototype.getformatTime.call(this),5767068)},e}(ActData1_1);__reflect(ActData1_8.prototype,"ActData1_8"),window.ActData1_8=ActData1_8;var ActData1_9=function(t){function e(){return t.call(this)||this}return __extends(e,t),e.prototype.getCurConfig=function(){var t,e=this.getConfigs();for(var i in e){if(t=e[i],this.getRewardStateById(e[i].index)==ActRewardState.CanGet)break;if(this.getRewardStateById(e[i].index)==ActRewardState.NotReached)break}return t},e.prototype.canReward=function(){var e=t.prototype.canReward.call(this);return e||this.completeReward()||(e=this.canUp()),e},e.prototype.completeReward=function(){var t=this.getConfigs();for(var e in t)if(0==this.deCodeRecord(t[e].index))return!1;return!0},e.prototype.canUp=function(){var t=!1;switch(this.actId){case ActId.ID_114:t=RpSys.ins().getData(ShouHuWin,ShenmoPanel,ShenmoLevelPanel,"levelUp");break;case ActId.ID_115:t=RpSys.ins().getData(ShouHuWin,YongbingPanel,YongbingLevelPanel,"levelUp");break;case ActId.ID_116:t=RpSys.ins().getData(RoleWin,RolePanel,SqXyWin,ShenQiPanel,ShenQiLevelPanel,"levelUp");break;case ActId.ID_117:t=RpSys.ins().getData(RoleWin,RolePanel,SqXyWin,WingPanel,WingLevelPanel,"levelUp");break;case ActId.ID_118:t=RpSys.ins().getData(ShouHuWin,DamonPanel,DamonLevelPanel,"levelUp");break;case ActId.ID_119:t=RpSys.ins().getData(RoleWin,RolePanel,SqXyWin,SzPanel,SzLevelPanel,"levelUp");break;case ActId.ID_120:t=RpSys.ins().getData(RoleWin,RolePanel,SqXyWin,MeilinPanel,MeilinLevelPanel,"levelUp")}return t},Object.defineProperty(e.prototype,"dabiao",{get:function(){var t=0;switch(this.actId){case ActId.ID_114:t=ShouHuNewSys.ins().shenmoModel.level;break;case ActId.ID_115:t=ShouHuNewSys.ins().yongbingModel.level;break;case ActId.ID_116:t=SqXySys.ins().shenQiModel.level;break;case ActId.ID_117:t=SqXySys.ins().wingModel.level;break;case ActId.ID_118:t=ShouHuNewSys.ins().damonModel.level;break;case ActId.ID_119:t=SqXySys.ins().szModel.level;break;case ActId.ID_120:t=SqXySys.ins().meilinModel.level}return t},enumerable:!0,configurable:!0}),e}(ActData1_1);__reflect(ActData1_9.prototype,"ActData1_9"),window.ActData1_9=ActData1_9;var ActData10_1=function(t){function e(){var e=t.call(this)||this;return e.srecord=0,e._commonData=1,e}return __extends(e,t),e.prototype.parser=function(t){this.record=t.readShort(),this.srecord=t.readShort()},e.prototype.parserChange=function(t){var e=t.readShort(),i=t.readInt();return 1==e?this.record=i:this.srecord=i,this.changIndex},Object.defineProperty(e.prototype,"day",{get:function(){return this._commonData},enumerable:!0,configurable:!0}),e.prototype.canReward=function(){return this.canRewardNormal()||this.canRewardSvip()},e.prototype.canRewardNormal=function(){return 0==this.record},e.prototype.canRewardSvip=function(){return 0==this.srecord&&Actor.ins().sVipLv>=this.getConfig().needsvip},e.prototype.hasGetSvipAward=function(){return 1==this.srecord},e.prototype.getConfig=function(t){return void 0===t&&(t=this.day),this.getConfigs()[t]},e.prototype.getConfigs=function(){return this.configs||(this.configs=Cfg.getConfigs(ActivityType10Config,this.actId,CondType.NONE))},e.prototype.isMaxDay=function(){return this.day>=ComUtil.getObjLen(this.getConfigs())},e}(ActDataBase);__reflect(ActData10_1.prototype,"ActData10_1"),window.ActData10_1=ActData10_1;var PopupTimeData=function(t){function e(e){void 0===e&&(e="");var i=t.call(this,e)||this;return i.timer=0,i}return __extends(e,t),e}(PopupData);__reflect(PopupTimeData.prototype,"PopupTimeData");var ActData11_2=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return __extends(e,t),e}(ActData11_1);__reflect(ActData11_2.prototype,"ActData11_2"),window.ActData11_2=ActData11_2;var TipsMcBaseData=function(){function t(t){this.scale=.6,this.itemData=t,this.config=new MCIconConfig,this.config.param=this.itemData.cfg.huanhuaId}return t.prototype.getAttrNameRes=function(){return"shenqi_zycs_attr"},t.prototype.getName=function(){return""},t.prototype.getAtts=function(){return this.itemData.cfg.pattr},t.prototype.getPower=function(){return GFunc.getPower(this.getAtts())>>0},t.prototype.getFileName=function(){return""},t}();__reflect(TipsMcBaseData.prototype,"TipsMcBaseData");var TipsMcShenqiData=function(t){function e(e){var i=t.call(this,e)||this;return i.config.type=MCIconType.shenqi,i}return __extends(e,t),e.prototype.getName=function(){return Lang.itemtips_str28},e.prototype.getFileName=function(){var t=Cfg.getConfig(ShenqiHuanhuaBaseConfig,this.config.param),e=Cfg.getConfig(WeaponAppearanceConfig,t.weaponIds[Actor.ins().job-1]).appearance;return ResMgr.getWeaponUIEFFResource(e)},e}(TipsMcBaseData);__reflect(TipsMcShenqiData.prototype,"TipsMcShenqiData");var TipsMcWingData=function(t){function e(e){var i=t.call(this,e)||this;return i.config.type=MCIconType.wing,i}return __extends(e,t),e.prototype.getAttrNameRes=function(){return"chibang_zycs_attr"},e.prototype.getName=function(){return Lang.itemtips_str29},e.prototype.getFileName=function(){var t=Cfg.getConfig(WingHuanhuaBaseConfig,this.config.param),e=Cfg.getConfig(WingAppearanceConfig,t.wingIds[Actor.ins().job-1]).appearance;return ResMgr.getWingUIEFFResource(e)},e}(TipsMcBaseData);__reflect(TipsMcWingData.prototype,"TipsMcWingData");var TipsMcSzData=function(t){function e(e){var i=t.call(this,e)||this;return i.config.type=MCIconType.shenzhuang,i}return __extends(e,t),e.prototype.getAttrNameRes=function(){return"sz_zycs_attr"},e.prototype.getName=function(){return Lang.common_str1},e.prototype.getFileName=function(){return Cfg.getConfig(SzHuanhuaBaseConfig,this.config.param).uibody[Actor.ins().sex]},e}(TipsMcBaseData);__reflect(TipsMcSzData.prototype,"TipsMcSzData");var TipsMcMeilinData=function(t){function e(e){var i=t.call(this,e)||this;return i.config.type=MCIconType.meilin,i}return __extends(e,t),e.prototype.getAttrNameRes=function(){return"ml_zycs_attr"},e.prototype.getName=function(){return Lang.itemtips_str30},e.prototype.getFileName=function(){var t=Cfg.getConfig(MeilinHuanhuaBaseConfig,this.config.param),e=Cfg.getConfig(MeilinAppearanceConfig,t.appearanceId).appearance;return ResMgr.getUIMeilinRes(e)},e}(TipsMcBaseData);__reflect(TipsMcMeilinData.prototype,"TipsMcMeilinData");var TipsMcDamonData=function(t){function e(e){var i=t.call(this,e)||this;return i.config.type=MCIconType.damon,i}return __extends(e,t),e.prototype.getAttrNameRes=function(){return"jl_zycs_attr"},e.prototype.getName=function(){return Lang.damon_str50},e.prototype.getFileName=function(){var t=Cfg.getConfig(DamonHuanhuaBaseConfig,this.config.param).uibody;return t},e}(TipsMcBaseData);__reflect(TipsMcDamonData.prototype,"TipsMcDamonData");var TipsMcYongbingData=function(t){function e(e){var i=t.call(this,e)||this;return i.config.type=MCIconType.yongbing,i}return __extends(e,t),e.prototype.getAttrNameRes=function(){return"yb_zycs_attr"},e.prototype.getName=function(){return Lang.itemtips_str31},e.prototype.getFileName=function(){var t=Cfg.getConfig(YongbingHuanhuaBaseConfig,this.config.param).uibody;return t},e}(TipsMcBaseData);__reflect(TipsMcYongbingData.prototype,"TipsMcYongbingData");var TipsMcShenmoData=function(t){function e(e){var i=t.call(this,e)||this;return i.config.type=MCIconType.shenmo,i}return __extends(e,t),e.prototype.getAttrNameRes=function(){return"shenmo_zycs_attr"},e.prototype.getName=function(){return Lang.itemtips_str32},e.prototype.getFileName=function(){var t=Cfg.getConfig(ShenmoHuanhuaBaseConfig,this.config.param).uibody;return t},e}(TipsMcBaseData);__reflect(TipsMcShenmoData.prototype,"TipsMcShenmoData");var TipsMcDamonMozhenData=function(t){function e(e){var i=t.call(this,e)||this;return i.scale=1,i.config.type=MCIconType.damonFz,i}return __extends(e,t),e.prototype.getAttrNameRes=function(){return"jl_zycs_attr"},e.prototype.getName=function(){return Lang.damon_str50+Lang.itemtips_str33},e.prototype.getFileName=function(){var t=Cfg.getConfig(DamonMozhenBaseConfig,this.config.param).appearanceId,e=Cfg.getConfig(GuanghuanAppearanceConfig,t).appearance;return e},e}(TipsMcBaseData);__reflect(TipsMcDamonMozhenData.prototype,"TipsMcDamonMozhenData");var TipsMcYongbingMozhenData=function(t){function e(e){var i=t.call(this,e)||this;return i.scale=1,i.config.type=MCIconType.yongbingFz,i}return __extends(e,t),e.prototype.getAttrNameRes=function(){return"yb_zycs_attr"},e.prototype.getName=function(){return Lang.itemtips_str31+Lang.itemtips_str33},e.prototype.getFileName=function(){var t=Cfg.getConfig(YongbingMozhenBaseConfig,this.config.param).appearanceId,e=Cfg.getConfig(GuanghuanAppearanceConfig,t).appearance;return e},e}(TipsMcBaseData);__reflect(TipsMcYongbingMozhenData.prototype,"TipsMcYongbingMozhenData");var TipsMcShenmoMozhenData=function(t){function e(e){var i=t.call(this,e)||this;return i.scale=1,i.config.type=MCIconType.shenmoFz,i}return __extends(e,t),e.prototype.getAttrNameRes=function(){return"shenmo_zycs_attr"},e.prototype.getName=function(){return Lang.itemtips_str32+Lang.itemtips_str33},e.prototype.getFileName=function(){var t=Cfg.getConfig(ShenmoMozhenBaseConfig,this.config.param).appearanceId,e=Cfg.getConfig(GuanghuanAppearanceConfig,t).appearance;return e},e}(TipsMcBaseData);__reflect(TipsMcShenmoMozhenData.prototype,"TipsMcShenmoMozhenData");var ActData12_2=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return __extends(e,t),e}(ActData12_1);__reflect(ActData12_2.prototype,"ActData12_2"),window.ActData12_2=ActData12_2;var ActData12_3=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return __extends(e,t),e}(ActData12_1);__reflect(ActData12_3.prototype,"ActData12_3"),window.ActData12_3=ActData12_3;var ActData12_4=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.isFirst=!0,e}return __extends(e,t),e.prototype.redPoint=function(){return this.isFirst||t.prototype.redPoint.call(this)},e.prototype.getType=function(){var t=this.getConfig(1);return t.sType},e.prototype.isEquip=function(){return 3==this.getType()},e.prototype.isFaBao=function(){return 4==this.getType()},e.prototype.isFuWen=function(){return 5==this.getType()},e.prototype.isDianFeng=function(){return 6==this.getType()},e.prototype.isZhiZun=function(){return 7==this.getType()},e}(ActData12_1);__reflect(ActData12_4.prototype,"ActData12_4"),window.ActData12_4=ActData12_4;var ActData13_1=function(t){function e(){var e=t.call(this)||this;return e.myBuyCount=0,e.quanfuBuyCount=0,e}return __extends(e,t),e.prototype.parser=function(t){this.myBuyCount=t.readShort(),this.quanfuBuyCount=t.readShort()},e.prototype.getConfig=function(){return Cfg.getConfig(ActivityType13Config,this.actId,1)},e.prototype.parserChange=function(t){t.readShort();return this.myBuyCount=t.readShort(),this.quanfuBuyCount=t.readShort(),this.changIndex},e.prototype.parserChangeQuanFuCount=function(t){this.quanfuBuyCount=t.readShort(),console.log("71 - 19飞升抢购-请求购买数量 - 更新 全服购买数量"+this.quanfuBuyCount)},Object.defineProperty(e.prototype,"canBuy",{get:function(){return this.myBuyCount<this.getConfig().cancount&&this.quanfuBuyCount<this.getConfig().totalcount},enumerable:!0,configurable:!0}),e.prototype.redPoint=function(){return this.canBuy&&this.isShowRp},e}(ActDataBase);__reflect(ActData13_1.prototype,"ActData13_1"),window.ActData13_1=ActData13_1;var ActData14_1=function(t){function e(){var e=t.call(this)||this;return e.day=1,e}return __extends(e,t),e.prototype.parser=function(t){this.record=t.readInt(),this.day=t.readInt()},e.prototype.getConfigs=function(){return this.configs||(this.configs=Cfg.getConfigs(ActivityType14Config,this.actId,this.day,CondType.NONE))},e.prototype.getItemDatas=function(){var t=this.getConfigs(),e=[];for(var i in t){var n=new ActDataItem14_1(t[i],this.getRewardStateById(t[i].index),this.actId,this.getActOpenState());n.loginDay=this.day,e.push(n)}return e},e.prototype.getCondition=function(t){var e=t;return Actor.ins().sVipLv>=e.sviplevel},e.prototype.getformatTime=function(e){return void 0===e&&(e=Actor.ins().serverTime),StrUtil.addColor(t.prototype.getformatTime.call(this),5767068)},e}(ActDataBase);__reflect(ActData14_1.prototype,"ActData14_1"),window.ActData14_1=ActData14_1;var ActDataItem14_1=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.loginDay=0,e}return __extends(e,t),e}(ActDataItem);__reflect(ActDataItem14_1.prototype,"ActDataItem14_1"),window.ActDataItem14_1=ActDataItem14_1;var MCEditor=function(t){function e(){var e=t.call(this)||this;return e.label=DisUtil.createEuiLabelText(null,"",e.x,e.y,32),e.label.textColor=16711680,e}return __extends(e,t),e.prototype.$setParent=function(e){t.prototype.$setParent.call(this,e),e?e.addChild(this.label):DisUtil.remove(this.label)},e.prototype.$setX=function(e){return this.label.x=e-this.anchorOffsetX,t.prototype.$setX.call(this,e)},e.prototype.$setY=function(e){return this.label.y=e-this.anchorOffsetY,t.prototype.$setY.call(this,e)},e.prototype.$setAnchorOffsetX=function(e){t.prototype.$setAnchorOffsetX.call(this,e),this.label.x=this.x-this.anchorOffsetX},e.prototype.$setAnchorOffsetY=function(e){t.prototype.$setAnchorOffsetY.call(this,e),this.label.y=this.y-this.anchorOffsetY},e.prototype.setIndex=function(t){this.label.text=t.toString()},e}(MC);__reflect(MCEditor.prototype,"MCEditor"),window.MCEditor=MCEditor;var ActData15_2=function(t){function e(){return t.call(this)||this}return __extends(e,t),e.prototype.parserTask=function(t){var e=t.readByte();this.actData15TaskDatas.length=0;for(var i=0;e>i;i++){var n=t.readByte(),a=t.readInt(),o=new ActData15_1TaskData;o.value=a,o.index=i+1,o.actId=this.actId,o.state=n,this.actData15TaskDatas.push(o)}},e.prototype.parserTaskUpdate=function(t){var e=t.readByte(),i=t.readByte(),n=t.readInt(),a=this.actData15TaskDatas[e-1];a?(a.state=i,a.value=n):console.log(" 71-64 协议 任务index:"+e+" 不存在 71-63 没有下发任务数据")},e.prototype.getTaskList=function(){for(var t=[],e=this.getCurTaskGroup(),i=0;i<this.actData15TaskDatas.length;i++){var n=this.actData15TaskDatas[i];e==n.config.group&&t.push(n)}return t},e.prototype.getCurTaskGroup=function(){var t=1;if(this.actData15TaskDatas.length>0){t=this.actData15TaskDatas[this.actData15TaskDatas.length-1].config.group;for(var e=0;e<this.actData15TaskDatas.length;e++){var i=this.actData15TaskDatas[e];if(2!=i.state){t=i.config.group;break}}}return t},e.prototype.redPoint=function(){for(var e=!1,i=this.getCurTaskGroup(),n=0;n<this.actData15TaskDatas.length;n++){var a=this.actData15TaskDatas[n];a.canAct()&&i==a.config.group&&(e=!0)}return e||t.prototype.redPoint.call(this)},e.prototype.getRewardItems=function(){return Cfg.getConfig(ActivityType16Config,this.actId)[1]},e.prototype.getTask=function(){return this.actData15TaskDatas},e}(ActData15_1);__reflect(ActData15_2.prototype,"ActData15_2"),window.ActData15_2=ActData15_2;var ActData16_1=function(t){function e(){var e=t.call(this)||this;return e.jiangchiType=1,e.noAnimation=!1,e.datas=[[]],e}return __extends(e,t),Object.defineProperty(e.prototype,"actDataLog16_1Rewards",{get:function(){return this.datas[this.jiangchiType-1]||[]},enumerable:!0,configurable:!0}),e.prototype.getRewardsByJiangChi=function(t){return this.datas[t-1]||[]},e.prototype.parserRewardLog=function(t){this.jiangchiType=t.readByte();t.readByte();this.datas=[[]];for(var e=Cfg.getConfigs2(ActivityType16Config,this.actId),i=0;i<e.length;i++){var n=e[i];for(var a in n){var o=new ActDataLog16_1Reward,s=n[a],r=this.jiangchiType==s.jiangchi?t.readByte():this.jiangchiType>s.jiangchi?1:0;o.actId=this.actId,o.jiangchi=s.jiangchi,o.index=s.index,o.state=r,null==this.datas[i]&&(this.datas[i]=[]),this.datas[i].push(o)}}},e.prototype.parserLottery=function(t){var e=(t.readByte(),t.readByte()),i=t.readByte();this.curReward=this.actDataLog16_1Rewards[e-1],this.actDataLog16_1Rewards[e-1].state=i},e.prototype.getRewardItems=function(){return Cfg.getConfig(ActivityType16Config,this.actId)[1]},e.prototype.getCost=function(){return Cfg.getConfig(ActivityType16Config,this.actId,this.jiangchiType,1).costitem[0]},e.prototype.getJiaoShuiCount=function(){for(var t=(this.jiangchiType-1)*this.actDataLog16_1Rewards.length,e=0;e<this.actDataLog16_1Rewards.length;e++){var i=this.actDataLog16_1Rewards[e];1==i.state&&t++}return t},e.prototype.havGetCount=function(){for(var t=0;t<this.actDataLog16_1Rewards.length;t++){var e=this.actDataLog16_1Rewards[t];if(0==e.state)return!0}return!1},e.prototype.redPoint=function(){for(var e=!1,i=0;i<this.actDataLog16_1Rewards.length;i++){var n=this.actDataLog16_1Rewards[i];if(0==n.state){e=!0;break}}var a=e&&BagSys.ins().getItemCount(this.getCost().id)>=this.getCost().count;return a||t.prototype.redPoint.call(this)},e}(ActDataBase);__reflect(ActData16_1.prototype,"ActData16_1"),window.ActData16_1=ActData16_1;var ActDataLog16_1Reward=function(){function t(){this.actId=0,this.jiangchi=1,this.index=1,this.state=1}return Object.defineProperty(t.prototype,"config",{get:function(){return this._config||(this._config=Cfg.getConfig(ActivityType16Config,this.actId,this.jiangchi,this.index))},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"sort",{get:function(){return this.config.sort},enumerable:!0,configurable:!0}),t}();__reflect(ActDataLog16_1Reward.prototype,"ActDataLog16_1Reward"),window.ActDataLog16_1Reward=ActDataLog16_1Reward;var ActDataLog16_1=function(){function t(){this.roleName="",this.itemId=0,this.count=0,this.worldDec="",this.myDec=""}return t.prototype.parser=function(t){this.roleName=t.readString(),this.itemId=t.readInt(),this.count=t.readInt()},t.prototype.getWorldDec=function(){if(""==this.worldDec){var t=GFunc.creatUnknown(this.itemId,this.count),e=Lang.act_str75.replace("$name$",addColor(this.roleName,5767068)),i=t.cfg.type==ItemType.ZSDB?"":"*"+this.count;e=e.replace("$item$",addColor(""+t.cfg.getName()+i,GConst.PZColor[t.quality])),this.worldDec=e}return this.worldDec},t.prototype.getMyDec=function(){if(""==this.myDec){var t=GFunc.creatUnknown(this.itemId,this.count);this.myDec=Lang.act_str76.replace("$str$",addColor(t.cfg.getName()+"*"+this.count,GConst.PZColor[t.quality]))}return this.myDec},t}();__reflect(ActDataLog16_1.prototype,"ActDataLog16_1"),window.ActDataLog16_1=ActDataLog16_1;var ActData17_1=function(t){function e(){var e=t.call(this)||this;return e.weightDec="",e.worldLogs=[],e.mylogs=[],e.isinitRobot=!1,e}return __extends(e,t),e.prototype.parser=function(t){this.record=t.readInt(),this.isinitRobot||(this.initRobotLogs(),this.isinitRobot=!0)},e.prototype.parserChange=function(t){return 1},e.prototype.initRobotLogs=function(){for(var t=this.getConfig(),e=0;e<t.robotNemas.length;e++){var i=t.rewardlogs[e],n=new ActDataLog17_1(Actor.ins().serverName+"."+t.robotNemas[e],i.id,i.count);this.worldLogs.push(n)}},e.prototype.getConfig=function(t){void 0===t&&(t=0);var e=this.getConfigs()[1];return e},e.prototype.getConfigs=function(){return this.configs||(this.configs=Cfg.getConfigs(ActivityType17Config,this.actId,CondType.NONE))},e.prototype.getWeightDec=function(){if(""==this.weightDec){this.weightDec=Lang.act_str172;var t=this.getConfig().rewards[1].concat();SortUtil.sortOn(t,["per"],[SortType.up]);for(var e=0;e<t.length;e++){var i=GFunc.creatItemDataByReward(t[e]);this.weightDec+=addColor(i.cfg.getName()+"   "+Math.ceil(t[e].per/10)/10+"%",GConst.PZColor[i.quality])+"\n"}}return this.weightDec},e.prototype.redPoint=function(){return this.isOpenActivity()&&(GFunc.getItemCount(this.getConfig().costid)>0||this.redPointAdd())},e}(ActDataBase);__reflect(ActData17_1.prototype,"ActData17_1"),window.ActData17_1=ActData17_1;var ActDataLog17_1=function(){function t(t,e,i){this.roleName="",this.itemId=0,this.count=0,this.worldDec="",this.myDec="",this.roleName=t,this.itemId=e,this.count=i}return t.prototype.getWorldDec=function(){if(""==this.worldDec){var t=GFunc.creatUnknown(this.itemId,this.count),e=Lang.act_str173.replace("$name$",addColor(this.roleName,5767068)),i=t.cfg.type==ItemType.ZSDB?"":"*"+this.count;e=e.replace("$item$",addColor(""+t.cfg.getName()+i,GConst.PZColor[t.quality])),this.worldDec=e}return this.worldDec},t.prototype.getMyDec=function(){if(""==this.myDec){var t=GFunc.creatUnknown(this.itemId,this.count),e=Lang.act_str174.replace("$name$",addColor(this.roleName,5767068));this.myDec=e.replace("$str$",addColor(t.cfg.getName()+"*"+this.count,GConst.PZColor[t.quality]))}return this.myDec},t}();__reflect(ActDataLog17_1.prototype,"ActDataLog17_1"),window.ActDataLog17_1=ActDataLog17_1;var ActData18_1=function(t){function e(){var e=t.call(this)||this;return e.buyDatas=[],e}return __extends(e,t),e.prototype.parserShop=function(t){this.buyDatas.length=t.readByte();for(var e=0;e<this.buyDatas.length;e++){var i=this.buyDatas[e]=this.buyDatas[e]||new ActData18_1BuyData;i.buyCount=t.readShort(),i.configIndex=e+1,i.actId=this.actId}},e.prototype.parserBuyUpdate=function(t){var e=t.readByte(),i=this.buyDatas[e-1];i.buyCount=t.readShort()},e.prototype.getConfigs=function(){return this.configs||(this.configs=Cfg.getConfigs(ActivityType18Config,this.actId,CondType.NONE))},e.prototype.getCondition=function(t){var e=t;return Actor.ins().sVipLv>=e.sviplevel},e.prototype.getformatTime=function(e){return void 0===e&&(e=Actor.ins().serverTime),addColor(t.prototype.getformatTime.call(this),1306146)},e}(ActDataBase);__reflect(ActData18_1.prototype,"ActData18_1"),window.ActData18_1=ActData18_1;var ActData18_1BuyData=function(){function t(){this.buyCount=0,this.actId=0,this.configIndex=0}return t.prototype.canBuy=function(){return this.buyCount<this.config.limit.count||0==this.config.limit.count},t.prototype.getLeftBuyCount=function(){return 0==this.config.limit.count?9999:this.config.limit.count-this.buyCount},Object.defineProperty(t.prototype,"config",{get:function(){return this.conf||(this.conf=Cfg.getConfig(ActivityType18Config,this.actId,this.configIndex))},enumerable:!0,configurable:!0}),t.prototype.getConsumeItem=function(){return GFunc.creatRewardDataById(this.config.currencyType,this.config.price)},t.prototype.getBuyData=function(){var t=this,e=new BuyData;return e.setBuyFun(function(e){ActSys.ins().sendQQShShopBuy(t.actId,t.config.index,e)}),e.itemId=this.config.rewards[0].id,e.price=this.config.price,e.consumeItemId=this.getConsumeItem().id,e.itemCount=this.config.rewards[0].count,e.limitCount=this.getLeftBuyCount(),e},t}();__reflect(ActData18_1BuyData.prototype,"ActData18_1BuyData"),window.ActData18_1BuyData=ActData18_1BuyData;var ActData19_1=function(t){function e(){return t.call(this)||this}return __extends(e,t),e.prototype.parser=function(t){},e.prototype.redPoint=function(){return!1},e.prototype.getConfig=function(t){return Cfg.getConfig(ActivityType19Config,this.actId)},e}(ActDataBase);__reflect(ActData19_1.prototype,"ActData19_1"),window.ActData19_1=ActData19_1;var MovieEui=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.v=1,e}return __extends(e,t),e.prototype.addDisplay=function(){if(this.stage&&this.name){var t=MC.createCenterGruop(this.name,-1);this.mc=t.getElementAt(0),this.addChild(t)}},e.prototype.removeDisplay=function(){this.removeChildren()},Object.defineProperty(e.prototype,"data",{set:function(t){this.name!=t&&(this.name=t,this.reset())},enumerable:!0,configurable:!0}),e.prototype.reset=function(){this.removeDisplay(),this.addDisplay()},Object.defineProperty(e.prototype,"drawRect",{get:function(){return this.v},set:function(t){if(this.mc){var e=this.mc,i=e.width,n=e.height,a=-i>>1,o=(-n>>1)+n*(1-t),s=i,r=n-o;this.mc.scrollRect=new egret.Rectangle(a,o,s,r),this.mc.x=a,this.mc.y=o}this.v=t},enumerable:!0,configurable:!0}),__decorate([callDelay()],e.prototype,"reset",null),e}(eui.Component);__reflect(MovieEui.prototype,"MovieEui"),window.MovieEui=MovieEui;var ActData2_2=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return __extends(e,t),e.prototype.redPoint=function(){var t=!1;if(this.isShowRp)for(var e=0,i=this.buyDatas;e<i.length;e++){var n=i[e];if(n.leftCount>0){t=!0;break}}return t},e}(ActData2_1);__reflect(ActData2_2.prototype,"ActData2_2"),window.ActData2_2=ActData2_2;var ActData2_3=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return __extends(e,t),e.prototype.redPoint=function(){for(var t=!1,e=0,i=this.buyDatas;e<i.length;e++){var n=i[e];if(n.leftCount>0&&Actor.ins().sVipLv>=n.config.vip){t=!0;break}}return t},e.prototype.getDateText=function(t,e){return getFormatTime(t,e||"dd天hh小时mm分ss秒")},e}(ActData2_1);__reflect(ActData2_3.prototype,"ActData2_3"),window.ActData2_3=ActData2_3;var ActData20_1=function(t){function e(){var e=t.call(this)||this;return e.index=1,e.quanFuValue=0,e.geRenValue=0,e.hunValue=0,e.firstValue=0,e.firstName="",e.firstJob=JobConst.ZhanShi,e.firstsex=0,e.isAutoUse=!1,e.redPointKeyHun="hun",e.redPointKeyBan="ban",e}return __extends(e,t),e.prototype.parserChange=function(t){var e=(t.readShort(),t.readShort());return 2==e&&(this.isAutoUse=1==t.readShort()),this.changIndex},e.prototype.getConfigs=function(){return this.configs||(this.configs=Cfg.getConfigs(ActivityType20Config,this.actId,CondType.NONE))},e.prototype.getConfig=function(){return t.prototype.getConfig.call(this,this.index)},e.prototype.getExConfig=function(t){return Cfg.getConfig(ActivityType20ExConfig,this.actId,t)},e.prototype.parserRankData=function(t){this.quanFuValue=t.readInt(),this.index=t.readShort(),this.firstValue=t.readInt(),this.firstName=t.readString(),this.firstJob=t.readByte(),this.firstsex=t.readByte(),this.isAutoUse=1==t.readByte()},e.prototype.canReward=function(){return!1},e.prototype.getRpKeyValues=function(){var t=[];if(!this.isMax()){for(var e=Cfg.getConfigs(ActivityType20ExConfig,this.actId),i=0,n=e;i<n.length;i++){var a=n[i],o=new KeyValue;o.key=a.index.toString(),o.value=GFunc.getItemCount(a.item)>0,t.push(o)}var s=new KeyValue;s.key=this.redPointKeyHun,s.value=this.hunValue>=this.getConfig().barV,t.push(s);var r=new KeyValue;r.key=this.redPointKeyBan,r.value=this.redPointAdd(),t.push(r)}return t},e.prototype.isMax=function(){return this.getConfig().index>=this.getMaxConfig().index&&this.quanFuValue>=this.getMaxConfig().cv},e.prototype.getMaxConfig=function(){return this.maxConfig||(this.maxConfig=Cfg.getMaxConfig(ActivityType20Config,this.actId))},e.prototype.getBuyData=function(){var t=this.getExConfig(2),e=new BuyData;return e.setBuyFun(function(e){ActSys.ins().sendReward(t.id,t.index,0,e)}),e.itemId=t.item,e.price=t.diamond,e.consumeItemId=CurType.yb,e.limitCount=Number.MAX_VALUE,e},e}(ActDataBase);__reflect(ActData20_1.prototype,"ActData20_1"),window.ActData20_1=ActData20_1;var ActData200_1=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.dayNum=0,e.actDataLogins=[],e}return __extends(e,t),e.prototype.parser=function(t){this.dayNum=t.readShort();var e=t.readShort();this.actDataLogins.length=0;for(var i=1;e+1>i;i++){var n=new ActDataLogin;n.id=i,n.day=Cfg.getConfig(LoginRewardsConfig,i).day,n.hasGetAward=t.readBoolean(),n.dayNum=this.dayNum,this.actDataLogins.push(n)}},e.prototype.getDataLoginByIndex=function(t){return this.actDataLogins[t]},e.prototype.canReward=function(){for(var t=0,e=this.actDataLogins;t<e.length;t++){var i=e[t];if(!i.hasGetAward&&this.dayNum>=i.day)return!0}return!1},e.prototype.hasAwardNotGet=function(){for(var t=0,e=this.actDataLogins;t<e.length;t++){var i=e[t];if(!i.hasGetAward)return!0}return!1},e.prototype.isOpenActivity=function(t){return void 0===t&&(t=Actor.ins().serverTime),this.hasAwardNotGet()},e.prototype.isSeeActivity=function(t){return void 0===t&&(t=Actor.ins().serverTime),this.hasAwardNotGet()},e}(ActDataBase);__reflect(ActData200_1.prototype,"ActData200_1"),window.ActData200_1=ActData200_1;var ActData201_1=function(t){function e(){return t.call(this)||this}return __extends(e,t),e.prototype.getConfig=function(){return Cfg.getConfig(MonthCardConfig)},e.prototype.isSeeActivity=function(t){return void 0===t&&(t=Actor.ins().serverTime),!0},e.prototype.isInYueKaTime=function(t){return void 0===t&&(t=Actor.ins().serverTime),t<this.jiesuanTime},e.prototype.getformatTime=function(t){void 0===t&&(t=Actor.ins().serverTime);var e="";if(0==RechargeActSys.ins().monthFlag)e="";else if(2==RechargeActSys.ins().monthFlag)e=Lang.act_str12;else{var i=this.jiesuanTime-t;e=i<DateUtil.MS_PER_DAY?""+Lang.common_str8+getFormatTime(i/1e3,"hh小时mm分ss秒"):""+Lang.common_str8+getFormatTime(i/1e3,"dd天")}return e},e}(ActDataBase);__reflect(ActData201_1.prototype,"ActData201_1"),window.ActData201_1=ActData201_1;var ActData202_1=function(t){function e(){var e=t.call(this)||this;return e.state=0,e.bossDatas=[],e}return __extends(e,t),e.prototype.getConfig=function(){return Cfg.getConfig(PrivilegeConfig)},e.prototype.isSeeActivity=function(t){return void 0===t&&(t=Actor.ins().serverTime),!0},e.prototype.isAct=function(){return 1==this._commonData},e.prototype.getBossState=function(t){for(var e=0;e<this.bossDatas.length;e++){var i=this.bossDatas[e];if(i.sysId==t)return i.state}return 0},e}(ActDataBase);__reflect(ActData202_1.prototype,"ActData202_1");var ActData202_1BossData=function(){function t(){this.sysId=1,this.state=0}return t}();__reflect(ActData202_1BossData.prototype,"ActData202_1BossData"),window.ActData202_1=ActData202_1;var ActData21_1=function(t){function e(){var e=t.call(this)||this;return e.datas=[],e}return __extends(e,t),e.prototype.getConfigs=function(){return this.configs||(this.configs=Cfg.getConfigs(ActivityType21Config,this.actId,CondType.NONE))},e.prototype.getCondition=function(t){return!1},e.prototype.getformatTime=function(t){void 0===t&&(t=Actor.ins().serverTime);var e="";return e=t<this.startTime?Lang.act_str6:t>this.jiesuanTime?Lang.act_str7:Lang.act_str29+StrUtil.addColor(this.getDateText((this.jiesuanTime-t)/1e3),5949490)},e.prototype.parserData=function(t){for(var e=t.readShort(),i=0;e>i;i++){var n=new ActData21BossData;n.index=t.readShort(),n.killerName=t.readString(),n.stateQFSS=t.readByte(),n.stateGRSS=t.readByte(),n.bossName=t.readString(),n.bosshead=t.readString(),this.datas[i]=n
}SortUtil.sortOn(this.datas,["index"])},e.prototype.getBossDataByBossIndex=function(t){for(var e=0,i=this.datas;e<i.length;e++){var n=i[e];if(n.index==t)return n}},e.prototype.getBossDataByIndex=function(t){return this.datas[t]},e.prototype.canReward=function(){for(var t=!1,e=0,i=this.datas;e<i.length;e++){var n=i[e];if(n.canReward()){t=!0;break}}return t},e}(ActDataBase);__reflect(ActData21_1.prototype,"ActData21_1");var ActData21BossData=function(){function t(){this.index=1,this.killerName="",this.stateQFSS=0,this.stateGRSS=0,this.bossName="",this.bosshead=""}return t.prototype.canReward=function(){return 1==this.stateQFSS||1==this.stateGRSS},t.prototype.notReward=function(){return 0==this.stateQFSS||0==this.stateGRSS},t}();__reflect(ActData21BossData.prototype,"ActData21BossData"),window.ActData21_1=ActData21_1;var ActData22_1=function(t){function e(){var e=t.call(this)||this;return e.buyDatas=[],e}return __extends(e,t),e.prototype.parser=function(t){this.buyDatas.length=t.readShort();for(var e=0;e<this.buyDatas.length;e++){var i=this.buyDatas[e]=this.buyDatas[e]||new BuyData22;i.count=t.readShort(),i.actId=this.actId,i.configIndex=e+1}},e.prototype.getBuyDataByIndex=function(t){return this.buyDatas[t]},e.prototype.parserChange=function(t){var e=t.readShort(),i=this.buyDatas[e-1];return i.count=t.readInt(),this.changIndex},e.prototype.getConfigs=function(){return this.configs||(this.configs=Cfg.getConfigs(ActivityType22Config,this.actId,CondType.ALL))},e.prototype.canReward=function(){return!1},e.prototype.completeReward=function(){return!this.canBuy()},e.prototype.getDateText=function(t){return getFormatTime(t,"hh小时mm分ss秒")},e.prototype.getformatTime=function(t){void 0===t&&(t=Actor.ins().serverTime);var e="",i=this.jiesuanTime-Actor.ins().serverTime;return i=i>0?i:0,e=""+Lang.common_str11+StrUtil.addColor(getFormatTime(i/1e3,"dd天hh小时mm分钟ss秒"),65400)},e.prototype.canBuy=function(){for(var t=!1,e=0,i=this.buyDatas;e<i.length;e++){var n=i[e];if(t=n.canBuy())break}return t},e.prototype.getRpKeyValues=function(){for(var t=[],e=0,i=this.buyDatas;e<i.length;e++){var n=i[e],a=new KeyValue;a.key=n.configIndex.toString(),a.value=n.redPoint(),t.push(a)}return t},e}(ActDataBase);__reflect(ActData22_1.prototype,"ActData22_1");var BuyData22=function(){function t(){this.count=0,this.actId=0,this.configIndex=0}return Object.defineProperty(t.prototype,"leftCount",{get:function(){return this.config.count-this.count},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"config",{get:function(){return this.conf||(this.conf=Cfg.getConfig(ActivityType22Config,this.actId,this.configIndex))},enumerable:!0,configurable:!0}),t.prototype.canBuy=function(){return this.leftCount>0},t.prototype.redPoint=function(){return 2003==this.actId?this.canBuy()&&GFunc.isConsumeEnoughByItemId(this.config.currencyType,this.config.price):this.config.serverOpenDay==Actor.ins().serverOpenDay&&!this.hasSee&&this.canBuy()},Object.defineProperty(t.prototype,"index",{get:function(){return this.configIndex-1},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"hasSee",{get:function(){return this.getDic()[this.index]},set:function(t){this.getDic()[this.index]=t},enumerable:!0,configurable:!0}),t.prototype.getDic=function(){return t.hasSeeDic[this.actId]||(t.hasSeeDic[this.actId]=[])},t.hasSeeDic={},t}();__reflect(BuyData22.prototype,"BuyData22"),window.ActData22_1=ActData22_1;var TimerType;!function(t){t[t.FIRST=0]="FIRST",t[t.LAST=1]="LAST",t[t.NONE=2]="NONE"}(TimerType||(TimerType={}));var SortType;!function(t){t[t.up=0]="up",t[t.down=1]="down"}(SortType||(SortType={}));var MapCellSize;!function(t){t[t.size=64]="size"}(MapCellSize||(MapCellSize={}));var MapInfo=function(){function t(){}return t}();__reflect(MapInfo.prototype,"MapInfo");var SDisType;!function(t){t[t.circle=0]="circle",t[t.ellipse=1]="ellipse",t[t.octagon=2]="octagon",t[t.octagon2=3]="octagon2"}(SDisType||(SDisType={}));var MoveDir;!function(t){t[t.R_To_L=0]="R_To_L",t[t.L_To_R=1]="L_To_R",t[t.U_To_D=2]="U_To_D",t[t.D_To_U=3]="D_To_U"}(MoveDir||(MoveDir={}));var MoverBSE=function(t){function e(e){var i=t.call(this,e)||this;return i.p=[i.fromXY,new XY(0,0),i.toXY],i}return __extends(e,t),e.prototype.updateMoveParam=function(){var t=this.toXY.x-this.fromXY.x,e=this.toXY.y-this.fromXY.y,i=Math.sqrt(t*t+e*e);this.p[1]=this.getP1ByP0P2(this.fromXY,this.toXY,.4*i)},e.prototype.updateXY=function(t){var e=(t-this.startTick,Math.max(Math.min((t-this.startTick)/(this.endTick-this.startTick),1),0));this.curXY.x=(1-e)*(1-e)*this.p[0].x+2*e*(1-e)*this.p[1].x+e*e*this.p[2].x,this.curXY.y=(1-e)*(1-e)*this.p[0].y+2*e*(1-e)*this.p[1].y+e*e*this.p[2].y,this.disObj&&(this.disObj.x=this.curXY.x,this.disObj.y=this.curXY.y)},e.prototype.getP1ByP0P2=function(t,e,i){var n=new XY;return n.x=Math.min(t.x+3*(e.x-t.x)/5),n.y=Math.min(e.y,t.y-i),n},e}(MoverBase);__reflect(MoverBSE.prototype,"MoverBSE");var ActData23_3=function(t){function e(){return t.call(this)||this}return __extends(e,t),e.prototype.getConfig=function(e){return t.prototype.getConfig.call(this,e)},e.prototype.getSqId=function(){var t=Cfg.getItemCfg(this.getConfig(1).reward[0].id);return t.huanhuaId},e.prototype.getSzId=function(){var t=Cfg.getItemCfg(this.getConfig(2).reward[0].id);return t.huanhuaId},e.prototype.getWingId=function(){var t=Cfg.getItemCfg(this.getConfig(3).reward[0].id);return t.huanhuaId},e.prototype.getDamonId=function(){var t=Cfg.getItemCfg(this.getConfig(4).reward[0].id);return t.huanhuaId},e.prototype.getMeilinId=function(){var t=Cfg.getItemCfg(this.getConfig(5).reward[0].id);return t.huanhuaId},e}(ActData23_2);__reflect(ActData23_3.prototype,"ActData23_3"),window.ActData23_3=ActData23_3;var ActData23_4=function(t){function e(){return t.call(this)||this}return __extends(e,t),e.prototype.getCurDayConfig=function(){return this.getConfig(this.curDay)},e.prototype.curDayRewardState=function(){return this.chongs[this.curDay-1]},e}(ActData23_1);__reflect(ActData23_4.prototype,"ActData23_4"),window.ActData23_4=ActData23_4;var ActData24_1=function(t){function e(){var e=t.call(this)||this;return e.chong=0,e.xiao=0,e}return __extends(e,t),e.prototype.getConfigs=function(){return this.configs||(this.configs=Cfg.getConfigs(ActivityType24Config,this.actId,CondType.NONE))},e.prototype.getCondition=function(t){var e=t;return this.xiao>=e.consume},e}(ActDataBase);__reflect(ActData24_1.prototype,"ActData24_1"),window.ActData24_1=ActData24_1;var ActData25_1=function(t){function e(){var e=t.call(this)||this;return e.chouCount=0,e.rewarIndex=1,e.zuanshi=0,e}return __extends(e,t),e.prototype.parser=function(t){this.chouCount=t.readInt()},e.prototype.parserLuckDraw=function(t){this.rewarIndex=t.readByte(),this.zuanshi=t.readInt(),this.chouCount=t.readInt()},e.prototype.getConfigs=function(){return this.configs||(this.configs=Cfg.getConfigs(ActivityType25Config,this.actId,CondType.NONE))},e.prototype.canReward=function(){return this.getChouJiang()>0},e.prototype.getChouJiangYb=function(){var t=this.getConfig(this.chouCount+1);return t?t.base:0},e.prototype.getChouJiang=function(){var t=0,e=0,i=this.getConfigs();for(var n in i)i[n].pay<=this._commonData&&(t=i[n].index),e<i[n].index&&(e=i[n].index);return t=e<=this.chouCount?-1:t-this.chouCount},e.prototype.getYB=function(){var t=0,e=this.getConfigs();for(var i in e)if(e[i].pay>this._commonData){t=e[i].pay-this._commonData;break}return t>0?t:0},e}(ActDataBase);__reflect(ActData25_1.prototype,"ActData25_1"),window.ActData25_1=ActData25_1;var ActData25Log=function(){function t(){this.time=0,this.palyName="",this.multiple=0,this.zuanshi=0}return t.prototype.parser=function(t){this.time=DateUtil.formatMiniDateTime(t.readInt()),this.palyName=t.readString(),this.multiple=t.readDouble(),this.zuanshi=t.readInt()},t}();__reflect(ActData25Log.prototype,"ActData25Log");var ActData26_1=function(t){function e(){var e=t.call(this)||this;return e.actBuyDatas=[],e}return __extends(e,t),e.prototype.parser=function(t){for(var e=t.readByte(),i=0;e>i;i++){var n=new ActBuyData26_1;n.index=t.readByte(),n.buyCount=t.readShort(),n.remind=t.readByte(),this.actBuyDatas.push(n)}},e.prototype.parserChange=function(t){var e=t.readShort(),i=t.readShort();if(0==i){var n=t.readShort(),a=this.actBuyDatas[e-1];a&&(a.buyCount=n)}else{var o=t.readShort(),a=this.actBuyDatas[e-1];a&&(a.remind=o)}return this.changIndex},e.prototype.getConfigs=function(){return this.configs||(this.configs=Cfg.getConfigs(ActivityType26Config,this.actId,CondType.NONE))},e.prototype.getCondition=function(t){var e=t,i=this.actBuyDatas[e.index-1],n=e.daycount.count-i.buyCount>0&&1==i.remind;return GFunc.getItemCount(e.needitem)>=e.needcount&&n},e.prototype.getItemDatas=function(){var t=this.getConfigs(),e=[];for(var i in t){var n=new ActDataItem26_1(t[i],this.getRewardStateById(t[i].index),this.actId,this.getActOpenState()),a=this.actBuyDatas[n.index-1];a&&(n.buyCount=a.buyCount,n.remind=a.remind),e.push(n)}return e},e.prototype.getformatTime=function(e){return void 0===e&&(e=Actor.ins().serverTime),StrUtil.addColor(t.prototype.getformatTime.call(this)+"(请记得在活动时间内兑换哦)",5767068)},e}(ActDataBase);__reflect(ActData26_1.prototype,"ActData26_1"),window.ActData26_1=ActData26_1;var ActDataItem26_1=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.index=1,e.buyCount=0,e.remind=0,e}return __extends(e,t),e.prototype.canBuy=function(){this.config;return this.buyCount<this.config.daycount.count||0==this.config.daycount.count},e.prototype.getLeftBuyCount=function(){var t=this.config;return 0==t.daycount.count?9999:t.daycount.count-this.buyCount},e.prototype.getBuyData=function(){var t=this.config,e=new BuyData;return e.setBuyFun(function(e){ActSys.ins().sendReward(t.id,t.index,0,e)}),e.itemId=t.itemid,e.price=t.needcount,e.consumeItemId=t.needitem,e.limitCount=this.getLeftBuyCount(),e},e}(ActDataItem);__reflect(ActDataItem26_1.prototype,"ActDataItem26_1"),window.ActDataItem26_1=ActDataItem26_1;var ActBuyData26_1=function(){function t(){this.index=1,this.buyCount=0,this.remind=0}return t}();__reflect(ActBuyData26_1.prototype,"ActBuyData26_1"),window.ActBuyData26_1=ActBuyData26_1;var ActData27_1=function(t){function e(){var e=t.call(this)||this;return e.cishu=[],e.recharge=0,e}return __extends(e,t),e.prototype.parser=function(t){for(var e=t.readByte(),i=0;e>i;i++)this.cishu[i]=t.readByte();this.record=t.readInt(),this.recharge=t.readInt()},e.prototype.parserUpdate=function(t){for(var e=t.readByte(),i=0;e>i;i++)this.cishu[i]=t.readByte();this.recharge=t.readInt()},e.prototype.getConfigs=function(){return this.configs||(this.configs=Cfg.getConfigs(ActivityType27Config,this.actId,CondType.NONE))},e.prototype.getCondition=function(t){var e=t;return this.cishu[t.index-1]>=e.condition},e.prototype.getItemDatas=function(){var t=this.getConfigs(),e=[];for(var i in t){var n=new ActDataItem27_1(t[i],this.getRewardStateById(t[i].index),this.actId,this.getActOpenState());n.count=this.cishu[n.index-1],e.push(n)}return e},e}(ActDataBase);__reflect(ActData27_1.prototype,"ActData27_1"),window.ActData27_1=ActData27_1;var ActDataItem27_1=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.count=0,e}return __extends(e,t),e}(ActDataItem);__reflect(ActDataItem27_1.prototype,"ActDataItem27_1"),window.ActDataItem27_1=ActDataItem27_1;var MoverLine=function(t){function e(e){return t.call(this,e)||this}return __extends(e,t),e.prototype.updateXY=function(t){var e=t-this.startTick;this.curXY.x=this.fromXY.x+(this.toXY.x-this.fromXY.x)*(e/this.totleTime),this.curXY.y=this.fromXY.y+(this.toXY.y-this.fromXY.y)*(e/this.totleTime),this.disObj&&(this.disObj.x=this.curXY.x,this.disObj.y=this.curXY.y)},e}(MoverBase);__reflect(MoverLine.prototype,"MoverLine");var ActData3_2=function(t){function e(){var e=t.call(this)||this;return e.tabDatas=[Act3_2TabType.JYJC,Act3_2TabType.XSZD,Act3_2TabType.EMYS,Act3_2TabType.JYFB,Act3_2TabType.HRW],e.recordJifen=0,e}return __extends(e,t),e.prototype.getItemDatasByType=function(t){var e=this.getConfigs(),i=[];for(var n in e)if(e[n].taskType==t){var a=new ActDataItem3_2(e[n],this.getRewardStateById(e[n].index),this.actId,this.getActOpenState());a.jindu=this.getJindu(e[n].index),i.push(a)}return i},e.prototype.canReward=function(){var t=this.getConfigs();for(var e in t)if(0==this.deCodeRecord(t[e].index)&&this.getCondition(t[e]))return!0;for(var i=Cfg.getConfig(ActivityCommonConfig).xsjjJifeng,n=0;n<i.length;n++){var a=i[n];if(this.jifen>=a&&0==this.deCodeJiFen(n+1))return!0}return!1},e.prototype.canRewardByType=function(t){var e=this.getConfigs();for(var i in e)if(t==e[i].taskType&&0==this.deCodeRecord(e[i].index)&&this.getCondition(e[i]))return!0;return!1},e.prototype.getTabIndexByType=function(){var t=this.getConfigs();for(var e in t)if(0==this.deCodeRecord(t[e].index)&&this.getCondition(t[e]))return this.tabDatas.indexOf(t[e].taskType);return 0},e.prototype.deCodeJiFen=function(t){return this.recordJifen>>t&1},e}(ActData3_1);__reflect(ActData3_2.prototype,"ActData3_2");var ActDataItem3_2=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.jindu=0,e}return __extends(e,t),e}(ActDataItem);__reflect(ActDataItem3_2.prototype,"ActDataItem3_2");var Act3_2TabType;!function(t){t[t.JYJC=1]="JYJC",t[t.XSZD=2]="XSZD",t[t.EMYS=3]="EMYS",t[t.JYFB=4]="JYFB",t[t.HRW=5]="HRW"}(Act3_2TabType||(Act3_2TabType={})),window.ActData3_2=ActData3_2;var ActData3_3=function(t){function e(){return t.call(this)||this}return __extends(e,t),e.prototype.canReward=function(){var t=this.getConfigs();for(var e in t)if(0==this.deCodeRecord(t[e].index)&&this.getCondition(t[e]))return!0;for(var i=Cfg.getConfigs(ActivityType3exConfig,this.actId),n=0;n<i.length;n++){var a=this.canGetAward(n);if(a)return a}return!1},e.prototype.canGetAward=function(t){return this.isHighdianEnough(t)&&!this.hasGetAward(t)},e.prototype.isHighdianEnough=function(t){var e=Cfg.getConfigs(ActivityType3exConfig,this.actId);return this.jifen>=e[t].jifen},e.prototype.hasGetAward=function(t){return 1==this.deCodeJiFen(t)},Object.defineProperty(e.prototype,"recordJifen",{get:function(){return this._commonData},enumerable:!0,configurable:!0}),e.prototype.deCodeJiFen=function(t){return this.recordJifen>>t+1&1},e.prototype.getformatTime=function(e){return void 0===e&&(e=Actor.ins().serverTime),Lang.common_str11+addColor(t.prototype.getformatTime.call(this),5767068)},e.prototype.getTaskTypes=function(){var t=Cfg.getConfigs(ActivityType3Config,this.actId),e=[];for(var i in t){var n=t[i];-1==e.indexOf(n.taskType)&&e.push(n.taskType)}return e},e.prototype.getNextConfigByTaskType=function(t){for(var e,i=Cfg.getConfigs(ActivityType3Config,this.actId,CondType.Equal,ActivityType3Config.taskType,t),n=0,a=i;n<a.length;n++){var o=a[n],s=this.getJindu(o.index),r=Cfg.getConfig(GuildConveneTaskConfig,o.taskid);if(e=o,0==(s>=r.target&&this.deCodeRecord(o.index))||s<r.target&&1==this.deCodeRecord(o.index))break}return e},e.prototype.isFinish=function(t){for(var e=Cfg.getConfigs(ActivityType3Config,this.actId,CondType.Equal,ActivityType3Config.taskType,t),i=!1,n=0,a=e;n<a.length;n++){var o=a[n];if(Cfg.getConfig(GuildConveneTaskConfig,o.taskid).target==this.getJindu(o.index)&&0==this.deCodeRecord(o.index)){i=!0;break}}return i},e.prototype.isAllDone=function(t){for(var e=Cfg.getConfigs(ActivityType3Config,this.actId,CondType.Equal,ActivityType3Config.taskType,t),i=0,n=0,a=e;n<a.length;n++){var o=a[n];this.getJindu(o.index)>=Cfg.getConfig(GuildConveneTaskConfig,o.taskid).target&&1==this.deCodeRecord(o.index)&&i++}return i==e.length},e}(ActData3_1);__reflect(ActData3_3.prototype,"ActData3_3"),window.ActData3_3=ActData3_3;var ActData3_4=function(t){function e(){return t.call(this)||this}return __extends(e,t),e.prototype.canReward=function(){var t=this.getConfigs();for(var e in t)if(0==this.deCodeRecord(t[e].index)&&this.getCondition(t[e]))return!0;for(var i=Cfg.getConfigs(ActivityType3exConfig,this.actId),n=0;n<i.length;n++){var a=this.canGetAward(n);if(a)return a}return!1},e.prototype.canGetAward=function(t){return this.isHighdianEnough(t)&&!this.hasGetAward(t)},e.prototype.isHighdianEnough=function(t){var e=Cfg.getConfigs(ActivityType3exConfig,this.actId);return this.jifen>=e[t].jifen},e.prototype.hasGetAward=function(t){return 1==this.deCodeJiFen(t)},Object.defineProperty(e.prototype,"recordJifen",{get:function(){return this._commonData},enumerable:!0,configurable:!0}),e.prototype.deCodeJiFen=function(t){return this.recordJifen>>t+1&1},e.prototype.getformatTime=function(e){return void 0===e&&(e=Actor.ins().serverTime),Lang.common_str11+addColor(t.prototype.getformatTime.call(this),5767068)},e.prototype.getTaskTypes=function(){var t=Cfg.getConfigs(ActivityType3Config,this.actId),e=[];for(var i in t){var n=t[i];-1==e.indexOf(n.taskType)&&e.push(n.taskType)}return e},e.prototype.getNextConfigByTaskType=function(t){for(var e,i=Cfg.getConfigs(ActivityType3Config,this.actId,CondType.Equal,ActivityType3Config.taskType,t),n=0,a=i;n<a.length;n++){var o=a[n],s=this.getJindu(o.index),r=Cfg.getConfig(GuildConveneTaskConfig,o.taskid);if(e=o,0==(s>=r.target&&this.deCodeRecord(o.index))||s<r.target&&1==this.deCodeRecord(o.index))break}return e},e.prototype.isFinish=function(t){for(var e=Cfg.getConfigs(ActivityType3Config,this.actId,CondType.Equal,ActivityType3Config.taskType,t),i=!1,n=0,a=e;n<a.length;n++){var o=a[n];if(Cfg.getConfig(GuildConveneTaskConfig,o.taskid).target==this.getJindu(o.index)&&0==this.deCodeRecord(o.index)){i=!0;break}}return i},e.prototype.isAllDone=function(t){for(var e=Cfg.getConfigs(ActivityType3Config,this.actId,CondType.Equal,ActivityType3Config.taskType,t),i=0,n=0,a=e;n<a.length;n++){var o=a[n];this.getJindu(o.index)>=Cfg.getConfig(GuildConveneTaskConfig,o.taskid).target&&1==this.deCodeRecord(o.index)&&i++}return i==e.length},e}(ActData3_1);__reflect(ActData3_4.prototype,"ActData3_4"),window.ActData3_4=ActData3_4;var funcLog={},ActData30_5=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return __extends(e,t),e}(ActData30_1);__reflect(ActData30_5.prototype,"ActData30_5"),window.ActData30_5=ActData30_5;var ShouquanBgTips=function(t){function e(){var e=t.call(this)||this;return e.skinName="ShouquanBgEUI",e.addBg(),e}return __extends(e,t),e.prototype.addDisplay=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];var i=!!getLocation("setLiuhai",2);PfActivitySys.ins().userInfoShowFun(i)},e.prototype.removeDisplay=function(){PfActivitySys.ins().userInfoHideFun()},e}(BaseWinSingle);__reflect(ShouquanBgTips.prototype,"ShouquanBgTips"),window.ShouquanBgTips=ShouquanBgTips;var ActData31_5=function(t){function e(){return t.call(this)||this}return __extends(e,t),e}(ActData31_1);__reflect(ActData31_5.prototype,"ActData31_5"),window.ActData31_5=ActData31_5;var RollerCircle=function(t){function e(e){return t.call(this,e)||this}return __extends(e,t),e.prototype.updateAngle=function(t){var e=(t-this.startTick)/1e3;this.curAngle=this.fromAngle+this.param.v0*e+.5*this.param.a*e*e,this.disObj&&(this.disObj.rotation=this.getRotation())},e}(RollerBase);__reflect(RollerCircle.prototype,"RollerCircle");var ActData32_5=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return __extends(e,t),e}(ActData32_1);__reflect(ActData32_5.prototype,"ActData32_5"),window.ActData32_5=ActData32_5;var RollerParam=function(){function t(t,e,i,n){void 0===n&&(n=0),this.a=0,this.v0=0,this.vt=0,this.t=0,this.s=0,this.offs=0,this.t=e,this.a=t,this.v0=i,this.offs=n,this.vt=i+this.a*this.t,this.s=this.v0*e+.5*this.a*this.t*this.t}return t}();__reflect(RollerParam.prototype,"RollerParam");var ActData33_3=function(t){function e(){return t.call(this)||this}return __extends(e,t),e}(ActData33_1);__reflect(ActData33_3.prototype,"ActData33_3"),window.ActData33_3=ActData33_3;var SkillEditor=function(t){function e(){var e=t.call(this)||this;return e.saves={},e.mcUsing=[],e.delayTime={},e.isEditorMode=!1,egret.startTick(e.onEnterFrame,e),e}return __extends(e,t),e.ins=function(){return t.getIns.call(this,e)},e.prototype.onEnterFrame=function(t){for(var e=Timer.ins().getRateTime(),i=0,n=this.mcUsing;i<n.length;i++){var a=n[i];a.parent&&a.visible&&a.updateTick(e)}return!1},e.prototype.play=function(t){var e=this;if(!t.isShow&&this.getDelay(t.effectId)>0)return void(t.hitFun&&Timer.ins()["do"](this.getDelay(t.effectId),0,1,function(){t.hitFun()},this));for(var i=t.configs,n=new SkillEditorConfig,a=[],o=0;o<i.length;o++){var s=i[o];s.__proto__=n;for(var r=s.delay.toString(),u=r.split(","),h=void 0,l=t.selectIndex==o?1:0,p=0,c=u;p<c.length;p++){var d=c[p];h=new SkillEditorConfig,h.read(s),h.isSelected=l,h.index=o,h.playDelay=parseInt(d),a.push(h)}}t.startTick=Timer.ins().getEgretTimer();for(var g=function(i){var n=a[i],o=n.playDelay/t.sender.rate||1;Timer.ins()["do"](o,0,1,function(){if(2==n.type||95==n.type)t.playSound(n.effectId);else if(3==n.type||99==n.type)99==n.type?t.hitFun():3==n.type&&n.hit&&(t.endTick=Timer.ins().getEgretTimer(),e.saveDelay(t.effectId,t.dTick),t.hitFun());else if(0==n.type||1==n.type||4==n.type||5==n.type){var i="";if(n.isDir){i=DirUtil.get5DirBy8Dir(t.sender.dir).toString();var a=parseInt(i),s=n.isDirParam.length;s>0&&(i=n.isDirParam.charAt(a))}var r=t.effResDir+n.effectId+i,u=""+(r+t.append),h=e.getMc(u);h.setIndex(n.index),h.rate=n.isRate?t.sender.rate*n.rate:n.rate;var l=t.sender.dir,p=DirUtil.get5DirBy8Dir(l);h.scaleX=n.getValueByDir5(p,"scaleX")*(n.isDir&&DirUtil.isScaleX(l)?-1:1),h.scaleY=n.getValueByDir5(p,"scaleY"),h.alpha=n.alpha,h.anchorOffsetX=n.getValueByDir5(p,"cx"),h.anchorOffsetY=n.getValueByDir5(p,"cy"),n.isSelected&&(h.filters=DisUtil.grayFilter());var c=0;c=t.sender.x==t.target.x&&t.sender.y==t.target.y?t.sender.dir*Math.PI/4-Math.PI/2:MathUtil.getRadianByP(t.sender,t.target);var d=MathUtil.getAngle(c),g=MathUtil.getRadian(n.rotation),f=new XY(n.getValueByDir5(p,"x"),n.getValueByDir5(p,"y"));if(n.r){var y=MathUtil.radom(0,n.getValueByDir5(p,"r")),m=MathUtil.radom(0,2*Math.PI);f.x+=Math.cos(m)*y,f.y+=Math.sin(m)*y}var C=new XY(f.x,f.y);if(n.isRot){var v=e.getStartFlyXY(n,d);C.x+=v.x,C.y+=v.y}h.x=t.sender.x+C.x,h.y=t.sender.y+C.y,n.isFollowRot?h.rotation=MathUtil.getAngle(c+g):h.rotation=n.rotation,h.playFile(r+t.append,n.playCount,function(){e.removeMC(h)});var S=n.layer;if(n.isLayerByDir&&(2==n.layer||3==n.layer)){var b=t.sender.dir;(0==b||1==b||7==b)&&(S=1)}if(n.isShow&&(t.getLayerByIndex(S).addChild(h),t.isMiddleLayer(S)&&h.setSortDy()),1==n.type||4==n.type||5==n.type){var I=void 0;if(1==n.type){var _=d;n.isRot&&(_+=n.rotation);var w=void 0;w=n.dis?n.dis:MathUtil.getDistance(t.sender,t.target),I=MathUtil.getDirMove(_,w,h.x,h.y)}else if(4==n.type)I=n.endX||n.endY?new XY(t.sender.x+n.endX,t.sender.y+n.endY):t.target;else if(5==n.type){var _=DirUtil.dirToAngle(t.sender.dir),w=void 0;w=n.dis?n.dis:MathUtil.getDistance(t.sender,t.target),I=MathUtil.getDirMove(_,w,h.x,h.y)}h.setCompleteFunc(function(){e.removeMC(h),n.hit&&t.hitFun&&(t.endTick=Timer.ins().getEgretTimer(),e.saveDelay(t.effectId,t.dTick),t.hitFun())},e),h.moveTo(Timer.ins().getRateTime(),I,n.moveSpeed)}if(n.tween&&n.tween.length>0){var D=egret.Tween.get(h),T=new TweenParam;T.readConfig(n,l);var B=Math.max(0,T.startDelay-o);B>0&&(D=D.wait(B));var R=T.endDelay-T.startDelay;R>0&&D.to(T.getTweenParam(),R).call(function(){})}}},f)},f=this,o=0;o<a.length;o++)g(o)},e.prototype.getStartFlyXY=function(t,e){var i=new XY,n=t.sDis.toString().split(",");switch(t.sDisType){case SDisType.circle:default:var a=parseInt(n[0]),o=parseInt(n[1]);o&&(e+=o),a&&(i=MathUtil.getDirMove(e,a));break;case SDisType.ellipse:var s=Math.abs(parseInt(n[0])),r=Math.abs(parseInt(n[1])),u=Math.pow(s,2),h=Math.pow(r,2),l=Math.pow(Math.tan(e),2);i.x=1/Math.sqrt(1/u+l/h),i.y=1/Math.sqrt(l/u+1/h);break;case SDisType.octagon:var p=DirUtil.angleToDir(e),c=45*p-90,d=n[1]?parseInt(n[1]):0;i=MathUtil.getDirMove(c+d,parseInt(n[0]));break;case SDisType.octagon2:var p=DirUtil.angleToDir(e),g=n[2*p]||"0",f=n[2*p+1]||"0";i.x=parseInt(g),i.y=parseInt(f)}return i},e.prototype.getMc=function(t){var e;return e=this.isEditorMode?new MCEditor:new MC,this.mcUsing.push(e),e},e.prototype.removeMC=function(t){t.reset(),DisUtil.remove(t),egret.Tween.removeTweens(t);var e=this.mcUsing.indexOf(t);e>=0&&this.mcUsing.splice(e,1)},e.prototype.playFlyNumberByCfg=function(t,e,i,n){void 0===n&&(n=null);for(var a=new TweenConfig,o=(e.dir,egret.Tween.get(t)),s=0,r=0,u=i;r<u.length;r++){var h=u[r];if(h.__proto__=a,t.x=h.x*(DirUtil.isScaleX(e.dir)?-1:1)+e.x,t.y=h.y+e.y,h.r){var l=MathUtil.radom(0,h.r),p=MathUtil.radom(0,2*Math.PI);t.x+=Math.cos(p)*l,t.y+=Math.sin(p)*l}var c=h.startDelay-s;c>0&&(o=o.wait(c));var d=h.endDelay-h.startDelay;d>0&&(o=o.to(h.getTweenParam(e),d)),s=h.endDelay}n||(n=function(){DisUtil.remove(t)}),o.call(n)},e.prototype.clear=function(t){void 0===t&&(t=1);for(var e=0,i=this.mcUsing;e<i.length;e++){var n=i[e];this.removeMC(n)}this.mcUsing.length=0;for(var a in this.saves){var o=this.saves[a];o.length&&(o.length=t)}Timer.ins().removeAll(this)},e.prototype.stop=function(){Timer.ins().removeAll(this)},e.prototype.saveDelay=function(t,e){this.delayTime[t]=e},e.prototype.getDelay=function(t){return this.delayTime[t]||0},e}(BaseIns);__reflect(SkillEditor.prototype,"SkillEditor"),window.SkillEditor=SkillEditor;var ActData34_2=function(t){function e(){var e=t.call(this)||this;return e.state=0,e.szId=0,e.sqId=0,e.wingId=0,e.meilinId=0,e}return __extends(e,t),e.prototype.parserRankData=function(e){t.prototype.parserRankData.call(this,e),this.firstData=this.rankDatas[0]},e.prototype.parserRankAppearance=function(t){this.state=t.readByte(),this.state>0&&(this.job=t.readByte(),this.sex=t.readByte(),this.szId=t.readInt(),this.sqId=t.readInt(),this.wingId=t.readInt(),t.readInt(),t.readInt(),t.readInt(),t.readInt(),this.meilinId=t.readInt())},e}(ActData34_1);__reflect(ActData34_2.prototype,"ActData34_2"),window.ActData34_2=ActData34_2;var ActData34_3=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return __extends(e,t),e}(ActData34_1);__reflect(ActData34_3.prototype,"ActData34_3"),window.ActData34_3=ActData34_3;var ActData35_1=function(t){function e(){var e=t.call(this)||this;return e.count=0,e.logs=[],e.mylogs=[],e.rewards=[],e.rewardIndex=1,e.weightDec="",e.isinitRobot=!1,e}return __extends(e,t),e.prototype.parser=function(t){this.count=t.readInt(),this.isinitRobot||(this.initRobotLogs(),this.isinitRobot=!0)},e.prototype.initRobotLogs=function(){for(var t=this.getConfig(),e=0;e<t.robotNemas.length;e++){var i=t.rewardlogs[e],n=new ActDataLog35_1;n.update(Actor.ins().serverName+"."+t.robotNemas[e],i.id,i.count),this.logs.push(n)}},e.prototype.parserLuckDraw=function(t){this.rewards.length=0,this.rewardIndex=t.readByte(),this.count=t.readShort();for(var e=t.readByte(),i=0;e>i;i++){var n=new ItemDataReward;n.parser2(t),this.rewards.push(n)}},e.prototype.getConfig=function(){return Cfg.getConfig(ActivityType35ClientConfig,this.actId)},e.prototype.canReward=function(){return!1},e.prototype.redPoint=function(){return this.count>0?!0:t.prototype.redPoint.call(this)},e.prototype.isTips=function(t){for(var e=this.getConfig(),i=0;i<e.reward.length;i++){var n=e.reward[i];if(n.id==t.id&&n.count==t.count&&e.itemIds.indexOf(i+1)>=0)return!0}return!1},e.prototype.getWeightDec=function(){if(""==this.weightDec){this.weightDec=Lang.act_str151;var t=this.getConfig().reward.concat();SortUtil.sortOn(t,["rate"],[SortType.up]);for(var e=0;e<t.length;e++){var i=GFunc.creatItemDataByReward(t[e]),n=t[e].rate;this.weightDec+=addColor(i.cfg.getName()+"*"+t[e].count+"   "+Math.ceil(n/100)+"%",GConst.PZColor[i.quality])+"\n"}}return this.weightDec},e.prototype.getMyDec=function(){for(var t="",e=0,i=this.mylogs;e<i.length;e++){var n=i[e];t+=n.getMyDec()+"\n"}return t},e}(ActDataBase);__reflect(ActData35_1.prototype,"ActData35_1"),window.ActData35_1=ActData35_1;var ActDataLog35_1=function(){function t(){this.roleName="",this.itemId=0,this.count=0}return t.prototype.update=function(t,e,i){this.roleName=t,this.itemId=e,this.count=i},t.prototype.getWorldDec=function(){var t=GFunc.creatUnknown(this.itemId,this.count),e=Lang.act_str75.replace("$name$",addColor(this.roleName,5767068)),i=t.cfg.type==ItemType.ZSDB?"":"*"+this.count;return e=e.replace("$item$",addColor(""+t.cfg.getName()+i,GConst.PZColor[t.quality]))},t.prototype.getMyDec=function(){var t=GFunc.creatUnknown(this.itemId,this.count),e=Lang.act_str76.replace("$str$",addColor(t.cfg.getName()+"*"+this.count,GConst.PZColor[t.quality]));return e},t}();__reflect(ActDataLog35_1.prototype,"ActDataLog35_1"),window.ActDataLog35_1=ActDataLog35_1;var SkillEditorConfig=function(){function t(){this.isSelected=0,this.isShow=1,this.index=0,this.effectId="",this.type=0,this.delay="0",this.playDelay=0,this.layer=3,this.isLayerByDir=0,this.x="0",this.y="0",this.r="0",this.cx="0",this.cy="0",this.alpha=1,this.scaleX="1",this.scaleY="1",this.rotation=0,this.isRot=0,this.isFollowRot=1,this.isDir=0,this.isDirParam="",this.rate=1,this.playCount=1,this.isRate=0,this.moveSpeed=100,this.dis=0,this.sDisType=SDisType.circle,this.sDis="0",this.sDis2=0,this.hit=0,this.endX=0,this.endY=0,this.tween=[]}return t.prototype.read=function(t){this.copy(t),this.hit=t.hit,this.isShow=t.isShow},t.prototype.copy=function(t){this.type=t.type,this.delay=t.delay,this.playDelay=t.playDelay,this.layer=t.layer,this.isLayerByDir=t.isLayerByDir,this.effectId=t.effectId,this.x=t.x,this.y=t.y,this.r=t.r,this.cx=t.cx,this.cy=t.cy,this.alpha=t.alpha,this.scaleX=t.scaleX,this.scaleY=t.scaleY,this.rotation=t.rotation,this.isRot=t.isRot,this.isFollowRot=t.isFollowRot,this.isDir=t.isDir,this.isDirParam=t.isDirParam,this.rate=t.rate,this.playCount=t.playCount,this.isRate=t.isRate,this.moveSpeed=t.moveSpeed,this.dis=t.dis,this.sDis=t.sDis,this.sDis2=t.sDis2,this.sDisType=t.sDisType,this.endX=t.endX,this.endY=t.endY;for(var e=0,i=t.tween;e<i.length;e++){var n=i[e],a=new TweenParam;a.alpha=n.alpha,a.rotation=n.rotation,a.scaleX=n.scaleX,a.scaleY=n.scaleY,a.startDelay=n.startDelay,a.endDelay=n.endDelay,this.tween.push(a)}},t.prototype.getValueByDir5=function(t,e){var i=this[e].toString().split(","),n=1==i.length?i[0]:i[t];return n.indexOf(".")>-1?parseFloat(n):parseInt(n)},t.prototype.getSaveCopy=function(){for(var e={},i=new t,n=Object.keys(this),a=0,o=n;a<o.length;a++){var s=o[a],r=this[s];if(-1==t.filterKeys.indexOf(s))if(r instanceof Array)r.length&&r[0].hasDifValue()&&(e[s]=r.concat());else{if("function"==typeof r)continue;r!=i[s]&&(e[s]=r)}}return e},t.filterKeys=["isSelected","isShow"],t}();__reflect(SkillEditorConfig.prototype,"SkillEditorConfig");var TweenParam=function(){function t(){this.x=0,this.y=0,this.r=0,this.endX=0,this.endY=0,this.endR=0,this.alpha=1,this.scaleX=1,this.scaleY=1,this.rotation=0,this.startDelay=0,this.endDelay=0}return t.prototype.copy=function(t){this.x=null!=t.x?t.x:this.x,this.y=null!=t.y?t.y:this.y,this.r=null!=t.r?t.r:this.r,this.endX=null!=t.endX?t.endX:this.endX,this.endY=null!=t.endY?t.endY:this.endY,this.endR=null!=t.endR?t.endR:this.endR,this.alpha=null!=t.alpha?t.alpha:this.alpha,this.scaleX=null!=t.scaleX?t.scaleX:this.scaleX,this.scaleY=null!=t.scaleY?t.scaleY:this.scaleY,this.rotation=null!=t.rotation?t.rotation:this.rotation,this.startDelay=null!=t.startDelay?t.startDelay:this.startDelay,this.endDelay=null!=t.endDelay?t.endDelay:this.endDelay},t.prototype.readConfig=function(t,e){t.tween&&t.tween.length&&(this.copy(t.tween[0]),this.scaleX*=t.isDir&&DirUtil.isScaleX(e)?-1:1)},t.prototype.getTweenParam=function(t){void 0===t&&(t=null);var e={};return e.alpha=this.alpha,e.scaleX=this.scaleX,e.scaleY=this.scaleY,e.rotation=this.rotation,e},t.prototype.hasDifValue=function(){var e=new t;return this.x!=e.x||this.y!=e.y||this.r!=e.r||this.endX!=e.endX||this.endY!=e.endY||this.endR!=e.endR||this.alpha!=e.alpha||this.scaleX!=e.scaleX||this.scaleY!=e.scaleY||this.rotation!=e.rotation||this.startDelay!=e.startDelay||this.endDelay!=e.endDelay},t}();__reflect(TweenParam.prototype,"TweenParam");
var TweenConfig=function(t){function e(){return t.call(this)||this}return __extends(e,t),e.prototype.getTweenParam=function(e){var i,n,a=t.prototype.getTweenParam.call(this);this.endR&&(i=MathUtil.radom(0,this.endR),n=MathUtil.radom(0,2*Math.PI));var o=this.endX;o=e.x+this.endX*(DirUtil.isScaleX(e.dir)?-1:1),this.endR&&(o+=Math.cos(n)*i),a.x=o;var s=Math.floor(.5*this.endY)+e.y;return this.endR&&(s+=Math.cos(n)*i),a.y=s,a},e.prototype.getSaveCopy=function(){for(var t={},i=new e,n=Object.keys(this),a=0,o=n;a<o.length;a++){var s=o[a],r=this[s];r!=i[s]&&(t[s]=r)}return t},e}(TweenParam);__reflect(TweenConfig.prototype,"TweenConfig");var ActData36_2=function(t){function e(){var e=t.call(this)||this;return e.myRank=0,e.myMeiLiValue=0,e}return __extends(e,t),e.prototype.getConfigs=function(){return this.configs||(this.configs=Cfg.getConfigs(ActivityType36Config,this.actId,CondType.NONE))},e.prototype.getItemDatas=function(){var t=this.getConfigs(),e=[];for(var i in t){var n=new ActDataItem36_2(t[i],this.getRewardStateById(t[i].index),this.actId,this.getActOpenState());n.config=t[i],e.push(n)}return e},e}(ActDataBase);__reflect(ActData36_2.prototype,"ActData36_2"),window.ActData36_2=ActData36_2;var ActDataItem36_2=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return __extends(e,t),e}(ActDataItem);__reflect(ActDataItem36_2.prototype,"ActDataItem36_2");var ActData37_1=function(t){function e(){var e=t.call(this)||this;return e.myMeiLiValue=0,e.senMeiLidiValue=0,e.tuijianDatas=[],e.renqiDatas=[],e.benfuDatas=[],e.logDatas1=[],e.logDatas2=[],e}return __extends(e,t),e.prototype.parserUpdate=function(t){var e=2;this.tuijianDatas.length=0;for(var i=0;e>i;i++){var n=new ActData37_1Player(this.actId);this.tuijianDatas[i]=n}e=3,this.renqiDatas.length=0;for(var i=0;e>i;i++){var n=new ActData37_1Player(this.actId);this.renqiDatas[i]=n}e=3,this.benfuDatas.length=0;for(var i=0;e>i;i++){var n=new ActData37_1Player(this.actId);this.benfuDatas[i]=n}e=t.readByte();for(var i=0;e>i;i++){var n=this.tuijianDatas[i]||new ActData37_1Player(this.actId);n.parser(t),this.tuijianDatas[i]=n}e=t.readByte();for(var i=0;e>i;i++){var n=this.renqiDatas[i]||new ActData37_1Player(this.actId);n.parser(t),this.renqiDatas[i]=n}e=t.readByte();for(var i=0;e>i;i++){var n=this.benfuDatas[i]||new ActData37_1Player(this.actId);n.parser(t),this.benfuDatas[i]=n}this.senMeiLidiValue=t.readInt()},e.prototype.parserLog=function(t){var e=t.readByte();if(1==e){var i=t.readByte();this.logDatas1.length=0;for(var n=0;i>n;n++){var a=new ActData37_1Log;a.parser(t),this.logDatas1[n]=a}}else{var i=t.readByte();this.logDatas2.length=0;for(var n=0;i>n;n++){var a=new ActData37_1Log;a.parser(t),this.logDatas2[n]=a}}},e.prototype.getConfigs=function(){return this.configs||(this.configs=Cfg.getConfigs(ActivityType37Config,this.actId,CondType.NONE))},e.prototype.getformatTime=function(e){return void 0===e&&(e=Actor.ins().serverTime),Lang.common_str11+addColor(t.prototype.getformatTime.call(this),5767068)},e.prototype.redPoint=function(){for(var t=this.isOpenActivity(),e=!1,i=this.getConfigs()[1].items,n=0;n<i.length;n++){var a=i[n];GFunc.getItemCount(a)>0&&(e=!0)}return t=t&&e},e.prototype.redPointAdd=function(){return!1},e}(ActDataBase);__reflect(ActData37_1.prototype,"ActData37_1"),window.ActData37_1=ActData37_1;var ActData37_1Player=function(){function t(t){this.actId=0,this.name="",this.job=JobConst.ZhanShi,this.sex=0,this.actorid=0,this.serverid=0,this.power=0,this.zsLevel=0,this.level=0,this.actId=t}return t.prototype.parser=function(t){this.job=t.readByte(),this.sex=t.readByte(),this.name=t.readString(),this.actorid=t.readInt(),this.serverid=t.readInt(),this.zsLevel=t.readInt(),this.power=t.readDouble(),this.guildName=t.readString()},t.prototype.hasPlayer=function(){return""!=this.name},t}();__reflect(ActData37_1Player.prototype,"ActData37_1Player"),window.ActData36_1Rank=ActData36_1Rank;var ActData37_1Log=function(){function t(){this.timer=0,this.name="",this.itemId=0,this.itemCount=0}return t.prototype.parser=function(t){var e=t.readInt();this.timer=DateUtil.formatMiniDateTime(e),this.name=t.readString(),this.itemId=t.readInt(),this.itemCount=t.readInt()},t}();__reflect(ActData37_1Log.prototype,"ActData37_1Log"),window.ActData37_1Log=ActData37_1Log;var ActData4_1=function(t){function e(){var e=t.call(this)||this;return e.myRank=0,e.lastDabiao=0,e.dabiao=0,e.rankDatas=[],e}return __extends(e,t),e.prototype.getConfigs=function(){return this.configs||(this.configs=Cfg.getConfigs(ActivityType4Config,this.actId,CondType.NONE))},e.prototype.parserRankData=function(t){this.rankDatas.length=0;for(var e=t.readShort(),i=0;e>i;i++){var n=new ActDataRank4_1;n.rank=i+1,n.roleName=t.readString();var a=t.readDouble();n.power=""!=n.roleName?a:this.getConfigByRank(n.rank).value,this.rankDatas.push(n)}this.myRank=t.readShort(),this.dabiao=t.readDouble()},e.prototype.getFirstRankData=function(){return this.rankDatas[0]},e.prototype.getConfigByRank=function(t){var e,i=this.getConfigs();for(var n in i){var a=i[n];if(a.ranking[0]<=t&&t<=a.ranking[1]){e=a;break}}return e},e.prototype.getItemDatas=function(){return[]},e.prototype.getItemRankData=function(t){var e=new SevenDayRankItemData,i=RankSys.ins().getRankData(GConst.rankType[Actor.ins().serverOpenDay]).getFullDatalist().concat();this.getConfig(t);return e.config=this.getConfig(t),e.rankName=Lang.act_str9[Actor.ins().serverOpenDay],e.rankTxt=t>3?"4-20"+Lang.common_str5:"",i.length>=t?(e.playerName=i[t-1].playerName,e.rankValue=RankSys.ins().getRankNumber(i[t-1],GConst.rankType[Actor.ins().serverOpenDay])):(e.playerName=Lang.act_str11,e.rankValue=0),e},e}(ActDataBase);__reflect(ActData4_1.prototype,"ActData4_1");var ActDataRank4_1=function(){function t(){this.rank=1,this.roleName="",this.power=0}return t}();__reflect(ActDataRank4_1.prototype,"ActDataRank4_1"),window.ActData4_1=ActData4_1;var ActData5_1=function(t){function e(){var e=t.call(this)||this;return e.states=[],e.actDataItem5_1s=[],e}return __extends(e,t),e.prototype.parser=function(t){this.actDataItem5_1s.length=0;for(var e=t.readByte(),i=0;e>i;i++){var n=new ActDataItem5_1;n.id=i+1,n.klq=t.readByte(),n.yxf=t.readByte(),this.actDataItem5_1s.push(n)}},e.prototype.parserChange=function(t){var e=t.readShort()-1;return this.actDataItem5_1s[e].klq=t.readByte(),this.actDataItem5_1s[e].yxf=t.readByte(),this.changIndex},e.prototype.getConfigs=function(){return this.configs||(this.configs=Cfg.getConfigs(ActivityType5Config,this.actId,CondType.NONE))},e.prototype.canReward=function(){var t=this.getConfigs();for(var e in t){var i=t[e],n=this.actDataItem5_1s[i.index-1],a=n.klq-n.yxf;if(a>0)return!0}return!1},e.prototype.getRewardStateById=function(t){var e=this.getConfigs(),i=e[t],n=this.actDataItem5_1s[i.index-1],a=n.klq-n.yxf;return n.yxf==i.times?ActRewardState.Geted:a>0?ActRewardState.CanGet:ActRewardState.NotReached},e.prototype.getItemDatas=function(){var t=this.getConfigs(),e=[],i=0;for(var n in t){var a=new ActDataItem5_1(t[n],this.getRewardStateById(t[n].index),this.actId,this.getActOpenState());a.klq=this.actDataItem5_1s[i].klq,a.yxf=this.actDataItem5_1s[i].yxf,e.push(a),i++}return e},e}(ActDataBase);__reflect(ActData5_1.prototype,"ActData5_1");var ActDataItem5_1=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.id=0,e.klq=0,e.yxf=0,e}return __extends(e,t),e}(ActDataItem);__reflect(ActDataItem5_1.prototype,"ActDataItem5_1"),window.ActData5_1=ActData5_1;var ActData6_1=function(t){function e(){var e=t.call(this)||this;return e.rewards=[],e.rewardIndex=1,e.worldLogs=[],e.mylogs=[],e.isShowRp=!0,e.weightDec="",e}return __extends(e,t),e.prototype.parserLuckDraw=function(t){this.rewards.length=0;for(var e=t.readByte(),i=0;e>i;i++){var n=new ItemDataReward;n.parser2(t),this.rewards.push(n)}this.rewardIndex=t.readByte()},e.prototype.parserLog=function(t){var e=t.readByte();1==e?this.mylogs.length=0:2==e&&(this.worldLogs.length=0);for(var i=t.readByte(),n=0;i>n;n++){var a=new ActDataLog6_1(t.readString(),t.readInt(),t.readInt());1==e?this.mylogs.push(a):2==e&&this.worldLogs.push(a)}},e.prototype.getConfigs=function(){return this.configs||(this.configs=Cfg.getConfigs(ActivityType6Config,this.actId,CondType.NONE))},e.prototype.getConfig=function(){return this.getConfigs()[1]},e.prototype.redPoint=function(){return!1},e.prototype.canReward=function(){var t=ActSys.ins().getActivityDataByType(ActType.TYPE_9,ActSubType.TYPE_1);return(t?!t.canReward():!1)&&this.isShowRp},e.prototype.getConsume1=function(){return this.getConfig().drawcount[0][1]},e.prototype.getConsume10=function(){return this.getConfig().drawcount[1][1]},e.prototype.getRewardPool=function(){return this.getConfig().rewards},e.prototype.getWorldDec=function(){for(var t="",e=0,i=this.worldLogs;e<i.length;e++){var n=i[e];t+=n.getWorldDec()+"\n"}return t},e.prototype.getMyDec=function(){for(var t="",e=0,i=this.mylogs;e<i.length;e++){var n=i[e];t+=n.getMyDec()+"\n"}return t},e.prototype.getWeightDec=function(){if(""==this.weightDec){var t=this.getRewardPool().concat();SortUtil.sortOn(t,["per"],[SortType.up]);for(var e=0;e<t.length;e++){var i=GFunc.creatItemDataByReward(t[e]),n=i.cfg.getName();n+=i.count>1?"*"+i.count:"",this.weightDec+=addColor(n+"   "+Math.ceil(t[e].per/100)+"%",GConst.PZColor[i.quality])+"\n"}}return this.weightDec},e}(ActDataBase);__reflect(ActData6_1.prototype,"ActData6_1");var ActDataLog6_1=function(){function t(t,e,i){this.roleName="",this.itemId=0,this.count=0,this.worldDec="",this.myDec="",this.roleName=t,this.itemId=e,this.count=i}return t.prototype.getWorldDec=function(){if(""==this.worldDec){var t=GFunc.creatUnknown(this.itemId,this.count),e=Lang.act_str75.replace("$name$",addColor(this.roleName,5767068)),i=t.cfg.type==ItemType.ZSDB?"":"*"+this.count;e=e.replace("$item$",addColor(""+t.cfg.getName()+i,GConst.PZColor[t.quality])),this.worldDec=e}return this.worldDec},t.prototype.getMyDec=function(){if(""==this.myDec){var t=GFunc.creatUnknown(this.itemId,this.count);this.myDec=Lang.act_str76.replace("$str$",addColor(t.cfg.getName()+"*"+this.count,GConst.PZColor[t.quality]))}return this.myDec},t}();__reflect(ActDataLog6_1.prototype,"ActDataLog6_1");var ItemDataReward6_1=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return __extends(e,t),e}(ItemDataReward);__reflect(ItemDataReward6_1.prototype,"ItemDataReward6_1");var ActDataResult6_1=function(){function t(t){void 0===t&&(t=Lang.act_str89),this.actId=0,this.time=0,this.myRank=0,this.ranks=[],this.rankStr="",this.rankStr=t}return t.prototype.getTime=function(){var t=Cfg.getConfig(ActivityBtnConfig,this.actId),e=DateUtil.formatDayTime(this.time,"yy年mo月dd日");return e=e+addColor(""+Lang.act_str70[t.showday]+this.rankStr,5767068)+Lang.act_str86},t.prototype.getMyRank=function(){return Lang.act_str25+addColor(this.myRank>0?this.myRank:Lang.common_str17,15733780)},t.prototype.getRanks=function(){for(var t="",e=0;e<this.ranks.length;e++){var i=this.ranks[e],n=Lang.guild_str74.replace("$count$",""+i.rank)+"."+(""==i.playerName?Lang.act_str87:i.playerName)+"\n";t+=addColor(n,i.rank<=3?15733780:16751375)}return t},t}();__reflect(ActDataResult6_1.prototype,"ActDataResult6_1"),window.ActData6_1=ActData6_1;var ActData8_1=function(t){function e(){var e=t.call(this)||this;return e.rankDatas=[],e.myRank=0,e}return __extends(e,t),e.prototype.parserRankData=function(t){this.rankDatas.length=0;for(var e=t.readShort(),i=0;e>i;i++){var n=t.readString(),a=t.readInt();a=""!=n?a:this.getConsumeByRank(i+1),this.rankDatas.push(new ActData8Rank(i+1,n,a))}this.myRank=t.readShort()},e.prototype.getRankData=function(t){return this.rankDatas[t-1]},Object.defineProperty(e.prototype,"myLjxf",{get:function(){return this._commonData},enumerable:!0,configurable:!0}),e.prototype.getConfigs=function(){return this.configs||(this.configs=Cfg.getConfigs(ActivityType8Config,this.actId,CondType.NONE))},e.prototype.getConsumeByRank=function(t){var e=0,i=this.getConfigs();for(var n in i){var a=i[n];if(a.rank[0]<=t&&t<=a.rank[1]){e=a.consume;break}}return e},e}(ActDataBase);__reflect(ActData8_1.prototype,"ActData8_1");var ActData8Rank=function(){function t(t,e,i){this.rank=0,this.roleName="",this.num=0,this.rank=t,this.roleName=e,this.num=i}return t}();__reflect(ActData8Rank.prototype,"ActData8Rank"),window.ActData8_1=ActData8_1;var ActData9_1=function(t){function e(){var e=t.call(this)||this;return e.buyCount=0,e}return __extends(e,t),e.prototype.parser=function(t){this.buyCount=t.readInt()},e.prototype.parserChange=function(t){t.readShort();return this.buyCount=t.readInt(),this.changIndex},e.prototype.getConfigs=function(){return this.configs||(this.configs=Cfg.getConfigs(ActivityType9Config,this.actId,CondType.NONE))},e.prototype.getConfig=function(){return this.getConfigs()[1]},e.prototype.redPoint=function(){return this.canReward()&&this.isShowRp},e.prototype.canReward=function(){return this.buyCount<VipSys.ins().getCurSVipConfig().cbthcount},e.prototype.getBarMax=function(){var t=this.getConfig().buycount;return t[t.length-1][0]},e.prototype.getMinZhe=function(){var t=this.getConfig().buycount;return t[t.length-1][1]},e.prototype.getCurZhe=function(){for(var t=this.getConfig().buycount,e=0,i=0;i<t.length;i++){var n=t[i][0];this.buyCount>=n&&(e=i)}return t[e][1]},e.prototype.getNextCount=function(t){for(var e=this.getConfig().buycount,i=0,n=0;n<e.length;n++){var a=e[n][0],o=e[n][1];if(t>o){i=Math.max(a-this.buyCount,0);break}}return i},e.prototype.getDec=function(){var t="",e=this.getCurZhe();return e>this.getMinZhe()?(t=Lang.act_str79.replace("$zhe$",addColor(""+e+Lang.common_zhe,5767068)),t=t.replace("$jian$",addColor(""+this.getNextCount(e)+Lang.common_jian,5767068))):t=Lang.act_str80.replace("$zhe$",addColor(""+e+Lang.common_zhe,5767068)),t},e.prototype.getBuyCountDec=function(){var t=addColor(this.buyCount+"/"+VipSys.ins().getCurSVipConfig().cbthcount,5767068);return t=Lang.act_str81+"："+t},e.prototype.getVipCountDec=function(){var t=Cfg.getNextVipExpBySysId(276),e=Cfg.getConfig(SVipConfig,t),i=Lang.act_str82.replace("$vip$",""+t);return i=i.replace("$jian$",addColor(""+e.cbthcount,5767068))},e.prototype.getActDataZhe=function(){for(var t=[],e=this.getConfig().buycount,i=0,n=0;n<e.length;n++){var a=e[n][0];this.buyCount>=a&&(i=n),t.push(new ActDataZhe9_1(a,e[n][1]))}return t[i].isAct=!0,t},e}(ActDataBase);__reflect(ActData9_1.prototype,"ActData9_1");var ActDataZhe9_1=function(){function t(t,e){this.count=0,this.zhe=0,this.isAct=!1,this.count=t,this.zhe=e}return t}();__reflect(ActDataZhe9_1.prototype,"ActDataZhe9_1"),window.ActData9_1=ActData9_1;var BaseTabBtn3=function(t){function e(){var e=t.call(this)||this;return e.skinName="BtnTab3ZYCSSkin",e}return __extends(e,t),e.prototype.setSkinName=function(){},e.prototype.dataChanged=function(){this.labelDisplay.text=""+this.data},e}(BaseItemRender);__reflect(BaseTabBtn3.prototype,"BaseTabBtn3");var ActDataDuiHuanBase=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.busCounts=[],e.score=0,e}return __extends(e,t),e.prototype.parserScore=function(t){var e=t.readByte();this.busCounts.length=0;for(var i=0;e>i;i++)this.busCounts[i]=t.readShort();this.score=t.readInt()},e.prototype.getBuyCount=function(t){return this.busCounts[t-1]},e}(ActDataBase);__reflect(ActDataDuiHuanBase.prototype,"ActDataDuiHuanBase");var BaseTabBtn4=function(t){function e(){var e=t.call(this)||this;return e.skinName="BtnTab4ZYCSSkin",e.showRedPoint(!1),e}return __extends(e,t),e.prototype.dataChanged=function(){"string"==typeof this.data&&(this.icon=""+this.data,this.icon_a=this.data+"_a")},e.prototype.showRedPoint=function(t){this.redPoint.visible=t},e}(BaseItemRender);__reflect(BaseTabBtn4.prototype,"BaseTabBtn4");var ActDataLogin=function(){function t(){this.level=0,this.dayNum=0}return t.prototype.hasAwardCanGet=function(){return!this.hasGetAward&&this.dayNum>=this.day},Object.defineProperty(t.prototype,"config",{get:function(){return this._config||(this._config=Cfg.getConfig(LoginRewardsConfig,this.id))},enumerable:!0,configurable:!0}),t}();__reflect(ActDataLogin.prototype,"ActDataLogin");var ActDataPreview1_30=function(){function t(t,e,i){this.score=0,this.config=t,this.state=e,this.score=i}return Object.defineProperty(t.prototype,"needScore",{get:function(){return this.config.condition},enumerable:!0,configurable:!0}),t}();__reflect(ActDataPreview1_30.prototype,"ActDataPreview1_30"),window.ActDataPreview1_30=ActDataPreview1_30;var ActPanel2_3=function(t){function e(){var e=t.call(this)||this;return e._tempVip=-1,e.setSkinName(),e.menuList.itemRenderer=ActItem2_3,e.listAward.itemRenderer=ItemBaseRewardActivity,e.listAward.dataProvider=e.listAwardCollection=new eui.ArrayCollection,e.mcIcon=new McIcon,e.mcIcon.touchEnabled=!1,e.mcIcon.touchChildren=!1,e.groupIcon.addChild(e.mcIcon),e}return __extends(e,t),e.prototype.setSkinName=function(){this.skinName="ActPanel2_3EUI"},e.prototype.open=function(e){t.prototype.open.call(this,e),this.menuList.dataProvider=this.arrayCollection=new eui.ArrayCollection,this.addClickE(this.btnGetAward,this.onClick),this.addItemTapE(this.menuList,this.onMenuClick),this.addLsn(ActSys.ins().patchActivityIsGetAwards,this.onBuyVipGift),this.menuList.selectedIndex=this.getDefaultIndex(),this.updateData1(),this.upDateSelected()},e.prototype.close=function(){t.prototype.close.call(this),this.mcIcon.close()},e.prototype.onMenuClick=function(t){this.update()},e.prototype.updateData1=function(){this.actData=ActSys.ins().getActDataById(this.actId);var t=this.actData.buyDatas.concat();this.arrayCollection.source=t,this.menuList.validateNow()},e.prototype.update=function(){var t=this.menuList.selectedItem,e=t.config;if(e.vip!=this._tempVip){this.listAwardCollection.source=e.rewards,this.groupBuy.visible=t.hasBuy,this.labelHasBuy.visible=!t.hasBuy,this.btnGetAward.label=e.price+"仙玉";var i=Cfg.getItemCfg(e.itemid);this.lb_name.text=i.getName(),this.imgGG.source="hddt_zycs_svipsz"+e.vip,this.mcIcon.open(e.mcIcon),this._tempVip=e.vip}},e.prototype.updateTime=function(){this.actData&&(this.lbTime.textFlow=addColorTF("剩余时间:"+StrUtil.addColor(this.actData.getformatTime(),5767068)))},e.prototype.onBuyVipGift=function(){this.menuList.selectedIndex=this.getDefaultIndex(),this.upDateSelected();for(var t=this.menuList.numElements,e=0;t>e;e++){var i=this.menuList.getElementAt(e);i&&i.updateRedPoint()}},e.prototype.upDateSelected=function(){this.updateBtnPos(),this.update()},e.prototype.updateBtnPos=function(){var t=this.menuList.getChildAt(this.getDefaultIndex()),e=this.menuScroller.viewport.contentWidth-520,i=this.menuScroller.viewport.scrollH;i>=e||(this.menuScroller.viewport.scrollH=t.x)},e.prototype.getDefaultIndex=function(){this.actData=ActSys.ins().getActDataById(this.actId);var t=this.actData.buyDatas.concat(),e=0;for(var i in t){var n=t[i];n.config;if(n.hasBuy){e=n.configIndex-1;break}}return e},e.prototype.onClick=function(t){switch(t.target){case this.btnGetAward:var e=this.menuList.selectedItem,i=e.config;GFunc.checkSVIP(i.vip)&&GFunc.checkCurrency(CurType.yb,i.price)&&BagSys.ins().bagSatisfy(4)&&ActSys.ins().sendReward(e.actId,e.config.index)}},e}(ActBasePanel);__reflect(ActPanel2_3.prototype,"ActPanel2_3"),window.ActPanel2_3=ActPanel2_3;var Act17_1LogItemMy=function(t){function e(){var e=t.call(this)||this;return e.skinName="XunBaoJiLuItemEUI",e}return __extends(e,t),e.prototype.dataChanged=function(){var t=this.data;Cfg.getItemCfg(t.itemId);this.lbDesc.textFlow=addColorTF(t.getMyDec())},e}(BaseItemRender);__reflect(Act17_1LogItemMy.prototype,"Act17_1LogItemMy"),window.Act17_1LogItemMy=Act17_1LogItemMy;var Act17_1LogItemWorl=function(t){function e(){var e=t.call(this)||this;return e.skinName="XunBaoJiLuItemEUI",e}return __extends(e,t),e.prototype.dataChanged=function(){var t=this.data;Cfg.getItemCfg(t.itemId);this.lbDesc.textFlow=addColorTF(t.getWorldDec())},e}(BaseItemRender);__reflect(Act17_1LogItemWorl.prototype,"Act17_1LogItemWorl"),window.Act17_1LogItemWorl=Act17_1LogItemWorl;var Act17RewardListTipsWin=function(t){function e(){var e=t.call(this)||this;return e.init(),e}return __extends(e,t),e.prototype.init=function(){this.skinName="Act17RewardListTipsWinEUI",this.addBg(),this.list.itemRenderer=ItemBaseRewardName,this.list.dataProvider=this.listArray=new eui.ArrayCollection,this.list.useVirtualLayout=!0},e.prototype.open=function(e,i){t.prototype.open.call(this),this.actData=i,this.addClickE(this.buyXunBao10,this.onClick),this.addClickE(this.buyXunBao50,this.onClick),this.addLsn(BagSys.ins().patchItemChange,this.updateConsume),this.updateConsume(),this.updateBtn(),this.listArray.source=e,Timer.ins()["do"](100,1,1,this.flyItemList,this)},e.prototype.onClick=function(t){switch(t.currentTarget){case this.buyXunBao10:this.sendChouJiang(1);break;case this.buyXunBao50:this.sendChouJiang(2)}},e.prototype.flyItemList=function(){for(var t=this.list.numElements,e=0;t>e;e++){var i=this.list.getElementAt(e);if(i&&i.visible){var n=i.data;GFunc.flyToBag(n.id,i,80,80)}}},e.prototype.updateConsume=function(){this.updateSingleConsume(1,this.imgXunBao10,this.lbXunBao10),this.updateSingleConsume(2,this.imgXunBao50,this.lbXunBao50)},e.prototype.updateSingleConsume=function(t,e,i){var n=this.actData.getConfig(),a=n.costid,o=BagSys.ins().getItemCount(a),s=Cfg.getItemCfg(a),r=ResMgr.getItemIcon(s.getIcon()),u=n.costcount,h=u[t];i.textFlow=addColorTF(o+"/"+h,o>=h?1306146:15733780),e.source=r},e.prototype.updateBtn=function(){var t=this.actData.getConfig();this.buyXunBao10.labelDisplay.text="寻宝"+t.drawtimes[1]+Lang.common_ci,this.buyXunBao50.labelDisplay.text="寻宝"+t.drawtimes[2]+Lang.common_ci},e.prototype.sendChouJiang=function(t){var e=this.actData.getConfig(),i=e.costcount[t],n=new ItemDataReward;n.id=e.costid,n.count=i;BagSys.ins().getItemCount(e.costid);GFunc.checkConsumeEnough(n)&&(ActSys.ins().sendReward(this.actData.actId,this.actData.getConfig().index,t),closeWin(this))},e}(BaseWin);__reflect(Act17RewardListTipsWin.prototype,"Act17RewardListTipsWin"),window.Act17RewardListTipsWin=Act17RewardListTipsWin;var Act20_1RewardViewWin=function(t){function e(){var e=t.call(this)||this;return e.layer=LayerMgr.Popup,e.winType=WinType.NeverCloseWin,e.closeFun=new Caller,e.skinName="Act20_1RewardViewWinEUI",e.addBg(),e.setRewardItem(),e.list.dataProvider=e.listData=new eui.ArrayCollection,e}return __extends(e,t),e.prototype.setRewardItem=function(){this.list.itemRenderer=ItemBaseReward},e.prototype.open=function(e,i,n){void 0===i&&(i=null),void 0===n&&(n=null),t.prototype.open.call(this),this.addClickE(this.lbGoto,this.onClick),this.closeFun.func=i,this.closeFun.obj=n,this.updatePanel(e)},e.prototype.updatePanel=function(t){this.listData.source=t},e.prototype.close=function(){t.prototype.close.call(this),this.closeFun.call()},e.prototype.onClick=function(t){closeWin(e)},e}(BaseWinSingle);__reflect(Act20_1RewardViewWin.prototype,"Act20_1RewardViewWin"),window.Act20_1RewardViewWin=Act20_1RewardViewWin;var Act25LogItem=function(t){function e(){var e=t.call(this)||this;return e.skinName="Act25LogItemEUI",e}return __extends(e,t),e.prototype.dataChanged=function(){var t=this.data;this.lbTime.text=DateUtil.formatDayTime(t.time,"yy-mo-dd hh:mm");var e=Lang.act_str38.replace("$name$",""+StrUtil.addColor(t.palyName,2530815));e=e.replace("$count$",""+StrUtil.addColor(t.multiple,5949490)),e=e.replace("$yb$",""+StrUtil.addColor(t.zuanshi,5949490)),this.lbDes.textFlow=addColorTF(e)},e}(BaseItemRender);__reflect(Act25LogItem.prototype,"Act25LogItem"),window.Act25LogItem=Act25LogItem;var BaseTabBtn5_1=function(t){function e(){var e=t.call(this)||this;return e.skinName="BtnTab5ZYCSSkin",e.showRedPoint(!1),e}return __extends(e,t),e.prototype.dataChanged=function(){"string"==typeof this.data[0]&&(this.labelDisplay.text=""+this.data[0]),"boolean"==typeof this.data[1]&&this.showRedPoint(this.data[1])},e.prototype.showRedPoint=function(t){this.redPoint.visible=t},e}(BaseItemRender);__reflect(BaseTabBtn5_1.prototype,"BaseTabBtn5_1"),window.BaseTabBtn5_1=BaseTabBtn5_1;var Act25LogWin=function(t){function e(){var e=t.call(this)||this;return e.winType=WinType.OverlayWin,e}return __extends(e,t),e.panelNames=[Act25LogPanel],e}(BaseWinAutoTab);__reflect(Act25LogWin.prototype,"Act25LogWin"),window.Act25LogWin=Act25LogWin;var Act25RewarWin=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return __extends(e,t),e.prototype.setRewardItem=function(){this.list.itemRenderer=ItemBaseRewardActivity},e}(Act6RewarWin);__reflect(Act25RewarWin.prototype,"Act25RewarWin"),window.Act25RewarWin=Act25RewarWin;var Act3_3DetailWin=function(t){function e(){return t.call(this)||this}return __extends(e,t),e.prototype.initUI=function(){this.skinName="Act3_3DetailWinEUI",this.listDetail.itemRenderer=Act3_3WinItem,this.listDetail.dataProvider=this.listDetailArr=new eui.ArrayCollection,this.addBg()},e.prototype.open=function(e){t.prototype.open.call(this);var i=ActSys.ins().getActDataById(e),n=[],a=i.getConfigs();for(var o in a){var s=new ActData3_3Tab;s.actId=e,s.config=a[o],n.push(s)}this.listDetailArr.source=n},e}(BaseWin);__reflect(Act3_3DetailWin.prototype,"Act3_3DetailWin"),window.Act3_3DetailWin=Act3_3DetailWin;var Act3_3WinItem=function(t){function e(){var e=t.call(this)||this;return e.skinName="Act3_3WinItemEUI",e}return __extends(e,t),e.prototype.dataChanged=function(){var t=this.data,e=ActSys.ins().getActDataById(t.actId),i=e.getJindu(t.config.index),n=Cfg.getConfig(GuildConveneTaskConfig,t.config.taskid),a=n.target,o=i>=a,s=o?5767068:16733782;this.labelDesc.textFlow=addColorTF(""+n.desc,s),this.labelHighdian.textFlow=addColorTF(Lang.act_str152.replace("$count$",t.config.jifenShow.count.toString()),s);var r=1==e.deCodeRecord(t.config.index);this.imgYLQ.visible=o&&r},e}(BaseItemRender);__reflect(Act3_3WinItem.prototype,"Act3_3WinItem"),window.Act3_3WinItem=Act3_3WinItem;var Act31_5JiLuItem=function(t){function e(){var e=t.call(this)||this;return e.lbDesc.width=245,e}return __extends(e,t),e}(Act31JiLuItem);__reflect(Act31_5JiLuItem.prototype,"Act31_5JiLuItem"),window.Act31_5JiLuItem=Act31_5JiLuItem;var Act31BigRewardTips=function(t){function e(){var e=t.call(this)||this;return e.skinName="Act31BigRewardTipsEUI",e.setSkinPart("item",new ItemBaseReward),e.addClickE(e.btnClose,e.onClick),e}return __extends(e,t),e.prototype.dataChanged=function(){var t=this.data;this.item.data=t,this.lbName.textColor=GConst.PZColor[Cfg.getItemCfg(t.id).quality]},e.prototype.onClick=function(t){this.visible=!1},e}(BaseItemRender);__reflect(Act31BigRewardTips.prototype,"Act31BigRewardTips"),window.Act31BigRewardTips=Act31BigRewardTips;var BaseTabBtn5=function(t){function e(){var e=t.call(this)||this;return e.skinName="BtnTab5ZYCSSkin",e.showRedPoint(!1),e}return __extends(e,t),e.prototype.dataChanged=function(){"string"==typeof this.data&&(this.labelDisplay.text=""+this.data)},e.prototype.showRedPoint=function(t){this.redPoint.visible=t},e}(BaseItemRender);__reflect(BaseTabBtn5.prototype,"BaseTabBtn5");var Act31LogWin=function(t){function e(){var e=t.call(this)||this;return e.layer=LayerMgr.Popup,e.winType=WinType.NormalWin,e.actId=0,e.skinName="Act6LogWinEUI",e.addBg(),e}return __extends(e,t),e.prototype.open=function(e){t.prototype.open.call(this),this.actId=e,this.addLsn(ActSys.ins().patchZSDBLuckDrawLog,this.updatePanel),ActSys.ins().sendZSDBLuckDrawLog(e,1)},e.prototype.updatePanel=function(){var t=ActSys.ins().getActDataById(this.actId);this.lbLog.textFlow=addColorTF(t.getMyDec())},e}(BaseWinSingle);__reflect(Act31LogWin.prototype,"Act31LogWin"),window.Act31LogWin=Act31LogWin;var Act31LuckDrawWin=function(t){function e(){var e=t.call(this)||this;return e.winType=WinType.NeverCloseWin,e.layer=LayerMgr.Popup,e.isEnd=!0,e.skinName="Act6LuckDrawWinEUI",e.addBg(),e.list.itemRenderer=ItemBaseRewardName,e.list.dataProvider=e.listData=new eui.ArrayCollection,e.mc=new MC,e.mc.y=70,e.mc.playFile(getEffName("smzl_gxhd"),-1),e.groupMc.addChildAt(e.mc,0),e}return __extends(e,t),e.prototype.open=function(e){t.prototype.open.call(this),this.actData31=ActSys.ins().getActDataById(e),this.addClickE(this.btnOne,this.onClick),this.addClickE(this.btnTen,this.onClick),this.addLsn(ActSys.ins().patchRankLuckDraw,this.updateLuckDraw),this.updateLuckDraw(),this.isEnd=!0},e.prototype.close=function(){t.prototype.close.call(this),Timer.ins().removeAll(this)},e.prototype.updateLuckDraw=function(){var t=this;this.updateYB(),this.list.visible=!0,this.listData.source=this.actData31.rewards,Timer.ins()["do"](1500,0,1,function(){t.list.validateNow();for(var e=0;e<t.list.numChildren;e++){var i=t.list.getElementAt(e);t.actData31.rewards[e]&&GFunc.flyToBag(t.actData31.rewards[e].id,i,80,80)}t.isEnd=!0},this)},e.prototype.updateYB=function(){var t=GFunc.getItemCount(CurType.yb),e=this.actData31.getConsume1();this.lbConsumeOne.textFlow=addColorTF(""+e,e>t?15733780:5767068),e=this.actData31.getConsume10(),this.lbConsumeTen.textFlow=addColorTF(""+e,e>t?15733780:5767068)},e.prototype.onClick=function(t){switch(t.target){case this.btnOne:GFunc.checkCurrency(CurType.yb,this.actData31.getConsume1())&&(ActSys.ins().sendZSDBLuckDraw(this.actData31.actId,1),closeWin(e));break;case this.btnTen:this.isEnd&&GFunc.checkCurrency(CurType.yb,this.actData31.getConsume10())&&(this.isEnd=!1,ActSys.ins().sendZSDBLuckDraw(this.actData31.actId,10))}},e}(BaseWinSingle);__reflect(Act31LuckDrawWin.prototype,"Act31LuckDrawWin"),window.Act31LuckDrawWin=Act31LuckDrawWin;var SoundUtil=function(){function t(){}return Object.defineProperty(t,"enable",{get:function(){return this._enable},set:function(t){this._enable=t,t?this.playBg():this.stopAll()},enumerable:!0,configurable:!0}),t.play=function(t){return __awaiter(this,void 0,void 0,function(){var e,i,n=this;return __generator(this,function(a){switch(a.label){case 0:return this._enable?[4,RES.getResAsync(t)]:[2];case 1:return(e=a.sent())?(this.totalSound[t]=e,e.type=egret.Sound.EFFECT,i=e.play(0,1),i.volume=this.volume,this.curPlayEff[t]=i,i.once(egret.Event.SOUND_COMPLETE,function(){return delete n.curPlayEff[t]},this),[2]):[2]}})})},t.playBg=function(t){return __awaiter(this,void 0,void 0,function(){var e,i,n;return __generator(this,function(a){switch(a.label){case 0:return this.bgSoundUrl==t&&this.bgSoundUrl?[2]:(this.bgSoundUrl=t||this.bgSoundUrl,this._enable&&this.bgSoundUrl?(e=this.totalSound,i=this.bgSoundUrl,n=this,[4,RES.getResAsync(this.bgSoundUrl)]):[2]);case 1:return e[i]=n.bgSound=a.sent(),this.bgSound?(this.bgSound.type=egret.Sound.MUSIC,this.bgSC&&this.bgSC.stop(),this.bgSC=this.bgSound.play(0,0),this.bgSC.volume=this.volumeBG,[2]):[2]}})})},t.stop=function(t){var e=this.curPlayEff[t];e&&e.stop(),delete this.curPlayEff[t]},t.stopEff=function(){for(var t in this.curPlayEff)this.stop(t)},t.stopAll=function(){this.bgSC&&(this.bgSC.stop(),this.bgSC=null),this.stopEff()},Object.defineProperty(t,"volumeBG",{get:function(){return this._volumeBG},set:function(t){this._volumeBG=t,this.bgSC&&(this.bgSC.volume=t)},enumerable:!0,configurable:!0}),Object.defineProperty(t,"volume",{get:function(){return this._volume},set:function(t){this._volume=t;for(var e in this.curPlayEff)this.curPlayEff[e].volume=t},enumerable:!0,configurable:!0}),t._enable=!0,t._volume=.4,t._volumeBG=.2,t.curPlayEff={},t.totalSound={},t}();__reflect(SoundUtil.prototype,"SoundUtil"),window.SoundUtil=SoundUtil;var Act31RankItem1=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return __extends(e,t),Object.defineProperty(e.prototype,"roleName",{get:function(){var t=this.data;return t.roleName?t.roleName+"服":""},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"config",{get:function(){var t=this.data;return Cfg.getConfig(ActivityType32Config,t.actid,t.rank)},enumerable:!0,configurable:!0}),e}(Act31RankItem);__reflect(Act31RankItem1.prototype,"Act31RankItem1"),window.Act31RankItem1=Act31RankItem1;var Act31RankWin=function(t){function e(){var e=t.call(this)||this;return e.layer=LayerMgr.Popup,e.winType=WinType.NeverCloseWin,e.skinName="Act31RankWinEUI",e.addBg(),e.list1.itemRenderer=Act31RankItem,e.list2.itemRenderer=Act31RankItem1,e.imgXwyd.visible=!1,e
}return __extends(e,t),e.prototype.open=function(e,i,n){void 0===n&&(n="hddt_zycs_pm"),t.prototype.open.call(this),this.actData30_1=e,this.actData32_1=i,this.imgTitle.source=n,this.addItemTapE(this.tab1,this.onListJiLuClick),this.addLsn(ActSys.ins().patchZSDBPlayRank,this.updatePlayRank),this.addLsn(ActSys.ins().patchZSDBServerRank,this.updateServerRank),ActSys.ins().sendZSDBPlayRank(e.actId),this.updatePlayRank()},e.prototype.onListJiLuClick=function(t){void 0===t&&(t=null);var e=t.itemIndex;0==e?(ActSys.ins().sendZSDBPlayRank(this.actData30_1.actId),this.updatePlayRank()):(ActSys.ins().sendZSDBServerRank(this.actData32_1.actId),this.updateServerRank())},e.prototype.updatePlayRank=function(){var t=this.actData30_1;Cfg.getConfig(ActivityBtnConfig,t.actId);this.list1.dataProvider=new eui.ArrayCollection(t.rankDatas),this.lbRank.textFlow=addColorTF(""+Lang.act_str25+StrUtil.addColor(t.myRank||Lang.common_str17,16751375)),this.lbScore.textFlow=addColorTF(""+Lang.fb_str199+StrUtil.addColor(t.score,16751375)),this.lbDesc.text=""},e.prototype.updateServerRank=function(){var t=this.actData32_1;Cfg.getConfig(ActivityBtnConfig,t.actId);this.list2.dataProvider=new eui.ArrayCollection(t.rankDatas),this.lbRank.textFlow=addColorTF("本区排名："+StrUtil.addColor(t.myRank||Lang.common_str17,16751375)),this.lbScore.textFlow=addColorTF("本区积分："+StrUtil.addColor(t.score,16751375)),this.lbDesc.text="个人积分达到1000可领取区服排行奖励"},e}(BaseWinSingle);__reflect(Act31RankWin.prototype,"Act31RankWin"),window.Act31RankWin=Act31RankWin;var Act31WeightWin=function(t){function e(){var e=t.call(this)||this;return e.layer=LayerMgr.Popup,e.winType=WinType.NormalWin,e.skinName="Act6WeightWinEUI",e.addBg(),e}return __extends(e,t),e.prototype.open=function(e){t.prototype.open.call(this),this.lbWeight.textFlow=addColorTF(e)},e}(BaseWinSingle);__reflect(Act31WeightWin.prototype,"Act31WeightWin"),window.Act31WeightWin=Act31WeightWin;var Act33RankItem=function(t){function e(){var e=t.call(this)||this;return e.skinName="Act31RankWinItemEUI",e.listReward.itemRenderer=ItemBaseReward,e}return __extends(e,t),e.prototype.dataChanged=function(){var t=this.data;t.rank<=3?(this.imgBg.source="cg_zycs_di"+t.rank,this.imgRank.source="jjc_zycs_no"+t.rank,this.imgRank.visible=!0,this.lbRank.visible=!1):(this.imgBg.source="",this.imgRank.visible=!1,this.lbRank.visible=!0,this.lbRank.text=t.rank.toString()),this.listReward.dataProvider=new eui.ArrayCollection(t.config.rewards);var e=""!=this.roleName;this.lbName.text=e?""+this.roleName:Lang.guild_str31+"...",this.lbNum.textFlow=addColorTF(e?"积分:"+addColor(t.value,5767068):Lang.act_str153+":"+addColor(this.config.score,5767068))},Object.defineProperty(e.prototype,"roleName",{get:function(){var t=this.data;return t.roleName},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"config",{get:function(){var t=this.data;return Cfg.getConfig(ActivityType30Config,t.config.id,t.rank)},enumerable:!0,configurable:!0}),e}(BaseItemRender);__reflect(Act33RankItem.prototype,"Act33RankItem"),window.Act33RankItem=Act33RankItem;var Act33RankWin=function(t){function e(){var e=t.call(this)||this;return e.layer=LayerMgr.Popup,e.winType=WinType.NormalWin,e.skinName="Act33RankWinEUI",e.addBg(),e.list1.itemRenderer=Act33RankItem,e.imgXwyd.visible=!1,e}return __extends(e,t),e.prototype.open=function(e){t.prototype.open.call(this),this.actData33_1=e,this.addLsn(ActSys.ins().patchKFXFRank,this.updatePlayRank),ActSys.ins().sendKFXFRank(e.actId),this.updatePlayRank()},e.prototype.updatePlayRank=function(){var t=this.actData33_1;this.list1.dataProvider=new eui.ArrayCollection(t.rankDatas),this.lbRank.textFlow=addColorTF(""+Lang.act_str25+addColor(t.myRank||Lang.common_str17,16751375)),this.lbScore.textFlow=addColorTF(""+Lang.fb_str199+addColor(t.myValue,16751375))},e}(BaseWinSingle);__reflect(Act33RankWin.prototype,"Act33RankWin"),window.Act33RankWin=Act33RankWin;var Act37_1ChatWin=function(t){function e(){var e=t.call(this)||this;return e.layer=LayerMgr.Popup,e.skinName="Act36_1ChatWinEUI",e.addBg(),e.lbSendKuaFu.textFlow=addColorTF(e.lbSendKuaFu.text,e.lbSendKuaFu.textColor,!0),e.lbSendGuild.textFlow=addColorTF(e.lbSendGuild.text,e.lbSendGuild.textColor,!0),e}return __extends(e,t),e.prototype.open=function(e){t.prototype.open.call(this),this.actData=e,this.addClickE(this.lbSendKuaFu,this.onClick),this.addClickE(this.lbSendGuild,this.onClick),this.updatePanel()},e.prototype.updatePanel=function(){},e.prototype.close=function(){t.prototype.close.call(this)},e.prototype.onClick=function(t){var e=this.actData.getActOpenState();switch(t.currentTarget){case this.lbSendKuaFu:e==ActOpenState.Jiesuan||e==ActOpenState.End?showtipsFail(Lang.act_str7):(ActSys.ins().sendQQShSendSongLiData(this.actData.actId,1),showtipsSuc(Lang.mol_str10),closeWin(this));break;case this.lbSendGuild:e==ActOpenState.Jiesuan||e==ActOpenState.End?showtipsFail(Lang.act_str7):(GuildSys.ins().isAddGuild()?(ActSys.ins().sendQQShSendSongLiData(this.actData.actId,2),showtipsSuc(Lang.mol_str10)):(openWin(GuildNavWin),showtipsFail(Lang.guild_str7)),closeWin(this))}},e}(BaseWinSingle);__reflect(Act37_1ChatWin.prototype,"Act37_1ChatWin"),window.Act37_1ChatWin=Act37_1ChatWin;var Act37_1LogWin=function(t){function e(){var e=t.call(this)||this;return e.skinName="Act37_1LogWinEUI",e.addBg(),e.list1.itemRenderer=Act37_1LogWinSendItem,e.list1.dataProvider=e.list1Data=new eui.ArrayCollection,e.list2.itemRenderer=Act37_1LogWinGetItem,e.list2.dataProvider=e.list2Data=new eui.ArrayCollection,e}return __extends(e,t),e.prototype.open=function(e){t.prototype.open.call(this),this.addItemTapE(this.tab1,this.onTabClick),this.addLsn(ActSys.ins().patchQQShLogData,this.updatePanel),this.actData=e,ActSys.ins().sendQQShLogData(e.actId,1)},e.prototype.updatePanel=function(){this.list1Data.source=this.actData.logDatas1,this.list2Data.source=this.actData.logDatas2},e.prototype.onTabClick=function(t){var e=t.itemIndex;this.imgTitle.source=0==e?"qqsh_zycs_zsjl":"qqsh_zycs_hzjl",ActSys.ins().sendQQShLogData(this.actData.actId,e+1)},e}(BaseWinSingle);__reflect(Act37_1LogWin.prototype,"Act37_1LogWin"),window.Act37_1LogWin=Act37_1LogWin;var Act37_1LogWinGetItem=function(t){function e(){var e=t.call(this)||this;return e.skinName="Act37_1LogWinItemEUI",e}return __extends(e,t),e.prototype.dataChanged=function(){var t=this.data;this.lbTime.text=DateUtil.formatDayTime(t.timer,"yy年mo月dd日");var e=Cfg.getItemCfg(t.itemId),i=addColor(e.getName()+"*"+t.itemCount,GConst.PZColor[e.quality]);this.lbItemCount.textFlow=addColorTF("收到"+addColor(t.name,5767068)+"赠送的"+i)},e}(BaseItemRender);__reflect(Act37_1LogWinGetItem.prototype,"Act37_1LogWinGetItem"),window.Act37_1LogWinGetItem=Act37_1LogWinGetItem;var Act37_1LogWinSendItem=function(t){function e(){var e=t.call(this)||this;return e.skinName="Act37_1LogWinItemEUI",e}return __extends(e,t),e.prototype.dataChanged=function(){var t=this.data;this.lbTime.text=DateUtil.formatDayTime(t.timer,"yy年mo月dd日");var e=Cfg.getItemCfg(t.itemId),i=addColor(e.getName()+"*"+t.itemCount,GConst.PZColor[e.quality]);this.lbItemCount.textFlow=addColorTF("向"+addColor(t.name,5767068)+"赠送"+i)},e}(BaseItemRender);__reflect(Act37_1LogWinSendItem.prototype,"Act37_1LogWinSendItem"),window.Act37_1LogWinSendItem=Act37_1LogWinSendItem;var Act37_1ZSLWWin=function(t){function e(){var e=t.call(this)||this;return e.skinName="Act37_1ZSLWWinEUI",e.addBg(),e.list.itemRenderer=Act37_1ZSLWWinItem,e.list.dataProvider=e.listArray=new eui.ArrayCollection,e}return __extends(e,t),e.prototype.open=function(e,i){t.prototype.open.call(this),this.addLsn(ActSys.ins().patchQQShSongLiData,this.updatePanel),this.playerData=i,this.actData37_1=e,this.updatePanel()},e.prototype.updatePanel=function(){this.imgHead.source=ResMgr.getHeadIcon(this.playerData.sex),this.lbName.text=this.playerData.name,this.lbLevel.textFlow=addColorTF("转生："+GFunc.getZSNameBydb(this.playerData.zsLevel)),this.lbPower.textFlow=addColorTF(Lang.common_str113+"："+GFunc.overLength(this.playerData.power)),this.lbGuild.textFlow=addColorTF(Lang.common_str128+"："+this.playerData.guildName);for(var t=[],e=this.actData37_1.getConfigs()[1].items,i=0;i<e.length;i++){var n=e[i],a=new Act37_1ZSLWWinItemData;a.itemId=n,a.playerData=this.playerData,a.actData37_1=this.actData37_1,t[i]=a}this.listArray.source=t},e}(BaseWinSingle);__reflect(Act37_1ZSLWWin.prototype,"Act37_1ZSLWWin"),window.Act37_1ZSLWWin=Act37_1ZSLWWin;var Act37_1ZSLWWinItemData=function(){function t(){}return t}();__reflect(Act37_1ZSLWWinItemData.prototype,"Act37_1ZSLWWinItemData");var Act37_1ZSLWWinItem=function(t){function e(){var e=t.call(this)||this;return e.longPressBtnUp=new LongPress,e.skinName="Act36_1ZSLWWinItemEUI",e.longPressBtnUp.setDisplay(e.btnSend,e.autoUp,e),e.addClickE(e.btnSend,e.onClick),e}return __extends(e,t),e.prototype.onClick=function(){this.senddata(1)},e.prototype.senddata=function(t){void 0===t&&(t=10);var e=this.data,i=e.actData37_1,n=e.playerData;if(i.getActOpenState()==ActOpenState.Jiesuan||i.getActOpenState()==ActOpenState.End)showtipsFail(Lang.act_str7);else{var a=e.itemId,o=i.getConfigs()[1].items.indexOf(a)+1,s=new ItemDataReward;s.id=a,s.count=t,GFunc.checkConsumeEnough(s)&&ActSys.ins().sendQQShSongLiData(i.actId,n.actorid,n.serverid,n.name,n.power,n.zsLevel,n.guildName,n.job,n.sex,o,t)}},e.prototype.dataChanged=function(){var t=this.data,e=t.itemId,i=Cfg.getItemCfg(e),n=GFunc.getItemCount(e);this.item.data=GFunc.creatItemDataById(e,n),this.lbItemName.textFlow=addColorTF(""+i.getName(),GConst.PZColor[i.quality]),this.lbItemCount.textFlow=addColorTF(""+Lang.itemtips_str26+addColor(""+n,0==n?15733780:5767068))},e.prototype.autoUp=function(){this.senddata(10)},e}(BaseItemRender);__reflect(Act37_1ZSLWWinItem.prototype,"Act37_1ZSLWWinItem"),window.Act37_1ZSLWWinItem=Act37_1ZSLWWinItem;var Act4RankItem=function(t){function e(){var e=t.call(this)||this;return e.skinName="Act4RankItemEUI",e}return __extends(e,t),e.prototype.dataChanged=function(){var t=this.data;t.rank<=3?this.currentState="max":this.currentState="min",this.validateNow(),t.rank<=3?(this.imgBg.source="cg_zycs_di"+t.rank,this.imgRank.source="jjc_zycs_no"+t.rank,this.imgRank.visible=!0,this.lbRank.visible=!1):(this.imgRank.visible=!1,this.lbRank.visible=!0,this.lbRank.text=t.rank.toString()),this.imgXwyd.visible=""==t.roleName,this.lbName.text=""+t.roleName,this.lbNum.text=""+t.power},e}(BaseItemRender);__reflect(Act4RankItem.prototype,"Act4RankItem"),window.Act4RankItem=Act4RankItem;var Act4RankWin=function(t){function e(){var e=t.call(this)||this;return e.layer=LayerMgr.Popup,e.winType=WinType.NeverCloseWin,e.skinName="Act4RankWinEUI",e.addBg(),e.list.itemRenderer=Act4RankItem,e.list.dataProvider=e.listData=new eui.ArrayCollection,e.imgXwyd.visible=!1,e}return __extends(e,t),e.prototype.open=function(e){t.prototype.open.call(this),this.updatePanel(e)},e.prototype.updatePanel=function(t){var e=Cfg.getConfig(ActivityBtnConfig,t.actId);this.title.source="btz_zycs_pht"+e.showday,this.listData.source=t.rankDatas,this.imgXwyd.visible=0==t.rankDatas.length,this.lbRank.textFlow=addColorTF(""+Lang.act_str25+StrUtil.addColor(t.myRank&&t.myRank<21?t.myRank:Lang.common_str17,16751375)),this.lbPower.textFlow=addColorTF(""+Lang.act_str69+StrUtil.addColor(t.dabiao,16751375))},e}(BaseWinSingle);__reflect(Act4RankWin.prototype,"Act4RankWin"),window.Act4RankWin=Act4RankWin;var Act6LogWin=function(t){function e(){var e=t.call(this)||this;return e.layer=LayerMgr.Popup,e.winType=WinType.NormalWin,e.actId=0,e.skinName="Act6LogWinEUI",e.addBg(),e}return __extends(e,t),e.prototype.open=function(e){t.prototype.open.call(this),this.actId=e,this.addLsn(ActSys.ins().patchRankLuckDrawLog,this.updatePanel),ActSys.ins().sendRankLuckDrawLog(e,1)},e.prototype.updatePanel=function(){var t=ActSys.ins().getActDataById(this.actId);this.lbLog.textFlow=addColorTF(t.getMyDec())},e}(BaseWinSingle);__reflect(Act6LogWin.prototype,"Act6LogWin"),window.Act6LogWin=Act6LogWin;var Act6LuckDrawWin=function(t){function e(){var e=t.call(this)||this;return e.layer=LayerMgr.Popup,e.winType=WinType.NeverCloseWin,e.isEnd=!0,e.skinName="Act6LuckDrawWinEUI",e.addBg(),e.list.itemRenderer=ItemBaseRewardName,e.list.dataProvider=e.listData=new eui.ArrayCollection,e.mc=new MC,e.mc.y=70,e.mc.playFile(getEffName("smzl_gxhd"),-1),e.groupMc.addChildAt(e.mc,0),e}return __extends(e,t),e.prototype.open=function(e){t.prototype.open.call(this),this.actData6=ActSys.ins().getActDataById(e),this.addClickE(this.btnOne,this.onClick),this.addClickE(this.btnTen,this.onClick),this.addLsn(ActSys.ins().patchRankLuckDraw,this.updateLuckDraw),this.updateLuckDraw(),this.isEnd=!0},e.prototype.close=function(){t.prototype.close.call(this),Timer.ins().removeAll(this)},e.prototype.updateLuckDraw=function(){var t=this;this.updateYB(),this.list.visible=!0,this.listData.source=this.actData6.rewards,Timer.ins()["do"](1500,0,1,function(){t.list.validateNow();for(var e=0;e<t.list.numChildren;e++){var i=t.list.getElementAt(e);t.actData6.rewards[e]&&GFunc.flyToBag(t.actData6.rewards[e].id,i,80,80)}t.isEnd=!0},this)},e.prototype.updateYB=function(){var t=GFunc.getItemCount(CurType.yb),e=this.actData6.getConsume1();this.lbConsumeOne.textFlow=addColorTF(""+e,e>t?15733780:5767068),e=this.actData6.getConsume10(),this.lbConsumeTen.textFlow=addColorTF(""+e,e>t?15733780:5767068)},e.prototype.onClick=function(t){switch(t.target){case this.btnOne:if(this.actData6.getActOpenState()!=ActOpenState.Open)return void showtipsFail(Lang.act_str7);GFunc.checkCurrency(CurType.yb,this.actData6.getConsume1())&&(ActSys.ins().sendRankLuckDraw(this.actData6.actId,1),closeWin(e));break;case this.btnTen:if(this.actData6.getActOpenState()!=ActOpenState.Open)return void showtipsFail(Lang.act_str7);this.isEnd&&GFunc.checkCurrency(CurType.yb,this.actData6.getConsume10())&&(this.isEnd=!1,ActSys.ins().sendRankLuckDraw(this.actData6.actId,10))}},e}(BaseWinSingle);__reflect(Act6LuckDrawWin.prototype,"Act6LuckDrawWin"),window.Act6LuckDrawWin=Act6LuckDrawWin;var Act6ResultWin=function(t){function e(){var e=t.call(this)||this;return e.layer=LayerMgr.Popup,e.winType=WinType.NormalWin,e.skinName="Act6ResultWinEUI",e.addBg(),e}return __extends(e,t),e.prototype.open=function(e){t.prototype.open.call(this),this.updatePanel(e)},e.prototype.updatePanel=function(t){this.lbTime.textFlow=addColorTF(t.getTime()),this.lbRank.textFlow=addColorTF(t.getMyRank()),this.lbRankList.textFlow=addColorTF(t.getRanks())},e}(BaseWinSingle);__reflect(Act6ResultWin.prototype,"Act6ResultWin"),window.Act6ResultWin=Act6ResultWin;var LayerMgr=function(){function t(){}return t.getStage=function(){return egret.MainContext.instance.stage},t.init=function(){var t=new eui.UILayer;this.getStage().addChild(t),this.BG||(this.BG=new egret.DisplayObjectContainer,this.MAP=new egret.DisplayObjectContainer,this.Main_Down2=new eui.Group,this.Main_Down1=new eui.Group,this.Main_Down=new eui.Group,this.Main=new eui.Group,this.Main_UP=new eui.Group,this.Popup=new eui.Group,this.Tips=new eui.Group,this.Top=new eui.Group,this.Top1=new eui.Group),this.layers=[this.BG,this.MAP,this.Main_Down2,this.Main_Down1,this.Main_Down,this.Main,this.Main_UP,this.Popup,this.Tips,this.Top,this.Top1];for(var e=0,i=this.layers;e<i.length;e++){var n=i[e];n.touchEnabled=!1,n instanceof eui.Group&&(n.top=0,n.bottom=0,n.left=0,n.right=0),t.addChild(n)}},t.setLiuhai=function(){for(var t=getLocation("setLiuhai",2),e=t?50:0,i=0,n=this.layers;i<n.length;i++){var a=n[i];a instanceof eui.Group&&(a.top=e)}!this.shape&&t&&(this.shape=new egret.Shape),this.shape&&(this.getStage().addChild(this.shape),DisUtil.drawShape(this.shape,new egret.Rectangle(0,0,this.getStage().stageWidth,e),1)),this.getStage().dispatchEvent(new egret.Event(eui.UIEvent.RESIZE))},t.lock=function(){this.getStage().touchEnabled=this.getStage().touchChildren=!1},t.unlock=function(){this.getStage().touchEnabled=this.getStage().touchChildren=!0},t.clear=function(){for(var t=0,e=this.layers;t<e.length;t++){var i=e[t];i.removeChildren()}},t.layers=[],t.px=720,t.py=1280,t}();__reflect(LayerMgr.prototype,"LayerMgr");var Act6ScoreItem=function(t){function e(){var e=t.call(this)||this;return e.skinName="Act6ScoreItemEUI",e.list0.itemRenderer=ItemBaseReward,e}return __extends(e,t),e.prototype.dataChanged=function(){var t=addColor(this.data.score+"/"+this.data.needScore,this.data.score<this.data.needScore?9371648:5177195);t=Lang.act_str77.replace("$count$",addColor(this.data.needScore,5177195)).replace("$str$",t),this.lbDec.textFlow=addColorTF(t),this.imgYlq.visible=this.data.state==ActRewardState.Geted,this.data instanceof ActDataPreview1_17&&(this.list0.dataProvider=new eui.ArrayCollection(this.data.config.rewards))},e}(BaseItemRender);__reflect(Act6ScoreItem.prototype,"Act6ScoreItem"),window.Act6ScoreItem=Act6ScoreItem;var Act6ScoreWin=function(t){function e(){var e=t.call(this)||this;return e.layer=LayerMgr.Popup,e.winType=WinType.NormalWin,e.skinName="Act6ScoreWinEUI",e.addBg(),e.list.itemRenderer=Act6ScoreItem,e.list.dataProvider=e.listData=new eui.ArrayCollection,e}return __extends(e,t),e.prototype.open=function(e){t.prototype.open.call(this),this.updatePanel(e)},e.prototype.updatePanel=function(t){this.listData.source=t.getActDataPreview()},e}(BaseWinSingle);__reflect(Act6ScoreWin.prototype,"Act6ScoreWin"),window.Act6ScoreWin=Act6ScoreWin;var Act6WeightWin=function(t){function e(){var e=t.call(this)||this;return e.layer=LayerMgr.Popup,e.winType=WinType.NormalWin,e.skinName="Act6WeightWinEUI",e.addBg(),e}return __extends(e,t),e.prototype.open=function(e){t.prototype.open.call(this),this.updatePanel(e)},e.prototype.updatePanel=function(t){this.lbWeight.textFlow=addColorTF(t.getWeightDec())},e}(BaseWinSingle);__reflect(Act6WeightWin.prototype,"Act6WeightWin"),window.Act6WeightWin=Act6WeightWin;var Act8RankItem=function(t){function e(){var e=t.call(this)||this;return e.skinName="Act8RankItemEUI",e}return __extends(e,t),e.prototype.dataChanged=function(){var t=this.data;t.rank<=5?(this.imgRank.source="public_zycs_ranknum_"+t.rank,this.lbRank.text=""):(this.imgRank.source="",this.lbRank.text=""+t.rank),this.imgXwyd.visible=""==t.roleName,this.lbDec.scaleX=""==t.roleName?1:0,this.lbName.text=""+t.roleName,this.lbNum.text=""+t.num},e}(BaseItemRender);__reflect(Act8RankItem.prototype,"Act8RankItem"),window.Act8RankItem=Act8RankItem;var WinMgr=function(t){function e(){var i=t.call(this)||this;return i._wins={},i.winLogDatas=[],i.sortIndex=0,i.destroyCount=5,MessageMgr.ins().coverFunc(e),i}return __extends(e,t),e.ins=function(){return t.getIns.call(this,e)},e.prototype.startTimer=function(){Timer.ins()["do"](5e3,1e3,0,this.updateTime,this)},e.prototype.updateTime=function(t){void 0===t&&(t=0),this.destroyCount--;var e=this.destroyCount<=0;e&&(this.destroyCount=5);for(var i in this._wins){var n=this._wins[i];n&&(n.isShow()&&n.updateTime(t),e&&this.destroyWin(n,i))}},e.prototype.destroyWin=function(t,e){if(t.canDestroy()){var i=t.winType;delete this._wins[e],i==WinType.MainWin&&this.patchDestroyWin()}},e.prototype.patchDestroyWin=function(){},e.prototype.clearRes=function(){var t=!1;for(var e in this._wins){var i=this._wins[e];if(i.winType==WinType.MainWin){t=!0;break}}},e.prototype.clear=function(){this.closeAll(),this._wins={}},e.prototype.getKey=function(t){var e="";if("string"==typeof t)e=t;else if("function"==typeof t)e=egret.getQualifiedClassName(t);else if(t instanceof BaseEuiWin)for(var i=Object.keys(this._wins),n=0,a=i.length;a>n;n++){var o=i[n];if(this._wins[o]==t){e=o;break}}return e},e.prototype.winOpenCheck=function(t){for(var e=[],i=1;i<arguments.length;i++)e[i-1]=arguments[i];var n=!0,a=getDefinitionByName(t);if(a){var o=a.openCheck;null!=o&&(n=o.call.apply(o,[a].concat(e)))}return n},e.prototype.winCanOpen=function(t){for(var e=[],i=1;i<arguments.length;i++)e[i-1]=arguments[i];var n=!0,a=getDefinitionByName(t);if(a){var o=a.canOpen;null!=o&&(n=o.call.apply(o,[a].concat(e)))}return n},e.prototype.open=function(t){for(var e=[],i=1;i<arguments.length;i++)e[i-1]=arguments[i];var n,a=this.getKey(t);return this.winOpenCheck.apply(this,[a].concat(e))&&(n=this.openEasy(a,e),n&&this.checkOpenWin(n)),n},e.prototype.checkOpen=function(t){for(var e=[],i=1;i<arguments.length;i++)e[i-1]=arguments[i];var n=this.getKey(t);return this.winOpenCheck.apply(this,[n].concat(e))},e.prototype.canOpen=function(t){for(var e=[],i=1;i<arguments.length;i++)e[i-1]=arguments[i];var n=this.getKey(t);return this.winCanOpen.apply(this,[n].concat(e))},e.prototype.openEasy=function(t,e){void 0===e&&(e=null);var i=this.getKey(t),n=this._wins[i];if(!n){var a=getDefinitionByName(i);if(!a)return console.log("窗口:"+i+"不存在"),null;n=new a,n.initUI(),n.visible=!1}return n.isLog&&Actor.ins().isLocation&&console.log("打开窗口:"+i+", winId:"+n.getWinId()),n.winType==WinType.MainWin&&this.closeTopLevelEasy(n),this._wins[i]=n,this.saveWinOpenInfo(i),n.addToParentAt(),n.sortIndex=this.sortIndex++,n.open.apply(n,e),n.visible=!0,this.patchWinOpen(i),n},e.prototype.checkOpenWin=function(t){t&&t.winType==WinType.MainWin&&this.closeTopLevelEasy(t),(t&&t.winType==WinType.MainWin||t.winType==WinType.OverlayWin)&&this.patchTopWinOpen(egret.getQualifiedClassName(t))},e.prototype.hasMainWin=function(){var t=!1;for(var e in this._wins){var i=this._wins[e];if(i&&i.winType==WinType.MainWin){t=!0;break}}return t},e.prototype.closeTopWin=function(){var t=this.getCloseTopWin();t&&this.close(t)},e.prototype.getCloseTopWin=function(){var t=null,e=-1;for(var i in this._wins){var n=this._wins[i];n&&n.isShow()&&(n.winType==WinType.MainWin||n.winType==WinType.OverlayWin)&&n.sortIndex>e&&(t=n,e=n.sortIndex)}return t},e.prototype.hasTopWinNotClose=function(){var t=!1;for(var e in this._wins){var i=this._wins[e];if(i&&i.isShow()&&(i.winType==WinType.MainWin||i.winType==WinType.OverlayWin)){t=!0;break}}return t},e.prototype.getMainWins=function(){var t=[];for(var e in this._wins){var i=this._wins[e];if(i&&i.isShow()&&(i.winType==WinType.MainWin||i.winType==WinType.OverlayWin)){t.push(i);break}}return t},e.prototype.close=function(t){for(var e=[],i=1;i<arguments.length;i++)e[i-1]=arguments[i];var n=this.getKey(t),a=this.closeEasy(n,e);a&&this.checkCloseWin(a)},e.prototype.closeEasy=function(t){for(var e=[],i=1;i<arguments.length;i++)e[i-1]=arguments[i];if(!this.isShow(t))return null;var n=this.getKey(t),a=this.getWin(n);return a&&(a.close.apply(a,e),this.patchWinClose(n),DisUtil.remove(a),a.visible=!1,this.destroyWin(a,n)),a},e.prototype.checkCloseWin=function(t){void 0===t&&(t=null),t&&t.winType==WinType.MainWin&&this.closeTopLevelEasy(t);var e=!1;for(var i in this._wins){var n=this._wins[i];if(n&&n.isShow()&&(n.winType==WinType.MainWin||n.winType==WinType.OverlayWin)){e=!0;break}}!t||t.winType!=WinType.MainWin&&t.winType!=WinType.OverlayWin||this.patchTopWinClose("")},e.prototype.getWin=function(t){var e=this.getKey(t);return this._wins[e]},e.prototype.closeAll=function(){for(var t in this._wins)this.closeEasy(t,[])},e.prototype.closeTopLevel=function(){this.closeTopLevelEasy(),this.checkCloseWin()},e.prototype.closeAllWin=function(){for(var t in this._wins){var e=this._wins[t];e.winType!=WinType.NeverCloseWin&&this.closeEasy(t,[])}this.patchTopWinClose("")},e.prototype.closeTopLevelEasy=function(t){if(void 0===t&&(t=null),t&&t.winType==WinType.MainWin)for(var e in this._wins){var i=this._wins[e];t==i||i.winType!=WinType.MainWin&&i.winType!=WinType.OverlayWin||this.closeEasy(e,[])}},e.prototype.isShow=function(t){var e=this.getWin(t);return e&&e.isShow()},e.prototype.patchWinOpen=function(t){return t},e.prototype.patchWinClose=function(t){return t},e.prototype.patchTopWinOpen=function(t){var e=new WinOnOffData;return e.winName=t,e},e.prototype.patchTopWinClose=function(t){var e=new WinOnOffData;return e.winName=t,e},e.prototype.saveWinOpenInfo=function(t){var e=new WinLogData;e.winName=t,this.winLogDatas.unshift(e),this.winLogDatas.length>3&&(this.winLogDatas.length=3)},e.prototype.getWinLog=function(){for(var t="",e=0,i=this.winLogDatas;e<i.length;e++){var n=i[e];t+="-"+n.winName+"-"}return t},e}(BaseIns);__reflect(WinMgr.prototype,"WinMgr");var WinOnOffData=function(){function t(){this.winName=""}return t}();__reflect(WinOnOffData.prototype,"WinOnOffData");var WinLogData=function(){function t(){this.winName=""}return Object.defineProperty(t.prototype,"dateTime",{get:function(){return this.serverTime?new Date(this.serverTime).toLocaleString():(new Date).toLocaleString()},enumerable:!0,configurable:!0}),t}();__reflect(WinLogData.prototype,"WinLogData");var WinType;!function(t){t[t.NormalWin=0]="NormalWin",t[t.MainWin=1]="MainWin",t[t.NeverCloseWin=2]="NeverCloseWin",t[t.OverlayWin=3]="OverlayWin"}(WinType||(WinType={}));var Act8RankWin=function(t){function e(){var e=t.call(this)||this;return e.winType=WinType.OverlayWin,e}return __extends(e,t),e.prototype.initUI=function(){t.prototype.initUI.call(this),this.addBg()},e.prototype.open=function(e){this.data=e,t.prototype.open.call(this)},e.prototype.getParam=function(){return this.data},e.panelNames=[Act8RankPanel],e}(BaseWinAutoTab);__reflect(Act8RankWin.prototype,"Act8RankWin"),window.Act8RankWin=Act8RankWin;var ActCZCBTipsWin1=function(t){function e(){return t.call(this)||this}return __extends(e,t),e.prototype.countDown=function(){closeWin(e)},e.prototype.onClick=function(t){t.target!=this.closeBtn0&&(closeWin(e),openWin(ActRankWin2))},e.prototype.updatePanel=function(){this.actData34=ActSys.ins().getActivityDataByType(ActType.TYPE_34,ActSubType.TYPE_1);var t=this.actData34.getConfig(1);this.bmpPower.text="+"+t.showPower,this.list.dataProvider=new eui.ArrayCollection(t.rewards),this.updateMC(t)},e.prototype.updateMC=function(t){this.offsMc.scaleX=this.offsMc.scaleY=t.scale/100;var e=GFunc.getItemTipsMCData(GFunc.creatUnknown(t.rewards[0].id,1));this.mc=e.getFileName()},e.prototype.addToParent=function(t){this.addToParentAt(t,0)},e}(ActRankTipsWin1);__reflect(ActCZCBTipsWin1.prototype,"ActCZCBTipsWin1"),window.ActCZCBTipsWin1=ActCZCBTipsWin1;var ActCZCBTipsWin2=function(t){function e(){return t.call(this)||this}return __extends(e,t),e.prototype.open=function(e){this.actData34=e,t.prototype.open.call(this,null)},e.prototype.countDown=function(){closeWin(e),openWin(ActRankWin2)},e.prototype.onClose=function(){e.isOpen=!1,closeWin(e)},e.prototype.onTimeClose=function(){closeWin(e)},e.prototype.updatePanel=function(){var t,e,i=0,n=0,a="";if(0==this.actData34.myRank){var o=Math.min(this.actData34.rankDatas.length-1,19);e=this.actData34.rankDatas[o],n=e.rank}else{for(var s=Math.min(this.actData34.rankDatas.length-1,19),r=s;r>=0;r--)if(e=this.actData34.rankDatas[r],this.actData34.dabiao<e.value){n=e.rank;break}0==n&&(e=this.actData34.rankDatas[0],n=e.rank)}i=Math.max(e.value-this.actData34.dabiao,1),t=this.actData34.getConfigByRank(e.rank).rewards[0];var u=Cfg.getItemCfg(t.id);a=addColor(u.getName()+"x"+t.count,GConst.PZColor[u.quality]);var h=Lang.act_str108.replace("$str$",addColor(Lang.act_str91,16751375));h=h.replace("$power$",addColor(i,5767068)),h=h.replace("$rank$",addColor(n,5767068)),h=h.replace("$name$",a),this.lbDec.textFlow=addColorTF(h)},e.prototype.addToParent=function(t){this.addToParentAt(t,0)},e.isOpen=!0,e}(ActRankTipsWin2);__reflect(ActCZCBTipsWin2.prototype,"ActCZCBTipsWin2"),window.ActCZCBTipsWin2=ActCZCBTipsWin2;var ActItem3_3Task=function(t){function e(){var e=t.call(this)||this;e.skinName="ActItem3_3TaskEUI";GFunc.playUIMovie("public_zycs_button03",e.btnGet.width/2,e.btnGet.height/2,e.btnGet,-1);return e}return __extends(e,t),e.prototype.dataChanged=function(){this.btnGo.name="btnGo_"+this.itemIndex,this.btnGet.name="btnGet_"+this.itemIndex;var t=this.data,e=ActSys.ins().getActDataById(t.config.id),i=e.getJindu(t.config.index),n=Cfg.getConfig(GuildConveneTaskConfig,t.config.taskid),a=n.target,o=i>=a,s=1==e.deCodeRecord(t.config.index),r=o?5767068:16716820,u=""+n.shortDesc+addColor("("+i+"/"+a+")",r);this.labelDesc.textFlow=addColorTF(u),this.labelHighdian.text=""+Lang.common_str126+Cfg.getItemCfg(t.config.jifenShow.id).getName()+":"+t.config.jifenShow.count,this.btnGo.visible=!o,this.btnGet.visible=o&&!s,this.imgYLQ.visible=o&&s},e}(BaseItemRender);__reflect(ActItem3_3Task.prototype,"ActItem3_3Task"),window.ActItem3_3Task=ActItem3_3Task;var ActPanelTabItem3_2=function(t){function e(){var e=t.call(this)||this;return e.skinName="ActPanelTabItem3_2EUI",e}return __extends(e,t),e.prototype.dataChanged=function(){var t=this.data;this.consuTxt.text=Lang.act_str62[t]},e.prototype.setRedPoint=function(t){this.redPoint.visible=t},e}(BaseItemRender);__reflect(ActPanelTabItem3_2.prototype,"ActPanelTabItem3_2"),window.ActPanelTabItem3_2=ActPanelTabItem3_2;var BitmapNumber=function(t){function e(){var e=t.call(this)||this;return e.bmps=[],e.value=0,e.gap=0,e.bmpWord0=new egret.Bitmap,e.addChild(e.bmpWord0),e.bmpWord=new egret.Bitmap,e.addChild(e.bmpWord),e.group=new eui.Group,e.addChild(e.group),e}return __extends(e,t),e.prototype.setNumber=function(t,e,i){void 0===i&&(i=0);var n="";n=t>0?"+"+t.toString():t.toString().replace("-",""),n=n.replace(RegUtil.DOT_NUMBER,"");var a=Math.max(n.length,this.bmps.length);this.gap=i;for(var o=0;a>o;o++){var s=this.bmps[o];if(s||(s=new egret.Bitmap,this.bmps[o]=s,this.group.addChild(s)),o<n.length){var r=RES.getRes(e+n[o]);if(!r)throw new Error("错误数字:"+t+",BitmapNumber类使用的数字资源必须提前预加载,在 piaozi_zycs.png 中打包成图集"+(e+n[o]));s.visible=!0,s.texture=r}}this.updatePos(),this.value=t},e.prototype.setWordSource=function(t){t&&""!=t&&(this.bmpWord.visible=!0,this.bmpWord.texture=RES.getRes(t),this.updatePos())},e.prototype.setWord0Source=function(t){t&&""!=t&&(this.bmpWord0.visible=!0,this.bmpWord0.texture=RES.getRes(t),this.updatePos())},e.prototype.updatePos=function(){var t=0,e=0;this.bmpWord0.texture&&(t+=this.bmpWord0.texture.textureWidth,e=Math.max(e,this.bmpWord0.texture.textureHeight)),this.bmpWord.texture&&(this.bmpWord.x=t+this.gap,t+=this.bmpWord.texture.textureWidth,e=Math.max(e,this.bmpWord.texture.textureHeight));for(var i=0,n=this.bmps;i<n.length;i++){var a=n[i];a.texture&&(a.x=t+this.gap,t+=a.texture.textureWidth+this.gap,e=Math.max(e,a.texture.textureHeight))}this.bmpWord0.texture&&(this.bmpWord0.y=e-this.bmpWord0.texture.textureHeight),this.bmpWord.texture&&(this.bmpWord.y=e-this.bmpWord.texture.textureHeight);for(var o=0,s=this.bmps;o<s.length;o++){var a=s[o];a.texture&&(a.y=e-a.texture.textureHeight)}this.group.width=t,this.group.height=e,this.anchorOffsetX=this.group.width/2,this.anchorOffsetY=this.group.height/2},e.prototype.reset=function(){this.x=this.y=0,this.alpha=this.scaleX=this.scaleY=1,this.anchorOffsetX=this.anchorOffsetY=0,this.gap=0,this.visible=!0;for(var t=0,e=this.bmps;t<e.length;t++){var i=e[t];i.texture=null,i.visible=!1}this.bmpWord0.texture=null,this.bmpWord.texture=null},e}(egret.DisplayObjectContainer);__reflect(BitmapNumber.prototype,"BitmapNumber");var ActRankBtnPanel2=function(t){function e(){return t.call(this)||this}return __extends(e,t),e.prototype.addDisplay=function(){this.actData34=ActSys.ins().getActivityDataByType(ActType.TYPE_34,ActSubType.TYPE_1),t.prototype.addDisplay.call(this),this.addLsn(ActSys.ins().patchCZCBRank,this.updatePanel2),this.updatePanel2(),this.updateRp(),Timer.ins()["do"](0,1e3,0,this.timerFunc,this),ActSys.ins().sendCZCBRank(this.actData34.actId)},e.prototype.updateInfo=function(){this.actData34=ActSys.ins().getActivityDataByType(ActType.TYPE_34,ActSubType.TYPE_1),this.actData34&&ActSys.ins().sendCZCBRank(this.actData34.actId)},e.prototype.updateRp=function(t){(!t||t.check(ActRankWin2))&&(this.redPoint.visible=RpSys.ins().getData(ExtCom,ActRankWin2))},e.openCheck=function(){var t=ActSys.ins().getActivityDataByType(ActType.TYPE_34,ActSubType.TYPE_1);return GFunc.isSysOpen(308)&&t?!0:(closeWin(this),!1)},e.prototype.timerFunc=function(){this.lbTime.textFlow=addColorTF(this.actData34.getformatTime(Actor.ins().serverTime,"hh:mm:ss"))},e.prototype.updatePanel=function(){},e.prototype.updatePanel2=function(){if(this.actData34){var t=Cfg.getConfig(ActivityBtnConfig,this.actData34.actId);
this.imgTitle.source="mianui_zycs_phb"+t.showday;var e=this.actData34.getFirstRankData();e?(this.lbName.text=""+e.roleName,this.lbName.textColor=5767068,this.mcName=ResMgr.getEffName("cbsg")):(this.lbName.text=""+Lang.act_str87,this.lbName.textColor=13486270,this.mcName="");var i=this.actData34.getConfig(1);this.updateMC(i)}},e.prototype.updateMC=function(t){var e=GFunc.getItemTipsMCData(GFunc.creatUnknown(t.rewards[0].id,1));this.mc=e.getFileName()},e.prototype.onClick=function(t){openWin(ActRankWin2)},e}(ActRankBtnPanel);__reflect(ActRankBtnPanel2.prototype,"ActRankBtnPanel2"),window.ActRankBtnPanel2=ActRankBtnPanel2;var btnItemTime=function(t){function e(){var e=t.call(this)||this;return e.skinName="BtnMin1_9",e.groupTime.width=133,e}return __extends(e,t),e.prototype.open=function(t,e){void 0===e&&(e=5),this.labelDesc.text=t;var i=egret.Tween.get(this.groupTime);i.to({width:0},1e3*e)},e}(eui.Button);__reflect(btnItemTime.prototype,"btnItemTime");var ComGunDongBase=function(t){function e(){var e=t.call(this)||this;return e.listDatas=[],e.arrowDir=ArrowDir.dirH,e.speed=1,e.group=new eui.Group,e.group.scrollEnabled=!0,e.addChild(e.group),e}return __extends(e,t),e.prototype.open=function(){this.reset(),this.update(),Timer.ins()["do"](0,33,0,this.animation,this,TimerType.FIRST)},e.prototype.close=function(){for(var e=[],i=0;i<arguments.length;i++)e[i]=arguments[i];Timer.ins().removeAll(this),t.prototype.close.call(this)},e.prototype.reset=function(){this.group.removeChildren()},e.prototype.iniData=function(t,e,i,n,a){void 0===i&&(i=0),void 0===n&&(n=ArrowDir.dirH),void 0===a&&(a=this.speed),this.itemClassName=e,this.arrowDir=n,this.listDatas=t,this.gap=i,this.group.top=this.group.bottom=this.group.left=this.group.right=0,this.speed=a;var o=getDefinitionByName(this.itemClassName);this.item=new o},e.prototype.addData=function(t){for(var e=getDefinitionByName(this.itemClassName),i=this.getMaxItem(),n=this.getMaxXY(),a=0;a<t.length;a++){var o=new e;o.data=t[a],this.arrowDir==ArrowDir.dirH?o.x=n+(i?i.width+this.gap:0):o.y=n+(i?i.height+this.gap:0),this.group.addChild(o)}},e.prototype.update=function(){for(var t,e=getDefinitionByName(this.itemClassName),i=0;i<this.listDatas.length;i++){var n=this.listDatas[i],a=new e;a.data=n;var o=i>0?this.gap:0;this.arrowDir==ArrowDir.dirH?a.x=(t?t.x+t.width:0)+o:a.y=(t?t.y+t.height:0)+o,t=a,this.group.addChild(a)}},e.prototype.animation=function(){if(this.isGunDong())for(var t=this.group.numChildren,e=0;t>e;e++){var i=this.group.getChildAt(e);this.arrowDir==ArrowDir.dirH?i.x=i.x-1*this.speed:i.y=i.y-1*this.speed,this.resetItemXY(i)}},e.prototype.resetItemXY=function(t){var e=this.getMaxItem();if(this.arrowDir==ArrowDir.dirH){var i=-t.width;t.x<i&&(t.x=e.x+e.width+this.gap)}else{var n=-t.height;t.y<n&&(t.y=e.y+e.height+this.gap)}},e.prototype.getMaxItem=function(){for(var t,e=this.group.numChildren,i=0,n=0;e>n;n++){var a=this.group.getChildAt(n);this.arrowDir==ArrowDir.dirH?a.x>=i&&(i=a.x,t=a):a.y>=i&&(i=a.y,t=a)}return t},e.prototype.getMaxXY=function(){for(var t=this.group.numChildren,e=0,i=0;t>i;i++){var n=this.group.getChildAt(i);this.arrowDir==ArrowDir.dirH?n.x>=e&&(e=n.x):n.y>=e&&(e=n.y)}return e},e.prototype.isGunDong=function(){return this.arrowDir==ArrowDir.dirH?this.group.numChildren*(this.item.width+this.gap)>this.group.width:this.group.numChildren*(this.item.height+this.gap)>this.group.height},e}(BaseEUI);__reflect(ComGunDongBase.prototype,"ComGunDongBase"),window.ComGunDongBase=ComGunDongBase;var CountDownWin=function(t){function e(){return t.call(this)||this}return __extends(e,t),e.prototype.initUI=function(){t.prototype.initUI.call(this),this.layer=LayerMgr.Tips,this.skinName="CountDownSkin"},e.prototype.open=function(t,i){void 0===t&&(t=5),void 0===i&&(i=e.TYPE_FB),t=Math.floor(t),this.currentState="s"+i,this.validateNow(),this.reset(),this.scale(t)},e.prototype.close=function(){this.reset(),t.prototype.close.call(this)},e.prototype.scale=function(t){var e=this,i=egret.Tween.get(this.timebmp);t>=0&&(this.timebmp.text=t.toString()),i.to({scaleX:1.8,scaleY:1.8},80).to({scaleX:1,scaleY:1},100).wait(820).call(function(){t>1?e.scale(t-1):closeWin(e)})},e.prototype.reset=function(){egret.Tween.removeTweens(this.timebmp),this.timebmp.scaleX=this.timebmp.scaleY=1,this.timebmp.text="0"},e.TYPE_FB=1,e.TYPE_JJC=2,e}(BaseWinSingle);__reflect(CountDownWin.prototype,"CountDownWin"),window.CountDownWin=CountDownWin;var FlyNumber=function(t){function e(){var e=t.call(this)||this;return e.skinName="FlyNumberSkin",e}return __extends(e,t),e.prototype.setNumber=function(t,e){var i=ResMgr.getDamagerWordResource(e);if(i?this.bmpWord.source=ResMgr.getDamagerWordResource(e):this.bmpWord.source=null,0!=t){var n=t.toString();n=n.replace(RegUtil.DOT_NUMBER,"");var a=ResMgr.getDamageNumberType(e);this.bmpNumber.font=ResMgr.getFontByNumberType(a),this.bmpNumber.text=n,this.group.addChild(this.bmpNumber)}else DisUtil.remove(this.bmpNumber);this.updatePos()},e.prototype.updatePos=function(){this.anchorOffsetX=this.group.width/2,this.anchorOffsetY=this.group.height/2},e.prototype.setWordSource=function(t){this.bmpWord.source=t,this.updatePos()},e.prototype.reset=function(){this.x=0,this.y=0,this.alpha=1,this.scaleX=1,this.scaleY=1,this.bmpWord.source=null,this.bmpNumber.text="",DisUtil.remove(this),egret.Tween.removeTweens(this)},e}(BaseEUI);__reflect(FlyNumber.prototype,"FlyNumber",["IObjectPool"]),window.FlyNumber=FlyNumber;var ActPanel1_16=function(t){function e(){var e=t.call(this)||this;return e.list.itemRenderer=ActItem1_16,e}return __extends(e,t),e.prototype.onItemLink=function(){openWin(GuanJiWin)},e}(ActPanel1_3);__reflect(ActPanel1_16.prototype,"ActPanel1_16"),window.ActPanel1_16=ActPanel1_16;var ActPanel1_2=function(t){function e(){var e=t.call(this)||this;return e.skinName="ActPanel1_2EUI",e.list0.itemRenderer=ActItem1_2,e}return __extends(e,t),e.prototype.open=function(e){t.prototype.open.call(this,e),this.addClickE(this.btnSend,this.onClick),this.addLsn(ActSys.ins().patchActivityIsGetAwards,this.updateData),this.addLsn(ActSys.ins().patchConsuRecord,this.updateData),this.addLsn(RechargePowerSys.ins().patchZhaoCaiLongDate,this.updateData),this.addLsn(RechargePowerSys.ins().patchhaoCaiLongBuy,this.updateData),this.list0.dataProvider=this.list0Arr=new eui.ArrayCollection,this.updateData()},e.prototype.updateData=function(){this.actData=ActSys.ins().getActDataById(this.actId);var t=this.actData.getItemDatas();SortUtil.sortOn(t,["status","dabiao"],[SortType.up,SortType.up]),this.list0Arr.replaceAll(t),this.btnSend.visible=!RechargePowerSys.ins().zhaoCaiLongData.isAct(),this.imgYjh.visible=RechargePowerSys.ins().zhaoCaiLongData.isAct()},e.prototype.updateTime=function(){this.actData&&(this.timeTxt.textFlow=addColorTF(this.actData.getformatTime()))},e.prototype.onClick=function(t){switch(t.target){case this.btnSend:openWin(RechargeActSys.ins().firstRechargeData.isRecharge()?ZhaoCaiLongWin:FirstRechargeBuyWin)}},e}(ActBasePanel);__reflect(ActPanel1_2.prototype,"ActPanel1_2"),window.ActPanel1_2=ActPanel1_2;var ActPanel1_20=function(t){function e(){var e=t.call(this)||this;return e.skinName="ActPanel1_20EUI",e.list.itemRenderer=ActItem1_20,e}return __extends(e,t),e.prototype.open=function(e){t.prototype.open.call(this,e),this.addClickE(this.btnSend,this.onClick),this.addLsn(ActSys.ins().patchActivityIsGetAwards,this.updateData),this.addLsn(ActSys.ins().patchConsuRecord,this.updateData),this.addLsn(RechargePowerSys.ins().patchZhaoCaiLongDate,this.updateData),this.addLsn(RechargePowerSys.ins().patchhaoCaiLongBuy,this.updateData),this.list.dataProvider=this.list0Arr=new eui.ArrayCollection,this.updateData()},e.prototype.updateData=function(){this.actData=ActSys.ins().getActDataById(this.actId);var t=this.actData.getItemDatas();SortUtil.sortOn(t,["status","dabiao"],[SortType.up,SortType.up]),this.list0Arr.replaceAll(t),this.btnSend.visible=!RechargePowerSys.ins().zhaoCaiLongData.isAct(),this.imgYjh.visible=RechargePowerSys.ins().zhaoCaiLongData.isAct()},e.prototype.updateTime=function(){this.actData&&(this.lbTime.textFlow=addColorTF(this.actData.getformatTime()))},e.prototype.onClick=function(t){switch(t.target){case this.btnSend:openWin(RechargeActSys.ins().firstRechargeData.isRecharge()?ZhaoCaiLongWin:FirstRechargeBuyWin)}},e}(ActBasePanel);__reflect(ActPanel1_20.prototype,"ActPanel1_20"),window.ActPanel1_20=ActPanel1_20;var ActPanel1_21=function(t){function e(){var e=t.call(this)||this;return e.initUI(),e}return __extends(e,t),e.prototype.initUI=function(){t.prototype.initUI.call(this),this.list.itemRenderer=ActItem1_21,this.list.dataProvider=this.listData=new eui.ArrayCollection},e.prototype.setSkinName=function(){this.skinName="ActPanel1_21EUI"},e}(ActPanel1_7);__reflect(ActPanel1_21.prototype,"ActPanel1_21"),window.ActPanel1_21=ActPanel1_21;var ActPanel1_22=function(t){function e(){var e=t.call(this)||this;return e.list.itemRenderer=ActItem1_22,e}return __extends(e,t),e.prototype.onItemLink=function(){openWin(BossWin,0,1)},e}(ActPanel1_3);__reflect(ActPanel1_22.prototype,"ActPanel1_22"),window.ActPanel1_22=ActPanel1_22;var ActPanel1_23=function(t){function e(){var e=t.call(this)||this;return e.list.itemRenderer=ActItem1_23,e}return __extends(e,t),e.prototype.onItemLink=function(){openWin(FuBenWin,0,2)},e}(ActPanel1_3);__reflect(ActPanel1_23.prototype,"ActPanel1_23"),window.ActPanel1_23=ActPanel1_23;var ActPanel1_24=function(t){function e(){var e=t.call(this)||this;return e.list.itemRenderer=ActItem1_24,e}return __extends(e,t),e.prototype.onItemLink=function(){openWin(FuBenWin,1,1)},e}(ActPanel1_3);__reflect(ActPanel1_24.prototype,"ActPanel1_24"),window.ActPanel1_24=ActPanel1_24;var ActPanel1_25=function(t){function e(){var e=t.call(this)||this;return e.list.itemRenderer=ActItem1_25,e}return __extends(e,t),e.prototype.onItemLink=function(){openWin(FuBenWin,0,1)},e}(ActPanel1_3);__reflect(ActPanel1_25.prototype,"ActPanel1_25"),window.ActPanel1_25=ActPanel1_25;var ActPanel1_26=function(t){function e(){var e=t.call(this)||this;return e.list.itemRenderer=ActItem1_26,e}return __extends(e,t),e.prototype.onItemLink=function(){openWin(FuBenWin,0,1)},e}(ActPanel1_3);__reflect(ActPanel1_26.prototype,"ActPanel1_26"),window.ActPanel1_26=ActPanel1_26;var ActPanel1_28=function(t){function e(){var e=t.call(this)||this;return e.page=0,e.initUI(),e}return __extends(e,t),e.prototype.initUI=function(){t.prototype.initUI.call(this),this.listGeRen.itemRenderer=ActItem1_28,this.listGeRen.dataProvider=this.listGeRenData=new eui.ArrayCollection,this.listQuanFu.itemRenderer=ActItem1_29,this.listQuanFu.dataProvider=this.listQuanFuData=new eui.ArrayCollection,this.tab.itemRenderer=BaseTabBtn3,this.tab.dataProvider=new eui.ArrayCollection(Lang.act_str117)},e.prototype.setSkinName=function(){this.skinName="ActPanel1_28EUI"},e.prototype.open=function(e){t.prototype.open.call(this,e),this.addClickE(this.listGeRen,this.onListClick),this.addClickE(this.listQuanFu,this.onListClick),this.addItemTapE(this.tab,this.onTouchTab),this.addLsn(ActSys.ins().patchActivityIsGetAwards,this.updateData),this.addLsn(ActSys.ins().patchActivityPanel,this.updateData),this.addLsn(ActSys.ins().patchQMKGUpdate,this.updateData),this.updateInfo()},e.prototype.updateInfo=function(){this.actDataGeRen=ActSys.ins().getActDataById(this.actId),this.actDataQuanFu=ActSys.ins().getActDataById(this.actBtnCfg.addId[0]),this.tab.selectedIndex=this.actDataQuanFu.redPoint()?1:0,this.onTouchTab(),this.updateData()},e.prototype.updateData=function(){var t=this.actDataGeRen.getItemDatas();SortUtil.sortOn(t,["status","dabiao"],[SortType.up,SortType.up]),this.listGeRenData.replaceAll(t);var e=this.actDataQuanFu.getItemDatas();SortUtil.sortOn(e,["status","dabiao"],[SortType.up,SortType.up]),this.listQuanFuData.replaceAll(e),this.tab.validateNow(),this.tab.getChildAt(0).redPoint.visible=this.actDataGeRen.canReward(),this.tab.getChildAt(1).redPoint.visible=this.actDataQuanFu.canReward()},e.prototype.updateTime=function(){},e.prototype.onListClick=function(t){if(t.target)if("btnLink"==t.target.name){var e=t.target.parent.data,i=e.config;GFunc.createTaskNavData(i.controlTarget)["goto"]()}else if("btnSend"==t.target.name){var e=t.target.parent.data,i=e.config;ActSys.ins().sendReward(i.id,i.index)}},e.prototype.onTouchTab=function(t){this.page=this.tab.selectedIndex,this.listGeRen.visible=0==this.page,this.listQuanFu.visible=1==this.page},e}(ActBasePanel);__reflect(ActPanel1_28.prototype,"ActPanel1_28"),window.ActPanel1_28=ActPanel1_28;var GameBlackCom=function(t){function e(){var e=t.call(this)||this;return e.shp=new egret.Shape,e.shp.touchEnabled=!1,e.shp.graphics.beginFill(0),e.nameImg=new eui.Image,e.nameImg.touchEnabled=!1,e.nameImg.horizontalCenter=0,e.isRun=!1,e}return __extends(e,t),e.ins=function(){return t.getIns.call(this,e)},e.prototype.showBlackMapEff=function(t,e,i){if(void 0===i&&(i=1e3),!this.isRun){this.isRun=!0,this.shp.parent||(LayerMgr.Tips.addChild(this.shp),LayerMgr.Tips.addChild(this.nameImg)),egret.Tween.removeTweens(this.shp),egret.Tween.removeTweens(this.nameImg);var n=LayerMgr.getStage().stageWidth,a=LayerMgr.getStage().stageHeight;this.shp.alpha=0,this.shp.visible=!0,this.nameImg.visible=!1,this.shp.graphics.drawRect(0,0,n,a),this.t=egret.Tween.get(this.shp),this.t.to({alpha:1},i).call(t?t:function(){},e)}},e.prototype.hideBlackMapEff=function(t){void 0===t&&(t=500),egret.Tween.removeTweens(this.shp),this.shp.parent||(LayerMgr.Tips.addChild(this.shp),LayerMgr.Tips.addChild(this.nameImg));var e=LayerMgr.getStage().stageWidth,i=LayerMgr.getStage().stageHeight;this.shp.alpha=1,this.shp.graphics.drawRect(0,0,e,i),this.t=egret.Tween.get(this.shp),this.t.to({alpha:0},t).call(this.showMapNameEff,this)},e.prototype.showMapNameEff=function(){var t=Cfg.getConfig(ScenesConfig,FbSys.ins().mapId);this.isRun=!1,t&&t.isShowEff&&(this.nameImg.alpha=0,this.nameImg.visible=!0,this.nameImg.source=ResMgr.getMapTitleResourceByEff(t.effId),this.nameImg.y=(LayerMgr.getStage().stageHeight>>1)-(this.nameImg.height>>1)-180,this.t=egret.Tween.get(this.nameImg),this.t.to({alpha:1},500).wait(800).to({alpha:0,y:this.nameImg.y-80},1800))},e}(BaseIns);__reflect(GameBlackCom.prototype,"GameBlackCom");var ActPanel1_4=function(t){function e(){var e=t.call(this)||this;e.list.itemRenderer=ActItem1_4;Lang.act_str20.replace("$lj$",StrUtil.addColor(Lang.common_str13,5949490));return e}return __extends(e,t),e.prototype.open=function(e){t.prototype.open.call(this,e),this.addLsn(RechargeActSys.ins().patchUpdateRecharge,this.updateData),this.addLsn(ActSys.ins().patchOnLineTime,this.updateData),this.addLsn(ActSys.ins().patchActivityIsGetAwards,this.updateData)},e.prototype.updateData=function(){this.actData=ActSys.ins().getActDataById(this.actId);var t=this.actData.getItemDatas();SortUtil.sortOn(t,["status","dabiao"],[SortType.up,SortType.up]),this.listData.replaceAll(t)},e.prototype.btnGet=function(){return"ActItem1_4.rewardBtn"},e}(ActPanel1_1);__reflect(ActPanel1_4.prototype,"ActPanel1_4"),window.ActPanel1_4=ActPanel1_4;var ActPanel1_5=function(t){function e(){var e=t.call(this)||this;return e.list.itemRenderer=ActItem1_5,e}return __extends(e,t),e.prototype.onItemLink=function(){openWin(FuBenWin,0,0)},e.prototype.showCount=function(){return 4},e.prototype.btnGet=function(){return"ActItem1_5.rewardBtn"},e}(ActPanel1_1);__reflect(ActPanel1_5.prototype,"ActPanel1_5"),window.ActPanel1_5=ActPanel1_5;var ActPanel1_6=function(t){function e(){var e=t.call(this)||this;return e.skinName="ActPanel1_6EUI",e.list.itemRenderer=ActItem1_6,e.list.dataProvider=e.listData=new eui.ArrayCollection,e}return __extends(e,t),e.prototype.open=function(e){t.prototype.open.call(this,e),this.addClickE(this.btnSend,this.onClick),this.addLsn(LogicSys.ins().patchLevelChange,this.updateData),this.addLsn(ActSys.ins().patchActivityIsGetAwards,this.updateData),this.addLsn(RechargePowerSys.ins().patchhaoCaiLongBuy,this.updateBtn),this.updateData()},e.prototype.updateTime=function(){this.actData&&(this.lbTime.textFlow=addColorTF(this.actData.getformatTime()))},e.prototype.updateData=function(){this.actData=ActSys.ins().getActDataById(this.actId);var t=this.actData.getItemDatas();SortUtil.sortOn(t,["status","dabiao"],[SortType.up,SortType.up]),this.listData.replaceAll(t),this.updateBtn()},e.prototype.onClick=function(t){switch(t.target){case this.btnSend:this.onCardLink()}},e.prototype.setImgBg=function(){this.imgBg&&this.actBtnCfg.bg&&""!=this.actBtnCfg.bg&&(this.imgBg.source="hddt_zycs_"+this.actBtnCfg.bg+"_jpg")},e.prototype.onCardLink=function(){openWin(YKWin,YKWin.getTabIndexbyPanel(MonthCardPanel))},e.prototype.updateBtn=function(){var t=!1;this.btnSend.visible=!t,this.imgYjh.visible=t},e}(ActBasePanel);__reflect(ActPanel1_6.prototype,"ActPanel1_6"),window.ActPanel1_6=ActPanel1_6;var GameMapGcEffWin=function(t){function e(){var e=t.call(this)||this;return e.layer=LayerMgr.Top,e.skinName="GameMapGcEffWinEUI",e.addBg(),e}return __extends(e,t),e.prototype.open=function(e,i){t.prototype.open.call(this),this.updateView()},e.prototype.updateView=function(){var t=this;this.rightGroup.width=this.leftGroup.width=LayerMgr.getStage().stageWidth,this.rightGroup.height=this.leftGroup.height=LayerMgr.getStage().stageHeight;var i=egret.Tween.get(this.leftGroup),n=egret.Tween.get(this.rightGroup),a=this.globalToLocal(0,0),o=this.globalToLocal(LayerMgr.getStage().stageWidth,0),s=a.x-(this.leftGroup.width||LayerMgr.getStage().stageWidth);this.leftGroup.x=s;var r=o.x;this.rightGroup.x=r;var u=function(){egret.Tween.removeTweens(t.leftGroup),egret.Tween.removeTweens(t.rightGroup),t.leftGroup.x=0,t.rightGroup.x=0;var i=egret.Tween.get(t.leftGroup),n=egret.Tween.get(t.rightGroup);i.wait(300,!0).to({x:s},400).call(function(){t.leftGroup.visible=!1}),n.wait(300,!0).to({x:r},400).call(function(){t.rightGroup.visible=!1,closeWin(e)})};i.to({x:0},400),n.to({x:0},400).call(function(){u()})},e.openCheck=function(t,e){var i=!1,n=Cfg.getConfig(ScenesConfig,t);if(n.isShowGcEff)if(e){var a=Cfg.getConfig(ScenesConfig,e);i=0==a.isShowGcEff}else i=!0;return i},e}(BaseWinSingle);__reflect(GameMapGcEffWin.prototype,"GameMapGcEffWin"),window.GameMapGcEffWin=GameMapGcEffWin;var ActPanel1_8=function(t){function e(){var e=t.call(this)||this;return e.skinName="ActPanel1_8EUI",e.listTab.itemRenderer=ActItem1_8,e.listTab.dataProvider=e.listTabArr=new eui.ArrayCollection,e.listAward.itemRenderer=ItemBaseReward,e.listAward.dataProvider=e.listAwardArr=new eui.ArrayCollection,e.pageArrowComponent=new PageArrowCom(e.scrollerTab,122,81),e.pageArrowComponent.setBtn(e.btnLeft,e.btnRight),e.btnGet.redPoint.visible=!0,e.mcIcon=new McIcon,e.groupMCIcon.addChild(e.mcIcon),e}return __extends(e,t),e.prototype.open=function(e){t.prototype.open.call(this,e),this.addClickE(this.btnRecharge,this.onClick),this.addClickE(this.btnGet,this.onClick),this.addClickE(this.btnAct,this.onClick),this.addItemTapE(this.listTab,this.onListClick),this.addLsn(RechargeActSys.ins().patchUpdateRecharge,this.upateActivityPanel),this.addLsn(ActSys.ins().patchRechargeEveryDay,this.upateActivityPanel),this.addLsn(ActSys.ins().patchActivityIsGetAwards,this.upateActivityPanel),this.addLsn(ActSys.ins().patchActivityPanel,this.upateActivityPanel),this.addLsn(RechargePowerSys.ins().patchXunZhangBuy,this.updateActBtn),this.pageArrowComponent.open(),this.actData=ActSys.ins().getActDataById(this.actId),this.updateInfo(),this.updateActBtn()},e.prototype.close=function(){t.prototype.close.call(this),this.pageArrowComponent.close(),this.mcIcon.close()},e.prototype.updateActBtn=function(){var t=RechargePowerSys.ins().xunZhangData.isAct();this.btnAct.visible=!t,this.imgYJH.visible=t},e.prototype.updateInfo=function(){this.setTabIndex(ActRewardState.CanGet),this.updatePanel(),this.pageArrowComponent.setListPage(this.listTab.selectedIndex)},e.prototype.upateActivityPanel=function(){this.setTabIndex(ActRewardState.CanGet),this.updatePanel(),this.pageArrowComponent.setListPage(this.listTab.selectedIndex)},e.prototype.setTabIndex=function(t){for(var e=this.actData.getItemDatas(),i=e.length-1,n=0;n<e.length;n++){if(e[n].status==t){i=n;break}if(e[n].status==ActRewardState.NotReached){i=n;break}}this.listTab.selectedIndex=i},e.prototype.updatePanel=function(){this.lbRecharge.text=Lang.act_str59.replace("$rmb$",(this.actData.dabiao/100).toString());var t=this.actData.getItemDatas();this.listTabArr.source=t,this.updateReward(t[this.listTab.selectedIndex])},e.prototype.updateTime=function(){this.labelTime.textFlow=addColorTF(this.actData.getformatTime())},e.prototype.updateReward=function(t){this.curData=t;var e=t.config;this.bmpPower.text=""+e.power,this.bmpWorth.text=""+e.worth,this.imgDesc.source="hddt_zycs_msz"+e.index;Actor.ins().job;this.listAwardArr.source=GFunc.getItemDataRewardByJob(e.rewards),this.btnGet.visible=!1,this.imgYLQ.visible=!1,this.btnRecharge.visible=!1,t.status==ActRewardState.CanGet?this.btnGet.visible=!0:t.status==ActRewardState.Geted?this.imgYLQ.visible=!0:this.btnRecharge.visible=!0,this.mcIcon.open(e.mcIcon)},e.prototype.onListClick=function(t){this.updateReward(t.item)},e.prototype.onClick=function(t){switch(t.target){case this.btnRecharge:openWin(RechargeWin);break;case this.btnAct:openWin(RechargeActSys.ins().firstRechargeData.isRecharge()?XunZhangBuyWin:FirstRechargeBuyWin);break;case this.btnGet:ActSys.ins().sendReward(this.curData.config.id,this.curData.index)}},e.getTabTitle=function(){return"bqz_zycs_kflc"},e}(ActBasePanel);__reflect(ActPanel1_8.prototype,"ActPanel1_8"),window.ActPanel1_8=ActPanel1_8;var ActPanel10_1=function(t){function e(){var e=t.call(this)||this;return e.skinName="ActPanel10_1EUI",e.list.itemRenderer=ActItem10_1,e.list.dataProvider=e.listArr=new eui.ArrayCollection,e}return __extends(e,t),e.prototype.open=function(e){t.prototype.open.call(this,e),this.addClickE(this.btnSend,this.onClick),this.addLsn(ActSys.ins().patchActivityIsGetAwards,this.updateData),this.addLsn(RechargePowerSys.ins().patchhaoCaiLongBuy,this.updateZCLBtn),this.actData=ActSys.ins().getActDataById(this.actId),this.updateData()},e.prototype.updateData=function(){var t=[this.actData,this.actData,this.actData];this.actData.isMaxDay()?t.length=2:t.length=3,this.listArr.source=t,this.updateZCLBtn()},e.prototype.updateZCLBtn=function(){var t=RechargePowerSys.ins().zhaoCaiLongData.isBuy();this.btnSend.visible=!t,this.imgYjh.visible=t},e.prototype.updateTime=function(){this.actData&&(this.lbTime.textFlow=addColorTF(this.actData.getformatTime()))},e.prototype.onClick=function(t){switch(t.target){case this.btnSend:openWin(ZhaoCaiLongBuyWin)}},e}(ActBasePanel);__reflect(ActPanel10_1.prototype,"ActPanel10_1"),window.ActPanel10_1=ActPanel10_1;var ActPanel11_1=function(t){function e(){var e=t.call(this)||this;return e.dataArr=[],e.curIndex=0,e.skinName="ActPanel11_1EUI",e.listBtn.itemRenderer=ActItem11_1,e.listBtn.dataProvider=e.listBtnData=new eui.ArrayCollection,e.listReward.itemRenderer=ItemBaseReward,e.listReward.dataProvider=e.listRewardData=new eui.ArrayCollection,e.bgmc=new MC,e.groupMC.addChild(e.bgmc),e.mcIcon=new McIcon,e.groupMC.addChild(e.mcIcon),e.mcBtnSend=new MC,e.mcBtnSend.x=e.btnSend.width/2,e.mcBtnSend.y=e.btnSend.height/2,e.btnSend.addChildAt(e.mcBtnSend,e.btnSend.numChildren-1),e}return __extends(e,t),e.prototype.open=function(e){t.prototype.open.call(this,e),this.addClickE(this.btnYuLan,this.onClick),this.addClickE(this.btnSend,this.onClick),this.addItemTapE(this.listBtn,this.onListBtn),this.addLsn(ActSys.ins().patchActivityIsGetAwards,this.updateData),this.addLsn(ActSys.ins().patchCSKChange,this.updateData),this.updateData()},e.prototype.close=function(){t.prototype.close.call(this),this.mcIcon.close(),this.bgmc.reset()},e.prototype.updateData=function(){this.actData=ActSys.ins().getActDataById(this.actId),this.listBtnData.source=this.dataArr=this.actData.getItemDatas(),this.curIndex=this.getAutoIndex(),this.listBtn.selectedIndex=this.curIndex;this.actData.getConfig(4);this.imgYgm.visible=this.actData.isBuyAll(),this.updateMC()},e.prototype.getAutoIndex=function(){for(var t=this.actData.datas,e=-1,i=0,n=t;i<n.length;i++){var a=n[i];if(1==a.state){e=a.index;break}}if(-1==e)for(var o=0,s=t;o<s.length;o++){var a=s[o];if(0==a.state){e=a.index;break}}return-1==e?0:e},e.prototype.updateMC=function(){var t=this.dataArr[this.curIndex],e=t.config;this.imgName.source="hjds_zycs_title"+e.index,this.listReward.dataProvider=new eui.ArrayCollection(e.reward),this.mcBtnSend.stop(),this.btnSend.redPoint.visible=!1,this.btnSend.visible=!1,this.mcBtnSend.visible=!1,this.imgYgm.visible=!1;var i=e.daycount.count-this.actData.datas[this.curIndex].buyCount,n=0==i?15733780:5767068;this.lbBuyCount.textFlow=addColorTF(Lang.act_str157+":"+i+"/"+e.daycount.count,n),t.status==ActRewardState.NotReached?(this.btnSend.label=Cfg.getConfig(PayMoneyConfig,e.pay).hb+Lang.common_yuan+"抢购",this.btnSend.visible=!0):t.status==ActRewardState.CanGet?(this.mcBtnSend.playFile(getEffName("yyms2"),-1),this.btnSend.label=Lang.common_str81,this.btnSend.redPoint.visible=!0,this.btnSend.visible=!0,this.mcBtnSend.visible=!0):this.imgYgm.visible=!0,this.mcIcon.open(e.mcIcon)},e.prototype.updateTime=function(){this.actData&&(this.lbTime.textFlow=addColorTF(this.actData.getformatTime()))},e.prototype.onListBtn=function(t){void 0===t&&(t=null),this.curIndex=t.itemIndex,this.updateMC()},e.prototype.onClick=function(t){switch(t.target){case this.btnSend:var e=this.actData.getConfig(this.curIndex+1);this.actData.getRewardStateById(e.index)==ActRewardState.NotReached?VipSys.ins().showReCharge(e.pay):this.actData.getRewardStateById(e.index)==ActRewardState.CanGet&&ActSys.ins().sendReward(this.actId,e.index);break;case this.btnYuLan:openWin(ActPanel11_1YuLanWin,this.getEntityAppearance(),this.getMeiLinAppearanceId(),this.getSumPower())}},e.prototype.getEntityAppearance=function(){for(var t=0,e=0,i=0,n=0,a=Actor.ins().job,o=this.dataArr,s=0;s<o.length;s++){var r=o[s],u=r.config,h=u.mcIcon.param;u.mcIcon.type==MCIconType.shenqi&&(t=h),u.mcIcon.type==MCIconType.wing&&(e=h),u.mcIcon.type==MCIconType.shenzhuang&&(i=h),u.mcIcon.type==MCIconType.damon&&(n=h)}var l=new EntityRoleData;return l.szId=i,l.sqId=t,l.wingId=e,l.damonId=n,l.job=a,l.sex=Actor.ins().sex,l},e.prototype.getMeiLinAppearanceId=function(){for(var t=0,e=(Actor.ins().job,this.dataArr),i=0;i<e.length;i++){var n=e[i],a=n.config,o=a.mcIcon.param;a.mcIcon.type==MCIconType.meilin&&(t=Cfg.getConfig(MeilinHuanhuaBaseConfig,o).appearanceId)}return t},e.prototype.getSumPower=function(){for(var t=0,e=(Actor.ins().job,this.dataArr),i=0;i<e.length;i++){var n=e[i],a=n.config;t+=a.power}return t},e}(ActBasePanel);__reflect(ActPanel11_1.prototype,"ActPanel11_1"),window.ActPanel11_1=ActPanel11_1;var ActPanel11_1YuLanWin=function(t){function e(){var e=t.call(this)||this;return e.skinName="ActPanel11_1YuLanEUI",e.entityRole=GFunc.createEntityUI(),e.groupEntity.addChild(e.entityRole),e.meilinMC=new MC,e.meilinMC.scaleX=e.meilinMC.scaleY=.5,e.groupMeilin.addChild(e.meilinMC),egret.Tween.removeTweens(e.groupMeilin),GFunc.move(e.groupMeilin,new XY(e.groupMeilin.x,e.groupMeilin.y-15),new XY(e.groupMeilin.x,e.groupMeilin.y+15),1500),e.addBg(),e}return __extends(e,t),e.prototype.open=function(e,i,n){t.prototype.open.call(this),this.updateEntity(e),this.updateMeilinMC(i),this.totalPower.text=n.toFixed(0)},e.prototype.close=function(){t.prototype.close.call(this),this.entityRole.reset(),egret.Tween.removeTweens(this.groupMeilin)},e.prototype.updateEntity=function(t){this.entityRole.setData(t,2)},e.prototype.updateMeilinMC=function(t){if(t>-1){var e=Cfg.getConfig(MeilinAppearanceConfig,t).appearance;this.meilinMC.playFile(ResMgr.getUIMeilinRes(e),-1)}},e.prototype.updateData=function(){},e}(BaseWinSingle);__reflect(ActPanel11_1YuLanWin.prototype,"ActPanel11_1YuLanWin"),window.ActPanel11_1YuLanWin=ActPanel11_1YuLanWin;var ActPanel11_2=function(t){function e(){var e=t.call(this)||this;return e.dataArr=[],e.curIndex=0,e.skinName="ActPanel11_2EUI",e.listBtn.itemRenderer=ActItem11_2,e.listBtn.dataProvider=e.listBtnData=new eui.ArrayCollection,e.listReward.itemRenderer=ItemBaseReward,e.listReward.dataProvider=e.listRewardData=new eui.ArrayCollection,e.bgmc=new MC,e.groupMC.addChild(e.bgmc),e.mcIcon=new McIcon,e.groupMC.addChild(e.mcIcon),e.mcBtnSend=new MC,e.mcBtnSend.x=e.btnSend.width/2,e.mcBtnSend.y=e.btnSend.height/2,e.btnSend.addChildAt(e.mcBtnSend,e.btnSend.numChildren-1),e}return __extends(e,t),e.prototype.open=function(e){t.prototype.open.call(this,e),this.actData=ActSys.ins().getActDataById(this.actId),this.addClickE(this.listBtn,this.onClick),this.addClickE(this.btnSend,this.onClick),this.addItemTapE(this.listBtn,this.onListBtn),this.addLsn(ActSys.ins().patchActivityIsGetAwards,this.updateData),this.addLsn(ActSys.ins().patchCSKChange,this.updateData),this.curIndex=this.getAutoIndex(),this.updateData()},e.prototype.close=function(){t.prototype.close.call(this),this.mcIcon.close(),this.bgmc.reset()},e.prototype.updateData=function(){this.listBtnData.source=this.dataArr=this.actData.getItemDatas(),this.listBtn.selectedIndex=this.curIndex;this.actData.getConfig(4);this.imgYgm.visible=this.actData.isBuyAll(),this.updateMC()},e.prototype.getAutoIndex=function(){for(var t=this.actData.datas,e=-1,i=0,n=t;i<n.length;i++){var a=n[i];if(1==a.state){e=a.index;break}}if(-1==e)for(var o=0,s=t;o<s.length;o++){var a=s[o];if(0==a.state){e=a.index;break}}return-1==e?0:e},e.prototype.updateMC=function(){var t=Actor.ins().job-1,e=this.dataArr[this.curIndex],i=e.config;this.imgName.source="czzg_zycs_"+i.title[Math.min(t,i.title.length-1)],this.listReward.dataProvider=new eui.ArrayCollection(i.reward),this.mcBtnSend.stop(),this.btnSend.redPoint.visible=!1,this.btnSend.visible=!1,this.mcBtnSend.visible=!1,this.imgYgm.visible=!1;var n=i.daycount.count-this.actData.datas[this.curIndex].buyCount,a=0==n?15733780:5767068;if(this.lbBuyCount.textFlow=addColorTF(GFunc.getDayCountName(i.daycount.type)+":"+n+"/"+i.daycount.count,a),this.totalPower.text=""+i.power,this.bmpWorth.text=""+i.worth,e.status==ActRewardState.NotReached){var o=Cfg.getPayMoneyRMBByYb(i.pay);this.btnSend.label=o+Lang.common_yuan+"抢购",this.btnSend.visible=!0}else e.status==ActRewardState.CanGet?(this.mcBtnSend.playFile(getEffName("zycs_touzhijihua"),-1),this.btnSend.label=Lang.common_str81,this.btnSend.redPoint.visible=!0,this.btnSend.visible=!0,this.mcBtnSend.visible=!0):this.imgYgm.visible=!0;this.mcIcon.open(i.mcIcon)},e.prototype.updateTime=function(){this.actData&&(this.lbTime.textFlow=addColorTF(this.actData.getformatTime()))},e.prototype.onListBtn=function(t){void 0===t&&(t=null),this.curIndex=t.itemIndex,this.updateMC()},e.prototype.onClick=function(t){switch(t.target){case this.btnSend:var e=this.actData.getConfig(this.curIndex+1);this.actData.getRewardStateById(e.index)==ActRewardState.NotReached?VipSys.ins().showReCharge(e.pay):this.actData.getRewardStateById(e.index)==ActRewardState.CanGet&&ActSys.ins().sendReward(this.actId,e.index)}},e}(ActBasePanel);__reflect(ActPanel11_2.prototype,"ActPanel11_2"),window.ActPanel11_2=ActPanel11_2;var GameWheel=function(t){function e(){var e=t.call(this)||this;return e.skinName="WheelSkin",e.touchEnabled=e.touchChildren=!1,e}return __extends(e,t),e.ins=function(){return e._instance||(e._instance=new e),e._instance},e.show=function(t,e){this.ins().$show(t,e)},e.hide=function(){this._instance&&this._instance.$hide()},e.prototype.$show=function(t,e){this._touchStartX=t,this._touchStartY=e,this.imgBg.x=this.imgWheel.x=this.imgDir.x=t,this.imgBg.y=this.imgWheel.y=this.imgDir.y=e,this.imgDir.visible=!1,delete this._touchEndX,delete this._touchEndY,LayerMgr.getStage().addEventListener(egret.TouchEvent.TOUCH_MOVE,this.onTouchMove,this),LayerMgr.getStage().addEventListener(egret.TouchEvent.TOUCH_END,this.onTouchEnd,this)},e.prototype.$hide=function(){DisUtil.remove(this)},e.prototype.onTouchMove=function(t){var e=this,i=t.stageX,n=t.stageY,a=MathUtil.getDistance(new XY(t.stageX,t.stageY),new XY(this._touchStartX,this._touchStartY));
if(!(15>a)){if(this.parent||LayerMgr.MAP.addChild(this),38>a)return this.imgDir.visible=!1,this.imgWheel.x=i,void(this.imgWheel.y=n);var o=Math.atan2(n-this._touchStartY,i-this._touchStartX),s=MathUtil.getAngle(o);if(this.imgDir.visible=!0,this.imgDir.rotation=90+MathUtil.getAngle(o),this.imgWheel.x=this.imgDir.x=this._touchStartX+38*Math.cos(o),this.imgWheel.y=this.imgDir.y=this._touchStartY+38*Math.sin(o),this._touchEndX&&this._touchEndY){var r=Math.atan2(this._touchEndY-this._touchStartY,this._touchEndX-this._touchStartX),u=MathUtil.getAngle(r),h=Math.abs(u-s);if(h>180&&(h=360-h),15>h)return}if(this._touchEndX=i,this._touchEndY=n,!LogicSys.ins().centerEntity.isDead()){var l=function(){var t=e.getPathByRadians(LogicSys.ins().centerEntity,o,5);t&&LogicSys.ins().centerEntity.AI.startMove(t,l)};this._touchMoving=!0,l()}}},e.prototype.onTouchEnd=function(t){LayerMgr.getStage().removeEventListener(egret.TouchEvent.TOUCH_MOVE,this.onTouchMove,this),LayerMgr.getStage().removeEventListener(egret.TouchEvent.TOUCH_END,this.onTouchEnd,this),this._touchMoving&&(this._touchMoving=!1,LogicSys.ins().centerEntity.AI.stopMove()),delete this._touchEndX,delete this._touchEndY,this.$hide()},e.prototype.getPathByRadians=function(t,e,i){for(;i>0;){var n=(t.x>>0,t.y>>0,t.x+i*MapBase.CELL_SIZE*Math.cos(e)>>0),a=t.y+i*MapBase.CELL_SIZE*Math.sin(e)>>0,o=t.x/MapBase.CELL_SIZE,s=t.y/MapBase.CELL_SIZE,r=n/MapBase.CELL_SIZE,u=a/MapBase.CELL_SIZE,h=AStarLine.canPass(o,s,r,u,MapContainer.ins().checkWalkable,!1);if(h[0])return new XY(n,a);i--}return null},e}(BaseWinSingle);__reflect(GameWheel.prototype,"GameWheel");var ActPanel12_2=function(t){function e(){var e=t.call(this)||this;return e.skinName="ActPanel12_2EUI",e}return __extends(e,t),e}(ActPanel12_1);__reflect(ActPanel12_2.prototype,"ActPanel12_2"),window.ActPanel12_2=ActPanel12_2;var ActPanel12_3=function(t){function e(){var e=t.call(this)||this;return e.skinName="ActPanel12_3EUI",e}return __extends(e,t),e}(ActPanel12_1);__reflect(ActPanel12_3.prototype,"ActPanel12_3"),window.ActPanel12_3=ActPanel12_3;var ActPanel12_4=function(t){function e(){var e=t.call(this)||this;return e.imgIcons=[],e.imgNames=[],e.skinName="ActPanel12_4EUI",e.imgNames=[e.imgName0,e.imgName1,e.imgName2,e.imgName3],e.imgIcons=[e.imgIcon0,e.imgIcon1,e.imgIcon2,e.imgIcon3],e.mc0=new MC,e.groupMC0.addChild(e.mc0),e.mc1=new MC,e.groupMC1.addChild(e.mc1),e}return __extends(e,t),e.prototype.open=function(e){t.prototype.open.call(this,e),this.actData=ActSys.ins().getActDataById(this.actId),this.addClickE(this.btn,this.onClick),this.actData.isFirst=!1,RpFun.showActSingleRp(this.actData.actId),this.updateView()},e.prototype.close=function(){t.prototype.close.call(this),this.mc0.reset(),this.mc1.reset()},e.prototype.onClick=function(){var t=this.actData.getConfig(1),e=0;3==t.sType?e=XunBaoMainPanel.getTabIndexbyPanel(XunBaoEquipPanel):4==t.sType?e=XunBaoMainPanel.getTabIndexbyPanel(XunBaoFaBaoPanel):5==t.sType?e=XunBaoMainPanel.getTabIndexbyPanel(XunBaoFuWenPanel):6==t.sType?e=XunBaoMainPanel.getTabIndexbyPanel(XunBaoDianFengPanel):7==t.sType&&(e=XunBaoMainPanel.getTabIndexbyPanel(XunBaoZhiZunPanel)),openWin(XunBaoWin,XunBaoWin.getTabIndexbyPanel(XunBaoMainPanel),e)},e.prototype.updateView=function(){var t=this.actData.getConfig(1);this.imgTitle0.source="hddt_zycs_day"+this.actId,this.imgDec.source="hddt_zycs_xb"+this.actId,this.lbDesc.textFlow=StrUtil.toTF(t.desc);for(var e=0;e<this.imgIcons.length;e++){var i=Cfg.getConfig(ImageAppearanceConfig,t.mcIcon[Actor.ins().sex][Actor.ins().job-1][e].param);this.imgIcons[e].source=i.appearance;var n=Cfg.getConfig(ImageAppearanceConfig,t.mcIconName[Actor.ins().job-1][e].param);this.imgNames[e].source=n.appearance}this.mc0.playFile(getEffName("xbkh"),-1),this.mc1.playFile(getEffName("xbkh"),-1)},e.prototype.updateTime=function(){this.actData&&(this.lbTime.textFlow=addColorTF(this.actData.getformatTime()))},e}(ActBasePanel);__reflect(ActPanel12_4.prototype,"ActPanel12_4"),window.ActPanel12_4=ActPanel12_4;var ActPanel13_1=function(t){function e(){var e=t.call(this)||this;return e.skinName="ActPanel13_1EUI",e.list.itemRenderer=ItemBaseRewardColor,e.list.dataProvider=e.listArray=new eui.ArrayCollection,e.imgZs1.filters=DisUtil.grayFilter(),GFunc.playUIMovie("yyms2",89,35,e.btnBuy,-1),e}return __extends(e,t),e.prototype.open=function(e){t.prototype.open.call(this,e),ActSys.ins().sendFSQGCount(e.id),this.addLsn(ActSys.ins().patchActivityIsGetAwards,this.updateBuy),this.addLsn(ActSys.ins().patchFSQGCount,this.updateBuy),this.addClickE(this.btnBuy,this.onClick),this.updateData(),this.actData.isShowRp=!1,RpFun.showActSingleRp(this.actId)},e.prototype.close=function(){t.prototype.close.call(this)},e.prototype.updateBuy=function(){this.updateCount(),this.updateState()},e.prototype.updateData=function(){this.actData=ActSys.ins().getActDataById(this.actId);var t=this.actData.getConfig();this.lbName.source="hddt_zycs_fsday_"+t.day,this.lbPrice1.text=t.price.toString(),this.lbPrice2.text=t.needyuanbao.toString();for(var e=[],i=0,n=t.rewards;i<n.length;i++){var a=n[i];a.tempColor=16239940,e.push(a)}this.listArray.source=e,this.updateCount(),this.updateState()},e.prototype.updateCount=function(){this.actData=ActSys.ins().getActDataById(this.actId);var t=this.actData.getConfig(),e=this.actData.myBuyCount<t.cancount?5767068:15733780,i=addColor(t.cancount-this.actData.myBuyCount+"/"+t.cancount,e);this.lbBuyCount.textFlow=addColorTF("剩余购买数量："+i),e=this.actData.quanfuBuyCount<t.totalcount?5767068:15733780,i=addColor(t.totalcount-this.actData.quanfuBuyCount+"/"+t.totalcount,e),this.lbQuanFu.textFlow=addColorTF("全服剩余："+i)},e.prototype.updateState=function(){this.actData=ActSys.ins().getActDataById(this.actId);var t=(this.actData.getConfig(),this.actData.canBuy);this.currentState=t?"buy":"limit"},e.prototype.updateTime=function(){this.actData&&(this.date.textFlow=addColorTF(this.actData.getformatTime()))},e.prototype.onClick=function(t){switch(t.target){case this.btnBuy:this.actData=ActSys.ins().getActDataById(this.actId);var e=this.actData.getConfig();GFunc.checkCurrency(CurType.yb,e.needyuanbao)&&ActSys.ins().sendReward(this.actData.actId,this.actData.getConfig().index)}},e}(ActBasePanel);__reflect(ActPanel13_1.prototype,"ActPanel13_1"),window.ActPanel13_1=ActPanel13_1;var ActPanel14_1=function(t){function e(){var e=t.call(this)||this;return e.skinName="ActPanel14_1EUI",e.list.itemRenderer=ActItem14_1,e}return __extends(e,t),e.prototype.open=function(e){t.prototype.open.call(this,e),this.addClickE(this.btnGo,this.onClick),this.addLsn(ActSys.ins().patchActivityIsGetAwards,this.updateData),this.addLsn(ActSys.ins().patchConsuRecord,this.updateData),this.addLsn(RechargePowerSys.ins().patchZhaoCaiLongDate,this.updateData),this.addLsn(RechargePowerSys.ins().patchhaoCaiLongBuy,this.updateData),this.list.dataProvider=this.list0Arr=new eui.ArrayCollection,this.updateData()},e.prototype.updateData=function(){this.actData=ActSys.ins().getActDataById(this.actId);var t=this.actData.getItemDatas();SortUtil.sortOn(t,["status"],[SortType.up]),this.list0Arr.replaceAll(t),this.btnGo.visible=!RechargePowerSys.ins().zhaoCaiLongData.isAct(),this.imgYjh.visible=RechargePowerSys.ins().zhaoCaiLongData.isAct()},e.prototype.updateTime=function(){this.actData&&(this.lbTime.textFlow=addColorTF(this.actData.getformatTime()))},e.prototype.onClick=function(t){switch(t.target){case this.btnGo:openWin(RechargeActSys.ins().firstRechargeData.isRecharge()?ZhaoCaiLongWin:FirstRechargeBuyWin)}},e}(ActBasePanel);__reflect(ActPanel14_1.prototype,"ActPanel14_1"),window.ActPanel14_1=ActPanel14_1;var ActPanel15_2=function(t){function e(){var e=t.call(this)||this;return e.curSelectJiangChi=1,e.setSkinName(),e.taskListArray=new eui.ArrayCollection,e.taskList.itemRenderer=ActItemTask15_2,e.taskList.dataProvider=e.taskListArray,e}return __extends(e,t),e.prototype.setSkinName=function(){this.skinName="ActPanel15_2EUI"},e.prototype.open=function(e){t.prototype.open.call(this,e),this.actData15=ActSys.ins().getActDataById(this.actId),this.taskList.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onTaskListClick,this),this.addLsn(RpSys.ins().patchRp,this.updateRp),this.addLsn(ActSys.ins().patchZhiShuTask,this.updateTask),this.addLsn(ActSys.ins().patchZhiShuTaskGet,this.updateTask),this.updatePanel(),this.updateRp()},e.prototype.updatePanel=function(){this.updateTask()},e.prototype.updateTask=function(){var t=this.actData15.getTaskList();SortUtil.sortOn(t,["status","index"],[SortType.up,SortType.up]),this.taskListArray.source=t},e.prototype.updateTime=function(){this.actData15&&(this.lbTime.textFlow=addColorTF(this.actData15.getformatTime()))},e.prototype.onTaskListClick=function(t){var e=this;if("btnGoto"==t.target.name){var i=t.target.parent,n=i.data,a=n.configTask,o=GFunc.createTaskNavData(a.controlTarget);o.setsucceedFrontFun(function(){e.closeMyWin()}),o["goto"]()}if("btnAct"==t.target.name){var i=t.target.parent,n=i.data;ActSys.ins().sendZhiShuTaskGet(this.actData15.actId,n.index)}},Object.defineProperty(e.prototype,"jinzhuanConstConfig",{get:function(){return Cfg.getConfig(JinzhuanConstConfig)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"data",{get:function(){return RechargeActSys.ins().jinZuanData},enumerable:!0,configurable:!0}),e.getTitle=function(){return"btz_zycs_jz"},e}(ActBasePanel);__reflect(ActPanel15_2.prototype,"ActPanel15_2"),window.ActPanel15_2=ActPanel15_2;var ActPanel17_1=function(t){function e(){var e=t.call(this)||this;return e.boxAwards=[],e.skinName="ActPanel17_1EUI",e.setSkinPart("act17BigRewardTips",new Act31BigRewardTips),e.setSkinPart("itemMaxReward",new ItemBaseReward),e.list.itemRenderer=ItemBaseReward,e.listJiLuMy.itemRenderer=Act17_1LogItemMy,e.listJiLuMy.dataProvider=e.listJiLuMyArray=new eui.ArrayCollection,e.comGunDongOtherJiLu=new ComGunDongBase,e.comGunDongOtherJiLu.x=0,e.comGunDongOtherJiLu.y=0,e.groupJiLu.addChild(e.comGunDongOtherJiLu),e.mcIcon=new McIcon,e.mcIcon.touchEnabled=!1,e.mcIcon.touchChildren=!1,e.groupEntity.addChild(e.mcIcon),e.groupEntity.touchEnabled=!1,e.groupEntity.touchChildren=!1,e.lbGaiLv.textFlow=addColorTF(StrUtil.addUnderLine(e.lbGaiLv.text)),e.act17BigRewardTips.visible=!0,e}return __extends(e,t),e.prototype.open=function(e){t.prototype.open.call(this,e),this.actData=ActSys.ins().getActDataById(this.actId),this.actData1_31=ActSys.ins().getActDataById(this.actData.getConfig().dabiaoid),this.addItemTapE(this.listJiLu,this.onListJiLuClick),this.addClickE(this,this.onClick),this.addLsn(ActSys.ins().patchActivityIsGetAwards,this.updateData),this.addLsn(ActSys.ins().patchXunBaoOtherJiLuUpdate,this.updateOtherJiLu),this.addLsn(BagSys.ins().patchItemChange,this.updataItem),this.addLsn(ActSys.ins().patchXunBaoJiLu,this.updateMyJiLu),this.comGunDongOtherJiLu.iniData(this.actData.worldLogs,egret.getQualifiedClassName(Act17_1LogItemWorl),6,ArrowDir.dirV),this.comGunDongOtherJiLu.open(),this.updateData(),this.listJiLu.selectedIndex=0,this.scrollerJiLuMy.visible=!1,this.comGunDongOtherJiLu.visible=!0},e.prototype.close=function(){for(var e=[],i=0;i<arguments.length;i++)e[i]=arguments[i];t.prototype.close.call(this),egret.Tween.removeTweens(this.act17BigRewardTips),this.comGunDongOtherJiLu.close(),this.mcIcon.close()},e.prototype.updateData=function(){var t=this;this.lbDogTilk.textFlow=StrUtil.toTF(MathUtil.randomArray(this.actData.getConfig().dogTalk)),this.act17BigRewardTips.data=this.actData.getConfig().bigreward,this.mcIcon.open(this.actData.getConfig().mcIcon);var e=this.actData.getConfig().showrewards;this.lbDec.textFlow=addColorTF(Lang.act_str175.replace("$score$",addColor(this.actData.getConfig().addscore,5767068))),this.list.dataProvider=new eui.ArrayCollection(e),this.itemMaxReward.data=this.actData.getConfig().maxRewardItem,this.lbMaxRewardDesc2.text=Cfg.getItemCfg(this.actData.getConfig().maxRewardItem.id).getName(),this.lbMaxRewardDesc2.textColor=GConst.PZColor[Cfg.getItemCfg(this.actData.getConfig().maxRewardItem.id).quality],this.lbMaxRewardName.textFlow=StrUtil.toTF(this.actData.getConfig().maxRewardName),this.lbMaxRewardDesc.textFlow=StrUtil.toTF(this.actData.getConfig().maxRewardDesc),egret.Tween.removeTweens(this.act17BigRewardTips),GFunc.move(this.act17BigRewardTips,new XY(550,589),new XY(550,613)),Timer.ins()["do"](5e3,1,1,function(){t.groupDogTalk.visible=!1},this),this.updateExp(),this.updateConsume(),this.updateMyJiLu()},e.prototype.updateExp=function(){var t=this.actData1_31.getCurConfig();this.barExp.maximum=t.condition,this.barExp.value=this.actData1_31.score;var e=this.actData1_31.getRewardStateById(t.index)==ActRewardState.CanGet;this.btnBox.redPoint.visible=e},e.prototype.updataItem=function(t){t.id==this.actData.getConfig().costid&&this.updateConsume()},e.prototype.updateConsume=function(){this.updateSingleConsume(0,this.imgXunBao1,this.lbXunBao1),this.updateSingleConsume(1,this.imgXunBao10,this.lbXunBao10),this.updateSingleConsume(2,this.imgXunBao50,this.lbXunBao50),this.lbCount.textFlow=addColorTF(BagSys.ins().getItemCount(this.actData.getConfig().costid))},e.prototype.updateSingleConsume=function(t,e,i){var n=this.actData.getConfig(),a=n.costid,o=BagSys.ins().getItemCount(a),s=Cfg.getItemCfg(a),r=ResMgr.getItemIcon(s.getIcon()),u=n.costcount,h=u[t];i.textFlow=addColorTF(o+"/"+h,o>=h?5767068:15733780),e.source=r},e.prototype.updateBtn=function(){var t=this.actData.getConfig();this.buyXunBao1.labelDisplay.text="寻宝"+t.drawtimes[0]+Lang.common_ci,this.buyXunBao10.labelDisplay.text="寻宝"+t.drawtimes[1]+Lang.common_ci,this.buyXunBao50.labelDisplay.text="寻宝"+t.drawtimes[2]+Lang.common_ci},e.prototype.updateMyJiLu=function(){this.listJiLuMyArray.source=this.actData.mylogs},e.prototype.updateOtherJiLu=function(t){this.comGunDongOtherJiLu.addData([t])},e.prototype.onListJiLuClick=function(t){void 0===t&&(t=null);var e=t?t.itemIndex:0,i=1==e;this.comGunDongOtherJiLu.visible=!i,this.scrollerJiLuMy.visible=i,ActSys.ins().sendXunBaoJiLu(this.actId,i?0:1)},e.prototype.updateTime=function(){this.actData&&(this.lbTimer.textFlow=addColorTF(""+Lang.act_str29+addColor(this.actData.getformatTime(),5767068)))},e.prototype.upateBoxAward=function(t){t==this.actBtnCfg.addId[0]&&openWin(Act6RewarWin,this.boxAwards)},e.prototype.onClick=function(t){switch(t.target){case this.btnBangDan:var e=ActSys.ins().getActDataById(this.actData.getConfig().rankid);openWin(Act33RankWin,e);break;case this.lbGaiLv:openWin(XunBaoGaiLvTipsWin,this.actData.getWeightDec());break;case this.buyXunBao1:this.sendChouJiang(0);break;case this.buyXunBao10:this.sendChouJiang(1);break;case this.buyXunBao50:this.sendChouJiang(2);break;case this.btnBox:var i=this.actData1_31.getCurConfig();this.actData1_31.getRewardStateById(i.index)==ActRewardState.CanGet?(this.boxAwards=i.rewards,ActSys.ins().sendReward(i.id,i.index)):openWin(Act6ScoreWin,this.actData1_31)}},e.prototype.sendChouJiang=function(t){var e=this.actData.getConfig(),i=e.costcount[t],n=new ItemDataReward;n.id=e.costid,n.count=i;BagSys.ins().getItemCount(e.costid);GFunc.checkConsumeEnough(n)&&ActSys.ins().sendReward(this.actId,this.actData.getConfig().index,t)},e}(ActBasePanel);__reflect(ActPanel17_1.prototype,"ActPanel17_1"),window.ActPanel17_1=ActPanel17_1;var ActPanel18_1=function(t){function e(){var e=t.call(this)||this;return e.initUI(),e}return __extends(e,t),e.prototype.initUI=function(){this.skinName="ActPanel18_1EUI",this.setSkinPart("priceIcon",new PriceIcon),this.list.itemRenderer=ActItem18_1,this.list.dataProvider=this.listArray=new eui.ArrayCollection},e.prototype.open=function(e){t.prototype.open.call(this,e),this.addLsn(ActSys.ins().patchQQShShopBuy,this.updateData),this.addClickE(this.list,this.onListClick),this.updateData()},e.prototype.updateData=function(){this.actData=ActSys.ins().getActDataById(this.actId),this.listArray.replaceAll(this.actData.buyDatas)},e.prototype.updateTime=function(){this.actData&&(this.lbTime.textFlow=addColorTF(Lang.common_str15+"："+this.actData.getformatTime()))},e.prototype.onListClick=function(t){var e=t.target;if(e&&(e.name.indexOf("btnBuy")>-1||e.name.indexOf("btnFree")>-1)){var i=parseInt(e.name.split("_")[1]),n=this.list.getElementAt(i),a=n.data;a.config;a.canBuy()?GFunc.checkConsumeEnough(a.getConsumeItem())&&openWin(BuyWin,a.getBuyData()):showtipsFail(Lang.shop_str10)}},e}(ActBasePanel);__reflect(ActPanel18_1.prototype,"ActPanel18_1"),window.ActPanel18_1=ActPanel18_1;var ActPanel19_1=function(t){function e(){var e=t.call(this)||this;return e.skinName="ActPanel19_1EUI",e}return __extends(e,t),e.prototype.open=function(e){t.prototype.open.call(this,e),this.addClickE(this.btnSend,this.onClick),this.actData=ActSys.ins().getActDataById(this.actId),this.actData.isShowRp=!1,RpFun.showActSingleRp(this.actId)},e.prototype.updateTime=function(){this.actData&&(this.lbTime.textFlow=addColorTF(this.actData.getformatTime()))},e.prototype.onClick=function(t){switch(t.target){case this.btnSend:openWin(RechargeWin)}},e}(ActBasePanel);__reflect(ActPanel19_1.prototype,"ActPanel19_1"),window.ActPanel19_1=ActPanel19_1;var ActPanel2_1=function(t){function e(){var e=t.call(this)||this;return e.setSkinName(),e.list.itemRenderer=ActItem2_1,e}return __extends(e,t),e.prototype.setSkinName=function(){this.skinName="ActPanel2_1EUI"},e.prototype.open=function(e){t.prototype.open.call(this,e),this.list.dataProvider=this.arrayCollection=new eui.ArrayCollection,this.addLsn(ActSys.ins().patchActivityPanel,this.updateData),this.updateData()},e.prototype.updateData=function(){this.actId&&(this.actData=ActSys.ins().getActDataById(this.actId),this.arrayCollection.replaceAll(this.actData.buyDatas),this.imgTitle.source="hfxg_zycs_bg"+this.actData.getBgImgRes()+"_jpg")},e.prototype.updateTime=function(){this.actData&&(this.lbTime.textFlow=addColorTF(""+Lang.common_str11+StrUtil.addColor(this.actData.getformatTime(),5949490)))},e}(ActBasePanel);__reflect(ActPanel2_1.prototype,"ActPanel2_1"),window.ActPanel2_1=ActPanel2_1;var ActPanel2_2=function(t){function e(){var e=t.call(this)||this;return e.setSkinName(),e.list.itemRenderer=ActItem2_2,e}return __extends(e,t),e.prototype.setSkinName=function(){this.skinName="ActPanel2_2EUI"},e.prototype.open=function(e){t.prototype.open.call(this,e),this.list.dataProvider=this.arrayCollection=new eui.ArrayCollection,this.addClickE(this.btnSend,this.onClick),this.addLsn(ActSys.ins().patchActivityIsGetAwards,this.updateData),this.addLsn(ActSys.ins().patchActivityPanel,this.updateData),this.addLsn(RechargePowerSys.ins().patchZhaoCaiLongDate,this.updateData),this.addLsn(RechargePowerSys.ins().patchhaoCaiLongBuy,this.updateData),this.updateData(),this.actData.isShowRp=!1,RpFun.showActSingleRp(this.actId)},e.prototype.updateData=function(){this.actData=ActSys.ins().getActDataById(this.actId);var t=this.actData.buyDatas.concat();SortUtil.sortOn(t,["hasBuy","configIndex"],[SortType.down,SortType.up]),this.arrayCollection.source=t,this.btnSend.visible=!RechargePowerSys.ins().zhaoCaiLongData.isAct(),this.imgYjh.visible=RechargePowerSys.ins().zhaoCaiLongData.isAct()},e.prototype.updateTime=function(){this.actData&&(this.lbTime.textFlow=addColorTF(""+StrUtil.addColor(this.actData.getformatTime(),5767068)))},e.prototype.onClick=function(t){switch(t.target){case this.btnSend:openWin(RechargeActSys.ins().firstRechargeData.isRecharge()?ZhaoCaiLongWin:FirstRechargeBuyWin)}},e}(ActBasePanel);__reflect(ActPanel2_2.prototype,"ActPanel2_2"),window.ActPanel2_2=ActPanel2_2;var ActPanel20_1=function(t){function e(){var e=t.call(this)||this;return e.longPressBtnUp1=new LongPress,e.longPressBtnUp2=new LongPress,e.longPressBtnUp3=new LongPress,e.isEff=!1,e.tick=0,e.refreshTick=0,e.index=Number.MAX_VALUE,e.skinName="ActPanel20_1EUI",e.btnLine.textFlow=addColorTF(e.btnLine.text,e.btnLine.textColor,!0),e.mcEff=new MC,e.groupMC.addChild(e.mcEff),e.comRankBarEffRp.visible=!1,e}return __extends(e,t),e.prototype.open=function(e){t.prototype.open.call(this,e),this.isEff=!1,this.actData=ActSys.ins().getActDataById(this.actId),this.actData1=ActSys.ins().getActDataById(this.actBtnCfg.addId[0]),this.addClickE(this.itemReward,this.onClick),this.addClickE(this.btnConsu1,this.onClick),this.addClickE(this.btnConsu2,this.onClick),this.addClickE(this.btnConsu3,this.onClick),this.addClickE(this.comRankBarEff,this.onClick),this.addClickE(this.btnBox,this.onClick),this.addClickE(this.helpBtn,this.onClick),this.addClickE(this.checkBox,this.onClick),this.addClickE(this.btnLine,this.onClick),this.addClickE(this.btnRefresh,this.onClick),this.longPressBtnUp1.setDisplay(this.btnConsu1,this.autoUp1,this,500,300),this.longPressBtnUp2.setDisplay(this.btnConsu2,this.autoUp2,this,500,300),this.longPressBtnUp3.setDisplay(this.btnConsu3,this.autoUp3,this,500,300),this.addLsn(ActSys.ins().patchActivityIsGetAwards,this.updatePanel),this.addLsn(ActSys.ins().patchActivityPanel,this.updatePanel),this.addLsn(ActSys.ins().patchActivityPanel,this.upateBoxAward),this.addLsn(ActSys.ins().patchQingMingInfo,this.updateEff),this.addLsn(ActSys.ins().patchQingMingRank,this.updatePanel),this.addLsn(BagSys.ins().patchItemChange,this.updateItemPanel),this.addLsn(RpSys.ins().patchRp,this.updateRp),ActSys.ins().sendQingMingRank(this.actId),this.updateRp(),this.updateTime()},e.prototype.close=function(){for(var e=[],i=0;i<arguments.length;i++)e[i]=arguments[i];t.prototype.close.call(this),this.longPressBtnUp1.close(),this.longPressBtnUp2.close(),this.longPressBtnUp3.close()},e.prototype.setImgBg=function(){this.imgBg&&(this.imgBg.source="dwhd_zycs_"+this.actId+"_bg4_jpg")},e.prototype.updateRp=function(t){void 0===t&&(t=null),(null==t||t.check(this.actId))&&(this.updateItemPanel(),this.btnConsu1.redPoint.visible=RpSys.ins().getData(ExtCom,ActPlace15Win,this.actId,1),this.btnConsu2.redPoint.visible=RpSys.ins().getData(ExtCom,ActPlace15Win,this.actId,2),this.btnConsu3.redPoint.visible=RpSys.ins().getData(ExtCom,ActPlace15Win,this.actId,3),this.comRankBarEffRp.visible=RpSys.ins().getData(ExtCom,ActPlace15Win,this.actId,this.actData.redPointKeyHun))},e.prototype.updateEff=function(t,e){switch(t){case 1:this.updateGeRenFuValue();break;case 2:this.isEff?this.playPiaoMc(new XY(this.comRankBarEff.x,this.comRankBarEff.y)):this.updateQuanFuValue();break;case 3:this.updateHun()}},e.prototype.updatePanel=function(){var t=this.actData.getConfig();if(this.imgbigRewardBg.source="dwhd_zycs_"+this.actId+"_xjdl",this.btnConsu1.icon="dwhd_zycs_"+this.actId+"_xh",this.btnConsu2.icon="dwhd_zycs_"+this.actId+"_jj",this.btnConsu3.icon="dwhd_zycs_"+this.actId+"_tz",this.imgTopTitle.source="dwhd_zycs_"+this.actId+"_zjxg",this.imgExpTitle.source="dwhd_zycs_"+this.actId+"_yhzl",this.index!=this.actData.index){if(this.index=this.actData.index,this.actData.isMax()){var e=Cfg.getConfig(ActivityType20Config,this.actId,this.actData.getMaxConfig().index-1);this.itemReward.setDataByItemConfig(Cfg.getItemCfg(e.rewardPreview[0].id))}else this.itemReward.setDataByItemConfig(Cfg.getItemCfg(t.rewardPreview[0].id));this.itemReward.setItemEffect(!0,"eff7"),this.itemReward.setItemKuangEffect(!0,"eff6")}""!=this.actData.firstName&&this.lbName.text!=this.actData.firstName&&GFunc.playUIMovie("jsdd_xzsg",180,61,this.imgTopTitle.parent,1),this.imgHead.source=""==this.actData.firstName?"jsdd_zycs_wh":ResMgr.getHeadIcon(this.actData.firstsex),this.lbName.text=""==this.actData.firstName?Lang.act_str87:this.actData.firstName,this.lbScore.textFlow=addColorTF(Lang.act_str112+"："+addColor(this.actData.firstValue,1306146)),this.updateQuanFuValue(),this.updateGeRenFuValue(),this.updateHun(),this.updateItemPanel(),this.updateMax()},e.prototype.updateMax=function(){var t=this.actData.isMax()||this.actData.getActOpenState()==ActOpenState.Jiesuan;this.groupConsu.visible=!t,this.groupMax.visible=t,this.lbMaxDesc.text=this.actData.getActOpenState()==ActOpenState.Jiesuan?Lang.act_str7:Lang.act_str143},e.prototype.updateQuanFuValue=function(){var t=this.actData.getConfig();this.bmpLun.text="第"+GFunc.getChineseNum(this.actData.index)+"轮金秋月饼",this.barExpAll.maximum=t.cv,this.barExpAll.value=this.actData.quanFuValue},e.prototype.updateGeRenFuValue=function(){var t=this,e=this.actData1.getCurConfig();this.barExp.maximum=e.condition,this.barExp.value=this.actData1.score,this.barExp.labelFunction=function(){return t.actData1.score+"/"+e.condition},this.actData1.getRewardStateById(e.index)==ActRewardState.CanGet?this.btnBox.redPoint.visible=!0:this.btnBox.redPoint.visible=!1},e.prototype.updateHun=function(){var t=this.actData.getConfig();this.comRankBarEff.setData(this.actData.hunValue,t.barV),this.lbExpDec.textFlow=addColorTF(Lang.act_str118.replace("$num$",addColor(t.n/100+"%",1306146))),this.checkBox.selected=this.actData.isAutoUse},e.prototype.updateItemPanel=function(){if(this.actData){var t=this.actData.getExConfig(1);this.lbAdd1.text=Lang.act_str110.replace("$num$",""+t.pv);var e=GFunc.getItemCount(t.item);this.lbConsu1.textFlow=addColorTF(e+"/1",e>0?1306146:15733780);var i=this.actData.getExConfig(2);this.lbAdd2.text=Lang.act_str110.replace("$num$",""+i.pv),e=GFunc.getItemCount(i.item),e>0?(this.imgItem2.source="zycs_340304",this.lbConsu2.textFlow=addColorTF(e+"/1",e>0?1306146:15733780)):(this.imgItem2.source="zycs_320002",this.lbConsu2.text=""+i.diamond);var n=this.actData.getExConfig(3);this.lbAdd3.text=Lang.act_str110.replace("$num$",""+n.pv),e=GFunc.getItemCount(n.item),this.lbConsu3.textFlow=addColorTF(e+"/1",e>0?1306146:15733780)}},e.prototype.upateBoxAward=function(t,e){if(t==this.actBtnCfg.addId[0]&&-1!=e){var i=this.actData1.getConfig(e);openWin(Act6RewarWin,i.rewards)}},e.prototype.updateTime=function(){this.actData&&(this.lbTime.textFlow=addColorTF(Lang.act_str29+addColor(this.actData.getformatTime(),1306146)))},e.prototype.onClick=function(t){switch(t.currentTarget){case this.itemReward:if(this.actData.isMax()){var e=Cfg.getConfig(ActivityType20Config,this.actId,this.actData.getMaxConfig().index-1);openWin(Act20_1RewardViewWin,e.reward)}else openWin(Act20_1RewardViewWin,this.actData.getConfig().reward);break;case this.btnConsu1:if(this.tick<Actor.ins().serverTime)if(this.tick=Actor.ins().serverTime+300,this.actData.isMax())showtipsFail(Lang.act_str122);else{var i=this.actData.getExConfig(1);GFunc.checkCurrency(i.item,1)&&this.autoUseHun()&&(BagSys.ins().sendUseItem(i.item,1),showtipsSuc(Lang.act_str125+"+"+i.pv),this.playUseMc())}break;case this.btnConsu2:if(this.tick<Actor.ins().serverTime)if(this.tick=Actor.ins().serverTime+300,this.actData.isMax())showtipsFail(Lang.act_str122);else{var i=this.actData.getExConfig(2);GFunc.getItemCount(i.item)>0?this.autoUseHun()&&(BagSys.ins().sendUseItem(i.item,1),showtipsSuc(Lang.act_str125+"+"+i.pv),this.playUseMc()):openWin(BuyWin,this.actData.getBuyData())}break;case this.btnConsu3:if(this.tick<Actor.ins().serverTime)if(this.tick=Actor.ins().serverTime+300,this.actData.isMax())showtipsFail(Lang.act_str122);else{var i=this.actData.getExConfig(3);GFunc.checkCurrency(i.item,1)&&this.autoUseHun()&&(BagSys.ins().sendUseItem(i.item,1),showtipsSuc(Lang.act_str125+"+"+i.pv),this.playUseMc())}break;case this.comRankBarEff:if(this.actData.hunValue<this.actData.getConfig().barV)return void showtipsFail(Lang.act_str123);this.isEff=!0,ActSys.ins().sendQingMingHun(this.actId),this.playUseMc();var n=Math.floor(this.actData.getConfig().cv*(this.actData.getConfig().n/1e4));showtipsSuc(Lang.act_str125+"+"+n);break;case this.btnBox:var a=this.actData1.getCurConfig();this.actData1.getRewardStateById(a.index)==ActRewardState.CanGet?ActSys.ins().sendReward(a.id,a.index):openWin(Act6ScoreWin,this.actData1,"jsdd_zycs_bljisi");break;case this.helpBtn:openWin(HelpWin,Cfg.getConfig(HelpInfoConfig,108).text);break;case this.checkBox:ActSys.ins().sendReward(this.actId,this.index,2,this.checkBox.selected?1:0);break;case this.btnLine:openWin(BagWin,BagWin.getTabIndexbyPanel(HeChengMainPanel),HeChengMainPanel.getTabIndexbyPanel(FenJiePanel));break;case this.btnRefresh:var o=Math.ceil(Math.max(this.refreshTick-Actor.ins().serverTime,0)/1e3);if(o>0)return void showtipsFail(Lang.act_str129.replace("$num$",""+o));ActSys.ins().sendQingMingRank(this.actId),this.refreshTick=Actor.ins().serverTime+5e3,showtipsSuc(Lang.act_str130)}},e.prototype.autoUp1=function(){if(this.actData.isMax())showtipsFail(Lang.act_str122),this.longPressBtnUp1.stop();else{var t=this.actData.getExConfig(1);if(GFunc.checkCurrency(t.item,1)){var e=Math.max(this.actData.getConfig().barV-this.actData.hunValue,0);if(this.autoUseHun()&&e>0){var i=GFunc.getItemCount(t.item),n=Math.min(Math.ceil(e/t.gv),i);BagSys.ins().sendUseItem(t.item,n),showtipsSuc(Lang.act_str125+"+"+t.pv*n),this.playUseMc()}}else this.longPressBtnUp1.stop()}},e.prototype.autoUp2=function(){if(this.actData.isMax())showtipsFail(Lang.act_str122),this.longPressBtnUp1.stop();else{var t=this.actData.getExConfig(2);if(GFunc.getItemCount(t.item)>0){var e=Math.max(this.actData.getConfig().barV-this.actData.hunValue,0);if(this.autoUseHun()&&e>0){var i=GFunc.getItemCount(t.item),n=Math.min(Math.ceil(e/t.gv),i);BagSys.ins().sendUseItem(t.item,n),showtipsSuc(Lang.act_str125+"+"+t.pv*n),this.playUseMc()}}else openWin(BuyWin,this.actData.getBuyData()),this.longPressBtnUp3.stop()}},e.prototype.autoUp20=function(){if(this.actData.isMax())showtipsFail(Lang.act_str122),this.longPressBtnUp1.stop();else{var t=this.actData.getExConfig(2);if(GFunc.getItemCount(t.item)>0)this.autoUseHun()?(BagSys.ins().sendUseItem(t.item,1),showtipsSuc(Lang.act_str125+"+"+t.pv),this.playUseMc()):this.longPressBtnUp1.stop();else if(this.isUseYb)GFunc.checkCurrency(CurType.yb,t.diamond)&&this.autoUseHun()?(ActSys.ins().sendReward(t.id,t.index,1),showtipsSuc(Lang.act_str125+"+"+t.pv),this.playUseMc()):this.longPressBtnUp1.stop();else{var i=new BuyData;i.setBuyFun(function(e){GFunc.checkCurrency(CurType.yb,t.diamond)&&ActSys.ins().sendReward(t.id,t.index,0)}),i.price=t.diamond,i.itemId=t.item,i.limitCount=0,i.count=1,i.consumeItemId=CurType.yb,i.saveKey=egret.getQualifiedClassName(e),openWin(BuyWin1,i),this.longPressBtnUp1.stop()}}},e.prototype.autoUp3=function(){if(this.actData.isMax())showtipsFail(Lang.act_str122),this.longPressBtnUp3.stop();else{var t=this.actData.getExConfig(3);if(GFunc.checkCurrency(t.item,1)){var e=Math.max(this.actData.getConfig().barV-this.actData.hunValue,0);if(this.autoUseHun()&&e>0){var i=GFunc.getItemCount(t.item),n=Math.min(Math.ceil(e/t.gv),i);BagSys.ins().sendUseItem(t.item,n),showtipsSuc(Lang.act_str125+"+"+t.pv*n),this.playUseMc()}}else this.longPressBtnUp3.stop()}},e.prototype.autoUseHun=function(){var t=!0;if(this.actData.hunValue>=this.actData.getConfig().barV)if(this.actData.isAutoUse){this.isEff=!0,ActSys.ins().sendQingMingHun(this.actId),this.playUseMc();var e=Math.floor(this.actData.getConfig().cv*(this.actData.getConfig().n/1e4));showtipsSuc(Lang.act_str125+"+"+e)}else showtipsFail(Lang.act_str127),t=!1;return t},Object.defineProperty(e.prototype,"isUseYb",{get:function(){return 1==TipsSys.ins().saveReminds[egret.getQualifiedClassName(e)]},enumerable:!0,configurable:!0}),e.prototype.playPiaoMc=function(t){var e=this,i=new MC;i.playFile(getEffName("bluesoul1"),-1),i.x=t.x+80,i.y=t.y+70,this.addChild(i);var n=egret.Tween.get(i);n.to({x:this.barExpAll.x+this.barExpAll.width/2,y:this.barExpAll.y+this.barExpAll.height/2},1300,egret.Ease.sineInOut).call(function(){e.removeChild(i),e.updateQuanFuValue(),e.isEff=!1})},e.prototype.playUseMc=function(){},e}(ActBasePanel);__reflect(ActPanel20_1.prototype,"ActPanel20_1"),window.ActPanel20_1=ActPanel20_1;var ActPanel203_1=function(t){function e(){var e=t.call(this)||this;return e.skinName="ActPanel203_1EUI",e.setSkinPart("sevendayrankitemTop1",new SevenDayRank1Item),e.setSkinPart("sevendayrankitemTop2",new SevenDayRank3Item),e.setSkinPart("sevendayrankitemTop3",new SevenDayRank3Item),e.setSkinPart("sevendayrankitemTop4",new SevenDayRank10Item),e}return __extends(e,t),e.prototype.open=function(e){t.prototype.open.call(this,e),this.addClickE(this.linkBtn,this.onClick),this.addClickE(this.seeRankBtn,this.onClick),this.addLsn(ActSys.ins().patchSevenDayMyRank,this.updateData),this.addLsn(ActSys.ins().patchSevenDayMyRank2,this.updateData),this.addLsn(ActSys.ins().patchActivityIsGetAwards,this.updateData),this.addLsn(RankSys.ins().patchRankData,this.updateRankData),this.addLsn(RankSys.ins().patchPraiseData,this.updateRankData),this.updateData();
var i=GConst.rankType[Actor.ins().serverOpenDay];RankSys.ins().sendGetPraise(i),RankSys.ins().sendGetRankData(i)},e.prototype.updateData=function(){this.actData=ActSys.ins().getActivityDataByType(ActType.TYPE_4,ActSubType.TYPE_1);var t=Actor.ins().serverOpenDay,e=Lang.act_str24[t],i=this.actData.dabiao;this.myDegreeTxt.textFlow=addColorTF(""+e+StrUtil.addColor(i,0==i?11512480:5949490)),i=this.actData.myRank,i>0?this.myRankTxt.textFlow=addColorTF(""+Lang.act_str25+StrUtil.addColor(i,i>10?11512480:5949490)):this.myRankTxt.textFlow=addColorTF(""+Lang.act_str25+StrUtil.addColor(Lang.common_str17,11512480)+" "),this.imgTitle.source=ResMgr.getSevendayTitle(t,1),this.updateRankData()},e.prototype.updateRankData=function(){this.sevendayrankitemTop1.data=this.actData.getItemRankData(1),this.sevendayrankitemTop2.data=this.actData.getItemRankData(2),this.sevendayrankitemTop3.data=this.actData.getItemRankData(3),this.sevendayrankitemTop4.data=this.actData.getItemRankData(4)},e.prototype.updateTime=function(){var t=GFunc.getDayServerDownTimer()>>0,e=""+Lang.common_str11+StrUtil.addColor(getFormatTime(t,"hh小时mm分ss秒"),5949490);this.timeTxt.textFlow=addColorTF(e)},e.prototype.onClick=function(t){switch(t.target){case this.linkBtn:var e=this.actData.getConfigs();GFunc.createTaskNavData(e[25].controlTarget)["goto"]();break;case this.seeRankBtn:openWin(SevenDayRankInfoWin)}},e}(ActBasePanel);__reflect(ActPanel203_1.prototype,"ActPanel203_1"),window.ActPanel203_1=ActPanel203_1;var ActPanel22_1=function(t){function e(){var e=t.call(this)||this;return e.selectIndex=0,e.skinName="ActPanel22_1EUI",e.setSkinPart("priceIcon",new PriceIcon),e.priceIcon.setType(CurType.yb),e.listTab.itemRenderer=ActItem22_1,e.listTab.dataProvider=e.listTabArr=new eui.ArrayCollection,e.listAward.itemRenderer=ItemBaseRewardColor,e.listAward.dataProvider=e.listAwardArr=new eui.ArrayCollection,e.mcIcon=new McIcon,e.groupMcIcon.addChild(e.mcIcon),e}return __extends(e,t),e.prototype.open=function(e,i){void 0===i&&(i=-1),t.prototype.open.call(this,e),this.addClickE(this.btnBuy,this.onClick),this.addItemTapE(this.listTab,this.onItemClick),this.addLsn(ActSys.ins().patchActivityPanel,this.updateData),this.addLsn(ActSys.ins().patchActivityIsGetAwards,this.update),this.addLsn(RpSys.ins().patchRp,this.updateRp),this.actData=ActSys.ins().getActDataById(this.actId),this.listTabArr.source=this.actData.buyDatas;for(var n=0,a=0;a<this.actData.buyDatas.length;a++)if(this.actData.buyDatas[a].canBuy()){n=a;break}this.selectIndex=this.listTab.selectedIndex=-1==i?n:i,this.selectIndex>=3&&(this.listTab.validateNow(),this.scroller.viewport.scrollH=this.scroller.viewport.contentWidth-this.scroller.width),this.updateData()},e.prototype.close=function(){t.prototype.close.call(this),this.mcIcon.close()},e.prototype.updateRp=function(t){if(!t||t.check(this.actData.actId))for(var e=this.listTab.numElements,i=0;e>i;i++){var n=this.listTab.getElementAt(i);n&&n.updateRedPoint()}},e.prototype.update=function(){this.updateTab(),this.updateData()},e.prototype.updateTab=function(){var t=this.listTab.getElementAt(this.selectIndex);t&&t.update()},e.prototype.updateData=function(){for(var t=this.actData.getConfig(this.selectIndex),e=[],i=0,n=t.rewards;i<n.length;i++){var a=n[i];a.tempColor=5520483,e.push(a)}this.listAwardArr.source=e,this.imgDes.source="hddt_zycs_t"+t.ad+"a",this.priceIcon.setPrice(t.price);var o=this.actData.getBuyDataByIndex(this.selectIndex),s=o.canBuy();this.priceBg.visible=this.priceIcon.visible=this.btnBuy.visible=s,this.imgYGM.visible=!s,this.mcIcon.open(t.mcIcon),o.hasSee=!0,RpFun.showActSingleRp(this.actData.actId)},e.prototype.updateTime=function(){this.actData&&(this.labelTime.textFlow=addColorTF(this.actData.getformatTime()))},e.prototype.onItemClick=function(t){this.selectIndex=t.itemIndex,this.updateData()},e.prototype.onClick=function(t){var e=this;switch(t.currentTarget){case this.btnBuy:var i=this.actData.getConfig(this.selectIndex);if(BagSys.ins().checkBagFreeByItems(i.rewards)&&GFunc.checkCurrency(CurType.yb,i.price)){var n=new PopupPriceData(Lang.act_str14);n.priceValue=i.price,n.priceType=CurType.yb,n.setFunction(this,function(){ActSys.ins().sendReward(e.actId,e.selectIndex+1)}),openWin(CommonTipsWinNew,n)}}},e.getTabTitle=function(){return"bqz_zycs_thlb"},e}(ActBasePanel);__reflect(ActPanel22_1.prototype,"ActPanel22_1"),window.ActPanel22_1=ActPanel22_1;var ActPanel23_1=function(t){function e(){var e=t.call(this)||this;return e.initUI(),e}return __extends(e,t),e.prototype.initUI=function(){this.skinName="ActPanel23_1EUI",this.listAward.itemRenderer=ItemBaseRewardActivity,this.listAward.dataProvider=new eui.ArrayCollection(Cfg.getConfig(ActivityCommonConfig).daily60recharge),this.list.itemRenderer=ActItem23_1,this.list.dataProvider=this.listArr=new eui.ArrayCollection},e.prototype.open=function(e){t.prototype.open.call(this,e),this.addLsn(RechargeActSys.ins().patchUpdateRecharge,this.updateData),this.addLsn(ActSys.ins().patchActivityIsGetAwards,this.updateData),this.addLsn(ActSys.ins().patchMeiRi60,this.updateData),this.updateData()},e.prototype.updateData=function(){this.actData=ActSys.ins().getActDataById(this.actId);var t=this.actData.getItemDatas();SortUtil.sortOn(t,["status","day"],[SortType.up,SortType.up]),this.listArr.replaceAll(t)},e.getTabTitle=function(){return"bqz_zycs_1yhl"},e}(ActBasePanel);__reflect(ActPanel23_1.prototype,"ActPanel23_1"),window.ActPanel23_1=ActPanel23_1;var ActPanel23_2=function(t){function e(){var e=t.call(this)||this;return e.initUI(),e}return __extends(e,t),e.prototype.initUI=function(){this.skinName="ActPanel23_2EUI",this.list.itemRenderer=ActItem23_2,this.list.dataProvider=this.listDataArr=new eui.ArrayCollection,this.addClickE(this.btnRecharge,this.onClick)},e.prototype.open=function(e){t.prototype.open.call(this,e),this.updateData(),this.addLsn(RechargeActSys.ins().patchUpdateRecharge,this.updateData),this.addLsn(ActSys.ins().patchActivityIsGetAwards,this.updateData),this.addLsn(ActSys.ins().patchMeiRi60,this.updateData),this.actbg="activity_kflc"+(1==e.order?"":e.order)},e.prototype.updateData=function(){this.actData=ActSys.ins().getActDataById(this.actId);var t=this.actData.getConfig(1);this.lbDay.text=""+Lang.common_str6+this.actData.day+Lang.common_tian,this.lbDes.text=Lang.act_str44.replace("$count$",""+t.pay);var e=this.actData.getItemDatas();SortUtil.sortOn(e,["status","day"],[SortType.up,SortType.up]),this.listDataArr.replaceAll(e),this.imgDesc&&(this.imgDesc.source="hddt_zycs_lxcz"+this.actData.actId)},e.prototype.updateTime=function(){this.lbTime.textFlow=addColorTF(this.actData.getformatTime())},e.prototype.onClick=function(t){openWin(RechargeWin)},e.getTabTitle=function(){return"bqz_zycs_lxcz"},e}(ActBasePanel);__reflect(ActPanel23_2.prototype,"ActPanel23_2"),window.ActPanel23_2=ActPanel23_2;var ActPanel23_3=function(t){function e(){var e=t.call(this)||this;return e.dataArr=[],e.curIndex=0,e.count=0,e.skinName="ActPanel23_3EUI",e.btnSend.redPoint.visible=!0,e.listBtn.itemRenderer=ActItem23_3,e.listBtn.dataProvider=e.listBtnData=new eui.ArrayCollection,e.listReward.itemRenderer=ItemBaseReward,e.listReward.dataProvider=e.listRewardData=new eui.ArrayCollection,e.mcBtnSend=new MC,e.mcBtnSend.x=e.btnSend.width/2,e.mcBtnSend.y=e.btnSend.height/2,e.btnSend.addChildAt(e.mcBtnSend,e.btnSend.numChildren-1),e}return __extends(e,t),e.prototype.open=function(e,i){void 0===i&&(i=-1),t.prototype.open.call(this,e),this.addClickE(this.btnSend,this.onClick),this.addClickE(this.btnChongz,this.onClick),this.addItemTapE(this.listBtn,this.onListBtn),this.addLsn(ActSys.ins().patchActivityIsGetAwards,this.updateData),this.curIndex=i,this.updateData()},e.prototype.updateData=function(){this.actData=ActSys.ins().getActDataById(this.actId),this.listBtnData.source=this.dataArr=this.actData.getItemDatas(),-1==this.curIndex&&(this.curIndex=this.getDefSelectIndex()),this.listBtn.selectedIndex=this.curIndex,this.updateQiehuan()},e.prototype.getDefSelectIndex=function(){for(var t=0,e=0;e<this.dataArr.length;e++){var i=this.dataArr[e];if(t=e,i.status!=ActRewardState.Geted)break}return t},e.prototype.updateQiehuan=function(){var t=this.dataArr[this.curIndex];if(!t){if(this.count>=3)return;return this.curIndex=-1,this.updateData(),void this.count++}this.count=0;var e=t.config;this.listReward.dataProvider=new eui.ArrayCollection(e.reward);var i=Lang.act_str102+"："+addColor(""+Math.floor(this.actData.chongToday/100)+Lang.common_yuan,5767068);this.lbChongz.textFlow=addColorTF(i),i=Lang.act_str103+"："+addColor(this.actData.day+"/"+(this.curIndex+1),5767068),this.lbDay.textFlow=addColorTF(i),this.mcBtnSend.stop(),this.mcBtnSend.visible=!1,this.btnSend.visible=!1,this.btnChongz.visible=!1,this.imgYlq.visible=!1,this.lbChongz.visible=!1,this.lbDay.visible=!1,this.imgNeedDay.visible=!1,this.actData.curDay<this.curIndex+1?(this.imgNeedDay.visible=!0,this.imgNeedDay.source="csk2_zycs_t"+(this.curIndex+1)):t.status==ActRewardState.NotReached?(this.lbChongz.visible=!0,this.btnChongz.visible=!0,this.lbDay.visible=!0):t.status==ActRewardState.CanGet?(this.mcBtnSend.visible=!0,this.btnSend.visible=!0,this.lbChongz.visible=!0,this.lbDay.visible=!0):this.imgYlq.visible=!0,this.updateMC()},e.prototype.updateMC=function(){var t=this.dataArr[this.curIndex],e=t.config.reward[0],i=ItemConfig.getUI(e.id);this.groupMC.removeChildren(),this.groupMC.addChild(MC.createCenterGruop(i,-1))},e.prototype.updateTime=function(){this.actData&&(this.lbTime.textFlow=addColorTF(this.actData.getformatTime()))},e.prototype.onListBtn=function(t){void 0===t&&(t=null),this.curIndex=t.itemIndex,this.updateQiehuan()},e.prototype.onClick=function(t){switch(t.target){case this.btnSend:var e=this.dataArr[this.curIndex],i=e.config;ActSys.ins().sendReward(i.id,i.index);break;case this.btnChongz:openWin(RechargeWin)}},e}(ActBasePanel);__reflect(ActPanel23_3.prototype,"ActPanel23_3"),window.ActPanel23_3=ActPanel23_3;var ActPanel23_4=function(t){function e(){var e=t.call(this)||this;return e.skinName="ActPanel23_4EUI",e.list.itemRenderer=ItemBaseReward,e.list.dataProvider=e.listData=new eui.ArrayCollection,e}return __extends(e,t),e.prototype.open=function(e){void 0===e&&(e=null),t.prototype.open.call(this,e),this.actData=ActSys.ins().getActDataById(e.id),this.addLsn(RpSys.ins().patchRp,this.updateRp),this.addClickE(this,this.onClick),this.updatePanel(),this.updateRp()},e.prototype.close=function(){t.prototype.close.call(this)},e.prototype.updatePanel=function(){var t=this.actData.getCurDayConfig();this.listData.source=t.reward,this.btnGet.visible=this.actData.chongToday>0,this.btnGoRecharge.visible=0==this.actData.chongToday},e.prototype.onClick=function(t){switch(t.target){case this.btnGet:ActSys.ins().sendReward(this.actId,this.actData.curDay),this.closeMyWin();break;case this.btnGoRecharge:openWin(RechargeWin),this.closeMyWin();break;case this.closeBtn:this.closeMyWin()}},e.prototype.setImgBg=function(){this.imgBg&&""!=this.actBtnCfg.bg&&(this.imgBg.source="hddt_zycs_"+this.actBtnCfg.bg+"_png")},e}(ActBasePanel);__reflect(ActPanel23_4.prototype,"ActPanel23_4"),window.ActPanel23_4=ActPanel23_4;var ActPanel24_1=function(t){function e(){var e=t.call(this)||this;return e.initUI(),e}return __extends(e,t),e.prototype.initUI=function(){this.skinName="ActPanel24_1EUI",this.list.itemRenderer=ActItem24_1,this.list.dataProvider=this.listData=new eui.ArrayCollection},e.prototype.open=function(e){t.prototype.open.call(this,e),this.updateData(),this.addLsn(ActSys.ins().patchXiaoFeiFanLi,this.updateData),this.addLsn(ActSys.ins().patchActivityIsGetAwards,this.updateData)},e.prototype.updateData=function(){this.actData=ActSys.ins().getActDataById(this.actId),this.lbChong.text=Lang.common_str7+"："+this.actData.chong,this.lbXiao.text=Lang.act_str33+"："+this.actData.xiao;var t=this.actData.getItemDatas();SortUtil.sortOn(t,["status","index"],[SortType.up,SortType.up]),this.listData.replaceAll(t)},e.prototype.updateTime=function(){this.actData&&(this.date.textFlow=addColorTF(this.actData.getformatTime()))},e}(ActBasePanel);__reflect(ActPanel24_1.prototype,"ActPanel24_1"),window.ActPanel24_1=ActPanel24_1;var ActPanel25_1=function(t){function e(){var e=t.call(this)||this;return e.items=[],e.lastindex=0,e.bmpNum=0,e.initUI(),e}return __extends(e,t),e.prototype.initUI=function(){this.skinName="ActPanel25_1EUI",this.setSkinPart("item0",new ActItem25_1),this.setSkinPart("item1",new ActItem25_1),this.setSkinPart("item2",new ActItem25_1),this.setSkinPart("item3",new ActItem25_1),this.setSkinPart("item4",new ActItem25_1),this.setSkinPart("item5",new ActItem25_1),this.setSkinPart("item6",new ActItem25_1),this.setSkinPart("item7",new ActItem25_1),this.setSkinPart("item8",new ActItem25_1),this.setSkinPart("item9",new ActItem25_1),this.items=[this.item0,this.item1,this.item2,this.item3,this.item4,this.item5,this.item6,this.item7,this.item8,this.item9],this.lbLog.textFlow=addColorTF(StrUtil.addUnderLine(Lang.act_str37),65424),this.lbChong.textFlow=addColorTF(StrUtil.addUnderLine(Lang.fuli_str25),65424),this.mcBtn=MC.createCenterGruop(getEffName("zszp_cj"),-1),this.rewardBtn.addChild(this.mcBtn),this.mcBtn.visible=!1,this.mcLeft=new MC,this.mcLeft.x=347,this.mcLeft.y=400,this.addChild(this.mcLeft),this.mcRight=new MC,this.mcRight.x=347,this.mcRight.y=400,this.addChild(this.mcRight),this.lhj=new LHJG,this.lhj.setTotal(this.items.length),this.lhj.setCircleCount(4)},e.prototype.open=function(e){t.prototype.open.call(this,e),this.addLsn(ActSys.ins().patchYBLuckDraw,this.updateLuckDraw),this.addLsn(ActSys.ins().patchActivityIsGetAwards,this.infoPanel),this.addLsn(ActSys.ins().patchRechargeRecord,this.updateConsume),this.addClickE(this.rewardBtn,this.onClick),this.addClickE(this.lbChong,this.onClick),this.addClickE(this.lbLog,this.onClick),this.addEvent(egret.Event.CHANGING,this.lhj,this.lhjChanging),this.addEvent(egret.Event.COMPLETE,this.lhj,this.lhjComplete),this.infoPanel(),this.updateConsume()},e.prototype.close=function(){t.prototype.close.call(this),this.lhj.stop()},e.prototype.infoPanel=function(){this.actData=ActSys.ins().getActDataById(this.actId);for(var t=this.actData.getConfig(1),e=t.multiple.length,i=0;e>i;i++)this.items[i].data=t.multiple[i][0],this.items[i].setSelect(!1)},e.prototype.updateLuckDraw=function(){this.bmpNum=0,this.lhj.start(this.lastindex+1,this.actData.rewarIndex,3e3)},e.prototype.lhjChanging=function(t){this.lhj.isEnd()||(this.items[this.getIndex(2)].setSelect(!1),this.items[this.getIndex(1)].setSelect(!1),this.items[this.lastindex].setSelect(!1),this.lastindex!=t.data-1&&(this.bmpNum+=1),this.lastindex=t.data-1,1==this.bmpNum&&this.items[this.getIndex(1)].setSelect(!0,.8),this.bmpNum>=2&&(this.items[this.getIndex(2)].setSelect(!0,.5),this.items[this.getIndex(1)].setSelect(!0,.8)),this.items[this.lastindex].setSelect(!0,1))},e.prototype.lhjComplete=function(t){var e=this;this.items[this.getIndex(2)].setSelect(!1),this.items[this.getIndex(1)].setSelect(!1),Timer.ins()["do"](500,0,1,function(){e.addChild(e.mcRight),e.addChild(e.mcLeft),e.currentState="1";var t=new ParticlePlayer;t.playFile("res/particle/xianyuparticle",function(){e.currentState="0",openWin(Act25RewarWin,[GFunc.creatRewardDataById(CurType.yb,e.actData.zuanshi)]),e.updateConsume()}),e.addChild(t)},this)},e.prototype.getIndex=function(t){var e=this.lastindex-t;return e=0>e?e+this.items.length:e},e.prototype.updateConsume=function(){this.LbConsume.text=""+this.actData.getChouJiangYb();var t=this.actData.getChouJiang(),e=""+Lang.common_str52+StrUtil.addColor(-1==t?0:t,5949490);this.lbCount.textFlow=addColorTF(e),this.mcBtn.visible=t>0,this.groupDes.visible=-1!=t,this.actData.getYB()>0?(e=StrUtil.addColor(this.actData.getYB(),5949490),e=Lang.act_str36.replace("$count$",e)):e=Lang.act_str39,this.lbDes.textFlow=addColorTF(e)},e.prototype.updateTime=function(){this.actData&&(this.date.textFlow=addColorTF(this.actData.getformatTime()))},e.prototype.onClick=function(t){switch(t.target){case this.lbLog:openWin(Act25LogWin);break;case this.rewardBtn:if(-1==this.actData.getChouJiang())return void showtipsFail(Lang.act_str35);if(0==this.actData.getChouJiang())return void showtipsFail(Lang.act_str36.replace("$count$",""+this.actData.getYB()));GFunc.checkCurrency(CurType.yb,this.actData.getChouJiangYb())&&this.lhj.isEnd()&&ActSys.ins().sendYBLuckDraw();break;case this.lbChong:openWin(RechargeWin)}},e}(ActBasePanel);__reflect(ActPanel25_1.prototype,"ActPanel25_1"),window.ActPanel25_1=ActPanel25_1;var ActPanel26_1=function(t){function e(){var e=t.call(this)||this;return e.itemids=[],e.skinName="ActPanel26_1EUI",e.list.itemRenderer=ActItem26_1,e.list.dataProvider=e.listData=new eui.ArrayCollection,e}return __extends(e,t),e.prototype.open=function(e){t.prototype.open.call(this,e),this.actData=ActSys.ins().getActDataById(this.actId),this.addClickE(this.btnhuoqutjing,this.onClick),this.addLsn(ActSys.ins().patchActivityIsGetAwards,this.updatePanel),this.addLsn(BagSys.ins().patchItemChange,this.updateItem),this.addLsn(RpSys.ins().patchRp,this.updateRp),this.itemids=this.getActItemIds(),this.updatePanel(),this.updateRp()},e.prototype.close=function(){t.prototype.close.call(this)},e.prototype.updateRp=function(t){if(void 0===t&&(t=null),null==t||t.check(e))for(var i=this.list.numElements,n=0;i>n;n++){var a=this.list.getElementAt(n);a&&a.updateRedPoint()}},e.prototype.getActItemIds=function(){for(var t=[],e=this.actData.getItemDatas(),i=e.length-1;i>0;i--){var n=e[i].config;-1==t.indexOf(n.needitem)&&t.push(n.needitem)}return t},e.prototype.updatePanel=function(){this.listData.replaceAll(this.actData.getItemDatas()),this.updateItem()},e.prototype.updateBuyRemind=function(){for(var t=this.list.numElements,e=0;t>e;e++){var i=this.list.getElementAt(e);i&&i.updateItem()}},e.prototype.updateItem=function(t){if(void 0===t&&(t=null),null==t||this.itemids.indexOf(t.id)>-1){var e=this.itemids;this.groupItems.removeChildren();for(var i=0;i<e.length;i++){var n=e[i],a=Cfg.getItemCfg(e[i]),o=new eui.Group,s=new eui.HorizontalLayout;s.horizontalAlign="center",s.verticalAlign="middle",o.layout=s;var r=new eui.Image,u=new eui.Label;u.textColor=1720693,u.size=20,o.addChild(r),o.addChild(u),r.source=ResMgr.getItemIconMin(a.id),u.text=a.getName()+"："+GFunc.getItemCount(n),this.groupItems.addChild(o)}}},e.prototype.onlistDuiHuantemClick=function(t){if("btnDuiHuan"==t.target.name){var e=t.target.parent.data,i=e.config;GFunc.checkCurrency(i.needitem,i.needcount)&&openWin(BuyWin,e.getBuyData())}if("checkBoxTiXing"==t.target.name){var e=t.target.parent.data,i=e.config;ActSys.ins().sendReward(i.id,i.index,1,1==e.remind?0:1)}},e.prototype.onClick=function(t){switch(t.target){case this.btnhuoqutjing:var e=Cfg.getConfig(ActivityType26CommonConfig,this.actData.actId,this.actData.subType);e&&openWin(HelpListTipsWin,e.helpId)}},e.prototype.updateTime=function(){this.actData&&(this.lbTime.textFlow=addColorTF(this.actData.getformatTime()))},e}(ActBasePanel);__reflect(ActPanel26_1.prototype,"ActPanel26_1"),window.ActPanel26_1=ActPanel26_1;var ActPanel27_1=function(t){function e(){var e=t.call(this)||this;return e.skinName="ActPanel27_1EUI",e.list.itemRenderer=ActItem27_1,e.list.dataProvider=e.listData=new eui.ArrayCollection,e}return __extends(e,t),e.prototype.open=function(e){t.prototype.open.call(this,e),this.addClickE(this.btnSend,this.onClick),this.addLsn(ActSys.ins().patchActivityIsGetAwards,this.updateData),this.addLsn(ActSys.ins().patchMultipleRecharge,this.updateData),this.addLsn(RechargeActSys.ins().patchYZZHBuyUpdate,this.updateBtn),this.addLsn(RechargeActSys.ins().patchYZZHData,this.updateBtn),this.updateData()},e.prototype.updateData=function(){this.actData=ActSys.ins().getActDataById(this.actId);var t=this.actData.getItemDatas();SortUtil.sortOn(t,["status","dabiao"],[SortType.up,SortType.up]),this.listData.replaceAll(t),this.lbRecharge.text="当天充值数:"+this.actData.recharge/100,this.updateBtn()},e.prototype.updateBtn=function(){var t=RechargeActSys.ins().yzzhData.buyShengHui;this.btnSend.visible=!t,this.imgYjh.visible=t},e.prototype.updateTime=function(){this.actData&&(this.lbTime.textFlow=addColorTF(this.actData.getformatTime()))},e.prototype.onClick=function(t){switch(t.target){case this.btnSend:this.onCardLink()}},e.prototype.isActCard=function(){var t=ActSys.ins().getActDataById(ActId.ID_99500);return t.isAct()},e.prototype.onCardLink=function(){openWin(YZZHActWin)},e}(ActBasePanel);__reflect(ActPanel27_1.prototype,"ActPanel27_1"),window.ActPanel27_1=ActPanel27_1;var ActPanel3_1=function(t){function e(){var e=t.call(this)||this;return e.skinName="ActPanel3_1EUI",e.list.itemRenderer=ActItem3_1,e.mcDamon=new MC,e.mcDamon.playFile(ResMgr.getDamonUIBodyRes("pet_021",0,EntityAction.STAND),-1),e.groupMc.addChild(e.mcDamon),e}return __extends(e,t),e.prototype.open=function(e){t.prototype.open.call(this,e),this.addLsn(ActSys.ins().patchActivityIsGetAwards,this.updateData),this.addLsn(ActSys.ins().patchConsuRecord,this.updateData),this.list.dataProvider=this.list0Arr=new eui.ArrayCollection,this.updateData()},e.prototype.updateData=function(){this.actData=ActSys.ins().getActDataById(this.actId);var t=this.actData.getItemDatas();SortUtil.sortOn(t,["status","index"],[SortType.up,SortType.up]),this.list0Arr.replaceAll(t)},e.prototype.updateTime=function(){this.actData&&(this.date.textFlow=addColorTF(this.actData.getformatTime()))},e}(ActBasePanel);__reflect(ActPanel3_1.prototype,"ActPanel3_1"),window.ActPanel3_1=ActPanel3_1;var ActPanel3_2=function(t){function e(){var e=t.call(this)||this;return e.jifenDatas=[],e.skinName="ActPanel3_2EUI",e.setSkinPart("item0",new ItemBaseReward),e.setSkinPart("item1",new ItemBaseReward),e.setSkinPart("item2",new ItemBaseReward),e.setSkinPart("item3",new ItemBaseReward),e.setSkinPart("item4",new ItemBaseReward),e.redPoints=[e.redPoint0,e.redPoint1,e.redPoint2,e.redPoint3,e.redPoint4],e.lbCounts=[e.lbCount0,e.lbCount1,e.lbCount2,e.lbCount3,e.lbCount4],e.items=[e.item0,e.item1,e.item2,e.item3,e.item4],e.imgs=[e.img0,e.img1,e.img2,e.img3,e.img4],e.list.itemRenderer=ActItem3_2,e.listTab.itemRenderer=ActPanelTabItem3_2,e}return __extends(e,t),e.prototype.open=function(e){t.prototype.open.call(this,e),this.addItemTapE(this.listTab,this.onTabClick);for(var i=0;i<this.items.length;i++)this.addClickBeginE(this.items[i],this.onItemClick);this.addLsn(ActSys.ins().patchActivityIsGetAwards,this.updateData),this.addLsn(ActSys.ins().patchGuildZhaoJi,this.updateData),this.addLsn(ActSys.ins().sendJifenData,this.updateImg),this.addLsn(RpSys.ins().patchRp,this.updateRp),this.list.dataProvider=this.list0Arr=new eui.ArrayCollection,this.listTab.dataProvider=this.listTabArr=new eui.ArrayCollection,this.infoPanel()},e.prototype.updateRp=function(t){if(void 0===t&&(t=null),!t||t.check(ActWin)){this.listTab.validateNow();for(var e=0;e<this.listTab.numChildren;e++){var i=this.listTab.getChildAt(e);i.setRedPoint(this.actData.canRewardByType(i.data))}}},e.prototype.infoPanel=function(){this.actData=ActSys.ins().getActDataById(this.actId),this.listTabArr.source=this.actData.tabDatas,this.listTab.selectedIndex=this.actData.getTabIndexByType();var t=Cfg.getConfig(ActivityCommonConfig).xsjjRewards;this.jifenDatas=Cfg.getConfig(ActivityCommonConfig).xsjjJifeng;for(var e=0;e<this.items.length;e++)this.items[e].data=t[e],this.lbCounts[e].text=""+this.jifenDatas[e];Timer.ins()["do"](2e3,2e3,0,this.onMoveShake,this),this.updateData()},e.prototype.updateData=function(){var t=this.actData.getItemDatasByType(this.taskType);SortUtil.sortOn(t,["status","index"],[SortType.up,SortType.up]),this.list0Arr.source=t,this.bar.maximum=this.jifenDatas[this.jifenDatas.length-1],this.bar.value=this.actData.jifen,this.lbCurCount.text=""+Lang.chat_str17+Lang.fb_str113+this.actData.jifen,this.updateImg()},e.prototype.updateImg=function(){for(var t=0;t<this.imgs.length;t++){var e=this.jifenDatas[t];this.redPoints[t].visible=!1,this.actData.jifen>=e?(this.imgs[t].visible=!0,this.actData.deCodeJiFen(t+1)?this.imgs[t].source="jzhd_zycs_ylq":(this.imgs[t].source="jzhd_zycs_klq",this.redPoints[t].visible=!0)):this.imgs[t].visible=!1}this.updateRp()},e.prototype.onMoveShake=function(){for(var t=0;t<this.imgs.length;t++){var e=this.jifenDatas[t];egret.Tween.removeTweens(this.imgs[t]),this.actData.jifen>=e&&!this.actData.deCodeJiFen(t+1)&&DisUtil.shakeIt(this.imgs[t],3,100)}},e.prototype.updateTime=function(){this.actData&&(this.date.textFlow=addColorTF(this.actData.getformatTime()))},Object.defineProperty(e.prototype,"taskType",{get:function(){return this.actData?this.actData.tabDatas[this.listTab.selectedIndex]:Act3_2TabType.JYJC},enumerable:!0,configurable:!0}),e.prototype.onTabClick=function(t){this.updateData()},e.prototype.onItemClick=function(t){var e=this.items.indexOf(t.currentTarget),i=this.jifenDatas[e];return this.actData.jifen<i?void showtipsFail(Lang.guild_str73):this.actData.deCodeJiFen(e+1)?void showtipsFail(Lang.fuli_str15):void ActSys.ins().sendJifenData(this.actId,e+1)},e}(ActBasePanel);__reflect(ActPanel3_2.prototype,"ActPanel3_2"),window.ActPanel3_2=ActPanel3_2;var ActPanel3_3=function(t){function e(){var e=t.call(this)||this;return e.jifenDatas=[],e.skinName="ActPanel3_3EUI",e.listTask.itemRenderer=ActItem3_3Task,e.listTask.dataProvider=e.listTaskArr=new eui.ArrayCollection,e.listAward.itemRenderer=ActItem3_3,e.listAward.dataProvider=e.listAwardArr=new eui.ArrayCollection,e.labelSee.textFlow=addColorTF(e.labelSee.text,5767068,!0),e}return __extends(e,t),e.prototype.open=function(e){t.prototype.open.call(this,e),this.addClickE(this.listTask,this.onClick),this.addClickE(this.listAward,this.onClick),this.addClickE(this.labelSee,this.onClick),this.addLsn(ActSys.ins().patchActivityIsGetAwards,this.updateTask),this.addLsn(ActSys.ins().patchJifenData,this.updateJifen),this.addLsn(ActSys.ins().patchGuildZhaoJi,this.updateJifen),this.addLsn(RpSys.ins().patchRp,this.updateRp),this.actData=ActSys.ins().getActDataById(this.actId),this.update()},e.prototype.update=function(){this.updateTask(),this.updateJifen()},e.prototype.updateTask=function(){for(var t=this.actData.getTaskTypes(),e=[],i=0;i<t.length;i++){var n=new ActData3_3Tab,a=t[i];n.actId=this.actData.actId,n.taskType=a,n.config=this.actData.getNextConfigByTaskType(a),e.push(n)}SortUtil.sortOn(e,["hasAwardGet","isAllDone","taskType"],[SortType.down,SortType.up,SortType.up]),this.listTaskArr.source=e},e.prototype.updateJifen=function(){for(var t=Cfg.getConfigs(ActivityType3exConfig,this.actId),e=[],i=0;i<t.length;i++){var n=new ActItemData3_3;n.itemIndex=i,n.data3_3=this.actData,e.push(n)}SortUtil.sortOn(e,["canGetAward","isHighdianEnough","hasGetAward"],[SortType.down,SortType.up,SortType.up]),this.listAwardArr.source=e,this.labelHighdian.text=Lang.act_str161+":"+this.actData.jifen},e.prototype.updateTime=function(){this.actData&&(this.labelTime.textFlow=addColorTF(this.actData.getformatTime(),5767068))},e.prototype.onClick=function(t){var e=this;if(t.target)if(t.target==this.labelSee)openWin(Act3_3DetailWin,this.actData.actId);else{var i=t.target.name,n=parseInt(i.split("_")[1]);if(i.indexOf("btnSend")>-1)ActSys.ins().sendJifenData(this.actId,n+1);else if(i.indexOf("btnGo")>-1){var a=this.listTaskArr.getItemAt(n),o=Cfg.getConfig(GuildConveneTaskConfig,a.config.taskid),s=GFunc.createTaskNavData(o.controlTarget);s.setsucceedFrontFun(function(){e.closeMyWin()},this),s["goto"]()}else if(i.indexOf("btnGet")>-1){var a=this.listTaskArr.getItemAt(n);ActSys.ins().sendReward(this.actId,a.config.index)}}},e}(ActBasePanel);__reflect(ActPanel3_3.prototype,"ActPanel3_3"),window.ActPanel3_3=ActPanel3_3;var ActData3_3Tab=function(){function t(){}return Object.defineProperty(t.prototype,"hasAwardGet",{get:function(){var t=ActSys.ins().getActDataById(this.actId),e=t.getJindu(this.config.index),i=Cfg.getConfig(GuildConveneTaskConfig,this.config.taskid),n=i.target,a=e>=n,o=1==t.deCodeRecord(this.config.index);return!o&&a?1:0},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"isFinish",{get:function(){var t=ActSys.ins().getActDataById(this.actId);return t.isFinish(this.taskType)?1:0},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"isAllDone",{get:function(){var t=ActSys.ins().getActDataById(this.actId);return t.isAllDone(this.taskType)?1:0},enumerable:!0,configurable:!0}),t}();__reflect(ActData3_3Tab.prototype,"ActData3_3Tab"),window.ActData3_3Tab=ActData3_3Tab;var ActPanel3_4=function(t){function e(){var e=t.call(this)||this;return e.jifenDatas=[],e.skinName="ActPanel3_3EUI",e.listTask.itemRenderer=ActItem3_3Task,e.listTask.dataProvider=e.listTaskArr=new eui.ArrayCollection,e.listAward.itemRenderer=ActItem3_3,e.listAward.dataProvider=e.listAwardArr=new eui.ArrayCollection,e.labelSee.textFlow=addColorTF(e.labelSee.text,5767068,!0),e}return __extends(e,t),e.prototype.open=function(e){t.prototype.open.call(this,e),this.addClickE(this.listTask,this.onClick),this.addClickE(this.listAward,this.onClick),this.addClickE(this.labelSee,this.onClick),this.addLsn(ActSys.ins().patchActivityIsGetAwards,this.updateTask),this.addLsn(ActSys.ins().patchJifenData,this.updateJifen),this.addLsn(ActSys.ins().patchGuildZhaoJi,this.updateJifen),this.addLsn(RpSys.ins().patchRp,this.updateRp),this.actData=ActSys.ins().getActDataById(this.actId),this.update()},e.prototype.update=function(){this.updateTask(),this.updateJifen()},e.prototype.updateTask=function(){for(var t=this.actData.getTaskTypes(),e=[],i=0;i<t.length;i++){var n=new ActData3_3Tab,a=t[i];n.actId=this.actData.actId,n.taskType=a,n.config=this.actData.getNextConfigByTaskType(a),e.push(n)}SortUtil.sortOn(e,["hasAwardGet","isAllDone","taskType"],[SortType.down,SortType.up,SortType.up]),this.listTaskArr.source=e},e.prototype.updateJifen=function(){for(var t=Cfg.getConfigs(ActivityType3exConfig,this.actId),e=[],i=0;i<t.length;i++){var n=new ActItemData3_3;n.itemIndex=i,n.data3_3=this.actData,e.push(n)}SortUtil.sortOn(e,["canGetAward","isHighdianEnough","hasGetAward"],[SortType.down,SortType.up,SortType.up]),this.listAwardArr.source=e,this.labelHighdian.text=Lang.act_str161+":"+this.actData.jifen},e.prototype.updateTime=function(){this.actData&&(this.labelTime.textFlow=addColorTF(this.actData.getformatTime(),5767068))},e.prototype.onClick=function(t){var e=this;if(t.target)if(t.target==this.labelSee)openWin(Act3_3DetailWin,this.actData.actId);else{var i=t.target.name,n=parseInt(i.split("_")[1]);if(i.indexOf("btnSend")>-1)ActSys.ins().sendJifenData(this.actId,n+1);else if(i.indexOf("btnGo")>-1){var a=this.listTaskArr.getItemAt(n),o=Cfg.getConfig(GuildConveneTaskConfig,a.config.taskid),s=GFunc.createTaskNavData(o.controlTarget);s.setsucceedFrontFun(function(){e.closeMyWin()},this),s["goto"]()}else if(i.indexOf("btnGet")>-1){var a=this.listTaskArr.getItemAt(n);ActSys.ins().sendReward(this.actId,a.config.index)}}},e}(ActBasePanel);__reflect(ActPanel3_4.prototype,"ActPanel3_4"),window.ActPanel3_4=ActPanel3_4;var ActPanel31_1=function(t){function e(){var e=t.call(this)||this;return e.items=[],e.lastindex=0,e.boxAwards=[],e.tipsDatas=[],e.initUI(),e}return __extends(e,t),e.prototype.initUI=function(){this.skinName="ActPanel31_1EUI",this.setSkinPart("act31BigRewardTips",new Act31BigRewardTips),this.setSkinPart("item0",new ActItem31_1),this.setSkinPart("item1",new ActItem31_1),this.setSkinPart("item2",new ActItem31_1),this.setSkinPart("item3",new ActItem31_1),this.setSkinPart("item4",new ActItem31_1),this.setSkinPart("item5",new ActItem31_1),this.setSkinPart("item6",new ActItem31_1),this.setSkinPart("item7",new ActItem31_1),this.setSkinPart("item8",new ActItem31_1),this.setSkinPart("item9",new ActItem31_1),this.setSkinPart("item10",new ActItem31_1),this.setSkinPart("item11",new ActItem31_1),this.setSkinPart("item12",new ActItem31_1),this.setSkinPart("item13",new ActItem31_1),this.items=[this.item0,this.item1,this.item2,this.item3,this.item4,this.item5,this.item6,this.item7,this.item8,this.item9,this.item10,this.item11,this.item12,this.item13],this.btnWeight.textFlow=addColorTF(StrUtil.addUnderLine(Lang.act_str73),5767068),this.btnLog.textFlow=addColorTF(StrUtil.addUnderLine(Lang.act_str74),5767068),this.lhj=new LHJG,this.lhj.setTotal(this.items.length),this.lhj.setCircleCount(4),this.comGunDongOtherJiLu=new ComGunDongBase,this.comGunDongOtherJiLu.width=this.groupLog.width,this.comGunDongOtherJiLu.height=this.groupLog.height,this.groupLog.addChild(this.comGunDongOtherJiLu),this.lbLog.visible=!1,this.act31BigRewardTips.visible=!0
},e.prototype.open=function(e){t.prototype.open.call(this,e),this.addLsn(ActSys.ins().patchZSDBLuckDraw,this.updateLuckDraw),this.addLsn(ActSys.ins().patchZSDBJiLuUpdate,this.updateLog),this.addLsn(ActSys.ins().patchZDDBData,this.updatePanel),this.addLsn(ActSys.ins().patchZDDBScore,this.updatePanel),this.addLsn(ActSys.ins().patchActivityIsGetAwards,this.updatePanel),this.addLsn(ActSys.ins().patchActivityPanel,this.upateBoxAward),this.addLsn(LogicSys.ins().patchCurrency,this.updateYB),this.addClickE(this.btnBangDan,this.onClick),this.addClickE(this.btnOne,this.onClick),this.addClickE(this.btnTen,this.onClick),this.addClickE(this.btnBox,this.onClick),this.addClickE(this.btnWeight,this.onClick),this.addClickE(this.btnLog,this.onClick),this.addEvent(egret.Event.CHANGING,this.lhj,this.lhjChanging),this.addEvent(egret.Event.COMPLETE,this.lhj,this.lhjComplete),ActSys.ins().sendZSDBLuckDrawLog(this.actId,2),ActSys.ins().sendZDDBData(this.actId),this.infoPanel()},e.prototype.close=function(){t.prototype.close.call(this),this.lhj.stop(),this.comGunDongOtherJiLu.close(),egret.Tween.removeTweens(this.act31BigRewardTips)},e.prototype.infoPanel=function(){this.actData31=ActSys.ins().getActDataById(this.actId),this.actData1_17=ActSys.ins().getActDataById(this.actBtnCfg.addId[0]);for(var t=this.actData31.getRewardPool(),e=t.length,i=0;e>i;i++)this.items[i].data=t[i],this.items[i].setSelect(!1);this.lbDec.textFlow=this.actData31.isOpenActivity()?addColorTF(Lang.act_str72.replace("$count$",""+addColor(this.actData31.getConfig().score,5767068))):addColorTF("活动已结束",15733780),this.act31BigRewardTips.data=this.actData31.getConfig().bigreward,this.comGunDongOtherJiLu.iniData(this.actData31.worldLogs,egret.getQualifiedClassName(Act31JiLuItem),6,ArrowDir.dirV),this.comGunDongOtherJiLu.open(),egret.Tween.removeTweens(this.act31BigRewardTips),GFunc.move(this.act31BigRewardTips,new XY(this.act31BigRewardTips.x,580),new XY(this.act31BigRewardTips.x,612)),this.updatePanel(),this.updateYB(),this.updateTotol()},e.prototype.updateTotol=function(){this.lbTotol.text=this.actData31.total+"/"+this.actData31.getConfig().max},e.prototype.updateLog=function(t){this.comGunDongOtherJiLu.addData([t])},e.prototype.updatePanel=function(){var t=this.actData1_17.getCurConfig();this.barExp.maximum=t.condition,this.barExp.value=this.actData1_17.score,this.btnBox.redPoint.visible=this.actData1_17.getRewardStateById(t.index)==ActRewardState.CanGet,this.updateTotol()},e.prototype.upateBoxAward=function(t){t==this.actBtnCfg.addId[0]&&openWin(Act6RewarWin,this.boxAwards)},e.prototype.updateYB=function(t){if(!t||t.type==CurType.yb){var e=GFunc.getItemCount(CurType.yb),i=this.actData31.getConsume1();this.lbConsumeOne.textFlow=addColorTF(""+i,i>e?15733780:5767068),i=this.actData31.getConsume10(),this.lbConsumeTen.textFlow=addColorTF(""+i,i>e?15733780:5767068)}},e.prototype.updateLuckDraw=function(){this.tipsDatas.length=0;for(var t=this.actData31.getConfig().itemIds,e=0,i=this.actData31.rewards;e<i.length;e++){var n=i[e];-1!=t.indexOf(n.id)&&this.tipsDatas.push(GFunc.creatItemDataByReward(n))}1==this.actData31.rewards.length?this.lhj.start(this.lastindex,this.actData31.rewardIndex,3e3):(openWin(Act31LuckDrawWin,this.actId),this.showJiPingItem())},e.prototype.showJiPingItem=function(){if(this.tipsDatas.length>0){var t=this.tipsDatas[0];openWin(XunBaoJiPingItemTipsWin,t,this.showJiPingItem,this,XunBaoJiPingItemTipsWin.ACT_6_1),this.tipsDatas.splice(0,1)}},e.prototype.lhjChanging=function(t){this.lhj.isEnd()||(this.items[this.lastindex].setSelect(!1),this.lastindex=t.data-1,this.items[this.lastindex].setSelect(!0))},e.prototype.lhjComplete=function(t){var e=this;this.tipsDatas.length>0?this.showJiPingItem():Timer.ins()["do"](500,0,1,function(){var t=GFunc.creatItemDataByReward(e.actData31.rewards[0]),i=new eui.Image(ResMgr.getItemIcon(t.cfg.getIcon(),IconType.IT_80x80));i.x=360,i.y=300,e.addChild(i),GFunc.flyToBag(e.actData31.rewards[0].id,i),e.removeChild(i)},this)},e.prototype.updateTime=function(){this.actData31&&(this.lbTime.textFlow=addColorTF(Lang.act_str29+addColor(this.actData31.getformatTime(),5767068)))},e.prototype.onClick=function(t){switch(t.target){case this.btnBangDan:var e=ActSys.ins().getActDataById(this.actBtnCfg.addId[1]),i=ActSys.ins().getActDataById(this.actBtnCfg.addId[2]);openWin(Act31RankWin,e,i);break;case this.btnLog:openWin(Act31LogWin,this.actId);break;case this.btnOne:this.actData31.isOpenActivity()||showtipsFail("活动已结束"),this.lhj.isEnd()&&GFunc.checkCurrency(CurType.yb,this.actData31.getConsume1())&&ActSys.ins().sendZSDBLuckDraw(this.actId,1);break;case this.btnTen:this.actData31.isOpenActivity()||showtipsFail("活动已结束"),this.lhj.isEnd()&&GFunc.checkCurrency(CurType.yb,this.actData31.getConsume10())&&ActSys.ins().sendZSDBLuckDraw(this.actId,10);break;case this.btnWeight:openWin(XunBaoGaiLvTipsWin,this.actData31.getWeightDec());break;case this.btnBox:var n=this.actData1_17.getCurConfig();this.actData1_17.getRewardStateById(n.index)==ActRewardState.CanGet?(this.boxAwards=n.rewards,ActSys.ins().sendReward(n.id,n.index)):openWin(Act6ScoreWin,this.actData1_17)}},e}(ActBasePanel);__reflect(ActPanel31_1.prototype,"ActPanel31_1"),window.ActPanel31_1=ActPanel31_1;var ActPanel31_5=function(t){function e(){var e=t.call(this)||this;return e.items=[],e.imgs=[],e.lastindex=0,e.boxAwards=[],e.tipsDatas=[],e.initUI(),e}return __extends(e,t),e.prototype.initUI=function(){this.skinName="ActPanel31_5EUI",this.setSkinPart("act31BigRewardTips",new Act31BigRewardTips),this.setSkinPart("item0",new ItemBaseReward),this.setSkinPart("item1",new ItemBaseReward),this.setSkinPart("item2",new ItemBaseReward),this.setSkinPart("item3",new ItemBaseReward),this.setSkinPart("item4",new ItemBaseReward),this.setSkinPart("item5",new ItemBaseReward),this.setSkinPart("item6",new ItemBaseReward),this.setSkinPart("item7",new ItemBaseReward),this.setSkinPart("item8",new ItemBaseReward),this.setSkinPart("item9",new ItemBaseReward),this.setSkinPart("item10",new ItemBaseReward),this.setSkinPart("item11",new ItemBaseReward),this.items=[this.item0,this.item1,this.item2,this.item3,this.item4,this.item5,this.item6,this.item7,this.item8,this.item9,this.item10,this.item11],this.imgs=[this.img0,this.img1,this.img2,this.img3,this.img4,this.img5,this.img6,this.img7,this.img8,this.img9,this.img10,this.img11],this.btnWeight.textFlow=addColorTF(StrUtil.addUnderLine(Lang.act_str73)),this.btnLog.textFlow=addColorTF(StrUtil.addUnderLine(Lang.act_str74)),this.lhj=new LHJG,this.lhj.setTotal(this.imgs.length),this.lhj.setCircleCount(4),this.comGunDongOtherJiLu=new ComGunDongBase,this.comGunDongOtherJiLu.width=this.groupLog.width,this.comGunDongOtherJiLu.height=this.groupLog.height,this.groupLog.addChild(this.comGunDongOtherJiLu),this.lbLog.visible=!1,this.act31BigRewardTips.visible=!0},e.prototype.open=function(e){t.prototype.open.call(this,e),this.addLsn(ActSys.ins().patchZSDBLuckDraw,this.updateLuckDraw),this.addLsn(ActSys.ins().patchZSDBJiLuUpdate,this.updateLog),this.addLsn(ActSys.ins().patchZDDBData,this.updatePanel),this.addLsn(ActSys.ins().patchZDDBScore,this.updatePanel),this.addLsn(ActSys.ins().patchActivityIsGetAwards,this.infoPanel),this.addLsn(ActSys.ins().patchActivityPanel,this.upateBoxAward),this.addLsn(LogicSys.ins().patchCurrency,this.updateYB),this.addClickE(this.btnBangDan,this.onClick),this.addClickE(this.btnOne,this.onClick),this.addClickE(this.btnTen,this.onClick),this.addClickE(this.btnBox,this.onClick),this.addClickE(this.btnWeight,this.onClick),this.addClickE(this.btnLog,this.onClick),this.addEvent(egret.Event.CHANGING,this.lhj,this.lhjChanging),this.addEvent(egret.Event.COMPLETE,this.lhj,this.lhjComplete),ActSys.ins().sendZSDBLuckDrawLog(this.actId,2),ActSys.ins().sendZDDBData(this.actId),this.infoPanel()},e.prototype.close=function(){t.prototype.close.call(this),this.lhj.stop(),this.comGunDongOtherJiLu.close(),egret.Tween.removeTweens(this.act31BigRewardTips)},e.prototype.infoPanel=function(){this.actData31=ActSys.ins().getActDataById(this.actId),this.actData1=ActSys.ins().getActDataById(this.actBtnCfg.addId[0]);for(var t=this.actData31.getRewardPool(),e=t.length,i=0;e>i;i++)this.items[i].data=t[i],this.imgs[i].visible=!1;this.lbDec.textFlow=addColorTF(Lang.act_str72.replace("$count$",""+addColor(this.actData31.getConfig().score,5767068))),this.act31BigRewardTips.data=this.actData31.getConfig().bigreward,this.comGunDongOtherJiLu.iniData(this.actData31.worldLogs,egret.getQualifiedClassName(Act31_5JiLuItem),6,ArrowDir.dirV),this.comGunDongOtherJiLu.open(),egret.Tween.removeTweens(this.act31BigRewardTips),GFunc.move(this.act31BigRewardTips,new XY(89,580),new XY(89,612)),this.updatePanel(),this.updateYB()},e.prototype.updateLog=function(t){this.comGunDongOtherJiLu.addData([t])},e.prototype.updatePanel=function(){var t=this.actData1.getCurConfig();this.barExp.maximum=t.condition,this.barExp.value=this.actData1.score,this.btnBox.redPoint.visible=this.actData1.getRewardStateById(t.index)==ActRewardState.CanGet},e.prototype.upateBoxAward=function(t){t==this.actBtnCfg.addId[0]&&openWin(Act6RewarWin,this.boxAwards)},e.prototype.updateYB=function(t){if(!t||t.type==CurType.yb){var e=GFunc.getItemCount(CurType.yb),i=this.actData31.getConsume1();this.lbConsumeOne.textFlow=addColorTF(""+i,i>e?16726329:16773802),i=this.actData31.getConsume10(),this.lbConsumeTen.textFlow=addColorTF(""+i,i>e?16726329:16773802)}},e.prototype.updateLuckDraw=function(){this.tipsDatas.length=0;for(var t=this.actData31.getConfig().itemIds,e=0,i=this.actData31.rewards;e<i.length;e++){var n=i[e];-1!=t.indexOf(n.id)&&this.tipsDatas.push(GFunc.creatItemDataByReward(n))}1==this.actData31.rewards.length?this.lhj.start(this.lastindex,this.actData31.rewardIndex,3e3):(openWin(Act31LuckDrawWin,this.actId),this.showJiPingItem())},e.prototype.showJiPingItem=function(){if(this.tipsDatas.length>0){var t=this.tipsDatas[0];openWin(XunBaoJiPingItemTipsWin,t,this.showJiPingItem,this,XunBaoJiPingItemTipsWin.ACT_6_1),this.tipsDatas.splice(0,1)}},e.prototype.lhjChanging=function(t){this.lhj.isEnd()||(this.imgs[this.lastindex].visible=!1,this.lastindex=t.data-1,this.imgs[this.lastindex].visible=!0)},e.prototype.lhjComplete=function(t){var e=this;this.tipsDatas.length>0?this.showJiPingItem():Timer.ins()["do"](500,0,1,function(){var t=GFunc.creatItemDataByReward(e.actData31.rewards[0]),i=new eui.Image(ResMgr.getItemIcon(t.cfg.getIcon(),IconType.IT_80x80));i.x=360,i.y=300,e.addChild(i),GFunc.flyToBag(e.actData31.rewards[0].id,i),e.removeChild(i)},this)},e.prototype.getIndex=function(t){var e=this.lastindex-t;return e=0>e?e+this.items.length:e},e.prototype.updateTime=function(){this.actData31&&(this.lbTime.textFlow=addColorTF(Lang.act_str29+addColor(this.actData31.getformatTime(),16774477)))},e.prototype.onClick=function(t){switch(t.target){case this.btnBangDan:var e=ActSys.ins().getActDataById(this.actBtnCfg.addId[1]),i=ActSys.ins().getActDataById(this.actBtnCfg.addId[2]);openWin(Act31RankWin,e,i,"hddt_zycs_fbpm");break;case this.btnLog:openWin(Act31LogWin,this.actId);break;case this.btnOne:if(this.actData31.getActOpenState()!=ActOpenState.Open)return void showtipsFail(Lang.act_str7);this.lhj.isEnd()&&GFunc.checkCurrency(CurType.yb,this.actData31.getConsume1())&&ActSys.ins().sendZSDBLuckDraw(this.actId,1);break;case this.btnTen:if(this.actData31.getActOpenState()!=ActOpenState.Open)return void showtipsFail(Lang.act_str7);this.lhj.isEnd()&&GFunc.checkCurrency(CurType.yb,this.actData31.getConsume10())&&ActSys.ins().sendZSDBLuckDraw(this.actId,10);break;case this.btnWeight:openWin(XunBaoGaiLvTipsWin,this.actData31.getWeightDec());break;case this.btnBox:var n=this.actData1.getCurConfig();this.actData1.getRewardStateById(n.index)==ActRewardState.CanGet?(this.boxAwards=n.rewards,ActSys.ins().sendReward(n.id,n.index)):openWin(Act6ScoreWin,this.actData1)}},e}(ActBasePanel);__reflect(ActPanel31_5.prototype,"ActPanel31_5"),window.ActPanel31_5=ActPanel31_5;var ActPanel33_1=function(t){function e(){var e=t.call(this)||this;return e.skinName="ActPanel33_1EUI",e.list.itemRenderer=ActItem33_1,e.list.dataProvider=e.listData=new eui.ArrayCollection,e}return __extends(e,t),e.prototype.open=function(e){t.prototype.open.call(this,e),this.addLsn(ActSys.ins().patchActivityIsGetAwards,this.updateData),this.addLsn(ActSys.ins().patchKFXFRank,this.updateData),ActSys.ins().sendKFXFRank(this.actId),this.updateData()},e.prototype.updateData=function(){this.actData=ActSys.ins().getActDataById(this.actId),this.listData.source=this.actData.rankDatas;var t=this.actData.getEndRank(),e="";t&&(e=""+Lang.common_di+t.rank+Lang.common_str5+"："+t.roleName),this.lbRank.text=e,this.lbValue.text=Lang.act_str100+"："+(t?t.value:0),e=this.actData.myRank>0?""+Lang.act_str25+Lang.common_di+this.actData.myRank+Lang.common_str5:""+Lang.act_str25+Lang.common_str17,this.lbRankMy.text=e,this.lbValueMy.text=Lang.act_str100+"："+this.actData.myValue},e.prototype.updateTime=function(){this.actData&&(this.lbTime.textFlow=addColorTF(this.actData.getformatTime()))},e}(ActBasePanel);__reflect(ActPanel33_1.prototype,"ActPanel33_1"),window.ActPanel33_1=ActPanel33_1;var ActPanel34_1=function(t){function e(){var e=t.call(this)||this;return e.mcBtnGet=new MC,e.skinName="ActPanel34_1EUI",e.list.itemRenderer=ActItem34_1,e.list.dataProvider=e.listData=new eui.ArrayCollection,e.listRewar.itemRenderer=ItemIcon,e.btnGet.redPoint.visible=!0,e.mcBtnGet.x=e.btnGet.width/2,e.mcBtnGet.y=e.btnGet.height/2,e.btnGet.addChild(e.mcBtnGet),e}return __extends(e,t),e.prototype.open=function(e){t.prototype.open.call(this,e),this.addLsn(ActSys.ins().patchCZCBRank,this.updateData),this.addClickE(this.btnLink,this.onClick),this.addClickE(this.btnGet,this.onClick),this.addClickE(this.btnHelp,this.onClick),this.addLsn(ActSys.ins().patchActivityIsGetAwards,this.updateData),this.addLsn(ActSys.ins().patchCZCBDabiaoScore,this.updateDabiao),this.addLsn(ShouHuNewSys.ins().patchDamonLevelUp,this.updateDabiao),this.addLsn(ShouHuNewSys.ins().patchYongbingLevelUp,this.updateDabiao),this.addLsn(ShouHuNewSys.ins().patchShenmoLevelUp,this.updateDabiao),this.addLsn(SqXySys.ins().patchShenQiUp,this.updateDabiao),this.addLsn(SqXySys.ins().patchWingUp,this.updateDabiao),this.addLsn(SqXySys.ins().patchSzUp,this.updateDabiao),this.addLsn(SqXySys.ins().patchMeilinUp,this.updateDabiao),this.addLsn(BagSys.ins().patchItemChange,this.updateDabiao),ActSys.ins().sendCZCBRank(e.id),this.updateData()},e.prototype.updateTime=function(){this.actDataRank&&(this.lbTime.textFlow=addColorTF(this.actDataRank.getformatTime()))},e.prototype.updateData=function(){this.actDataRank=ActSys.ins().getActDataById(this.actId),this.actDataDabiao=ActSys.ins().getActDataById(this.actBtnCfg.addId[0]),this.updateRank(),this.updateDabiao()},e.prototype.updateRank=function(){this.imgDbp.source="hddt_zycs_fsbp_d"+this.actBtnCfg.showday;var t="";if(Actor.ins().serverOpenDay<7)t="hddt_zycs_fsbp_d"+((this.actBtnCfg.showday+1)%7||7)+"a";else{var e=new Date(Actor.ins().serverTime+DateUtil.MS_PER_DAY).getDate(),i=Cfg.getConfig(ActMonthLoopConfig,e);t="hddt_zycs_fsbp_d"+((i.type34_1+1)%7||7)+"a"}this.imgPy=t,this.listData.source=this.actDataRank.rankDatas;var n=this.actDataRank.getNextRank(),a="";n&&(a=""+Lang.common_di+n.rank+Lang.common_str5+"："+n.roleName),this.lbRank.text=a,this.lbValue.text=""+Lang.fb_str113+(n?n.value:0),a=this.actDataRank.myRank>0?""+Lang.act_str25+Lang.common_di+this.actDataRank.myRank+Lang.common_str5:""+Lang.act_str25+Lang.common_str17,this.lbRankMy.text=a,this.lbValueMy.text=""+Lang.fb_str113+this.actDataRank.dabiao},e.prototype.updateDabiao=function(){var t=this.actDataDabiao.getCurConfig(),e=Cfg.getItemCfg(t.needitem),i=Lang.act_str105.replace("$name$",""+e.getName());this.lbDec.textFlow=addColorTF(i),i=Lang.act_str104.replace("$count$",addColor(""+t.condition,5177195)),this.lbDabiaoDec.textFlow=addColorTF(i),this.lbDabiaoValue.textFlow=addColorTF("（"+this.actDataDabiao.dabiao+"/"+t.condition+"）",this.actDataDabiao.dabiao<t.condition?9240833:5177195),this.listRewar.dataProvider=new eui.ArrayCollection(GFunc.getItemDataRewardByJob(t.rewards)),this.btnLink.visible=!1,this.btnGet.visible=!1,this.imgYlq.visible=!1;var n=this.actDataDabiao.getRewardStateById(t.index);n==ActRewardState.CanGet?(this.btnGet.visible=!0,this.mcBtnGet.playFile(ResMgr.getEffName("public_zycs_button01"),-1)):n==ActRewardState.NotReached?(this.btnLink.visible=!0,this.btnLink.redPoint.visible=this.actDataDabiao.canUp()):n==ActRewardState.Geted&&(this.imgYlq.visible=!0)},e.prototype.onClick=function(t){switch(t.currentTarget){case this.btnLink:var e=this.actDataRank.getConfig(1);GFunc.createTaskNavData(e.controlTarget)["goto"]();break;case this.btnGet:ActSys.ins().sendReward(this.actDataDabiao.getCurConfig().id,this.actDataDabiao.getCurConfig().index);break;case this.btnHelp:var i=this.actDataRank.getConfigs()[1].helpId;openWin(HelpWin,Cfg.getConfig(HelpInfoConfig,i).text)}},e}(ActBasePanel);__reflect(ActPanel34_1.prototype,"ActPanel34_1"),window.ActPanel34_1=ActPanel34_1;var ActPanel34_2=function(t){function e(){var e=t.call(this)||this;return e.skinName="ActPanel34_2EUI",e.listReward.itemRenderer=ItemBaseReward,e.listReward.dataProvider=e.listRewardData=new eui.ArrayCollection,e.list.itemRenderer=ActItem34_2,e.list.dataProvider=e.listData=new eui.ArrayCollection,e.mcIcon=new McIcon,e.mcIcon.touchEnabled=!1,e.mcIcon.touchChildren=!1,e.groupMc.addChild(e.mcIcon),e}return __extends(e,t),e.prototype.open=function(e){t.prototype.open.call(this,e),this.addClickE(this.btnHelp,this.onClick),this.addLsn(ActSys.ins().patchActivityIsGetAwards,this.updateData),this.addLsn(ActSys.ins().patchRankAppearance,this.updateMC),this.addLsn(ActSys.ins().patchCZCBRank,this.updateData),ActSys.ins().sendRankAppearance(e.id),ActSys.ins().sendCZCBRank(e.id),this.updateInfo()},e.prototype.close=function(){t.prototype.close.call(this),this.mcIcon.close()},e.prototype.updateInfo=function(){this.actData=ActSys.ins().getActDataById(this.actId),this.updateTime()},e.prototype.updateMC=function(){0==this.actData.state?this.imgHead.source="jsdd_zycs_wh":this.imgHead.source=ResMgr.getHeadIcon(this.actData.job)},e.prototype.updateData=function(){""==this.actData.firstData.roleName?this.lbName.text=Lang.guild_str31:this.lbName.text=""+this.actData.firstData.roleName,this.lbvalue.textFlow=addColorTF(Lang.act_str112+"："+addColor(this.actData.firstData.value,1306146)),this.listRewardData.source=this.actData.firstData.config.rewards,this.mcIcon.open(this.actData.firstData.config.mcIcon);var t=this.actData.rankDatas.concat();t.splice(0,1),this.listData.source=t;var e="";e=this.actData.myRank>0&&this.actData.myRank<=50?Lang.act_str25+addColor(""+Lang.common_di+this.actData.myRank+Lang.common_str5,1306146):Lang.act_str25+addColor(Lang.common_str17,1306146),this.lbRankMy.textFlow=addColorTF(e),this.lbValueMy.textFlow=addColorTF(""+Lang.act_str120+addColor(this.actData.dabiao,1306146))},e.prototype.updateTime=function(){this.actData&&(this.lbTime.textFlow=addColorTF(Lang.act_str29+addColor(this.actData.getformatTime(),1306146)))},e.prototype.onClick=function(t){switch(t.currentTarget){case this.btnHelp:openWin(HelpWin,Cfg.getConfig(HelpInfoConfig,109).text)}},e}(ActBasePanel);__reflect(ActPanel34_2.prototype,"ActPanel34_2"),window.ActPanel34_2=ActPanel34_2;var ActPanel36_1=function(t){function e(){var e=t.call(this)||this;return e.skinName="ActPanel36_1EUI",e.list1.itemRenderer=ActItem36_1SH2,e.list1.dataProvider=e.list1Data=new eui.ArrayCollection,e.list2.itemRenderer=ActItem36_1,e.list2.dataProvider=e.list2Data=new eui.ArrayCollection,e.lbSend.textFlow=addColorTF(StrUtil.addUnderLine(e.lbSend.text)),e.lbViewReward.textFlow=addColorTF(StrUtil.addUnderLine(e.lbViewReward.text)),e.lbZeSong.textFlow=addColorTF(StrUtil.addUnderLine(e.lbZeSong.text)),e}return __extends(e,t),e.prototype.open=function(e){t.prototype.open.call(this,e),this.addClickE(this,this.onClick),this.addLsn(ActSys.ins().patchQQShRankData,this.updateData),ActSys.ins().sendQQShRankData(this.actId),this.updateData(),this.updateTime(),this.helpId=this.actData.getConfigs()[1].helpId},e.prototype.updateData=function(){this.actData=ActSys.ins().getActDataById(this.actId),this.actData_37_1=ActSys.ins().getActDataById(this.actBtnCfg.addId[0]);var t=this.actData;this.lbMyMeiLi.textFlow=addColorTF(""+t.myMeiLiValue),this.lbMyRank.textFlow=addColorTF(""+(0==t.myRank||t.myRank>t.actData36_1Ranks.length?Lang.common_str17:t.myRank),t.myRank>t.actData36_1Ranks.length?15733780:5767068),this.list2Data.source=t.actData36_1Ranks.concat().splice(1,t.actData36_1Ranks.length-1);var e=t.actData36_1Ranks[0];if(e&&(this.list1Data.source=e.actData36_1ShouHus,this.lbTiaoJian.textFlow=addColorTF(""+Lang.act_str183.replace("$value$",""+addColor(e.activityType36Config.need,5767068)))),e&&e.hasPlayer()){this.imgHead.source=ResMgr.getHeadIcon(e.sex),this.lbName.text=e.name,this.lbValue.textFlow=addColorTF(Lang.act_str180+"："+addColor(e.value,5767068)),this.lbShouHuCount.textFlow=addColorTF(""+addColor(Lang.act_str181+"：",16115290)+addColor(e.count+Lang.common_ren,5767068)),this.entityRole||(this.entityRole=GFunc.createEntityUI(),this.groupEntity.addChild(this.entityRole));var i=this.entityRole.data||new EntityRoleData;i.szId=t.szId,i.sqId=t.sqId,i.wingId=t.wingId,i.damonId=t.damonId,i.shengLingId=t.shengLingId,i.job=t.job,i.sex=t.sex,this.entityRole.setData(i,3),this.imgXwyd.visible=!1,this.lbTiaoJian.text="",this.imgTiaoJianBg.visible=!1,this.groupZeSong.visible=!0}else this.groupZeSong.visible=!1,this.imgTiaoJianBg.visible=!0,this.imgXwyd.visible=!0,this.imgHead.source="jsdd_zycs_wh",this.lbName.text=Lang.act_str87,this.lbValue.textFlow=addColorTF(Lang.act_str180+"："+addColor("0",5767068)),this.lbShouHuCount.textFlow=addColorTF(""+addColor(Lang.act_str181+"：",16115290)+addColor("0"+Lang.common_ren,5767068))},e.prototype.updateTime=function(){this.actData&&(this.lbTime.textFlow=addColorTF(addColor(Lang.act_str29,16777215)+addColor(this.actData.getformatTime(),5767068)))},e.prototype.onClick=function(t){switch(t.target){case this.lbSend:openWin(Act37_1ChatWin,this.actData_37_1);break;case this.lbViewReward:var e=this.actData.getConfig(1);GFunc.createTaskNavData(e.controlTarget)["goto"]();break;case this.lbZeSong:var i=this.actData_37_1.getActOpenState();if(i==ActOpenState.Jiesuan||i==ActOpenState.End)showtipsFail(Lang.act_str7);else{var n=this.actData.actData36_1Ranks[0];ActSys.ins().sendQQShPlayerData(this.actData_37_1.actId,n.actorId)}}},e}(ActBasePanel);__reflect(ActPanel36_1.prototype,"ActPanel36_1"),window.ActPanel36_1=ActPanel36_1;var ActPanel36_2=function(t){function e(){var e=t.call(this)||this;return e.skinName="ActPanel36_2EUI",e.list.itemRenderer=ActItem36_2,e.list.dataProvider=e.listData=new eui.ArrayCollection,e.mcIcon=new McIcon,e.groupEntity.addChild(e.mcIcon),e}return __extends(e,t),e.prototype.open=function(e){t.prototype.open.call(this,e),this.addLsn(ActSys.ins().patchQQShRankData,this.updateRank),this.actData=ActSys.ins().getActDataById(this.actId),this.actData36_1=ActSys.ins().getActDataById(this.actBtnCfg.addId[0]),this.updateData(),this.updateRank(),ActSys.ins().sendQQShSendData(this.actData36_1.actId);var i=this.actData.getConfigs()[1];if(this.helpId=i.helpId,i.itemId){var n=Cfg.getItemCfg(i.itemId);this.lbRewardName.textFlow=addColorTF(n.getName())}},e.prototype.updateData=function(){var t=this.actData;this.listData.source=t.getItemDatas();var e=t.getConfigs()[1];this.mcIcon.open(e.mcIcon)},e.prototype.updateRank=function(){this.lbMyMeiLi.textFlow=addColorTF(""+this.actData36_1.myMeiLiValue),this.lbMyRank.textFlow=addColorTF(""+(0==this.actData36_1.myRank||this.actData36_1.myRank>this.actData36_1.actData36_1Ranks.length?Lang.common_str17:this.actData36_1.myRank),this.actData36_1.myRank>this.actData36_1.actData36_1Ranks.length?15733780:5767068)},e.prototype.updateTime=function(){this.actData&&(this.lbTime.textFlow=addColorTF(addColor(Lang.act_str29,16777215)+addColor(this.actData.getformatTime(),5767068)))},e}(ActBasePanel);__reflect(ActPanel36_2.prototype,"ActPanel36_2"),window.ActPanel36_2=ActPanel36_2;var ActPanel37_1=function(t){function e(){var e=t.call(this)||this;return e.skinName="ActPanel37_1EUI",e.list1.itemRenderer=ActItem37_1_1,e.list1.dataProvider=e.list1Data=new eui.ArrayCollection,e.list2.itemRenderer=ActItem37_1_2,e.list2.dataProvider=e.list2Data=new eui.ArrayCollection,e.list3.itemRenderer=ActItem37_1_3,e.list3.dataProvider=e.list3Data=new eui.ArrayCollection,e.lbLog.textFlow=addColorTF(e.lbLog.text,e.lbLog.textColor,!0),e}return __extends(e,t),e.prototype.open=function(e){t.prototype.open.call(this,e),this.addClickE(this,this.onClick),this.addLsn(ActSys.ins().patchQQShSendData,this.updateData),this.addLsn(BagSys.ins().patchItemChange,this.itemChange),this.updateData(),ActSys.ins().sendQQShSendData(this.actData.actId)},e.prototype.updateData=function(){this.actData=ActSys.ins().getActDataById(this.actId);var t=this.actData;this.list1Data.source=t.tuijianDatas,this.list2Data.source=t.renqiDatas,this.list3Data.source=t.benfuDatas,this.lbMeiLi.textFlow=addColorTF(""+Lang.act_str186+addColor(t.senMeiLidiValue.toString(),5767068)),this.updataItem()},e.prototype.updataItem=function(){var t=this.actData.getConfigs()[1].items;this.groupItems.removeChildren();for(var e=0;e<t.length;e++){var i=t[e],n=Cfg.getItemCfg(t[e]),a=new eui.Group,o=new eui.HorizontalLayout;o.horizontalAlign="center",o.verticalAlign="middle",a.layout=o;var s=new eui.Image,r=new eui.Label;r.textColor=GFunc.getItemCount(i)>0?5767068:15733780,r.size=24,a.addChild(s),a.addChild(r),s.source=ResMgr.getItemIconMin(n.id),r.text=""+GFunc.getItemCount(i),this.groupItems.addChild(a)}},e.prototype.itemChange=function(t){t.cfg.type==ItemType.QQSSITEM&&this.updataItem()},e.prototype.updateTime=function(){this.actData&&(this.lbTime.textFlow=addColorTF(this.actData.getformatTime()))},e.prototype.onClick=function(t){switch(t.target){case this.btnSend:ActSys.ins().sendQQShSendData(this.actData.actId),showtipsSuc(Lang.act_str130);break;case this.lbLog:openWin(Act37_1LogWin,this.actData)}},e}(ActBasePanel);__reflect(ActPanel37_1.prototype,"ActPanel37_1"),window.ActPanel37_1=ActPanel37_1;var ActPanel4_1=function(t){function e(){var e=t.call(this)||this;return e.mcBtnGet=new MC,e.skinName="ActPanel4_1EUI",e.setSkinPart("itemTop1",new ActItem4_1To1),e.setSkinPart("itemTop2",new ActItem4_1To2),e.setSkinPart("itemTop3",new ActItem4_1To2),e.setSkinPart("itemTop4",new ActItem4_1To2),e.list.itemRenderer=ItemIcon,e.btnGet.redPoint.visible=!0,e.mcBtnGet.x=e.btnGet.width/2,e.mcBtnGet.y=e.btnGet.height/2,e.btnGet.addChild(e.mcBtnGet),e}return __extends(e,t),e.prototype.open=function(e){t.prototype.open.call(this,e),this.addLsn(ActSys.ins().patchSevenDayMyRank,this.updateData),this.addLsn(ActSys.ins().patchSevenDayMyRank2,this.updateData),this.addClickE(this.btnRank,this.onClick),this.addClickE(this.btnLink,this.onClick),this.addClickE(this.btnGet,this.onClick),this.addClickE(this.btnHelp,this.onClick),this.addLsn(ActSys.ins().patchActivityIsGetAwards,this.updateData),this.addLsn(ActSys.ins().patchSevenDayMyRank2,this.updateRank),this.addLsn(ShouHuNewSys.ins().patchDamonLevelUp,this.updateDabiao),this.addLsn(ShouHuNewSys.ins().patchYongbingLevelUp,this.updateDabiao),this.addLsn(ShouHuNewSys.ins().patchShenmoLevelUp,this.updateDabiao),this.addLsn(SqXySys.ins().patchShenQiUp,this.updateDabiao),this.addLsn(SqXySys.ins().patchWingUp,this.updateDabiao),this.addLsn(SqXySys.ins().patchSzUp,this.updateDabiao),this.addLsn(SqXySys.ins().patchMeilinUp,this.updateDabiao),this.addLsn(BagSys.ins().patchItemChange,this.updateDabiao),ActSys.ins().sendSevenDayMyRank2(e.id),this.updateData()},e.prototype.close=function(){t.prototype.close.call(this),this.itemTop1.close()},e.prototype.updateData=function(){this.actDataRank=ActSys.ins().getActDataById(this.actId),this.actDataDabiao=ActSys.ins().getActDataById(this.actBtnCfg.addId[0]),this.updateRank(),this.updateDabiao()},e.prototype.setImgTitle=function(){this.imgTitle.source="hddt_zycs_kfcb"+this.actBtnCfg.showday},e.prototype.updateRank=function(){this.itemTop1.data=this.actDataRank,this.itemTop2.data=this.actDataRank.getConfig(2),this.itemTop3.data=this.actDataRank.getConfig(3),this.itemTop4.data=this.actDataRank.getConfig(4);var t=this.actDataRank.myRank>0&&this.actDataRank.myRank<21?addColor(this.actDataRank.myRank,5767068):addColor(Lang.common_str17,15733780);this.lbRank.textFlow=addColorTF(""+Lang.act_str25+t),this.lbPower.text=""+Lang.act_str69+this.actDataRank.dabiao},e.prototype.updateDabiao=function(){var t=this.actDataDabiao.getCurConfig(),e=Lang.act_str71.replace("$str$",addColor(""+t.condition+Lang.common_ji,5767068));e=""+Lang.act_str70[this.actBtnCfg.showday]+e,this.lbDabiaoDec.textFlow=addColorTF(e),this.lbDabiaoValue.textFlow=addColorTF("（"+this.actDataDabiao.dabiao+"/"+t.condition+"）",this.actDataDabiao.dabiao<t.condition?15733780:5767068);Actor.ins().job;this.list.dataProvider=new eui.ArrayCollection(GFunc.getItemDataRewardByJob(t.rewards)),this.btnLink.visible=!1,this.btnGet.visible=!1,this.imgYlq.visible=!1;var i=this.actDataDabiao.getRewardStateById(t.index);i==ActRewardState.CanGet?(this.btnGet.visible=!0,this.mcBtnGet.playFile(ResMgr.getEffName("public_zycs_button01"),-1)):i==ActRewardState.NotReached?(this.btnLink.visible=!0,this.btnLink.redPoint.visible=this.actDataDabiao.canUp()):i==ActRewardState.Geted&&(this.imgYlq.visible=!0)},e.prototype.updateTime=function(){this.actDataRank&&(this.lbTime.textFlow=addColorTF(this.actDataRank.getformatTime()))},e.prototype.onClick=function(t){switch(t.currentTarget){case this.btnRank:openWin(Act4RankWin,this.actDataRank);break;case this.btnLink:var e=this.actDataRank.getConfig(1);GFunc.createTaskNavData(e.controlTarget)["goto"]();break;case this.btnGet:ActSys.ins().sendReward(this.actDataDabiao.getCurConfig().id,this.actDataDabiao.getCurConfig().index);break;case this.btnHelp:var i=this.actDataRank.getConfigs()[1].helpId;openWin(HelpWin,Cfg.getConfig(HelpInfoConfig,i).text)}},e}(ActBasePanel);__reflect(ActPanel4_1.prototype,"ActPanel4_1"),window.ActPanel4_1=ActPanel4_1;var ActPanel5_1=function(t){function e(){var e=t.call(this)||this;return e.initUI(),e}return __extends(e,t),e.prototype.initUI=function(){this.skinName="ActPanel5_1EUI",this.list.itemRenderer=ActItem5_1,this.list.dataProvider=this.listData=new eui.ArrayCollection},e.prototype.open=function(e){t.prototype.open.call(this,e),this.addClickE(this.btnSend,this.onClick),this.addLsn(ActSys.ins().patchXSFL,this.updateData),this.addLsn(ActSys.ins().patchActivityIsGetAwards,this.updateData),this.addLsn(RechargePowerSys.ins().patchXunZhangBuy,this.updateData),this.updateData()},e.prototype.updateData=function(){this.actData=ActSys.ins().getActDataById(this.actId);var t=this.actData.getItemDatas();SortUtil.sortOn(t,["status"],[SortType.up]),this.listData.replaceAll(t),this.btnSend.visible=!RechargePowerSys.ins().xunZhangData.isAct(),this.imgYjh.visible=RechargePowerSys.ins().xunZhangData.isAct()},e.prototype.updateTime=function(){this.actData&&(this.lbTime.textFlow=addColorTF(this.actData.getformatTime()))},e.prototype.onClick=function(t){switch(t.target){case this.btnSend:openWin(RechargeActSys.ins().firstRechargeData.isRecharge()?XunZhangWin:FirstRechargeBuyWin)}},e}(ActBasePanel);__reflect(ActPanel5_1.prototype,"ActPanel5_1"),window.ActPanel5_1=ActPanel5_1;var ActPanel6_1=function(t){function e(){var e=t.call(this)||this;return e.items=[],e.imgs=[],e.lastindex=0,e.boxAwards=[],e.tipsDatas=[],e.initUI(),e}return __extends(e,t),e.prototype.initUI=function(){this.skinName="ActPanel6_1EUI",this.setSkinPart("item0",new ItemBaseReward),this.setSkinPart("item1",new ItemBaseReward),this.setSkinPart("item2",new ItemBaseReward),this.setSkinPart("item3",new ItemBaseReward),this.setSkinPart("item4",new ItemBaseReward),this.setSkinPart("item5",new ItemBaseReward),this.setSkinPart("item6",new ItemBaseReward),this.setSkinPart("item7",new ItemBaseReward),this.setSkinPart("item8",new ItemBaseReward),this.setSkinPart("item9",new ItemBaseReward),this.setSkinPart("item10",new ItemBaseReward),this.setSkinPart("item11",new ItemBaseReward),this.items=[this.item0,this.item1,this.item2,this.item3,this.item4,this.item5,this.item6,this.item7,this.item8,this.item9,this.item10,this.item11],this.imgs=[this.img0,this.img1,this.img2,this.img3,this.img4,this.img5,this.img6,this.img7,this.img8,this.img9,this.img10,this.img11],this.btnWeight.textFlow=addColorTF(StrUtil.addUnderLine(Lang.act_str73),5767068),this.btnLog.textFlow=addColorTF(StrUtil.addUnderLine(Lang.act_str74),5767068),this.lhj=new LHJG,this.lhj.setTotal(this.imgs.length),this.lhj.setCircleCount(4)
},e.prototype.open=function(e){t.prototype.open.call(this,e),this.addLsn(ActSys.ins().patchRankLuckDraw,this.updateLuckDraw),this.addLsn(ActSys.ins().patchRankLuckDrawLog,this.updateLog),this.addLsn(ActSys.ins().patchActivityPanel,this.upateBoxAward),this.addLsn(ActSys.ins().patchActivityIsGetAwards,this.infoPanel),this.addLsn(LogicSys.ins().patchCurrency,this.updateYB),this.addClickE(this.btnOne,this.onClick),this.addClickE(this.btnTen,this.onClick),this.addClickE(this.btnBox,this.onClick),this.addClickE(this.btnWeight,this.onClick),this.addClickE(this.btnLog,this.onClick),this.addEvent(egret.Event.CHANGING,this.lhj,this.lhjChanging),this.addEvent(egret.Event.COMPLETE,this.lhj,this.lhjComplete),ActSys.ins().sendRankLuckDrawLog(this.actId,2),this.infoPanel(),this.actData6.isShowRp=!1,RpFun.showActSingleRp(this.actId)},e.prototype.close=function(){t.prototype.close.call(this),this.lhj.stop()},e.prototype.infoPanel=function(){this.actData6=ActSys.ins().getActDataById(this.actId),this.actData1=ActSys.ins().getActDataById(this.actBtnCfg.addId[0]);for(var t=this.actData6.getRewardPool(),e=t.length,i=0;e>i;i++)this.items[i].data=t[i],this.imgs[i].visible=!1;this.lbDec.textFlow=addColorTF(Lang.act_str72.replace("$count$",""+addColor(this.actData6.getConfig().score,5767068))),this.updatePanel(),this.updateYB()},e.prototype.updateLog=function(){this.lbLog.textFlow=addColorTF(this.actData6.getWorldDec())},e.prototype.updatePanel=function(){var t=this.actData1.getCurConfig();this.barExp.maximum=t.condition,this.barExp.value=this.actData1.score,this.btnBox.redPoint.visible=this.actData1.getRewardStateById(t.index)==ActRewardState.CanGet},e.prototype.upateBoxAward=function(t){t==this.actBtnCfg.addId[0]&&openWin(Act6RewarWin,this.boxAwards)},e.prototype.updateYB=function(t){if(!t||t.type==CurType.yb){var e=GFunc.getItemCount(CurType.yb),i=this.actData6.getConsume1();this.lbConsumeOne.textFlow=addColorTF(""+i,i>e?15733780:5767068),i=this.actData6.getConsume10(),this.lbConsumeTen.textFlow=addColorTF(""+i,i>e?15733780:5767068)}},e.prototype.updateLuckDraw=function(){this.tipsDatas.length=0;for(var t=this.actData6.getConfig().itemIds,e=0,i=this.actData6.rewards;e<i.length;e++){var n=i[e];-1!=t.indexOf(n.id)&&this.tipsDatas.push(GFunc.creatItemDataByReward(n))}1==this.actData6.rewards.length?this.lhj.start(this.lastindex,this.actData6.rewardIndex,3e3):(openWin(Act6LuckDrawWin,this.actId),this.showJiPingItem())},e.prototype.showJiPingItem=function(){if(this.tipsDatas.length>0){var t=this.tipsDatas[0];openWin(XunBaoJiPingItemTipsWin,t,this.showJiPingItem,this,XunBaoJiPingItemTipsWin.ACT_6_1),this.tipsDatas.splice(0,1)}},e.prototype.lhjChanging=function(t){this.lhj.isEnd()||(this.imgs[this.lastindex].visible=!1,this.lastindex=t.data-1,this.imgs[this.lastindex].visible=!0)},e.prototype.lhjComplete=function(t){var e=this;this.tipsDatas.length>0?this.showJiPingItem():Timer.ins()["do"](500,0,1,function(){var t=GFunc.creatItemDataByReward(e.actData6.rewards[0]),i=new eui.Image(ResMgr.getItemIcon(t.cfg.getIcon(),IconType.IT_80x80));i.x=360,i.y=300,e.addChild(i),GFunc.flyToBag(e.actData6.rewards[0].id,i),e.removeChild(i)},this)},e.prototype.getIndex=function(t){var e=this.lastindex-t;return e=0>e?e+this.items.length:e},e.prototype.updateTime=function(){this.actData6&&(this.lbTime.textFlow=addColorTF(Lang.act_str29+this.actData6.getformatTime()))},e.prototype.onClick=function(t){switch(t.target){case this.btnLog:openWin(Act6LogWin,this.actId);break;case this.btnOne:if(this.actData6.getActOpenState()!=ActOpenState.Open)return void showtipsFail(Lang.act_str7);this.lhj.isEnd()&&GFunc.checkCurrency(CurType.yb,this.actData6.getConsume1())&&ActSys.ins().sendRankLuckDraw(this.actId,1);break;case this.btnTen:if(this.actData6.getActOpenState()!=ActOpenState.Open)return void showtipsFail(Lang.act_str7);this.lhj.isEnd()&&GFunc.checkCurrency(CurType.yb,this.actData6.getConsume10())&&ActSys.ins().sendRankLuckDraw(this.actId,10);break;case this.btnWeight:openWin(Act6WeightWin,this.actData6);break;case this.btnBox:var e=this.actData1.getCurConfig();this.actData1.getRewardStateById(e.index)==ActRewardState.CanGet?(this.boxAwards=e.rewards,ActSys.ins().sendReward(e.id,e.index)):openWin(Act6ScoreWin,this.actData1)}},e}(ActBasePanel);__reflect(ActPanel6_1.prototype,"ActPanel6_1"),window.ActPanel6_1=ActPanel6_1;var ActPanel8_1=function(t){function e(){var e=t.call(this)||this;return e.skinName="ActPanel8_1EUI",e.setSkinPart("itemTop1",new ActItem8_1To1),e.setSkinPart("itemTop2",new ActItem8_1To2),e.setSkinPart("itemTop3",new ActItem8_1To2),e.setSkinPart("itemTop4",new ActItem8_1To2),e}return __extends(e,t),e.prototype.open=function(e){t.prototype.open.call(this,e),this.addClickE(this.linkBtn,this.onClick),this.addClickE(this.seeRankBtn,this.onClick),this.addLsn(ActSys.ins().patchActivityIsGetAwards,this.updateData),this.addLsn(ActSys.ins().patchConsuRecord,this.updateData),this.addLsn(ActSys.ins().patchXfRankData,this.updateData),ActSys.ins().sendXfRankData(this.actId),this.updateData()},e.prototype.updateData=function(){this.actData=ActSys.ins().getActDataById(this.actId),this.lbMyRank.textFlow=addColorTF(""+Lang.act_str25+(this.actData.myRank>0?this.actData.myRank:Lang.common_str17)),this.lbMyXf.textFlow=addColorTF(""+this.actData.myLjxf),this.updateRankData()},e.prototype.updateRankData=function(){this.itemTop1.data=this.actData,this.itemTop2.data=this.actData.getConfig(2),this.itemTop3.data=this.actData.getConfig(3),this.itemTop4.data=this.actData.getConfig(4)},e.prototype.updateTime=function(){this.lbTime.textFlow=addColorTF(this.actData.getformatTime())},e.prototype.onClick=function(t){switch(t.target){case this.linkBtn:openWin(RechargeWin);break;case this.seeRankBtn:openWin(Act8RankWin,this.actData)}},e}(ActBasePanel);__reflect(ActPanel8_1.prototype,"ActPanel8_1"),window.ActPanel8_1=ActPanel8_1;var ActPanel9_1=function(t){function e(){var e=t.call(this)||this;return e.skinName="ActPanel9_1EUI",e.list.itemRenderer=ItemBaseReward,e.list.dataProvider=e.listData=new eui.ArrayCollection,e.listZhe.itemRenderer=ActItem9_1,e.listZhe.dataProvider=e.listZheData=new eui.ArrayCollection,e.imgYuanjia.filters=DisUtil.grayFilter(),e}return __extends(e,t),e.prototype.open=function(e){t.prototype.open.call(this,e),this.addClickE(this.btnSend,this.onClick),this.addLsn(ActSys.ins().patchActivityIsGetAwards,this.updateData),this.updateData(),this.actData.isShowRp=!1,RpFun.showActSingleRp(this.actId)},e.prototype.updateData=function(){this.actData=ActSys.ins().getActDataById(this.actId),this.imgName.source="hddt_zycs_cblb"+this.actBtnCfg.showday,this.lbBuyCount.textFlow=addColorTF(this.actData.getBuyCountDec()),this.lbVipCount.textFlow=addColorTF(this.actData.getVipCountDec()),this.listData.source=this.actData.getConfig().rewards,this.listZheData.source=this.actData.getActDataZhe(),this.barExp.maximum=this.actData.getBarMax(),this.barExp.value=this.getBarValue(this.actData.buyCount,this.actData.getConfig()),this.lbDec.textFlow=addColorTF(this.actData.getDec()),this.lbYuanJia.text=""+this.actData.getConfig().money;var t=Math.ceil(this.actData.getConfig().money*this.actData.getCurZhe()/10);this.lbXianJia.textFlow=addColorTF(""+t,GFunc.isCurrency(CurType.yb,t)?15718797:15733780)},e.prototype.getBarValue=function(t,e){for(var i=this.actData.getBarMax(),n=this.actData.getBarMax()/(e.buycount.length-1),a=0,o=0;o<e.buycount.length;o++){var s=e.buycount[o][0];if(s>=t){i=(t-a)/(s-a)*n+n*Math.max(o-1,0);break}a=s}return Math.floor(i)},e.prototype.updateTime=function(){this.actData&&(this.lbTime.textFlow=addColorTF(this.actData.getformatTime()))},e.prototype.onClick=function(t){switch(t.target){case this.btnSend:if(this.actData.buyCount>=VipSys.ins().getCurSVipConfig().cbthcount)return void(Actor.ins().sVipLv>=Cfg.getSVipMaxLv()?showtipsFail(Lang.act_str83):openWin(SVipTipsWin,276));var e=Math.ceil(this.actData.getConfig().money*this.actData.getCurZhe()/10);GFunc.checkCurrency(CurType.yb,e)&&ActSys.ins().sendReward(this.actId,0)}},e}(ActBasePanel);__reflect(ActPanel9_1.prototype,"ActPanel9_1"),window.ActPanel9_1=ActPanel9_1;var HelpWin=function(t){function e(){var e=t.call(this)||this;return e.skinName="HelpWinEUI",e.layer=LayerMgr.Popup,e}return __extends(e,t),e.prototype.open=function(e,i){void 0===e&&(e=""),void 0===i&&(i=!1),t.prototype.open.call(this),this.textInfo.textFlow=StrUtil.toTF(e),this.textInfo.textAlign=i?egret.HorizontalAlign.CENTER:egret.HorizontalAlign.LEFT},e}(BaseWinSingle);__reflect(HelpWin.prototype,"HelpWin"),window.HelpWin=HelpWin;var LoginAwardPanelItem=function(t){function e(){var e=t.call(this)||this;return e.skinName="LoginAwardPanelItemEUI",e}return __extends(e,t),e.prototype.dataChanged=function(){var t=this.data;t&&(this.imgLingqu.visible=t.hasGetAward,this.imgIcon.source=ResMgr.getItemIcon(Cfg.getItemCfg(t.config.itemId).getIcon(),IconType.IT_80x80),this.dayStr=Lang.replaceEnum("第%s天",t.day),this.updateRedPoint())},e.prototype.updateRedPoint=function(){var t=this.data;t&&(this.redPoint.visible=RpSys.ins().getData(ExtCom,LoginAwardWin,LoginAwardPanel,t.id))},e.prototype.setSelectStatus=function(t){this.imgSelect.visible=t},e}(BaseItemRender);__reflect(LoginAwardPanelItem.prototype,"LoginAwardPanelItem"),window.LoginAwardPanelItem=LoginAwardPanelItem;var LoginAwardWin=function(t){function e(){var e=t.call(this)||this;return e.redPointHead=[ExtCom],e.winType=WinType.MainWin,e}return __extends(e,t),e.panelNames=[LoginAwardPanel],e}(BaseWinAutoTab);__reflect(LoginAwardWin.prototype,"LoginAwardWin"),window.LoginAwardWin=LoginAwardWin;var SevenDayLoginTipsWin=function(t){function e(){return t.call(this)||this}return __extends(e,t),e.prototype.initUI=function(){this.skinName="SevenDayLoginTipsWinEUI",t.prototype.initUI.call(this),this.mcAward=new MC,this.mcAward.x=170,this.mcAward.y=250,this.mcAward.scaleX=this.mcAward.scaleY=.8,this.mcAward.playFile(getEffName("szty"),-1),this.mcAward.touchEnabled=!1,this.group.addChild(this.mcAward);var e=new XY;e.x=-8,e.y=32;var i=new XY;i.x=-8,i.y=74,GFunc.move(this.imgIcon,e,i,1500)},e.prototype.open=function(){t.prototype.open.call(this),this.addClickE(this.imgBg,this.onClick),this.addClickE(this.imgIcon,this.onClick),Timer.ins()["do"](5e3,1e3,1,this.countDown,this)},e.prototype.countDown=function(){closeWin(e)},e.prototype.close=function(){t.prototype.close.call(this),egret.Tween.removeTweens(this.imgIcon)},e.prototype.onClick=function(t){openWin(LoginAwardWin),closeWin(e)},e}(BaseWinSingle);__reflect(SevenDayLoginTipsWin.prototype,"SevenDayLoginTipsWin"),window.SevenDayLoginTipsWin=SevenDayLoginTipsWin;var SevenDayRank10Item=function(t){function e(){var e=t.call(this)||this;return e.setSkinName(),e.list.itemRenderer=ItemBaseRewardActivity,e}return __extends(e,t),e.prototype.setSkinName=function(){this.skinName="SevenDayRank10ItemEUI"},e.prototype.dataChanged=function(){if(this.list.dataProvider=this.listArr=new eui.ArrayCollection,this.data&&this.data.config){var t=this.data,e=t.config;this.rankTxt.text=t.rankTxt,this.listArr.source=e.rewards}},e}(BaseItemRender);__reflect(SevenDayRank10Item.prototype,"SevenDayRank10Item"),window.SevenDayRank10Item=SevenDayRank10Item;var SevenDayRank1Item=function(t){function e(){var e=t.call(this)||this;return e.setSkinName(),e.list.itemRenderer=ItemBaseRewardActivity,e.entityRole=GFunc.createEntityUI(),e.entityRole.x=175,e.entityRole.y=339,e.entityRole.scaleX=e.entityRole.scaleY=.65,e.addChild(e.entityRole),e.mcTitle=new MC,e.addChild(e.mcTitle),e.mcTitle.x=175,e.mcTitle.y=67,e}return __extends(e,t),e.prototype.setSkinName=function(){this.skinName="SevenDayRank1ItemEUi"},e.prototype.dataChanged=function(){if(t.prototype.dataChanged.call(this),this.list.dataProvider=this.listArr=new eui.ArrayCollection,this.data&&this.data.config){var e=this.data,i=e.config;this.lbName.text=e.playerName,this.lbPower.text=e.rankName+":"+e.rankValue,this.listArr.source=i.rewards,this.updateEntityRole()}},e.prototype.updateEntityRole=function(){var t=GConst.rankType[Actor.ins().serverOpenDay];RankSys.ins().getRankData(t).praise},e}(BaseItemRender);__reflect(SevenDayRank1Item.prototype,"SevenDayRank1Item"),window.SevenDayRank1Item=SevenDayRank1Item;var SevenDayRank3Item=function(t){function e(){var e=t.call(this)||this;return e.setSkinName(),e.list.itemRenderer=ItemBaseRewardActivity,e}return __extends(e,t),e.prototype.setSkinName=function(){this.skinName="SevenDayRank3ItemEUI"},e.prototype.dataChanged=function(){if(this.list.dataProvider=this.listArr=new eui.ArrayCollection,this.data&&this.data.config){var t=this.data,e=t.config;this.lbName.text=t.playerName,this.lbPower.text=t.rankName+":"+t.rankValue,this.listArr.source=e.rewards}},e}(BaseItemRender);__reflect(SevenDayRank3Item.prototype,"SevenDayRank3Item"),window.SevenDayRank3Item=SevenDayRank3Item;var SevenDayRankInfoItem=function(t){function e(){var e=t.call(this)||this;return e.skinName="SevenDayRankInfoItemEUI",e}return __extends(e,t),e.prototype.dataChanged=function(){var t=this.data;t.rank<4?(this.rankImg.source="jjc_zycs_no"+t.rank,this.rankTxt.text=""):(this.rankImg.source="",this.rankTxt.text=""+t.rank),this.nameTxt.text=""+t.playerName;var e=RankSys.ins().getRankNumber(t,SevenDayRankInfoPanel.RankType);this.countTxt.text=""+e},e}(BaseItemRender);__reflect(SevenDayRankInfoItem.prototype,"SevenDayRankInfoItem"),window.SevenDayRankInfoItem=SevenDayRankInfoItem;var GuideData=function(){function t(){this.id=0,this.step=1,this.endstep=1,this.content=[],this.steps=[],this.params=[],this.wrongCount=0,this.maxWrongCount=2}return t.prototype.isNewGuide=function(){return 1==this.step},t.prototype.isMoreLast=function(){return this.step>=this.endstep},t.prototype.getText=function(){return this.content[this.step-1]?this.content[this.step-1].content:"引导"+this.id+"~"+this.step+",配置空缺"},t.prototype.getDir=function(){return this.content[this.step-1]?this.content[this.step-1].dir:1},t.prototype.getSound=function(){return this.content[this.step-1]?this.content[this.step-1].sound:""},t.prototype.getSkintype=function(){return this.content[this.step-1]?this.content[this.step-1].skintype:0},Object.defineProperty(t.prototype,"type",{get:function(){for(var t=GuideType.Week,e=0;e<this.content.length;e++){var i=this.content[e];e+1==this.step&&void 0!=i.type&&(t=i.type)}return t},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"time",{get:function(){return this.content[this.step-1]?this.content[this.step-1].time:0},enumerable:!0,configurable:!0}),t}();__reflect(GuideData.prototype,"GuideData");var GuideContentData=function(){function t(){this.skintype=0,this.sound=""}return t}();__reflect(GuideContentData.prototype,"GuideContentData");var GuiderStep=function(){function t(){}return t}();__reflect(GuiderStep.prototype,"GuiderStep");var GuiderStepType;!function(t){t[t.HM=1]="HM",t[t.JS=2]="JS",t[t.WC=3]="WC"}(GuiderStepType||(GuiderStepType={}));var SevenDayRankInfoWin=function(t){function e(){var e=t.call(this)||this;return e.winType=WinType.OverlayWin,e}return __extends(e,t),e.prototype.initUI=function(){t.prototype.initUI.call(this),t.prototype.addBg.call(this)},e.panelNames=[SevenDayRankInfoPanel],e}(BaseWinAutoTab);__reflect(SevenDayRankInfoWin.prototype,"SevenDayRankInfoWin"),window.SevenDayRankInfoWin=SevenDayRankInfoWin;var SevenDayRankItem=function(t){function e(){var e=t.call(this)||this;return e.setSkinName(),e.rewardBtn.name="SevenDayRankItem.rewardBtn",e.list.itemRenderer=ItemBaseRewardActivity,e.rewardedTip.visible=!1,e}return __extends(e,t),e.prototype.setSkinName=function(){this.skinName="SevenDayRankItemEUI"},e.prototype.dataChanged=function(){if(this.list.dataProvider=this.listArr=new eui.ArrayCollection,this.data&&this.data.config){var t=this.data,e=t.config;this.rankTxt.text=""+t.rankValue,this.rankNametxt.text=t.rankName,t.status==ActRewardState.Geted?(this.rewardBtn.visible=!1,this.rewardedTip.visible=!0):(this.rewardedTip.visible=!1,t.actState==ActOpenState.End?this.rewardBtn.visible=!1:t.actState==ActOpenState.Open?(this.rewardBtn.visible=!0,t.status==ActRewardState.CanGet?(this.rewardBtn.enabled=!0,this.rewardBtn.icon=""):(this.rewardBtn.enabled=!1,this.rewardBtn.icon="")):t.actState==ActOpenState.Unenabled&&(this.rewardBtn.visible=!1)),this.listArr.source=e.rewards}},e}(BaseItemRender);__reflect(SevenDayRankItem.prototype,"SevenDayRankItem"),window.SevenDayRankItem=SevenDayRankItem;var SevenDayRankItemData=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.rankTxt="",e.playerName="",e.rankName="",e.rankValue=0,e.actState=ActOpenState.Unenabled,e.config=null,e}return __extends(e,t),e}(ActDataItem);__reflect(SevenDayRankItemData.prototype,"SevenDayRankItemData");var ProgressBarEff11=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return __extends(e,t),e.prototype.iniUI=function(){this.bgimg=new eui.Image,this.bgimg.x=0,this.bgimg.y=13,this.bgimg.source=this.getBgImg(),this.groupDonw.addChild(this.bgimg);var t=new MC;t.mask=this.shape,this.groupDonw.addChild(this.shape),t.playFile(getEffName(this.getBgmcRes()),-1),t.x=226,t.y=29,this.bgmc=t,this.groupDonw.addChild(this.bgmc),this.objWidth=438},e.prototype.iniShape=function(){this.shape=new eui.Image,this.shape.source=this.getMaskImg(),this.shape.x=7,this.shape.y=21,this.shape.width=0,this.shape.fillMode="repeat"},e.prototype.iniShapebg=function(){},e.prototype.updasteValueText=function(){this.lbvalue.text=""},e.prototype.updateXiaoWeiBa=function(){},e.prototype.getMaskImg=function(){return"shengling_zycs_jd3"},e.prototype.getBgImg=function(){return"shengling_zycs_jd1"},e.prototype.getBgmcRes=function(){return"sl_zycs_yjjd"},e.prototype.getXianmcRes=function(){return""},e.prototype.getBkRes=function(){return""},e}(ProgressBarEff1);__reflect(ProgressBarEff11.prototype,"ProgressBarEff11");var ProgressBarEff2=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return __extends(e,t),e.prototype.getBgmcRes=function(){return"sdjdt"},e.prototype.getXianmcRes=function(){return"sdjdtw"},e.prototype.getBkRes=function(){return"sdbk"},e}(ProgressBarEff1);__reflect(ProgressBarEff2.prototype,"ProgressBarEff2");var BagSys=function(t){function e(){var e=t.call(this)||this;e.bagNum=0,e.bagModel=[[],[],[]],e.bagModelDic={},e.equipDatas=[],e.shengWuModel=new ShengWuModelNew,e.heChengDatas=[],e.fenjieDatas=[],e.sysId=PackId.Bag,e.reg(1,e.doBagData),e.reg(2,e.doValChange),e.reg(3,e.doDeleteItem),e.reg(4,e.doAddItem),e.reg(5,e.doUpDateItem),e.reg(6,e.doUserItemBack),e.reg(7,e.patchPropFit),e.reg(8,e.patchUseGoodBox),e.reg(20,e.patchShengWuInfo),e.reg(21,e.patchShengWuAct),e.reg(22,e.patchShengWuFragmentAct),e.reg(30,e.patchFenJie);for(var i=0;i<EquipPos.MAX;i++)e.equipDatas[i]=new EquipsData,e.equipDatas[i].iniData(i);var n=Cfg.getConfigs(HeChengViewConfig,CondType.NONE);for(var a in n){var o=n[a],s=new HeChengData;s.tabName=Lang.bag_str7;for(var r in o){var u=o[r],h=new HeChengSubData;h.heChengViewConfig=u,s.heChengSubDatas.push(h)}e.heChengDatas.push(s)}var l=Cfg.getConfigs(FenJieViewConfig,CondType.NONE);for(var a in l){var o=l[a],p=new FenJieData;p.tabName=Lang.bag_str8;for(var r in o){var u=o[r],h=new FenJieSubData;h.fenJieViewConfig=u,p.fenJieSubDatas.push(h)}e.fenjieDatas.push(p)}return e}return __extends(e,t),e.ins=function(){return t.getIns.call(this,e)},e.prototype.onSocketClose=function(){this.bagModelDic={}},e.prototype.patchPropFit=function(t){var e=t.readInt();return e},e.prototype.sendPropFit=function(t,e){var i=this.getBytes(7);i.writeInt(t),i.writeUnsignedInt(e),this.send(i)},e.prototype.sendAddBagGrid=function(t){var e=this.getBytes(2);e.writeInt(t),this.send(e)},e.prototype.sendUseItem=function(t,e,i){void 0===e&&(e=1),void 0===i&&(i=0);var n=this.getBytes(6);return n.writeInt(t),n.writeInt(e),n.writeByte(i+1),this.send(n),!1},e.prototype.doUserItemBack=function(t){var e=t.readByte();0==e&&this.patchUseItemSuccess(),2!=e&&(showtipsFail(Lang.bag_str1[e]),7==e&&openWin(GuildNavWin))},e.prototype.patchUseGoodBox=function(t){for(var e=t.readInt(),i=[],n=0;e>n;n++){var a=new ItemDataReward;a.parser(t),i.push(a)}openWin(GoldBoxTipsWin,i)},e.prototype.doBagData=function(t){var i=t.readByte(),n=t.readByte();if(0==i&&this.bagModel[n]&&(this.bagModel[n]=[]),n==e.FUWEN)return void FuwenSys.ins().doBagData(t);if(n==e.JINZUAN)return void RechargeActSys.ins().doBagData(t);if(n!=e.MOUNT){if(n==e.XUNBAO)return void XunBaoSys.ins().doBagData(t);if(n==e.FOOT)return void FootSys.ins().doBagData(t);for(var a,o=t.readInt(),s=0;o>s;s++){a=new ItemData,a.parser(t),this.bagModel[n].push(a);var r=this.bagModelDic[a.id]=this.bagModelDic[a.id]||[];r.push(a)}this.showTiHuanEquip(),n==e.EQUIP&&(this.patchBagVolChange(),RpFun.showDaZaoEquipRedPoint(),RpFun.showForgeAddYuanShiRedPoint())}},e.prototype.showTiHuanEquip=function(){if(GFunc.isBenFu())for(var t=this.getBetterEquips(),e=0,i=t;e<i.length;e++){var n=i[e];this.isShowBetterEquip(n)&&openWin(TipsWin).addNewEquipTips(n)}},e.prototype.patchBagVolChange=function(){},e.prototype.doValChange=function(t){this.bagNum=t.readInt(),this.patchBagVolChange()},e.prototype.doDeleteItem=function(t){var i=t.readByte();if(i==e.FUWEN)return void FuwenSys.ins().doDeleteItem(t);if(i==e.JINZUAN)return void RechargeActSys.ins().patchDeleteItem(t);if(i!=e.MOUNT){if(i==e.XUNBAO)return void XunBaoSys.ins().doDeleteItem(t);if(i==e.FOOT)return void FootSys.ins().patchDeleteItem(t);for(var n,a=t.readDouble(),o=this.bagModel[i].length-1;o>=0;o--)if(this.bagModel[i][o].handle==a){n=this.bagModel[i][o],n.count=0,this.bagModel[i].splice(o,1);var s=this.bagModelDic[n.id];if(s){var r=s.indexOf(n);r>-1&&s.splice(r,1)}break}this.patchBagVolChange(),n&&(this.patchItemChange(n),RpFun.updateItem(PCode.DEL,n)),i==e.EQUIP&&(this.patchEquiChange(n),openWin(TipsWin).removeNewEquipTips(n))}},e.prototype.doAddItem=function(t){var i=t.readByte();if(i==e.FUWEN)return void FuwenSys.ins().doAddItem(t);if(i==e.JINZUAN)return void RechargeActSys.ins().patchAddItem(t);if(i!=e.MOUNT){if(i==e.XUNBAO)return void XunBaoSys.ins().patchAddItem(t);if(i==e.FOOT)return void FootSys.ins().patchAddItem(t);var n=new ItemData;n.parser(t);var a=t.readByte(),o=t.readByte();this.bagModel[i].push(n);var s=this.bagModelDic[n.id]=this.bagModelDic[n.id]||[];if(s.push(n),this.patchBagVolChange(),-1!=GConst.SevenBrothersItemTypes.indexOf(n.cfg.type)&&GFunc.sevenBrothersAutoAct(n),-1!=GConst.SevenBrothersItemTypes.indexOf(n.cfg.type)&&GFunc.sevenBrothersAutoAct2(n),-1!=GConst.moZhenItemTypes.indexOf(n.cfg.type)&&GFunc.moZhenAutoAct(n),1==n.cfg.showBoxOpen&&openWin(TipsWin).addNewEquipTips(n),n.cfg.type==ItemType.Shengwu&&openWin(TipsWin).addNewEquipTips(n),this.isShowBetterEquip(n)){var r=n.cfg.subType;this.getEquipByIndex(r).power<n.power&&(n.equipPos=r,openWin(TipsWin).addNewEquipTips(n))}if(i==e.EQUIP&&this.patchEquiChange(n),a)if(n.cfg.rareLevel>0)openWin(TipsWin).showGoodEquipTip(n);else if(i!=e.TREASUREHUNT){var u=GConst.PZColor[n.cfg.quality];TipsSys.ins().showtipsNew(n.cfg.getName()+" +"+n.count,u,o)}RpFun.updateItem(PCode.ADD,n),this.patchItemChange(n)}},e.prototype.isShowBetterEquip=function(t){return TaskSys.ins().taskId>30&&t.cfg.type==ItemType.equip&&Actor.ins().level>=t.cfg.level&&Actor.ins().zsId>=t.cfg.zslevel},e.prototype.doUpDateItem=function(t){var i=t.readByte();if(i==e.XUNBAO)return void XunBaoSys.ins().patchUpDateItem(t);if(i==e.JINZUAN)return void RechargeActSys.ins().patchUpDateItem(t);if(i==e.FOOT)return void FootSys.ins().patchUpDateItem(t);for(var n,a=t.readDouble(),o=t.readInt(),s=t.readByte(),r=t.readByte(),u=0,h=0;h<this.bagModel[i].length;h++)if(n=this.bagModel[i][h],n.handle==a){u=o-n.count,n.count=o;break}if(n){if(s&&u>0){var l=GConst.PZColor[n.cfg.quality];TipsSys.ins().showtipsNew(n.cfg.getName()+" +"+u,l,r)}RpFun.updateItem(u>0?PCode.ADD:PCode.DEL,n)}else console.log("处理物品更新 3-5道具不存在 handle:"+a);this.patchItemChange(n)},e.prototype.patchItemChange=function(t){return t},e.prototype.patchEquiChange=function(t){return RpFun.shoeEquipItemRedPoint(t),RpFun.showDaZaoEquipRedPoint(),t},e.prototype.patchUseItemSuccess=function(){},e.prototype.sendBuyUse=function(t){var e=this.getBytes(9);e.writeShort(t),this.send(e)},e.prototype.sendBagTo=function(t,e){var i=this.getBytes(10);i.writeByte(t),i.writeShort(e.length);for(var n=0;n<e.length;n++)i.writeDouble(e[n]);this.send(i)},e.prototype.patchShengWuInfo=function(t){this.shengWuModel.parserInfo(t)},e.prototype.sendShengWuAct=function(t){var e=this.getBytes(21);e.writeByte(t),this.send(e)},e.prototype.patchShengWuAct=function(t){var e=this.shengWuModel.parserShengWuAct(t);openWin(ShengWuActTipsWin,e),RpFun.showShengWuNewRedPoint(PCode.DEL)},e.prototype.sendShengWuFragmentAct=function(t,e){var i=this.getBytes(22);i.writeByte(t),i.writeByte(e),this.send(i)},e.prototype.patchShengWuFragmentAct=function(t){this.shengWuModel.parserFragmentAct(t),RpFun.showShengWuNewRedPoint(PCode.UPD)},e.prototype.patchFenJie=function(t){for(var e=t.readShort(),i=[],n=0;e>n;n++){var a=new ItemDataReward;a.parser4(t),i.push(a)}openWin(FenJieSuccessTipsWin,i)},e.prototype.sendFenJie=function(t,e){var i=this.getBytes(30);i.writeInt(t),i.writeUnsignedInt(e),this.send(i)},e.prototype.getItemById=function(t){var e=this.bagModelDic[t];return e&&e.length?e[0]:null},e.prototype.getItemByType=function(t){for(var i=this.bagModel[e.OTHTER],n=[],a=0,o=i;a<o.length;a++){var s=o[a];s.cfg.type==t&&n.push(s)}return n},e.prototype.getItemByTypeSubType=function(t,i){for(var n=this.bagModel[e.OTHTER],a=[],o=0,s=n;o<s.length;o++){var r=s[o];r.cfg.type==t&&r.cfg.subType==i&&a.push(r)}return a},e.prototype.getItemByTypeSubTypeRank=function(t,i,n){for(var a=this.bagModel[e.OTHTER],o=[],s=0,r=a;s<r.length;s++){var u=r[s],h=u.cfg;h.type==t&&h.subType==i&&h.rank<=n&&o.push(u)}return o},e.prototype.hasItemByRank=function(t,i,n,a){for(var o=!1,s=this.bagModel[e.OTHTER],r=0,u=s;r<u.length;r++){var h=u[r],l=h.cfg;if(l.type==t&&l.subType==i&&l.rank>=n&&l.rank<=a){o=!0;break}}return o},e.prototype.getItemsById=function(t){for(var i=this.bagModel[e.OTHTER],n=[],a=0,o=i;a<o.length;a++){var s=o[a];t.indexOf(s.id)>=0&&n.push(s)}return n},e.prototype.isHaveItemsById=function(t){for(var i=this.bagModel[e.OTHTER],n=0,a=i;n<a.length;n++){var o=a[n];if(t.indexOf(o.id)>=0)return!0}return!1},e.prototype.getItemByTypeAndId=function(t,e){for(var i=this.bagModel[t],n=0,a=i;n<a.length;n++){var o=a[n];if(o.cfg.id==e)return o}return null},e.prototype.getItemCount=function(t){var e=0,i=this.bagModelDic[t];if(i&&i.length)for(var n=0,a=i;n<a.length;n++){var o=a[n];e+=o.count}return e},e.prototype.getItemNumByType=function(t){void 0===t&&(t=1);var e=this.bagModel[t];return e.length},e.prototype.getSurplusCount=function(){var t=this.bagNum-this.getItemNumByType();return 0>t?0:t},e.prototype.getBagAddCount=function(){var t=0;return t+=Cfg.getConfig(BagVipConfig,Actor.ins().sVipLv).grid,t+=Cfg.getConfig(BagDataConfig,1).baseSize},e.prototype.getBagSortQualityEquips=function(t){void 0===t&&(t=QualityType.Orange);for(var i=this.bagModel[e.EQUIP],n=[],a=0;a<i.length;a++)i[a].cfg.quality<t||(n[n.length]=i[a]);return n},e.prototype.getBagSortEquips=function(){return SortUtil.sortOn(this.bagModel[e.EQUIP],["quality","power"],[SortType.down,SortType.down]),this.bagModel[e.EQUIP]},e.prototype.getBagSortEquipsSort1=function(){return SortUtil.sortOn(this.bagModel[e.EQUIP],["power"],[SortType.down]),this.bagModel[e.EQUIP]},e.prototype.getBagSortEquipsSort2=function(){return SortUtil.sortOn(this.bagModel[e.EQUIP],["power"],[SortType.up]),this.bagModel[e.EQUIP]},e.prototype.getBagEuips=function(){return this.bagModel[e.EQUIP]},e.prototype.getBagEuipsByQuality=function(t){for(var i=[],n=this.bagModel[e.EQUIP],a=0;a<n.length;a++){var o=n[a];o.cfg.quality<=t&&i.push(o)}return i},e.prototype.getBagGoods=function(){return this.bagModel[e.OTHTER]},e.prototype.getOutEquips=function(t,e,i){var n=this.getBagSortEquipsSort2(),a=[];if(this.bestList||(this.bestList=[]),i)for(var o=this.equipDatas.length,s=0;o>s;s++){var r=this.getEquipByIndex(s);r.hasEquipOn()&&(this.bestList[s]=r)}for(var u=n.length-1;u>=0&&!(a.length>=t);u--){var h=n[u],l=h.cfg.subType,r=this.bestList[l];if(r){var p=r;if(p.power>=h.power){if(3==e){if(h.cfg.quality!=e)continue}else if(h.cfg.quality>e)continue;p instanceof EquipsData?a.push(h):(this.bestList[l]=p,a.push(h))}else this.bestList[l]=h}else this.bestList[l]=h}return this.bestList.length=0,a},e.prototype.checkBagVolumn=function(t){return void 0===t&&(t=GConst.Gb_Bag_Length),this.getSurplusCount()<t?(openWin(RongLianTipsWin),!1):!0},e.prototype.bagSatisfy=function(t){if(void 0===t&&(t=GConst.Gb_Bag_Length),this.getSurplusCount()<t){var e=new PopupData;return e.desc=Lang.bag_str2.replace("$count$",t.toString()),e.setFunction(this,function(){openWin(BagWin,BagWin.getTabIndexbyPanel(RongLianEquipPanel))}),openWin(CommonTipsWin,e),!1}return!0},e.prototype.getOtherItemByType=function(t){var i=this.bagModel[e.OTHTER],n=[];for(var a in i)i[a].cfg.type==t&&n.push(i[a]);return n},e.prototype.getEquipsByQuality=function(t,i){void 0===i&&(i=1);for(var n=this.bagModel[e.EQUIP],a=[],o=n.length-1;o>=0;o--){var s=n[o].cfg.quality;0==i&&t>s?a.push(n[o]):1==i&&s==t?a.push(n[o]):2==i&&s>t&&a.push(n[o])}return a},e.prototype.getZuiHaoEquipId=function(){for(var t=[],e=[],i=this.getBagSortEquipsSort1(),n=0,a=i;n<a.length;n++){var o=a[n];o.cfg.type==ItemType.equip&&(Actor.ins().level<o.cfg.level||Actor.ins().zsId<o.cfg.zslevel||this.getEquipByIndex(o.cfg.subType).power>=o.power||-1==e.indexOf(o.cfg.subType)&&(t.push(o.id),e.push(o.cfg.subType)))}return t},e.prototype.getEquipBySubType=function(t){for(var e=[],i=this.getBagSortEquipsSort1(),n=0,a=i;n<a.length;n++){var o=a[n];o.cfg.type==ItemType.equip&&(Actor.ins().level<o.cfg.level||Actor.ins().zsId<o.cfg.zslevel||t==o.cfg.subType&&e.push(o))}return e},e.prototype.getBetterEquips=function(){for(var t=this.bagModel[e.EQUIP],i=[],n=[],a=(Actor.ins().attrData,0);a<EquipPos.MAX;a++){var o=this.getEquipByIndex(a);n[a]=o}for(var s=new ItemData,r=t.length-1;r>=0;r--){var u=t[r];if(!(Actor.ins().level<u.cfg.level)){var h=u.cfg.subType,l=n[h];u.equipPos=h,l||(l=s);var p=l;u.power>p.power&&(n[h]=u)}}for(var c=0,d=n;c<d.length;c++){var u=d[c],g=n.indexOf(u);u&&u.power>this.getEquipByIndex(g).power&&i.push(u)}return i},e.prototype.getBagEquipByLevelSort=function(t){var i=[];if(this.bagModel[e.EQUIP]){var n=this.bagModel[e.EQUIP],a=null,o=null;for(var s in n)a=n[s],o=Cfg.getItemCfg(a.id),o.quality==t&&ItemType.isEquip(o.type)&&i.push(a)}return i},e.prototype.getBestEquipByPos=function(t,e){for(var i=this.getBagSortEquips(),n=0,a=i;n<a.length;n++){var o=a[n];if(o.cfg.subType==e&&Actor.ins().level>=o.cfg.level)return o}return null},e.prototype.hasBetterEquip=function(t){for(var e=this.getBagEuips(),i=0,n=e;i<n.length;i++){var a=n[i];if(!ItemType.isGodEquip(a.cfg.type)&&a.cfg.subType==t.cfg.subType&&Actor.ins().level>=a.cfg.level&&Actor.ins().zsId>=a.cfg.zslevel&&a.power>t.power)return!0}return!1},e.prototype.hasEquip=function(t){t=GFunc.getEquipTypeByPos(t);for(var i=this.bagModel[e.EQUIP],n=0,a=i;n<a.length;n++){var o=a[n];if(!ItemType.isGodEquip(o.cfg.type)&&!(Actor.ins().level<o.cfg.level||Actor.ins().zsId<o.cfg.zslevel||t!=o.cfg.subType))return!0}return!1},e.prototype.getBagGoodsByHandle=function(t,e){for(var i=this.bagModel[t],n=0;n<i.length;n++)if(i[n].handle==e)return i[n];return null},e.prototype.sendSmeltEquip=function(t,e){var i=EquipSys.ins().getBytes(2);i.writeInt(e);var n=i.position;i.position+=4;for(var a=0,o=0;o<t.length;o++)null!=t[o]&&(i.writeDouble(t[o].handle),++a);i.position=n,i.writeInt(a),this.send(i)},e.prototype.doUpDataEquip=function(t){var e=t.readShort(),i=this.getEquipByIndex(e);return i.parserEquip(t),this.updateEquipRedPoint(i),i},e.prototype.updateEquipRedPoint=function(t){RpFun.showEquipSingleRedPoint(t),RpFun.showForgeRedPoint(PCode.UPD),RpFun.showDaZaoEquipRedPoint(),RpFun.showEquipRedPoint(),RpFun.showGemRedPoint(),RpFun.showForgeBoostSingle(),RpFun.showForgeAddRedPoint(),RpFun.showForgeFosterRedPoint(),this.patchEquipChange(),t.equipPos<=EquipPos.EMBLEM&&RpFun.showSuitPosRp(t.equipPos)
},e.prototype.patchOneKeyEquip=function(t){for(var e=t.readByte(),i=0;e>i;i++){var n=t.readInt();if(n>0){var a=Cfg.getItemCfg(n).subType,o=this.getEquipByIndex(a);o&&(o.updateEquipId(n),this.updateEquipRedPoint(o))}else console.log("一键换装 更新 4-6 装备数量:"+e+" 装备id:"+n)}},e.prototype.patchEquipChange=function(){},e.prototype.patchSmeltEquipComplete=function(t){var e=t.readInt();if(e>0){t.readInt(),t.readInt()}},e.prototype.patchEquipCheckList=function(t){return[t]},e.prototype.sendGrewupEquip=function(t,e){var i=this.getBytes(3);i.writeShort(t),i.writeShort(e),this.send(i)},e.prototype.patchEquipList=function(t){for(var e=t.readByte(),i=0;e>i;i++)this.equipDatas[i].parserEquip(t)},e.prototype.getPowerOfItem=function(t){var e=0;if(t.hasEquipOn()){for(var i=0;i<t.cfg.exattr.length;i++){var n=t.cfg.exattr[i];e+=GFunc.getPower1(n.type,n.value)}for(var i=0;i<t.cfg.pattr.length;i++){var n=t.cfg.pattr[i];e+=GFunc.getPower1(n.type,n.value)}e+=t.cfg.equippower}return Math.ceil(e)},e.prototype.getPowerOfEquip=function(t){for(var e=0,i=0;i<t.cfg.pattr.length;i++){var n=t.cfg.pattr[i];e+=GFunc.getPower1(n.type,n.value+Cfg.getEnhanceAttrValue(t.cfg.subType,n.type,n.value))}for(var i=0;i<t.cfg.exattr.length;i++){var n=t.cfg.exattr[i];e+=GFunc.getPower1(n.type,n.value)}return e+=t.cfg.equippower,Math.ceil(e)},e.prototype.getStrengthenEquipsByRoleIndex=function(){for(var t=this.equipDatas,e=[],i=0;i<t.length;i++){var n=t[i];e.push(n)}return e},e.prototype.getStrengthenMinLevel=function(){for(var t=9999999999,e=this.equipDatas,i=0;i<e.length;i++){var n=e[i];n.strengthen<t&&n.hasEquipOn()&&(t=n.strengthen)}return t},e.prototype.getAddMinLevel=function(){for(var t=9999,e=this.equipDatas,i=0;i<e.length;i++){var n=e[i];n.id>0&&t>=n.addlv&&(t=n.addlv)}return t},e.prototype.isWeaponStrengthEnough=function(t){var e=this.equipDatas;return e[0].strengthen>=t&&e[1].strengthen>=t},e.prototype.getWeaponEquips=function(){return[this.getEquipByIndex(EquipPos.WEAPON),this.getEquipByIndex(EquipPos.EMBLEM)]},e.prototype.getEquipByIndex=function(t){return this.equipDatas[t]},e.prototype.getEquipByIndex1=function(t){var e=this.equipDatas[t];return e.hasEquipOn()?e:null},e.prototype.setPurifyLevel=function(t,e){this.equipDatas[t].purifgLevel=e},e.prototype.setFujiaLevel=function(t,e){this.equipDatas[t].zyFuJia=e},e.prototype.getRoleBoostConfig=function(t){var e,i=Cfg.getConfigs(EnhanceAddDaRenConfig,CondType.NONE);for(var n in i){var a=0,o=this.equipDatas;for(var s in o)o[s].strengthen>=i[n].needlevel&&a++;if(e||(e=i[n]),t>a)break;e=i[n]}return e},e.prototype.getRoleBoostNextConfig=function(t){var e,i=Cfg.getConfigs(EnhanceAddDaRenConfig,CondType.NONE);for(var n in i){var a=0,o=this.equipDatas;e=i[n];for(var s in o)o[s].strengthen>=i[n].needlevel&&a++;if(t>a)break}return e},e.prototype.getRoleBoostLevelNum=function(t){var e=0,i=this.equipDatas;for(var n in i)t<=i[n].strengthen&&e++;return e},e.prototype.getRoleZhuoYueAttNum=function(t){var e=0,i=this.equipDatas;for(var n in i){var a=i[n];if(a.hasEquipOn()&&a.isZhuoYe())for(var o=0;o<a.attZY.length;o++)a.attZY[o].value>0&&e++}return e},e.prototype.checkBagFreeCount=function(t){return void 0===t&&(t=1),this.getSurplusCount()<t?(showtipsFail(Lang.common_str9),!1):!0},e.prototype.isBagFreeByItems=function(t){for(var e=0,i=0,n=t;i<n.length;i++){var a=n[i];if(a.id>CurType.max){var o=Cfg.getItemCfg(a.id);ItemType.isEquip(o.type)&&e++}}return this.getSurplusCount()>=e},e.prototype.checkBagFreeByItems=function(t){return this.isBagFreeByItems(t)?!0:(showtipsFail(Lang.common_str9),!1)},e.prototype.getMinBoostLevelByRoleId=function(t){for(var e=this.equipDatas,i=e[0].strengthen,n=1;n<e.length;n++){var a=e[n];i>a.strengthen&&(i=a.strengthen)}return i},e.prototype.getMinBoostLevel=function(){for(var t=this.getMinBoostLevelByRoleId(0),e=1;e<this.equipDatas.length;e++){var i=this.getMinBoostLevelByRoleId(e);i>t&&(t=i)}return t},e.prototype.getEquipByStarRank=function(t,i){for(var n=[],a=this.bagModel[e.EQUIP],o=0;o<a.length;o++){var s=a[o];s.cfg.star==t&&s.cfg.rank==i&&-1==[EquipPos.RING1,EquipPos.RING2].indexOf(s.cfg.subType)&&n.push(s)}return n},e.prototype.getEquipByQualityStar=function(t,i){for(var n=[],a=this.bagModel[e.EQUIP],o=0;o<a.length;o++){var s=a[o];s.cfg.star==i&&s.cfg.quality==t&&this.chekRongLianByEquiPos(s.cfg.subType)&&this.getEquipByIndex(s.cfg.subType).power>=s.power&&n.push(s)}return n},e.prototype.getEquipByLessStar=function(t,i){void 0===i&&(i=0);for(var n=[],a=this.bagModel[e.EQUIP],o=0;o<a.length;o++){var s=a[o];if(s.cfg.star<=t&&this.chekRongLianByEquiPos(s.cfg.subType)&&n.push(s),0!=i&&n.length>=i)break}return n},e.prototype.chekRongLianByEquiPos=function(t){return-1==[EquipPos.RING1,EquipPos.RING2].indexOf(t)},e.prototype.getTianMoEquipSmes=function(){for(var t=[],i=ForgeSys.ins().tianMoData,n=0;n<i.tianMoUpLevelDatas.length;n++){var a=i.getTianMoUpLevelDataByIndex(n),o=a.getActConfig(),s=o.items[0],r=o.items[0].id;a.isAct||(t[r]?t[r]=t[r]+s.count:t[r]=s.count)}for(var u=e.ins().getItemByType(ItemType.TianMoGodEquip),h=[],l=0;l<u.length;l++){var p=u[l];if(t[p.id]){var c=this.addArray(h,p);c.count=c.count-t[p.id]}else this.addArray(h,p)}for(var l=h.length-1;l>=0;l--)h[l].count<=0&&h.splice(l,1);return h},e.prototype.addArray=function(t,e){var i=new ItemDataReward;i.id=e.id,i.count=e.count;for(var n=0;n<t.length;n++)if(t[n].id==e.id)return t[n].count=e.count,t[n];return t.push(i),i},e.OTHTER=0,e.EQUIP=1,e.TREASUREHUNT=2222,e.XUNBAO=2,e.FUWEN=3,e.JINZUAN=4,e.FOOT=5,e.MOUNT=55,e.GODEQUIP=6,__decorate([callDelay(100)],e.prototype,"showTiHuanEquip",null),e}(BaseSys);__reflect(BagSys.prototype,"BagSys");var System;!function(t){t.bagSys=BagSys.ins.bind(BagSys)}(System||(System={})),window.BagSys=BagSys;var ProgressBarEff3=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return __extends(e,t),e.prototype.iniUI=function(){t.prototype.iniUI.call(this),this.bgmc.x=334,this.bgmc.y=45,this.xianmc.y=45,this.lbvalue.x=235,this.lbvalue.y=35,this.objWidth=561,this.groupTop.addChild(this.xianmc),this.shape.x=56,this.shape.y=37,this.shapeBg.x=56,this.shapeBg.y=37},e.prototype.updateXiaoWeiBa=function(){this.xianmc.visible=this.getValue()>0,this.xianmc.x=this.shape.x+this.shape.width-1},e.prototype.updasteValueText=function(){this.lbvalue.visible=!1},e.prototype.getMaskImg=function(){return"smzl_zycs_jdt2"},e.prototype.getBgmcRes=function(){return"smzl_jdt1"},e.prototype.getXianmcRes=function(){return"smzl_jdt2"},e.prototype.getBkRes=function(){return""},e.prototype.getBgImg=function(){return"smzl_zycs_jdt0"},e}(ProgressBarEff1);__reflect(ProgressBarEff3.prototype,"ProgressBarEff3");var OpenCellWin=function(t){function e(){var e=t.call(this)||this;return e.layer=LayerMgr.Popup,e.skinName="OpenCellWinEUI",e.addBg(),e}return __extends(e,t),e.prototype.childrenCreated=function(){this.setSkinPart("price",new PriceIcon)},e.prototype.open=function(e){void 0===e&&(e=0),t.prototype.open.call(this),this.addClickE(this.decBtn,this.onTap),this.addClickE(this.addBtn,this.onTap),this.addClickE(this.sureBtn,this.onTap),this.addClickE(this.cancelBtn,this.onTap),this.setCount(5)},e.prototype.onTap=function(t){switch(t.currentTarget){case this.decBtn:this.setCount(Number(this.count.text)-5);break;case this.addBtn:this.setCount(Number(this.count.text)+5);break;case this.sureBtn:GFunc.checkCurrency(CurType.yb,this.price.getPrice())&&BagSys.ins().sendAddBagGrid(Number(this.count.text)/5);case this.cancelBtn:closeWin(this)}},e.prototype.setCount=function(t){var e=Cfg.getConfig(BagDataConfig,1),i=Cfg.getConfigs(BagExpandConfig,CondType.NONE),n=ComUtil.getObjLen(i),a=(BagSys.ins().bagNum-BagSys.ins().getBagAddCount())/e.rowSize,o=(n-a)*e.rowSize;5>t?(t=5,showtipsFail(Lang.bag_str5)):t>o&&(t=o,showtipsFail(Lang.bag_str6)),this.count.text=""+t;for(var s=0,r=t/e.rowSize,u=1;r>=u;u++)s+=i[a+u].cost;this.price.setPrice(s)},e}(BaseWinSingle);__reflect(OpenCellWin.prototype,"OpenCellWin"),window.OpenCellWin=OpenCellWin;var ShengWuModelNew=function(){function t(){this.shengWuDatas=[],this.shengWuId=0}return t.prototype.parserInfo=function(t){this.shengWuDatas.length=0;for(var e=t.readByte(),i=0;e>i;i++){var n=new ShengWuData;n.parser(t),this.shengWuDatas.push(n),n.isAct&&n.id>this.shengWuId&&(this.shengWuId=n.id)}},t.prototype.parserShengWuAct=function(t){var e=this.getShengWuDataById(t.readByte());return e.isAct=!0,this.shengWuId=e.id,e},t.prototype.parserFragmentAct=function(t){var e=t.readByte(),i=t.readByte(),n=this.getShengWuFragmentData(e,i);n.isAct=!0},t.prototype.getShengWuDataById=function(t){for(var e=0,i=this.shengWuDatas;e<i.length;e++){var n=i[e];if(n.id==t)return n}return null},t.prototype.getShengWuFragmentData=function(t,e){var i=this.getShengWuDataById(t);return i.fragmentDatas[e]},t.prototype.getPower=function(){for(var t=0,e=0,i=this.shengWuDatas;e<i.length;e++){var n=i[e];t+=n.getPower()}return t},t.prototype.getTotalAttr=function(){for(var t=[],e=0,i=this.shengWuDatas;e<i.length;e++){var n=i[e];n.isAct&&(t=AttrData.mergeAttr(n.getConfig().attrs,t));for(var a=0,o=n.fragmentDatas;a<o.length;a++){var s=o[a];s.isAct&&(t=AttrData.mergeAttr(s.getConfig().attrs,t))}}return t},t.prototype.isMax=function(){return this.shengWuId>=this.shengWuDatas.length},t.prototype.getMaxId=function(){return this.shengWuDatas.length},t}();__reflect(ShengWuModelNew.prototype,"ShengWuModelNew");var ShengWuData=function(){function t(){this.id=0,this.isAct=!1,this.fragmentDatas=[]}return t.prototype.parser=function(t){this.id=t.readByte(),this.isAct=t.readBoolean(),this.fragmentDatas.length=0;for(var e=this.getConfig().needitem.length,i=0;e>i;i++){var n=this.getConfig().needitem[i];this.fragmentDatas.push(new ShengWuFragmentData(n,t.readBoolean(),i))}},t.prototype.getConfig=function(){return this.config||(this.config=Cfg.getConfig(ShengwuConfig,this.id))},t.prototype.isCanAct=function(){if(this.isAct)return!1;for(var t=0,e=this.fragmentDatas;t<e.length;t++){var i=e[t];if(!i.isAct)return!1}return!0},t.prototype.getPower=function(){for(var t=0,e=0,i=this.fragmentDatas;e<i.length;e++){var n=i[e];n.isAct&&(t+=GFunc.getPower(n.getConfig().attrs))}return this.isAct&&(t+=GFunc.getPower(this.getConfig().attrs)),t>>0},t}();__reflect(ShengWuData.prototype,"ShengWuData");var ShengWuFragmentData=function(){function t(t,e,i){this.id=0,this.index=0,this.isAct=!1,this.id=t,this.isAct=e,this.index=i}return t.prototype.getConfig=function(){return this.config||(this.config=Cfg.getConfig(ShengwuFragmentConfig,this.id))},Object.defineProperty(t.prototype,"canAct",{get:function(){return this.isAct?!1:GFunc.isConsumeEnough(this.getConfig().needitem)},enumerable:!0,configurable:!0}),t.prototype.getIcon=function(){var t=Cfg.getItemCfg(this.getConfig().needitem[0].id);return ResMgr.getItemIcon(t.getIcon())},t}();__reflect(ShengWuFragmentData.prototype,"ShengWuFragmentData");var ShengWuActTipsWin=function(t){function e(){var e=t.call(this)||this;e.layer=LayerMgr.Popup,e.skinName="ShengWuActTipsWinEUI";var i=new XY;i.x=e.imgIcon.x,i.y=e.imgIcon.y-15;var n=new XY;return n.x=e.imgIcon.x,n.y=e.imgIcon.y+15,egret.Tween.removeTweens(e.imgIcon),GFunc.move(e.imgIcon,i,n,1500),e}return __extends(e,t),e.prototype.open=function(e){t.prototype.open.call(this),this.updatePanel(e)},e.prototype.removeDisplay=function(){egret.Tween.removeTweens(this.imgIcon)},e.prototype.updatePanel=function(t){this.imgIcon.source="sw_zycs_ng"+t.id+"_png",this.imgName.text=t.getConfig().name,this.totalPower.text=""+t.getPower()},e}(BaseWinSingle);__reflect(ShengWuActTipsWin.prototype,"ShengWuActTipsWin"),window.ShengWuActTipsWin=ShengWuActTipsWin;var ShengWuItem=function(t){function e(){var e=t.call(this)||this;return e.skinName="ShengWuItemEUI",e.showRedPoint(!1),e}return __extends(e,t),e.prototype.dataChanged=function(){if(this.data instanceof ShengWuFragmentData){this.imgIcon.source=this.data.getIcon(),this.imgIcon.filters=this.data.isAct?[]:DisUtil.grayFilter();var t=this.data.canAct;this.lbCount.text=t?Lang.sw_str1:this.data.getConfig().desc,this.lbCount.textColor=t?1176860:16711680,this.imgDi.visible=this.lbCount.visible=!this.data.isAct,this.showRedPoint(t)}},e.prototype.showRedPoint=function(t){this.redPoint.visible=t},e}(BaseItemRender);__reflect(ShengWuItem.prototype,"ShengWuItem"),window.ShengWuItem=ShengWuItem;var ProgressBarEff4=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.pointY4=[0,15,21,17,15],e.pointY6=[0,16,18,22,18,16,5],e}return __extends(e,t),e.prototype.iniUI=function(){t.prototype.iniUI.call(this),this.bgmc.x=72,this.bgmc.y=5,this.xianmc.y=10,this.lbvalue.x=235,this.lbvalue.y=35,this.objWidth=129,this.groupTop.addChild(this.xianmc),this.shapeBg.x=5,this.shapeBg.y=5,this.bgimg.x=0,this.bgimg.y=0,this.groupDonw.addChild(this.bgmc)},e.prototype.iniShape=function(){this.shape=new eui.Image,this.shape.source=this.getMaskImg(),this.shape.x=5,this.shape.y=0,this.shape.width=0,this.shape.fillMode="repeat"},e.prototype.iniShapebg=function(){},e.prototype.updateXiaoWeiBa=function(){t.prototype.updateXiaoWeiBa.call(this),this.xianmc.y=4==this.getMaxValue()?this.pointY4[this.getValue()]:this.pointY6[this.getValue()],this.xianmc.visible=this.getValue()>0&&this.getValue()!=this.getMaxValue()},e.prototype.updasteValueText=function(){this.lbvalue.visible=!1},e.prototype.getMaskImg=function(){return"shenmo_zycs_zz"},e.prototype.getBgmcRes=function(){return"shenmojdt1"},e.prototype.getXianmcRes=function(){return"shenmojdt2"},e.prototype.getBkRes=function(){return""},e.prototype.getBgImg=function(){return"mianui_zycs_jd1"},e}(ProgressBarEff1);__reflect(ProgressBarEff4.prototype,"ProgressBarEff4");var GuildBattleSys=function(t){function e(){var e=t.call(this)||this;return e.curState=GuildBattleState.end,e.manorDatas=[],e.redBagData=new GuildBattleRedBagData,e.mobaiData=new GuildBattleMobaiData,e.scoreDabiaoData=new GuildBattleGerenScoreDabiaoData,e.lastId=1,e.lastRank=1,e.dailyAwardState=0,e.guildId=0,e.guildLv=0,e.guildPower=0,e.guildName="",e.guildRoleName="",e.guildCount=0,e.signUpTick=0,e.lotteryTick=0,e.prelimReadyTick=0,e.prelimTick=0,e.finalsReadyTick=0,e.finalsTick=0,e.endTick=0,e.guwuData=new GuildBattleGuWuData,e.lianZhanCounts=[],e.bossDatas=[],e.myScore=0,e.enemyScore=0,e.manorId=1,e.ratio=1,e.sysId=PackId.GuildBattle,e.reg(1,e.patchSignUpInfo),e.reg(2,e.patchSignUp),e.reg(3,e.patchRivalInfo),e.reg(4,e.patchQuickInfo),e.reg(5,e.patchLottery),e.reg(6,e.patchDailyAward),e.reg(7,e.patchTimeInfo),e.reg(8,e.patchGuwuNotice),e.reg(10,e.patchGuwuUp),e.reg(11,e.patchGuwuInfo),e.reg(12,e.patchVSInfo),e.reg(14,e.patchMobai),e.reg(15,e.patchResult),e.reg(16,e.patchBaseInfo),e.reg(17,e.patchLianZhanInfo),e.reg(18,e.patchLianZhanUp),e.reg(19,e.patchBossInfo),e.reg(20,e.patchDetailsInfo),e.reg(21,e.patchLianZhanEnd),e.reg(22,e.patchRedBagInfo),e.reg(23,e.patchSetRedBag),e.reg(24,e.patchRobRedBag),e.reg(25,e.patchGerenScoreRank),e.reg(26,e.patchGerenScoreDabiao),e.reg(27,e.patchBattleResult),e.reg(28,e.patchMobaiInfo),e.reg(29,e.patchDieTips),e.reg(30,e.patchState),e.reg(31,e.patchKillBoss),e}return __extends(e,t),e.ins=function(){return t.getIns.call(this,e)},e.prototype.sendSignUpInfo=function(){this.sendBase(1)},e.prototype.patchSignUpInfo=function(t){for(var e=t.readByte(),i=0;e>i;i++){var n=this.getManorDataById(t.readByte());n.parserSignUp(t)}RpFun.showGuildBattleSignUpRp()},e.prototype.sendSignUp=function(t){var e=this.getBytes(2);e.writeByte(t),this.send(e)},e.prototype.patchSignUp=function(t){var e=(t.readByte(),t.readByte());e>0?showtipsSuc(Lang.gb_str50):showtipsFail(Lang.gb_str51)},e.prototype.sendRivalInfo=function(t,e){var i=this.getBytes(3);i.writeByte(t),i.writeByte(e),this.send(i)},e.prototype.patchRivalInfo=function(t){t.readByte();for(var e=t.readByte(),i=[],n=0;e>n;n++){var a=new GuildBattleRivalData;a.parser(t),i.push(a)}return i},e.prototype.sendQuickInfo=function(){this.sendBase(4)},e.prototype.patchQuickInfo=function(t){var e=new GuildBattleQuicData;e.parser(t),openWin(GuildBattleQuickWin,e)},e.prototype.sendLottery=function(t,e){var i=this.getBytes(5);i.writeByte(t),i.writeByte(e),this.send(i)},e.prototype.patchLottery=function(t){var e=this.getManorDataById(t.readByte());e.VSData.lotteryId=t.readInt()},e.prototype.sendDailyAward=function(){this.sendBase(6)},e.prototype.patchDailyAward=function(t){this.dailyAwardState=t.readByte(),RpFun.showGuildBattleDailyRp()},e.prototype.patchTimeInfo=function(t){t.readByte();this.signUpTick=DateUtil.formatMiniDateTime(t.readInt()),this.lotteryTick=DateUtil.formatMiniDateTime(t.readInt()),this.prelimReadyTick=DateUtil.formatMiniDateTime(t.readInt()),this.prelimTick=DateUtil.formatMiniDateTime(t.readInt()),this.finalsReadyTick=DateUtil.formatMiniDateTime(t.readInt()),this.finalsTick=DateUtil.formatMiniDateTime(t.readInt()),this.endTick=DateUtil.formatMiniDateTime(t.readInt()),RpFun.showGuildBattleSignUpRp(),RpFun.showHuoDongRedPoint()},e.prototype.patchGuwuNotice=function(t){var e=t.readInt(),i=t.readString();openWin(GuildBattleGuwuNoticeWin,e,i),this.guildId==e?this.guwuData.updateDataMy(t):this.guwuData.updateDataEnemy(t)},e.prototype.sendGuwuUp=function(t){var e=this.getBytes(10);e.writeInt(t),this.send(e)},e.prototype.patchGuwuUp=function(t){t.readByte();this.guwuData.parser(t)},e.prototype.patchGuwuInfo=function(t){this.guwuData.parser2(t)},e.prototype.sendVSInfo=function(){this.sendBase(12)},e.prototype.patchVSInfo=function(t){for(var e=Number.MAX_VALUE,i=t.readByte(),n=0;i>n;n++){var a=this.getManorDataById(t.readByte());a.parserVS(t),a.VSData.isVSing()&&(e=Math.min(e,a.VSData.lotteryId))}0==e&&this.getGuildBattleState()==GuildBattleState.lottery&&openWin(GuildBattleLotteryTipsWin)},e.prototype.sendEnterFb=function(){this.sendBase(13)},e.prototype.sendMobai=function(){this.sendBase(14)},e.prototype.patchMobai=function(t){if(this.mobaiData.count=t.readByte(),this.mobaiData.parser(t),this.mobaiData.isMobai){var e=this.mobaiData.getEntityRoleData();LogicSys.ins().setEntityNPCByRank(GConst.GuildBattleMoBaiNPCId,e)}RpFun.showGuildBattleMoBaiRp()},e.prototype.patchResult=function(t){var e=new GuildBattleResultData(!0);e.parser(t);var i=new GuildBattleResultData(!1);i.parser(t),e.isMy()?openWin(ResultGuildBattleWin,e,i):openWin(ResultGuildBattleWin,i,e)},e.prototype.patchBaseInfo=function(t){this.guildId=t.readInt(),t.readByte(),this.guildLv=t.readShort(),this.guildPower=t.readDouble(),this.guildName=t.readString(),this.guildRoleName=t.readString(),this.guildCount=t.readByte(),this.lastId=t.readByte(),this.lastRank=t.readByte(),this.dailyAwardState=t.readByte(),RpFun.showGuildBattleDailyRp(),RpFun.showGuildBattleSignUpRp()},e.prototype.patchLianZhanInfo=function(t){var e=t.readByte();this.lianZhanCounts=[];for(var i=0;e>i;i++){var n=t.readDouble(),a=t.readInt();this.lianZhanCounts[n]=a}this.manorId=t.readByte(),this.ratio=t.readByte(),0==this.manorId&&console.log("11-17 当前副本的领地ID ratio="+this.manorId),0==this.ratio&&console.log("11-17 比赛类型1第一轮，2第二轮败者组，3第二轮胜者组 ratio="+this.ratio)},e.prototype.patchLianZhanUp=function(t){var e=t.readDouble(),i=new GuildBattleLianZhanData;i.parser(t),this.lianZhanCounts[e]=i.count;var n=i.getConfig();null!=n&&openWin(GuildBattleLianZhanWin,i,n)},e.prototype.patchBossInfo=function(t){this.bossDatas.length=0;for(var e=t.readByte(),i=0;e>i;i++){var n=new GuildBattleBossData;n.parser(t),this.bossDatas.push(n)}e=t.readByte();for(var a=0;e>a;a++){var o=t.readInt(),s=t.readInt();this.guildId==o?this.myScore=s:this.enemyScore=s}},e.prototype.sendDetailsInfo=function(){this.sendBase(20)},e.prototype.patchDetailsInfo=function(t){for(var e=[],i=t.readByte(),n=0;i>n;n++){var a=new GuildBattleDetailsData;a.parser(t),e.push(a)}return e},e.prototype.patchLianZhanEnd=function(t){var e=t.readString(),i=t.readString(),n=t.readShort();openWin(GuildBattleLianZhanEndWin,e,i,n)},e.prototype.patchRedBagInfo=function(t){this.redBagData.parser(t),RpFun.showGuildBattleRedBagRp()},e.prototype.sendSetRedBag=function(t){var e=this.getBytes(23);e.writeByte(t),this.send(e)},e.prototype.patchSetRedBag=function(t){var e=t.readByte();1==e?(closeWin(GuildBattleRedBagWin),showtipsFail(Lang.guild_str123)):showtipsFail(Lang.guild_str115)},e.prototype.sendRobRedBag=function(){this.sendBase(24)},e.prototype.patchRobRedBag=function(t){var e=t.readByte();1==e?(openWin(GuildBattleRedBagResultWin),closeWin(GuildBattleRedBagWin)):showtipsFail(Lang.guild_str116)},e.prototype.sendGerenScoreRank=function(){this.sendBase(25)},e.prototype.patchGerenScoreRank=function(t){var e=new GuildBattleGerenScoreData;return e.parser(t),e},e.prototype.sendGerenScoreDabiao=function(t){var e=this.getBytes(26);e.writeByte(t),this.send(e)},e.prototype.patchGerenScoreDabiao=function(t){this.scoreDabiaoData.parser(t)},e.prototype.patchBattleResult=function(t){for(var e=t.readByte(),i=[],n=t.readByte(),a=0;n>a;a++){var o=new GuildBattleFbResultData(a+1);o.parser(t),i.push(o)}openWin(GuildBattleResultWin,e,i)},e.prototype.patchMobaiInfo=function(t){if(this.mobaiData.parser(t),this.mobaiData.isMobai){var e=this.mobaiData.getEntityRoleData();LogicSys.ins().setEntityNPCByRank(GConst.GuildBattleMoBaiNPCId,e)}RpFun.showGuildBattleMoBaiRp()},e.prototype.patchDieTips=function(t){var e=t.readString();showtipsFail(Lang.gb_str70.replace("$name$",""+e))},e.prototype.patchState=function(t){this.curState=t.readByte()},e.prototype.patchKillBoss=function(t){var e=t.readInt(),i=t.readString();openWin(GuildBattleKillBossTipsWin,e,i)},e.prototype.getManorDataById=function(t){return this.manorDatas[t]||(this.manorDatas[t]=new GuildBattleManorData(t))},e.prototype.getManorDatas=function(){var t=[];for(var e in this.manorDatas)t.push(this.manorDatas[e]);return t},e.prototype.getSignUpId=function(){var t=0;for(var e in this.manorDatas)this.manorDatas[e].getSignUpRank()>0&&(t=this.manorDatas[e].id);return t},e.prototype.getDailyAwards=function(){if(0==this.dailyAwardState){var t=this.getManorDataById(1);return t.getRankConfig(1).rewardDaily}0==this.lastId&&console.warn("领地战每日奖励数据错误 lastId="+this.lastId+" dailyAwardState="+this.dailyAwardState),0==this.lastRank&&console.warn("领地战每日奖励数据错误 lastRank="+this.lastRank+" dailyAwardState="+this.dailyAwardState);var e=this.getManorDataById(this.lastId);return e.getRankConfig(this.lastRank).rewardDaily},e.prototype.isBattle=function(){var t=!1;if(this.getGuildBattleState()!=GuildBattleState.signUp)for(var e in this.manorDatas)if(this.manorDatas[e].isVS()){t=!0;break}return t},e.prototype.getPowerCompare=function(t){var e=Math.floor(this.guildPower/t*100),i=Cfg.getConfigs(GBPowerConfig);for(var n in i)if(e>=i[n].difference[0]&&e<=i[n].difference[1])return i[n];return null},e.prototype.getGuildBattleState=function(t){return void 0===t&&(t=Actor.ins().serverTime),this.curState},e.prototype.getGuildBattleTime=function(t){void 0===t&&(t=Actor.ins().serverTime);var e=0;return t<this.signUpTick?e=this.signUpTick-t:t<this.lotteryTick?e=this.lotteryTick-t:t<this.prelimReadyTick?e=this.prelimReadyTick-t:t<this.prelimTick?e=this.prelimTick-t:t<this.finalsReadyTick?e=this.finalsReadyTick-t:t<this.finalsTick?e=this.finalsTick-t:t<this.endTick&&(e=this.endTick-t),Math.ceil(e/1e3)},e.prototype.getGuildBattleTick=function(t){return void 0===t&&(t=Actor.ins().serverTime),t<this.signUpTick?this.signUpTick:t<this.lotteryTick?this.lotteryTick:t<this.prelimReadyTick?this.prelimReadyTick:t<this.prelimTick?this.prelimTick:t<this.finalsReadyTick?this.finalsReadyTick:t<this.finalsTick?this.finalsTick:t<this.endTick?this.endTick:0},e.prototype.getGuildBattleIsOpen=function(){var t=!1,i=e.ins().getGuildBattleState(),n=GuildBattleState.end,a=GuildBattleState.signUp;return t=n==i||a==i?!1:!0},e.prototype.getGuildBattleIsOver=function(){return!(Actor.ins().serverTime>e.ins().lotteryTick&&Actor.ins().serverTime<e.ins().finalsTick)},e}(BaseSys);__reflect(GuildBattleSys.prototype,"GuildBattleSys");var System;!function(t){t.guildBattleSys=GuildBattleSys.ins.bind(GuildBattleSys)}(System||(System={})),window.GuildBattleSys=GuildBattleSys;var GuildBattleState;!function(t){t[t.signUp=1]="signUp",t[t.lottery=2]="lottery",t[t.prelimReady=3]="prelimReady",t[t.prelim=4]="prelim",t[t.finalsReady=5]="finalsReady",t[t.finals=6]="finals",t[t.end=7]="end"}(GuildBattleState||(GuildBattleState={}));var GuildBattleBossData=function(){function t(){this.cfgId=0,this.hpPer=0,this.guildId=0,this.time=0,this.mapX=0,this.mapY=0}return t.prototype.parser=function(t){this.cfgId=t.readInt(),this.hpPer=t.readShort(),this.guildId=t.readInt(),this.time=DateUtil.formatMiniDateTime(t.readInt()),this.mapX=t.readShort(),this.mapY=t.readShort()},t.prototype.getConfig=function(){return this.config||(this.config=Cfg.getMonstersConfigNew(this.cfgId))},t.prototype.getTime=function(){return Math.max((this.time-Actor.ins().serverTime)/1e3,0)},t.prototype.isDie=function(){return this.hpPer<=0},t.prototype.getName=function(){var t="";return t=this.guildId==GuildBattleSys.ins().guildId?Cfg.getConfig(GBConstConfig).myNpcName:0==this.guildId?Cfg.getConfig(GBConstConfig).bossName+addColor("\n+"+this.getShowScore(),3538827):Cfg.getConfig(GBConstConfig).enemyNpcName+addColor("\n+"+this.getShowScore(),3538827)},t.prototype.getShowScore=function(){var t=0,e=Cfg.getConfig(GBManorIndexConfig,GuildBattleSys.ins().manorId);return this.guildId==GuildBattleSys.ins().guildId||(t=0==this.guildId?Cfg.getConfig(GBConstConfig).bossscore*e.manoradd*this.getJiFenXiShu():Cfg.getConfig(GBConstConfig).killguardscore*e.manoradd*this.getJiFenXiShu()),t},t.prototype.getJiFenXiShu=function(){var t=GuildBattleSys.ins().ratio,e=1;return 1==t?e=Cfg.getConfig(GBConstConfig).scoreadd1:2==t?e=Cfg.getConfig(GBConstConfig).scoreadd2:3==t&&(e=Cfg.getConfig(GBConstConfig).scoreadd3),e},t}();__reflect(GuildBattleBossData.prototype,"GuildBattleBossData");var GuildBattleDetailsData=function(){function t(){this.guildId=0,this.guildName="",this.totalScore=0,this.monScore=0,this.eneScore=0,this.npcScore=0,this.bossScore=0}return t.prototype.parser=function(t){this.guildId=t.readInt(),this.guildName=t.readString(),this.totalScore=t.readInt(),this.monScore=t.readInt(),this.eneScore=t.readInt(),this.npcScore=t.readInt(),this.bossScore=t.readInt()},t}();__reflect(GuildBattleDetailsData.prototype,"GuildBattleDetailsData");var GuildBattleFbResultData=function(){function t(t){this.rank=1,this.guildId=0,this.guildName="",this.roleName="",this.rank=t}return t.prototype.parser=function(t){this.guildId=t.readInt(),this.guildName=t.readString(),this.roleName=t.readString()},t}();__reflect(GuildBattleFbResultData.prototype,"GuildBattleFbResultData");var GuildBattleGerenScoreDabiaoData=function(){function t(){this._record=0,this.records=new Array(64),this.score=0,this._configs=[]}return t.prototype.parser=function(t){this._record=t.readInt(),this.score=t.readInt(),MathUtil.writeIntToArray(this._record,this.records)},t.prototype.getConfigs=function(){return this._configs.length>0?this._configs:this._configs=Cfg.getConfigs(GBDabiaoRewardConfig)},t.prototype.getCurConfig=function(){var t,e=this.records.indexOf(0,1),i=this.getConfigs();return t=e>i[i.length-1].id?i[i.length-1]:i[e-1]},t.prototype.getRewardState=function(){var t=ActRewardState.NotReached,e=this.getCurConfig();return t=1==this.records[e.id]?ActRewardState.Geted:this.score<e.score?ActRewardState.NotReached:ActRewardState.CanGet},t}();__reflect(GuildBattleGerenScoreDabiaoData.prototype,"GuildBattleGerenScoreDabiaoData");var GuildBattleGerenScoreData=function(){function t(){this.datas=[],this.myRank=0,this.myScore=0,this.firstName="",this.job=JobConst.ZhanShi,this.szId=0,this.sqId=0,this.wingId=0,this.shengLingId=0,this.meilinId=0}return t.prototype.parser=function(t){this.datas.length=0;for(var e=t.readShort(),i=0;e>i;i++){var n=new GuildBattleGerenScoreRankData(i+1);n.parser(t),this.datas.push(n)}this.myRank=t.readShort(),this.myScore=t.readInt(),this.firstName=t.readString(),this.job=t.readByte(),this.szId=t.readInt(),this.sqId=t.readInt(),this.wingId=t.readInt(),this.shengLingId=t.readInt(),this.meilinId=t.readInt()},t}();__reflect(GuildBattleGerenScoreData.prototype,"GuildBattleGerenScoreData");var GuildBattleGerenScoreRankData=function(){function t(t){this.rank=1,this.guildName="",this.roleName="",this.score=0,this.rank=t}return t.prototype.parser=function(t){this.guildName=t.readString(),this.roleName=t.readString(),this.score=t.readInt()},t}();__reflect(GuildBattleGerenScoreRankData.prototype,"GuildBattleGerenScoreRankData");var GuildBattleGuWuData=function(){function t(){this.guwuGr=0,this.guwuJtMy=0,this.myDalaoDatas=[],this.myGuildName="",this.guwuJtEnemy=0,this.enemyDalaoDatas=[],this.enemyGuildName=""}return t.prototype.parser=function(t){this.guwuGr=t.readByte(),this.updateDataMy(t),this.updateDataEnemy(t)},t.prototype.parser2=function(t){this.guwuGr=t.readByte(),this.myGuildName=t.readString(),this.updateDataMy(t),this.enemyGuildName=t.readString(),this.updateDataEnemy(t)},t.prototype.updateDataMy=function(t){this.guwuJtMy=t.readByte(),this.myDalaoDatas.length=0;for(var e=0;e<this.guwuJtMy;e++){var i=new GuildBattleGuWuDaLaoData;i.roleName=t.readString(),i.count=1,i.isMy=!0,this.myDalaoDatas.push(i)}},t.prototype.updateDataEnemy=function(t){this.guwuJtEnemy=t.readByte(),this.enemyDalaoDatas.length=0;for(var e=0;e<this.guwuJtEnemy;e++){var i=new GuildBattleGuWuDaLaoData;i.roleName=t.readString(),i.count=1,i.isMy=!1,this.enemyDalaoDatas.push(i)}},t.prototype.getConfigGr=function(){return this.configGr||(this.configGr=Cfg.getConfig(GBInspireConfig,1))},t.prototype.getConfigJt=function(){return this.configJt||(this.configJt=Cfg.getConfig(GBInspireConfig,2))},t.prototype.getGrGuwuAttrs=function(){return AttrData.attrMultiple(this.getConfigGr().attrs,this.guwuGr)},t.prototype.getMyJtGuwuAttrs=function(){return AttrData.attrMultiple(this.getConfigJt().attrs,this.guwuJtMy)},t.prototype.getEnemyJtGuwuAttrs=function(){return AttrData.attrMultiple(this.getConfigJt().attrs,this.guwuJtEnemy)},t.prototype.getConsuGr=function(){var t=this.guwuGr>=this.getConfigGr().needyuanbao.length?this.getConfigGr().needyuanbao.length-1:this.guwuGr;return this.getConfigGr().needyuanbao[t]},t.prototype.getConsuJt=function(){var t=this.guwuJtMy>=this.getConfigJt().needyuanbao.length?this.getConfigJt().needyuanbao.length-1:this.guwuJtMy;return this.getConfigJt().needyuanbao[t]},t}();__reflect(GuildBattleGuWuData.prototype,"GuildBattleGuWuData");var GuildBattleGuWuDaLaoData=function(){function t(){this.roleName="",this.count=1,this.isMy=!1}return t}();__reflect(GuildBattleGuWuDaLaoData.prototype,"GuildBattleGuWuDaLaoData");var GuildBattleLianZhanData=function(){function t(){this.sName="",this.sJob=JobConst.ZhanShi,this.tName="",this.tJob=JobConst.ZhanShi,this.count=0}return t.prototype.parser=function(t){this.count=t.readInt(),this.sJob=t.readByte(),this.sName=t.readString(),this.tName=t.readString(),this.tJob=t.readByte()},t.prototype.getConfig=function(){for(var t=Cfg.getConfigs(GBMutliKillBroConfig),e=0,i=t;e<i.length;e++){var n=i[e];if(this.count>=n.killnum[0]&&this.count<=n.killnum[1])return n}return null},t}();__reflect(GuildBattleLianZhanData.prototype,"GuildBattleLianZhanData");var GuildBattleManorData=function(){function t(t){this.id=1,this.signUpDatas=[],this.VSData=new GuildBattleVSData,this.id=t}return t.prototype.parserSignUp=function(t){var e=t.readByte();this.signUpDatas.length=0;for(var i=0;e>i;i++){var n=new GuildBattleSignUpData;n.parser(t),this.signUpDatas.push(n)}},t.prototype.parserVS=function(t){this.VSData.parser(t)},t.prototype.getConfig=function(){return this.config||(this.config=Cfg.getConfig(GBManorIndexConfig,this.id))},t.prototype.getRankConfigs=function(){return this.rankConfig||(this.rankConfig=Cfg.getConfigs(GBManorConfig,this.getConfig().level))},t.prototype.getRankConfig=function(t){return this.getRankConfigs()[t-1]},t.prototype.getGuessConfig=function(){return this.guessConfig||(this.guessConfig=Cfg.getConfig(GBGuessConfig,this.getConfig().level))},t.prototype.insertSignUpData=function(t,e){e>0&&this.signUpDatas.splice(e-1,0,t)},t.prototype.removeSignUpData=function(t){for(var e=0;e<this.signUpDatas.length;e++)if(t==this.signUpDatas[e].guildId){this.signUpDatas.splice(e,1);
break}},t.prototype.getSignUpRank=function(){var t=0;if(GuildSys.ins().isAddGuild())for(var e=0;e<this.signUpDatas.length;e++)if(GuildSys.ins().guildID==this.signUpDatas[e].guildId){t=e+1;break}return t},t.prototype.getSignUpCount=function(){for(var t=0,e=0;e<this.signUpDatas.length;e++)this.signUpDatas[e].guildId>0&&(t+=1);return t},t.prototype.isVS=function(){return this.VSData.isVS()},t}();__reflect(GuildBattleManorData.prototype,"GuildBattleManorData");var GuildBattleMobaiData=function(){function t(){this.manorDatas=[],this.count=0,this.beCount=0,this.job=JobConst.ZhanShi,this.sex=0,this.szId=0,this.sqId=0,this.wingId=0,this.shengLingId=0,this.meilinId=0,this.mountId=0}return t.prototype.parser=function(t){this.manorDatas.length=0;for(var e=t.readByte(),i=0;e>i;i++){var n=new GuildBattleMobaiManorData(i+1);n.parser(t),n.rankDatas.length>0&&this.manorDatas.push(n)}this.beCount=t.readInt(),this.job=t.readByte(),this.sex=t.readByte(),this.szId=t.readInt(),this.sqId=t.readInt(),this.wingId=t.readInt(),this.shengLingId=t.readInt(),this.meilinId=t.readInt(),this.mountId=t.readInt()},Object.defineProperty(t.prototype,"isMobai",{get:function(){return this.manorDatas.length&&this.manorDatas[0].rankDatas.length>0&&1==this.manorDatas[0].id&&1==this.manorDatas[0].rankDatas[0].rank?(0==this.job,!0):!1},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"mobaiName",{get:function(){return this.isMobai?this.manorDatas[0].rankDatas[0].roleName:""},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"mobaiGuildName",{get:function(){return this.isMobai?this.manorDatas[0].rankDatas[0].guildName:""},enumerable:!0,configurable:!0}),t.prototype.getBodyFileName=function(){var t=Cfg.getConfig(SzHuanhuaBaseConfig,this.szId).uirole;return t[this.sex]},t.prototype.getWeaponFileName=function(){var t=Cfg.getConfig(ShenqiHuanhuaBaseConfig,this.sqId).uirole;return t},t.prototype.getWingFileName=function(){if(this.wingId>0){var t=Cfg.getConfig(WingHuanhuaBaseConfig,this.wingId).uirole;return t}return""},t.prototype.getShengLingFileName=function(){if(this.shengLingId>0){var t=Cfg.getConfig(ShengLingConfig,this.shengLingId);return Cfg.getConfig(ShengLingAppearanceConfig,t.bodyIds[this.job-1]).appearance}return""},t.prototype.getEntityRoleData=function(){var t=new EntityRoleData;return t.entityName=this.mobaiName,t.job=this.job,t.szId=this.szId,t.sqId=this.sqId,t.wingId=this.wingId,t.shengLingId=this.shengLingId,t.sex=this.sex,t.damonId=this.mountId,t.meilinId=this.meilinId,t},t}();__reflect(GuildBattleMobaiData.prototype,"GuildBattleMobaiData");var GuildBattleMobaiManorData=function(){function t(t){this.id=1,this.rankDatas=[],this.id=t}return t.prototype.parser=function(t){this.rankDatas.length=0;for(var e=t.readByte(),i=0;e>i;i++){var n=new GuildBattleMobaiRankData;n.parser(t),this.rankDatas.push(n)}},t.prototype.getManorName=function(){return Cfg.getConfig(GBManorIndexConfig,this.id).name},t}();__reflect(GuildBattleMobaiManorData.prototype,"GuildBattleMobaiManorData");var GuildBattleMobaiRankData=function(){function t(){this.rank=1,this.guildId=0,this.guildName="",this.roleName=""}return t.prototype.parser=function(t){this.rank=t.readByte(),this.guildId=t.readInt(),this.guildName=t.readString(),this.roleName=t.readString()},t}();__reflect(GuildBattleMobaiRankData.prototype,"GuildBattleMobaiRankData");var GuildBattleQuicData=function(){function t(){this.guildNameM="",this.guildMembersM=[],this.guildNameE="",this.guildMembersE=[]}return t.prototype.parser=function(t){this.guildNameM=t.readString(),this.guildMembersM.length=0;for(var e=t.readByte(),i=0;e>i;i++){var n=new GuildMemberInfo;n.office=t.readByte(),n.name=t.readString(),n.job=t.readByte(),n.sex=t.readByte(),this.guildMembersM.push(n)}this.guildNameE=t.readString(),this.guildMembersE.length=0,e=t.readByte();for(var a=0;e>a;a++){var o=new GuildMemberInfo;o.office=t.readByte(),o.name=t.readString(),o.job=t.readByte(),o.sex=t.readByte(),this.guildMembersE.push(o)}},t}();__reflect(GuildBattleQuicData.prototype,"GuildBattleQuicData");var GuildBattleRedBagData=function(){function t(){this.remainYB=0,this.canSend=0,this.sendYb=0,this.maxCount=0,this.count=0,this.logDatas=[],this.getYb=0}return t.prototype.parser=function(t){this.remainYB=t.readInt(),this.canSend=t.readByte(),this.sendYb=t.readInt(),this.maxCount=t.readByte(),this.count=t.readByte(),this.getYb=0,this.logDatas.length=0;for(var e=t.readByte(),i=0;e>i;i++){var n=new GuildBattleRedBagLogData;n.parser(t),this.logDatas.push(n),n.roleId==Actor.ins().actorID&&(this.getYb=n.yb)}},Object.defineProperty(t.prototype,"canRod",{get:function(){return 2==this.canSend&&this.count>0&&this.getYb<=0},enumerable:!0,configurable:!0}),t}();__reflect(GuildBattleRedBagData.prototype,"GuildBattleRedBagData");var GuildBattleRedBagLogData=function(){function t(){this.yb=0,this.name="",this.roleId=0}return t.prototype.parser=function(t){this.yb=t.readInt(),this.name=t.readString(),this.roleId=t.readInt()},t}();__reflect(GuildBattleRedBagLogData.prototype,"GuildBattleRedBagLogData");var GuildBattleResultData=function(){function t(t){this.guildId=0,this.score=0,this.guildName="",this.datas=[],this.isWin=!1,this.isWin=t,this.datas.length=0;for(var e=0;3>e;e++){var i=new GuildBattleResultRankData(e+1,!1);this.datas.push(i)}}return t.prototype.parser=function(t){this.guildId=t.readInt(),this.score=t.readInt(),this.guildName=t.readString();for(var e=this.isMy(),i=t.readByte(),n=0;i>n;n++){var a=this.datas[n]||(this.datas[n]=new GuildBattleResultRankData(n+1,e));a.parser(t),a.guildId=this.guildId}},t.prototype.isMy=function(){return GuildBattleSys.ins().guildId==this.guildId},t}();__reflect(GuildBattleResultData.prototype,"GuildBattleResultData");var GuildBattleResultRankData=function(){function t(t,e){this.rank=1,this.isMy=!1,this.roleName="",this.job=JobConst.ZhanShi,this.score=0,this.guildId=0,this.sex=0,this.rank=t,this.isMy=e}return t.prototype.parser=function(t){this.roleName=t.readString(),this.score=t.readInt(),this.job=t.readByte()},t}();__reflect(GuildBattleResultRankData.prototype,"GuildBattleResultRankData");var GuildBattleRivalData=function(){function t(){this.guildIdL=0,this.guildNameL="",this.roleNameL="",this.countL=0,this.levelL=0,this.guildIdR=0,this.guildNameR="",this.roleNameR="",this.countR=0,this.levelR=0,this.winIndex=0}return t.prototype.parser=function(t){this.guildIdL=t.readInt(),this.guildNameL=t.readString(),this.roleNameL=t.readString(),this.countL=t.readByte(),this.levelL=t.readByte(),this.guildIdR=t.readInt(),this.guildNameR=t.readString(),this.roleNameR=t.readString(),this.countR=t.readByte(),this.levelR=t.readByte(),this.winIndex=t.readByte()},t}();__reflect(GuildBattleRivalData.prototype,"GuildBattleRivalData");var GuildBattleSignUpData=function(){function t(){this.guildId=0,this.guildName="",this.roleName="",this.power=0,this.level=0,this.count=0}return t.prototype.parser=function(t){this.guildId=t.readInt(),this.guildName=t.readString(),this.roleName=t.readString(),this.power=t.readDouble(),this.level=t.readByte(),this.count=t.readByte()},t.prototype.getGuildName=function(){return 0==this.guildId?"":this.guildName},t.prototype.isBenHui=function(){return GuildSys.ins().isSameGuild(this.guildId)},t}();__reflect(GuildBattleSignUpData.prototype,"GuildBattleSignUpData");var GuildBattleVSData=function(){function t(){this.guildId0=0,this.guildName0="",this.guildId1=0,this.guildName1="",this.guildId2=0,this.guildName2="",this.guildId3=0,this.guildName3="",this.guildIds=[],this.guildNames=[],this.lotteryId=0}return t.prototype.parser=function(t){this.guildId0=t.readInt(),this.guildName0=t.readString(),this.guildId1=t.readInt(),this.guildName1=t.readString(),this.guildId2=t.readInt(),this.guildName2=t.readString(),this.guildId3=t.readInt(),this.guildName3=t.readString(),this.lotteryId=t.readInt(),this.guildIds=[this.guildId0,this.guildId1,this.guildId2,this.guildId3],this.guildNames=[this.guildName0,this.guildName1,this.guildName2,this.guildName3]},t.prototype.isVS=function(){var t=!1;return GuildSys.ins().isAddGuild()&&(t=-1!=this.guildIds.indexOf(GuildSys.ins().guildID)),t},t.prototype.isVSing=function(){for(var t=0,e=this.guildIds;t<e.length;t++){var i=e[t];if(i>0)return!0}return!1},t.prototype.getGuildName=function(t){return 0==this.guildIds[t]?Lang.act_str87:this.guildNames[t]},t.prototype.getGuildId=function(t){return this.guildIds[t]},t.prototype.getGuildIndex=function(t){return this.guildIds.indexOf(t)},t}();__reflect(GuildBattleVSData.prototype,"GuildBattleVSData");var GuildBattleAwardWin2=function(t){function e(){var e=t.call(this)||this;return e.winType=WinType.OverlayWin,e}return __extends(e,t),e.prototype.initUI=function(){t.prototype.initUI.call(this),this.addBg()},e.panelNames=[GuildBattleLingdiAwardPanel,GuildBattleGerenAwardPanel,GuildBattleDailyAwardPanel],e}(BaseWinAutoTab);__reflect(GuildBattleAwardWin2.prototype,"GuildBattleAwardWin2"),window.GuildBattleAwardWin2=GuildBattleAwardWin2;var GuildBattleDailyAwardWin=function(t){function e(){var e=t.call(this)||this;return e.skinName="GuildBattleDailyAwardWinEUI",e.layer=LayerMgr.Popup,e.addBg(),e.list.itemRenderer=ItemBaseReward,e.list.dataProvider=e.listData=new eui.ArrayCollection,e}return __extends(e,t),e.prototype.open=function(){t.prototype.open.call(this),this.addClickE(this.sure,this.onClick),this.addLsn(GuildBattleSys.ins().patchDailyAward,this.updatePanel),this.updatePanel()},e.prototype.close=function(){t.prototype.close.call(this)},e.prototype.updatePanel=function(){if(this.listData.source=GuildBattleSys.ins().getDailyAwards(),this.sure.visible=!1,this.desc.text="",GuildBattleSys.ins().getGuildBattleIsOver()){var t=GuildBattleSys.ins().dailyAwardState;0==t?this.desc.textFlow=addColorTF(Lang.gb_str17):(this.sure.label=1==t?Lang.btn_lq:Lang.common_str58,this.sure.visible=!0)}else this.desc.textFlow=addColorTF(Lang.gb_str16)},e.prototype.onClick=function(t){switch(t.target){case this.sure:1==GuildBattleSys.ins().dailyAwardState&&GuildBattleSys.ins().sendDailyAward()}},e}(BaseWinSingle);__reflect(GuildBattleDailyAwardWin.prototype,"GuildBattleDailyAwardWin"),window.GuildBattleDailyAwardWin=GuildBattleDailyAwardWin;var GuildBattleDetailsWin=function(t){function e(){var e=t.call(this)||this;return e.winType=WinType.OverlayWin,e}return __extends(e,t),e.panelNames=[GuildBattleDetailsPanel,GuildBattleGerenScoreRankPanel],e}(BaseDuoPanelWin);__reflect(GuildBattleDetailsWin.prototype,"GuildBattleDetailsWin"),window.GuildBattleDetailsWin=GuildBattleDetailsWin;var GuildBattleFAQSubWin=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.index=0,e}return __extends(e,t),e.prototype.initUI=function(){t.prototype.initUI.call(this),this.layer=LayerMgr.Popup,this.skinName="GuildBattleFAQSubWinEUI",this.addBg()},e.prototype.open=function(e){t.prototype.open.call(this),this.index=e,this.addClickE(this.btnLeft,this.onClick),this.addClickE(this.btnRight,this.onClick),this.updatePanel(e)},e.prototype.updatePanel=function(t){this.imgTitle.source="ldsz_zycs_hdbt"+(t+1);var e=Cfg.getConfig(GBConstConfig).FAQIds[t],i=Cfg.getConfig(HelpInfoConfig,e);this.lbDec.textFlow=StrUtil.toTF(i.text),this.scroller.viewport.scrollV=0},e.prototype.onClick=function(t){switch(t.currentTarget){case this.btnLeft:this.index-=1,this.index<0&&(this.index=6);break;case this.btnRight:this.index+=1,this.index>6&&(this.index=0)}this.updatePanel(this.index)},e}(BaseWinSingle);__reflect(GuildBattleFAQSubWin.prototype,"GuildBattleFAQSubWin"),window.GuildBattleFAQSubWin=GuildBattleFAQSubWin;var GuildBattleFAQWin=function(t){function e(){var e=t.call(this)||this;return e.winType=WinType.OverlayWin,e}return __extends(e,t),e.prototype.initUI=function(){t.prototype.initUI.call(this),this.addBg()},e.panelNames=[GuildBattleFAQPanel],e}(BaseWinAutoTab);__reflect(GuildBattleFAQWin.prototype,"GuildBattleFAQWin"),window.GuildBattleFAQWin=GuildBattleFAQWin;var GuildBattleFbFAQWin=function(t){function e(){var e=t.call(this)||this;return e.skinName="GuildBattleFbFAQWinEUI",e.layer=LayerMgr.Popup,e.addBg(),e}return __extends(e,t),e.prototype.open=function(){t.prototype.open.call(this),this.addClickE(this.lbDec,this.onClick)},e.prototype.close=function(){t.prototype.close.call(this),e.isOpen=this.checkBox.selected},e.prototype.onClick=function(t){switch(t.target){case this.lbDec:closeWin(e)}},e.isOpen=!1,e}(BaseWinSingle);__reflect(GuildBattleFbFAQWin.prototype,"GuildBattleFbFAQWin"),window.GuildBattleFbFAQWin=GuildBattleFbFAQWin;var GuildBattleGuwuNoticeWin=function(t){function e(){var e=t.call(this)||this;return e.skinName="GuildBattleGuwuNoticeWinEUI",e.layer=LayerMgr.Tips,e}return __extends(e,t),e.prototype.open=function(i,n){t.prototype.open.call(this);var a=GuildBattleSys.ins().guildId==i,o=addColor(a?Lang.gb_str59+"：":Lang.gb_str60+"：",a?3183103:15733780);o+=addColor(n,a?5767068:15733780),o+=addColor(Lang.gb_str61,13486270),this.lbDec.textFlow=addColorTF(o),this.alpha=1;var s=egret.Tween.get(this);s.wait(5e3).to({alpha:0},500).call(function(){closeWin(e)},this)},e.prototype.close=function(){t.prototype.close.call(this),egret.Tween.removeTweens(this)},e}(BaseWinSingle);__reflect(GuildBattleGuwuNoticeWin.prototype,"GuildBattleGuwuNoticeWin"),window.GuildBattleGuwuNoticeWin=GuildBattleGuwuNoticeWin;var GuildBattleGuWuWin=function(t){function e(){var e=t.call(this)||this;return e.skinName="GuildBattleGuWuWinEUI",e.layer=LayerMgr.Popup,e.addBg(),e.configs=Cfg.getConfigs(GBInspireConfig),e.listMy.itemRenderer=GuildBattleGuWuItem,e.listMy.dataProvider=e.listMyData=new eui.ArrayCollection,e.listEnemy.itemRenderer=GuildBattleGuWuItem,e.listEnemy.dataProvider=e.listEnemyData=new eui.ArrayCollection,e}return __extends(e,t),e.prototype.open=function(){t.prototype.open.call(this),this.addClickE(this.btnGrGuwu,this.onClick),this.addClickE(this.btnJtGuwu,this.onClick),this.addLsn(GuildBattleSys.ins().patchGuwuInfo,this.updatePanel),this.addLsn(GuildBattleSys.ins().patchGuwuUp,this.updatePanel),this.addLsn(GuildBattleSys.ins().patchGuwuNotice,this.updatePanel),this.updatePanel()},e.prototype.close=function(){t.prototype.close.call(this)},e.prototype.updatePanel=function(){this.guwuData=GuildBattleSys.ins().guwuData;var t=AttrData.getFm(null,5767068,"","+");this.lbMyAttr.textFlow=addColorTF(AttrData.parse(this.guwuData.getMyJtGuwuAttrs(),{fm:t}).join("\n"));var e=AttrData.getFm(null,null,"","+");this.lbEnemyAttr.textFlow=addColorTF(AttrData.parse(this.guwuData.getEnemyJtGuwuAttrs(),{fm:e}).join("\n")),this.listMyData.source=this.guwuData.myDalaoDatas,this.listEnemyData.source=this.guwuData.enemyDalaoDatas,this.lbGrDec.textFlow=addColorTF(Lang.gb_str40.replace("$juese$",addColor(Lang.gb_str64,62830))),this.lbJtDec.textFlow=addColorTF(Lang.gb_str41.replace("$zan$",addColor(Lang.gb_str65,62830))),this.name1.text=this.guwuData.myGuildName,this.name2.text=""==this.guwuData.enemyGuildName?Lang.act_str87:this.guwuData.enemyGuildName;var i=AttrData.parse(this.guwuData.getGrGuwuAttrs(),{fm:t}).join("\n");this.lbGrAttr.textFlow=addColorTF(i),i=AttrData.parse(this.guwuData.getMyJtGuwuAttrs(),{fm:t}).join("\n"),this.lbJtAttr.textFlow=addColorTF(i),this.lbGr.text=this.guwuData.guwuGr+"/"+this.guwuData.getConfigGr().count+Lang.common_ci,this.lbJt.text=this.guwuData.guwuJtMy+"/"+this.guwuData.getConfigJt().count+Lang.common_ci,this.lbGrConsu.text=""+this.guwuData.getConsuGr().count,this.lbJtConsu.text=""+this.guwuData.getConsuJt().count,this.guwuData.guwuGr>=this.guwuData.getConfigGr().count?this.groupGr.visible=!1:this.groupGr.visible=!0,this.lb_grMax.visible=!this.groupGr.visible,this.guwuData.guwuJtMy>=this.guwuData.getConfigJt().count?this.groupJt.visible=!1:this.groupJt.visible=!0,this.lb_jtMax.visible=!this.groupJt.visible},e.prototype.onClick=function(t){switch(t.target){case this.btnGrGuwu:if(this.guwuData.guwuGr>=this.guwuData.getConfigGr().count)return void showtipsFail(Lang.fb_str27);GFunc.checkConsumeEnough(this.guwuData.getConsuGr())&&GuildBattleSys.ins().sendGuwuUp(1);break;case this.btnJtGuwu:if(this.guwuData.guwuJtMy>=this.guwuData.getConfigJt().count)return void showtipsFail(Lang.fb_str27);GFunc.checkConsumeEnough(this.guwuData.getConsuJt())&&GuildBattleSys.ins().sendGuwuUp(2)}},e}(BaseWinSingle);__reflect(GuildBattleGuWuWin.prototype,"GuildBattleGuWuWin"),window.GuildBattleGuWuWin=GuildBattleGuWuWin;var GuildBattleKillBossTipsWin=function(t){function e(){var e=t.call(this)||this;return e.skinName="GuildBattleKillBossTipsWinEUI",e.layer=LayerMgr.Tips,e}return __extends(e,t),e.prototype.open=function(e,i){t.prototype.open.call(this);var n=GuildBattleSys.ins().guildId==e,a=n?Lang.gb_str59:Lang.gb_str60;a+=addColor(i,3183103)+Lang.gb_str58,a+=addColor(n?Lang.gb_str75:Lang.gb_str74,15733780)+Lang.gb_str76,this.lbDec.textFlow=addColorTF(a),this.alpha=1;var o=egret.Tween.get(this);o.wait(5e3).to({alpha:0},500).call(function(){closeWin(GuildBattleLianZhanWin)},this)},e.prototype.close=function(){t.prototype.close.call(this),egret.Tween.removeTweens(this)},e}(BaseWinSingle);__reflect(GuildBattleKillBossTipsWin.prototype,"GuildBattleKillBossTipsWin"),window.GuildBattleKillBossTipsWin=GuildBattleKillBossTipsWin;var GuildBattleLianZhanEndWin=function(t){function e(){var e=t.call(this)||this;return e.skinName="GuildBattleLianZhanEndWinEUI",e.layer=LayerMgr.Tips,e}return __extends(e,t),e.prototype.open=function(i,n,a){t.prototype.open.call(this);var o=addColor(i,3183103)+Lang.gb_str32;o+=addColor(n,15733780)+Lang.gb_str33,o+=addColor(a+Lang.gb_str34,16751375)+"\n"+Lang.gb_str42,this.lbDec.textFlow=addColorTF(o),this.alpha=1;var s=egret.Tween.get(this);s.wait(5e3).to({alpha:0},500).call(function(){closeWin(e)},this)},e.prototype.close=function(){t.prototype.close.call(this),egret.Tween.removeTweens(this)},e}(BaseWinSingle);__reflect(GuildBattleLianZhanEndWin.prototype,"GuildBattleLianZhanEndWin"),window.GuildBattleLianZhanEndWin=GuildBattleLianZhanEndWin;var GuildBattleLianZhanWin=function(t){function e(){var e=t.call(this)||this;return e.skinName="GuildBattleLianZhanWinEUI",e.layer=LayerMgr.Tips,e}return __extends(e,t),e.prototype.open=function(i,n){t.prototype.open.call(this),this.imgIconS.source=ResMgr.getHeadIcon(i.sJob),this.imgIconT.source=ResMgr.getHeadIcon(i.tJob);var a=addColor(i.sName,3183103)+Lang.gb_str58+"\n";a+=addColor(i.tName,15733780),this.lbDec.textFlow=addColorTF(a),this.lbDec0.textFlow=addColorTF(n.bro.replace("$num$",""+i.count)),this.alpha=1;var o=egret.Tween.get(this);o.wait(5e3).to({alpha:0},500).call(function(){closeWin(e)},this)},e.prototype.close=function(){t.prototype.close.call(this),egret.Tween.removeTweens(this)},e}(BaseWinSingle);__reflect(GuildBattleLianZhanWin.prototype,"GuildBattleLianZhanWin"),window.GuildBattleLianZhanWin=GuildBattleLianZhanWin;var GuildBattleLotteryTipsWin=function(t){function e(){var e=t.call(this)||this;return e.skinName="GuildBattleLotteryTipsEUI",e.layer=LayerMgr.Tips,e}return __extends(e,t),e.prototype.open=function(){t.prototype.open.call(this),this.addClickE(this.btnSend,this.onClick),e.isOpen=!1},e.prototype.onClick=function(t){openWin(GuildBattleMainWin,GuildBattleMainWin.getTabIndexbyPanel(GuildBattleLotteryPanel)),closeWin(e)},e.openCheck=function(){return e.isOpen},e.isOpen=!0,e}(BaseWinSingle);__reflect(GuildBattleLotteryTipsWin.prototype,"GuildBattleLotteryTipsWin"),window.GuildBattleLotteryTipsWin=GuildBattleLotteryTipsWin;var GuildBattleMainWin=function(t){function e(){var e=t.call(this)||this;return e.redPointHead=[GuildMapWin],e.winType=WinType.OverlayWin,e}return __extends(e,t),e.prototype.initUI=function(){t.prototype.initUI.call(this),this.addBg()},e.getSysId=function(){return 334},e.prototype.openHelp=function(){openWin(GuildBattleFAQWin)},e.prototype.updateHelpBtnState=function(t){this.helpBtn.visible=!0},e.panelNames=[GuildBattleMainPanel,GuildBattleLotteryPanel,GuildBattleMoBaiRankPanel,GuildBattleRivalLastPanel],e}(BaseWinAutoTab);__reflect(GuildBattleMainWin.prototype,"GuildBattleMainWin"),window.GuildBattleMainWin=GuildBattleMainWin;var ProgressBarEff5=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return __extends(e,t),e.prototype.iniUI=function(){this.bgimg=new eui.Image,this.bgimg.x=68,this.bgimg.y=20,this.bgimg.source=this.getBgImg(),this.groupDonw.addChild(this.bgimg);var t=new MC;t.mask=this.shape,this.groupDonw.addChild(this.shape),t.playFile(getEffName(this.getBgmcRes()),-1),t.x=262,t.y=36,this.bgmc=t,this.groupDonw.addChild(this.bgmc),this.objWidth=357},e.prototype.iniShape=function(){this.shape=new eui.Image,this.shape.source=this.getMaskImg(),this.shape.x=85,this.shape.y=25,this.shape.width=0,this.shape.fillMode="repeat"},e.prototype.iniShapebg=function(){},e.prototype.updasteValueText=function(){this.lbvalue.visible=!this.isMax||this.state==ProgressBarEffDataState.max,this.lbvalue.text=this.state==ProgressBarEffDataState.max?"MAX":this.valueName+this.getValue()+"/"+this.getMaxValue(),this.isFisrt||this.updateMan(),this.isFisrt=!1},e.prototype.updateXiaoWeiBa=function(){},e.prototype.updateMan=function(){if(""!=this.getBkRes()){var t=new MC;t.x=262,t.y=36,t.playFile(getEffName(this.getBkRes()),1),this.addChild(t)}},e.prototype.setQianZhuiName=function(t){this.valueName=t},e.prototype.getMaskImg=function(){return"jl_zycs_jdt2"},e.prototype.getBgImg=function(){return"jl_zycs_jdt1"},e.prototype.getBgmcRes=function(){return"public_jdt"},e.prototype.getXianmcRes=function(){return""},e.prototype.getBkRes=function(){return"jl_zycs_jdt1"},e}(ProgressBarEff1);__reflect(ProgressBarEff5.prototype,"ProgressBarEff5");var GuildBattleNoticeWin=function(t){function e(){var e=t.call(this)||this;return e.layer=LayerMgr.Top,e.winType=WinType.NeverCloseWin,e.skinName="GuildBattleNoticeWinEUI",e.mcSg=new MC,e.mcSg.y=67,e.groupMC.addChild(e.mcSg),e.mcEff=new MC,e.mcEff.y=-15,e.groupMC.addChild(e.mcEff),e}return __extends(e,t),e.prototype.open=function(e,i,n){t.prototype.open.call(this),this.updatePanel(e,i,n)},e.prototype.close=function(){t.prototype.close.call(this),egret.Tween.removeTweens(this.group),this.mcSg.reset(),this.mcEff.reset()},e.prototype.updatePanel=function(t,i,n){this.mcSg.playFile(getEffName("jsdd_sg"),-1),this.mcEff.playFile(getEffName("ldsz_zycs_sxtx"+n.effId),-1),this.imgBg.source="ldsz_zycs_sxdi"+n.effId,this.imgHead.source=ResMgr.getHeadIcon(t),this.lbDec.textFlow=StrUtil.toTF(n.content.replace("$name$",i)),egret.Tween.removeTweens(this.group),this.group.alpha=0,this.group.y=310;var a=egret.Tween.get(this.group);a.wait(500).to({alpha:1,y:260},300).wait(3e3).to({alpha:0},500).call(function(){closeWin(e)},this)},e}(BaseWinSingle);__reflect(GuildBattleNoticeWin.prototype,"GuildBattleNoticeWin"),window.GuildBattleNoticeWin=GuildBattleNoticeWin;var GuildBattleQuickWin=function(t){function e(){var e=t.call(this)||this;return e.itemsM=[],e.itemsE=[],e.skinName="GuildBattleQuickWinEUI",e.layer=LayerMgr.Tips,e.addBg(),e.itemsM=[e.item2,e.item1,e.item0],e.itemsE=[e.item3,e.item4,e.item5],e}return __extends(e,t),e.prototype.open=function(e){t.prototype.open.call(this),this.addClickE(this.btnSend,this.onClick),this.updatePanel(e)},e.prototype.close=function(){t.prototype.close.call(this)},e.prototype.updatePanel=function(t){var e=GuildBattleSys.ins().getGuildBattleState();this.imgTitle.source=e==GuildBattleState.prelimReady||e==GuildBattleState.prelim?"ldsz_zycs_cz":"ldsz_zycs_jz",this.lbGuildNameL.text=t.guildNameM;for(var i=t.guildMembersM,n=0;n<this.itemsM.length;n++)i[n]?(this.itemsM[n].data=i[n],this.itemsM[n].visible=!0):this.itemsM[n].visible=!1;this.lbGuildNameR.text=""==t.guildNameE?Lang.act_str87:t.guildNameE;for(var a=t.guildMembersE,o=0;o<this.itemsE.length;o++)a[o]?(this.itemsE[o].data=a[o],this.itemsE[o].visible=!0):this.itemsE[o].visible=!1},e.prototype.onClick=function(t){GuildBattleSys.ins().sendEnterFb()},e.getSysId=function(){return 334},e}(BaseWinSingle);__reflect(GuildBattleQuickWin.prototype,"GuildBattleQuickWin"),window.GuildBattleQuickWin=GuildBattleQuickWin;var GuildBattleRankAwardWin=function(t){function e(){var e=t.call(this)||this;return e.skinName="GuildBattleRankAwardWinEUI",e.layer=LayerMgr.Popup,e.addBg(),e.listRank.itemRenderer=GuildBattleAwardItem1,e.listRank.dataProvider=e.listRankArr=new eui.ArrayCollection,e}return __extends(e,t),e.prototype.setTabItem=function(){this.tab.itemRenderer=BaseTabBtn5},e.prototype.getTabDatas=function(){return Lang.gb_str18},e.prototype.open=function(){t.prototype.open.call(this),this.lb_tips.textFlow=addColorTF(Lang.gb_str43.replace("$str$",addColor(Lang.gb_str44,5767068))),this.addItemTapE(this.tab,this.onListClick),this.updatePanel()},e.prototype.updatePanel=function(){this.tab.selectedIndex=0,this.listRankArr.source=Cfg.getConfigs(GBManorConfig,3)},e.prototype.onListClick=function(t){this.listRankArr.source=Cfg.getConfigs(GBManorConfig,3-t.itemIndex)},e}(BaseWinSingle);__reflect(GuildBattleRankAwardWin.prototype,"GuildBattleRankAwardWin"),window.GuildBattleRankAwardWin=GuildBattleRankAwardWin;var GuildBattleRankTipsWin=function(t){function e(){var e=t.call(this)||this;return e.skinName="GuildBattleRankTipsWinEUI",e.layer=LayerMgr.Tips,e}return __extends(e,t),e.prototype.open=function(){t.prototype.open.call(this),this.addClickE(this.imgBg,this.countDown),this.addClickE(this.closeBtn0,this.onClose),Timer.ins()["do"](15e3,1e3,1,this.onTimeClose,this,TimerType.LAST),this.updatePanel()},e.prototype.close=function(){t.prototype.close.call(this),Timer.ins().remove(this.onTimeClose,this)},e.prototype.countDown=function(){closeWin(e)},e.prototype.onClose=function(){ActRankTipsWin2.isOpen=!1,closeWin(e)},e.prototype.onTimeClose=function(){closeWin(e)},e.prototype.updatePanel=function(){},e.prototype.addToParent=function(t){this.addToParentAt(t,0)},e.isOpen=!0,e}(BaseWinSingle);__reflect(GuildBattleRankTipsWin.prototype,"GuildBattleRankTipsWin"),window.GuildBattleRankTipsWin=GuildBattleRankTipsWin;var GuildBattleRedBagResultWin=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return __extends(e,t),e.prototype.initUI=function(){t.prototype.initUI.call(this),this.layer=LayerMgr.Popup,this.skinName="GuildBattleRedBagResultWinEUI",this.addBg(),this.list.itemRenderer=GuildBattleRedBagResultItem},e.prototype.open=function(){t.prototype.open.call(this),this.redBagData=GuildBattleSys.ins().redBagData,this.num.text=""+this.redBagData.getYb,this.list.dataProvider=new eui.ArrayCollection(this.redBagData.logDatas)},e}(BaseWinSingle);__reflect(GuildBattleRedBagResultWin.prototype,"GuildBattleRedBagResultWin"),window.GuildBattleRedBagResultWin=GuildBattleRedBagResultWin;var GuildBattleRedBagWin=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return __extends(e,t),e.prototype.initUI=function(){t.prototype.initUI.call(this),this.layer=LayerMgr.Popup,this.skinName="GuildBattleRedBagWinEUI",this.addBg(),this.setSkinPart("price",new PriceIcon),this.num2.restrict="0-9"},e.prototype.open=function(){t.prototype.open.call(this),this.addClickE(this.closeBtn0,this.onTap),this.addClickE(this.rob,this.onTap),this.addClickE(this.send,this.onTap),this.addClickE(this.btn3,this.onTap),this.addClickE(this.btn4,this.onTap),this.addClickE(this.btn6,this.onTap),this.addChangeE(this.num2,this.onTxtChange),this.addLsn(GuildBattleSys.ins().patchRedBagInfo,this.updatePanel),this.updatePanel()},e.prototype.updatePanel=function(){this.redBagData=GuildBattleSys.ins().redBagData,this.redBagData.canRod?(this.currentState="rob",this.refushInfo()):(this.currentState="send",this.refushSendInfo())},e.prototype.onTxtChange=function(t){var e=this,i=1;switch(t.currentTarget){case this.num2:i=2}Timer.ins()["do"](500,0,1,function(){e.checkInputChange(i)},this)},e.prototype.checkInputChange=function(t){var e;switch(t){case 2:e=Number(this.num2.text),e>this.sendMaxNum?e=this.sendMaxNum:e<Cfg.getConfig(GBConstConfig).hongbaocount[0]&&(e=Cfg.getConfig(GBConstConfig).hongbaocount[0]),this.sendNum=e,this.num2.text=this.sendNum+""}this.checkPercentage()},e.prototype.refushSendInfo=function(){this.sendYb=this.redBagData.remainYB,this.sendMaxNum=this.sendNum=Cfg.getConfig(GBConstConfig).hongbaocount[1],this.price.setPrice(this.sendYb),this.num2.text=this.sendNum+""},e.prototype.refushInfo=function(){this.priceLabel.text=""+this.redBagData.sendYb,this.remainBag.text=""+this.redBagData.count},e.prototype.onTap=function(t){switch(t.currentTarget){case this.closeBtn0:closeWin(GuildWarRedBagWin);break;case this.rob:GuildBattleSys.ins().sendRobRedBag();break;case this.send:GuildSys.ins().myOffice==GuildOffice.FU_MENG_ZHU||GuildSys.ins().myOffice==GuildOffice.MENG_ZHU?GuildBattleSys.ins().sendSetRedBag(this.sendNum):showtipsFail(Lang.gb_str47);break;case this.btn3:--this.sendNum,this.sendNum<Cfg.getConfig(GBConstConfig).hongbaocount[0]&&(this.sendNum=Cfg.getConfig(GBConstConfig).hongbaocount[0]),this.num2.text=this.sendNum+"";break;case this.btn4:++this.sendNum,this.sendNum>this.sendMaxNum&&(this.sendNum=this.sendMaxNum),this.num2.text=this.sendNum+"";break;case this.btn6:this.sendNum=this.sendMaxNum,this.num2.text=this.sendNum+""}},e.prototype.checkPercentage=function(){this.sendYb<this.sendNum&&(this.sendYb=this.sendNum)},e}(BaseWinSingle);__reflect(GuildBattleRedBagWin.prototype,"GuildBattleRedBagWin"),window.GuildBattleRedBagWin=GuildBattleRedBagWin;var GuildBattleResultWin=function(t){function e(){var e=t.call(this)||this;return e.skinName="GuildBattleResultWinEUI",e.layer=LayerMgr.Popup,e.addBg(),e.listRank.itemRenderer=GuildBattleResultItem,e.listRank.dataProvider=e.listRankData=new eui.ArrayCollection,e}return __extends(e,t),e.prototype.open=function(e,i){t.prototype.open.call(this),this.addClickE(this.btnSend,this.onClick),this.updatePanel(e,i)},e.prototype.close=function(){t.prototype.close.call(this)},e.prototype.updatePanel=function(t,e){var i=Cfg.getConfig(GBManorIndexConfig,t);this.imgIcon.source="ldsz_zycs_db"+t,this.imgSR.source="ldsz_zycs_s"+i.level,this.imgName.source="ldsz_zycs_na"+t,this.listRankData.source=e},e.prototype.onClick=function(t){switch(t.target){case this.btnSend:closeWin(e)}},e}(BaseWinSingle);__reflect(GuildBattleResultWin.prototype,"GuildBattleResultWin"),window.GuildBattleResultWin=GuildBattleResultWin;var GuildBattleRivalWin=function(t){function e(){var e=t.call(this)||this;return e.winType=WinType.OverlayWin,e}return __extends(e,t),e.prototype.initUI=function(){t.prototype.initUI.call(this),this.addBg()},e.prototype.open=function(e,i,n){this.data=n,t.prototype.open.call(this,e,i,n)},e.panelNames=[GuildBattleRivalPanel],e}(BaseDuoPanelWin);__reflect(GuildBattleRivalWin.prototype,"GuildBattleRivalWin"),window.GuildBattleRivalWin=GuildBattleRivalWin;var GuildBattleSignUpWin=function(t){function e(){var e=t.call(this)||this;return e.winType=WinType.OverlayWin,e}return __extends(e,t),e.prototype.initUI=function(){t.prototype.initUI.call(this),this.addBg()},e.prototype.open=function(e,i){this.data=i,t.prototype.open.call(this,e)},e.prototype.getParam=function(){return this.data},e.panelNames=[GuildBattleSignUpPanel],e}(BaseWinAutoTab);__reflect(GuildBattleSignUpWin.prototype,"GuildBattleSignUpWin"),window.GuildBattleSignUpWin=GuildBattleSignUpWin;var GuildBattleTimeWin=function(t){function e(){var e=t.call(this)||this;return e.skinName="GuildBattleTimeWinEUI",e.layer=LayerMgr.Tips,e.touchChildren=!1,e.touchEnabled=!1,e}return __extends(e,t),e.prototype.open=function(){t.prototype.open.call(this),this.updateTime()},e.prototype.close=function(){t.prototype.close.call(this),egret.Tween.removeTweens(this)},e.prototype.updateTime=function(){t.prototype.updateTime.call(this);var i=GuildBattleSys.ins().getGuildBattleState();if(i==GuildBattleState.prelimReady||i==GuildBattleState.finalsReady)this.bmpTime.text=""+GuildBattleSys.ins().getGuildBattleTime();else{this.bmpTime.text="0",this.alpha=1;var n=egret.Tween.get(this);n.to({alpha:0},500).call(function(){closeWin(e)},this)}},e}(BaseWinSingle);__reflect(GuildBattleTimeWin.prototype,"GuildBattleTimeWin"),window.GuildBattleTimeWin=GuildBattleTimeWin;
var ProgressBarEff6=function(t){function e(){return t.call(this)||this}return __extends(e,t),e.prototype.iniUI=function(){this.bgimg=new eui.Image,this.bgimg.x=5,this.bgimg.y=0,this.bgimg.source=this.getMaskImg(),this.groupDonw.addChild(this.bgimg),this.objWidth=230,this.lbvalue.x=5,this.lbvalue.y=5},e.prototype.iniShape=function(){this.shape=new eui.Image,this.shape.source=this.getMaskImg(),this.shape.x=6,this.shape.y=3,this.shape.width=0,this.shape.fillMode="repeat"},e.prototype.iniShapebg=function(){},e.prototype.updasteValueText=function(){this.lbvalue.visible=!this.isMax||this.state==ProgressBarEffDataState.max,this.lbvalue.text=this.state==ProgressBarEffDataState.max?"MAX":this.valueName+this.getValue()+"/"+this.getMaxValue(),this.isFisrt||this.updateMan(),this.isFisrt=!1},e.prototype.updateXiaoWeiBa=function(){},e.prototype.updateMan=function(){if(""!=this.getBkRes()){var t=new MC;t.x=262,t.y=36,t.playFile(getEffName(this.getBkRes()),1),this.addChild(t)}},e.prototype.setQianZhuiName=function(t){this.valueName=t},e.prototype.getMaskImg=function(){return"hq_zycs_jd2"},e.prototype.getBgImg=function(){return"hq_zycs_jd1"},e.prototype.getBgmcRes=function(){return"hqjdt"},e.prototype.getXianmcRes=function(){return"hqsg"},e.prototype.getBkRes=function(){return""},e}(ProgressBarEff1);__reflect(ProgressBarEff6.prototype,"ProgressBarEff6");var GuildBattleAwardItem2=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return __extends(e,t),e.prototype.setAwwrd=function(){this.data},e}(GuildBattleAwardItem1);__reflect(GuildBattleAwardItem2.prototype,"GuildBattleAwardItem2"),window.GuildBattleAwardItem2=GuildBattleAwardItem2;var GuildBattleDailyAwardItem=function(t){function e(){var e=t.call(this)||this;return e.skinName="GuildBattleDailyAwardItemEUI",e.list.itemRenderer=ItemBaseReward,e}return __extends(e,t),e.prototype.dataChanged=function(){if(this.data&&this.data.rank){var t=this.data;this.lbTips.text="第"+t.rank+"名每日奖励",this.list.dataProvider=new eui.ArrayCollection(t.rewardDaily)}},e}(BaseItemRender);__reflect(GuildBattleDailyAwardItem.prototype,"GuildBattleDailyAwardItem"),window.GuildBattleDailyAwardItem=GuildBattleDailyAwardItem;var ObjPool=function(){function t(){}return t.pop=function(t){var e=egret.getQualifiedClassName(t),i=this.getArrByClassName(e);return i.pop()||new t},t.push=function(t){if(null!=t){t.reset();var e=egret.getQualifiedClassName(t),i=this.getArrByClassName(e);-1==i.indexOf(t)&&i.length<this.MAX_COUNT&&i.push(t)}},t.getArrByClassName=function(e){var i=t.dic[e]||(t.dic[e]=[]);return i},t.clear=function(e){void 0===e&&(e=0);for(var i in this.dic){var n=t.dic[i];n&&n.length>e&&(n.length=e)}},t.dic={},t.MAX_COUNT=30,t}();__reflect(ObjPool.prototype,"ObjPool");var GuildBattleFbFaceBottom=function(t){function e(){var e=t.call(this)||this;return e.skinName="GuildBattleFbFaceBottomEUI",e.mcHP=GFunc.playUIMovie("boss_xq",45,42,e.groupMc,-1,null),e.mcHP.scaleX=e.mcHP.scaleY=.85,e}return __extends(e,t),e.prototype.dataChanged=function(){if("number"==typeof this.data){var t=this.data,e=LogicSys.ins().getCanAtkByMasterHandle(t);if(e){var i=e.getHP(),n=e.getHpMax();this.groupScroller.height=this.groupMc.height*i/n,this.lbName.textFlow=addColorTF(e.getName(),14931902);var a=GuildBattleSys.ins().lianZhanCounts[t];this.bmpLianZhan.text=""+a,this.groupLianZhan.visible=a>0}}},e.prototype.setShowAtk=function(t){t&&!this.mcAtk&&(this.mcAtk=GFunc.playUIMovie("boss_pk",72,56,this,-1,null)),this.mcAtk.visible=t},e}(BaseItemRender);__reflect(GuildBattleFbFaceBottom.prototype,"GuildBattleFbFaceBottom"),window.GuildBattleFbFaceBottom=GuildBattleFbFaceBottom;var Timer=function(t){function e(){var e=t.call(this)||this;return e._currTime=0,e.rate=1,e.startTick=0,e.curTick=0,e._handlers=[],e._lastHandlers=[],e._currHandlers=[],egret.startTick(e.onEnterFrame,e),e}return __extends(e,t),e.ins=function(){return t.getIns.call(this,e)},e.prototype.getTimer=function(){return this._currTime},e.prototype.getEgretTimer=function(){return egret.getTimer()},e.prototype.setTimeRate=function(t){t>0?t>1?this.rate=1:this.rate=t:this.rate=0,this.curTick=this.startTick=egret.getTimer()},Object.defineProperty(e.prototype,"isPause",{get:function(){return 0==this.rate},enumerable:!0,configurable:!0}),e.prototype.nextFrame=function(t){void 0===t&&(t=33),this.curTick+=t},e.prototype.getRateTime=function(){if(!this.isPause){var t=this.getEgretTimer()-this.startTick;this.curTick=Math.floor(this.startTick+t*this.rate)}return this.curTick},e.binFunc=function(t,e){return t.exeTime>e.exeTime?-1:t.exeTime<e.exeTime?1:0},e.prototype.onEnterFrame=function(t){this._currTime=this.getRateTime(),this._currHandlers=[];for(var i=this._handlers[this._handlers.length-1];i&&i.exeTime<=this._currTime;)this._currHandlers.push(this._handlers.pop()),i=this._handlers[this._handlers.length-1];for(var n=this._currHandlers.length,a=0;n>a;a++){var o=this._currHandlers[a];if(o.isRepeat?o.repeatCount++:o.repeatCount--,o.isGc||this.callHandler(o),o.isRepeat||(o.isGc=0==o.repeatCount),o.isGc)ObjPool.push(o);else{var s=SortUtil.binSearch(this._handlers,o,e.binFunc);this._handlers.splice(s,0,o)}}n=this._lastHandlers.length;for(var a=0;n>a;a++){var o=this._lastHandlers[a];o&&this.callHandler(o),ObjPool.push(o)}return this._lastHandlers.length=0,!1},e.prototype.callHandler=function(t){t.exeTime=this.getTimer()+t.delay,t.call()},e.prototype["do"]=function(t,e,i,n,a,o){void 0===o&&(o=TimerType.FIRST);for(var s=[],r=6;r<arguments.length;r++)s[r-6]=arguments[r];if(0>e||null==n)return void console.log("Timer.do参数错误"+egret.getQualifiedClassName(a));if(!RegUtil.NumericExp.test(""+i))return void console.log("Timer.repeat参数错误,不是整数:"+i);var u=ObjPool.pop(CallerTimer);u.isRepeat=0>=i,u.repeatCount=i,u.delay=e,u.func=n,u.obj=a,u.param=s,0==t?(this.creatHandler(u,o,e),u.call()):this.creatHandler(u,o,t)},e.prototype.creatHandler=function(t,e,i){var n;switch(e){case TimerType.FIRST:n=this.getHandler(t.func,t.obj,this._handlers),n||this.inSertHandler(t,i);break;case TimerType.LAST:n=this.getHandler(t.func,t.obj,this._handlers),n&&this.removeHandlers(n.func,n.obj,this._handlers),this.inSertHandler(t,i);break;case TimerType.NONE:this.inSertHandler(t,i)}},e.prototype.inSertHandler=function(t,i){t.exeTime=i+this.getRateTime();var n=SortUtil.binSearch(this._handlers,t,e.binFunc);this._handlers.splice(n,0,t)},e.prototype.doLast=function(t,e){var i=this.getHandler(t,e,this._lastHandlers);i||(i=ObjPool.pop(CallerTimer),this._lastHandlers.push(i)),i.func=t,i.obj=e},e.prototype.remove=function(t,e){this.removeHandlers(t,e,this._handlers),this.removeHandlers(t,e,this._lastHandlers),this.gcHandlers(t,e,this._currHandlers)},e.prototype.removeHandlers=function(t,e,i){for(var n=i.length-1;n>=0;n--){var a=i[n];a.func==t&&a.obj==e&&i.splice(n,1)}},e.prototype.gcHandlers=function(t,e,i){for(var n=i.length-1;n>=0;n--){var a=i[n];a.func==t&&a.obj==e&&(a.isGc=!0)}},e.prototype.removeAll=function(t){for(var e=this._handlers.length-1;e>=0;e--){var i=this._handlers[e];i.obj==t&&this._handlers.splice(e,1)}for(var e=this._lastHandlers.length-1;e>=0;e--){var i=this._lastHandlers[e];i.obj==t&&this._lastHandlers.splice(e,1)}for(var e=this._currHandlers.length-1;e>=0;e--){var i=this._currHandlers[e];i.obj==t&&(i.isGc=!0)}},e.prototype.getHandler=function(t,e,i){for(var n=i.length-1,a=n;a>=0;a--){var o=i[a];if(o.func==t&&o.obj==e)return o}return null},e.prototype.clear=function(){this._handlers.length=0,this._lastHandlers.length=0,this._currHandlers.length=0},e.EVERY_FRAME=0,e}(BaseIns);__reflect(Timer.prototype,"Timer");var GuildBattleFbFaceTopMy=function(t){function e(){return t.call(this)||this}return __extends(e,t),Object.defineProperty(e.prototype,"hpMcName",{get:function(){return"boss_xq1"},enumerable:!0,configurable:!0}),e}(GuildBattleFbFaceTop);__reflect(GuildBattleFbFaceTopMy.prototype,"GuildBattleFbFaceTopMy"),window.GuildBattleFbFaceTopMy=GuildBattleFbFaceTopMy;var GuildBattleGerenDabiaoItem=function(t){function e(){var e=t.call(this)||this;return e.skinName="GuildBattleGerenDabiaoItemEUI",e.list.itemRenderer=ItemBaseReward,e}return __extends(e,t),e.prototype.dataChanged=function(){if(this.data&&this.data.id){var t=this.data;this.lbRank.text=t.score+"\n"+Lang.fb_str132,this.list.dataProvider=new eui.ArrayCollection(t.reward)}},e}(BaseItemRender);__reflect(GuildBattleGerenDabiaoItem.prototype,"GuildBattleGerenDabiaoItem"),window.GuildBattleGerenDabiaoItem=GuildBattleGerenDabiaoItem;var GuildBattleGerenRankItem=function(t){function e(){var e=t.call(this)||this;return e.skinName="GuildBattleGerenRankItemEUI",e.list.itemRenderer=ItemBaseReward,e}return __extends(e,t),e.prototype.dataChanged=function(){if(this.data&&this.data.id){var t=this.data;t.ranks[0]==t.ranks[1]&&t.ranks[0]<=3?(this.imgRank.source="ldsz_zycs_ph"+t.ranks[0],this.lbRank.text=""):(this.imgRank.source="",this.lbRank.text=""+Lang.common_di+t.ranks[0]+"-"+t.ranks[1]+Lang.common_str5),this.list.dataProvider=new eui.ArrayCollection(t.reward)}},e}(BaseItemRender);__reflect(GuildBattleGerenRankItem.prototype,"GuildBattleGerenRankItem"),window.GuildBattleGerenRankItem=GuildBattleGerenRankItem;var GuildBattleGerenScoreRankItem=function(t){function e(){var e=t.call(this)||this;return e.skinName="GuildBattleGerenScoreRankItemEUI",e}return __extends(e,t),e.prototype.dataChanged=function(){this.data instanceof GuildBattleGerenScoreRankData&&(this.data.rank<=3?(this.imgRank.source="ldsz_zycs_ph"+this.data.rank,this.lbRank.text=""):(this.imgRank.source="",this.lbRank.text=""+Lang.common_di+this.data.rank+Lang.common_str5),this.lbGuildName.text=Lang.chat_str18+"："+this.data.guildName,this.lbRoleName.text=""+this.data.roleName,this.bitScore.text=""+this.data.score)},e}(BaseItemRender);__reflect(GuildBattleGerenScoreRankItem.prototype,"GuildBattleGerenScoreRankItem"),window.GuildBattleGerenScoreRankItem=GuildBattleGerenScoreRankItem;var GuildBattleGerenScoreRankItemTop1=function(t){function e(){var e=t.call(this)||this;return e.skinName="GuildBattleGerenScoreRankItemTop1EUI",e}return __extends(e,t),e.prototype.dataChanged=function(){this.data&&this.data instanceof GuildBattleGerenScoreRankData?(this.data.rank<=3?(this.imgRank.source="ldsz_zycs_ph"+this.data.rank,this.lbRank.text=""):(this.imgRank.source="",this.lbRank.text=""+Lang.common_di+this.data.rank+Lang.common_str5),this.lbGuildName.text=Lang.chat_str18+"："+this.data.guildName,this.lbRoleName.text=Lang.gb_str6+"："+this.data.roleName,this.lbScore.text=Lang.fb_str132+"："+this.data.score):(this.lbGuildName.text=Lang.chat_str18+"："+Lang.act_str87,this.lbRoleName.text=Lang.gb_str6+"："+Lang.act_str87,this.lbScore.text=Lang.fb_str132+"：0")},e}(BaseItemRender);__reflect(GuildBattleGerenScoreRankItemTop1.prototype,"GuildBattleGerenScoreRankItemTop1"),window.GuildBattleGerenScoreRankItemTop1=GuildBattleGerenScoreRankItemTop1;var GuildBattleGuWuItem=function(t){function e(){var e=t.call(this)||this;return e.skinName="GuildBattleGuWuItemEUI",e}return __extends(e,t),e.prototype.dataChanged=function(){this.data instanceof GuildBattleGuWuDaLaoData&&(this.lbRoleName.text=this.data.roleName,this.lbCount.text=""+this.data.count+Lang.common_ci)},e}(BaseItemRender);__reflect(GuildBattleGuWuItem.prototype,"GuildBattleGuWuItem"),window.GuildBattleGuWuItem=GuildBattleGuWuItem;var GuildBattleLingdiAwardItem=function(t){function e(){var e=t.call(this)||this;return e.colors=[0,15733780,16751375,13453311,3183103],e.skinName="GuildBattleLingdiAwardItemEUI",e.list.itemRenderer=ItemBaseReward,e}return __extends(e,t),e.prototype.dataChanged=function(){if(this.data&&this.data.rank){var t=this.data;t.rank<=3?(this.imgRank.source="ldsz_zycs_ph"+t.rank,this.lbRank.text=""):(this.imgRank.source="",this.lbRank.text=""+Lang.common_di+t.rank+Lang.common_str5),3==t.level?(this.lbDec.textColor=11206638,this.lbDec.visible=!0):this.lbDec.visible=!1,this.list.dataProvider=new eui.ArrayCollection(t.rewardRankShow)}},e}(BaseItemRender);__reflect(GuildBattleLingdiAwardItem.prototype,"GuildBattleLingdiAwardItem"),window.GuildBattleLingdiAwardItem=GuildBattleLingdiAwardItem;var GuildBattleLotteryItem=function(t){function e(){var e=t.call(this)||this;return e.imgs=[],e.lbGuildNames=[],e.checkBoxs=[],e.tempIndex=-1,e.skinName="GuildBattleLotteryItemEUI",e.imgs=[e.img0,e.img1,e.img2,e.img3],e.lbGuildNames=[e.lbGuildName0,e.lbGuildName1,e.lbGuildName2,e.lbGuildName3],e.checkBoxs=[e.checkBox0,e.checkBox1,e.checkBox2,e.checkBox3],e.radioGroup=new eui.RadioButtonGroup,e.checkBox0.group=e.radioGroup,e.checkBox1.group=e.radioGroup,e.checkBox2.group=e.radioGroup,e.checkBox3.group=e.radioGroup,e.checkBox0.name="checkBox0",e.checkBox1.name="checkBox1",e.checkBox2.name="checkBox2",e.checkBox3.name="checkBox3",e.btnSend.name="GuildBattleLotteryItem.btnSend",e}return __extends(e,t),e.prototype.dataChanged=function(){if(this.data instanceof GuildBattleManorData){this.imgIcon.source="ldsz_zycs_db"+this.data.id+"_a",this.imgSR.source="ldsz_zycs_s"+this.data.getConfig().level,this.imgName.source="ldsz_zycs_na"+this.data.id;for(var t=this.data.VSData.isVSing(),e=0;e<this.lbGuildNames.length;e++)this.lbGuildNames[e].text=this.data.VSData.getGuildName(e),this.checkBoxs[e].visible=0==this.data.VSData.lotteryId?this.data.VSData.getGuildId(e)>0:!1,this.checkBoxs[e].value=e+1,this.imgs[e].visible=!1;if(t)if(this.data.VSData.lotteryId>0){var i=this.data.VSData.getGuildIndex(this.data.VSData.lotteryId);this.checkBoxs[i].visible=!0,this.checkBoxs[i].selected=!0,this.imgs[i].visible=!0,this.lbTips.visible=!0,this.group.visible=!1}else this.imgs[this.tempIndex]&&(this.imgs[this.tempIndex].visible=!0),this.lbConsu.text=""+this.data.getGuessConfig().needyuanbao,this.lbTips.visible=!1,this.group.visible=!0;else this.lbTips.visible=!1,this.group.visible=!1}},e.prototype.getSelectGuildIindex=function(){return this.radioGroup.selectedValue},e.prototype.updateSelect=function(t){for(var e=0;e<this.imgs.length;e++)this.imgs[e].visible=!1;this.tempIndex=t,this.imgs[t].visible=!0},e}(BaseItemRender);__reflect(GuildBattleLotteryItem.prototype,"GuildBattleLotteryItem"),window.GuildBattleLotteryItem=GuildBattleLotteryItem;var GuildBattleMainItem=function(t){function e(){var e=t.call(this)||this;return e.lbGuildNames=[],e.skinName="GuildBattleMainItemEUI",e.lbGuildNames=[e.lbGuildName0,e.lbGuildName1,e.lbGuildName2,e.lbGuildName3],e.btnLook.textFlow=addColorTF(StrUtil.addUnderLine(Lang.gb_str49),5767068),e.showRp(!1),e.addClickE(e.btnLine,e.onClickLine),e.addClickE(e.btnLook,e.onClickbtnLook),e}return __extends(e,t),e.prototype.onClickLine=function(){var t=this.data,e=GuildBattleSys.ins().getGuildBattleState();if(e==GuildBattleState.signUp)openWin(GuildBattleSignUpWin,-1,t);else{var i=GuildBattleSys.ins().isBattle();i&&e>=GuildBattleState.prelimReady&&e<=GuildBattleState.finals&&GuildBattleSys.ins().sendEnterFb()}},e.prototype.onClickbtnLook=function(){var t=this.data,e=GuildBattleSys.ins().getGuildBattleState();if(t.VSData.isVSing()){var i=e==GuildBattleState.finalsReady||e==GuildBattleState.finals?1:0;openWin(GuildBattleRivalWin,0,i,t)}else showtipsFail(Lang.gb_str26)},e.prototype.updateData=function(t,e,i){this.data=t,this.imgBg.source="ldsz_zycs_qz"+t.getConfig().level,this.imgIcon.source="ldsz_zycs_db"+t.id,this.imgSR.source="ldsz_zycs_s"+t.getConfig().level,this.imgName.source="ldsz_zycs_na"+t.id,this.group.visible=!0,this.imgYbm.visible=!1,this.lbDecBg.visible=!0,e==GuildBattleState.signUp?(this.currentState="rank",this.updateSignUpData(t)):(this.currentState="vs",this.updateVsData(t,e,i))},e.prototype.updateSignUpData=function(t){for(var e=0;e<this.lbGuildNames.length;e++)this.lbGuildNames[e].text=t.signUpDatas[e]?t.signUpDatas[e].getGuildName():""+Lang.act_str87,this.lbGuildNames[e].textColor=14931902;this.btnLine.textFlow=addColorTF(StrUtil.addUnderLine(Lang.gb_str1),5767068),this.imgYbm.visible=t.getSignUpRank()>0,this.lbDec.text=Lang.gb_str3+"："+t.getSignUpCount(),this.showRp(RpSys.ins().getData(GuildMapWin,GuildBattleMainWin,GuildBattleMainPanel,"signUp"))},e.prototype.updateVsData=function(t,e,i){i?(this.group.visible=t.isVS(),GuildBattleSys.ins().getGuildBattleState()==GuildBattleState.end||GuildBattleSys.ins().getGuildBattleState()==GuildBattleState.lottery?this.btnLine.text="":this.btnLine.textFlow=addColorTF(StrUtil.addUnderLine(Lang.gb_str4),15733780)):this.btnLine.text="";for(var n=0;n<this.lbGuildNames.length;n++)this.lbGuildNames[n].text=t.VSData.getGuildName(n),this.lbGuildNames[n].textColor=t.VSData.guildIds[n]==GuildSys.ins().guildID?5767068:14931902;this.imgVS0.visible=this.imgVS1.visible=GuildBattleSys.ins().getGuildBattleState()!=GuildBattleState.end},e.prototype.showRp=function(t){this.redPoint.visible=t},e}(BaseItemRender);__reflect(GuildBattleMainItem.prototype,"GuildBattleMainItem"),window.GuildBattleMainItem=GuildBattleMainItem;var GuildBattleMobaiManorItem=function(t){function e(){var e=t.call(this)||this;return e.skinName="GuildBattleMobaiManorItemEUI",e.listRank.itemRenderer=GuildBattleMoBaiRankItem,e}return __extends(e,t),e.prototype.dataChanged=function(){this.data instanceof GuildBattleMobaiManorData&&(this.lbName.text=this.data.getManorName(),this.listRank.dataProvider=new eui.ArrayCollection(this.data.rankDatas))},e}(BaseItemRender);__reflect(GuildBattleMobaiManorItem.prototype,"GuildBattleMobaiManorItem"),window.GuildBattleMobaiManorItem=GuildBattleMobaiManorItem;var GuildBattleMoBaiRankItem=function(t){function e(){var e=t.call(this)||this;return e.skinName="GuildBattleMoBaiRankItemEUI",e}return __extends(e,t),e.prototype.dataChanged=function(){this.data instanceof GuildBattleMobaiRankData&&(this.imgRank.source="ldsz_zycs_n"+this.data.rank+"a",this.lbGuildName.text=Lang.chat_str18+"："+this.data.guildName,this.lbRoleName.text=Lang.gb_str6+"："+this.data.roleName)},e}(BaseItemRender);__reflect(GuildBattleMoBaiRankItem.prototype,"GuildBattleMoBaiRankItem"),window.GuildBattleMoBaiRankItem=GuildBattleMoBaiRankItem;var GuildBattleMoBaiRankItemTop1=function(t){function e(){var e=t.call(this)||this;return e.skinName="GuildBattleMoBaiRankItemTop1EUI",e}return __extends(e,t),e.prototype.dataChanged=function(){this.data&&this.data instanceof GuildBattleMobaiRankData?(this.data.rank<=3?(this.imgRank.source="ldsz_zycs_ph"+this.data.rank,this.lbRank.text=""):(this.imgRank.source="",this.lbRank.text=""+Lang.common_di+this.data.rank+Lang.common_str5),this.lbGuildName.text=Lang.chat_str18+"："+this.data.guildName,this.lbRoleName.text=Lang.gb_str6+"："+this.data.roleName):(this.lbGuildName.text=Lang.chat_str18+"："+Lang.act_str87,this.lbRoleName.text=Lang.gb_str6+"："+Lang.act_str87)},e}(BaseItemRender);__reflect(GuildBattleMoBaiRankItemTop1.prototype,"GuildBattleMoBaiRankItemTop1"),window.GuildBattleMoBaiRankItemTop1=GuildBattleMoBaiRankItemTop1;var GuildBattlePrelimItem=function(t){function e(){var e=t.call(this)||this;return e.skinName="GuildBattlePrelimItemEUI",e}return __extends(e,t),e.prototype.dataChanged=function(){this.data instanceof GuildBattleRivalData&&(""==this.data.guildNameL?this.currentState="kong2":""==this.data.guildNameR?this.currentState="kong":this.currentState="normal",this.lbGuildNameL.text=this.data.guildNameL,this.lbRoleNameL.text=Lang.gb_str6+"："+this.data.roleNameL,this.lbCountL.text=Lang.gb_str7+"："+this.data.countL,this.lbLevelL.text=Lang.gb_str8+"："+this.data.levelL,this.imgBmL.visible=GuildSys.ins().isSameGuild(this.data.guildIdL),this.lbGuildNameR.text=this.data.guildNameR,this.lbRoleNameR.text=Lang.gb_str6+"："+this.data.roleNameR,this.lbCountR.text=Lang.gb_str7+"："+this.data.countR,this.lbLevelR.text=Lang.gb_str8+"："+this.data.levelR,this.imgBmR.visible=GuildSys.ins().isSameGuild(this.data.guildIdR),0==this.data.winIndex?(this.imgWinL.source="",this.imgWinR.source=""):(this.imgWinL.source=1==this.data.winIndex?"ldsz_zycs_win":"ldsz_zycs_lose",this.imgWinR.source=2==this.data.winIndex?"ldsz_zycs_win":"ldsz_zycs_lose"))},e}(BaseItemRender);__reflect(GuildBattlePrelimItem.prototype,"GuildBattlePrelimItem"),window.GuildBattlePrelimItem=GuildBattlePrelimItem;var GuildBattleQuickItem=function(t){function e(){var e=t.call(this)||this;return e.skinName="GuildBattleQuickItemEUI",e}return __extends(e,t),e.prototype.dataChanged=function(){var t=this.data;this.lbOffice.text=GuildSys.ins().getOfficeName(t.office),this.lbRoleName.text=t.name,this.imgIcon.source="ldsz_zycs_r"+(t.sex+1)+"_png"},e}(BaseItemRender);__reflect(GuildBattleQuickItem.prototype,"GuildBattleQuickItem"),window.GuildBattleQuickItem=GuildBattleQuickItem;var GuildBattleRedBagResultItem=function(t){function e(){var e=t.call(this)||this;return e.skinName="GuildBattleRedBagResultItemEUI",e}return __extends(e,t),e.prototype.dataChanged=function(){this.data instanceof GuildBattleRedBagLogData&&(this.num.text=""+this.data.yb,this.nameLabel.text=""+this.data.name)},e}(BaseItemRender);__reflect(GuildBattleRedBagResultItem.prototype,"GuildBattleRedBagResultItem"),window.GuildBattleRedBagResultItem=GuildBattleRedBagResultItem;var GuildBattleResultItem=function(t){function e(){var e=t.call(this)||this;return e.skinName="GuildBattleResultItemEUI",e}return __extends(e,t),e.prototype.dataChanged=function(){this.data instanceof GuildBattleFbResultData&&(this.data.rank<=3?(this.imgRank.source="ldsz_zycs_ph"+this.data.rank,this.lbRank.text=""):(this.imgRank.source="",this.lbRank.text=""+Lang.common_di+this.data.rank+Lang.common_str5),this.lbGuildName.text=Lang.chat_str18+"："+this.data.guildName,this.lbRoleName.textFlow=addColorTF(Lang.gb_str6+"："+addColor(""+this.data.roleName,5767068)),this.imgBm.visible=this.data.guildId==GuildBattleSys.ins().guildId)},e}(BaseItemRender);__reflect(GuildBattleResultItem.prototype,"GuildBattleResultItem"),window.GuildBattleResultItem=GuildBattleResultItem;var GuildBattleSignUpItem=function(t){function e(){var e=t.call(this)||this;return e.descColor=[15733780,16751375,13470975,2342605,14931902,5767068,5767068,5767068],e.skinName="GuildBattleSignUpItemEUI",e}return __extends(e,t),e.prototype.dataChanged=function(){if(this.data instanceof GuildBattleSignUpData){var t=this.itemIndex+1;this.imgRank.source=3>=t?"ldsz_zycs_n"+t+"a":"",this.lbRank.text=3>=t?"":""+t,this.lbGuildName.text=""+this.data.guildName,this.lbRoleName.textFlow=addColorTF(Lang.gb_str6+"："+addColor(this.data.roleName,5767068)),this.lbCount.textFlow=addColorTF(Lang.gb_str7+"："+addColor(this.data.count,5767068)),this.lbLevel.textFlow=addColorTF(Lang.gb_str8+"："+addColor(this.data.level,5767068));var e=GuildBattleSys.ins().getPowerCompare(this.data.power),i=e?e.dec:"--",n=e?this.descColor[e.index-1]:5767068;this.lbCompare.textFlow=addColorTF(Lang.gb_str12+"："+addColor(i,n)),this.imgBm.visible=this.data.isBenHui()}},e}(BaseItemRender);__reflect(GuildBattleSignUpItem.prototype,"GuildBattleSignUpItem"),window.GuildBattleSignUpItem=GuildBattleSignUpItem;var ScrollValueLabel=function(t){function e(){var e=t.call(this)||this;return e._lastValueArr=[],e._checkIndex=0,e}return __extends(e,t),e.prototype.setValue=function(t,e){this.width=200,this._value=t;var i=this._value.toString();this._valueArr=i.split("").reverse(),e?(this._checkIndex=0,Timer.ins()["do"](1,0,Timer.EVERY_FRAME,this.timerUpdate,this)):(Timer.ins().remove(this.timerUpdate,this),this.text=this._value.toString(),this._lastValueArr=this._value.toString().split(""))},e.prototype.timerUpdate=function(){for(var t=this._checkIndex;t<this._valueArr.length;t++){var e=0;if(t<this._lastValueArr.length&&(e=parseInt(this._lastValueArr[t])),e!=parseInt(this._valueArr[t])){e++,e>=10&&(e=0),this._lastValueArr[t]=e.toString();break}this._lastValueArr[t]=e.toString(),this._checkIndex=t}var i=this._lastValueArr.reverse().join("");this._lastValueArr.reverse(),this.text=i,i==this._value.toString()&&Timer.ins().remove(this.timerUpdate,this)},e.prototype.$onClose=function(){Timer.ins().removeAll(this),DisUtil.remove(this)},e}(eui.BitmapLabel);__reflect(ScrollValueLabel.prototype,"ScrollValueLabel");var Star=function(t){function e(e){void 0===e&&(e=StarData.F_1());var i=t.call(this)||this;return i.isFisrt=!0,i.starData=e,i.reset(),i.iniUI(),i.touchEnabled=!1,i.createStarImage(e.curStar,e.maxStar),i}return __extends(e,t),e.prototype.setCurStar=function(t,e){if(void 0===e&&(e=!0),this.starData.curStar!=t){var i=this.starData.curStar;if(this.starData.curStar=t,this.createStarImage(this.starData.curStar,this.starData.maxStar),!this.isFisrt&&0!=t&&e&&t>i)for(var n=0;n<this.starData.mcs.length;n++){var a=this.starData.mcs[n];this.group2.getElementAt(this.group2.numChildren-1).addChild(MC.createCenterGruop(getEffName(a.mcName),1))}}this.isFisrt=!1},e.prototype.setMaxStar=function(t){this.starData.maxStar!=t&&(this.starData.maxStar=t,this.createStarImage(this.starData.curStar,this.starData.maxStar))},e.prototype.iniUI=function(){this.group1=new eui.Group;var t=new eui.HorizontalLayout;t.gap=this.starData.gap,this.group1.layout=t,this.addChild(this.group1),this.group2=new eui.Group,t=new eui.HorizontalLayout,t.gap=this.starData.gap,this.group2.layout=t,this.addChild(this.group2)},e.prototype.createStarImage=function(t,e){var i=this.group1.numChildren;if(e!=i){this.group1.removeChildren();for(var n=0;e>n;n++){var a=DisUtil.createEuiImage(this,this.starData.staremptyImgName);this.group1.addChild(a)}}var o=this.group2.numChildren;if(0==t&&this.group2.removeChildren(),t>=o||0==t)for(var n=this.group2.numChildren;t>n;n++){var s=new StarItem,r=this.starData.mc?this.starData.mc.mcName:"";s.setData(this.starData.getCurStarImg(n),r),s.x=0,s.y=0,this.group2.addChild(s)}else{this.group2.removeChildren();for(var n=0;t>n;n++){var s=new StarItem,r=this.starData.mc?this.starData.mc.mcName:"";s.setData(this.starData.getCurStarImg(n),r),s.x=0,s.y=0,this.group2.addChild(s)}}},e.prototype.getData=function(){return this.starData},e.prototype.reset=function(){this.isFisrt=!0},e}(egret.DisplayObjectContainer);__reflect(Star.prototype,"Star");var StarData=function(){function t(){this.curStar=0,this.maxStar=1,this.starImgArrayName=[],this.height=0,this.gap=0,this.mcs=[]}return t.prototype.getCurStarImg=function(t){return this.starImgArrayName.length>0?this.starImgArrayName[t]:this.starImgName},t.F=function(){var e=new t;return e.mcs=[new StarDataMCData("cbxb",23,25,47)],e},t.F_1=function(){var t=this.F();return t.starImgName="chibang_zycs_star_02",t.staremptyImgName="chibang_zycs_star_01",t.height=50,t.mcs.push(new StarDataMCData("cbsx",23,25,47)),t},t.F_2=function(){var t=this.F();return t.starImgName="task_zycs_xx",t.staremptyImgName="task_zycs_xx",t.height=26,t.mcs=[new StarDataMCData("cbxb",21,20,28)],t},t.F_3=function(){var t=this.F();return t.starImgName="zhaunsheng_zycs_yz",t.staremptyImgName="zhaunsheng_zycs_yk",t.height=55,t.mc=new StarDataMCData("tszx2",25,25,53),t.mcs=[new StarDataMCData("tszx1",25,25,53)],t},t.F_4=function(){var t=this.F();return t.starImgArrayName=["jinglian_zycs_gem2","jinglian_zycs_gem2","jinglian_zycs_gem2","jinglian_zycs_gem3","jinglian_zycs_gem3","jinglian_zycs_gem3","jinglian_zycs_gem3","jinglian_zycs_gem3","jinglian_zycs_gem4","jinglian_zycs_gem4","jinglian_zycs_gem4","jinglian_zycs_gem4","jinglian_zycs_gem4"],t.staremptyImgName="jinglian_zycs_gem1",t.maxStar=t.starImgArrayName.length,t.gap=8,t.mcs=[new StarDataMCData("cbxb",10,23,30)],t},t.F_5=function(){var t=this.F();return t.starImgName="chibang_zycs_star_02",t.staremptyImgName="chibang_zycs_star_01",t.height=50,t.mcs.push(new StarDataMCData("xxty",23,25,47)),t},t}();__reflect(StarData.prototype,"StarData");var StarDataMCData=function(){function t(t,e,i,n){this.x=0,this.y=0,this.gap=0,this.type=0,this.mcName=t,this.x=e,this.y=i,this.gap=n}return t}();__reflect(StarDataMCData.prototype,"StarDataMCData");var GuildBattleFbPanel=function(t){function e(){var e=t.call(this)||this;return e.flagsValues=[],e.gridEffHandles=[],e.skinName="GuildBattleFbPanelEUI",e.list.itemRenderer=GuildBattleFbFace,e.list.dataProvider=e.listData=new eui.ArrayCollection,e.listEnemy.itemRenderer=GuildBattleFbFaceBottom,e.listEnemy.dataProvider=e.listEnemyData=new eui.ArrayCollection,e.bossBloodComponent.visible=!1,e}return __extends(e,t),e.prototype.open=function(){t.prototype.open.call(this),this.addClickE(this.btnDetail,this.onClick),this.addClickE(this.btnDetail0,this.onClick),this.addClickE(this.btnDaBiao,this.onClick),this.addClickE(this.btnGuWu,this.onClick),this.addClickE(this.btnGuaji,this.onClick),this.addClickE(this.btnStopGuaji,this.onClick),this.addClickE(this.itemMyNPC,this.onClick),this.addClickE(this.itemEnemyNPC,this.onClick),this.addClickE(this.itemBoss,this.onClick),this.addItemTapE(this.list,this.onEnemyListClick),this.addItemTapE(this.listEnemy,this.onEnemyListClick),this.addLsn(FbSys.ins().patchBossBlood,this.onBossBlood),this.addLsn(FbSys.ins().patchBossHuDun,this.onDunChange),this.addLsn(GuildBattleSys.ins().patchTimeInfo,this.timeStateChange),this.addLsn(GuildBattleSys.ins().patchState,this.timeStateChange),this.addLsn(GuildBattleSys.ins().patchGerenScoreDabiao,this.updateScoreDabiao),this.addLsn(GuildBattleSys.ins().patchGuwuInfo,this.updateGuwu),this.addLsn(GuildBattleSys.ins().patchGuwuUp,this.updateGuwu),this.addLsn(GuildBattleSys.ins().patchGuwuNotice,this.updateGuwu),this.addLsn(LogicSys.ins().patchCreateCommEntity,this.updateGuaJi),this.addLsn(MapContainer.ins().patchGridClick,this.onMapGridClick),this.addLsn(LogicSys.ins().patchEntityClick,this.onEntityClick),this.addLsn(LogicSys.ins().patchMainRoleTargetMasterChange,this.onMainRoleTargetMasterChange),this.onDunChange(),this.timeStateChange(),this.updateTime(),this.updateGuwu(),this.updateScoreDabiao(),FbSys.ins().bossBloodData.hp>0&&(this.bossBloodComponent.open(FbSys.ins().bossBloodData),this.onBossBlood()),0==GuildBattleFbFAQWin.isOpen&&openWin(GuildBattleFbFAQWin)},e.prototype.close=function(){t.prototype.close.call(this);var e=Cfg.getConfig(GBConstConfig).movepoint;if(this.flagsValues.length>0){for(var i=0;i<e.length;i++)MapContainer.ins().setCellFlags(e[i][0],e[i][1],this.flagsValues[i]);this.flagsValues.length=0}if(this.gridEffHandles.length>0){for(var i=0;i<this.gridEffHandles.length;i++)LogicSys.ins().removeEntityByHandle(this.gridEffHandles[i]);this.gridEffHandles.length=0}},e.prototype.updateTime=function(){t.prototype.updateTime.call(this),this.updateTopBoss(),this.updateTimeAndScore(),this.updateAtkingTarget(),this.updateAtkerList(),this.updateEnemys()},e.prototype.updateTopBoss=function(){for(var t=GuildBattleSys.ins().bossDatas,e=0,i=t;e<i.length;e++){var n=i[e];0==n.guildId?this.itemBoss.data=n:n.guildId==GuildBattleSys.ins().guildId?this.itemMyNPC.data=n:this.itemEnemyNPC.data=n}},e.prototype.updateTimeAndScore=function(){var t=GuildBattleSys.ins().getGuildBattleState(),e=GuildBattleSys.ins().getGuildBattleTime(),i=addColor(getFormatTime(e,"mm:ss"),16115290);this.lbTime.textFlow=addColorTF(Lang.gb_strs[t]+i),this.lbMyScore.text=""+Lang.fb_str113+GuildBattleSys.ins().myScore,this.lbEnemyScore.text=""+Lang.fb_str113+GuildBattleSys.ins().enemyScore,(t==GuildBattleState.prelimReady||t==GuildBattleState.finalsReady)&&30>=e&&(isShowWin(GuildBattleTimeWin)||openWin(GuildBattleTimeWin))},e.prototype.updateGuwu=function(){var t=GuildBattleSys.ins().guwuData;this.name1.text=t.myGuildName,this.name2.text=""==t.enemyGuildName?Lang.act_str87:t.enemyGuildName;var e=AttrData.getFm(null,5767068,"","+");this.lbMyAttr.textFlow=addColorTF(AttrData.parse(t.getMyJtGuwuAttrs(),{fm:e}).join("\n")),e=AttrData.getFm(null,15733780,"","+"),this.lbEnemyAttr.textFlow=addColorTF(AttrData.parse(t.getEnemyJtGuwuAttrs(),{fm:e}).join("\n"));var i=t.guwuGr<t.getConfigGr().count;this.btnGuWu.redPoint.visible=i,i?Timer.ins()["do"](1e3,3e3,0,this.doudong,this,TimerType.FIRST):Timer.ins().remove(this.doudong,this)},e.prototype.doudong=function(){DisUtil.shakeIt(this.btnGuWu,5,100)},e.prototype.updateAtkingTarget=function(){var t=this.target.data,e=!1;if(t instanceof GuildBattleBossData)this.target.dataChanged(),e=!t.isDie();else if("number"==typeof t){var i=LogicSys.ins().getCanAtkByMasterHandle(t);i&&i.isAlive()&&LogicSys.ins().centerEntity.isAlive()&&(e=!0,this.target.dataChanged())
}this.groupAtk.visible=this.target.visible=e},e.prototype.updateAtkerList=function(){var t=LogicSys.ins().centerEntity.AI.getChouhenHandleList();this.listData.source=t,this.listData.refresh(),this.scrollerBeAtk.height=127*Math.min(2,t.length),this.groupBeAtk.visible=t.length>0},e.prototype.updateEnemys=function(){var t=LogicSys.ins().getEntityMasterHandleListByTeamId();this.listEnemyData.source=t,this.listEnemyData.refresh(),this.scrollerEnemy.width=147*Math.min(4,t.length)},e.prototype.updateScoreDabiao=function(){var t=GuildBattleSys.ins().scoreDabiaoData;t&&t.getCurConfig()&&(this.lbDaBiao.text=Lang.fb_str132+"："+t.score+"/"+t.getCurConfig().score,this.btnDaBiao.redPoint.visible=t.getRewardState()==ActRewardState.CanGet)},e.prototype.createEff=function(t){var e=new EntityEff;e.handle=VirtualServer.ins().getHandle(),e.entityType=EntityType.EFF;var i=new EntityData;return i.setBodyFileName("xmzb_dw"),e.data=i,e.x=t.x,e.y=t.y,!isNaN(t.scaleX)&&(e.scaleX=t.scaleX),!isNaN(t.scaleY)&&(e.scaleY=t.scaleY),!isNaN(t.rotation)&&(e.rotation=t.rotation),e},e.prototype.timeStateChange=function(){var t=Cfg.getConfig(GBConstConfig).movepoint,e=GuildBattleSys.ins().getGuildBattleState();if(e==GuildBattleState.prelimReady||e==GuildBattleState.finalsReady){this.flagsValues.length=0,this.gridEffHandles.length=0;for(var i=0;i<t.length;i++){var n=t[i][0],a=t[i][1];this.flagsValues[i]=MapContainer.ins().getCellFlags(n,a),MapContainer.ins().setCellFlags(n,a,0)}for(var o=Cfg.getConfig(GBConstConfig),s=o.topDoorEffPos,i=0;i<s.length;i++){var r=this.createEff(s[i]);this.gridEffHandles.push(r.handle),LogicSys.ins().addMapEff(r)}for(var u=o.bottomDoorEffPos,i=0;i<u.length;i++){var r=this.createEff(u[i]);this.gridEffHandles.push(r.handle),LogicSys.ins().addMapEff(r)}}else if(this.flagsValues.length>0){for(var i=0;i<t.length;i++)MapContainer.ins().setCellFlags(t[i][0],t[i][1],this.flagsValues[i]),LogicSys.ins().removeEntityByHandle(this.gridEffHandles[i]);this.flagsValues.length=0,this.gridEffHandles.length=0}},e.prototype.onBossBlood=function(){this.bossBloodComponent.isInit&&(this.bossBloodComponent.visible=!0),this.bossBloodComponent.open(FbSys.ins().bossBloodData),this.bossBloodComponent.updateHp(FbSys.ins().bossBloodData.hp),this.target.dataChanged()},e.prototype.onDunChange=function(){this.bossBloodComponent.updateDunChange(FbSys.ins().bossHuDun)},e.prototype.onAtkerChange=function(t){void 0===t&&(t=0);var e=null;t>0&&(e=LogicSys.ins().getCanAtkByMasterHandle(t)),e?this.target.data=e.masterHandle:this.target.data=null,this.updateAtkingTarget()},e.prototype.onEnemyListClick=function(t){this.setGuaJi(!1);var e=t.currentTarget.selectedItem;e&&(LogicSys.ins().atkTargetByMasterHandle(e),this.onAtkerChange(e))},e.prototype.updateGuaJi=function(){this.setGuaJi(!0)},e.prototype.onMapGridClick=function(t){this.setGuaJi(!1),this.onAtkerChange();var e=GuildBattleSys.ins().getGuildBattleState();if((e==GuildBattleState.prelimReady||e==GuildBattleState.finalsReady)&&MapContainer.ins().checkWalkable(Math.floor(t.x/MapBase.CELL_SIZE),Math.floor(t.y/MapBase.CELL_SIZE))){var i=MapContainer.ins().getPath(t,LogicSys.ins().centerEntity);i||showtipsFail(Lang.gb_str63)}},e.prototype.onMainRoleTargetMasterChange=function(t){this.onAtkerChange(t)},e.prototype.onEntityClick=function(){this.setGuaJi(!1)},e.prototype.setGuaJi=function(t){LogicSys.ins().setCenterEntityGuaji(t),this.btnGuaji.visible=!t,this.btnStopGuaji.visible=t},e.prototype.onClick=function(t){var e=this;switch(t.currentTarget){case this.btnDetail:case this.btnDetail0:openWin(GuildBattleDetailsWin);break;case this.btnDaBiao:var i=GuildBattleSys.ins().scoreDabiaoData;if(i.getRewardState()==ActRewardState.NotReached)return void showtipsFail(Lang.gb_str54);if(i.getRewardState()==ActRewardState.Geted)return void showtipsFail(Lang.guild_str58);GuildBattleSys.ins().sendGerenScoreDabiao(i.getCurConfig().id),showtipsFail(Lang.gb_str56);break;case this.btnGuWu:openWin(GuildBattleGuWuWin);break;case this.btnGuaji:this.setGuaJi(!0);break;case this.btnStopGuaji:this.setGuaJi(!1);break;case this.itemMyNPC:var n=this.itemMyNPC.data;n&&(this.setGuaJi(!1),LogicSys.ins().centerEntity.AI.resetTargetALL(),LogicSys.ins().onMapGridClick(new XY(n.mapX*MapBase.CELL_SIZE,n.mapY*MapBase.CELL_SIZE),function(){e.setGuaJi(!0)}),this.setSelectTop(t.currentTarget));break;case this.itemEnemyNPC:var a=this.itemEnemyNPC.data;a&&(this.setGuaJi(!1),LogicSys.ins().centerEntity.AI.resetTargetALL(),LogicSys.ins().onMapGridClick(new XY(a.mapX*MapBase.CELL_SIZE,a.mapY*MapBase.CELL_SIZE),function(){e.setGuaJi(!0)}),this.setSelectTop(t.currentTarget));break;case this.itemBoss:var o=this.itemBoss.data;o&&(this.setGuaJi(!1),LogicSys.ins().centerEntity.AI.resetTargetALL(),LogicSys.ins().onMapGridClick(new XY(o.mapX*MapBase.CELL_SIZE,o.mapY*MapBase.CELL_SIZE),function(){e.setGuaJi(!0)}),this.setSelectTop(t.currentTarget))}},e.prototype.setSelectTop=function(t){this.itemEnemyNPC.setImgSelect(!1),this.itemBoss.setImgSelect(!1),this.itemMyNPC.setImgSelect(!1),t.setImgSelect(!0)},e}(BasePanel);__reflect(GuildBattleFbPanel.prototype,"GuildBattleFbPanel"),window.GuildBattleFbPanel=GuildBattleFbPanel;var StarItem=function(t){function e(){var e=t.call(this)||this;return e.img=new eui.Image,e.mc=new MC,e.addChild(e.img),e.mc.x=27,e.mc.y=27,e.addChild(e.mc),e}return __extends(e,t),e.prototype.setData=function(t,e){this.img.source=t,this.img.validateNow(),""!=e&&this.mc.playFile(ResMgr.getEffName(e),-1)},e}(BaseEuiWin);__reflect(StarItem.prototype,"StarItem");var DamageListCom=function(t){function e(){var e=t.call(this)||this;return e.initUI(),e}return __extends(e,t),e.prototype.initUI=function(){this.skinName="DamageListComponentSkin",this.list.itemRenderer=DamageListComItem,this.list.dataProvider=this.arrayCollection=new eui.ArrayCollection},e.prototype.open=function(e){t.prototype.open.call(this),this.addClickE(this.btnQueHuan,this.onToggleTouchTap),this.updateDamage(e)},e.prototype.updateDamage=function(t){var e=t.playerList.concat();SortUtil.sortOn(e,["damage"],[SortType.down]),e=e.slice(0,Math.min(e.length,5)),this.arrayCollection.source=e;var i=t.playerList.length;this.myDpsTxt.textFlow=addColorTF(Lang.common_str3+" "+addColor("0",5949490));for(var n=0;i>n;n++)if(t.playerList[n].id==Actor.ins().actorID){var a=GFunc.overLength(t.playerList[n].damage);this.myDpsTxt.textFlow=addColorTF(Lang.common_str3+" "+addColor(""+a,5949490));break}this.desTxt.text=this.getDesc()},e.prototype.getDesc=function(){var t=Cfg.getConfig(FubenConfig,FbSys.ins().fbId).group,e="";switch(t){case FbGroup.City:e="";break;case FbGroup.GuildBoss:e=Lang.fb_str13;break;case FbGroup.Siege:e=Lang.zyz_str11;break;default:e=Lang.fb_str15}return e},e.prototype.onToggleTouchTap=function(){this.currentState="max"==this.currentState?"min":"max"},e}(BaseEUI);__reflect(DamageListCom.prototype,"DamageListCom"),window.DamageListCom=DamageListCom;var DamageListComItem=function(t){function e(){var e=t.call(this)||this;return e.skinName="DamageListItemSkin",e}return __extends(e,t),e.prototype.dataChanged=function(){if(this.data.roleName){var t=this.data,e=this.itemIndex+1;4>e?this.rankImg.source="jjc_zycs_no"+e:this.rankImg.source="",this.rankTxt.text=""+e,this.lbName.text=""+t.roleName,this.lbName0.text=""+GFunc.overLength(t.damage)}},e}(BaseItemRender);__reflect(DamageListComItem.prototype,"DamageListComItem"),window.DamageListComItem=DamageListComItem;var DropDown=function(t){function e(){var e=t.call(this)||this;return e.skinName="DropDownSkin",e.currentState="up",e.addEventListener(egret.TouchEvent.TOUCH_TAP,e.onTap,e),e.eL.addEventListener(eui.ItemTapEvent.ITEM_TAP,function(t){e.name=t.item.name,e.dispatchEventWith(egret.Event.CHANGE)},e),e}return __extends(e,t),e.prototype.bindData=function(t,e){void 0===e&&(e=0);var i;if("string"==typeof t[0]||"number"==typeof t[0]){i=[];for(var n in t)i[n]={name:t[n]+"",value:t[n]+""}}else i=t;this.data={listData:i,def:e},this.eL&&this.setData()},e.prototype.onTap=function(t){var e=this;this.currentState="up"==this.currentState?"down":"up",this.stage&&("down"==this.currentState?egret.callLater(function(){return e.stage.addEventListener(egret.TouchEvent.TOUCH_TAP,e.onTap,e)},this):(t.stopPropagation(),egret.callLater(function(){return e.stage.removeEventListener(egret.TouchEvent.TOUCH_TAP,e.onTap,e)},this)))},e.prototype.setData=function(){var t=this.data,e=t.listData,i=t.def;this.eL.dataProvider=new eui.ArrayCollection(e),this.eL.selectedIndex=i,this.name=e[i]?e[i].name:""},e.prototype.addDisplay=function(){this.data&&this.setData()},e.prototype.removeDisplay=function(){this.stage&&this.stage.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.onTap,this)},Object.defineProperty(e.prototype,"selectItem",{get:function(){return this.eL.selectedItem},enumerable:!0,configurable:!0}),e.prototype.selectNext=function(t){void 0===t&&(t=1);var e=this.data.listData,i=this.eL.selectedIndex+t;i>=e.length&&(i=0),0>i&&(i=e.length-1),this.eL.selectedIndex=i,this.name=e[i].name},Object.defineProperty(e.prototype,"text",{get:function(){return this.eTi.text},set:function(t){this.name=t},enumerable:!0,configurable:!0}),e}(eui.Component);__reflect(DropDown.prototype,"DropDown");var DropDownComItem=function(t){function e(){var e=t.call(this)||this;return e.skinName="DropDownItemSkin",e}return __extends(e,t),e.prototype.dataChanged=function(){this.data&&(this.labelContent.textFlow=addColorTF(this.data))},e}(BaseItemRender);__reflect(DropDownComItem.prototype,"DropDownComItem");var ByteArray=function(t){function e(e){var i=t.call(this,e)||this;return i.hasError=!1,i.prevName="",i.endian=egret.Endian.LITTLE_ENDIAN,i}return __extends(e,t),e.prototype.readString=function(){var t="";this.prevName="readString";try{t=this.readUTF(),this.position+=1}catch(e){this.log("readString")}return t},e.prototype.readUTFBytes=function(e){return this.bytesAvailable>=e?(this.prevName="readUTFBytes",t.prototype.readUTFBytes.call(this,e)):(this.log("readUTFBytes"),"")},e.prototype.writeString=function(t){this.writeUTF(t),this.writeByte(0)},e.prototype.writeHead=function(t,e){this.writeByte(t),this.writeByte(e)},e.prototype.readInt=function(){return this.bytesAvailable>=e.INT_LENGTH?(this.prevName="readInt",t.prototype.readInt.call(this)):(this.log("readInt"),0)},e.prototype.readUnsignedInt=function(){return this.bytesAvailable>=e.INT_LENGTH?(this.prevName="readUnsignedInt",t.prototype.readUnsignedInt.call(this)):(this.log("readUnsignedInt"),0)},e.prototype.readShort=function(){return this.bytesAvailable>=e.SHORT_LENGTH?(this.prevName="readShort",t.prototype.readShort.call(this)):(this.log("readShort"),0)},e.prototype.readUnsignedShort=function(){return this.bytesAvailable>=e.SHORT_LENGTH?(this.prevName="readUnsignedShort",t.prototype.readUnsignedShort.call(this)):(this.log("readUnsignedShort"),0)},e.prototype.readByte=function(){return this.bytesAvailable>=e.BYTE_LENGTH?(this.prevName="readByte",t.prototype.readByte.call(this)):(this.log("readByte"),0)},e.prototype.readUnsignedByte=function(){return this.bytesAvailable>=e.BYTE_LENGTH?(this.prevName="readUnsignedByte",t.prototype.readUnsignedByte.call(this)):(this.log("readUnsignedByte"),0)},e.prototype.readBoolean=function(){return this.bytesAvailable>=e.BYTE_LENGTH?(this.prevName="readBoolean",t.prototype.readBoolean.call(this)):(this.log("readBoolean"),!1)},e.prototype.readDouble=function(){return this.bytesAvailable>=e.DOUBLE_LENGTH?(this.prevName="readDouble",t.prototype.readDouble.call(this)):(this.log("readDouble"),0)},e.prototype.log=function(t){if(!this.hasError){this.hasError=!0;var e=this.prevName,i=this.position;this.position=Socket.HEAD_SIZE;var n=this.readUnsignedByte(),a=this.readUnsignedByte();this.position=i;var o="协议:"+n+"-"+a+"读取错误,错误字段:"+t+",上一个字段"+e+"(仅供参考)";Actor.ins().isLocation&&openWin(ErrorWin,o)}},e.prototype.reset=function(){this.hasError=!1,this.prevName="",this.clear()},e.DOUBLE_LENGTH=8,e.INT_LENGTH=4,e.SHORT_LENGTH=2,e.BYTE_LENGTH=1,e}(egret.ByteArray);__reflect(ByteArray.prototype,"ByteArray",["IObjectPool"]),window.ByteArray=ByteArray;var FollowComBlue=function(t){function e(){return t.call(this)||this}return __extends(e,t),e.prototype.playMovie=function(){this.mcBall.playFile(getEffName("bluesoul1"),-1),this.mcTrail.playFile(getEffName("bluesoultail_2"),-1)},e}(FollowComBase);__reflect(FollowComBlue.prototype,"FollowComBlue"),window.FollowComBlue=FollowComBlue;var FollowComGreen=function(t){function e(){return t.call(this)||this}return __extends(e,t),e.prototype.playMovie=function(){this.mcBall.playFile(getEffName("greensoul1"),-1),this.mcTrail.playFile(getEffName("greensoultai2"),-1)},e}(FollowComBase);__reflect(FollowComGreen.prototype,"FollowComGreen"),window.FollowComGreen=FollowComGreen;var ItemBagBase=function(t){function e(){var e=t.call(this)||this;return e.init(),e.setSkinName(),e}return __extends(e,t),e.prototype.init=function(){},e.prototype.dataChanged=function(){this.baseDataChanged();var t=this.data;t&&(this.redPoint.visible=RpSys.ins().getData(BagWin,BagItemPanel,t.cfg.type))},e.prototype.setSkinName=function(){this.skinName="ItemSkin",this.currentState="bag"},e}(ItemBase);__reflect(ItemBagBase.prototype,"ItemBagBase");var MaskCircle=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.r=10,e}return __extends(e,t),e.prototype.setParam=function(t,e){this.r=t,e&&(this.dir=e),this.draw()},e.prototype.draw=function(){var t=this.graphics;t.clear(),t.beginFill(65535,1),this.dir==MoveDir.R_To_L?t.drawCircle(this.width*(1-this.percent),0,this.r):this.dir==MoveDir.L_To_R?t.drawCircle(this.width*this.percent,0,this.r):this.dir==MoveDir.U_To_D?t.drawCircle(0,this.height*this.percent,this.r):this.dir==MoveDir.D_To_U&&t.drawCircle(0,this.height*(1-this.percent),this.r),t.endFill()},Object.defineProperty(e.prototype,"width",{get:function(){return 2*this.r},set:function(t){this.r=t/2,this.draw()},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"height",{get:function(){return this.width},set:function(t){this.width=t},enumerable:!0,configurable:!0}),e}(MaskRect);__reflect(MaskCircle.prototype,"MaskCircle");var ItemBaseColor=function(t){function e(){return t.call(this)||this}return __extends(e,t),e.prototype.dataChanged=function(){t.prototype.dataChanged.call(this)},e.prototype.setColor=function(e){return this.data.tempColor?void(this.lbName.textColor=this.data.tempColor):void t.prototype.setColor.call(this,e)},e}(ItemBaseName);__reflect(ItemBaseColor.prototype,"ItemBaseColor");var Socket=function(t){function e(){var e=t.call(this)||this;return e.bytesArr=[],e.lastPos=-1,e.readCount=0,e.counter=0,e.isConnected=!1,e.handlers=[],e.curPack="",e.isLog=!1,e.isFenzhen=!0,e.creatSocket(),e.bytesCache=new ByteArray,egret.startTick(e.onEnterFrame,e),e}return __extends(e,t),e.ins=function(){return t.getIns.call(this,e)},e.prototype.creatSocket=function(){this.clearSocket(),this.webSocket=new egret.WebSocket,this.webSocket.type=egret.WebSocket.TYPE_BINARY,this.webSocket.addEventListener(egret.Event.CONNECT,this.onConnected,this),this.webSocket.addEventListener(egret.ProgressEvent.SOCKET_DATA,this.onReadData,this),this.webSocket.addEventListener(egret.Event.CLOSE,this.doSocketClose,this),this.webSocket.addEventListener(egret.IOErrorEvent.IO_ERROR,this.onError,this)},e.prototype.clearSocket=function(){this.webSocket&&(this.webSocket.removeEventListener(egret.Event.CONNECT,this.onConnected,this),this.webSocket.removeEventListener(egret.ProgressEvent.SOCKET_DATA,this.onReadData,this),this.webSocket.removeEventListener(egret.Event.CLOSE,this.doSocketClose,this),this.webSocket.removeEventListener(egret.IOErrorEvent.IO_ERROR,this.onError,this))},e.prototype.step1=function(){var t=new ByteArray,e=Encrypt.getSelfSalt();t.writeUnsignedInt(e),this.webSocket.writeBytes(t),this.webSocket.flush()},e.prototype.step2=function(t){Encrypt.setTargetSalt(t);var e=Encrypt.getCheckKey(),i=new ByteArray;i.writeShort(e),this.webSocket.writeBytes(i,0,2)},e.prototype.step3=function(t){this.encrypt(t),this.webSocket.writeBytes(t)},e.prototype.onConnected=function(t){this.log("socket连接成功"),this.step1()},e.prototype.onReadData=function(t){if(-1==this.lastPos){if(this.readCount++,1==this.readCount){var e=new ByteArray;this.webSocket.readBytes(e),e.position=0;var i=e.readUnsignedInt();return this.step2(i),this.isConnected=!0,this.onConnectedCallback&&this.onConnectedCallback(),void console.log("握手成功--"+this.wss)}this.isConnected&&this.readBytes()}},e.prototype.doSocketClose=function(t){this.log("收到socket关闭消息"),this.onFail&&(this.webSocket.flush(),this.isConnected=!1,this.onFail()),this.patchSocketClose()},e.prototype.patchSocketClose=function(){},e.prototype.onError=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];this.onFail&&(this.isConnected=!1,this.onFail())},e.prototype.login=function(t){this.wss=t,this.isConnected||this.webSocket.connectByUrl(t)},e.prototype.reLogin=function(t){this.close(),this.reset(),this.creatSocket(),this.login(t)},e.prototype.close=function(){this.webSocket.close(),this.log("socket关闭")},e.prototype.reset=function(){this.readCount=0,this.isConnected=!1},e.prototype.send=function(t){if(this.isLog,this.isConnected&&this.step3(t),t.position=12,urlParam.proto){var e=t.readUnsignedByte(),i=t.readUnsignedByte();this.showLog("client:"+e+"-"+i)}ObjPool.push(t)},e.prototype.reg=function(t,e,i,n){if(this.handlers[t]){if(this.handlers[t][e])return}else this.handlers[t]=[];var a=ObjPool.pop(Caller);a.func=i,a.obj=n,this.handlers[t][e]=a},e.prototype.setOnConnected=function(t,e,i){this.onConnectedCallback=t.bind(i),this.onFail=e.bind(i)},e.prototype.creatBytes=function(t,i){var n=ObjPool.pop(ByteArray);return n.writeShort(e.TAG),n.writeShort(0),n.writeShort(0),n.writeShort(0),n.writeUnsignedInt(this.counter++),n.writeHead(t,i),n},e.prototype.onEnterFrame=function(t){var e=this.bytesArr.length,i=Timer.ins().getEgretTimer(),n=0;for(n=0;e>n;n++){var a=this.bytesArr[n];if(this.isFenzhen&&n%5==0){var o=Timer.ins().getEgretTimer();if(o-i>25){this.isLog&&console.log("协议执行超时:已执行"+n+"个,还有"+(e-n)+"个,耗时"+(o-i)+"毫秒");break}}a&&a.bytesAvailable&&(this.lastPos++,this.delBytes(a),ObjPool.push(a),this.bytesArr[n]=null)}return n==this.bytesArr.length&&(this.bytesArr.length=0),this.lastPos=-1,!1},e.prototype.delBytes=function(t){var e=t.readUnsignedByte(),i=t.readUnsignedByte();if(this.handlers[e]&&this.handlers[e][i]){var n=this.handlers[e][i],a=Timer.ins().getEgretTimer();if(this.curPack="正在处理的协议:("+e+","+i+")-",this.showLog("server : "+e+" - "+i,n.func.sourceFun||n.func),n.func.call(n.obj,t),this.curPack="",this.isLog){var o=Timer.ins().getEgretTimer()-a;console.log("处理协议"+e+"-"+i+"耗时:"+o+" 当前时间:"+egret.getTimer())}}},e.prototype.readBytes=function(){var t=new ByteArray;this.webSocket.readBytes(t,t.length);var i=t.readUnsignedShort();if(i==e.TAG){t.readUnsignedShort();t.position+=4,this.bytesArr.push(t)}},e.prototype.encrypt=function(t){var i=e.HEAD_SIZE;t.position=2,t.writeShort(t.length-i);var n=Encrypt.getCRC16ByPos(t,i);t.position=4,t.writeShort(n);var a=Encrypt.getCRC16(t,i);t.position=6,t.writeShort(a),Encrypt.encode(t,4,4)},e.prototype.log=function(t){void 0===t&&(t=""),console.log(this.getStr(t))},e.prototype.getStr=function(t){return t+" --"+this.wss+" "},e.prototype.getSysSubStr=function(t){t.position=12;var e=t.readUnsignedByte(),i=t.readUnsignedByte();return t.position=0,"("+e+", "+i+") "},e.prototype.clear=function(){this.reset(),this.close(),this.creatSocket(),this.patchSocketClose()},e.prototype.showLog=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];if(urlParam.proto){console.groupCollapsed(t[0]);for(var i=0,n=t;i<n.length;i++){var a=n[i];"function"==typeof a?console.log(a):console.warn(a)}console.groupEnd()}},e.TAG=56831,e.HEAD_SIZE=8,__decorate([post()],e.prototype,"patchSocketClose",null),e}(BaseIns);__reflect(Socket.prototype,"Socket");var ItemBaseConsumeMin=function(t){function e(){return t.call(this)||this}return __extends(e,t),e.prototype.setSkinName2=function(t){this.skinName=t},e.prototype.dataChanged=function(){var t=this.data;if(t){var e=Cfg.getItemCfg(t.id);this.imgIcon.source=ResMgr.getItemIcon(e.getIcon(),IconType.IT_80x80),this.imgColor.source=ResMgr.getItemqualityResource(e.quality),this.setCount(t.count)}else this.clear()},e}(ItemBaseConsume);__reflect(ItemBaseConsumeMin.prototype,"ItemBaseConsumeMin");var ItemBaseCount=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return __extends(e,t),e.prototype.init=function(){t.prototype.init.call(this),this.count.size=22},e.prototype.setCount=function(t){this.count.text=GFunc.overLength(t),this.count.textColor=t>0?13486270:16188934},e}(ItemBase);__reflect(ItemBaseCount.prototype,"ItemBaseCount");var BBFLModel=function(){function t(){this.isBuyLogin=!1,this.isBuyCustom=!1,this.isBuyLevel=!1,this.recordLogin=0,this.recordCustom=0,this.recordLevel=0,this.loginDay=0,this.loginDatas=[],this.customDatas=[],this.levelDatas=[]}return t.prototype.parserInfo=function(t){this.isBuyLogin=t.readBoolean(),this.isBuyCustom=t.readBoolean(),this.isBuyLevel=t.readBoolean(),this.recordLogin=t.readInt(),this.recordCustom=t.readInt(),this.recordLevel=t.readInt(),this.loginDay=t.readByte(),this.loginDatas.length=0;for(var e=Cfg.getConfigs(LoginInvestConfig),i=0,n=e;i<n.length;i++){var a=n[i];this.loginDatas.push(new BBFLLoginData(a))}this.customDatas.length=0;for(var o=Cfg.getConfigs(CustomInvestConfig),s=0,r=o;s<r.length;s++){var u=r[s];this.customDatas.push(new BBFLCustomData(u))}this.levelDatas.length=0;for(var h=Cfg.getConfigs(LevelInvestConfig),l=0,p=h;l<p.length;l++){var c=p[l];this.levelDatas.push(new BBFLLevelData(c))}},t.prototype.parserReward=function(t){var e=t.readByte(),i=t.readInt();switch(e){case BBFLType.Login:this.recordLogin=i;break;case BBFLType.Custom:this.recordCustom=i;break;case BBFLType.Level:this.recordLevel=i}return e},t.prototype.parserLoginDay=function(t){this.loginDay=t.readByte()},t.prototype.parserBuy=function(t){var e=t.readByte();switch(e){case BBFLType.Login:this.isBuyLogin=!0;break;case BBFLType.Custom:this.isBuyCustom=!0;break;case BBFLType.Level:this.isBuyLevel=!0}return e},t.prototype.isBuyByType=function(t){var e=!1;switch(t){case BBFLType.Login:e=this.isBuyLogin;break;case BBFLType.Custom:e=this.isBuyCustom;break;case BBFLType.Level:e=this.isBuyLevel}return e},t.prototype.canBuyType=function(t){var e=Actor.ins().sVipLv;return e>=this.getSvipLvByType(t)&&!this.isBuyByType(t)},t.prototype.getSvipLvByType=function(t){var e=0;switch(t){case BBFLType.Login:e=Cfg.getConfig(RechargeConstConfig).loginsvip;break;case BBFLType.Custom:e=Cfg.getConfig(RechargeConstConfig).customsvip;break;case BBFLType.Level:e=Cfg.getConfig(RechargeConstConfig).levelsvip}return e},t.prototype.getBuyConsumeType=function(t){var e=0;switch(t){case BBFLType.Login:e=Cfg.getConfig(RechargeConstConfig).loginyuanbao;break;case BBFLType.Custom:e=Cfg.getConfig(RechargeConstConfig).customyuanbao;break;case BBFLType.Level:e=Cfg.getConfig(RechargeConstConfig).levelyuanbao}return e},t.prototype.getListDataByType=function(t){switch(t){case BBFLType.Login:return this.loginDatas;case BBFLType.Custom:return this.customDatas;case BBFLType.Level:return this.levelDatas}return null},Object.defineProperty(t.prototype,"isRewardAll",{get:function(){for(var t=0,e=this.loginDatas;t<e.length;t++){var i=e[t];if(!i.isReward)return!1}for(var n=0,a=this.customDatas;n<a.length;n++){var o=a[n];if(!o.isReward)return!1}for(var s=0,r=this.levelDatas;s<r.length;s++){var u=r[s];if(!u.isReward)return!1}return!0},enumerable:!0,configurable:!0}),t}();__reflect(BBFLModel.prototype,"BBFLModel");var BBFLType;!function(t){t[t.Login=1]="Login",t[t.Custom=2]="Custom",t[t.Level=3]="Level"}(BBFLType||(BBFLType={}));var BBFLCustomData=function(t){function e(e){var i=t.call(this,null)||this;return i.type=BBFLType.Custom,i.config=e,i.index=e.index,i}return __extends(e,t),Object.defineProperty(e.prototype,"isBuy",{get:function(){return RechargeActSys.ins().bbflModel.isBuyCustom},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"dabiao",{get:function(){return FbSys.ins().guajiData.guanId},enumerable:!0,configurable:!0}),e.prototype.getDec=function(){return Lang.act_str98.replace("$str$",addColor(""+this.config.custom+Lang.common_ceng,6225800))},e.prototype.getValue=function(){return addColor(this.dabiao+"/"+this.config.custom,this.dabiao<this.config.custom?13967392:6225800)},Object.defineProperty(e.prototype,"record",{get:function(){return RechargeActSys.ins().bbflModel.recordCustom},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"canReward",{get:function(){var t=!1;return this.isReward||(t=this.dabiao>=this.config.custom),t},enumerable:!0,configurable:!0}),e}(BBFLLoginData);__reflect(BBFLCustomData.prototype,"BBFLCustomData");var BBFLLevelData=function(t){function e(e){var i=t.call(this,null)||this;return i.type=BBFLType.Level,i.config=e,i.index=e.index,i}return __extends(e,t),Object.defineProperty(e.prototype,"isBuy",{get:function(){return RechargeActSys.ins().bbflModel.isBuyLevel},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"dabiao",{get:function(){return Actor.ins().level},enumerable:!0,configurable:!0}),e.prototype.getDec=function(){return Lang.act_str99.replace("$str$",addColor(""+GFunc.GetLvStrByLv(this.config.level)+Lang.common_ji,6225800))},e.prototype.getValue=function(){return addColor(this.dabiao+"/"+this.config.level,this.dabiao<this.config.level?13967392:6225800)},Object.defineProperty(e.prototype,"record",{get:function(){return RechargeActSys.ins().bbflModel.recordLevel},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"canReward",{get:function(){var t=!1;return this.isReward||(t=this.dabiao>=this.config.level),t},enumerable:!0,configurable:!0}),e}(BBFLLoginData);__reflect(BBFLLevelData.prototype,"BBFLLevelData");var ItemBaseHideCount=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return __extends(e,t),e.prototype.init=function(){},e.prototype.setCount=function(t){this.count.visible=!1},e}(ItemBase);__reflect(ItemBaseHideCount.prototype,"ItemBaseHideCount");var BBFLLoginItem=function(t){function e(){var e=t.call(this)||this;return e.skinName="BBFLLoginItemEUI",e.list.itemRenderer=ItemBaseReward,e.mcBtnSend=new MC,e.mcBtnSend.x=e.btnSend.width/2,e.mcBtnSend.y=e.btnSend.height/2,e.btnSend.addChildAt(e.mcBtnSend,e.btnSend.numChildren-1),e.addClickE(e.btnSend,e.onClick),e}return __extends(e,t),e.prototype.onClick=function(t){var e=this.data;e.isBuy?e.canReward&&RechargeActSys.ins().sendBBFLReward(e.type,e.index):showtipsFail("投资后可领取")},e.prototype.dataChanged=function(){this.data instanceof BBFLLoginData&&(this.lbDec.textFlow=addColorTF(this.data.getDec()),this.lbValue.textFlow=addColorTF(this.data.getValue()),this.list.dataProvider=new eui.ArrayCollection(this.data.getRewards()),this.btnSend.visible=!1,this.btnSend.redPoint.visible=!1,this.imgYlq.visible=!1,this.imgWdc.visible=!1,this.data.isBuy?this.data.isReward?(this.imgYlq.visible=!0,this.mcBtnSend.stop()):this.data.canReward?(this.btnSend.visible=!0,this.btnSend.redPoint.visible=!0,this.mcBtnSend.playFile(ResMgr.getEffName("public_zycs_button01"),-1)):(this.imgWdc.visible=!0,this.mcBtnSend.stop()):(this.mcBtnSend.stop(),this.imgWdc.visible=!this.data.canReward,this.btnSend.visible=this.data.canReward))},e}(BaseItemRender);__reflect(BBFLLoginItem.prototype,"BBFLLoginItem"),window.BBFLLoginItem=BBFLLoginItem;var ItemBaseItemConfigName=function(t){function e(){var e=t.call(this)||this;return e.setSkinName(),e}return __extends(e,t),e.prototype.dataChanged=function(){var t=this.data;t&&(this.imgIcon.source=ResMgr.getItemIcon(t.getIcon(),IconType.IT_80x80),this.imgColor.source=ResMgr.getItemqualityResource(t.quality),this.lbName.text=t.getName(),this.lbName.textColor=GConst.PZColor[t.quality],this.setCount(0))},e.prototype.setSkinName=function(){this.skinName="ItemSkin",this.currentState="name"},e}(ItemBase);__reflect(ItemBaseItemConfigName.prototype,"ItemBaseItemConfigName");var ItemBaseLv=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return __extends(e,t),e.prototype.setSkinName=function(){t.prototype.setSkinName.call(this),this.currentState="name"},e.prototype.dataChanged=function(){t.prototype.dataChanged.call(this);var e=this.data;this.lbName.visible=!0;var i="";i=e.cfg.level>0?GFunc.GetLvStrByLv(e.cfg.level,!0):"",this.lbName.text=i},e}(ItemBase);__reflect(ItemBaseLv.prototype,"ItemBaseLv");var MaskSector=function(t){function e(){var e=t.call(this)||this;return e.radius=10,e.startAngle=0,e.endAngle=2*Math.PI,e.dir=0,e}return __extends(e,t),e.prototype.setValue=function(t,e,i){var n=this;if(void 0===i&&(i=0),this.maxValue=t>e?t:e,i>0){egret.Tween.removeTweens(this);var a=egret.Tween.get(this,{onChange:function(){n.draw()},onChangeObj:this});a.to({curValue:t},i)}else this.curValue=t,this.draw()},e.prototype.setParam=function(t,e,i,n){void 0===n&&(n=0),this.radius=t,e&&(this.startAngle=e),i&&(this.endAngle=i),this.dir=n,this.draw()},e.prototype.setDir=function(t){t&&(this.dir=t)},e.prototype.draw=function(){var t=this.graphics;t.clear(),t.beginFill(65535,1),t.moveTo(0,0),t.lineTo(this.radius,0);var e=this.startAngle*Math.PI/180,i=0;0==this.dir?(i=this.endAngle>=this.startAngle?this.endAngle-this.startAngle:360-(this.startAngle-this.endAngle),i=(this.startAngle+i*this.percent)*Math.PI/180):(i=this.startAngle>=this.endAngle?this.startAngle-this.endAngle:360-(this.endAngle-this.startAngle),i=(this.startAngle-i*this.percent)*Math.PI/180),t.drawArc(0,0,this.radius,e,i,0==this.dir?!1:!0),t.lineTo(0,0),t.endFill(),this.dispatchEventWith(egret.Event.CHANGING,!1,[e,i,this.dir])},e}(MaskBase);__reflect(MaskSector.prototype,"MaskSector");var BBFLWin=function(t){function e(){var e=t.call(this)||this;return e.redPointHead=[ExtCom],e.winType=WinType.MainWin,e}return __extends(e,t),e.panelNames=[BBFLLoginPanel,BBFLCustomPanel,BBFLLevelPanel],e}(BaseWinAutoTab);__reflect(BBFLWin.prototype,"BBFLWin"),window.BBFLWin=BBFLWin;var BraveInfo=function(){function t(){this.isOpen=0}return t.prototype.parser=function(t){this.id=t.readInt(),this.monsterName=t.readString(),this.monsterHead=t.readString(),this.monsterModel=t.readShort(),this.hpPecent=t.readShort(),this.fighterCount=t.readShort(),this.reliveTick=1e3*t.readInt()+Timer.ins().getTimer(),this.isFighting=t.readBoolean(),this.isRemind=t.readBoolean(),this.belongName=t.readString()},Object.defineProperty(t.prototype,"isDie",{get:function(){return 0==this.hpPecent},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"isDieNumber",{get:function(){return 0==this.hpPecent?-1:1},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"isAlive",{get:function(){return this.hpPecent>0},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"leftReviveTime",{get:function(){return Math.max(0,this.reliveTick-Timer.ins().getTimer())},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"config",{get:function(){return(null==this._config||this.id!=this._config.id)&&(this._config=Cfg.getConfig(BraveFubenConfig,this.id)),this._config},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"isopen",{get:function(){return Actor.ins().zsId>=this.config.zslevel},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"isopenNumber",{get:function(){return Actor.ins().zsId>=this.config.zslevel?1:-1},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"getLv",{get:function(){return this.config.zslevel},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"chaoguoLevel",{get:function(){var t=Cfg.getConfig(ZhuanShengLevelConfig,this.config.zslevel),e=Cfg.getConfig(ZhuanShengLevelConfig,Actor.ins().zsId);return e.cslevel>t.cslevel},enumerable:!0,configurable:!0}),t}();__reflect(BraveInfo.prototype,"BraveInfo");var FbModelYongZhe=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.yongZheInfos=[],e.cdTick=0,e.reliveTick=0,e.challengeCount=10,e.buyCount=0,e
}return __extends(e,t),e.prototype.parser=function(t){var e=t.readShort();this.yongZheInfos.length=e;for(var i=0;e>i;i++){var n=this.yongZheInfos[i]=this.yongZheInfos[i]||new BraveInfo;n.parser(t)}},e.prototype.parserInfo=function(t){this.cdTick=1e3*t.readInt()+Timer.ins().getTimer(),this.challengeCount=t.readByte(),this.buyCount=t.readByte()},e.prototype.getOpenBossArray=function(){var t=this.yongZheInfos.concat();return t},Object.defineProperty(e.prototype,"leftCdTime",{get:function(){return Math.max(0,this.cdTick-Timer.ins().getTimer())},enumerable:!0,configurable:!0}),e.prototype.getBossInfoByBossId=function(t){for(var e=0,i=this.yongZheInfos;e<i.length;e++){var n=i[e];if(n.id==t)return n}return null},e.prototype.getYongZheRemindByIndex=function(t){return this.yongZheInfos[t].isRemind},e.prototype.isHasCanChallenge=function(){for(var t=0,e=this.yongZheInfos;t<e.length;t++){var i=e[t];if(i.isopen&&i.isAlive&&!i.chaoguoLevel)return!0}return!1},e.prototype.getCount=function(){return this.CommonConfig().maxCount+this.buyCount-this.challengeCount},e.prototype.isBuy=function(){var t=Cfg.getConfig(SVipConfig,Actor.ins().sVipLv);return t.brave>this.buyCount},e.prototype.getMaxCount=function(){return this.CommonConfig().maxCount},e.prototype.CommonConfig=function(){return Cfg.getConfig(BraveCommonConfig)},e}(FbModelBase);__reflect(FbModelYongZhe.prototype,"FbModelYongZhe");var BraveFbPanel=function(t){function e(){return t.call(this)||this}return __extends(e,t),e.prototype.showReward=function(){var t=Cfg.getConfig(BraveFubenConfig,CondType.Equal,BraveFubenConfig.fbId,FbSys.ins().fbId);t&&(this.listItemReward.dataProvider=new eui.ArrayCollection(t.firstReward))},e}(BossHomeFbPanel);__reflect(BraveFbPanel.prototype,"BraveFbPanel"),window.BraveFbPanel=BraveFbPanel;var AtData=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return __extends(e,t),e.prototype.getValue=function(){return this.value},e.prototype.setValue=function(t){return this.value=t},e}(TreeData);__reflect(AtData.prototype,"AtData");var BravePanelItem=function(t){function e(){var e=t.call(this)||this;return e.skinName="BravePanelItemSkin",e}return __extends(e,t),e.prototype.dataChanged=function(){if(this.data){var t=this.data;this.nameTxt.text=""+t.monsterName,this.updateTime()}},e.prototype.updateTime=function(){var t=this.data,e=t.reliveTick-Timer.ins().getEgretTimer();e>0&&t.isDie?(this.timeTxt.text=Lang.fb_str101.replace("$time$",""+getFormatTime(Math.floor(e/1e3),"hh:mm:ss")),this.timeTxt.textColor=15733780):this.updateStatus(),this.updateRedPoint()},e.prototype.updateRedPoint=function(){var t=this.data;t&&(this.redPoint.visible=RpSys.ins().getData(BossWin,KfBossMainPanel,BravePanel,t.id))},e.prototype.updateStatus=function(){var t=this.data;this.timeTxt.text="",t.isopen?t.chaoguoLevel?this.timeTxt.text=Lang.common_str137:t.isDie||(this.timeTxt.text=Lang.common_str56,this.timeTxt.textColor=5949490):(this.timeTxt.text=""+GFunc.getZSNameBydb(t.config.zslevel)+Lang.common_str43,this.timeTxt.textColor=15733780)},e}(BaseItemRender);__reflect(BravePanelItem.prototype,"BravePanelItem"),window.BravePanelItem=BravePanelItem;var BraveRemindItem=function(t){function e(){var e=t.call(this)||this;return e.skinName="KlmRemindItemEUI",e.checkBoxs.name="checkBoxs",e}return __extends(e,t),e.prototype.dataChanged=function(){var t=this.data;this.checkBoxs.visible=t.isopen&&0==t.chaoguoLevel,this.checkBoxs.selected=t.isRemind,this.txt.visible=!t.isopen&&t.chaoguoLevel,this.bossName.text=t.monsterName,this.levelShow.textFlow=StrUtil.toTF(GFunc.getZSNameBydb(t.config.zslevel))},e}(BaseItemRender);__reflect(BraveRemindItem.prototype,"BraveRemindItem"),window.BraveRemindItem=BraveRemindItem;var BraveRemindWin=function(t){function e(){return t.call(this)||this}return __extends(e,t),e.prototype.initUI=function(){t.prototype.initUI.call(this),this.layer=LayerMgr.Popup,this.skinName="KlmRemindWinEUI",this.addBg(),this.list0.itemRenderer=BraveRemindItem,this.list0.dataProvider=this.listDatas=new eui.ArrayCollection},e.prototype.open=function(){t.prototype.open.call(this),this.addClickE(this.list0,this.onListItemTap);var e=FbSys.ins().braveModel.getOpenBossArray();SortUtil.sortOn(e,["id"],[SortType.up]),this.listDatas.source=e},e.prototype.onListItemTap=function(t){if("checkBoxs"==t.target.name){var e=t.target.parent.data,i=t.target;e.isRemind=i.selected,FbSys.ins().sendBraveRemind(e.id,e.isRemind)}},e}(BaseWinSingle);__reflect(BraveRemindWin.prototype,"BraveRemindWin"),window.BraveRemindWin=BraveRemindWin;var CampWarFbResultTipsWin=function(t){function e(){var e=t.call(this)||this;return e.skinName="CampWarFbResultTipsWinEUI",e.layer=LayerMgr.Main_Down,e}return __extends(e,t),e.prototype.open=function(i,n){t.prototype.open.call(this),this.addLsn(LogicSys.ins().patchEnterMap,this.updateEnterMap),this.imgTitle.source=4!=i?2==i?"js_zycs_sl_png":"js_zycs_sb_png":"js_zycs_pg_png",this.lbNum.text=2==i?Lang.zyz_str45+"+"+n:"",this.group.alpha=1;var a=egret.Tween.get(this.group);a.wait(2500).to({alpha:0},500).call(function(){closeWin(e)},this)},e.prototype.close=function(){t.prototype.close.call(this),egret.Tween.removeTweens(this.group)},e.prototype.updateEnterMap=function(){closeWin(e)},e}(BaseWinSingle);__reflect(CampWarFbResultTipsWin.prototype,"CampWarFbResultTipsWin"),window.CampWarFbResultTipsWin=CampWarFbResultTipsWin;var CampWarLinkWin=function(t){function e(){var e=t.call(this)||this;return e.winType=WinType.OverlayWin,e}return __extends(e,t),e.prototype.initUI=function(){t.prototype.initUI.call(this),this.addBg()},e.panelNames=[CampWarLinkPanel],e}(BaseWinAutoTab);__reflect(CampWarLinkWin.prototype,"CampWarLinkWin"),window.CampWarLinkWin=CampWarLinkWin;var CampWarMainBoxWin=function(t){function e(){var e=t.call(this)||this;return e.skinName="CampWarMainBoxWinEUI",e.layer=LayerMgr.Popup,e.addBg(),e.listAward.itemRenderer=ItemBaseReward,e.listAward.dataProvider=e.listAwardArr=new eui.ArrayCollection,e.btnGet.redPoint.visible=!0,e}return __extends(e,t),e.prototype.open=function(e){t.prototype.open.call(this),this.campData=e,this.addClickE(this,this.onClick),this.addLsn(CampWarSys.ins().patchInfo,this.updatePanel),this.addLsn(CampWarSys.ins().patchDailyReward,this.updatePanel),this.updatePanel()},e.prototype.close=function(){t.prototype.close.call(this)},e.prototype.updatePanel=function(){this.lbCount.textFlow=addColorTF(Lang.zyz_str27+"："+addColor(CampWarSys.ins().tzCount,1306146)),this.lbDec.textFlow=addColorTF(Lang.zyz_str28.replace("$num$",""+addColor(this.campData.config.count,1306146))),this.listAwardArr.source=this.campData.config.rewards;var t=this.campData.getRewardState();this.btnGetHui.visible=t==ActRewardState.NotReached,this.btnGet.visible=t==ActRewardState.CanGet,this.imgYLQ.visible=t==ActRewardState.Geted},e.prototype.onClick=function(t){switch(t.target){case this.btnGetHui:showtipsFail(Lang.zyz_str29);break;case this.btnGet:CampWarSys.ins().sendDailyReward(this.campData.config.id)}},e}(BaseWinSingle);__reflect(CampWarMainBoxWin.prototype,"CampWarMainBoxWin"),window.CampWarMainBoxWin=CampWarMainBoxWin;var CampWarMainWin=function(t){function e(){var e=t.call(this)||this;return e.winType=WinType.OverlayWin,e}return __extends(e,t),e.prototype.initUI=function(){t.prototype.initUI.call(this),this.addBg()},e.panelNames=[CampWarMainPanel],e}(BaseWinAutoTab);__reflect(CampWarMainWin.prototype,"CampWarMainWin"),window.CampWarMainWin=CampWarMainWin;var CampWarRankWin=function(t){function e(){var e=t.call(this)||this;return e.winType=WinType.OverlayWin,e}return __extends(e,t),e.prototype.initUI=function(){t.prototype.initUI.call(this),this.addBg()},e.panelNames=[CampWarRankPanelQF,CampWarRankPanelSw,CampWarRankPanelMw],e}(BaseWinAutoTab);__reflect(CampWarRankWin.prototype,"CampWarRankWin"),window.CampWarRankWin=CampWarRankWin;var CampWarResultLose=function(t){function e(){var e=t.call(this)||this;return e.layer=LayerMgr.Popup,e.skinName="CampWarResultLoseEUI",e.addBg(),e.list.itemRenderer=ItemBaseReward,e.list.dataProvider=e.listData=new eui.ArrayCollection,e}return __extends(e,t),e.prototype.open=function(e){var i=this;t.prototype.open.call(this),this.updatePanel(e),this.resultCreateRole.open(!1,function(){CampWarSys.ins().sendTeamQuit(),closeWin(i)},this),Timer.ins()["do"](0,1e3,5,this.updateLabel,this)},e.prototype.close=function(){t.prototype.close.call(this),this.resultCreateRole.close(),Timer.ins().remove(this.updateLabel,this),FbSys.ins().fbId>0&&FbSys.ins().sendExitFb()},e.prototype.updatePanel=function(t){this.currentState=0==t.state?"ping":"lose",this.groupText.visible=0!=t.rewardState,this.lbTips.visible=0==t.rewardState;var e="";e=2==t.rewardState?"+0（"+Lang.zyz_str43+"）":t.isDouble?"+"+t.campScoreAdd+addColor("（"+Lang.zyz_str31+"）",1306146):1==t.rewardState?"+"+t.campScoreAdd:"+"+t.campScoreAdd,this.lbZygxd.textFlow=addColorTF(e),e=2==t.rewardState?"+0（"+Lang.zyz_str43+"）":""+(t.score+t.scoreAdd)+addColor("（+"+t.scoreAdd+(t.isDouble?Lang.zyz_str31:"")+"）",1306146),this.lbjifen.textFlow=addColorTF(e),this.listData.source=t.rewards},e.prototype.updateLabel=function(t){0>=t&&closeWin(this),this.closeBtn.label=Lang.common_str48.replace("$second$",t.toString())},e}(BaseWinSingle);__reflect(CampWarResultLose.prototype,"CampWarResultLose"),window.CampWarResultLose=CampWarResultLose;var CampWarResultWin=function(t){function e(){var e=t.call(this)||this;return e.layer=LayerMgr.Popup,e.skinName="CampWarResultWinEUI",e.addBg(),e.list.itemRenderer=ItemBaseReward,e.list.dataProvider=e.listData=new eui.ArrayCollection,e}return __extends(e,t),e.prototype.open=function(e){t.prototype.open.call(this),this.updatePanel(e),Timer.ins()["do"](0,1e3,5,this.updateLabel,this)},e.prototype.close=function(){t.prototype.close.call(this),Timer.ins().remove(this.updateLabel,this),FbSys.ins().fbId>0&&FbSys.ins().sendExitFb()},e.prototype.updatePanel=function(t){this.groupText.visible=0!=t.rewardState,this.lbTips.visible=0==t.rewardState;var e="";e=2==t.rewardState?"+0（"+Lang.zyz_str43+"）":t.isDouble?"+"+t.campScoreAdd+addColor("（"+Lang.zyz_str31+"）",1306146):1==t.rewardState?"+"+t.campScoreAdd:"+"+t.campScoreAdd,this.lbZygxd.textFlow=addColorTF(e),e=2==t.rewardState?"+0（"+Lang.zyz_str43+"）":""+(t.score+t.scoreAdd)+addColor("（+"+t.scoreAdd+(t.isDouble?Lang.zyz_str31:"")+"）",1306146),this.lbjifen.textFlow=addColorTF(e),this.listData.source=t.rewards},e.prototype.updateLabel=function(t){0>=t&&closeWin(this),this.closeBtn.label=Lang.common_str48.replace("$second$",t.toString())},e}(BaseWinSingle);__reflect(CampWarResultWin.prototype,"CampWarResultWin"),window.CampWarResultWin=CampWarResultWin;var CampWarRewardWin=function(t){function e(){var e=t.call(this)||this;return e.winType=WinType.OverlayWin,e}return __extends(e,t),e.prototype.initUI=function(){t.prototype.initUI.call(this),this.addBg()},e.panelNames=[CampWarRewardPanel],e}(BaseWinAutoTab);__reflect(CampWarRewardWin.prototype,"CampWarRewardWin"),window.CampWarRewardWin=CampWarRewardWin;var CampWarSys=function(t){function e(){var e=t.call(this)||this;return e.sjState=0,e.sjStartTick=0,e.sjEndTick=0,e.bsState=0,e.bsStartTick=0,e.bsEndTick=0,e.tzCount=0,e.helpCount=0,e.scoreGr=0,e.scoreCampShen=0,e.scoreCampMo=0,e.camp=CampType.wu,e.dailyRecord=0,e.dailyRewardDatas=[],e.scoreRewardDatas=[],e.teamId=0,e.teamName="",e.isCaptain=!1,e.teamMemberDatas=[],e.applyDatas=[],e.appCount=0,e.isAutoTeam=!1,e.isAutoTz=!1,e.autoTeamPower=0,e.inviteDatas=[],e.fbCampDatas=[],e.winCamps=[],e.huihe=1,e.huiheState=1,e.huiheTime=0,e.winPointShen=0,e.winPointMo=0,e.sysId=PackId.CampWar,e.reg(1,e.patchTeamMember),e.reg(2,e.patchTeamInvite),e.reg(3,e.patchTeamInviteList),e.reg(4,e.patchTeamApply),e.reg(6,e.patchTeamApplyList),e.reg(7,e.patchTeamExpel),e.reg(8,e.patchTeamQuit),e.reg(10,e.patchTeamMatching),e.reg(11,e.patchTeamMatchingUn),e.reg(12,e.patchTeamList),e.reg(15,e.patchInfo),e.reg(16,e.patchDailyReward),e.reg(17,e.patchRank),e.reg(18,e.patchScoreReward),e.reg(19,e.patchScoreCamp),e.reg(25,e.patchFbInfo),e.reg(26,e.patchFbEmoji),e.reg(27,e.patchFbHuiHe),e.reg(28,e.patchResult),e}return __extends(e,t),e.ins=function(){return t.getIns.call(this,e)},e.prototype.sendTeamCreate=function(){this.sendBase(1)},e.prototype.patchTeamMember=function(t){this.teamId=t.readInt(),this.isAutoTeam=1==t.readByte()?!0:!1,this.autoTeamPower=t.readDouble();var e=t.readByte();this.isCaptain=!1;for(var i=0;e>i;i++){var n=this.getTeamMemberDataByPos(i+1);n.parser(t),n.camp=this.camp,n.isCaptain&&(n.roleId==Actor.ins().actorID&&(this.isCaptain=!0),this.teamName=n.roleName)}this.teamId>0&&!isShowWin(CampWarTeamCreateWin)&&(openWin(CampWarMainWin),openWin(CampWarTeamCreateWin),closeWin(CampWarTeamListWin)),this.isMaxTeamMember()&&closeWin(CampWarTeamInviteWin)},e.prototype.sendTeamInvite=function(t){var e=this.getBytes(2),i=t.length;e.writeByte(i);for(var n=0;i>n;n++)e.writeInt(t[n]);this.send(e)},e.prototype.patchTeamInvite=function(t){var e=ChatFactory.createData(ChatType.KuaFu,ChatSubType.CampWar);e.parserMessage(t);var i=e.getVipContent()+addColor(e.roleName,3183103)+Lang.zyz_str8;i=i.replace("$team$",addColor(Lang.zyz_str9,15733780)),i+=addColor(StrUtil.addUnderLine(Lang.zyz_str10),1306146),e.setContent(i),ChatSys.ins().addMsg(e)},e.prototype.sendTeamInviteList=function(){this.sendBase(3)},e.prototype.patchTeamInviteList=function(t){this.inviteDatas.length=0;for(var e=t.readByte(),i=0;e>i;i++){var n=new CampWarInviteData;n.parser(t),this.inviteDatas.push(n)}},e.prototype.sendTeamApply=function(t,e){var i=this.getBytes(4);i.writeInt(t),i.writeByte(e),this.send(i)},e.prototype.patchTeamApply=function(t){this.isMaxTeamMember()?this.appCount=0:this.appCount+=1},e.prototype.sendTeamApplyHandle=function(t,e){var i=this.getBytes(5),n=t.length;i.writeByte(n);for(var a=0;n>a;a++)i.writeInt(t[a]),i.writeByte(e);this.send(i)},e.prototype.sendTeamApplyList=function(){var t=this.getBytes(6);this.send(t)},e.prototype.patchTeamApplyList=function(t){this.applyDatas.length=0;for(var e=this.appCount=t.readInt(),i=0;e>i;i++){var n=new CampWarApplyData;n.parser(t),this.applyDatas.push(n)}SortUtil.sortOn(this.applyDatas,["power"],[SortType.down])},e.prototype.sendTeamExpel=function(t){var e=this.getBytes(7);e.writeInt(t),this.send(e)},e.prototype.patchTeamExpel=function(t){var e=new PopupData(Lang.zyz_str7.replace("$name$",addColor(this.teamName,1306146)));e.setFunction(this,function(){}),openWin(CommonTipsWin1,e),closeWin(CampWarTeamCreateWin)},e.prototype.sendTeamQuit=function(){this.sendBase(8)},e.prototype.patchTeamQuit=function(t){this.teamId=0,this.appCount=0,this.applyDatas.length=0,this.isAutoTz=!1,closeWin(CampWarTeamCreateWin)},e.prototype.sendTeamPosChange=function(t,e){var i=this.getBytes(9);i.writeByte(t),i.writeByte(e),this.send(i)},e.prototype.sendTeamMatching=function(){this.sendBase(10)},e.prototype.patchTeamMatching=function(t){for(var e=t.readByte(),i=DateUtil.formatMiniDateTime(t.readInt()),n=t.readByte(),a=[],o=0;n>o;o++){var s=new CampWarTeamMemberData(o+1);s.parser(t),s.camp=this.camp==CampType.shen?CampType.mo:CampType.shen,s.matchState=e,a.push(s)}return isShowWin(CampWarTeamReadyWin)||openWin(CampWarTeamReadyWin,e,i,a),[e,i,a]},e.prototype.sendTeamMatchingUn=function(){this.sendBase(11)},e.prototype.patchTeamMatchingUn=function(t){t.readByte()},e.prototype.sendTeamList=function(){this.sendBase(12)},e.prototype.patchTeamList=function(t){for(var e=[],i=t.readInt(),n=0;i>n;n++){var a=new CampWarTeamData;a.parser(t),e.push(a)}return[e]},e.prototype.sendAutoTeam=function(t,e){var i=this.getBytes(13);i.writeByte(t?1:0),i.writeDouble(e),this.send(i)},e.prototype.patchInfo=function(t){this.sjState=t.readByte(),this.sjStartTick=DateUtil.formatMiniDateTime(t.readInt()),this.sjEndTick=DateUtil.formatMiniDateTime(t.readInt()),this.bsState=t.readByte(),this.bsStartTick=DateUtil.formatMiniDateTime(t.readInt()),this.bsEndTick=DateUtil.formatMiniDateTime(t.readInt()),this.tzCount=t.readByte(),this.helpCount=t.readByte(),this.scoreCampShen=t.readInt(),this.scoreCampMo=t.readInt(),this.camp=t.readByte(),this.dailyRecord=t.readInt(),RpFun.showCampWarTzRp()},e.prototype.sendDailyReward=function(t){var e=this.getBytes(16);e.writeByte(t),this.send(e)},e.prototype.patchDailyReward=function(t){this.dailyRecord=t.readInt(),RpFun.showCampWarDailyRewardRp()},e.prototype.sendRank=function(t){var e=this.getBytes(17);e.writeByte(t),this.send(e)},e.prototype.patchRank=function(t){var e=new CampWarRankTypeData;return e.parser(t),e},e.prototype.sendScoreReward=function(t){var e=this.getBytes(18);e.writeByte(t),this.send(e)},e.prototype.patchScoreReward=function(t){this.scoreRewardDatas.length=0;for(var e=t.readByte(),i=0;e>i;i++){var n=new CampWarScoreRewardData;n.parser(t),this.scoreRewardDatas.push(n)}RpFun.showCampWarScoreRewardRp()},e.prototype.sendScoreCamp=function(){this.sendBase(19)},e.prototype.patchScoreCamp=function(t){this.scoreCampShen=t.readInt(),this.scoreCampMo=t.readInt()},e.prototype.patchFbInfo=function(t){for(var e=t.readByte(),i=0;e>i;i++){var n=this.getFbCampDataByCamp(t.readByte());n.parser(t)}var a=Cfg.getConfig(CampBattleCommonConfig).cameraPos;LogicSys.ins().tempCenter=new XY(a[0]*MapBase.CELL_SIZE,a[1]*MapBase.CELL_SIZE),closeWin(JJCWin),closeWin(CampWarLinkWin),closeWin(CampWarMainWin),closeWin(CampWarTeamCreateWin),closeWin(CampWarTeamReadyWin)},e.prototype.sendFbEmoji=function(t){var e=this.getBytes(26);e.writeByte(t),this.send(e)},e.prototype.patchFbEmoji=function(t){var e=t.readByte(),i=t.readByte(),n=t.readByte();return[e,i,n]},e.prototype.patchFbHuiHe=function(t){this.huihe=t.readByte(),this.huiheState=t.readByte(),this.huiheTime=DateUtil.formatMiniDateTime(t.readInt());var e=t.readDouble(),i=t.readDouble();this.winCamps.length=0;for(var n=t.readByte(),a=0;n>a;a++)this.winCamps.push(t.readByte());if(this.winPointShen=t.readByte(),this.winPointMo=t.readByte(),1==this.huiheState){var o=this.getHuiheTime();if(o?openWin(CountDownWin,o,CountDownWin.TYPE_JJC):closeWin(CountDownWin),this.huihe>1&&!isShowWin(CampWarFbResultTipsWin)){var s=this.getFbPkStateByPos(this.camp,this.huihe-1),r=Cfg.getConfig(CampBattleCommonConfig).winPoint;openWin(CampWarFbResultTipsWin,s,r[this.huihe-2])}}LogicSys.ins().resetShowList();for(var u=LogicSys.ins().getEntitysByMasterHandle(e),h=LogicSys.ins().getEntitysByMasterHandle(i),l=0,p=u;l<p.length;l++){var c=p[l];LogicSys.ins().addShowList(c)}for(var d=0,g=h;d<g.length;d++){var f=g[d];LogicSys.ins().addShowList(f)}var y=LogicSys.ins().getYongbingByMasterHandle(e),m=LogicSys.ins().getYongbingByMasterHandle(i),C=LogicSys.ins().getYongbingByMasterHandle(LogicSys.ins().centerEntity.masterHandle);2==this.huiheState?Actor.ins().handle==e?LogicSys.ins().atkTargetByMasterHandle(i):Actor.ins().handle==i?LogicSys.ins().atkTargetByMasterHandle(e):(LogicSys.ins().centerEntity.AI.startNone(),C&&C.AI.startNone(),y&&y.AI.startNone(),m&&m.AI.startNone()):(LogicSys.ins().centerEntity.AI.startNone(),C&&C.AI.startNone(),y&&y.AI.startNone(),m&&m.AI.startNone());for(var v=LogicSys.ins().getEntitysByMasterHandle(e),S=0,b=v;S<b.length;S++){var I=b[S];I.setDir(3)}for(var _=LogicSys.ins().getEntitysByMasterHandle(i),w=0,D=_;w<D.length;w++){var T=D[w];T.setDir(5)}},e.prototype.patchResult=function(t){var e=new CampWarResultData;e.parser(t),2==e.state?openWin(CampWarResultWin,e):openWin(CampWarResultLose,e)},e.prototype.getDailyRewardDatas=function(){if(!this.dailyRewardDatas||0==this.dailyRewardDatas.length){this.dailyRewardDatas=[];for(var t=Cfg.getConfigs(CampBattleDailyRewardConfig),e=0;e<t.length;e++){var i=new CampWarDailyRewardData(t[e]);this.dailyRewardDatas.push(i)}}return this.dailyRewardDatas},e.prototype.getTeamMemberDataByPos=function(t){return this.teamMemberDatas[t-1]||(this.teamMemberDatas[t-1]=new CampWarTeamMemberData(t))},e.prototype.isMaxTeamMember=function(){for(var t=0,e=0,i=this.teamMemberDatas;e<i.length;e++){var n=i[e];n.isMember()&&(t+=1)}return t>=Cfg.getConfig(CampBattleCommonConfig).maxMember},e.prototype.getCampStr=function(){return Lang.zyz_strs[this.camp]},e.prototype.getMyScoreCamp=function(){return this.camp==CampType.shen?this.scoreCampShen:this.scoreCampMo},e.prototype.getTzCount=function(){return Math.max(Cfg.getConfig(CampBattleCommonConfig).rewardCount-this.tzCount,0)},e.prototype.getHelpCount=function(){return Math.max(Cfg.getConfig(CampBattleCommonConfig).joinCount-this.helpCount,0)},e.prototype.isBattle=function(){return 1==this.bsState},e.prototype.getFbCampDataByCamp=function(t){return this.fbCampDatas[t]||(this.fbCampDatas[t]=new CampWarFbCampData(t))},e.prototype.getHuiheTime=function(){return Math.max(Math.ceil((this.huiheTime-Actor.ins().serverTime)/1e3),0)>>0},e.prototype.getMyFbPkState=function(){for(var t=0,e=this.teamMemberDatas;t<e.length;t++){var i=e[t];if(i.isMy())return this.getFbPkStateByPos(this.camp,i.pos)}return 0},e.prototype.getFbPkStateByPos=function(t,e){var i=0;if(this.huihe>e){var n=this.winCamps[e-1];i=n!=CampType.wu?n==t?2:3:4}else if(this.huihe==e)if(3==this.huiheState){var a=this.winCamps[e-1];i=a!=CampType.wu?a==t?2:3:4}else i=1;else i=0;return i},e.prototype.formatPower=function(t,e){void 0===e&&(e=1);var i=[];return i=1e5>t?[t.toFixed(0),""]:1e8>t?[MathUtil.getNumber(t/1e4,e),"w"]:[MathUtil.getNumber(t/1e8,e),"y"]},e}(BaseSys);__reflect(CampWarSys.prototype,"CampWarSys");var System;!function(t){t.campWarSys=CampWarSys.ins.bind(CampWarSys)}(System||(System={})),window.CampWarSys=CampWarSys;var CampType;!function(t){t[t.wu=0]="wu",t[t.shen=1]="shen",t[t.mo=2]="mo"}(CampType||(CampType={}));var CampWarTeamApplyWin=function(t){function e(){var e=t.call(this)||this;return e.datas=[],e.skinName="CampWarTeamApplyWinEUI",e.layer=LayerMgr.Popup,e.addBg(),e.list.itemRenderer=CampWarTeamApplyItem,e.list.dataProvider=e.listData=new eui.ArrayCollection,e}return __extends(e,t),e.prototype.open=function(){t.prototype.open.call(this),this.addClickE(this.btnNo,this.onClick),this.addClickE(this.btnYes,this.onClick),this.addLsn(CampWarSys.ins().patchTeamApplyList,this.updatePanel),this.updatePanel()},e.prototype.close=function(){t.prototype.close.call(this)},e.prototype.updatePanel=function(){this.datas=CampWarSys.ins().applyDatas,this.listData.source=this.datas},e.prototype.onClick=function(t){switch(t.currentTarget){case this.btnNo:for(var e=[],i=0,n=this.datas;i<n.length;i++){var a=n[i];e.push(a.roleId)}CampWarSys.ins().sendTeamApplyHandle(e,0);break;case this.btnYes:for(var o=[],s=0,r=this.datas;s<r.length;s++){var a=r[s];o.push(a.roleId)}CampWarSys.ins().sendTeamApplyHandle(o,1)}},e}(BaseWinSingle);__reflect(CampWarTeamApplyWin.prototype,"CampWarTeamApplyWin"),window.CampWarTeamApplyWin=CampWarTeamApplyWin;var CampWarTeamCreateWin=function(t){function e(){var e=t.call(this)||this;return e.items=[],e.mcBtnStart=new MC,e.mcBtnInvite=new MC,e.autoTeamPower=0,e.matchState=0,e.skinName="CampWarTeamCreateWinEUI",e.layer=LayerMgr.Popup,e.addBg(),e.backGround.touchEnabled=!1,e.setSkinPart("com_Chat",new MainChat),e.items=[e.item0,e.item1,e.item2,e.item3],e.btnApplyMC=new MC,e.btnApplyMC.x=e.btnApply.width/2,e.btnApplyMC.y=e.btnApply.height/2,e.btnApply.addChild(e.btnApplyMC),e.mcBtnStart.x=e.btnStart.width/2,e.mcBtnStart.y=e.btnStart.height/2,e.btnStart.addChildAt(e.mcBtnStart,e.btnStart.numChildren-1),e.mcBtnInvite.x=e.btnInvite.width/2,e.mcBtnInvite.y=e.btnInvite.height/2,e.btnInvite.addChildAt(e.mcBtnInvite,e.btnInvite.numChildren-1),e}return __extends(e,t),e.prototype.open=function(){t.prototype.open.call(this),this.matchState=0,this.addClickE(this.btnClose0,this.onClick),this.addClickE(this.btnApply,this.onClick),this.addClickE(this.btnStart,this.onClick),this.addClickE(this.btnInvite,this.onClick),this.addClickE(this.checkBox,this.onClick),this.addClickE(this.checkBoxTz,this.onClick),this.addEvent(egret.FocusEvent.FOCUS_IN,this.textInput,this.onFocusIn),this.addEvent(egret.FocusEvent.FOCUS_OUT,this.textInput,this.onFocusOut),this.addEvent(egret.FocusEvent.CHANGE,this.textInput,this.onFocusChange),this.addLsn(CampWarSys.ins().patchTeamMember,this.updatePanel),this.addLsn(CampWarSys.ins().patchTeamApplyList,this.updateApply),this.addLsn(CampWarSys.ins().patchTeamMatching,this.updatePanelEnemy),this.addLsn(CampWarSys.ins().patchTeamMatchingUn,this.updateTeamMatchingUn),this.updatePanel(),this.updateApply(),this.updateTime(),this.com_Chat.open()},e.prototype.close=function(){t.prototype.close.call(this),Timer.ins().remove(this.updateTimeAutoMatch,this),this.com_Chat.close(),this.mcBtnStart.stop(),this.mcBtnInvite.stop();for(var e=0,i=this.items;e<i.length;e++){var n=i[e];n.reset()}},e.prototype.updateTime=function(){if(t.prototype.updateTime.call(this),e.TickCD>=Actor.ins().serverTime){var i=Math.ceil((e.TickCD-Actor.ins().serverTime)/1e3);this.lbCd.text=Lang.zyz_str49+"："+i+Lang.common_miao}else this.lbCd.text="";e.TickCD<Actor.ins().serverTime?(this.btnInvite.filters=[],this.mcBtnInvite.visible=!CampWarSys.ins().isMaxTeamMember()):(this.btnInvite.filters=DisUtil.grayFilter(),this.mcBtnInvite.visible=!1)},e.prototype.updatePanelEnemy=function(t,e,i){this.matchState=t},e.prototype.updateTeamMatchingUn=function(){this.matchState=0},e.prototype.updatePanel=function(){for(var t=CampWarSys.ins().teamMemberDatas,i=0;i<this.items.length;i++)this.items[i].data=t[i];this.autoTeamPower=CampWarSys.ins().autoTeamPower,this.textInput.text=""+CampWarSys.ins().autoTeamPower,this.checkBox.selected=CampWarSys.ins().isAutoTeam,this.checkBoxTz.selected=CampWarSys.ins().isAutoTz,this.groupAuto.visible=CampWarSys.ins().isCaptain,this.groupApply.visible=CampWarSys.ins().isCaptain,CampWarSys.ins().isCaptain?(CampWarSys.ins().isMaxTeamMember()?(this.mcBtnStart.playFile(getEffName("public_zycs_button01"),-1),this.mcBtnStart.visible=!0,this.mcBtnInvite.visible=!1,CampWarSys.ins().isAutoTz&&0==this.matchState&&Timer.ins()["do"](3e3,1,1,this.updateTimeAutoMatch,this,TimerType.LAST)):(this.mcBtnInvite.playFile(getEffName("public_zycs_button01"),-1),this.mcBtnInvite.visible=e.TickCD<Actor.ins().serverTime,this.mcBtnStart.visible=!1),this.btnStart.visible=!0,this.btnInvite.visible=!0):(this.mcBtnInvite.visible=!1,this.mcBtnStart.visible=!1,this.btnStart.visible=!1,this.btnInvite.visible=!1)},e.prototype.updateTimeAutoMatch=function(){Timer.ins().remove(this.updateTimeAutoMatch,this),CampWarSys.ins().sendTeamMatching()},e.prototype.updateApply=function(){var t=CampWarSys.ins().appCount;this.redPoint.visible=t>0,this.redPointNum.text=t>0?""+t:"",t>0?this.btnApplyMC.playFile(ResMgr.getEffName("smsq"),-1):(this.btnApplyMC.stop(),this.btnApplyMC.visible=!1)},e.prototype.onFocusIn=function(){},e.prototype.onFocusOut=function(){this.autoTeamPower=+this.textInput.text,CampWarSys.ins().sendAutoTeam(this.checkBox.selected,this.autoTeamPower)},e.prototype.onFocusChange=function(){},e.prototype.onClick=function(t){switch(t.currentTarget){case this.btnClose0:this.teamQuit();break;case this.btnApply:openWin(CampWarTeamApplyWin);break;case this.btnStart:if(!CampWarSys.ins().isCaptain)return void showtipsFail(Lang.zyz_str3);if(!CampWarSys.ins().isMaxTeamMember())return void showtipsFail(Lang.zyz_str22);CampWarSys.ins().sendTeamMatching();break;case this.btnInvite:if(e.TickCD<Actor.ins().serverTime){if(!CampWarSys.ins().isCaptain)return void showtipsFail(Lang.zyz_str33);if(CampWarSys.ins().isMaxTeamMember())return void showtipsFail(Lang.zyz_str34);openWin(CampWarTeamInviteWin)}break;case this.checkBoxTz:if(CampWarSys.ins().isAutoTz=this.checkBoxTz.selected,this.checkBoxTz.selected){if(!CampWarSys.ins().isMaxTeamMember())return void showtipsFail(Lang.zyz_str22);CampWarSys.ins().sendTeamMatching()}else Timer.ins().remove(this.updateTimeAutoMatch,this);break;case this.checkBox:CampWarSys.ins().sendAutoTeam(this.checkBox.selected,this.autoTeamPower)}},e.prototype.teamQuit=function(){var t=CampWarSys.ins().isCaptain?Lang.zyz_str1:Lang.zyz_str2.replace("$name$",addColor(CampWarSys.ins().teamName,1306146));t=addColor(t,14931902);var i=new PopupData(t);i.setFunction(this,function(){CampWarSys.ins().sendTeamQuit(),closeWin(e)}),openWin(CommonTipsWin,i)},e.prototype.setShowMainUI=function(t){this.com_Chat.visible=t},e.TickCD=0,e}(BaseWinSingle);__reflect(CampWarTeamCreateWin.prototype,"CampWarTeamCreateWin"),window.CampWarTeamCreateWin=CampWarTeamCreateWin;var CampWarTeamInviteWin=function(t){function e(){var e=t.call(this)||this;return e.tickCD=0,e.skinName="CampWarTeamInviteWinEUI",e.layer=LayerMgr.Popup,e.addBg(),e.list.itemRenderer=CampWarTeamInviteItem,e.list.dataProvider=e.listData=new eui.ArrayCollection,e}return __extends(e,t),e.prototype.open=function(){t.prototype.open.call(this),this.tickCD=0,this.addClickE(this.list,this.onListClick),this.addClickE(this.btnInvite,this.onClick),this.addClickE(this.btnChange,this.onClick),this.addLsn(CampWarSys.ins().patchTeamMember,this.updatePanel),this.addLsn(CampWarSys.ins().patchTeamInviteList,this.updatePanel),CampWarSys.ins().sendTeamInviteList(),this.updatePanel(),this.updateTime()},e.prototype.close=function(){t.prototype.close.call(this)},e.prototype.updatePanel=function(){if(this.datas=CampWarSys.ins().inviteDatas.concat(),this.datas.length>0)for(var t=CampWarSys.ins().teamMemberDatas,e=0;e<this.datas.length;e++)for(var i=0;i<t.length;i++)if(this.datas[e].roleId==t[i].roleId){this.datas.splice(e,1),e--;break}SortUtil.sortOn(this.datas,["power"],[SortType.down]),this.listData.source=this.datas},e.prototype.updateTime=function(){if(t.prototype.updateTime.call(this),this.tickCD>=Actor.ins().serverTime){var e=Math.ceil((this.tickCD-Actor.ins().serverTime)/1e3);this.lbCd.text=Lang.zyz_str49+"："+e+Lang.common_miao}else this.lbCd.text="";this.btnChange.filters=this.tickCD<Actor.ins().serverTime?[]:DisUtil.grayFilter()},e.prototype.onListClick=function(t){if(t&&t.target&&"btnInvite"==t.target.name){var e=t.target.parent,i=e.data;i.isInvite?showtipsSuc(Lang.zyz_str48):(CampWarSys.ins().sendTeamInvite([i.roleId]),i.isInvite=!0,showtipsSuc(Lang.zyz_str35)),i.isRobot||e.dataChanged()}},e.prototype.onClick=function(t){switch(t.currentTarget){case this.btnInvite:for(var i=[],n=0,a=this.datas;n<a.length;n++){var o=a[n];o.isRobot&&i.push(o.roleId)}for(var s=[],r=0,u=this.datas;r<u.length;r++){var o=u[r];o.isRobot||o.isInvite||(o.isInvite=!0,s.push(o.roleId))}s.length>0?(CampWarSys.ins().sendTeamInvite(s),this.updateItemState(),showtipsSuc(Lang.zyz_str35)):showtipsSuc(i.length>0?Lang.zyz_str42:Lang.zyz_str48),CampWarTeamCreateWin.TickCD=Actor.ins().serverTime+3e3,isShowWin(CampWarTeamCreateWin)&&getWin(CampWarTeamCreateWin).updateTime(),closeWin(e);break;case this.btnChange:this.tickCD<Actor.ins().serverTime&&(this.listData.source=[],this.list.validateNow(),showtipsSuc(Lang.act_str130),CampWarSys.ins().sendTeamInviteList(),this.tickCD=Actor.ins().serverTime+5e3,this.updateTime())}},e.prototype.updateItemState=function(){this.listData.refresh()},e}(BaseWinSingle);__reflect(CampWarTeamInviteWin.prototype,"CampWarTeamInviteWin"),window.CampWarTeamInviteWin=CampWarTeamInviteWin;var CampWarTeamListWin=function(t){function e(){var e=t.call(this)||this;return e.skinName="CampWarTeamListWinEUI",e.layer=LayerMgr.Popup,e.addBg(),e.list.itemRenderer=CampWarTeamListItem,e.list.dataProvider=e.listData=new eui.ArrayCollection,e}return __extends(e,t),e.prototype.open=function(){t.prototype.open.call(this),this.addClickE(this.btnCreateTeam,this.onClick),this.addClickE(this.list,this.onListClick),this.addLsn(CampWarSys.ins().patchTeamList,this.updatePanel),CampWarSys.ins().sendTeamList(),this.updatePanel(),this.com_Chat.open()},e.prototype.close=function(){t.prototype.close.call(this),this.com_Chat.close()},e.prototype.updatePanel=function(t){void 0===t&&(t=[]),this.listData.source=t},e.prototype.onListClick=function(t){if(t&&t.target)if("btnInvite"==t.target.name){var e=t.target.parent.parent.parent.parent.data;CampWarSys.ins().sendTeamApply(e.teamId,0)}else if("imgJia"==t.target.name){var i=t.target.parent.parent.parent.parent.parent.data;CampWarSys.ins().sendTeamApply(i.teamId,0)}},e.prototype.onClick=function(t){switch(t.currentTarget){case this.btnCreateTeam:CampWarSys.ins().sendTeamCreate(),closeWin(this)
}},e.prototype.setShowMainUI=function(t){this.com_Chat.visible=t},e}(BaseWinSingle);__reflect(CampWarTeamListWin.prototype,"CampWarTeamListWin"),window.CampWarTeamListWin=CampWarTeamListWin;var CampWarTeamReadyWin=function(t){function e(){var e=t.call(this)||this;return e.itemLs=[],e.itemRs=[],e.camp=CampType.wu,e.num=0,e.state=0,e.randomTimrs=[50,50,50,50],e.isTouch=!1,e.skinName="CampWarTeamReadyWinEUI",e.layer=LayerMgr.Popup,e.addBg(),e.backGround.touchEnabled=!1,e.setSkinPart("itemL0",new CampWarTeamReadyItemL),e.setSkinPart("itemL1",new CampWarTeamReadyItemL),e.setSkinPart("itemL2",new CampWarTeamReadyItemL),e.setSkinPart("itemL3",new CampWarTeamReadyItemL),e.setSkinPart("itemTouchL",new CampWarTeamReadyItemL),e.setSkinPart("itemR0",new CampWarTeamReadyItemR),e.setSkinPart("itemR1",new CampWarTeamReadyItemR),e.setSkinPart("itemR2",new CampWarTeamReadyItemR),e.setSkinPart("itemR3",new CampWarTeamReadyItemR),e.setSkinPart("itemTouchR",new CampWarTeamReadyItemR),e.itemLs=[e.itemL0,e.itemL1,e.itemL2,e.itemL3],e.itemRs=[e.itemR0,e.itemR1,e.itemR2,e.itemR3],e.groupL.mask=e.imgMaskL,e.groupR.mask=e.imgMaskR,e.imgTouch.visible=!1,e.itemTouchL.visible=!1,e.itemTouchR.visible=!1,e.xzsMc=new MC,e.xzsMc.x=380,e.xzsMc.y=-70,e.group.addChild(e.xzsMc),e.imgDec.visible=!1,e}return __extends(e,t),e.prototype.open=function(e,i,n){t.prototype.open.call(this),this.camp=CampWarSys.ins().camp;for(var a=this.camp==CampType.shen?this.itemLs:this.itemRs,o=0,s=a;o<s.length;o++){var r=s[o];this.addEvent(egret.TouchEvent.TOUCH_BEGIN,r,this.onTouchBegin),this.addEvent(egret.TouchEvent.TOUCH_MOVE,this,this.onTouchMove),this.addEvent(egret.TouchEvent.TOUCH_RELEASE_OUTSIDE,this,this.onTouchOut)}this.addClickE(this.btnSend,this.onClick),this.addLsn(CampWarSys.ins().patchTeamMember,this.updatePanelMy),this.addLsn(CampWarSys.ins().patchTeamMatching,this.updatePanelEnemy),this.addLsn(CampWarSys.ins().patchTeamMatchingUn,this.updateTeamMatchingUn),this.infoPanel(),this.updatePanelEnemy(e,i,n)},e.prototype.close=function(){this.reset(),t.prototype.close.call(this);for(var e=0;e<this.itemRs.length;e++)egret.Tween.removeTweens(this.itemRs[e]),egret.Tween.removeTweens(this.itemLs[e])},e.prototype.infoPanel=function(){this.btnSend.visible=!0,this.updatePanelMy();var t=GFunc.randomArr(4);if(this.camp==CampType.shen)for(var e=0;e<this.itemRs.length;e++)this.playHxd(this.itemRs[e],!0,this.randomTimrs[t[e]]);else for(var i=0;i<this.itemLs.length;i++)this.playHxd(this.itemLs[i],!0,this.randomTimrs[t[i]])},e.prototype.updatePanelMy=function(){var t=CampWarSys.ins().teamMemberDatas;if(this.camp==CampType.shen)for(var e=0;e<this.itemLs.length;e++)t[e]?(this.itemLs[e].data=t[e],this.itemLs[e].visible=!0):this.itemLs[e].visible=!1;else for(var e=0;e<this.itemRs.length;e++)t[e]?(this.itemRs[e].data=t[e],this.itemRs[e].visible=!0):this.itemRs[e].visible=!1},e.prototype.updatePanelEnemy=function(t,e,i){if(this.state=t,this.num=Math.max((e-Actor.ins().serverTime)/1e3,0)>>0,this.groupTime.visible=1!=t,this.imgTime.source=2==t?"smsz_zycs_bzds":"smsz_zycs_kszd",this.btnSend.visible=CampWarSys.ins().isCaptain&&1==t,this.lbTips.visible=CampWarSys.ins().isCaptain&&2==t,1==t?this.xzsMc.playFile(ResMgr.getEffName("smsz_zycs_xzds"),-1):(this.xzsMc.stop(),this.xzsMc.visible=!1),this.camp==CampType.shen)for(var n=0;n<this.itemRs.length;n++)i[n]&&(this.itemRs[n].data=i[n],this.itemRs[n].visible=!0),1!=t&&this.playHxd(this.itemRs[n],!1);else for(var n=0;n<this.itemLs.length;n++)i[n]&&(this.itemLs[n].data=i[n],this.itemLs[n].visible=!0),1!=t&&this.playHxd(this.itemLs[n],!1);this.reset(),this.scale(this.num),this.updateTime()},e.prototype.updateTime=function(){t.prototype.updateTime.call(this)},e.prototype.scale=function(t){var e=this,i=egret.Tween.get(this.bmpTime);this.bmpTime.text=t.toString(),i.to({scaleX:1.8,scaleY:1.8},80).to({scaleX:1,scaleY:1},100).wait(820).call(function(){t>=1&&e.scale(t-1)})},e.prototype.reset=function(){egret.Tween.removeTweens(this.bmpTime),this.bmpTime.scaleX=this.bmpTime.scaleY=1,this.bmpTime.text="0"},e.prototype.playHxd=function(t,e,i){var n=this;if(void 0===i&&(i=0),t.alpha=1,e){var a=egret.Tween.get(t);a.wait(i).to({alpha:0},950).call(function(){t.randomHead()}).wait(200).to({alpha:1},950).wait(200).call(function(){n.playHxd(t,!0)})}else egret.Tween.removeTweens(t)},e.prototype.playEffR=function(t){var e=this;if(2==t)for(var i=0;i<this.itemRs.length;i++){this.itemRs[i].x=325;var n=egret.Tween.get(this.itemRs[i]);n.wait(80*i).to({x:0},150).call(function(){e.x=0},this.itemRs[i])}},e.prototype.playEffL=function(t){var e=this;if(2==t)for(var i=0;i<this.itemLs.length;i++){this.itemLs[i].x=-325;var n=egret.Tween.get(this.itemLs[i]);n.wait(80*i).to({x:0},150).call(function(){e.x=0},this.itemLs[i])}},e.prototype.updateTeamMatchingUn=function(){closeWin(e)},e.prototype.onTouchBegin=function(t){if(t&&t.currentTarget&&CampWarSys.ins().isCaptain&&2==this.state){this.isTouch=!0,this.item=t.currentTarget,this.item.visible=!1,this.sData=this.item.data;var e=this.group.globalToLocal(t.stageX,t.stageY);this.sData.camp==CampType.shen?(this.itemTouchL.data=this.sData,this.itemTouchL.x=e.x-160,this.itemTouchL.y=e.y-70,this.itemTouchL.visible=!0,this.itemTouchR.visible=!1):(this.itemTouchR.data=this.sData,this.itemTouchR.x=e.x-160,this.itemTouchR.y=e.y-70,this.itemTouchR.visible=!0,this.itemTouchL.visible=!1)}else this.itemTouchL.visible=!1,this.itemTouchR.visible=!1},e.prototype.onTouchMove=function(t){if(this.isTouch){var e=this.group.globalToLocal(t.stageX,t.stageY);this.sData.camp==CampType.shen?(this.itemTouchL.x=e.x-160,this.itemTouchL.y=e.y-70):(this.itemTouchR.x=e.x-160,this.itemTouchR.y=e.y-70)}},e.prototype.onTouchEnd=function(t){},e.prototype.onTouchOut=function(t){if(this.isTouch){this.isTouch=!1,this.imgTouch.visible=!1,this.itemTouchL.visible=!1,this.itemTouchR.visible=!1,this.item&&(this.item.visible=!0);for(var e=0,i=this.itemLs;e<i.length;e++){var n=i[e];n.onTap(t,this.sData)}for(var a=0,o=this.itemRs;a<o.length;a++){var s=o[a];s.onTap(t,this.sData)}}},e.prototype.onClick=function(t){switch(t.currentTarget){case this.btnSend:CampWarSys.ins().sendTeamMatchingUn()}},e}(BaseWinSingle);__reflect(CampWarTeamReadyWin.prototype,"CampWarTeamReadyWin"),window.CampWarTeamReadyWin=CampWarTeamReadyWin;var CampWarApplyData=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return __extends(e,t),e.prototype.parser=function(t){this.roleId=t.readInt(),this.svipLv=t.readInt(),this.job=t.readByte(),this.power=t.readDouble(),this.roleName=t.readString()},e}(CampWarInviteData);__reflect(CampWarApplyData.prototype,"CampWarApplyData");var CampWarDailyRewardData=function(){function t(t){this.config=t}return t.prototype.getRewardState=function(){var t=ActRewardState.NotReached;return t=CampWarSys.ins().dailyRecord>>this.config.id&1?ActRewardState.Geted:CampWarSys.ins().tzCount>=this.config.count?ActRewardState.CanGet:ActRewardState.NotReached},t}();__reflect(CampWarDailyRewardData.prototype,"CampWarDailyRewardData");var CampWarFbCampData=function(){function t(t){this.camp=CampType.shen,this.roleDatas=[],this.camp=t}return t.prototype.parser=function(t){this.roleDatas.length=0;for(var e=t.readByte(),i=0;e>i;i++){var n=new CampWarFbFaceData(this.camp);n.parser(t),this.roleDatas.push(n)}SortUtil.sortOn(this.roleDatas,["pos"],[SortType.up])},t}();__reflect(CampWarFbCampData.prototype,"CampWarFbCampData");var CampWarFbFaceData=function(){function t(t){this.camp=CampType.shen,this.pos=1,this.roleId=0,this.roleName="",this.level=0,this.power=0,this.job=JobConst.ZhanShi,this.rewardState=0,this.liXianState=0,this.camp=t}return t.prototype.parser=function(t){this.pos=t.readByte(),this.roleId=t.readInt(),this.roleName=t.readString(),this.level=t.readInt(),this.power=t.readDouble(),this.job=t.readByte(),this.rewardState=t.readByte(),this.liXianState=t.readByte()},t.prototype.isLiXian=function(){return 1==this.liXianState},t}();__reflect(CampWarFbFaceData.prototype,"CampWarFbFaceData");var AtSys=function(t){function e(){return t.call(this)||this}return __extends(e,t),e.ins=function(){return t.getIns.call(this,e)},e.prototype.setData=function(e){for(var i=[],n=1;n<arguments.length;n++)i[n-1]=arguments[n];return t.prototype.setData.apply(this,[e].concat(i))},e.prototype.getData=function(){for(var e=[],i=0;i<arguments.length;i++)e[i]=arguments[i];return t.prototype.getData.apply(this,e)},e.prototype.doData=function(t,e){this.patchAt(this.patchData(t,e,AtData))},e.prototype.patchAt=function(t){return t},e}(TreeSys);__reflect(AtSys.prototype,"AtSys");var System;!function(t){t.atSys=AtSys.ins.bind(AtSys)}(System||(System={})),window.AtSys=AtSys;var CampWarRankTypeData=function(){function t(){this.rankType=0,this.rankDatas=[],this.myRank=0,this.myScore=0,this.job=JobConst.ZhanShi,this.szId=0,this.sqId=0,this.wingId=0,this.touxianId=0,this.titleId=0,this.fzId=0,this.damonId=0,this.meilinId=0,this.sex=0}return t.prototype.parser=function(t){this.rankType=t.readByte(),this.top=null,this.rankDatas.length=0;for(var e=t.readShort(),i=0;e>i;i++){var n=new CampWarRankRoleData(i+1,this.rankType);n.parser(t),this.rankDatas.push(n)}this.myRank=t.readShort(),this.myScore=t.readInt(),this.job=t.readByte(),this.sex=0,this.szId=t.readInt(),this.sqId=t.readInt(),this.wingId=t.readInt(),this.touxianId=t.readInt(),this.titleId=t.readInt(),this.fzId=t.readInt(),this.damonId=t.readInt(),this.meilinId=t.readInt()},t.prototype.isFirst=function(){return this.rankDatas.length>0&&""!=this.rankDatas[0].roleName},t}();__reflect(CampWarRankTypeData.prototype,"CampWarRankTypeData");var CampWarRankRoleData=function(){function t(t,e){this.rankType=0,this.rank=1,this.roleName="",this.score=0,this.rewards=[],this.camp=CampType.wu,this.rank=t,this.rankType=e}return t.prototype.parser=function(t){this.roleName=t.readString(),this.score=t.readInt(),this.camp=t.readByte()},t.prototype.getRewards=function(){if(!this.rewards||0==this.rewards.length){var t=[];t=0==this.rankType?Cfg.getConfigs(CampBattleSelfRankConfig):1==this.rankType?Cfg.getConfigs(CampBattleGodRankConfig):Cfg.getConfigs(CampBattleDevilRankConfig);for(var e in t)if(this.rank>=t[e].min&&this.rank<=t[e].max){this.rewards=t[e].rewards;break}}return this.rewards},t.prototype.hasPlayer=function(){return""!=this.roleName},t}();__reflect(CampWarRankRoleData.prototype,"CampWarRankRoleData");var CampWarResultData=function(){function t(){this.state=0,this.campScore=0,this.campScoreAdd=0,this.score=0,this.scoreAdd=0,this.rewardState=0,this.rewards=[],this.isDouble=!1}return t.prototype.parser=function(t){this.state=t.readByte(),this.campScore=t.readInt(),this.campScoreAdd=t.readInt(),this.score=t.readInt(),this.scoreAdd=t.readInt(),this.rewardState=t.readByte();var e=t.readByte();this.rewards.length=0;for(var i=0;e>i;i++){var n=new ItemDataReward;n.parser2(t),this.rewards.push(n)}this.isDouble=1==t.readByte()?!0:!1},t}();__reflect(CampWarResultData.prototype,"CampWarResultData");var CampWarScoreRewardData=function(){function t(){this.id=1,this.state=0}return t.prototype.parser=function(t){this.id=t.readByte(),this.state=t.readByte()},t.prototype.getConfig=function(){return this.config||(this.config=Cfg.getConfig(CampBattleScoreRewardConfig,this.id))},t.prototype.getDec=function(){return Lang.zyz_str26.replace("$num$",addColor(this.getConfig().score,1306146))},t.prototype.getDecValue=function(){var t=this.getConfig().score,e=CampWarSys.ins().getMyScoreCamp();return addColor(e+"/"+t,t>e?15733780:1306146)},Object.defineProperty(t.prototype,"rewardState",{get:function(){var t=ActRewardState.NotReached;return t=1==this.state?ActRewardState.Geted:CampWarSys.ins().getMyScoreCamp()>=this.getConfig().score?ActRewardState.CanGet:ActRewardState.NotReached},enumerable:!0,configurable:!0}),t}();__reflect(CampWarScoreRewardData.prototype,"CampWarScoreRewardData");var CampWarTeamData=function(){function t(){this.teamId=0,this.datas=[]}return t.prototype.parser=function(t){this.teamId=t.readInt(),this.datas.length=0;for(var e=t.readByte(),i=0;e>i;i++){var n=new CampWarTeamSubData;n.parser(t),this.datas.push(n)}},t}();__reflect(CampWarTeamData.prototype,"CampWarTeamData");var CampWarTeamSubData=function(){function t(){this.roleId=0,this.job=JobConst.ZhanShi,this.power=0,this.roleName="",this.isCaptain=!1}return t.prototype.parser=function(t){this.roleId=t.readInt(),this.job=t.readByte(),this.power=t.readDouble(),this.roleName=t.readString(),this.isCaptain=1==t.readByte()},t}();__reflect(CampWarTeamSubData.prototype,"CampWarTeamSubData");var CampWarTeamMemberData=function(){function t(t){this.pos=1,this.roleId=0,this.roleName="",this.level=0,this.power=0,this.job=JobConst.ZhanShi,this.isCaptain=!1,this.state=0,this.sqId=0,this.szId=0,this.wingId=0,this.camp=CampType.shen,this.matchState=1,this.pos=t}return t.prototype.parser=function(t){this.roleId=t.readInt(),this.roleName=t.readString(),this.level=t.readInt(),this.power=t.readDouble(),this.job=t.readByte(),this.sex=0,this.isCaptain=1==t.readByte(),this.state=t.readByte(),this.sqId=t.readInt(),this.szId=t.readInt(),this.wingId=t.readInt(),this.damonId=0,this.shenglingId=0},t.prototype.isMember=function(){return this.roleId>0},t.prototype.isMy=function(){return Actor.ins().actorID==this.roleId},t.prototype.reset=function(){this.roleId=0,this.roleName="",this.level=0,this.power=0,this.job=0,this.isCaptain=!1,this.state=0,this.sqId=0,this.szId=0,this.wingId=0},t}();__reflect(CampWarTeamMemberData.prototype,"CampWarTeamMemberData");var CampWarFbEmojiItem=function(t){function e(){var e=t.call(this)||this;return e.skinName="CampWarFbEmojiItemEUI",e.btnSend.textFlow=addColorTF(StrUtil.addUnderLine(Lang.zyz_str20),1306146),e}return __extends(e,t),e.prototype.dataChanged=function(){if(this.data&&this.data.id){var t=this.data;this.lbDec.text=t.dec}},e}(BaseItemRender);__reflect(CampWarFbEmojiItem.prototype,"CampWarFbEmojiItem"),window.CampWarFbEmojiItem=CampWarFbEmojiItem;var ItemBaseRewardActivity1=function(t){function e(){return t.call(this)||this}return __extends(e,t),e.prototype.setSkinName=function(){this.skinName="ItemSkin",this.currentState="shop",this.lbName.visible=!1},e}(ItemBaseRewardActivity);__reflect(ItemBaseRewardActivity1.prototype,"ItemBaseRewardActivity1");var CampWarFbFaceR=function(t){function e(){return t.call(this)||this}return __extends(e,t),e.prototype.setSkinName=function(){this.skinName="CampWarFbFaceREUI"},e}(CampWarFbFaceL);__reflect(CampWarFbFaceR.prototype,"CampWarFbFaceR"),window.CampWarFbFaceR=CampWarFbFaceR;var CampWarFbWinNumItem=function(t){function e(){var e=t.call(this)||this;return e.setSkinName(),e}return __extends(e,t),e.prototype.setSkinName=function(){this.skinName="CampWarFbWinNumItemEUI"},e.prototype.dataChanged=function(){},e.prototype.setWinPoint=function(t){this.bmpNum.text=""+t},e.prototype.setWinState=function(t){t==CampType.shen?this.imgIcon.source="smsz_zycs_lf":t==CampType.mo?this.imgIcon.source="smsz_zycs_hf":this.imgIcon.source="smsz_zycs_hs"},e}(BaseItemRender);__reflect(CampWarFbWinNumItem.prototype,"CampWarFbWinNumItem"),window.CampWarFbWinNumItem=CampWarFbWinNumItem;var CampWarMainBoxItem=function(t){function e(){var e=t.call(this)||this;return e.skinName="CampWarMainBoxItemEUI",e.mc=new MC,e.mc.x=34,e.mc.y=36,e.groupMc.addChild(e.mc),e.addClickE(e,e.onItemClick),e}return __extends(e,t),e.prototype.onItemClick=function(){var t=this._campData;openWin(CampWarMainBoxWin,t)},e.prototype.dataChanged=function(){if(this.data instanceof CampWarDailyRewardData){this._campData=this.data;var t=this.data.getRewardState();this.currentState=t==ActRewardState.Geted?"state1":"state0";var e=t==ActRewardState.CanGet;this.redPoint.visible=e,this.lbDec.text=""+this.data.config.count+Lang.common_chang,e?this.mc.playFile(ResMgr.getEffName("smbox"),-1):(this.mc.stop(),this.mc.visible=!1)}},e}(BaseItemRender);__reflect(CampWarMainBoxItem.prototype,"CampWarMainBoxItem"),window.CampWarMainBoxItem=CampWarMainBoxItem;var CampWarRankItem=function(t){function e(){var e=t.call(this)||this;return e.skinName="CampWarRankItemEUI",e.list.itemRenderer=ItemBaseReward,e}return __extends(e,t),e.prototype.dataChanged=function(){if(this.data instanceof CampWarRankRoleData){this.lbRank.text=""+this.data.rank,this.imgRank.source=this.data.rank<4?"jjc_zycs_no"+this.data.rank:"";var t="";this.data.hasPlayer()&&(t=addColor("["+Lang.zyz_str46+"："+Lang.zyz_strs[this.data.camp]+"]",this.data.camp==CampType.mo?16751375:13453311)),this.lbCamp.textFlow=addColorTF(t),this.lbName.textFlow=addColorTF(""==this.data.roleName?Lang.act_str87:this.data.roleName),this.lbScore.text=""+Lang.fb_str113+this.data.score,this.list.dataProvider=new eui.ArrayCollection(this.data.getRewards())}},e}(BaseItemRender);__reflect(CampWarRankItem.prototype,"CampWarRankItem"),window.CampWarRankItem=CampWarRankItem;var CampWarRankItemOld=function(t){function e(){var e=t.call(this)||this;return e.imgVip.visible=!1,e}return __extends(e,t),e.prototype.dataChanged=function(){if(this.data instanceof CampWarRankRoleData){var t=this.data;2==t.rank||3==t.rank?this.currentState="max":this.currentState="min",this.validateNow(),t.rank<=3?(this.imgRank.source=1==t.rank?"phb_zycs_no1":"jjc_zycs_no"+t.rank,this.imgRank.visible=!0,this.labelRank.visible=!1):(this.imgRank.visible=!1,this.labelRank.visible=!0,this.labelRank.text=t.rank.toString()),this.labelName.text=""+t.roleName,this.labelPower.text=Lang.gb_str69+"："+t.score,this.labelName.size=1==t.rank?24:20,this.labelPower.size=1==t.rank?24:20,this.imgBg.source=2==t.rank?"phb_zycs_d1":"phb_zycs_d2",this.imgLine.visible=1!=t.rank}},e}(RankItemBase);__reflect(CampWarRankItemOld.prototype,"CampWarRankItemOld"),window.CampWarRankItemOld=CampWarRankItemOld;var CampWarRankTab=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return __extends(e,t),e.prototype.dataChanged=function(){"string"==typeof this.data&&(this.consuTxt.text=""+this.data)},e}(RankTabItem);__reflect(CampWarRankTab.prototype,"CampWarRankTab"),window.CampWarRankTab=CampWarRankTab;var CampWarRewardItem=function(t){function e(){var e=t.call(this)||this;return e.setSkinName(),e.btnSend.name="btnSend",e.btnSend.redPoint.visible=!0,e.list.itemRenderer=ItemBaseReward,e.btnLink.visible=!1,e.addClickE(e.btnSend,e.onClick),e}return __extends(e,t),e.prototype.onClick=function(){var t=this._campData;CampWarSys.ins().sendScoreReward(t.id)},e.prototype.setSkinName=function(){this.skinName="CampWarRewardItemEUI"},e.prototype.dataChanged=function(){this.data instanceof CampWarScoreRewardData&&(this._campData=this.data,this.lbDec.textFlow=addColorTF(this.data.getDec()),this.lbValue.textFlow=addColorTF(this.data.getDecValue()),this.list.dataProvider=new eui.ArrayCollection(this.data.getConfig().rewards),this.btnSend.visible=this.data.rewardState==ActRewardState.CanGet,this.imgYlq.visible=this.data.rewardState==ActRewardState.Geted,this.imgWdc.visible=this.data.rewardState==ActRewardState.NotReached)},e}(BaseItemRender);__reflect(CampWarRewardItem.prototype,"CampWarRewardItem"),window.CampWarRewardItem=CampWarRewardItem;var CampWarTeamApplyItem=function(t){function e(){var e=t.call(this)||this;return e.skinName="CampWarTeamApplyItemEUI",e.addClickE(e.btnNo,e.onClickNo),e.addClickE(e.btnYes,e.onClickYes),e}return __extends(e,t),e.prototype.onClickYes=function(){var t=this._campData;CampWarSys.ins().sendTeamApplyHandle([t.roleId],1)},e.prototype.onClickNo=function(){var t=this._campData;CampWarSys.ins().sendTeamApplyHandle([t.roleId],0)},e.prototype.dataChanged=function(){if(this.data instanceof CampWarApplyData){this._campData=this.data,this.imgIcon.source=ResMgr.getHeadIcon(this.data.job),this.lbName.text=""+this.data.roleName;var t=CampWarSys.ins().formatPower(this.data.power);this.bmpPower.text=""+t[0],this.bmpU.text=""+t[1]}},e}(BaseItemRender);__reflect(CampWarTeamApplyItem.prototype,"CampWarTeamApplyItem"),window.CampWarTeamApplyItem=CampWarTeamApplyItem;var CampWarTeamCreateItem=function(t){function e(){var e=t.call(this)||this;return e.skinName="CampWarTeamCreateItemEUI",e.entityRole=GFunc.createEntityUI(),e.groupMC.addChild(e.entityRole),e.addClickE(e.btnAdd,e.btnAddClick),e.addClickE(e.btnDel,e.btnDelClick),e}return __extends(e,t),e.prototype.btnDelClick=function(){if(CampWarSys.ins().isCaptain){var t=this._campData;if(t.roleId==Actor.ins().actorID)this.teamQuit();else{var e=Lang.zyz_str4.replace("$name$",addColor(t.roleName,1306146));e=addColor(e,14931902);var i=new PopupData(e);i.setFunction(this,function(){CampWarSys.ins().sendTeamExpel(t.roleId)}),openWin(CommonTipsWin,i)}}else this.teamQuit()},e.prototype.btnAddClick=function(){CampWarSys.ins().isCaptain?openWin(CampWarTeamInviteWin):showtipsFail(Lang.zyz_str33)},e.prototype.teamQuit=function(){var t=CampWarSys.ins().isCaptain?Lang.zyz_str1:Lang.zyz_str2.replace("$name$",addColor(CampWarSys.ins().teamName,1306146));t=addColor(t,14931902);var e=new PopupData(t);e.setFunction(this,function(){CampWarSys.ins().sendTeamQuit(),closeWin(CampWarTeamCreateWin)}),openWin(CommonTipsWin,e)},e.prototype.updateEntity=function(){var t=this.data,e=new EntityRoleData;e.szId=t.szId,e.damonId=t.damonId,e.job=t.job,e.wingId=t.wingId,e.sex=t.sex,e.shengLingId=t.shenglingId,e.type=EntityType.ROLE,this.entityRole.setData(e,3,EntityAction.STAND)},e.prototype.dataChanged=function(){this.data instanceof CampWarTeamMemberData&&(this._campData=this.data,this.currentState=this.data.isMember()?"state0":"state1",this.data.isMember()&&this.updateEntity(),this.lbName.text=""+this.data.roleName,this.lbPower.text=Lang.common_str113+"："+GFunc.overLength(this.data.power),this.data.isCaptain?(this.imgCaptain.visible=!0,this.imgPos.source=""):(this.imgCaptain.visible=!1,this.imgPos.source="smsz_zycs_dy"+this.data.pos),CampWarSys.ins().isCaptain?(this.btnDel.label=this.data.roleId==Actor.ins().actorID?Lang.zyz_str5:Lang.zyz_str6,this.btnDel.visible=this.data.isMember()):(this.btnDel.label=Lang.qy_str7,this.btnDel.visible=this.data.roleId==Actor.ins().actorID))},e.prototype.reset=function(){this.entityRole.reset()},e}(BaseItemRender);__reflect(CampWarTeamCreateItem.prototype,"CampWarTeamCreateItem"),window.CampWarTeamCreateItem=CampWarTeamCreateItem;var CampWarTeamInviteItem=function(t){function e(){var e=t.call(this)||this;return e.skinName="CampWarTeamInviteItemEUI",e.btnInvite.name="btnInvite",e}return __extends(e,t),e.prototype.dataChanged=function(){if(this.data instanceof CampWarInviteData){this.lbYyq.visible=this.data.isInvite,this.btnInvite.visible=!this.data.isInvite,this.imgIcon.source=ResMgr.getHeadIcon(this.data.job),this.lbName.text=""+this.data.roleName;var t=CampWarSys.ins().formatPower(this.data.power);this.bmpPower.text=""+t[0],this.bmpU.text=""+t[1]}},e}(BaseItemRender);__reflect(CampWarTeamInviteItem.prototype,"CampWarTeamInviteItem"),window.CampWarTeamInviteItem=CampWarTeamInviteItem;var CampWarTeamListItem=function(t){function e(){var e=t.call(this)||this;return e.skinName="CampWarTeamListItemEUI",e.list.itemRenderer=CampWarTeamListSubItem,e.list.dataProvider=e.listData=new eui.ArrayCollection,e}return __extends(e,t),e.prototype.dataChanged=function(){this.data instanceof CampWarTeamData&&(this.listData.source=this.data.datas)},e}(BaseItemRender);__reflect(CampWarTeamListItem.prototype,"CampWarTeamListItem"),window.CampWarTeamListItem=CampWarTeamListItem;var CampWarTeamListSubItem=function(t){function e(){var e=t.call(this)||this;return e.skinName="CampWarTeamListSubItemEUI",e.btnInvite.name="btnInvite",e.imgJia.name="imgJia",e}return __extends(e,t),e.prototype.dataChanged=function(){this.data instanceof CampWarTeamSubData&&(this.currentState=this.data.roleId>0?"state0":"state1",this.imgCaptain.visible=this.data.isCaptain,this.imgIcon.source=ResMgr.getHeadIcon(this.data.job),this.lbName.text=""+this.data.roleName,this.lbPower.text=Lang.common_str113+"："+GFunc.overLength(this.data.power))},e}(BaseItemRender);__reflect(CampWarTeamListSubItem.prototype,"CampWarTeamListSubItem"),window.CampWarTeamListSubItem=CampWarTeamListSubItem;var ItemBaseRewardColor=function(t){function e(){return t.call(this)||this}return __extends(e,t),e.prototype.setColor=function(e){return this.data.tempColor?void(this.lbName.textColor=this.data.tempColor):void t.prototype.setColor.call(this,e)},e}(ItemBaseRewardName);__reflect(ItemBaseRewardColor.prototype,"ItemBaseRewardColor"),window.ItemBaseRewardColor=ItemBaseRewardColor;var CampWarTeamReadyItemR=function(t){function e(){return t.call(this)||this}return __extends(e,t),e.prototype.setSkinName=function(){this.skinName="CampWarTeamReadyItemREUI"},e.prototype.dataChanged=function(){t.prototype.dataChanged.call(this),this.data instanceof CampWarTeamMemberData&&(CampWarSys.ins().camp==CampType.mo?(this.imgPos.source="smsz_zycs_dy"+this.data.pos,this.groupName.visible=!0,this.groupWh.visible=!1,this.imgIcon.source=ResMgr.getHeadIcon(this.data.job)):(this.imgPos.source=3==this.data.matchState?"smsz_zycs_dy"+this.data.pos:"smsz_zycs_ds",this.groupName.visible=1!=this.data.matchState,this.groupWh.visible=1==this.data.matchState,1==this.data.matchState?this.randomHead():this.imgIcon.source=ResMgr.getHeadIcon(this.data.job)))},e}(CampWarTeamReadyItemL);__reflect(CampWarTeamReadyItemR.prototype,"CampWarTeamReadyItemR"),window.CampWarTeamReadyItemR=CampWarTeamReadyItemR;var CampWarFbPanel=function(t){function e(){var e=t.call(this)||this;return e.winItems=[],e.itemFaceLs=[],e.itemFaceRs=[],e.camp=CampType.shen,e.skinName="CampWarFbPanelEUI",e.winItems=[e.winItem0,e.winItem1,e.winItem2,e.winItem3],e.itemFaceLs=[e.itemFaceL0,e.itemFaceL1,e.itemFaceL2,e.itemFaceL3],e.itemFaceRs=[e.itemFaceR0,e.itemFaceR1,e.itemFaceR2,e.itemFaceR3],e.listEmoji.itemRenderer=CampWarFbEmojiItem,e.listEmoji.dataProvider=e.listEmojiData=new eui.ArrayCollection,e}return __extends(e,t),e.prototype.open=function(){t.prototype.open.call(this),this.addClickE(this.btnEmoji,this.onClick),this.addItemTapE(this.listEmoji,this.onEmojiClick),this.addLsn(CampWarSys.ins().patchFbInfo,this.updatePanel),this.addLsn(CampWarSys.ins().patchFbHuiHe,this.updateHuihe),this.addLsn(CampWarSys.ins().patchFbEmoji,this.updateEmoji),this.infoPanel()},e.prototype.close=function(){t.prototype.close.call(this)},e.prototype.updateTime=function(){t.prototype.updateTime.call(this),2==CampWarSys.ins().huiheState?this.lbTime.textFlow=addColorTF(""+Lang.common_str11+getFormatTime(CampWarSys.ins().getHuiheTime(),"mm:ss")):this.lbTime.textFlow=addColorTF(Lang.common_str11+"00:00");for(var e=0;e<this.itemFaceLs.length;e++)this.itemFaceLs[e].tick(),this.itemFaceRs[e].tick()},e.prototype.infoPanel=function(){this.camp=CampWarSys.ins().camp;for(var t=Cfg.getConfig(CampBattleCommonConfig).winPoint,e=0;e<t.length;e++)this.winItems[e].setWinPoint(t[e]),this.winItems[e].setWinState(CampType.wu);this.winBar.maximum=4,this.winBar.value=0,this.listEmojiData.source=Cfg.getConfigs(CampBattleEmojiConfig),this.groupEmoji.visible=!1,this.updatePanel(),this.updateHuihe()},e.prototype.updatePanel=function(){for(var t=CampWarSys.ins().getFbCampDataByCamp(CampType.shen),e=t.roleDatas,i=0;i<this.itemFaceLs.length;i++)e[i]?(this.itemFaceLs[i].data=e[i],this.itemFaceLs[i].visible=!0):this.itemFaceLs[i].visible=!1;for(var n=CampWarSys.ins().getFbCampDataByCamp(CampType.mo),a=n.roleDatas,o=0;o<this.itemFaceRs.length;o++)a[o]?(this.itemFaceRs[o].data=a[o],this.itemFaceRs[o].visible=!0):this.itemFaceRs[o].visible=!1},e.prototype.updateHuihe=function(){for(var t=CampWarSys.ins().winCamps,e=0;e<t.length;e++)this.winItems[e].setWinState(t[e]);var i=CampWarSys.ins().huihe;this.winBar.value=i>2?i:Math.max(i-1,0),this.imgCount.source="smsz_zycs_round"+Math.max(i,1),this.lbWinNumL.text=Lang.zyz_str21+"："+CampWarSys.ins().winPointShen,this.lbWinNumR.text=Lang.zyz_str21+"："+CampWarSys.ins().winPointMo,this.updateTime()},e.prototype.updateEmoji=function(t,e,i){var n=Cfg.getConfig(CampBattleEmojiConfig,i);t==CampType.shen?this.itemFaceLs[e-1].setEmoji(n.dec):this.itemFaceRs[e-1].setEmoji(n.dec)},e.prototype.onEmojiClick=function(t){var e=t.item;CampWarSys.ins().sendFbEmoji(e.id),this.groupEmoji.visible=!1},e.prototype.onClick=function(t){switch(t.currentTarget){case this.btnEmoji:this.groupEmoji.visible=!this.groupEmoji.visible}},e}(BasePanel);__reflect(CampWarFbPanel.prototype,"CampWarFbPanel"),window.CampWarFbPanel=CampWarFbPanel;var ItemBaseRewardDamonTansuo=function(t){function e(){return t.call(this)||this}return __extends(e,t),e.prototype.setCount=function(t){this.count.text=GFunc.overLength(t)},e}(ItemBaseReward);__reflect(ItemBaseRewardDamonTansuo.prototype,"ItemBaseRewardDamonTansuo");var ItemBaseRewardEvent=function(t){function e(){return t.call(this)||this}return __extends(e,t),e.prototype.init=function(){},e}(ItemBaseReward);__reflect(ItemBaseRewardEvent.prototype,"ItemBaseRewardEvent"),window.ItemBaseRewardEvent=ItemBaseRewardEvent;var CampWarRankPanel=function(t){function e(){var e=t.call(this)||this;return e.skinName="CampWarRankPanelEUI",e.setSkinPart("firstItem",new CampWarRankItemOld),e.tab.itemRenderer=CampWarRankTab,e.tab.dataProvider=e.tabDatas=new eui.ArrayCollection,e.list.itemRenderer=CampWarRankItemOld,e.list.dataProvider=e.arrayCollection=new eui.ArrayCollection,e.entityRole=GFunc.createEntityUI(),e.entityRole.scaleX=e.entityRole.scaleY=.8,e.groupMc.addChild(e.entityRole),e}return __extends(e,t),e.prototype.open=function(){t.prototype.open.call(this),this.addClickE(this.tab,this.onTabChange),this.addLsn(CampWarSys.ins().patchRank,this.updatePanel),this.infoPanel()},e.prototype.close=function(){t.prototype.close.call(this),this.entityRole.reset()},e.prototype.infoPanel=function(){var t=new Date(CampWarSys.ins().sjStartTick),e=t.getMonth()+1;this.bmpY0.text=10>e?"0"+e:""+e,e=t.getDate(),this.bmpR0.text=10>e?"0"+e:""+e;var i=new Date(CampWarSys.ins().sjEndTick);e=i.getMonth()+1,this.bmpY1.text=10>e?"0"+e:""+e,e=i.getDate(),this.bmpR1.text=10>e?"0"+e:""+e,this.tabDatas.source=Lang.zyz_str23,this.setSelectedIndex(0),this.updatePanel()},e.prototype.updateEntity=function(t){var e=new EntityRoleData;e.szId=t.szId,e.damonId=t.damonId,e.job=t.job,e.wingId=t.wingId,e.meilinId=t.meilinId,e.sex=t.sex,e.type=EntityType.ROLE,this.entityRole.setData(e,3,EntityAction.STAND)},e.prototype.updatePanel=function(t){if(void 0===t&&(t=null),t&&t.top){this.none.visible=!1,this.groupBody.visible=!0,this.groupMc.visible=!0;var e=Lang.common_str141+"："+t.myScore+" ";e+=t.myRank>0?""+Lang.common_di+t.myRank+Lang.common_str5:Lang.common_str17,this.labelMyRank.text=e,this.firstItem.data=t.top,this.arrayCollection.source=t.rankDatas,this.updateEntity(t)}else this.none.visible=!0,this.groupBody.visible=!1,this.groupMc.visible=!1,this.arrayCollection.source=[],this.labelMyRank.textFlow=addColorTF(Lang.common_str17)},e.prototype.setSelectedIndex=function(t){this.tab.selectedIndex=t,CampWarSys.ins().sendRank(t)},e.prototype.onTabChange=function(t){this.setSelectedIndex(this.tab.selectedIndex)},e.getSysId=function(){return 349},e.getTitle=function(){return"btz_zycs_smszphb"},e.getTabTitle=function(){return"bqz_zycs_smb"},e}(BasePanel);__reflect(CampWarRankPanel.prototype,"CampWarRankPanel"),window.CampWarRankPanel=CampWarRankPanel;var ItemBaseRewardMin=function(t){function e(){var e=t.call(this)||this;return e.imgIcon.scaleX=.7,e.imgIcon.scaleY=.7,e.addClickE(e,e.onClick),e}return __extends(e,t),e.prototype.setSkinName=function(){this.skinName="xhItemSkin"},e}(ItemBaseReward);__reflect(ItemBaseRewardMin.prototype,"ItemBaseRewardMin");var ItemBaseRewardMonthCard=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return __extends(e,t),e.prototype.dataChanged=function(){t.prototype.dataChanged.call(this),this.imgMonthCard.source="mrqd_zycs_yk",this.imgMonthCard.visible=!urlParam.isShenhe},e}(ItemBaseRewardActivity);__reflect(ItemBaseRewardMonthCard.prototype,"ItemBaseRewardMonthCard");var CRC16=function(){function t(){}return t.update=function(e,i,n){void 0===i&&(i=0),void 0===n&&(n=0);var a=0,o=0;0==n&&(n=e.length),e.position=i;for(var s=i;n>s;++s)o=255&t.CRCBitReflect(e.readByte(),8)^a>>8&16777215,o&=255,a=t.CRCTable[o]^a<<8&4294967040;
return 65535&(0^t.CRCBitReflect(a,16))},t.makeCRCTable=function(){for(var e=0,i=new Array(256),n=0;256>n;++n){e=n<<8&4294967040;for(var a=0;8>a;++a)e=32768&e?e<<1&4294967294^t.POLYNOMIAL:e<<1&4294967294;i[n]=e}return i},t.CRCBitReflect=function(e,i){var n=0,a=0;i--;for(var o=0;i>=o;++o)a=i-o,1&e&&(n|=1<<a&t.DropBits[a]),e=e>>1&2147483647;return n},t.POLYNOMIAL=4129,t.CRCTable=t.makeCRCTable(),t.DropBits=[4294967295,4294967294,4294967292,4294967288,4294967280,4294967264,4294967232,4294967168,4294967040,4294966784,4294966272,4294965248,4294963200,4294959104,4294950912,4294934528],t}();__reflect(CRC16.prototype,"CRC16");var ItemBaseRewardNameBig=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return __extends(e,t),e.prototype.setSkinName=function(){this.skinName="ItemSkin",this.currentState="bigName"},e}(ItemBaseRewardName);__reflect(ItemBaseRewardNameBig.prototype,"ItemBaseRewardNameBig");var ChatFactory=function(){function t(){}return t.createModel=function(t){var e;switch(t){case ChatType.All:e=new ChatModelBase,e.charMax=3,e.interval=5e3;break;case ChatType.Secret:e=new ChatModelSecret,e.charMax=Cfg.getConfig(FriendLimit).contentListLen,e.interval=0;break;default:e=new ChatModelBase,e.charMax=30,e.interval=5e3}return e.type=t,e},t.createData=function(t,e){void 0===e&&(e=ChatSubType.Default);var i;switch(t){case ChatType.Secret:i=new ChatDataSecret;break;case ChatType.World:i=e==ChatSubType.shenhunShenDian?new ChatDataShenDianWord:e==ChatSubType.MoLong?new ChatDataMoLongWord:e==ChatSubType.EmoIsle?new ChatDataEmoIsleTeam:e==ChatSubType.GuaJi?new ChatDataGuaJiWord:new ChatDataWorld;break;case ChatType.Local:i=new ChatDataLocal;break;case ChatType.System:i=new ChatDataSystem;break;case ChatType.Guild:e==ChatSubType.Default?i=new ChatDataGuild:e==ChatSubType.GuildBoss||e==ChatSubType.Guild?i=new ChatDataGuildTeam:e==ChatSubType.shenhunShenDian?i=new ChatDataShenDian:e==ChatSubType.MoLong?i=new ChatDataMoLong:e==ChatSubType.GuaJi?i=new ChatDataGuaJi:e==ChatSubType.ACT37_QQSH&&(i=new ChatDataACT37_QQSH);break;case ChatType.KuaFu:i=e==ChatSubType.GuaJi?new ChatDataGuaJiKuaFu:e==ChatSubType.MoLong?new ChatDataMoLongKuaFu:e==ChatSubType.shenhunShenDian?new ChatDataShenDianKuaFu:e==ChatSubType.ACT37_QQSH?new ChatDataACT37_QQSH:new ChatDataKuaFu;break;case ChatType.Log:i=new ChatDataLog;break;case ChatType.Xianlu:i=new ChatDataWorld;break;default:i=new ChatDataBase}return i.type=t,i.subType=e,i},t.channels=(_a={},_a[ChatType.Log]=Lang.chat_str13,_a[ChatType.KuaFu]=Lang.chat_str14,_a[ChatType.Guild]=Lang.chat_str1,_a[ChatType.System]=Lang.chat_str5,_a[ChatType.Local]=Lang.chat_str2,_a[ChatType.World]=Lang.chat_str6,_a[ChatType.Secret]="",_a),t}();__reflect(ChatFactory.prototype,"ChatFactory");var _a,ChatSys=function(t){function e(){var e=t.call(this)||this;return e.lastSpeak="",e.chatListDatas=[],e.chatFrmeDatas=[],e.selectFrameId=[0,0],e.isNewXianluChat=!1,e.sysId=PackId.Chat,e.reg(1,e.patchNewChatMsg),e.reg(3,e.patchSendInfoSuccess),e.reg(4,e.doSystemMessage),e.reg(5,e.selectFrame),e.reg(6,e.updateChatFrame),e.reg(7,e.upgradeFrame),e.addLsn(LogicSys.ins().patchAllSysInit,function(){e.sendChatFrame()}),e}return __extends(e,t),e.ins=function(){return t.getIns.call(this,e)},e.prototype.sendChatInfo=function(t,e,i){void 0===i&&(i=0);var n=this.getBytes(1);n.writeByte(t),n.writeUnsignedInt(i),e=this.replacChar(e),n.writeString(e),this.send(n)},e.prototype.replacChar=function(t){for(var e=[" ","*","="],i=0,n=e;i<n.length;i++)for(var a=n[i];t.indexOf(a)>-1;)t=t.replace(a,"");return t},e.prototype.patchNewChatMsg=function(t){for(var e=t.readByte(),i=0;e>i;i++){var n=t.readByte();t.position-=1;var a=ChatFactory.createData(n);a.parserMessage(t),this.addMsg(a),n==ChatType.Xianlu&&1==e&&this.updateXianluChat()}},e.prototype.updateXianluChat=function(){return this.isNewXianluChat=!0,!0},e.prototype.patchSendInfoSuccess=function(t){!t.readBoolean()},e.prototype.doSystemMessage=function(t){var e=t.readInt(),i=t.readInt(),n=t.readString();if(0==e||Actor.ins().level>=e)switch(i){case 4:break;default:showtipsFail(n)}},e.prototype.selectFrame=function(t){var e=t.readByte(),i=t.readShort();this.selectFrameId[e-1]=i},e.prototype.sendSelectFrame=function(t,e){var i=this.getBytes(5);i.writeByte(t),i.writeShort(e),this.send(i)},e.prototype.updateChatFrame=function(t){for(var e=t.readByte(),i=0;e>i;i++){this.selectFrameId[i]=t.readShort();for(var n=t.readByte(),a=0;n>a;a++){var o=this.getFrameData(i+1,a+1);o.type=i+1,o.update(t)}}RpFun.showChatFrameRp()},e.prototype.sendChatFrame=function(){this.sendBase(6)},e.prototype.upgradeFrame=function(t){var e=t.readByte(),i=t.readShort(),n=this.getFrameData(e,i);n.lv=t.readInt(),RpFun.showChatFrameRp()},e.prototype.sendUpgradeFrame=function(t,e){var i=this.getBytes(7);i.writeShort(e),i.writeByte(t),this.send(i)},e.prototype.getFrameData=function(t,e){var i=this.chatFrmeDatas[t-1];if(i||(i=this.chatFrmeDatas[t-1]=[]),!i[e-1]){var n=new ChatFrameData;n.type=t,n.id=e,i[e-1]=n}return i[e-1]},e.prototype.addSysChatMsg=function(t){var e=ChatFactory.createData(ChatType.System);e.setContent(t),this.addMsg(e)},e.prototype.patchSysChatMsg=function(t){var e=ChatFactory.createData(ChatType.System);e.setContent(t),this.addMsg(e)},e.prototype.patchLogMsg=function(t){var e=ChatFactory.createData(ChatType.Log);e.setContent(t),this.addMsg(e)},e.prototype.addMsg=function(t){t.type!=ChatType.Secret?(this.saveMsg(t.type,t),this.saveMsg(ChatType.All,t)):this.saveMsg(t.type,t)},e.prototype.saveMsg=function(t,e){var i=this.chatListDatas[t];i||(this.chatListDatas[t]=i=ChatFactory.createModel(t)),i.addMsg(e),this.updateSingleMsg(t,e)},e.prototype.updateSingleMsg=function(t,e){return[t,e]},e.prototype.getMsgsByType=function(t){return this.chatListDatas[t]||(this.chatListDatas[t]=ChatFactory.createModel(t))},e.prototype.canSpeak=function(t){var e=this.getMsgsByType(t).canSpeak();return e||showtipsFail(Lang.chat_str9),e},e.prototype.updateSpeakTick=function(t){void 0===t&&(t=0);for(var e=0,i=this.chatListDatas;e<i.length;e++){var n=i[e];n&&n.updateSpeakTick()}},e.prototype.checkRepeatString=function(t){var e=t.length;if(10>=e)return!0;for(var i=0,n=0;e>n;n++){var a=t.charAt(n);-1!=this.lastSpeak.lastIndexOf(a)&&++i}return i>=10?(showtipsFail(Lang.chat_str10),!1):!0},e.prototype.onSocketClose=function(){for(var t=0,e=this.chatListDatas;t<e.length;t++){var i=e[t];i&&i.destruct()}this.chatListDatas.length=0},__decorate([post()],e.prototype,"updateXianluChat",null),__decorate([post()],e.prototype,"selectFrame",null),__decorate([post()],e.prototype,"updateChatFrame",null),__decorate([post()],e.prototype,"upgradeFrame",null),__decorate([post()],e.prototype,"updateSingleMsg",null),e}(BaseSys);__reflect(ChatSys.prototype,"ChatSys");var System;!function(t){t.chatSys=ChatSys.ins.bind(ChatSys)}(System||(System={})),window.ChatSys=ChatSys;var ChatDataACT37_QQSH=function(t){function e(){return t.call(this)||this}return __extends(e,t),e.prototype.parserMessage=function(t){this.actId=t.readInt(),this.serverid=t.readInt(),this.roleId=t.readInt(),this.roleName=t.readString(),this.power=t.readDouble(),this.zsLevel=t.readInt(),this.guildName=t.readString(),this.job=t.readByte(),this.sex=t.readByte(),this.vipLevel=t.readByte(),this.svipLevel=t.readByte();var e=Cfg.getConfig(ActivityCommonConfig).activityTips;this.setContent(e+addColor(StrUtil.addUnderLine("前往赠送"),5949490))},e.prototype.getHtmlTitle=function(){return addColorTF(this.getVipContent()+this.getRoleName())},e.prototype.getHtmlContent=function(){return addColorTF(this.getContent())},e}(ChatDataBase);__reflect(ChatDataACT37_QQSH.prototype,"ChatDataACT37_QQSH"),window.ChatDataACT37_QQSH=ChatDataACT37_QQSH;var ItemBaseRewardRate=function(t){function e(){return t.call(this)||this}return __extends(e,t),e.prototype.setCount=function(t){var e=this.data;Cfg.getItemCfg(e.id);t>1&&100==e.rate?(this.count.text=GFunc.overLength(t),this.count.visible=!0):this.count.visible=!1},e}(ItemBaseReward);__reflect(ItemBaseRewardRate.prototype,"ItemBaseRewardRate");var ChatDataEmoIsleTeam=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return __extends(e,t),e.prototype.getHtmlTitle=function(){return addColorTF(Lang.chat_str6,16766720)},e.prototype.getHtmlContent=function(){var t=this.getVipContent();return t+=StrUtil.addColor(this.roleName,1487615),t+=StrUtil.addColor(":"+this.content,15129784),addColorTF(t)},e}(ChatDataGuildTeam);__reflect(ChatDataEmoIsleTeam.prototype,"ChatDataEmoIsleTeam");var ItemBaseRewardShenmi=function(t){function e(){return t.call(this)||this}return __extends(e,t),e.prototype.setSkinName=function(){this.skinName="ItemSkin"},e.prototype.dataChanged=function(){t.prototype.dataChanged.call(this),this.currentState="shenmi",this.validateNow()},e}(ItemBase);__reflect(ItemBaseRewardShenmi.prototype,"ItemBaseRewardShenmi");var ChatDataGuaJiKuaFu=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return __extends(e,t),e.prototype.getHtmlTitle=function(){return addColorTF(this.getVipContent()+StrUtil.addColor(this.roleName,1487615))},e.prototype.getHtmlContent=function(){return addColorTF(StrUtil.addColor(":"+this.content,15790320))},e}(ChatDataGuaJi);__reflect(ChatDataGuaJiKuaFu.prototype,"ChatDataGuaJiKuaFu");var ChatDataGuaJiWord=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return __extends(e,t),e.prototype.getHtmlTitle=function(){return addColorTF(Lang.chat_str6,16766720)},e}(ChatDataGuaJi);__reflect(ChatDataGuaJiWord.prototype,"ChatDataGuaJiWord");var ItemBaseSimple=function(t){function e(){return t.call(this)||this}return __extends(e,t),e.prototype.init=function(){t.prototype.init.call(this),this.imgBg.visible=!1,this.count.visible=!1,this.groupMc.visible=!1,this.imgColor.visible=!1},e}(ItemBase);__reflect(ItemBaseSimple.prototype,"ItemBaseSimple");var ItemIcon=function(t){function e(){var e=t.call(this)||this;return e.count.visible=!1,e}return __extends(e,t),e.prototype.setDataByItemConfig=function(t){null!=t?(this.imgIcon.source=ResMgr.getItemIcon(t.getIcon(),IconType.IT_80x80),this.imgColor.source=ResMgr.getItemqualityResource(t.quality),this.setStar(t.star),this.setRank(ItemType.isShowRank(t.type)?t.rank:0),this.setImgSR(t.srQuality),this.setAoyi(t.type==ItemType.Aoyi),this.setItemKuangEffect(!0,ResMgr.getEquipEffName(t.quality)),""!=t.itemeff&&t.itemeff?this.setItemEffect(!0,""+ResMgr.getItemEff(t.type,t.itemeff)):this.setItemEffect(!1)):(this.imgIcon.source="",this.imgColor.source=ResMgr.getItemqualityResource(0))},e.prototype.setBgColorShow=function(t){this.imgColor.visible=!1},e.prototype.setlv=function(t){t>=1?(this.bmpZhui.visible=!0,this.bmpZhui.text="+"+t):this.bmpZhui.visible=!1},e.prototype.setFujiaEff=function(t){t>0?this.setItemEffect(!0,"fujia"):this.setItemEffect(!1)},e}(ItemBaseReward);__reflect(ItemIcon.prototype,"ItemIcon"),window.ItemIcon=ItemIcon;var ChatDataKuaFu=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return __extends(e,t),e.prototype.getHtmlTitle=function(){return addColorTF(this.getVipContent()+this.getRoleName())},e.prototype.getHtmlContent=function(){return addColorTF(this.getContent())},e}(ChatDataBase);__reflect(ChatDataKuaFu.prototype,"ChatDataKuaFu");var ChatDataLocal=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return __extends(e,t),e.prototype.getHtmlTitle=function(){return addColorTF(StrUtil.addColor(Lang.chat_str2,1359701)+this.getVipContent()+this.getRoleName())},e.prototype.getHtmlContent=function(){return addColorTF(this.getContent())},e}(ChatDataBase);__reflect(ChatDataLocal.prototype,"ChatDataLocal");var ChatDataLog=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return __extends(e,t),e.prototype.getHtmlTitle=function(){return addColorTF(Lang.chat_str13,7022853)},e.prototype.getHtmlContent=function(){return addColorTF(this.getContent())},e}(ChatDataBase);__reflect(ChatDataLog.prototype,"ChatDataLog");var ItemRewardGuildShop=function(t){function e(){return t.call(this)||this}return __extends(e,t),e.prototype.setSkinName=function(){t.prototype.setSkinName.call(this),this.currentState="guildShop"},e}(ItemBaseReward);__reflect(ItemRewardGuildShop.prototype,"ItemRewardGuildShop");var ChatDataMoLongKuaFu=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return __extends(e,t),e.prototype.getHtmlTitle=function(){return addColorTF(Lang.chat_str14,16766720)},e.prototype.getHtmlContent=function(){var t=this.getVipContent();return t+=StrUtil.addColor(this.roleName,1487615),t+=StrUtil.addColor(":"+this.content,15790320),addColorTF(t)},e}(ChatDataMoLong);__reflect(ChatDataMoLongKuaFu.prototype,"ChatDataMoLongKuaFu"),window.ChatDataMoLongKuaFu=ChatDataMoLongKuaFu;var ChatDataMoLongWord=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return __extends(e,t),e.prototype.getHtmlTitle=function(){return addColorTF(Lang.chat_str6,16766720)},e.prototype.getHtmlContent=function(){var t=this.getVipContent();return t+=StrUtil.addColor(this.roleName,1487615),t+=StrUtil.addColor(":"+this.content,15790320),addColorTF(t)},e}(ChatDataMoLong);__reflect(ChatDataMoLongWord.prototype,"ChatDataMoLongWord");var ChatDataSecret=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.showDate=!1,e.isNewMsg=!1,e}return __extends(e,t),e.prototype.parserMessage=function(t){this.roleId=t.readInt(),this.timer=DateUtil.formatMiniDateTime(t.readInt()),this.content=t.readString();var e=new FriendData;if(this.roleId==Actor.ins().actorID){if(e.id=this.roleId,e.roleName=Actor.ins().myName,e.lv=Actor.ins().level,e.power=Actor.ins().power,e.job=Actor.ins().job,e.vip=Actor.ins().sVipLv,FriendSys.ins().currChatRoleID>0){var i=FriendSys.ins().getFriendDataById(FriendSys.ins().currChatRoleID);i&&(i.lastMsg=this.content)}}else e=FriendSys.ins().getFriendDataById(this.roleId),e.lastMsg=this.content;this.fromActor=e},e.getTitle=function(){return Lang.chat_str3},e.prototype.getTimeStr=function(){return new Date(this.timer).toLocaleTimeString()},e}(ChatDataBase);__reflect(ChatDataSecret.prototype,"ChatDataSecret");var ItemShop=function(t){function e(){var e=t.call(this)||this;return e.setSkinName(),e}return __extends(e,t),e.prototype.setSkinName=function(){this.skinName="ItemSkin",this.currentState="shop"},e}(ItemBaseReward);__reflect(ItemShop.prototype,"ItemShop"),window.ItemShop=ItemShop;var ChatDataShenDianKuaFu=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return __extends(e,t),e.prototype.getHtmlTitle=function(){return addColorTF(Lang.chat_str14,16766720)},e.prototype.getHtmlContent=function(){var t=this.getVipContent();return t+=StrUtil.addColor(this.roleName,1487615),t+=StrUtil.addColor(":"+this.content,15790320),addColorTF(t)},e}(ChatDataShenDian);__reflect(ChatDataShenDianKuaFu.prototype,"ChatDataShenDianKuaFu"),window.ChatDataShenDianKuaFu=ChatDataShenDianKuaFu;var ChatDataShenDianWord=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return __extends(e,t),e.prototype.getHtmlTitle=function(){return addColorTF(Lang.chat_str6,16766720)},e.prototype.getHtmlContent=function(){var t=this.getVipContent();return t+=StrUtil.addColor(this.roleName,1487615),t+=StrUtil.addColor(":"+this.content,15790320),addColorTF(t)},e}(ChatDataShenDian);__reflect(ChatDataShenDianWord.prototype,"ChatDataShenDianWord");var ChatDataSystem=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return __extends(e,t),e.prototype.getHtmlTitle=function(){return addColorTF(Lang.chat_str5,7022853)},e.prototype.getHtmlContent=function(){return StrUtil.toTF(this.getContent())},e}(ChatDataBase);__reflect(ChatDataSystem.prototype,"ChatDataSystem");var ChatDataWorld=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return __extends(e,t),e.prototype.getHtmlTitle=function(){return addColorTF(this.getVipContent()+this.getRoleName())},e.prototype.getHtmlContent=function(){return StrUtil.toTF(this.getContent())},e}(ChatDataBase);__reflect(ChatDataWorld.prototype,"ChatDataWorld");var ChatFrameData=function(){function t(){this.lv=0}return t.prototype.update=function(t){this.id=t.readShort(),this.lv=t.readInt()},t}();__reflect(ChatFrameData.prototype,"ChatFrameData");var PriceIcon=function(t){function e(){var e=t.call(this)||this;return e.skinName="PriceIconSkin",e}return __extends(e,t),e.prototype.getPrice=function(){return this._price},e.prototype.setIsYuanJia=function(t){this.imgYuan.visible=t},e.prototype.setPriceColor=function(t){this.priceLabel.textColor=t},e.prototype.setPrice=function(t){t!=this._price&&(this._price=t,this.priceLabel.text=""+GFunc.overLength(this._price),this.width=this.group.width)},e.prototype.setText=function(t){this.priceLabel.textFlow=addColorTF(t),this.width=this.group.width},e.prototype.setData=function(t){var e=t;this.setType(e.id),this._itemId=e.id,this.setPrice(e.count)},e.prototype.getType=function(){return this._itemId},e.prototype.setType=function(t){this._itemId!=t&&(this._itemId=t,this.iconImg.source=ResMgr.getItemIconMin(Cfg.getItemCfg(t).getIcon()))},Object.defineProperty(e.prototype,"labelColor",{get:function(){return this._labelColor},set:function(t){this._labelColor!=t&&(this._labelColor=t,this.priceLabel.textColor=this._labelColor)},enumerable:!0,configurable:!0}),e}(BaseEUI);__reflect(PriceIcon.prototype,"PriceIcon"),window.PriceIcon=PriceIcon;var ChatModelSecret=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.chatSecretDatas=[],e.newChatMsg=[],e.chatTime=[],e.chatinterval=18e4,e}return __extends(e,t),e.prototype.addMsg=function(t){var e=Actor.ins().actorID==t.roleId?FriendSys.ins().currChatRoleID:t.roleId,i=this.chatSecretDatas[e];i||(this.chatSecretDatas[e]=i=[],this.chatTime[e]=0),t.timer-this.chatTime[e]>this.chatinterval?(this.chatTime[e]=t.timer,t.showDate=!0):t.showDate=!1,t.isNewMsg&&(t.isNewMsg=!1,Actor.ins().actorID!=t.roleId&&FriendSys.ins().currChatRoleID!=t.roleId&&(this.newChatMsg[t.roleId]||(this.newChatMsg[t.roleId]=0),this.newChatMsg[t.roleId]+=1)),i.length>=this.charMax&&i.shift(),i.push(t)},e.prototype.getMsgsByRoleId=function(t){return this.chatSecretDatas[t]||[]},e.prototype.getNewMsgCount=function(t){return this.newChatMsg[t]||0},e.prototype.clearNewMsgCount=function(t){this.newChatMsg[t]=0},e.prototype.clearSecretData=function(t){this.chatSecretDatas[t]&&(this.chatSecretDatas[t].length=0),this.newChatMsg[t]=0,this.chatTime[t]=0},e.prototype.destruct=function(){t.prototype.destruct.call(this),this.chatSecretDatas.length=0,this.newChatMsg.length=0,this.chatTime.length=0},e}(ChatModelBase);__reflect(ChatModelSecret.prototype,"ChatModelSecret");var ChatBubble=function(t){function e(){var e=t.call(this)||this;return e.skinName="ChatBubbleSkin",e.touchEnabled=!1,e.touchChildren=!1,e.newText=new TextImage,e.newText.x=e.lbstr.x,e.newText.y=e.lbstr.y,e.lbstr.parent.addChild(e.newText),e.newText.size=e.lbstr.size,e.newText.textColor=e.lbstr.textColor,e.newText.lineSpacing=e.lbstr.lineSpacing,e.newText.width=e.lbstr.width,e.newText.top=e.lbstr.top,e.newText.bottom=e.lbstr.bottom,e.newText.left=e.lbstr.left,e.newText.right=e.lbstr.right,e}return __extends(e,t),e.prototype.setChatContent=function(t){this.newText.textColor=this.lbstr.textColor,this.newText.text=t},e}(eui.Component);__reflect(ChatBubble.prototype,"ChatBubble"),window.ChatBubble=ChatBubble;var McIcon=function(t){function e(){var e=t.call(this)||this;return e.flyingEndY=-20,e.container=new egret.DisplayObjectContainer,e.addChild(e.container),e.mcBg=new MC,e.mcBg.visible=!1,e.mcBg.y=-130,e.container.addChild(e.mcBg),e.img=new eui.Image,e.img.visible=!1,e.container.addChild(e.img),e.mcFoots=[],e}return __extends(e,t),e.prototype.onImgComplete=function(t){this.img.anchorOffsetX=Math.ceil(this.img.width/2),this.img.anchorOffsetY=Math.ceil(this.img.height/2)},e.prototype.open=function(e,i,n){void 0===i&&(i=Actor.ins().job),void 0===n&&(n=Actor.ins().sex),t.prototype.open.call(this),this.config=e,this.job=i,this.sex=n,this.img.addEventListener(egret.Event.COMPLETE,this.onImgComplete,this),this.config?this.update():console.log("MCIconConfig外观显示未配置,请策划检查配置")},e.prototype.update=function(){Timer.ins().removeAll(this);var t=[MCIconType.image,MCIconType.itemId],e=[MCIconType.shenqi,MCIconType.wing,MCIconType.shenzhuang,MCIconType.meilin,MCIconType.damonFz,MCIconType.yongbingFz,MCIconType.shenmoFz,MCIconType.eff,MCIconType.itemEff,MCIconType.Foot,MCIconType.HuDun,MCIconType.FootHuanHua,MCIconType.ShengLing],i=[MCIconType.shenmo,MCIconType.damon,MCIconType.yongbing,MCIconType.Foot,MCIconType.Role],n=t.indexOf(this.config.type)>-1;this.img.visible=n;var a=e.indexOf(this.config.type)>-1;if(i.indexOf(this.config.type)>-1?(this.entity||(this.entity=new EntityRoleUI),this.container.addChild(this.entity),this.entity.scaleX=this.entity.scaleY=this.config.scale?this.config.scale:1):this.entity&&DisUtil.remove(this.entity),DisUtil.remove(this.mc),a&&(this.mc=new MC,this.container.addChild(this.mc),this.mc.scaleX=this.mc.scaleY=this.config.scale?this.config.scale:1),this.container.x=0,this.container.y=0,egret.Tween.removeTweens(this.container),n&&!this.config.isImgEff&&(GFunc.move(this.container,new XY,new XY(this.img.x,this.flyingEndY),2e3),this.img.scaleX=this.img.scaleY=this.config.scale?this.config.scale:1),this.config.bgeff){var o=Cfg.getConfig(EffAppearanceConfig,this.config.bgeff).appearance;this.mcBg.visible=!0,this.mcBg.playFile(ResMgr.getEffName(o),-1)}else this.mcBg.visible=!1,this.mcBg.stop();var s=this.getChildByName("MCIconType.damon");DisUtil.remove(s);var r=this.getChildByName("MCIconType.yongbing");DisUtil.remove(r);var u=this.getChildByName("MCIconType.shenmo");switch(DisUtil.remove(u),this.config.type){case MCIconType.image:var h=this.config.param,o=Cfg.getConfig(ImageAppearanceConfig,h).appearance;this.img.source=o;break;case MCIconType.shenqi:var l=this.config.param,p=Cfg.getConfig(ShenqiHuanhuaBaseConfig,l).weaponIds[this.job-1],o=Cfg.getConfig(WeaponAppearanceConfig,p).appearance;this.mc.playFile(ResMgr.getWeaponUIEFFResource(o),-1);break;case MCIconType.wing:var c=this.config.param,d=Cfg.getConfig(WingHuanhuaBaseConfig,c).wingIds[this.job-1],o=Cfg.getConfig(WingAppearanceConfig,d).appearance;this.mc.playFile(ResMgr.getWingUIEFFResource(o),-1);break;case MCIconType.shenzhuang:var c=this.config.param,d=Cfg.getConfig(SzHuanhuaBaseConfig,c).uibody[this.sex];this.mc.playFile(d,-1);break;case MCIconType.meilin:var c=this.config.param,d=Cfg.getConfig(MeilinHuanhuaBaseConfig,c).appearanceId,o=Cfg.getConfig(MeilinAppearanceConfig,d).appearance;this.mc.playFile(ResMgr.getUIMeilinRes(o),-1);break;case MCIconType.damonFz:var c=this.config.param,d=Cfg.getConfig(DamonMozhenBaseConfig,c).appearanceId,o=Cfg.getConfig(GuanghuanAppearanceConfig,d).appearance;this.mc.playFile(ResMgr.getUIFootSource(o),-1);break;case MCIconType.yongbingFz:var c=this.config.param,d=Cfg.getConfig(YongbingMozhenBaseConfig,c).appearanceId,o=Cfg.getConfig(GuanghuanAppearanceConfig,d).appearance;this.mc.playFile(ResMgr.getUIFootSource(o),-1);break;case MCIconType.shenmoFz:var c=this.config.param,d=Cfg.getConfig(ShenmoMozhenBaseConfig,c).appearanceId,o=Cfg.getConfig(GuanghuanAppearanceConfig,d).appearance;this.mc.playFile(ResMgr.getUIFootSource(o),-1);break;case MCIconType.shenmo:var g=Cfg.getConfig(ShenmoHuanhuaBaseConfig,this.config.param).uibody,f=MC.createCenterGruop(g,-1);f.name="MCIconType.shenmo",this.addChild(f);break;case MCIconType.eff:var o=Cfg.getConfig(EffAppearanceConfig,this.config.param).appearance;this.mc.playFile(ResMgr.getEffName(o),-1);break;case MCIconType.damon:var g=Cfg.getConfig(DamonHuanhuaBaseConfig,this.config.param).uibody,f=MC.createCenterGruop(g,-1);f.name="MCIconType.damon",this.addChild(f);break;case MCIconType.yongbing:var g=Cfg.getConfig(YongbingHuanhuaBaseConfig,this.config.param).uibody,f=MC.createCenterGruop(g,-1);f.name="MCIconType.yongbing",this.addChild(f);break;case MCIconType.itemId:var y=Cfg.getItemCfg(this.config.param).getIcon(this.job);this.img.source=ResMgr.getItemIcon(y,IconType.IT_NG);case MCIconType.itemEff:var m=this.config.param,y=Cfg.getItemCfg(m).getIcon(this.job);this.mc.playFile(ResMgr.getItemIconEff(y,IconType.IT_NG),-1);break;case MCIconType.Foot:this.entity.y=this.config.y?this.config.y:0;var C=LogicSys.ins().centerEntity.data,v=new EntityRoleData;v.szId=C.szId,v.sqId=C.sqId,v.wingId=C.wingId,v.footId=C.footId,v.damonId=C.damonId,v.job=C.job,v.sex=C.sex,this.entity.setData(v,5,EntityAction.RUN),Timer.ins()["do"](0,500,0,this.onMoveFoot,this);break;case MCIconType.HuDun:var c=this.config.param,d=Cfg.getConfig(ShenYouHuanhuaConfig,c).bodyId,o=Cfg.getConfig(ShenYouHuDunAppearanceConfig,d).appearance;this.mc.y=this.config.y?this.config.y:30,this.mc.playFile(ResMgr.getHuDunUISource(o),-1);break;case MCIconType.ShengLing:var S=Cfg.getConfig(ShengLingConfig,this.config.param),o=Cfg.getConfig(ShengLingAppearanceConfig,S.bodyIds[this.job-1]).appearance;this.mc.y=this.config.y?this.config.y:-30,this.mc.playFile(ResMgr.getShengLingUIEFFResource(o),-1);break;case MCIconType.FootHuanHua:var c=this.config.param,d=Cfg.getConfig(FootHuanhuaBaseConfig,c).bodyId,o=Cfg.getConfig(ZuJiAppearanceConfig,d).appearance;this.mc.y=this.config.y?this.config.y:0,this.mc.playFile(ResMgr.getFootPrintNameUI(o),-1)}},e.prototype.onMoveFoot=function(){var t=this,e=Cfg.getConfig(FootHuanhuaBaseConfig,this.config.param||1),i=this.mcFoots.pop()||new MC;i.playFile(e.facade,1,null,!0),i.x=0,i.y=0,this.container.addChildAt(i,0);var n=egret.Tween.get(i);n.to({x:260,y:-180},1200).call(function(){t.mcFoots.push(i)},this)},e.prototype.removeDisplay=function(){this.mc&&this.mc.stop(),this.img&&this.img.removeEventListener(egret.Event.COMPLETE,this.onImgComplete,this),this.mcBg&&this.mcBg.stop(),egret.Tween.removeTweens(this.container),Timer.ins().removeAll(this)},e}(BaseEUI);__reflect(McIcon.prototype,"McIcon");var ChatFramePanelItem=function(t){function e(){var e=t.call(this)||this;return e.skinName="ChatFramePanelItemEUI",e}return __extends(e,t),e.prototype.dataChanged=function(){var t=this.data,e=Cfg.getConfig(ChatFrameConfig,t.type,t.id);this.lockImg.visible=!t.lv,this.iconImg.source=ResMgr.getFrameIcon(e.icon),this.imgSyz.visible=t.lv>0&&ChatSys.ins().selectFrameId[t.type-1]==t.id,this.redPoint.visible=RpSys.ins().getData(SettingAndChatWin,ChatFramePanel,t.type,t.id)},e}(BaseItemRender);__reflect(ChatFramePanelItem.prototype,"ChatFramePanelItem"),window.ChatFramePanelItem=ChatFramePanelItem;var RpDataUpdateAll=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return __extends(e,t),e.prototype.check=function(t){return!0},e}(RpData);__reflect(RpDataUpdateAll.prototype,"RpDataUpdateAll");var ChatHeadFramePanelItem=function(t){function e(){var e=t.call(this)||this;return e.skinName="ChatHeadFramePanelItemEUI",e}return __extends(e,t),e.prototype.dataChanged=function(){var t=this.data,e=Cfg.getConfig(ChatFrameConfig,t.type,t.id);this.lockImg.visible=!t.lv,this.iconImg.source=ResMgr.getFrameIcon(e.icon),this.imgSyz.visible=t.lv>0&&ChatSys.ins().selectFrameId[t.type-1]==t.id,this.redPoint.visible=RpSys.ins().getData(SettingAndChatWin,ChatHeadFramePanel,t.type,t.id)},e}(BaseItemRender);__reflect(ChatHeadFramePanelItem.prototype,"ChatHeadFramePanelItem"),window.ChatHeadFramePanelItem=ChatHeadFramePanelItem;var PageArrowPanel=function(t){function e(e,i,n,a){void 0===a&&(a=ArrowDir.dirH);var o=t.call(this,e,i,n,a)||this;return o.initBtn(),o.updateBtnLayout(),o}return __extends(e,t),e.prototype.setXYWH=function(t,e,i,n){this.x=t,this.y=e,this.width=i,this.height=n},e.prototype.setLeftOrUpBtn=function(t){this.leftBtn.icon=t,this.rightBtn.icon=t,this.dir==ArrowDir.dirH?this.rightBtn.scaleX=-1:this.rightBtn.scaleY=-1},e.prototype.setRightOrDownBtn=function(t){this.rightBtn.icon=t,this.leftBtn.icon=t,this.dir==ArrowDir.dirH?this.leftBtn.scaleX=-1:this.leftBtn.scaleY=-1},e.prototype.updateBtnLayout=function(){this.dir==ArrowDir.dirH?(this.leftBtn.left=0,this.rightBtn.right=0):(this.leftBtn.top=0,this.rightBtn.bottom=0)},e.prototype.initBtn=function(){this.leftBtn=new eui.Button,this.leftBtn.skinName="Btn0Skin",this.addChild(this.leftBtn),this.rightBtn=new eui.Button,this.rightBtn.skinName="Btn0Skin",this.addChild(this.rightBtn)},e}(PageArrowCom);__reflect(PageArrowPanel.prototype,"PageArrowPanel");var PageTurnPanel=function(t){function e(){var e=t.call(this)||this;e.totalPage=0,e.currPage=0,e.scrollWidth=0,e.scrollHeight=0,e.lastScrollH=0,e.gap=0,e.radioSkinName="RadioBtn0Skin",e.scroller=new eui.Scroller,e.addChild(e.scroller);var i=new eui.HorizontalLayout;e.gap=i.gap=15,e.list=new eui.List,e.list.layout=i,e.addChild(e.list),e.scroller.viewport=e.list,e.radioGroup=new eui.RadioButtonGroup;var n=new eui.HorizontalLayout;return n.verticalAlign="middle",e.rdbGroup=new eui.Group,e.rdbGroup.horizontalCenter=0,e.rdbGroup.layout=n,e.addChild(e.rdbGroup),e}return __extends(e,t),e.prototype.open=function(){LayerMgr.getStage().addEventListener(egret.TouchEvent.TOUCH_BEGIN,this.onTouchBeginCapture,this),LayerMgr.getStage().addEventListener(egret.TouchEvent.TOUCH_END,this.onTouchEndCapture,this),this.radioGroup.addEventListener(eui.UIEvent.CHANGE,this.radioChangeHandler,this)},e.prototype.close=function(){LayerMgr.getStage().removeEventListener(egret.TouchEvent.TOUCH_BEGIN,this.onTouchBeginCapture,this),LayerMgr.getStage().removeEventListener(egret.TouchEvent.TOUCH_END,this.onTouchEndCapture,this),this.radioGroup.removeEventListener(eui.UIEvent.CHANGE,this.radioChangeHandler,this)},e.prototype.radioChangeHandler=function(t){var e=t.target;this.currPage=e.selectedValue,this.moveScroller()},e.prototype.onTouchBeginCapture=function(t){this.lastScrollH=this.list.scrollH},e.prototype.onTouchEndCapture=function(t){var e=this.lastScrollH-this.list.scrollH;if(Math.abs(e)>=this.scrollWidth){var i=Math.ceil(this.list.scrollH/this.scrollWidth);this.currPage=i<this.totalPage?i:i-1}else Math.abs(e)>this.scrollWidth/4&&(e>0?this.currPage=this.currPage>0?--this.currPage:0:this.currPage=this.currPage<this.totalPage-1?++this.currPage:this.totalPage-1);this.moveScroller()},e.prototype.moveScroller=function(){if(!(this.totalPage<=0)){var t=this.currPage*(this.scrollWidth+this.gap);this.scroller.$Scroller[Keys.touchScrollH].throwTo(t),this.radbs[this.currPage].selected=!0}},e.prototype.setRadioSkinName=function(t){this.radioSkinName=t},e.prototype.setItemGap=function(t){this.list.layout.gap=this.gap=t},e.prototype.setRadioButtonY=function(t){this.rdbGroup.y=t},e.prototype.setListItemRenderer=function(t,e,i){this.list.itemRenderer=t,this.scrollWidth=e,this.scrollHeight=i,this.scroller.width=e,this.scroller.height=i,this.rdbGroup.y=i+10},e.prototype.setListData=function(t){this.totalPage=t.length,this.currPage=0,this.list.dataProvider=new eui.ArrayCollection(t),this.createRadioButton(this.totalPage);var e=(this.totalPage-1)*(this.scrollWidth+this.gap);this.scroller.$Scroller[Keys.touchScrollH].maxScrollPos=e},e.prototype.createRadioButton=function(t){this.radbs=[];for(var e=0;t>e;e++){var i=new eui.RadioButton;i.skinName=this.radioSkinName,i.value=e,i.group=this.radioGroup,0==e&&(i.selected=!0),this.rdbGroup.addChild(i),this.radbs.push(i)}},e}(BaseEUI);__reflect(PageTurnPanel.prototype,"PageTurnPanel");var Keys;!function(t){t[t.scrollPolicyV=0]="scrollPolicyV",t[t.scrollPolicyH=1]="scrollPolicyH",t[t.autoHideTimer=2]="autoHideTimer",t[t.touchStartX=3]="touchStartX",t[t.touchStartY=4]="touchStartY",t[t.touchMoved=5]="touchMoved",t[t.horizontalCanScroll=6]="horizontalCanScroll",t[t.verticalCanScroll=7]="verticalCanScroll",t[t.touchScrollH=8]="touchScrollH",t[t.touchScrollV=9]="touchScrollV",t[t.viewport=10]="viewport",t[t.viewprotRemovedEvent=11]="viewprotRemovedEvent",t[t.touchCancle=12]="touchCancle"}(Keys||(Keys={}));var ChatWinEmojiItem=function(t){function e(){var e=t.call(this)||this;return e.skinName="ChatWinEmojiItemEUI",e}return __extends(e,t),e.prototype.dataChanged=function(){var t=this.data;
this.soure=ResMgr.getEmojiIcon(t.soure)},e}(BaseItemRender);__reflect(ChatWinEmojiItem.prototype,"ChatWinEmojiItem"),window.ChatWinEmojiItem=ChatWinEmojiItem;var ChatWinItem=function(t){function e(){return t.call(this)||this}return __extends(e,t),e.prototype.setSkinName=function(){this.skinName=""},e.prototype.onClick=function(t){var e=this.data;e.isRole()&&e.roleId!=Actor.ins().actorID&&LogicSys.ins().sentOtherActor(e.roleId)},e.prototype.dataChanged=function(){var t=this.data,e=t.isRole();if(this.skinName=e?"ChatItemMinRoleSkin":"ChatItemMinSysSkin",this.validateNow(),this.newText||this.initEmojiText(),this.headGoup&&this.addClickE(this.headGoup,this.onClick),this.newText.x=this.lbstr.x,this.newText.y=this.lbstr.y,this.lbstr.parent.addChild(this.newText),this.newText.width=this.lbstr.width,e){this.headIcon=t.getHeadIcon(),this.sexIcon=t.getSexIcon(),this.titleArr=t.getHtmlTitle();var i=Cfg.getConfig(ChatFrameConfig,1,t.frameId);this.chatFrame.source=ResMgr.getFrameIcon(i.icon),i=Cfg.getConfig(ChatFrameConfig,2,t.headFrameId),this.headFrame.source=ResMgr.getFrameIcon(i.icon)}this.chattype="chat_type"+t.type,this.newText.textColor=this.lbstr.textColor,this.newText.text=t.getContent()},e.prototype.setSelected=function(t){this.btn_group.visible=t},e.prototype.getSelected=function(){return this.btn_group.visible},e}(ChatItemMainChat);__reflect(ChatWinItem.prototype,"ChatWinItem"),window.ChatWinItem=ChatWinItem;var SettingAndChatWin=function(t){function e(){var e=t.call(this)||this;return e.layer=LayerMgr.Popup,e}return __extends(e,t),e.prototype.initUI=function(){t.prototype.initUI.call(this),this.addBg()},e.prototype.setSkinName=function(){this.skinName="SmallWinEUI"},e.prototype.setTabItem=function(){this.tab.itemRenderer=BaseTabBtn3},e.panelNames=[SettingsWin,ChatHeadFramePanel,ChatFramePanel],e}(BaseWinAutoTab);__reflect(SettingAndChatWin.prototype,"SettingAndChatWin"),window.SettingAndChatWin=SettingAndChatWin;var TextImage=function(t){function e(){var e=t.call(this)||this;return e._textImageData=[],e._size=36,e._verticalAlign=egret.VerticalAlign.MIDDLE,e._lineSpacing=0,e.components=[],e._textColor=0,e}return __extends(e,t),Object.defineProperty(e.prototype,"size",{get:function(){return this._size},set:function(t){this._size=t},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"width",{get:function(){return this._width},set:function(t){this._width=t,this.invalidate()},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"verticalAlign",{get:function(){return this._verticalAlign},set:function(t){this._verticalAlign=t,this.invalidate()},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"lineSpacing",{get:function(){return this._lineSpacing},set:function(t){this._lineSpacing!==t&&(this._lineSpacing=t,this.invalidate())},enumerable:!0,configurable:!0}),e.prototype.validateNow=function(){this.updateText()},Object.defineProperty(e.prototype,"text",{set:function(t){var e=this.splitFace(t),i=e.msgs.length;this._textImageData.length=0;for(var n=0;i>n;n++)this._textImageData.push(e.msgs[n]),e.emojis&&e.emojis[n]&&this._textImageData.push(this.createImg(e.emojis[n]));this.updateText()},enumerable:!0,configurable:!0}),e.prototype.createImg=function(t){var e=t.replace(RegUtil.CHAT_EMOJI_ID,""),i=this.getEmojiInfo(+e),n=i.soure?i.soure:"emoji_"+e+"_png",a=new eui.Image;return a.width=i.width,a.height=i.height,a.source=ResMgr.getEmojiIcon(n),a},e.prototype.getEmojiInfo=function(t){var e=Cfg.getConfig(ChatEmojiConfig,t);return e?e:null},e.prototype.splitFace=function(t){return{emojis:t.match(RegUtil.CHAT_EMOJI),msgs:t.split(RegUtil.CHAT_EMOJI)}},e.prototype.updateText=function(){var t=this;if(this.removeChildren(),0==this._textImageData.length)return void(this.width=this.height=0);this.components=[],this._textImageData.forEach(function(e){"object"==typeof e&&(t.components.push(e),e.watch||(egret.is(e,"eui.Image")&&e.once(egret.Event.COMPLETE,t.invalidate,t),e.watch=!0))});var e=[];this._textImageData.map(function(t){"string"==typeof t?e=e.concat(StrUtil.toTF(t)):e.push({text:"　",style:{size:t.width}})});var i=this.templet=new eui.Label;i.size=this.size,i.lineSpacing=0,i.width=this.width,i.textFlow=e,i.$setHeight(i.height),this.height=0;var n=0;i.linesArr.forEach(function(e,i){var a=t.size;a=t._lineSpacing+a;var o=0;e.elements.forEach(function(e){var i;"　"!==e.text?(i=new eui.Label,i.x=o,i.size=t.size,i.textColor=t._textColor,i.textFlow=[e],i.width=e.width,i.height=a,i.y=t.height,i.verticalAlign=t._verticalAlign):(i=t.components[n++],i?(i.x=o,i.y=t.height+(a-i.height)/2):n--),o+=Math.ceil(i.width),t.addChild(i)}),e.elements.length=0,t.height+=a}),this._width=this.templet.width},Object.defineProperty(e.prototype,"textColor",{get:function(){return this._textColor},set:function(t){this._textColor=t,this.invalidate()},enumerable:!0,configurable:!0}),e.prototype.invalidate=function(t){this.updateText()},__decorate([callDelay()],e.prototype,"invalidate",null),e}(eui.Group);__reflect(TextImage.prototype,"TextImage");var BeAtkedWin=function(t){function e(){var e=t.call(this)||this;return e.layer=LayerMgr.Top,e.skinName="BeAtkedWinEUI",e.touchEnabled=e.touchChildren=!1,e}return __extends(e,t),e.prototype.open=function(){var i=this;t.prototype.open.call(this),e.nextTick=Timer.ins().getTimer()+4e3,egret.Tween.removeTweens(this);var n=egret.Tween.get(this);this.alpha=0,n.to({alpha:1},250).wait(250).to({alpha:0},250).wait(250).to({alpha:1},250).wait(250).to({alpha:0},250).wait(250).call(function(){closeWin(i)},this)},e.openCheck=function(){return Timer.ins().getTimer()>e.nextTick},e.nextTick=0,e}(BaseWinSingle);__reflect(BeAtkedWin.prototype,"BeAtkedWin"),window.BeAtkedWin=BeAtkedWin;var ComAttrData=function(){function t(t,e,i){void 0===i&&(i=!1),this.isMax=!1,this.curAttr=t,this.nextAttr=e,this.isMax=i}return t}();__reflect(ComAttrData.prototype,"ComAttrData");var ProgressBarEff9=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return __extends(e,t),e.prototype.iniUI=function(){this.bgimg=new eui.Image,this.bgimg.x=0,this.bgimg.y=13,this.bgimg.source=this.getBgImg(),this.groupDonw.addChild(this.bgimg);var t=new MC;t.mask=this.shape,this.groupDonw.addChild(this.shape),t.playFile(getEffName(this.getBgmcRes()),-1),t.x=262,t.y=36,this.bgmc=t,this.groupDonw.addChild(this.bgmc),this.xianmc=new MC,this.xianmc.playFile(getEffName(this.getXianmcRes()),-1),this.xianmc.x=0,this.xianmc.y=37,this.groupDonw.addChild(this.xianmc),this.objWidth=471},e.prototype.iniShape=function(){this.shape=new eui.Image,this.shape.source=this.getMaskImg(),this.shape.x=29,this.shape.y=26,this.shape.width=0,this.shape.fillMode="repeat"},e.prototype.iniShapebg=function(){},e.prototype.updasteValueText=function(){this.lbvalue.text=this.state==ProgressBarEffDataState.max?"MAX":this.valueName+this.getValue()+"/"+this.getMaxValue(),this.isFisrt||this.updateMan(),this.isFisrt=!1},e.prototype.updateXiaoWeiBa=function(){t.prototype.updateXiaoWeiBa.call(this),this.xianmc.visible=this.getValue()>0&&this.getValue()!=this.getMaxValue()},e.prototype.updateMan=function(){if(""!=this.getBkRes()){var t=new MC;t.x=262,t.y=36,t.playFile(getEffName(this.getBkRes()),1),this.addChild(t)}},e.prototype.setQianZhuiName=function(t){this.valueName=t},e.prototype.getMaskImg=function(){return"jsdd_zycs_jdt1"},e.prototype.getBgImg=function(){return"jsdd_zycs_jdt"},e.prototype.getBgmcRes=function(){return"jsdd_jindu"},e.prototype.getXianmcRes=function(){return"bule_jindu2"},e.prototype.getBkRes=function(){return""},e}(ProgressBarEff1);__reflect(ProgressBarEff9.prototype,"ProgressBarEff9"),window.ProgressBarEff9=ProgressBarEff9;var ComAttrItem2=function(t){function e(){var e=t.call(this)||this;return e.fm=AttrData.getFm(8662547,5767068,"："),e}return __extends(e,t),e}(ComAttrItem);__reflect(ComAttrItem2.prototype,"ComAttrItem2"),window.ComAttrItem2=ComAttrItem2;var ComAttrItem3=function(t){function e(){var e=t.call(this)||this;return e.skinName="ComAttrItemEUI4",e.fm="%k："+addColor("%v",15794098),e}return __extends(e,t),e}(ComAttrItem);__reflect(ComAttrItem3.prototype,"ComAttrItem3"),window.ComAttrItem3=ComAttrItem3;var ComAttrItem4=function(t){function e(){var e=t.call(this)||this;return e.fm=AttrData.getFm(13171455,15794098,"："),e.nextFm=addColor("%v",5767068),e}return __extends(e,t),e}(ComAttrItem);__reflect(ComAttrItem4.prototype,"ComAttrItem4"),window.ComAttrItem4=ComAttrItem4;var ComAttrWin=function(t){function e(){return t.call(this)||this}return __extends(e,t),e.prototype.setSkinName=function(){this.skinName="ComAttrWinEUI"},e.prototype.initUI=function(){t.prototype.initUI.call(this),this.layer=LayerMgr.Popup,this.addBg(),this.attrs.dataProvider=this.attrData=new eui.ArrayCollection},e.prototype.open=function(e,i){t.prototype.open.call(this),this.upatePanel(e,i)},e.prototype.upatePanel=function(t,e){var i="";switch(e){case ComAttrTitleEnum.HuanHua:i="public_zycs_hhjc";break;case ComAttrTitleEnum.FuHun:i="public_zycs_fh";break;case ComAttrTitleEnum.DamonYinJi:i="jl_zycs_yjsx";break;case ComAttrTitleEnum.YongbingYinJi:i="yb_zycs_yjsx";break;case ComAttrTitleEnum.ShenmoYinJi:i="shenmo_zycs_yjsx";break;case ComAttrTitleEnum.DamonMoZhen:i="jl_zycs_mzsx";break;case ComAttrTitleEnum.YongbingMoZhen:i="yb_zycs_mzsx";break;case ComAttrTitleEnum.ShenmoMoZhen:i="shenmo_zycs_mzsx";break;case ComAttrTitleEnum.ShengWu:i="sw_zycs_zsx";break;case ComAttrTitleEnum.FootMiYu:i="zuji_zycs_zjzsx";break;case ComAttrTitleEnum.FootJinJie:i="zuji_zycs_jjzsxjc";break;default:i="public_zycs_hhjc"}this.imgTitle.source=i,this.power.text=""+(GFunc.getPower(t)>>0),this.attrData.source=StrUtil.strsToTF(AttrData.parse(t)),this.attrs.validateNow(),this.attrs.width=this.attrs.contentWidth},e}(BaseWinSingle);__reflect(ComAttrWin.prototype,"ComAttrWin");var ComAttrTitleEnum;!function(t){t[t.HuanHua=0]="HuanHua",t[t.FuHun=1]="FuHun",t[t.DamonYinJi=2]="DamonYinJi",t[t.YongbingYinJi=3]="YongbingYinJi",t[t.ShenmoYinJi=4]="ShenmoYinJi",t[t.DamonMoZhen=5]="DamonMoZhen",t[t.YongbingMoZhen=6]="YongbingMoZhen",t[t.ShenmoMoZhen=7]="ShenmoMoZhen",t[t.ShengWu=8]="ShengWu",t[t.FootMiYu=9]="FootMiYu",t[t.FootJinJie=10]="FootJinJie"}(ComAttrTitleEnum||(ComAttrTitleEnum={})),window.ComAttrWin=ComAttrWin;var ComRewardTipsWin=function(t){function e(){return t.call(this)||this}return __extends(e,t),e.prototype.setSkinName=function(){this.skinName="ComRewardTipsWinEUI"},e.prototype.initUI=function(){t.prototype.initUI.call(this),this.layer=LayerMgr.Popup,this.addBg(),this.itemList.itemRenderer=ItemBaseRewardColor,this.itemList.dataProvider=this.itemData=new eui.ArrayCollection},e.prototype.open=function(e,i){void 0===i&&(i="奖励预览"),t.prototype.open.call(this),this.lb_title.text=i,this.itemData.source=e},e}(BaseWinSingle);__reflect(ComRewardTipsWin.prototype,"ComRewardTipsWin"),window.ComRewardTipsWin=ComRewardTipsWin;var GainGoodsItem=function(t){function e(){var e=t.call(this)||this;return e.skinName="GainGoodsItemEUI",e}return __extends(e,t),e.prototype.dataChanged=function(){var t=this.data,e=t.sysid,i=t.icon,n=t.recommend,a=t.desc;this.imgIcon.source=e>0?"mrrw_icon_"+e+"_png":"qt_zycs_"+i,this.imgTj.source=0==n?"":"qt_zycs_"+n,this.desc.text=a},e}(BaseItemRender);__reflect(GainGoodsItem.prototype,"GainGoodsItem"),window.GainGoodsItem=GainGoodsItem;var RoleSelectPanel=function(t){function e(){var e=t.call(this)||this;return e._curRole=0,e.roleModels=[],e.init(),e}return __extends(e,t),e.prototype.init=function(){},e.prototype.open=function(){this.setCurRole(this._curRole),this.setModel([])},e.prototype.setModel=function(t){this.roleModels=t},e.prototype.setRedPoint=function(t,e){},e.prototype.getCurRole=function(){return this._curRole},e.prototype.setCurRole=function(t){this._curRole=t},e.prototype.getCurJob=function(){return Actor.ins().job},e.prototype.getRoleLen=function(){return 1},e}(BasePanel);__reflect(RoleSelectPanel.prototype,"RoleSelectPanel"),window.RoleSelectPanel=RoleSelectPanel;var LHJG=function(t){function e(e){var i=t.call(this,e)||this;return i.total=0,i.circleCount=0,i}return __extends(e,t),e.prototype.setTotal=function(t){this.total=t},e.prototype.setCircleCount=function(t){this.circleCount=t},e.prototype.getMeanAngle=function(){return 360/this.total},e.prototype.start=function(e,i,n,a,o){void 0===a&&(a=0);var s=e*this.getMeanAngle(),r=360*this.circleCount+i*this.getMeanAngle();t.prototype.start.call(this,s,r,n,a,o)},e.prototype.onEnterFrame=function(e){return t.prototype.onEnterFrame.call(this,e),this.dispatchEventWith(egret.Event.CHANGING,!1,this.getCurPos()),!1},e.prototype.getCurPos=function(){return Math.ceil(this.curRoller.getCurAngle360()/this.getMeanAngle())||1},e}(LHJ);__reflect(LHJG.prototype,"LHJG"),window.LHJG=LHJG;var LongPress=function(t){function e(){var e=t.call(this)||this;return e.starCaller=new Caller,e.startTime=500,e.delay=100,e.isAutoAdd=!1,e}return __extends(e,t),e.prototype.open=function(){t.prototype.open.call(this)},e.prototype.close=function(){t.prototype.close.call(this),this.stop()},e.prototype.setDisplay=function(t,e,i,n,a){void 0===n&&(n=this.startTime),void 0===a&&(a=this.delay),this.starCaller.func=e,this.starCaller.obj=i,this.startTime=n,this.delay=a,this.addEvent(egret.TouchEvent.TOUCH_BEGIN,t,this.onYuMaoAddBegin),this.addEvent(egret.TouchEvent.TOUCH_END,i,this.onAddend),this.addEvent(egret.TouchEvent.TOUCH_RELEASE_OUTSIDE,i,this.onAddend)},e.prototype.onYuMaoAddBegin=function(t){this.isAutoAdd=!0,Timer.ins()["do"](this.startTime,this.delay,0,this.aotuFun,this)},e.prototype.onAddend=function(t){this.stop()},e.prototype.aotuFun=function(){this.starCaller.call()},e.prototype.stop=function(){this.isAutoAdd=!1,Timer.ins().remove(this.aotuFun,this)},e}(BaseEUI);__reflect(LongPress.prototype,"LongPress"),window.LongPress=LongPress;var ShopGoodsWarn=function(t){function e(){return t.call(this)||this}return __extends(e,t),e.prototype.setSkinName=function(){this.skinName="ShopGoodsWarnEUI"},e.prototype.initUI=function(){t.prototype.initUI.call(this),this.gainList.itemRenderer=GainGoodsItem},e.prototype.open=function(e){"number"==typeof e?(this.gainId=e,t.prototype.open.call(this,null)):t.prototype.open.call(this,e),this.addClickE(this.topUpBtn,this.onTap),this.addItemTapE(this.gainList,this.onTouchList)},e.prototype.iniNum=function(){t.prototype.iniNum.call(this),this.num=this.num>=this.buyData.maxBuyCount?this.buyData.maxBuyCount:this.num},e.prototype.updateView=function(){this.buyData&&t.prototype.updateView.call(this),this.buyData?this.currentState="shop":this.currentState="normal",this.validateNow();var e=this.buyData?this.buyData.itemId:this.gainId,i=Cfg.getConfig(StoreItemConfig,CondType.Equal,StoreItemConfig.itemId,e),n=GFunc.creatItemDataById(e);n.count=i?i.count:0,this.itemIcon.data=n;var a=n.cfg;this.itemName.text=a.getName(),this.itemName.textColor=GConst.PZColor[a.quality];var o=GFunc.getGainItemWayConfig(e);this.gainList.dataProvider=new eui.ArrayCollection(o);var s=o.length>4?4:o.length;this.gainList.width=94*s+35*(s-1),this.topUpBtn.visible&&(this.topUpBtn.visible=!urlParam.isShenhe)},e.prototype.onTap=function(e){t.prototype.onTap.call(this,e),e.currentTarget===this.topUpBtn&&(openWin(RechargeWin),closeWin(this))},e.prototype.onTouchList=function(t){var i=t.item;if(null!=t.item){var n=GFunc.createTaskNavData(i.controlTarget);n.setsucceedFrontFun(function(){WinMgr.ins().closeAllWin(),closeWin(e)}),n["goto"](i.sysid)}},e}(BuyWin);__reflect(ShopGoodsWarn.prototype,"ShopGoodsWarn"),window.ShopGoodsWarn=ShopGoodsWarn;var VerifyApiWin=function(t){function e(){var e=t.call(this)||this;return e.skinName="VerifyWinEUI",e}return __extends(e,t),e.prototype.addDisplay=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];this.addClickE(this.sendBtn0,this.onClick)},e.prototype.onClick=function(){var t=/(^\d{15}$)|(^\d{18}$)|(^\d{17}(\d|X|x)$)/;if(!t.test(this.idText.text))return this.idText.text="",void showtipsFail("输入的身份证长度或格式错误");var e=/^(([a-zA-Z+\.?\·?a-zA-Z+]{2,30}$)|([\u4e00-\u9fa5+\·?\u4e00-\u9fa5+]{2,30}$))/;return e.test(this.nameText.text)?void PfActivitySys.ins().sendVerifyApi(this.nameText.text,this.idText.text):(this.nameText.text="",void showtipsFail("请输入正确的姓名"))},e}(BaseWinSingle);__reflect(VerifyApiWin.prototype,"VerifyApiWin"),window.VerifyApiWin=VerifyApiWin;var WarnWin=function(t){function e(){return t.call(this)||this}return __extends(e,t),e.prototype.initUI=function(){t.prototype.initUI.call(this),this.layer=LayerMgr.Popup,this.skinName="WarnWinEUI",this.addBg()},e.prototype.open=function(e,i,n,a,o,s){void 0===i&&(i=null),void 0===n&&(n=null),void 0===a&&(a=null),void 0===o&&(o=null),void 0===s&&(s=""),t.prototype.open.call(this),this.addClickE(this.sureBtn,this.onTap),this.addClickE(this.notBtn,this.onTap),s=s||"normal",this.setWarnLabel(e,{func:i,thisObj:n},{func2:a,thisObj2:o},s)},e.prototype.onTap=function(t){switch(t.currentTarget){case this.sureBtn:null!=this.callBack.func&&this.callBack.func.call(this.callBack.thisObj);break;case this.notBtn:this.calback2.func2&&this.calback2.func2.call(this.calback2.thisObj2)}closeWin(this)},e.prototype.setWarnLabel=function(t,e,i,n){void 0===i&&(i=null),void 0===n&&(n="normal"),this.warnLabel.textFlow=addColorTF(t),this.callBack=e,this.calback2=i,this.currentState=n},e}(BaseWinSingle);__reflect(WarnWin.prototype,"WarnWin"),window.WarnWin=WarnWin;var PowerUpWin=function(t){function e(){var e=t.call(this)||this;return e.winType=WinType.NeverCloseWin,e.layer=LayerMgr.Top,e.isLog=!1,e.currentValue=0,e.lastValue=0,e.skinName="PowerUpWinEUI",e}return __extends(e,t),e.prototype.open=function(t,e){0==this.currentValue&&(this.currentValue=Math.round(t)),this.lastValue=Math.round(e),this.groupPower.visible=!1,this.bmpLabelBoost.visible=!1,this.bmpLabelBoost1.visible=!1,this.startShowPower()},e.prototype.close=function(){t.prototype.close.call(this),this.lastValue=0,this.currentValue=0},e.prototype.startShowPower=function(){this.lastValue>this.currentValue&&GFunc.playUIMC("zdlfire",0,0,this.groupFire,1,null,MC),Timer.ins()["do"](1,Timer.EVERY_FRAME,25,this.rollNum,this,TimerType.LAST)},e.prototype.rollNum=function(t){var e=this;if(this.groupPower.visible=!0,this.groupPower.alpha=1,this.bmpLabelBoost.alpha=1,egret.Tween.removeTweens(this.groupPower),egret.Tween.removeTweens(this.bmpLabelBoost),t>0){var i=this.lastValue-this.currentValue,n=Math.min(this.currentValue,this.lastValue),a=Math.max(this.currentValue,this.lastValue),o=i*t/25;i>0?this.bmpLabelPower.text=(n+o).toFixed()+"":this.bmpLabelPower.text=(a-o).toFixed()+""}else{this.bmpLabelPower.text=this.lastValue.toString();var i=this.lastValue-this.currentValue,s=void 0,r=35,u=this.bmpLabelPower.localToGlobal(0,0),h=this.groupPower.globalToLocal(u.x,u.y),l=500,p=500,c=void 0,d=void 0;i>0?(s="g",r*=-1,c=NumberType.powerUp,d=0):(l=700,i*=-1,s="-",c=NumberType.powerDown,d=4,r=70),this.bmpLabelBoost.visible=!0,this.bmpLabelBoost.text="",this.bmpLabelBoost.font=ResMgr.getFontByNumberType(c),this.bmpLabelBoost.text=""+s+i;var g=this.lastValue.toString().length-i.toString().length;this.bmpLabelBoost.x=h.x+d+30*(g-1)+g*this.bmpLabelPower.letterSpacing,this.bmpLabelBoost.y=h.y-20,this.currentValue=0,this.groupEff.x=this.bmpLabelBoost.x+50,this.groupEff.y=h.y-10,GFunc.playUIMovie("zdlb",0,0,this.groupEff,1);var f=egret.Tween.get(this.bmpLabelBoost);f.wait(150).to({y:this.bmpLabelBoost.y+r},l).to({alpha:0},p);var y=egret.Tween.get(this.groupPower);y.wait(l).to({alpha:0},p).call(function(){closeWin(e)})}},__decorate([callDelay()],e.prototype,"startShowPower",null),e}(BaseWinSingle);__reflect(PowerUpWin.prototype,"PowerUpWin"),window.PowerUpWin=PowerUpWin;var ReliveData=function(){function t(){this.killerName=Lang.com_str1,this.endTick=0,this.reliveTypes=[],this.itemDataRewards=[]}return Object.defineProperty(t.prototype,"leftTime",{get:function(){return Math.max(0,(this.endTick-Timer.ins().getTimer())/1e3)},enumerable:!0,configurable:!0}),t.prototype.parser=function(t){var e=t.readDouble(),i=LogicSys.ins().getEntityByHandle(e);i&&(this.killerName=i.getName()),this.endTick=1e3*t.readInt()+Timer.ins().getTimer();for(var n=t.readUnsignedByte(),a=0;n>a;a++){var o=t.readByte();this.reliveTypes[a]=o;for(var s=t.readByte(),r=0;s>r;r++)this.itemDataRewards[r]=new ItemDataReward,this.itemDataRewards[r].parser(t)}},t.ReliveType1=1,t.ReliveType2=2,t.ReliveType3=3,t}();__reflect(ReliveData.prototype,"ReliveData");var ReliveWin=function(t){function e(){var e=t.call(this)||this;return e.winType=WinType.NeverCloseWin,e.layer=LayerMgr.Popup,e}return __extends(e,t),e.prototype.initUI=function(){this.skinName="ReliveWinEUI",t.prototype.initUI.call(this)},e.prototype.open=function(e){t.prototype.open.call(this),this.addClickE(this.btnRelive,this.onClick),this.data=e,this.labelKiller.textFlow=addColorTF(Lang.com_str2.replace("$name$",StrUtil.addColor(this.data.killerName,15733780))),this.btnRelive.visible=this.data.itemDataRewards.length>0,this.data.leftTime>0&&Timer.ins()["do"](0,1e3,this.data.leftTime,this.onTimer,this,TimerType.LAST)},e.prototype.onTimer=function(t){t?this.labelTime.textFlow=addColorTF(Lang.com_str3.replace("$second$",t.toFixed(0))):closeWin(this)},e.prototype.onClick=function(t){switch(t.target){case this.btnRelive:this.data.okFunc&&this.data.okFunc()}},e}(BaseWinSingle);__reflect(ReliveWin.prototype,"ReliveWin"),window.ReliveWin=ReliveWin;var CommonCheckTipsWin=function(t){function e(){return t.call(this)||this}return __extends(e,t),e.prototype.setSkinName=function(){this.skinName="CommonCheckTipsWinSkin"},e.prototype.open=function(e,i){void 0===i&&(i=""),t.prototype.open.call(this,e),this.saveKey=i},e.prototype.onClick=function(e){if(e.target==this.checkBoxs){var i=this.checkBoxs.selected;this.saveKey&&TipsSys.ins().setSaveRemind(this.saveKey,i)}else t.prototype.onClick.call(this,e)},e.openCheck=function(t,e){return void 0===e&&(e=""),TipsSys.ins().saveReminds[e]?(t&&t.sureFun(),!1):!0},e}(CommonTipsWin);__reflect(CommonCheckTipsWin.prototype,"CommonCheckTipsWin"),window.CommonCheckTipsWin=CommonCheckTipsWin;var Cfg=function(){function t(){}return t.ins=function(){return this._instance},t.init=function(t){return __awaiter(this,void 0,void 0,function(){var e,i,n,a;return __generator(this,function(o){switch(o.label){case 0:return this.configName==t?[3,2]:(e=[],i=[],n=[],this._instance&&t==ResMgr.getConfigSourceName(!1)&&(e=this.ins().ChallengefbConfig.concat(),i=this.ins().HeianfbConfig.concat(),n=this.ins().MonstersConfig.concat()),this.configName=t,this._instance=RES.getRes(t),this._instance&&(this.ins().ChallengefbConfig=e,this.ins().HeianfbConfig=i,this.ins().MonstersConfig=n),a=this.ins(),[4,RES.getResByUrl("map/maps.json")]);case 1:a.MapInfo=o.sent(),this.ins().SkillEditorConfig=RES.getRes(this.getSkillEditorSourceName()),this.ins().TweenConfig=RES.getRes(this.getTweenSourceName()),this.regConnect(),this.initLimitConfig(),o.label=2;case 2:return[2]}})})},t.initLimitConfig=function(){var t=0;"Android"==egret.Capabilities.os?t=1:"iOS"==egret.Capabilities.os&&(t=2);for(var e=this.getConfigs(LimitTSConfig,urlParam.apptype,t),i=0,n=e;i<n.length;i++){var a=n[i];if(a.pfid==Number(urlParam.apptype)&&a.platform==t){var o=this.getConfig(LimitConfig,a.idx);isNaN(a.zslevel)||(o.zslevel=a.zslevel),isNaN(a.custom)||(o.custom=a.custom),console.log("limitConfig：",o)}}},t.getNoCheckCfg=function(t){for(var e=[],i=1;i<arguments.length;i++)e[i-1]=arguments[i];var n=t;for(var a in e){if(!n)break;n=n[e[a]]}return n},t.getCfg=function(t){for(var e=[],i=1;i<arguments.length;i++)e[i-1]=arguments[i];var n=this.getNoCheckCfg.apply(this,[t].concat(e));if(!n){var a=this.ins();for(var o in a)if(a[o]==t){for(var s=o,r=0,u=0,h=e;u<h.length;u++){var l=h[u];r++,s+="["+l+"]"}this.takeKeyArr[s]||(this.takeKeyArr[s]=1),n=t;for(var p in n){if(0==r)break;n=n[p],r--}break}}return n},t.getCfgByCond=function(t,e,i,n){void 0===e&&(e=CondType.ALL),void 0===n&&(n=0);var a=null;for(var o in t){var s=t[o];if(e==CondType.Equal){if(s[i]==n){a=s;break}}else if(e==CondType.More){if(a=s,s[i]>n)break}else if(e==CondType.MoreEqual){if(a=s,s[i]>=n)break}else if(e==CondType.Less){if(a||(a=s),!(s[i]<n))break;a=s}else if(e==CondType.LessEqual){if(a||(a=s),!(s[i]<=n))break;a=s}else if(e==CondType.ALL){a=s;break}}return a},t.getCfgsByCond=function(t,e,i,n){void 0===e&&(e=CondType.ALL),void 0===i&&(i=""),void 0===n&&(n=0);var a=[];if(e==CondType.NONE)a=t;else{a=[];for(var o in t){var s=t[o];e==CondType.Equal?s[i]==n&&a.push(s):e==CondType.More?s[i]>n&&a.push(s):e==CondType.MoreEqual?s[i]>=n&&a.push(s):e==CondType.Less?s[i]<n&&a.push(s):e==CondType.LessEqual?s[i]<=n&&a.push(s):e==CondType.ALL&&a.push(s)}}return a},t.hasConfig=function(t){for(var e=[],i=1;i<arguments.length;i++)e[i-1]=arguments[i];var n=egret.getQualifiedClassName(t);return!!this.getNoCheckCfg.apply(this,[this.ins()[n]].concat(e))},t.getConfig=function(t){for(var e=[],i=1;i<arguments.length;i++)e[i-1]=arguments[i];var n=egret.getQualifiedClassName(t),a=new CfgParam;if(a.parser(e),a.hasCond){var o=a.configKeys.concat();return o.unshift(this.ins()[n]),this.getCfgByCond(callFunc(this,this.getCfg,o),a.condType,a.key,a.value)}return 0==a.configKeys.length?this.ins()[n]:this.getCfg.apply(this,[this.ins()[n]].concat(e))},t.getConfigTest=function(t){for(var e=[],i=1;i<arguments.length;i++)e[i-1]=arguments[i];return this.getConfig.apply(this,[t].concat(e))},t.getConfigs=function(t){for(var e=[],i=1;i<arguments.length;i++)e[i-1]=arguments[i];return this.getConfigArr.apply(this,[t].concat(e))},t.getConfigs2=function(t){for(var e=[],i=1;i<arguments.length;i++)e[i-1]=arguments[i];return this.getConfigArr.apply(this,[t].concat(e))},t.getConfigArr=function(t){for(var e=[],i=1;i<arguments.length;i++)e[i-1]=arguments[i];var n=egret.getQualifiedClassName(t),a=new CfgParam;if(a.parser(e),0==a.configKeys.length)return this.getCfgsByCond(this.ins()[n],a.condType,a.key,a.value);var o=a.configKeys.concat();return o.unshift(this.ins()[n]),this.getCfgsByCond(callFunc(this,this.getCfg,o),a.condType,a.key,a.value)},t.getConfigKeys=function(t){for(var e=[],i=1;i<arguments.length;i++)e[i-1]=arguments[i];var n=this.getConfigArr.apply(this,[t,CondType.NONE,"",0].concat(e)),a=[];for(var o in n)a.push(parseInt(o));return a},t.regConnect=function(){this.reg(MapInfo,ScenesConfig,ScenesConfig.mapfilename),this.reg(FubenGroupConfig,FubenConfig,FubenConfig.group),this.reg(AiConfig,MonstersConfig,MonstersConfig.ai)},t.reg=function(t,e){for(var i=[],n=2;n<arguments.length;n++)i[n-2]=arguments[n];this.dicConnect[egret.getQualifiedClassName(t)+"_"+egret.getQualifiedClassName(e)]=i.toString()},t.getConnectConfig=function(t,e){for(var i=[],n=2;n<arguments.length;n++)i[n-2]=arguments[n];var a=this.getConfig.apply(this,[e].concat(i)),o=this.dicConnect[egret.getQualifiedClassName(t)+"_"+egret.getQualifiedClassName(e)],s=a[o],r=this.getConfig(t,s);return r},t.getNextConfig=function(t){for(var e=[],i=1;i<arguments.length;i++)e[i-1]=arguments[i];var n=egret.getQualifiedClassName(t),a=this.ins()[n],o=e.length,s=1,r=[n].concat(e).toString();if(this.nextConfigDic[r])a=this.nextConfigDic[r];else for(var u in e){if(!a)break;if(s!=o)a=a[e[u]],s++;else{var h=!1,l=!1,p=void 0;for(p in a){if(h){a=a[p],l=!0;break}p==e[u]&&(h=!0)}l||(a=a[p]),this.nextConfigDic[r]=a}}return a},t.getMaxConfig=function(t){for(var e=[],i=1;i<arguments.length;i++)e[i-1]=arguments[i];var n=egret.getQualifiedClassName(t),a=[n].concat(e).toString(),o=this.dicMaxConfig[a]||(this.dicMaxConfig[a]=this.getNextConfig.apply(this,[t].concat(e.concat(Number.MAX_VALUE))));return o},t.getConfigLength=function(t){for(var e=[],i=1;i<arguments.length;i++)e[i-1]=arguments[i];var n=egret.getQualifiedClassName(t),a=0,o=[n].concat(e).toString();if(this.dicLen[o])a=this.dicLen[o];else{var s=this.getCfg.apply(this,[this.ins()[n]].concat(e));a=ComUtil.getObjArrLen(s),this.dicLen[o]=a}return a},t.getFubenName=function(t){var e=this.getConfig(FubenConfig,t),i=this.getConfig(FubenGroupConfig,e.group),n=i.name;return n=n.replace("#",e.name)},t.getItemCfg=function(t){var e,i;if(t<CurType.max?(e=this.getCfg(this.ins().CurrencyConfig,t),i=this.ins().CurrencyConfig):(e=this.getCfg(this.ins().ItemConfig,t),i=this.ins().ItemConfig),e instanceof ItemConfig)return e;var n=new ItemConfig;return n.copy(e),i[t]=n,n},t.getMonstersConfigNew=function(t,e){return void 0===e&&(e=!0),e?this.getCfg(this.ins().MonstersConfig,t):this.getNoCheckCfg(this.ins().MonstersConfig,t)},t.setMonsterConfigNew=function(t){if(t instanceof Array)for(var e=0,i=t;e<i.length;e++){var n=i[e];this.ins().MonstersConfig[n.id]=n}else t&&(this.ins().MonstersConfig[t.id]=t)},t.getMonstersModelCfgByMonsterId=function(t){var e=this.getMonstersConfigNew(t);return this.getCfg(this.ins().MonsterModelConfig,e.avatar[0])},t.setWanmoConfig=function(t){for(var e=0,i=t;e<i.length;e++){var n=i[e];this.ins().ChallengefbConfig[n.idx]=n}},t.setHeianConfig=function(t){for(var e=0,i=t;e<i.length;e++){var n=i[e];this.ins().HeianfbConfig[n.idx]=n}},t.getAiConfigByMonsterId=function(t){var e=this.getMonstersConfigNew(t);return this.getConfig(AiConfig,e.ai)},t.getEnhanceAttrValue=function(t,e,i){if(0==e)return 0;for(var n=this.getConfig(EnhanceAttrConfig,t,e),a=0,o=n.attr;a<o.length;a++){var s=o[a];if(s.type==i)return s.value}return 0},t.getCultureAttrByLv=function(t,e){var i=this.getCfg(this.ins().CultureAttrConfig,t);return this.getCfgByCond(i,CondType.LessEqual,"stage",e)},t.getShenmoMozhenGroupConfigNames=function(){var t=this.ins().ShenmoMozhenGroupConfig,e=[];for(var i in t)e.push(t[i].groupName);return e},t.getYongbingMozhenGroupConfigNames=function(){var t=this.ins().YongbingMozhenGroupConfig,e=[];for(var i in t)e.push(t[i].groupName);return e},t.getDamonMozhenGroupConfigNames=function(){var t=this.ins().DamonMozhenGroupConfig,e=[];for(var i in t)e.push(t[i].groupName);return e},t.getDevilfbRate=function(t,e){for(var i=this.getCfg(this.ins().DevilfbConfig,t),n=0,a=0;a<i.rate.length;a++)e>=i.rate[a]&&(n=a);return n},t.getDevilfbExp=function(t,e){var i=this.getDevilfbRate(t,e)+1,n=this.getCfg(this.ins().DevilfbConfig,t);return n.coefficient[i>=n.coefficient.length-1?n.coefficient.length-1:i]},t.getDevilfbNextScore=function(t,e){for(var i=this.getCfg(this.ins().DevilfbConfig,t),n=0,a=0;a<i.rate.length;a++)e>=i.rate[a]&&(n=a);return n},t.getWorldMapConfig=function(t){return this.getCfg(this.ins().WorldMapConfig,t)},t.getMaxWorldMapId=function(){var t=ComUtil.getObjLen(this.ins().WorldMapConfig);return t},t.getGuajiConstConfig=function(){return this.ins().GuajiConstConfig},t.getVipMaxLv=function(){return this.getConfigs(VipConfig).length},t.getHongbaoMaxLv=function(){return this.getConfigs(VipHongbaoConfig).length-1},t.getSVipMaxLv=function(){return this.getConfigs(SVipConfig).length-1},t.getXianluQMDMaxLv=function(){return this.getConfigs(MateLevelConfig).length-1},t.getNextVipExp=function(t){var e=this.getConfigs(SVipConfig),i=0;for(var n in e){var a=e[n],o=0;if(t==FbGroup.EQUIP&&(o=a.shilianSw),t==FbGroup.Emo&&(o=a.devilsbuy),t==FbGroup.XueSe&&(o=a.xuesebuy),t==FbGroup.ZhuZao&&(o=a.zhuzaobuy),t==FbGroup.TianTi&&(o=a.tianti),t==FbGroup.Mine&&(o=a.mine),t==FbGroup.KuaiSuPower&&(o=a.quickfight),GConst.FbGroupMeiRi.indexOf(t)>-1&&(o=a.dailysaodang),t==FbGroup.MoLong&&(o=a.molongbuy),t==FbGroup.ShenDian&&(o=a.shenghunbuy),t==FbGroup.Brave&&(o=a.brave),a.lv>Actor.ins().sVipLv&&o>i&&0!=o)return a.lv;GConst.FbGroupMeiRi.indexOf(t)>-1&&(i=a.dailysaodang),t==FbGroup.EQUIP&&(i=a.shilianSw),t==FbGroup.Emo&&(i=a.devilsbuy),t==FbGroup.XueSe&&(i=a.xuesebuy),t==FbGroup.ZhuZao&&(i=a.zhuzaobuy),t==FbGroup.TianTi&&(i=a.tianti),t==FbGroup.Mine&&(i=a.mine),t==FbGroup.KuaiSuPower&&(i=a.quickfight),t==FbGroup.MoLong&&(i=a.molongbuy),t==FbGroup.ShenDian&&(i=a.shenghunbuy),t==FbGroup.Brave&&(i=a.brave)}return 0},t.getNextVipExpBySysId=function(t){var e,i=this.getConfigs(SVipConfig),n=0;for(var a in i){e=i[a];var o=this.getVipCount(e,t);if(e.lv>Actor.ins().sVipLv&&o>n&&0!=o)return e.lv;n=this.getVipCount(e,t)}return e.lv},t.getVipCount=function(t,e){var i=0;switch(e){case 208:i=t.fruittimes;
break;case 256:i=t.jjcbuy;break;case 249:i=t.quickfight;break;case 276:i=t.cbthcount;break;case 253:i=t.tianti;break;case 295:i=t.dailysaodang;break;case 235:i=t.crossbuycount;break;case 307:i=t.kfBossSdBoxCount}return i},t.getXuesefbRate=function(t,e){for(var i=this.getCfg(this.ins().XuesefbConfig,t),n=0,a=0;a<i.rate.length;a++)e<=i.rate[a]&&(n=a);return n},t.getXuesefbExp=function(t,e){var i=this.getXuesefbRate(t,e),n=this.getCfg(this.ins().XuesefbConfig,t);return n.coefficient[i]},t.getXuesefbRateScore=function(t,e){for(var i=this.getCfg(this.ins().XuesefbConfig,t),n=0,a=0;a<i.rate.length;a++)e<=i.rate[a]&&(n=i.rate[a]);return n},t.getXuesefbRateScore1=function(t,e){for(var i=this.getCfg(this.ins().XuesefbConfig,t),n=0,a=0;a<i.rate.length;a++)if(e>i.rate[a]){n=i.rate[a];break}return n},t.getGuildMaxMember=function(t){return this.getConfig(GuildConfig).maxMember[t-1]},t.getGuildLevelMaxConfig=function(t){var e,i=this.getConfigs(GuildLevelConfig,t,CondType.ALL);for(var n in i)e=i[n];return e},t.getGuildBuildingName=function(t){return this.getConfig(GuildConfig).buildingNames[t-1]},t.getGuildBuildingTips=function(t){return this.getConfig(GuildConfig).buildingTips[t-1]},t.getGuildBossCount=function(){var t=this.getConfigs(GuildBossConfig).length;return t},t.getGuildShopOpenBoxCount=function(t){var e=this.getConfig(GuildStoreConfig);return e.time[t-1]},t.getActivityBtnConfigsByBanshengId=function(t){var e=this.getConfigs(ActivityBtnConfig,CondType.NONE),i=[];for(var n in e){var a=e[n];a.addId.indexOf(t)>-1&&i.push(a)}return i},t.getEnhanceAddDaRenConfigById=function(t){var e=ComUtil.getObjLen(this.ins().EnhanceAddDaRenConfig);return t=t>e?e:t,this.getCfg(this.ins().EnhanceAddDaRenConfig,t)},t.getEnhanceAddDaShiConfigById=function(t){var e=ComUtil.getObjLen(this.ins().EnhanceAddDaShiConfig);return t=t>e?e:t,this.getCfg(this.ins().EnhanceAddDaShiConfig,t)},t.getJJCBuyPrice=function(t){var e=this.getConfig(JjcConstConfig),i=e.buyPrice[t];return i?i:0},t.getJJCRewardByRank=function(t){var e,i=this.ins().JjcRewardConfig;for(var n in i)if(e=i[n],i[n].rank<=t&&i[n].most>=t)break;return e},t.getGuajiFubenConfigById=function(t){return this.getCfgByCond(this.ins().GuajiFubenConfig,CondType.MoreEqual,"custom",t)},t.GuajiFubenBossPosConfigMaxId=function(){return this.guajiFubenBossPosMaxId||(this.guajiFubenBossPosMaxId=ComUtil.getObjLen(this.ins().GuajiFubenBossPosConfig))},t.getGuildCommonSkillConfig=function(t,e){var i=this.getCfg(this.ins().GuildCommonSkillConfig,t);return this.getCfgByCond(i,CondType.MoreEqual,"level",e)},t.getGuildPracticeSkillConfig=function(t,e){var i=this.getCfg(this.ins().GuildPracticeSkillConfig,t);return this.getCfgByCond(i,CondType.MoreEqual,"level",e)},t.getSuitAttrConfigByCount=function(t,e){var i=this.getConfig(SuitConfig,t);return i.attrs[e]},t.getSuitItemId=function(t,e){var i=this.getConfig(SuitConfig,t);return i.itemIds[e]},t.getSuitXLConfigById=function(t){for(var e=this.getConfigs(SuitXLConfig),i=0,n=e;i<n.length;i++){var a=n[i];if(a.ids.indexOf(t)>-1)return a}return null},t.getSuitXLName=function(t,e){return this.getSuitXLConfigById(t).name[e-1]},t.getStoneAddConfigByid=function(t){var e=ComUtil.getObjLen(this.ins().StoneAddConfig);return t=t>e?e:t,this.getCfg(this.ins().StoneAddConfig,t)},t.getTouxianStagerewardConfig=function(t){var e;for(var i in this.ins().TouxianConfig){var n=this.ins().TouxianConfig[i];if(n.stagereward.length>0&&(e=n,n.level>t))break}return e},t.getFortMaxFloor=function(){return ComUtil.getObjLen(t.getConfigs(FortConfig))},t.getFortMaxDieCount=function(){return ComUtil.getObjLen(this.ins().FortDieConfig)},t.getWinClassById=function(t){var e=this.getCfg(this.ins().WinHyperlinkConfig,t);return GConst.WinLink[""+e.id]},t.getDailyFubenMoreByLevel=function(t,e){var i;return i=this.getCfgByCond(this.ins().DailyFubenConfig[t],CondType.More,"zsLevel",e)},t.getSkillEditorConfig=function(t){var e=[];if("0"!=t){var i=this.ins().SkillEditorConfig;if(i){var n=i[t];n?e=n:console.log(t+" 仙术缺少配置")}else console.log(t+"特效配置 不存在")}return e},t.getSkillEditorSourceName=function(){return"skill_json"},t.getTweenSourceName=function(){return"tween_json"},t.getDailyOnlineConfigs=function(t){return this.getCfgsByCond(this.getCfg(this.ins().DailyOnlineConfig,t))},t.getDailyOnlineConfig=function(t,e){var i=this.getCfg(this.ins().DailyOnlineConfig,t),n=this.getCfgByCond(i,CondType.Equal,"index",e);return n},t.getDailyOnlineEffId=function(t,e){var i=this.getCfg(this.ins().DailyOnlineEXConfig,t);return i.effIds[e-1]},t.getDailyOnlineConfigSevens=function(t){return this.getCfgsByCond(this.getCfg(this.ins().DailyOnlineConfigSeven,t))},t.getDailyOnlineConfigSeven=function(t,e){var i=this.getCfg(this.ins().DailyOnlineConfigSeven,t),n=this.getCfgByCond(i,CondType.Equal,"index",e);return n},t.getShenqiHuanhuaGroupConfigNames=function(){var t=this.ins().ShenqiHuanhuaGroupConfig,e=[];for(var i in t)e.push(t[i].groupName);return e},t.getWingHuanhuaGroupConfigNames=function(){var t=this.ins().WingHuanhuaGroupConfig,e=[];for(var i in t)e.push(t[i].groupName);return e},t.getSzHuanhuaGroupConfigNames=function(){var t=this.ins().SzHuanhuaGroupConfig,e=[];for(var i in t)e.push(t[i].groupName);return e},t.getMeilinHuanhuaGroupConfigNames=function(){var t=this.ins().MeilinHuanhuaGroupConfig,e=[];for(var i in t)e.push(t[i].groupName);return e},t.getHunqiLianhuaConfigs=function(t){var e=this.getConfigs(HunqiLevelConfig,t,CondType.ALL),i=[];for(var n in e){var a=e[n];a.attrlh.length>0&&i.push(a)}return i},t.getHunqiActConfigsByQuality=function(t,e){for(var i=this.getHunqiLianhuaConfigs(t),n=[],a=0,o=i;a<o.length;a++){var s=o[a];e>=s.level&&n.push(s)}return n},t.getJunLianCountByLevel=function(t){return this.getCfgsByCond(this.ins().JunxianLevelConfig,CondType.Equal,"junxian",t).length},t.getJunxianNextRankReward=function(t){var e;for(var i in this.ins().JunxianLevelConfig){var n=this.ins().JunxianLevelConfig[i];if(n.id>t&&n.rewards.length>0){e=n;break}}return e},t.getShengbeiStoneMaxLv=function(t){var e=this.getCfg(this.ins().GrailStoneConfig,t);return ComUtil.getObjLen(e)-1},t.getShengbeiConsumeItemId=function(e){return t.getConfig(RechagePowerConstConfig).grailitems[e-1]},t.getWorshipConfig=function(t,e){var i,n,a=this.getCfg(this.ins().WorshipConfig,t);for(var o in a){if(n=a[o],i&&e>=i.level&&e<a[o].level)break;i=n}return i?i:n},t.getShenghunCommonByIdCount=function(t,e){for(var i=this.getCfgByCond(this.ins().ShenghunFubenConfig,CondType.Equal,"fbId",t),n=0,a=0;a<i.grade.length;a++)e>=i.grade[a]&&(n=a);return n},t.getPayMoneyRMBByYb=function(e){if(!t.hasConfig(PayMoneyConfig,e))return-1;var i=t.getConfig(PayMoneyConfig,e),n=urlParam.apptype;return n&&i["rmb"+n]?i["rmb"+n]:i.rmb},t.getPayMoneyVipExpByYb=function(e){if(!t.hasConfig(PayMoneyConfig,e))return-1;var i=t.getConfig(PayMoneyConfig,e),n=urlParam.apptype;return n&&i["vipExp"+n]?i["vipExp"+n]:i.vipExp},t.getPayMoneyPercent=function(e){if(!t.hasConfig(PayMoneyConfig,e))return 1;var i=t.getConfig(PayMoneyConfig,e),n=urlParam.apptype;if(n&&i["rmb"+n]){var a=i["rmb"+n];return a/i.rmb}return 1},t.getPurifyDaRenConfigById=function(t){var e=ComUtil.getObjLen(this.ins().PurifyDaRenConfig);return t=t>e?e:t,this.getCfg(this.ins().PurifyDaRenConfig,t)},t.getPurifyDaShiConfigById=function(t){var e=ComUtil.getObjLen(this.ins().PurifyDaShiConfig);return t=t>e?e:t,this.getCfg(this.ins().PurifyDaShiConfig,t)},t.getActivityType12ConfigIdByGroup=function(t){var e=[],i=this.getConfigs2(ActivityType12Config);for(var n in i){var a=i[n];for(var o in a){var s=a[o];s.group==t&&e.push(s.id)}}return e},t.configName="",t.takeKeyArr={},t.dicConnect={},t.nextConfigDic={},t.dicMaxConfig={},t.dicLen={},t.guajiFubenBossPosMaxId=0,__decorate([callDelay()],t,"initLimitConfig",null),t}();__reflect(Cfg.prototype,"Cfg");var CondType=function(){function t(){}return t.is=function(t){return this.types.indexOf(t)>-1},t.Equal="Equal",t.More="More",t.Less="Less",t.MoreEqual="MoreEqual",t.LessEqual="LessEqual",t.ALL="ALL",t.NONE="NONE",t.types=[t.Equal,t.More,t.Less,t.MoreEqual,t.LessEqual,t.ALL,t.NONE],t}();__reflect(CondType.prototype,"CondType");var CondTypeKey;!function(t){t[t.NONE=0]="NONE",t[t.FILTER=1]="FILTER"}(CondTypeKey||(CondTypeKey={}));var CommonTipsWin1=function(t){function e(){return t.call(this)||this}return __extends(e,t),e.prototype.initUI=function(){this.setSkinName(),t.prototype.initUI.call(this),this.layer=LayerMgr.Popup,this.addBg()},e.prototype.setSkinName=function(){this.skinName="CommonTipsWinEUI1"},e.prototype.open=function(e){t.prototype.open.call(this),this.popupBaseData=e,this.addClickE(this,this.onClick),this.lbContent.textFlow=addColorTF(e.desc),this.btnOk.label=e.sureStr},e.prototype.onClick=function(t){switch(t.target){case this.btnOk:closeWin(this),this.popupBaseData.sureFun();break;case this.closeBtn0:closeWin(this);break;case this.colorCanvas:this.clickClose&&closeWin(this)}},e}(BaseWinSingle);__reflect(CommonTipsWin1.prototype,"CommonTipsWin1"),window.CommonTipsWin1=CommonTipsWin1;var CommonTipsWin2=function(t){function e(){return t.call(this)||this}return __extends(e,t),e.prototype.initUI=function(){this.setSkinName(),t.prototype.initUI.call(this),this.layer=LayerMgr.Popup,this.addBg()},e.prototype.setSkinName=function(){this.skinName="CommonTipsWinEUI2"},e.prototype.open=function(e){t.prototype.open.call(this),this.popupBaseData=e,this.addClickE(this,this.onClick),this.lbContent.textFlow=addColorTF(e.desc),this.btnOk.label=e.sureStr},e.prototype.onClick=function(t){switch(t.target){case this.btnOk:this.popupBaseData.sureFun(),closeWin(this);break;case this.closeBtn0:closeWin(this);break;case this.colorCanvas:this.clickClose&&closeWin(this)}},e}(BaseWinSingle);__reflect(CommonTipsWin2.prototype,"CommonTipsWin2"),window.CommonTipsWin2=CommonTipsWin2;var CommonTipsWinNew=function(t){function e(){var e=t.call(this)||this;return e.popupData=null,e}return __extends(e,t),e.prototype.initUI=function(){this.setSkinName(),t.prototype.initUI.call(this),this.layer=LayerMgr.Popup,this.addBg()},e.prototype.setSkinName=function(){this.skinName="CommonTipsWinNewEUI",this.setSkinPart("boostPrice",new PriceIcon)},e.prototype.open=function(e){t.prototype.open.call(this),this.popupData=e,this.addClickE(this.btnOk,this.onTap),this.lbContent.textFlow=addColorTF(this.popupData.desc),this.boostPrice.setPrice(this.popupData.priceValue),this.boostPrice.setType(this.popupData.priceType),this.validateNow(),this.boostPrice.validateNow(),this.group1.validateNow()},e.prototype.onTap=function(t){switch(t.currentTarget){case this.btnOk:this.popupData.sureFun(),closeWin(e)}},e.prototype.getOkBtn=function(){return this.btnOk},e}(BaseWinSingle);__reflect(CommonTipsWinNew.prototype,"CommonTipsWinNew"),window.CommonTipsWinNew=CommonTipsWinNew;var ErrorTipsWin=function(t){function e(){var e=t.call(this)||this;return e.count=0,e}return __extends(e,t),e.prototype.initUI=function(){this.setSkinName(),t.prototype.initUI.call(this),this.layer=LayerMgr.Popup,this.addBg()},e.prototype.setSkinName=function(){this.skinName="CommonTipsWinEUI1"},e.prototype.open=function(e,i){t.prototype.open.call(this),this.popupBaseData=e,this.type=i,this.lbContent.text=e.desc,this.btnOk.label=e.sureStr,this.count=1==i?5:0},e.prototype.updateTime=function(e){void 0===e&&(e=0),t.prototype.updateTime.call(this,e),this.count--,this.type&&this.count>0?this.btnOk.label=this.popupBaseData.sureStr+("("+this.count+")"):this.btnOk.label=this.popupBaseData.sureStr},e.prototype.$onClick=function(t){switch(t.target){case this.btnOk:if(this.count>0)return void showTipsWarn(this.count+"秒后可以操作");closeWin(this),this.popupBaseData.sureFun();break;case this.closeBtn0:case this.backGround:1!=this.type?(closeWin(this),this.popupBaseData.sureFun()):showtipsFail("请点击确定退出游戏")}},e}(BaseWinSingle);__reflect(ErrorTipsWin.prototype,"ErrorTipsWin"),window.ErrorTipsWin=ErrorTipsWin;var HelpListTipsWin=function(t){function e(){return t.call(this)||this}return __extends(e,t),e.prototype.initUI=function(){this.setSkinName(),t.prototype.initUI.call(this),this.layer=LayerMgr.Popup,this.addBg(),this.list.itemRenderer=HelpListTipsWinItem},e.prototype.setSkinName=function(){this.skinName="HelpListTipsWinEUI"},e.prototype.open=function(e){void 0===e&&(e=[]),t.prototype.open.call(this),this.list.dataProvider=new eui.ArrayCollection(e)},e}(BaseWinSingle);__reflect(HelpListTipsWin.prototype,"HelpListTipsWin"),window.HelpListTipsWin=HelpListTipsWin;var HelpListTipsWinItem=function(t){function e(){var e=t.call(this)||this;return e.skinName="HelpListTipsWinItemEUI",e}return __extends(e,t),e.prototype.dataChanged=function(){var t=this.data,e=Cfg.getConfig(HelpInfoConfig,t);this.labelName.textFlow=StrUtil.toTF(e.title),this.labelDesc.textFlow=StrUtil.toTF(e.text)},e}(BaseItemRender);__reflect(HelpListTipsWinItem.prototype,"HelpListTipsWinItem"),window.HelpListTipsWinItem=HelpListTipsWinItem;var shopSys=System.shopSys,TipsSys=function(t){function e(){var e=t.call(this)||this;return e.listTipsStr=[],e.saveReminds=[],e.listTipsViewStr=[],e.listTipsViewColor=[],e}return __extends(e,t),e.ins=function(){return t.getIns.call(this,e)},e.prototype.patchTipsUpdate=function(){},e.prototype.setSaveRemind=function(t,e){this.saveReminds[t]=e,this.patchSaveRemind()},e.prototype.patchSaveRemind=function(){},e.prototype.showtipsNew=function(t,e,i){void 0===e&&(e=16777215),void 0===i&&(i=0),1==i?(this.listTipsStr.length>=3&&this.listTipsStr.splice(2,1),this.listTipsStr.unshift(t),this.patchTipsUpdate()):0==i&&(this.listTipsViewStr.unshift(t),this.listTipsViewColor.unshift(e),this.listTipsViewStr.length>15&&(this.listTipsViewStr.length=15,this.listTipsViewColor.length=15),Timer.ins()["do"](1,1,1,this.showTipsCallback,this))},e.prototype.showTipsCallback=function(){for(var t=0,e=this.listTipsViewStr.length-1;e>=0&&(openWin(TipsWin).showTips("|C:0x"+this.listTipsViewColor[e].toString(16)+"&T:"+this.listTipsViewStr[e]+"|"),t++,!(t>=15));e--);this.listTipsViewStr.length=this.listTipsViewColor.length=0},e.prototype.showtipsFail=function(t){this.showtipsNew(t,16711680)},e.prototype.showtipsSuc=function(t){this.showtipsNew(t,5767068)},e.prototype.showTipsWarn=function(t){this.showtipsNew(t,16756781)},e.prototype.setBuyGoodsWarn=function(t,e){void 0===e&&(e=1);var i=ShopSys.ins().getShopData(t);if(i){var n=i.getBuyData();n.count=e,openWin(ShopGoodsWarn,n)}else Cfg.getConfigs(GainItemWayConfig,CondType.Equal,GainItemWayConfig.itemId,t).length>0?openWin(ShopGoodsWarn,t):showTipsWarn(Lang.common_str20)},e.prototype.showAttrAddTips=function(t){isShowWin(TipsWin)?getWin(TipsWin).showAttrAddTips(t):openWin(TipsWin).showAttrAddTips(t)},e}(BaseSys);__reflect(TipsSys.prototype,"TipsSys");var System;!function(t){t.tipsSys=TipsSys.ins.bind(TipsSys)}(System||(System={})),window.TipsSys=TipsSys;var TipsWin=function(t){function e(){var e=t.call(this)||this;return e.layer=LayerMgr.Tips,e.winType=WinType.NeverCloseWin,e.isLog=!1,e.list=[],e.tipsWinItemNewEquipWin=new TipsWinItemNewEquipWin,e.tipsDatas=[],e.preTick=0,e.attrAddList=[],e}return __extends(e,t),e.prototype.initUI=function(){t.prototype.initUI.call(this),this.isLog=!1,this.touchEnabled=!1},e.prototype.showTips=function(t){var e=ObjPool.pop(TipsWinItem);e.labelText=t,this.addChild(e),this.list.unshift(e),e.once(egret.Event.REMOVED_FROM_STAGE,this.removeTip,this);for(var i=this.list.length-1;i>=0;i--){egret.Tween.removeTweens(this.list[i]);var n=egret.Tween.get(this.list[i]);n.to({verticalCenter:-30*i},500)}},e.prototype.removeTip=function(t){var e=t.currentTarget,i=this.list.indexOf(e);this.list.splice(i,1),ObjPool.push(e)},e.prototype.showGoodEquipTip=function(t){var e=ObjPool.pop(TipsWinItemGoodEquip),i=egret.Tween.get(e),n=Timer.ins().getTimer()-this.preTick,a=2500;n=n>a?0:this.preTick+a-Timer.ins().getTimer(),this.preTick=Timer.ins().getTimer()+n,e.setData(t),e.horizontalCenter=0,this.addChild(e),e.y=LayerMgr.getStage().stageHeight,i.wait(n).to({y:e.y-200,alpha:1},.3*a).wait(.4*a).to({alpha:0},.3*a).call(function(){DisUtil.remove(e),ObjPool.push(e)})},e.prototype.removeNewEquipTips=function(t){this.tipsWinItemNewEquipWin.isShowing&&0==t.count&&t.handle==this.tipsWinItemNewEquipWin.getData().handle&&this.tipsWinItemNewEquipWin.close();for(var e=this.tipsDatas.length,i=e-1;i>0;i--){var n=this.tipsDatas[i];if(0==n.count){this.tipsDatas.splice(i,1);break}}},e.prototype.addNewEquipTips=function(t){var e=this.tipsWinItemNewEquipWin.getData();if(e&&this.tipsWinItemNewEquipWin.isShowing&&e.equipPos==t.equipPos){if(t.power<=e.power)return;this.tipsWinItemNewEquipWin.close()}for(var i=this.tipsDatas.length,n=0;i>n;n++){var a=this.tipsDatas[n];if(a.equipPos==t.equipPos&&t.power<=a.power)return}i=this.tipsDatas.length;for(var n=i-1;n>0;n--){var a=this.tipsDatas[n];a.equipPos==t.equipPos&&t.power>=a.power&&this.tipsDatas.splice(n,1)}this.tipsDatas.push(t),!this.tipsWinItemNewEquipWin.isShowing&&this.tipsDatas.length>0&&this.openUseTipsWin()},e.prototype.openUseTipsWin=function(){var t=this;if(this.tipsDatas.length>0){var e=this.tipsDatas[0];if(this.tipsWinItemNewEquipWin=new TipsWinItemNewEquipWin,this.tipsWinItemNewEquipWin.open(e,this.openUseTipsWin,this),this.tipsDatas.splice(0,1),this.addChild(this.tipsWinItemNewEquipWin),this.tipsWinItemNewEquipWin.alpha=0,this.tipsWinItemNewEquipWin.bottom=300,this.tipsWinItemNewEquipWin.alpha=1,this.tipsWinItemNewEquipWin.x=LayerMgr.getStage().stageWidth,egret.Tween.removeTweens(this.tipsWinItemNewEquipWin),GConst.GuiderId2EquiId.indexOf(e.id)>-1)this.tipsWinItemNewEquipWin.alpha=1,this.tipsWinItemNewEquipWin.x=LayerMgr.getStage().stageWidth-this.tipsWinItemNewEquipWin.width;else{var i=egret.Tween.get(this.tipsWinItemNewEquipWin);i.to({x:LayerMgr.getStage().stageWidth-this.tipsWinItemNewEquipWin.width,alpha:1},600)}Timer.ins()["do"](0,1e3,3,this.tipsWinItemNewEquipWin.updateTimer,this.tipsWinItemNewEquipWin,TimerType.LAST),Timer.ins()["do"](3e3,0,1,function(){t.tipsWinItemNewEquipWin.use()},this.tipsWinItemNewEquipWin,TimerType.LAST)}},e.prototype.getTipsWinItemNewEquipBnt=function(){return this.tipsWinItemNewEquipWin.getBtnUse()},e.prototype.showAttrAddTips=function(t){for(var e=0,i=t;e<i.length;e++){var n=i[e],a=ObjPool.pop(MainUITipsPowerItem2);a.alpha=0,a.left=0,a.bottom=150,a.setData(n),this.addChild(a),this.attrAddList.unshift(a),a.once(egret.Event.REMOVED_FROM_STAGE,this.removeAttrAddTips,this)}for(var o=this.attrAddList.length-1;o>=0;o--){var s=this.attrAddList[o];egret.Tween.removeTweens(s);var r=150+40*o,u=egret.Tween.get(s);u.to({alpha:1},50).to({bottom:r},300),r>600&&s.tweenToDisappear()}},e.prototype.removeAttrAddTips=function(t){var e=t.currentTarget;e.left=0,e.bottom=150;var i=this.attrAddList.indexOf(e);this.attrAddList.splice(i,1),egret.Tween.removeTweens(e),ObjPool.push(e)},e}(BaseWinSingle);__reflect(TipsWin.prototype,"TipsWin"),window.TipsWin=TipsWin;var TipsWinItem=function(t){function e(){var e=t.call(this)||this;return e.skinName="TipsWinItemEUI",e.verticalCenter=0,e.horizontalCenter=0,e}return __extends(e,t),Object.defineProperty(e.prototype,"labelText",{get:function(){return this._labelText},set:function(t){var e=this;this._labelText=t,this.lab.textFlow=StrUtil.toTF(this._labelText),this.bg.width=this.lab.width+80,this.bg.alpha=1,this.lab.alpha=1,this.bg.y=0,this.lab.verticalCenter=-1;var i=egret.Tween.get(this.bg);i.to({y:-30},500).wait(500).to({alpha:0},200).call(function(){DisUtil.remove(e)},this);var n=egret.Tween.get(this.lab);n.to({verticalCenter:-30},500).wait(500).to({alpha:0},200)},enumerable:!0,configurable:!0}),e.prototype.reset=function(){this.verticalCenter=0,this.horizontalCenter=0,egret.Tween.removeTweens(this)},e}(BaseEUI);__reflect(TipsWinItem.prototype,"TipsWinItem",["IObjectPool"]),window.TipsItem=TipsWinItem;var TipsWinItemGoodEquip=function(t){function e(){var e=t.call(this)||this;return e.touchEnabled=!1,e.touchChildren=!1,e.skinName="TipsWinItemGoodEquipEUI",e.setSkinPart("itemBase",new ItemBagBase),e}return __extends(e,t),e.prototype.setData=function(t){this.itemBase.data=t;var e=""+GFunc.getItemName(t);this.labelName.textFlow=addColorTF(e)},e.prototype.getData=function(){return this.itemBase.data},e.prototype.reset=function(){this.labelName.text="",this.itemBase.data=null,this.horizontalCenter=0,this.alpha=0,egret.Tween.removeTweens(this)},e}(BaseEUI);__reflect(TipsWinItemGoodEquip.prototype,"TipsWinItemGoodEquip",["IObjectPool"]),window.TipsWinItemGoodEquip=TipsWinItemGoodEquip;var TipsWinItemNewEquipWin=function(t){function e(){var e=t.call(this)||this;return e.isShowing=!1,e.closeCaller=new Caller,e.skinName="TipsWinItemNewEquipEUI",e.setSkinPart("itemBase",new ItemBagBase),e.btnUse.addChild(MC.createCenterGruop(ResMgr.getEffName("public_zycs_button02"),-1)),e}return __extends(e,t),e.prototype.open=function(t,e,i){this.closeCaller.func=e,this.closeCaller.obj=i,this.isShowing=!0,this.itemBase.data=t,this.labelName.textFlow=addColorTF(GFunc.getItemName(t)),ItemType.isEquip(t.cfg.type)?(this.lbDesc.text=Lang.common_str22,this.bmpNumber.visible=!0,this.bmpNumber.text=BagSys.ins().getPowerOfItem(t).toFixed(0),this.imgTitle.source="mianui_zycs_ghzb",this.btnUse.label=Lang.common_str111,this.itemBase.setImgUp(!0)):t.cfg.type==ItemType.exp?(this.lbDesc.text=t.cfg.getDesc(),this.bmpNumber.visible=!1,this.imgTitle.source="mianui_zycs_jyys",this.btnUse.label=Lang.common_str110):t.cfg.type==ItemType.Shengwu?(this.lbDesc.text=Lang.itemtips_str25,this.bmpNumber.visible=!1,this.imgTitle.source="mainui_zycs_hddj",this.btnUse.label=Lang.common_str120):(this.lbDesc.text=Lang.itemtips_str25,this.bmpNumber.visible=!1,this.imgTitle.source="mianui_zycs_hdbx",this.btnUse.label=Lang.common_str118),this.addClickE(this.btnUse,this.onClick)},e.prototype.updateTimer=function(t){var e=this.itemBase.data;e.cfg.type==ItemType.exp?this.btnUse.label=Lang.common_str110:ItemType.isEquip(e.cfg.type)?this.btnUse.label=Lang.common_str109.replace("$second$",t.toString()):e.cfg.type==ItemType.Shengwu?this.btnUse.label=Lang.common_str120.replace("$second$",t.toString()):this.btnUse.label=Lang.common_str118.replace("$second$",t.toString())},e.prototype.use=function(){var t=this.itemBase.data;ItemType.isEquip(t.cfg.type)?EquipSys.ins().sendWearEquipment(t.id):t.cfg.type==ItemType.Shengwu?openWin(BagWin,BagWin.getTabIndexbyPanel(ShengWuPanelNew)):t.cfg.type==ItemType.exp?BagSys.ins().sendUseItem(t.id,1):BagSys.ins().sendUseItem(t.id,t.count),this.close()},e.prototype.onClick=function(t){t.target==this.btnUse&&this.use()},e.prototype.close=function(){t.prototype.close.call(this),this.isShowing=!1,DisUtil.remove(this),egret.Tween.removeTweens(this),Timer.ins().removeAll(this),this.closeCaller.call()},e.prototype.getData=function(){return this.itemBase.data},e.prototype.getBtnUse=function(){return this.btnUse},e}(BaseEUI);__reflect(TipsWinItemNewEquipWin.prototype,"TipsWinItemNewEquipWin"),window.TipsWinItemNewEquipWin=TipsWinItemNewEquipWin;var ConfigSys=function(t){function e(){var e=t.call(this)||this;return e.sysId=PackId.Config,e.reg(1,e.patchMonsterConfig),e.reg(2,e.doWanmoConfig),e.reg(3,e.doHeianConfig),e.reg(4,e.doRefreshConfig),e.reg(5,e.patchSimpleMonsterConfig),e}return __extends(e,t),e.ins=function(){return t.getIns.call(this,e)},e.prototype.patchMonsterConfig=function(t){for(var e=t.readShort(),i=[],n=0;e>n;n++){var a=new MonstersConfig;a.parser(t),i.push(a)}Cfg.setMonsterConfigNew(i)},e.prototype.sendMonsterConfig=function(t){var e,i=this.getBytes(1),n=0;"number"==typeof t?(n=1,e=[t]):t instanceof Array&&(n=t.length,e=t),i.writeShort(n);for(var a=0;n>a;a++)i.writeInt(e[a]);this.send(i)},e.prototype.doWanmoConfig=function(t){for(var e=t.readShort(),i=[],n=0;e>n;n++){var a=new ChallengefbConfig;a.parser(t),i.push(a)}Cfg.setWanmoConfig(i)},e.prototype.doHeianConfig=function(t){for(var e=t.readShort(),i=[],n=0;e>n;n++){var a=new ChallengefbConfig;a.parser(t),i.push(a)}Cfg.setHeianConfig(i)},e.prototype.doRefreshConfig=function(t){FbSys.ins().refreshConfig.parser(t)},e.prototype.sendSimpleMonsterConfig=function(t){var e=this.getBytes(5);e.writeShort(t.length);for(var i=0,n=t;i<n.length;i++){var a=n[i];e.writeInt(a)}this.send(e)},e.prototype.patchSimpleMonsterConfig=function(t){for(var e=t.readShort(),i=0;e>i;i++){var n=t.readInt(),a=Cfg.getMonstersConfigNew(n,!1);a||(a=new MonstersConfig,a.id=n,Cfg.setMonsterConfigNew(a)),a.parser2(t)}},e}(BaseSys);__reflect(ConfigSys.prototype,"ConfigSys");var System;!function(t){t.configSys=ConfigSys.ins.bind(ConfigSys)}(System||(System={})),window.ConfigSys=ConfigSys;var DartSys=function(t){function e(){var e=t.call(this)||this;return e.rewardStates=[],e.carDatas=[],e.buyLingCount=0,e.refreshCount=0,e.guildLogs=[],e.logs=[],e.challengeCD=0,e.guildCarData=[],e.hasJoinCars=[],e.personalRanks=[],e.oneselfRankData=[],e.guildRanks=[],e.guildRankData=[],e.openState=0,e.sysId=PackId.Dart,e.reg(1,e.patchInfo),e.reg(2,e.patchChallengeCar),e.reg(3,e.patchScoreReward),e.reg(4,e.patchGulidLogs),e.reg(5,e.patchLogs),e.reg(6,e.patchBuyLing),e.reg(7,e.doRefreshCar),e.reg(8,e.patchGuildInfo),e.reg(9,e.patchPersonalRank),e.reg(10,e.patchGuildRank),e.reg(13,e.patchChoiceCar),e.addLsn(GuildSys.ins().patchGuildInfo,e.updateGuildCar),e.addLsn(JobSys.ins().patchSysOpen,e.updateSys),e}return __extends(e,t),e.ins=function(){return t.getIns.call(this,e)},e.prototype.updateSys=function(t){318==t&&this.updateGuildCar()},e.prototype.updateGuildCar=function(){GFunc.isSysUpdate(318)&&GuildSys.ins().isAddGuild()&&this.sendInfo()},e.prototype.sendInfo=function(){this.sendBase(1)},e.prototype.patchInfo=function(t){var e=this,i=Cfg.getConfigLength(DartJifenConfig),n=[];n.length=i,MathUtil.writeIntToArray(t.readInt(),n,1),e.setRewardState(n);var a=t.readByte();e.carDatas.length=a;for(var o=0;a>o;o++){var s=e.carDatas[o];s||(s=new DartCarData,e.carDatas[o]=s),s.index=o+1,s.update(t)}e.buyLingCount=t.readByte(),e.refreshCount=t.readByte();var r=t.readShort();r=1e3*r+Actor.ins().serverTime,e.challengeCD=r,e.setOpenState(t.readByte()),RpFun.showDartJifenRedPoint(),RpFun.showDartJoinPoint(),RpFun.showDartLueduoRp(),0==e.guildCarData.length&&this.sendGuildInfo()},e.prototype.sendChallengeCar=function(t){WinMgr.ins().closeAllWin();var e=this.getBytes(2);e.writeInt(t),this.send(e)},e.prototype.patchChallengeCar=function(t){var e=t.readShort();e=1e3*e+Actor.ins().serverTime,this.challengeCD=e;var i=new FbResultYunBiaoData;i.parser(t),0==i.result?(i.rewardItem=Cfg.getConfig(DartCarConfig,i.carLv).failreward,i.desc="被"+addColor("[仙盟:"+i.guildName+"]",5767068)+"的"+addColor(i.playerName,5767068)+"击败了",openWin(ResultYunBiaoLostWin,i)):openWin(ResultCrossDartWin,i)},e.prototype.sendScoreReward=function(t){var e=this.getBytes(3);e.writeByte(t),this.send(e)},e.prototype.patchScoreReward=function(t){var e=Cfg.getConfigLength(DartJifenConfig),i=[];i.length=e,MathUtil.writeIntToArray(t.readInt(),i,1),this.setRewardState(i),RpFun.showDartJifenRedPoint()},e.prototype.sendGuildLogs=function(){this.sendBase(4)},e.prototype.patchGulidLogs=function(t){var e=t.readByte();this.guildLogs.length=e;for(var i=0;e>i;i++){var n=this.guildLogs[i];n||(n=new DartGuildLogData,this.guildLogs[i]=n),n.update(t)}},e.prototype.sendLogs=function(){this.sendBase(5)},e.prototype.patchLogs=function(t){var e=t.readByte();this.logs.length=e;for(var i=0;e>i;i++){var n=this.logs[i];n||(n=new DartLogData,this.logs[i]=n),n.update(t)}},e.prototype.sendBuyLing=function(){this.sendBase(6)},e.prototype.patchBuyLing=function(t){this.buyLingCount=t.readByte()},e.prototype.sendRefreshCar=function(t){var e=this.getBytes(7);e.writeByte(t),this.send(e)},e.prototype.doRefreshCar=function(t){var e=t.readByte();this.refreshCount=t.readByte();var i=this,n=t.readByte();i.carDatas.length=n;for(var a=0;n>a;a++){var o=i.carDatas[a];o||(o=new DartCarData,i.carDatas[a]=o),o.index=a+1,o.update(t)}i.setOpenState(t.readByte()),1==e?this.patchRefreshCar():this.patchUpdateCar(),RpFun.showDartLueduoRp()},e.prototype.patchUpdateCar=function(){},e.prototype.patchRefreshCar=function(){},e.prototype.sendGuildInfo=function(){this.sendBase(8)},e.prototype.patchGuildInfo=function(t){var e=this,i=t.readByte();e.guildCarData.length=i;var n=0;e.hasJoinCars.length=0;for(var a=0;i>a;a++){var o=e.guildCarData[a];o||(o=new DartGuildCarData,e.guildCarData[a]=o),o.update(t),o.id=a+1,o.lv=this.getCarLv(o.dartDivisions.length),o.isJoin&&(e.hasJoinCars.push(a+1),n++)}for(var a=0;i>a;a++){var o=e.guildCarData[a];o.state=e.getCarState(o.id,o.isJoin,n)}RpFun.showDartJoinPoint()},e.prototype.getCarState=function(t,i,n){var a=Cfg.getConfig(DartConstConfig),o=new Date(Actor.ins().serverTime),s=o.getHours(),r=a.startTimes[t-1][0],u=a.startTimes[t-1][1],h=r+a.lastTime;return h>s||s==h&&u>o.getMinutes()?r>s||s==r&&u>o.getMinutes()?!i&&n>=e.MAXJOIN?5:0:i?2:1:i?4:3},e.prototype.getCarLv=function(t){var e=Cfg.getConfig(DartConstConfig),i=e.dartCarNumber[GuildSys.ins().guildLv-1],n=Math.floor(5*t/i)+1;return Math.min(n,Cfg.getConfigLength(DartCarConfig))},e.prototype.sendPersonalRank=function(){this.sendBase(9)},e.prototype.patchPersonalRank=function(t){var e=t.readShort();this.personalRanks.length=e;for(var i=0;e>i;i++){var n=this.personalRanks[i];n||(n=new DartRankData,this.personalRanks[i]=n),n.pos=i+1,n.guildName=t.readString(),n.update(t)}this.oneselfRankData=[t.readInt(),t.readShort()],e?(this.firstData||(this.firstData=new PraiseData),this.firstData.job=t.readByte(),this.firstData.szId=t.readInt(),this.firstData.sqId=t.readInt(),this.firstData.wingId=t.readInt(),this.firstData.txId=t.readInt(),this.firstData.titleId=t.readInt(),this.firstData.mzId=t.readInt(),this.firstData.damonId=t.readInt(),this.firstData.meilinId=t.readInt()):this.firstData=null},e.prototype.sendGuildRank=function(){this.sendBase(10)},e.prototype.patchGuildRank=function(t){var e=t.readShort();this.guildRanks.length=e;for(var i=0;e>i;i++){var n=this.guildRanks[i];n||(n=new DartRankData,this.guildRanks[i]=n),n.pos=i+1,n.update(t)}this.guildRankData=[t.readInt(),t.readShort()]},e.prototype.patchChoiceCar=function(t){var e=t.readByte(),i=t.readByte();e>0&&this.hasJoinCars.indexOf(e)<0?showtipsSuc("参与护送成功"):i>0&&this.hasJoinCars.indexOf(i)<0&&showtipsSuc("参与护送成功"),this.sendGuildInfo()},e.prototype.sendChoiceCar=function(t){var e=this.getBytes(13);e.writeByte(t),this.send(e)},e.prototype.refreshCars=function(){var t=this;if(2!=this.openState)showtipsFail("活动暂未开放");else if(this.refreshCount>0)this.sendRefreshCar(1);else{var e=Cfg.getConfig(DartConstConfig),i="是否花费"+addColor(e.buyRefreshListMoney+"仙玉",5767068)+"重新随机获取新的一批宝藏",n=new PopupData(i);n.setFunction(this,function(){GFunc.checkCurrency(CurType.yb,e.buyRefreshListMoney)&&t.sendRefreshCar(1)}),openWin(CommonTipsWin,n)}},e.prototype.buyLing=function(){var t=this,e=Cfg.getConfig(DartConstConfig),i="确认花费"+addColor(""+e.buyChallengeMoney,5767068)+"仙玉购买1枚掠夺令吗？\n今天已购买："+this.buyLingCount+"/"+e.buyChallengeCount,n=new PopupData(i);n.setFunction(this,function(){t.buyLingCount<e.buyChallengeCount?GFunc.checkCurrency(CurType.yb,e.buyChallengeMoney)&&t.sendBuyLing():showtipsFail("今日已达购买次数上限")}),openWin(CommonTipsWin1,n)},e.prototype.setRewardState=function(t){for(var e=Actor.ins().getCurrency(CurType.DartScore),i=Cfg.getConfigs(DartJifenConfig),n=0,a=i;n<a.length;n++){var o=a[n],s=o.idx,r=t[s-1]||0,u=0;r?u=2:e>=o.jifen&&(u=1),this.rewardStates[s]=u}},e.prototype.getRewardStateById=function(t){var e=this.rewardStates[t],i=Actor.ins().getCurrency(CurType.DartScore);if(0==e){var n=Cfg.getConfig(DartJifenConfig,t);n.idx==t&&i>=n.jifen&&(this.rewardStates[t]=1)}return this.rewardStates[t]},e.prototype.setOpenState=function(t){for(var e=0,i=Actor.ins().serverTime,n=new Date(i),a=Cfg.getConfig(DartConstConfig),o=a.startTimes,s=n.getHours(),r=n.getMinutes(),u=0,h=0;h<o.length;h++){var l=a.startTimes[h][0],p=a.startTimes[h][1],c=l+a.lastTime;if(c>s||s==c&&p>r){if(l>s||s==l&&p>r){u=60*(l-s)*60+60*(p-r)-n.getSeconds(),e=1;break}var d=c-s,g=p-r;0>g&&(d--,g=60-r),u=60*d*60+60*g-n.getSeconds(),e=2;break}}if(this.openState=e,0!=t&&(this.openState=2),0==e){var l=a.startTimes[0][0],p=a.startTimes[0][1],f=60*(23-s)*60+60*(60-r)-n.getSeconds();
u=60*l*60+60*p+f}u>0?Timer.ins()["do"](1e3*u,10,1,this.refreshCar,this,TimerType.LAST):Timer.ins().remove(this.refreshCar,this)},e.prototype.refreshCar=function(){this.sendInfo()},Object.defineProperty(e.prototype,"openTime",{get:function(){for(var t=Actor.ins().serverTime,e=new Date(t),i=Cfg.getConfig(DartConstConfig),n=i.startTimes,a=0;a<n.length;a++){var o=i.startTimes[a][0],s=i.startTimes[a][1],r=o+i.lastTime;if(e.getHours()<r||e.getHours()==r&&s>e.getMinutes())return e.getHours()<o||e.getHours()==o&&s>e.getMinutes()?(e.setHours(o,s,0,0),[o,s,e.getTime()]):(e.setHours(r,s,0,0),[r,s,e.getTime()-1e3])}return[0,0]},enumerable:!0,configurable:!0}),e.prototype.openPlunderInfoWin=function(t){null!=t&&(e.ins().cd>0?showtipsFail("掠夺冷却中，无法进行掠夺"):GFunc.isCurrency(CurType.DartLueduoLing,1)?t.canLueDuo()?openWin(DartCarInfoWin,t):showtipsFail("该宝藏已被掠夺4次，请放过他吧~"):showtipsFail("掠夺令不足，无法挑战"))},e.prototype.hasJoinCarNum=function(){var t=0;for(var e in this.hasJoinCars)this.hasJoinCars[e]>0&&t++;return t},e.prototype.getCarJoinRoleNumByLv=function(t){for(var e=Cfg.getConfig(DartConstConfig),i=e.dartCarNumber[GuildSys.ins().guildLv-1],n=0;;){n++;var a=Math.floor(5*n/i+1);if(a==t)break}return Math.max(Math.ceil((t-1)*i/5),1)},e.prototype.hasJoinCarById=function(t){return-1!=this.hasJoinCars.indexOf(t)},e.prototype.canLueduo=function(){return 2==this.openState&&0==this.cd},Object.defineProperty(e.prototype,"cd",{get:function(){return Math.max(this.challengeCD-Actor.ins().serverTime,0)},enumerable:!0,configurable:!0}),e.MAXJOIN=2,e}(BaseSys);__reflect(DartSys.prototype,"DartSys");var System;!function(t){t.dartSys=DartSys.ins.bind(DartSys)}(System||(System={})),window.DartSys=DartSys;var DartBaoxiangWin=function(t){function e(){var e=t.call(this)||this;return e.layer=LayerMgr.Popup,e}return __extends(e,t),e.prototype.setSkinName=function(){this.skinName="DartBaoxiangWinEUI"},e.prototype.initUI=function(){t.prototype.initUI.call(this),this.listAward.itemRenderer=ItemBaseReward,this.listAward.dataProvider=this.listAwardArr=new eui.ArrayCollection,this.addBg()},e.prototype.open=function(e){void 0===e&&(e=1),t.prototype.open.call(this),this.id=e,this.addClickE(this,this.onClick),this.addLsn(DartSys.ins().patchScoreReward,this.update);var i=Cfg.getConfig(DartJifenConfig,this.id);this.labelMyScore.text="我的积分："+Actor.ins().getCurrency(CurType.DartScore),this.labelJifen.textFlow=addColorTF("达到"+addColor(i.jifen,5767068)+"积分可领取以下奖励"),this.listAwardArr.source=i.reward,this.update()},e.prototype.update=function(){var t=DartSys.ins().getRewardStateById(this.id);this.btnGetHui.visible=0==t,this.btnGet.visible=1==t,this.imgYLQ.visible=2==t},e.prototype.onClick=function(t){switch(t.target){case this.btnGetHui:showtipsFail("积分不足，无法领取");break;case this.btnGet:DartSys.ins().sendScoreReward(this.id)}},e}(BaseWinSingle);__reflect(DartBaoxiangWin.prototype,"DartBaoxiangWin"),window.DartBaoxiangWin=DartBaoxiangWin;var DartCarInfoWin=function(t){function e(){var e=t.call(this)||this;return e.layer=LayerMgr.Popup,e.skinName="DartCarInfoWinEUI",e.setSkinPart("itemLose",new ItemBaseReward),e.setSkinPart("itemWin",new ItemBaseReward),e.listJipo.itemRenderer=ItemBaseReward,e.listArr2=new eui.ArrayCollection,e.listJipo.dataProvider=e.listArr2,e.btnLueduo.name=e.btnLueduo.label,e.addBg(),e}return __extends(e,t),e.prototype.open=function(e){t.prototype.open.call(this),this.carData=e,this.addClickE(this,this.onClick),this.update()},e.prototype.update=function(){this.imgLv.source="hwbz_zycs_level"+this.carData.carLv,this.imgBaozang.source="hwbz_zycs_bz"+this.carData.carLv,this.labelGuildName.text="["+Lang.chat_str18+"："+this.carData.guildName+"]",this.labelFangshou.text="防守人数："+this.carData.hasNum+"/"+this.carData.totalNum;var t=Cfg.getConfig(DartCarConfig,this.carData.carLv);this.itemLose.data=t.failreward.concat().shift(),this.itemWin.data=t.sucreward.concat().shift();var e=t.plunderreward.length>2?t.plunderreward.concat().slice(0,2):t.plunderreward;this.listArr2.source=e,this.btnLueduo.visible=this.carData.guildId!=GuildSys.ins().guildID,this.updateTime()},e.prototype.updateTime=function(){if(this.btnLueduo.visible&&DartSys.ins().cd>0){var t=Math.ceil(DartSys.ins().cd/1e3);this.btnLueduo.label=this.btnLueduo.name+("("+t+")"),this.btnLueduo.filters=DisUtil.grayFilter()}else this.btnLueduo.filters=[]},e.prototype.onClick=function(t){switch(t.target){case this.btnLueduo:if(DartSys.ins().cd>0)return void showtipsFail("掠夺冷却中，无法进行掠夺");DartSys.ins().sendChallengeCar(this.carData.guildId)}},e}(BaseWinSingle);__reflect(DartCarInfoWin.prototype,"DartCarInfoWin"),window.DartCarInfoWin=DartCarInfoWin;var DartCarPreviewWin=function(t){function e(){var e=t.call(this)||this;return e.levelstr="hwbz_zycs_level1",e.carstr="hwbz_zycs_bz5",e.lv=1,e.joinRoleNum=0,e.maxLv=0,e}return __extends(e,t),e.prototype.initUI=function(){t.prototype.initUI.call(this),this.skinName="DartCarPreviewWinEUI",this.eGuildReward.itemRenderer=ItemBaseReward,this.eGuildReward.dataProvider=this.listGueldArr=new eui.ArrayCollection,this.eReward.itemRenderer=ItemBaseReward,this.eReward.dataProvider=this.listArr=new eui.ArrayCollection,this.addBg()},e.prototype.open=function(){for(var e=[],i=0;i<arguments.length;i++)e[i]=arguments[i];t.prototype.open.call(this,e),this.joinRoleNum=e[0],this.addClickE(this.leftBtnBase,this.onCarClick),this.addClickE(this.rightBtnBase,this.onCarClick),this.maxLv=Cfg.getConfigLength(DartCarConfig),this.updateView()},e.prototype.onCarClick=function(t){switch(t.currentTarget){case this.leftBtnBase:this.lv--;break;case this.rightBtnBase:this.lv++}this.updateView()},e.prototype.updateView=function(){this.leftBtnBase.visible=this.lv>1&&this.maxLv>1,this.rightBtnBase.visible=this.lv<this.maxLv&&this.maxLv>1;var t=DartSys.ins(),e=t.getCarJoinRoleNumByLv(this.lv),i=this.joinRoleNum>=e?4980614:16729927;this.countArr=addColorTF(this.joinRoleNum+"/"+e,i),this.levelstr="hwbz_zycs_level"+this.lv,this.carstr="hwbz_zycs_bz"+this.lv;var n=Cfg.getConfig(DartCarLevelRewardConfig,this.lv,0),a=new ItemDataReward;a.id=CurType.DartGuildScore,a.count=n.guild_score,this.listGueldArr.source=[a],a=new ItemDataReward,a.id=CurType.DartScore,a.count=n.personal_score,this.listArr.source=[a]},e}(BaseWinSingle);__reflect(DartCarPreviewWin.prototype,"DartCarPreviewWin"),window.DartCarPreviewWin=DartCarPreviewWin;var CfgParam=function(){function t(){this.configKeys=[],this.hasCond=!1}return t.prototype.parser=function(t){for(var e=t.concat(),i=[],n=!0,a=0,o=e;a<o.length;a++){var s=o[a];CondType.is(s)&&(n=!1),n?this.configKeys.push(s):i.push(s)}this.hasCond=void 0!=i[0],this.condType=i[0]||CondType.ALL,this.key=i[1]||"",this.value=i[2]||0},t}();__reflect(CfgParam.prototype,"CfgParam");var DartGuildRankPanelItem=function(t){function e(){var e=t.call(this)||this;return e.skinName="DartGuildRankPanelItemEUI",e.eList.itemRenderer=ItemBaseReward,e.listArr=new eui.ArrayCollection,e.eList.dataProvider=e.listArr,e}return __extends(e,t),e.prototype.dataChanged=function(){if(this.data&&this.data instanceof DartRankData){var t=void 0;t=this.data.name==Lang.act_str87?16777215:15978507,this.eGuildName.textFlow=addColorTF("["+Lang.chat_str18+"："+addColor(this.data.name,t)+"]",15978507),this.sServer.text="",this.score.text=this.data.score>0?this.data.score+"":"",this.scoreIcon.visible=this.data.score>0,this.data.pos<4?(this.rankTxt.text="",this.rankImg.source="hwbz_zycs_phb"+this.data.pos):(this.rankTxt.text=this.data.pos+"",this.rankImg.source="");var e=Cfg.getConfigs(DartGuildRankConfig),i=[];for(var n in e){var a=e[n];if(this.data.pos>=a.range[0]&&this.data.pos<=a.range[1]){i=this.combinationArr(a.allaward,a.award);break}}this.listArr.source=i}},e.prototype.combinationArr=function(t,e){for(var i=[],n=0;n<t.length;n++){var a=t[n],o=new ItemDataReward;o.id=a.id,o.count=a.count,i.push(o)}for(var n=0;n<e.length;n++){for(var a=e[n],o=void 0,s=0;s<i.length;s++)if(i[s].id==a.id){o=i[s];break}o?o.count=o.count+a.count:(o=new ItemDataReward,o.id=a.id,o.count=a.count,i.push(o))}return i},e}(BaseItemRender);__reflect(DartGuildRankPanelItem.prototype,"DartGuildRankPanelItem"),window.DartGuildRankPanelItem=DartGuildRankPanelItem;var AchievementTaskConfig=function(){function t(){}return t}();__reflect(AchievementTaskConfig.prototype,"AchievementTaskConfig");var DartJoinPanelConvoyItem=function(t){function e(){var e=t.call(this)||this;return e.skinName="DartJoinPanelConvoyItemEUI",e}return __extends(e,t),e.prototype.dataChanged=function(){if(this.data){var t=this.data;this.eName.text=t.name,this.eLv.text=GFunc.GetLvStrByLv(t.zsLv),this.ePower.text="战斗力："+GFunc.overLength(t.power)}},e}(BaseItemRender);__reflect(DartJoinPanelConvoyItem.prototype,"DartJoinPanelConvoyItem"),window.DartJoinPanelConvoyItem=DartJoinPanelConvoyItem;var DartJoinPanelItem=function(t){function e(){var e=t.call(this)||this;return e.skinName="DartJoinPanelItemEUI",e.joinBtn.name="joinBtn",e.cancelBtn.name="cancelBtn",e}return __extends(e,t),e.prototype.dataChanged=function(){if(this.data){var t=this.data;this.imglv.source="hwbz_zycs_level"+t.lv,this.eCarImg.source="hwbz_zycs_bz"+t.lv,this.eSelectImg.visible=this.selected;var e=DartSys.ins().hasJoinCarById(t.id);switch(t.state){case 0:this.eConvoyImg.source=e?"hwbz_zycs_ycy":"hwbz_zycs_wcy";break;case 1:this.eConvoyImg.source=e?"hwbz_zycs_ycy":"hwbz_zycs_wcy";break;case 2:this.eConvoyImg.source=e?"hwbz_zycs_ycy":"hwbz_zycs_ycf";break;case 3:this.eConvoyImg.source="hwbz_zycs_ys";break;case 4:this.eConvoyImg.source="hwbz_zycs_ywc";break;case 5:this.eConvoyImg.source=""}this.joinBtn.visible=!e,this.cancelBtn.visible=e,this.joinBtn.enabled=!(0!=t.state||!e&&DartSys.ins().hasJoinCarNum()>=DartSys.MAXJOIN),this.cancelBtn.enabled=this.joinBtn.enabled;var i=Cfg.getConfig(DartConstConfig),n=i.startTimes[t.id-1],a=n[0],o=n[1];t.state<=2?(this.eTime.textColor=15978507,this.eTime.text="发车时间\n"+a+":"+(o>0?o:"00")+":00"):(this.eTime.textColor=1694464,this.eTime.text="抵达时间\n"+(a+i.lastTime)+":"+(o>0?o:"00")+":00");var s=RpSys.ins().getData(JJCWin,DartPanel,DartJoinPanel,"join"+t.id);this.eRed.visible=s}},e.prototype.setSelect=function(t){this.eSelectImg.visible=t},e}(BaseItemRender);__reflect(DartJoinPanelItem.prototype,"DartJoinPanelItem"),window.DartJoinPanelItem=DartJoinPanelItem;var DartLueduoWin=function(t){function e(){var e=t.call(this)||this;return e.layer=LayerMgr.Popup,e}return __extends(e,t),e.prototype.initUI=function(){t.prototype.initUI.call(this),this.list.itemRenderer=DartLueduoWinItem,this.list.dataProvider=this.listArr=new eui.ArrayCollection,this.addBg()},e.prototype.setSkinName=function(){this.skinName="DartLueduoWinEUI"},e.prototype.open=function(){t.prototype.open.call(this),this.addClickE(this,this.onClick),this.addLsn(DartSys.ins().patchRefreshCar,this.updatlist),this.updatlist()},e.prototype.updatlist=function(){var t=DartSys.ins().carDatas,e=[];for(var i in t){var n=t[i];n.guildId!=GuildSys.ins().guildID&&e.push(n)}this.listArr.source=e,this.labelTips.visible=this.list.dataProvider.length<=0,DartSys.ins().refreshCount>0?this.btnChange.label="换一批("+DartSys.ins().refreshCount+"次)":this.btnChange.label="换一批"},e.prototype.onClick=function(t){if(t.target==this.btnChange)DartSys.ins().refreshCars();else if(t.target){var e=t.target.name;if(e.indexOf("btnLueduo")>-1){var i=parseInt(e.split("_")[1]),n=this.listArr.getItemAt(i);DartSys.ins().openPlunderInfoWin(n)}}},e}(BaseWinSingle);__reflect(DartLueduoWin.prototype,"DartLueduoWin"),window.DartLueduoWin=DartLueduoWin;var DartLueduoWinItem=function(t){function e(){var e=t.call(this)||this;return e.skinName="DartLueduoWinItemEUI",e}return __extends(e,t),e.prototype.dataChanged=function(){var t=this.data;this.btnLueduo.name="btnLueduo_"+this.itemIndex,this.labelName.text="[仙盟："+t.guildName+"]",this.labelLv.text="宝藏等级："+t.carLv+"级",this.labelHusong.textFlow=addColorTF("护送人数："+addColor(t.hasNum+"/"+t.totalNum,5269127)),this.labelLueduo.textFlow=addColorTF("可掠夺："+addColor(""+t.canPlunderNum,5269127)+"次")},e}(BaseItemRender);__reflect(DartLueduoWinItem.prototype,"DartLueduoWinItem"),window.DartLueduoWinItem=DartLueduoWinItem;var Act15TaskConfig=function(){function t(){}return t}();__reflect(Act15TaskConfig.prototype,"Act15TaskConfig");var ActivityBtnConfig=function(){function t(){this.subType=1}return t}();__reflect(ActivityBtnConfig.prototype,"ActivityBtnConfig");var DartPlunderPanelCarItem=function(t){function e(){var e=t.call(this)||this;return e.oldId=-1,e.skinName="DartPlunderPanelCarItemEUI",e.mc=new MC,e.eMcGroup.addChild(e.mc),e.touchChildren=!1,e.touchEnabled=!0,e}return __extends(e,t),e.prototype.dataChanged=function(){if(!this.data)return this.eCarGroup.visible=!1,void this.mc.stop();var t=this.data;this.oldId!=t.guildId&&(this.eCarGroup.x=40*Math.random()*(Math.random()>.5?1:-1)),this.oldId=t.guildId,this.eCarGroup.visible=!0,this.updateInfo()},e.prototype.updateInfo=function(){if(!this.data)return this.eCarGroup.visible=!1,void this.mc.stop();var t=this.data;this.mc.playFile(ResMgr.getEffName("hwbz_bz"+t.carLv),-1),this.eLabGuild.text="[仙盟："+t.guildName+"]",this.eLabPeople.text="守卫："+t.hasNum+"/"+t.totalNum,this.eTimes.text="可击破："+t.canPlunderNum+"次",this.imglv.source="hwbz_zycs_level"+t.carLv,this.myGuild.visible=t.guildId==GuildSys.ins().guildID},e}(BaseItemRender);__reflect(DartPlunderPanelCarItem.prototype,"DartPlunderPanelCarItem"),window.DartPlunderPanelCarItem=DartPlunderPanelCarItem;var ActivityCommonConfig=function(){function t(){}return t}();__reflect(ActivityCommonConfig.prototype,"ActivityCommonConfig");var DartRankPanelItem=function(t){function e(){var e=t.call(this)||this;return e.skinName="DartRankPanelItemEUI",e.eList.itemRenderer=ItemBaseReward,e}return __extends(e,t),e.prototype.dataChanged=function(){if(this.data&&this.data instanceof DartRankData){this.currentState="data",this.data.pos<4?(this.eRank.text="",this.eRankImg.source="hwbz_zycs_phb"+this.data.pos):(this.eRank.text=this.data.pos+"",this.eRankImg.source=""),this.eName.text=this.data.name,this.score.text="积分："+this.data.score,this.guildName.text=""!=this.data.guildName?"[仙盟："+this.data.guildName+"]":"未加入仙盟";var t=Cfg.getConfigs(DartPersonRankConfig);for(var e in t){var i=t[e];if(this.data.pos>=i.range[0]&&this.data.pos<=i.range[1]){this.eList.dataProvider=new eui.ArrayCollection(i.award);break}}}else this.itemIndex<3?(this.eRank.text="",this.eRankImg.source="hwbz_zycs_phb"+(this.itemIndex+1)):(this.eRank.text=this.itemIndex+1+"",this.eRankImg.source=""),this.guildName.text="[仙盟：虚位以待]",this.eName.text="虚位以待",this.currentState="noData"},e}(BaseItemRender);__reflect(DartRankPanelItem.prototype,"DartRankPanelItem"),window.DartRankPanelItem=DartRankPanelItem;var DartRecordWin=function(t){function e(){var e=t.call(this)||this;return e.layer=LayerMgr.Popup,e}return __extends(e,t),e.prototype.setSkinName=function(){this.skinName="DartRecordWinEUI"},e.prototype.initUI=function(){t.prototype.initUI.call(this),this.tabBar.dataProvider=new eui.ArrayCollection([{labelDisplay:"仙盟记录"},{labelDisplay:"个人记录"}]),this.eList.itemRenderer=DartRecordWinItem,this.eList.dataProvider=this.eListArr=new eui.ArrayCollection,this.addBg()},e.prototype.open=function(){t.prototype.open.call(this),this.addChangeE(this.tabBar,this.onTabTouch),this.addLsn(DartSys.ins().patchLogs,this.updateList),this.addLsn(DartSys.ins().patchGulidLogs,this.updateList),this.sendLogs()},e.prototype.sendLogs=function(){0==this.tabBar.selectedIndex?DartSys.ins().sendGuildLogs():DartSys.ins().sendLogs()},e.prototype.onTabTouch=function(t){this.sendLogs()},e.prototype.updateList=function(){this.eList.itemRenderer=0==this.tabBar.selectedIndex?DartRecordWinGuildItem:DartRecordWinItem,this.eListArr.source=0==this.tabBar.selectedIndex?DartSys.ins().guildLogs:DartSys.ins().logs},e}(BaseWinSingle);__reflect(DartRecordWin.prototype,"DartRecordWin"),window.DartRecordWin=DartRecordWin;var DartRecordWinGuildItem=function(t){function e(){var e=t.call(this)||this;return e.skinName="DartRecordWinGuildItemEUI",e}return __extends(e,t),e.prototype.dataChanged=function(){if(this.data){var t=this.data,e="end";1==t.type?e="setout":3==t.type&&(e="break"),this.currentState=e,this.validateNow();var i=DateUtil.formatMiniDateTime(t.time);if(this.labelTime.text=DateUtil.formatDayTime(i,"yy-mo-dd hh:mm:ss"),1==t.type)this.labelName.text="仙盟"+t.carLv+"级宝藏",this.labelrolenum.text="参与护送人数："+t.roleNum;else if(2==t.type)this.labelName.text="仙盟"+t.carLv+"级宝藏",this.labelInfo.text="已到达终点，共被击破"+t.smashNum+"次",this.labelGuildScore.textFlow=addColorTF("获得仙盟积分："+addColor(t.guildScore,"#57ff9c")),this.labelMyScore.textFlow=addColorTF("获得个人积分："+addColor(t.score,"#57ff9c"));else{var n=addColor("[仙盟："+t.guildName+"]",5767068)+"的"+addColor(t.roleName,15978507);this.labelName.textFlow=addColorTF(n)}}},e}(BaseItemRender);__reflect(DartRecordWinGuildItem.prototype,"DartRecordWinGuildItem"),window.DartRecordWinGuildItem=DartRecordWinGuildItem;var DartRecordWinItem=function(t){function e(){var e=t.call(this)||this;return e.skinName="DartRecordWinItemEUI",e}return __extends(e,t),e.prototype.dataChanged=function(){if(this.data){var t=this.data,e="end";1==t.type?e="escort":3==t.type&&(e="rob"),this.currentState=e,this.validateNow();var i=DateUtil.formatMiniDateTime(t.time);this.labelTime.text=DateUtil.formatDayTime(i,"yy-mo-dd hh:mm:ss"),1==t.type?this.labelName.text="参与护送  "+t.carLv+"级宝藏":2==t.type?(this.labelName.textFlow=addColorTF(t.carLv+"级宝藏"+addColor("  护送结束",16751375)),this.labelGuildScore.textFlow=addColorTF("获得仙盟积分："+addColor(t.guildScore,5767068)),this.labelMyScore.textFlow=addColorTF("获得个人积分："+addColor(t.score,5767068))):(e="在掠夺"+addColor("[仙盟："+t.guildName+"]",15733780)+"的"+addColor(t.carLv+"级宝藏",16751375)+"中,\n",e+="共获得了"+t.score+"积分",0==t.result&&(e+="但被"+addColor(t.roleName,15978507)+"击败了"),this.labelName.textFlow=addColorTF(e))}},e}(BaseItemRender);__reflect(DartRecordWinItem.prototype,"DartRecordWinItem"),window.DartRecordWinItem=DartRecordWinItem;var DartCarData=function(){function t(){}return t.prototype.canLueDuo=function(){return this.canPlunderNum>0},t.prototype.update=function(t){var e=this;e.guildId=t.readInt(),e.guildName=t.readString(),e.carLv=t.readByte(),e.hasNum=t.readByte(),e.totalNum=t.readByte(),e.canPlunderNum=t.readByte()},t}();__reflect(DartCarData.prototype,"DartCarData"),window.DartCarData=DartCarData;var DartDivision=function(){function t(){}return t.prototype.update=function(t){this.name=t.readString(),this.zsLv=t.readInt(),this.power=t.readDouble()},t}();__reflect(DartDivision.prototype,"DartDivision"),window.DartDivision=DartDivision;var DartGuildCarData=function(){function t(){this.dartDivisions=[]}return t.prototype.update=function(t){this.canPlunderNum=t.readByte();var e=t.readByte();this.dartDivisions.length=e;for(var i=!1,n=0;e>n;n++){var a=this.dartDivisions[n];a||(a=new DartDivision,this.dartDivisions[n]=a),a.update(t),i||(i=a.name==Actor.ins().myName)}this.isJoin=i},t}();__reflect(DartGuildCarData.prototype,"DartGuildCarData"),window.DartGuildCarData=DartGuildCarData;var DartGuildLogData=function(){function t(){}return t.prototype.update=function(t){var e=this;e.time=t.readInt(),e.type=t.readByte(),1==e.type?(e.carLv=t.readByte(),e.roleNum=t.readByte()):2==e.type?(e.carLv=t.readByte(),e.smashNum=t.readByte(),e.guildScore=t.readShort(),e.score=t.readShort()):3==e.type&&(e.guildName=t.readString(),e.roleName=t.readString())},t}();__reflect(DartGuildLogData.prototype,"DartGuildLogData"),window.DartGuildLogData=DartGuildLogData;var DartLogData=function(){function t(){}return t.prototype.update=function(t){var e=this;e.time=t.readInt(),e.type=t.readByte(),1==e.type?e.carLv=t.readByte():2==e.type?(e.carLv=t.readByte(),e.guildScore=t.readShort(),e.score=t.readShort()):3==e.type&&(e.result=t.readByte(),e.roleName=t.readString(),e.guildName=t.readString(),e.carLv=t.readByte(),e.score=t.readShort(),e.guildScore=t.readShort())},t}();__reflect(DartLogData.prototype,"DartLogData"),window.DartLogData=DartLogData;var DartRankData=function(){function t(){}return t.prototype.update=function(t){this.name=t.readString(),this.score=t.readInt()},t}();__reflect(DartRankData.prototype,"DartRankData"),window.DartRankData=DartRankData;var FbSys=function(t){function e(){var e=t.call(this)||this;e.mapId=0,e.guajiFbId=0,e.commonEndTick=0,e.emoModel=new FbModelDevil,e.xueSeModel=new FbModelXuese,e.equipBossModel=new FbModelShiLian,e.fbModels=[],e.bossHomeModel=new FbModelBossHome,e.redFort=new FbModelRedFort,e.guiShuTypeFuBenModel=new GuiShuTypeFuBenModel,e.guajiData=new FbModelGuaJi,e.molongData=new FbModelMoLong,e.fubenGuaJiData=new FbGuaJiData,e.fubenCurrency=0,e.fubenKill=0,e.bossHuDun=new BossHuDun,e.bossAutoChallengeIsSend=!1,e.bossAutoChallengeDatas=[],e.zhuzaiMode=new FbModelZhuZai,e.yongZheModel=new YongZheModel,e.shendianData=new FbModelShenDian,e.guZhanMode=new FbModelGuZhan,e.braveModel=new FbModelYongZhe,e.qmdbModel=new QMDBModel,e.klmModel=new FbModelKlm,e.resultData=new FbResultData,e.isReward=!1,e.sysId=PackId.Fuben,e.reg(0,e.patchGuaJiInfo),e.reg(1,e.patchGuaJiChallenge),e.reg(2,e.patchGuaJiHelpBroadcast),e.reg(3,e.patchGuaJiAssist),e.reg(4,e.patchGuaJiHelp),e.reg(5,e.patchGuaJiBoCount),e.reg(6,e.patchGuaJiKsgjInfo),e.reg(7,e.patchGuaJiKsgjUp),e.reg(8,e.patchGuaJiKsgjBuy),e.reg(9,e.patchGuaJiAutoChallenge),e.reg(10,e.patchGuaJiReward),e.reg(11,e.patchguZhanModeUpdate),e.reg(13,e.patchguZhanKillCount),e.reg(14,e.patchguZhanDropRewrad),e.reg(16,e.patchguZhanResult),e.reg(17,e.patchGuZhanRank),e.reg(18,e.patchGuZhanReceivek),e.reg(19,e.parserRankRewardUpdate),e.reg(223,e.patchGuaJiBossShow),e.reg(224,e.patchGuaJiAssistSuccess),e.reg(225,e.patchGuaJiAssistBroadcast),e.reg(21,e.patchJueWangInfo),e.reg(22,e.patchJueWangList),e.reg(23,e.patchJueWangRemind),e.reg(24,e.patchJueWangRecord),e.reg(25,e.doJueWangFight),e.reg(26,e.patchJueWangRank),e.reg(27,e.patchJueWangUpdateInfo),e.reg(31,e.patchHeianInfo),e.reg(41,e.doResult),e.reg(44,e.doRoleAllDie),e.reg(45,e.patchUpdateFbTime),e.reg(46,e.patchBossBlood),e.reg(47,e.patchBossTrailer),e.reg(48,e.patchFbCurrency),e.reg(49,e.patchRelive),e.reg(50,e.patchBossHuDun),e.reg(51,e.patchEmoInfo),e.reg(53,e.doEmoTime),e.reg(54,e.doEmoUserCount),e.reg(55,e.patchEmoScore),e.reg(56,e.patchEmoGuWu),e.reg(58,e.patchEmoDataTimer),e.reg(62,e.patchDailyCountChange),e.reg(65,e.patchSaoDangResult),e.reg(68,e.patchYJTZ),e.reg(69,e.patchKillCount),e.reg(70,e.patchXueSeTips),e.reg(71,e.patchXueSeData),e.reg(73,e.doXueSeTime),e.reg(74,e.doXueSeUserCount),e.reg(75,e.patchXueSeDeFeng),e.reg(76,e.patchXueSeGuWu),e.reg(78,e.doXueSeTaskState),e.reg(80,e.patchXueSeDataTimer),e.reg(81,e.patchEquipBossData),e.reg(83,e.patchEquipBossOneKey),e.reg(84,e.patchEquipBossInfoUpdate),e.reg(111,e.patchRedFortInfo),e.reg(112,e.patchRedFortEnter),e.reg(113,e.patchRedFortKill),e.reg(114,e.patchRedFortRevive),e.reg(116,e.patchRedFortResult),e.reg(117,e.patchRedFortScore),e.reg(118,e.patchRedFortDabiaoReward),e.reg(119,e.patchRedFortLastRank),e.reg(121,e.patchBossHomeInfo),e.reg(122,e.patchBossHomeListInfo),e.reg(125,e.patchBossHomeHpChange),e.reg(126,e.patchBossHomeBelongerChange),e.reg(128,e.patchBossHomeAtkerList),e.reg(129,e.patchReliveCd),e.reg(130,e.patchBossHomeAward),e.reg(141,e.patchKlmInfo),e.reg(142,e.patchKlmListInfo),e.reg(144,e.patchKlmFight),e.reg(145,e.patchKlmHpChange),e.reg(147,e.patchKlmReward),e.reg(148,e.patchKlmMyHurt),e.reg(150,e.patchKlmAward),e.reg(151,e.patchKlmKunDunBoss),e.reg(152,e.patchKlmKunDunData),e.reg(154,e.patchKlmKunDunResult),e.reg(171,e.patchZhuZaiFubenData),e.reg(173,e.patchZhuZaiResult),e.reg(174,e.patchZhuZaiStartLuckDraw),e.reg(175,e.patchZhuZaiDiceResult),e.reg(176,e.patchZhuZaiLuckDrawResult),e.reg(177,e.patchZhuZaiHurtRank),e.reg(178,e.patchZhuZaiReward),e.reg(179,e.patchZhuZaiMyHurt),e.reg(183,e.patchFubenBelongerChange),e.reg(185,e.patchFuBenDaoJiShi),e.reg(201,e.patchBraveInfo),e.reg(202,e.patchBraveListInfo),e.reg(205,e.patchBraveHpChange),e.reg(206,e.patchBraveResult),e.reg(222,e.patchShowGuwuPower),e.regSendMsg(PackId.Fuben2,0,e.sendShenDianGoToFuben),e.regSendMsg(PackId.Fuben2,1,e.sendShenDianYaoQing),e.regSendMsg(PackId.Fuben2,3,e.sendShenDianGuWu),e.regSendMsg(PackId.Fuben2,8,e.sendShenDianBuyCount),e.regMsgBase(PackId.Fuben2,0,e.patchShenDianGoToFuben),e.regMsgBase(PackId.Fuben2,1,e.patchShenDianYaoQing),e.regMsgBase(PackId.Fuben2,2,e.patchShenDianFbData),e.regMsgBase(PackId.Fuben2,3,e.patchShenDianGuWu),e.regMsgBase(PackId.Fuben2,4,e.patchShenDianZuDuiTime),e.regMsgBase(PackId.Fuben2,5,e.patchShenDianData),e.regMsgBase(PackId.Fuben2,6,e.patchShenDianResult),e.regMsgBase(PackId.Fuben2,7,e.patchShenDianStarTime),e.regMsgBase(PackId.Fuben2,9,e.patchShenDianShuoHua),e.regMsgBase(PackId.Fuben2,10,e.patchShenDianGotoFubenData),e.regSendMsg(PackId.Fuben2,20,e.sendMoLongGoToFuben),e.regSendMsg(PackId.Fuben2,21,e.sendMoLongYaoQing),e.regSendMsg(PackId.Fuben2,22,e.sendMoLongGuWu),e.regSendMsg(PackId.Fuben2,23,e.sendMoLongBuyCount),e.regMsgBase(PackId.Fuben2,20,e.patchMoLongGoToFuben),e.regMsgBase(PackId.Fuben2,21,e.patchMoLongYaoQing),e.regMsgBase(PackId.Fuben2,22,e.patchMoLongGuWu),e.regMsgBase(PackId.Fuben2,23,e.patchMoLongData),e.regMsgBase(PackId.Fuben2,24,e.patchMoLongFbData),e.regMsgBase(PackId.Fuben2,25,e.patchMoLongResult),e.regMsgBase(PackId.Fuben2,26,e.patchMoLongZuDuiTime),e.regMsgBase(PackId.Fuben2,27,e.patchMoLongStarTime),e.regMsgBase(PackId.Fuben2,28,e.patchMoLongGotoFubenData),e.regSendMsg(PackId.Fuben2,41,e.sendWanmoFight),e.regSendMsg(PackId.Fuben2,42,e.sendWanmoReset),e.regSendMsg(PackId.Fuben2,43,e.sendWanmoSweep),e.regSendMsg(PackId.Fuben2,44,e.sendWanmoKuaiSu),e.regSendMsg(PackId.Fuben2,45,e.sendWanmoData),e.regSendMsg(PackId.Fuben2,46,e.sendWanmoGuanQiaReward),e.regMsgBase(PackId.Fuben2,41,e.patchWanmoInfo),e.regMsgBase(PackId.Fuben2,44,e.patchWanmoKuaiSu),e.regMsgBase(PackId.Fuben2,46,e.patchWanmoGuanQiaReward),e.regSendMsg(PackId.Fuben2,60,e.sendLiXian),e.regMsgBase(PackId.Fuben2,60,e.doLiXianUpdate),e.regSendMsg(PackId.Fuben2,61,e.sendYongZheChallenge),e.regSendMsg(PackId.Fuben2,62,e.sendYongZheReceiveReward),e.regSendMsg(PackId.Fuben2,64,e.sendYongZheFirstPlayInfo),e.regMsgBase(PackId.Fuben2,61,e.patchYongZheInfo),e.regMsgBase(PackId.Fuben2,62,e.patchYongZheReceiveReward),e.regMsgBase(PackId.Fuben2,63,e.patchYongZheFirstFloor),e.regMsgBase(PackId.Fuben2,64,e.patchYongZheFirstPlayInfo),e.regMsgBase(PackId.Fuben2,65,e.patchUpdateYongZheInfo),e.regMsgBase(PackId.Fuben2,70,e.patchQmdbInfo),e.regMsgBase(PackId.Fuben2,71,e.patchQmdbActState),e.regMsgBase(PackId.Fuben2,73,e.patchQmdbUpdateReward),e.addLsn(LogicSys.ins().patchEnterMap,e.updateMap),e.wanmoModel=new FbModelWanmo,e.heianModel=new FbModelWanmo,e.juewangModel=new FbModelQuanMin,e.bossBloodData=new BossBloodData,e.liXianData=new FbLiXianData,e.refreshConfig=new RefreshMonsters;var i=new BossAutoChallengeKuaFuBossData;e.bossAutoChallengeDatas.push(i);var n=new BossAutoChallengeBossHomeData;e.bossAutoChallengeDatas.push(n);var a=new BossAutoChallengeData;e.bossAutoChallengeDatas.push(a);var o=new BossAutoChallengeKuaFuBossSdData;return e.bossAutoChallengeDatas.push(o),e}return __extends(e,t),e.ins=function(){return t.getIns.call(this,e)},e.prototype.updateMap=function(){e.ins().removeGuaJiTime(),e.ins().removefubenEndObserve(),e.ins().bossBloodData.reset(),e.ins().fubenCurrency=0,e.ins().bossHuDun.resetAll(),e.ins().bossHomeModel.resetAll(),e.ins().guiShuTypeFuBenModel.resetAll(),e.ins().guajiData.resetAll(),e.ins().molongData.resetAll(),e.ins().shendianData.resetAll(),GFunc.isGuaJiFb(e.ins().fbId)&&(e.ins().guajiFbId=e.ins().fbId),(GFunc.isGuaJiFb(e.ins().fbId)||GFunc.isInCity())&&e.ins().resetAutoChallengeFuBenData()},e.prototype.autoGotoFuBen=function(){var t=this.bossAutoChallengeDatas;if(!GFunc.isInGuaJiFb()&&!GFunc.isInCity()||this.guajiData.isGuanQia||0!=this.bossAutoChallengeIsSend)console.log("自动挑战boss 在副本中");else for(var e=0;e<t.length;e++){var i=t[e],n=i["goto"]();if(n){this.bossAutoChallengeIsSend=!0,Timer.ins().remove(this.autoGotoFuBen,this);break}}},e.prototype.setAutoChallengeFuBen=function(t,e){for(var i=this.bossAutoChallengeDatas,n=0;n<i.length;n++){var a=i[n];if(a.sysId==t){a.isAuto=e;break}}},e.prototype.gettAutoChallengeFuBenBySysId=function(t){for(var e=this.bossAutoChallengeDatas,i=0;i<e.length;i++){var n=e[i];if(n.sysId==t)return n.isAuto}},e.prototype.resetAutoChallengeFuBenData=function(){for(var t=this.bossAutoChallengeDatas,e=0;e<t.length;e++){var i=t[e];i.reset()}this.bossAutoChallengeIsSend=!1,Timer.ins()["do"](6e3,5e3,0,this.autoGotoFuBen,this,TimerType.LAST)},Object.defineProperty(e.prototype,"fubenConfig",{get:function(){return this._fubenConfig},set:function(t){this._fubenConfig=t,this.fubenGroupConfig=Cfg.getConfig(FubenGroupConfig,this.fubenConfig.group)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"fbId",{get:function(){return this.fubenConfig?this.fubenConfig.fbid:0},enumerable:!0,configurable:!0}),e.prototype.patchGuaJiInfo=function(t){this.guajiData.parserInfo(t)},e.prototype.sendGuaJiChallenge=function(){this.sendBase(1)},e.prototype.patchGuaJiChallenge=function(t){var e=this,i=t.readByte();this.guajiData.parserChallenge(t);for(var n=[],a=t.readByte(),o=0;a>o;o++){var s=new ItemDataReward;s.parser2(t),n.push(s)}if(i){var r=this.guajiData.challengeGuanId<=Cfg.getGuajiConstConfig().isShow?1400:0,u=new DuiLieOpenWinData;u.setData(function(){openWin(ResultWinMapBoss,e.guajiData.challengeGuanId,n,function(){u.call(),e.sendGuaJiEnterFb()})},this,r),u.setOrder(0),u.t=ResultWinMapBoss,DuiLieSys.ins().flyData.addFlyData(u);var h=new DuiLieOpenWinData;h.setData(function(){openWin(WorldMapExpEfficiencyWin,h.call.bind(h))},this),h.setOrder(6),h.t=WorldMapExpEfficiencyWin,DuiLieSys.ins().flyData.addFlyData(h),console.log("新地图开启"),r+=1e3}else{var l=new FbResultData;l.type=6,openWin(ResultWinLose,l),RechargeActSys.ins().openFirstRechargeTipsWin()}closeWin(BossBloodWin),closeWin(DamageListWin);var p=getWin(MainWin);p&&p.com_ext.showQieHuan(!0),RpFun.updateGuanQia(),this.guajiData.guanId==Cfg.getGuajiConstConfig().ksgjRp&&RpFun.showGuajiKsgjRp()},e.prototype.removeGuaJiTime=function(){Timer.ins().remove(this.sendGuaJiEnterFb,this)},e.prototype.sendGuaJiEnterFb=function(){this.sendBase(226)},e.prototype.sendGuaJiHelp=function(t){var e=this.getBytes(2);e.writeByte(t),this.send(e)},e.prototype.patchGuaJiHelpBroadcast=function(t){var e,i="",n=t.readByte();1==n?(e=ChatFactory.createData(ChatType.Guild,ChatSubType.GuaJi),i=Lang.gj_str12):(e=ChatFactory.createData(ChatType.KuaFu,ChatSubType.GuaJi),i=Lang.gj_str11),e.assistType=n,e.parserMessage(t),i=i.replace("$count$",""+e.guanId),e.setContent(""+i+StrUtil.addColor(StrUtil.addUnderLine(Lang.gj_str13),5949490)),ChatSys.ins().addMsg(e)},e.prototype.sendGuaJiAssist=function(t,e,i){var n=this.getBytes(3);n.writeByte(i),n.writeInt(t),n.writeShort(e),this.send(n)},e.prototype.patchGuaJiAssist=function(t){var e=t.readByte();return this.guajiData.assistCount=t.readByte(),e},e.prototype.sendGuaJiAssistTo=function(t,e,i,n){var a=this.getBytes(4);a.writeByte(n),a.writeByte(t?1:0),a.writeInt(e),a.writeShort(i),this.send(a)},e.prototype.patchGuaJiHelp=function(t){this.guajiData.parserGuaJiHelp(t),this.guajiData.guanId==Cfg.getGuajiConstConfig().ksgjRp&&RpFun.showGuajiKsgjRp()},e.prototype.patchGuaJiBoCount=function(t){this.guajiData.boCount=t.readByte(),RpFun.showGuajiTZRp()},e.prototype.patchGuaJiKsgjInfo=function(t){this.guajiData.parserGuaJiKsgjInfo(t),RpFun.showGuajiKsgjRp()},e.prototype.sendGuaJiKsgj=function(t){var e=this.getBytes(7);e.writeByte(t),this.send(e)},e.prototype.patchGuaJiKsgjUp=function(t){var e=t.readByte();this.guajiData.ksgjSdCount=t.readByte();for(var i=t.readShort(),n=[],a=0;i>a;a++){var o=new ItemDataReward;o.parser(t),n.push(o)}return 1==e||2==e&&openWin(KuaiSuPowerRewardWin,n),RpFun.showGuajiKsgjRp(),[e,n]},e.prototype.sendGuaJiKsgjBuy=function(){this.sendBase(8)},e.prototype.patchGuaJiKsgjBuy=function(t){this.guajiData.parserGuaJiKsgjBuy(t),RpFun.showGuajiKsgjRp()},e.prototype.sendGuaJiAutoChallenge=function(t){var e=this.getBytes(9);
e.writeByte(t?1:0),this.send(e)},e.prototype.patchGuaJiAutoChallenge=function(t){this.guajiData.isAutoChallenge=t.readBoolean()},e.prototype.sendGuaJiReward=function(t){var e=this.getBytes(10);e.writeShort(t),this.send(e)},e.prototype.patchGuaJiReward=function(t){this.guajiData.parserGuaJiReward(t),RpFun.showGuajiRewardRp();var e="";e.charCodeAt(1)},e.prototype.patchguZhanModeUpdate=function(t){this.guZhanMode.parser(t),e.ins().guZhanMode.rewardKeMai()&&0==e.ins().guZhanMode.rewardYiMai()&&(e.ins().guZhanMode.showRewardRedPoint=!0),RpFun.showGuZhanRedPoint(PCode.UPD),RpFun.showGuZhanReweardRedPoint(PCode.UPD)},e.prototype.sendGuZhanFight=function(){this.sendBase(12)},e.prototype.patchguZhanKillCount=function(t){this.guZhanMode.killCount=t.readInt(),e.ins().guZhanMode.rewardKeMai()&&0==e.ins().guZhanMode.rewardYiMai()&&(e.ins().guZhanMode.showRewardRedPoint=!0),RpFun.showGuZhanRedPoint(PCode.UPD),RpFun.showGuZhanReweardRedPoint(PCode.UPD)},e.prototype.sentdguZhanDropRewrad=function(){this.sendBase(14)},e.prototype.patchguZhanDropRewrad=function(t){for(var e=[],i=t.readShort(),n=0;i>n;n++){var a=new ItemDataReward;a.parser(t),e.push(a)}openWin(GuZhanPanelResultWin,e)},e.prototype.sendBuyReward=function(){this.sendBase(15)},e.prototype.patchguZhanResult=function(t){var e=new FbResultGuZhanData;e.parser(t),openWin(ResultWinGuZhan,e)},e.prototype.sendGuZhanRank=function(){this.sendBase(17)},e.prototype.patchGuZhanRank=function(t){this.guZhanMode.parserRank(t),RpFun.showGuZhanReweardRedPoint(PCode.UPD)},e.prototype.sendGuZhanReceive=function(t){var e=this.getBytes(18);e.writeByte(t),this.send(e)},e.prototype.patchGuZhanReceivek=function(t){var e=t.readByte();1==e?this.guZhanMode.firstReward=1:2==e&&(this.guZhanMode.gotoReward=1),RpFun.showGuZhanReweardRedPoint(PCode.UPD)},e.prototype.parserRankRewardUpdate=function(t){this.guZhanMode.parserRankRewardUpdate(t),RpFun.showGuZhanReweardRedPoint(PCode.UPD)},e.prototype.colseEvent=function(){closeWin(ActRankTipsWin1),closeWin(ActRankTipsWin2),closeWin(ActCZCBTipsWin1),closeWin(ActCZCBTipsWin2),closeWin(ActRankTipsWin1),closeWin(ActCZCBTipsWin1),closeWin(FirstRechargeTipsWin)},e.prototype.patchGuaJiBossShow=function(t){this.guajiData.isGuanQia=1==t.readByte();t.readInt();if(ShouHuNewSys.ins().bianShenGuider(),this.guajiData.isGuanQia){var e=getWin(MainWin);e&&(GFunc.isShowExtActIcon=!this.guajiData.isGuanQia,e.updateActBtn()),this.colseEvent(),openWin(GuanQiaTips)}},e.prototype.patchGuaJiAssistSuccess=function(t){},e.prototype.patchGuaJiAssistBroadcast=function(t){var e=t.readByte(),i=t.readString(),n=t.readString(),a=t.readShort(),o=addColor(""+n,5767068);if(o=Lang.chat_str21.replace("$targetName$",o),o=o.replace("$guanId$",addColor(""+a,5767068)),1==e){var s=ChatFactory.createData(ChatType.Guild,ChatSubType.Default);s.roleName=i,s.setContent(o),ChatSys.ins().addMsg(s)}else{var r=ChatFactory.createData(ChatType.KuaFu,ChatSubType.Default);r.roleName=i,r.setContent(o),ChatSys.ins().addMsg(r)}},e.prototype.sendCreatMonsters=function(){var t=this.getBytes(4);this.send(t)},e.prototype.doCreatMonsters=function(t){for(var e=1==t.readByte()?!0:!1,i=[],n=t.readInt(),a=0;n>a;a++){for(var o=t.readInt(),s=t.readInt(),r=[],u=0;s>u;u++){var h=ObjPool.pop(FbMonsterData);h.id=o,h.handle=VirtualServer.ins().getHandle(),h.isInsert=e,r.push(h)}for(var l=t.readInt(),p=0;l>p;p++){var c=ObjPool.pop(ItemDataDrop);c.parser(t);var d=void 0,g=0;if(d=Math.floor(Math.random()*r.length),l<r.length)for(;r[d].dropItem.length>0&&(d=Math.floor(Math.random()*r.length),g++,!(g>10)););r[d].dropItem.push(c)}i=i.concat(r)}},e.prototype.sendMonsterDie=function(t){var e=this.getBytes(5);e.writeInt(t),this.send(e)},e.prototype.sendGuaJi=function(){this.sendBase(6)},e.prototype.patchGuaJi=function(t){this.fubenGuaJiData.parser(t)},e.prototype.sendJuWangInfo=function(){this.sendBase(21)},e.prototype.patchJueWangInfo=function(t){this.juewangModel.parser(t),RpFun.showJueWangRedPoint(PCode.UPD)},e.prototype.sendJueWangList=function(){this.sendBase(22)},e.prototype.patchJueWangList=function(t){for(var e,i=t.readShort(),n=0;i>n;n++)e=this.juewangModel.bossInfo[n],e||(e=new QuanMinBossInfo,this.juewangModel.bossInfo.push(e)),e.parser(t);RpFun.showJueWangRedPoint(PCode.UPD)},e.prototype.sendJueWangRemind=function(t,e){var i=this.getBytes(23);i.writeShort(t),i.writeByte(e?1:0),this.send(i)},e.prototype.patchJueWangRemind=function(t){var e=t.readShort(),i=t.readByte();this.juewangModel.setRemindByIndex(e,1==i),RpFun.showJueWangRedPoint(PCode.UPD),console.log("boss  ID:"+e+" isRemind: "+i)},e.prototype.sendJueWangRecord=function(t){var e=this.getBytes(24);e.writeInt(t),this.send(e)},e.prototype.patchJueWangRecord=function(t){for(var e=t.readInt(),i=t.readShort(),n=[],a=0;i>a;a++){n[a]=[];var o=t.readInt();n[a][0]=getFormatTime(o%DateUtil.SECOND_PER_DAY,"hh:mm:ss"),n[a][1]=t.readString(),n[a][2]=t.readDouble().toString(),n[a][3]="1"}return n.reverse(),[e,n]},e.prototype.sendJueWangFight=function(t){var e=this.getBytes(25);e.writeInt(t),this.send(e)},e.prototype.doJueWangFight=function(t){for(var e=t.readShort(),i=(t.readString(),t.readShort(),t.readShort()),n=[],a=0;i>a;a++)n[a]=new ItemDataReward,n[a].parser(t);i=t.readShort();for(var o,s=[],r=[],a=0;i>a;a++)o=new ItemDataReward,o.parser(t),GFunc.isCur(o.id)?r.push(o):s.push(o);var u=t.readDouble(),h=new FbResultBossData;h.rewardCurrency=r,h.rewardItem=s,h.myRank=e,h.myHurt=u,openWin(ResultBossWin,h,0)},e.prototype.sendJueWangRank=function(t){var e=this.getBytes(26);e.writeInt(t),this.send(e)},e.prototype.patchJueWangRank=function(t){for(var e=t.readInt(),i=t.readShort(),n=[],a=0;i>a;a++)n[a]=[],n[a][0]=t.readInt().toString(),n[a][1]=t.readString(),n[a][2]=t.readDouble().toString();return[e,n]},e.prototype.patchJueWangUpdateInfo=function(t){var i=t.readInt();t.position-=4;for(var n,a=(Actor.ins().level,GFunc.getZSLevel(Actor.ins().level),this.juewangModel),o=function(o){var s=a.bossInfo[o];if(n=s.hp,s.id==i){if(s.parser1(t),0==n&&100==s.hp&&s.isRemind&&s.isopen&&e.ins().juewangModel.challengeCount>0&&GFunc.isSysOpen(234)){var r=getWin(MainWin).com_ext;r.showBossRemind(Lang.fb_str322,s.monsterName,GFunc.getZSNameBydb(s.getZsLv),s.monsterHead,function(){e.ins().sendJueWangFight(s.id)},ReliveType.Boss)}return"break"}},s=0;s<a.bossInfo.length;s++){var r=o(s);if("break"===r)break}RpFun.showJueWangRedPoint(PCode.ADD)},e.prototype.xxxx=function(t){void 0===t&&(t=ReliveType.Boss);var i=this.juewangModel,n=i.bossInfo[0],a=getWin(MainWin).com_ext;a.showBossRemind(Lang.fb_str322,n.monsterName,GFunc.getZSNameBydb(n.getZsLv),n.monsterHead,function(){e.ins().sendJueWangFight(n.id)},t)},e.prototype.sendDekaronHeiAn=function(){this.sendBase(31)},e.prototype.sendDekaronSweepResetHeiAn=function(){this.sendBase(32)},e.prototype.sendDekaronSweepHeiAn=function(){this.sendBase(33)},e.prototype.patchHeianInfo=function(t){this.heianModel.fbId=t.readInt(),this.heianModel.count=t.readInt(),this.heianModel.resetCount=t.readInt(),this.heianModel.status=t.readInt(),this.heianModel.maxCount=t.readInt(),this.heianModel.status>0&&(this.heianModel.SweepEndTick=Timer.ins().getTimer()+1e3*this.heianModel.status),this.heianModel.isResetFree=t.readBoolean(),RpFun.showHeiAnSDRedPoint(PCode.UPD),RpFun.showActRp(303)},e.prototype.doResult=function(t){this.resultData=new FbResultData;var i=t.readBoolean();this.resultData.type=t.readByte(),this.resultData.timer=t.readInt();for(var n,a=t.readShort(),o=0;a>o;o++)n=new ItemDataReward,n.parser3(t),n["double"]=t.readByte(),n.id==CurType.exp&&(this.resultData.exp=n.count),n.id==CurType.exp&&[8,9,10].indexOf(this.resultData.type)>=0?this.resultData.rewardCurrency.push(n):this.resultData.rewardItem.push(n);switch(this.resultData.score=t.readDouble(),this.resultData.lastExp=t.readDouble(),this.resultData.damage=t.readDouble(),i?LogicSys.ins().getDropIsItem()?(this.addLsn(BagSys.ins().patchItemChange,this.fubenEnd),this.addLsn(LogicSys.ins().patchPickUpItem,this.fubenEnd)):(0==BagSys.ins().getSurplusCount()||0==LogicSys.ins().getDropItemCount())&&openWin(ResultWin,this.resultData):openWin(ResultWinLose,this.resultData),this.resultData.type){case 3:e.ins().wanmoModel.setShowRedPoint(i),RpFun.showWanMoTZRedPoint(PCode.UPD);break;case 4:e.ins().heianModel.setShowRedPoint(i),RpFun.showHeiAnTZRedPoint(PCode.UPD);break;case 16:this.yongZheModel.challengeResult=i,RpFun.showYongZheRedPoint(PCode.UPD)}},e.prototype.fubenEnd=function(){(0==BagSys.ins().getSurplusCount()||0==LogicSys.ins().getDropItemCount())&&(LogicSys.ins().getDropIsItem()||getWin(ResultWin)||(6==this.resultData.type||openWin(ResultWin,this.resultData),this.removefubenEndObserve()))},e.prototype.removefubenEndObserve=function(){this.removeLsn(LogicSys.ins().patchPickUpItem,this.fubenEnd),this.removeLsn(BagSys.ins().patchItemChange,this.fubenEnd)},e.prototype.sendGetFubenReward=function(){this.sendBase(42)},e.prototype.sendExitFb=function(){this.sendBase(43)},e.prototype.doRoleAllDie=function(t){},e.prototype.patchUpdateFbTime=function(t){var e=(t.readInt(),t.readInt());e>0?this.commonEndTick=Timer.ins().getTimer()+1e3*e:this.commonEndTick=0},e.prototype.patchBossBlood=function(t){if(this.bossBloodData.parser(t),this.fubenConfig.group==FbGroup.BossHome||this.fubenConfig.group==FbGroup.KuaFuBoss||this.fubenConfig.group==FbGroup.kfbosssd||this.fubenConfig.group==FbGroup.GuildBattle||this.fubenConfig.group==FbGroup.Brave);else{var e=0==this.bossBloodData.hp&&0==this.bossBloodData.bossId;this.bossBloodData.hp>0||e?isShowWin(BossBloodWin)||openWin(BossBloodWin):closeWin(BossBloodWin)}var i=new FBDamageData;i.playerList=this.bossBloodData.playerList,this.updateDamage(i)},e.prototype.updateDamage=function(t){(this.fubenConfig.group==FbGroup.JueWang||this.fubenConfig.group==FbGroup.GuildBoss||this.fubenConfig.group==FbGroup.GuildWarPVE||this.fubenConfig.group==FbGroup.GuildWarPVP||this.fubenConfig.group==FbGroup.ShiJieBoss||this.fubenConfig.group==FbGroup.Siege)&&(isShowWin(DamageListWin)?this.patchDamegeUpdate(t):openWin(DamageListWin,t))},e.prototype.patchDamegeUpdate=function(t){return t},e.prototype.patchBossTrailer=function(t){openWin(BossWarnWin)},e.prototype.patchFbCurrency=function(t){t.readInt();this.fubenCurrency=t.readDouble()},e.prototype.patchRelive=function(t){var i=this,n=new ReliveData;n.parser(t),n.okFunc=function(){var t=n.itemDataRewards[ReliveData.ReliveType1-1];if(GFunc.isConsumeEnough(t)){var a=Lang.fb_str315.replace("$count$",""+StrUtil.addColor(t.count,16751375)),o=new PopupData(a);o.setFunction(i,function(){e.ins().sendRelive(ReliveData.ReliveType1),closeWin(ReliveWin)}),openWin(CommonCheckTipsWin,o,"Relive_"+i.fubenConfig.group)}else showTipsWarn(Lang.fb_str314.replace("$count$",""+t.count))},openWin(ReliveWin,n)},e.prototype.sendRelive=function(t){var e=this.getBytes(49);e.writeByte(t),this.send(e)},e.prototype.patchBossHuDun=function(t){this.bossHuDun.parser(t)},e.prototype.sendEmoInfo=function(){this.sendBase(51)},e.prototype.patchEmoInfo=function(t){this.emoModel.parser(t),RpFun.showEmoRedPoint(PCode.UPD)},e.prototype.onShowRechargeWinEmo=function(){RechargeActSys.ins().firstRechargeData.isRecharge()||this.fubenConfig.group!=FbGroup.Emo||1!=this.emoModel.jinruCount||openWin(RechargeWin)},e.prototype.sendEmoEnter=function(){this.sendBase(52)},e.prototype.doEmoTime=function(t){if(this.emoModel.countDownType=t.readShort(),this.emoModel.countDown=t.readShort(),this.emoModel.countDown=Timer.ins().getTimer()+1e3*this.emoModel.countDown,this.patchEmoMapUpdate(),1==this.emoModel.countDownType){var e=(this.emoModel.countDown-Timer.ins().getTimer())/1e3;e>0&&openWin(CountDownWin,e)}RpFun.showEmoRedPoint(PCode.UPD)},e.prototype.doEmoUserCount=function(t){this.emoModel.userCount=t.readShort(),this.patchEmoMapUpdate()},e.prototype.patchEmoScore=function(t){this.emoModel.score=t.readInt()},e.prototype.sendEmoGuWu=function(t){var e=this.getBytes(56);e.writeShort(t),this.send(e)},e.prototype.patchEmoGuWu=function(t){this.doGuwu(this.emoModel,t)},e.prototype.doGuwu=function(t,i){var n=t.guwuAttrData.ybCount,a=t.guwuAttrData.rmbCount,o=i.readBoolean(),s=i.readByte();t.gotoCount=i.readInt();for(var r=i.readByte(),u=0;r>u;u++){var h=i.readByte();1==h?t.guwuAttrData.ybCount=i.readByte():2==h&&(t.guwuAttrData.rmbCount=i.readByte())}var l=e.ins().fubenConfig=Cfg.getConfig(FubenConfig,e.ins().fbId);if(l.group==FbGroup.XueSe&&(GuiderGuWu.ins().close(),e.ins().xueSeModel.istixingguwu()&&GuiderTrigger.ins().trigger(GuiderId.Id2001,GuiderStepType.JS)),l.group==FbGroup.Emo&&(GuiderGuWu.ins().close(),e.ins().emoModel.istixingguwu()&&GuiderTrigger.ins().trigger(GuiderId.Id2002,GuiderStepType.JS)),o){showtipsSuc(Lang.fb_str272);var p=void 0;1==s?(p=t.fbConfig.goldSp[0],n!=t.guwuAttrData.ybCount&&this.patchMoneyChange(1,p)):(p=t.fbConfig.diamondSp[0],a!=t.guwuAttrData.rmbCount&&this.patchMoneyChange(2,p))}},e.prototype.patchMoneyChange=function(t,e){return[t,e]},e.prototype.sendEmoBugCount=function(){this.sendBase(57)},e.prototype.patchEmoMapUpdate=function(){},e.prototype.patchEmoDataTimer=function(t){t.readBoolean();this.emoModel.SweepEndTick=Timer.ins().getTimer()+1e3*t.readInt(),RpFun.showEmoRedPoint(PCode.UPD)},e.prototype.patchDailyCountChange=function(t){var e=t.readInt();this.fbModels.length=0;for(var i=0;e>i;i++){var n=new FbModelDaily;n.parser(t),this.fbModels.push(n)}RpFun.showMeiRiFbRp(),RpFun.showActRp(303)},e.prototype.sendDailySweep=function(t){var e=this.getBytes(63);e.writeInt(t),this.send(e)},e.prototype.sendDailyFight=function(t){var e=this.getBytes(64);e.writeInt(t),this.send(e)},e.prototype.sendSweep=function(t){var e=this.getBytes(65);e.writeInt(t),this.send(e)},e.prototype.patchSaoDangResult=function(t){var e=new FbResulKuaiSuData;e.parser(t),openWin(SaoDangFbResultWin,e)},e.prototype.sendYJTZ=function(t){var e=this.getBytes(68);e.writeByte(t),this.send(e)},e.prototype.patchYJTZ=function(t){t.readByte()},e.prototype.patchKillCount=function(t){t.readInt();this.fubenKill=t.readInt()},e.prototype.patchXueSeTips=function(t){var e=t.readByte();openWin(XueSeTips,"xs_zycs_pz"+e)},e.prototype.sendXueSeData=function(){this.sendBase(71)},e.prototype.patchXueSeData=function(t){this.xueSeModel.parser(t),RpFun.showXueSeRedPoint(PCode.UPD)},e.prototype.onShowRechargeWinXuese=function(){RechargeActSys.ins().firstRechargeData.isRecharge()||this.fubenConfig.group!=FbGroup.XueSe||2!=this.xueSeModel.jinruCount||openWin(RechargeWin)},e.prototype.sendXueSeInto=function(){this.sendBase(72)},e.prototype.patchXueSeDataTimer=function(t){t.readBoolean();this.xueSeModel.SweepEndTick=Timer.ins().getTimer()+1e3*t.readInt(),RpFun.showXueSeRedPoint(PCode.UPD)},e.prototype.doXueSeTime=function(t){if(this.xueSeModel.countDownType=t.readShort(),this.xueSeModel.countDown=t.readShort(),this.xueSeModel.countDown=Timer.ins().getTimer()+1e3*this.xueSeModel.countDown,1==this.xueSeModel.countDownType){var i=(e.ins().xueSeModel.countDown-Timer.ins().getTimer())/1e3;i>=0&&openWin(CountDownWin,i)}this.patchXueSeMapUpdate(),RpFun.showXueSeRedPoint(PCode.UPD)},e.prototype.doXueSeUserCount=function(t){this.xueSeModel.userCount=t.readShort(),this.patchXueSeMapUpdate()},e.prototype.patchXueSeDeFeng=function(t){this.xueSeModel.score=t.readInt()},e.prototype.sendXueSeGuWu=function(t){var e=this.getBytes(76);e.writeShort(t),this.send(e)},e.prototype.patchXueSeGuWu=function(t){this.doGuwu(this.xueSeModel,t)},e.prototype.sendXueSeBugCount=function(){this.sendBase(77)},e.prototype.doXueSeTaskState=function(t){var i=t.readInt();if(1==i){var n=Cfg.getConfig(ScenesConfig,e.ins().mapId).npcPos[0];LogicSys.ins().centerEntity.AI.startfindNpc(n)}},e.prototype.sendXueSeTaskCommit=function(){this.sendBase(79)},e.prototype.patchXueSeMapUpdate=function(){},e.prototype.patchEquipBossData=function(t){this.equipBossModel.parser(t),RpFun.showEquipBossRedPoint()},e.prototype.sendEquipBossFight=function(t){var e=this.getBytes(82);e.writeInt(t),this.send(e)},e.prototype.sendEquipBossOneKey=function(){var t=this.getBytes(83);this.send(t)},e.prototype.patchEquipBossOneKey=function(t){},e.prototype.patchEquipBossInfoUpdate=function(t){for(var e=t.readShort(),i=0;e>i;i++)this.equipBossModel.parserInfoBoss(t);RpFun.showEquipBossRedPoint()},Object.defineProperty(e.prototype,"surplusTime",{get:function(){var t=this.commonEndTick-Timer.ins().getTimer();return Math.max(Math.floor(t/1e3),0)},enumerable:!0,configurable:!0}),e.prototype.getFbModelDailyByFbGroup=function(t){for(var e=0,i=this.fbModels;e<i.length;e++){var n=i[e];if(t==n.fbGroup)return n}return null},e.prototype.isFirstAll=function(){for(var t=!1,e=0,i=this.fbModels;e<i.length;e++){var n=i[e];if(n.isOpen&&n.useCount>0&&n.isFirstChallengeSuccess){t=!0;break}}return t},e.prototype.isCanYJTZ=function(){for(var t=!1,e=0,i=this.fbModels;e<i.length;e++){var n=i[e];if(n.isOpen&&n.useCount>0&&n.isFirstChallengeSuccess){t=!0;break}}return t},e.prototype.isCanYJSD=function(){for(var t=!1,e=0,i=this.fbModels;e<i.length;e++){var n=i[e];if(n.isOpen&&n.useCount<1&&n.saodangCount>0){t=!0;break}}return t},e.prototype.isYJSDConsume=function(){for(var t=0,e=0,i=this.fbModels;e<i.length;e++){var n=i[e];n.isOpen&&n.useCount<1&&(t+=n.getSaoDangConsumeAll())}return t},e.prototype.patchRedFortInfo=function(t){this.redFort.parser(t)},e.prototype.sendRedFortEnter=function(){this.sendBase(112)},e.prototype.patchRedFortEnter=function(t){var e=t.readBoolean();return e?void closeWin(JJCWin):void showtipsFail(Lang.fb_str274)},e.prototype.patchRedFortKill=function(t){this.redFort.parserFloor(t)},e.prototype.sendRedFortRevive=function(){this.sendBase(114)},e.prototype.patchRedFortRevive=function(t){var e=1e3*t.readInt()+Timer.ins().getEgretTimer();openWin(RedFortDieWin,e)},e.prototype.sendRedFortNextFloor=function(){this.sendBase(115)},e.prototype.patchRedFortResult=function(t){var e=new RedFortResultData;e.parser(t),openWin(RedFortResultWin,e)},e.prototype.patchRedFortScore=function(t){var e=t.readUnsignedByte(),i=t.readInt(),n=this.redFort.score;if(this.redFort.score=i,0!=n&&i>n){var a=i-n;this.patchRedFortScoreAdd(e,a)}},e.prototype.sendRedFortDabiaoReward=function(t){var e=this.getBytes(118);e.writeByte(t),this.send(e)},e.prototype.patchRedFortDabiaoReward=function(t){this.redFort.parserFortDabiaoReward(t)},e.prototype.sendRedFortLastRank=function(){this.sendBase(119)},e.prototype.patchRedFortLastRank=function(t){this.redFort.parserRedFortLastRank(t)},e.prototype.patchRedFortScoreAdd=function(t,e){return[t,e]},e.prototype.sendBossHomeInfo=function(){this.sendBase(121),RpFun.showBossHomeRedPoint()},e.prototype.patchBossHomeInfo=function(t){this.bossHomeModel.cdTick=1e3*t.readShort()+Timer.ins().getTimer(),RpFun.showBossHomeRedPoint()},e.prototype.sendBossHomeListInfo=function(){this.sendBase(122)},e.prototype.patchBossHomeListInfo=function(t){this.bossHomeModel.parser(t),RpFun.showBossHomeRedPoint()},e.prototype.sendBossHomeRemind=function(t,e){var i=this.getBytes(123);i.writeShort(t+1),i.writeBoolean(e),this.send(i)},e.prototype.sendBossHomeFight=function(t){var e=this.getBytes(124);e.writeShort(t),this.send(e)},e.prototype.patchBossHomeHpChange=function(t){var e=t.readInt(),i=this.bossHomeModel.getBossInfoByBossId(e);i?i.hpPecent=t.readShort():console.log("53-125 boss血量更新:"+e+"数据不存在"),RpFun.showBossHomeRedPoint()},e.prototype.patchBossHomeBelongerChange=function(t){this.bossHomeModel.parserBelonger(t)},e.prototype.patchBossHomeAtkerList=function(t){this.bossHomeModel.parserAtkerList(t)},e.prototype.sendBossHomeRelive=function(){this.sendBase(129)},e.prototype.patchReliveCd=function(t){var i=this,n=new ReliveData,a=t.readShort();n.endTick=1e3*a+Timer.ins().getTimer();var o=t.readDouble(),s=LogicSys.ins().getEntityByHandle(o);s&&(n.killerName=s.getName()),0!=a&&(n.okFunc=function(){var t=Cfg.getConfig(BosshomeCommonConfig);if(t.rebornPrice>Actor.ins().getCurrency(CurType.yb))showtipsFail(Lang.fb_str239.replace("$yb$",""+t.rebornPrice));else{var n=Lang.fb_str240.replace("$yb$",""+StrUtil.addColor(t.rebornPrice,16751375)),a=new PopupData(n);a.setFunction(i,function(){e.ins().sendBossHomeRelive(),closeWin(ReliveWin)}),openWin(CommonCheckTipsWin,a,"bossHome")}},openWin(ReliveWin,n)),this.bossHomeModel.resetAtkMeList(),RpFun.showBossHomeRedPoint()},e.prototype.patchBossHomeAward=function(t){var e=new FbResultBossHomeData;e.isBelonger=t.readUnsignedByte(),e.belongerName=t.readString(),e.belongerJob=t.readUnsignedByte(),e.belongerSex=t.readByte();for(var i=t.readShort(),n=0;i>n;n++){var a=new ItemDataReward;a.parser(t),e.rewardItem.push(a)}openWin(ResultWinBossHome,e)},e.prototype.patchZhuZaiFubenData=function(t){this.zhuzaiMode.parser(t),RpFun.showZhuZaiRedPoint(PCode.UPD)},e.prototype.sendZhuZaiChallenge=function(){this.sendBase(172)},e.prototype.patchZhuZaiResult=function(t){var e=new FbResultZhuZaiData;e.parser(t),openWin(ResultWinZhuZai,e)},e.prototype.patchZhuZaiStartLuckDraw=function(t){var i=t.readInt();openWin(GuildWarLuckDrawWin,i,10,function(){e.ins().sendZhuZaiDice()})},e.prototype.sendZhuZaiDice=function(){this.sendBase(175)},e.prototype.patchZhuZaiDiceResult=function(t){this.zhuzaiMode.dicePoint=t.readShort();var e=getWin(GuildWarLuckDrawWin);e&&e.setMyNum(this.zhuzaiMode.dicePoint)},e.prototype.patchZhuZaiLuckDrawResult=function(t){this.zhuzaiMode.prizeDiceData.parser(t);var e=this.zhuzaiMode.prizeDiceData.name,i=this.zhuzaiMode.prizeDiceData.point,n=getWin(GuildWarLuckDrawWin);n&&n.setMaxNum(i,e)},e.prototype.sendZhuZaiHurtRank=function(t){var e=this.getBytes(177);e.writeInt(t),this.send(e)},e.prototype.patchZhuZaiHurtRank=function(t){for(var e=(t.readInt(),t.readShort()),i=[],n=0;e>n;n++){var a=new ZhuZaiHurtRankData;a.parser(t),i.push(a)}openWin(ZhuZaiDamageWin,i)},e.prototype.sendZhuZaiReward=function(t,e){var i=this.getBytes(178);i.writeByte(t),i.writeByte(e),this.send(i)},e.prototype.patchZhuZaiReward=function(t){var e=t.readInt(),i=[];i.length=this.zhuzaiMode.zhuZaiRewards.length,MathUtil.writeIntToArray(e,i,1);for(var n=0;n<i.length;n++)this.zhuzaiMode.zhuZaiRewards[n].setStates(i[n])},e.prototype.patchZhuZaiMyHurt=function(t){var e=(t.readByte(),t.readDouble());this.zhuzaiMode.myHurt=e},e.prototype.sendBraveInfo=function(){this.sendBase(201)},e.prototype.patchBraveInfo=function(t){this.braveModel.parserInfo(t),RpFun.showBraveRedPoint(PCode.UPD)},e.prototype.sendBraveListInfo=function(){this.sendBase(202)},e.prototype.patchBraveListInfo=function(t){this.braveModel.parser(t)},e.prototype.sendBraveRemind=function(t,e){var i=this.getBytes(203);i.writeShort(t+1),i.writeBoolean(e),this.send(i)},e.prototype.sendBraveFight=function(t){var e=this.getBytes(204);e.writeShort(t),this.send(e)},e.prototype.patchBraveHpChange=function(t){var i=t.readInt(),n=this.braveModel.getBossInfoByBossId(i);if(n){if(n.hpPecent=t.readShort(),n.reliveTick=1e3*t.readInt()+Timer.ins().getTimer(),!n.isDie&&GFunc.isSysOpen(341)&&n.isRemind&&this.braveModel.getCount()>0&&0==n.chaoguoLevel&&Actor.ins().zsId>=n.config.zslevel){var a=getWin(MainWin).com_ext;a.showBossRemind(Lang.brave_str0,n.monsterName,GFunc.getZSNameBydb(n.getLv),n.monsterHead,function(){e.ins().sendBraveFight(n.id)},ReliveType.Boss)}}else console.log("53-145 boss血量更新:"+i+"数据不存在");return i},e.prototype.patchBraveResult=function(t){var e=new FbResultYongZheData;e.parser(t),openWin(ResultWinBossHome,e)},e.prototype.sendBravebuyCount=function(){var t=this.getBytes(207);this.send(t)},e.prototype.isShowFuBenCurrency=function(t){switch(t){case FbGroup.Exp:case FbGroup.Emo:case FbGroup.XueSe:case FbGroup.Gold:case FbGroup.Mojing:case FbGroup.Qizhi:return!0}return!1},e.prototype.getFubenCurrency=function(t){switch(t){case FbGroup.Exp:case FbGroup.Emo:case FbGroup.XueSe:return Cfg.getItemCfg(CurType.exp).getName();case FbGroup.Gold:return Cfg.getItemCfg(CurType.gold).getName();case FbGroup.Mojing:return Cfg.getItemCfg(CurType.mojing).getName();case FbGroup.Qizhi:return Cfg.getItemCfg(Cfg.getConfig(EnumConfig).Item_MOZHENSUIPIAN).getName()}},e.prototype.getMapXiaoLv=function(t){var e=0,i=0,n=Actor.ins().attrData,a=(n.getAtt(AttrType.atAtkMin)+n.getAtt(AttrType.atAtkMax))/2,o=n.getAtt(AttrType.atAtkExtra),s=n.getAtt(AttrType.atDamagePer),r=2*t.standardDef;i=a>r?a-t.standardDef:.6*a-.2*t.standardDef,i=(2*i+o)*(1+s/1e4),e+=i;var u=Math.ceil(t.standardHp/e),h=60/u*t.standardExp;return h},e.prototype.patchFubenBelongerChange=function(t){this.guiShuTypeFuBenModel.parserBelonger(t)},e.prototype.patchFuBenAtkerList=function(t){this.guiShuTypeFuBenModel.parserAtkerList(t)},e.prototype.patchFuBenDaoJiShi=function(t){var e=t.readInt(),i=t.readInt();switch(e){case FbGroup.TianTi:case FbGroup.QiyuEvent5:openWin(CountDownWin,i,CountDownWin.TYPE_JJC);break;case 999:openWin(CountDownWin,i,CountDownWin.TYPE_FB)}},e.prototype.patchShowGuwuPower=function(t){var e=t.readDouble();openWin(PowerUpWin,Actor.ins().power,Actor.ins().power+e)},Object.defineProperty(e.prototype,"guWuData",{get:function(){return this._guWuData||(this._guWuData=new GuWuData),this._guWuData},enumerable:!0,configurable:!0}),e.prototype.sendShenDianGoToFuben=function(t){void 0===t&&(t=0);var e=this.getBytes(0);return e.writeUnsignedInt(t),e},e.prototype.patchShenDianGoToFuben=function(t){var e=t.readByte(),i=Lang.common_ShenDianZuDui,n=i[e];""!=n&&showTipsWarn(n),4==e&&closeWin(FuBenWin)},e.prototype.sendShenDianYaoQing=function(t){var e=this.getBytes(1);return e.writeShort(t),1==t?this.shendianData.yaoqingtimer=Timer.ins().getTimer()+1e4:this.shendianData.yaoqingtimerGuild=Timer.ins().getTimer()+1e4,this.shendianData.isfaGuoYoaQing=!0,e},e.prototype.patchShenDianYaoQing=function(t){var e,i=t.readByte();e=2==i?ChatFactory.createData(ChatType.Guild,ChatSubType.shenhunShenDian):ChatFactory.createData(ChatType.KuaFu,ChatSubType.shenhunShenDian),e.parserMessage(t);var n=Cfg.getConfig(ShenghunFubenConfig,CondType.Equal,ShenghunFubenConfig.fbId,e.fbId),a=Cfg.getConfig(FubenConfig,n.fbId),o=StrUtil.addColor(GFunc.getZSNameBydb(n.zslevel)+" "+a.name,16751375);e.setContent(Lang.fb_str357.replace("$level$",o.toString()).replace("$desc$",StrUtil.addColor(StrUtil.addUnderLine(Lang.guild_str96),5949490))),ChatSys.ins().addMsg(e)},e.prototype.patchShenDianFbData=function(t){if(this.shendianData.parser(t),this.shendianData.shuaguaiTime>0&&this.shendianData.boshu<Cfg.getConfig(ShenghunCommonConfig).monstermaxcount){var e=Cfg.getConfig(ShenghunFubenConfig,CondType.Equal,ShenghunFubenConfig.fbId,this.shendianData.fbId),i=0==this.shendianData.boshu?this.shendianData.boshu:this.shendianData.boshu-1,n=e.content[i];openWin(ShenDianZuZuiTimeWin,""+n,this.shendianData._shuaguaiTime)}},e.prototype.sendShenDianGuWu=function(t){var e=this.getBytes(3);return e.writeByte(t),e},e.prototype.patchShenDianGuWu=function(t){var e=this.shendianData,i=e.guwuAttrData.atk;e.guwuAttrData.atk=t.readInt();var n=t.readByte();if(e.guwuCount=t.readByte(),!(e.guwuCount>0)){var a=Cfg.getConfig(ShenghunFubenConfig,CondType.Equal,ShenghunFubenConfig.fbId,e.fbId);showtipsSuc(Lang.fb_str272);var o;o=1==n?a.goldSp[0]:a.diamondSp[0],i!=e.guwuAttrData.atk&&this.patchMoneyChange(1,o)}},e.prototype.patchShenDianZuDuiTime=function(t){var e=t.readShort();this.shendianData._zuduiTime=Timer.ins().getTimer()+1e3*e;var i=1==t.readByte();this.shendianData.zuduiTime>0&&(this.shendianData.state=0,openWin(ShenDianZuZuiTimeWin,Lang.mol_str8+":$s$",this.shendianData._zuduiTime),!this.shendianData.isfaGuoYoaQing&&i&&this.shendianData.updateTimes(Cfg.getConfig(ShenghunCommonConfig).yaoqingshowtimer,this.shendianData))},e.prototype.patchShenDianData=function(t){this.shendianData.parser1(t),RpFun.showShenDianRedPoint()},e.prototype.patchShenDianResult=function(t){var e=new FbResultShenDianData;e.parser(t),openWin(ShenDianResultWin,e)},e.prototype.patchShenDianStarTime=function(t){var e=t.readShort();this.shendianData.state=1,openWin(CountDownWin,e),closeWin(ShenDianZuZuiTimeWin)},e.prototype.sendShenDianBuyCount=function(){var t=this.getBytes(8);return t},e.prototype.patchShenDianShuoHua=function(t){var e=t.readByte(),i=t.readDouble(),n=LogicSys.ins().getEntityByHandle(i);if(n){var a=Cfg.getConfig(ShenghunNpcConfig,e);n.setBubble(a.talk,a.keeptime)}},e.prototype.patchShenDianGotoFubenData=function(t){this.shendianData.parserGotoFuben(t)},e.prototype.sendMoLongGoToFuben=function(t){void 0===t&&(t=0);var e=this.getBytes(20);return e.writeUnsignedInt(t),e},e.prototype.patchMoLongGoToFuben=function(t){var e=t.readByte(),i=["","无法加入自己的队伍","队伍已解散","副本已开启，无法加入队伍",""][e];""!=i&&showTipsWarn(i)},e.prototype.sendMoLongYaoQing=function(t){var e=this.getBytes(21);return e.writeShort(t),1==t?this.molongData.yaoqingtimer=Timer.ins().getTimer()+1e4:this.molongData.yaoqingtimerGuild=Timer.ins().getTimer()+1e4,this.molongData.isfaGuoYoaQing=!0,e},e.prototype.patchMoLongYaoQing=function(t){var e,i=t.readByte();e=2==i?ChatFactory.createData(ChatType.Guild,ChatSubType.MoLong):ChatFactory.createData(ChatType.KuaFu,ChatSubType.MoLong),e.parserMessage(t);var n=Cfg.getConfig(MolongFubenConfig,CondType.Equal,MolongFubenConfig.fbId,e.fbId),a=Cfg.getConfig(FubenConfig,n.fbId),o=StrUtil.addColor(GFunc.getZSNameBydb(n.zslevel)+" "+a.name,16751375);e.setContent("正前往"+o+"，请求高手支援"+StrUtil.addColor(StrUtil.addUnderLine(Lang.guild_str96),5949490)),ChatSys.ins().addMsg(e)},e.prototype.sendMoLongGuWu=function(t){var e=this.getBytes(22);return e.writeByte(t),e},e.prototype.patchMoLongGuWu=function(t){var e=this.molongData,i=e.guwuAttrData.atk;e.guwuAttrData.atk=t.readInt();var n=t.readByte();if(e.guwuCount=t.readByte(),!(e.guwuCount>0)){var a=Cfg.getConfig(MolongFubenConfig,CondType.Equal,MolongFubenConfig.fbId,e.fbId);showtipsSuc(Lang.fb_str272);var o;o=1==n?a.goldSp[0]:a.diamondSp[0],i!=e.guwuAttrData.atk&&this.patchMoneyChange(1,o)}},e.prototype.sendMoLongBuyCount=function(){var t=this.getBytes(23);return t},e.prototype.patchMoLongData=function(t){this.molongData.parser1(t),RpFun.showMoLongRedPoint()},e.prototype.patchMoLongFbData=function(t){this.molongData.parser(t)},e.prototype.patchMoLongResult=function(t){var e=new FbResultMoLongData;e.parser(t),console.log("87-25：-------------------"),openWin(MoLongResultWin,e)},e.prototype.patchMoLongZuDuiTime=function(t){this.molongData._zuduiTime=Timer.ins().getTimer()+1e3*t.readShort();var e=1==t.readByte();this.molongData.zuduiTime>0&&(this.molongData.state=0,openWin(MoLongZuZuiTimeWin,"等待队友加入中:$s$",this.molongData._zuduiTime),0==this.molongData.isfaGuoYoaQing&&e&&Timer.ins()["do"](Cfg.getConfig(MolongCommonConfig).yaoqingshowtimer,1e3,1,this.molongData.openYaoQingWin,this.molongData))},e.prototype.patchMoLongStarTime=function(t){var e=t.readShort();this.molongData.state=1,openWin(CountDownWin,e),closeWin(MoLongZuZuiTimeWin)},e.prototype.patchMoLongGotoFubenData=function(t){this.molongData.parserGotoFuben(t)},e.prototype.sendWanmoFight=function(){var t=this.getBytes(41);return t},e.prototype.patchWanmoInfo=function(t){this.wanmoModel.fbId=t.readInt(),this.wanmoModel.count=t.readInt(),this.wanmoModel.resetCount=t.readInt(),this.wanmoModel.status=t.readInt(),this.wanmoModel.maxCount=t.readInt(),this.wanmoModel.status>0&&(this.wanmoModel.SweepEndTick=Timer.ins().getTimer()+1e3*this.wanmoModel.status),this.wanmoModel.isResetFree=t.readBoolean(),this.wanmoModel.isKuaiSu=1==t.readByte(),this.wanmoModel.minGuanQiaReward.parser(t),this.wanmoModel.minGuanQiaReward.curGuanQia=this.wanmoModel.fbId,this.wanmoModel.maxGuanQiaReward.parser(t),this.wanmoModel.maxGuanQiaReward.curGuanQia=this.wanmoModel.fbId,RpFun.showWanMoSDRedPoint(PCode.UPD),RpFun.showWanMoTZRedPoint(PCode.UPD),RpFun.showActRp(45),RpFun.showActRp(303)},e.prototype.sendWanmoReset=function(){var t=this.getBytes();return t},e.prototype.sendWanmoSweep=function(){var t=this.getBytes();return t},e.prototype.sendWanmoKuaiSu=function(){var t=this.getBytes();return t},e.prototype.sendWanmoData=function(){var t=this.getBytes();return t},e.prototype.sendWanmoGuanQiaReward=function(t){var e=this.getBytes(46);return e.writeByte(t),e},e.prototype.patchWanmoGuanQiaReward=function(t){this.wanmoModel.minGuanQiaReward.parser(t),this.wanmoModel.minGuanQiaReward.curGuanQia=this.wanmoModel.fbId,this.wanmoModel.maxGuanQiaReward.parser(t),this.wanmoModel.maxGuanQiaReward.curGuanQia=this.wanmoModel.fbId,RpFun.showWanMoTZRedPoint(PCode.UPD)
},e.prototype.patchWanmoKuaiSu=function(t){for(var e=t.readShort(),i=t.readShort(),n=i-e+1,a=t.readByte(),o=[],s=n>10,r=(new ItemDataReward,0),u=0;a>u;u++){var h=new WanMoKuaiSuReward;h.index=r,s&&u>4?h.ceng=i-9+u:h.ceng=e+u,h.type=a==u+1?3:1;var l=t.readByte();if(s&&5==u){var p=new WanMoKuaiSuReward;p.type=2,r++,p.index=r,o.push(p)}for(var c=0;l>c;c++){var d=new ItemDataReward;d.parser2(t),h.reward.push(d)}r++,o.push(h)}openWin(WanMoKuaiSuResultWin,o)},e.prototype.sendLiXian=function(t){var e=this.getBytes();return e.writeShort(t),this.isReward=!0,e},e.prototype.doLiXianUpdate=function(t){this.liXianData.parser(t),this.isReward||openWin(LiXianWin)},e.prototype.doYongZheChallenge=function(){var t=Cfg.getConfigLength(YongzheFubenConfig);if(t<this.yongZheModel.floorId)return void showtipsFail(Lang.fb_str358);var e=Cfg.getConfig(YongzheFubenConfig,this.yongZheModel.floorId);if(e.zslevel>Actor.ins().zsId){var i=Cfg.getConfig(ZhuanShengLevelConfig,e.zslevel);return void showtipsFail(Lang.fb_str359.replace("$zslevel$",i.name))}WinMgr.ins().closeAllWin(),this.sendYongZheChallenge()},e.prototype.sendYongZheChallenge=function(){var t=this.getBytes(61);return t},e.prototype.patchYongZheInfo=function(t){this.yongZheModel.parser(t),RpFun.showYongZheRewardRedPoint(),RpFun.showYongZheShopRedPoint()},e.prototype.sendYongZheReceiveReward=function(t,e){var i=this.getBytes(62);return i.writeByte(t),i.writeShort(e),i},e.prototype.patchYongZheReceiveReward=function(t){var e=t.readByte(),i=t.readShort(),n=t.readByte(),a=this.yongZheModel;return 1==e?a.gqStates[i-1]=n:a.firstDatas[i-1].setState(n),RpFun.showYongZheRewardRedPoint(),e},e.prototype.patchYongZheFirstFloor=function(t){this.yongZheModel.firstFloor=t.readShort(),RpFun.showYongZheRewardRedPoint()},e.prototype.sendYongZheFirstPlayInfo=function(){var t=this.getBytes();return t},e.prototype.patchYongZheFirstPlayInfo=function(t){this.yongZheModel.updateFirstPlayName(t)},e.prototype.patchUpdateYongZheInfo=function(t){this.yongZheModel.floorId=t.readShort(),RpFun.showYongZheRewardRedPoint(),RpFun.showYongZheShopRedPoint()},e.prototype.patchQmdbInfo=function(t){this.qmdbModel.collectionTimes=t.readByte(),GFunc.isInCity()&&0==this.qmdbModel.collectionTimes&&this.qmdbModel.isOpen()&&openWin(QMDBFbGoCityWin),RpFun.showQMDBRedPoint()},e.prototype.patchQmdbActState=function(t){var e=this.qmdbModel.state;this.qmdbModel.updateActState(t);var i=this.qmdbModel.state;if(e!=i){var n=getWin(MainWin);n&&n.updateMianMap()}GFunc.isInCity()&&this.qmdbModel.isClose()&&1==e&&openWin(QMDBFbGoCityWin),RpFun.showQMDBRedPoint()},e.prototype.patchQmdbUpdateReward=function(t){this.qmdbModel.updateReward(t)},e.prototype.sendKlmInfo=function(){this.sendBase(141)},e.prototype.patchKlmInfo=function(t){this.klmModel.patchKlmInfo(t)},e.prototype.sendKlmListInfo=function(){this.sendBase(142)},e.prototype.patchKlmListInfo=function(t){this.klmModel.parser(t),RpFun.showKlmRedPoint(PCode.UPD)},e.prototype.sendKlmRemind=function(t,e){var i=this.getBytes(143);i.writeShort(t),i.writeBoolean(e),this.send(i)},e.prototype.sendKlmFight=function(t){var e=this.getBytes(144);e.writeShort(t),this.send(e)},e.prototype.patchKlmFight=function(t){this.klmModel.patchFight(t)},e.prototype.patchKlmHpChange=function(t){var i=t.readInt(),n=this.klmModel.getBossInfoByBossId(i);if(n){if(n.hpPecent=t.readShort(),!n.isDie&&GFunc.isSysOpen(339)&&n.isRemind&&GFunc.isConsumeEnough(n.config.item)&&Actor.ins().zsId>=n.getLv){var a=getWin(MainWin).com_ext;a.showBossRemind(Lang.hjbd_str18,n.monsterName,GFunc.getZSNameBydb(n.getLv),n.monsterHead,function(){e.ins().sendKlmFight(n.id)},ReliveType.Boss)}}else console.log("53-145 boss血量更新:"+i+"数据不存在");return RpFun.showKlmRedPoint(PCode.UPD),i},e.prototype.sendKlmUpdateHp=function(t){var e=this.getBytes(146);e.writeByte(t),this.send(e)},e.prototype.patchKlmUpdateHp=function(t){this.klmModel.parserUpdateHp(t)},e.prototype.sendKlmReward=function(t,e){var i=this.getBytes(147);i.writeByte(t),i.writeByte(e),this.send(i)},e.prototype.patchKlmReward=function(t){var e=(t.readByte(),t.readInt()),i=[];i.length=this.klmModel.rewards.length,MathUtil.writeIntToArray(e,i,1);for(var n=0;n<i.length;n++)this.klmModel.rewards[n].setStates(i[n])},e.prototype.patchKlmMyHurt=function(t){var e=(t.readByte(),t.readDouble());this.klmModel.myHurt=e},e.prototype.patchKlmAward=function(t){var e=new FbResultKlmData;e.parser(t),openWin(ResultWinKlm,e)},e.prototype.patchKlmKunDunBoss=function(t){this.klmModel.kunDunTick=Timer.ins().getTimer()+1e3*t.readInt(),this.klmModel.kunDunIsShow=t.readBoolean(),RpFun.showKlmKunDunRedPoint(PCode.UPD)},e.prototype.sendKlmKunDunData=function(){this.sendBase(152)},e.prototype.patchKlmKunDunData=function(t){this.klmModel.kunDunMonsterName=t.readString(),this.klmModel.kunDunMonsterHead=t.readString(),this.klmModel.kunDunMonsterModel=t.readShort(),this.klmModel.kunDunValue=t.readInt(),this.klmModel.kunDunMax=t.readInt(),this.klmModel.count=t.readShort(),RpFun.showKlmKunDunRedPoint(PCode.UPD)},e.prototype.sendKlmKunDunFight=function(){this.sendBase(153)},e.prototype.patchKlmKunDunResult=function(t){var e=t.readBoolean(),i=new FbResultKlmKunDunData;i.hurt=t.readDouble(),i.hurtRank=t.readShort(),i.lastName=t.readString();for(var n=t.readShort(),a=0;n>a;a++){var o=new ItemDataReward;o.parser(t),i.lastRewardItem.push(o)}for(var s=t.readShort(),a=0;s>a;a++){var o=new ItemDataReward;o.parser(t),i.rewardItem.push(o)}openWin(ResultWinKlmKunDun,i,e)},e.prototype.getHuoDongList=function(){return this.huogongList||this.createList(),this.huogongList},e.prototype.createList=function(){this.huogongList=[new HuoDongData1,new HuoDongData2,new HuoDongData3,new HuoDongData4,new HuoDongMonterSiegeData]},e}(BaseSys);__reflect(FbSys.prototype,"FbSys");var System;!function(t){t.fubenSys=FbSys.ins.bind(FbSys)}(System||(System={})),window.FbSys=FbSys;var ActivityConfig=function(){function t(){}return t}();__reflect(ActivityConfig.prototype,"ActivityConfig");var ActivityType10Config=function(){function t(){}return t}();__reflect(ActivityType10Config.prototype,"ActivityType10Config");var ActivityType11Config=function(){function t(){}return t}();__reflect(ActivityType11Config.prototype,"ActivityType11Config");var ActivityType12Config=function(){function t(){}return t.group="group",t}();__reflect(ActivityType12Config.prototype,"ActivityType12Config");var ActivityType13Config=function(){function t(){}return t}();__reflect(ActivityType13Config.prototype,"ActivityType13Config");var ActivityType14Config=function(){function t(){}return t}();__reflect(ActivityType14Config.prototype,"ActivityType14Config");var ZhongLiBossPanel=function(t){function e(){var e=t.call(this)||this;return e.redPointHead=[BossWin],e}return __extends(e,t),e.prototype.setSkinName=function(){this.skinName="FuBenPanelEUI"},e.prototype.setTabItem=function(){this.tab.itemRenderer=BaseTabBtn4},e.prototype.open=function(e){void 0===e&&(e=-1);var i=this.getAotuIndex(e);t.prototype.open.call(this,i),this.observeTabRedPoint()},e.getTitle=function(){return"btz_zycs_boss"},e.getTabTitle=function(){return"bqz_zycs_bfbs"},e.panelNames=[MonsterSiegeMainPanel],e}(BaseTabPanel);__reflect(ZhongLiBossPanel.prototype,"ZhongLiBossPanel");var BossAutoChallengeBossHomeData=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.sysId=236,e}return __extends(e,t),e.prototype["goto"]=function(){var t=!1;if(this.isAuto){var e=FbSys.ins().bossHomeModel.getCanChallengeData();if(console.log("boss之家 可挑战数量:"+e.length),e.length>0){var i=e[0];if(i)return t=!0,console.log("boss之家 请求挑战id:"+i.id+" boss名字:"+i.monsterName),FbSys.ins().sendBossHomeFight(i.id),t}}return t},e}(BossAutoChallengeDataBase);__reflect(BossAutoChallengeBossHomeData.prototype,"BossAutoChallengeBossHomeData");var BossAutoChallengeData=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.sysId=234,e}return __extends(e,t),e.prototype["goto"]=function(){var t=!1;if(this.isAuto){var e=FbSys.ins().juewangModel.getCanChallengeData();if(console.log("全民boss 可挑战数量:"+e.length),e.length>0){var i=e[0];if(i)return t=!0,FbSys.ins().sendJueWangFight(i.id),console.log("全民boss 请求挑战id:"+i.id+" boss名字:"+i.monsterName),t}}return t},e}(BossAutoChallengeDataBase);__reflect(BossAutoChallengeData.prototype,"BossAutoChallengeData");var ActivityType15Config=function(){function t(){}return t}();__reflect(ActivityType15Config.prototype,"ActivityType15Config");var BossAutoChallengeKuaFuBossData=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.sysId=235,e}return __extends(e,t),e.prototype["goto"]=function(){var t=!1;if(this.isAuto){var e=KfSys.ins().bossModel.getCanChallengeData();if(console.log("跨服boss 可挑战数量:"+e.length),e.length>0){var i=e[0];if(i)return t=!0,KfSys.ins().sendBossFight(i.index),console.log("跨服boss 请求挑战id:"+i.bossId+" boss名字:"+i.monsterName),t}}return t},e}(BossAutoChallengeDataBase);__reflect(BossAutoChallengeKuaFuBossData.prototype,"BossAutoChallengeKuaFuBossData");var BossAutoChallengeKuaFuBossSdData=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.sysId=307,e}return __extends(e,t),e.prototype["goto"]=function(){var t=!1;if(this.isAuto){var e=KfSys.ins().smsdData.getBossDatasByOpenAndRemind();if(SortUtil.sortOn(e,["floor","showLv"],[SortType.down,SortType.down]),e.length>0&&FbSys.ins().fubenGroupConfig.group!=FbGroup.kfbosssd)for(var i=0;i<e.length;i++){var n=e[i];if(n.getConfig().svip<=Actor.ins().sVipLv)return KfSys.ins().smsdData.atkBossData=n,KfSys.ins().sendSmsdEnter(n.id,0),KfSys.ins().smsdData.isAutoTz=!0,closeWin(BossWin),t;if(n.getConfig().zslv<=Actor.ins().zsId&&GFunc.checkCurrency(CurType.JinZuan,n.getConfig().diamond))return KfSys.ins().smsdData.atkBossData=n,KfSys.ins().sendSmsdEnter(n.id,1),KfSys.ins().smsdData.isAutoTz=!0,closeWin(BossWin),t}}return t},e}(BossAutoChallengeDataBase);__reflect(BossAutoChallengeKuaFuBossSdData.prototype,"BossAutoChallengeKuaFuBossSdData");var BossHomeInfo=function(){function t(){}return t.prototype.parser=function(t){this.id=t.readInt(),this.monsterName=t.readString(),this.monsterHead=t.readString(),this.monsterModel=t.readShort(),this.hpPecent=t.readShort(),this.fighterCount=t.readShort(),this.isFighting=t.readBoolean(),this.isRemind=t.readBoolean()},Object.defineProperty(t.prototype,"isDie",{get:function(){return 0==this.hpPecent},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"isDieNumber",{get:function(){return 0==this.hpPecent?-1:1},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"config",{get:function(){return this._config=this._config||Cfg.getConfig(BosshomeFubenConfig,this.id)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"bossHomeCommonConfig",{get:function(){return this._bossHomeCommonConfig=this._bossHomeCommonConfig||Cfg.getConfig(BosshomeCommonConfig)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"isopen",{get:function(){return Actor.ins().zsId>=this.config.zslevel&&Actor.ins().level>=this.config.level?1:-1},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"getLv",{get:function(){return this.config.level},enumerable:!0,configurable:!0}),t}();__reflect(BossHomeInfo.prototype,"BossHomeInfo");var ActivityType16CommonConfig=function(){function t(){}return t}();__reflect(ActivityType16CommonConfig.prototype,"ActivityType16CommonConfig");var BossHomeFbPanelFace=function(t){function e(){var e=t.call(this)||this;return e.skinName="BossHomeFbPanelFaceEUI",e.initMc(),e}return __extends(e,t),e.prototype.initMc=function(){this.currentState="normal",this.mcHP=GFunc.playUIMovie("boss_xq",43,44,this.groupMc,-1,null),this.mcAtk=GFunc.playUIMovie("boss_j",70,56,this,-1,null)},e.prototype.dataChanged=function(){var t=this.data,e=LogicSys.ins().getCanAtkByMasterHandle(t);if(e){var i=FbSys.ins().guiShuTypeFuBenModel,n=i.belongerMasterHandle==e.masterHandle;n?this.groupImg.addChildAt(this.imgGSZ,0):DisUtil.remove(this.imgGSZ);var a=GuildSys.ins().isSameGuild(e.guildID);if(a?this.groupImg.addChild(this.imgGuild):DisUtil.remove(this.imgGuild),EntityType.isNormalMonster(e.entityType)){this.imgBoss.visible=!0;var o=Cfg.getMonstersConfigNew(e.getCfgId()).head;this.imgBoss.source=ResMgr.getMonsterHead(o),this.groupMc.visible=this.mcAtk.visible=!1}else this.groupMc.visible=this.mcAtk.visible=!0,this.imgBoss.visible=!1;var s=e.getHP(),r=e.getHpMax();this.groupScroller.height=this.groupMc.height*s/r,this.labelName.textFlow=addColorTF(e.getName(),14931902)}},e.prototype.update=function(){this.dataChanged()},e}(BaseItemRender);__reflect(BossHomeFbPanelFace.prototype,"BossHomeFbPanelFace"),window.BossHomeFbPanelFace=BossHomeFbPanelFace;var BossHomeFbPanelFace2=function(t){function e(){var e=t.call(this)||this;return e.skinName="BossHomeFbPanelFace2Skin",e}return __extends(e,t),e.prototype.dataChanged=function(){var t=this.data,e=LogicSys.ins().getCanAtkByMasterHandle(t);if(e){if(e instanceof EntityRole)this.imgFace.source=ResMgr.getHeadIcon(e.data.sex),this.imgFace.visible=!0,this.imgBoss.visible=!1,this.imgShenMo.visible=!1;else if(e instanceof EntityMonster){this.imgFace.visible=!1,this.imgShenMo.visible=!1,this.imgBoss.visible=!0;var i=Cfg.getMonstersConfigNew(e.getCfgId()).head;this.imgBoss.source=ResMgr.getMonsterHead(i)}this.labelName.textFlow=addColorTF(e.getName(),16777215)}},e.prototype.update=function(){this.dataChanged()},e.prototype.playMovie=function(){this.fightingMc||(this.fightingMc=new MC,this.fightingMc.x=72,this.fightingMc.y=50,this.addChild(this.fightingMc)),this.fightingMc.playFile(getEffName("fighting"),-1)},e.prototype.stopMovie=function(){this.fightingMc&&(this.fightingMc.stop(),this.fightingMc.visible=!1)},e}(BaseItemRender);__reflect(BossHomeFbPanelFace2.prototype,"BossHomeFbPanelFace2"),window.BossHomeFbPanelFace2=BossHomeFbPanelFace2;var ActivityType16Config=function(){function t(){}return t}();__reflect(ActivityType16Config.prototype,"ActivityType16Config");var BossHomePanelItem=function(t){function e(){var e=t.call(this)||this;return e.skinName="BossHomePanelItemEUI",e}return __extends(e,t),e.prototype.dataChanged=function(){if(this.data){var t=this.data;this.nameTxt.text=""+t.monsterName,this.updateTime()}},e.prototype.updateTime=function(){this.data;this.updateStatus(),this.updateRedPoint()},e.prototype.updateRedPoint=function(){var t=this.data;t&&(this.redPoint.visible=RpSys.ins().getData(BossWin,BossBenFuPanel,BossHomePanel,e,t.id))},e.prototype.updateStatus=function(){var t=this.data;this.lbDesc.text="",1==t.isopen?t.isDie?this.lbTimer.visible=!0:(this.lbTimer.visible=!1,this.lbDesc.text=Lang.common_str56):(1e4==t.config.zslevel?this.lbDesc.text=""+GFunc.GetLvStrByLv(t.config.level):this.lbDesc.text=""+GFunc.getZSNameBydb(t.config.zslevel),this.lbTimer.visible=!1)},e.prototype.setTime=function(t){this.lbTimer.text=t},e}(BaseItemRender);__reflect(BossHomePanelItem.prototype,"BossHomePanelItem"),window.BossHomePanelItem=BossHomePanelItem;var BossHomeRemindItem=function(t){function e(){var e=t.call(this)||this;return e.skinName="JueWangRemindItemEUI",e}return __extends(e,t),e.prototype.dataChanged=function(){var t=this.data,e=Cfg.getConfig(BosshomeFubenConfig,t.id);this.checkBoxs.visible=e.zslevel<=Actor.ins().zsId,e.zslevel<=Actor.ins().zsId?(this.checkBoxs.visible=e.zslevel<=Actor.ins().zsId,this.checkBoxs.selected=FbSys.ins().bossHomeModel.getBossHomeRemindByIndex(this.itemIndex)):this.checkBoxs.visible=!1,this.txt.visible=!this.checkBoxs.visible,this.checkBoxs.name=t.id-1+"",this.bossName.text=t.monsterName,this.levelShow.textFlow=StrUtil.toTF(GFunc.GetLvStrByLv(e.zslevel))},e}(BaseItemRender);__reflect(BossHomeRemindItem.prototype,"BossHomeRemindItem"),window.BossHomeRemindItem=BossHomeRemindItem;var BossHomeRemindWin=function(t){function e(){return t.call(this)||this}return __extends(e,t),e.prototype.initUI=function(){t.prototype.initUI.call(this),this.layer=LayerMgr.Popup,this.skinName="JueWangRemindWinEUI",this.list0.itemRenderer=BossHomeRemindItem,this.list0.dataProvider=this.listDatas=new eui.ArrayCollection},e.prototype.open=function(){t.prototype.open.call(this),this.addClickE(this,this.onClick);var e=FbSys.ins().bossHomeModel.bossHomeInfos.concat();e=e.sort(this.sort),this.listDatas.source=e},e.prototype.sort=function(t,e){var i=t.id,n=e.id;return n>i?-1:i>n?1:0},e.prototype.onClick=function(t){if(t.target instanceof eui.CheckBox){var e=parseInt(t.target.name);FbSys.ins().bossHomeModel.bossHomeInfos[e].isRemind=!FbSys.ins().bossHomeModel.bossHomeInfos[e].isRemind,FbSys.ins().sendBossHomeRemind(FbSys.ins().bossHomeModel.bossHomeInfos[e].id,FbSys.ins().bossHomeModel.bossHomeInfos[e].isRemind)}},e}(BaseWinSingle);__reflect(BossHomeRemindWin.prototype,"BossHomeRemindWin"),window.BossHomeRemindWin=BossHomeRemindWin;var BossBloodComponent=function(t){function e(){var e=t.call(this)||this;return e._isInit=!1,e.hpBarMovieEndTick=0,e.initUI(),e}return __extends(e,t),e.prototype.initUI=function(){this.skinName="BossBloodComponentSkin",this.setSkinPart("bossBloodComponentBase",new BossBloodComponentBase),this.hpBarDun.visible=!1},e.prototype.open=function(t){this.bossBloodComponentBase.open(t.hp,t.hpMax,t.bloodLength),this.nameTxt.text=t.bossName,this.head.source=t.headSouece,this.lvTxt.text=t.lvStr,this._isInit=!0},Object.defineProperty(e.prototype,"isInit",{get:function(){return this._isInit},enumerable:!0,configurable:!0}),e.prototype.updateHp=function(t){return 0>=t?void(this.visible=!1):void this.bossBloodComponentBase.updateHp(t)},e.prototype.updateDunChange=function(t){var e=t.getTimerTick();if(e>0){egret.Tween.removeTweens(this.hpBarDun);var i=0;this.hpBarMovieEndTick=Timer.ins().getTimer()+1e3*e+i,this.hpBarDun.visible=!0,this.hpBarDun.slideDuration=0,this.hpBarDun.maximum=10*t.max,this.hpBarDun.value=10*(e-i/1e3),this.hpBarDun.validateNow();var n=egret.Tween.get(this.hpBarDun);n.to({value:0},1e3*(e-i/1e3))}else this.hpBarDun.visible=!1},e}(BaseWinSingle);__reflect(BossBloodComponent.prototype,"BossBloodComponent"),window.BossBloodComponent=BossBloodComponent;var BossBloodComponentBase=function(t){function e(){var e=t.call(this)||this;return e.oldRemainPart=0,e.hpImgList=["xt_zycs_k2","xt_zycs_xt3","xt_zycs_xt4","xt_zycs_xt5","xt_zycs_xt6"],e.initUI(),e.GRAYIMG_WIDTH=e.imgHp.width,e}return __extends(e,t),e.prototype.initUI=function(){this.skinName="BossBloodComponentBaseEUI"},e.prototype.open=function(t,e,i){this.curHp=t,this.maxHp=e,this.bloodLength=i},e.prototype.updateHp=function(t){return this.curHp=t,0>=t?void(this.visible=!1):void this.updateBloodProgBar()},e.prototype.updateBloodProgBar=function(){var t=this;this.hpxBmp.text="X"+this.remainPart,this.hpxBmp.visible=this.remainPart>1;var e=this.hpImgList.length;this.imgHp.source=this.hpImgList[(this.remainPart-1)%e],this.hpBg.source=this.remainPart>1?this.hpImgList[(this.remainPart-2)%e]:"",this.label_hp.text=this.curHp+"/"+this.maxHp,this.oldRemainPart!=this.remainPart&&(this.oldRemainPart=this.remainPart,egret.Tween.removeTweens(this.grayImg),this.grayImg.width=this.GRAYIMG_WIDTH);var i=this.curProg*this.GRAYIMG_WIDTH/100;this.imgHp.width=i;var n=egret.Tween.get(this.grayImg);n.to({width:i-3},500).call(function(){0>=i&&(t.grayImg.width=t.GRAYIMG_WIDTH)},this)},e}(BossBloodComponentData);__reflect(BossBloodComponentBase.prototype,"BossBloodComponentBase"),window.BossBloodComponentBase=BossBloodComponentBase;var ActivityType16ViewConfig=function(){function t(){}return t.count="count",t}();__reflect(ActivityType16ViewConfig.prototype,"ActivityType16ViewConfig");var BossBloodData=function(){function t(){this.bossName="",this.bossHead="",this.bossLv=0,this.hpMax=0,this.hp=0,this.playerList=[],this.bloodLength=5,this.bossId=0,this.fbId=0}return t.prototype.parser=function(t){this.bossId=t.readInt(),this.hp=t.readDouble();var e=(t.readDouble(),t.readDouble(),t.readShort());this.playerList.length=e;for(var i=0;e>i;i++)this.playerList[i]=this.playerList[i]||new BossBloodPlayerData,this.playerList[i].parser(t);t.readInt(),this.fbId=FbSys.ins().fbId,this.bossName=t.readString(),this.bossHead=t.readString(),this.bossLv=t.readInt(),this.hpMax=t.readDouble()},Object.defineProperty(t.prototype,"headSouece",{get:function(){return""==this.bossHead?"":ResMgr.getMonsterHead(this.bossHead)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"lvStr",{get:function(){return GFunc.GetLvStrByLv(this.bossLv)},enumerable:!0,configurable:!0}),t.prototype.reset=function(){this.bossHead=this.bossName="",this.hp=this.hpMax=this.bossId=0,this.bossLv=0,this.bloodLength=5},t.prototype.getDesc=function(){var t=Cfg.getConfig(FubenConfig,this.fbId).group,e="";switch(t){case FbGroup.City:e="";break;case FbGroup.GuildBoss:e=Lang.fb_str13;break;default:e=Lang.fb_str15}return e},t}();__reflect(BossBloodData.prototype,"BossBloodData");var BossBloodPlayerData=function(){function t(){}return t.prototype.parser=function(t){this.id=t.readInt(),this.roleName=t.readString(),this.damage=t.readDouble()},Object.defineProperty(t.prototype,"name",{get:function(){var t=this.roleName+":"+GFunc.overLength(this.damage);return t},enumerable:!0,configurable:!0}),t}();__reflect(BossBloodPlayerData.prototype,"BossBloodPlayerData");var BossBloodWin=function(t){function e(){var e=t.call(this)||this;return e.winType=WinType.NeverCloseWin,e}return __extends(e,t),e.prototype.initUI=function(){this.skinName="BossBloodSkin",this.setSkinPart("bossBloodComponent",new BossBloodComponent),this.layer=LayerMgr.Main_Down2,this.listItemReward.itemRenderer=ItemBaseRewardNameBig},e.prototype.open=function(){t.prototype.open.call(this),this.addLsn(FbSys.ins().patchBossBlood,this.onBossBloodUpdate),this.addLsn(FbSys.ins().patchBossHuDun,this.onDunChange),this.addLsn(LogicSys.ins().patchEnterMap,this.updateState),this.bossBloodComponent.open(FbSys.ins().bossBloodData),this.showRewardBtn(),this.onDunChange(),this.updateState()},e.prototype.close=function(){t.prototype.close.call(this),this.bossBloodComponent.close()},e.prototype.updateState=function(){var t=Cfg.getConfig(FubenConfig,FbSys.ins().fbId),e=Cfg.getConfig(FubenGroupConfig,t.group);e.type==GroupType.xianshi?this.currentState="danren":this.currentState="duoren";Cfg.getConfig(FubenGroupConfig,t.group)},e.prototype.onBossBloodUpdate=function(){var t=Cfg.getConfig(FubenConfig,FbSys.ins().fbId);this.bossBloodComponent.visible=t.group!=FbGroup.BossHome,this.bossBloodComponent.visible=t.group!=FbGroup.GuildWarPVE&&t.group!=FbGroup.GuildWarPVP,this.bossBloodComponent.visible&&this.bossBloodComponent.updateHp(FbSys.ins().bossBloodData.hp)},e.prototype.onDunChange=function(){this.bossBloodComponent.updateDunChange(FbSys.ins().bossHuDun)},e.prototype.onClick=function(t){t.currentTarget},e.prototype.showRewardBtn=function(){var t=Cfg.getConfig(FubenConfig,FbSys.ins().fbId);if(this.groupRawead.visible=!1,t.group==FbGroup.JueWang){var e=void 0;e=Cfg.getConfig(EnumConfig).JueWangDanRenFuBenId==FbSys.ins().fbId?Cfg.getConfig(DespairBossConfig,CondType.Equal,DespairBossConfig.fbId,Cfg.getConfig(EnumConfig).JueWangFirstFuBenId):Cfg.getConfig(DespairBossConfig,CondType.Equal,DespairBossConfig.fbId,FbSys.ins().fbId),e&&(this.listItemReward.dataProvider=new eui.ArrayCollection(e.firstReward),this.groupRawead.visible=!0)}},e.prototype.addToParent=function(t){this.addToParentAt(t,0)},e}(BaseWinSingle);__reflect(BossBloodWin.prototype,"BossBloodWin"),window.BossBloodWin=BossBloodWin;var FBDamageData=function(){function t(){this.playerList=[]}return t.prototype.parser=function(t){var e=t.readByte();this.playerList.length=e;for(var i=0;e>i;i++)this.playerList[i]=this.playerList[i]||new BossBloodPlayerData,this.playerList[i].parser(t)},t.prototype.getDesc=function(){var t=Cfg.getConfig(FubenConfig,FbSys.ins().fbId).group,e="";switch(t){case FbGroup.City:e="";break;case FbGroup.GuildBoss:e=Lang.fb_str13;break;default:e=Lang.fb_str15}return e},t}();__reflect(FBDamageData.prototype,"FBDamageData"),window.FBDamageData=FBDamageData;var FbEquipBossModel=function(){function t(){this.count=0}return t.prototype.parser=function(t){this.id=t.readShort(),this.count=t.readShort();var e=t.readInt();this.reliveTick=1e3*e+Timer.ins().getTimer(),this.monsterId=t.readInt(),this.monsterName=t.readString(),this.monsterHead=t.readString(),this.monsterModel=t.readShort()},t.prototype.parserUpdate=function(t){this.count=t.readShort(),this.reliveTick=1e3*t.readInt()+Timer.ins().getTimer()},Object.defineProperty(t.prototype,"isDie",{get:function(){return this.reliveTick-Timer.ins().getTimer()>0},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"isDieNumber",{get:function(){return this.isDie?-1:1},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"config",{get:function(){return this._config=this._config||Cfg.getConfig(ShilianBossConfig,this.id)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"havCount",{get:function(){return this.count>0?1:0},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"getZsLv",{get:function(){return this.config.zsLevel},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"getLv",{get:function(){return this.config.level},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"isopenNumber",{get:function(){return Actor.ins().zsId>=this.config.zsLevel?1:-1},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"isopen",{get:function(){return Actor.ins().zsId>=this.config.zsLevel&&Actor.ins().level>=this.config.level},enumerable:!0,configurable:!0}),t}();__reflect(FbEquipBossModel.prototype,"FbEquipBossModel");var FbGuaJiData=function(){function t(){}return t.prototype.parser=function(t){this.timer=t.readInt(),this.exp=t.readInt(),this.gold=t.readInt(),this.bszb=t.readShort(),this.lszb=t.readShort(),this.tujian=t.readShort()},t}();__reflect(FbGuaJiData.prototype,"FbGuaJiData");var FbLiXianData=function(){function t(){this.timer=0,this.oldLevel=0,this.itemList=[],this.rewardType=0,this.getRewardCount=0}return t.prototype.parser=function(t){this.rewardType=t.readByte(),this.timer=1e3*t.readInt(),this.oldLevel=t.readShort();var e=t.readInt();this.itemList=[];for(var i=0;e>i;i++){var n=new ItemDataReward;n.id=t.readInt(),n.count=t.readDouble(),this.itemList.push(n)}for(var a=t.readInt(),i=0;a>i;i++){var o=t.readInt(),s=t.readInt(),n=new ItemDataReward;n.count=s,n.id=GConst.QualityEquipIds[o],this.itemList.push(n)}this.getRewardCount=t.readByte()},t}();__reflect(FbLiXianData.prototype,"FbLiXianData");var ActivityType17Config=function(){function t(){}return t}();__reflect(ActivityType17Config.prototype,"ActivityType17Config");var FbModelBossHome=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.refreshTick=0,e.bossHomeInfos=[],e.atkMeList=[],e.belongerMasterHandle=0,e.belongerName="",e.belongerJob=0,e.belongerHp=0,e.belongerHpMax=0,e.oldBelongerMasterHandle=0,e.oldBelongerName="",e.cdTick=0,e.reliveTick=0,e}return __extends(e,t),e.prototype.parser=function(t){var e=t.readShort();this.bossHomeInfos.length=e;for(var i=0;e>i;i++){var n=this.bossHomeInfos[i]=this.bossHomeInfos[i]||new BossHomeInfo;n.parser(t)}this.refreshTick=Timer.ins().getTimer()+1e3*t.readInt()},e.prototype.parserAtkerList=function(t){var e=t.readUnsignedInt();this.atkMeList.length=0;for(var i=0;e>i;i++){var n=t.readDouble(),a=LogicSys.ins().getMainRoleByMasterHandle(n);a&&this.atkMeList.push(a.handle)}},e.prototype.parserBelonger=function(t){this.belongerMasterHandle=t.readDouble(),this.oldBelongerMasterHandle=t.readDouble(),this.oldBelongerName=t.readString(),this.belongerName=t.readString(),this.belongerJob=t.readByte(),this.belongerHp=t.readDouble(),this.belongerHpMax=t.readDouble()},e.prototype.resetAtkMeList=function(){this.atkMeList.length=0},e.prototype.resetAll=function(){this.atkMeList.length=0},Object.defineProperty(e.prototype,"leftRefreshTime",{get:function(){return Math.max(0,this.refreshTick-Timer.ins().getTimer())},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"leftCdTime",{get:function(){return Math.max(0,this.cdTick-Timer.ins().getTimer())},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"reliveTime",{get:function(){return Math.max(0,this.reliveTick-Timer.ins().getTimer())},enumerable:!0,configurable:!0}),e.prototype.getBossInfoByBossId=function(t){for(var e=0,i=this.bossHomeInfos;e<i.length;e++){var n=i[e];if(n.id==t)return n}return null},e.prototype.getBossHomeRemindByIndex=function(t){return this.bossHomeInfos[t].isRemind},e.prototype.getCanChallengeData=function(){var t=[];if(this.leftCdTime<=0){var e=FbSys.ins().bossHomeModel.openData().concat();SortUtil.sortOn(e,["getLv"],[SortType.down]);for(var i=Cfg.getConfig(BosshomeCommonConfig),n=i.needitem,a=1,o=BagSys.ins().getItemCount(n),s=(Cfg.getItemCfg(n),0);s<e.length;s++){var r=e[s];1==r.isopen&&!r.isDie&&(o>=a||GFunc.getItemCount(CurType.yb)>=i.needYuanbao||Actor.ins().sVipLv>=i.vip)&&t.push(r)}}return t},e.prototype.openData=function(){for(var t=[],e=0;e<this.bossHomeInfos.length;e++){var i=this.bossHomeInfos[e];1==i.isopen&&t.push(i)}return t},e.prototype.noOpenData=function(){for(var t=[],e=0;e<this.bossHomeInfos.length;e++){var i=this.bossHomeInfos[e];-1==i.isopen&&t.push(i)}return t},e}(FbModelBase);__reflect(FbModelBossHome.prototype,"FbModelBossHome");var FbModelDaily=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.fbGroup=0,e.useCount=0,e.ySaoDangCount=0,e.take=0,e.isFirstChallengeSuccess=!1,e}return __extends(e,t),e.prototype.parser=function(t){this.fbGroup=t.readInt(),this.fbId=t.readInt(),this.useCount=t.readShort(),this.ySaoDangCount=t.readShort(),this.take=t.readInt(),this.isFirstChallengeSuccess=1==t.readByte()},Object.defineProperty(e.prototype,"saodangCount",{get:function(){return VipSys.ins().getCurSVipConfig().dailysaodang-this.ySaoDangCount},enumerable:!0,configurable:!0}),e.prototype.getSaoDangConsume=function(t){void 0===t&&(t=this.ySaoDangCount);var e=t<this.config.moneyCount.length?t:this.config.moneyCount.length-1;return this.config.moneyCount[e]},e.prototype.getSaoDangConsumeAll=function(){var t=0;if(this.saodangCount>0)for(var e=VipSys.ins().getCurSVipConfig().dailysaodang,i=this.ySaoDangCount;e>i;i++)t+=this.getSaoDangConsume(i);return t},Object.defineProperty(e.prototype,"config",{get:function(){return this._config||(this._config=Cfg.getConfig(BaseDailyFubenConfig,this.fbGroup))},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"sort",{get:function(){return this.config.sort},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"canSaodang",{get:function(){return this.saodangCount>0},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"isOpen",{get:function(){return this.config.condition.custom<=FbSys.ins().guajiData.guanId},enumerable:!0,configurable:!0}),e}(FbModelBase);__reflect(FbModelDaily.prototype,"FbModelDaily");var ActivityType18Config=function(){function t(){}return t}();__reflect(ActivityType18Config.prototype,"ActivityType18Config");var FbModelGuaJi=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e._guanId=1,e.helpCount=0,e.assistCount=0,e.isAutoChallenge=!1,e.boCount=0,e.guaJiMaxDatas=[],e.ksgjSdCount=0,e.ksgjBuyCount=0,e.helpCDTick=0,e.isGuanQia=!1,e}return __extends(e,t),Object.defineProperty(e.prototype,"challengeGuanId",{get:function(){return this._guanId},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"guanId",{get:function(){return this._guanId-1},enumerable:!0,configurable:!0}),e.prototype.parserInfo=function(t){this._guanId=t.readShort(),this.helpCount=t.readByte(),this.assistCount=t.readByte(),this.isAutoChallenge=t.readBoolean(),this.boCount=t.readByte(),this.guaJiMaxDatas.length=0;for(var e=t.readShort(),i=Cfg.getMaxWorldMapId(),n=1;i>=n;n++){var a=new GuaJiMaxData(Cfg.getWorldMapConfig(n));e>=n?a.state=1:a.config.custom<=this.guanId?a.state=2:a.state=0,this.guaJiMaxDatas.push(a)}this.ksgjSdCount=t.readByte(),this.ksgjBuyCount=t.readByte()
},e.prototype.parserChallenge=function(t){this._guanId=t.readShort();for(var e=0,i=this.guaJiMaxDatas;e<i.length;e++){var n=i[e];0==n.state&&n.config.custom<=this.guanId&&(n.state=2)}},e.prototype.parserGuaJiHelp=function(t){this.helpCount=t.readByte(),this._guanId=t.readShort()},e.prototype.parserGuaJiKsgjInfo=function(t){this.ksgjSdCount=t.readByte(),this.ksgjBuyCount=t.readByte()},e.prototype.parserGuaJiKsgjBuy=function(t){this.ksgjBuyCount=t.readByte(),this.ksgjSdCount=t.readByte()},e.prototype.parserGuaJiReward=function(t){var e=this.getGuaJiMaxDataById(t.readShort());e.state=1},e.prototype.getKsgjSdCount=function(){return Math.max(this.getKsgjSdCountAll()-this.ksgjSdCount,0)},e.prototype.getKsgjSdCountAll=function(){return Cfg.getGuajiConstConfig().quickCount+this.ksgjBuyCount},e.prototype.getKsgjSdConsume=function(){var t=Cfg.getGuajiConstConfig().moneyCount;return t[this.ksgjSdCount<t.length?this.ksgjSdCount:t.length-1]},e.prototype.getKsgjBuyCount=function(){return Math.max(VipSys.ins().getCurSVipConfig().quickfight-this.ksgjBuyCount,0)},e.prototype.getKsgjBuyConsume=function(){var t=Cfg.getGuajiConstConfig().buyCount;return t[this.ksgjBuyCount<t.length?this.ksgjBuyCount:t.length-1]},e.prototype.getHelpCD=function(){var t=Math.max(this.helpCDTick-Timer.ins().getTimer(),0);return t>0&&(t=Math.ceil(t/1e3)),t},e.prototype.updateHelpCD=function(){var t=Math.max(this.helpCDTick-Timer.ins().getTimer(),0);0==t&&(this.helpCDTick=Timer.ins().getTimer()+60*Cfg.getGuajiConstConfig().reqcdtime*1e3)},e.prototype.getHelpCount=function(){return Math.max(Cfg.getGuajiConstConfig().dailyreqcount-this.helpCount,0)},e.prototype.getAssistCount=function(){return Math.max(Cfg.getGuajiConstConfig().dailyhelpcount-this.assistCount,0)},e.prototype.getConfig=function(){return this.config&&this.config.custom==this._guanId||(this.config=Cfg.getGuajiFubenConfigById(this._guanId)),this.config},e.prototype.isChallenge=function(){return this.boCount>=this.getConfig().waves},e.prototype.isTongGuan=function(){return this.guanId>=Cfg.getGuajiConstConfig().maxGuanId},e.prototype.getGuaJiMaxDataById=function(t){for(var e=0,i=this.guaJiMaxDatas;e<i.length;e++){var n=i[e];if(n.id==t)return n}return null},e.prototype.getGuaJiMaxData=function(){return this.guaJiMaxDatas.sort(this.sortFun),this.guaJiMaxDatas[0]},e.prototype.sortFun=function(t,e){return 2!=t.state&&2==e.state?1:2==t.state&&2!=e.state?-1:0!=t.state&&0==e.state?1:0==t.state&&0!=e.state?-1:t.id>e.id?1:t.id<e.id?-1:0},e.prototype.resetAll=function(){this.isGuanQia=!1},e}(FbModelBase);__reflect(FbModelGuaJi.prototype,"FbModelGuaJi");var FbModelQuanMin=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.bossInfo=[],e}return __extends(e,t),e.prototype.parser=function(t){this.challengeCount=t.readShort(),this.restoreTime=1e3*t.readShort()+Timer.ins().getTimer(),this.cdTime=1e3*t.readShort()+Timer.ins().getTimer()},e.prototype.getJueWangRemindByIndex=function(t){return this.bossInfo[t].isRemind},e.prototype.setRemindByIndex=function(t,e){return this.bossInfo[t-1].isRemind=e},e.prototype.getTimeCDTick=function(){return(FbSys.ins().juewangModel.cdTime-Timer.ins().getEgretTimer())/1e3},e.prototype.getCurBossIndex=function(){var t=this.openData();return t.length-1},e.prototype.getCanChallengeData=function(){var t=[];if(this.challengeCount>0)for(var e=0;e<this.bossInfo.length;e++){var i=this.bossInfo[e];i.isRemind&&i.isopen&&!i.isDie&&(0==i.isFighting||this.getTimeCDTick()<=0)&&t.push(i)}return SortUtil.sortOn(t,["getLv"],[SortType.down]),t},e.prototype.openData=function(){for(var t=[],e=0;e<this.bossInfo.length;e++){var i=this.bossInfo[e];i.isopen&&t.push(i)}return t},e.prototype.noOpenData=function(){for(var t=[],e=0;e<this.bossInfo.length;e++){var i=this.bossInfo[e];i.isopen||t.push(i)}return t},e}(FbModelBase);__reflect(FbModelQuanMin.prototype,"FbModelQuanMin");var FbModelMoLong=function(t){function e(){var e=t.call(this)||this;return e.boshu=0,e.jibaiCount=0,e.subRoleDatas=[],e._shuaguaiTime=0,e.guwuAttrData=new GuwuAttrData,e.guwuCount=0,e.count=0,e.buyCount=0,e.zhuzhanCount=0,e._zuduiTime=0,e.shuohuaId=0,e.rewardType=1,e.yaoqingtimer=0,e.yaoqingtimerGuild=0,e.isfaGuoYoaQing=!1,e.state=0,e.fbId=1,e}return __extends(e,t),e.prototype.parser=function(t){this.boshu=t.readByte(),this.jibaiCount=t.readInt();var e=t.readByte();this.subRoleDatas.length=0;for(var i=0,n=2,a=0;e>a;a++){var o=new SubRoleData;o.index=a,o.parser(t),i+=o.hurt,o.index=o.playName==Actor.ins().myName?1:n++,this.subRoleDatas.push(o)}for(var a=0;a<this.subRoleDatas.length;a++)this.subRoleDatas[a].sumHurt=i},e.prototype.parser1=function(t){this.count=t.readByte(),this.buyCount=t.readByte(),this.zhuzhanCount=t.readByte()},e.prototype.parserGotoFuben=function(t){this.rewardType=t.readByte();var e=t.readShort();this.fbId=t.readInt(),-1!=e?this.SweepEndTick=Timer.ins().getTimer()+1e3*e:this.SweepEndTick=-1},Object.defineProperty(e.prototype,"leftCount",{get:function(){return Cfg.getConfig(MolongCommonConfig).fightcount+this.buyCount-this.count},enumerable:!0,configurable:!0}),e.prototype.isMax=function(){var t=Cfg.getConfig(MolongFubenConfig,CondType.LessEqual,MolongFubenConfig.zslevel,Actor.ins().zsId);return t.id>=Cfg.getMaxConfig(MolongFubenConfig).id},Object.defineProperty(e.prototype,"canbuyCount",{get:function(){return Math.max(VipSys.ins().getCurSVipConfig().molongbuy-this.buyCount,0)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"useCdTime",{get:function(){return 2==this.getState()?Math.max(0,Math.ceil(Cfg.getConfig(MolongCommonConfig).tiaozhancd-this.leftCdTime)):0},enumerable:!0,configurable:!0}),e.prototype.canYaoqing=function(){return 0==this.getYaoqingCD()},e.prototype.getYaoqingCD=function(){return Math.max(0,Math.ceil((this.yaoqingtimer-Timer.ins().getTimer())/1e3))},e.prototype.canYaoqingGuild=function(){return 0==this.getYaoqingCDGuild()},e.prototype.getYaoqingCDGuild=function(){return Math.max(0,Math.ceil((this.yaoqingtimerGuild-Timer.ins().getTimer())/1e3))},Object.defineProperty(e.prototype,"shuaguaiTime",{get:function(){return Math.max(0,Math.ceil(this._shuaguaiTime-Timer.ins().getTimer())/1e3)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"zuduiTime",{get:function(){return Math.max(0,Math.ceil(this._zuduiTime-Timer.ins().getTimer())/1e3)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"leftCdTime",{get:function(){return Math.max(0,Math.ceil(this.SweepEndTick-Timer.ins().getTimer())/1e3)},enumerable:!0,configurable:!0}),e.prototype.istixingguwu=function(){return this.count<=3&&this.guwuCount<=4},e.prototype.openYaoQingWin=function(){if(0==this.isfaGuoYoaQing){var t=Cfg.getConfig(MolongCommonConfig).yaoqingdesc,e=new PopupTimeData(t);e.timer=5,e.setFunction(this,function(){FbSys.ins().sendMoLongYaoQing(1)}),openWin(MoLongZuDuiWin,e)}},e.prototype.isZhuZhan=function(){return 2==this.rewardType},e.prototype.getState=function(){var t=0;return t=-1!=this.SweepEndTick?2:0==this.state?0:1},e.prototype.resetAll=function(){this.isfaGuoYoaQing=!1,this.subRoleDatas.length=0,this.boshu=0,this.jibaiCount=0,this.guwuCount=0,this.yaoqingtimer=0,this.yaoqingtimerGuild=0,this._shuaguaiTime=0,this._zuduiTime=0,this.guwuAttrData.resetAll(),Timer.ins().removeAll(this)},e.getMoLongCommonByIdCount=function(t,e){for(var i=Cfg.getConfig(MolongFubenConfig,CondType.Equal,MolongFubenConfig.fbId,t),n=0,a=i.grade.length-1;a>=0&&(n=a,!(e<=i.grade[a]));a--);return n},e}(FbModelBase);__reflect(FbModelMoLong.prototype,"FbModelMoLong"),window.FbModelMoLong=FbModelMoLong;var SubRoleData=function(){function t(){this.index=0,this.hurt=0,this.sumHurt=0,this.playName="",this.jobs=0,this.sex=0}return t.prototype.parser=function(t){this.hurt=t.readDouble(),this.playName=t.readString(),this.jobs=t.readByte(),this.sex=t.readByte()},Object.defineProperty(t.prototype,"isMy",{get:function(){return 1==this.index},enumerable:!0,configurable:!0}),t}();__reflect(SubRoleData.prototype,"SubRoleData"),window.SubRoleData=SubRoleData;var FbModelRedFort=function(){function t(){this.fbType=0,this.timeType=0,this.tick=0,this.tickCD=0,this.score=0,this.killCount=0,this.dieCount=0,this.curFloor=1,this.dabiaoFloor=0,this.lastRankData=[],this.lastMyRan=0}return t.prototype.parser=function(t){this.fbType=t.readByte(),this.timeType=t.readByte();var e=t.readInt();this.tick=1e3*e+Timer.ins().getTimer(),this.tickCD=1e3*t.readInt()+Timer.ins().getTimer(),RpFun.RedFortOpenRedPoint()},t.prototype.parserFloor=function(t){this.curFloor=t.readByte();var e=t.readInt();this.dieCount=t.readInt(),e>0&&e!=this.killCount&&openWin(RedFortContinueKillWin,e),this.killCount=e},t.prototype.parserFortDabiaoReward=function(t){this.dabiaoFloor=t.readByte(),RpFun.RedFortBoxRewardRedPoint()},t.prototype.parserRedFortLastRank=function(t){this.lastRankData.length=0;for(var e=t.readShort(),i=0;e>i;i++){var n=new RedFortLastRankData;n.parser(t),this.lastRankData.push(n)}this.lastMyRan=t.readShort()},t.prototype.isFortOpen=function(){return 2==this.timeType&&this.tick>Timer.ins().getTimer()},Object.defineProperty(t.prototype,"letfTime",{get:function(){return Math.max(0,this.tick-Timer.ins().getTimer())},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"leftCd",{get:function(){return Math.max(0,this.tickCD-Timer.ins().getTimer())},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"config",{get:function(){return Cfg.getConfig(FortConfig,this.curFloor)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"dieConfig",{get:function(){return Cfg.getConfig(FortDieConfig,this.dieBuffLv)},enumerable:!0,configurable:!0}),t.prototype.isScoreMax=function(){return this.score>=this.config.maxscore},t.prototype.isScoreDabiao=function(){return this.score>=this.config.dabiaoscore},t.prototype.isDabiaoReward=function(){return this.config.floor<=FbSys.ins().redFort.dabiaoFloor},t.prototype.isFloorMax=function(){return this.curFloor>=Cfg.getFortMaxFloor()},Object.defineProperty(t.prototype,"dieBuffLv",{get:function(){return Math.min(this.dieCount,Cfg.getFortMaxDieCount())},enumerable:!0,configurable:!0}),t.prototype.hasDieBuff=function(){return this.dieCount>0},t.prototype.getStarTime=function(){var t=Cfg.getConfig(FortCommonConfig).starTime1,e=Cfg.getConfig(FortCommonConfig).starTime2,i=new Date(Actor.ins().serverTime);return this.nageshijian()?i.setHours(t[0],t[1],t[2]):i.setHours(e[0],e[1],e[2]),i.getTime()},t.prototype.nageshijian=function(){var t=Cfg.getConfig(FortCommonConfig).starTime1,e=Cfg.getConfig(FortCommonConfig).endTime1,i=new Date(Actor.ins().serverTime);i.setHours(t[0],t[1],t[2]);var n=i.getTime(),a=new Date(Actor.ins().serverTime);a.setHours(e[0],e[1],e[2]);var o=a.getTime(),s=Cfg.getConfig(FortCommonConfig).starTime2,r=Cfg.getConfig(FortCommonConfig).endTime2,u=new Date(Actor.ins().serverTime);u.setHours(s[0],s[1],s[2]);var h=(u.getTime(),new Date(Actor.ins().serverTime));h.setHours(r[0],r[1],r[2]);var l=(h.getTime(),Actor.ins().serverTime<n||Actor.ins().serverTime<o);return l},t.prototype.getEndTime=function(){var t=new Date(Actor.ins().serverTime),e=Cfg.getConfig(FortCommonConfig).endTime1,i=Cfg.getConfig(FortCommonConfig).endTime2;return this.nageshijian()?t.setHours(e[0],e[1],e[2]):t.setHours(i[0],i[1],i[2]),t.getTime()},t.prototype.getOpenTime=function(){var t=Cfg.getConfig(FortCommonConfig).starTime1,e=Cfg.getConfig(FortCommonConfig).endTime1,i=Cfg.getConfig(FortCommonConfig).starTime2,n=Cfg.getConfig(FortCommonConfig).endTime2,a=new Date(Actor.ins().serverTime);return a.setHours(t[0],t[1],t[2]),a.getTime()>Actor.ins().serverTime?-(a.getTime()-Actor.ins().serverTime):(a.setHours(e[0],e[1],e[2]),a.getTime()>Actor.ins().serverTime?a.getTime()-Actor.ins().serverTime:(a.setHours(i[0],i[1],i[2]),a.getTime()>Actor.ins().serverTime?-(a.getTime()-Actor.ins().serverTime):(a.setHours(n[0],n[1],n[2]),a.getTime()>Actor.ins().serverTime?a.getTime()-Actor.ins().serverTime:(a=new Date(Actor.ins().serverTime+DateUtil.MS_PER_DAY),a.setHours(t[0],t[1],t[2]),-(a.getTime()-Actor.ins().serverTime)))))},t}();__reflect(FbModelRedFort.prototype,"FbModelRedFort");var FbModelShiLian=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.bossDatas=[],e}return __extends(e,t),e.prototype.parser=function(t){var e=t.readShort();this.bossDatas.length=0;for(var i=0;e>i;i++){var n=new FbEquipBossModel;n.parser(t),this.bossDatas.push(n)}},e.prototype.parserInfoBoss=function(t){var e=t.readShort(),i=this.getBossDataById(e);i&&i.parserUpdate(t)},e.prototype.getBossDataById=function(t){for(var e=0;e<this.bossDatas.length;e++){var i=this.bossDatas[e];if(i.id==t)return i}return null},e.prototype.openData=function(){for(var t=[],e=0;e<this.bossDatas.length;e++){var i=this.bossDatas[e];i.isopen&&t.push(i)}return t},e.prototype.noOpenData=function(){for(var t=[],e=0;e<this.bossDatas.length;e++){var i=this.bossDatas[e];i.isopen||t.push(i)}return t},e.prototype.noSaoDanCount=function(){for(var t=!0,e=0;e<this.bossDatas.length;e++){var i=this.bossDatas[e];if(i.isopen&&i.count>0){t=!1;break}}return t},e.prototype.allBossDie=function(){for(var t=!0,e=0;e<this.bossDatas.length;e++){var i=this.bossDatas[e];if(i.isopen&&!i.isDie){t=!1;break}}return t},e}(FbModelBase);__reflect(FbModelShiLian.prototype,"FbModelShiLian");var FbModelWanmo=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.status=0,e.maxCount=0,e.isKuaiSu=!1,e.minGuanQiaReward=new GuanQiaReward,e.maxGuanQiaReward=new GuanQiaReward,e.isShowRedPoint=!0,e}return __extends(e,t),e.prototype.isMax=function(){return this.fbId==this.maxCount},e.prototype.canSaodang=function(){return 0!=this.fbId&&0==this.status},e.prototype.setShowRedPoint=function(t){this.isShowRedPoint=t},e}(FbModelBase);__reflect(FbModelWanmo.prototype,"FbModelWanmo");var WanMoKuaiSuReward=function(){function t(){this.index=0,this.type=0,this.ceng=1,this.reward=[]}return t}();__reflect(WanMoKuaiSuReward.prototype,"WanMoKuaiSuReward");var GuanQiaReward=function(){function t(){this.isReceive=0,this.guanqia=0,this.curGuanQia=0,this.reward=new ItemDataReward}return t.prototype.parser=function(t){this.isReceive=t.readByte(),this.guanqia=t.readShort(),this.reward.parser2(t)},t.prototype.canGet=function(){return 0==this.isReceive&&this.curGuanQia>=this.guanqia},t}();__reflect(GuanQiaReward.prototype,"GuanQiaReward");var FbModelXuese=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return __extends(e,t),e.prototype.parser=function(e){t.prototype.parser.call(this,e)},Object.defineProperty(e.prototype,"canbuyCount",{get:function(){return VipSys.ins().getCurSVipConfig().xuesebuy-this.buyCount},enumerable:!0,configurable:!0}),e.prototype.initConfig=function(){this.commonConfig=Cfg.getConfig(XueseCommonConfig),this.fbConfig=Cfg.getConfig(XuesefbConfig,this.fbId)},Object.defineProperty(e.prototype,"result",{get:function(){return this.leftCount>0&&0==this.leftCdTime},enumerable:!0,configurable:!0}),e.prototype.isMax=function(){return Cfg.getConfig(XuesefbConfig,CondType.LessEqual,XuesefbConfig.zslevel,Actor.ins().zsId).id>=Cfg.getConfigLength(XuesefbConfig)},Object.defineProperty(e.prototype,"isfirst",{get:function(){return this.gotoCount>0},enumerable:!0,configurable:!0}),e}(FbModelDevil);__reflect(FbModelXuese.prototype,"FbModelXuese");var FbModelZhuZai=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.zhuZaiBosss=[],e.refreshTick=0,e.refreshTickType=0,e.intoCD=0,e.prizeDiceData=new ZhuZaiDiceData,e.myHurt=0,e.zhuZaiRewards=[],e}return __extends(e,t),e.prototype.parser=function(t){this.refreshTickType=t.readByte(),this.refreshTick=Timer.ins().getTimer()+1e3*t.readInt(),this.intoCD=Timer.ins().getTimer()+1e3*t.readInt();var e=t.readByte();this.zhuZaiBosss.length=0;for(var i=0;e>i;i++){var n=new ZhuZaiBossData;n.parser(t),this.zhuZaiBosss.push(n)}this.zhuzaiId=t.readInt();var a=t.readInt(),o=Cfg.getConfigs(ZhuZaiDamageRewardConfig,this.zhuzaiId);this.zhuZaiRewards.length=0;for(var i=0;i<o.length;i++){var s=o[i],r=new FbModelZhuZaiReward;r.zhuzaiid=this.zhuzaiId,r.index=s.index,r.config=s,this.zhuZaiRewards.push(r)}var u=[];u.length=this.zhuZaiRewards.length,MathUtil.writeIntToArray(a,u,1);for(var i=0;i<u.length;i++)this.zhuZaiRewards[i].setStates(u[i])},Object.defineProperty(e.prototype,"leftRefreshTime",{get:function(){return Math.max(0,this.refreshTick-Timer.ins().getTimer())},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"intoTime",{get:function(){return Math.max(0,this.intoCD-Timer.ins().getTimer())},enumerable:!0,configurable:!0}),e.prototype.isIntoFuBen=function(){return 2==this.refreshTickType},e.prototype.isCurSelect=function(t){return t==this.zhuzaiId},e.prototype.getZhuZaiBossData=function(){for(var t=0;t<this.zhuZaiBosss.length;t++)if(this.zhuZaiBosss[t].id==this.zhuzaiId)return this.zhuZaiBosss[t];return this.zhuZaiBosss[0]},e.prototype.getTimer=function(){var t=Cfg.getConfig(ZhuZaiCommonConfig).starTime1,e=new Date(Actor.ins().serverTime);e.setHours(t[0],t[1],t[2]);var i=e.getTime(),n=Cfg.getConfig(ZhuZaiCommonConfig).starTime2,a=new Date(Actor.ins().serverTime);a.setHours(n[0],n[1],n[2]);var o=a.getTime(),s=Actor.ins().serverTime<i||Actor.ins().serverTime>o;return s?i:o},e.prototype.getCurRewarData=function(){for(var t=this.zhuZaiRewards.length,e=this.zhuZaiRewards[t-1],i=0;t>i;i++){var n=this.zhuZaiRewards[i];if(0==n.state){e=n;break}}return e},e}(FbModelBase);__reflect(FbModelZhuZai.prototype,"FbModelZhuZai");var FbModelZhuZaiReward=function(){function t(){this.zhuzaiid=1,this.index=1,this.state=0,this.hurt=0}return t.prototype.setStates=function(t){this.state=t},t.prototype.canGet=function(){var t=this.hurt>=this.config.damage;return t},t}();__reflect(FbModelZhuZaiReward.prototype,"FbModelZhuZaiReward");var FbMonsterData=function(){function t(){this.id=0,this.handle=0,this.isBoss=!1,this.hasRefresh=!1,this.dropItem=[],this.isInsert=!1,this.entityType=EntityType.MONSTER_SERVER,this.position=[],this.dialogue=[]}return t.prototype.reset=function(){this.id=0,this.handle=0,this.isBoss=!1,this.dropItem.length=0,this.isInsert=!1},t}();__reflect(FbMonsterData.prototype,"FbMonsterData"),window.FbMonsterData=FbMonsterData;var FbResultDataBase=function(){function t(){this.bossScore=0,this.rewardItem=[],this.rewardCurrency=[]}return t.prototype.reset=function(){this.rewardItem.length=0,this.rewardCurrency.length=0},t}();__reflect(FbResultDataBase.prototype,"FbResultDataBase");var FbResultData=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.type=0,e.timer=0,e.score=0,e.orderSort=0,e.lastExp=0,e.exp=0,e.damage=0,e}return __extends(e,t),e.prototype.isShowLastExp=function(){return this.lastExp>0&&this.exp>this.lastExp},e.prototype.getLastExpAdd=function(){return Math.ceil((this.exp-this.lastExp)/this.lastExp*100)},e}(FbResultDataBase);__reflect(FbResultData.prototype,"FbResultData");var FbResultBossData=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.rewardCurrency=[],e.type=0,e.timer=0,e.orderSort=0,e}return __extends(e,t),e}(FbResultDataBase);__reflect(FbResultBossData.prototype,"FbResultBossData");var FbResultBossHomeData=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.isBelonger=0,e.belongerName="",e.belongerJob=1,e.belongerSex=0,e}return __extends(e,t),e}(FbResultDataBase);__reflect(FbResultBossHomeData.prototype,"FbResultBossHomeData");var FbResultKuafuBossData=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.serverId=0,e}return __extends(e,t),e.prototype.parser=function(t){this.isBelonger=t.readUnsignedByte(),this.serverId=t.readInt(),this.belongerName=t.readString(),this.belongerJob=t.readUnsignedByte();for(var e=t.readUnsignedByte(),i=0;e>i;i++){var n=new ItemDataReward;n.parser(t),this.rewardItem.push(n)}},e}(FbResultBossHomeData);__reflect(FbResultKuafuBossData.prototype,"FbResultKuafuBossData");var FbResultKuafuBossSdData=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return __extends(e,t),e.prototype.parser=function(t){this.isBelonger=t.readByte(),t.readInt(),this.belongerName=t.readString(),this.belongerJob=t.readByte();for(var e=t.readUnsignedByte(),i=0;e>i;i++){var n=new ItemDataReward;n.parser(t),this.rewardItem.push(n)}},e}(FbResultBossHomeData);__reflect(FbResultKuafuBossSdData.prototype,"FbResultKuafuBossSdData");var FbResulKuaiSuData=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.fbGroup=0,e}return __extends(e,t),e.prototype.parser=function(t){this.fbGroup=t.readInt();for(var e=t.readShort(),i=0;e>i;i++){var n=new ItemDataReward;n.parser3(t),n["double"]=t.readByte(),this.rewardItem.push(n)}},e}(FbResultDataBase);__reflect(FbResulKuaiSuData.prototype,"FbResulKuaiSuData");var FbResultMoLongData=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.timer=0,e.fbId=0,e}return __extends(e,t),e.prototype.parser=function(t){this.timer=t.readShort();for(var e=t.readByte(),i=0;e>i;i++){var n=new ItemDataReward;n.parser2(t),n["double"]=t.readByte(),this.rewardItem.push(n)}this.fbId=t.readInt()},e}(FbResultDataBase);__reflect(FbResultMoLongData.prototype,"FbResultMoLongData");var FbResultZhuZaiData=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return __extends(e,t),e.prototype.parser=function(t){this.isWin=t.readBoolean(),this.fisrtName=t.readString(),this.killName=t.readString(),this.rank=t.readInt();for(var e=t.readShort(),i=0;e>i;i++){var n=new ItemDataReward;n.parser1(t),this.rewardItem.push(n)}},e}(FbResultDataBase);__reflect(FbResultZhuZaiData.prototype,"FbResultZhuZaiData"),window.FbResultMoLongData=FbResultMoLongData;var FbResultYunBiaoData=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.timer=0,e.result=0,e.carLv=0,e.guildName="",e.playerName="",e.desc="",e}return __extends(e,t),e.prototype.parser=function(t){this.result=t.readByte(),3!=this.result&&(this.carLv=t.readByte(),this.guildName=t.readString(),this.playerName=t.readString())},e}(FbResultDataBase);__reflect(FbResultYunBiaoData.prototype,"FbResultYunBiaoData"),window.FbResultYunBiaoData=FbResultYunBiaoData;var FbResultSiegeData=function(){function t(){this.time=0,this.hurt=0,this.rank=0,this.rewardItem=[]}return t.prototype.parser=function(t){this.time=t.readInt(),this.hurt=t.readDouble(),this.rank=t.readByte();for(var e=t.readByte(),i=0;e>i;i++){var n=new ItemDataReward;n.parser4(t),this.rewardItem.push(n)}},t}();__reflect(FbResultSiegeData.prototype,"FbResultSiegeData");var FbResultGuZhanData=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.killCount=0,e.time=0,e}return __extends(e,t),e.prototype.parser=function(t){this.killCount=t.readInt();for(var e=t.readShort(),i=0;e>i;i++){var n=new ItemDataReward;n.parser(t),this.rewardItem.push(n)}this.time=t.readInt()},e}(FbResultDataBase);__reflect(FbResultGuZhanData.prototype,"FbResultGuZhanData");var FbResultKlmData=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return __extends(e,t),e.prototype.parser=function(t){this.isWin=!0,this.fisrtName=t.readString(),this.rank=t.readInt();for(var e=t.readShort(),i=0;e>i;i++){var n=new ItemDataReward;n.parser(t),this.rewardItem.push(n)}},e}(FbResultDataBase);__reflect(FbResultKlmData.prototype,"FbResultKlmData"),window.FbResultZhuZaiData=FbResultZhuZaiData;var FbResultKlmKunDunData=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.lastRewardItem=[],e}return __extends(e,t),e}(FbResultDataBase);__reflect(FbResultKlmKunDunData.prototype,"FbResultKlmKunDunData"),window.FbResultKlmKunDunData=FbResultKlmKunDunData;var FbResultTianShiData=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.isBelonger=0,e.belongerName="",e.belongerJob=1,e}return __extends(e,t),e.prototype.parser=function(t){this.isBelonger=t.readUnsignedByte(),this.belongerName=t.readString(),this.belongerJob=t.readUnsignedByte();for(var e=t.readShort(),i=0;e>i;i++){var n=new ItemDataReward;n.parser(t),this.rewardItem.push(n)}},e}(FbResultDataBase);__reflect(FbResultTianShiData.prototype,"FbResultTianShiData"),window.FbResultTianShiData=FbResultTianShiData;var FbResultYongZheData=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return __extends(e,t),e}(FbResultTianShiData);__reflect(FbResultYongZheData.prototype,"FbResultYongZheData"),window.FbResultYongZheData=FbResultYongZheData,window.FbResultSiegeData=FbResultSiegeData;var FbResultShenDianData=function(){function t(){}return t.prototype.parser=function(t){this.leftCdTime=t.readShort(),this.hp=t.readShort(),this.count=t.readShort();var e=t.readByte();this.rewardItem=[];for(var i=0;e>i;i++){var n=new ItemDataReward;n.parser5(t),this.rewardItem.push(n)}this.fbId=t.readInt()},t}();__reflect(FbResultShenDianData.prototype,"FbResultShenDianData");var BossHuDun=function(){function t(){}return t.prototype.parser=function(t){this.type=t.readByte(),this.value=1e3*t.readInt()+Timer.ins().getTimer(),this.max=t.readInt()},t.prototype.getTimerTick=function(){return Math.max(0,this.value-Timer.ins().getTimer())/1e3},t.prototype.resetAll=function(){this.value=0,this.max=0},t}();__reflect(BossHuDun.prototype,"BossHuDun");var BossWarnWin=function(t){function e(){var e=t.call(this)||this;return e.mc=new MC,e.useType=0,e.layer=LayerMgr.Tips,e.skinName="BossTrailerSkin",e.mc.x=320,e.mc.y=55,e.group1.addChild(e.mc),e.group2.alpha=0,e.group2.x=-433,e.touchChildren=!1,e.touchEnabled=!1,e}return __extends(e,t),e.prototype.open=function(){t.prototype.open.call(this),this.group2.alpha=0,this.group2.x=-433,this.mc.playFile(getEffName("bossyj"),-1);var e=egret.Tween.get(this.group2);e.to({x:0,alpha:1},200).wait(3e3).call(this.countDown,this)},e.prototype.countDown=function(){var t=egret.Tween.get(this.group2);t.to({x:460,alpha:0},200).call(function(){closeWin(e)})},e.prototype.onclick=function(t){switch(t.currentTarget){case this:closeWin(this)}},e}(BaseWinSingle);__reflect(BossWarnWin.prototype,"BossWarnWin"),window.BossWarnWin=BossWarnWin;var DamageListWin=function(t){function e(){var e=t.call(this)||this;return e.winType=WinType.NeverCloseWin,e}return __extends(e,t),e.prototype.initUI=function(){this.skinName="DamageListWinEUI",this.setSkinPart("damageListComponent",new DamageListCom),this.layer=LayerMgr.Main_Down2},e.prototype.open=function(e){t.prototype.open.call(this),this.addLsn(FbSys.ins().patchDamegeUpdate,this.onDamageUpdate),this.damageListComponent.open(e),this.onDamageUpdate(e)},e.prototype.close=function(){t.prototype.close.call(this),this.damageListComponent.close()},e.prototype.onDamageUpdate=function(t){var e=Cfg.getConfig(FubenConfig,FbSys.ins().fbId);this.damageListComponent.updateDamage(t),e.group==FbGroup.GuildWarPVE||e.group==FbGroup.GuildWarPVP?(this.damageListComponent.right="15",this.damageListComponent.top="200"):(this.damageListComponent.bottom="190",this.damageListComponent.left="15")},e.prototype.addToParent=function(t){this.addToParentAt(t,0)},e}(BaseWinSingle);__reflect(DamageListWin.prototype,"DamageListWin"),window.DamageListWin=DamageListWin;var EscFubenCountDownWin=function(t){function e(){var e=t.call(this)||this;return e.showleftTime=0,e.fbName="",e}return __extends(e,t),e.prototype.initUI=function(){this.layer=LayerMgr.Popup,this.skinName="EscFubenCountDownWinSkin",t.prototype.initUI.call(this)},e.prototype.open=function(e){this.fbName=e.desc,this.showleftTime=e.curNum,t.prototype.open.call(this),this.addClickE(this.btnEsc,this.onClick),this.labelDesc.textFlow=addColorTF(""+Lang.fb_str16+StrUtil.addColor(this.fbName,15733780)),this.labelTime.textFlow=addColorTF(Lang.fb_str17.replace("$second$",this.showleftTime.toFixed(0))),this.showleftTime>0&&Timer.ins()["do"](1e3,1e3,this.showleftTime+2,this.onTimer,this)},e.prototype.close=function(){t.prototype.close.call(this),Timer.ins().removeAll(this)},e.prototype.onTimer=function(){this.showleftTime--,this.showleftTime<0&&this.onFinish(),this.labelTime.textFlow=addColorTF(Lang.fb_str17.replace("$second$",this.showleftTime.toFixed(0)))},e.prototype.onFinish=function(){closeWin(this),FbSys.ins().sendExitFb()},e.prototype.onClick=function(t){switch(t.target){case this.btnEsc:closeWin(this)}},e}(BaseWinSingle);__reflect(EscFubenCountDownWin.prototype,"EscFubenCountDownWin"),window.EscFubenCountDownWin=EscFubenCountDownWin;var ActivityType19Config=function(){function t(){}return t}();__reflect(ActivityType19Config.prototype,"ActivityType19Config");var FbResultDescWin1=function(t){function e(){return t.call(this)||this}return __extends(e,t),e.prototype.setSkinName=function(){this.skinName="FbRewardDescWinSkin1"},e}(FbRewardDescWin);__reflect(FbResultDescWin1.prototype,"FbResultDescWin1"),window.FbResultDescWin1=FbResultDescWin1;var FbResultDescWin2=function(t){function e(){return t.call(this)||this}return __extends(e,t),e.prototype.setSkinName=function(){this.skinName="FbRewardDescWinEUI",this.currentState="s2"},e}(FbRewardDescWin);__reflect(FbResultDescWin2.prototype,"FbResultDescWin2"),window.FbResultDescWin2=FbResultDescWin2;var GuanQiaTips=function(t){function e(){var e=t.call(this)||this;return e.layer=LayerMgr.Main_Down,e.skinName="GuanQiaTipsSkin",e}return __extends(e,t),e.prototype.addDisplay=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];this.addLsn(LogicSys.ins().patchEnterMap,this.closeWin),this.numBmp.text=FbSys.ins().guajiData.challengeGuanId+"",this.updateEntity()},e.prototype.updateEntity=function(){var t=LogicSys.ins().centerEntity,e=t.AI.getNextTarget();!e||MathUtil.getDistance(t,e)>384?Timer.ins()["do"](1,1e3,1,this.updateEntity,this):Timer.ins()["do"](1e3,1,1,this.closeWin,this)},e.prototype.closeWin=function(){closeWin(this)},e}(BaseWinSingle);__reflect(GuanQiaTips.prototype,"GuanQiaTips"),window.GuanQiaTips=GuanQiaTips;var GuiShuTypeFuBenModel=function(){function t(){this.atkMeList=[],this.belongerMasterHandle=0,this.belongerName="",this.belongerJob=0,this.belongerSex=0,this.belongerHp=0,this.belongerHpMax=0,this.oldBelongerMasterHandle=0,this.oldBelongerName="",this.serverId=0}return t.prototype.parserAtkerList=function(t){var e=t.readUnsignedInt();this.atkMeList.length=0;for(var i=0;e>i;i++){var n=t.readDouble();this.atkMeList.push(n)}},t.prototype.parserBelonger=function(t){this.belongerMasterHandle=t.readDouble(),this.oldBelongerMasterHandle=t.readDouble(),this.oldBelongerName=t.readString(),this.belongerName=t.readString(),this.belongerJob=t.readByte(),this.belongerSex=t.readByte(),this.belongerHp=t.readDouble(),this.belongerHpMax=t.readDouble(),this.serverId=t.readInt()},t.prototype.resetAll=function(){this.atkMeList.length=0,this.belongerMasterHandle=0,this.oldBelongerMasterHandle=0,this.oldBelongerName="",this.belongerName="",this.belongerJob=0,this.belongerHp=0,this.belongerHpMax=0,this.serverId=0},t}();__reflect(GuiShuTypeFuBenModel.prototype,"GuiShuTypeFuBenModel");var PaTaTitleWin=function(t){function e(){var e=t.call(this)||this;return e.useType=0,e.layer=LayerMgr.Tips,e.skinName="PaTaTrailerSkin",e.touchChildren=!1,e.touchEnabled=!1,e.group2.alpha=0,e}return __extends(e,t),e.prototype.open=function(t,i){void 0===t&&(t=0),void 0===i&&(i=0);var n=0;t==FbGroup.Wanmo?(this.imgFbTitle.source="pt_zycs_wanmo",n=i-3e4):t==FbGroup.HeiAn&&(n=i-4e4,this.imgFbTitle.source="pt_zycs_heian"),this.numBmp.text=n.toFixed(0),this.group2.alpha=0,egret.Tween.removeTweens(this.group2);var a=egret.Tween.get(this.group2);a.to({alpha:1},800).wait(2e3).to({y:-100,alpha:0},100).call(function(){closeWin(e)})},e}(BaseWinSingle);__reflect(PaTaTitleWin.prototype,"PaTaTitleWin"),window.PaTaTitleWin=PaTaTitleWin;var SaoDangFbResultWin=function(t){function e(){return t.call(this)||this}return __extends(e,t),e.prototype.initUI=function(){t.prototype.initUI.call(this),this.layer=LayerMgr.Popup,this.skinName="SaoDangFbResultWinEUI",this.addBg(),this.listData=new eui.ArrayCollection,this.list.itemRenderer=ItemBaseReward,this.list.dataProvider=this.listData,this.setSkinPart("price",new PriceIcon),this.price.setType(CurType.yb)
},e.prototype.open=function(e){t.prototype.open.call(this),this.resultData=e,this.addClickE(this.btnSaoDang,this.onClick),this.iniData()},e.prototype.iniData=function(){var t=FbSys.ins().getFbModelDailyByFbGroup(this.resultData.fbGroup);this.listData.source=this.resultData.rewardItem;var e=t.getSaoDangConsume();this.price.setPrice(e)},e.prototype.onClick=function(t){switch(t.currentTarget){case this.btnSaoDang:var e=FbSys.ins().getFbModelDailyByFbGroup(this.resultData.fbGroup);if(e.saodangCount<=0)return void showtipsFail(Lang.fb_str61);if(!GFunc.isCurrency(CurType.yb,e.getSaoDangConsume()))return void showtipsFail(Lang.damon_str35);FbSys.ins().sendSweep(e.fbGroup)}},e}(BaseWinSingle);__reflect(SaoDangFbResultWin.prototype,"SaoDangFbResultWin"),window.SaoDangFbResultWin=SaoDangFbResultWin;var SaoDangItem=function(t){function e(){var e=t.call(this)||this;return e.skinName="SaoDangItemSkin",e.list.itemRenderer=ItemBaseRewardMin,e}return __extends(e,t),e.prototype.dataChanged=function(){var t=this.data;this.lbtitle.text=Lang.fb_str18.replace("$count$",(t.orderSort+1).toString()),this.list.dataProvider=new eui.ArrayCollection(t.rewardItem)},e}(BaseItemRender);__reflect(SaoDangItem.prototype,"SaoDangItem"),window.SaoDangItem=SaoDangItem;var ResultBossWin=function(t){function e(){var e=t.call(this)||this;return e.resultData=new FbResultBossData,e}return __extends(e,t),e.prototype.initUI=function(){t.prototype.initUI.call(this),this.layer=LayerMgr.Popup,this.skinName="ResultBossSkin",this.addBg(),this.listData=new eui.ArrayCollection,this.clickClose=!1,this.bg.visible=!1;var e=MC.create(ResMgr.getEffName("win"),-1);this.titleGroup.addChild(e)},e.prototype.open=function(e){t.prototype.open.call(this),this.resultData=e,this.addClickE(this.closeBtn,this.onTap),this.addClickE(this.closeBtn0,this.onTap),this.list.itemRenderer=ItemBaseReward,this.list.dataProvider=this.listData,this.iniData()},e.prototype.iniData=function(){Timer.ins()["do"](0,1e3,15,this.updateLabel,this),this.imgwptitle.visible=this.resultData.rewardItem.length>0,SortUtil.sortOn(this.resultData.rewardItem,["sortType","quality"],[SortType.up,SortType.down]),this.listData.source=this.resultData.rewardItem,this.lbhh.text=this.resultData.myHurt.toString(),this.lbpm.text=this.resultData.myRank.toString(),this.imgjl.source=1==this.resultData.myRank?"fb_zycs_bsj":"fb_zycs_cyj",this.closeBtn.icon="anz_zycs_lqjl"},e.prototype.close=function(){t.prototype.close.call(this),Timer.ins().removeAll(this)},e.prototype.escFubBen=function(){Timer.ins().remove(this.updateLabel,this),1!=this.resultData.type&&FbSys.ins().sendGetFubenReward(),this.closeFunc&&(this.closeFunc(),this.closeFunc=null)},e.prototype.updateLabel=function(t){0>=t&&this.onCloseBtn(),this.closeBtn.label=Lang.common_str47.replace("$second$",t.toString())},e.prototype.onTap=function(t){switch(t.currentTarget){case this.closeBtn:this.onCloseBtn();break;case this.closeBtn0:FbSys.ins().sendExitFb(),closeWin(this)}},e.prototype.onCloseBtn=function(){FbSys.ins().sendExitFb(),this.escFubBen(),closeWin(this)},e}(BaseWinSingle);__reflect(ResultBossWin.prototype,"ResultBossWin"),window.ResultBossWin=ResultBossWin;var ResultCreateRole=function(t){function e(){var e=t.call(this)||this;return e.closeFun=new Caller,e.skinName="ResultCreateRoleEUI",e.btnUpmc=new MC,e.btnUpmc.scaleX=1,e.btnUpmc.scaleY=1,e.btnUpmc.x=e.btnGotoRole.x+74.5,e.btnUpmc.y=e.btnGotoRole.y+29.5,e.groupGoToNewRole.addChild(e.btnUpmc),e}return __extends(e,t),e.prototype.open=function(e,i,n){void 0===i&&(i=null),void 0===n&&(n=null),t.prototype.open.call(this),this.closeFun.func=i,this.closeFun.obj=i,this.addClickE(this.btnGotoRole,this.onTap),this.groupGoToNewRole.visible=!RechargeActSys.ins().firstRechargeData.isRecharge()&&!urlParam.isShenhe,this.resultMyBig.open(i,n),LogicSys.ins().isFubenLose=!e},e.prototype.close=function(){t.prototype.close.call(this)},e.prototype.onTap=function(t){switch(t.currentTarget){case this.btnGotoRole:this.closeFun.call(),LogicSys.ins().aotuOpenWin=!1,openWin(FirstRechargeBuyWin),FbSys.ins().sendExitFb()}},e}(BaseEUI);__reflect(ResultCreateRole.prototype,"ResultCreateRole"),window.ResultCreateRole=ResultCreateRole;var ResultCrossDartWin=function(t){function e(){var e=t.call(this)||this;return e.layer=LayerMgr.Popup,e}return __extends(e,t),e.prototype.setSkinName=function(){this.skinName="ResultDartWinEUI"},e.prototype.initUI=function(){t.prototype.initUI.call(this),this.eList.itemRenderer=ItemBase,this.listArr=new eui.ArrayCollection,this.eList.dataProvider=this.listArr,this.addBg()},e.prototype.open=function(e){t.prototype.open.call(this);var i=e.result,n=e.guildName,a=e.playerName,o=e.carLv;this.bg.source=0!=i?"js_zycs_qz_png":"js_zycs_qzh_png",this.closeBtn.name="领取奖励";var s,r=3!=i?Cfg.getConfig(DartCarConfig,o):null;switch(i){case 2:this.eTips.textFlow=addColorTF("很遗憾，宝藏已提前被\n"+addColor("[仙盟:"+n+"]",5767068)+"的"+addColor(a,5767068)+"击破了"),s=r.sucreward,this.imgwptitle.source="js_zycs_sljl";break;case 1:this.eTips.textFlow=addColorTF("恭喜成功击破\n"+addColor("[仙盟:"+n+"]",5767068)+"的"+addColor(o+"级宝藏",5767068)),s=r.plunderreward,this.imgwptitle.source="js_zycs_jpjl";break;case 3:this.eTips.text="活动已结束！！!",this.closeBtn.name="退出",this.imgwptitle.source="";break;default:this.eTips.text="",this.closeBtn.name="退出",this.imgwptitle.source=""}if(s){for(var u=[],h=0;h<s.length;h++)u.push(GFunc.creatItemDataByReward(s[h]));SortUtil.sortOn(u,["quality"],[SortType.down]),this.listArr.source=u}this.repeatTimes=10},e.prototype.close=function(){t.prototype.close.call(this),FbSys.ins().sendExitFb()},e.prototype.updateTime=function(){this.repeatTimes>0&&this.updateCloseBtnLabel()},e.prototype.updateCloseBtnLabel=function(){this.repeatTimes--,this.repeatTimes<=0&&closeWin(this),this.closeBtn.label=this.closeBtn.name+"("+this.repeatTimes+"s)"},e}(BaseWinSingle);__reflect(ResultCrossDartWin.prototype,"ResultCrossDartWin"),window.ResultCrossDartWin=ResultCrossDartWin;var ResultGuildBattleItem=function(t){function e(){var e=t.call(this)||this;return e.skinName="ResultGuildBattleItemEUI",e}return __extends(e,t),e.prototype.dataChanged=function(){this.data instanceof GuildBattleResultRankData&&(this.imgRank.source="ldsz_zycs_ph"+this.data.rank,this.imgIconBg.source=this.data.isMy?"ldsz_zycs_zy1k":"ldsz_zycs_zy2k",this.data.guildId>0||""!=this.data.roleName?(this.lbXwyd.visible=!1,this.imgIcon.source=ResMgr.getHeadIcon(this.data.sex),this.lbName.text=""+this.data.roleName,this.lbScore.text=""+Lang.fb_str201+this.data.score,this.imgMVP.visible=1==this.data.rank):(this.lbXwyd.visible=!0,this.imgMVP.visible=!1,this.imgIcon.source="",this.lbName.text="",this.lbScore.text=""))},e}(BaseItemRender);__reflect(ResultGuildBattleItem.prototype,"ResultGuildBattleItem"),window.ResultLostItem=ResultLostItem;var ResultGuildBattleWin=function(t){function e(){return t.call(this)||this}return __extends(e,t),e.prototype.initUI=function(){this.layer=LayerMgr.Popup,this.skinName="ResultGuildBattleWinEUI",this.addBg(),this.listM.itemRenderer=ResultGuildBattleItem,this.listM.dataProvider=this.listMData=new eui.ArrayCollection,this.listE.itemRenderer=ResultGuildBattleItem,this.listE.dataProvider=this.listEData=new eui.ArrayCollection},e.prototype.open=function(e,i){t.prototype.open.call(this),this.addClickE(this,this.onTap),this.updatePanel(e,i),Timer.ins()["do"](0,1e3,10,this.updateLabel,this)},e.prototype.updateLabel=function(t){0>=t&&this.onCloseBtn(),this.closeBtn.label=Lang.common_str47.replace("$second$",t.toString())},e.prototype.updatePanel=function(t,e){this.currentState=t.isWin?"win":"lost",this.lbGuildNameM.text=t.guildName,this.lbScoreM.text=Lang.gb_str73+"："+t.score,this.listMData.source=t.datas,this.lbGuildNameE.text=""==e.guildName?Lang.act_str87:e.guildName,this.lbScoreE.text=Lang.gb_str73+"："+e.score,this.listEData.source=e.datas},e.prototype.onTap=function(t){switch(t.target){case this.closeBtn:this.onCloseBtn()}},e.prototype.onCloseBtn=function(){FbSys.ins().sendExitFb(),closeWin(this)},e}(BaseWinSingle);__reflect(ResultGuildBattleWin.prototype,"ResultGuildBattleWin"),window.ResultGuildBattleWin=ResultGuildBattleWin;var ResultGuildSiegeWin=function(t){function e(){return t.call(this)||this}return __extends(e,t),e.prototype.initUI=function(){this.layer=LayerMgr.Popup,this.skinName="ResultGuildSiegeEUI",this.setSkinPart("resultCreateRole",new ResultCreateRole),this.addBg(),this.list.itemRenderer=ItemBaseReward,this.list.dataProvider=this.listData=new eui.ArrayCollection},e.prototype.open=function(e,i){var n=this;void 0===i&&(i=!1),t.prototype.open.call(this),this.addClickE(this,this.onTap),this.iniData(e,i),this.resultCreateRole.open(i,function(){closeWin(n)},this)},e.prototype.iniData=function(t,e){if(this.currentState=e?"win":"lost",e){var i=MC.create(ResMgr.getEffName("win"),-1);this.titleGroup.addChild(i),this.bg.visible=!1}this.listData.source=t,this.iconlistData.source=Cfg.getConfigs(FubenLostSkipConfig),Timer.ins()["do"](0,1e3,e?5:15,this.updateLabel,this)},e.prototype.updateLabel=function(t){0>=t&&this.onCloseBtn(),this.closeBtn.label=Lang.common_str47.replace("$second$",t.toString())},e.prototype.onTap=function(t){switch(t.target){case this.closeBtn:this.onCloseBtn()}},e.prototype.onCloseBtn=function(){FbSys.ins().sendExitFb(),closeWin(this)},e}(BaseWinSingle);__reflect(ResultGuildSiegeWin.prototype,"ResultGuildSiegeWin"),window.ResultGuildSiegeWin=ResultGuildSiegeWin;var ActivityType1Config=function(){function t(){}return t}();__reflect(ActivityType1Config.prototype,"ActivityType1Config");var ResultMyBig=function(t){function e(){var e=t.call(this)||this;return e.closeFun=new Caller,e.skinName="ResultMyBigEUI",e.iconlist.itemRenderer=ResultLostItem,e}return __extends(e,t),e.prototype.open=function(e,i){void 0===e&&(e=null),void 0===i&&(i=null),t.prototype.open.call(this),this.closeFun.func=e,this.closeFun.obj=e,this.addItemTapE(this.iconlist,this.onMenuClick),this.iconlist.dataProvider=new eui.ArrayCollection(Cfg.getConfigs(FubenLostSkipConfig))},e.prototype.close=function(){t.prototype.close.call(this)},e.prototype.onMenuClick=function(t){var e=this,i=this.iconlist.selectedItem,n=GFunc.createTaskNavData(i.controlTarget);n.setsucceedFrontFun(function(){LogicSys.ins().aotuOpenWin=!1,e.closeFun.call(),FbSys.ins().sendExitFb()},this),n["goto"]()},e.prototype.onClick=function(t){switch(this.closeFun.call(),t.currentTarget){case this.btn_firstRecharge:openWin(RechargeWin1,0);break;case this.btn_firstRechargeEveryday:openWin(RechargeWin1,2)}LogicSys.ins().aotuOpenWin=!1,FbSys.ins().sendExitFb()},e}(BaseEUI);__reflect(ResultMyBig.prototype,"ResultMyBig"),window.ResultMyBig=ResultMyBig;var ResultWin=function(t){function e(){var e=t.call(this)||this;return e.resultData=new FbResultData,e}return __extends(e,t),e.prototype.initUI=function(){t.prototype.initUI.call(this),this.layer=LayerMgr.Popup,this.skinName="ResultSkin",this.addBg(),this.listData=new eui.ArrayCollection,this.listData0=new eui.ArrayCollection,this.list0.itemRenderer=ItemBaseReward,this.list0.dataProvider=this.listData0,this.clickClose=!1,this.hintTxt.visible=!1,this.lastGroup.visible=!1,this.bg.visible=!1;var e=MC.create(ResMgr.getEffName("win"),-1);this.titleGroup.addChild(e)},e.prototype.open=function(e){t.prototype.open.call(this),this.resultData=e,this.addClickE(this.closeBtn,this.onTap),this.addClickE(this.closeBtn0,this.onTap),this.closeBtn0.visible=3==this.resultData.type||4==this.resultData.type,this.list.itemRenderer=ItemBaseReward,this.list.dataProvider=this.listData,7==this.resultData.type?this.showJJC():11==this.resultData.type?this.showGuildBoss():this.iniData()},e.openCheck=function(t){return 12!=t.type},e.prototype.iniData=function(){var t=3==this.resultData.type||4==this.resultData.type?3:5;Timer.ins()["do"](0,1e3,t,this.updateLabel,this),this.scroller.height=440,this.lbdesc.text="";var e;if(this.groupmoney.removeChildren(),this.resultData.timer>0){var i=new RewardIcon;i.setTimer(this.resultData.timer),this.groupmoney.addChild(i)}for(e=0;e<this.resultData.rewardCurrency.length;e++){var i=new RewardIcon;this.resultData.rewardCurrency[e].count>0&&(i.setData(this.resultData.rewardCurrency[e]),this.groupmoney.addChild(i))}if(this.resultData.isShowLastExp()){var i=new RewardIcon;i.setValue(this.resultData.getLastExpAdd()+"%"),i.setTypeImg("js_zycs_zgjy"),this.groupmoney.addChild(i)}SortUtil.sortOn(this.resultData.rewardItem,["sortType","quality"],[SortType.up,SortType.down]),this.listData.source=this.resultData.rewardItem,this.setOtherShow()},e.prototype.setOtherShow=function(){5==this.resultData.type},e.prototype.showJJC=function(){Timer.ins()["do"](0,1e3,5,this.updateLabel,this),this.lbdesc.text="";var t=new RewardIcon;t.setRank("js_zycs_lszgpm",JJCSys.ins().bestRank,NumberType.Iconnum,153,-1,-4),this.groupmoney.addChild(t);var e=new RewardIcon;if(e.setRank("js_zycs_dqpm",JJCSys.ins().myRank,NumberType.Powernum,112,-1,-2),this.groupmoney.addChild(e),SortUtil.sortOn(JJCSys.ins().awards,["quality"],[SortType.down]),this.listData.source=JJCSys.ins().awards,JJCSys.ins().diamond>0){this.lastGroup.visible=!0;var i=[];i.push(GFunc.creatRewardDataById(CurType.yb,JJCSys.ins().diamond)),this.listData0.source=i,this.scroller.height=200}},e.prototype.showGuildBoss=function(){Timer.ins()["do"](0,1e3,5,this.updateLabel,this),this.scroller.height=440,this.lbdesc.text="";var t,e=new RewardIcon;for(e.setRank("js_zycs_bctzsh",this.resultData.damage,NumberType.Powernum,98,-2),this.groupmoney.addChild(e),t=0;t<this.resultData.rewardCurrency.length;t++){var i=new RewardIcon;this.resultData.rewardCurrency[t].count>0&&(i.setData(this.resultData.rewardCurrency[t]),this.groupmoney.addChild(i))}SortUtil.sortOn(this.resultData.rewardItem,["quality"],[SortType.down]),this.listData.source=this.resultData.rewardItem,this.setOtherShow()},e.prototype.close=function(){t.prototype.close.call(this),Timer.ins().removeAll(this)},e.prototype.escFubBen=function(){Timer.ins().remove(this.updateLabel,this),1!=this.resultData.type&&FbSys.ins().sendGetFubenReward(),this.closeFunc&&(this.closeFunc(),this.closeFunc=null)},e.prototype.updateLabel=function(t){0>=t&&this.onCloseBtn(),3==this.resultData.type?this.closeBtn.label=Lang.fb_str19.replace("$second$",t.toString()):4==this.resultData.type?this.closeBtn.label=Lang.fb_str19.replace("$second$",t.toString()):this.closeBtn.label=Lang.common_str47.replace("$second$",t.toString())},e.prototype.onTap=function(t){switch(t.currentTarget){case this.closeBtn:this.onCloseBtn();break;case this.closeBtn0:FbSys.ins().sendExitFb(),closeWin(this)}},e.prototype.onCloseBtn=function(){if(3==this.resultData.type){var t=Cfg.getConfig(MainTaskConfig,TaskSys.ins().taskId);t.type==TaskType.wanmoPata&&FbSys.ins().wanmoModel.fbId==t.showTarget&&1==TaskSys.ins().mainTaskStatus?(FbSys.ins().sendGetFubenReward(),FbSys.ins().sendWanmoFight(),closeWin(this)):(FbSys.ins().sendGetFubenReward(),FbSys.ins().sendWanmoFight(),closeWin(this))}else 4==this.resultData.type?(FbSys.ins().sendGetFubenReward(),FbSys.ins().sendDekaronHeiAn(),closeWin(this)):6==this.resultData.type?FbSys.ins().sendExitFb():(FbSys.ins().sendExitFb(),this.escFubBen());closeWin(this)},e}(BaseWinSingle);__reflect(ResultWin.prototype,"ResultWin"),window.ResultWin=ResultWin;var ActivityType20Config=function(){function t(){}return t}();__reflect(ActivityType20Config.prototype,"ActivityType20Config");var ResultWinGuZhan=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.resultData=new FbResultGuZhanData,e}return __extends(e,t),e.prototype.open=function(e){t.prototype.open.call(this,e),this.resultData=e,this.addClickE(this.btnBuy,this.onClick),this.addLsn(FbSys.ins().patchguZhanModeUpdate,this.iniData),FbSys.ins().sendExitFb()},e.prototype.setSkinName=function(){this.skinName="ResultGuZhanSkin"},e.prototype.initUI=function(){t.prototype.initUI.call(this),this.layer=LayerMgr.Popup,this.setSkinPart("itemReward1",new ItemBaseReward),this.setSkinPart("itemReward2",new ItemBaseReward),this.setSkinPart("priceIcon",new PriceIcon),this.list.itemRenderer=ItemBaseReward,this.priceIcon.setType(CurType.yb),this.addBg()},e.prototype.iniData=function(){var t=Cfg.getConfig(GuzhanchangConfig);this.lbCount.text=this.resultData.killCount.toString(),this.itemReward1.data=t.dayReward[0];var e=t.extraReward[0],i=Cfg.getItemCfg(e.id),n=FbSys.ins().guZhanMode;this.itemReward2.data=e,this.itemReward2.data=n.getConfig().extraReward[0],this.itemReward2.setYiLingQu(n.rewardYiMai()),this.btnBuy.enabled=!n.rewardYiMai(),SortUtil.sortOn(this.resultData.rewardItem,["quality","id"],[SortType.down,SortType.down]),this.list.dataProvider=new eui.ArrayCollection(this.resultData.rewardItem),this.lbRewardName.text=i.getName(),this.lbRewardName.textColor=GConst.PZColor[i.quality],this.priceIcon.setPrice(t.price),this.lbDate.textFlow=addColorTF(getFormatTime(this.resultData.time,"hh小时mm分ss秒"))},e.prototype.onClick=function(t){switch(t.currentTarget){case this.btnBuy:GFunc.checkCurrency(CurType.yb,FbSys.ins().guZhanMode.getConfig().price)&&FbSys.ins().sendBuyReward()}},e}(BaseWin);__reflect(ResultWinGuZhan.prototype,"ResultWinGuZhan"),window.ResultWinGuZhan=ResultWinGuZhan;var ActivityType20ExConfig=function(){function t(){}return t}();__reflect(ActivityType20ExConfig.prototype,"ActivityType20ExConfig");var ResultWinKfBossSd=function(t){function e(){return t.call(this)||this}return __extends(e,t),e.prototype.iniData=function(){t.prototype.iniData.call(this),this.lbTips.visible=0==this.resultData.rewardItem.length},e.prototype.sendExitFb=function(){},e}(ResultWinBossHome);__reflect(ResultWinKfBossSd.prototype,"ResultWinKfBossSd"),window.ResultWinKfBossSd=ResultWinKfBossSd;var ResultWinKfBossSdLose=function(t){function e(){return t.call(this)||this}return __extends(e,t),e.prototype.sendExitFb=function(){},e}(ResultWinKfBossLose);__reflect(ResultWinKfBossSdLose.prototype,"ResultWinKfBossSdLose"),window.ResultWinKfBossSdLose=ResultWinKfBossSdLose;var ResultWinLose=function(t){function e(){var e=t.call(this)||this;return e.isQuit=!0,e.resultData=new FbResultData,e}return __extends(e,t),e.prototype.initUI=function(){t.prototype.initUI.call(this),this.layer=LayerMgr.Popup,this.skinName="ResultSkin2",this.addBg(),this.listData=new eui.ArrayCollection},e.openCheck=function(t){var e=t;return 12==e.type?!1:!0},e.prototype.iniData=function(){Timer.ins()["do"](0,1e3,15,this.updateLabel,this);var t=0;for(t=0;t<this.resultData.rewardCurrency.length;t++){var e=new RewardIcon;e.setData(this.resultData.rewardCurrency[t]),this.groupmoney.addChild(e)}this.list.itemRenderer=ItemBaseReward,this.listData.source=this.resultData.rewardItem,this.imghyh.visible=0==this.resultData.rewardItem.length,this.imghyh.source="js_zycs_zjzl"},e.prototype.open=function(e){var i=this;t.prototype.open.call(this),this.resultData=e,this.list.itemRenderer=ItemBase,this.list.dataProvider=this.listData,this.resultCreateRole.open(!1,function(){closeWin(i)},this),7==this.resultData.type?this.showJJC():11==this.resultData.type?this.showGuildBoss():this.iniData()},e.prototype.showJJC=function(){Timer.ins()["do"](0,1e3,15,this.updateLabel,this);var t=new RewardIcon;t.setRank("js_zycs_dqpm",JJCSys.ins().myRank,NumberType.Iconnum,113,-1,-4),this.groupmoney.addChild(t);for(var e=[],i=0;i<this.resultData.rewardCurrency.length;i++){var n=this.resultData.rewardCurrency[i].id,a=this.resultData.rewardCurrency[i].count;e.push(GFunc.creatUnknown(n,a))}for(var i=0;i<this.resultData.rewardItem.length;i++){var n=this.resultData.rewardItem[i].id,a=this.resultData.rewardItem[i].count;e.push(GFunc.creatUnknown(n,a))}this.listData.source=e,this.imghyh.visible=0==e.length,this.imghyh.source="js_zycs_zjzl"},e.prototype.showGuildBoss=function(){Timer.ins()["do"](0,1e3,15,this.updateLabel,this);var t=0;for(t=0;t<this.resultData.rewardCurrency.length;t++){var e=new RewardIcon;e.setData(this.resultData.rewardCurrency[t]),this.groupmoney.addChild(e)}for(var i=[],n=0;n<this.resultData.rewardItem.length;n++){var a=this.resultData.rewardItem[n].id,o=this.resultData.rewardItem[n].count;i.push(GFunc.creatUnknown(a,o))}SortUtil.sortOn(i,["quality"],[SortType.down]),this.listData.source=i,this.imghyh.visible=!0,this.imghyh.source="js_zycs_zjzl"},e.prototype.close=function(){t.prototype.close.call(this),this.resultCreateRole.close(),Timer.ins().remove(this.updateLabel,this),FbSys.ins().fbId>0&&FbSys.ins().sendExitFb(),this.closeFunc&&(this.closeFunc(),this.closeFunc=null),this.bossmc&&(DisUtil.remove(this.bossmc),this.bossmc=null),14==this.resultData.type&&openWin(GuildMapWin)},e.prototype.updateLabel=function(t){0>=t&&closeWin(this),this.closeBtn.label=Lang.common_str48.replace("$second$",t.toString())},e}(BaseWinSingle);__reflect(ResultWinLose.prototype,"ResultWinLose"),window.ResultWinLose=ResultWinLose;var ResultWinMapBoss=function(t){function e(){var e=t.call(this)||this;e.exp=0,e.gold=0,e.layer=LayerMgr.Popup,e.skinName="ResultWinMapBossSkin",e.addBg(),e.clickClose=!1,e.list.itemRenderer=ItemBaseReward,e.list.dataProvider=e.listData=new eui.ArrayCollection,e.expEff=new MC,e.expEff.playFile(getEffName("greenarrow"),-1),e.mcExpGroup.addChild(e.expEff),e.goldEff=new MC,e.goldEff.playFile(getEffName("greenarrow"),-1),e.mcGoldGroup.addChild(e.goldEff),e.bg.visible=!1;var i=MC.create(ResMgr.getEffName("win"),-1);return e.titleGroup.addChild(i),e}return __extends(e,t),e.prototype.open=function(e,i,n){t.prototype.open.call(this),this.closeFun=n,this.addClickE(this.btnClose,this.onTap),this.addLsn(LogicSys.ins().patchEnterMap,this.updateMap),this.iniData(e,i)},e.prototype.close=function(){t.prototype.close.call(this),this.closeFun&&this.closeFun()},e.prototype.updateMap=function(){GFunc.isGuaJiFb(FbSys.ins().fbId)||closeWin(this)},e.prototype.iniData=function(t,e){Timer.ins()["do"](0,1e3,3,this.updateLabel,this);var i=Cfg.getConfig(GuajiFubenConfig,t);this.listData.source=e,this.exp=i.exp,this.gold=i.gold,this.mapNum.text="d"+i.custom+"g",this.setPanelData()},e.prototype.setPanelData=function(){this.imgExpNum.text="0",this.imgGoldNum.text="0",this.numEff()},e.prototype.numEff=function(){var t=this,e=this.exp,i=this.gold;Timer.ins()["do"](0,Timer.EVERY_FRAME,25,function(n){if(n>0){var a=e,o=i;a+=Math.round(Math.random()*a),o+=Math.round(Math.random()*o);var s=(t.exp/2).toString(),r=(t.gold/2).toString(),u="",h="";a.toString().length==s.length?(u=a.toString().slice(1),h=o.toString().slice(1)):(u=a+"",h=o+""),s=s.charAt(0),r=r.charAt(0),s+=u,r+=h,t.imgExpNum.text=s+"_s",t.imgGoldNum.text=r+"_s"}else t.imgExpNum.text=t.exp+"_s",t.imgGoldNum.text=t.gold+"_s"},this)},e.prototype.flyEff=function(){var t=this;Timer.ins().remove(this.updateLabel,this),this.mapGroup.visible=!1;var e=egret.Tween.get(this.mapIcon),i=getWin(MainWin).com_Name_btnRechargeMesonry(),n=i.localToGlobal();n=this.mapIcon.globalToLocal(n.x,n.y),e.wait(400).to({x:n.x,y:n.y+240},800).call(function(){t.onCloseBtn()},this)},e.prototype.updateLabel=function(t){0>=t&&this.onCloseBtn(),this.btnClose.label=Lang.common_str47.replace("$second$",t.toString())},e.prototype.onTap=function(t){switch(t.currentTarget){case this.btnClose:this.onCloseBtn()}},e.prototype.onCloseBtn=function(){closeWin(this)},e}(BaseWinSingle);__reflect(ResultWinMapBoss.prototype,"ResultWinMapBoss"),window.ResultWinMapBoss=ResultWinMapBoss;var ResultWinZhuZai=function(t){function e(){var e=t.call(this)||this;return e.resultData=new FbResultZhuZaiData,e}return __extends(e,t),e.prototype.initUI=function(){this.layer=LayerMgr.Popup,this.skinName="ResultZhuZaiBossSkin",this.addBg(),this.listData=new eui.ArrayCollection,this.clickClose=!1},e.prototype.open=function(e){t.prototype.open.call(this),this.resultData=e,this.addClickE(this.closeBtn,this.onTap),this.addClickE(this.closeBtn11,this.onTap),this.list.itemRenderer=ItemBaseReward,this.list.dataProvider=this.listData,this.currentState=this.resultData.isWin?"win":"lost",this.iniData()},e.prototype.iniData=function(){Timer.ins()["do"](0,1e3,5,this.updateLabel,this),this.lbfisrtName.text=this.resultData.fisrtName,this.lbLastName.text=this.resultData.killName,this.lbRank.text=this.resultData.rank.toString(),SortUtil.sortOn(this.resultData.rewardItem,["quality"],[SortType.down]),this.listData.source=this.resultData.rewardItem},e.prototype.close=function(){t.prototype.close.call(this),Timer.ins().removeAll(this)},e.prototype.escFubBen=function(){Timer.ins().remove(this.updateLabel,this),this.closeFunc&&(this.closeFunc(),this.closeFunc=null)},e.prototype.updateLabel=function(t){0>=t&&this.onCloseBtn(),this.closeBtn.label=Lang.common_str47.replace("$second$",t.toString())},e.prototype.onTap=function(t){switch(t.currentTarget){case this.closeBtn:case this.closeBtn11:this.onCloseBtn()}},e.prototype.onCloseBtn=function(){FbSys.ins().sendExitFb(),this.escFubBen(),closeWin(this)},e}(BaseWinSingle);__reflect(ResultWinZhuZai.prototype,"ResultWinZhuZai"),window.ResultWinZhuZai=ResultWinZhuZai;var ResultYunBiaoLostWin=function(t){function e(){var e=t.call(this)||this;return e.isQuit=!0,e.resultData=new FbResultYunBiaoData,e}return __extends(e,t),e.prototype.initUI=function(){t.prototype.initUI.call(this),this.layer=LayerMgr.Popup,this.skinName="ResultYunBiaoLostWinEUI",this.addBg(),this.listData=new eui.ArrayCollection,this.imgwptitle.visible=!1},e.openCheck=function(t){return!0},e.prototype.iniData=function(){Timer.ins()["do"](0,1e3,15,this.updateLabel,this);var t=0;for(t=0;t<this.resultData.rewardCurrency.length;t++){var e=new RewardIcon;e.setData(this.resultData.rewardCurrency[t]),this.groupmoney.addChild(e)}this.list.itemRenderer=ItemBaseReward,SortUtil.sortOn(this.resultData.rewardItem,["quality"],[SortType.down]),this.listData.source=this.resultData.rewardItem,this.imghyh.visible=0==this.resultData.rewardItem.length,this.imghyh.source="js_zycs_zjzl",this.imgwptitle.visible=this.resultData.rewardItem.length>0,this.lbDesc.textFlow=addColorTF(this.resultData.desc)},e.prototype.open=function(e){var i=this;t.prototype.open.call(this),this.resultData=e,this.list.itemRenderer=ItemBase,this.list.dataProvider=this.listData,this.resultCreateRole.open(!1,function(){closeWin(i)},this),this.iniData()},e.prototype.close=function(){t.prototype.close.call(this),this.resultCreateRole.close(),Timer.ins().remove(this.updateLabel,this),FbSys.ins().fbId>0&&FbSys.ins().sendExitFb(),this.closeFunc&&(this.closeFunc(),this.closeFunc=null)},e.prototype.updateLabel=function(t){0>=t&&closeWin(this),this.closeBtn.label=Lang.common_str48.replace("$second$",t.toString())},e}(BaseWinSingle);__reflect(ResultYunBiaoLostWin.prototype,"ResultYunBiaoLostWin"),window.ResultYunBiaoLostWin=ResultYunBiaoLostWin;var RewardIcon=function(t){function e(){var e=t.call(this)||this;return e.skinName="RewardIconSkin",e}return __extends(e,t),e.prototype.getPrice=function(){return this._price},e.prototype.setValue=function(t){t!=this._price&&(this._price=t,this.priceLabel.text=""+this._price)},e.prototype.setTimer=function(t){this.group1.removeChild(this.iconImg),this.iconImg.visible=!1,this.priceLabel.x=120,this.priceLabel.text=getFormatTime(t,"mm分ss秒"),this.iconImg1.source="js_zycs_tgsj"},e.prototype.setData=function(t){var e=t;GFunc.isCur(e.id)&&this.setType(e.id),this._type=e.id,this.setValue(e.count+"")},e.prototype.getType=function(){return this._type},e.prototype.setTypeImg=function(t){this.iconImg1.source=t,this.iconImg.source=""},e.prototype.setType=function(t){if(this._type!=t){this._type=t;var e="";switch(this._type){case CurType.exp:e="js_zycs_hdjy";break;case CurType.gold:e="js_zycs_hdjb";break;case CurType.yb:e="js_zycs_hdjb";break;case CurType.mojing:e="js_zycs_hdmj";break;case CurType.guildContrib:e="js_zycs_hdmj";break;case CurType.fuildfund:e="js_zycs_hdmj";break;case CurType.elementDust:e="js_zycs_hdfm";break;case CurType.crystal:e="js_zycs_hdjb";break;case CurType.starsoul:e="js_zycs_hdjh";break;case CurType.damonIntegral:break;case CurType.achieve:}this.iconImg.source=ResMgr.getItemIconMin(Cfg.getItemCfg(this._type).getIcon()),this.iconImg1.source=e}},e.prototype.setRank=function(t,e,i,n,a,o){void 0===n&&(n=0),void 0===a&&(a=0),void 0===o&&(o=0),this.iconImg1.source=t,this.imgNum.text=e.toFixed(0),this.imgNum.x=n,this.imgNum.y=a,this.imgNum.visible=!0,this.iconImg.source="",this.priceLabel.text=""},e}(BaseEUI);__reflect(RewardIcon.prototype,"RewardIcon"),window.RewardIcon=RewardIcon;var ActivityType21Config=function(){function t(){}return t}();__reflect(ActivityType21Config.prototype,"ActivityType21Config");var EmoScoringPanel=function(t){function e(){var e=t.call(this)||this;return e.config=new DevilfbConfig,e.initUI(),e}return __extends(e,t),e.prototype.initUI=function(){this.skinName="EmoScoringSkin",this.beimc=new MC,this.beimc.x=19,this.beimc.y=15,this.beimc.touchEnabled=!1,this.groupExp.touchEnabled=!1,this.groupExp.touchChildren=!1,this.groupExp.addChild(this.beimc),this.mcCircleMask=new MaskSector,this.mcCircleMask.setParam(82,-90,270),this.mcCircleMask.x=this.imgYuan.x+82,this.mcCircleMask.y=this.imgYuan.y+81,this.groupScore.addChild(this.mcCircleMask),this.imgYuan.mask=this.mcCircleMask},e.prototype.formatCountDown=function(t){var e;e=1==FbSys.ins().emoModel.countDownType?Lang.fb_str21:Lang.fb_str22,this.lbTimeDesc.text=e,this.time=t+"s"},e.prototype.open=function(){this.addClickE(this.btnCoinGuWu,this.onclick),this.addClickE(this.btnClose,this.onclick),this.addLsn(FbSys.ins().patchEmoMapUpdate,this.updataData),this.addLsn(FbSys.ins().patchEmoScore,this.showScore),this.addLsn(FbSys.ins().patchEmoGuWu,this.guwu),this.addLsn(FbSys.ins().patchMoneyChange,this.onGuwuMoneyChange),this.addLsn(FbSys.ins().patchFbCurrency,this.showFbCurrencyStatistics),this.addLsn(RpSys.ins().patchRp,this.updateRp),this.addLsn(FbSys.ins().patchEmoGuWu,this.guwuRedPoint),this.guwu(),this.config=Cfg.getConfig(DevilfbConfig,FbSys.ins().emoModel.fbId),this.updataData(),this.showScore(),this.showFbCurrencyStatistics(),this.updateRp(),this.guwuRedPoint()},e.prototype.close=function(){t.prototype.close.call(this),Timer.ins().removeAll(this)},e.prototype.guwuRedPoint=function(){var t=this.canGuWu(1)||this.canGuWu(2);this.btnCoinGuWu.redPoint.visible=t,t?Timer.ins()["do"](1e3,3e3,0,this.doudong,this,TimerType.FIRST):Timer.ins().remove(this.doudong,this)},e.prototype.doudong=function(){DisUtil.shakeIt(this.btnCoinGuWu,5,100)},e.prototype.canGuWu=function(t){var e=!1,i=Cfg.getConfig(DevilfbConfig,FbSys.ins().emoModel.fbId),n=Cfg.getConfig(DevilInspireConfig,t),a=FbSys.ins().emoModel.guwuAttrData,o=a.rmbCount+a.ybCount;return o>=i.maxSp?e=!1:1==t?a.ybCount>=n.maxTime?e=!1:GFunc.isConsumeEnough(i.goldSp[0])&&(e=!0):a.rmbCount>=n.maxTime?e=!1:GFunc.isConsumeEnough(i.diamondSp[0])&&(e=!0),e},e.prototype.guwu=function(){var t=FbSys.ins().guWuData.geteMoWuGuDatas()[1],e=t.guwuAttrData.ybCount+t.guwuAttrData.rmbCount,i=e/t.maxCount*100;this.groupJiaCheng.visible=e>0,this.lbjiacheng.text=Lang.fb_str23+i+"%"},e.prototype.onGuwuMoneyChange=function(t,e){var i,n;n=1==t?this.lbMoney1:this.lbMoney2,egret.Tween.removeTweens(n),i=egret.Tween.get(n),n.visible=!0,n.alpha=1,n.textFlow=addColorTF(Lang.common_str49+" "+e.count+" "+Cfg.getItemCfg(e.id).getName(),GConst.PZColor[0]),i.wait(1e3).to({alpha:0},500).call(function(){n.visible=!1})},e.prototype.updataData=function(){this.onOpenTimeUpdate()},e.prototype.onOpenTimeUpdate=function(){var t=FbSys.ins().emoModel.countDown-Timer.ins().getTimer();t&&Timer.ins()["do"](0,1e3,Math.ceil(t/1e3),this.formatCountDown,this,TimerType.LAST)},e.prototype.showScore=function(){var t=FbSys.ins().emoModel.score;this.lbcurjisha.textFlow=addColorTF(Lang.fb_str40+StrUtil.addColor(t+"",13486270));var e=Cfg.getDevilfbRate(FbSys.ins().emoModel.fbId,t),i=GFunc.getFbRate(e+1);this.imgMyScore.source=ResMgr.imgFbScore[e];var n=this.config.rate[e+1>=this.config.rate.length?e:e+1];this.lbmubiao.textFlow=addColorTF(Lang.fb_str41+n+Lang.fb_str42+StrUtil.addColor(i+Lang.common_str25,13470975));var a=100*Cfg.getDevilfbExp(FbSys.ins().emoModel.fbId,t);this.lbdesc.textFlow=addColorTF(Lang.fb_str265.replace("$scoreRate$",i).replace("$exp$",StrUtil.addColor(a+"%",5949490)));
var o,s=this.config.rate[e+1>=this.config.rate.length?e:e];n-s==0?o=360:(o=(t-s)*(360/(n-s)),o>360&&(o=360)),this.mcCircleMask.setValue(o,360)},e.prototype.onclick=function(t){switch(t.currentTarget){case this.btnCoinGuWu:openWin(GuWuWin2,FbSys.ins().guWuData.geteMoWuGuDatas());break;case this.btnClose:var e=new PopupData(Lang.fb_str26);e.setFunction(this,function(){FbSys.ins().sendExitFb()}),openWin(CommonTipsWin,e)}},e.prototype.showFbCurrencyStatistics=function(){var t=Cfg.getConfig(FubenConfig,FbSys.ins().fbId).group;if(FbSys.ins().isShowFuBenCurrency(t)){var e=FbSys.ins().fubenCurrency;this.groupShouYi.visible=!0,this.helpTxt.text=Lang.fb_str28+FbSys.ins().getFubenCurrency(t),this.curExp=e.toFixed(0)}else this.groupShouYi.visible=!1},e.prototype.getEmoFbGrowBtn=function(){return this.groupGuwu},e}(BasePanel);__reflect(EmoScoringPanel.prototype,"EmoScoringPanel"),window.EmoScoringPanel=EmoScoringPanel;var EmoWin=function(t){function e(){var e=t.call(this)||this;return e.winType=WinType.MainWin,e}return __extends(e,t),e.prototype.getExpBtn=function(){return this.validateNow(),this.getPanel(XueSePanel).getExpBtn()},e.prototype.getEmoEnterBtn=function(){return this.getPanel(EmoPanel).getEnterBtn()},e.prototype.getXuseEnterBtn=function(){return this.getPanel(XueSePanel).getEnterBtn()},e.panelNames=[EmoPanel,XueSePanel],e}(BaseWinAutoTab);__reflect(EmoWin.prototype,"EmoWin"),window.EmoWin=EmoWin;var GuWuData=function(t){function e(){return t.call(this)||this}return __extends(e,t),e.prototype.geteMoWuGuDatas=function(){for(var t=FbSys.ins().emoModel,i=[],n=Cfg.getConfigs(DevilInspireConfig),a=Cfg.getConfig(DevilfbConfig,FbSys.ins().emoModel.fbId),o=0;o<n.length;o++){var s=n[o],r=new GuWuInfoData;r.type=s.id,1==s.id?r.goldSp=a.goldSp:r.goldSp=a.diamondSp,r.guwuAttrData=t.guwuAttrData,r.attMax=s.maxTime,r.maxCount=a.maxSp,r.fungold=this.oneMoGuWu.bind(e,s.id),i.push(r)}return i},e.prototype.getXueseWuGuDatas=function(){for(var t=FbSys.ins().xueSeModel,i=[],n=Cfg.getConfigs(XueseInspireConfig),a=Cfg.getConfig(XuesefbConfig,FbSys.ins().xueSeModel.fbId),o=0;o<n.length;o++){var s=n[o],r=new GuWuInfoData;r.type=s.id,1==s.id?r.goldSp=a.goldSp:r.goldSp=a.diamondSp,r.guwuAttrData=t.guwuAttrData,r.attMax=s.attMax,r.fungold=this.onxueseGuWu.bind(e,s.id),i.push(r)}return i},e.prototype.onxueseGuWu=function(t){var e="",i=FbSys.ins().xueSeModel,n=i.fbConfig,a=Cfg.getConfig(XueseInspireConfig,t),o=Cfg.getConfig(XueseInspireConfig,2);i.guwuAttrData.atk>=a.attMax&&i.guwuAttrData.hp>=a.hpMax?o.attMax==i.guwuAttrData.atk?showTipsWarn(Lang.fb_str27):(e=(1==t?Cfg.getItemCfg(CurType.gold).getName():Cfg.getItemCfg(CurType.yb).getName())+Lang.fb_str27,showTipsWarn(e)):1==t?i.isfirst?FbSys.ins().sendXueSeGuWu(t):GFunc.checkConsumeEnough1(n.goldSp[0])&&FbSys.ins().sendXueSeGuWu(t):GFunc.checkConsumeEnough1(n.diamondSp[0])&&FbSys.ins().sendXueSeGuWu(t)},e.prototype.oneMoGuWu=function(t){var e=Cfg.getConfig(DevilfbConfig,FbSys.ins().emoModel.fbId),i=Cfg.getConfig(DevilInspireConfig,t),n=FbSys.ins().emoModel.guwuAttrData,a=n.ybCount+n.rmbCount;a>=e.maxSp?showTipsWarn(Lang.fb_str27):1==t?n.ybCount>=i.maxTime?showTipsWarn(Cfg.getItemCfg(CurType.gold).getName()+Lang.fb_str27):GFunc.checkConsumeEnough1(e.goldSp[0])&&FbSys.ins().sendEmoGuWu(t):n.rmbCount>=i.maxTime?showTipsWarn(Cfg.getItemCfg(CurType.yb).getName()+Lang.fb_str27):GFunc.checkConsumeEnough1(e.diamondSp[0])&&FbSys.ins().sendEmoGuWu(t)},e.prototype.getMoLongWuGuDatas=function(){var t=FbSys.ins().molongData,i=[],n=Cfg.getConfigs(MolongInspireConfig),a=Cfg.getConfig(MolongFubenConfig,CondType.Equal,MolongFubenConfig.fbId,FbSys.ins().fbId);if(!a)return null;for(var o=0;o<n.length;o++){var s=n[o],r=new GuWuInfoData;r.type=s.id,1==s.id?r.goldSp=a.goldSp:r.goldSp=a.diamondSp,r.guwuAttrData=t.guwuAttrData,r.attMax=s.attMax,r.fungold=this.onMoLongGuWu.bind(e,s.id),i.push(r)}return i},e.prototype.onMoLongGuWu=function(t){var e="",i=Cfg.getConfig(MolongFubenConfig,CondType.Equal,MolongFubenConfig.fbId,FbSys.ins().fbId),n=Cfg.getConfig(MolongInspireConfig,t);FbSys.ins().molongData.guwuAttrData.atk>=n.attMax?Cfg.getConfig(MolongInspireConfig,2).attMax==FbSys.ins().molongData.guwuAttrData.atk?showTipsWarn(Lang.fb_str27):(e=(1==t?Cfg.getItemCfg(CurType.gold).name:Cfg.getItemCfg(CurType.yb).name)+Lang.fb_str27,showTipsWarn(e)):1==t?GFunc.checkConsumeEnough1(i.goldSp[0])&&FbSys.ins().sendMoLongGuWu(t):GFunc.checkConsumeEnough1(i.diamondSp[0])&&FbSys.ins().sendMoLongGuWu(t)},e.prototype.getShenDianWuGuDatas=function(){for(var t=FbSys.ins().shendianData,i=[],n=Cfg.getConfigs(ShenghunInspireConfig),a=Cfg.getConfig(ShenghunFubenConfig,CondType.Equal,ShenghunFubenConfig.fbId,FbSys.ins().fbId),o=0;o<n.length;o++){var s=n[o],r=new GuWuInfoData;r.type=s.id,1==s.id?r.goldSp=a.goldSp:r.goldSp=a.diamondSp,r.guwuAttrData=t.guwuAttrData,r.attMax=s.attMax,r.fungold=this.onShenDianGuWu.bind(e,s.id),i.push(r)}return i},e.prototype.onShenDianGuWu=function(t){var e="",i=Cfg.getConfig(ShenghunFubenConfig,CondType.Equal,ShenghunFubenConfig.fbId,FbSys.ins().fbId),n=Cfg.getConfig(ShenghunInspireConfig,t);FbSys.ins().shendianData.guwuAttrData.atk>=n.attMax?Cfg.getConfig(ShenghunInspireConfig,t).attMax==FbSys.ins().shendianData.guwuAttrData.atk?showTipsWarn(Lang.fb_str27):(e=(1==t?Cfg.getItemCfg(CurType.gold).name:Cfg.getItemCfg(CurType.yb).name)+Lang.fb_str27,showTipsWarn(e)):1==t?GFunc.checkConsumeEnough1(i.goldSp[0])&&FbSys.ins().sendShenDianGuWu(t):GFunc.checkConsumeEnough1(i.diamondSp[0])&&FbSys.ins().sendShenDianGuWu(t)},e}(BaseSys);__reflect(GuWuData.prototype,"GuWuData"),window.GuWuData=GuWuData;var GuWuInfoData=function(){function t(){this.guwuAttrData=new GuwuAttrData}return t}();__reflect(GuWuInfoData.prototype,"GuWuInfoData");var GuwuAttrData=function(){function t(){this.hp=0,this.atk=0,this.ybCount=0,this.rmbCount=0}return t.prototype.resetAll=function(){this.hp=0,this.atk=0,this.ybCount=0,this.rmbCount=0},t}();__reflect(GuwuAttrData.prototype,"GuwuAttrData");var GuWuItem=function(t){function e(){var e=t.call(this)||this;return e.skinName="GuWuItemEUI",e.setSkinPart("priceIcon",new PriceIcon),e.addClickE(e.btnGuWu,e.onClick),e}return __extends(e,t),e.prototype.onClick=function(){this.data.fungold()},e.prototype.dataChanged=function(){var t=this.data;this.imgIcon.source=1==t.type?"em_zycs_jbgw":"em_zycs_zsgw",this.priceIcon.setType(1==t.type?CurType.gold:CurType.yb),this.priceIcon.setPrice(t.goldSp[0].count),this.btnGuWu.filters=t.guwuAttrData.atk>=t.attMax?DisUtil.grayFilter():[]},e}(BaseItemRender);__reflect(GuWuItem.prototype,"GuWuItem"),window.GuWuItem=GuWuItem;var GuWuItem2=function(t){function e(){var e=t.call(this)||this;return e.skinName="GuWuItemEUI",e.setSkinPart("priceIcon",new PriceIcon),e.addClickE(e.btnGuWu,e.onClick),e}return __extends(e,t),e.prototype.onClick=function(t){this.data.fungold()},e.prototype.dataChanged=function(){var t=this.data;this.imgIcon.source=1==t.type?"em_zycs_jbgw":"em_zycs_zsgw",this.priceIcon.setType(1==t.type?CurType.gold:CurType.yb),this.priceIcon.setPrice(t.goldSp[0].count);var e=t.guwuAttrData.ybCount+t.guwuAttrData.rmbCount,i=1==t.type?t.guwuAttrData.ybCount:t.guwuAttrData.rmbCount;this.btnGuWu.filters=e>=t.maxCount||i>=t.attMax?DisUtil.grayFilter():[]},e}(BaseItemRender);__reflect(GuWuItem2.prototype,"GuWuItem2"),window.GuWuItem2=GuWuItem2;var GuWuWin=function(t){function e(){var e=t.call(this)||this;return e.setSkinName(),e.addBg(),e.layer=LayerMgr.Popup,e}return __extends(e,t),e.prototype.setSkinName=function(){this.skinName="GuWuWinEUI"},e.prototype.initUI=function(){t.prototype.initUI.call(this),this.listArray=new eui.ArrayCollection,this.itemList.dataProvider=this.listArray,this.itemList.itemRenderer=GuWuItem},e.prototype.open=function(e){t.prototype.open.call(this),this.datas=e;var i=FbSys.ins();this.addLsn(RpSys.ins().patchRp,this.updateRp),this.addLsn(i.patchEmoGuWu,this.update),this.addLsn(i.patchXueSeGuWu,this.update),this.addLsn(i.patchMoLongGuWu,this.update),this.addLsn(i.patchShenDianGuWu,this.update),this.update()},e.prototype.update=function(){var t=this.datas[1],e=t.guwuAttrData.atk/t.attMax*100;this.labelContent.textFlow=addColorTF(Lang.fb_str264),this.labelContent1.textFlow=addColorTF(Lang.fb_str268.replace("$jiacheng$",e.toString())),this.listArray.source=this.datas},e}(BaseWinSingle);__reflect(GuWuWin.prototype,"GuWuWin"),window.GuWuWin=GuWuWin;var GuWuWin2=function(t){function e(){var e=t.call(this)||this;return e.setSkinName(),e.addBg(),e.layer=LayerMgr.Popup,e}return __extends(e,t),e.prototype.setSkinName=function(){this.skinName="GuWuWinEUI"},e.prototype.initUI=function(){t.prototype.initUI.call(this),this.listArray=new eui.ArrayCollection,this.itemList.dataProvider=this.listArray,this.itemList.itemRenderer=GuWuItem2},e.prototype.open=function(e){t.prototype.open.call(this),this.datas=e,this.addLsn(RpSys.ins().patchRp,this.updateRp),this.addLsn(FbSys.ins().patchEmoGuWu,this.update),this.update()},e.prototype.update=function(){var t=this.datas[1],e=t.guwuAttrData.ybCount+t.guwuAttrData.rmbCount,i=e/t.maxCount*100;this.labelContent.textFlow=addColorTF(Lang.fb_str264),this.labelContent1.textFlow=addColorTF(Lang.fb_str268.replace("$jiacheng$",i.toString())),this.listArray.source=this.datas},e}(BaseWinSingle);__reflect(GuWuWin2.prototype,"GuWuWin2"),window.GuWuWin2=GuWuWin2;var ActivityType22Config=function(){function t(){}return t}();__reflect(ActivityType22Config.prototype,"ActivityType22Config");var XueSeScoringPanel=function(t){function e(){var e=t.call(this)||this;return e.skinName="EmoScoringSkin",e.beimc=new MC,e.beimc.x=19,e.beimc.y=15,e.beimc.touchEnabled=!1,e.groupExp.touchEnabled=!1,e.groupExp.touchChildren=!1,e.groupExp.addChild(e.beimc),e.mcCircleMask=new MaskSector,e.mcCircleMask.setParam(55,270,-90,1),e.mcCircleMask.x=e.imgYuan.x+55,e.mcCircleMask.y=e.imgYuan.y+55,e.groupScore.addChild(e.mcCircleMask),e.imgYuan.mask=e.mcCircleMask,e}return __extends(e,t),e.prototype.formatCountDown=function(t){var e;1==FbSys.ins().xueSeModel.countDownType?e=Lang.fb_str21:(e=Lang.fb_str22,this.showScore(t)),this.lbTimeDesc.text=e,this.bmpTime.text=t+"s"},e.prototype.open=function(){this.addClickE(this.btntsxl,this.onclick),this.addClickE(this.btnCoinGuWu,this.onclick),this.addClickE(this.btnClose,this.onclick),this.addLsn(FbSys.ins().patchXueSeMapUpdate,this.updataData),this.addLsn(FbSys.ins().patchXueSeGuWu,this.guwu),this.addLsn(FbSys.ins().patchMoneyChange,this.onGuwuMoneyChange),this.addLsn(FbSys.ins().patchXueSeDeFeng,this.showScore),this.addLsn(FbSys.ins().patchFbCurrency,this.showFbCurrencyStatistics),this.addLsn(RpSys.ins().patchRp,this.updateRp),this.addLsn(FbSys.ins().patchXueSeGuWu,this.guwuRedPoint),this.guwu(),this.maxTimer=Cfg.getConfig(XueseCommonConfig).secFight,this.showScore(this.maxTimer),this.updataData(),this.showFbCurrencyStatistics(),this.updateRp(),this.guwuRedPoint()},e.prototype.close=function(){t.prototype.close.call(this),Timer.ins().removeAll(this)},e.prototype.guwuRedPoint=function(){var t=this.canGuWu(1)||this.canGuWu(2);this.btnCoinGuWu.redPoint.visible=t,t?Timer.ins()["do"](1e3,3e3,0,this.doudong,this,TimerType.FIRST):Timer.ins().remove(this.doudong,this)},e.prototype.doudong=function(){DisUtil.shakeIt(this.btnCoinGuWu,5,100)},e.prototype.canGuWu=function(t){var e=!1,i=FbSys.ins().xueSeModel,n=i.fbConfig;if(n){var a=Cfg.getConfig(XueseInspireConfig,t);i.guwuAttrData.atk>=a.attMax&&i.guwuAttrData.hp>=a.hpMax?e=!1:1==t?i.isfirst?e=!0:GFunc.isConsumeEnough(n.goldSp[0])&&(e=!0):GFunc.isConsumeEnough(n.diamondSp[0])&&(e=!0)}return e},e.prototype.guwu=function(){this.groupJiaCheng.visible=FbSys.ins().xueSeModel.guwuAttrData.atk>0||FbSys.ins().xueSeModel.guwuAttrData.hp>0,this.lbjiacheng.text=Lang.fb_str23+.01*FbSys.ins().xueSeModel.guwuAttrData.atk+"%"},e.prototype.onGuwuMoneyChange=function(t,e){var i,n;n=1==t?this.lbMoney1:this.lbMoney2,egret.Tween.removeTweens(n),i=egret.Tween.get(n),n.visible=!0,n.alpha=1,n.textFlow=addColorTF(Lang.common_str49+" "+e.count+" "+Cfg.getItemCfg(e.id).getName(),GConst.PZColor[0]),i.wait(1e3).to({alpha:0},500).call(function(){n.visible=!1})},e.prototype.updataData=function(){this.onOpenTimeUpdate()},e.prototype.onOpenTimeUpdate=function(){var t=FbSys.ins().xueSeModel.countDown-Timer.ins().getTimer();t&&Timer.ins()["do"](0,1e3,Math.ceil(t/1e3),this.formatCountDown,this,TimerType.LAST)},e.prototype.showScore=function(t){var e=this.maxTimer-t;this.lbcurjisha.textFlow=addColorTF(Lang.fb_str24+StrUtil.addColor(e+"s",13486270));var i=Cfg.getXuesefbRate(FbSys.ins().xueSeModel.fbId,this.maxTimer-t),n=Cfg.getXuesefbRateScore(FbSys.ins().xueSeModel.fbId,this.maxTimer-t),a=GConst.fbrate[i];this.imgMyScore.source=ResMgr.imgFbScore[i],this.lbmubiao.textFlow=addColorTF(n+Lang.fb_str25+StrUtil.addColor(a+Lang.common_str25,13470975));var o=100*Cfg.getXuesefbExp(FbSys.ins().xueSeModel.fbId,n);this.lbdesc.textFlow=addColorTF(Lang.fb_str265.replace("$scoreRate$",a).replace("$exp$",StrUtil.addColor(o+"%",5949490)));var s,r=Cfg.getXuesefbRateScore1(FbSys.ins().xueSeModel.fbId,n-1);0==e?s=360:r-this.maxTimer==0?s=0:(s=(e-r)*(360/(n-r)),s>360&&(s=0)),this.mcCircleMask.setValue(360-s,360)},e.prototype.onclick=function(t){switch(t.currentTarget){case this.btnCoinGuWu:openWin(GuWuWin,FbSys.ins().guWuData.getXueseWuGuDatas(),FbSys.ins().xueSeModel);break;case this.btnClose:var e=new PopupData(Lang.fb_str26);e.setFunction(this,function(){FbSys.ins().sendExitFb()}),openWin(CommonTipsWin,e)}},e.prototype.showFbCurrencyStatistics=function(){var t=Cfg.getConfig(FubenConfig,FbSys.ins().fbId).group;if(FbSys.ins().isShowFuBenCurrency(t)){var e=FbSys.ins().fubenCurrency;this.groupShouYi.visible=!0,this.helpTxt.text=Lang.fb_str28+FbSys.ins().getFubenCurrency(t),this.countBmp.text=e.toFixed(0)}else this.groupShouYi.visible=!1},e.prototype.getXueseFbGrowBtn=function(){return this.groupGuwu},e}(BasePanel);__reflect(XueSeScoringPanel.prototype,"XueSeScoringPanel"),window.XueSeScoringPanel=XueSeScoringPanel;var XueSeTips=function(t){function e(){var e=t.call(this)||this;return e.layer=LayerMgr.Tips,e.skinName="XueSeTipsEUI",e.mc=new MC,e.mc.x=280,e.mc.y=53,e.groupMC.addChild(e.mc),e.group2.alpha=0,e.group2.x=-433,e.touchChildren=!1,e.touchEnabled=!1,e}return __extends(e,t),e.prototype.open=function(e){var i=this;t.prototype.open.call(this),this.imgDesc.source=e,this.group2.alpha=0,this.group2.x=-433;var n=egret.Tween.get(this.group2);n.to({x:0,alpha:1},200).wait(3e3).call(this.countDown,this),Timer.ins()["do"](200,1,1,function(){i.mc.playFile(getEffName("xspz"),1)},this,TimerType.NONE)},e.prototype.close=function(){for(var e=[],i=0;i<arguments.length;i++)e[i]=arguments[i];t.prototype.close.call(this),Timer.ins().removeAll(this)},e.prototype.countDown=function(){var t=egret.Tween.get(this.group2);t.to({alpha:0},200).call(function(){closeWin(e)})},e.prototype.onclick=function(t){switch(t.currentTarget){case this:closeWin(this)}},e}(BaseWinSingle);__reflect(XueSeTips.prototype,"XueSeTips"),window.XueSeTips=XueSeTips;var ActivityType23Config=function(){function t(){}return t}();__reflect(ActivityType23Config.prototype,"ActivityType23Config");var EquipBossPanelItem=function(t){function e(){var e=t.call(this)||this;return e.iniUI(),e}return __extends(e,t),e.prototype.iniUI=function(){this.skinName="EquipBossPanelItemEUI",this.list.itemRenderer=ItemBaseReward,this.addClickE(this.btnChallenge,this.onClick)},e.prototype.onClick=function(t){var e=this.data,i=e.config;BagSys.ins().checkBagVolumn()&&(e.isopen?0==e.count?showtipsFail("挑战次数不足"):e.isDie?showtipsFail("Boss复活中，请稍后再挑战"):(FbSys.ins().sendEquipBossFight(e.id),closeWin(BossWin)):showtipsFail(i.zsLevel>Actor.ins().zsId?"转生不足，无法挑战":"等级不足，无法挑战"))},e.prototype.dataChanged=function(){var t=this.data,i=t.config;this.list.dataProvider=new eui.ArrayCollection(GFunc.getItemDataRewardByJob(i.rewards)),i.zsLevel>Actor.ins().zsId?this.lbLevelRequire.textFlow=addColorTF(Lang.fb_str98.replace("$lv$",""+GFunc.getZSNameBydb(i.zsLevel))):i.level>Actor.ins().level&&(this.lbLevelRequire.textFlow=addColorTF(Lang.fb_str98.replace("$lv$",""+GFunc.GetLvStrByLv(i.level)))),this.lbBosLv.text=1e4==i.zsLevel?GFunc.GetLvStrByLv(i.level):GFunc.getZSNameBydb(i.zsLevel),this.lbCount.textFlow=addColorTF("挑战次数:"+addColor(t.count,t.count>0?1409280:13967392)),this.imgBossHead.source=ResMgr.getMonsterHead(t.monsterHead),this.btnChallenge.redPoint.visible=RpSys.ins().getData(BossWin,BossBenFuPanel,EquipBossPanel,e,t.id),this.updateTime()},e.prototype.updateTime=function(){var t=this.data;if(t.isDie){var e=t.reliveTick-Timer.ins().getEgretTimer();this.lbDieTime.text=Lang.fb_str101.replace("$time$",""+getFormatTime(Math.floor(e/1e3),"hh:mm:ss"))}this.updateStatus()},e.prototype.updateStatus=function(){var t=this.data;t.isopen?0==t.count?this.currentState="nocount":t.isDie?this.currentState="die":this.currentState="open":this.currentState="nopen",this.validateNow(),this.imgBossHead.filters=t.isDie?DisUtil.grayFilter():[]},e.prototype.getBtnChallenge=function(){return this.btnChallenge},e}(BaseItemRender);__reflect(EquipBossPanelItem.prototype,"EquipBossPanelItem"),window.EquipBossPanelItem=EquipBossPanelItem;var HeiAnItem=function(t){function e(){return t.call(this)||this}return __extends(e,t),e.prototype.setData=function(e){t.prototype.setData.call(this,e),this.mcMonster.y=70,this.imgbg.source="pt_zycs_pt1"},e}(WanMoItem);__reflect(HeiAnItem.prototype,"HeiAnItem"),window.HeiAnItem=HeiAnItem;var ActivityType24Config=function(){function t(){}return t}();__reflect(ActivityType24Config.prototype,"ActivityType24Config");var HeiAnRanking=function(t){function e(){return t.call(this)||this}return __extends(e,t),e.prototype.getParam=function(){return[RankType.HeiAn]},e}(WanMoRanking);__reflect(HeiAnRanking.prototype,"HeiAnRanking"),window.HeiAnRanking=HeiAnRanking;var HeiAnRankingItem=function(t){function e(){var e=t.call(this)||this;return e.skinName="WanMoRankingItemSkin",e}return __extends(e,t),e.prototype.dataChanged=function(){var t=this.data;this.lbRankingNum.text=t.rank+"",this.lbname.text=t.playerName,this.lbLayer.text=t.fbCount+""},e}(BaseItemRender);__reflect(HeiAnRankingItem.prototype,"HeiAnRankingItem"),window.HeiAnRankingItem=HeiAnRankingItem;var HeiAnWin=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.winType=WinType.MainWin,e}return __extends(e,t),e.prototype.getFightBtn=function(){return this.getPanel(HeiAnPanel).getFightBtn()},e.panelNames=[HeiAnPanel],e}(BaseWinAutoTab);__reflect(HeiAnWin.prototype,"HeiAnWin"),window.HeiAnWin=HeiAnWin;var ActivityType25Config=function(){function t(){}return t}();__reflect(ActivityType25Config.prototype,"ActivityType25Config");var JJCPlayerData=function(){function t(){this.rank=0,this.actorId=0,this.name="",this.level=0,this.power=0,this.job=0,this.bodyId=0,this.weaponId=0,this.wingId=0,this.isRobet=!1,this.price=0,this.damonId=1}return t.prototype.parser=function(t){this.parserBase(t),this.price=t.readInt()},t.prototype.parserBase=function(t){this.rank=t.readShort(),this.actorId=t.readInt(),this.name=t.readString(),this.level=t.readInt(),this.power=t.readDouble(),this.job=t.readByte(),this.sex=t.readByte(),this.bodyId=t.readInt(),this.weaponId=t.readInt(),this.wingId=t.readInt(),this.damonId=t.readInt(),this.isRobet=t.readBoolean()},t.prototype.parserBase2=function(t){this.rank=t.readShort(),this.actorId=t.readInt(),this.name=t.readString(),this.level=t.readInt(),this.power=t.readDouble(),this.job=t.readByte(),this.sex=t.readByte(),this.weaponId=t.readInt(),this.bodyId=t.readInt(),this.wingId=t.readInt(),this.isRobet=t.readBoolean()},t.prototype.getBodyFileName=function(){var t=Cfg.getConfig(SzHuanhuaBaseConfig,this.bodyId).uirole;return t[this.sex]},t.prototype.getWeaponFileName=function(){var t=Cfg.getConfig(ShenqiHuanhuaBaseConfig,this.weaponId).uirole;return t},t.prototype.getWingFileName=function(){if(this.wingId>0){var t=Cfg.getConfig(WingHuanhuaBaseConfig,this.wingId).uirole;return t}return""},t}();__reflect(JJCPlayerData.prototype,"JJCPlayerData");var ActivityType26CommonConfig=function(){function t(){}return t}();__reflect(ActivityType26CommonConfig.prototype,"ActivityType26CommonConfig");var JJCSys=function(t){function e(){var e=t.call(this)||this;return e.myRank=0,e.bestRank=0,e.fightCount=0,e.buyCount=0,e.coolDownTick=0,e.jjcPlayerDatas=[],e.top3Datas=[],e.awards=[],e.diamond=0,e.sysId=PackId.JJC,e.reg(1,e.patchInfoInit),e.reg(2,e.patchRefreshJJC),e.reg(3,e.patchTop3),e.reg(4,e.patchBuyFightCount),e.reg(5,e.patchJJCFight),e.reg(6,e.patchJJCresult),e.reg(7,e.patchCountDown),e.reg(8,e.patchCdTime),e}return __extends(e,t),e.ins=function(){return t.getIns.call(this,e)},e.prototype.patchInfoInit=function(t){this.myRank=t.readShort(),this.fightCount=t.readShort(),this.buyCount=t.readShort(),this.coolDownTick=1e3*t.readInt()+Timer.ins().getTimer(),this.bestRank=t.readShort(),RpFun.ShowJJCRedPoint()},e.prototype.sendRefreshJJC=function(){this.sendBase(2)},e.prototype.patchRefreshJJC=function(t){var e=t.readByte();this.jjcPlayerDatas.length=e;for(var i=0;e>i;i++)this.jjcPlayerDatas[i]=this.jjcPlayerDatas[i]||new JJCPlayerData,this.jjcPlayerDatas[i].parser(t)},e.prototype.sendTop3=function(){this.sendBase(3)},e.prototype.patchTop3=function(t){this.top3Datas.length=t.readByte();for(var e=0;e<this.top3Datas.length;e++){var i=this.top3Datas[e]=this.top3Datas[e]||new JJCPlayerData;i.parserBase2(t)}},e.prototype.getTop3=function(t){return this.top3Datas[t-1]},e.prototype.sendBuyFightCount=function(){this.sendBase(4)},e.prototype.patchBuyFightCount=function(t){this.fightCount=t.readShort(),this.buyCount=t.readShort(),RpFun.ShowJJCRedPoint()},e.prototype.sendJJCFight=function(t){var e=this.getBytes(5);e.writeInt(t),this.send(e)},e.prototype.patchJJCFight=function(t){this.fightCount=t.readShort(),this.coolDownTick=1e3*t.readInt()+Timer.ins().getTimer(),RpFun.ShowJJCRedPoint()},e.prototype.patchJJCresult=function(t){var e=(t.readBoolean(),t.readShort());this.awards=[],this.awards.length=e;for(var i=0;e>i;i++)this.awards[i]=new ItemDataReward,this.awards[i].parser(t);t.readInt();this.myRank=t.readShort(),this.bestRank=t.readShort(),this.diamond=t.readInt()},e.prototype.patchCountDown=function(t){var e=t.readByte(),i=t.readShort();1==e&&openWin(CountDownWin,i,CountDownWin.TYPE_JJC)},e.prototype.sendCdTime=function(){this.sendBase(8)},e.prototype.patchCdTime=function(t){this.coolDownTick=1e3*t.readInt()+Timer.ins().getTimer()},e.prototype.getJJCPlayers=function(){return this.jjcPlayerDatas},e.prototype.getJJCPlayer=function(t){return this.jjcPlayerDatas[t-1]},e.prototype.getBuyCount=function(){return Math.max(Cfg.getConfig(SVipConfig,Actor.ins().sVipLv).jjcbuy-this.buyCount,0)},e.prototype.hasFightCount=function(){return this.fightCount<Cfg.getConfig(JjcConstConfig).challengesCount},e.prototype.isInCd=function(){return Timer.ins().getTimer()<this.coolDownTick},e.prototype.getCD=function(){return Math.max(this.coolDownTick-Timer.ins().getTimer(),0)},e.prototype.getLeftFightCount=function(){return Cfg.getConfig(JjcConstConfig).challengesCount-this.fightCount},Object.defineProperty(e.prototype,"myBestRank",{get:function(){return Math.min(this.bestRank,this.myRank)},enumerable:!0,configurable:!0}),e}(BaseSys);__reflect(JJCSys.prototype,"JJCSys");var System;!function(t){t.jJCSys=JJCSys.ins.bind(JJCSys)}(System||(System={})),window.JJCSys=JJCSys;var ActivityType26Config=function(){function t(){}return t}();__reflect(ActivityType26Config.prototype,"ActivityType26Config");var JJCMCItem=function(t){function e(){var e=t.call(this)||this;return e.skinName="JJCMCItemEUI",e}return __extends(e,t),e.prototype.dataChanged=function(){this.data instanceof JJCPlayerData&&(this.lbName.text=""+this.data.name,this.bmpRank.text=this.data.rank+"m",this.lbPower=""+this.data.power,this.lbPrice.text=""+this.data.price,this.updateMC(this.data))},e.prototype.updateMC=function(t){this.groupMC.removeChildren();var e=Cfg.getConfig(DamonHuanhuaBaseConfig,t.damonId),i=e.uirole,n=e.uihigh;this.groupMC.addChild(MC.createCenterGruop(i,-1));var a=t.getWingFileName();if(a){var o=MC.createCenterGruop(a,-1);o.verticalCenter=-n,this.groupMC.addChild(o)}var s=MC.createCenterGruop(t.getBodyFileName(),-1);s.verticalCenter=-n,this.groupMC.addChild(s),this.groupMC.addChild(MC.createCenterGruop("up_"+i,-1)),s=MC.createCenterGruop(t.getWeaponFileName(),-1),s.verticalCenter=-n,this.groupMC.addChild(s)},e}(BaseItemRender);__reflect(JJCMCItem.prototype,"JJCMCItem"),window.JJCMCItem=JJCMCItem;var ActivityType27Config=function(){function t(){}return t}();__reflect(ActivityType27Config.prototype,"ActivityType27Config");var ActivityType2Config=function(){function t(){}return t}();__reflect(ActivityType2Config.prototype,"ActivityType2Config");var JJCRankPanelItem=function(t){function e(){var e=t.call(this)||this;return e.skinName="JJCRankItemSkin",e}return __extends(e,t),e.prototype.dataChanged=function(){var t=this.data;t.rank<=3?this.currentState="s"+t.rank:this.currentState="s4",this.lbRank.text=t.rank.toString(),this.lbName.text=t.playerName,this.lbGuild.text=""==t.guildName?Lang.common_wu:t.guildName,this.bmpPower.text=t.power.toFixed(0)},e}(BaseItemRender);__reflect(JJCRankPanelItem.prototype,"JJCRankPanelItem"),window.JJCRankPanelItem=JJCRankPanelItem;var JJCRankWin=function(t){function e(){var e=t.call(this)||this;return e.winType=WinType.OverlayWin,e}return __extends(e,t),e.panelNames=[JJCRankPanel],e}(BaseWinAutoTab);__reflect(JJCRankWin.prototype,"JJCRankWin"),window.JJCRankWin=JJCRankWin;var JJCRewardWin=function(t){function e(){return t.call(this)||this}return __extends(e,t),e.prototype.initUI=function(){t.prototype.initUI.call(this),this.layer=LayerMgr.Popup,this.skinName="JJCRewardWinEUI",this.addBg(),this.list.itemRenderer=JJCRewardWinItem,this.list.dataProvider=this.listArr=new eui.ArrayCollection},e.prototype.open=function(){t.prototype.open.call(this),this.addLsn(JJCSys.ins().patchTop3,this.update),JJCSys.ins().sendTop3(),this.update()},e.prototype.update=function(){this.listArr.source=Cfg.getConfigs(JjcRewardConfig),this.listArr.refresh()},e}(BaseWinSingle);__reflect(JJCRewardWin.prototype,"JJCRewardWin"),window.JJCRewardWin=JJCRewardWin;var JJCRewardWinItem=function(t){function e(){var e=t.call(this)||this;return e.skinName="JJCRewardWinItemEUI",e.list.itemRenderer=ItemBaseReward,e.list.dataProvider=e.listArr=new eui.ArrayCollection,e}return __extends(e,t),e.prototype.dataChanged=function(){var t,e=this.data;if(e.rank<=3){this.currentState="s"+e.rank;var i=JJCSys.ins().getTop3(e.rank);t=i?i.name:"虚位以待"}else this.currentState="s4",t="";this.lbRank.text="第"+e.rank.toString()+"-"+e.most.toString()+"名",this.lbName.text=t,this.listArr.source=e.dailyReward},e}(BaseItemRender);__reflect(JJCRewardWinItem.prototype,"JJCRewardWinItem"),window.JJCRewardWinItem=JJCRewardWinItem;var QuanMinBossInfo=function(){function t(){}return t.prototype.parser=function(t){this.id=t.readInt(),this.monsterName=t.readString(),this.monsterHead=t.readString(),this.hp=t.readShort(),this.people=t.readShort();var e=t.readInt();this.reliveTick=1e3*e+Timer.ins().getTimer(),this.isFighting=t.readBoolean(),this.isRemind=t.readBoolean(),this.lastName=t.readString()},t.prototype.parser1=function(t){this.id=t.readInt(),this.hp=t.readShort(),this.people=t.readShort();var e=t.readInt();this.reliveTick=1e3*e+Timer.ins().getTimer(),this.isFighting=t.readBoolean(),this.monsterName=t.readString(),this.lastName=t.readString()},Object.defineProperty(t.prototype,"isDie",{get:function(){return 0==this.hp},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"isDieNumber",{get:function(){return 0==this.hp?-1:1},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"config",{get:function(){return this._config=this._config||Cfg.getConfig(DespairBossConfig,this.id)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"getZsLv",{get:function(){return this.config.zsLevel},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"getLv",{get:function(){return this.config.level},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"isopenNumber",{get:function(){return Actor.ins().zsId>=this.config.zsLevel?1:-1},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"isopen",{get:function(){return Actor.ins().zsId>=this.config.zsLevel&&Actor.ins().level>=this.config.level},enumerable:!0,configurable:!0}),t.prototype.getLevelName=function(){return 1e4==this.config.zsLevel?""+GFunc.GetLvStrByLv(this.config.level):""+GFunc.getZSNameBydb(this.config.zsLevel)},t}();__reflect(QuanMinBossInfo.prototype,"QuanMinBossInfo");var ActivityType30Config=function(){function t(){}return t}();__reflect(ActivityType30Config.prototype,"ActivityType30Config");var QuanMinPanelItem=function(t){function e(){var e=t.call(this)||this;return e.skinName="QuanMinPanelItemEUI",e}return __extends(e,t),e.prototype.dataChanged=function(){if(this.data){var t=this.data,e="";e=1e4==t.config.zsLevel?""+GFunc.GetLvStrByLv(t.config.level):""+GFunc.getZSNameBydb(t.config.zsLevel),this.imgIcon.source=ResMgr.getMonsterHead(t.monsterHead),this.lbLevel.text=""+e,this.imgLock.visible=!t.isopen,this.filters=t.isopen?[]:DisUtil.grayFilter(),this.imgIcon.filters=t.isDie?DisUtil.grayFilter():[],this.updateRedPoint()}},e.prototype.updateRedPoint=function(){var t=this.data;t&&(this.redPoint.visible=RpSys.ins().getData(BossWin,BossBenFuPanel,QuanMinPanel,t.id))},e}(BaseItemRender);__reflect(QuanMinPanelItem.prototype,"QuanMinPanelItem"),window.QuanMinPanelItem=QuanMinPanelItem;var ActivityType31Config=function(){function t(){}return t}();__reflect(ActivityType31Config.prototype,"ActivityType31Config");var ActivityType32Config=function(){function t(){}return t}();__reflect(ActivityType32Config.prototype,"ActivityType32Config");var ActivityType33Config=function(){function t(){}return t}();__reflect(ActivityType33Config.prototype,"ActivityType33Config");var KfBossPanelItem=function(t){function e(){var e=t.call(this)||this;return e.skinName="KfBosPanelItemEUI",e}return __extends(e,t),e.prototype.dataChanged=function(){if(this.data){var t=this.data,e=t.getLevelName();this.imgIcon.source=ResMgr.getMonsterHead(t.monsterHead),this.lbLevel.text=""+e,this.imgLock.visible=!t.isopen,this.filters=t.isopen?[]:DisUtil.grayFilter(),this.updateRedPoint()}},e.prototype.updateRedPoint=function(){var t=this.data;t&&(this.redPoint.visible=RpSys.ins().getData(BossWin,KfBossMainPanel,KfBossPanel,e,t.bossId),this.imgDie.visible=t.isDie&&t.isopen)},e}(BaseItemRender);__reflect(KfBossPanelItem.prototype,"KfBossPanelItem"),window.KfBossPanelItem=KfBossPanelItem;var KfBossWin=function(t){function e(){var i=t.call(this)||this;return i.redPointHead=[ExtCom,e],i.winType=WinType.OverlayWin,i}return __extends(e,t),e.prototype.initUI=function(){t.prototype.initUI.call(this),this.addBg()},e.panelNames=[KfBossMainPanel],e}(BaseWinAutoTab);__reflect(KfBossWin.prototype,"KfBossWin"),window.KfBossWin=KfBossWin;var KfBossFbPanel=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return __extends(e,t),e.prototype.showReward=function(){var t=Cfg.getConfig(CrossBossFubenConfig,CondType.Equal,CrossBossFubenConfig.fbId,FbSys.ins().fbId);t&&(this.listItemReward.dataProvider=new eui.ArrayCollection(t.firstReward))},e}(BossHomeFbPanel);__reflect(KfBossFbPanel.prototype,"KfBossFbPanel"),window.KfBossFbPanel=KfBossFbPanel;var KfBossItemModel=function(){function t(){this.index=1,this.bossId=1,this.reliveTick=0,this.monsterName="",this.monsterHead="",this.isDie=!0,this.isRemind=!1}return t.prototype.parser=function(t){this.isRemind=1==t.readByte(),this.index=t.readInt(),this.bossId=t.readInt();var e=t.readInt();this.reliveTick=1e3*e+Timer.ins().getTimer(),this.isDie=e>0,this.monsterName=t.readString(),this.monsterHead=t.readString(),this.monsterModel=t.readInt()},t.prototype.parserUpdate=function(t){this.bossId=t.readInt();var e=t.readInt();this.reliveTick=1e3*e+Timer.ins().getTimer(),this.isDie=e>0,this.isRemind=1==t.readByte()},t.prototype.getBossConfig=function(){return this.crossBossFubenConfig||(this.crossBossFubenConfig=Cfg.getConfig(CrossBossFubenConfig,this.index))
},t.prototype.canFight=function(){return Timer.ins().getTimer()>=this.reliveTick&&Actor.ins().zsId>=this.getBossConfig().zslevel},t.prototype.isAlive=function(){return!this.isDie},Object.defineProperty(t.prototype,"reLiveTime",{get:function(){return(this.reliveTick-Timer.ins().getTimer())/1e3},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"isKunDun",{get:function(){return this.index==Cfg.getConfigLength(CrossBossFubenConfig)?1:0},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"zsLevel",{get:function(){return this.getBossConfig().zslevel},enumerable:!0,configurable:!0}),t.prototype.getLevelName=function(){return 1e4==this.getBossConfig().zslevel?""+GFunc.GetLvStrByLv(this.getBossConfig().level):""+GFunc.getZSNameBydb(this.getBossConfig().zslevel)},Object.defineProperty(t.prototype,"isDieNumber",{get:function(){return this.reLiveTime>0?-1:1},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"getZsLv",{get:function(){return this.getBossConfig().zslevel},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"getLv",{get:function(){return this.getBossConfig().level},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"isopenNumber",{get:function(){return Actor.ins().zsId>=this.getBossConfig().zslevel?1:-1},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"isopen",{get:function(){return Actor.ins().zsId>=this.getBossConfig().zslevel&&Actor.ins().level>=this.getBossConfig().level},enumerable:!0,configurable:!0}),t}();__reflect(KfBossItemModel.prototype,"KfBossItemModel");var KfBossModel=function(){function t(){this.kfBossItemDatas=[],this.guishuCount=0,this.nextEnterFbTick=0,this.buyCount=0}return t.prototype.parser=function(t){this.guishuCount=t.readUnsignedByte();var e=t.readInt();this.nextEnterFbTick=1e3*e+Timer.ins().getTimer(),this.buyCount=t.readByte()},t.prototype.parserBossData=function(t){var e=t.readUnsignedByte();this.kfBossItemDatas.length=0;for(var i=0;e>i;i++){var n=new KfBossItemModel;n.parser(t),this.kfBossItemDatas[i]=n}SortUtil.sortOn(this.kfBossItemDatas,["index","isKunDun"],[SortType.down,SortType.up,SortType.down])},t.prototype.parserBossCount=function(t){this.guishuCount=t.readByte(),this.buyCount=t.readByte()},t.prototype.setRemindByIndex=function(t,e){return this.kfBossItemDatas[t-1].isRemind=e},t.prototype.getKfBossDatasByIndex=function(t){for(var e=0,i=this.kfBossItemDatas;e<i.length;e++){var n=i[e];if(n.index==t)return n}return null},t.prototype.getBossCount=function(){return this.kfBossItemDatas.length},Object.defineProperty(t.prototype,"nextEnterTime",{get:function(){return Math.ceil((this.nextEnterFbTick-Timer.ins().getTimer())/1e3)},enumerable:!0,configurable:!0}),t.prototype.canEnterFb=function(){return this.nextEnterTime<=0},t.prototype.getCanChallengeData=function(){var t=[];if(this.canEnterFb()&&this.guishuCount>0){var e=this.kfBossItemDatas;SortUtil.sortOn(e,["zsLevel"],[SortType.down]);for(var i=0;i<e.length;i++){var n=e[i];n.isAlive()&&n.canFight()&&n.isRemind&&t.push(n)}}return t},t.prototype.getBuyCount=function(){return Math.max(VipSys.ins().getCurSVipConfig().crossbuycount-this.buyCount,0)},t.prototype.getBuyConsume=function(){var t=Cfg.getConfig(CrossBossCommonConfig).buyNeedYuanbao;return t[this.buyCount<t.length?this.buyCount:t.length-1]},t.prototype.openData=function(){for(var t=[],e=0;e<this.kfBossItemDatas.length;e++){var i=this.kfBossItemDatas[e];i.isopen&&t.push(i)}return t},t.prototype.noOpenData=function(){for(var t=[],e=0;e<this.kfBossItemDatas.length;e++){var i=this.kfBossItemDatas[e];i.isopen||t.push(i)}return t},t.prototype.getCurBossIndex=function(){var t=this.openData();SortUtil.sortOn(t,["zsLevel"],[SortType.up]);for(var e=0,i=0;i<t.length;i++){var n=t[i];n.isRemind&&(e=i)}return e},t}();__reflect(KfBossModel.prototype,"KfBossModel");var FbModelSmsd=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.gsCount=0,e.remindRecord=0,e._enterCD=0,e.bossDatas=[],e.boxId=0,e.boxTime=0,e.boxUseCount=0,e.isAutoTz=!1,e}return __extends(e,t),e.prototype.parserInfo=function(t){for(var e=t.readByte(),i=0;e>i;i++){var n=this.getBossData(t.readByte());n.parser(t)}},e.prototype.parserAutoTz=function(t){var e=this.getBossData(t.readByte());e.isRemind=t.readBoolean()},e.prototype.parserBossInfo=function(t){var e=this.getBossData(t.readByte());return e.parser2(t),e},e.prototype.parserSVIPCount=function(t){this.boxUseCount=t.readByte()},e.prototype.parserBoxInfo=function(t){this.boxId=t.readByte(),this.boxTime=DateUtil.formatMiniDateTime(t.readInt())},e.prototype.parserSmsdGsCount=function(t){this.gsCount=t.readByte()},e.prototype.getBoxTime=function(){var t=Math.max(this.boxTime-Actor.ins().serverTime,0);return t>0&&(t=Math.ceil(t/1e3)),t},e.prototype.getBoxCount=function(){return Math.max(VipSys.ins().getCurSVipConfig().kfBossSdBoxCount-this.boxUseCount,0)},e.prototype.getBossDatasByFloor=function(t){var e=[];for(var i in this.bossDatas){var n=this.bossDatas[i];n.getConfig().floor==t&&e.push(n)}return e},e.prototype.getBossDatasByFbId=function(t){void 0===t&&(t=FbSys.ins().fbId);var e=[];for(var i in this.bossDatas){var n=this.bossDatas[i];n.getConfig().fbId==t&&e.push(n)}return e},e.prototype.getBossData=function(t){return this.bossDatas[t]||(this.bossDatas[t]=new SmsdBossData(t))},e.prototype.getBossDatas=function(){return this.bossDatas},e.prototype.getBossDatasByOpenAndRemind=function(){var t=[];for(var e in this.bossDatas)this.bossDatas[e].isOpen()&&this.bossDatas[e].isRemind&&!this.bossDatas[e].isDie()&&t.push(this.bossDatas[e]);return t},e.prototype.getBossDatasByFloorAndRemind=function(){var t=[],e=this.getBossDatasByFbId();for(var i in e)e[i].isOpen()&&e[i].isRemind&&!e[i].isDie()&&t.push(e[i]);return t},e.prototype.isRemindById=function(t){return(this.remindRecord>>t&1)>0},e.prototype.getTabIndex=function(){for(var t=0,e=Cfg.getConfig(SMFBCommonConfig).floorMenu,i=e.length-1;i>=0;i--)if(RpSys.ins().getData(BossWin,KfBossMainPanel,SmsdPanel,e[i])){t=i;break}return t},e.prototype.getBossIndex=function(){for(var t=0,e=Cfg.getConfig(SMFBCommonConfig).floorMenu,i=0,n=e.length-1;n>=0;n--)if(RpSys.ins().getData(BossWin,KfBossMainPanel,SmsdPanel,e[n])){i=e[n];break}for(var a=this.getBossDatasByFloor(i),o=0;o<a.length;o++)if(RpSys.ins().getData(BossWin,KfBossMainPanel,SmsdPanel,a[o].floor,a[o].id)){t=o;break}return t},e.prototype.setRemindRecord=function(t,e){var i=e?1:0,n=this.remindRecord>>t&1;if(i!=n){var a=Math.pow(2,t);e?this.remindRecord=this.remindRecord|a:this.remindRecord=this.remindRecord^a}return this.remindRecord},Object.defineProperty(e.prototype,"enterCD",{get:function(){return Math.max(this._enterCD-Timer.ins().getTimer(),0)},enumerable:!0,configurable:!0}),e}(FbModelBase);__reflect(FbModelSmsd.prototype,"FbModelSmsd");var SmsdBossData=function(){function t(t){this.id=0,this.monsterName="",this.monsterHead="",this.monsterModel=0,this.isAtk=!1,this.hpPer=0,this.isRemind=!1,this.timer=0,this.id=t}return t.prototype.parser=function(t){this.monsterName=t.readString(),this.monsterHead=t.readString(),this.monsterModel=t.readShort();var e=t.readInt();this.timer=DateUtil.formatMiniDateTime(e),this.isRemind=t.readBoolean()},t.prototype.parser2=function(t){this.timer=DateUtil.formatMiniDateTime(t.readInt())},t.prototype.getConfig=function(){return this.config||(this.config=Cfg.getConfig(ShenmoFubenConfig,this.id)),this.config},t.prototype.getTime=function(){return Math.max(this.timer-Actor.ins().serverTime,0)},t.prototype.isDie=function(){return 0==this.hpPer&&this.getTime()>0},t.prototype.isOpen=function(){return this.getConfig().zslv<=Actor.ins().zsId},Object.defineProperty(t.prototype,"floor",{get:function(){return this.getConfig().floor},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"showLv",{get:function(){return this.getConfig().showLv},enumerable:!0,configurable:!0}),t}();__reflect(SmsdBossData.prototype,"SmsdBossData");var SmsdBossFbItem=function(t){function e(){var e=t.call(this)||this;return e.skinName="SmsdBossFbItemEUI",e.redPoint.visible=!1,e.bmpLv.visible=!1,e}return __extends(e,t),e.prototype.dataChanged=function(){var t=this.data;if(this.imgHaeh.source=ResMgr.getMonsterHead(t.monsterHead),this.nameTxt.text=t.monsterName,this.bmpLv.text="l"+t.getConfig().showLv,t.getConfig().showLv>400){var e=Math.ceil(t.getConfig().showLv/400)-1;this.bmpLv.text="(l"+(t.getConfig().showLv-400*e)+")"}else this.bmpLv.text="l"+t.getConfig().showLv;t.isDie()?(this.imgHaeh.filters=DisUtil.grayFilter(),this.labTime.text=""+getFormatTime(Math.floor(t.getTime()/1e3),"hh:mm:ss"),this.imgTime.visible=!0):(this.imgTime.visible=!1,this.imgHaeh.filters=[],this.labTime.text="")},e}(BaseItemRender);__reflect(SmsdBossFbItem.prototype,"SmsdBossFbItem"),window.SmsdBossFbItem=SmsdBossFbItem;var SmsdBossItem=function(t){function e(){var e=t.call(this)||this;return e.skinName="SmsdBossItemEUI",e}return __extends(e,t),e.prototype.dataChanged=function(){if(this.data){var t=this.data;this.bmpJ.text=""+t.getConfig().dropStage,this.imgHaeh.source=ResMgr.getMonsterHead(t.monsterHead),this.nameTxt.text=""+t.monsterName,this.updateTime()}},e.prototype.updateTime=function(){var t=this.data,e=t.getTime();e>0?(this.timeTxt.text=""+getFormatTime(Math.floor(e/1e3),"hh:mm:ss")+Lang.kfboss_str5,this.timeTxt.textColor=15733780):(this.timeTxt.text="",this.timeTxt.textColor=5949490),this.updateRedPoint()},e.prototype.updateRedPoint=function(){var t=this.data;t&&(this.redPoint.visible=RpSys.ins().getData(BossWin,KfBossMainPanel,SmsdPanel,t.getConfig().floor,t.id))},e}(BaseItemRender);__reflect(SmsdBossItem.prototype,"SmsdBossItem"),window.SmsdBossItem=SmsdBossItem;var SmsdRemindItem=function(t){function e(){var e=t.call(this)||this;return e.skinName="JueWangRemindItemEUI",e.checkBoxs.name="checkBoxs",e}return __extends(e,t),e.prototype.dataChanged=function(){var t=this.data;this.checkBoxs.visible=t.isOpen(),this.checkBoxs.selected=t.isRemind,this.txt.visible=!t.isOpen(),this.bossName.text=t.monsterName,this.levelShow.textFlow=StrUtil.toTF(Lang.fb_str309.replace("$count$",""+t.getConfig().floor))},e}(BaseItemRender);__reflect(SmsdRemindItem.prototype,"SmsdRemindItem"),window.SmsdRemindItem=SmsdRemindItem;var SmsdTabItem=function(t){function e(){var e=t.call(this)||this;return e.skinName="SmsdTabItemEUI",e.redPoint.visible=!1,e}return __extends(e,t),e.prototype.dataChanged=function(){if("number"==typeof this.data){var t=this.data;this.lbStage.textFlow=addColorTF(Lang.common_di+t+Lang.common_ceng),this.redPoint.visible=RpSys.ins().getData(BossWin,KfBossMainPanel,SmsdPanel,t)}},e}(BaseItemRender);__reflect(SmsdTabItem.prototype,"SmsdTabItem"),window.SmsdTabItem=SmsdTabItem;var SmsdBoxRewardWin=function(t){function e(){var e=t.call(this)||this;return e.layer=LayerMgr.Popup,e.winType=WinType.NeverCloseWin,e.skinName="SmsdBoxRewardWinEUI",e.addBg(),e.list.itemRenderer=ItemBaseRewardActivity,e.list.dataProvider=e.listData=new eui.ArrayCollection,e.mc=new MC,e.mc.y=70,e.mc.playFile(getEffName("smzl_gxhd"),-1),e.groupMc.addChildAt(e.mc,0),e}return __extends(e,t),e.prototype.open=function(e){t.prototype.open.call(this),this.addClickE(this.lbTips,this.onClick),Timer.ins().removeAll(this),this.updateLuckDraw(e)},e.prototype.close=function(){t.prototype.close.call(this),Timer.ins().removeAll(this)},e.prototype.updateLuckDraw=function(t){var e=this;this.list.visible=!0,this.scroller.scrollPolicyV=eui.ScrollPolicy.OFF,this.listData.source=t,Timer.ins()["do"](1500,0,1,function(){e.list.validateNow();for(var i=0;i<e.list.numChildren;i++){var n=e.list.getElementAt(i);t[i]&&GFunc.flyToBag(t[i].id,n,80,80)}},this)},e.prototype.onClick=function(t){closeWin(this)},e}(BaseWinSingle);__reflect(SmsdBoxRewardWin.prototype,"SmsdBoxRewardWin"),window.SmsdBoxRewardWin=SmsdBoxRewardWin;var SmsdBoxWin=function(t){function e(){var e=t.call(this)||this;return e.skinName="SmsdBoxWinEUI",e.layer=LayerMgr.Popup,e.addBg(),e.list.itemRenderer=ItemBaseReward,e.list.dataProvider=e.listData=new eui.ArrayCollection,e}return __extends(e,t),e.prototype.open=function(){t.prototype.open.call(this),this.addClickE(this.btnAdd,this.onClick),this.addClickE(this.btnSend0,this.onClick),this.addClickE(this.btnSend1,this.onClick),this.addLsn(KfSys.ins().patchSmsdSVIPCount,this.updatePanel),this.addLsn(VipSys.ins().patchSvipLvChange,this.updatePanel),this.addLsn(BagSys.ins().patchItemChange,this.updatePanel),this.updatePanel()},e.prototype.updateTime=function(){var t=KfSys.ins().smsdData.getBoxTime();t>0?this.lbTime.text=Lang.kfboss_str3.replace("$time$",getFormatTime(t,"hh:mm:ss")):closeWin(e)},e.prototype.updatePanel=function(){this.config=Cfg.getConfig(ShenmoFubenConfig,KfSys.ins().smsdData.boxId),this.listData.source=this.config.desc,this.lbCount.text=Lang.common_str52+KfSys.ins().smsdData.getBoxCount();var t=this.config.openBox;this.imgItem.source="zycs_"+t[1].id,this.lbZs.textFlow=addColorTF(t[0].count,GFunc.isConsumeEnough(t[0])?5767068:15733780),this.lbItem.textFlow=addColorTF(BagSys.ins().getItemCount(t[1].id)+"/"+t[1].count,GFunc.isConsumeEnough(t[1])?5767068:15733780),this.updateTime()},e.prototype.onClick=function(t){switch(t.target){case this.btnAdd:openWin(SVipTipsWin,307);break;case this.btnSend0:if(KfSys.ins().smsdData.getBoxCount()<=0)return void showtipsFail(Lang.kfboss_str4);GFunc.checkConsumeEnough(this.config.openBox[0])&&KfSys.ins().sendSmsdOpenBox(KfSys.ins().smsdData.boxId,0);break;case this.btnSend1:if(KfSys.ins().smsdData.getBoxCount()<=0)return void showtipsFail(Lang.kfboss_str4);GFunc.checkConsumeEnough(this.config.openBox[1])&&KfSys.ins().sendSmsdOpenBox(KfSys.ins().smsdData.boxId,1)}},e}(BaseWinSingle);__reflect(SmsdBoxWin.prototype,"SmsdBoxWin"),window.SmsdBoxWin=SmsdBoxWin;var SmsdFbPanel=function(t){function e(){var e=t.call(this)||this;return e.bossDatas=[],e.waitTick=0,e.tipsTick=0,e}return __extends(e,t),e.prototype.initUI=function(){this.skinName="SmsdFbPanelEUI",this.setSkinPart("target",new BossHomeFbPanelFace2),this.setSkinPart("bossBloodComponent",new BossBloodComponent),this.listBoss.itemRenderer=SmsdBossFbItem,this.listBoss.dataProvider=this.arrCollectBoss=new eui.ArrayCollection,this.listEnemy.itemRenderer=BossHomeFbPanelFace2,this.listEnemy.dataProvider=this.arrCollectEnemy=new eui.ArrayCollection,this.list.itemRenderer=BossHomeFbPanelFace2,this.list.dataProvider=this.arrayCollection=new eui.ArrayCollection,this.bossBloodComponent.visible=!1,this.listItemReward.itemRenderer=ItemBaseRewardNameBig,this.groupRawead.visible=!1,this.groupBox.visible=!1,this.btnAtkBelongMC=new MC,this.btnAtkBelongMC.playFile(ResMgr.getEffName("tsgj"),-1),this.btnAtkBelongMC.x=this.btnAtkBelong.width/2,this.btnAtkBelongMC.y=this.btnAtkBelong.height/2,this.btnAtkBelong.addChild(this.btnAtkBelongMC),this.maskBoxBar=new MaskSector,this.maskBoxBar.x=this.maskBoxBar.y=52,this.maskBoxBar.setParam(60,270,-90,1),this.groupMask.addChild(this.maskBoxBar),this.imgBoxBar.mask=this.maskBoxBar},e.prototype.open=function(){t.prototype.open.call(this),this.addItemTapE(this.listEnemy,this.onListClick),this.addItemTapE(this.listBoss,this.onBossListClick),this.addLsn(KfSys.ins().patchSmsdBossInfo,this.updateBossList),this.addLsn(KfSys.ins().patchSmsdBoxInfo,this.updateBox),this.addLsn(LogicSys.ins().patchCreateEntity,this.updateBianshen),this.updateBossList(),this.onAtkBoss(KfSys.ins().smsdData.atkBossData),this.waitTick=0},e.prototype.close=function(){t.prototype.close.call(this),this.unAutoTz()},e.prototype.updateTime=function(){t.prototype.updateTime.call(this),this.updateBossList(),this.updateBox(),this.updateAutoTz(),this.updateEnemys(),this.updateTips()},e.prototype.updateBianshen=function(t){t==AppearType.bianshendAppear&&(LogicSys.ins().centerEntity.AI.getCurTarget()||KfSys.ins().smsdData.atkBossData.isDie()||this.onAtkBoss(KfSys.ins().smsdData.atkBossData))},e.prototype.updateTips=function(){var t=KfSys.ins().smsdData.atkBossData.getConfig().belongLv;t>0&&!KfSys.ins().smsdData.atkBossData.isDie()&&LogicSys.ins().centerEntity.AI.getAIState()==AIState.Atk&&Actor.ins().zsId>=t&&this.tipsTick<Actor.ins().serverTime&&(showtipsFail(Lang.kfboss_str9),this.tipsTick=Actor.ins().serverTime+3e3)},e.prototype.updateBox=function(){var t=KfSys.ins().smsdData.getBoxTime();if(t>0){var e=Cfg.getConfig(ShenmoFubenConfig,KfSys.ins().smsdData.boxId),i=MathUtil.getDistance(LogicSys.ins().centerEntity,new XY(e.monsPos.x*MapContainer.CELL_SIZE,e.monsPos.y*MapContainer.CELL_SIZE));300>i?(this.groupBox.visible=!0,this.lbBoxTime.text=Lang.kfboss_str3.replace("$time$",getFormatTime(t,"hh:mm:ss")),this.maskBoxBar.setValue(t,KfSys.ins().smsdData.atkBossData.getConfig().belongTime)):this.groupBox.visible=!1}else this.groupBox.visible=!1},e.prototype.onEntityDie=function(t){t&&t.handle==LogicSys.ins().centerEntity.handle?this.onUpdateBtnState():this.target.data==t.masterHandle&&this.onAtkerChange(0)},e.prototype.updateAutoTz=function(){var t=KfSys.ins().smsdData.getBoxTime();if(KfSys.ins().smsdData.isAutoTz&&0>=t)if(0==this.waitTick){var e=KfSys.ins().smsdData.getBossDatasByFloorAndRemind();SortUtil.sortOn(e,["showLv"],[SortType.down]),e.length>0?KfSys.ins().smsdData.atkBossData.id!=e[0].id&&this.onAtkBoss(e[0]):this.waitTick=Actor.ins().serverTime+5e3}else this.waitTick<Actor.ins().serverTime&&FbSys.ins().sendExitFb()},e.prototype.unAutoTz=function(){KfSys.ins().smsdData.isAutoTz=!1},e.prototype.onUpdateBtnState=function(){t.prototype.onUpdateBtnState.call(this);var e=!LogicSys.ins().centerEntity.isDead()&&FbSys.ins().guiShuTypeFuBenModel.belongerMasterHandle>0;this.btnAtkBoss.visible=e,this.btnAtkBelong.visible=e},e.prototype.onUpdateAtkerList=function(){for(var t=LogicSys.ins().centerEntity.AI.getChouhenHandleList(),e=[],i=0,n=t;i<n.length;i++){var a=n[i];LogicSys.ins().isAliveByMasterHandle(a)&&e.push(a)}this.arrayCollection.source=e,this.arrayCollection.refresh(),this.scrollerBeAtk.height=148*Math.min(3,e.length)},e.prototype.updateEnemys=function(){var t=LogicSys.ins().getEntityMasterHandleList();this.arrCollectEnemy.source=t,this.arrCollectEnemy.refresh()},e.prototype.onListClick=function(e){t.prototype.onListClick.call(this,e),this.unAutoTz()},e.prototype.updateBossList=function(){0==this.bossDatas.length&&(this.bossDatas=KfSys.ins().smsdData.getBossDatasByFbId()),this.arrCollectBoss.replaceAll(this.bossDatas),this.lbNum.text=""},e.prototype.stopAck=function(){this.onAtkerChange(0),LogicSys.ins().centerEntity.AI.resetTargetALL(),LogicSys.ins().centerEntity.AI.startStand()},e.prototype.onBossListClick=function(t){var e=t.currentTarget.selectedItem;this.onAtkBoss(e),this.unAutoTz()},e.prototype.onAtkBoss=function(t){if(t){KfSys.ins().smsdData.atkBossData=t;var e=new XY((t.getConfig().monsPos.x+.5)*MapBase.CELL_SIZE,(t.getConfig().monsPos.y+.5)*MapBase.CELL_SIZE),i=MapContainer.ins().getNearestRandomXY(e);LogicSys.ins().onMapGridClick(i,function(){LogicSys.ins().centerEntity.AI.resetTargetALL(),LogicSys.ins().centerEntity.AI.addAtkMonsterId(t.getConfig().bossId),LogicSys.ins().centerEntity.AI.startAttack()})}},e.prototype.onBossBlood=function(){this.showReward(),this.bossBloodComponent.visible=!0,this.bossBloodComponent.open(FbSys.ins().bossBloodData),this.bossBloodComponent.updateHp(FbSys.ins().bossBloodData.hp),this.groupRawead.visible=this.bossBloodComponent.visible,this.target.update()},e.prototype.onClick=function(e){switch(t.prototype.onClick.call(this,e),e.target){case this.btnToggleAtk:this.groupBeAtk.visible=!this.groupBeAtk.visible;break;case this.btnBox:openWin(SmsdBoxWin)}},e.prototype.showReward=function(){var t=Cfg.getConfig(ShenmoFubenConfig,CondType.Equal,ShenmoFubenConfig.bossId,FbSys.ins().bossBloodData.bossId);t&&(this.listItemReward.dataProvider=new eui.ArrayCollection(t.firstReward))},e}(BossHomeFbPanel);__reflect(SmsdFbPanel.prototype,"SmsdFbPanel"),window.SmsdFbPanel=SmsdFbPanel;var ActivityType34Config=function(){function t(){}return t}();__reflect(ActivityType34Config.prototype,"ActivityType34Config");var LadderSys=function(t){function e(){var e=t.call(this)||this;return e.MAX_LEVEL=4,e.isOpen=!1,e.level=1,e.nowId=0,e.challgeNum=0,e.challgeCd=0,e.winNum=0,e.lianWin=0,e.playUpTime=!1,e.isCanReward=!1,e.upLevel=0,e.upId=0,e.upWin=0,e.todayBuyTime=0,e.upWeekRank=0,e.currRankDatas=[],e.lastRankDatas=[],e.awardRankDatas=[],e.actorInfo=null,e.sysId=PackId.TianTi,e.reg(1,e.patchLadderInfo),e.reg(2,e.patchGetPlayer),e.reg(3,e.patchPlayResule),e.reg(5,e.patchRankInfoList),e.reg(6,e.patchChallageNum),e.actorInfo=new LadderChallengeRoleData,e}return __extends(e,t),e.ins=function(){return t.getIns.call(this,e)},e.prototype.patchLadderInfo=function(t){this.isOpen=t.readBoolean(),this.level=t.readInt(),this.nowId=t.readInt(),this.challgeNum=t.readInt(),this.challgeCd=1e3*t.readInt()+Timer.ins().getTimer(),this.winNum=t.readInt(),this.lianWin=t.readInt(),this.playUpTime=t.readBoolean(),this.playUpTime&&(this.isCanReward=t.readBoolean(),this.upLevel=t.readInt(),this.upId=t.readInt(),this.upWin=t.readInt()),RpFun.showLadderRedPoint()},e.prototype.sendGetSomeOne=function(){this.sendBase(2)},e.prototype.patchGetPlayer=function(t){this.actorInfo.parser(t)},e.prototype.sendStarPlay=function(t,e){var i=this.getBytes(3);i.writeInt(e),i.writeInt(t),this.send(i)},e.prototype.patchPlayResule=function(t){var e=new LadderResultData;e.parser(t),openWin(LadderResultWin2,e)},e.prototype.sendGetWeekReward=function(){this.sendBase(4)},e.prototype.sendGetRankInfo=function(){this.sendBase(5)},e.prototype.patchRankInfoList=function(t){this.upWeekRank=t.readInt(),this.currRankDatas.length=0,this.awardRankDatas.length=0;var e=t.readShort(),i=0;for(i=0;e>i;i++){var n=new LadderRankData;n.parser(t,i+1),this.currRankDatas.push(n),n.level>=this.MAX_LEVEL&&this.awardRankDatas.push(n)}for(this.lastRankDatas.length=0,e=t.readShort(),i=0;e>i;++i){var n=new LadderRankData;n.parser(t,i+1),this.lastRankDatas.push(n)}},e.prototype.sendBuyChallgeTime=function(){this.sendBase(6)},e.prototype.patchChallageNum=function(t){this.todayBuyTime=t.readInt()},e.prototype.getChallgeCd=function(){return Math.max(this.challgeCd-Timer.ins().getTimer(),0)},e.prototype.getStarMaxByLevel=function(t){var e=[0,3,4,5,6];return e[t]||0},e.prototype.getAwardRankDatas=function(){var t=this.awardRankDatas.slice(0,5),e=5-t.length;if(e>0)for(var i=0;e>i;i++)t.push(new LadderRankData);return t},e.prototype.getCurrTianTiDanConfig=function(){return Cfg.getConfig(TianTiDanConfig,this.level,this.nowId)},e.prototype.getLevelName=function(t){var e=Lang.fb_str145;return 1>=t&&(t=1),t>=e.length&&(t=e.length),e[t-1]},e}(BaseSys);__reflect(LadderSys.prototype,"LadderSys");var System;!function(t){t.ladderSys=LadderSys.ins.bind(LadderSys)}(System||(System={})),window.LadderSys=LadderSys;var LadderChallengeRoleData=function(){function t(){this.type=0,this.roleId=0,this.roleName="",this.job=0,this.level=0,this.duan=0,this.sex=0}return t.prototype.parser=function(t){this.type=t.readInt(),this.roleId=t.readInt(),this.roleName=t.readString(),this.job=t.readByte(),this.sex=t.readByte(),this.level=t.readInt(),this.duan=t.readInt()},t}();__reflect(LadderChallengeRoleData.prototype,"LadderChallengeRoleData");var LadderRankData=function(){function t(){this.rank=0,this.roleId=0,this.roleName="",this.level=1,this.id=0,this.count=0,this.conf=null}return t.prototype.parser=function(t,e){this.roleId=t.readInt(),this.roleName=t.readString(),this.level=t.readInt(),this.id=t.readInt(),this.count=t.readInt(),this.rank=e},t.prototype.getTianTiDanConfig=function(){return this.conf||(this.conf=Cfg.getConfig(TianTiDanConfig,this.level,this.id))},t}();__reflect(LadderRankData.prototype,"LadderRankData");var LadderResultData=function(){function t(){this.isWin=!1,this.awards=[],this.lastLevel=0,this.lastId=0,this.star=0}return t.prototype.parser=function(t){this.isWin=t.readBoolean(),this.awards=[];for(var e=t.readShort(),i=0;e>i;i++){var n=new ItemDataReward;n.parser(t),this.awards.push(n)}this.lastLevel=t.readInt(),this.lastId=t.readInt(),this.star=t.readInt()},t}();__reflect(LadderResultData.prototype,"LadderResultData");var LadderAwardDuanItem=function(t){function e(){var e=t.call(this)||this;return e.skinName="LadderAwardDuanItemEUI",e.list.itemRenderer=ItemBaseReward,e}return __extends(e,t),e.prototype.dataChanged=function(){if(this.data&&this.data.length){var t=this.data;this.list.dataProvider=new eui.ArrayCollection(t),this.lbName.text=Lang.jjc_str10[this.itemIndex]}},e}(BaseItemRender);__reflect(LadderAwardDuanItem.prototype,"LadderAwardDuanItem"),window.LadderAwardDuanItem=LadderAwardDuanItem;var ActivityType35ClientConfig=function(){function t(){}return t}();__reflect(ActivityType35ClientConfig.prototype,"ActivityType35ClientConfig");var LadderAwardRankItem=function(t){function e(){var e=t.call(this)||this;return e.skinName="LadderAwardRankItemEUI",e.setSkinPart("duanAward",new ItemBaseRewardActivity),e}return __extends(e,t),e.prototype.dataChanged=function(){if(this.data&&void 0!=this.data.roleId){var t=this.data,e=this.itemIndex+1;t.rank>0?(this.currentState="state1",this.validateNow(),this.roelName.text=""+t.roleName,this.point.text=""+t.count+Lang.common_chang):(this.currentState="state2",this.validateNow(),this.roelName.text=Lang.fb_str134.replace("$rank$",""+e)),4>e?this.rankImg.source="jjc_zycs_no"+e:this.rankImg.source="",this.rank.text=""+e;var i=Cfg.getConfig(TianTiRankAwardConfig).award[0];this.duanAward.data=i;var n=Cfg.getItemCfg(i.id);this.awardName.text=n.getName(),this.awardName.textColor=GConst.PZColor[n.quality]}},e}(BaseItemRender);__reflect(LadderAwardRankItem.prototype,"LadderAwardRankItem"),window.LadderAwardRankItem=LadderAwardRankItem;var LadderAwardRankItem2=function(t){function e(){var e=t.call(this)||this;return e.skinName="LadderAwardRankItem2EUI",e.list.itemRenderer=ItemBaseReward,e}return __extends(e,t),e.prototype.dataChanged=function(){if(this.data&&this.data.rank){var t=this.data;t.rank<=3?(this.imgRank.source="jjc_zycs_no"+t.rank,this.lbRank.text=""):(this.imgRank.source="",this.lbRank.text=""+t.rank),this.list.dataProvider=new eui.ArrayCollection(t.award)}},e}(BaseItemRender);__reflect(LadderAwardRankItem2.prototype,"LadderAwardRankItem2"),window.LadderAwardRankItem2=LadderAwardRankItem2;var ActivityType36Config=function(){function t(){}return t}();__reflect(ActivityType36Config.prototype,"ActivityType36Config");var LadderAwardWin=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return __extends(e,t),e.prototype.initUI=function(){t.prototype.initUI.call(this),this.layer=LayerMgr.Popup,this.addBg()},e.prototype.setSkinName=function(){this.skinName="LadderAwardWinEUI"},e.prototype.setTabItem=function(){this.tab.itemRenderer=BaseTabBtn5},e.panelNames=[LadderAwardRankPanel,LadderAwardDuanPanel],e}(BaseWinAutoTab);__reflect(LadderAwardWin.prototype,"LadderAwardWin"),window.LadderAwardWin=LadderAwardWin;var LadderChallengeWin=function(t){function e(){var e=t.call(this)||this;return e.roleInfoList=[[0,1],[0,1],[0,1],[0,1]],e.haedHeight=88,e.layer=LayerMgr.Top,e.skinName="LadderChallengeWinEUI",e.otherIcon.scrollRect=new egret.Rectangle(0,0,115,e.haedHeight),e.scrollIcon.scrollRect=new egret.Rectangle(0,-e.haedHeight,115,e.haedHeight),e.otherMask=e.otherIcon.scrollRect,e.scrollMask=e.scrollIcon.scrollRect,e.posY=e.otherMask.y,e.posYImg=e.scrollIcon.y,e.posYScroll=e.scrollMask.y,e}return __extends(e,t),e.prototype.open=function(){t.prototype.open.call(this),this.addLsn(LadderSys.ins().patchGetPlayer,this.updatePlayer),LadderSys.ins().sendGetSomeOne(),this.ingImg.visible=!0,this.timeTxt.text="",this.startScrollHead(),this.setMyHead()},e.prototype.updatePlayer=function(){LadderSys.ins().actorInfo.roleId>0&&(this.roleInfoList[3][1]=LadderSys.ins().actorInfo.job)},e.prototype.setMyHead=function(){var t=LadderSys.ins().getCurrTianTiDanConfig();this.myName.text=Actor.ins().myName,this.myIcon.source=ResMgr.getHeadIcon(Actor.ins().sex);var e="";e=LadderSys.ins().level==LadderSys.ins().MAX_LEVEL?""+t.showLevel:""+t.showLevel+t.showDan+Lang.fb_str135,this.myLevel.text=e},e.prototype.startScrollHead=function(){this.rollTime=0,this.otherMask.y=this.posY,this.scrollMask.y=this.posYScroll,this.scrollIcon.y=this.posYImg,this.refushROllInfo(0),Timer.ins()["do"](0,Timer.EVERY_FRAME,4*this.haedHeight/4,this.startScroll,this)},e.prototype.stopScrollHead=function(){Timer.ins().remove(this.startScroll,this)},e.prototype.startScroll=function(t){t?(this.otherMask.y+=4,this.scrollMask.y+=4,this.otherIcon.scrollRect=this.otherMask,this.scrollIcon.scrollRect=this.scrollMask,this.rollTime+=4,this.rollTime%this.haedHeight==0&&(this.otherMask.y=this.posY,this.scrollMask.y=this.posYScroll,this.scrollIcon.y=this.posYImg,this.refushROllInfo(this.rollTime/this.haedHeight),this.rollTime/this.haedHeight==4&&(this.scrollIcon.source=""))):this.rollOver()},e.prototype.rollOver=function(){this.stopScrollHead(),this.ingImg.visible=!1,this.rollTime=1,LadderSys.ins().actorInfo.roleId>0?Timer.ins()["do"](1e3,1e3,0,this.refushLabel,this):(showtipsFail(Lang.fb_str130),closeWin(e))},e.prototype.refushROllInfo=function(t){if(t>3)return void this.showPointPlayerInfo();var e="";e=LadderSys.ins().level==LadderSys.ins().MAX_LEVEL?""+LadderSys.ins().getLevelName(LadderSys.ins().level):""+LadderSys.ins().getLevelName(LadderSys.ins().level)+Math.ceil(5*Math.random())+Lang.fb_str135,this.otherLevel.text=e;var i=this.roleInfoList[t];this.otherIcon.source=ResMgr.getHeadIcon(i[0]),this.scrollIcon.source=ResMgr.getHeadIcon(i[1]),this.otherName.text=""},e.prototype.showPointPlayerInfo=function(){var t=LadderSys.ins().actorInfo;t.roleId<=0||(this.otherName.text=t.roleName,this.otherIcon.source=""+ResMgr.getHeadIcon(t.sex),this.scrollIcon.source="",this.otherLevel.text=""+LadderSys.ins().getLevelName(t.level)+t.duan+Lang.fb_str135)},e.prototype.refushLabel=function(){this.rollTime--,this.rollTime<1&&(LadderSys.ins().sendStarPlay(LadderSys.ins().actorInfo.type,LadderSys.ins().actorInfo.roleId),Timer.ins().remove(this.refushLabel,this),closeWin(e),closeWin(JJCWin))},e}(BaseWinSingle);__reflect(LadderChallengeWin.prototype,"LadderChallengeWin"),window.LadderChallengeWin=LadderChallengeWin;var ActivityType37Config=function(){function t(){}return t}();__reflect(ActivityType37Config.prototype,"ActivityType37Config");var LadderRankItem=function(t){function e(){var e=t.call(this)||this;return e.skinName="LadderRankItemEUI",e}return __extends(e,t),e.prototype.dataChanged=function(){if(this.data&&this.data.roleId){var t=this.data;t.rank<4?this.imgRank.source="jjc_zycs_no"+t.rank:this.imgRank.source="",this.rank.text=""+t.rank,this.duanBmp.font=t.level%2?"ladderyellow_1_fnt":"ladderwhite_1_fnt",this.duanBmp.text=""+t.getTianTiDanConfig().showDan,this.icon.source="ladder_zycs_rank"+t.level+"a_png",this.roelName.text=""+t.roleName,this.point.text=""+t.count+Lang.common_chang}},e}(BaseItemRender);__reflect(LadderRankItem.prototype,"LadderRankItem"),window.LadderRankItem=LadderRankItem;var ActivityType3Config=function(){function t(){}return t.taskType="taskType",t}();__reflect(ActivityType3Config.prototype,"ActivityType3Config");var ActivityType3exConfig=function(){function t(){}return t}();__reflect(ActivityType3exConfig.prototype,"ActivityType3exConfig");var LadderRankWin=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return __extends(e,t),e.prototype.initUI=function(){t.prototype.initUI.call(this),this.layer=LayerMgr.Popup,this.addBg()},e.panelNames=[LadderRankPanel,LadderRankPanel2],e}(BaseWinAutoTab);__reflect(LadderRankWin.prototype,"LadderRankWin"),window.LadderRankWin=LadderRankWin;var LadderResultWin2=function(t){function e(){var e=t.call(this)||this;return e.layer=LayerMgr.Popup,e.skinName="LadderResultWin2EUI",e.addBg(),e.list.itemRenderer=ItemBaseReward,e.list.dataProvider=e.listArr=new eui.ArrayCollection,e}return __extends(e,t),e.prototype.open=function(e){t.prototype.open.call(this),this.data=e,this.addClickE(this.btn,this.onCloseBtn),this.setData(this.data)},e.prototype.close=function(){t.prototype.close.call(this),Timer.ins().remove(this.updateClose,this),egret.Tween.removeTweens(this.duanIcon),FbSys.ins().fbId>0&&FbSys.ins().sendExitFb()
},e.prototype.setData=function(t){var e=this;if(this.data.isWin){this.currentState="win",this.bg.visible=!1;var i=MC.create(ResMgr.getEffName("win"),-1);this.titleGroup.addChild(i);var n=Cfg.getConfig(TianTiDanConfig,t.lastLevel,t.lastId);this.duanIcon.setLvAndRank(n),this.duanIcon.updataStarInfo(n),this.duanIcon.showBgEff(),Timer.ins()["do"](500,0,1,function(){e.setStarInfoChange(n.showStar,t.star)},this)}else{this.currentState="lose";var a=LadderSys.ins().getCurrTianTiDanConfig();this.duanIcon.setLvAndRank(a),this.duanIcon.updataStarInfo(a)}this.listArr.source=t.awards,this.s=8,this.btn.label=Lang.common_str48.replace("$second$",""+this.s),Timer.ins()["do"](1e3,1e3,this.s,this.updateClose,this)},e.prototype.onCloseBtn=function(t){if(void 0===t&&(t=null),!t)return void closeWin(this);switch(t.currentTarget){case this.btn:closeWin(this)}},e.prototype.updateClose=function(){this.s--,this.s<=0&&this.onCloseBtn(),this.btn.label=Lang.common_str48.replace("$second$",""+this.s)},e.prototype.setStarInfoChange=function(t,e){e>0&&this.duanIcon.upStarStatu(t,e,this.data.isWin)},e.prototype.cheackIsChangeLevel=function(t){var e=this;if(this.data.lastLevel!=LadderSys.ins().level||this.data.lastId!=LadderSys.ins().nowId){var i=egret.Tween.get(this.duanIcon);i.to({alpha:1},300).call(function(){e.data.isWin&&t>=1&&e.duanIcon.upStarStatu(0,t,e.data.isWin);var i=LadderSys.ins().getCurrTianTiDanConfig();e.duanIcon.updataStarInfo(i,!1),e.duanIcon.showRankUp(i.level);var n=egret.Tween.get(e.duanIcon);n.wait(800).call(function(){e.duanIcon.showLvUp(i.showDan)},e)},this)}},e}(BaseWinSingle);__reflect(LadderResultWin2.prototype,"LadderResultWin2"),window.LadderResultWin2=LadderResultWin2;var LadderStar2=function(t){function e(){var e=t.call(this)||this;return e.currMaxStar=0,e.numRank=0,e.skinName="LadderStarSkin",e.starEff=new MC,e.numEff=new MC,e.numEff.x=133,e.numEff.y=e.duanBmp.y,e.addChild(e.numEff),e.stars=[e.star0,e.star1,e.star2,e.star3,e.star4],e}return __extends(e,t),e.prototype.upStarStatu=function(t,e,i){var n=this;void 0===i&&(i=!1);var a=this.stars[t];this.starEff.x=a.x+23,this.starEff.y=a.y+24,this.addChild(this.starEff);var o=this.currMaxStar;i&&(--e,a.source="chibang_zycs_star_02",o==t&&(a.source="chibang_zycs_star_01"),this.starEff.playFile(getEffName("wzzb_xingxing"),1,function(){if(i&&t==n.currMaxStar-1){var a=getWin(LadderResultWin2);a&&a.isShow()&&a.cheackIsChangeLevel(e)}e>0&&t<n.currMaxStar-1&&n.upStarStatu(++t,e,i)}))},e.prototype.showRankUp=function(t){var e=this;this.numRank=t;var i=egret.Tween.get(this.icon);i.wait(1800).call(function(){e.icon.source="ladder_zycs_rank"+t+"_png",e.icon.alpha=0;var i=egret.Tween.get(e.icon);i.to({alpha:1},700)},this)},e.prototype.showLvUp=function(t){var e=this;this.numLevel=t,this.numEff.playFile(getEffName("wzzb_shanguang"),1,function(){if(e.duanBmp.scaleX=3.3,e.duanBmp.scaleY=3.3,e.numLevel>0&&e.numLevel<6){var i=e.numRank?e.numRank:e.currMaxStar;e.duanBmp.font=i%2?"ladderyellow_0_fnt":"ladderwhite_0_fnt",e.duanBmp.text=t.toFixed(0)}else e.duanBmp.text="";var n=egret.Tween.get(e.duanBmp);n.to({scaleX:1,scaleY:1},300)})},e.prototype.setLvAndRank=function(t){if(void 0==t)this.icon.source="ladder_zycs_rank1_png",this.duanBmp.text="";else if(this.icon.source="ladder_zycs_rank"+t.level+"_png",t.level>=4||t.showDan<=0||t.showDan>5)this.duanBmp.text="";else{var e=LadderSys.ins().getStarMaxByLevel(t.level);this.duanBmp.font=e%2?"ladderyellow_0_fnt":"ladderwhite_0_fnt",this.duanBmp.text=t.showDan.toFixed(0)}},e.prototype.updataStarInfo=function(t,e){if(void 0===e&&(e=!0),t){this.currMaxStar=LadderSys.ins().getStarMaxByLevel(t.level);for(var i=this.stars.length,n=0;i>n;n++)n<t.showStar?this.stars[n].source="chibang_zycs_star_02":this.stars[n].source="chibang_zycs_star_01"}else this.currMaxStar=0;this.currentState="star"+this.currMaxStar},e.prototype.showBgEff=function(){this.bgEff||(this.bgEff=new MC,this.bgEff.playFile(getEffName("wzzb_beijingguang"),-1)),this.mcGruop.addChild(this.bgEff)},e}(BaseEUI);__reflect(LadderStar2.prototype,"LadderStar2"),window.LadderStar2=LadderStar2;var MeiRiFbItem=function(t){function e(){var e=t.call(this)||this;return e.skinName="MeiRiFbItemEUI",e.list.itemRenderer=ItemBaseReward,e.list.dataProvider=e.listData=new eui.ArrayCollection,e.addClickE(e,e.onClick),e}return __extends(e,t),e.prototype.onClick=function(t){var e=this.data;switch(t.target){case this.btnSaoDang:GFunc.checkCurrency(CurType.yb,e.getSaoDangConsume())&&FbSys.ins().sendSweep(e.fbGroup);break;case this.btnSend:if(!BagSys.ins().checkBagVolumn())return;GFunc.checkGotoFuben()&&(FbSys.ins().guajiData.isGuanQia?openWin(WarnWin,"当前正在挑战天路，是否退出?",function(){FbSys.ins().sendDailyFight(e.fbGroup),closeWin(FuBenWin)},this):(FbSys.ins().sendDailyFight(e.fbGroup),closeWin(FuBenWin)));break;case this.btnHelp:openWin(HelpWin,Cfg.getConfig(HelpInfoConfig,e.config.helpId).text)}},e.prototype.dataChanged=function(){if(this.data instanceof FbModelDaily){if(this.imgBg.source="fb_zycs_mr"+this.data.fbGroup+"_jpg",this.groupConsume.visible=!1,this.data.isOpen)if(this.groupOpenDec.visible=!1,this.groupOperation.visible=!0,this.data.useCount>0)this.btnSend.visible=!0,this.btnSaoDang.visible=!1,this.lbCount.text=Lang.fb_str339+"："+this.data.useCount;else{if(this.btnSend.visible=!1,this.groupConsume.visible=!0,this.btnSaoDang.visible=!0,this.btnSaoDang.enabled=this.data.saodangCount>0,this.data.saodangCount>0)this.lbCount.text=Lang.fb_str340+"："+this.data.saodangCount;else{var t=Cfg.getNextVipExp(this.data.fbGroup);t?this.lbCount.text=Lang.fb_str341.replace("$count$",""+t):this.lbCount.text=Lang.fb_str331}this.lbConsume.text=""+this.data.getSaoDangConsume()}else this.groupOpenDec.visible=!0,this.groupOperation.visible=!1,this.lbGuan.text=Lang.fb_str348.replace("$count$",""+this.data.config.condition.custom);this.data.fbGroup==FbGroup.Gold||this.data.fbGroup==FbGroup.TianFu?(this.groupTake.visible=!0,this.lbTake.text=""+this.data.take,this.imgDec.source=this.data.fbGroup==FbGroup.Gold?"fb_zycs_jb":"fb_zycs_tf",this.imgIcon.source=this.data.fbGroup==FbGroup.Gold?"zycs_320001":"zycs_320027",this.listData.source=[],this.lbDec.y=66):(this.listData.source=this.data.config.awards,this.groupTake.visible=!1,this.imgDec.source="",this.lbDec.y=153);var e=ActSys.ins().beishu;this.doubleImg.visible=1==e;var i=Cfg.getDailyFubenMoreByLevel(this.data.fbGroup,Actor.ins().zsId),n=Lang.fb_str345.replace("$str$",GFunc.getZSNameBydb(i.zsLevel));n=n.replace("$count$",""+i.idx),this.lbDec.text=n}},e.prototype.getBtnSend=function(){return this.btnSend},e}(BaseItemRender);__reflect(MeiRiFbItem.prototype,"MeiRiFbItem"),window.MeiRiFbItem=MeiRiFbItem;var ActivityType4Config=function(){function t(){}return t}();__reflect(ActivityType4Config.prototype,"ActivityType4Config");var MeiRiMapFbPanel=function(t){function e(){var e=t.call(this)||this;return e.skinName="MeiRiMapFbPanelEUI",e}return __extends(e,t),e.prototype.open=function(){t.prototype.open.call(this),this.addLsn(LogicSys.ins().patchEnterMap,this.updataMap),this.addLsn(FbSys.ins().patchUpdateFbTime,this.updataMap),this.addLsn(FbSys.ins().patchKillCount,this.updateKill),this.addLsn(FbSys.ins().patchFbCurrency,this.updateReward),this.infoPanel()},e.prototype.infoPanel=function(){this.fbConfig=Cfg.getConfig(FubenConfig,FbSys.ins().fbId),this.baseDailyFubenConfig=Cfg.getConfig(BaseDailyFubenConfig,this.fbConfig.group),this.fbConfig.group==FbGroup.Gold||this.fbConfig.group==FbGroup.TianFu?this.currentState="state1":this.currentState="state2",this.updateKill(),this.updateReward(),this.updataMap()},e.prototype.updateKill=function(){var t="";if(this.baseDailyFubenConfig.needkillcnt>0){var e=Math.max(this.baseDailyFubenConfig.needkillcnt-FbSys.ins().fubenKill,0);t=addColor(e+"/"+this.baseDailyFubenConfig.needkillcnt,5767068)}else t=addColor(""+FbSys.ins().fubenKill,5767068);this.lbCount.textFlow=addColorTF(Lang.fb_str346+"："+t)},e.prototype.updateReward=function(){var t=Lang.fb_str28+(this.fbConfig.group==FbGroup.Gold?Lang.common_jb:Lang.mount_str1)+"：";t+=addColor(""+GFunc.overLength(FbSys.ins().fubenCurrency),5767068),this.lbReward.textFlow=addColorTF(t)},e.prototype.updataMap=function(){FbSys.ins().commonEndTick>0&&Timer.ins()["do"](0,1e3,FbSys.ins().surplusTime,this.SweepCountDown,this)},e.prototype.SweepCountDown=function(){var t=getFormatTime(FbSys.ins().surplusTime,"hh:mm:ss");this.lbTime.textFlow=addColorTF(Lang.common_str11+addColor(t,5767068))},e}(BasePanel);__reflect(MeiRiMapFbPanel.prototype,"MeiRiMapFbPanel"),window.MeiRiMapFbPanel=MeiRiMapFbPanel;var MineSys=function(t){function e(){var e=t.call(this)||this;return e.minerQuality=0,e.addrQualityCount=0,e.bless=0,e.mineCount=0,e.robCount=0,e.buyMineCount=0,e.fbIndex=0,e.maxFbIndex=0,e.myMinePos=0,e.time=0,e.comCount=0,e.minePosDatas=[],e.robLogDatas=[],e.minerConfigs=[],e.rewardStatus=-1,e.sysId=PackId.Mine,e.reg(1,e.patchMineInfo),e.reg(2,e.patchEnterFB),e.reg(4,e.patchMinerQuality),e.reg(6,e.patchResult),e.reg(7,e.patchReward),e.reg(8,e.patchRobLog),e.reg(11,e.patchComCount),e.reg(12,e.patchMinePosChange),e.reg(15,e.patchMineRobLogRedPoint),e.reg(16,e.patchMaxFbIndex),e.reg(17,e.patchRevenge),e}return __extends(e,t),e.ins=function(){return t.getIns.call(this,e)},e.prototype.patchMineInfo=function(t){this.minerQuality=t.readByte(),this.bless=t.readInt(),this.addrQualityCount=t.readByte(),this.mineCount=t.readByte(),this.robCount=t.readByte(),this.buyMineCount=t.readByte(),t.readBoolean(),RpFun.showMineReward(t.readBoolean()),RpFun.showMineCaiji(),RpFun.showMineLueDuo()},e.prototype.sendEnterFB=function(t){var e=this.getBytes(2);e.writeByte(t),this.send(e)},e.prototype.patchEnterFB=function(t){this.fbIndex=t.readInt(),this.myMinePos=t.readByte(),this.time=1e3*t.readInt()+Timer.ins().getTimer(),this.minePosDatas=[];for(var e=t.readByte(),i=0;e>i;i++){var n=new MinePosData;n.parser(t),n.posHandle=VirtualServer.ins().getHandle(),LogicSys.ins().creatMinePos(n),n.minerQuality&&(n.minerHandle=VirtualServer.ins().getHandle(),LogicSys.ins().creatMiner(n)),this.minePosDatas.push(n)}this.comCount=t.readByte(),RpFun.showMineCaiji(),openWin(MinerWin)},e.prototype.sendMining=function(){var t=this.getBytes(3);this.send(t)},e.prototype.sendMinerQuality=function(){this.sendBase(4)},e.prototype.patchMinerQuality=function(t){var e=t.readBoolean();this.minerQuality=t.readByte();var i=t.readInt();this.addrQualityCount=t.readByte(),e?showtipsSuc(Lang.fb_str174):showtipsFail(Lang.fb_str175.replace("$num$",""+(i-this.bless))),this.bless=i},e.prototype.sendKswc=function(){this.sendBase(5)},e.prototype.patchResult=function(t){this.resultQuality=t.readByte();var e=t.readShort();this.resultReward=[];for(var i=0;e>i;i++){var n=new ItemDataReward;n.parser(t),n["double"]=t.readByte(),this.resultReward.push(n)}e=t.readShort(),this.resultlogDatas=[],this.resultconf=Cfg.getConfig(MinerConfig,this.resultQuality);for(var a=0;e>a;a++){var o=new MineResultLogData;o.roleName=t.readString(),o.isWin=t.readBoolean(),o.minerName=this.resultconf.name,o.minerQuality=this.resultQuality,this.resultlogDatas.push(o)}this.rewardStatus=t.readByte(),this.time=0,this.myMinePos=0,RpFun.showMineCaiji(),openWin(MineResultWin,this.resultconf,this.resultReward,this.resultlogDatas)},e.prototype.sendReward=function(t){var e=this.getBytes(7);e.writeByte(t),this.send(e)},e.prototype.patchReward=function(t){this.rewardStatus=0},e.prototype.sendRobLog=function(){this.sendBase(8)},e.prototype.patchRobLog=function(t){this.robLogDatas=[];for(var e=t.readShort(),i=0;e>i;i++){var n=new MineRobLogData;n.parser(t),this.robLogDatas.push(n)}},e.prototype.sendRob=function(t,e,i){void 0===i&&(i=2);var n=this.getBytes(9);n.writeInt(t),n.writeByte(e),n.writeByte(i),this.send(n)},e.prototype.sendRevenge=function(t){var e=this.getBytes(10);e.writeInt(t),this.send(e)},e.prototype.patchComCount=function(t){this.comCount=t.readInt()},e.prototype.patchMinePosChange=function(t){var e=new MinePosData;e.parser(t),Actor.ins().actorID==e.roleID&&(this.myMinePos=e.pos,this.time=e.time,RpFun.showMineCaiji());var i=this.getMineFBDataByPos(e.pos);if(i){if(e.posHandle=i.posHandle,e.minerHandle=i.minerHandle,0==e.minerQuality)i.minerHandle>0&&LogicSys.ins().removeEntityByHandle(i.minerHandle);else if(e.minerQuality>0&&0==i.minerQuality)e.minerHandle=VirtualServer.ins().getHandle(),LogicSys.ins().creatMiner(e);else{var n=LogicSys.ins().getEntityByHandle(e.minerHandle);n instanceof EntityMiner&&n.setData(e)}this.getMineFBDataByPos(e.pos,e)}},e.prototype.sendBuyMineCount=function(){this.sendBase(14)},e.prototype.patchMineRobLogRedPoint=function(t){RpFun.showMineLueDuoLog(t.readBoolean())},e.prototype.patchMaxFbIndex=function(t){this.maxFbIndex=t.readInt(),this.fbIndex=t.readInt()},e.prototype.patchRevenge=function(t){var e=t.readByte();e>=0&&openWin(CountDownWin,e,CountDownWin.TYPE_JJC)},e.prototype.getTime=function(){return Math.max(this.time-Timer.ins().getTimer(),0)},e.prototype.getMineFBDataByPos=function(t,e){for(var i=this.minePosDatas.length,n=0;i>n;n++)if(this.minePosDatas[n].pos==t)return e?this.minePosDatas[n]=e:this.minePosDatas[n];return null},e.prototype.getMineRobDatas=function(){for(var t=[],e=0,i=this.minePosDatas;e<i.length;e++){var n=i[e];n.isMining()||n.isMyMiner()||t.push(n)}return SortUtil.sortOn(t,["minerQuality","power"],[SortType.down,SortType.up]),t},e.prototype.getFbMinerCount=function(){for(var t=0,e=0,i=this.minePosDatas;e<i.length;e++){var n=i[e];n.isMining()||t++}return t},e.prototype.getMinerConfigs=function(){if(this.minerConfigs&&this.minerConfigs.length>0)return this.minerConfigs;this.minerConfigs=[];var t=Cfg.getConfigs(MinerConfig,CondType.NONE);for(var e in t)this.minerConfigs.push(t[e]);return this.minerConfigs},e.prototype.getQualityConsu=function(){var t=Cfg.getConfig(MineCommonConfig).consume;return this.addrQualityCount>=t.length?t[t.length-1]:t[this.addrQualityCount]},e.prototype.getBuyMiningConsu=function(){var t=Cfg.getConfig(MineCommonConfig).prices;return this.buyMineCount>=t.length?t[t.length-1]:t[this.buyMineCount]},e.prototype.getMineBuyData=function(){var t=new MineBuyData,e=VipSys.ins().getCurSVipConfig(),i=Cfg.getConfig(SVipConfig,Cfg.getSVipMaxLv());if(this.mineCount<Cfg.getConfig(MineCommonConfig).count)t.type=0;else if(this.mineCount<Cfg.getConfig(MineCommonConfig).count+this.buyMineCount)t.type=1;else if(this.buyMineCount<e.mine)t.type=2,t.consu=this.getBuyMiningConsu();else if(this.buyMineCount<i.mine){t.type=3;for(var n=Cfg.getVipMaxLv(),a=0;n>=a;a++){var o=Cfg.getConfig(SVipConfig,a);if(this.buyMineCount<o.mine){t.vipLv=o.lv;break}}}else t.type=4;return t},e.prototype.getMaxMiningCount=function(){return Cfg.getConfig(MineCommonConfig).count+this.buyMineCount},e.prototype.getMiningCount=function(){return Math.max(this.getMaxMiningCount()-this.mineCount,0)},e.prototype.getKeRobCount=function(){return Math.max(Cfg.getConfig(MineCommonConfig).rob-this.robCount,0)},e.prototype.getRobReward=function(t){var e=Cfg.getConfig(MinerConfig,t),i=[];for(var n in e.reward){var a=new ItemDataReward;a.id=e.reward[n].id,a.count=Math.floor(e.reward[n].count*Cfg.getConfig(MineCommonConfig).lot/1e4),i.push(a)}return i},e.prototype.getItemDataRewardEffs=function(t,e){void 0===e&&(e=0);var i=[];for(var n in t){var a=new ItemDataReward;a.id=t[n].id,a.count=t[n].count,a.eff=e,i.push(a)}return i},e}(BaseSys);__reflect(MineSys.prototype,"MineSys");var MineBuyData=function(){function t(){this.type=0,this.vipLv=0,this.consu=0}return t}();__reflect(MineBuyData.prototype,"MineBuyData");var MineResultLogData=function(){function t(){this.roleName="",this.isWin=!1,this.minerName="",this.minerQuality=1}return t}();__reflect(MineResultLogData.prototype,"MineResultLogData");var System;!function(t){t.mineSys=MineSys.ins.bind(MineSys)}(System||(System={})),window.MineSys=MineSys;var MinerNameComponent=function(t){function e(){var e=t.call(this)||this;return e.skinName="MinerNameSkin",e.touchEnabled=!1,e.touchChildren=!1,e}return __extends(e,t),e.prototype.updateRoleName=function(t){this.labelName.textFlow=StrUtil.toTF(t)},e.prototype.updateTime=function(t){this.labelTime.textFlow=addColorTF(t)},e.prototype.updateMinerName=function(t){this.nameImg.source="sjhj_zycs_kg"+(t?t:1)},e.prototype.setRobImgShow=function(t){this.robImg.visible=t},e}(BaseEUI);__reflect(MinerNameComponent.prototype,"MinerNameComponent"),window.MinerNameComponent=MinerNameComponent;var MinePosData=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.pos=1,e.minerQuality=0,e.time=0,e.roleID=0,e.roleName="",e.roleJob=JobConst.ZhanShi,e.power=0,e.robRoleIds=[],e.isRobing=!1,e.posHandle=0,e.minerHandle=0,e}return __extends(e,t),e.prototype.parser=function(t){this.pos=t.readByte(),this.minerQuality=t.readByte(),this.roleJob=t.readByte(),this.time=1e3*t.readInt()+Timer.ins().getTimer(),this.roleID=t.readInt(),this.roleName=t.readString(),this.power=t.readDouble();var e=t.readByte();this.robRoleIds=[];for(var i=0;e>i;i++)this.robRoleIds.push(t.readInt());this.isRobing=t.readBoolean()},e.prototype.isGrab=function(){return-1!=this.robRoleIds.indexOf(Actor.ins().actorID)},e.prototype.isMyMiner=function(){return this.roleID==Actor.ins().actorID},e.prototype.getBeRobCount=function(){return this.robRoleIds.length},e.prototype.isMining=function(){return 0==this.minerQuality},e.prototype.isRob=function(){return!this.isGrab()&&this.getBeRobCount()<Cfg.getConfig(MineCommonConfig).berob&&this.minerQuality>0},e.prototype.getTime=function(){return Math.max(this.time-Timer.ins().getTimer(),0)},e.prototype.getMineFBConfig=function(){return Cfg.getConfig(MineFBConfig,this.pos)},e}(EntityData);__reflect(MinePosData.prototype,"MinePosData");var MineRobLogData=function(){function t(){this.id=0,this.isMy=!1,this.isWin=!1,this.isRevenge=!1,this.time=0,this.roleId=0,this.roleName="",this.roleJob=0,this.power=0,this.minerQuality=0,this.sex=0}return t.prototype.parser=function(t){this.id=t.readInt(),this.isMy=t.readBoolean(),this.isWin=t.readBoolean(),this.isRevenge=t.readBoolean(),this.time=DateUtil.formatMiniDateTime(t.readInt()),this.roleId=t.readInt(),this.roleName=t.readString(),this.power=t.readDouble(),this.minerQuality=t.readByte(),this.roleJob=t.readByte(),this.sex=t.readByte()},t.prototype.getTime=function(){return DateUtil.formatDayTime(this.time,"yy-mo-dd hh:mm",!0)},t}();__reflect(MineRobLogData.prototype,"MineRobLogData");var MineResultLogItem=function(t){function e(){var e=t.call(this)||this;return e.setSkinName(),e}return __extends(e,t),e.prototype.setSkinName=function(){this.skinName="MineResultLogItemEUI"},e.prototype.dataChanged=function(){if(this.data||this.data.roleName){var t=this.data,e="";e=t.isWin?Lang.fb_str146.replace("$name$",""+t.roleName).replace("$mine$",""+t.minerName):Lang.fb_str147.replace("$name$",""+t.roleName).replace("$mine$",""+t.minerName),this.attrTxt.textFlow=addColorTF(e)}},e}(BaseItemRender);__reflect(MineResultLogItem.prototype,"MineResultLogItem"),window.MineResultLogItem=MineResultLogItem;var MinerItem=function(t){function e(){var e=t.call(this)||this;return e.skinName="MinerItemEUI",e.rewardList.itemRenderer=ItemBaseRewardActivity,e.rewardList.dataProvider=e.rewardListArr=new eui.ArrayCollection,e.rewardList2.itemRenderer=ItemBaseRewardActivity,e.rewardList2.dataProvider=e.rewardListArr2=new eui.ArrayCollection,e.selectImg.touchEnabled=!1,e.noRob.touchEnabled=!1,e}return __extends(e,t),e.prototype.dataChanged=function(){if(this.data&&this.data.id){var t=this.data;this.bg.source="sjhj_zycs_jx"+t.id,this.icon.source="sjhj_zycs_mode"+t.id,this.nameBg.source="sjhj_zycs_t"+t.id,this.nameImg.source="sjhj_zycs_kg"+t.id;var e=MineSys.ins().minerQuality==t.id&&MineSys.ins().getTime()>0;this.mining.visible=e,this.rewardListArr.source=MineSys.ins().getItemDataRewardEffs(t.reward,e?1:0),t.extra&&t.extra.length>0?(this.rewardListArr2.source=MineSys.ins().getItemDataRewardEffs(t.extra,e?1:0),this.noRob.visible=!0):(this.rewardListArr2.source=[],this.noRob.visible=!1),MineSys.ins().minerQuality==t.id?this.selectImg.visible=!0:this.selectImg.visible=!1}},e}(BaseItemRender);__reflect(MinerItem.prototype,"MinerItem"),window.MinerItem=MinerItem;var MineRobListPanelItem=function(t){function e(){var e=t.call(this)||this;return e.skinName="MineRobListPanelItemEUI",e.list.itemRenderer=ItemBaseReward,e.addClickE(e.btnRob,e.onClick),e}return __extends(e,t),e.prototype.onClick=function(t){var e=this.data;return MineSys.ins().robCount>=Cfg.getConfig(MineCommonConfig).rob?void showtipsFail(Lang.fb_str173):e.isMyMiner()?void showtipsFail(Lang.scene_str3):e.isGrab()?void showtipsFail(Lang.scene_str4):e.isRobing?void showtipsFail(Lang.scene_str5):e.isRob()?(MineSys.ins().sendRob(MineSys.ins().fbIndex,e.pos),void closeWin(MinerWin)):void showtipsFail(Lang.scene_str6.replace("$count$",""+Cfg.getConfig(MineCommonConfig).berob))},e.prototype.dataChanged=function(){this.data instanceof MinePosData&&(this.imgHead.source="sjhj_zycs_mode"+this.data.minerQuality,this.lbRoleName.text=this.data.roleName,this.lbMineName.textFlow=addColorTF(Cfg.getConfig(MinerConfig,this.data.minerQuality).name,16773541),this.lbPower.text=Lang.common_str113+"："+this.data.power,this.list.dataProvider=new eui.ArrayCollection(MineSys.ins().getRobReward(this.data.minerQuality)))},e}(BaseItemRender);__reflect(MineRobListPanelItem.prototype,"MineRobListPanelItem"),window.MineRobListPanelItem=MineRobListPanelItem;var MineRobLogItem=function(t){function e(){var e=t.call(this)||this;return e.skinName="MineRobLogItemEUI",e.addClickE(e.revengeBtn,e.onClick),e}return __extends(e,t),e.prototype.onClick=function(t){var e=this.data;e&&!e.isRevenge?openWin(MineRevengeWin,e):showtipsFail(Lang.fb_str160)},e.prototype.dataChanged=function(){if(this.data||this.data.roleName){var t=this.data;this.timeTxt.text=t.getTime();var e=Cfg.getConfig(MinerConfig,t.minerQuality),i="";t.isMy?(i=t.isWin?Lang.fb_str148.replace("$name$",""+t.roleName).replace("$mine$",""+e.name):Lang.fb_str149.replace("$name$",""+t.roleName).replace("$mine$",""+e.name),this.revengeBtn.visible=!1):(i=t.isWin?Lang.fb_str146.replace("$name$",""+t.roleName).replace("$mine$",""+e.name):Lang.fb_str147.replace("$name$",""+t.roleName).replace("$mine$",""+e.name),t.isRevenge?this.revengeBtn.textFlow=addColorTF(Lang.fb_str151,16711680,!0):this.revengeBtn.textFlow=addColorTF(Lang.fb_str150,2343978,!0),this.revengeBtn.visible=t.isWin),this.logTxt.text=i}},e}(BaseItemRender);__reflect(MineRobLogItem.prototype,"MineRobLogItem"),window.MineRobLogItem=MineRobLogItem;var MineFBPanel=function(t){function e(){var e=t.call(this)||this;return e.skinName="MineFBPanelSkin",e}return __extends(e,t),e.prototype.open=function(){t.prototype.open.call(this),this.mineSys=MineSys.ins(),this.addClickE(this.mineBtn,this.onClick),this.addClickE(this.robMinerBtn,this.onClick),this.addClickE(this.robLogBtn,this.onClick),this.addClickE(this.leftBtn,this.onClick),this.addClickE(this.rightBtn,this.onClick),this.addLsn(this.mineSys.patchEnterFB,this.updatePanel),this.addLsn(this.mineSys.patchMinePosChange,this.updatePanel),this.addLsn(this.mineSys.patchReward,this.updatePanel),this.addLsn(this.mineSys.patchResult,this.updatePanel),this.addLsn(this.mineSys.patchMineInfo,this.updateMineInfo),this.addLsn(this.mineSys.patchComCount,this.updateComNum),this.addLsn(this.mineSys.patchMaxFbIndex,this.updateFbIndex),this.addLsn(RpSys.ins().patchRp,this.updateRp),this.updatePanel(),this.updateMineInfo(),this.updateRp()},e.prototype.updateRp=function(t){void 0===t&&(t=null),(!t||t.check(MineMainPanel))&&(this.mineBtn.redPoint.visible=RpSys.ins().getData(JJCWin,JJCManyPanel,MineMainPanel,"Caiji"),this.robMinerBtn.redPoint.visible=RpSys.ins().getData(JJCWin,JJCManyPanel,MineMainPanel,"LueDuo"),this.robLogBtn.redPoint.visible=RpSys.ins().getData(JJCWin,JJCManyPanel,MineMainPanel,"LueDuoLog"))},e.prototype.updatePanel=function(){this.comNum.text=""+Lang.fb_str153+this.mineSys.comCount,this.minerNum.text=""+Lang.fb_str154+this.mineSys.getFbMinerCount(),this.lbmine.text=1==this.mineSys.rewardStatus?Lang.common_str81:Lang.fb_str267,this.updateFbIndex()},e.prototype.updateFbIndex=function(){var t=Cfg.getFubenName(FbSys.ins().fbId);this.mineSys.fbIndex>1?(this.leftGroup.visible=!0,this.lastName.text=""+t+(this.mineSys.fbIndex-1)):this.leftGroup.visible=!1,this.mineSys.fbIndex<this.mineSys.maxFbIndex?(this.rightGroup.visible=!0,this.nextName.text=""+t+(this.mineSys.fbIndex+1)):this.rightGroup.visible=!1},e.prototype.updateComNum=function(){this.comNum.text=""+Lang.fb_str153+this.mineSys.comCount},e.prototype.updateMineInfo=function(){this.mineCountTxt.text=""+Lang.common_str8+this.mineSys.getMiningCount()+"/"+this.mineSys.getMaxMiningCount(),this.robCountTxt.text=""+Lang.common_str8+this.mineSys.getKeRobCount()+"/"+Cfg.getConfig(MineCommonConfig).rob},e.prototype.onClick=function(t){switch(t.currentTarget){case this.mineBtn:openWin(MinerWin);break;case this.robMinerBtn:RpFun.mineLueDuoShow=!1,RpFun.showMineLueDuo(),openWin(MinerWin,MinerWin.getTabIndexbyPanel(MineRobListPanel));break;case this.robLogBtn:openWin(MinerWin,MinerWin.getTabIndexbyPanel(MineRobLogPanel));break;case this.leftBtn:this.mineSys.sendEnterFB(1);break;case this.rightBtn:this.mineSys.sendEnterFB(2)}},e}(BasePanel);__reflect(MineFBPanel.prototype,"MineFBPanel"),window.MineFBPanel=MineFBPanel;var ActivityType5Config=function(){function t(){}return t}();__reflect(ActivityType5Config.prototype,"ActivityType5Config");var RpSys=function(t){function e(){return t.call(this)||this}return __extends(e,t),e.ins=function(){return t.getIns.call(this,e)},e.prototype.setData=function(e){for(var i=[],n=1;n<arguments.length;n++)i[n-1]=arguments[n];return t.prototype.setData.apply(this,[!!e].concat(i))},e.prototype.getData=function(){for(var e=[],i=0;i<arguments.length;i++)e[i]=arguments[i];return t.prototype.getData.apply(this,e)},e.prototype.getDataAllTrue=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return this.count=0,this.read(this.datas,0,t,!1)},e.prototype.getObjectValueAll=function(t){var e=typeof t;if("object"==e){var i=!0;for(var n in t)if(i=this.getObjectValueAll(t[n]),!i)break;return i?!0:!1}if("number"==e||"boolean"==e)return t;if("string"==e){for(var a=t.split(this.split2),i=!0,o=0,s=a;o<s.length;o++){var r=s[o],n=r.split(this.split1);if(i=this.read(this.datas,0,n,!1),!i)break}return i}return!1},e.prototype.doData=function(t,e){this.isPatch&&this.patchRp(this.patchData(t,e,RpData))},e.prototype.patchRp=function(t){return t},e}(TreeSys);__reflect(RpSys.prototype,"RpSys");var System;!function(t){t.rpSys=RpSys.ins.bind(RpSys)}(System||(System={})),window.RpSys=RpSys;var ActivityType8Config=function(){function t(){}return t}();__reflect(ActivityType8Config.prototype,"ActivityType8Config");var ActivityType9Config=function(){function t(){}return t}();__reflect(ActivityType9Config.prototype,"ActivityType9Config");var MineResultWin=function(t){function e(){var e=t.call(this)||this;return e.layer=LayerMgr.Popup,e.skinName="MineResultWinEUI",e.addBg(),e.setSkinPart("unitPrice",new PriceIcon),e.unitPrice.setType(CurType.yb),e.rewardList.itemRenderer=ItemBaseReward,e.rewardList.dataProvider=e.rewardListArr=new eui.ArrayCollection,e.listLog.itemRenderer=MineResultLogItem,e.listLog.dataProvider=e.listLogArr=new eui.ArrayCollection,e.closeBtn.visible=!1,e.addClickE(e.backGround,function(t){return t.stopPropagation()}),e}return __extends(e,t),e.prototype.open=function(e,i,n){void 0===i&&(i=[]),void 0===n&&(n=[]),t.prototype.open.call(this),this.conf=e,this.rewards=i,this.logDatas=n,this.addClickE(this.receiveBtn,this.onClick),this.addClickE(this.buyBtn,this.onClick),this.setData()},e.prototype.setData=function(){this.nameBg.source="sjhj_zycs_t"+this.conf.id,this.nameImg.source="sjhj_zycs_kg"+this.conf.id,this.icon.source="sjhj_zycs_mode"+this.conf.id,this.rewardListArr.source=this.rewards,this.logDatas&&this.logDatas.length>0?(this.listLogArr.source=this.logDatas,this.robImg.visible=!1):(this.listLogArr.source=[],this.robImg.visible=!0),this.unitPrice.setPrice(Cfg.getConfig(MineCommonConfig).doublePrice)},e.prototype.onClick=function(t){switch(t.currentTarget){case this.receiveBtn:MineSys.ins().sendReward(0),closeWin(e);break;case this.buyBtn:if(Actor.ins().getCurrency(CurType.yb)<Cfg.getConfig(MineCommonConfig).doublePrice)return void showtipsFail(Lang.fb_str165);MineSys.ins().sendReward(1),closeWin(e)}},e}(BaseWinSingle);__reflect(MineResultWin.prototype,"MineResultWin"),window.MineResultWin=MineResultWin;var MineRevengeWin=function(t){function e(){var e=t.call(this)||this;return e.layer=LayerMgr.Popup,e.skinName="MineRevengeWinEUI",e.addBg(),e.rewardList.itemRenderer=ItemBaseReward,e.rewardList.dataProvider=e.rewardListArr=new eui.ArrayCollection,e}return __extends(e,t),e.prototype.open=function(e){t.prototype.open.call(this),this.data=e,this.addClickE(this.revengeBtn,this.onClick),this.setData()},e.prototype.setData=function(){this.icon.source=""+ResMgr.getHeadIcon(this.data.sex),this.robName.text=""+Lang.fb_str166+this.data.roleName,this.powerTxt.text=""+Lang.common_str29+this.data.power,this.timeTxt.text=""+Lang.fb_str167+this.data.getTime(),this.rewardListArr.source=MineSys.ins().getRobReward(this.data.minerQuality)},e.prototype.onClick=function(t){switch(t.currentTarget){case this.revengeBtn:MineSys.ins().sendRevenge(this.data.id),closeWin(e)}},e}(BaseWinSingle);__reflect(MineRevengeWin.prototype,"MineRevengeWin"),window.MineRevengeWin=MineRevengeWin;var MineRobWin=function(t){function e(){var e=t.call(this)||this;return e.skinName="MineRobWinEUI",e.addBg(),e.rewardList.itemRenderer=ItemBaseReward,e.rewardList.dataProvider=e.rewardListArr=new eui.ArrayCollection,e}return __extends(e,t),e.prototype.open=function(e){t.prototype.open.call(this),this.data=e,this.addClickE(this.robBtn,this.onClick),this.addLsn(MineSys.ins().patchMinePosChange,this.updatePanel),this.updatePanel()},e.prototype.updatePanel=function(){this.rewardListArr.source=MineSys.ins().getRobReward(this.data.minerQuality),this.minerName.text=Cfg.getConfig(MinerConfig,this.data.minerQuality).name+"（"+(this.data.isRob()?Lang.fb_str171:Lang.fb_str172)+"）",this.powerTxt.text=""+Lang.common_str29+this.data.power,this.roleName.text=""+Lang.fb_str168+this.data.roleName,this.guildName.text="",this.countTxt.text=""+Lang.fb_str170+MineSys.ins().getKeRobCount()+"/"+Cfg.getConfig(MineCommonConfig).rob},e.prototype.onClick=function(t){switch(t.currentTarget){case this.robBtn:if(MineSys.ins().robCount>=Cfg.getConfig(MineCommonConfig).rob)return void showtipsFail(Lang.fb_str173);MineSys.ins().sendRob(MineSys.ins().fbIndex,this.data.pos),closeWin(e)}},e}(BaseWinSingle);__reflect(MineRobWin.prototype,"MineRobWin"),window.MineRobWin=MineRobWin;var ActMonthLoopConfig=function(){function t(){}return t}();__reflect(ActMonthLoopConfig.prototype,"ActMonthLoopConfig");var MoLongFBPanel=function(t){function e(){var e=t.call(this)||this;return e.isGuaji=!0,e.skinName="MoLongFBPanelEUI",e.list.itemRenderer=ItemBaseReward,e.list.dataProvider=e.listData=new eui.ArrayCollection,e.listrole.itemRenderer=MoLongRoleItem,e.listrole.dataProvider=e.listroleArray=new eui.ArrayCollection,e.mcFingerCenter=MC.create(getEffName("csys_finger"),-1),e.mcFingerCenter.x=e.mcFingerCenter.y=45,e.btnGuaji.addChild(e.mcFingerCenter),e.mcFingerCenter.alpha=0,e}return __extends(e,t),e.prototype.open=function(){t.prototype.open.call(this),this.addClickE(this,this.onClick),this.addLsn(MapContainer.ins().patchGridClick,this.onMapGridClick),this.addLsn(LogicSys.ins().patchEntityClick,this.onEntityClick),this.addLsn(FbSys.ins().patchMoneyChange,this.onGuwuMoneyChange),this.addLsn(FbSys.ins().patchMoLongZuDuiTime,this.updateGuWuBtn),this.addLsn(FbSys.ins().patchMoLongStarTime,this.updateGuWuBtn),this.addLsn(FbSys.ins().patchMoLongGuWu,this.guwu),this.addLsn(FbSys.ins().patchMoLongGotoFubenData,this.updateGuWuBtn),this.addLsn(LogicSys.ins().patchCreateCommEntity,this.updateGuaJi),this.shenghunCommonConfig=Cfg.getConfig(MolongCommonConfig),this.updateAll(),this.guwu(),this.updateGuWuBtn()
},e.prototype.updateGuaJi=function(){this.setGuaJi(!0)},e.prototype.updateCombatDate=function(){var t=FbSys.ins().molongData,e="";e=2==t.getState()?"副本剩余时间:"+getFormatTime(t.leftCdTime,"mm:ss"):"副本剩余时间: --:--",this.lbTime.textFlow=addColorTF(e),this.lbUseTime.textFlow=addColorTF("已消耗:"+addColor(t.useCdTime+"s",5767068));var i=Cfg.getConfig(MolongFubenConfig,CondType.Equal,MolongFubenConfig.fbId,FbSys.ins().fbId);if(i){var n=FbModelMoLong.getMoLongCommonByIdCount(i.fbId,t.useCdTime),a=i.grade.length-1,o=n>=a?a:n,s=i.grade[o],r=GConst.fbrate[o],u=addColor(s+"s",5767068),h=addColor(""+r+Lang.common_ji,5767068);this.lbScore.textFlow=addColorTF(u+"内通关可获:"+h),this.listData.source&&this.listData.source.length||(t.isZhuZhan()?this.listData.source=i.fubenhelprewards:this.listData.source=i.fubenrewards)}this.updateCenterBtnEff()},e.prototype.onMapGridClick=function(){this.setGuaJi(!1)},e.prototype.onEntityClick=function(){this.setGuaJi(!1)},e.prototype.updateGuaJiBtn=function(){this.btnGuaji.visible=!this.isGuaji,this.btnStopGuaji.visible=this.isGuaji},e.prototype.updateGuWuBtn=function(){var t=0!=FbSys.ins().molongData.getState();this.btnCoinGuWu.visible=t,this.btnGuild.visible=!t,this.btnWord.visible=!t,this.fubenStar()},e.prototype.updateTime=function(){this.updateAll()},e.prototype.updateAll=function(){this.updateMyself(),this.updateCombatDate()},e.prototype.updateMyself=function(){this.listroleArray.source=FbSys.ins().molongData.subRoleDatas.concat()},e.prototype.onClick=function(t){switch(t.target){case this.btnGuaji:this.setGuaJi(!0);break;case this.btnStopGuaji:this.setGuaJi(!1);break;case this.btnCoinGuWu:if(0!=FbSys.ins().molongData.getState()){var e=FbSys.ins().guWuData.getMoLongWuGuDatas();e&&openWin(GuWuWin,e)}else showtipsSuc("召集队友中，无法鼓舞");break;case this.btnGuild:GuildSys.ins().isAddGuild()?FbSys.ins().molongData.canYaoqingGuild()?(FbSys.ins().sendMoLongYaoQing(2),showtipsSuc("发送成功 ")):showTipsWarn(FbSys.ins().molongData.getYaoqingCDGuild()+"秒后才能再次发起邀请"):showTipsWarn(Lang.guild_str7);break;case this.btnWord:FbSys.ins().molongData.canYaoqing()?(FbSys.ins().sendMoLongYaoQing(1),showtipsSuc("发送成功")):showTipsWarn(FbSys.ins().molongData.getYaoqingCD()+"秒后才能再次发起邀请")}},e.prototype.setGuaJi=function(t){this.isGuaji=t,LogicSys.ins().centerEntity.AI.setGuaji(t),this.updateGuaJiBtn()},e.prototype.guwu=function(){this.groupJiaCheng.visible=FbSys.ins().molongData.guwuAttrData.atk>0||FbSys.ins().molongData.guwuAttrData.hp>0,this.lbjiacheng.text=Lang.fb_str23+.01*FbSys.ins().molongData.guwuAttrData.atk+"%",this.guwuRedPoint()},e.prototype.onGuwuMoneyChange=function(t,e){var i,n;n=1==t?this.lbMoney1:this.lbMoney2,egret.Tween.removeTweens(n),i=egret.Tween.get(n),n.visible=!0,n.alpha=1,n.textFlow=addColorTF(Lang.common_str49+" "+e.count+" "+Cfg.getItemCfg(e.id).name,GConst.PZColor[0]),i.wait(1e3).to({alpha:0},500).call(function(){n.visible=!1})},e.prototype.fubenStar=function(){0!=FbSys.ins().molongData.getState()&&this.guwuRedPoint()},e.prototype.updateCenterBtnEff=function(){this.mcFingerCenter.alpha=2==FbSys.ins().molongData.getState()?1:0},e.prototype.guwuRedPoint=function(){var t=this.canGuWu(1)||this.canGuWu(2);this.btnCoinGuWu.redPoint.visible=t,t?Timer.ins()["do"](1e3,3e3,0,this.doudong,this,TimerType.FIRST):Timer.ins().remove(this.doudong,this)},e.prototype.doudong=function(){DisUtil.shakeIt(this.btnCoinGuWu,20,100)},e.prototype.canGuWu=function(t){var e=!1,i=Cfg.getConfig(MolongFubenConfig,CondType.Equal,MolongFubenConfig.fbId,FbSys.ins().fbId),n=Cfg.getConfig(MolongInspireConfig,t);return FbSys.ins().molongData.guwuAttrData.atk>=n.attMax?e=!1:1==t?GFunc.isConsumeEnough(i.goldSp[0])&&(e=!0):GFunc.isConsumeEnough(i.diamondSp[0])&&(e=!0),e},e}(BasePanel);__reflect(MoLongFBPanel.prototype,"MoLongFBPanel"),window.MoLongFBPanel=MoLongFBPanel;var AdventureCommonConfig=function(){function t(){}return t}();__reflect(AdventureCommonConfig.prototype,"AdventureCommonConfig");var MoLongResultWin=function(t){function e(){return t.call(this)||this}return __extends(e,t),e.prototype.initUI=function(){t.prototype.initUI.call(this),this.layer=LayerMgr.Popup,this.skinName="MoLongResultEUI",this.addBg(),this.list.itemRenderer=ItemBaseReward,this.list.dataProvider=this.listArray=new eui.ArrayCollection,this.bg.visible=!1;var e=MC.create(ResMgr.getEffName("win"),-1);this.titleGroup.addChild(e)},e.prototype.open=function(e){t.prototype.open.call(this),this.resultData=e,this.addClickE(this.closeBtn,this.onTap),this.addClickE(this.closeBtn0,this.onTap),this.iniData()},e.prototype.iniData=function(){Timer.ins()["do"](0,1e3,5,this.updateLabel,this);var t=this.resultData.rewardItem.concat();SortUtil.sortOn(t,["quality"],[SortType.down]),this.listArray.source=t,this.lbTime.textFlow=addColorTF(""+getFormatTime(this.resultData.timer,"mm分ss秒"));FbModelMoLong.getMoLongCommonByIdCount(this.resultData.fbId,this.resultData.timer)},e.prototype.close=function(){t.prototype.close.call(this),Timer.ins().removeAll(this),FbSys.ins().sendExitFb()},e.prototype.updateLabel=function(t){0>=t&&this.onCloseBtn(),this.closeBtn.label=Lang.common_str47.replace("$second$",t.toString())},e.prototype.onTap=function(t){switch(t.currentTarget){case this.closeBtn:this.onCloseBtn();break;case this.closeBtn0:closeWin(this)}},e.prototype.onCloseBtn=function(){closeWin(this)},e}(BaseWinSingle);__reflect(MoLongResultWin.prototype,"MoLongResultWin"),window.MoLongResultWin=MoLongResultWin;var MoLongRoleFaceItem=function(t){function e(){var e=t.call(this)||this;return e.skinName="RedFortFbFaceItemskin",e}return __extends(e,t),e.prototype.dataChanged=function(){var t=this.data;this.roleItem.setState(MainRoleItem.STATE_0),this.roleItem.setSex(t),this.roleItem.setIsDead(!1),this.roleItem.updateHP(100,100)},e}(BaseItemRender);__reflect(MoLongRoleFaceItem.prototype,"MoLongRoleFaceItem"),window.MoLongRoleFaceItem=MoLongRoleFaceItem;var MoLongRoleItem=function(t){function e(){var e=t.call(this)||this;return e.MAX_WIDTH=182,e.skinName="MoLongRoleEUI",e.mc1=new MC,e.mc1.y=12,e.groupMC1.addChild(e.mc1),e.mc3=new MC,e.mc3.scaleY=2,e.mc3.x=91,e.groupMC.addChild(e.mc3),e.groupMC.visible=!1,e.maskMC1=new MaskRect,e.maskMC1.setParam(182,40,MoveDir.R_To_L),e.groupMC.addChild(e.maskMC1),e.mc3.mask=e.maskMC1,e}return __extends(e,t),e.prototype.dataChanged=function(){var t=this.data;this.lbHurt.text=t.hurt>0?GFunc.overLength(t.hurt):"",this.lbPlayName.text=t.playName,this.lbPlayName.textColor=t.isMy?5949490:15129784,this.roleFace.data=t.sex,t.hurt>0?this.lbPercentHurt.text=(t.hurt/t.sumHurt*100).toFixed(0)+"%":this.lbPercentHurt.text="";var e="jdt"+t.index,i="gd"+t.index;~this.mc3.name.indexOf(e)||(this.mc3.playFile(getEffName(e),-1),this.mc1.playFile(getEffName(i),-1));var n=0;t.hurt>0&&(n=t.hurt/t.sumHurt,n>1&&(n=1),this.groupMC.visible=!0),this.maskMC1.setPercent(n);var a=0;1==t.index?a=7:2==t.index?a=4:3==t.index&&(a=8),this.mc1.x=(1-n)*this.MAX_WIDTH-a},e}(BaseItemRender);__reflect(MoLongRoleItem.prototype,"MoLongRoleItem"),window.MoLongRoleItem=MoLongRoleItem;var MoLongZuDuiWin=function(t){function e(){return t.call(this)||this}return __extends(e,t),e.prototype.initUI=function(){t.prototype.initUI.call(this),this.skinName="CommonTipsWinEUI1",this.addBg()},e.prototype.open=function(t){this.addClickE(this.btnOk,this.onClick),this.popupBaseData=t,this.lbContent.textFlow=StrUtil.toTF(t.desc),Timer.ins()["do"](0,1e3,t.timer,this.updateLabel,this)},e.prototype.updateLabel=function(t){0>=t&&this.onCloseBtn(),this.btnOk.label="邀请("+t+")"},e.prototype.onClick=function(t){switch(t.currentTarget){case this.btnOk:this.popupBaseData.sureFun(),closeWin(this)}},e.prototype.onCloseBtn=function(){this.popupBaseData.sureFun(),closeWin(this)},e}(BaseWinSingle);__reflect(MoLongZuDuiWin.prototype,"MoLongZuDuiWin"),window.MoLongZuDuiWin=MoLongZuDuiWin;var MoLongZuZuiTimeWin=function(t){function e(){var e=t.call(this)||this;return e.time=0,e.desc="",e}return __extends(e,t),e.prototype.initUI=function(){t.prototype.initUI.call(this),this.winType=WinType.NeverCloseWin,this.layer=LayerMgr.Main_Down,this.skinName="MoLongZuZuiTimeWinEUI"},e.prototype.open=function(e,i){void 0===e&&(e=""),void 0===i&&(i=0),t.prototype.open.call(this),this.time=i,this.desc=e,Timer.ins()["do"](0,1e3,0,this.updateDesc,this)},e.prototype.getTime=function(){return Math.max(0,Math.ceil((this.time-Timer.ins().getTimer())/1e3))},e.prototype.updateDesc=function(){this.getTime()<=0&&this.onCloseBtn(),this.lbTime.text=this.desc.replace("$s$",getFormatTime(this.getTime(),"mm:ss"))},e.prototype.onCloseBtn=function(){closeWin(this)},e}(BaseWinSingle);__reflect(MoLongZuZuiTimeWin.prototype,"MoLongZuZuiTimeWin"),window.MoLongZuZuiTimeWin=MoLongZuZuiTimeWin;var RedFortDetailData=function(){function t(){this.roleName="",this.rank=0,this.floor=0,this.score=0}return t.prototype.parser=function(t){this.rank=t.readInt(),this.roleName=t.readString(),this.score=t.readInt(),this.floor=t.readByte()},t}();__reflect(RedFortDetailData.prototype,"RedFortDetailData");var RedFortLastRankData=function(){function t(){this.rank=1,this.name="",this.num=0}return t.prototype.parser=function(t){this.rank=t.readShort(),this.name=t.readString(),this.num=t.readInt()},t}();__reflect(RedFortLastRankData.prototype,"RedFortLastRankData");var RedFortResultData=function(){function t(){}return t.prototype.parser=function(t){this.myRank=new RedFortDetailData,this.myRank.rank=t.readInt(),this.myRank.score=t.readInt(),this.myRank.floor=t.readByte(),this.myRank.roleName=Actor.ins().myName,this.rewards=[];for(var e=t.readShort(),i=0;e>i;i++){var n=new ItemDataReward;n.parser3(t),this.rewards.push(n)}this.rankDatas=[],e=t.readShort();for(var i=0;e>i;i++){var a=new RedFortDetailData;a.parser(t),this.rankDatas.push(a)}},t}();__reflect(RedFortResultData.prototype,"RedFortResultData");var RedFortFbFaceItem=function(t){function e(){var e=t.call(this)||this;return e.skinName="RedFortFbFaceItemskin",e}return __extends(e,t),e.prototype.dataChanged=function(){var t=this.data;if(t){this.roleItem.data=t,this.roleItem.setState(MainRoleItem.STATE_0);var e=LogicSys.ins().getEntityByHandle(t);if(e){if(EntityType.isBianshen(e.entityType))this.roleItem.setBianshen(e.getBianshenId()),this.roleItem.setIsDead(e.isDead());else if(e instanceof EntityRole){var i=e.data;this.roleItem.setJob(i.job),this.roleItem.setSex(i.sex),this.roleItem.setIsDead(e.isDead())}this.roleItem.updateHP(e.getHP(),e.getHpMax())}}},e}(BaseItemRender);__reflect(RedFortFbFaceItem.prototype,"RedFortFbFaceItem"),window.RedFortFbFaceItem=RedFortFbFaceItem;var RedFortFbPanel=function(t){function e(){var e=t.call(this)||this;e.isGuaji=!0,e.skinName="RedFortFbPanelEUI",e.listMySelf.itemRenderer=RedFortFbFaceItem,e.listMySelf.dataProvider=e.arrCollectMyself=new eui.ArrayCollection,e.listTarget.itemRenderer=RedFortFbFaceItem,e.listTarget.dataProvider=e.arrCollectTarget=new eui.ArrayCollection,e.listEnemy.itemRenderer=BossHomeFbPanelFace2,e.listEnemy.dataProvider=e.arrCollectEnemy=new eui.ArrayCollection,e.listAtk.itemRenderer=BossHomeFbPanelFace2,e.listAtk.dataProvider=e.arrayCollectAtk=new eui.ArrayCollection;var i=new MC;i.playFile(getEffName("csys_light"),-1),i.x=i.y=45,e.groupNextFloor.addChild(i);var n=new MC;n.playFile(getEffName("csys_finger"),-1),n.x=n.y=45,e.groupNextFloor.addChild(n);var a=new MC;a.playFile(getEffName("csys_light"),-1),e.btnRewardEff.addChild(a);var o=new MC;return o.playFile(getEffName("csys_finger"),-1),e.btnRewardEff.addChild(o),e.mcFingerCenter=new MC,e.mcFingerCenter.playFile(getEffName("csys_finger"),-1),e.mcFingerCenter.x=e.mcFingerCenter.y=45,e.btnCenter.addChild(e.mcFingerCenter),e.mcFingerCenter.alpha=0,e.labelJifenAdd.visible=!1,e}return __extends(e,t),e.prototype.open=function(){t.prototype.open.call(this),this.addClickE(this,this.onClick),this.addItemTapE(this.listEnemy,this.onEnemyListClick),this.addItemTapE(this.listAtk,this.onEnemyListClick),this.addLsn(FbSys.ins().patchRedFortKill,this.updateKill),this.addLsn(FbSys.ins().patchRedFortScore,this.updateScore),this.addLsn(FbSys.ins().patchRedFortScoreAdd,this.onScoreChange),this.addLsn(LogicSys.ins().patchMainRoleTargetChange,this.onMainRoleTargetChange),this.addLsn(LogicSys.ins().patchMainRoleTargetMasterChange,this.onMainRoleTargetChange),this.addLsn(MapContainer.ins().patchGridClick,this.onMapGridClick),this.addLsn(LogicSys.ins().patchEntityClick,this.onEntityClick),this.addLsn(FbSys.ins().patchRedFortDabiaoReward,this.udateDabiaoReward),this.addLsn(LogicSys.ins().patchCreateCommEntity,this.updateGuaJi);var e=FbSys.ins().redFort.letfTime;e&&Timer.ins()["do"](0,1e3,Math.ceil(e/1e3),this.formatCountDown,this),Timer.ins()["do"](0,1500,0,this.updateAll,this),this.updateKill(),this.updateScore(),this.onMainRoleTargetChange(),this.udateDabiaoReward(),this.updateGuaJi()},e.prototype.updateGuaJi=function(){this.setGuaJi(!0)},e.prototype.onMapGridClick=function(){this.setGuaJi(!1)},e.prototype.onEntityClick=function(){this.setGuaJi(!1)},e.prototype.onEnemyListClick=function(t){var e=t.currentTarget.selectedItem;e&&LogicSys.ins().atkTargetByMasterHandle(e)},e.prototype.updateGuaJiBtn=function(){this.btnGuaji.visible=!this.isGuaji,this.btnStopGuaji.visible=this.isGuaji},e.prototype.udateDabiaoReward=function(){var t=FbSys.ins().redFort.isScoreDabiao(),e=t&&FbSys.ins().redFort.isDabiaoReward();this.btnRewardEff.visible=FbSys.ins().redFort.isScoreDabiao()&&!FbSys.ins().redFort.isDabiaoReward(),this.btnCenter.visible=!e||FbSys.ins().redFort.isFloorMax(),this.groupNextFloor.visible=!this.btnCenter.visible,this.btnDetail.visible=1==FbSys.ins().redFort.fbType},e.prototype.updateKill=function(){var t=FbSys.ins().redFort.config;this.labelFloor.text=Lang.fb_str183.replace("$floor$",""+t.floor),this.labelJifenMax.text=""+Lang.fb_str184+(t.maxscore?t.maxscore:Lang.fb_str185),this.labelKill.text=""+Lang.fb_str186+FbSys.ins().redFort.killCount,this.onUpdateBuff()},e.prototype.updateScore=function(){this.labelJifen.text=""+Lang.fb_str187+FbSys.ins().redFort.score,this.udateDabiaoReward()},e.prototype.onScoreChange=function(t,e){var i="";switch(t){case 0:i="";break;case 1:i=Lang.fb_str188;break;case 2:i=Lang.fb_str189;break;case 3:i=Lang.fb_str190;break;case 4:i=Lang.fb_str191}this.labelJifenAdd.visible=!0,egret.Tween.removeTweens(this.labelJifenAdd),this.labelJifenAdd.text=i+" "+Lang.fb_str192+e,this.labelJifenAdd.alpha=1;var n=egret.Tween.get(this.labelJifenAdd);n.wait(1500).to({alpha:0},1e3)},e.prototype.onUpdateBuff=function(){var t=FbSys.ins().redFort.hasDieBuff();if(this.groupBuff.visible=t,t){this.labelBuffLv.text=""+FbSys.ins().redFort.dieBuffLv+Lang.common_ji;var e=AttrData.getFm(GConst.SXColor[2],GConst.SXColor[2]," +"),i=FbSys.ins().redFort.dieConfig.attrs;i[0]?(this.labelBuff1.visible=!0,this.labelBuff1.textFlow=addColorTF(AttrData.parse([i[0]],{fm:e}).join("\n"))):this.labelBuff1.visible=!1,i[1]?(this.labelBuff2.visible=!0,this.labelBuff2.textFlow=addColorTF(AttrData.parse([i[1]],{fm:e}).join("\n"))):this.labelBuff2.visible=!1}},e.prototype.onMainRoleTargetChange=function(t){void 0===t&&(t=-1);var e;e=-1==t?LogicSys.ins().centerEntity.AI.getNextTarget():LogicSys.ins().getEntityByHandle(t),e&&EntityType.isMainRole(e.entityType)?(this.groupNoTarget.visible=!1,this.listTarget.visible=!0):(this.groupNoTarget.visible=!0,this.listTarget.visible=!1),this.updateTarget()},e.prototype.updateAll=function(){this.updateMyself(),this.updateTarget(),this.updateEnemys(),this.updateAtk(),this.updateCenterBtnEff()},e.prototype.updateMyself=function(){this.arrCollectMyself.source=[LogicSys.ins().centerEntity.handle],this.arrCollectMyself.refresh()},e.prototype.updateTarget=function(){var t=LogicSys.ins().centerEntity.AI.getNextTarget();t?(this.arrCollectTarget.source=[t.handle],this.labelTargetName.text=t.getName(),this.listTarget.visible=EntityType.isMainRole(t.entityType),this.groupNoTarget.visible=!this.listTarget.visible):(this.arrCollectTarget.source=[],this.groupNoTarget.visible=!0,this.listTarget.visible=!1,this.labelTargetName.text=Lang.fb_str193)},e.prototype.updateEnemys=function(){var t=LogicSys.ins().getEntityMasterHandleList();this.arrCollectEnemy.source=t,this.arrCollectEnemy.refresh(),this.scrollerEnemy.height=148*Math.min(3,t.length)},e.prototype.updateAtk=function(){for(var t=LogicSys.ins().centerEntity.AI.getChouhenList(),e=[],i=0,n=t;i<n.length;i++){var a=n[i];e.push(a.masterHandle)}this.arrayCollectAtk.source=e,this.arrayCollectAtk.refresh(),this.scrollerAtk.width=142*Math.min(3,t.length)},e.prototype.updateCenterBtnEff=function(){if(1==FbSys.ins().redFort.fbType){var t=Cfg.getConfig(FortCommonConfig),e=!(LogicSys.ins().centerEntity.mapX>t.topLeft.x&&LogicSys.ins().centerEntity.mapX<t.bottomRight.x&&LogicSys.ins().centerEntity.mapY>t.topLeft.y&&LogicSys.ins().centerEntity.mapY<t.bottomRight.y);this.mcFingerCenter.alpha=e?1:0}},e.prototype.onClick=function(t){switch(t.target){case this.btnDetail:openWin(RedFortDetailWin);break;case this.btnToggleEnemy:this.groupEnemy.visible=!this.groupEnemy.visible;break;case this.btnToggleAtk:this.groupAtk.visible=!this.groupAtk.visible;break;case this.btnReward:openWin(RedFortDabiaoRewardWin);break;case this.btnGuaji:this.setGuaJi(!0);break;case this.btnStopGuaji:this.setGuaJi(!1);break;case this.btnCenter:var e=Cfg.getConfig(FortCommonConfig),i=new XY;i.x=(e.bottomRight.x+e.topLeft.x)/2*MapBase.CELL_SIZE,i.y=(e.bottomRight.y+e.topLeft.y)/2*MapBase.CELL_SIZE,this.setGuaJi(!1),LogicSys.ins().onMapGridClick(i);break;case this.btnNextFloor:FbSys.ins().redFort.isScoreDabiao()?(this.udateDabiaoReward(),FbSys.ins().sendRedFortNextFloor()):showtipsFail(Lang.fb_str194);break;case this.btnClose:var n=new PopupData(Lang.fb_str26);n.setFunction(this,function(){FbSys.ins().sendExitFb()}),openWin(CommonTipsWin,n)}},e.prototype.setGuaJi=function(t){this.isGuaji=t,LogicSys.ins().setCenterEntityGuaji(t),this.updateGuaJiBtn()},e.prototype.formatCountDown=function(t){0>=t&&0==FbSys.ins().redFort.fbType&&FbSys.ins().sendExitFb();var e=StrUtil.addColor(""+Lang.common_str11+t.toFixed(0)+Lang.common_miao,16115290);this.labelTime.textFlow=addColorTF(e)},e}(BasePanel);__reflect(RedFortFbPanel.prototype,"RedFortFbPanel"),window.RedFortFbPanel=RedFortFbPanel;var RedFortDabiaoRewardItem=function(t){function e(){var e=t.call(this)||this;return e.skinName="RedFortDabiaoRewardItemEUI",e.list.itemRenderer=ItemBaseReward,e.list.dataProvider=e.listData=new eui.ArrayCollection,e.addClickE(e.btnReward,e.onClick),e}return __extends(e,t),e.prototype.onClick=function(t){var e=this.data;FbSys.ins().sendRedFortDabiaoReward(e.floor)},e.prototype.dataChanged=function(){if(this.data||this.data.rewards){var t=this.data;this.floorTxt.text=Lang.fb_str195.replace("$floor$",""+t.floor),this.decTxt.text=Lang.fb_str196.replace("$jifen$",""+t.dabiaoscore).replace("$score$",""+FbSys.ins().redFort.score).replace("$maxScore$",""+t.dabiaoscore),this.listData.source=t.rewards;var e=FbSys.ins().redFort.dabiaoFloor>=t.floor;e?(this.imgYlq.visible=!0,this.btnReward.visible=!1):(this.imgYlq.visible=!1,this.btnReward.visible=!0,e=FbSys.ins().redFort.score>=t.dabiaoscore,this.btnReward.enabled=e,this.btnReward.redPoint.visible=e)}},e}(BaseItemRender);__reflect(RedFortDabiaoRewardItem.prototype,"RedFortDabiaoRewardItem"),window.RedFortDabiaoRewardItem=RedFortDabiaoRewardItem;var RedFortDetailItem=function(t){function e(){var e=t.call(this)||this;return e.skinName="RedFortDetailItemEUI",e}return __extends(e,t),e.prototype.dataChanged=function(){if(this.data.playerName){var t=this.data;this.nameTxt.text=""+t.playerName,this.cengTxt.text=""+t.floor,this.countTxt.text=""+t.score}},e}(BaseItemRender);__reflect(RedFortDetailItem.prototype,"RedFortDetailItem"),window.RedFortDetailItem=RedFortDetailItem;var RedFortResultItem=function(t){function e(){var e=t.call(this)||this;return e.skinName="RedFortResultItemEUI",e}return __extends(e,t),e.prototype.dataChanged=function(){if(this.data.roleName){var t=this.data;this.rankTxt.text=t.rank<1?Lang.common_wu:""+t.rank,this.nameTxt.text=""+t.roleName,this.countTxt.text=""+t.score}},e}(BaseItemRender);__reflect(RedFortResultItem.prototype,"RedFortResultItem"),window.RedFortResultItem=RedFortResultItem;var RedFortLastRankItem=function(t){function e(){var e=t.call(this)||this;return e.skinName="RedFortLastRankItemEUI",e}return __extends(e,t),e.prototype.dataChanged=function(){if(this.data||this.data.rewards){var t=this.data;this.rankImg.source="",this.rankTxt.text="",t.rank<4?this.rankImg.source="jjc_zycs_no"+t.rank:this.rankTxt.text=Lang.redFort_str4.replace("$count$",""+t.rank),this.labName.text=""+t.name,this.labNum.text=""+t.num}},e}(BaseItemRender);__reflect(RedFortLastRankItem.prototype,"RedFortLastRankItem"),window.RedFortLastRankItem=RedFortLastRankItem;var AdventureEventConfig=function(){function t(){}return t}();__reflect(AdventureEventConfig.prototype,"AdventureEventConfig");var AdventureExchangeConfig=function(){function t(){}return t}();__reflect(AdventureExchangeConfig.prototype,"AdventureExchangeConfig");var AdventureTaskConfig=function(){function t(){}return t}();__reflect(AdventureTaskConfig.prototype,"AdventureTaskConfig");var RedFortRankFloorPanelItem=function(t){function e(){var e=t.call(this)||this;return e.skinName="RedFortRankFloorPanelItemEUI",e.list.itemRenderer=ItemBaseReward,e.list.dataProvider=e.arrData=new eui.ArrayCollection,e}return __extends(e,t),e.prototype.dataChanged=function(){if(this.data||this.data.rewards){var t=this.data;this.rankImg.source="",this.rankTxt.text=""+t.floor,this.arrData.source=t.rewards}},e}(BaseItemRender);__reflect(RedFortRankFloorPanelItem.prototype,"RedFortRankFloorPanelItem"),window.RedFortRankFloorPanelItem=RedFortRankFloorPanelItem;var AgreementConfig=function(){function t(){}return t}();__reflect(AgreementConfig.prototype,"AgreementConfig");var RedFortRankJifenPanelItem=function(t){function e(){var e=t.call(this)||this;return e.skinName="RedFortRankJifenPanelItemEUI",e.list.itemRenderer=ItemBaseReward,e.list.dataProvider=e.arrData=new eui.ArrayCollection,e}return __extends(e,t),e.prototype.dataChanged=function(){if(this.data||this.data.rewards){var t=this.data;if(this.rankImg.source="",this.rankTxt.text="",t.idx[1]<4)this.rankImg.source="jjc_zycs_no"+t.idx[1];else{var e=t.idx[0]==t.idx[1]?""+t.idx[0]:t.idx[0]+"-"+t.idx[1];this.rankTxt.text=e}this.arrData.source=t.rewards}},e}(BaseItemRender);__reflect(RedFortRankJifenPanelItem.prototype,"RedFortRankJifenPanelItem"),window.RedFortRankJifenPanelItem=RedFortRankJifenPanelItem;var RedFortContinueKillWin=function(t){function e(){var e=t.call(this)||this;return e.layer=LayerMgr.Top,e.skinName="RedFortContinueKillWinEUI",e}return __extends(e,t),e.prototype.open=function(e){void 0===e&&(e=1),t.prototype.open.call(this),this.alpha=0,this.setPanel(e)},e.prototype.setPanel=function(t){this.countBmp.text=""+(t>>0),this.x=-100,egret.Tween.removeTweens(this);var i=egret.Tween.get(this);i.to({x:0,alpha:1},260).wait(1400).to({alpha:0},500).call(function(){closeWin(e)},this)},e}(BaseWinSingle);__reflect(RedFortContinueKillWin.prototype,"RedFortContinueKillWin"),window.RedFortContinueKillWin=RedFortContinueKillWin;var RedFortDabiaoRewardWin=function(t){function e(){var e=t.call(this)||this;return e.layer=LayerMgr.Popup,e.skinName="RedFortDabiaoRewardWinEUI",e.addBg(),e.list.itemRenderer=RedFortDabiaoRewardItem,e.list.dataProvider=e.listData=new eui.ArrayCollection,e}return __extends(e,t),e.prototype.open=function(){t.prototype.open.call(this),this.addLsn(FbSys.ins().patchRedFortDabiaoReward,this.updatePanel),this.addLsn(LogicSys.ins().patchEnterMap,this.closePanel),this.updatePanel()},e.prototype.updatePanel=function(){this.listData.source=Cfg.getConfigs(FortConfig),FbSys.ins().redFort.dabiaoFloor>=4&&(this.list.validateNow(),this.scroller.viewport.scrollV=this.scroller.viewport.contentHeight-this.scroller.height)},e.prototype.closePanel=function(){closeWin(e)},e}(BaseWinSingle);__reflect(RedFortDabiaoRewardWin.prototype,"RedFortDabiaoRewardWin"),window.RedFortDabiaoRewardWin=RedFortDabiaoRewardWin;var RedFortDetailWin=function(t){function e(){var e=t.call(this)||this;return e.layer=LayerMgr.Popup,e.skinName="RedFortDetailWinEUI",e.addBg(),e.list.itemRenderer=RedFortDetailItem,e.list.dataProvider=e.arrDatas=new eui.ArrayCollection,e}return __extends(e,t),e.prototype.open=function(){t.prototype.open.call(this),this.addLsn(RankSys.ins().patchRankData,this.updatePanel),RankSys.ins().sendGetRankData(RankType.Fort),this.updatePanel()},e.prototype.updatePanel=function(){var t=RankSys.ins().getRankData(RankType.Fort).getFullDatalist();t=t.slice(0,10),this.arrDatas.replaceAll(t),this.myCengTxt.text=""+Lang.fb_str198+FbSys.ins().redFort.curFloor,this.myCountTxt.text=""+Lang.fb_str199+FbSys.ins().redFort.score},e}(BaseWinSingle);__reflect(RedFortDetailWin.prototype,"RedFortDetailWin"),window.RedFortDetailWin=RedFortDetailWin;var RedFortDieWin=function(t){function e(){var e=t.call(this)||this;return e.time=0,e.layer=LayerMgr.Popup,e.skinName="RedFortDieWinSkin",e.setSkinPart("ybPrice",new PriceIcon),e.ybPrice.setType(CurType.yb),e}return __extends(e,t),e.prototype.open=function(e){t.prototype.open.call(this),this.time=e?e-Timer.ins().getEgretTimer():0,this.addClickE(this.fuhuoBtn0,this.onClick),this.addClickE(this.fuhuoBtn1,this.onClick),this.setDataPanel()},e.prototype.setDataPanel=function(){this.ybPrice.setPrice(99),this.time&&Timer.ins()["do"](0,1e3,Math.ceil(this.time/1e3),this.formatCountDown,this)},e.prototype.formatCountDown=function(t){this.timeTxt.textFlow=addColorTF(Lang.fb_str200.replace("$second$",""+t))},e.prototype.onClick=function(t){switch(t.target){case this.fuhuoBtn0:break;case this.fuhuoBtn1:}},e}(BaseWinSingle);__reflect(RedFortDieWin.prototype,"RedFortDieWin"),window.RedFortDieWin=RedFortDieWin;var RedFortHelpWin=function(t){function e(){var e=t.call(this)||this;return e.layer=LayerMgr.Popup,e.skinName="RedFortHelpWinSkin",e.group.touchEnabled=!1,e.group.touchChildren=!1,e}return __extends(e,t),e}(BaseWinSingle);__reflect(RedFortHelpWin.prototype,"RedFortHelpWin"),window.RedFortHelpWin=RedFortHelpWin;var RedFortRankWin=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.winType=WinType.OverlayWin,e}return __extends(e,t),e.prototype.initUI=function(){t.prototype.initUI.call(this),this.addBg()},e.panelNames=[RedFortRankJifenPanel,RedFortRankFloorPanel,RedFortLastRankPanel],e}(BaseWinAutoTab);__reflect(RedFortRankWin.prototype,"RedFortRankWin"),window.RedFortRankWin=RedFortRankWin;var RedFortResultWin=function(t){function e(){var e=t.call(this)||this;return e.layer=LayerMgr.Popup,e.skinName="RedFortResultWinEUI",e.listRank.itemRenderer=RedFortResultItem,e.listItem.itemRenderer=ItemBaseReward,e.timeTxt.text="",e}return __extends(e,t),e.prototype.open=function(e){t.prototype.open.call(this),this.s=10,this.data=e,this.addClickE(this.awardBtn,this.onClick),this.setDataPanel()},e.prototype.close=function(){t.prototype.close.call(this)},e.prototype.setDataPanel=function(){this.listRank.dataProvider=new eui.ArrayCollection(this.data.rankDatas),this.myRank.text=""+Lang.fb_str117+this.data.myRank.rank,this.myScore.text=""+Lang.fb_str201+this.data.myRank.score,this.myFloor.text=""+Lang.fb_str202+this.data.myRank.floor,this.listItem.dataProvider=new eui.ArrayCollection(this.data.rewards)},e.prototype.onClick=function(t){switch(t.target){case this.awardBtn:this.onCloseBtn()}},e.prototype.updateLabel=function(){this.s--,this.s<=0&&this.onCloseBtn(),this.timeTxt.text=Lang.fb_str203.replace("$second$",""+this.s)},e.prototype.onCloseBtn=function(){closeWin(e)},e}(BaseWinSingle);__reflect(RedFortResultWin.prototype,"RedFortResultWin"),window.RedFortResultWin=RedFortResultWin;var AgreementTypeConfig=function(){function t(){}return t}();__reflect(AgreementTypeConfig.prototype,"AgreementTypeConfig");var WanMoKuaiSuResultItem=function(t){function e(){var e=t.call(this)||this;return e.skinName="WanMoKuaiSuResultItemEUI",e.listData=new eui.ArrayCollection,e.list.itemRenderer=ItemBaseReward,e.list.dataProvider=e.listData,e}return __extends(e,t),e.prototype.dataChanged=function(){var t=this.data;this.lbCend.textFlow=addColorTF("已挑战至"+t.ceng+"层"),this.listData.source=t.reward,1==t.type?this.currentState="ceng":2==t.type?this.currentState="dian":3==t.type&&(this.currentState="sum"),this.validateNow()},e}(BaseItemRender);__reflect(WanMoKuaiSuResultItem.prototype,"WanMoKuaiSuResultItem"),window.WanMoKuaiSuResultItem=WanMoKuaiSuResultItem;var WanMoKuaiSuResultWin=function(t){function e(){return t.call(this)||this}return __extends(e,t),e.prototype.initUI=function(){t.prototype.initUI.call(this),this.layer=LayerMgr.Popup,this.skinName="WanMoKuaiSuResultWinEUI",this.addBg(),this.listData=new eui.ArrayCollection,this.list.itemRenderer=WanMoKuaiSuResultItem,this.list.dataProvider=this.listData},e.prototype.open=function(e){var i=this;t.prototype.open.call(this),this.addClickE(this.btnOk,this.onClick);var n=[],a=0;Timer.ins()["do"](0,200,e.length-1,function(){n.push(e[a]),a++,i.listData.replaceAll(n),i.list.validateNow();var t=i.scroller.viewport.contentHeight-i.scroller.height;0>t&&(t=0),e.length-1==a&&i.scroller.viewport.contentHeight>i.scroller.height&&(t+=10),i.scroller.viewport.scrollV=t},this,TimerType.NONE)},e.prototype.onClick=function(t){switch(t.currentTarget){case this.btnOk:closeWin(this)}},e}(BaseWinSingle);__reflect(WanMoKuaiSuResultWin.prototype,"WanMoKuaiSuResultWin"),window.WanMoKuaiSuResultWin=WanMoKuaiSuResultWin;var AiConfig=function(){function t(){}return t}();__reflect(AiConfig.prototype,"AiConfig");var AoyiConfig=function(){function t(){}return t}();__reflect(AoyiConfig.prototype,"AoyiConfig");var WanMoRankingItem=function(t){function e(){var e=t.call(this)||this;return e.skinName="WanMoRankingItemSkin",e}return __extends(e,t),e.prototype.dataChanged=function(){var t=this.data;this.lbRankingNum.text=t.rank+"",this.lbname.text=t.playerName,this.lbLayer.text=t.fbCount+""},e}(BaseItemRender);__reflect(WanMoRankingItem.prototype,"WanMoRankingItem"),window.WanMoRankingItem=WanMoRankingItem;var AppChannelConfig=function(){function t(){}return t}();__reflect(AppChannelConfig.prototype,"AppChannelConfig");var WanMoWin=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.winType=WinType.MainWin,e}return __extends(e,t),e.prototype.getFightBtn=function(){return this.getPanel(WanMoPanel).getFightBtn()},e.panelNames=[WanMoPanel],e}(BaseWinAutoTab);__reflect(WanMoWin.prototype,"WanMoWin"),window.WanMoWin=WanMoWin;var FenJieItem=function(t){function e(){var e=t.call(this)||this;return e.skinName="BtnTab5ZYCSSkin",e}return __extends(e,t),e.prototype.dataChanged=function(){var t=this.data,e=Cfg.getItemCfg(t.id);this.labelDisplay.text=""+e.getName(),this.updateRedPoint()},e.prototype.updateRedPoint=function(){var t=this.data;this.redPoint.visible=RpSys.ins().getData(BagWin,HeChengMainPanel,FenJiePanel,FenJieListWin,t.viewType2,t.id)},e}(BaseItemRender);__reflect(FenJieItem.prototype,"FenJieItem"),window.FenJieItem=FenJieItem;var FenJieListWin=function(t){function e(){var e=t.call(this)||this;return e.composeConfig=[],e.lastSelect=new FenJieItem,e.isScrol=!1,e.fitArray=new eui.ArrayCollection,e.composeArray=new eui.ArrayCollection,e.viewType2=0,e.isAutoAdd=!1,e.initUI(),e.addBg(),e}return __extends(e,t),e.prototype.initUI=function(){this.skinName="FenJieListWinEUI",this.listFitItem.useVirtualLayout=!1,this.setSkinPart("fitItem",new ItemBaseReward),this.fitArray=new eui.ArrayCollection,this.composeArray=new eui.ArrayCollection,this.listFitItem.dataProvider=this.fitArray,this.listConsume.dataProvider=this.composeArray,this.listFitItem.itemRenderer=FenJieItem,this.listConsume.itemRenderer=ItemBaseReward},e.prototype.open=function(e,i){this.viewType2=e,t.prototype.open.call(this),i>0?Cfg.getItemCfg(i).type==ItemType.guoshi?this.curFenJieConfig=Cfg.getConfig(FenJieConfig,Cfg.getConfig(EnumConfig).GUOSHI):this.curFenJieConfig=Cfg.getConfig(FenJieConfig,i):this.setCanFenJieItem();var n=Cfg.getConfigs(FenJieConfig,CondType.Equal,FenJieConfig.viewType2,this.viewType2).concat();
SortUtil.sortOn(n,["sort"],[SortType.up]),this.composeConfig=n,this.addItemTapE(this.listFitItem,this.onListItemTap),this.addClickE(this.btnFit,this.onclick),this.addClickE(this.btnMin,this.onclick),this.addClickE(this.btnSub,this.onclick),this.addClickE(this.btnAdd,this.onclick),this.addClickE(this.btnMax,this.onclick),this.addEvent(egret.TouchEvent.TOUCH_BEGIN,this.btnAdd,this.onAddBegin),this.addEvent(egret.TouchEvent.TOUCH_END,this,this.onAddend),this.addLsn(BagSys.ins().patchItemChange,this.updataItem),this.addLsn(BagSys.ins().patchFenJie,this.updateFenJie),this.addLsn(RpSys.ins().patchRp,this.updateRp),this.updatePanel()},e.prototype.updateFenJie=function(){this.updatePanel()},e.prototype.setCanFenJieItem=function(){var t=Cfg.getConfigs(FenJieConfig,CondType.Equal,FenJieConfig.viewType2,this.viewType2).concat();this.curFenJieConfig=t[0],SortUtil.sortOn(t,["sort"],[SortType.up]);for(var i=0;i<t.length;i++){var n=t[i],a=RpSys.ins().getData(BagWin,HeChengMainPanel,FenJiePanel,e,n.viewType2,n.id);if(a){this.curFenJieConfig=n;break}}this.listFitItem.selectedIndex=this.curFenJieConfig.sort-1},e.prototype.updatePanel=function(){this.updateData(),this.AotuSelect(),this.setNum(1),this.updateRp()},e.prototype.updateRp=function(t){if(void 0===t&&(t=null),!t||t.check(e)){for(var i=this.listFitItem.numElements,n=0;i>n;n++){var a=this.listFitItem.getElementAt(n);a&&a.updateRedPoint()}this.btnFit.redPoint.visible=RpSys.ins().getData(BagWin,HeChengMainPanel,FenJiePanel,e,this.curFenJieConfig.viewType2,this.curFenJieConfig.id)}},e.prototype.updataItem=function(t){if(void 0===t&&(t=null),null==t||this.curFenJieConfig.id==t.id){var e=GFunc.getItemCount(this.curFenJieConfig.id),i=0==e?15733780:5767068;this.lbItemCount.textFlow=addColorTF(""+Lang.itemtips_str26+addColor(""+e,i))}},e.prototype.onAddBegin=function(t){this.clickTarget=t.currentTarget,this.isAutoAdd=!0,Timer.ins()["do"](500,200,0,this.AutoAdd,this)},e.prototype.onAddend=function(){this.isAutoAdd=!1,Timer.ins().remove(this.AutoAdd,this)},e.prototype.AutoAdd=function(){var t=this.num;switch(this.clickTarget){case this.btnSub:t-=1;break;case this.btnAdd:t+=1}if(1>t)t=1,showTipsWarn(Lang.common_str93),this.onAddend();else{var e=this.getMaxNum();t>=e&&(t=e,this.onAddend(),showTipsWarn(Lang.common_str94))}this.setNum(t)},e.prototype.getMaxNum=function(){var t=BagSys.ins().getItemCount(this.curFenJieConfig.id)||1;return t},e.prototype.AotuSelect=function(){for(var t=0;t<this.listFitItem.numElements;t++){var e=this.listFitItem.getElementAt(t),i=e.data;if(i.id==this.curFenJieConfig.id){this.lastSelect=e,e.y>this.ScrollerlistFit.viewport.contentHeight&&e.y>this.ScrollerlistFit.viewport.height&&(e.y>this.ScrollerlistFit.viewport.contentHeight-594?this.ScrollerlistFit.viewport.scrollV=this.ScrollerlistFit.viewport.contentHeight-594:this.ScrollerlistFit.viewport.scrollV=e.y);break}}},e.prototype.sort=function(t,e){var i=t.sort,n=e.sort;return n>i?-1:i>n?1:0},e.prototype.updateData=function(){var t=Cfg.getItemCfg(this.curFenJieConfig.id),e=GFunc.creatRewardDataById(this.curFenJieConfig.id),i=GFunc.getItemCount(this.curFenJieConfig.id);e.count=i,this.fitItem.data=e,this.lbName.text=t.getName(),this.lbName.textColor=GConst.PZColor[t.quality],this.fitArray.replaceAll(this.composeConfig),this.listFitItem.validateNow(),this.updataItem(),this.setNum(1)},e.prototype.updateFenJieGet=function(){for(var t=[],i=0;i<this.curFenJieConfig.item.length;i++){var n=this.curFenJieConfig.item[i],a=new ItemDataReward;a.id=n.id,a.count=n.count*this.num,t.push(a)}this.composeArray.source=t,this.btnFit.redPoint.visible=RpSys.ins().getData(BagWin,HeChengMainPanel,FenJiePanel,e,this.curFenJieConfig.viewType2,this.curFenJieConfig.id)},e.prototype.onclick=function(t){switch(t.currentTarget){case this.btnFit:var e=new ItemDataReward;if(e.id=this.curFenJieConfig.id,e.count=this.num,!GFunc.checkConsumeEnough(e))return;BagSys.ins().sendFenJie(this.curFenJieConfig.id,this.num);break;case this.btnMax:var i=this.getMaxNum();this.num==i?showTipsWarn(Lang.common_str123):this.num=i,this.setNum(this.num);break;case this.btnMin:1==this.num?showTipsWarn(Lang.common_str124):this.num=1,this.setNum(1);break;case this.btnSub:1==this.num?showTipsWarn(Lang.common_str124):this.num--,this.setNum(this.num);break;case this.btnAdd:i=this.getMaxNum(),this.num==i?showTipsWarn(Lang.common_str123):this.num++,this.setNum(this.num)}},e.prototype.setNum=function(t){this.num=t,this.lbNum.text=t.toString(),this.updateFenJieGet()},e.prototype.listFitScroll=function(t){var e=this.ScrollerlistFit.viewport.scrollH+t,i=this.ScrollerlistFit.viewport.contentWidth-this.ScrollerlistFit.width;e>i&&(e=i),0>e&&(e=0),this.ScrollerlistFit.viewport.scrollH=e;this.ScrollerlistFit.viewport.contentWidth-this.ScrollerlistFit.width},e.prototype.onListItemTap=function(t){var e=t.item;if(void 0!=e){if(e.id==this.curFenJieConfig.id)return;var i=Cfg.getItemCfg(e.id),n=GFunc.creatRewardDataById(e.id),a=GFunc.getItemCount(e.id);n.count=a,this.fitItem.data=n,this.lbName.text=i.getName(),this.lbName.textColor=GConst.PZColor[i.quality];var o=Cfg.getConfig(FenJieConfig,e.id);this.curFenJieConfig=o,this.lastSelect=t.itemRenderer,this.setNum(1),this.updataItem()}},e.prototype.getFitBtn=function(){return this.btnFit},e.getTitle=function(){return"btz_zycs_hc"},e.getSysId=function(){return 321},e}(BaseWinSingle);__reflect(FenJieListWin.prototype,"FenJieListWin"),window.FenJieListWin=FenJieListWin;var Encrypt=function(){function t(){}return t.encode=function(e,i,n){if(void 0===i&&(i=0),void 0===n&&(n=0),i>=e.length)return 0;var a=n?i+n:e.length;a>e.length&&(a=e.length),e.position=i;for(var o=i;a>o;++o){var s=e.readByte();s^=t.sKeyBuff[o%4],e.position--,e.writeByte(s)}return a-i},t.decode=function(e,i,n){return void 0===i&&(i=0),void 0===n&&(n=0),t.encode(e,i,n)},t.getCRC16=function(t,e){return void 0===e&&(e=0),CRC16.update(t,0,e)},t.getCRC16ByPos=function(t,e,i){return void 0===e&&(e=0),void 0===i&&(i=0),CRC16.update(t,e,i)},t.getCheckKey=function(){var e=new egret.ByteArray;e.endian=egret.Endian.LITTLE_ENDIAN,e.writeUnsignedInt(t.sKey);var i=CRC16.update(e);return i},t.getSelfSalt=function(){return t.sSelfSalt},t.getTargetSalt=function(){return t.sTargetSalt},t.setTargetSalt=function(e){t.sTargetSalt=e,t.makeKey()},t.makeSalt=function(){var t=new Date;return Math.random()*t.getTime()},t.makeKey=function(){t.sKey=(t.sSelfSalt^t.sTargetSalt)+8254;for(var e=0;4>e;++e)t.sKeyBuff[e]=(t.sKey&255<<(e<<3))>>(e<<3)},t.sKeyBuff=new Array(4),t.sSelfSalt=t.makeSalt(),t}();__reflect(Encrypt.prototype,"Encrypt");var FenJieSuccessTipsWin=function(t){function e(){var e=t.call(this)||this;return e.init(),e.layer=LayerMgr.Popup,e}return __extends(e,t),e.prototype.init=function(){this.skinName="FenJieSuccessWinEUI",this.addBg(),this.list.itemRenderer=ItemBaseRewardName},e.prototype.open=function(e){t.prototype.open.call(this),this.list.dataProvider=new eui.ArrayCollection(e)},e}(BaseWin);__reflect(FenJieSuccessTipsWin.prototype,"FenJieSuccessTipsWin"),window.FenJieSuccessTipsWin=FenJieSuccessTipsWin;var FenJieTabItem=function(t){function e(){var e=t.call(this)||this;return e.itemListArray=new eui.ArrayCollection,e.skinName="HeChengTabItemEUI",e.name="FenJieTabItem",e.itemList.itemRenderer=FenJieTabItemSub,e.itemList.dataProvider=e.itemListArray,e}return __extends(e,t),e.prototype.dataChanged=function(){var t=this.data;this.lbName.text=t.tabName,this.itemListArray.source=t.fenJieSubDatas,this.itemList.validateNow(),this.updateRedPoint()},e.prototype.updateItem=function(){for(var t=this.itemList.numElements,e=0;t>e;e++){var i=this.itemList.getElementAt(e);i&&i.updateItem()}this.updateRedPoint()},e.prototype.updateRedPoint=function(){var t=this.data;if(t){this.redPoint.visible=RpSys.ins().getData(BagWin,HeChengMainPanel,FenJiePanel,FenJieListWin);for(var e=this.itemList.numElements,i=0;e>i;i++){var n=this.itemList.getElementAt(i);n&&n.updateRedPoint()}}},e.prototype.select=function(t){this.currentState=t?"select":"none"},e.prototype.selectSubTabIndex=function(t,e){var i=this.getItemIndex(t);i.select(e)},e.prototype.getItemIndex=function(t){return this.itemList.getChildAt(t)},e}(BaseItemRender);__reflect(FenJieTabItem.prototype,"FenJieTabItem"),window.FenJieTabItem=FenJieTabItem;var FenJieTabItemSub=function(t){function e(){var e=t.call(this)||this;return e.skinName="HeChengTabItemSubEUI",e.name="FenJieTabItemSub",e}return __extends(e,t),e.prototype.dataChanged=function(){this.data;this.updateItem()},e.prototype.updateItem=function(){var t=this.data;this.lbName.textFlow=addColorTF(t.fenJieViewConfig.typeName2),this.updateRedPoint()},e.prototype.updateRedPoint=function(){var t=this.data;if(t){var e=t.fenJieViewConfig;this.redPoint.visible=RpSys.ins().getData(BagWin,HeChengMainPanel,FenJiePanel,FenJieListWin,e.type2)}},e}(BaseItemRender);__reflect(FenJieTabItemSub.prototype,"FenJieTabItemSub"),window.FenJieTabItemSub=FenJieTabItemSub;var FenJieData=function(){function t(){this.fenJieSubDatas=[]}return t}();__reflect(FenJieData.prototype,"FenJieData");var FenJieSubData=function(){function t(){}return t}();__reflect(FenJieSubData.prototype,"FenJieSubData");var FootActTipsWin=function(t){function e(){return t.call(this)||this}return __extends(e,t),e.prototype.initUI=function(){t.prototype.initUI.call(this),this.skinName="FootActTipsWinEUI",this.layer=LayerMgr.Popup,this.mcFoots=[];var e=LogicSys.ins().centerEntity.data,i=new EntityRoleData;i.szId=e.szId,i.damonId=e.damonId,i.job=e.job,i.wingId=e.wingId,i.sex=e.sex,i.type=EntityType.ROLE,this.mcBody=new EntityRoleUI,this.groupEntity.addChild(this.mcBody),this.mcBody.setData(i,5,EntityAction.RUN)},e.prototype.open=function(e){t.prototype.open.call(this),this.hhdata=e,this.updatePanel(e),this.addClickE(this,this.onTap)},e.prototype.onTap=function(t){closeWin(this)},e.prototype.updatePanel=function(t){this.nameStr=t.getBaseConfig().name,this.totalPower.text=""+t.getHuanHuaPower(),Timer.ins()["do"](0,500,0,this.onMoveFoot,this)},e.prototype.onMoveFoot=function(){var t=this,e=this.mcFoots.pop()||new MC;e.x=0,e.y=0,e.playFile(this.hhdata.getBaseConfig().facade),this.groupEntity.addChildAt(e,0);var i=egret.Tween.get(e);i.to({x:260,y:-180},1200).call(function(){t.mcFoots.push(e)},this)},e}(BaseWinSingle);__reflect(FootActTipsWin.prototype,"FootActTipsWin"),window.FootActTipsWin=FootActTipsWin;var FootBagWin=function(t){function e(){var e=t.call(this)||this;return e.winType=WinType.NormalWin,e}return __extends(e,t),e.prototype.initUI=function(){t.prototype.initUI.call(this),this.addBg()},e.prototype.open=function(e){void 0===e&&(e=-1),t.prototype.open.call(this,e)},e.prototype.setTabItem=function(){this.tab.itemRenderer=BaseTabBtn3},e.prototype.setSkinName=function(){this.skinName="FootEquipWinEUI"},e.getSysId=function(){return 316},e.panelNames=[FootEquipBagPanel,FootEquipFenJiePanel],e}(BaseWinAutoTab);__reflect(FootBagWin.prototype,"FootBagWin"),window.FootBagWin=FootBagWin;var FootDaShiWin=function(t){function e(){return t.call(this)||this}return __extends(e,t),e.prototype.initUI=function(){this.skinName="XingHunAttrWinEUI",this.imgTitle.source="zuji_zycs_zujids",this.addBg(),t.prototype.initUI.call(this),this.layer=LayerMgr.Popup},e.prototype.open=function(e){t.prototype.open.call(this),this.daShiData=e,this.addClickE(this.btnUp,this.onClick),this.addLsn(FootSys.ins().patchFootDaShiUp,this.update),this.addLsn(RpSys.ins().patchRp,this.updateRp),this.update(),this.updateRp()},e.prototype.updateRp=function(t){void 0===t&&(t=null),(!t||t.check(this))&&(this.btnUp.redPoint.visible=RpSys.ins().getData(RoleWin,RolePanel,ZhuangBanWin,FootPanel,FootLevelPanel,e))},e.prototype.update=function(){var t=this.daShiData;this.totalPower.text=t.genPower().toFixed(),this.bitLevel.text="."+t.level+"r";var e=t.getConfig(),i=Cfg.getConfig(FootDashiConfig,Math.max(t.level-1,0)).needlv,n=t.noActRank()?addColor(Lang.xh_str4,15129784):Lang.xh_str4+"  "+Lang.foot_str1+i+addColor(Lang.common_str40,12704255);if(this.lbCurLevel.textFlow=addColorTF(n),n=t.noActRank()?addColor(Lang.xh_str9,15129784):AttrData.parse(t.getConfig().addattr,{fm:AttrData.getFm(5767068,12704255)}).join("\n"),this.lbCurAttr.textFlow=addColorTF(n),!t.isMaxRank()){var a=Cfg.getNextConfig(FootDashiConfig,t.level),o=addColor("("+FootSys.ins().level+"/"+e.needlv+")",FootSys.ins().level<e.needlv?15733780:5767068);this.lbNextLevel.textFlow=addColorTF(Lang.foot_str2+"  "+Lang.foot_str1+e.needlv+o);var s=AttrData.getFm(3821938,12704255," ","+");this.lbNextAttr.textFlow=addColorTF(AttrData.parse(a.addattr,{fm:s}).join("\n"))}var r=t.canRank();t.noActRank()?this.currentState=r?"canAct":"noAct":t.isMaxRank()?this.currentState="max":r?this.currentState="upRank":this.currentState="noRank"},e.prototype.onClick=function(t){switch(t.currentTarget){case this.btnUp:this.daShiData.canRank()&&FootSys.ins().sendFootDaShiUp()}},e}(BaseWinSingle);__reflect(FootDaShiWin.prototype,"FootDaShiWin"),window.FootDaShiWin=FootDaShiWin;var FootEquipTipsWin=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.isDuiBi=!0,e}return __extends(e,t),e.prototype.initUI=function(){t.prototype.initUI.call(this),this.itemIcon.bitlbRank.font="qianghuanum2_fnt",this.itemIcon.bitlbRank.letterSpacing=0,this.beaseAttrItem.setMyDec(Lang.foot_str12),this.zhuoYueAttrItem.setMyDec(Lang.foot_str12)},e.prototype.open=function(e,i){this.footChuanDaiDataA=e,this.footChuanDaiDataB=i,e.isBagData||i?(this.isDuiBi=!0,this.imgEquipScore.scaleX=1,this.LabelEquipTypeB.scaleX=1,this.imageState.visible=!1):(this.isDuiBi=!1,this.imgEquipScore.scaleX=0,this.LabelEquipTypeB.scaleX=0,this.imageState.visible=!0),t.prototype.open.call(this,e.itemData,i?i.itemData:null)},e.prototype.setData=function(e,i){t.prototype.setData.call(this,e,i);var n=this.getItemDataPower(e),a=i?this.getItemDataPower(i):0;!this.footChuanDaiDataB||this.footChuanDaiDataB.equipData.isEquip||this.footChuanDaiDataB.isBagData||(a=0),this.lbEquipScoreB.textFlow=addColorTF(this.showDuiBi()?""+Math.abs(n-a).toFixed(0):""),this.lbEquipScoreB.textColor=ResMgr.getEquipAttrContrastColor(n,a);var o="";this.footChuanDaiDataA.isBagData?(o=this.footChuanDaiDataA.equipData.name,this.itemIcon.bitlbRank.text=""):(o=this.footChuanDaiDataA.equipData.name,this.footChuanDaiDataA.equipData.level>0?this.itemIcon.bitlbRank.text="+"+this.footChuanDaiDataA.equipData.level:this.itemIcon.bitlbRank.text=""),this.LabelEquipType.text=o,o=this.footChuanDaiDataB&&this.footChuanDaiDataB.equipData.isEquip?this.footChuanDaiDataB.equipData.name:Lang.foot_str10,this.LabelEquipTypeB.text=o},e.prototype.updateAttr=function(t,e){var i=[];this.footChuanDaiDataA.equipData.isEquip&&!this.footChuanDaiDataA.isBagData&&(i=this.footChuanDaiDataA.equipData.getConfig().addattr);var n=[];this.footChuanDaiDataB&&this.footChuanDaiDataB.equipData.isEquip&&!this.footChuanDaiDataB.isBagData&&(n=e.cfg.pattr),this.beaseAttrItem.setData(EquipAttrType.base,t.hasEquipOn()?t.cfg.pattr:[],n,i,this.showDuiBi(),EquipTipsAttrType.levelUp),this.zhuoYueAttrItem.scaleY=0==t.cfg.exattr.length?0:1,this.zhuoYueAttrItem.setData(EquipAttrType.zhuoyue,t.hasEquipOn()?t.cfg.exattr:[],e?e.cfg.exattr:[],this.showDuiBi()),this.validateNow()},e.prototype.showDuiBi=function(){return this.isDuiBi},e.prototype.getEquipScoreName=function(){return Lang.foot_str9+"："},e}(EquipTipsWin);__reflect(FootEquipTipsWin.prototype,"FootEquipTipsWin"),window.FootEquipTipsWin=FootEquipTipsWin;var FootEquipWin=function(t){function e(){var e=t.call(this)||this;return e.winType=WinType.NormalWin,e}return __extends(e,t),e.prototype.initUI=function(){t.prototype.initUI.call(this),this.addBg()},e.prototype.open=function(e,i){void 0===e&&(e=-1),this.equipData=i,t.prototype.open.call(this,e)},e.prototype.setTabItem=function(){this.tab.itemRenderer=BaseTabBtn3},e.prototype.getParam=function(){return[this.equipData]},e.prototype.setSkinName=function(){this.skinName="FootEquipWinEUI"},e.getSysId=function(){return 316},e.panelNames=[FootEquipChuanDaiPanel],e}(BaseWinAutoTab);__reflect(FootEquipWin.prototype,"FootEquipWin"),window.FootEquipWin=FootEquipWin;var FootSkillUpWin=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.footId=1,e.pos=1,e}return __extends(e,t),e.prototype.open=function(e,i,n){void 0===i&&(i=1),void 0===n&&(n=1),t.prototype.open.call(this,e),this.footId=i,this.pos=n,this.addLsn(FootSys.ins().patchFootSkillUp,this.upatePanel)},e.prototype.onTap=function(t){FootSys.ins().sendFootSkillUp(this.footId,this.pos),GFunc.playUIMovie("public_qxt",108,103,this.group,1)},e}(SkillPassivityUpWin);__reflect(FootSkillUpWin.prototype,"FootSkillUpWin"),window.FootSkillUpWin=FootSkillUpWin;var FootSys=function(t){function e(){var e=t.call(this)||this;return e.level=0,e.exp=0,e.huanHuaDatas=[],e.huanHuaId=1,e.bagModel=[],e.sysId=PackId.Foot,e.reg(1,e.patchFootInfo),e.reg(2,e.patchFootLevelUp),e.reg(3,e.patchFootHuanHuaUp),e.reg(4,e.patchFootMiYuEquip),e.reg(5,e.patchFootMiYuUp),e.reg(6,e.patchFootMiYuFenJie),e.reg(7,e.patchFootMiYuDaZao),e.reg(8,e.patchFootHuanHua),e.reg(9,e.patchFootDaShiUp),e.reg(10,e.patchFootSkillUp),e.daShiData=new FootDaShiData,e}return __extends(e,t),e.ins=function(){return t.getIns.call(this,e)},e.prototype.patchFootInfo=function(t){this.level=t.readShort(),this.exp=t.readInt(),this.huanHuaDatas.length=0;for(var e=t.readByte(),i=0;e>i;i++){var n=new FootHuanHuaData;n.parser(t),this.huanHuaDatas.push(n)}this.huanHuaId=t.readByte(),this.daShiData.level=t.readByte()},e.prototype.sendFootLevelUp=function(t){var e=this.getBytes(2);e.writeByte(t),this.send(e)},e.prototype.patchFootLevelUp=function(t){this.level=t.readShort(),this.exp=t.readInt(),RpFun.showFootLevelRp(),RpFun.showFootDaShiRp()},e.prototype.sendFootHuanHuaUp=function(t){var e=this.getBytes(3);e.writeByte(t),this.send(e)},e.prototype.patchFootHuanHuaUp=function(t){var e=this.getHuanHuaDataById(t.readByte());e.stage=t.readShort(),1==e.stage&&(openWin(FootActTipsWin,e),RpFun.showFootMiYuLevelRp(),RpFun.showFootMiYuEquipRp()),RpFun.showFootHuanHuaRp()},e.prototype.sendFootMiYuEquip=function(t,e){var i=this.getBytes(4);i.writeByte(t),i.writeByte(e),this.send(i)},e.prototype.patchFootMiYuEquip=function(t){var e=this.getHuanHuaDataById(t.readByte()),i=e.getEquipDataByPos(t.readByte());i.isEquip=t.readByte(),RpFun.showDaZaoEquipRedPoint(),RpFun.showFootMiYuEquipRp(),RpFun.showFootMiYuSkillRp()},e.prototype.sendFootMiYuUp=function(t){var e=this.getBytes(5);e.writeByte(t),this.send(e)},e.prototype.patchFootMiYuUp=function(t){var e=this.getHuanHuaDataById(t.readByte());e.parserEquip(t),RpFun.showFootMiYuLevelRp(),RpFun.showFootMiYuSkillRp()},e.prototype.sendFootMiYuFenJie=function(t){var e=this.getBytes(6);e.writeShort(t.length);for(var i=0;i<t.length;i++)e.writeInt(t[i].id);this.send(e)},e.prototype.patchFootMiYuFenJie=function(t){},e.prototype.sendFootMiYuDaZao=function(t,e){var i=this.getBytes(7);i.writeInt(t),i.writeByte(e.length);for(var n=0;n<e.length;n++)i.writeInt(e[n]);this.send(i)},e.prototype.patchFootMiYuDaZao=function(t){var e=t.readInt();openWin(DaZaoSuccessTipsWin,e)},e.prototype.sendFootHuanHua=function(t){var e=this.getBytes(8);e.writeByte(t),this.send(e)},e.prototype.patchFootHuanHua=function(t){this.huanHuaId=t.readByte()},e.prototype.sendFootDaShiUp=function(){this.sendBase(9)},e.prototype.patchFootDaShiUp=function(t){this.daShiData.level=t.readByte(),RpFun.showFootDaShiRp()},e.prototype.sendFootSkillUp=function(t,e){var i=this.getBytes(10);i.writeByte(t),i.writeByte(e),this.send(i)},e.prototype.patchFootSkillUp=function(t){var e=this.getHuanHuaDataById(t.readByte()),i=e.getSkillDataByPos(t.readByte());i.level=t.readShort(),RpFun.showFootMiYuSkillRp()},e.prototype.getHuanHuaDataById=function(t){for(var e=0,i=this.huanHuaDatas;e<i.length;e++){var n=i[e];if(n.id==t)return n}return null},e.prototype.getLevelConfig=function(){return this.levelConfig&&this.levelConfig.level==this.level||(this.levelConfig=Cfg.getConfig(FootLevelConfig,this.level)),this.levelConfig},e.prototype.getLevelPower=function(){var t=GFunc.getPower(this.getLevelConfig().attr);return t>>0},e.prototype.getHuanHuaPower=function(){return 0},e.prototype.getMiYuPower=function(){return 0},e.prototype.getLevelAttrDatas=function(){for(var t=[],e=this.getLevelConfig(),i=Cfg.getNextConfig(FootLevelConfig,this.level),n=e.attr.length,a=0;n>a;a++){var o=e.attr[a],s=i.attr[a],r=new ComAttrData(o,s,e.level>=i.level);t.push(r)}return t},e.prototype.getHuanHuaDatasAll=function(){var t=[];for(var e in this.huanHuaDatas){var i=this.huanHuaDatas[e];t=AttrData.mergeAttr(i.getAttrData(),t)}return t},e.prototype.isMaxLevel=function(){return this.level>=Cfg.getConfig(FootConstConfig).maxLevel},e.prototype.getMaxStageHuanHuaData=function(){for(var t,e=0,i=this.huanHuaDatas.length-1;i>=0;i--){var n=this.huanHuaDatas[i];if(n.isAct()){e=n.stage,t=n;break}}return t},e.prototype.isChuanDaiEquipByEquipId=function(t,e){for(var i=!1,n=this.huanHuaDatas.length,a=0;n>a;a++){var o=this.huanHuaDatas[a];if(o.isAct()&&0==o.getEquipDataByPos(t).isEquip&&o.getBaseConfig().equips.indexOf(e)>-1){i=!0;break}}return i},e.prototype.getMaxStageEquipPower=function(t){var e=this.getMaxStageHuanHuaData(),i=e?e.getEquipDataByPos(t).power:0;return i},e.prototype.getTipsDatas=function(t){var e=[],i=Cfg.getConfigs(FootHuanhuaBaseConfig);for(var n in i){var a=i[n].equips.indexOf(t.id);if(-1!=a){var o=this.getHuanHuaDataById(i[n].id).getEquipDataByPos(a+1);e[0]=new FootChuanDaiData(o,t,!0),e[1]=new FootChuanDaiData(o,t,!1);break}}return e},e.prototype.doBagData=function(t){this.bagModel=[];for(var e,i=t.readInt(),n=0;i>n;n++)e=new ItemData,e.parser(t),this.bagModel.push(e)},e.prototype.patchDeleteItem=function(t){for(var e,i=t.readDouble(),n=this.bagModel.length-1;n>=0;n--)if(this.bagModel[n].handle==i){e=this.bagModel.splice(n,1)[0];break}this.patchEquiChange(e)},e.prototype.patchAddItem=function(t){var e=new ItemData;e.parser(t),this.bagModel.unshift(e);var i=t.readByte(),n=t.readByte();if(this.patchEquiChange(e),i)if(e.cfg.rareLevel>0)openWin(TipsWin).showGoodEquipTip(e);else{var a=GConst.PZColor[e.cfg.quality];TipsSys.ins().showtipsNew(e.cfg.getName()+" +"+e.count,a,n)}},e.prototype.patchUpDateItem=function(t){for(var e,i=t.readDouble(),n=t.readInt(),a=t.readByte(),o=t.readByte(),s=0,r=0;r<this.bagModel.length;r++)if(e=this.bagModel[r],e.handle==i){e.count=n;break}if(this.patchEquiChange(e),a&&s>0){var u=Cfg.getConfig(ItemConfig,e.id),h=GConst.PZColor[u.quality];TipsSys.ins().showtipsNew(u.getName()+" +"+s,h,o)}},e.prototype.getEquipByStar=function(t){for(var e=[],i=0;i<this.bagModel.length;i++){var n=this.bagModel[i];n.cfg.star==t&&e.push(n)}return e},e.prototype.getEquipByStarQuality=function(t,e){for(var i=[],n=0;n<this.bagModel.length;n++){var a=this.bagModel[n];t>=a.cfg.star&&e>=a.cfg.quality&&i.push(a)}return i},e.prototype.getEquipDatasById=function(t){for(var e=[],i=0;i<this.bagModel.length;i++){var n=this.bagModel[i];n.id==t&&e.push(n)}return e},e.prototype.patchEquiChange=function(t){return RpFun.showDaZaoEquipRedPoint(),RpFun.showFootMiYuEquipRp(),t},e.prototype.getBagMaxCount=function(){return Cfg.getConfig(BagDataConfig,1).baseSize},e.prototype.isBagMax=function(){return this.bagModel.length>=this.getBagMaxCount()},e}(BaseSys);__reflect(FootSys.prototype,"FootSys");var System;!function(t){t.footSys=FootSys.ins.bind(FootSys)}(System||(System={})),window.FootSys=FootSys;var FootChuanDaiData=function(){function t(t,e,i){void 0===i&&(i=!0),this.isBagData=!0,this.equipData=t,this.itemData=e,this.isBagData=i}return t}();__reflect(FootChuanDaiData.prototype,"FootChuanDaiData");var FootDaShiData=function(){function t(){this.level=0}return t.prototype.getConfig=function(){return this.config&&this.config.id==this.level||(this.config=Cfg.getConfig(FootDashiConfig,this.level)),this.config},t.prototype.noActRank=function(){return 0==this.level},t.prototype.isMaxRank=function(){return this.level>=Cfg.getMaxConfig(FootDashiConfig).id},t.prototype.canRank=function(){return this.isMaxRank()?!1:FootSys.ins().level>=this.getConfig().needlv},t.prototype.getDaShiPlusAttr=function(){var t,e,i=this.getConfig().addattr;for(var n in i)switch(i[n].type){case AttrType.footHpPer:t=i[n];break;case AttrType.footDefPer:e=i[n]}var a=[],o=FootSys.ins().getLevelConfig().attr;for(var n in o){if(o[n].type==AttrType.atHpMax){var s=new AttrData;s.type=AttrType.atHpMax,s.value=o[n].value*t.value/1e4,a.push(s)}if(o[n].type==AttrType.atDef){var r=new AttrData;r.type=AttrType.atDef,r.value=o[n].value*e.value/1e4,a.push(r)}}return a},t.prototype.genPower=function(){return GFunc.getPower(this.getDaShiPlusAttr())>>0},t}();__reflect(FootDaShiData.prototype,"FootDaShiData");var FootEquipData=function(){function t(t,e){this.footId=1,this.pos=1,this.isEquip=0,this.level=0,this.name="",this.itemId=0,this._power=-1,this.footId=t,this.pos=e}return t.prototype.parser=function(t){this.isEquip=t.readByte(),this.level=t.readShort()},t.prototype.getConfig=function(){return this.footSecretConfig||(this.footSecretConfig=Cfg.getConfig(FootSecretConfig,this.pos,this.level))},t.prototype.getItemConfig=function(){return this.itemConfig||(this.itemConfig=Cfg.getItemCfg(this.itemId))},t.prototype.getAttrDatas=function(){for(var t=[],e=this.getAttrs(),i=Cfg.getNextConfig(FootSecretConfig,this.pos,this.level),n=AttrData.mergeAttr(this.isEquip?i.addattr:[],this.getItemConfig().pattr),a=e.length,o=0;a>o;o++){var s=e[o],r=n[o],u=new ComAttrData(s,r,this.level>=i.index);t.push(u)}return t},t.prototype.getAttrs=function(){var t=[];return t=this.isEquip?AttrData.mergeAttr(this.getConfig().addattr,this.getItemConfig().pattr):this.getConfig().addattr},t.prototype.isMax=function(){return this.level>=Cfg.getMaxConfig(FootSecretConfig,this.pos).index},Object.defineProperty(t.prototype,"power",{get:function(){return this.footId>CurType.max?(this._power=-1==this._power?BagSys.ins().getPowerOfItem(GFunc.creatItemDataById(this.itemId)):this._power,this._power):0},enumerable:!0,configurable:!0}),t}();__reflect(FootEquipData.prototype,"FootEquipData");var FootHuanHuaData=function(){function t(){this.id=1,this.stage=0,this.equipDatas=[],this.skillDatas=[],this.minEquipLv=0}return t.prototype.parser=function(t){this.id=t.readByte(),this.stage=t.readShort(),this.parserEquip(t);var e=Cfg.getConfig(FootConstConfig).skills;this.skillDatas.length=0;for(var i=t.readByte(),n=0;i>n;n++){var a=new SkillPassivityData(e[n]);a.level=t.readShort(),a.param=this.id,this.skillDatas.push(a)}},t.prototype.parserEquip=function(t){this.equipDatas.length=0;var e=t.readByte();this.minEquipLv=Number.MAX_VALUE;for(var i=0;e>i;i++){var n=new FootEquipData(this.id,i+1);n.parser(t),n.name=this.getBaseConfig().equipNames[i],n.itemId=this.getBaseConfig().equips[i],this.equipDatas.push(n),this.minEquipLv=Math.min(this.minEquipLv,n.level)}},t.prototype.getBaseConfig=function(){return this.baseConfig||(this.baseConfig=Cfg.getConfig(FootHuanhuaBaseConfig,this.id))},t.prototype.getAttrData=function(t){return void 0===t&&(t=this.stage),t>this.getBaseConfig().maxLevel&&(t=this.getBaseConfig().maxLevel),AttrData.attrMultiple(this.getBaseConfig().baseAttrs,t)},t.prototype.getEquipDataByPos=function(t){for(var e=0,i=this.equipDatas;e<i.length;e++){var n=i[e];if(n.pos==t)return n}return null},t.prototype.getSkillDataByPos=function(t){return this.skillDatas[t-1]},t.prototype.getHuanHuaPower=function(){var t=GFunc.getPower(this.getAttrData());return t>>0},t.prototype.getMiYuPower=function(){for(var t=0,e=0,i=this.equipDatas;e<i.length;e++){var n=i[e];t+=GFunc.getPower(n.getAttrs())}for(var a=0,o=this.skillDatas;a<o.length;a++){var s=o[a];t+=s.getPower()}return t>>0},t.prototype.isUse=function(){return this.id==FootSys.ins().huanHuaId},t.prototype.isMax=function(){return this.stage>=this.getBaseConfig().maxLevel},t.prototype.isAct=function(){return this.stage>0},t.prototype.isEquipMax=function(){for(var t=!0,e=0,i=this.equipDatas;e<i.length;e++){var n=i[e];if(!n.isMax()){t=!1;break}}return t},t.prototype.isHaveEquip=function(){for(var t=!1,e=0,i=this.equipDatas;e<i.length;e++){var n=i[e];if(n.isEquip){t=!0;break}}return t},t.prototype.getHuanHuaAttrDatas=function(){for(var t=[],e=this.getAttrData(),i=this.getAttrData(this.stage+1),n=e.length,a=0;n>a;a++){var o=e[a],s=i[a],r=new ComAttrData(o,s,this.isMax());t.push(r)}return t},t.prototype.getMiYuAttrsAll=function(){for(var t=[],e=0,i=this.equipDatas;e<i.length;e++){var n=i[e];t=AttrData.mergeAttr(n.getAttrs(),t)}return t},t.prototype.getIcon=function(){return"zuji_zycs_"+this.id+"_"+(this.stage>0?1:0)},t.prototype.getEquipUpConsu=function(){for(var t=0,e=0,i=this.equipDatas;e<i.length;e++){var n=i[e];n.isEquip&&(t+=n.getConfig().need)}return t},t}();__reflect(FootHuanHuaData.prototype,"FootHuanHuaData");var FootEquipChuanDaiItem=function(t){function e(){var e=t.call(this)||this;return e.skinName="FootEquipChuanDaiItemEUI",e.setSkinPart("itemIcon",new ItemIcon),e.btnEquip.name="btnEquip",e.imgClick.name="imgClick",e}return __extends(e,t),e.prototype.dataChanged=function(){if(this.data instanceof FootChuanDaiData){this.itemIcon.setDataByItemConfig(this.data.itemData.cfg),this.lbName.textColor=GConst.PZColor[this.data.itemData.cfg.quality];var t=AttrData.getFm(5767068,5767068,"","：");if(this.data.isBagData){this.lbName.text=this.data.itemData.equipName;var e=AttrData.parse(this.data.itemData.cfg.pattr,{fm:t}).join("\n");this.lbAttr.textFlow=addColorTF(e),this.btnEquip.visible=0==this.data.equipData.isEquip,this.imgYzb.visible=!1}else{this.lbName.text=this.data.itemData.equipName+" Lv"+this.data.equipData.level;var i=AttrData.parse(this.data.equipData.getAttrs(),{fm:t}).join("\n");this.lbAttr.textFlow=addColorTF(i),this.btnEquip.visible=!1,this.imgYzb.visible=!0}}},e}(BaseItemRender);__reflect(FootEquipChuanDaiItem.prototype,"FootEquipChuanDaiItem"),window.FootEquipChuanDaiItem=FootEquipChuanDaiItem;var FootEquipItem=function(t){function e(){var e=t.call(this)||this;return e.skinName="FootEquipItemEUI",e.setSkinPart("itemIcon",new ItemIcon),e.showRedPoint(!1),e.setSelect(!1),e}return __extends(e,t),e.prototype.dataChanged=function(){if(this.data instanceof FootEquipData){var t=this.data.getItemConfig();this.data.isEquip?(this.imgColor.source=ResMgr.getItemqualityResource(t.quality),this.imgIcon.source=ResMgr.getItemIcon(t.getIcon(),IconType.IT_80x80),this.bitRank.text="+"+this.data.level,this.itemIcon.setDataByItemConfig(t),this.itemIcon.visible=!0,this.imgPlus.visible=!1,this.lbName.text=t.getName()):(this.imgColor.source="",this.imgIcon.source="",this.bitRank.text="",this.itemIcon.visible=!1,this.imgPlus.visible=!0,this.imgEquipBg.source="zuji_zycs_bw"+(this.data.pos-1),this.lbName.textFlow=addColorTF(this.data.name,16774477)),this.showRedPoint(RpSys.ins().getData(RoleWin,RolePanel,ZhuangBanWin,FootPanel,FootMiYuPanel,this.data.footId,this.data.pos))}},e.prototype.showRedPoint=function(t){this.redPoint.visible=t},e.prototype.setSelect=function(t){this.imgSelect.visible=t},e.prototype.playMC=function(){GFunc.playUIMovie("gemupgrade",0,0,this.groupMc,1)},e}(BaseItemRender);__reflect(FootEquipItem.prototype,"FootEquipItem"),window.FootEquipItem=FootEquipItem;var AppendAttrConfig=function(){function t(){}return t}();__reflect(AppendAttrConfig.prototype,"AppendAttrConfig");var FootItem2=function(t){function e(){return t.call(this)||this}return __extends(e,t),e.prototype.dataChanged=function(){if(this.data instanceof FootHuanHuaData){this.imgIcon.source=this.data.getIcon(),this.imgPz.source="zuji_zycs_pz"+this.data.getBaseConfig().quality,this.imgLock.visible=!this.data.isAct(),this.imgAn.visible=!this.data.isAct();var t=RpSys.ins().getData(RoleWin,RolePanel,ZhuangBanWin,FootPanel,FootMiYuPanel,this.data.id);this.showRedPoint(t)}},e}(FootItem);__reflect(FootItem2.prototype,"FootItem2"),window.FootItem2=FootItem2;var FootLevelConsuItem=function(t){function e(){var e=t.call(this)||this;return e.skinName="FootLevelConsuItemEUI",e.setSelect(!1),e}return __extends(e,t),e.prototype.dataChanged=function(){this.data instanceof ItemDataReward&&(this.itemIcon.data=this.data)
},e.prototype.setSelect=function(t){this.imgSelect.visible=t},e}(BaseItemRender);__reflect(FootLevelConsuItem.prototype,"FootLevelConsuItem"),window.FootLevelConsuItem=FootLevelConsuItem;var AppendCostConfig=function(){function t(){}return t}();__reflect(AppendCostConfig.prototype,"AppendCostConfig");var AppendYuanShiConfig=function(){function t(){}return t}();__reflect(AppendYuanShiConfig.prototype,"AppendYuanShiConfig");var AttrPowerConfig=function(){function t(){}return t}();__reflect(AttrPowerConfig.prototype,"AttrPowerConfig");var FootEquipFenJiePanelItem=function(t){function e(){var e=t.call(this)||this;return e.skinName="FootEquipFenJiePanelItemEUI",e.itemTarget.touchEnabled=!1,e.itemTarget.touchChildren=!1,e.setSelect(!1),e}return __extends(e,t),e.prototype.dataChanged=function(){var t=this.data;this.itemTarget.data=t,this.updateRedPoint()},e.prototype.setSelect=function(t){this.imgPlus.visible=t},e.prototype.updateRedPoint=function(){this.data},e}(BaseItemRender);__reflect(FootEquipFenJiePanelItem.prototype,"FootEquipFenJiePanelItem"),window.FootEquipFenJiePanelItem=FootEquipFenJiePanelItem;var FootEquipFenJiePanelQualitySaiXuan=function(t){function e(){var e=t.call(this)||this;return e.skinName="FootEquipFenJiePanelQualitySaiXuanEUI",e}return __extends(e,t),e.prototype.dataChanged=function(){var t=this.data;this.lbDesc.textFlow=addColorTF(addColor(GConst.pzName[t],GConst.PZColor[t])+"及以下")},e}(BaseItemRender);__reflect(FootEquipFenJiePanelQualitySaiXuan.prototype,"FootEquipFenJiePanelQualitySaiXuan"),window.FootEquipFenJiePanelQualitySaiXuan=FootEquipFenJiePanelQualitySaiXuan;var FootEquipFenJiePanelStarSaiXuan=function(t){function e(){var e=t.call(this)||this;return e.skinName="FootEquipFenJiePanelStarSaiXuanEUI",e}return __extends(e,t),e.prototype.dataChanged=function(){var t=this.data;0==t?this.lbDesc.textFlow=addColorTF("无星级"):this.lbDesc.textFlow=addColorTF(t+"星及以下")},e}(BaseItemRender);__reflect(FootEquipFenJiePanelStarSaiXuan.prototype,"FootEquipFenJiePanelStarSaiXuan"),window.FootEquipFenJiePanelStarSaiXuan=FootEquipFenJiePanelStarSaiXuan;var AttrViewConfig=function(){function t(){}return t}();__reflect(AttrViewConfig.prototype,"AttrViewConfig");var BagBaseConfig=function(){function t(){}return t}();__reflect(BagBaseConfig.prototype,"BagBaseConfig");var BagDataConfig=function(){function t(){}return t}();__reflect(BagDataConfig.prototype,"BagDataConfig");var BagExpandConfig=function(){function t(){}return t}();__reflect(BagExpandConfig.prototype,"BagExpandConfig");var ForgeSys=function(t){function e(){var e=t.call(this)||this;return e.suitDatas=[],e.purifyData=new PurifyData,e.fumoData=new FumoEquipData,e.shenPanTaoZhuangData=new ShenPanTaoZhuangData,e.sysId=PackId.Forge,e.reg(1,e.patchstrengthenUpdate),e.reg(2,e.patchAddUpdate),e.reg(3,e.patchFosterUp),e.reg(4,e.patchFosteData),e.reg(5,e.patchAppendYuanShi),e.reg(6,e.patchStrengthenData),e.reg(7,e.patchStrengthenUpRank),e.reg(8,e.patchAddData),e.reg(9,e.patchStrengthenOneKey),e.reg(11,e.patchSuitDataInit),e.reg(12,e.patchSuitUp),e.reg(21,e.patchGemData),e.reg(25,e.patchGemUp),e.reg(26,e.patchShopGemConsume),e.reg(27,e.patchGemUpRank),e.reg(28,e.patchGemOneKeyUp),e.reg(29,e.patchGemOneKeyXQ),e.reg(31,e.patchEnchantData),e.reg(32,e.patchEnchantUp),e.reg(41,e.patchTianMoData),e.reg(42,e.patchTianMoUpLevel),e.reg(43,e.patchTianMoUpRank),e.reg(61,e.patchPurifyUpdate),e.reg(62,e.patchPurifyUpLvel),e.reg(63,e.patchPurifyUpRank),e.reg(135,e.patchUpdateSuitData),e.reg(136,e.patchShenPanTaoZhuangUp),e.tianMoData=new TianMoData,e.tianMoData.iniData(),e.strengthenDaRenData=new StrengthenDaRenData,e.strengthenDaShiData=new StrengthenDaShiData,e.gemEquipData=new GemEquipData,e.addYuanShiData=new AddYuanShiData,e.addYuanShiData.iniData(),e.purifyData.iniData(),e.purifyDaRenData=new PurifyDarenData,e.purifyDaShiData=new PurifyDaShiData,e}return __extends(e,t),e.ins=function(){return t.getIns.call(this,e)},e.prototype.patchTianMoData=function(t){this.tianMoData.parser(t),RpFun.showTianMoRedPoint(PCode.UPD),RpFun.showTianMoRankRedPoint(PCode.UPD),RpFun.showTianMoSplitRedPoint(PCode.UPD)},e.prototype.sendTianMoUpLevel=function(t){var e=this.getBytes(42);e.writeByte(t),this.send(e)},e.prototype.patchTianMoUpLevel=function(t){var e=t.readBoolean(),i=t.readByte(),n=t.readShort(),a=this.tianMoData.getTianMoUpLevelDataByPos(i);a.star=n,a.isAct=!0;var o=this.tianMoData.gettianMoEquipRankDataByPos(i);if(o.star=n,RpFun.showTianMoRedPoint(PCode.UPD),RpFun.showTianMoRankRedPoint(PCode.UPD),RpFun.showTianMoSplitRedPoint(PCode.UPD),0==n){var s=Cfg.getConfig(TianMoAttrConfig,i,-1),r=Cfg.getConfig(ItemConfig,s.items[0].id);openWin(TianMoActTipsWin,r.getName(),ResMgr.TianMoIcons(a.pos))}return e||GFunc.playMovieOnLayer("common_fail"),a},e.prototype.sendTianMoUpRank=function(t){var e=this.getBytes(43);e.writeByte(t),this.send(e)},e.prototype.patchTianMoUpRank=function(t){var e=t.readByte(),i=t.readShort(),n=this.tianMoData.gettianMoEquipRankDataByPos(e);return n.rankLevel=i,RpFun.showTianMoRankRedPoint(PCode.UPD),GFunc.playMovieOnLayer("szjx_sjcg"),n},e.prototype.sendUpGrade=function(t){var e=this.getBytes(1);e.writeByte(t),this.send(e)},e.prototype.patchstrengthenUpdate=function(t){var e=t.readByte(),i=t.readShort(),n=BagSys.ins().getEquipByIndex(e);n.strengthen=i,RpFun.showForgeBoostSingle(),RpFun.updateForgeRedPoint(219)},e.prototype.patchStrengthenData=function(t){var e=t.readByte(),i=t.readByte();this.strengthenDaRenData.level=e,this.strengthenDaShiData.level=i;for(var n=BagSys.ins().equipDatas,a=0;a<n.length;a++){var o=n[a];o.setStrengthenLevel(t.readShort())}RpFun.updateForgeRedPoint(219)},e.prototype.sendStrengthenUpRank=function(t){var e=this.getBytes(7);e.writeByte(t),this.send(e)},e.prototype.patchStrengthenUpRank=function(t){var e=t.readByte(),i=t.readByte();1==e?this.strengthenDaRenData.level=i:this.strengthenDaShiData.level=i,RpFun.updateForgeRedPoint(219)},e.prototype.sendStrengthenOneKey=function(){var t=this.getBytes(9);this.send(t)},e.prototype.patchStrengthenOneKey=function(t){for(var e=BagSys.ins().equipDatas,i=0;i<e.length;i++){var n=e[i];n.setStrengthenLevel(t.readShort())}RpFun.updateForgeRedPoint(219)},e.prototype.patchActLiuGuang=function(){},e.prototype.sendAppend=function(t,e){void 0===e&&(e=-1);var i=this.getBytes(2);i.writeByte(t),i.writeByte(e),this.send(i)},e.prototype.patchAddUpdate=function(t){for(var e=t.readByte(),i=0;e>i;i++){var n=t.readByte(),a=t.readShort();BagSys.ins().getEquipByIndex(n).addlv=a}RpFun.updateForgeRedPoint(222),RpFun.showForgeAddYuanShiRedPoint()},e.prototype.sendAppendYuanShi=function(t){var e=this.getBytes(5);e.writeByte(t),this.send(e)},e.prototype.patchAppendYuanShi=function(t){var e=t.readByte(),i=t.readShort(),n=this.addYuanShiData.getDataById(e);n&&n.setUseCount(i),RpFun.showForgeAddYuanShiRedPoint()},e.prototype.patchAddData=function(t){for(var i=t.readByte(),n=BagSys.ins().equipDatas,a=0;i>a;a++){var o=n[a];o.setAddLevel(t.readShort())}for(var s=e.ins().addYuanShiData.addYuanShiItemDatas,r=t.readByte(),a=0;r>a;a++){var u=t.readShort(),h=s[a];h&&h.setUseCount(u)}RpFun.updateForgeRedPoint(222),RpFun.showForgeAddYuanShiRedPoint()},e.prototype.sendFosterUp=function(t,e,i){var n=this.getBytes(3);n.writeShort(t),n.writeShort(e),n.writeShort(i),this.send(n)},e.prototype.patchFosterUp=function(t){for(var e=t.readByte(),i=t.readByte(),n=BagSys.ins().getEquipByIndex(e),a=0;i>a;a++){var o=t.readShort(),s=t.readInt();n.setePicAttr(o,s)}RpFun.updateForgeRedPoint(223)},e.prototype.patchFosteData=function(t){for(var e=t.readByte(),i=0;e>i;i++)for(var n=BagSys.ins().getEquipByIndex(i),a=t.readByte(),o=0;a>o;o++){var s=t.readShort(),r=t.readInt();n.setePicAttr(s,r)}RpFun.updateForgeRedPoint(223)},e.prototype.patchSuitDataInit=function(t){var e=t.readByte();this.suitDatas.length=0;for(var i=0;e>i;i++){var n=new SuitData;n.parser(t),this.suitDatas.push(n)}},e.prototype.sendSuitUp=function(t,e){var i=this.getBytes(12);i.writeShort(t),i.writeByte(e),this.send(i)},e.prototype.patchSuitUp=function(t){var e=t.readShort(),i=t.readByte(),n=t.readByte(),a=this.getSuitDataById(e);a?a.setPosValue(i,n):console.log("52-12 id不存在:"+e);var o=a.getPosData(i);return RpFun.showSuitSingleRp(o),o},e.prototype.getSuitDataById=function(t){for(var e=0,i=this.suitDatas;e<i.length;e++){var n=i[e];if(n.id==t)return n}console.log("getSuitDataById:id不存在"+t)},e.prototype.getSuitDatasByXLId=function(t){for(var i=[],n=Cfg.getConfig(SuitXLConfig,t),a=0,o=n.ids;a<o.length;a++){var s=o[a];i.push(e.ins().getSuitDataById(s))}return i},e.prototype.patchGemData=function(t){this.gemEquipData.attrPlusLv=t.readShort(),this.gemEquipData.parser(t),RpFun.showGemRedPoint()},e.prototype.sendGemSet=function(t,e,i){var n=this.getBytes(22);n.writeByte(t),n.writeByte(e),n.writeInt(i),this.send(n)},e.prototype.sendGemRemove=function(t,e){var i=this.getBytes(23);i.writeByte(t),i.writeByte(e),this.send(i)},e.prototype.sendGemUp=function(t,e){var i=this.getBytes(24);i.writeByte(t),i.writeByte(e),this.send(i)},e.prototype.patchGemUp=function(t){var e=t.readByte(),i=t.readByte(),n=t.readInt();return this.getGemPosDataByData(e).setGemId(i,n),RpFun.showGemRedPoint(),[e,i]},e.prototype.sendShopGemConsume=function(t,e){var i=this.getBytes(26);i.writeByte(t),i.writeByte(e),this.send(i)},e.prototype.patchShopGemConsume=function(t){for(var i=(t.readBoolean(),t.readShort()),n=[],a=0;i>a;a++){var o=new ItemDataReward;t.readInt();o.id=t.readInt(),o.count=t.readInt(),n.push(o)}for(var s=t.readInt(),r=t.readByte(),u=t.readByte(),h=Cfg.getItemCfg(s),l=Cfg.getItemCfg(s+1),p=""+StrUtil.addColor(h.getName(),GConst.PZColor[h.quality])+Lang.forge_str54+StrUtil.addColor(l.getName(),GConst.PZColor[h.quality])+"\n\n"+Lang.forge_str55,c="",a=0;a<n.length;a++){var d=n[a],g=Cfg.getItemCfg(d.id);c+="\n"+StrUtil.addColor(g.getName(),GConst.PZColor[h.quality])+" x"+d.count+" "}p+=c;var f=new PopupData(p);f.setFunction(this,function(){e.ins().sendGemUp(r,u),closeWin(GemTipsWin)}),openWin(CommonCheckTipsWin,f,"gemup")},e.prototype.sendGemOneKeyUp=function(){var t=this.getBytes(28);this.send(t)},e.prototype.patchGemOneKeyUp=function(t){this.gemEquipData.parserOneKeyUpdate(t),RpFun.showGemRedPoint()},e.prototype.sendGemOneKeyXQ=function(){var t=this.getBytes(29);this.send(t)},e.prototype.patchGemOneKeyXQ=function(t){this.gemEquipData.parserOneKeyUpdate(t),RpFun.showGemRedPoint()},e.prototype.sendGemUpRank=function(){var t=this.getBytes(27);this.send(t)},e.prototype.patchGemUpRank=function(t){var e=t.readShort();this.gemEquipData.attrPlusLv=e,RpFun.showGemRedPoint()},e.prototype.patchPurifyUpdate=function(t){for(var e=this.purifyData,i=t.readByte(),n=0;i>n;n++){var a=t.readByte(),o=t.readShort(),s=e.getPurifyDataByPos(a);s.level=o,BagSys.ins().getEquipByIndex(a).setJingLian(o)}this.purifyDaRenData.level=t.readShort(),this.purifyDaShiData.level=t.readShort(),RpFun.showPurifyRedPoin(PCode.UPD),RpFun.showPurifyDaShiRedPoint()},e.prototype.sendPurifyUpLvel=function(t,e){var i=this.getBytes(62);i.writeByte(t),i.writeByte(e),this.send(i)},e.prototype.patchPurifyUpLvel=function(t){var e=t.readBoolean(),i=t.readByte(),n=t.readShort(),a=this.purifyData.getPurifyDataByPos(i);a.level=n,BagSys.ins().getEquipByIndex(i).setJingLian(n),RpFun.showPurifyRedPoin(PCode.UPD);var o=e?"purify_success":"purify_failure";return GFunc.playMovieOnLayer(o),RpFun.showPurifyDaShiRedPoint(),[e,a]},e.prototype.sendPurifyUpRank=function(t){var e=this.getBytes(63);e.writeByte(t),this.send(e)},e.prototype.patchPurifyUpRank=function(t){var e=t.readByte(),i=t.readShort();1==e?this.purifyDaRenData.level=i:this.purifyDaShiData.level=i,RpFun.showPurifyDaShiRedPoint()},e.prototype.patchEnchantData=function(t){this.fumoData.parser(t),RpFun.showEnchantRedPoint(PCode.UPD),RpFun.showEnchantSplitRedPoint(PCode.UPD)},e.prototype.sendEnchantUp=function(t,e){var i=this.getBytes(32);i.writeByte(t),i.writeByte(e),this.send(i)},e.prototype.patchEnchantUp=function(t){var e=t.readBoolean(),i=t.readByte(),n=t.readByte(),a=t.readShort();this.fumoData.getPosDataByPos(i).setLv(n,a),this.patchFumoUpdate(e,i,n,a),RpFun.showEnchantRedPoint(PCode.UPD)},e.prototype.patchFumoUpdate=function(t,e,i,n){return[t,e,i,n]},e.prototype.sendEnchantSplit=function(t,e){var i=this.getBytes(33);i.writeInt(t),i.writeInt(e),this.send(i)},e.prototype.getEnchantPosDataByData=function(t){return this.fumoData.getPosDataByPos(t)},e.prototype.getEnchantSplitItem=function(){for(var t=[],e=0;e<this.fumoData.fumoPosDatas.length;e++)for(var i=this.fumoData.getPosDataByIndex(e).fumoPointDatas,n=0;n<i.length;n++)if(!i[n].isAct()){var a=i[n].getConfig().items[0];t[a.id]?t[a.id]=t[a.id]+a.count:t[a.id]=a.count}for(var o=[],s=BagSys.ins().getItemByType(ItemType.fumosuipian),r=0;r<s.length;r++){var u=s[r];if(t[u.id]){var h=this.addArray(o,u);h.count=h.count-t[u.id]}else this.addArray(o,u)}for(var r=o.length-1;r>=0;r--)o[r].count<=0&&o.splice(r,1);return o},e.prototype.addArray=function(t,e){var i=new ItemDataReward;i.id=e.id,i.count=e.count;for(var n=0;n<t.length;n++)if(t[n].id==e.id)return t[n].count=e.count,t[n];return t.push(i),i},e.prototype.patchUpdateSuitData=function(t){this.shenPanTaoZhuangData.parser(t),RpFun.showSuitSingle()},e.prototype.sendShenPanTaoZhuangUp=function(t){var e=this.getBytes(136);e.writeByte(t),this.send(e)},e.prototype.patchShenPanTaoZhuangUp=function(t){var e=t.readByte(),i=t.readByte();this.shenPanTaoZhuangData.getPosData(e).leve=i,RpFun.showSuitSingle()},e.prototype.getGemPosDataByData=function(t){return this.gemEquipData.getGemPosDataByPos(t)},e.prototype.isPointhaveCanDressGem=function(t){var e=t.getGemIdsByPos(),i=BagSys.ins().isHaveItemsById(e);return 0==t.gemId&&i},e.prototype.isPointhaveCanReplaceGem=function(t){var e=t.getGemIdsByPos(),i=BagSys.ins().isHaveItemsById(e);return i},e.prototype.oneKeyDress=function(){var t=!0,i=this.gemEquipData,n=BagSys.ins().getItemByType(ItemType.gem).concat();SortUtil.sortOn(n,["rank"],[SortType.down]);for(var a=[],o=0;o<i.gemPosDatas.length;o++)for(var s=i.getGemPosDataByPos(o),r=0;r<s.gemData.length;r++){var u=s.gemData[r];if(0==u.gemId&&BagSys.ins().getEquipByIndex(u.pos).hasEquipOn())for(var h=u.getGemIdsByPos(),l=0;l<n.length;l++){var p=n[l].id;if(null==a[p]&&(a[p]=n[l].count),h.indexOf(p)>=0&&a[p]>0){this.getGemPosDataByData(u.pos).setGemId(u.index,p),e.ins().sendGemSet(u.pos,u.index,p),a[p]--,t=!1;break}}}return t&&(showtipsFail(Lang.forge_str56),GFunc.getGainItemWayConfig(Cfg.getConfig(EnumConfig).ITEM_GEM_ID).length>0&&TipsSys.ins().setBuyGoodsWarn(Cfg.getConfig(EnumConfig).ITEM_GEM_ID)),t},e.prototype.canTihuanGem=function(t,e){for(var i,n=this.gemEquipData,a=Cfg.getConfig(StoneConfig,t),o=9999,s=0;s<n.gemPosDatas.length;s++)for(var r=n.getGemPosDataByPos(s),u=0;u<r.gemData.length;u++){var h=r.gemData[u];if(h.stoneConfig&&h.stoneConfig.level<h.stoneConfig.maxlevel&&a.level>h.stoneConfig.level&&(null==e[t]&&(e[t]=0),GFunc.getItemCount(t)>=e[t]+1&&h.getGemIdsByPos().indexOf(t)>=0&&h.gemId>0)){if(1==h.stoneConfig.level)return i=h;h.stoneConfig.level<o&&(o=h.stoneConfig.level,i=h)}}return i},e.prototype.gemIsfull=function(){for(var t=!0,e=this.gemEquipData,i=0;i<e.gemPosDatas.length;i++)for(var n=e.getGemPosDataByPos(i),a=0;a<n.gemData.length;a++){var o=n.gemData[a];if(0==o.gemId){t=!1;break}}return t},e.prototype.oneKeyRemove=function(){for(var t=this.gemEquipData,i=0;i<t.gemPosDatas.length;i++)for(var n=t.getGemPosDataByPos(i),a=0;a<n.gemData.length;a++){var o=n.gemData[a];0!=o.gemId&&e.ins().sendGemRemove(o.pos,o.index)}},e.prototype.isPointhaveCanUpGem=function(t){var e=!1;if(0!=t.gemId){var i=t.stoneConfig;if(i.level<i.maxlevel){var n=Cfg.getConfig(StoneLevelConfig,t.gemId+1),a=Number(n.id.toString().substring(3,n.id.toString().length-2)),o=Number(n.id.toString().substring(4,n.id.toString().length));e=this.getGemUpConsume(a,o)>=n.onestone-n.onestone/2}}return e},e.prototype.isPointhaveHighReplace=function(t){var e=!1;if(0!=t.gemId)for(var i=t.stoneConfig,n=BagSys.ins().getItemsById(t.getGemIdsByPos()),a=0;a<n.length;a++){var o=Cfg.getConfig(StoneConfig,n[a].id);if(o.level>i.level){e=!0;break}}return e},e.prototype.getGemSumLevel=function(){var t=this.gemEquipData.getSumLevel();return t},e.prototype.getGemSumPower=function(){var t=this.gemEquipData.getSumPower();return Math.ceil(t)},e.prototype.getGemSumAttr=function(){var t=[];t.push(new AttrData(4,0)),t.push(new AttrData(1,0)),t.push(new AttrData(26,0)),t.push(new AttrData(27,0)),t.push(new AttrData(32,0));for(var e=this.gemEquipData,i=0;i<e.gemPosDatas.length;i++)for(var n=e.gemPosDatas[i],a=0;a<n.gemData.length;a++){var o=n.gemData[a];if(0!=o.gemId){var s=o.stoneConfig,r=s.attr[0];this.setGemAttr(t,r)}}return t},e.prototype.setGemAttr=function(t,e){for(var i,n=0;n<t.length;n++){var a=t[n];a.type==e.type&&(i=a)}i?i.value+=e.value:(i=new AttrData,i.type=e.type,i.value=e.value,t.push(i))},e.prototype.zhuanhuangbaoshi=function(t){if(void 0===t&&(t=null),!t||t.cfg.type==ItemType.gem){this.oneLevelGemCount=[[],[],[],[],[],[]];for(var e=BagSys.ins().getItemByType(ItemType.gem),i=0;i<e.length;i++){var n=e[i],a=Cfg.getConfig(StoneConfig,n.id),o=a.type,s=a.level;if(this.oneLevelGemCount[o][s]||(this.oneLevelGemCount[o][s]=0),1==a.level)this.oneLevelGemCount[o][s]+=n.count;else{var r=Cfg.getConfig(StoneLevelConfig,n.id);this.oneLevelGemCount[o][s]+=n.count*r.onestone}}}},e.prototype.getGemUpConsume=function(t,e){for(var i=0,n=1;e>n;n++)this.oneLevelGemCount&&this.oneLevelGemCount[t][n]&&(i+=this.oneLevelGemCount[t][n]);return i},e.prototype.getFosterIsMax=function(t,e){for(var i=!0,n=Cfg.getCultureAttrByLv(t.cfg.subType,e),a=0;a<n.limit.length;a++)t.epicAttr[a].value<n.limit[a]&&(i=!1);return i},e}(BaseSys);__reflect(ForgeSys.prototype,"ForgeSys");var System;!function(t){t.forgeSys=ForgeSys.ins.bind(ForgeSys)}(System||(System={})),window.ForgeSys=ForgeSys;var StrengthenDaShiData=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return __extends(e,t),e.prototype.isMaxRank=function(){return this.level>=Cfg.getMaxConfig(EnhanceAddDaRenConfig).stage},e.prototype.getDaBiaoCount=function(){return Cfg.getConfig(EquipConstConfig).dashicount},e.prototype.getConfig=function(t){return Cfg.getEnhanceAddDaRenConfigById(t)},e}(StrengthenDaRenData);__reflect(StrengthenDaShiData.prototype,"StrengthenDaShiData");var BagVipConfig=function(){function t(){}return t}();__reflect(BagVipConfig.prototype,"BagVipConfig");var BaseDailyFubenConfig=function(){function t(){}return t}();__reflect(BaseDailyFubenConfig.prototype,"BaseDailyFubenConfig");var ForgeBoostDaShiWin=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return __extends(e,t),e.prototype.initUI=function(){t.prototype.initUI.call(this),this.imgTitle.source="qianghua_zycs_qhds"},e.prototype.getConfig=function(t){return Cfg.getEnhanceAddDaShiConfigById(t)},e.prototype.type=function(){return 2},e}(ForgeBoostDaRenWin);__reflect(ForgeBoostDaShiWin.prototype,"ForgeBoostDaShiWin"),window.ForgeBoostDaShiWin=ForgeBoostDaShiWin;var BlockNoticeConfig=function(){function t(){}return t}();__reflect(BlockNoticeConfig.prototype,"BlockNoticeConfig");var ForgeBoostPanelItem=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return __extends(e,t),e.prototype.updateRedPoint=function(){var t=this.data;this.redPoint.visible=RpSys.ins().getData(ForgeWin,ForgeBoostPanel,t.equipPos)},e}(ForgeItem);__reflect(ForgeBoostPanelItem.prototype,"ForgeBoostPanelItem"),window.ForgeBoostPanelItem=ForgeBoostPanelItem;var BodyAppearanceConfig=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return __extends(e,t),e}(AppearanceConfig);__reflect(BodyAppearanceConfig.prototype,"BodyAppearanceConfig");var ForgeFosterPanelItem=function(t){function e(){var e=t.call(this)||this;return e.bitRank.visible=!0,e}return __extends(e,t),e}(ForgeItem);__reflect(ForgeFosterPanelItem.prototype,"ForgeFosterPanelItem"),window.ForgeFosterPanelItem=ForgeFosterPanelItem;var BosshomeCommonConfig=function(){function t(){this.vip=0}return t}();__reflect(BosshomeCommonConfig.prototype,"BosshomeCommonConfig");var BosshomeFubenConfig=function(){function t(){}return t.fbId="fbId",t}();__reflect(BosshomeFubenConfig.prototype,"BosshomeFubenConfig");var ForgeAddItem=function(t){function e(){var e=t.call(this)||this;return e.setSkinName(),e}return __extends(e,t),e.prototype.setSkinName=function(){this.skinName="ForgeAddItemEUI",this.mc=new MC,this.groupMc.addChild(this.mc)},e.prototype.dataChanged=function(){var t=this.data;t.hasEquipOn()?(this.imgEquipBg.source=ResMgr.getEquipQualityBg(t.cfg.quality),this.imgIcon.source=ResMgr.getItemIcon(t.cfg.getIcon(),IconType.IT_80x80),t.cfg.quality>=QualityType.Green?this.mc.playFile(ResMgr.getEquipEffResource(t.cfg.quality),-1):(this.mc.visible=!1,this.mc.stop())):(this.imgEquipBg.source=ResMgr.getEquipDefaultIcon(t.equipPos),this.imgIcon.source="",this.mc.visible=!1,this.mc.stop()),this.imgLock.visible=!t.hasEquipOn(),this.imgLock.source=GFunc.isRing(t.equipPos)?"public_zycs_jh1":"qianghua_zycs_suo",this.updateRedPoint()},e.prototype.setlv=function(t){t>=1?(this.groupLevel.visible=!0,this.bitLevel.visible=!0,this.bitLevel.text=t.toString()):(this.groupLevel.visible=!1,this.bitLevel.visible=!1)},e.prototype.setSelectBG=function(t){this.imgSelect.visible=t},e.prototype.updateRedPoint=function(){var t=this.data;this.redPoint.visible=RpSys.ins().getData(ForgeWin,ForgeAddLvevlPanel,e,t.equipPos)},e}(BaseItemRender);__reflect(ForgeAddItem.prototype,"ForgeAddItem"),window.ForgeAddItem=ForgeAddItem;var AStar=function(){function t(){this.mapCells=[],this.markTag=0}return t.prototype.setData=function(t){this.col=t.col,this.row=t.row;for(var e=this.col*this.row,i=this.mapCells.length,n=Math.max(i,e),a=0;n>a;a++){var o=void 0;o=i>a?this.mapCells[a]:this.mapCells[a]=new ASMapCell,o.X=a%this.col,o.Y=Math.floor(a/this.col),o.Prev=null,o.Next=null}this.mapCells.length=n},t.prototype.getPath=function(e,i,n,a,o){if(e==n&&i==a)return null;if(0>e||e>=this.col||0>i||i>=this.row)return void console.log("寻路的起始位置参数无效：("+e+", "+i+")");if(0>n||n>=this.col||0>a||a>=this.row)return void console.log("寻路的目的位置参数无效：("+n+", "+a+")");if(!this.mapCells[a*this.col+n])return console.log("寻路异常，无法获得路径点，请确认服务器地图与前端配置一致"),null;this.reset(e,i);var s=!1,r=e,u=i,h=this.mapCells[u*this.col+r];h.GCost=0,h.LastX=-1,h.LastY=-1,h.X=r,h.Y=u,h.MarkTag=this.markTag,h.HCost=Math.abs(n-e)+10*Math.abs(a-i);for(var l,p,c,d;;){if(r==n&&u==a){s=!0;break}for(h.State!=ASMapCell.CSCLOSE&&this.closeCell(h),l=0;8>l;++l)p=r+t.OFFSET_X[l],c=u+t.OFFSET_Y[l],0>p||p>=this.col||0>c||c>=this.row||(d=this.mapCells[c*this.col+p],o(d.X,d.Y)&&(d.MarkTag!=this.markTag||d.State==ASMapCell.CSNONE?(d.MarkTag=this.markTag,d.LastX=r,d.LastY=u,d.btDir=l,d.GCost=h.GCost+t.MOVECOST[1&l],d.HCost=Math.abs(n-p)+10*Math.abs(a-c),this.openCell(d)):d.State==ASMapCell.CSOPEN&&d.GCost>h.GCost+t.MOVECOST[1&l]&&(d.LastX=r,d.LastY=u,d.btDir=l,d.GCost=h.GCost+t.MOVECOST[1&l],this.reopenCell(d))));if(h=this.lastOpenCell,null==h)break;r=h.X,u=h.Y}if(s){for(var g=[];;)if(g.push(new AStarCell(h.X,h.Y,h.btDir)),h=this.mapCells[h.LastY*this.col+h.LastX],h.LastX<=0&&h.LastY<=0||h.MarkTag!=this.markTag)break;return g}return null},t.prototype.reset=function(t,e){var i=this.mapCells[e*this.col+e];i.LastX=0,i.LastY=0,i.HCost=0,i.GCost=0,i.FValue=0,i.State=0,i.Prev=null,i.Next=null,i.btDir=0,this.lastOpenCell=null,this.markTag=this.markTag+1},t.prototype.closeCell=function(t){t.State==ASMapCell.CSOPEN&&(t.Prev&&(t.Prev.Next=t.Next),t.Next&&(t.Next.Prev=t.Prev),t==this.lastOpenCell&&(this.lastOpenCell=t.Prev)),t.State=ASMapCell.CSCLOSE},t.prototype.openCell=function(t){t.State=ASMapCell.CSOPEN;var e=t.HCost+t.GCost;t.FValue=e;var i=this.lastOpenCell;if(i){for(;i.FValue<e;){if(null==i.Prev)return i.Prev=t,t.Prev=null,void(t.Next=i);i=i.Prev}t.Prev=i,i.Next?(t.Next=i.Next,i.Next.Prev=t,i.Next=t):(t.Next=null,i.Next=t,this.lastOpenCell=t)}else this.lastOpenCell=t,t.Prev=null,t.Next=null},t.prototype.reopenCell=function(t){var e=t.HCost+t.GCost;t.FValue=e;var i=t.Next;if(i&&i.FValue>e){do i=i.Next;while(i&&i.FValue>e);t.Prev&&(t.Prev.Next=t.Next),t.Next&&(t.Next.Prev=t.Prev),i?(t.Next=i,i.Prev?(t.Prev=i.Prev,i.Prev.Next=t):t.Prev=null,i.Prev=t):(t.Prev=this.lastOpenCell,t.Next=null,this.lastOpenCell.Next=t,this.lastOpenCell=t)}},t.MOVECOST=[10,14],t.OFFSET_X=[0,1,1,1,0,-1,-1,-1],t.OFFSET_Y=[-1,-1,0,1,1,1,0,-1],t.OFFSET_X2=[0,1,2,2,2,2,2,1,0,-1,-2,-2,-2,-2,-2,-1],t.OFFSET_Y2=[-2,-2,-2,-1,0,1,2,2,2,2,2,1,0,-1,-2,-2],t}();__reflect(AStar.prototype,"AStar");var ASMapCell=function(){function t(){}return t.CSNONE=0,t.CSOPEN=1,t.CSCLOSE=2,t}();__reflect(ASMapCell.prototype,"ASMapCell");var ForgeAddPanelYuanShiItem=function(t){function e(){var e=t.call(this)||this;return e.setSkinName(),e}return __extends(e,t),e.prototype.setSkinName=function(){this.skinName="ForgeAddPanelYuanShiItemEUI"},e.prototype.dataChanged=function(){var t=this.data;this.imgBg.source="zhuijia_zycs_k"+((t.id-1)%3+1);Cfg.getItemCfg(t.config.itemid);this.currentState=t.isOpen?"unlock":"lock",this.lbCount.text=t.useCount.toString(),this.imgIcon.source="zhuijia_zycs_ys"+t.id,this.filters=t.isOpen?[]:DisUtil.grayFilter(),this.updateRedPoint()},e.prototype.updateRedPoint=function(){this.redPoint.visible=RpSys.ins().getData(ForgeWin,ForgeAddLvevlPanel,e,ForgeAddYuanShiWin,this.data.id)},e}(BaseItemRender);__reflect(ForgeAddPanelYuanShiItem.prototype,"ForgeAddPanelYuanShiItem"),window.ForgeAddPanelYuanShiItem=ForgeAddPanelYuanShiItem;var ForgeAddYuanShiWin=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return __extends(e,t),e.prototype.initUI=function(){this.skinName="ForgeAddYuanShiWinEUI",this.setSkinPart("itemTarget",new ItemBase),this.attrs.itemRenderer=ComAttrItem,this.attrs.dataProvider=this.attrData=new eui.ArrayCollection,this.addBg(),t.prototype.initUI.call(this),this.layer=LayerMgr.Popup},e.prototype.open=function(e){t.prototype.open.call(this),this.data=e,this.addClickE(this.btnOneKey,this.onClick),this.addLsn(RpSys.ins().patchRp,this.updateRp),this.addLsn(ForgeSys.ins().patchAppendYuanShi,this.updatePanel),this.updatePanel(),this.updateRp()},e.prototype.updateRp=function(t){void 0===t&&(t=null),(!t||t.check(e))&&(this.btnOneKey.redPoint.visible=RpSys.ins().getData(ForgeWin,ForgeAddLvevlPanel,ForgeAddPanelYuanShiItem,e,this.data.id))},e.prototype.updatePanel=function(){var t=GFunc.creatItemDataById(this.data.config.itemid);this.itemTarget.data=t,this.lbName.text=t.cfg.getName(),this.lbName.textColor=GConst.PZColor[t.cfg.quality];var e=this.data.useCount<this.data.useMaxCount?12704255:13967392;this.lbUseCount.textFlow=addColorTF("已铸炼："+addColor(this.data.useCount+"/"+this.data.useMaxCount,e));var i=BagSys.ins().getItemCount(this.data.config.itemid);this.lbHaveCount.textFlow=addColorTF("拥有数量："+addColor(i,i>0?5949490:15733780));var n=AttrData.attrMultiple(this.data.config.attr,this.data.useCount),a=AttrData.attrMultiple(this.data.config.attr,this.data.useCount+1);this.attrData.source=AttrData.getAttrDatas(n,a,this.data.isMax),this.currentState=this.data.isMax?"max":"normal"},e.prototype.onClick=function(t){switch(t.currentTarget){case this.btnOneKey:var e=new ItemDataReward;e.id=this.data.config.itemid,e.count=1,GFunc.checkConsumeEnough(e)&&ForgeSys.ins().sendAppendYuanShi(this.data.id)}},e}(BaseWinSingle);__reflect(ForgeAddYuanShiWin.prototype,"ForgeAddYuanShiWin"),window.ForgeAddYuanShiWin=ForgeAddYuanShiWin;var AddYuanShiData=function(){function t(){this.addYuanShiItemDatas=[]}return t.prototype.iniData=function(){for(var t=Cfg.getConfigs(AppendYuanShiConfig),e=0;e<t.length;e++){var i=t[e],n=new AddYuanShiItemData;n.id=i.id,this.addYuanShiItemDatas.push(n)}},t.prototype.getDataById=function(t){return this.addYuanShiItemDatas[t-1]},Object.defineProperty(t.prototype,"poewr",{get:function(){for(var t=0,e=0;e<this.addYuanShiItemDatas.length;e++){var i=this.addYuanShiItemDatas[e],n=AttrData.attrMultiple(i.config.attr,i.useCount);t+=GFunc.getPower(n)}return t},enumerable:!0,configurable:!0}),t}();__reflect(AddYuanShiData.prototype,"AddYuanShiData");var AddYuanShiItemData=function(){function t(){this.id=1,this.useCount=0}return Object.defineProperty(t.prototype,"useMaxCount",{get:function(){var t=this.getCurYuanShiUseData();return t?t.useCount:0},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"isOpen",{get:function(){var t=this.getCurYuanShiUseData();return null!=t},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"isMax",{get:function(){return this.useCount==this.useMaxCount},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"config",{get:function(){return this._config||(this._config=Cfg.getConfig(AppendYuanShiConfig,this.id))},enumerable:!0,configurable:!0}),t.prototype.setUseCount=function(t){this.useCount=t},t.prototype.getCurYuanShiUseData=function(){for(var t,e=this.config.condition,i=0;i<e.length;i++){var n=e[i],a=new YuanShiUseData(n);EquipSys.ins().getEquipAddLevelCouontByLevel(a.equipLevel)>=a.equipCount&&(t=a)}return t},t.prototype.getOpenData=function(){var t=new YuanShiUseData(this.config.condition[0]);return t},t}();__reflect(AddYuanShiItemData.prototype,"AddYuanShiItemData");var YuanShiUseData=function(){function t(t){this.data=t}return Object.defineProperty(t.prototype,"equipCount",{get:function(){return this.data[0]},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"equipLevel",{get:function(){return this.data[1]},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"useCount",{get:function(){return this.data[2]},enumerable:!0,configurable:!0}),t}();__reflect(YuanShiUseData.prototype,"YuanShiUseData");var GemAttrPlusWin=function(t){function e(){var e=t.call(this)||this;return e.currRoleId=0,e}return __extends(e,t),e.prototype.initUI=function(){this.skinName="GemAttrPlusWinEUI",this.addBg(),this.levelMaxTxt.visible=!1;var e=7;this.labelLvCur.lineSpacing=this.labelLvCur_1.lineSpacing=this.labelLvNext.lineSpacing=this.labelLvNext_1.lineSpacing=e,t.prototype.initUI.call(this),this.layer=LayerMgr.Popup},e.prototype.open=function(e){t.prototype.open.call(this),this.gemEquipData=e},e}(BaseWinSingle);__reflect(GemAttrPlusWin.prototype,"GemAttrPlusWin"),window.GemAttrPlusWin=GemAttrPlusWin;var GemDescItem=function(t){function e(){var e=t.call(this)||this;return e.setSkinName(),e}return __extends(e,t),e.prototype.setSkinName=function(){this.skinName="GemDescItemEUI"},e.prototype.dataChanged=function(){var t=this.data;if(0!=t.gemId){var e=t.stoneConfig,i=Cfg.getItemCfg(t.gemId),n=AttrData.getAttrName(e.attr[0].type)+"+"+AttrData.getAttrValue(e.attr[0]);this.lbDesc.textFlow=addColorTF(StrUtil.addColor(i.getName()+"  "+n,GConst.PZColor[i.quality])),this.imgIcon.source=""+Cfg.getItemCfg(t.gemId).getIcon()}else this.lbDesc.textFlow=addColorTF(StrUtil.addColor(Lang.forge_str19,13486270)),this.imgIcon.source="bs_zycs_lx"},e}(BaseItemRender);__reflect(GemDescItem.prototype,"GemDescItem"),window.GemDescItem=GemDescItem;var BraveCommonConfig=function(){function t(){}return t}();__reflect(BraveCommonConfig.prototype,"BraveCommonConfig");var GemEquipItem1=function(t){function e(){var e=t.call(this)||this;return e.status1(),e}return __extends(e,t),e.prototype.updateRedPoint=function(){},e.prototype.status1=function(){this.imgGem1.visible=!1,this.imgGem1.visible=!1,this.imgGem2.visible=!1,this.imgGem3.visible=!1,this.imgGemBg.visible=!1},e}(GemEquipItem);__reflect(GemEquipItem1.prototype,"GemEquipItem1"),window.GemEquipItem1=GemEquipItem1;var GemItem=function(t){function e(){var e=t.call(this)||this;return e.lv=0,e.setSkinName(),e.clear(),e}return __extends(e,t),e.prototype.setSkinName=function(){this.skinName="GemItemEUI",this.setSkinPart("itemIcon",new ItemIcon)},e.prototype.dataChanged=function(){this.clear();var t=this.data,e=t.gemId;if(0!=e){var i=t.stoneConfig,n=Cfg.getItemCfg(e);this.imgIcon.source=ResMgr.getItemIcon(n.getIcon(),IconType.IT_80x80),this.setlv(i.level),this.updateState(i.level)}else this.setlv(0),this.updateState(0),this.clear();
this.updateRedPoint(),this.validateNow()},e.prototype.updateRedPoint=function(){var t=this.data,e=RpSys.ins().getData(ForgeWin,GemPanel,"onekey",t.pos,t.index);this.setRedPoint(e),this.lbDesc.visible=RpSys.ins().getData(ForgeWin,GemPanel,"onekey",t.pos,t.index,"up")},e.prototype.setRedPoint=function(t){this.redPoint.visible=t},e.prototype.setlv=function(t,e){void 0===e&&(e="+"),this.lv=t,0==t?this.bitLv.text="":this.bitLv.text="l"+t,this.updateState(t)},e.prototype.updateState=function(t){0==t?this.currentState="unAct":this.currentState="act"},e.prototype.clear=function(){this.imgIcon.source="bs_zycs_jh"},e}(BaseItemRender);__reflect(GemItem.prototype,"GemItem"),window.GemItem=GemItem;var BraveFubenConfig=function(){function t(){}return t.fbId="fbId",t}();__reflect(BraveFubenConfig.prototype,"BraveFubenConfig");var GemSelectItem=function(t){function e(){var e=t.call(this)||this;return e.skinName="GemSelectItemEUI",e.setSkinPart("itemIcon",new ItemBaseReward),e.addClickE(e.upgradeBtn,e.onClick),e}return __extends(e,t),e.ItemGemClick=function(t){return t},e.prototype.onClick=function(t){e.ItemGemClick(this.data)},e.prototype.dataChanged=function(){var t,e=new ItemDataReward;if(this.data instanceof GemPointData){var i=this.data;t=Cfg.getItemCfg(i.gemId),this.upgradeBtn.label="卸下",e.count=0,this.imgyjb.visible=!0}else{var n=this.data;t=n.cfg,this.upgradeBtn.label="镶嵌",e.count=BagSys.ins().getItemById(t.id).count,this.imgyjb.visible=!1}e.id=t.id,this.itemIcon.data=e,this.itemIcon.data=e;var a=Cfg.getConfig(StoneConfig,t.id);this.levelTxt.text=""+a.level,this.labelName.text=t.getName(),this.labelName.textColor=GConst.PZColor[t.quality];var o=AttrData.getFm(5949490,5949490," ","+");this.attrTxt.textFlow=addColorTF(AttrData.parse(a.attr,{fm:o}).join("\n"))},e.prototype.getPeiDaiBtn=function(){return this.upgradeBtn},__decorate([post()],e,"ItemGemClick",null),e}(BaseItemRender);__reflect(GemSelectItem.prototype,"GemSelectItem"),window.GemSelectItem=GemSelectItem;var GemSelectWin=function(t){function e(){var e=t.call(this)||this;return e.skinName="GemSelectWinEUI",e}return __extends(e,t),e.prototype.initUI=function(){t.prototype.initUI.call(this),this.layer=LayerMgr.Popup,this.addBg(),this.list.itemRenderer=GemSelectItem},e.prototype.open=function(e){t.prototype.open.call(this),this.gemPointData=e,this.setListData(),this.addLsn(GemSelectItem.ItemGemClick,this.onClick)},e.prototype.setListData=function(){var t=this.gemPointData.getGemIdsByPos(),e=BagSys.ins().getItemsById(t);SortUtil.sortOn(e,["rank"],[SortType.down]),0!=this.gemPointData.gemId&&e.unshift(this.gemPointData),this.list.dataProvider=new eui.ArrayCollection(e)},e.prototype.onClick=function(t){t instanceof ItemData?ForgeSys.ins().sendGemSet(this.gemPointData.pos,this.gemPointData.index,t.id):t instanceof GemPointData&&ForgeSys.ins().sendGemRemove(this.gemPointData.pos,this.gemPointData.index),closeWin(e)},e}(BaseWinSingle);__reflect(GemSelectWin.prototype,"GemSelectWin"),window.GemSelectWin=GemSelectWin;var GemTipsWin=function(t){function e(){return t.call(this)||this}return __extends(e,t),e.prototype.initUI=function(){this.skinName="GemTipsEUI",t.prototype.initUI.call(this),this.layer=LayerMgr.Popup},e.prototype.open=function(e){t.prototype.open.call(this),this.gemPointData=e,this.addClickEndE(this.background,this.otherClose),this.addClickE(this.btnRemove,this.onClick),this.addClickE(this.upreplace,this.onClick),this.addClickE(this.upUp,this.onClick),this.setData()},e.prototype.onClick=function(t){switch(t.currentTarget){case this.btnRemove:ForgeSys.ins().sendGemRemove(this.gemPointData.pos,this.gemPointData.index),closeWin(this);break;case this.upreplace:openWin(GemSelectWin,this.gemPointData),closeWin(this);break;case this.upUp:ForgeSys.ins().sendShopGemConsume(this.gemPointData.pos,this.gemPointData.index)}},e.prototype.setData=function(){var t=this.gemPointData.stoneConfig,e=Cfg.getItemCfg(this.gemPointData.gemId),i=GFunc.getPower(t.attr),n=e.quality;this.imgIcon.source=ResMgr.getItemIcon(e.getIcon(),IconType.IT_80x80),this.imgColor.source=ResMgr.getItemqualityResource(n);var a=StrUtil.addColor(""+e.getName(),GConst.PZColor[e.quality]);this.labelName.textFlow=addColorTF(a),this.totalPower.text=i.toFixed(0),this.LabelScore.text=""+Lang.common_str66+i,this.levelTxt.text=""+Lang.forge_str21+t.level,a=AttrData.parse(t.attr,{fm:"%k："}).join("\n"),this.labelAttr1.textFlow=addColorTF(a),a=AttrData.parse(t.attr,{fm:"%v"}).join("\n"),this.attrTxt.textFlow=addColorTF(StrUtil.addColor(" +"+a,13486270)),this.lbDesc.textFlow=StrUtil.toTF(e.getDesc()),ForgeSys.ins().isPointhaveCanReplaceGem(this.gemPointData)?this.upreplace.redPoint.visible=RpSys.ins().getData(ForgeWin,GemPanel,"onekey",this.gemPointData.pos,this.gemPointData.index,"tihuan"):this.groupBtn.removeChild(this.upreplace),RpSys.ins().getData(ForgeWin,GemPanel,"onekey",this.gemPointData.pos,this.gemPointData.index,"up")?this.upUp.redPoint.visible=!0:this.groupBtn.removeChild(this.upUp)},e.prototype.updateLayoutPanel=function(){var t=this.lbDesc.height;this.group.height=380+t},e.prototype.otherClose=function(t){closeWin(this)},e.istishi=!0,e}(BaseWinSingle);__reflect(GemTipsWin.prototype,"GemTipsWin"),window.GemTipsWin=GemTipsWin;var GemUpRankWin=function(t){function e(){return t.call(this)||this}return __extends(e,t),e.prototype.initUI=function(){this.skinName="XingHunAttrWinEUI",this.imgTitle.source="bs_zycs_bsds",this.addBg(),t.prototype.initUI.call(this),this.layer=LayerMgr.Popup},e.prototype.open=function(e){t.prototype.open.call(this),this.addClickE(this.btnUp,this.onClick),this.addLsn(ForgeSys.ins().patchGemUpRank,this.update),this.addLsn(RpSys.ins().patchRp,this.updateRp),this.gemEquipData=e,this.update(),this.updateRp()},e.prototype.updateRp=function(t){void 0===t&&(t=null),(!t||t.check(e))&&(this.btnUp.redPoint.visible=RpSys.ins().getData(ForgeWin,GemPanel,e))},e.prototype.update=function(){var t=this.gemEquipData;this.totalPower.text=t.genRankAttrPower().toFixed(0);var e=t.getSumLevel(),i=Cfg.getStoneAddConfigByid(t.attrPlusLv),n=Cfg.getStoneAddConfigByid(t.noActRank()?0:t.attrPlusLv-1),a="灵石攻击"+addColor("+"+i.atkper/100+"%",15794098)+"\n灵石生命"+addColor("+"+i.hpper/100+"%",15794098);this.lbCurAttr.textFlow=t.noActRank()?addColorTF(Lang.xh_str9,15129784):addColorTF(a);var o=n.needstar,s=t.canRank(),r=t.attrPlusLv>=n.stage,u=r?addColor(Lang.common_str40,15794098):addColor("("+e+"/"+o+")",s?9094450:15733780);if(this.lbCurLevel.textFlow=t.noActRank()?addColorTF(Lang.xh_str4,15129784):addColorTF("当前阶段 灵石总等级达到"+o+"级"+u),!t.isMaxRank()){var h=Cfg.getStoneAddConfigByid(t.attrPlusLv+1),l=Cfg.getStoneAddConfigByid(t.noActRank()?0:t.attrPlusLv),p="灵石攻击"+addColor("+"+h.atkper/100+"%",12704255)+"\n灵石生命"+addColor("+"+h.hpper/100+"%",12704255);this.lbNextAttr.textFlow=addColorTF(p);var c=l.needstar,d=e>=c,g=addColor("("+e+"/"+c+")",d?15794098:13762560);this.lbNextLevel.textFlow=addColorTF("下一阶段 灵石总等级达到"+c+"级"+g)}t.noActRank()?this.currentState=s?"canAct":"noAct":t.isMaxRank()?this.currentState="max":s?this.currentState="upRank":this.currentState="noRank"},e.prototype.onClick=function(t){switch(t.currentTarget){case this.btnUp:this.gemEquipData.canRank()&&ForgeSys.ins().sendGemUpRank()}},e}(BaseWinSingle);__reflect(GemUpRankWin.prototype,"GemUpRankWin"),window.GemUpRankWin=GemUpRankWin;var GemEquipData=function(){function t(){this.gemPosDatas=[],this.attrPlusLv=0;var t=10;this.gemPosDatas.length=0;for(var e=0;t>e;e++){var i=new GemPosData;i.pos=e;var n=3;i.gemData.length=0;for(var a=0;n>a;a++){var o=new GemPointData;o.pos=i.pos,o.index=a+1,o.gemId=0,i.gemData.push(o)}this.gemPosDatas.push(i)}}return t.prototype.parser=function(t){var e=t.readByte();this.gemPosDatas.length=0;for(var i=0;e>i;i++){var n=new GemPosData;n.pos=t.readByte();var a=t.readByte();n.gemData.length=0;for(var o=0;a>o;o++){var s=new GemPointData;s.pos=n.pos,s.index=t.readByte(),s.gemId=t.readInt(),n.gemData.push(s)}this.gemPosDatas.push(n)}},t.prototype.parserOneKeyUpdate=function(t){for(var e=t.readByte(),i=0;e>i;i++)for(var n=t.readByte(),a=this.getGemPosDataByPos(n),o=t.readByte(),s=0;o>s;s++){var r=t.readByte(),u=t.readInt();a.setGemId(r,u)}},t.prototype.getGemPosDataByPos=function(t){for(var e=0;e<this.gemPosDatas.length;e++)if(this.gemPosDatas[e].pos==t)return this.gemPosDatas[e];return this.gemPosDatas[0]},t.prototype.getSumLevel=function(){for(var t=0,e=0;e<this.gemPosDatas.length;e++){var i=this.gemPosDatas[e];t+=i.getGemSumLevel()}return t},t.prototype.getSumPower=function(){for(var t=0,e=0;e<this.gemPosDatas.length;e++){var i=this.gemPosDatas[e];t+=i.getGemSumPower()}return t+=this.genRankAttrPower(),Math.ceil(t)},t.prototype.getRankAttr=function(){for(var t=[],e=Cfg.getStoneAddConfigByid(this.attrPlusLv),i=0;i<this.gemPosDatas.length;i++)for(var n=this.gemPosDatas[i],a=0;a<n.gemData.length;a++){var o=n.gemData[a];if(o.gemId>0)for(var s=0;s<o.stoneConfig.attr.length;s++){var r=o.stoneConfig.attr[s];if(r.type==AttrType.Atk){var u=new AttrData;u.type=AttrType.Atk,u.value=r.value*e.atkper/1e4,t.push(u)}if(r.type==AttrType.atHpMax){var u=new AttrData;u.type=AttrType.atHpMax,u.value=r.value*e.hpper/1e4,t.push(u)}}}return t},t.prototype.genRankAttrPower=function(){return GFunc.getPower(this.getRankAttr())},t.prototype.noActRank=function(){return 0==this.attrPlusLv},t.prototype.isMaxRank=function(){return this.attrPlusLv>=Cfg.getMaxConfig(StoneAddConfig).stage},t.prototype.canRank=function(){var t=Cfg.getStoneAddConfigByid(this.attrPlusLv);return!this.isMaxRank()&&this.getSumLevel()>=t.needstar},t}();__reflect(GemEquipData.prototype,"GemEquipData");var GemPointData=function(){function t(){this.pos=0,this.index=0,this.gemId=0}return t.prototype.getGemIdsByPos=function(){for(var t=Cfg.getConfig(StoneSlotConfig,this.pos),e=Cfg.getConfigs(StoneConfig,CondType.Equal,StoneConfig.type,t.type),i=[],n=0;n<e.length;n++)i.push(e[n].id);return i},Object.defineProperty(t.prototype,"stoneConfig",{get:function(){return this.gemId>0?(null==this._stoneConfig||this._stoneConfig.id!=this.gemId)&&(this._stoneConfig=Cfg.getConfig(StoneConfig,this.gemId)):this._stoneConfig=null,this._stoneConfig},enumerable:!0,configurable:!0}),t}();__reflect(GemPointData.prototype,"GemPointData");var GemPosData=function(){function t(){this.pos=0,this.gemData=[]}return t.prototype.setGemId=function(t,e){for(var i=0;i<this.gemData.length;i++)this.gemData[i].index==t&&(this.gemData[i].gemId=e)},t.prototype.getGemId=function(t){for(var e=0;e<this.gemData.length;e++)if(this.gemData[e].index==t)return this.gemData[e].gemId;return 0},t.prototype.getGemSumLevel=function(){for(var t=0,e=0;e<this.gemData.length;e++){var i=this.gemData[e].gemId;if(0!=i){var n=this.gemData[e].stoneConfig;t+=n.level}}return t},t.prototype.getGemSumPower=function(){for(var t=0,e=0;e<this.gemData.length;e++){var i=this.gemData[e].gemId;if(0!=i){var n=this.gemData[e].stoneConfig;t+=GFunc.getPower(n.attr)}}return Math.floor(t)},t}();__reflect(GemPosData.prototype,"GemPosData");var PurifyBarEff=function(t){function e(){var e=t.call(this)||this;return e.skinName="PurifyBarEffEUI",e.mc=new MC,e.mc.x=38,e.mc.y=-27,e.mc.touchEnabled=!1,e.groupMc1.addChild(e.mc),e.mc.playFile(getEffName("zbjl_zycs_ball1"),-1),e.mcmax=new MC,e.mcmax.x=58,e.mcmax.y=65,e.mcmax.touchEnabled=!1,e.addChild(e.mcmax),e.dimc=new MC,e.dimc.x=39,e.dimc.y=0,e.dimc.touchEnabled=!1,e.groupShuiPing.addChild(e.dimc),e.hpShape=DisUtil.drawCirByAngle(e.hpShape,38,0,360,!0),e.hpShape.x=39,e.hpShape.y=39,e.groupShuiPing.addChild(e.hpShape),e.dimc.touchEnabled=!1,e.dimc.mask=e.hpShape,e}return __extends(e,t),e.prototype.setData=function(t,e){this.lbValue.text=t+"/"+e;var i=t/e*100*.75;i=i>=75?75:i,this.groupMc.height=i,this.dimc.y=75-i+14,t>=e?(this.dimc.visible=!1,this.dimc.stop()):this.dimc.playFile(getEffName("zbjl_zycs_ball2"),-1),this.validateNow()},e}(BaseItemRender);__reflect(PurifyBarEff.prototype,"PurifyBarEff");var CampBattleCommonConfig=function(){function t(){}return t}();__reflect(CampBattleCommonConfig.prototype,"CampBattleCommonConfig");var PurifyConsumeItem1=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return __extends(e,t),e.prototype.setSkinName=function(){this.skinName="PurifyConsumeItem1EUI"},e}(PurifyConsumeItem);__reflect(PurifyConsumeItem1.prototype,"PurifyConsumeItem1");var CampBattleDailyRewardConfig=function(){function t(){}return t}();__reflect(CampBattleDailyRewardConfig.prototype,"CampBattleDailyRewardConfig");var PurifyDaShiWin=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return __extends(e,t),e.prototype.initUI=function(){t.prototype.initUI.call(this),this.imgTitle.source="jinglian_zycs_jlds"},e.prototype.getConfig=function(t){return Cfg.getPurifyDaShiConfigById(t)},e.prototype.type=function(){return 2},e}(PurifyDaRenWin);__reflect(PurifyDaShiWin.prototype,"PurifyDaShiWin"),window.PurifyDaShiWin=PurifyDaShiWin;var PurifyEquipItem=function(t){function e(){var e=t.call(this)||this;return e.setSkinName(),e.mc=new MC,e.groupMc.addChild(e.mc),e}return __extends(e,t),e.prototype.setSkinName=function(){this.skinName="PurifyEquipItemEUI"},e.prototype.dataChanged=function(){var t=this.data,e=BagSys.ins().getEquipByIndex(t.pos);e.hasEquipOn()?(this.imgIcon.source=ResMgr.getItemIcon(e.cfg.getIcon(),IconType.IT_80x80),this.imgEquipBg.source=ResMgr.getEquipQualityBg(e.cfg.quality),e.cfg.quality>=QualityType.Green?this.mc.playFile(ResMgr.getEquipEffResource(e.cfg.quality),-1):(this.mc.visible=!1,this.mc.stop())):(this.imgIcon.source="",this.imgEquipBg.source=ResMgr.getEquipDefaultIcon(e.equipPos)),this.bitLevel.text="l"+t.level,this.bitLevel.visible=t.level>0,this.imgLock.visible=!e.hasEquipOn(),this.imgLock.source=GFunc.isRing(e.equipPos)?"public_zycs_jh1":"qianghua_zycs_suo",this.updateRedPoint()},e.prototype.updateRedPoint=function(){var t=this.data;t&&(this.redPoint.visible=RpSys.ins().getData(ForgeWin,PurifyPanel,t.pos))},e.prototype.setSelectBG=function(t){this.imgSelect.visible=t},e}(BaseItemRender);__reflect(PurifyEquipItem.prototype,"PurifyEquipItem");var PurifyEquipItem1=function(t){function e(){var e=t.call(this)||this;return e.skinName="PurifyEquipItem1EUI",e.mc=new MC,e.groupMc.addChild(e.mc),e}return __extends(e,t),e.prototype.dataChanged=function(){var t=this.data,e=BagSys.ins().getEquipByIndex(t.pos);e.hasEquipOn()?(this.imgIcon.source=ResMgr.getItemIcon(e.cfg.getIcon(),IconType.IT_80x80),this.imgEquipBg.source=ResMgr.getEquipQualityBg(e.cfg.quality),e.cfg.quality>=QualityType.Green?this.mc.playFile(ResMgr.getEquipEffResource(e.cfg.quality),-1):(this.mc.visible=!1,this.mc.stop())):(this.imgIcon.source="",this.imgEquipBg.source=ResMgr.getEquipDefaultIcon(e.equipPos)),this.bitLevel.text="l"+t.level,this.bitLevel.visible=t.level>0,this.imgLock.visible=!e.hasEquipOn(),this.imgLock.source=GFunc.isRing(e.equipPos)?"public_zycs_jh1":"qianghua_zycs_suo"},e}(BaseItemRender);__reflect(PurifyEquipItem1.prototype,"PurifyEquipItem1");var CampBattleDevilRankConfig=function(){function t(){}return t}();__reflect(CampBattleDevilRankConfig.prototype,"CampBattleDevilRankConfig");var PurifyPlusWin=function(t){function e(){var e=t.call(this)||this;return e.currRoleId=0,e}return __extends(e,t),e.prototype.initUI=function(){t.prototype.initUI.call(this),this.layer=LayerMgr.Popup,this.skinName="PurifyPlusWinEUI",this.levelMaxTxt.visible=!1;var e=14;this.labelLvCur.lineSpacing=this.labelLvCur_1.lineSpacing=this.labelLvNext.lineSpacing=this.labelLvNext_1.lineSpacing=e,this.addBg()},e.prototype.open=function(e){t.prototype.open.call(this),this.purifyData=e,this.update()},e.prototype.update=function(){var t=Cfg.getConfig(PurifyExtraConfig,CondType.LessEqual,PurifyExtraConfig.level,this.purifyData.getEquipMinLevel()),e=this.purifyData.allEquipLevelSum(t.level),i=e>=EquipPos.MAX,n="";n=addColor(i?"激活：":"未激活：",i?5949490:15341079),n+=addColor("所有部位达到"+t.level+"阶",i?11512480:6513507),n+=addColor("("+e+"/"+EquipPos.MAX+")",i?5949490:15341079),this.levelTitle.textFlow=addColorTF(n);var a="%k：";n=AttrData.parse(t.attr,{fm:a}).join("\n"),this.labelLvCur.textFlow=addColorTF(n,i?5949490:6513507);var o="%v";n=AttrData.parse(t.attr,{fm:o}).join("\n"),this.labelLvCur_1.textFlow=addColorTF(n,i?5949490:6513507);var s=Cfg.getMaxConfig(PurifyExtraConfig).id;if(t.id>=s)this.levelMax();else{var r=Cfg.getConfig(PurifyExtraConfig,t.id+1),u=this.purifyData.allEquipLevelSum(r.level);n=addColor("未激活：",15341079),n+=addColor("所有部位达到"+r.level+"阶",6513507),n+=addColor("("+u+"/"+EquipPos.MAX+")",15341079),this.levelNextTitle.textFlow=addColorTF(n),n=AttrData.parse(r.attr,{fm:a}).join("\n"),this.labelLvNext.textFlow=addColorTF(n),n=AttrData.parse(r.attr,{fm:o}).join("\n"),this.labelLvNext_1.textFlow=addColorTF(n)}},e.prototype.levelMax=function(){this.levelMaxTxt.visible=!0,this.levelNextTitle.visible=!1,this.labelLvNext.visible=!1,this.labelLvNext_1.visible=!1},e}(BaseWinSingle);__reflect(PurifyPlusWin.prototype,"PurifyPlusWin");var PurifyAttrConfig=function(){function t(){}return t.level="level",t}();__reflect(PurifyAttrConfig.prototype,"PurifyAttrConfig");var PurifyConsumeItemData=function(){function t(){this.type=1,this.index=1,this.desc=[]}return t}();__reflect(PurifyConsumeItemData.prototype,"PurifyConsumeItemData");var CampBattleEmojiConfig=function(){function t(){}return t}();__reflect(CampBattleEmojiConfig.prototype,"CampBattleEmojiConfig");var CampBattleGodRankConfig=function(){function t(){}return t}();__reflect(CampBattleGodRankConfig.prototype,"CampBattleGodRankConfig");var PurifyDaShiConfig=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return __extends(e,t),e}(PurifyDaRenConfig);__reflect(PurifyDaShiConfig.prototype,"PurifyDaShiConfig");var PurifyDaShiData=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return __extends(e,t),e.prototype.isMaxRank=function(){return this.level>=Cfg.getMaxConfig(PurifyDaShiConfig).stage},e.prototype.getDaBiaoCount=function(){return Cfg.getConfig(EquipConstConfig).dashicount},e.prototype.getConfig=function(){return Cfg.getPurifyDaShiConfigById(this.level)},e}(PurifyDarenData);__reflect(PurifyDaShiData.prototype,"PurifyDaShiData");var PurifyData=function(){function t(){this.purifyEquipDatas=[]}return t.prototype.iniData=function(){for(var t=0;t<EquipPos.MAX;t++){var e=new PurifyEquipData;e.pos=t,e.level=0,this.purifyEquipDatas.push(e)}},t.prototype.parser=function(t){for(var e=t.readByte(),i=0;e>i;i++){var n=t.readByte(),a=t.readByte(),o=this.getPurifyDataByPos(n);o.level=a}},t.prototype.getPurifyDataByPos=function(t){for(var e=0;e<this.purifyEquipDatas.length;e++)if(t==this.purifyEquipDatas[e].pos)return this.purifyEquipDatas[e];return null},t.prototype.getPurifyDataByIndex=function(t){return this.purifyEquipDatas[t]},t.prototype.allEquipLevel=function(t){for(var e=0;e<this.purifyEquipDatas.length;e++)if(this.purifyEquipDatas[e].level<t)return!1;return!0},t.prototype.getEquipMinLevel=function(){for(var t=this.purifyEquipDatas[0].level,e=0;e<this.purifyEquipDatas.length;e++)this.purifyEquipDatas[e].level<t&&(t=this.purifyEquipDatas[e].level);return t},t.prototype.allEquipLevelSum=function(t){for(var e=0,i=0;i<this.purifyEquipDatas.length;i++)this.purifyEquipDatas[i].level>=t&&e++;return e},t.prototype.isAllEquipLevelMax=function(){for(var t=!0,e=Cfg.getMaxConfig(PurifyAttrConfig,0).level,i=0;i<this.purifyEquipDatas.length;i++)if(this.purifyEquipDatas[i].level<e){t=!1;break}return t},t.prototype.getLevelNum=function(t){var e=0,i=this.purifyEquipDatas;for(var n in i)t<=i[n].level&&e++;return e},t}();__reflect(PurifyData.prototype,"PurifyData");var PurifyEquipData=function(){function t(){this.pos=0,this.level=0,this.levelMax=0}return t.prototype.getMaxLevel=function(){return 0==this.levelMax&&(this.levelMax=Cfg.getMaxConfig(PurifyAttrConfig,this.pos).level),this.levelMax},t.prototype.getIsMax=function(){return this.level>=this.getMaxLevel()},t.prototype.getConfig=function(){return Cfg.getConfig(PurifyAttrConfig,this.pos,CondType.Equal,PurifyAttrConfig.level,this.level)},t.prototype.getCost=function(){for(var t=this.getConfig().cost,e=[],i=t.length,n=3,a=t.length-1;a>=0;a--){var o=new PurifyConsumeItemData;o.itemConsumeData=t[a],o.type=n,o.index=i,o.desc=2==t.length?["","极小概率","小概率","必定成功"]:["","极小概率","小概率","必定成功"],e.push(o),i--,n--}return SortUtil.sortOn(e,["type"],[SortType.up]),e},t}();__reflect(PurifyEquipData.prototype,"PurifyEquipData");var PurifyExtraConfig=function(){function t(){}return t.level="levels",t}();__reflect(PurifyExtraConfig.prototype,"PurifyExtraConfig");var FriendSys=function(t){function e(){var e=t.call(this)||this;return e.guanZhuDatas=[],e.fenSiDatas=[],e.heiMingDanDatas=[],e.zuiJinDatas=[],e.interval=18e4,e.currChatRoleID=0,e.isHoldChat=!1,e.sysId=PackId.Friends,e.reg(1,e.doFriendsList),e.reg(2,e.doAddFriends),e.reg(3,e.doDeleteFriends),e.reg(8,e.patchFriendsChat),e.reg(9,e.patchOldFriendsChat),e.reg(11,e.patchHoldChat),e.addLsn(LogicSys.ins().patchAllSysInit,function(){e.sendFriendsList(FriendsType.guanZhu),e.sendFriendsList(FriendsType.heiMingDan),e.sendFriendsList(FriendsType.zuiJin)}),e}return __extends(e,t),e.ins=function(){return t.getIns.call(this,e)},e.prototype.sendFriendsList=function(t){var e=this.getBytes(1);e.writeByte(t),this.send(e)},e.prototype.doFriendsList=function(t){for(var e=t.readByte(),i=t.readShort(),n=[],a=0;i>a;a++){var o=new FriendData;o.parser(t,e),n.push(o)}switch(e){case FriendsType.guanZhu:this.guanZhuDatas=n;break;case FriendsType.fenSi:this.fenSiDatas=n;break;case FriendsType.heiMingDan:this.heiMingDanDatas=n;break;case FriendsType.zuiJin:this.zuiJinDatas=n}this.updateList(e)},e.prototype.doAddFriends=function(t){var e=t.readByte(),i=new FriendData;i.parser(t,e),this.addFriendsByType(e,i),this.updateList(e)},e.prototype.doDeleteFriends=function(t){var e=t.readByte(),i=t.readInt();this.removeFriendsByType(e,i),this.clearChatLog(i),this.updateList(e)},e.prototype.updateList=function(t){switch(t){case FriendsType.guanZhu:this.patchGuanZhuData();break;case FriendsType.fenSi:this.patchFenSiData();break;case FriendsType.heiMingDan:this.patchHeiMingDanData();break;case FriendsType.zuiJin:this.patchZuiJinData()}},e.prototype.patchGuanZhuData=function(){},e.prototype.patchFenSiData=function(){},e.prototype.patchHeiMingDanData=function(){},e.prototype.patchZuiJinData=function(){},e.prototype.sendGuanzhu=function(t,e){var i=this.getBytes(4);i.writeInt(t),i.writeString(e),this.send(i)},e.prototype.sendUnGuanzhu=function(t,e){var i=this.getBytes(5);i.writeInt(t),i.writeString(e),this.send(i)},e.prototype.sendDefriend=function(t,e){var i=this.getBytes(6);i.writeInt(t),i.writeString(e),this.send(i)},e.prototype.sendUnDefriend=function(t,e){var i=this.getBytes(7);i.writeInt(t),i.writeString(e),this.send(i)},e.prototype.sendFriendsChat=function(t,e){var i=this.getBytes(8);i.writeInt(t),i.writeString(e),this.send(i)},e.prototype.patchFriendsChat=function(t){var e=ChatFactory.createData(ChatType.Secret);e.parserMessage(t),e.isNewMsg=!0,ChatSys.ins().addMsg(e),RpFun.friendRedPoint(e.roleId,!0)},e.prototype.sendOldFriendsChat=function(t){var e=this.getBytes(9);e.writeInt(t),this.send(e)},e.prototype.patchOldFriendsChat=function(t){for(var e=(t.readInt(),t.readShort()),i=0;e>i;i++){var n=ChatFactory.createData(ChatType.Secret);n.parserMessage(t),ChatSys.ins().addMsg(n)}},e.prototype.sendHoldChat=function(t){var e=this.getBytes(11);e.writeByte(t),this.send(e)},e.prototype.patchHoldChat=function(t){var e=t.readByte();this.isHoldChat=e>0?!0:!1},e.prototype.addFriendsByType=function(t,e){switch(t){case FriendsType.guanZhu:this.guanZhuDatas.push(e);break;case FriendsType.fenSi:this.fenSiDatas.push(e);break;case FriendsType.heiMingDan:this.heiMingDanDatas.push(e);break;case FriendsType.zuiJin:this.zuiJinDatas.push(e)}},e.prototype.removeFriendsByType=function(t,e){var i=[];switch(t){case FriendsType.guanZhu:i=this.guanZhuDatas;break;case FriendsType.fenSi:i=this.fenSiDatas;break;case FriendsType.heiMingDan:i=this.heiMingDanDatas;break;case FriendsType.zuiJin:i=this.zuiJinDatas}for(var n=i.length-1;n>=0;n--)if(i[n].id==e){i.splice(n,1);break}},e.prototype.getFriendDataById=function(t){for(var e=0,i=this.zuiJinDatas;e<i.length;e++){var n=i[e];if(t==n.id)return n}for(var a=0,o=this.guanZhuDatas;a<o.length;a++){var n=o[a];if(t==n.id)return n}return null},e.prototype.getChatLogs=function(t){var e=ChatSys.ins().getMsgsByType(ChatType.Secret);return e.getMsgsByRoleId(t)},e.prototype.clearChatLog=function(t){var e=ChatSys.ins().getMsgsByType(ChatType.Secret);e.clearSecretData(t)},e.prototype.getNewMsgCount=function(t){var e=ChatSys.ins().getMsgsByType(ChatType.Secret);return e.getNewMsgCount(t)},e.prototype.clearNewMsgCount=function(t){var e=ChatSys.ins().getMsgsByType(ChatType.Secret);e.clearNewMsgCount(t)},e.INTERVAL_TIME=60,e}(BaseSys);__reflect(FriendSys.prototype,"FriendSys");var System;!function(t){t.friendSys=FriendSys.ins.bind(FriendSys)}(System||(System={})),window.FriendSys=FriendSys;var FriendData=function(){function t(){this.type=0,this.id=0,this.roleName="",this.power=0,this.lv=0,this.vip=0,this.isOnline=0,this.job=0,this.sex=0,this.onlineTime=0,this.lastMsg="",this.lastMsgDate=0}return t.prototype.parser=function(t,e){this.id=t.readInt(),this.roleName=t.readString(),this.job=t.readByte(),this.sex=t.readByte(),this.power=t.readDouble(),this.lv=t.readShort(),this.vip=t.readShort(),this.isOnline=t.readByte(),this.onlineTime=DateUtil.formatMiniDateTime(t.readInt()),this.lastMsg=t.readString(),this.type=e},t}();__reflect(FriendData.prototype,"FriendData");var FriendBlackListItem=function(t){function e(){var e=t.call(this)||this;return e.skinName="BlackListItemRenderEUI",e.addClickE(e.btn_delete,e.onClick),e}return __extends(e,t),e.prototype.onClick=function(t){var e=this.data,i=new PopupData(Lang.friend_str1);i.setFunction(this,function(){FriendSys.ins().sendUnDefriend(e.id,e.roleName)}),openWin(CommonTipsWin,i)},e.prototype.dataChanged=function(){if(this.data&&this.data.id){var t=this.data;if(this.img_userIcon.source=ResMgr.getHeadIcon(t.sex),this.label_name.text=t.roleName+"（"+GFunc.GetLvStrByLv(t.lv)+"）",this.label_power.text="战斗力："+t.power,1==t.isOnline)this.label_name.filters=this.label_power.filters=[];else{var e=Actor.ins().serverTime-t.onlineTime;e=0>=e?1:e/1e3,e=e>12*DateUtil.SECOND_PER_HOUR?12*DateUtil.SECOND_PER_HOUR:e,this.label_name.filters=this.label_power.filters=DisUtil.grayFilter(),this.img_userIcon.source=ResMgr.getHeadIconGray(t.job)}}},e}(BaseItemRender);__reflect(FriendBlackListItem.prototype,"FriendBlackListItem"),window.FriendBlackListItem=FriendBlackListItem;var FriendChatItem=function(t){function e(){var e=t.call(this)||this;return e.skinName="FriendsChatItemRenderEUI",e.img_userIcon.name="FriendsChatItemRender.img_userIcon",e}return __extends(e,t),e.prototype.childrenCreated=function(){t.prototype.childrenCreated.call(this),this.label_msg&&(this.label_msg.wordWrap=!1)},e.prototype.dataChanged=function(){if(this.data&&this.data.timer){var t=this.data;this.currentState=t.fromActor.id==Actor.ins().actorID?"s1":"s0",this.img_userIcon.source=ResMgr.getHeadIcon(t.sex),this.label_date.text=t.getTimeStr(),this.group_date.visible=t.showDate,this.height=t.showDate?91:66}},e}(BaseItemRender);__reflect(FriendChatItem.prototype,"FriendChatItem"),window.FriendChatItem=FriendChatItem;var FriendListItem=function(t){function e(){var e=t.call(this)||this;return e.skinName="FriendListItemRenderEUI",e.setSelected(!1),e.addClickE(e,e.onClick),e}return __extends(e,t),e.prototype.onClick=function(t){var e=this.data;switch(t.target){case this.btn_chat:openWin(FriendsWin,FriendsWin.page_chat,e);break;case this.btn_delete:var i=new PopupData(Lang.friend_str4);i.setFunction(this,function(){FriendSys.ins().sendUnGuanzhu(e.id,e.roleName)}),openWin(CommonTipsWin,i);break;case this.btn_blackList:i=new PopupData(Lang.friend_str5),i.setFunction(this,function(){FriendSys.ins().sendDefriend(e.id,e.roleName)}),openWin(CommonTipsWin,i)}},e.prototype.dataChanged=function(){if(this.data&&this.data.id){var t=this.data;if(this.img_userIcon.source=ResMgr.getHeadIcon(t.sex),this.label_name.text=t.roleName+"（"+GFunc.GetLvStrByLv(t.lv)+"）",this.label_power.text=""+Lang.common_str29+t.power,1==t.isOnline)this.label_lastLogin.text="",this.label_name.filters=this.label_power.filters=[];else{var e=Actor.ins().serverTime-t.onlineTime;e=0>=e?1:e/1e3,e=e>12*DateUtil.SECOND_PER_HOUR?12*DateUtil.SECOND_PER_HOUR:e,this.label_lastLogin.text=""+getFormatTime(e,"hh小时mm分ss秒")+Lang.common_qian,this.label_lastLogin.textColor=16579836,this.label_name.filters=this.label_power.filters=DisUtil.grayFilter(),this.img_userIcon.source=ResMgr.getHeadIconGray(t.job)}}},e.prototype.setSelected=function(t){this.group_friend.visible=t},e.prototype.getSelected=function(){return this.group_friend.visible},e}(BaseItemRender);__reflect(FriendListItem.prototype,"FriendListItem"),window.FriendListItem=FriendListItem;var FriendRecentListItem=function(t){function e(){var e=t.call(this)||this;return e.skinName="FriendRecentListItemRenderEUI",e}return __extends(e,t),e.prototype.childrenCreated=function(){t.prototype.childrenCreated.call(this)},e.prototype.dataChanged=function(){if(this.data&&this.data.id){var t=this.data;this.img_userIcon.source=ResMgr.getHeadIcon(t.sex),this.label_name.text=t.roleName+"（"+GFunc.GetLvStrByLv(t.lv)+"）",this.label_lastChat.text=t.lastMsg;var e=FriendSys.ins().getNewMsgCount(t.id);this.redPointNum.text=e?""+e:"",this.redPoint.visible=RpSys.ins().getData(FriendsWin,FriendsZuijinPanel,t.id),1==t.isOnline?this.label_name.filters=this.label_lastChat.filters=[]:(this.label_name.filters=this.label_lastChat.filters=DisUtil.grayFilter(),this.img_userIcon.source=ResMgr.getHeadIconGray(t.job))}},e}(BaseItemRender);__reflect(FriendRecentListItem.prototype,"FriendRecentListItem"),window.FriendRecentListItem=FriendRecentListItem;var CampBattleScoreRewardConfig=function(){function t(){}return t}();__reflect(CampBattleScoreRewardConfig.prototype,"CampBattleScoreRewardConfig");var CampBattleSelfRankConfig=function(){function t(){}return t}();__reflect(CampBattleSelfRankConfig.prototype,"CampBattleSelfRankConfig");var ComUtil=function(){function t(){}return Object.defineProperty(t,"IsHtml5",{get:function(){return egret.Capabilities.runtimeType==egret.RuntimeType.WEB},enumerable:!0,configurable:!0}),Object.defineProperty(t,"IsPC",{get:function(){return!egret.Capabilities.isMobile},enumerable:!0,configurable:!0}),Object.defineProperty(t,"isIos",{get:function(){return/(iPhone|iPad|iPod|iOS)/i.test(navigator.userAgent)},enumerable:!0,configurable:!0}),Object.defineProperty(t,"isXianYuApp",{get:function(){var t=Cfg.getConfig(GlobalConfig).channels;return t&&-1!=t.indexOf(Number(urlParam.appid))},enumerable:!0,configurable:!0}),Object.defineProperty(t,"isAndroid",{get:function(){return/(Android)/i.test(navigator.userAgent)},enumerable:!0,configurable:!0}),Object.defineProperty(t,"LixianShowFXBtn",{get:function(){var t=Cfg.getConfig(GlobalConfig),e=t.isFxPfids.indexOf(+urlParam.apptype)>=0;return e||(e=t.isFxAppids.indexOf(+urlParam.appid)>=0),Actor.ins().isLocation?!0:e&&PfActivitySys.ins().shareInfo.isShow},enumerable:!0,configurable:!0}),t.getObjLen=function(t){var e=0;for(var i in t)e++;return e},t.getObjArrLen=function(t){var e=t.length;if(!e){var i=0;for(var n in t)RegUtil.NumericExp.test(n)&&i++;e=i}return e},t.getObjName=function(t){var e="";return"number"==typeof t?e=t.toString():"string"==typeof t?e=t:"function"==typeof t||t instanceof egret.DisplayObject?e=egret.getQualifiedClassName(t):console.log("需要获取的对象类型错误"+t),e},t.getObjKeyName=function(t){return this.findName(t,t.parent)},t.findName=function(t,e){if(e&&e!=t.stage){for(var i=Object.getOwnPropertyNames(e),n=0,a=i;n<a.length;n++){var o=a[n];if(e[o]===t)return o}return this.findName(t,e.parent)}return t.name},t.copyResult=function(t){var e=document.createElement("input");e.value=t,document.body.appendChild(e),e.select(),e.setSelectionRange(0,e.value.length),document.execCommand("Copy"),document.body.removeChild(e)
},t}();__reflect(ComUtil.prototype,"ComUtil");var AStarCell=function(){function t(t,e,i){this.nX=t,this.nY=e,this.nDir=i}return t}();__reflect(AStarCell.prototype,"AStarCell");var FriendsAddWin=function(t){function e(){var e=t.call(this)||this;return e.layer=LayerMgr.Popup,e.skinName="FriendsAddWinEUI",e.addBg(),e}return __extends(e,t),e.prototype.open=function(){t.prototype.open.call(this),this.addClickE(this.btn_add,this.onTap)},e.prototype.onTap=function(t){switch(t.target){case this.btn_add:if(this.editText_name.text==Actor.ins().myBaseName)return void showtipsFail(Lang.friend_str6);""!=this.editText_name.text&&FriendSys.ins().sendGuanzhu(0,this.editText_name.text),closeWin(e)}},e}(BaseWinSingle);__reflect(FriendsAddWin.prototype,"FriendsAddWin"),window.FriendsAddWin=FriendsAddWin;var FriendsWin=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.layer=LayerMgr.Main,e.winType=WinType.OverlayWin,e}return __extends(e,t),e.prototype.open=function(e,i){void 0===i&&(i=null),this.data=i,t.prototype.open.call(this,e),-1==this.scrollerBase.getChildIndex(this.tab)?this.tab.addEventListener(egret.Event.ADDED,this.tabListAdd,this):this.tabListAdd()},e.prototype.tabListAdd=function(){this.tab.getChildAt(e.page_chat).visible=!1,this.tab.removeEventListener(egret.Event.ADDED,this.tabListAdd,this)},e.prototype.getParam=function(){return[this.data]},e.page_chat=3,e.panelNames=[FriendsGuanzhuPanel,FriendsBlackListPanel,FriendsZuijinPanel,FriendsChatPanel],e}(BaseWinAutoTab);__reflect(FriendsWin.prototype,"FriendsWin"),window.FriendsWin=FriendsWin;var FruitData=function(){function t(){this.id=0,this.usedCount=-1,this.roleId=-1}return t.prototype.parser=function(t){this.id=t.readInt(),this.setUsedCount(t.readInt())},Object.defineProperty(t.prototype,"configFruit",{get:function(){return this._configFruit||(this._configFruit=Cfg.getConfig(FruitConfig,this.id))},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"configItem",{get:function(){return this._configItem||(this._configItem=Cfg.getItemCfg(this.id))},enumerable:!0,configurable:!0}),t.prototype.setUsedCount=function(t){if(t!=this.usedCount){this.usedCount=t,this.attrs=[];for(var e in this.configFruit.attrs){var i=new AttrData;i.type=this.configFruit.attrs[e].type,i.value=this.configFruit.attrs[e].value*this.usedCount,this.attrs.push(i)}}},t.prototype.getUsedCount=function(){return this.usedCount},t.prototype.getPower=function(){return GFunc.getPower(this.attrs)>>0},t}();__reflect(FruitData.prototype,"FruitData");var FruitSys=function(t){function e(){var e=t.call(this)||this;return e.fruitTypeDatas=[],e.sysId=PackId.Fruit,e.reg(1,e.patchFruitInfoType),e.reg(3,e.patchFruitInfoAll),e}return __extends(e,t),e.ins=function(){return t.getIns.call(this,e)},e.prototype.sendFruitInfo=function(t){var e=this.getBytes(1);e.writeByte(t),this.send(e)},e.prototype.patchFruitInfoType=function(t){var e=t.readByte(),i=this.getFruitTypeData(e);i.parser(t),RpFun.showFruit()},e.prototype.patchFruitInfoAll=function(t){this.fruitTypeDatas.length=0;for(var e=t.readByte(),i=0;e>i;i++){var n=t.readByte(),a=this.getFruitTypeData(n);a.parser(t)}RpFun.showFruit()},e.prototype.getFruitTypeData=function(t){return this.fruitTypeDatas[t-1]||(this.fruitTypeDatas[t-1]=new FruitTypeData(t))},e.prototype.getMaxEat=function(t){var e=0;for(var i in t.maxEat){if(Actor.ins().level<parseInt(i))return e;e=t.maxEat[i]}return e},e.prototype.getPower=function(){var t=0;for(var e in this.fruitTypeDatas)t+=this.fruitTypeDatas[e].getPower();return t},e}(BaseSys);__reflect(FruitSys.prototype,"FruitSys");var System;!function(t){t.fruitSys=FruitSys.ins.bind(FruitSys)}(System||(System={})),window.FruitSys=FruitSys;var FruitTypeData=function(){function t(t){this.type=1,this.usedCount=0,this.fruitDatas=[],this._count=0,this._totalCount=1,this.type=t}return t.prototype.parser=function(t){this.usedCount=t.readShort(),this._count=0,this._totalCount=0,this.fruitDatas.length=0;for(var e=t.readByte(),i=0;e>i;i++){var n=new FruitData;n.parser(t),this.fruitDatas.push(n),this._count+=n.getUsedCount(),this._totalCount+=FruitSys.ins().getMaxEat(n.configFruit)}},t.prototype.isUse=function(){return this.isUseTotal()},t.prototype.isUseDay=function(){return this.usedCount<this.totalCount()},t.prototype.isUseTotal=function(){return this._count<this._totalCount},t.prototype.totalCount=function(){return VipSys.ins().getCurSVipConfig().fruittimes},t.prototype.getFruitDataById=function(t){for(var e=0,i=this.fruitDatas;e<i.length;e++){var n=i[e];if(n.id==t)return n}return null},t.prototype.getProgText=function(){var t=this._count/this._totalCount*100;return t.toFixed(2)},t.prototype.getPower=function(){for(var t=0,e=0,i=this.fruitDatas;e<i.length;e++){var n=i[e];t+=n.getPower()}return t},t}();__reflect(FruitTypeData.prototype,"FruitTypeData");var FruitBaritem=function(t){function e(){var e=t.call(this)||this;return e.skinName="FruitBaritemEUI",e}return __extends(e,t),e.prototype.dataChanged=function(){if(this.data&&this.data.id){var t=this.data;this.imgIcon.source="guoshi_zycs_gs"+t.id,this.redPoint.visible=RpSys.ins().getData(RoleWin,RolePanel,MoJieWin,FruitPointPanel,t.id)}},e}(BaseItemRender);__reflect(FruitBaritem.prototype,"FruitBaritem"),window.FruitBaritem=FruitBaritem;var Fruititem=function(t){function e(){var e=t.call(this)||this;return e.skinName="FruititemEUI",e.setSkinPart("item",new ItemBaseReward),e}return __extends(e,t),e.prototype.dataChanged=function(){if(this.data instanceof FruitData){var t=this.data;this.item.data=t.configItem,this.nameTxt.text=t.configItem.getName();var e=FruitSys.ins().getMaxEat(t.configFruit);this.useCountTxt.text="（"+t.getUsedCount()+"/"+e+"）";var i=AttrData.parse(t.attrs,{fm:"%k："}).join("\n");this.attrTxt.textFlow=addColorTF(i),i=AttrData.parse(t.attrs,{fm:"%v"}).join("\n"),this.attrTxt_1.textFlow=addColorTF(i),t.getUsedCount()<e?(this.maxTxt.visible=!1,i=""+Lang.zb_str15+BagSys.ins().getItemCount(t.id),this.currCountTxt.text=i,this.currCountTxt.visible=!0):(this.currCountTxt.visible=!1,this.maxTxt.visible=!0)}},e}(BaseItemRender);__reflect(Fruititem.prototype,"Fruititem"),window.Fruititem=Fruititem;var ChannelConfig=function(){function t(){}return t.funtype="funtype",t}();__reflect(ChannelConfig.prototype,"ChannelConfig");var CDKeySys=function(t){function e(){var e=t.call(this)||this;return e.sysId=PackId.CDKey,e.reg(1,e.doChangeResult),e}return __extends(e,t),e.ins=function(){return t.getIns.call(this,e)},e.prototype.sendCdkey=function(t){if(t.length<=0)return void showtipsFail(Lang.fuli_str18);var e=this.getBytes(1);e.writeString(t),this.send(e)},e.prototype.doChangeResult=function(t){var e,i=t.readByte();switch(i){case 0:e=Lang.fuli_str19;break;case 1:e=Lang.fuli_str20;break;case 2:e=Lang.fuli_str21;break;case 3:e=Lang.fuli_str22;break;case 4:e=Lang.fuli_str23}TipsSys.ins().showtipsNew(e,0==i?65280:16711680)},e}(BaseSys);__reflect(CDKeySys.prototype,"CDKeySys");var System;!function(t){t.cdKeySys=CDKeySys.ins.bind(CDKeySys)}(System||(System={})),window.CDKeySys=CDKeySys;var FuLiSys=function(t){function e(){var e=t.call(this)||this;return e.dailyOnlineData=new DailyOnlineData,e.signinModel=new SigninModel,e.DLHLData=new DLHLData,e.sysId=PackId.moneyTree,e.reg(24,e.patchSigninInfo),e.reg(25,e.patchSigninReward),e.reg(30,e.patchDailyOnlineData),e.reg(31,e.patchDailyOnlineAward),e.reg(40,e.patchDLHLData),e.reg(41,e.patchDLHLAward),e}return __extends(e,t),e.ins=function(){return t.getIns.call(this,e)},e.prototype.patchSigninInfo=function(t){this.signinModel.parserInfo(t),RpFun.showSigninRedPoint()},e.prototype.sendSigninReward=function(t){var e=this.getBytes(25);e.writeShort(t),this.send(e)},e.prototype.patchSigninReward=function(t){for(var e=[],i=t.readByte(),n=0;i>n;n++){var a=new ItemDataReward;a.parser2(t),e.push(a)}var o=ActSys.ins().getActDataById(ActId.ID_99900);if(o&&o.isInYueKaTime()){for(var s=[],r=0,u=e;r<u.length;r++){var h=u[r],l=h.clone(),p=h.count;l.count=p/2,s.push(l),s.push(l.clone())}openWin(LiLianRewardTipsWin,s,Lang.fuli_str37)}},e.prototype.sendSigninRewards=function(){this.sendBase(26)},e.prototype.patchDailyOnlineData=function(t){this.dailyOnlineData.parser(t),this.startDailyOnlineNextUpdate()},e.prototype.startDailyOnlineNextUpdate=function(){var t=this.dailyOnlineData.getNextUpdateTime();t>0&&Timer.ins()["do"](t,0,1,this.updateDailyOnline,this,TimerType.LAST)},e.prototype.updateDailyOnline=function(){RpFun.showDailyOnlineRedPoint(),this.startDailyOnlineNextUpdate()},e.prototype.sendDailyOnlineAward=function(t){var e=this.getBytes(31);e.writeShort(t),this.send(e)},e.prototype.patchDailyOnlineAward=function(t){this.dailyOnlineData.parserAward(t),RpFun.showDailyOnlineRedPoint(),this.startDailyOnlineNextUpdate()},e.prototype.patchDLHLData=function(t){this.DLHLData.parser(t),RpFun.showDLHLRedPoint()},e.prototype.sendDLHLAward=function(t){var e=this.getBytes(41);e.writeByte(t),this.send(e)},e.prototype.patchDLHLAward=function(t){var e=t.readInt();this.DLHLData.setState(e),RpFun.showDLHLRedPoint()},e}(BaseSys);__reflect(FuLiSys.prototype,"FuLiSys");var System;!function(t){t.fuLiSys=FuLiSys.ins.bind(FuLiSys)}(System||(System={})),window.FuLiSys=FuLiSys;var DailyOnlineData=function(){function t(){this.type=2,this.day=1,this.dailyOnlineItemDatas=[]}return t.prototype.parser=function(t){var e=t.readInt(),i=t.readInt();this.type=t.readByte(),this.day=t.readInt();var n=1==this.type?Cfg.getDailyOnlineConfigs(this.day):Cfg.getDailyOnlineConfigSevens(1);this.dailyOnlineItemDatas.length=n.length;var a=new Array(this.dailyOnlineItemDatas.length);MathUtil.writeIntToArray(e,a);for(var o=0;o<this.dailyOnlineItemDatas.length;o++){var s=this.dailyOnlineItemDatas[o]||(this.dailyOnlineItemDatas[o]=new DailyOnlineItemData);s.day=this.day,s.index=o+1,s.state=a[o],s.config=1==this.type?Cfg.getDailyOnlineConfig(s.day,s.index):Cfg.getDailyOnlineConfigSeven(1,s.index),s.endTick=Timer.ins().getEgretTimer()+1e3*Math.max(s.config.onlinetime-i,0)}},t.prototype.parserAward=function(t){var e=t.readInt(),i=new Array(this.dailyOnlineItemDatas.length);MathUtil.writeIntToArray(e,i);for(var n=0;n<this.dailyOnlineItemDatas.length;n++)this.dailyOnlineItemDatas[n].state=i[n]},t.prototype.getNextUpdateTime=function(){for(var t=0,e=0,i=this.dailyOnlineItemDatas;e<i.length;e++){var n=i[e],a=n.endTick-Timer.ins().getEgretTimer();if(a>0){t=a;break}}return t},t.prototype.canGetAward=function(){for(var t=!1,e=0,i=this.dailyOnlineItemDatas;e<i.length;e++){var n=i[e];if(t=n.canGet())break}return t},t.prototype.hasGetAllAward=function(){for(var t=!0,e=0,i=this.dailyOnlineItemDatas;e<i.length;e++){var n=i[e];t=t&&n.hasGet()}return t},t.prototype.isBefore3Day=function(){return 1==this.type&&this.day<=3},t.prototype.isBefore1Day=function(){return 1==this.type&&this.day<=1},t.prototype.getNextData=function(){for(var t=null,e=0,i=this.dailyOnlineItemDatas;e<i.length;e++){var n=i[e];if(n.canGet()||n.endTick-Timer.ins().getEgretTimer()>0){t=n;break}}return t},t.prototype.isAllDataGet=function(){for(var t=!0,e=0,i=this.dailyOnlineItemDatas;e<i.length;e++){var n=i[e];if(!n.hasGet()){t=!0;break}}return t},t}();__reflect(DailyOnlineData.prototype,"DailyOnlineData");var DailyOnlineItemData=function(){function t(){this.day=1,this.index=1,this.state=0,this.endTick=Number.MAX_VALUE}return t.prototype.hasGet=function(){return 1==this.state},t.prototype.canGet=function(){return!this.hasGet()&&Timer.ins().getEgretTimer()>=this.endTick},Object.defineProperty(t.prototype,"effId",{get:function(){var t=this.config.effId;return t.length>1?t[Actor.ins().job-1]:t[0]},enumerable:!0,configurable:!0}),t}();__reflect(DailyOnlineItemData.prototype,"DailyOnlineItemData");var ChatEmojiConfig=function(){function t(){}return t}();__reflect(ChatEmojiConfig.prototype,"ChatEmojiConfig");var DailyOnlinePanelItem=function(t){function e(){var e=t.call(this)||this;return e.skinName="DailyOnlinePanelItemEUI",e.btnGet.redPoint.visible=!0,e.btnGet.addChild(MC.createCenterGruop("res/eff/button1",-1)),e.list.itemRenderer=ItemBaseRewardMonthCard,e.addClickE(e.btnGet,e.onClick),e}return __extends(e,t),e.prototype.onClick=function(t){var e=this.data;FuLiSys.ins().sendDailyOnlineAward(e.config.index)},e.prototype.dataChanged=function(){var t=this.data,e=t.config;this.currentState=this.getState();var i="在线"+addColor((e.onlinetime/DateUtil.MUNITE_PER_HOUR).toFixed(0)+"分钟",6225800)+"可领取";this.labelDesc.textFlow=addColorTF(i),this.list.dataProvider=new eui.ArrayCollection(e.rewards);var n=ActSys.ins().getActDataById(ActId.ID_99900);n.isInYueKaTime()?this.btnGet.label="双倍领取":this.btnGet.label="领取奖励",this.updateTimeLabel()},e.prototype.updateTime=function(){this.getState()!=this.currentState&&(this.currentState=this.getState()),this.updateTimeLabel()},e.prototype.updateTimeLabel=function(){var t=this.data;if(t){var e=Math.max(t.endTick-Timer.ins().getEgretTimer(),0)/1e3;this.lbTime.text="倒计时 "+getFormatTime(e,"mm分ss秒")}},e.prototype.getState=function(){var t=this.data,e="";return e=t.canGet()?"canGet":t.hasGet()?"hasGet":"cantGet"},e}(BaseItemRender);__reflect(DailyOnlinePanelItem.prototype,"DailyOnlinePanelItem"),window.DailyOnlinePanelItem=DailyOnlinePanelItem;var DLHLData=function(){function t(){this.datas=[]}return t.prototype.parser=function(t){var e=t.readByte(),i=t.readByte(),n=t.readInt(),a=Cfg.getConfigs(LoginGiftConfig,e,i);this.datas.length=0;for(var o=0;o<a.length;o++){var s=a[o],r=new DLHLItemData;r.type=s.type,r.day=s.day,r.id=s.id,this.datas.push(r)}this.setState(n)},t.prototype.setState=function(t){var e=this.datas.length,i=[];this.datas;i.length=e,MathUtil.writeIntToArray(t,i);for(var n=0;e>n;n++)this.datas[n].state=i[n]},t.prototype.canGet=function(){for(var t=!1,e=0;e<this.datas.length;e++){var i=this.datas[e];if(i.canGet){t=!0;break}}return t},t}();__reflect(DLHLData.prototype,"DLHLData");var DLHLItemData=function(){function t(){this.type=1,this.day=1,this.id=1,this.state=0}return Object.defineProperty(t.prototype,"config",{get:function(){return Cfg.getConfig(LoginGiftConfig,this.type,this.day,this.id)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"canGet",{get:function(){return 0==this.state&&Actor.ins().sVipLv>=this.config.sviplevel},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"yiget",{get:function(){return 1==this.state},enumerable:!0,configurable:!0}),t}();__reflect(DLHLItemData.prototype,"DLHLItemData");var ChatFrameConfig=function(){function t(){}return t}();__reflect(ChatFrameConfig.prototype,"ChatFrameConfig");var DLHLPanelItem=function(t){function e(){var e=t.call(this)||this;return e.mcBtn=new MC,e.skinName="DLHLPanelItemEUI",e.listAward.itemRenderer=ItemBaseRewardActivity,e.listAward.dataProvider=e.listAwardArr=new eui.ArrayCollection,e.mcBtn.x=e.btnGet.width/2,e.mcBtn.y=e.btnGet.height/2,e.btnGet.addChildAt(e.mcBtn,e.btnGet.numChildren-1),e.addClickE(e.btnGet,e.onClick),e}return __extends(e,t),e.prototype.onClick=function(){var t=this.data;GFunc.checkSVIP(t.config.sviplevel)&&FuLiSys.ins().sendDLHLAward(t.id)},e.prototype.dataChanged=function(){var t=this.data,e=t.config;this.listAwardArr.source=e.rewards;var i="";i=0==e.sviplevel?"今日登录可领取":"SVIP"+e.sviplevel+"可额外领取",this.lbDec.text=i,this.imgYlq.visible=t.yiget,this.btnGet.visible=!t.yiget,t.canGet?this.mcBtn.playFile(ResMgr.getEffName("public_zycs_button01"),-1):(this.mcBtn.stop(),this.mcBtn.visible=!1)},e}(BaseItemRender);__reflect(DLHLPanelItem.prototype,"DLHLPanelItem"),window.DLHLPanelItem=DLHLPanelItem;var SigninData=function(){function t(){this.day=1,this.state=0}return t.prototype.getConfig=function(){return this.config&&this.day==this.config.id||(this.config=Cfg.getConfig(DailySigninConfig,this.day)),this.config},t.prototype.isAshing=function(){return this.day<=FuLiSys.ins().signinModel.curDay&&1!=this.state},t}();__reflect(SigninData.prototype,"SigninData");var SigninItem=function(t){function e(){var e=t.call(this)||this;return e.skinName="SigninItemEUI",e.setSkinPart("item",new ItemBaseRewardMonthCard),e.imgVip.visible=!urlParam.isShenhe,e}return __extends(e,t),e.prototype.dataChanged=function(){var t=this.data;this.item.data=t.getConfig().reward[0],this.item.touchEnabled=0==t.state,this.item.touchChildren=0==t.state,this.imgYlq.visible=2==t.state,this.imgTouch.visible=t.isAshing();var e=t.getConfig().level>0;this.imgVip.source=e?"mrqd_zycs_v"+t.getConfig().level:"",this.showMc(1==t.state)},e.prototype.showMc=function(t){this.redPoint.visible=t},e}(BaseItemRender);__reflect(SigninItem.prototype,"SigninItem"),window.SigninItem=SigninItem;var SigninModel=function(){function t(){this.signinDatas=[],this.curDay=1,this.dayNum=0,this.isTotalReward=!1,this.isTotalRewardFinish=!1,this.record=0}return t.prototype.parserInfo=function(t){var e=t.readShort();this.dayNum=0;for(var i=0;e>i;i++){var n=this.signinDatas[i]||(this.signinDatas[i]=new SigninData);n.day=i+1,n.state=t.readByte(),2==n.state&&(this.dayNum+=1)}this.record=t.readInt(),this.curDay=t.readShort(),this.fromTotalSignin()},t.prototype.getDifferenceDay=function(){return Math.max(this.totalSigninConfig.day-this.dayNum,0)},t.prototype.fromTotalSignin=function(){var t=Cfg.getConfigs(TotalSigninConfig);this.isTotalReward=!1,this.isTotalRewardFinish=!1;for(var e=0;e<t.length&&(this.totalSigninConfig=t[e],this.dayNum>=this.totalSigninConfig.day);e++){var i=this.record>>this.totalSigninConfig.id&1;if(0==i){this.isTotalReward=!0;break}this.isTotalRewardFinish=!1}},t}();__reflect(SigninModel.prototype,"SigninModel");var ChongshengLevelConfig=function(){function t(){}return t.level="level",t}();__reflect(ChongshengLevelConfig.prototype,"ChongshengLevelConfig");var ChongZhi1Config=function(){function t(){}return t}();__reflect(ChongZhi1Config.prototype,"ChongZhi1Config");var CrossBossCommonConfig=function(){function t(){}return t}();__reflect(CrossBossCommonConfig.prototype,"CrossBossCommonConfig");var CrossBossFubenConfig=function(){function t(){}return t.fbId="fbId",t}();__reflect(CrossBossFubenConfig.prototype,"CrossBossFubenConfig");var CrownStoreConfig=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return __extends(e,t),e}(BossStoreConfig);__reflect(CrownStoreConfig.prototype,"CrownStoreConfig");var FuliActBtnRenderer=function(t){function e(){var e=t.call(this)||this;return e.skinName="FuliActBtnRendererEUI",e}return __extends(e,t),e.prototype.dataChanged=function(){if(this.data){var t=this.data;this.iconDisplay.source=t+"1",this.selectIcon.source=t+"2"}},e}(BaseItemRender);__reflect(FuliActBtnRenderer.prototype,"FuliActBtnRenderer"),window.FuliActBtnRenderer=FuliActBtnRenderer;var CultureAttrConfig=function(){function t(){}return t}();__reflect(CultureAttrConfig.prototype,"CultureAttrConfig");var CulturePosConfig=function(){function t(){}return t}();__reflect(CulturePosConfig.prototype,"CulturePosConfig");var FuwenSys=function(t){function e(){var e=t.call(this)||this;return e.fuwenDatas=[],e.posDatas=[],e.equipType=[],e.posLibrary=1,e.libraryCode=0,e.sysId=PackId.Element,e.reg(1,e.doEquipUpgrade),e.reg(3,e.patchLuckyDraw),e.reg(4,e.doBuyLibrary),e.reg(6,e.doEquip),e.reg(7,e.doUnEquip),e.reg(8,e.patchBagUpgrade),e}return __extends(e,t),e.ins=function(){return t.getIns.call(this,e)},e.prototype.doBagData=function(t){this.fuwenDatas=[];for(var e,i=t.readInt(),n=0;i>n;n++)e=new FuwenData,e.parser(t),this.fuwenDatas.push(e);this.patchInitBag(),RpFun.showFuwen()},e.prototype.patchInitBag=function(){},e.prototype.doDeleteItem=function(t){for(var e=t.readDouble(),i=this.fuwenDatas.length-1;i>=0;i--)if(this.fuwenDatas[i].handle==e){this.patchBagdel(this.fuwenDatas[i]),this.fuwenDatas.splice(i,1);break}RpFun.showFuwen()},e.prototype.patchBagdel=function(t){return t},e.prototype.doAddItem=function(t){var e=new FuwenData;e.parser(t),this.fuwenDatas.unshift(e);var i=t.readByte(),n=t.readByte();i&&TipsSys.ins().showtipsNew(e.baseConfig.name+" +"+e.count,GConst.PZColor[e.baseConfig.quality],n),this.patchBagAdd(e),RpFun.showFuwen()},e.prototype.patchBagAdd=function(t){return t},e.prototype.sendEquipUpgrade=function(t){var e=this.getBytes(1);e.writeByte(t),this.send(e)},e.prototype.doEquipUpgrade=function(t){var e=this.getEquipData(t.readByte());e.id=t.readInt(),this.patchUpdateEquip(e),RpFun.showFuwen(),RpFun.showFuwenLevelUp()},e.prototype.patchUpdateEquip=function(t){return t},e.prototype.sendBagUpgrade=function(t){var e=this.getBytes(2);e.writeInt(t.length);for(var i in t)e.writeInt(t[i].id);this.send(e)},e.prototype.sendLuckyDraw=function(t){var e=this.getBytes(3);e.writeInt(t),this.send(e)},e.prototype.patchLuckyDraw=function(t){for(var e=[],i=[],n=t.readByte(),a=0;n>a;a++){var o=new FuwenData;o.id=t.readInt(),o.count=1,e.push(o),o.baseConfig.quality>=4&&i.push(o)}return i.length>0&&openWin(ItemFuWenTipsWin,i),[e]},e.prototype.sendBuyLibrary=function(t){var e=this.getBytes(4);e.writeByte(t),this.send(e)},e.prototype.doBuyLibrary=function(t){var e=t.readInt();this.libraryCode=t.readInt(),this.posLibrary=e,2==this.libraryCode&&this.patchBuyLibrary(),RpFun.showFuwenChoujiang()},e.prototype.patchBuyLibrary=function(){},e.prototype.sendEquip=function(t,e){var i=this.getBytes(6);i.writeByte(t),i.writeInt(e),this.send(i)},e.prototype.doEquip=function(t){var e=this.getEquipData(t.readByte());e.id=t.readInt();var i=e.baseConfig.type;this.equipType[e.pos]=i,this.patchUpdateEquip(e),RpFun.showFuwen(),RpFun.showFuwenLevelUp()},e.prototype.sendUnEquip=function(t){var e=this.getBytes(7);e.writeByte(t),this.send(e)},e.prototype.doUnEquip=function(t){var e=t.readByte(),i=(t.readInt(),this.getEquipData(e));i.id=0,this.equipType[e]=0,this.patchUpdateEquip(null),RpFun.showFuwen(),RpFun.showFuwenLevelUp()},e.prototype.patchBagUpgrade=function(t){this.posDatas.length=0,this.equipType.length=0;for(var e=t.readByte(),i=0;e>i;i++){var n=this.getEquipData(i);n.id=t.readInt(),n.isNullEquip()?this.equipType.push(0):this.equipType.push(n.baseConfig.type)}},e.prototype.getEquipData=function(t){return this.posDatas[t]||(this.posDatas[t]=new FuwenPosData(t))},e.prototype.getEquipDatas=function(){return this.posDatas},e.prototype.getPower=function(){for(var t=0,e=0,i=this.posDatas;e<i.length;e++){var n=i[e];t+=n.getPower()}return t},e.prototype.sortBag=function(){return this.fuwenDatas.sort(this.sortData),this.fuwenDatas},e.prototype.sortData=function(t,e){var i=0;return i=SortUtil.sortDesc(t.baseConfig.quality,e.baseConfig.quality),0!=i?i:(i=SortUtil.sortAsc(t.baseConfig.id,e.baseConfig.id),0!=i?i:i=SortUtil.sortDesc(t.level,e.level))},e.prototype.formatNextLevelConfig=function(t,e){if(t.level>=Cfg.getConfig(ElementOtherConfig).maxLevel)return t;for(var i,n,a=t.level;a<Cfg.getConfig(ElementOtherConfig).maxLevel;a--)return i=Cfg.getConfig(ElementLevelConfig,t.soleid),n=Cfg.getConfig(ElementLevelConfig,t.soleid+1),e-i.upLevelConsu>=n.upLevelConsu?this.formatNextLevelConfig(n,e-i.upLevelConsu):n},e.prototype.formatNextAttr=function(t,e){var i=[];if(t.level<Cfg.getConfig(ElementOtherConfig).maxLevel)for(var n in t.lvCfg.attr){var a=t.lvCfg.attr[n].type,o=e.attr[n].value-t.lvCfg.attr[n].value;i.push(new AttrData(a,o))}return i},e.prototype.calFuwenFightPower=function(t){var e=0;for(var i in t.lvCfg.attr){var n=t.lvCfg.attr[i];e+=GFunc.getPower1(n.type,n.value)}return e>>0},e.prototype.calDamonScore=function(t){var e=0,i=Cfg.getConfig(ElementLevelConfig,t.baseConfig.soleid);for(var n in i.attr){var a=i.attr[n];e+=GFunc.getPower1(a.type,a.value)}return e>>0},e.prototype.getBagCount=function(){return e.BAG_NUM-e.ins().fuwenDatas.length},e.BAG_NUM=200,e.TEMP_TYPE=0,e.EQUIP_COUNT=8,e}(BaseSys);__reflect(FuwenSys.prototype,"FuwenSys");var System;!function(t){t.fuwenSys=FuwenSys.ins.bind(FuwenSys)}(System||(System={})),window.FuwenSys=FuwenSys;var CultureTypeConfig=function(){function t(){}return t}();__reflect(CultureTypeConfig.prototype,"CultureTypeConfig");var FuwenPosData=function(t){function e(e){var i=t.call(this)||this;return i.pos=0,i.pos=e,i}return __extends(e,t),e.prototype.isNullEquip=function(){return 0==this.id},e.prototype.isPos=function(){return!0},e}(FuwenData);__reflect(FuwenPosData.prototype,"FuwenPosData");var FuwenEquipItem=function(t){function e(){var e=t.call(this)||this;return e.skinName="FuwenEquipItemEUI",e.setSkinPart("itemIcon",new FuwenItem),e.addClickE(e.upgradeBtn,e.onClick),e}return __extends(e,t),e.prototype.onClick=function(t){var e=this.data;if(e.isPos())FuwenSys.ins().sendUnEquip(e.pos);else{if(0==e.baseConfig.quality)return void showtipsFail(Lang.fuwen_str4);FuwenSys.TEMP_TYPE=FuwenEquipListPanel.posElementData.isNullEquip()?0:FuwenEquipListPanel.posElementData.baseConfig.type,FuwenSys.ins().sendEquip(FuwenEquipListPanel.posElementData.pos,e.id)}closeWin(FuwenEquipWin)},e.prototype.dataChanged=function(){var t=this.data;this.itemIcon.data=t;var e=GConst.PZColor[t.baseConfig.quality],i=Lang.common_quality[t.baseConfig.quality];if(this.labelName.textFlow=addColorTF(t.baseConfig.name+"（"+i+"）",e),this.levelTxt.text=""+t.level,this.attrTxt.text=AttrData.parse(t.lvCfg.attr).join("\n"),this.upgradeBtn.visible=!0,this.hintTxt.visible=!1,t.isPos())this.upgradeBtn.skinName="BtnMin1_6",this.upgradeBtn.label=Lang.fuwen_str1;else if(this.upgradeBtn.skinName="BtnMin1_2mid",this.upgradeBtn.label=Lang.fuwen_str2,FuwenEquipListPanel.posElementData.isNullEquip()||FuwenEquipListPanel.posElementData.baseConfig.type!=t.baseConfig.type){var n=FuwenSys.ins().equipType;-1!=n.indexOf(t.baseConfig.type)&&(this.upgradeBtn.visible=!1,this.hintTxt.visible=!0)}},e.prototype.getPeiDaiBtn=function(){return this.upgradeBtn},e}(BaseItemRender);__reflect(FuwenEquipItem.prototype,"FuwenEquipItem"),window.FuwenEquipItem=FuwenEquipItem;var FuwenItem=function(t){function e(){var e=t.call(this)||this;return e.isSelect=!1,e.showState="",e.skinName="FuwenItemEUI",e}return __extends(e,t),e.prototype.getShowState=function(){return this.showState},e.prototype.dataChanged=function(){if("string"==typeof this.data)this.currentState=this.data+"",this.showState=this.data+"";else if(this.data&&0!=this.data.id){this.showState=e.STATE_EQUIP,this.currentState=e.STATE_EQUIP;var t=this.data;this.iconImg.source=ResMgr.getElementIconRes(t.baseConfig.icon);var i=StrUtil.addColor(t.baseConfig.name,GConst.PZColor[t.baseConfig.quality]);this.nameTxt.textFlow=addColorTF(i),this.levelTxt.text=""+t.level,i=AttrData.parse(t.lvCfg.attr,{fm:AttrData.getFm(13486270,6144298)}).join("\n"),this.attrTxt.textFlow=addColorTF(i)}this.selectImg.source=this.showState==e.STATE_EQUIP?"fuwen_zycs_kuang02_00":"fuwen_zycs_kuang01_00"},e.prototype.setIcon=function(t){this.iconImg.source=t},e.prototype.setShowName=function(t){this.nameTxt.visible=t},e.prototype.setIsSelect=function(t){t!=this.isSelect&&(this.selectImg.visible=this.isSelect=t)},Object.defineProperty(e.prototype,"selected",{get:function(){return this.isSelect},set:function(t){this.setIsSelect(t)},enumerable:!0,configurable:!0}),e.STATE_LOCK="lock",e.STATE_IDLE="idle",e.STATE_EQUIP="equip",e}(BaseItemRender);__reflect(FuwenItem.prototype,"FuwenItem"),window.FuwenItem=FuwenItem;var FuwenItem2=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return __extends(e,t),e.prototype.dataChanged=function(){if(!(this.data instanceof FuwenPosData))return void(this.currentState=FuwenItem.STATE_LOCK);this.updateRedPoint();var t=this.data,e=Cfg.getConfig(ElementLockPosConfig,t.pos).lockLevel;if(this.getPlayLevel()<e){this.currentState=FuwenItem.STATE_LOCK;var i=Cfg.getConfig(ElementLockPosConfig,this.itemIndex).lockLevel;this.nameTxt.textFlow=addColorTF(""+GFunc.GetLvStrByLv(i)+Lang.jewel_str3,16711680),this.icon=""}else if(this.data.isNullEquip())this.currentState=FuwenItem.STATE_IDLE,this.icon="public_zycs_jh1";else{this.currentState=FuwenItem.STATE_EQUIP,this.icon=ResMgr.getElementIconRes(t.baseConfig.icon);var n=StrUtil.addColor(t.baseConfig.name,GConst.PZColor[t.baseConfig.quality]);this.nameTxt.textFlow=addColorTF(n),this.levelTxt.text=""+t.level}this.selectImg.source=this.currentState==FuwenItem.STATE_EQUIP?"fuwen_zycs_kuang02_00":"fuwen_zycs_kuang01_00"},e.prototype.updateRedPoint=function(){this.redPoint.visible=RpFun.getElementRed(this.data)||RpFun.getElementLevelUpRed(this.data)||RpFun.getElementReplaceRed(this.data)},e.prototype.getPlayLevel=function(){return Actor.ins().level},Object.defineProperty(e.prototype,"width",{get:function(){return 90},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"height",{get:function(){return 90},enumerable:!0,configurable:!0}),e}(eui.ItemRenderer);__reflect(FuwenItem2.prototype,"FuwenItem2"),window.FuwenItem2=FuwenItem2;var FuwenItem3=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return __extends(e,t),e.prototype.dataChanged=function(){this.fwicon=ResMgr.getElementIconRes(this.data.baseConfig.icon),this.fwName=this.data.baseConfig.name,this.fwLv=this.data.level+"",this.fwAtt=addColorTF(AttrData.parse(this.data.lvCfg.attr,{fm:AttrData.getFm(13486270,6144298)}).join("\n"))},e}(eui.ItemRenderer);__reflect(FuwenItem3.prototype,"FuwenItem3"),window.FuwenItem3=FuwenItem3;var FuwenLibraryItem=function(t){function e(){var e=t.call(this)||this;return e.isShowBuy=!1,e.skinName="FuwenLibraryItemEUI",e.buyTxt.textFlow=addColorTF(Lang.fuwen_str3,2343978,!0),e.iconImg.name="FuwenLibraryItem.iconImg",e.buyBg.name="FuwenLibraryItem.buyBg",e.buyTxt.name="FuwenLibraryItem.buyTxt",e}return __extends(e,t),e.prototype.dataChanged=function(){"number"==typeof this.data&&(this.itemData=Cfg.getConfig(ElementLibraryConfig,this.data),this.iconImg.source="fuwen_zycs_0"+this.data,this.nameTxt.textFlow=addColorTF(StrUtil.addColor(""+this.itemData.name,GConst.PZColor[this.data-1])))},e.prototype.setShowBuy=function(t){t!=this.isShowBuy&&(this.isShowBuy=this.buyBg.visible=this.buyTxt.visible=t)},e.prototype.getIsShowBuy=function(){return this.isShowBuy},e}(BaseItemRender);__reflect(FuwenLibraryItem.prototype,"FuwenLibraryItem"),window.FuwenLibraryItem=FuwenLibraryItem;var CustomInvestConfig=function(){function t(){}return t}();__reflect(CustomInvestConfig.prototype,"CustomInvestConfig");var DailyFubenConfig=function(){function t(){}return t}();__reflect(DailyFubenConfig.prototype,"DailyFubenConfig");var FuwenTilianPanel=function(t){function e(){var e=t.call(this)||this;return e.items=[],e.lastPosLibrary=1,e.lastArrangeTime=0,e.isOkClick=!0,e.isTen=!1,e.isAutoTen=!1,e.skinName="FuwenTilianPanelEUI",e.setSkinPart("actRedPointGoto",new ActRedPointGoto),e.setSkinPart("item0",new FuwenLibraryItem),e.setSkinPart("item1",new FuwenLibraryItem),e.setSkinPart("item2",new FuwenLibraryItem),e.setSkinPart("item3",new FuwenLibraryItem),e.setSkinPart("item4",new FuwenLibraryItem),e.init(),e}return __extends(e,t),e.prototype.init=function(){this.movieclip=new MC,this.movieclip.x=this.imgMC.x,this.movieclip.y=this.imgMC.y-1,this.addChild(this.movieclip),this.imgMC.source="",this.imgLine.alpha=0,this.labelDes.visible=!1,this.list.itemRenderer=FuwenItem,this.item0.data=1,this.item1.data=2,this.item2.data=3,this.item3.data=4,this.item4.data=5,this.items=[this.item0,this.item1,this.item2,this.item3,this.item4],this.item3.setShowBuy(!0)},e.prototype.open=function(){this.addClickE(this.btnLianqu,this.onClickBtn),this.addClickE(this.btnLianqu10,this.onClickBtn),this.addClickE(this.btnZhengli,this.onClickBtn),this.addClickE(this.item3,this.onClickLibrary),this.addItemTapE(this.list,this.onClickList),this.addLsn(FuwenSys.ins().patchInitBag,this.updateListData),this.addLsn(FuwenSys.ins().patchLuckyDraw,this.updateAddListData),this.addLsn(FuwenSys.ins().patchBagdel,this.updateListData),this.addLsn(FuwenSys.ins().patchBagUpgrade,this.updateListData),this.addLsn(FuwenSys.ins().patchBuyLibrary,this.updateLibrary),this.addLsn(LogicSys.ins().patchCurrency,this.updateElementPowder),this.setOkClick(),this.setPanelData(),this.actRedPointGoto.open(),this.actRedPointGoto.setType(RankType.YSZL)},e.prototype.close=function(){t.prototype.close.call(this),this.setOkClick(),this.isAutoTen=!1,this.actRedPointGoto.close()},e.prototype.setPanelData=function(){this.updateListData(),this.updateLibrary(),this.updateElementPowder(),this.btnLianqu10.label=Lang.fuwen_str17,this.imgLine.alpha=0
},e.prototype.updateAddListData=function(t){this.isTen?this.huntTenEff(this.lastPosLibrary,t):this.huntEff(this.lastPosLibrary,t),this.updateListData()},e.prototype.updateListData=function(){var t=FuwenSys.ins().fuwenDatas;this.list.dataProvider=new eui.ArrayCollection(t),t&&t.length>0?this.labelDes.visible=!1:this.labelDes.visible=!0},e.prototype.updateLibrary=function(){this.items[this.lastPosLibrary-1].selectImg.visible=!1,this.items[FuwenSys.ins().posLibrary-1].selectImg.visible=!0,this.lastPosLibrary=FuwenSys.ins().posLibrary,this.labelConsumeCount.text=""+Cfg.getConfig(ElementLibraryConfig,FuwenSys.ins().posLibrary).huntOnce,this.setOkClick(),this.isAutoTen&&this.hunt(10),2==FuwenSys.ins().libraryCode&&showtipsSuc(Lang.fuwen_str7),FuwenSys.ins().libraryCode=0},e.prototype.updateElementPowder=function(t){t&&t.type!=CurType.elementDust||(this.labelTotleCount.text=""+Actor.ins().getCurrency(CurType.elementDust))},e.prototype.onClickBtn=function(t){switch(t.target){case this.btnLianqu:this.hunt(1);break;case this.btnLianqu10:this.isAutoTen=!this.isAutoTen,this.isAutoTen&&this.hunt(10);break;case this.btnZhengli:Timer.ins().getEgretTimer()-this.lastArrangeTime>5e3?(this.lastArrangeTime=Timer.ins().getEgretTimer(),FuwenSys.ins().sortBag(),this.updateListData()):showtipsFail(Lang.fuwen_str8)}},e.prototype.setOkClick=function(){this.isOkClick=!0,this.isTen=!1},e.prototype.hunt=function(t){if(10==t&&FuwenSys.ins().fuwenDatas.length>FuwenSys.BAG_NUM-10)return void showtipsFail(Lang.fuwen_str9);if(FuwenSys.ins().fuwenDatas.length>=FuwenSys.BAG_NUM)return void showtipsFail(Lang.fuwen_str10);if(this.isOkClick){var e=Cfg.getConfig(ElementLibraryConfig,FuwenSys.ins().posLibrary).huntOnce;GFunc.checkCurrency(CurType.elementDust,e)?(FuwenSys.ins().sendLuckyDraw(t),this.isOkClick=!1,this.isTen=10==t):this.isAutoTen=!1}},e.prototype.huntEff=function(t,e){var i=this;this.imgLine.source="fuwen_zycs_xian_0"+t;var n=egret.Tween.get(this.imgLine);n.to({alpha:1},500).call(function(){i.imgLine.alpha=0},this),this.addChild(this.movieclip),this.movieclip.playFile(getEffName("yscq"),1,function(){for(var t=e.length,n=0,a=0,o=function(o){if(e[o].baseConfig.quality>0){var s=new eui.Image(ResMgr.getElementIconRes(e[o].baseConfig.icon));s.x=320,s.y=654,i.addChild(s);var r=egret.Tween.get(i.imgLine);r.wait(300).call(function(){var e=n%5,o=Math.floor(n/5);n++,GFunc.flyTo(s,new XY(330,654),new XY(59+132*e,75+137*o),700,egret.Ease.sineInOut,function(){DisUtil.remove(s),a++,a==t&&i.updateLibrary()},i)},i),TipsSys.ins().showtipsNew(e[o].baseConfig.name+" +"+e[o].count,GConst.PZColor[e[o].baseConfig.quality])}else a++,a==t&&i.updateLibrary()},s=0;t>s;s++)o(s)})},e.prototype.huntTenEff=function(t,e){var i=this;this.imgLine.source="fuwen_zycs_xian_0"+t;var n=egret.Tween.get(this.imgLine);n.to({alpha:1},500).call(function(){i.imgLine.alpha=0},this);for(var a=e.length,o=0,s=0,r=function(t){if(e[t].baseConfig.quality>0){var n=new eui.Image(ResMgr.getElementIconRes(e[t].baseConfig.icon));n.x=320,n.y=523,u.addChild(n);var r=egret.Tween.get(u.imgLine);r.wait(50).call(function(){var t=o%5,e=Math.floor(o/5);o++,GFunc.flyTo(n,new XY(330,534),new XY(59+132*t,72+137*e),1400,egret.Ease.sineInOut,function(){DisUtil.remove(n),s++,s==a&&i.updateLibrary()},i)},u),TipsSys.ins().showtipsNew(e[t].baseConfig.name+" +"+e[t].count,GConst.PZColor[e[t].baseConfig.quality])}else s++,s==a&&u.updateLibrary()},u=this,h=0;a>h;h++)r(h)},e.prototype.onClickLibrary=function(t){var e=t.currentTarget;switch(t.target.name){case"FuwenLibraryItem.iconImg":break;case"FuwenLibraryItem.buyBg":case"FuwenLibraryItem.buyTxt":var i=e.itemData;if(FuwenSys.ins().posLibrary>=i.pos)return void showtipsFail(Lang.fuwen_str11);if(!this.isOkClick)return void showtipsFail(Lang.fuwen_str12);var n=new PopupData;n.desc=Lang.fuwen_str13.replace("$yb$",""+i.cost),n.setFunction(this,function(){Actor.ins().getCurrency(CurType.yb)>=i.cost?FuwenSys.ins().sendBuyLibrary(i.pos):showtipsFail(""+Lang.common_str12+i.cost)}),openWin(CommonTipsWin,n)}},e.prototype.onClickList=function(t){var e=t.itemRenderer;openWin(FuwenTipsWin,e.data,1)},e.prototype.getCuiQuBtn=function(){return this.btnLianqu},e.getSysId=function(){return 209},e.getTitle=function(){return"btz_zycs_fw"},e.getTabTitle=function(){return"bqz_zycs_fwlq"},e}(BasePanel);__reflect(FuwenTilianPanel.prototype,"FuwenTilianPanel"),window.FuwenTilianPanel=FuwenTilianPanel;var DirUtil=function(){function t(){}return t.get8Dir=function(t,e){var i=MathUtil.getAngle(MathUtil.getRadianByP(t,e));return this.angleToDir(i)},t.get4Dir=function(t,e){var i=MathUtil.getAngle(MathUtil.getRadianByP(t,e));return this.angleTo4dir(i)},t.dirToAngle=function(t){return t*=45,t-=90},t.angleToDir=function(t){return-90>t&&(t+=360),Math.round((t+90)/45)%8},t.angleTo4dir=function(t){-90>t&&(t+=360);var e=2*Math.floor((t+90)/90%4)+1;return e},t.dirTo4dir=function(t){var e=[1,3,5,7];if(e.indexOf(t)>=0)return t;var i=this.dirToAngle(t);return this.angleTo4dir(i)},t.dirOpposit=function(t){return 4>t?t+4:t-4},t.get5DirBy8Dir=function(t){return t-this.isScaleX(t)},t.isScaleX=function(t){var e=2*(t-4);return 0>e&&(e=0),e},t.getGridByDir=function(t,e,i){void 0===e&&(e=1),void 0===i&&(i=new XY);var n=this.dirToAngle(this.dirOpposit(t));return MathUtil.getDirMove(n,e*MapBase.CELL_SIZE,i.x,i.y)},t}();__reflect(DirUtil.prototype,"DirUtil");var FuwenEquipWin=function(t){function e(){return t.call(this)||this}return __extends(e,t),e.prototype.initUI=function(){t.prototype.initUI.call(this),this.layer=LayerMgr.Popup,t.prototype.addBg.call(this)},e.prototype.open=function(e){void 0===e&&(e=null),this.data=e,t.prototype.open.call(this)},e.openCheck=function(){return t.openCheck.call(this)},e.prototype.getParam=function(){return[this.data]},e.prototype.getPeiDaiBtn=function(){return this.getPanel(FuwenEquipListPanel).getPeiDaiBtn()},e.panelNames=[FuwenEquipListPanel],e}(BaseWinAutoTab);__reflect(FuwenEquipWin.prototype,"FuwenEquipWin"),window.FuwenEquipWin=FuwenEquipWin;var FuwenSelectWin=function(t){function e(){var e=t.call(this)||this;return e.layer=LayerMgr.Popup,e.skinName="FuwenSelectWinEUI",e.addBg(),e}return __extends(e,t),e.prototype.initUI=function(){t.prototype.initUI.call(this),this.checkBoxs=[this.checkBox0,this.checkBox1,this.checkBox2]},e.prototype.open=function(){t.prototype.open.call(this),this.addClickE(this.selectAllBtn,this.onClick),this.addClickE(this.confirmBtn,this.onClick),this.quality=[]},e.prototype.onClick=function(t){switch(t.target){case this.selectAllBtn:this.checkBox0.selected=!0,this.checkBox1.selected=!0,this.checkBox2.selected=!0;break;case this.confirmBtn:this.selelctQuality(),closeWin(this)}},e.prototype.selelctQuality=function(){this.quality=[];for(var t=this.checkBoxs.length,e=0;t>e;e++)this.checkBoxs[e].selected&&this.quality.push(e)},e}(BaseWinSingle);__reflect(FuwenSelectWin.prototype,"FuwenSelectWin"),window.FuwenSelectWin=FuwenSelectWin;var DailyOnlineConfigSeven=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return __extends(e,t),e}(DailyOnlineConfig);__reflect(DailyOnlineConfigSeven.prototype,"DailyOnlineConfigSeven");var FuwenTipsWin=function(t){function e(){var e=t.call(this)||this;return e.layer=LayerMgr.Popup,e.skinName="FuwenTipsWinEUI",e.setSkinPart("itemIcon",new FuwenItem),e.addBg(),e}return __extends(e,t),e.prototype.childrenCreated=function(){this.itemIcon.setShowName(!1);var t=5;this.labelAttr1.lineSpacing=t,this.attrTxt.lineSpacing=t},e.prototype.open=function(e){t.prototype.open.call(this),this.addClickEndE(this.background,this.otherClose),this.setData(e)},e.prototype.setData=function(t){this.currElementData=t;var e=t.baseConfig.quality;this.itemIcon.data=t;var i=StrUtil.addColor(t.baseConfig.name+"（"+Lang.common_quality[e]+"）",GConst.PZColor[e]);this.labelName.textFlow=addColorTF(i),this.DisplayPower.text=FuwenSys.ins().calFuwenFightPower(t).toFixed(0),this.LabelScore.text=""+Lang.common_str66+FuwenSys.ins().calDamonScore(t),this.levelTxt.text=""+t.level,i=AttrData.parse(t.lvCfg.attr,{fm:"%k："}).join("\n"),this.labelAttr1.textFlow=addColorTF(i),i=AttrData.parse(t.lvCfg.attr,{fm:"%v"}).join("\n"),this.attrTxt.textFlow=addColorTF(i),this.imageState.visible=t.isPos(),this.updateLayoutPanel()},e.prototype.updateLayoutPanel=function(){var t=this.labelAttr1.y+this.labelAttr1.height;this.group.height=t+123},e.prototype.otherClose=function(t){closeWin(this)},e}(BaseWinSingle);__reflect(FuwenTipsWin.prototype,"FuwenTipsWin"),window.FuwenTipsWin=FuwenTipsWin;var KuaiSuPowerRewardWin=function(t){function e(){var e=t.call(this)||this;return e.rewardData=[],e}return __extends(e,t),e.prototype.initUI=function(){t.prototype.initUI.call(this),this.layer=LayerMgr.Popup,this.skinName="KuaiSuPowerRewardWinEUI",this.addBg(),this.listData=new eui.ArrayCollection,this.list.itemRenderer=ItemBaseReward,this.list.dataProvider=this.listData,this.setSkinPart("price",new PriceIcon),this.price.setType(CurType.yb)},e.prototype.open=function(e){t.prototype.open.call(this),this.rewardData=e,this.addClickE(this.btnSaoDang,this.onClick),this.iniData()},e.prototype.iniData=function(){this.listData.source=this.rewardData;var t=FbSys.ins().guajiData.getKsgjSdConsume();this.price.setPrice(t)},e.prototype.onClick=function(t){switch(t.currentTarget){case this.btnSaoDang:if(FbSys.ins().guajiData.getKsgjSdCount()<=0)return void showtipsFail(Lang.fb_str61);if(!GFunc.isCurrency(CurType.yb,FbSys.ins().guajiData.getKsgjSdConsume()))return void showtipsFail(Lang.damon_str35);FbSys.ins().sendGuaJiKsgj(2)}},e}(BaseWinSingle);__reflect(KuaiSuPowerRewardWin.prototype,"KuaiSuPowerRewardWin"),window.KuaiSuPowerRewardWin=KuaiSuPowerRewardWin;var LiXianWin=function(t){function e(){var e=t.call(this)||this;return e.layer=LayerMgr.Popup,e.skinName="LiXianWinEUI",e.listItem.itemRenderer=ItemBaseRewardColor,e.listItem.dataProvider=e.listAwardArr=new eui.ArrayCollection,e.addBg(),e.group1.visible=!urlParam.isShenhe,e.mc=new MC,e.mc.x=e.btnFx.width/2,e.mc.y=e.btnFx.height/2,e.btnFx.addChild(e.mc),e}return __extends(e,t),e.prototype.open=function(){t.prototype.open.call(this),this.addClickE(this.btnOk,this.onClick),this.addClickE(this.btnYueka,this.onClick),this.addClickE(this.btnZhiZun,this.onClick),this.addClickE(this.btnFx,this.onClick),this.addLsn(PfActivitySys.ins().shareCallback,this.shareCallback),this.addLsn(PfActivitySys.ins().patchFxOpen,this.updateState),this.updateData()},e.prototype.shareCallback=function(t){PfActivitySys.ins().hasShare=t,t?(FbSys.ins().sendLiXian(3),closeWin(this)):showtipsFail("分享失败,请重新分享!")},e.prototype.updateState=function(){var t=FbSys.ins().liXianData;if(ComUtil.LixianShowFXBtn){var e=0==t.getRewardCount;this.currentState="state2",GFunc.move(this.group,new XY(320,500),new XY(320,530)),e&&this.mc.playFile(getEffName("guideff"),-1),e||(this.currentState="state3")}else this.currentState="state1"},e.prototype.updateData=function(){this.updateState();var t=FbSys.ins().liXianData;this.lbCurLevel.text=GFunc.GetLvStrByLv(Actor.ins().level),this.lbOldLevel.text=GFunc.GetLvStrByLv(t.oldLevel);var e=t.itemList.concat();SortUtil.sortOn(e,["sortType","quality"],[SortType.down,SortType.down]);for(var i=[],n=0,a=e;n<a.length;n++){var o=a[n];o.tempColor=16775602,i.push(o)}this.listAwardArr.source=i,this.lbTimer.text=""+getFormatTime(t.timer,"hh小时mm分ss秒");var s=ActSys.ins().getActDataById(ActId.ID_99900);this.btnYueka.filters=s.isInYueKaTime()?[]:DisUtil.grayFilter(),this.lbYueka.visible=!s.isInYueKaTime();var r=ActSys.ins().getActDataById(ActId.ID_99500);this.btnZhiZun.filters=r.isAct()?[]:DisUtil.grayFilter(),this.lbZhuZun.visible=!r.isAct(),this.outTime=DateUtil.formatTime(t.timer,"hhxmmfssq")},e.prototype.close=function(){t.prototype.close.call(this),egret.Tween.removeTweens(this.group)},e.prototype.onClick=function(t){switch(t.currentTarget){case this.btnOk:FbSys.ins().sendLiXian(1),closeWin(this);break;case this.btnYueka:FbSys.ins().sendLiXian(1),closeWin(this),openWin(YKWin);break;case this.btnZhiZun:FbSys.ins().sendLiXian(1),closeWin(this),openWin(ZZTQWin);break;case this.btnFx:if(Actor.ins().isLocation)return PfActivitySys.ins().hasShare=!0,FbSys.ins().sendLiXian(3),void closeWin(this);PfActivitySys.ins().shareInfo.showShare()}},e}(BaseWinSingle);__reflect(LiXianWin.prototype,"LiXianWin"),window.LiXianWin=LiXianWin;var LixianWinItem=function(t){function e(){var e=t.call(this)||this;return e.skinName="LixianWinItemEUI",e}return __extends(e,t),e.prototype.dataChanged=function(){var t=this.data;this.lbname.textFlow=addColorTF(t)},e}(BaseItemRender);__reflect(LixianWinItem.prototype,"LixianWinItem"),window.LixianWinItem=LixianWinItem;var MeNeedLevelItem=function(t){function e(){var e=t.call(this)||this;return e.skinName="MeNeedLevelItemEUI",e}return __extends(e,t),e.prototype.dataChanged=function(){var t=this.data,e=t.config;this.icon.source="mainicon_zycs_"+e.icon;var i=StrUtil.addColor("(第"+t.limitConfig.custom+"关开启)",15733780),n=StrUtil.addColor(StrUtil.addUnderLine(e.name),5949490)+(t.isopen?"":i);this.nameTxt.textFlow=addColorTF(n)},e}(BaseItemRender);__reflect(MeNeedLevelItem.prototype,"MeNeedLevelItem"),window.MeNeedLevelItem=MeNeedLevelItem;var DailyOnlineEXConfig=function(){function t(){}return t}();__reflect(DailyOnlineEXConfig.prototype,"DailyOnlineEXConfig");var DailySigninConfig=function(){function t(){}return t}();__reflect(DailySigninConfig.prototype,"DailySigninConfig");var GuideComponentArrow1=function(t){function e(){var e=t.call(this)||this;return e.type=1,e.initUI(),e}return __extends(e,t),e.prototype.initUI=function(){this.skinName="GuideWeekMeiZiEUI",this.touchChildren=!1,this.touchEnabled=!1},e.prototype.onResize=function(t){},e}(GuideComponentArrow);__reflect(GuideComponentArrow1.prototype,"GuideComponentArrow1"),window.GuideComponentArrow1=GuideComponentArrow1;var DamonAppearanceConfig=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return __extends(e,t),e}(AppearanceConfig);__reflect(DamonAppearanceConfig.prototype,"DamonAppearanceConfig");var GuiderBianShen=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return __extends(e,t),e.ins=function(){return t.getIns.call(this,e)},e.prototype.getDisplayObj=function(t,e){var i;switch(t){case GuiderId.Id1036:}return i},e}(Guider);__reflect(GuiderBianShen.prototype,"GuiderBianShen"),window.GuiderBianShen=GuiderBianShen;var GuiderGuWu=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return __extends(e,t),e.ins=function(){return t.getIns.call(this,e)},e.prototype.getDisplayObj=function(t,e){var i;switch(t){case GuiderId.Id2001:1==e?i=getWin(MainWin).getXueseFbGrowBtn():(this.guideData.step=1,i=getWin(MainWin).getXueseFbGrowBtn());break;case GuiderId.Id2002:1==e?i=getWin(MainWin).getEmoFbGrowBtn():(this.guideData.step=1,i=getWin(MainWin).getEmoFbGrowBtn())}return i},e}(Guider);__reflect(GuiderGuWu.prototype,"GuiderGuWu"),window.GuiderGuWu=GuiderGuWu;var GuiderTrigger=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return __extends(e,t),e.ins=function(){return t.getIns.call(this,e)},e.prototype.trigger=function(t,e){var i=Cfg.getConfig(GuideConfig,t),n=GFunc.creatGuideData(1,t,i.params),a=t==GuiderId.Id2001||t==GuiderId.Id2002?GuiderGuWu.ins():Guider.ins(),o=!1;e==GuiderStepType.HM&&i.steps[1]?(n.step=i.steps[1].step,n.endstep=i.steps[1].endstep||i.content.length,o=!0):e==GuiderStepType.JS&&i.steps[0]?(n.step=i.steps[0].step,n.endstep=i.steps[0].endstep||i.content.length,o=!0):e==GuiderStepType.WC&&i.steps[2]&&(n.step=i.steps[2].step,n.endstep=i.steps[2].endstep||i.content.length,o=!0),o&&n.step>0&&(Guider.ins().close(),a.isGuiding||a.show(n))},e.prototype.trigger1=function(t,e,i){void 0===i&&(i=100),Timer.ins()["do"](i,0,1,this.trigger,this,TimerType.LAST,t,e)},e}(BaseSys);__reflect(GuiderTrigger.prototype,"GuiderTrigger"),window.GuiderTrigger=GuiderTrigger;var DamonConstConfig=function(){function t(){}return t}();__reflect(DamonConstConfig.prototype,"DamonConstConfig");var GuideViewStrong=function(t){function e(){return t.call(this)||this}return __extends(e,t),e.prototype.refresh=function(){t.prototype.refresh.call(this),this.drawMask()},e.prototype.open=function(e,i){void 0===i&&(i=null),t.prototype.open.call(this,e,i),this.drawMask()},e.prototype.getMouseCode=function(t){var e;switch(t.type){case egret.TouchEvent.TOUCH_TAP:e=this.rect.contains(t.stageX,t.stageY)?1:0;break;case egret.TouchEvent.TOUCH_MOVE:e=0;break;default:e=0}return e},e}(GuideView);__reflect(GuideViewStrong.prototype,"GuideViewStrong"),window.GuideViewStrong=GuideViewStrong;var DamonHuanhuaBaseConfig=function(){function t(){}return Object.defineProperty(t,"id",{get:function(){return"id"},enumerable:!0,configurable:!0}),Object.defineProperty(t,"stoneid",{get:function(){return"stoneid"},enumerable:!0,configurable:!0}),t}();__reflect(DamonHuanhuaBaseConfig.prototype,"DamonHuanhuaBaseConfig");var GuideViewWeekChangZhu=function(t){function e(){return t.call(this)||this}return __extends(e,t),e.prototype.getMouseCode=function(t){var e;switch(t.type){case egret.TouchEvent.TOUCH_TAP:if(this.checkParent(t.target,this.target)){var i=this.target.localToGlobal(),n=new egret.Rectangle(i.x,i.y,this.target.width,this.target.height);e=n.contains(t.stageX,t.stageY)?1:0}else e=0;break;case egret.TouchEvent.TOUCH_MOVE:e=(this.globalRect.contains(t.stageX,t.stageY),0);break;default:e=0}return e},e.prototype.checkVisible=function(t){return null!=t},e.prototype.checkParent=function(t,e){return t.parent?t.parent==e||t==e?!0:this.checkParent(t.parent,e):!1},e.prototype.gettargetXY=function(){return this.target},e.prototype.onResize=function(){if(this.checkVisible(this.target)){var t=this.target;(this.rect.x!=t.x||this.rect.y!=t.y||this.rect.width!=this.target.width||this.rect.height!=this.target.height)&&this.refresh()}return!1},e}(GuideViewWeek);__reflect(GuideViewWeekChangZhu.prototype,"GuideViewWeekChangZhu"),window.GuideViewWeekChangZhu=GuideViewWeekChangZhu;var GuideViewWeekMask=function(t){function e(){return t.call(this)||this}return __extends(e,t),e.prototype.refresh=function(){t.prototype.refresh.call(this),this.drawMask()},e.prototype.open=function(e,i){void 0===i&&(i=null),t.prototype.open.call(this,e,i),this.drawMask()},e}(GuideViewWeek);__reflect(GuideViewWeekMask.prototype,"GuideViewWeekMask"),window.GuideViewWeekMask=GuideViewWeekMask;var GuildActSys=function(t){function e(){var e=t.call(this)||this;return e.giftRechargelogs=[],e.giftRewardDatas=[],e.giftLevel=0,e.giftIntegral=0,e.time=0,e.guanqiaId=1,e.bossCount=0,e.bossHp=0,e.record=0,e.bossTeamDatas=[],e.isCaptain=!1,e.teamId=0,e.siegeModel=new GuildSiegeModel,e.sysId=PackId.GuildActivity,e.reg(1,e.patchGuildGiftInfo),e.reg(3,e.dostGuildGiftRedPoint),e.reg(11,e.patchGuildBossInfo),e.reg(12,e.patchGuildBossReward),e.reg(13,e.patchGuildBossChallenge),e.reg(21,e.patchGuildBossTeamInfo),e.reg(22,e.patchGuildBossTeamInvitation),e.reg(24,e.patchGuildBossTeamExpel),e.reg(25,e.patchGuildBossTeamDissolution),e.reg(30,e.patchGuildSiegeInfo),e.reg(32,e.patchGuildSiegeUpdate),e}return __extends(e,t),e.ins=function(){return t.getIns.call(this,e)},e.prototype.sendGuildGiftInfo=function(){this.sendBase(1)},e.prototype.patchGuildGiftInfo=function(t){this.giftLevel=t.readShort(),this.giftIntegral=t.readInt(),this.giftRechargelogs=[];for(var e=t.readShort(),i=0;e>i;i++){var n=new GuildGiftRechargeData;n.parser(t),this.giftRechargelogs.push(n)}SortUtil.sortOn(this.giftRechargelogs,["time"],[SortType.down]),this.giftRewardDatas=[],e=t.readShort();for(var i=0;e>i;i++){var n=new GuildGiftRewardData;n.parser(t),this.giftRewardDatas.push(n)}},e.prototype.sendGuildGiftReward=function(){this.sendBase(2)},e.prototype.dostGuildGiftRedPoint=function(t){var e=t.readBoolean();RpFun.guildGiftRedPoint(e)},e.prototype.sendGuildBossInfo=function(){this.sendBase(11)},e.prototype.patchGuildBossInfo=function(t){this.guanqiaId=t.readShort(),this.bossCount=t.readShort(),this.bossHp=Math.ceil(t.readShort()/100),this.record=t.readInt(),this.time=1e3*t.readInt()+Timer.ins().getTimer(),RpFun.guildBossRedPoint(),RpFun.guildBossTZRedPoint()},e.prototype.sendGuildBossReward=function(t){var e=this.getBytes(12);e.writeShort(t),this.send(e)},e.prototype.patchGuildBossReward=function(t){t.readShort();this.record=t.readInt(),RpFun.guildBossRedPoint()},e.prototype.sendGuildBossChallenge=function(){this.sendBase(13)},e.prototype.patchGuildBossChallenge=function(t){closeWin(GuildMapWin),closeWin(GuildActivityWin2),closeWin(GuildBossTeamWin),closeWin(ChatWin)},e.prototype.patchGuildBossTeamInfo=function(t){this.bossTeamDataInfo();for(var e=t.readByte(),i=0;e>i;i++){var n=new GuildBossTeamData;n.parser(t),this.bossTeamDatas[i]=n,Actor.ins().actorID==n.actorId&&(this.isCaptain=n.isCaptain),n.isCaptain&&(this.teamId=n.actorId)}SortUtil.sortOn(this.bossTeamDatas,["isCaptain"],[SortType.down]),openWin(GuildActivityWin2),openWin(GuildBossTeamWin),closeWin(ChatWin)},e.prototype.sendGuildBossTeamInvitation=function(){this.sendBase(22)},e.prototype.patchGuildBossTeamInvitation=function(t){var e=ChatFactory.createData(ChatType.Guild,ChatSubType.GuildBoss);e.parserMessage(t),e.setContent(Lang.guild_str95.replace("$str$",""+StrUtil.addUnderLine(Lang.guild_str96))),ChatSys.ins().addMsg(e)},e.prototype.sendGuildBossTeam=function(t){var e=this.getBytes(23);e.writeInt(t),this.send(e)},e.prototype.sendGuildBossTeamExpel=function(t){var e=this.getBytes(24);e.writeInt(t),this.send(e)},e.prototype.patchGuildBossTeamExpel=function(){this.bossTeamDataInfo(),closeWin(GuildBossTeamWin)},e.prototype.sendGuildBossTeamDissolution=function(){this.sendBase(25)},e.prototype.patchGuildBossTeamDissolution=function(){this.bossTeamDataInfo(),closeWin(GuildBossTeamWin)},e.prototype.sendGuildBossTeamInfo=function(){this.sendBase(26)},e.prototype.sendGuildSiegeInfo=function(t){var e=this.getBytes(30);e.writeByte(t),this.send(e)},e.prototype.patchGuildSiegeInfo=function(t){this.siegeModel.parserGuildSiegeInfo(t),RpFun.showGuildSiegeRedPoint()},e.prototype.patchGuildSiegeUpdate=function(t){this.siegeModel.parserGuildSiegeUpdate(t),RpFun.showGuildSiegeRedPoint()},e.prototype.bossTeamDataInfo=function(){this.bossTeamDatas=[];for(var t=Cfg.getConfig(GuildBossCommonConfig).teamNum,e=0;t>e;e++)this.bossTeamDatas.push(new GuildBossTeamData)},e.prototype.getBossTeamNum=function(){for(var t=0,e=0,i=this.bossTeamDatas;e<i.length;e++){var n=i[e];n.isSomebody&&(t+=1)}return t},e}(BaseSys);__reflect(GuildActSys.prototype,"GuildActSys");var System;!function(t){t.guildActSys=GuildActSys.ins.bind(GuildActSys)}(System||(System={})),window.GuildActSys=GuildActSys;var GuildShopSys=function(t){function e(){var e=t.call(this)||this;return e.level=0,e.useCount=0,e.records=[],e.boxs=[],e.sysId=PackId.GuildShop,e.reg(1,e.patchGuildShopInfo),e.reg(2,e.patchGetBoxRecord),e.reg(3,e.patchOpenBox),e}return __extends(e,t),e.ins=function(){return t.getIns.call(this,e)},e.prototype.sendGetInfo=function(){this.sendBase(1)},e.prototype.patchGuildShopInfo=function(t){this.level=t.readByte(),this.useCount=t.readByte(),RpFun.showGuildShopRedPoint()},e.prototype.sendGetBoxRecord=function(){var t=this.getBytes(2);0==this.records.length?t.writeInt(0):t.writeInt(this.records[0].times),this.send(t)},e.prototype.patchGetBoxRecord=function(t){for(var e=t.readByte(),i=0;e>i;i++){var n=new GuildShopRecord;n.index=i,n.times=t.readInt(),n.roleName=t.readString(),n.itemId=t.readInt(),this.records.length>=50&&this.records.pop(),this.records.unshift(n)}},e.prototype.sendOpenBox=function(){this.sendBase(3)},e.prototype.patchOpenBox=function(t){var e=t.readByte();this.boxs.length=0;for(var i=0;e>i;i++){var n=new ItemDataReward;n.id=t.readInt(),n.count=t.readInt(),this.boxs[i]=n}this.useCount-=1,RpFun.showGuildShopRedPoint()},e.prototype.isOpen=function(){return this.level>0},e.prototype.isMax=function(){return this.level==Cfg.getGuildLevelMaxConfig(GuildBuildingType.GUILD_SHOP).level},e.prototype.hasBoxAward=function(){return this.boxs.length>0},e}(BaseSys);__reflect(GuildShopSys.prototype,"GuildShopSys");var System;!function(t){t.guildShopSys=GuildShopSys.ins.bind(GuildShopSys)}(System||(System={})),window.GuildShopSys=GuildShopSys;var GuildSys=function(t){function e(){var e=t.call(this)||this;e.guildID=0,e.guildName="",e.buildingLevels=[],e.notice="",e.records=[],e.guildListInfos=[],e.members=[],e.myApplyGuildIds=[],e.applyPlayers=[],e.guillRoleSkillInfo=[],e.taskInfos=[],e._memberSortType=0,e.pageMax=1,e.myTotalCon=0,e.myOffice=0,e.conCount=[],e.autoLimit=1e5,e.hasApplyNotice=!1,e.tempOffice=0,e.sysId=PackId.Guild,e.reg(1,e.patchGuildInfo),e.reg(2,e.doGuildMembers),e.reg(3,e.patchGuildList),e.reg(4,e.doGuildCreate),e.reg(6,e.patchJoinGuild),e.reg(7,e.doApplyInfos),e.reg(8,e.doProcessJoin),e.reg(9,e.patchChangeOffice),e.reg(11,e.doQuitGuild),e.reg(13,e.patchGuildMoney),e.reg(14,e.patchChangeNotice),e.reg(15,e.doGuildSkillInfo),e.reg(16,e.doLearnGuildSkill),e.reg(17,e.patchUpBuilding),e.reg(18,e.doPracticeGuildSkill),e.reg(19,e.doTaskInfos),e.reg(20,e.doGuildTaskUpdate),e.reg(22,e.patchManageList),e.reg(23,e.doManage),e.reg(24,e.patchConCount),e.reg(25,e.patchMyGuildInfo),e.reg(26,e.patchGuildMessage),e.reg(27,e.patchAllGuildMessage),e.reg(28,e.doAddGuildlimit);for(var i=0;i<GuildBuildingType.GUILD_BUILD_COUNT;i++)e.buildingLevels[i]=0;return e}return __extends(e,t),e.ins=function(){return t.getIns.call(this,e)},e.prototype.sendGuildInfo=function(){this.sendBase(1)},e.prototype.patchGuildInfo=function(t){var e=t.readUnsignedByte();if(1==e){this.guildID=t.readInt(),this.guildName=t.readString();for(var i=t.readUnsignedByte(),n=0;i>n;n++)this.buildingLevels[n]=t.readUnsignedByte();Actor.ins().setCurrency(CurType.fuildfund,t.readInt()),this.notice=t.readString(),this.isAuto=1==t.readUnsignedByte(),this.autoLimit=t.readDouble(),RpFun.guildSkillRedPoint(),RpFun.guildUpLvRedPoint(PCode.ADD)}},e.prototype.sendGuildMembers=function(){this.sendBase(2)},e.prototype.doGuildMembers=function(t){var e=t.readInt();this.members.length=e;for(var i=0;e>i;i++){var n=new GuildMemberInfo;n.parser(t),this.members[i]=n}this.members.sort(this.memberSortFunc),this.patchGuildMembers()},e.prototype.patchGuildMembers=function(){},e.prototype.sendGuildList=function(){this.sendBase(3)},e.prototype.patchGuildList=function(t){var e=t.readInt();this.guildListInfos.length=e;for(var i=0;e>i;i++){var n=new GuildListInfo;n.guildRank=i+1,n.parser(t),this.guildListInfos[i]=n}},e.prototype.sendGuildCreate=function(t,e){var i=this.getBytes(4);i.writeByte(t),i.writeString(e),this.send(i)},e.prototype.doGuildCreate=function(t){var e=t.readUnsignedByte();0==e&&(this.guildID=t.readInt(),closeWin(GuildCreateWin),closeWin(GuildApplyWin),openWin(GuildMapWin),showtipsFail(Lang.guild_str97),this.sendGuildInfo())},e.prototype.sendQuitGuild=function(){this.sendBase(5)},e.prototype.sendJoinGuild=function(t){var e=this.getBytes(6);e.writeInt(t),this.send(e)},e.prototype.patchJoinGuild=function(t){this.myOffice>=GuildOffice.FU_MENG_ZHU&&(this.patchGuildJoinResult(),this.patchOtherApplysInfos(),this.hasApplyNotice=!0,RpFun.showGuildInfoRedPoint())},e.prototype.patchGuildJoinResult=function(){},e.prototype.patchOtherApplysInfos=function(){},e.prototype.sendOtherApplyInfos=function(){this.hasApplyNotice=!1,this.sendBase(7)},e.prototype.doApplyInfos=function(t){var e=t.readInt();this.applyPlayers.length=e;for(var i=0;e>i;i++){var n=new GuildApplyInfo;n.parser(t),this.applyPlayers[i]=n}SortUtil.sortOn(this.applyPlayers,["power"],[SortType.down]),RpFun.showGuildInfoRedPoint(),this.patchOtherApplysInfos()},e.prototype.sendProcessOtherJoin=function(t,e){this.removeOtherApply(t);var i=this.getBytes(8);i.writeInt(t),i.writeByte(e),this.send(i)},e.prototype.removeOtherApply=function(t){for(var i=e.ins().applyPlayers,n=0;n<i.length;n++){var a=i[n];if(a.userId==t){i.splice(n,1);break}}RpFun.showGuildInfoRedPoint()},e.prototype.doProcessJoin=function(t){var e=t.readInt(),i=t.readUnsignedByte(),n=this.myApplyGuildIds.indexOf(e);-1!=n&&0==i&&this.myApplyGuildIds.splice(n,1),this.patchGuildJoinResult()},e.prototype.sendChangeOffice=function(t,e){var i=this.getBytes(9);i.writeInt(t),i.writeByte(e),this.send(i)},e.prototype.patchChangeOffice=function(t){for(var e=t.readInt(),i=t.readUnsignedByte(),n=0;n<this.members.length;n++){var a=this.getGuildMembersByIndex(n);if(a.userId==e)return a.office=i,this.myOffice=e==Actor.ins().actorID?i:this.myOffice,this.sendGuildMembers(),a}return null},e.prototype.sendTanhe=function(){this.sendBase(10)},e.prototype.sendKick=function(t){var e=this.getBytes(11);e.writeInt(t),this.send(e)},e.prototype.doQuitGuild=function(t){var e=t.readInt();if(e==Actor.ins().actorID)this.clearGuildInfo(),closeWin(GuildWin),closeWin(GuildMapWin);else if(this.myOffice>=GuildOffice.FU_MENG_ZHU)for(var i=0;i<this.members.length;i++){var n=this.getGuildMembersByIndex(i);if(n.userId==e)return this.members.splice(i,1),void this.patchGuildMembers()}},e.prototype.sendCon=function(t){var e=this.getBytes(13);e.writeInt(t),this.send(e)},e.prototype.patchGuildMoney=function(t){var e=t.readInt(),i=Actor.ins().getCurrency(CurType.fuildfund),n=e-i;if(Actor.ins().setCurrency(CurType.fuildfund,e),n>0){var a=Cfg.getItemCfg(CurType.fuildfund);showtipsFail(a.getName()+" +"+GFunc.overLength(n))}var o=n>=0?PCode.ADD:PCode.DEL;RpFun.guildUpLvRedPoint(o)},e.prototype.sendChangeNotice=function(t){var e=this.getBytes(14);e.writeString(t),this.send(e)},e.prototype.patchChangeNotice=function(t){var e=t.readUnsignedByte();0==e&&(this.notice=t.readString())},e.prototype.sendGuildSkillInfo=function(){this.sendBase(15)},e.prototype.doGuildSkillInfo=function(t){var e=t.readUnsignedByte();this.guillRoleSkillInfo=[];for(var i=0;e>i;i++){for(var n=new GuildRoleSkillInfo,a=t.readUnsignedByte(),o=0;a>o;o++){var s=new GuildSkillInfo;s.level=t.readInt(),s.type=1,s.index=o,s.roleId=i,n.guildSkillInfo.push(s)}a=t.readUnsignedByte();for(var r=0;a>r;r++){var s=(a[r],new GuildSkillInfo);s.level=t.readInt(),s.exp=t.readInt(),s.index=r,s.type=2,s.roleId=i,n.guildSkillInfo.push(s)}this.guillRoleSkillInfo.push(n)}this.patchGuildSkillInfo()},e.prototype.getGuildSkillArray=function(t){return this.guillRoleSkillInfo.length>t?this.guillRoleSkillInfo[t].guildSkillInfo:null},e.prototype.patchGuildSkillInfo=function(){RpFun.guildSkillRedPoint()},e.prototype.sendLearnGuildSkill=function(t,e){var i=this.getBytes(16);i.writeShort(t),i.writeByte(e),this.send(i)},e.prototype.doLearnGuildSkill=function(t){var e=t.readShort(),i=t.readUnsignedByte();this.getSkllInfoByIndex(e).guildSkillInfo[i-1].level=t.readInt(),this.patchGuildSkillInfo(),showtipsFail(Lang.guild_str98)},e.prototype.sendPracticeGuildSkill=function(t,e){var i=this.getBytes(18);i.writeShort(t),i.writeByte(e),this.send(i)},e.prototype.doPracticeGuildSkill=function(t){var e=t.readShort(),i=t.readUnsignedByte();this.getSkllInfoByIndex(e).guildSkillInfo[i+2].level=t.readInt(),this.getSkllInfoByIndex(e).guildSkillInfo[i+2].exp=t.readInt();var n=t.readInt();this.patchGuildSkillInfo(),showtipsSuc(""+Lang.guild_str99+n)},e.prototype.sendUpBuilding=function(t){var e=this.getBytes(17);e.writeByte(t),this.send(e),RpFun.guildSkillRedPoint()},e.prototype.patchUpBuilding=function(t){var e=t.readByte();this.buildingLevels[e-1]=t.readByte(),e==GuildBuildingType.GUILD_SHOP&&RpFun.showGuildShopRedPoint(),RpFun.guildUpLvRedPoint(PCode.DEL)},e.prototype.doTaskInfos=function(t){var e=t.readInt();this.taskInfos.length=0;for(var i=0;e>i;i++){var n=new GuildTaskInfo;n.parser(t),this.taskInfos[i]=n}},e.prototype.doGuildTaskUpdate=function(t){var e=t.readInt(),i=t.readInt(),n=t.readInt(),a=this.getTaskById(e);a&&(a.param=i,a.state=n)},e.prototype.sendGetTaskAward=function(t){var e=this.getBytes(21);e.writeByte(t),this.send(e)},e.prototype.sendManageList=function(){this.sendBase(22)},e.prototype.patchManageList=function(t){this.records=[];for(var e=t.readInt(),i=0;e>i;i++)this.parserManage(t)},e.prototype.parserManage=function(t){if(this.records){var e="",i=DateUtil.formatDayTime(DateUtil.formatMiniDateTime(t.readUnsignedInt()),"yy-mo-dd hh:mm");
i=StrUtil.complementByChar(i,16);var n=t.readUnsignedByte(),a=t.readInt(),o=t.readInt(),s=(t.readInt(),t.readString());t.readString();switch(n){case 1:e=i+Lang.guild_str100.replace("$name$",s);break;case 2:e=i+Lang.guild_str101.replace("$name$",s);break;case 3:e=i+Lang.guild_str102.replace("$name$",s);break;case 4:e=i+Lang.guild_str103.replace("$name$",s);break;case 5:e=i+Lang.guild_str104.replace("$name$",s);break;case 6:e=i+Lang.guild_str105.replace("$name$",s);break;case 7:e=i+Lang.guild_str106.replace("$name$",s)+o+(2==a?Lang.common_zs:Lang.common_jb);break;case 8:e=i+Lang.guild_str107.replace("$name$",s).replace("$name1$",Cfg.getConfig(GuildConfig).buildingNames[a-1]).replace("$name2$",""+o);break;case 9:var r=Cfg.getItemCfg(a);e=i+Lang.guild_str108.replace("$name$",s).replace("$name1$",""+StrUtil.addColor(r.getName(),GConst.PZColor[r.quality]));break;case 10:e=i+StrUtil.addColor(Lang.guild_str109,65280)}this.records.unshift(e)}},e.prototype.doManage=function(t){},e.prototype.sendConCount=function(){this.sendBase(24)},e.prototype.patchConCount=function(t){for(var e=t.readUnsignedByte(),i=0;e>i;i++)this.conCount[i]=t.readInt();RpFun.showGuildConRedPoint(PCode.UPD)},e.prototype.sendMyGuildInfo=function(){this.sendBase(25)},e.prototype.patchMyGuildInfo=function(t){var e=t.readDouble();this.myTotalCon=t.readInt(),this.myOffice=t.readUnsignedByte(),this.myOffice!=this.tempOffice&&(this.sendGuildMembers(),this.tempOffice=this.myOffice);var i=e-Actor.ins().getCurrency(CurType.guildContrib);if(i>0){var n=Cfg.getItemCfg(CurType.guildContrib);showtipsFail(n.getName()+" +"+GFunc.overLength(i))}Actor.ins().setCurrency(CurType.guildContrib,e),RpFun.guildSkillRedPoint(),RpFun.showGuildInfoRedPoint(),RpFun.guildUpLvRedPoint(PCode.ADD),RpFun.showGuildShopRedPoint()},e.prototype.sendGuildMessage=function(t){var e=this.getBytes(26);e.writeString(t),this.send(e)},e.prototype.patchGuildMessage=function(t){var e=ChatFactory.createData(ChatType.Guild);e.parserMessage(t),ChatSys.ins().addMsg(e)},e.prototype.sendAllGuildMessage=function(){this.sendBase(27)},e.prototype.patchAllGuildMessage=function(t){for(var e=t.readInt(),i=0;e>i;i++){var n=ChatFactory.createData(ChatType.Guild);n.parserMessage(t),ChatSys.ins().addMsg(n)}},e.prototype.sendAddGuildLimit=function(t,e){var i=this.getBytes(28);i.writeByte(t),i.writeDouble(e),this.send(i)},e.prototype.doAddGuildlimit=function(t){this.isAuto=1==t.readUnsignedByte(),this.autoLimit=t.readDouble()},e.prototype.hasApplys=function(){return this.myOffice>=GuildOffice.FU_MENG_ZHU&&(this.hasApplyNotice||this.applyPlayers.length>0)},e.prototype.clearGuildInfo=function(){this.guildID=0,this.guildName="",this.guildListInfos=[],this.members=[],this.myApplyGuildIds=[],this.applyPlayers=[],this.pageMax=1,this.guillRoleSkillInfo=[],this.taskInfos=[],this.records=[],this.conCount=[],this.isAuto=!1,this.hasApplyNotice=!1,RpFun.guildSkillRedPoint(),RpFun.showGuildInfoRedPoint()},e.prototype.getMemberNum=function(){return this.members.length},e.prototype.setGuild=function(t,e){this.guildID!=t&&(this.guildID=t,this.guildName=e,0!=this.guildID&&isShowWin(GuildApplyWin)&&(closeWin(GuildApplyWin),openWin(GuildMapWin)))},e.prototype.setOffice=function(t){this.myOffice=t},e.prototype.getGuildMembers=function(t){return 0==t||this._memberSortType==t?this.members:1==t?this.members.sort(this.memberSortFunc):2==t?this.members.sort(this.memberSortFunc2):this.members},e.prototype.getOfficeNum=function(t){for(var e=this.members.length,i=0,n=0;e>n;n++){var a=this.members[n];a.office==t&&i++}return i},e.prototype.canAppointFHZ=function(){return this.getOfficeNum(GuildOffice.FU_MENG_ZHU)<Cfg.getConfig(GuildConfig).posCounts[this.guildLv-1][1]},e.prototype.memberSortFunc=function(t,e){return t.office>e.office?-1:t.office<e.office?1:t.office==e.office?t.lishigongxian==e.lishigongxian?0:t.lishigongxian>e.lishigongxian?-1:1:0},e.prototype.memberSortFunc2=function(t,e){return t.gongxian==e.gongxian?0:t.gongxian>e.gongxian?-1:1},e.prototype.checkIsInGuild=function(t){for(var e in this.members){var i=this.members[e];if(i.userId==t)return!0}return!1},e.prototype.getOfficeName=function(t){return void 0===t&&(t=this.myOffice),Lang.guild_str110[t]},e.prototype.getSkllInfoByIndex=function(t){return this.guillRoleSkillInfo[t]},e.prototype.getGuildMembersByIndex=function(t){return this.members[t]},e.prototype.getLeaderInfo=function(){for(var t=0,e=this.members;t<e.length;t++){var i=e[t];if(i.office==GuildOffice.MENG_ZHU)return i}},e.prototype.getBuildingLevel=function(t){return this.buildingLevels[t-1]},e.prototype.chekUpSkill=function(t){var i=e.ins().getBuildingLevel(GuildBuildingType.GUILD_SKILL);if(0==i)return!1;var n=Cfg.getConfig(GuildConfig);if(1==t.type){var a=n.commonSkillLevels[i-1];return a>t.level}var a=n.practiceSkillLevels[i-1];return a>t.level},e.prototype.chelGuildUp=function(t){var i,n=!0,a=t.level+1;return i=1==t.type?Cfg.getGuildCommonSkillConfig(t.index+1,a):Cfg.getGuildPracticeSkillConfig(t.index+1,a),Actor.ins().getCurrency(CurType.guildContrib)<i.contribute&&(n=!1),Actor.ins().getCurrency(CurType.gold)<i.money&&(n=!1),e.ins().chekUpSkill(t)||(n=!1),n},e.prototype.getConCount=function(){return this.conCount},e.prototype.isMaxLevel=function(t){return Cfg.getGuildLevelMaxConfig(t).level<=this.getBuildingLevel(t)},Object.defineProperty(e.prototype,"guildLv",{get:function(){return this.getBuildingLevel(GuildBuildingType.GUILD_HALL)},enumerable:!0,configurable:!0}),e.prototype.isInApplyList=function(t){return this.myApplyGuildIds.indexOf(t)>-1},e.prototype.addToMyApplyList=function(t){this.isInApplyList(t)||this.myApplyGuildIds.push(t)},e.prototype.getTaskById=function(t){for(var e=0,i=this.taskInfos;e<i.length;e++){var n=i[e];if(n.taskId==t)return n}return null},e.prototype.isAddGuild=function(){return this.guildID>0},e.prototype.isSameGuild=function(t){return this.isAddGuild()&&this.guildID==t},e}(BaseSys);__reflect(GuildSys.prototype,"GuildSys");var System;!function(t){t.guildSys=GuildSys.ins.bind(GuildSys)}(System||(System={})),window.GuildSys=GuildSys;var GuildWarSys=function(t){function e(){var e=t.call(this)||this;return e.sysId=PackId.GuildWar,e.reg(1,e.patchGuildWarStarInfo),e.reg(2,e.patchJoinPlayBack),e.reg(4,e.doGetPointInfo),e.reg(5,e.patchGuildNum),e.reg(6,e.doGetGongXunChange),e.reg(7,e.doMyActivityRankInfo),e.reg(8,e.doRankInfoChange),e.reg(9,e.doGuildRankinfo),e.reg(10,e.doGuildRankinfo),e.reg(11,e.doPointRewardInfo),e.reg(13,e.doGuildLuckDrawInfo),e.reg(14,e.doGuildLuckDrawNum),e.reg(15,e.doGuildLuckDrawMaxNum),e.reg(16,e.doGuildWarKillInfo),e.reg(17,e.patchFlagInfoChange),e.reg(18,e.patchHudunInfo),e.reg(19,e.doGuildWarResult),e.reg(20,e.patchWinGuildInfo),e.reg(21,e.patchAssignsReward),e.reg(22,e.patchFenReward),e.reg(23,e.patchDayRewardInfo),e.reg(24,e.patchRedBagInfo),e.reg(25,e.doRedBagBack),e.reg(26,e.doRobRedBag),e}return __extends(e,t),e.ins=function(){return t.getIns.call(this,e)},e.prototype.getModel=function(){return this._guildWarModel||(this._guildWarModel=new GuildWarModel),this._guildWarModel},e.prototype.patchGuildWarStarInfo=function(t){this.getModel().isWatStart=t.readBoolean(),this.getModel().startTime=DateUtil.formatMiniDateTime(t.readInt()),this.getModel().acEndTime=1e3*t.readInt()+Timer.ins().getTimer(),this.getModel().openstate=t.readByte()},e.prototype.requestJoinAc=function(){var t=this.getBytes(2);this.send(t)},e.prototype.patchJoinPlayBack=function(t){this.getModel().doorDie=t.readBoolean(),this.getModel().doorTime=1e3*t.readInt()+Timer.ins().getTimer(),closeWin(GuildWarMainWin),closeWin(GuildMapWin)},e.prototype.requestPlayNextMap=function(){var t=this.getBytes(3);this.send(t)},e.prototype.doGetPointInfo=function(t){this.getModel().ownPoint=t.readInt(),this.getModel().guildPoint=t.readInt();var e=t.readInt();e>0&&showtipsSuc(Lang.guild_str111.replace("$count$",""+e)),this.patchPointUpdate()},e.prototype.patchPointUpdate=function(){},e.prototype.patchGuildNum=function(t){var e=t.readInt();GuildSys.ins().guildID==e&&(this.getModel().guildNum=t.readInt(),this.patchGuildNumChange())},e.prototype.doGetGongXunChange=function(t){this.getModel().gongXun=t.readInt(),this.patchPointUpdate()},e.prototype.requestOwnMyGuildRank=function(){var t=this.getBytes(7);this.send(t)},e.prototype.doMyActivityRankInfo=function(t){this.getModel().decodeMyGuildRankInfo(t),this.patchMyRankChange()},e.prototype.doRankInfoChange=function(t){this.getModel().rankListChange(t),this.patchRankListChange()},e.prototype.requestGuildRank=function(){var t=this.getBytes(9);this.send(t)},e.prototype.requestOwnGuildRank=function(){var t=this.getBytes(10);this.send(t)},e.prototype.doGuildRankinfo=function(t){this.getModel().decodeGuildRankInfo(t),this.patchRankInfo()},e.prototype.doPointRewardInfo=function(t){this.getModel().decodePointRewardInfo(t),this.patchPointRewardChange()},e.prototype.sendPointReward=function(){var t=this.getBytes(12);this.send(t)},e.prototype.doGuildLuckDrawInfo=function(t){var i=t.readInt(),n=t.readInt();openWin(GuildWarLuckDrawWin,i,n,function(){e.ins().sendGuildLuckDrawNum()})},e.prototype.sendGuildLuckDrawNum=function(){this.sendBase(14)},e.prototype.doGuildLuckDrawNum=function(t){var e=t.readInt(),i=getWin(GuildWarLuckDrawWin);i&&i.setMyNum(e)},e.prototype.doGuildLuckDrawMaxNum=function(t){var e=t.readInt(),i=t.readString(),n=getWin(GuildWarLuckDrawWin);n&&n.setMaxNum(e,i)},e.prototype.doGuildWarKillInfo=function(t){var e=t.readInt();this.getModel().killEntityType=t.readByte(),this.getModel().killName=t.readString(),this.getModel().killGuild=t.readString(),openWin(GuildWarReliveWin,2,e)},e.prototype.patchFlagInfoChange=function(t){this.getModel().flagMasterHandle=0,this.getModel().flagStatu=t.readShort(),0==this.getModel().flagStatu?this.getModel().endTime=1e3*t.readInt()+Timer.ins().getTimer():2==this.getModel().flagStatu&&(this.getModel().flagName=t.readString(),this.getModel().flagMasterHandle=t.readDouble(),this.getModel().flagGuild=t.readString(),this.getModel().endTime=1e3*t.readInt()+Timer.ins().getTimer(),this.getModel().flagMasterHandle==Actor.ins().handle&&showtipsFail(Lang.guild_str112))},e.prototype.patchHudunInfo=function(t){this.getModel().hudunValue=t.readInt(),this.getModel().hudunMax=t.readInt()},e.prototype.doGuildWarResult=function(t){this.getModel().decodeGulidWarResult(t)},e.prototype.patchWinGuildInfo=function(t){this.getModel().winGuildInfo||(this.getModel().winGuildInfo=new WinGuildInfo),this.getModel().winGuildInfo.parse(t)},e.prototype.patchAssignsReward=function(t){this.getModel().guildWarRank=t.readInt(),this.getModel().canSendReward=t.readBoolean(),RpFun.showGuildWarFenpeiAward()},e.prototype.sendFenReward=function(t,e){var i=this.getModel().sendNumList,n=this.getBytes(22);n.writeInt(t);for(var a=1;t>=a;a++){n.writeInt(a);var o=a-1,s=e[o].length;n.writeInt(s);for(var r=0;s>r;r++){var u=e[o][r];n.writeInt(u.userId),n.writeInt(i[o][r])}}this.send(n)},e.prototype.patchFenReward=function(t){var e=t.readBoolean();e?(closeWin(GuildWarSelectMemberAwardWin),showtipsFail(Lang.guild_str113)):showtipsFail(Lang.guild_str114)},e.prototype.requestDayReward=function(t){var e=this.getBytes(23);e.writeInt(t),this.send(e)},e.prototype.patchDayRewardInfo=function(t){this.getModel().canGetDay=t.readBoolean(),this.getModel().getDayReward=t.readBoolean(),this.getModel().rewardDay=t.readInt(),RpFun.showGuildWarDayAward()},e.prototype.patchRedBagInfo=function(t){this.getModel().getRedbagInfo(t),RpFun.showGuildWarRedBagAward()},e.prototype.requestSendRedBag=function(t,e){var i=this.getBytes(25);i.writeInt(t),i.writeInt(e),this.send(i)},e.prototype.doRedBagBack=function(t){var e=t.readByte();1==e?closeWin(GuildWarRedBagWin):showtipsFail(Lang.guild_str115)},e.prototype.requestRobRedBag=function(){var t=this.getBytes(26);this.send(t)},e.prototype.doRobRedBag=function(t){var e=t.readByte();1==e?(openWin(GuildWarRedBagDetailWin),closeWin(GuildWarRedBagWin)):showtipsFail(Lang.guild_str116)},e.prototype.getStartTimeTick=function(){return Math.ceil((this.getModel().startTime-Actor.ins().serverTime)/1e3)},e.prototype.patchMyRankChange=function(){},e.prototype.patchPointRewardChange=function(){},e.prototype.patchRankListChange=function(){},e.prototype.patchGuildNumChange=function(){},e.prototype.patchSendListChange=function(){},e.prototype.patchRankInfo=function(){},e}(BaseSys);__reflect(GuildWarSys.prototype,"GuildWarSys");var System;!function(t){t.guildWarSys=GuildWarSys.ins.bind(GuildWarSys)}(System||(System={})),window.GuildWarSys=GuildWarSys;var DamonLevelConfig=function(){function t(){}return t}();__reflect(DamonLevelConfig.prototype,"DamonLevelConfig");var DamonMozhenBaseConfig=function(){function t(){}return t}();__reflect(DamonMozhenBaseConfig.prototype,"DamonMozhenBaseConfig");var GuildBossTeamItem=function(t){function e(){var e=t.call(this)||this;return e.state_member="member",e.state_invitation="invitation",e.skinName="GuildBossTeamItemEUI",e.levelTxt.visible=!1,e.addClickE(e,e.onClick),e}return __extends(e,t),e.prototype.onClick=function(t){switch(t.target){case this.quitBtn:var e=this.data,i=StrUtil.addColor(Lang.fb_str54,3821938);i+=StrUtil.addColor(e.roleName,2342605),i+=StrUtil.addColor(Lang.fb_str55,3821938);var n=new PopupData(i);n.setFunction(this,function(){GuildActSys.ins().sendGuildBossTeamExpel(e.actorId)}),openWin(CommonTipsWin,n);break;case this.invitationBtn:GuildActSys.ins().sendGuildBossTeamInvitation()}},e.prototype.dataChanged=function(){if(this.data instanceof GuildBossTeamData){var t=this.data;if(!t.isSomebody)return this.groupMC.removeChildren(),void(this.currentState=this.state_invitation);this.currentState=this.state_member,t.isCaptain?this.teamTab.source="zm_zycs_dz":t.count>=Cfg.getConfig(GuildBossCommonConfig).count?this.teamTab.source="zm_zycs_zz":this.teamTab.source="",this.nameTxt.text=""+t.roleName,this.updateMC(),GuildActSys.ins().isCaptain?this.quitBtn.visible=t.actorId!=Actor.ins().actorID:this.quitBtn.visible=!1,this.DisplayPower.text=t.power.toFixed(0)}},e.prototype.updateMC=function(){var t=this.data;this.groupMC.removeChildren();var e=MC.createCenterGruop(Cfg.getConfig(SzHuanhuaBaseConfig,t.szId).uibody[t.sex],-1);this.groupMC.addChild(e)},e.prototype.getInvitationBtn=function(){return this.invitationBtn},e}(BaseItemRender);__reflect(GuildBossTeamItem.prototype,"GuildBossTeamItem"),window.GuildBossTeamItem=GuildBossTeamItem;var GuildBossTeamWin=function(t){function e(){var e=t.call(this)||this;return e.teams=[],e.layer=LayerMgr.Popup,e.skinName="GuildBossTeamWinEUI",e.teams=[e.team0,e.team1,e.team2],e.desTxt.text="",e}return __extends(e,t),e.prototype.open=function(){t.prototype.open.call(this),this.addClickE(this.btnClose0,this.onClick),this.addClickE(this.quitBtn,this.onClick),this.addClickE(this.intoBtn,this.onClick),this.addLsn(GuildActSys.ins().patchGuildBossTeamInfo,this.updatePanel),this.updatePanel(),this.com_Chat.open()},e.prototype.close=function(){t.prototype.close.call(this),this.com_Chat.close()},e.prototype.updatePanel=function(){for(var t=GuildActSys.ins().bossTeamDatas,e=0;e<t.length;e++)this.teams[e].data=t[e];var i=GuildActSys.ins().getBossTeamNum(),n=100*(Cfg.getConfig(GuildBossCommonConfig).extra[i-1]-1);this.rewardPlusTxt.text=Lang.guild_str8.replace("$extra$",""+n),this.countTxt.text="："+i+"/"+Cfg.getConfig(GuildBossCommonConfig).teamNum,GuildActSys.ins().isCaptain?(this.quitBtn.x=147,this.quitBtn.label=Lang.fb_str50,this.intoBtn.visible=!0):(this.quitBtn.x=247,this.quitBtn.label=Lang.fb_str51,this.intoBtn.visible=!1)},e.prototype.onClick=function(t){if(t.target==this.btnClose0||t.target==this.quitBtn){var i=GuildActSys.ins().isCaptain?Lang.fb_str52:Lang.fb_str53,n=new PopupData(i);n.setFunction(this,function(){GuildActSys.ins().sendGuildBossTeamDissolution(),closeWin(e)}),openWin(CommonTipsWin,n)}else if(t.target==this.intoBtn){if(GFunc.isFb(FbSys.ins().fbId))return void showtipsFail(Lang.fb_str351);GuildActSys.ins().sendGuildBossChallenge()}},e.prototype.setShowMainUI=function(t){this.com_Chat.visible=t},e.prototype.getInvitationBtn=function(){var t=this.teams[1];return t.getInvitationBtn()},e.prototype.getIntoBtn=function(){return this.intoBtn},e}(BaseWinSingle);__reflect(GuildBossTeamWin.prototype,"GuildBossTeamWin"),window.GuildBossTeamWin=GuildBossTeamWin;var GuildGiftItem=function(t){function e(){var e=t.call(this)||this;return e.skinName="GuildGiftItemEUI",e.setSkinPart("item",new ItemBaseReward),e}return __extends(e,t),e.prototype.dataChanged=function(){if(this.data instanceof GuildGiftRewardData){var t=this.data;this.item.data={id:t.itemId,type:1,count:t.count},this.levelTxt.text="Lv."+t.level,this.nameTxt.text=""+t.roleName}},e}(BaseItemRender);__reflect(GuildGiftItem.prototype,"GuildGiftItem"),window.GuildGiftItem=GuildGiftItem;var DamonMozhenGroupConfig=function(){function t(){}return t}();__reflect(DamonMozhenGroupConfig.prototype,"DamonMozhenGroupConfig");var GuildGiftRechargeLogItem=function(t){function e(){var e=t.call(this)||this;return e.skinName="GuildGiftRechargeLogItemEUI",e}return __extends(e,t),e.prototype.dataChanged=function(){if(this.data instanceof GuildGiftRechargeData){var t=this.data;this.timeTxt.text=""+t.getTimer(),this.nameTxt.text=""+t.roleName,this.countTxt.text=Lang.guild_str10.replace("$yb$",""+t.yb)}},e}(BaseItemRender);__reflect(GuildGiftRechargeLogItem.prototype,"GuildGiftRechargeLogItem"),window.GuildGiftRechargeLogItem=GuildGiftRechargeLogItem;var GuildGiftRechargeLogWin=function(t){function e(){var e=t.call(this)||this;return e.layer=LayerMgr.Popup,e.skinName="GuildGiftRechargeLogWinEUI",e.addBg(),e.list.itemRenderer=GuildGiftRechargeLogItem,e}return __extends(e,t),e.prototype.open=function(){t.prototype.open.call(this),this.updatePanel()},e.prototype.updatePanel=function(){var t=GuildActSys.ins().giftRechargelogs;this.list.dataProvider=new eui.ArrayCollection(t)},e}(BaseWinSingle);__reflect(GuildGiftRechargeLogWin.prototype,"GuildGiftRechargeLogWin"),window.GuildGiftRechargeLogWin=GuildGiftRechargeLogWin;var GuildSiegeMonsItem=function(t){function e(){var e=t.call(this)||this;return e.skinName="GuildSiegeMonsItemEUI",e.MCeff=new MC,e.MCeff.y=15,e.MCeff.x=100,e.addChild(e.MCeff),e.imgState.source="",e.MCmonster=new MC,e.groupMC.addChild(e.MCmonster),e}return __extends(e,t),e.prototype.dataChanged=function(){if(this.data instanceof GuildSiegeMonsData){var t=this.data;this.MCeff.playFile(getEffName(t.state?"zmrq_ktz":"zmrq_tzz"),-1);var e=t.monsName+StrUtil.addColor("（"+Lang.common_xiyoudu[t.quality]+"）",GConst.rareColor[t.quality]);this.labName.textFlow=addColorTF(e);var i=Cfg.getConfig(MonsterModelConfig,t.modelId),n=ResMgr.getMonsterSource(i.appearance,4,EntityAction.STAND);this.MCmonster.scaleX=this.MCmonster.scaleY=i.scale,this.MCmonster.playFile(n,-1)}},e}(BaseItemRender);__reflect(GuildSiegeMonsItem.prototype,"GuildSiegeMonsItem"),window.GuildSiegeMonsItem=GuildSiegeMonsItem;var GuildSiegeMonsPanel=function(t){function e(){var e=t.call(this)||this;return e.monsItems=[],e.skinName="GuildSiegeMonsPanelEUI",e.setSkinPart("monsItem0",new GuildSiegeMonsItem),e.setSkinPart("monsItem1",new GuildSiegeMonsItem),e.setSkinPart("monsItem2",new GuildSiegeMonsItem),e.setSkinPart("monsItem3",new GuildSiegeMonsItem),e.setSkinPart("monsItem4",new GuildSiegeMonsItem),e.setSkinPart("monsItem5",new GuildSiegeMonsItem),e.monsItems=[e.monsItem0,e.monsItem1,e.monsItem2,e.monsItem3,e.monsItem4,e.monsItem5],e}return __extends(e,t),e.prototype.open=function(){t.prototype.open.call(this),this.addLsn(GuildActSys.ins().patchGuildSiegeInfo,this.updatePanel),this.addLsn(GuildActSys.ins().patchGuildSiegeUpdate,this.updatePanel);for(var e=0,i=this.monsItems;e<i.length;e++){var n=i[e];this.addClickE(n,this.onClick)}this.updatePanel()},e.prototype.updatePanel=function(){this.siegeModel=GuildActSys.ins().siegeModel;for(var t=this.monsItems.length-1;t>=0;t--){var e=this.siegeModel.getDataByPos(t+1);e&&e.isAlive()?(this.monsItems[t].data=e,this.monsItems[t].visible=!0):this.monsItems[t].visible=!1}},e.prototype.onClick=function(t){if(0==this.siegeModel.fightcount)return void showtipsFail(Lang.fb_str86);var e=t.currentTarget.data;return 0==e.state?void showtipsFail(Lang.guild_str121):void(GFunc.checkSysOpen(119)&&(GuildActSys.ins().sendGuildSiegeInfo(e.pos),closeWin(GuildMapWin)))},e}(BasePanel);__reflect(GuildSiegeMonsPanel.prototype,"GuildSiegeMonsPanel"),window.GuildSiegeMonsPanel=GuildSiegeMonsPanel;var DamonPillConfig=function(){function t(){}return t}();__reflect(DamonPillConfig.prototype,"DamonPillConfig");var GuildTaskPanel=function(t){function e(){var e=t.call(this)||this;return e.initUI(),e}return __extends(e,t),e.prototype.initUI=function(){this.skinName="GuildTaskPanelSkin",this.list.itemRenderer=GuildTaskRender},e.prototype.open=function(){t.prototype.open.call(this),this.list.dataProvider=new eui.ArrayCollection(GuildSys.ins().taskInfos.sort(this.taskInfosSortFunc))},e.prototype.taskInfosSortFunc=function(t,e){if(t.state==e.state)return t.taskId<e.taskId?-1:t.taskId>e.taskId?1:0;if(2==t.state)return 1;if(2==e.state)return-1;if(2!=t.state&&2!=e.state){if(t.taskId<e.taskId)return-1;if(t.taskId>e.taskId)return 1}return 0},e}(BasePanel);__reflect(GuildTaskPanel.prototype,"GuildTaskPanel"),window.GuildTaskPanel=GuildTaskPanel;var GuildTaskRender=function(t){function e(){var e=t.call(this)||this;return e.skinName="GuildTaskRenderSkin",e.addClickE(e,e.onClick),e}return __extends(e,t),e.prototype.onClick=function(t){var e=this.data;switch(t.target){case this.btnGo:GFunc.createTaskNavData(e.stdTask.controlTarget)["goto"]();break;case this.btnJX:this.conBtnOnCLick(e);break;case this.btnFinish:GuildSys.ins().sendGetTaskAward(e.taskId)}},e.prototype.conBtnOnCLick=function(t){switch(t.stdTask.type){case 31:t.param>=t.stdTask.target?showtipsFail(Lang.guild_str13):Actor.ins().getCurrency(CurType.yb)>t.stdTask.param?GuildSys.ins().sendCon(t.stdTask.conID):showtipsFail(Lang.common_str12);break;case 32:t.param>=t.stdTask.target?showtipsFail(Lang.guild_str13):Actor.ins().getCurrency(CurType.gold)>t.stdTask.param?GuildSys.ins().sendCon(t.stdTask.conID):TipsSys.ins().setBuyGoodsWarn(1);break;case 33:t.param>=t.stdTask.target?showtipsFail(Lang.guild_str13):BagSys.ins().getItemCount(t.stdTask.param)>=1?GuildSys.ins().sendCon(t.stdTask.conID):showtipsFail(Lang.common_str71)}},e.prototype.dataChanged=function(){var t=this.data;if(this.labelName.text=t.stdTask.name,this.labelDesc.text=t.stdTask.desc,this.labelCount.text=t.param+"/"+t.stdTask.target,this.btnJX.enabled=t.param<t.stdTask.target,t.param<t.stdTask.target)switch(t.stdTask.type){case 31:case 32:case 33:this.currentState="sJuanxian";break;default:this.currentState="sQianwang"}else this.currentState="sWancheng"},e}(BaseItemRender);__reflect(GuildTaskRender.prototype,"GuildTaskRender"),window.GuildTaskRender=GuildTaskRender;var GuildApplyRender=function(t){function e(){var e=t.call(this)||this;return e.skinName="GuildApplyRenderEUI",e.addClickE(e.btnApply,e.onClick),e}return __extends(e,t),e.prototype.onClick=function(t){if(GuildWarSys.ins().getModel().isWatStart)return void showtipsFail(Lang.guild_str34);var e=this.data;if(!GuildSys.ins().isInApplyList(e.guildId)){if(Actor.ins().power<e.power)return void showtipsFail(Lang.guild_str35);GuildSys.ins().addToMyApplyList(e.guildId),GuildSys.ins().sendJoinGuild(e.guildId),this.updateBtnState()}},e.prototype.dataChanged=function(){var t=this.data;Cfg.getConfig(GuildConfig);this.labelRank.text=t.guildRank+"",this.labelGuildName.textFlow=addColorTF(t.guildName+StrUtil.addColor("(Lv."+t.guildLevel+")",5949490)),this.lebalName.text=t.guildLeaderName;var e=Cfg.getGuildMaxMember(t.guildLevel);this.labelMemberCount.textColor=t.guildMemberCount<e?5226466:16711680,this.labelMemberCount.text=t.guildMemberCount+"/"+e;var i="";i=1==t.isShenhe?Lang.common_str29+GFunc.overLength(t.power):Lang.guild_str14,this.labelPower.text=i,this.updateBtnState()},e.prototype.updateBtnState=function(){var t=this.data;GuildSys.ins().isInApplyList(t.guildId)?(this.btnApply.enabled=!1,this.btnApply.label=Lang.guild_str15):(this.btnApply.enabled=!0,this.btnApply.label=Lang.guild_str16)},e}(BaseItemRender);__reflect(GuildApplyRender.prototype,"GuildApplyRender"),window.GuildApplyRender=GuildApplyRender;var GuildInfoRender=function(t){function e(){var e=t.call(this)||this;return e.skinName="GuildInfoRenderEUI",e}return __extends(e,t),e.prototype.dataChanged=function(){var t=this.data;this.labelName.text=t.name,this.labelOffice.text=GuildSys.ins().getOfficeName(t.office),this.labelGongxian.text=t.lishigongxian.toString()},e}(BaseItemRender);__reflect(GuildInfoRender.prototype,"GuildInfoRender"),window.GuildInfoRender=GuildInfoRender;var GuildListRender=function(t){function e(){var e=t.call(this)||this;return e.skinName="GuildListRenderEUI",e}return __extends(e,t),e.prototype.dataChanged=function(){var t=this.data;Cfg.getConfig(GuildConfig);this.labelRank.text=t.guildRank+"",this.labelGuildName.textFlow=addColorTF(t.guildName+StrUtil.addColor("(Lv."+t.guildLevel+")",5949490)),this.lebalName.text=t.guildLeaderName;var e=Cfg.getGuildMaxMember(t.guildLevel);this.labelMemberCount.textColor=t.guildMemberCount<e?5226466:16711680,this.labelMemberCount.text=t.guildMemberCount+"/"+e},e}(BaseItemRender);__reflect(GuildListRender.prototype,"GuildListRender"),window.GuildListRender=GuildListRender;var GuildManageRender=function(t){function e(){var e=t.call(this)||this;return e.skinName="GuildManageRenderEUI",e}return __extends(e,t),e.prototype.onClick=function(t){switch(t){case this.btnUp:var e=this.data,i=GuildSys.ins().getBuildingLevel(e),n=Cfg.getConfig(GuildLevelConfig,e,i);if(GuildSys.ins().myOffice<GuildOffice.MENG_ZHU)return void showtipsFail(Lang.guild_str17);if(e==GuildBuildingType.GUILD_HALL&&GuildSys.ins().isMaxLevel(e))return void showtipsFail(Lang.guild_str18);if(e!=GuildBuildingType.GUILD_HALL&&i>=GuildSys.ins().guildLv)return void showtipsFail(Lang.guild_str19);if(!GFunc.checkCurrency(CurType.fuildfund,n.upFund))return;GuildSys.ins().sendUpBuilding(e)}},e.prototype.dataChanged=function(){var t=this.data,e=GuildSys.ins().getBuildingLevel(t),i=Cfg.getConfig(GuildLevelConfig,t,e);if(this.btnUp.redPoint.visible=!1,GuildSys.ins().isMaxLevel(t))this.currentState="sMax",this.labelUpLv.text=Lang.guild_str18,this.progressBar.labelFunction=this.labelFunction,this.progressBar.maximum=1,this.progressBar.value=1;else{t==GuildBuildingType.GUILD_HALL?this.currentState="sHall":this.currentState="sOther";var n=Actor.ins().getCurrency(CurType.fuildfund);this.labelUpLv.text=Lang.guild_str21.replace("$lv$",""+(i.level+1)),this.progressBar.maximum=i.upFund,this.progressBar.value=n,GuildSys.ins().myOffice==GuildOffice.MENG_ZHU&&(t!=GuildBuildingType.GUILD_HALL&&e>=GuildSys.ins().guildLv?this.btnUp.redPoint.visible=!1:this.btnUp.redPoint.visible=n>=i.upFund)}this.labelName.text=e+Lang.common_ji+Cfg.getGuildBuildingName(t),this.labelDesc.text=Cfg.getGuildBuildingTips(t)},e.prototype.labelFunction=function(t,e){return Lang.common_str38},e}(BaseItemRender);__reflect(GuildManageRender.prototype,"GuildManageRender"),window.GuildManageRender=GuildManageRender;var GuildManagerEvenRender=function(t){function e(){var e=t.call(this)||this;return e.skinName="GuildManagerEvenRenderEUI",e}return __extends(e,t),e.prototype.dataChanged=function(){var t=this.data;this.labelInfo.textFlow=addColorTF(t)},e}(BaseItemRender);__reflect(GuildManagerEvenRender.prototype,"GuildManagerEvenRender"),window.GuildManagerEvenRender=GuildManagerEvenRender;var GuildMapRender=function(t){function e(){var e=t.call(this)||this;return e.skinName="GuildMapRenderEUI",e}return __extends(e,t),e.prototype.dataChanged=function(){if(this.data instanceof GuildMemberInfo){var t=this.data;t&&(this.labelName.text=t.name,this.labelOffice.text=GuildSys.ins().getOfficeName(t.office),this.labelGongxian.text=t.gongxian+"")}},e}(BaseItemRender);__reflect(GuildMapRender.prototype,"GuildMapRender"),window.GuildMapRender=GuildMapRender;var GuildMemberRender=function(t){function e(){var e=t.call(this)||this;return e.skinName="GuildMemberRenderEUI",e}return __extends(e,t),e.prototype.dataChanged=function(){var t=this.data;this.imgHead.source=ResMgr.getHeadIcon(t.sex);var e=StrUtil.addColor("["+GuildSys.ins().getOfficeName(t.office)+"]",36345),i=StrUtil.addColor(t.name,16737792);this.labelOffice.textFlow=addColorTF(e+i),this.labelGongxian.text=""+Lang.guild_str22+t.lishigongxian,this.labelPower.text=""+Lang.common_str29+t.power;var n="";n=t.isOnLine()?StrUtil.addColor(Lang.common_str72,1350425):StrUtil.addColor(getFormatTime(t.offLineTime,"dd天hh小时"),15733780);var a=GuildSys.ins().myOffice;a==GuildOffice.MENG_ZHU?t.office==GuildOffice.MENG_ZHU?this.currentState="snVSsn":t.office==GuildOffice.FU_MENG_ZHU?this.currentState="s6VSs5":this.currentState="s6vs43210":a==GuildOffice.FU_MENG_ZHU?t.office==GuildOffice.MENG_ZHU?this.currentState="s012345VSs6":t.office==GuildOffice.FU_MENG_ZHU?this.currentState="snVSsn":this.currentState="s5VS43210":a>=GuildOffice.JING_YING&&t.office==GuildOffice.MENG_ZHU?this.currentState="s012345VSs6":this.currentState="snVSsn",this.validateNow();var o,s="";t.isOnLine()?(o=5949490,s=Lang.common_str72):(o=15733780,s=t.offLineTime>DateUtil.SECOND_PER_HOUR?""+getFormatTime(t.offLineTime,"dd天hh小时")+Lang.common_qian:Lang.guild_str23),this.labelOnLine.textFlow=addColorTF(s,o),this.btnTanhe.visible=this.btnTanhe.visible&&t.offLineTime>=5*DateUtil.SECOND_PER_DAY},e.prototype.onClick=function(t){var e=this.data,i=e.userId;switch(t){case this.btnTanhe:openWin(WarnWin,Lang.guild_str24.replace("$yb$",""+Cfg.getConfig(GuildConfig).impeachCost),function(){var t=GFunc.creatRewardDataById(CurType.yb,Cfg.getConfig(GuildConfig).impeachCost);GFunc.checkConsumeEnough1(t)&&GuildSys.ins().sendTanhe()},this);break;case this.btnShanrang:openWin(WarnWin,Lang.guild_str25.replace("$name$",""+e.name),function(){GuildSys.ins().sendChangeOffice(i,GuildOffice.MENG_ZHU)},this);break;case this.btnJiangzhi:openWin(WarnWin,Lang.guild_str26.replace("$name$",""+e.name),function(){GuildSys.ins().sendChangeOffice(i,GuildOffice.ZHANG_LAO)},this);break;case this.btnTichu:openWin(WarnWin,Lang.guild_str27.replace("$name$",""+e.name),function(){GuildSys.ins().sendKick(i)},this);break;case this.btnRenming:openWin(WarnWin,Lang.guild_str28.replace("$name$",""+e.name),function(){GuildSys.ins().canAppointFHZ()?GuildSys.ins().sendChangeOffice(i,GuildOffice.FU_MENG_ZHU):showtipsFail(Lang.guild_str29)},this)}},e}(BaseItemRender);__reflect(GuildMemberRender.prototype,"GuildMemberRender"),window.GuildMemberRender=GuildMemberRender;var GuildOtherApplyRender=function(t){function e(){var e=t.call(this)||this;return e.skinName="GuildOtherApplyRenderEUI",e.addClickE(e,e.onClick),e}return __extends(e,t),e.prototype.onClick=function(t){switch(t.target){case this.btnAgree:GuildSys.ins().getMemberNum()<Cfg.getGuildMaxMember(GuildSys.ins().guildLv)?GuildSys.ins().sendProcessOtherJoin(this.data.userId,1):showtipsFail(Lang.guild_str56);break;case this.btnRefuse:GuildSys.ins().sendProcessOtherJoin(this.data.userId,0)}},e.prototype.dataChanged=function(){var t=this.data;this.imgHead.source=ResMgr.getHeadIcon(t.sex),this.labelPower.text=""+Lang.common_str29+t.power;var e=t.vipLv>0?StrUtil.addColor("[SVIP"+t.vipLv+"]",16115290):"",i=StrUtil.addColor(t.name,2342605);this.labelName.textFlow=addColorTF(e+i)},e}(BaseItemRender);__reflect(GuildOtherApplyRender.prototype,"GuildOtherApplyRender"),window.GuildOtherApplyRender=GuildOtherApplyRender;var GuildShopRecordRender=function(t){function e(){var e=t.call(this)||this;return e.skinName="GuildShopRecordRenderEUI",e}return __extends(e,t),e.prototype.dataChanged=function(){if(this.data instanceof GuildShopRecord){var t=Cfg.getItemCfg(this.data.itemId);t?(this.lbName.text=this.data.roleName,this.lbDesc.textFlow=addColorTF(Lang.guild_str30+"   "+StrUtil.addColor(t.getName(),GConst.PZColor[t.quality]))):this.lbDesc.text=""}},e}(BaseItemRender);__reflect(GuildShopRecordRender.prototype,"GuildShopRecordRender"),window.GuildShopRecordRender=GuildShopRecordRender;
var GuildApplyInfo=function(){function t(){}return t.prototype.parser=function(t){this.userId=t.readInt(),this.vipLv=t.readInt(),this.job=t.readUnsignedByte(),this.sex=t.readUnsignedByte(),this.power=t.readDouble(),this.name=t.readString()},t}();__reflect(GuildApplyInfo.prototype,"GuildApplyInfo");var GuildBossTeamData=function(){function t(){this.isSomebody=!1,this.actorId=0,this.handle=0,this.roleName="",this.level=0,this.power=0,this.jobs=[],this.isCaptain=!1,this.count=0,this.isHelp=!1,this.shenQiId=0,this.szId=0,this.wingId=0,this.sex=0}return t.prototype.parser=function(t){this.actorId=t.readInt(),this.roleName=t.readString(),this.level=t.readInt(),this.power=t.readDouble(),this.jobs=[],this.jobs.push(t.readByte()),this.sex=t.readByte(),this.isCaptain=t.readBoolean(),this.count=t.readShort(),this.shenQiId=t.readInt(),this.szId=t.readInt(),this.wingId=t.readInt(),this.isSomebody=!0},t.prototype.parser2=function(t){this.actorId=t.readInt(),this.roleName=t.readString(),this.level=t.readInt(),this.power=t.readInt(),this.jobs=[];for(var e=t.readByte(),i=0;e>i;i++)this.jobs.push(t.readByte());this.isCaptain=t.readBoolean(),this.isHelp=t.readBoolean(),this.handle=t.readDouble(),this.isSomebody=!0},t}();__reflect(GuildBossTeamData.prototype,"GuildBossTeamData");var GuildFBModel=function(){function t(){this.bossTimer=1}return t.prototype.parserBaseInfo=function(t){this.fbNum=t.readShort(),this.sweep=t.readByte(),this.sweepNum=t.readShort(),this.tongguan=t.readByte(),this.zuwei=t.readByte(),this.nextFb=t.readByte()},t.prototype.parserRankInfo=function(t){this.rankDatas=[];for(var e=t.readByte(),i=0;e>i;i++){var n=new GuildFBRankInfo;n.rank=i+1,n.name=t.readString(),n.guanka=t.readShort(),this.rankDatas.push(n)}},t.prototype.parserMaxGkInfo=function(t){this.isMaxGK=t.readByte(),0!=this.isMaxGK&&(this.maxName=t.readString(),this.maxCareer=t.readByte(),this.maxSex=t.readByte(),this.maxNum=t.readShort(),this.maxZhuwei=t.readByte())},t.prototype.parserGkInfo=function(t){this.fbgkNum=t.readShort();var e=t.readByte();this.gkDatas=[];for(var i=0;e>i;i++)this.gkDatas.push(t.readString())},t.prototype.parserRewardInfo=function(t){this.rewardNum=t.readShort(),this.rewardRoleNum=t.readShort()},t.prototype.hasbtn=function(){return Actor.ins().serverOpenDay>0&&(0==this.sweep&&this.fbNum>0||0==this.tongguan&&this.rewardNum>0)},Object.defineProperty(t.prototype,"bossTimerEnd",{get:function(){return this.bossTimer+Timer.ins().getEgretTimer()},enumerable:!0,configurable:!0}),t}();__reflect(GuildFBModel.prototype,"GuildFBModel");var GuildFBRankInfo=function(){function t(){}return t}();__reflect(GuildFBRankInfo.prototype,"GuildFBRankInfo");var GuildGiftRechargeData=function(){function t(){this.time=0,this.roleName="",this.yb=0}return t.prototype.parser=function(t){this.time=DateUtil.formatMiniDateTime(t.readInt()),this.roleName=t.readString(),this.yb=t.readInt()},t.prototype.getTimer=function(){var t="";return t=new Date(this.time).toLocaleDateString()},t}();__reflect(GuildGiftRechargeData.prototype,"GuildGiftRechargeData");var GuildGiftRewardData=function(){function t(){this.itemId=0,this.count=0,this.level=0,this.roleName=""}return t.prototype.parser=function(t){this.itemId=t.readInt(),this.count=t.readInt(),this.level=t.readShort(),this.roleName=t.readString()},t}();__reflect(GuildGiftRewardData.prototype,"GuildGiftRewardData");var GuildListInfo=function(){function t(){}return t.prototype.parser=function(t){this.guildId=t.readInt(),this.guildLevel=t.readUnsignedByte(),this.guildMemberCount=t.readInt(),this.guildName=t.readString(),this.guildLeaderName=t.readString(),this.isShenhe=t.readByte(),this.power=t.readDouble()},t}();__reflect(GuildListInfo.prototype,"GuildListInfo");var GuildMemberInfo=function(){function t(){this.userId=0,this.name="",this.office=0,this.job=0,this.sex=0,this.vipLevel=0,this.monthCard=0,this.gongxian=0,this.lishigongxian=0,this.power=0,this.downTime=0}return t.prototype.parser=function(t){this.userId=t.readInt(),this.name=t.readString(),this.office=t.readUnsignedByte(),this.job=t.readUnsignedByte(),this.sex=t.readUnsignedByte(),this.vipLevel=t.readInt(),this.monthCard=t.readUnsignedByte(),this.lishigongxian=t.readInt(),this.gongxian=t.readInt(),this.power=t.readDouble(),this.downTime=t.readUnsignedInt()},Object.defineProperty(t.prototype,"offLineTime",{get:function(){return this.isOnLine()?0:(Actor.ins().serverTime-DateUtil.formatMiniDateTime(this.downTime))/1e3},enumerable:!0,configurable:!0}),t.prototype.isOffLine=function(){return this.downTime>0},t.prototype.isOnLine=function(){return 0==this.downTime},t}();__reflect(GuildMemberInfo.prototype,"GuildMemberInfo");var GuildSiegeModel=function(){function t(){this.isOpen=!1,this.timer=0,this.fightcount=0,this.monsDatas=[]}return t.prototype.parserGuildSiegeInfo=function(t){this.timer=1e3*t.readInt()+Timer.ins().getTimer(),this.fightcount=t.readByte(),this.isOpen=t.readBoolean();var e=t.readByte();this.monsDatas=[];for(var i=0;e>i;i++){var n=new GuildSiegeMonsData;n.parser(t),this.monsDatas.push(n)}},t.prototype.parserGuildSiegeUpdate=function(t){var e=t.readByte(),i=t.readByte(),n=t.readByte(),a=this.getDataByPos(e);a&&(a.quality=i,a.state=n)},t.prototype.getTime=function(){return Math.max(this.timer-Timer.ins().getTimer(),0)},t.prototype.getDataByPos=function(t){for(var e=0,i=this.monsDatas;e<i.length;e++){var n=i[e];if(n.pos==t)return n}return null},t.prototype.getMonsCount=function(){for(var t=0,e=0,i=this.monsDatas;e<i.length;e++){var n=i[e];n&&n.isAlive()&&(t+=1)}return t},t}();__reflect(GuildSiegeModel.prototype,"GuildSiegeModel");var GuildSiegeMonsData=function(){function t(){this.pos=1,this.monsName="",this.modelId=0,this.quality=1,this.state=0}return t.prototype.parser=function(t){this.monsName=t.readString(),this.quality=t.readByte(),this.state=t.readByte(),this.pos=t.readByte(),this.modelId=t.readInt()},t.prototype.isAlive=function(){return this.quality>0},t}();__reflect(GuildSiegeMonsData.prototype,"GuildSiegeMonsData");var GuildSkillInfo=function(){function t(){}return t}();__reflect(GuildSkillInfo.prototype,"GuildSkillInfo");var GuildShopItem=function(){function t(){}return t}();__reflect(GuildShopItem.prototype,"GuildShopItem");var GuildStoreModel=function(){function t(){this.guildStoreLv=0,this.recordInfoAry=[],this.recordMax=50}return t.prototype.parserBaseInfo=function(t){this.guildStoreLv=t.readByte(),this.guildStoreNum=t.readByte()},t.prototype.parserRecordInfo=function(t){var e,i=t.readByte(),n=[];if(null!=this.recordInfoAry&&this.recordInfoAry.length>0&&this.recordInfoAry.length+i>this.recordMax){var a=this.recordMax-i>0?this.recordMax-i:0;this.recordInfoAry.length=a}for(var o=0;i>o;o++)e=new GuildShopRecord,e.times=t.readInt(),e.roleName=t.readString(),e.itemId=t.readInt(),n.push(e);this.recordInfoAry=n.concat(this.recordInfoAry)},t.prototype.parserBoxItemInfo=function(t){var e=t.readByte();this.guildStoreItemData=[];for(var i=0;e>i;i++){var n=new GuildShopItem;n.itemId=t.readInt(),n.num=t.readInt(),this.guildStoreItemData.push(n)}},t.prototype.parserRecord=function(t){this.recordInfo=new GuildShopRecord,this.recordInfo.roleName=t.readString(),this.recordInfo.itemId=t.readInt()},t}();__reflect(GuildStoreModel.prototype,"GuildStoreModel");var GuildShopRecord=function(){function t(){}return t}();__reflect(GuildShopRecord.prototype,"GuildShopRecord");var GuildTaskInfo=function(){function t(){}return t.prototype.parser=function(t){this.taskId=t.readInt(),this.param=t.readInt(),this.state=t.readInt()},Object.defineProperty(t.prototype,"stdTask",{get:function(){return Cfg.getConfig(GuildTaskConfig,this.taskId)},enumerable:!0,configurable:!0}),t}();__reflect(GuildTaskInfo.prototype,"GuildTaskInfo");var GuildWarModel=function(){function t(){this.guildPoint=0,this.ownPoint=0,this.gongXun=0,this.doorTime=0,this.rewardDay=1,this.canGetDay=!1,this.getDayReward=!1,this.remainYB=-1,this.robYbNum=0,this.guildRankList=[],this.killName="",this.killGuild="",this.killEntityType=0,this.cityOwn=Lang.guild_str31,this.myRankList=[],this.flagStatu=0,this.endTime=0,this.flagName="",this.flagMasterHandle=0,this.flagGuild="",this.hudunMax=0,this.hudunValue=0,this.canClick=!0,this.canSendReward=!1,this.rewardIndex=0,this.sendList=[],this.sendNumList=[],this.winGuildInfo=new WinGuildInfo,this.openstate=0,this.rankList=[],this.attHandle=0,this.myGuildPointRank=[],this.guildHandleList=[],this.guildNum=0}return t.prototype.creatGuildRankReward=function(t,e){void 0===e&&(e=-1),this.rewardList=[];var i=Cfg.getConfigs(GuildBattleDistributionAward,t,CondType.NONE);for(var n in i){if(n==e+"")return i[n].awardShow;var a=i[n].awardShow;for(var o in a)this.checkIsHave(a[o])}return this.rewardList},t.prototype.creatGuildRewardList=function(){if(this.configList)return this.configList;this.configList=[];var t=Cfg.getConfigs2(GuildBattleDistributionAward);for(var e in t)-1==this.configList.lastIndexOf(t[e][1].rank)&&this.configList.push(t[e][1].rank);return this.configList},t.prototype.checkIsHave=function(t){for(var e=!1,i=this.rewardList.length,n=0;i>n;n++){var a=this.rewardList[n];a.id==t.id&&(e=!0,this.rewardList[n].count+=t.count)}e||this.rewardList.push(t)},t.prototype.getDoorTime=function(){return Math.max(0,Math.ceil((this.doorTime-Timer.ins().getTimer())/1e3))},t.prototype.getRedbagInfo=function(t){this.remainYB=t.readInt(),this.canSend=t.readBoolean(),this.canRod=t.readBoolean(),this.sendYbNum=t.readInt(),this.maxRedNum=t.readInt(),this.remainRedNum=t.readInt();var e=t.readInt();this.getRedBagNum=e,this.rebList=[];for(var i,n=0;e>n;n++)i=new GuildRedRobInfo,i.parse(t),Actor.ins().actorID==i.acId&&(this.robYbNum=i.robNum),this.rebList.push(i)},t.prototype.isHaveRedBag=function(){return this.canSend||this.canRod||this.getRedBagNum>0?!0:!1},t.prototype.isRedBagRedPoint=function(){return this.canSend||this.canRod?!0:!1},t.prototype.checkinAppoint=function(t,e){void 0===t&&(t=0),void 0===e&&(e=!1);var i=Cfg.getConfigs(GuildBattleLevel);for(var n in i)if(i[n].fbId==FbSys.ins().fbId)return 0==t?!0:e&&i[n].id>=t?!0:i[n].id==t?!0:!1;return!1},t.prototype.decodeGuildRankInfo=function(t){var e=t.readInt();this.guildRankList=[];for(var i,n=0;e>n;n++)i=new RankGuildInfo,i.parse(t),this.guildRankList.push(i)},t.prototype.getNextMapName=function(t){void 0===t&&(t=1);var e=FbSys.ins().fbId,i=Cfg.getConfigs(GuildBattleLevel),n=1;for(var a in i)if(e==i[a].fbId){if(1!=t)return i[a].name;n=i[a].id<4?i[a].id+1:i[a].id-1}return i[n].name},t.prototype.getIntoNextMapGongxun=function(){var t=FbSys.ins().fbId,e=Cfg.getConfigs(GuildBattleLevel),i=1;for(var n in e)if(t==e[n].fbId){if(!(e[n].id<4))return 0;i=e[n].id+1}return e[i].feats},t.prototype.getMapLevelInfo=function(){var t=FbSys.ins().fbId,e=Cfg.getConfigs(GuildBattleLevel),i=1;for(var n in e)t==e[n].fbId&&(i=e[n].id);return e[i]},t.prototype.decodeMyGuildRankInfo=function(t){var e=t.readInt();this.myRankList=[];for(var i,n=0;e>n;n++)i=new MyRankGuildInfo,i.parse(t),this.myRankList.push(i)},t.prototype.getEndTime=function(){return Math.max(0,Math.ceil((this.endTime-Timer.ins().getTimer())/1e3))},t.prototype.decodeGulidWarResult=function(t){var e=t.readString(),i=t.readInt(),n=t.readInt(),a=t.readInt(),o=t.readInt(),s=ComUtil.getObjLen(Cfg.getConfigs2(GuildBattleDistributionAward));a=a>s?0:a,openWin(GuildWarResultWin,e,i,n,a,o)},t.prototype.checkListElements=function(t,e){if(e.length<=0)return-1;for(var i=0;i<e.length;i++)if(e[i]==t)return i;return-1},t.prototype.getRewardByPoint=function(t){var e=[];if(!this.dataList){this.dataList=[];var i=Cfg.getConfigs(GuildBattlePersonalAward);for(var n in i)this.dataList.push(i[n])}for(var a=this.dataList.length,o=0;a>o;o++)t>=this.dataList[o].integral&&(e=e.concat(this.dataList[o].award));return e},t.prototype.getMyPointReward=function(){this.pointInfo||(this.pointInfo=new PointRewarddInfo);var t,e=Cfg.getConfigs(GuildBattlePersonalAward);for(var i in e)if(t=e[i],t.id==this.pointInfo.id)return t;return null},Object.defineProperty(t.prototype,"clickTime",{get:function(){return this._clickTime},set:function(t){this.canClick=!1,this._clickTime=t,Timer.ins()["do"](1e3,1e3,this._clickTime,this.endTimeChangeStatu,this)},enumerable:!0,configurable:!0}),t.prototype.endTimeChangeStatu=function(){--this._clickTime,this._clickTime<=0&&(this.canClick=!0,Timer.ins().remove(this.endTimeChangeStatu,this))},t.prototype.getCanSendNumByRank=function(t){void 0===t&&(t=-1);var e=Cfg.getConfigs(GuildBattleDistributionAward,this.guildWarRank,CondType.NONE),i=0;for(var n in e){if(n==t+"")return e[n].count;++i}return i},t.prototype.checkISSendAll=function(){for(var t=this.getCanSendNumByRank(),e=0;t>e;e++){var i=this.getCanSendNumByRank(e+1);if(!this.sendList[e])return showtipsFail(Lang.guild_str32),!1;for(var n=0,a=0;a<this.sendNumList[e].length;a++)n+=this.sendNumList[e][a];if(i>n)return showtipsFail(Lang.guild_str32),!1;for(var a=0;a<this.sendList[e].length;a++)if(!GuildSys.ins().checkIsInGuild(this.sendList[e][a].userId))return showtipsFail(this.sendList[e][a].name+" "+Lang.guild_str33),!1}return!0},Object.defineProperty(t.prototype,"acEndTime",{get:function(){return Math.max(0,this._acEndTime-Timer.ins().getTimer())},set:function(t){this._acEndTime=t},enumerable:!0,configurable:!0}),t.prototype.setOpenDesc=function(){if(0==this.startTime)return"";var t=new Date(this.startTime),e=t.getMinutes();return t.getMonth()+1+Lang.common_yue+t.getDate()+(Lang.common_hao+"("+Lang.common_zhou)+Lang.common_week[t.getDay()]+")"+t.getHours()+":"+(e>9?e:"0"+e)},t.prototype.getOpenDescHours=function(){if(0==this.startTime)return"";var t=new Date(this.startTime),e=t.getMinutes();return t.getHours()+":"+(e>9?e:"0"+e)+Lang.common_str43},t.prototype.isDanDayOpen=function(){var t=new Date(this.startTime),e=new Date(Actor.ins().serverTime);return t.getMonth()==e.getMonth()&&t.getDate()==e.getDate()},t.prototype.isguildAward=function(){return this.canSendReward&&GuildSys.ins().myOffice==GuildOffice.MENG_ZHU},t.prototype.getCdByType=function(t){if(0==FbSys.ins().fbId)return 0;var e=Cfg.getConfigs(GuildBattleLevel);for(var i in e)if(e[i].fbId==FbSys.ins().fbId&&(1==t||3==t))return e[i].switchSceneCd;return 0},t.prototype.getIsShowRedPoint=function(){return this.canSend||this.canRod||this.canGetDay?!0:!1},t.prototype.rankListChange=function(t){var e=t.readInt();this.rankList=[];for(var i,n=0;e>n;n++)i=new WarRankInfo,i.parse(t),this.rankList.push(i)},t.prototype.decodePointRewardInfo=function(t){this.pointInfo||(this.pointInfo=new PointRewarddInfo),this.pointInfo.parse(t)},t.prototype.getSelectDataByIndex=function(t){var e,i,n=[];if(this.sendList&&this.sendList[t]&&this.sendList[t].length>0){e=this.sendList[t],i=this.sendNumList[t];for(var a=void 0,o=0;o<e.length;o++)a=new SelectInfoData,a.data=e[o],a.num=i[o],n.push(a)}return n},t.prototype.getMyPointRankReward=function(t){var e=Cfg.getConfigs(GuildBattlePersonalRankAward);for(var i in e)if(e[i].rank==t)return e[i].award;return[]},t.prototype.getMyGuildPointRank=function(){var t,e,i=GuildSys.ins().getGuildMembers(0),n=i.length;this.myGuildPointRank=[];for(var a=0;n>a;a++)t=i[a],e=new SelectInfoData,e.data=t,e.num=this.getPointByAcId(t.userId),this.myGuildPointRank.push(e);return this.myGuildPointRank.sort(this.sort),this.myGuildPointRank},t.prototype.getPointByAcId=function(t){for(var e=this.myRankList.length,i=0;e>i;i++)if(this.myRankList[i].roleID==t)return this.myRankList[i].point;return 0},t.prototype.sort=function(t,e){var i=t.num,n=e.num;return i>n?-1:n>i?1:0},t.prototype.clearGuildWarList=function(){this.checkinAppoint()&&(this.attHandle=0,this.guildHandleList=[])},t.prototype.getEnemyList=function(){for(var t=[],e=LogicSys.ins().getFirstRolesList(),i=0,n=e;i<n.length;i++){var a=n[i],o=a.data;o.guildID!=GuildSys.ins().guildID&&t.push(a.masterHandle)}return t},t.prototype.getIsBaJian=function(){var t=GuildWarSys.ins().getModel();return 2==t.flagStatu&&t.flagMasterHandle==Actor.ins().handle&&this.isWatStart},t}();__reflect(GuildWarModel.prototype,"GuildWarModel");var GuildRedRobInfo=function(){function t(){}return t.prototype.parse=function(t){this.robNum=t.readInt(),this.robName=t.readString(),this.acId=t.readInt()},t}();__reflect(GuildRedRobInfo.prototype,"GuildRedRobInfo");var RankGuildInfo=function(){function t(){}return t.prototype.parse=function(t){this.guildName=t.readString(),this.ownName=t.readString(),this.guildPoint=t.readInt()},t}();__reflect(RankGuildInfo.prototype,"RankGuildInfo");var MyRankGuildInfo=function(){function t(){this.myName="",this.mapName="",this.point=0,this.attr=0,this.office=0,this.job=0,this.sex=0,this.roleID=0}return t.prototype.parse=function(t){this.roleID=t.readInt(),this.myName=t.readString(),this.mapName=t.readString(),this.point=t.readInt(),this.attr=t.readInt(),this.office=t.readInt(),this.job=t.readInt(),this.sex=t.readInt()},t}();__reflect(MyRankGuildInfo.prototype,"MyRankGuildInfo");var WinGuildInfo=function(){function t(){this.yuanyin=0,this.guildId=0,this.guildName="",this.guildOwnName="",this.guildOwnId=0,this.guildOwnJob=0,this.clothID=0,this.wapenId=0,this.huanhuaWapenId=0,this.wingId=0,this.wapenStrenthen=0,this.clothStrenthen=0,this.damonId=0}return t.prototype.parse=function(t){this.yuanyin=t.readByte(),this.guildId=t.readInt(),this.guildName=t.readString(),this.guildOwnName=t.readString(),this.guildOwnId=t.readInt(),this.guildOwnJob=t.readByte(),this.clothID=t.readInt(),this.wapenId=t.readInt(),this.wingId=t.readInt()},t}();__reflect(WinGuildInfo.prototype,"WinGuildInfo");var WarRankInfo=function(){function t(){}return t.prototype.parse=function(t){this.name=t.readString(),this.point=t.readInt()},t}();__reflect(WarRankInfo.prototype,"WarRankInfo");var PointRewarddInfo=function(){function t(){}return t.prototype.parse=function(t){this.isCan=t.readBoolean(),this.id=t.readInt(),this.point=t.readInt()},t}();__reflect(PointRewarddInfo.prototype,"PointRewarddInfo");var SelectInfoData=function(){function t(){}return t}();__reflect(SelectInfoData.prototype,"SelectInfoData");var GuildRoleSkillInfo=function(){function t(){this.guildSkillInfo=[]}return t}();__reflect(GuildRoleSkillInfo.prototype,"GuildRoleSkillInfo");var DamonPillMaxConfig=function(){function t(){}return Object.defineProperty(t,"max",{get:function(){return"max"},enumerable:!0,configurable:!0}),t}();__reflect(DamonPillMaxConfig.prototype,"DamonPillMaxConfig");var DamonStageConfig=function(){function t(){}return t}();__reflect(DamonStageConfig.prototype,"DamonStageConfig");var DartCarConfig=function(){function t(){}return t}();__reflect(DartCarConfig.prototype,"DartCarConfig");var DartCarLevelRewardConfig=function(){function t(){}return t}();__reflect(DartCarLevelRewardConfig.prototype,"DartCarLevelRewardConfig");var DartConstConfig=function(){function t(){}return t}();__reflect(DartConstConfig.prototype,"DartConstConfig");var DartGuildRankConfig=function(){function t(){}return t}();__reflect(DartGuildRankConfig.prototype,"DartGuildRankConfig");var DartJifenConfig=function(){function t(){}return t}();__reflect(DartJifenConfig.prototype,"DartJifenConfig");var GuildSkillItem=function(t){function e(){var e=t.call(this)||this;return e.skinName="GuildSkillItemEUI",e}return __extends(e,t),e.prototype.dataChanged=function(){var t=this.data;1==t.type?(this.imgIcon.source=ResMgr.getGuildSkillResource(Cfg.getConfig(GuildConfig).commonSkillIcon[t.index]),this.currentState="normal"):(this.imgIcon.source=ResMgr.getGuildSkillResource(Cfg.getConfig(GuildConfig).practiceSkillIcon[t.index]),this.currentState="sure"),this.lbLv.text="Lv."+t.level,this.imgRedPoint.visible=RpSys.ins().getData(GuildMapWin,GuildSkillWin,GuildSkillPanel,t.roleId,t.type+"_"+t.index)},e.prototype.setRedPoint=function(t){this.imgRedPoint.visible=t},e.prototype.setSelect=function(t){this.imgSelect.visible=t},e.prototype.showLv=function(t){this.lbLv.visible=t},e}(BaseItemRender);__reflect(GuildSkillItem.prototype,"GuildSkillItem"),window.GuildSkillItem=GuildSkillItem;var DartPersonRankConfig=function(){function t(){}return t}();__reflect(DartPersonRankConfig.prototype,"DartPersonRankConfig");var GuildSkillWin=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.redPointHead=[GuildMapWin],e.winType=WinType.OverlayWin,e}return __extends(e,t),e.panelNames=[GuildSkillPanel],e}(BaseWinAutoTab);__reflect(GuildSkillWin.prototype,"GuildSkillWin"),window.GuildSkillWin=GuildSkillWin;var GuildApplyWin=function(t){function e(){var e=t.call(this)||this;return e.winType=WinType.OverlayWin,e}return __extends(e,t),e.panelNames=[GuildApplyPanel],e}(BaseWinAutoTab);__reflect(GuildApplyWin.prototype,"GuildApplyWin"),window.GuildApplyWin=GuildApplyWin;var GuildConWin=function(t){function e(){return t.call(this)||this}return __extends(e,t),e.prototype.initUI=function(){t.prototype.initUI.call(this),this.layer=LayerMgr.Popup,this.skinName="GuildConWinEUI",this.addBg(),this.desc0.text=Lang.guild_str48+Cfg.getConfig(GuildDonateConfig,1).count+Cfg.getItemCfg(CurType.yb).getName(),this.desc1.text=Lang.guild_str48+GFunc.overLength(Cfg.getConfig(GuildDonateConfig,2).count)+Cfg.getItemCfg(CurType.gold).getName(),this.info0.text=Lang.guild_str49+Cfg.getConfig(GuildDonateConfig,1).awardContri+("  "+Lang.guild_str50)+Cfg.getConfig(GuildDonateConfig,1).awardFund,this.info1.text=Lang.guild_str49+Cfg.getConfig(GuildDonateConfig,2).awardContri+("  "+Lang.guild_str50)+Cfg.getConfig(GuildDonateConfig,2).awardFund,this.imgIcon0.source=ResMgr.getItemIcon(Cfg.getItemCfg(CurType.yb).getIcon(),IconType.IT_80x80),this.imgIcon1.source=ResMgr.getItemIcon(Cfg.getItemCfg(CurType.gold).getIcon(),IconType.IT_80x80),this.count0.visible=!urlParam.isShenhe},e.prototype.open=function(){t.prototype.open.call(this),this.addClickE(this.btn0,this.onClick),this.addClickE(this.btn1,this.onClick),this.addClickE(this.btnVip,this.onClick),this.addLsn(GuildSys.ins().patchConCount,this.update),GuildSys.ins().sendConCount(),this.currentState=Actor.ins().sVipLv>0?"vip":"noVip"},e.prototype.update=function(){var t=Cfg.getConfig(GuildDonateConfig,1).dayCount,i=t[Actor.ins().sVipLv<t.length?Actor.ins().sVipLv:t.length-1],n=Cfg.getConfig(GuildDonateConfig,1).dayCount[Actor.ins().sVipLv+1],a=GuildSys.ins().getConCount();a[0]<=0?(n&&n-i>0?this.count0.textFlow=addColorTF("<font color='#ff0000'>SVIP"+(Actor.ins().sVipLv+1)+"</font>"+Lang.guild_str118+(n-i)+Lang.common_str96):this.count0.text=i-a[0]+"/"+i,this.btn0.enabled=!1):(this.btn0.enabled=!0,this.count0.text=i-a[0]+"/"+i),this.count1.text=Cfg.getConfig(GuildDonateConfig,2).dayCount-a[1]+"/"+Cfg.getConfig(GuildDonateConfig,2).dayCount,this.btn1.enabled=0!=a[1],this.btn1.redPoint.visible=RpSys.ins().getData(GuildMapWin,GuildWin,GuildInfoPanel,e,"gold")},e.prototype.onClick=function(t){var e=GuildSys.ins().getConCount();switch(t.currentTarget){case this.btn0:e[0]<=0?showtipsFail(Lang.common_str50):GFunc.checkCurrency(CurType.yb,Cfg.getConfig(GuildDonateConfig,1).count)&&GuildSys.ins().sendCon(1);break;case this.btn1:e[1]<=0?showtipsFail(Lang.common_str50):GFunc.checkCurrency(CurType.gold,Cfg.getConfig(GuildDonateConfig,2).count)&&GuildSys.ins().sendCon(2);break;case this.btnVip:openWin(VipWin),closeWin(this)}},e}(BaseWinSingle);__reflect(GuildConWin.prototype,"GuildConWin"),window.GuildConWin=GuildConWin;var GuildCreateWin=function(t){function e(){var e=t.call(this)||this;return e.selectLevel=1,e}return __extends(e,t),e.prototype.initUI=function(){t.prototype.initUI.call(this),this.layer=LayerMgr.Popup,this.skinName="GuildCreateWinEUI",this.addBg();var e=Cfg.getConfig(GuildCreateConfig,1),i=Lang.guild_str51.replace("$count$",""+StrUtil.addColor(Cfg.getGuildMaxMember(1),1350425));e.award&&(i+="\r\n"+Lang.guild_str52.replace("$gx$",""+StrUtil.addColor(e.award,1350425))),this.labelCount1.textFlow=addColorTF(i),this.labelCost1.textFlow=addColorTF(""+Lang.guild_str53+StrUtil.addColor(e.moneyCount,16115290)+Lang.common_zs),e=Cfg.getConfig(GuildCreateConfig,2);var n=Lang.guild_str51.replace("$count$",""+StrUtil.addColor(Cfg.getGuildMaxMember(2),1350425));e.award&&(n+="\r\n"+Lang.guild_str52.replace("$gx$",""+StrUtil.addColor(e.award,1350425))),this.labelCount2.textFlow=addColorTF(n),this.labelCost2.textFlow=addColorTF(""+Lang.guild_str53+StrUtil.addColor(e.moneyCount,16115290)+Lang.common_zs),this.textInput.textDisplay.textAlign=egret.HorizontalAlign.LEFT,this.labelVip1.visible=this.labelVip2.visible=!urlParam.isShenhe},e.prototype.open=function(){t.prototype.open.call(this),this.addClickE(this.group1,this.onClick),this.addClickE(this.group2,this.onClick),this.addClickE(this.btnCreat,this.onClick)},e.prototype.onClick=function(t){var e=this;switch(t.currentTarget){case this.btnCreat:var i=Cfg.getConfig(GuildCreateConfig,this.selectLevel),n=i.vipLv;GFunc.checkSVIP(n)&&(""==this.textInput.text?showtipsFail(Lang.guild_str54):GFunc.checkCurrency(CurType.yb,i.moneyCount)&&openWin(WarnWin,Lang.guild_str55.replace("$yb$",""+i.moneyCount).replace("$lv$",""+i.level).replace("$name$",""+this.textInput.text),function(){GuildSys.ins().sendGuildCreate(e.selectLevel,e.textInput.text)},this));break;case this.group1:this.changeSelect(1);break;case this.group2:this.changeSelect(2)}},e.prototype.changeSelect=function(t){this.selectLevel=t,1==this.selectLevel?this.group1.addChild(this.selectBmp):this.group2.addChild(this.selectBmp)},e}(BaseWinSingle);__reflect(GuildCreateWin.prototype,"GuildCreateWin"),window.GuildCreateWin=GuildCreateWin;var GuildMapWin=function(t){function e(){var e=t.call(this)||this;return e.winType=WinType.MainWin,e}return __extends(e,t),e.prototype.initUI=function(){t.prototype.initUI.call(this),this.groupPage.visible=!1,this.eGroup.visible=!1,this.closeBtn.visible=!1},e.prototype.getBtnAct=function(){return this.getPanel(GuildMapPanel).getBtnAct()},e.panelNames=[GuildMapPanel],e}(BaseWinAutoTab);__reflect(GuildMapWin.prototype,"GuildMapWin"),window.GuildMapWin=GuildMapWin;var DartRobotConfig=function(){function t(){}return t}();__reflect(DartRobotConfig.prototype,"DartRobotConfig");var GuildNoticeWin=function(t){function e(){return t.call(this)||this}return __extends(e,t),e.prototype.initUI=function(){t.prototype.initUI.call(this),this.skinName="GuildNoticeWinEUI",this.addBg()},e.prototype.open=function(){t.prototype.open.call(this),this.addClickE(this.saveBtn,this.onTap),this.textInput.text=GuildSys.ins().notice},e.prototype.onTap=function(t){switch(t.currentTarget){case this.saveBtn:this.sendNotice()}},e.prototype.sendNotice=function(){return __awaiter(this,void 0,void 0,function(){var t,e;return __generator(this,function(i){switch(i.label){case 0:return i.trys.push([0,2,,3]),[4,platform.checkStr(this.textInput.text,4)];case 1:return t=i.sent(),GuildSys.ins().sendChangeNotice(t),GuildSys.ins().notice=t,closeWin(this),[3,3];case 2:return e=i.sent(),showtipsFail("内容不合法,设置失败,请重新设置"),[3,3];case 3:return[2]}})})},e}(BaseWinSingle);__reflect(GuildNoticeWin.prototype,"GuildNoticeWin"),window.GuildNoticeWin=GuildNoticeWin;var GuildOtherApplyWin=function(t){function e(){return t.call(this)||this}return __extends(e,t),e.prototype.initUI=function(){this.layer=LayerMgr.Popup,this.skinName="GuildOtherApplyWinEUI",t.prototype.initUI.call(this),this.arrayCollection=new eui.ArrayCollection,this.list.itemRenderer=GuildOtherApplyRender,this.list.dataProvider=this.arrayCollection,this.textInput.textDisplay.textAlign=egret.HorizontalAlign.LEFT,this.addBg()},e.prototype.open=function(){t.prototype.open.call(this),this.addClickE(this.checkBox,this.onClick),this.addChangeE(this.textInput,this.onInputChange),this.addLsn(GuildSys.ins().patchOtherApplysInfos,this.updateList),GuildSys.ins().sendOtherApplyInfos(),this.checkBox.selected=GuildSys.ins().isAuto,this.textInput.text=GuildSys.ins().autoLimit.toString()},e.prototype.close=function(){t.prototype.close.call(this),GuildSys.ins().sendGuildMembers()},e.prototype.onInputChange=function(t){void 0===t&&(t=null),GuildSys.ins().sendAddGuildLimit(this.checkBox.selected?1:0,parseInt(this.textInput.text))},e.prototype.updateList=function(){this.arrayCollection.source=GuildSys.ins().applyPlayers,this.arrayCollection.refresh()},e.prototype.onClick=function(t){switch(t.currentTarget){case this.checkBox:this.onInputChange()}},e}(BaseWinSingle);__reflect(GuildOtherApplyWin.prototype,"GuildOtherApplyWin"),window.GuildOtherApplyWin=GuildOtherApplyWin;var GuildShopRecordWin=function(t){function e(){return t.call(this)||this}return __extends(e,t),e.prototype.initUI=function(){t.prototype.initUI.call(this),this.skinName="GuildShopRecordWinEUI",this.addBg(),this.list.itemRenderer=GuildShopRecordRender,this.arrList=new eui.ArrayCollection},e.prototype.open=function(){t.prototype.open.call(this),this.arrList.replaceAll(GuildShopSys.ins().records),this.list.dataProvider=this.arrList},e}(BaseWinSingle);__reflect(GuildShopRecordWin.prototype,"GuildShopRecordWin"),window.GuildShopRecordWin=GuildShopRecordWin;var DartStoreConfig=function(){function t(){}return t}();__reflect(DartStoreConfig.prototype,"DartStoreConfig");var GuildWin=function(t){function e(){var e=t.call(this)||this;return e.redPointHead=[GuildMapWin],e.winType=WinType.OverlayWin,e}return __extends(e,t),e.panelNames=[GuildInfoPanel,GuildManagePanel,GuildMemberPanel,GuildListPanel],e.PAGE_MANAGER=1,e}(BaseWinAutoTab);__reflect(GuildWin.prototype,"GuildWin"),window.GuildWin=GuildWin;var GuildWarFbPanel=function(t){function e(){var e=t.call(this)||this;return e.isGuaji=!0,e.doorTime=0,e.caiqiTime=0,e.isTwo=!1,e.skinName="GuildWarFbPanelEUI",e.list1.itemRenderer=BossHomeFbPanelFace2,e.list1.dataProvider=e.arrCollectEnemy=new eui.ArrayCollection,e.list2.itemRenderer=BossHomeFbPanelFace2,e.list2.dataProvider=e.arrayCollectAtk=new eui.ArrayCollection,e.sceneBar.maximum=300,e.sceneBar.labelFunction=function(){return""},e.eff=new MC,e.eff.x=e.playNext.width/2,e.eff.y=e.playNext.height/2,e.eff.playFile(getEffName("loran_swift"),-1),e.playNext.addChild(e.eff),e.eff2=new MC,e.eff2.x=e.playNext.width/2,e.eff2.y=e.playNext.height/2,e.eff2.playFile(getEffName("bluefinger"),-1),e.playNext.addChild(e.eff2),e.eff3=new MC,e.eff3.x=55,e.eff3.y=622,e.eff3.playFile(getEffName("actIconCircle"),-1),e.addChild(e.eff3),e}return __extends(e,t),e.prototype.open=function(){this.addClickE(this.playNext,this.onTap),this.addLsn(LogicSys.ins().patchEnterMap,this.refushShowInfo);var t=GuildWarSys.ins();this.addLsn(t.patchPointUpdate,this.refushPoint),this.addLsn(t.patchPointRewardChange,this.refushPointReward),this.addLsn(t.patchFlagInfoChange,this.refushFlagStatu),this.addLsn(t.patchHudunInfo,this.hudunChange),this.addLsn(t.patchRankListChange,this.rankListChange),this.addLsn(t.patchGuildNumChange,this.refushGuildNum),this.addLsn(t.patchJoinPlayBack,this.updateGateBossBar),this.addLsn(LogicSys.ins().patchMainRoleTargetChange,this.onMainRoleTargetChange),this.addLsn(LogicSys.ins().patchMainRoleTargetMasterChange,this.onMainRoleTargetChange),this.addLsn(LogicSys.ins().patchEntityClick,this.onEntityClick),this.addLsn(MapContainer.ins().patchGridClick,this.onMapGridClick),this.addLsn(LogicSys.ins().patchCreateCommEntity,this.updateGuaJi),this.addClickE(this.seeRank,this.onTap),this.addClickE(this.seeMyGuild,this.onTap),this.addItemTapE(this.list1,this.onEnemyListClick),this.addItemTapE(this.list2,this.onEnemyListClick),this.addClickE(this.palaceFlag,this.onTap),this.addClickE(this.ruleDesc,this.onTap),this.addClickE(this.taskTraceBtn,this.onTap),this.addClickE(this.btnClose,this.onTap),this.addClickE(this.btnReward,this.onTap),this.addClickE(this.btnToggleAtk,this.onTap),this.addClickE(this.btnToggleEnemy,this.onTap),this.addClickE(this.btnStopGuaji,this.onTap),this.addClickE(this.btnGuaji,this.onTap),this.model=GuildWarSys.ins().getModel(),Timer.ins()["do"](1500,1500,0,this.updateAll,this),this.updateAll(),this.refushShowInfo(),this.refushPoint(),this.rankListChange(),this.refushFlagStatu(),this.refushGuildNum(),this.hudunChange(),this.setEff()},e.prototype.close=function(){t.prototype.close.call(this),isShowWin(GuildWarReliveWin)&&closeWin(GuildWarReliveWin)},e.prototype.updateGuaJi=function(){this.setGuaJi(!1)
},e.prototype.formatCountDown=function(t){var e=getFormatTime(t,"mm分ss秒");this.lastTime.textFlow=addColorTF(e)},e.prototype.updateAll=function(){this.updateEnemys(),this.updateAtk()},e.prototype.refushShowInfo=function(){this.eff2.alpha=this.eff.alpha=0,this.gongxun.visible=this.model.checkinAppoint(2),this.btnToggleEnemy.visible=this.attList.visible=this.model.checkinAppoint(2,!0),this.btnToggleAtk.visible=this.weixie.visible=this.model.checkinAppoint(2,!0),this.flagGroup.visible=this.model.checkinAppoint(4),this.flag.visible=this.model.checkinAppoint(4),this.scene.text=this.model.getNextMapName(0);var t=this.model.getMapLevelInfo();this.playNext.icon="llcz_zycs_"+t.btnName,this.sceneBar.value=100*(t.id-1),this.scene1.source=t.id>=1?"llcz_zycs_q":"",this.scene2.source=t.id>=2?"llcz_zycs_q":"",this.scene3.source=t.id>=3?"llcz_zycs_q":"",this.scene4.source=t.id>=4?"llcz_zycs_q":"",this.model.checkinAppoint(2)&&(this.isTwo=!0);var e=this.model.acEndTime;e&&Timer.ins()["do"](0,1e3,Math.ceil(e/1e3),this.formatCountDown,this),this.updateGateBossBar(),this.setGuaJiShow()},e.prototype.refushGuildNum=function(){this.comNum.text=this.model.guildNum+Lang.common_ren},e.prototype.refushPoint=function(){this.guildPoint.text=this.model.guildPoint+"",this.ownPoint.text=this.model.ownPoint+"",this.point.text=this.model.gongXun+"/"+this.model.getIntoNextMapGongxun();var t=StrUtil.addColor(this.model.gongXun+"/"+this.model.getIntoNextMapGongxun(),16115290);this.point.textFlow=addColorTF(""+Lang.guild_str57+t),this.refushPointReward(),this.setEff()},e.prototype.setEff=function(){this.model.checkinAppoint(1)?this.model.getDoorTime()<=0?this.eff2.alpha=this.eff.alpha=1:this.eff2.alpha=this.eff.alpha=0:this.model.checkinAppoint(2)?this.eff2.alpha=this.eff.alpha=this.model.gongXun<this.model.getIntoNextMapGongxun()?0:1:this.model.checkinAppoint(3)?this.eff2.alpha=this.eff.alpha=1:this.model.checkinAppoint(3)&&(this.eff2.alpha=this.eff.alpha=0)},e.prototype.onMapGridClick=function(){this.setGuaJi(!1)},e.prototype.onEntityClick=function(){this.setGuaJi(!1)},e.prototype.refushPointReward=function(){var t=this.model.getMyPointReward();if(t){var e=Lang.fb_str132+this.model.ownPoint+"/"+t.integral;this.eff3.alpha=this.model.pointInfo.isCan?1:0,this.taskTraceName0.textFlow=addColorTF(e),this.taskTraceName0.size=20}else this.taskTraceName0.text=Lang.guild_str58,this.taskTraceName0.size=18,this.eff3.alpha=0},e.prototype.onMainRoleTargetChange=function(){this.target&&this.target.stopMovie();var t=LogicSys.ins().centerEntity.AI.getNextTarget();if(t)for(var e=0;e<this.list1.numChildren;e++){var i=this.list1.getElementAt(e);if(i&&i.data==t.masterHandle){this.target=i,this.target.playMovie();break}}},e.prototype.updateEnemys=function(){var t=this.model.getEnemyList();this.arrCollectEnemy.source=t,this.arrCollectEnemy.refresh(),this.bar1.height=142*Math.min(3,t.length),this.isTwo&&(this.isTwo=!1,this.list1.validateNow(),this.list1.numChildren>0&&Guider.ins().show(GFunc.creatGuideData(GuideType.WeekMask,GuiderId.Id2000)))},e.prototype.updateAtk=function(){for(var t=LogicSys.ins().centerEntity.AI.getChouhenList(),e=[],i=0,n=t;i<n.length;i++){var a=n[i];e.push(a.masterHandle)}this.arrayCollectAtk.source=e,this.arrayCollectAtk.refresh(),this.bar2.width=142*Math.min(3,t.length)},e.prototype.rankListChange=function(){for(var t,e=this.model.rankList,i=0;3>i;i++)t=e[i],t?(this["rankName"+(i+1)].text=t.name,this["rankPoint"+(i+1)].text=t.point+""):(this["rankName"+(i+1)].text=Lang.common_str64,this["rankPoint"+(i+1)].text="0")},e.prototype.updateGateBossBar=function(){if(this.model.checkinAppoint(1)){var t=LogicSys.ins().getEntityByType(EntityType.MONSTER_SERVER);if(t){var e=Cfg.getMonstersConfigNew(t.getCfgId());this.nameTxt.text=""+e.name,this.head.source=""+ResMgr.getMonsterHead(e.head)}this.timeDesc.text="",this.hudun1.visible=!1,this.btnReward.visible=!0,this.doorTime=this.model.getDoorTime(),this.bloodBar.value=this.doorTime,this.bloodBar.maximum=Cfg.getConfig(GuildBattleConst).gateLiveTime,Timer.ins().remove(this.timeDo,this),this.doorTime<=0?this.flag.visible=!1:(this.flag.visible=!0,Timer.ins()["do"](1e3,1e3,this.doorTime,this.timeDo,this)),this.bloodBar.labelFunction=function(t,e){return Math.floor(100*t/e)+"%"},this.setEff()}},e.prototype.timeDo=function(){this.doorTime-=1,this.doorTime<=0&&(this.doorTime=0,Timer.ins().remove(this.timeDo,this)),this.bloodBar.value=this.doorTime},e.prototype.refushFlagStatu=function(){if(this.refushFlagStatu2(),this.model.checkinAppoint(4)){var t=LogicSys.ins().getEntityByType(EntityType.COLLECTION);if(t){var e=Cfg.getMonstersConfigNew(t.getCfgId());this.nameTxt.text=""+e.name,this.head.source=""+ResMgr.getMonsterHead(e.head)}if(this.caiqiTime=this.model.getEndTime(),this.btnReward.visible=!1,this.hudun1.visible=!1,0==this.model.flagStatu)this.clearTimeBar(),Timer.ins()["do"](0,1e3,this.caiqiTime,this.runTime,this,TimerType.LAST);else if(1==this.model.flagStatu)this.clearTimeBar(),this.timeDesc.text=Lang.guild_str59;else if(3==this.model.flagStatu){var i=LogicSys.ins().getEntityByType(EntityType.COLLECTION);i&&i.setAction(EntityAction.DIE)}else this.bloodBar.maximum=Cfg.getConfig(GuildBattleConst).gatherTime,Timer.ins()["do"](0,1e3,this.caiqiTime,this.runTime,this,TimerType.LAST),this.hudun1.visible=!0}},e.prototype.refushFlagStatu2=function(){if(this.model.checkinAppoint(4))this.flagDes.visible=!1;else if(2==this.model.flagStatu){this.flagDes.visible=!0;var t=this.model.getEndTime();t&&Timer.ins()["do"](0,1e3,t,this.formatCountDown2,this),this.guildName.text=""+Lang.guild_str60+this.model.flagGuild}else this.flagDes.visible=!1},e.prototype.formatCountDown2=function(t){var e=StrUtil.addColor(""+this.model.flagName,16115290)+Lang.guild_str61.replace("$time$",""+StrUtil.addColor(getFormatTime(t,"mm分ss秒"),1350425));this.roleName.textFlow=addColorTF(e)},e.prototype.clearTimeBar=function(){this.bloodBar.maximum=1,this.bloodBar.value=1,this.bloodBar.labelFunction=function(){return""}},e.prototype.hudunChange=function(){this.hudun.maximum=this.model.hudunMax,this.hudun.value=this.model.hudunValue,this.hudun.labelFunction=function(t,e){return Math.ceil(100*t/e)+"%"}},e.prototype.runTime=function(){--this.caiqiTime,this.caiqiTime>=0&&(2!=this.model.flagStatu?this.timeDesc.text=Math.floor(this.caiqiTime/60)+Lang.common_fen+this.caiqiTime%60+Lang.guild_str62:(this.timeDesc.text=this.model.flagName+Lang.guild_str63,this.bloodBar.value=this.caiqiTime,this.bloodBar.labelFunction=function(t,e){return Lang.guild_str64+Math.floor(t/60)+Lang.common_fen+t%60+Lang.common_miao})),this.caiqiTime<=0&&Timer.ins().remove(this.runTime,this)},e.prototype.onTap=function(t){var e=this;switch(t.currentTarget){case this.playNext:if(""!=this.model.killName)return void showtipsFail(Lang.guild_str65);if(this.model.getIntoNextMapGongxun()>this.model.gongXun)return void showtipsFail(Lang.guild_str66);if(!this.model.doorDie)return void showtipsFail(Lang.guild_str67);openWin(GuildWarReliveWin,1);break;case this.seeRank:openWin(GuildWarRewardWin);break;case this.seeMyGuild:openWin(GuildWarMemWin);break;case this.palaceFlag:if(ShouHuNewSys.ins().bianshenCdTime>0)return void showTipsWarn(Lang.guild_str68);if(this.model.getIsBaJian())return void showtipsFail(Lang.guild_str69);if(0==this.model.flagStatu)return void showtipsFail(Lang.guild_str70.replace("$second$",""+this.model.getEndTime()));if(2==this.model.flagStatu){var i=LogicSys.ins().getMainRoleByMasterHandle(this.model.flagMasterHandle);if(i){var n=i.data;if(n.guildID!=GuildSys.ins().guildID)return void LogicSys.ins().atkTargetByMasterHandle(i.masterHandle);if(n.guildID==GuildSys.ins().guildID)return void LogicSys.ins().onMapGridClick(MapContainer.ins().getNearestAroundXY(i,LogicSys.ins().centerEntity))}}var a=LogicSys.ins().getEntityByType(EntityType.COLLECTION);a?LogicSys.ins().onMapGridClick(a,function(){1==e.model.flagStatu?(LogicSys.ins().sendCollectionEntity(a.handle),LogicSys.ins().centerEntity.AI.startCaiJi(a.handle)):showtipsFail(Lang.guild_str71)}):showtipsFail(Lang.guild_str72);break;case this.ruleDesc:openWin(GuildWarRulesWin);break;case this.taskTraceBtn:var o=this.model.getMyPointReward();o?this.model.pointInfo.isCan?GuildWarSys.ins().sendPointReward():showtipsFail(Lang.guild_str73):showtipsFail(Lang.guild_str58);break;case this.btnClose:openWin(GuildWarReliveWin,3);break;case this.btnReward:var s=Cfg.getConfig(GuildBattleConst);s&&openWin(FbRewardDescWin,s.gateAwardDecs,s.gateFirstAward,s.gateCommonAward);break;case this.btnToggleEnemy:this.attList.visible=!this.attList.visible;break;case this.btnToggleAtk:this.weixie.visible=!this.weixie.visible;break;case this.btnGuaji:this.setGuaJi(!0);break;case this.btnStopGuaji:this.setGuaJi(!1)}},e.prototype.onEnemyListClick=function(t){var e=t.currentTarget.selectedItem;if(e){if(!this.model.canClick)return;LogicSys.ins().atkTargetByMasterHandle(e),this.model.clickTime=1}},e.prototype.setGuaJiShow=function(){this.model.checkinAppoint(1)?this.setGuaJi(!0):this.model.checkinAppoint(2)?this.setGuaJi(!1):this.model.checkinAppoint(3,!0)&&this.setGuaJi(!1)},e.prototype.setGuaJi=function(t){this.isGuaji=t,LogicSys.ins().setCenterEntityGuaji(t),this.updateGuaJiBtn()},e.prototype.updateGuaJiBtn=function(){this.model.checkinAppoint(1)||this.model.checkinAppoint(3,!0)?(this.btnStopGuaji.visible=!1,this.btnGuaji.visible=!1):this.model.checkinAppoint(2)&&(this.btnGuaji.visible=!this.isGuaji,this.btnStopGuaji.visible=this.isGuaji)},e.prototype.getEnemyItem=function(){return this.list1.numChildren>0?this.list1.getElementAt(0):null},e}(BasePanel);__reflect(GuildWarFbPanel.prototype,"GuildWarFbPanel"),window.GuildWarFbPanel=GuildWarFbPanel;var GuildInteRankItemRenderer=function(t){function e(){var e=t.call(this)||this;return e.skinName="GuildInteRankItemRendererEUI",e}return __extends(e,t),e.prototype.dataChanged=function(){this.rank.text=this.itemIndex+1+"",this.guildName.text=this.data.guildName,this.guildOwn.text=this.data.ownName,this.point.text=this.data.guildPoint},e}(BaseItemRender);__reflect(GuildInteRankItemRenderer.prototype,"GuildInteRankItemRenderer");var GuildInteRankItemRenderer2=function(t){function e(){var e=t.call(this)||this;return e.skinName="GuildInteRankItemRenderer2EUI",e}return __extends(e,t),e.prototype.dataChanged=function(){this.rank.text=this.itemIndex+1+"",this.guildName.text=this.data.guildName,this.guildOwn.text=this.data.ownName,this.point.text=this.data.guildPoint},e}(BaseItemRender);__reflect(GuildInteRankItemRenderer2.prototype,"GuildInteRankItemRenderer2");var GuildInteRewardItemRenderer=function(t){function e(){var e=t.call(this)||this;return e.skinName="GuildInteRewardItemRendererEUI",e.list.itemRenderer=ItemBaseReward,e}return __extends(e,t),e.prototype.dataChanged=function(){this.rankLabel.text=Lang.guild_str74.replace("$count$",""+(this.itemIndex+1)),this.data.rank?this.list.dataProvider=new eui.ArrayCollection(this.data.award):this.list.dataProvider=new eui.ArrayCollection(GuildWarSys.ins().getModel().creatGuildRankReward(this.data))},e}(BaseItemRender);__reflect(GuildInteRewardItemRenderer.prototype,"GuildInteRewardItemRenderer");var GuildWarMemberHeadRender2=function(t){function e(){var e=t.call(this)||this;return e.skinName="BossHomeFbPanelFace2Skin",e}return __extends(e,t),e.prototype.dataChanged=function(){this.data instanceof SelectInfoData&&(this.num.textFlow=addColorTF(this.data.num+Lang.common_fen1),this.labelName.textFlow=addColorTF(this.data.data.name),this.imgFace.source=""+ResMgr.getHeadIcon(this.data.data.sex))},e}(BaseItemRender);__reflect(GuildWarMemberHeadRender2.prototype,"GuildWarMemberHeadRender2");var GuildWarMemListRenderer=function(t){function e(){var e=t.call(this)||this;return e.skinName="GuildWarMemListRendererEUI",e}return __extends(e,t),e.prototype.dataChanged=function(){this.face.source=""+ResMgr.getHeadIcon(this.data.sex),this.nameLab.text="["+GuildSys.ins().getOfficeName(this.data.office)+"]",this.nameLab0.text=this.data.myName,this.conLab.text=this.data.point+"",this.attack.text=this.data.attr+"",this.onLine.text=""==this.data.mapName?Lang.guild_str75:this.data.mapName},e}(BaseItemRender);__reflect(GuildWarMemListRenderer.prototype,"GuildWarMemListRenderer");var MemberItem3Renderer=function(t){function e(){var e=t.call(this)||this;return e.chooseNum=1,e.skinName="MemberItem3RendererEUI",e}return __extends(e,t),e.prototype.dataChanged=function(){if(this.data instanceof SelectInfoData){var t=this.data;this.job.textFlow=addColorTF("["+GuildSys.ins().getOfficeName(t.data.office)+"]"+StrUtil.addColor(t.data.name,14668213)),this.nameLable.text="",this.payNum.text=""+t.num,this.attr.text=""+t.data.power,this.face.source=""+ResMgr.getHeadIcon(t.data.sex)}this.checkBoxs.selected=!1,this.btn1.visible=this.btn2.visible=this.num1.visible=this.inputBg.visible=!1},e}(BaseItemRender);__reflect(MemberItem3Renderer.prototype,"MemberItem3Renderer");var SelectRewardItemRenderer=function(t){function e(){var e=t.call(this)||this;return e.skinName="SelectRewardItemRendererEUI",e.setSkinPart("goods",new ItemBaseReward),e.choosePeople.name="SelectRewardItemRenderer.choosePeople",e.list.itemRenderer=GuildWarMemberHeadRender2,e}return __extends(e,t),e.prototype.dataChanged=function(){var t=GuildWarSys.ins().getModel().creatGuildRankReward(GuildWarSys.ins().getModel().guildWarRank,this.itemIndex+1);this.goods.data=t[0],this.sendNum=GuildWarSys.ins().getModel().getCanSendNumByRank(this.itemIndex+1),this.payNum.text=this.sendNum+Lang.common_fen1;var e=GuildWarSys.ins().getModel().getSelectDataByIndex(this.itemIndex),i=0;if(e.length>0)for(var n in e)i+=e[n].num;this.chooseNum.text=i+"/"+this.sendNum,this.list.dataProvider=new eui.ArrayCollection(e)},e}(BaseItemRender);__reflect(SelectRewardItemRenderer.prototype,"SelectRewardItemRenderer");var DazaoCommonConfig=function(){function t(){}return t}();__reflect(DazaoCommonConfig.prototype,"DazaoCommonConfig");var DazaoEquipConfig=function(){function t(){}return t}();__reflect(DazaoEquipConfig.prototype,"DazaoEquipConfig");var DazaoFenjieConfig=function(){function t(){}return t}();__reflect(DazaoFenjieConfig.prototype,"DazaoFenjieConfig");var DazaoFootEquipConfig=function(){function t(){}return t}();__reflect(DazaoFootEquipConfig.prototype,"DazaoFootEquipConfig");var DazaoRingStageConfig=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return __extends(e,t),e}(DazaoRingStarConfig);__reflect(DazaoRingStageConfig.prototype,"DazaoRingStageConfig");var DisUtil=function(){function t(){}return t.createEuiImage=function(t,e,i,n){void 0===i&&(i=0),void 0===n&&(n=0);var a=new eui.Image;return a.x=i,a.y=n,a.source=e,t.addChild(a),a},t.createEuiLabelText=function(t,e,i,n,a){void 0===i&&(i=0),void 0===n&&(n=0);var o=new eui.Label;return o.x=i,o.y=n,o.textFlow=addColorTF(e),o.size=a,o.fontFamily="黑体",t&&t.addChild(o),o},t.createEuiTextInput=function(t,e,i,n,a){void 0===e&&(e=0),void 0===i&&(i=0);var o=new eui.EditableText;return o.x=e,o.y=i,o.width=n,o.height=a,t.addChild(o),o},t.remove=function(t){t&&t.parent&&t.parent.removeChild(t)},t.shakeIt=function(e,i,n,a,o){if(void 0===a&&(a=1),void 0===o&&(o=function(){return!0}),!getLocation(4)&&e&&!(1>a)&&o()){var s=t.shakingList[e.hashCode];if(!s){t.shakingList[e.hashCode]=!0;var r=[{anchorOffsetX:0,anchorOffsetY:-i},{anchorOffsetX:-i,anchorOffsetY:0},{anchorOffsetX:i,anchorOffsetY:0},{anchorOffsetX:0,anchorOffsetY:i},{anchorOffsetX:0,anchorOffsetY:0}];egret.Tween.removeTweens(e);var u=50;egret.Tween.get(e).to(r[0],u).to(r[1],u).to(r[2],u).to(r[3],u).to(r[4],u).call(function(){delete t.shakingList[e.hashCode],t.shakeIt(e,i,n,--a)},this)}}},t.flashingObj=function(t,e,i){void 0===i&&(i=300);var n=function(){if(e){t.visible=!0;var a=1==t.alpha?0:1;egret.Tween.removeTweens(t),egret.Tween.get(t).to({alpha:a},i).call(n)}else egret.Tween.removeTweens(t),t.alpha=1,t.visible=!1};n()},t.flashAnObj=function(t,e){void 0===e&&(e=200),egret.Tween.get(t).to({alpha:3},e/2).to({alpha:1},e/2)},t.removeInput=function(t){t.inputUtils._removeStageText(),this.remove(t)},t.drawCirByAngle=function(t,e,i,n,a){return this.drawCirByRadian(t,e,i*Math.PI/180,n*Math.PI/180,a)},t.drawCirByRadian=function(t,e,i,n,a){function o(){t.graphics.clear(),t.graphics.beginFill(65535,1),t.graphics.moveTo(0,0),t.graphics.lineTo(e,0),t.graphics.drawArc(0,0,e,i,n,a),t.graphics.lineTo(0,0),t.graphics.endFill()}return null==t&&(t=new egret.Shape),o(),t},t.grayFilter=function(){var t=new egret.ColorMatrixFilter([.3,.6,0,0,0,.3,.6,0,0,0,.3,.6,0,0,0,0,0,0,1,0]);return[t]},t.whiteFilter=function(){var t=new egret.ColorMatrixFilter([1,0,0,0,100,0,1,0,0,100,0,0,1,0,100,0,0,0,1,0]);return[t]},t.drawMasks=function(t,e,i,n,a){void 0===n&&(n=1),void 0===a&&(a=0);for(var o=8,s=[],r=0;o>r;r++)s[r]=new egret.Shape;var u=t.x,h=t.width,l=e.width-t.right,p=t.y,c=t.height,d=e.height-t.bottom;this.drawShape(s[0],new egret.Rectangle(0,0,u,p),n,a),this.drawShape(s[1],new egret.Rectangle(t.x,0,h,p),n,a),this.drawShape(s[2],new egret.Rectangle(t.right,0,l,p),n,a),this.drawShape(s[3],new egret.Rectangle(0,t.topLeft.y,u,c),n,a),this.drawShape(s[4],new egret.Rectangle(t.bottomRight.x,t.topLeft.y,l,c),n,a),this.drawShape(s[5],new egret.Rectangle(0,t.bottomRight.y,u,d),n,a),this.drawShape(s[6],new egret.Rectangle(t.x,t.bottomRight.y,h,d),n,a),this.drawShape(s[7],new egret.Rectangle(t.right,t.bottomRight.y,l,d),n,a);for(var r=0;o>r;r++)i.addChild(s[r]);return s},t.drawShape=function(t,e,i,n){void 0===i&&(i=.5),void 0===n&&(n=0),t.graphics.clear(),t.graphics.beginFill(n,i),t.graphics.drawRect(e.x,e.y,e.width,e.height),t.graphics.endFill()},t.shakingList={},t}();__reflect(DisUtil.prototype,"DisUtil");var PersonRewardRenderer=function(t){function e(){var e=t.call(this)||this;return e.skinName="PersonRewardRendererEUI",e.itemList.itemRenderer=ItemBaseReward,e}return __extends(e,t),e.prototype.dataChanged=function(){this.desc.text=+this.data.integral+"",this.itemList.dataProvider=new eui.ArrayCollection(this.data.award)},e}(BaseItemRender);__reflect(PersonRewardRenderer.prototype,"PersonRewardRenderer");var GuildWarRedBagDetailWin=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return __extends(e,t),e.prototype.initUI=function(){t.prototype.initUI.call(this),this.layer=LayerMgr.Popup,this.skinName="RedBagDetailsWinEUI",this.addBg(),this.list.itemRenderer=GuildWarRedBagDetailWinItem},e.prototype.open=function(){t.prototype.open.call(this),this.num.text=GuildWarSys.ins().getModel().robYbNum+"",this.list.dataProvider=new eui.ArrayCollection(GuildWarSys.ins().getModel().rebList)},e}(BaseWinSingle);__reflect(GuildWarRedBagDetailWin.prototype,"GuildWarRedBagDetailWin");var GuildWarRedBagDetailWinItem=function(t){function e(){var e=t.call(this)||this;return e.skinName="RedBagRendererEUI",e}return __extends(e,t),e.prototype.dataChanged=function(){this.num.text=this.data.robNum,this.nameLabel.text=this.data.robName},e}(BaseItemRender);__reflect(GuildWarRedBagDetailWinItem.prototype,"GuildWarRedBagDetailWinItem");var GuildWarRedBagWin=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return __extends(e,t),e.prototype.initUI=function(){t.prototype.initUI.call(this),this.layer=LayerMgr.Popup,this.skinName="RedBagWinEUI",this.setSkinPart("price",new PriceIcon),this.model=GuildWarSys.ins().getModel(),this.num1.restrict="0-9",this.num2.restrict="0-9"},e.prototype.open=function(){t.prototype.open.call(this),this.addClickE(this.closeBtn0,this.onTap),this.addClickE(this.rob,this.onTap),this.addClickE(this.send,this.onTap),this.addClickE(this.btn1,this.onTap),this.addClickE(this.btn2,this.onTap),this.addClickE(this.btn3,this.onTap),this.addClickE(this.btn4,this.onTap),this.addClickE(this.btn5,this.onTap),this.addClickE(this.btn6,this.onTap),this.addChangeE(this.num1,this.onTxtChange),this.addChangeE(this.num2,this.onTxtChange),this.model.canRod?(this.currentState="rob",this.refushInfo()):(this.currentState="send",this.refushSendInfo())},e.prototype.onTxtChange=function(t){var e=this,i=1;switch(t.currentTarget){case this.num1:i=1;break;case this.num2:i=2}Timer.ins()["do"](500,0,1,function(){e.checkInputChange(i)},this)},e.prototype.checkInputChange=function(t){var e;switch(t){case 1:e=Number(this.num1.text),e>this.sendYBMaxNum&&(e=this.sendYBMaxNum),this.sendYb=e,this.num1.text=this.sendYb+"";break;case 2:e=Number(this.num2.text),e>this.sendMaxNum&&(e=this.sendMaxNum),this.sendNum=e,this.num2.text=this.sendNum+""}this.checkPercentage()},e.prototype.refushSendInfo=function(){this.sendYb=this.sendYBMaxNum=this.model.remainYB,this.sendMaxNum=this.sendNum=GuildSys.ins().getMemberNum(),this.price.setPrice(this.sendYb),this.num1.text=this.sendYb+"",this.num2.text=this.sendNum+""},e.prototype.refushInfo=function(){this.priceLabel.text=""+this.model.sendYbNum,this.remainBag.text=Lang.fb_str225+this.model.remainRedNum+"/"+this.model.maxRedNum},e.prototype.onTap=function(t){switch(t.currentTarget){case this.closeBtn0:closeWin(e);break;case this.rob:GuildWarSys.ins().requestRobRedBag();break;case this.send:GuildWarSys.ins().requestSendRedBag(this.sendYb,this.sendNum);break;case this.btn1:--this.sendYb,this.sendYb<this.sendNum&&(this.sendYb=this.sendNum),this.num1.text=this.sendYb+"";break;case this.btn2:++this.sendYb,this.sendYb>this.sendYBMaxNum&&(this.sendYb=this.sendYBMaxNum),this.num1.text=this.sendYb+"";break;case this.btn3:--this.sendNum,this.sendNum<1&&(this.sendNum=1),this.num2.text=this.sendNum+"";break;case this.btn4:++this.sendNum,this.sendNum>this.sendMaxNum&&(this.sendNum=this.sendMaxNum),this.num2.text=this.sendNum+"";break;case this.btn5:this.sendYb=this.sendYBMaxNum,this.num1.text=this.sendYb+"";break;case this.btn6:this.sendNum=this.sendMaxNum,this.num2.text=this.sendNum+""}},e.prototype.checkPercentage=function(){this.sendYb<this.sendNum&&(this.sendYb=this.sendNum,this.num1.text=this.sendYb+"")},e}(BaseWinSingle);__reflect(GuildWarRedBagWin.prototype,"GuildWarRedBagWin");var GuildWarDailyAwardWin=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return __extends(e,t),e.prototype.initUI=function(){t.prototype.initUI.call(this),this.layer=LayerMgr.Popup,this.skinName="DailyAwardWinEUI",this.addBg(),this.list.itemRenderer=ItemBaseReward},e.prototype.open=function(){t.prototype.open.call(this),this.addClickE(this.sure,this.onTap),this.model=GuildWarSys.ins().getModel(),this.list.dataProvider=new eui.ArrayCollection(Cfg.getConfig(GuildBattleDayAward,this.model.rewardDay).award)},e.prototype.onTap=function(t){switch(t.currentTarget){case this.sure:if(!this.model.canGetDay)return void showtipsFail(Lang.guild_str83);if(this.model.getDayReward)return void showtipsFail(Lang.guild_str84);GuildWarSys.ins().requestDayReward(this.model.rewardDay),closeWin(e)}},e}(BaseWinSingle);__reflect(GuildWarDailyAwardWin.prototype,"GuildWarDailyAwardWin");var GuildWarLastRankWin=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.winType=WinType.OverlayWin,e}return __extends(e,t),e.prototype.initUI=function(){t.prototype.initUI.call(this),this.addBg()},e.panelNames=[GuildInteRankInfo2,PersonalInteRankInfo],e}(BaseWinAutoTab);__reflect(GuildWarLastRankWin.prototype,"GuildWarLastRankWin");var GuildWarLuckDrawWin=function(t){function e(){var e=t.call(this)||this;return e.itemId=0,e.time=0,e.layer=LayerMgr.Tips,e.skinName="GuildWarLuckDrawWinEUI",e.addBg(),e.setSkinPart("itemIcon",new ItemBaseReward),e.progBar.labelDisplay.visible=!0,e.progBar.labelFunction=e.progressLabelFunction,e.currentState="weitou",e.nameTxt.text="",e.lb_name.text="",e}return __extends(e,t),e.prototype.open=function(e,i,n){void 0===i&&(i=0),void 0===n&&(n=null),t.prototype.open.call(this),this.itemId=e,this.progBar.maximum=this.time=i,this.funLuckDraw=n,this.progBar.value=this.time,this.itemIcon.data=GFunc.creatRewardDataById(this.itemId),Timer.ins()["do"](1e3,1e3,this.time,this.updateLabel,this),this.addClickE(this.buyBtn,this.onTap),this.addClickE(this.closeBtn1,this.onTap)},e.prototype.close=function(){t.prototype.close.call(this),Timer.ins().remove(this.updateLabel,this)},e.prototype.progressLabelFunction=function(t,e){return""+t+Lang.common_miao},e.prototype.updateLabel=function(){this.progBar.value=--this.time,this.time<=0&&(Timer.ins().remove(this.updateLabel,this),"yitou"==this.currentState?this.endEvent():closeWin(e))},e.prototype.endEvent=function(){this.currentState="jieshu",this.lb_name.text=this.roleName,this.jsTime=5,Timer.ins()["do"](1e3,1e3,5,this.timeOver,this)},e.prototype.timeOver=function(){this.jsTime--,this.jsTime<=0&&(closeWin(e),Timer.ins().remove(this.timeOver,this))},e.prototype.setMyNum=function(t){this.currentState="yitou",this.numBmp.text=t.toString()},e.prototype.setMaxNum=function(t,e){this.roleName=e,this.maxNum=t,this.nameTxt.text=Lang.guild_str85.replace("$name$",""+e).replace("$count$",""+t)},e.prototype.onTap=function(t){switch(t.target){case this.buyBtn:if(this.time<=0)return void showtipsFail(Lang.guild_str86);this.funLuckDraw&&this.funLuckDraw();break;case this.closeBtn1:closeWin(e)}},e}(BaseWinSingle);__reflect(GuildWarLuckDrawWin.prototype,"GuildWarLuckDrawWin");var DespairBossCommonConfig=function(){function t(){}return t}();__reflect(DespairBossCommonConfig.prototype,"DespairBossCommonConfig");var GuildWarMemWin=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return __extends(e,t),e.prototype.initUI=function(){t.prototype.initUI.call(this),this.layer=LayerMgr.Popup,this.skinName="GuildWarMemWinEUI",this.addBg(),this.list.itemRenderer=GuildWarMemListRenderer,this.list.dataProvider=this.data=new eui.ArrayCollection},e.prototype.open=function(){t.prototype.open.call(this),this.addLsn(GuildWarSys.ins().patchMyRankChange,this.refushList),GuildWarSys.ins().requestOwnMyGuildRank()},e.prototype.refushList=function(){this.data.replaceAll(GuildWarSys.ins().getModel().myRankList.concat())},e}(BaseWinSingle);__reflect(GuildWarMemWin.prototype,"GuildWarMemWin");var GuildWarReliveWin=function(t){function e(){return t.call(this)||this}return __extends(e,t),e.prototype.initUI=function(){t.prototype.initUI.call(this),this.layer=LayerMgr.Top,this.skinName="GuildWarReliveWinEUI"},e.prototype.open=function(e,i){switch(void 0===i&&(i=0),t.prototype.open.call(this),this.type=e,this.model=GuildWarSys.ins().getModel(),this.type){case 1:this.currentState="switch",this.defaultStr=Lang.guild_str87,this.s=this.model.getCdByType(this.type);break;case 2:this.currentState="revive",this.defaultStr=Lang.guild_str88,this.s=i,this.validateNow();break;case 3:this.currentState="exit",this.defaultStr=Lang.guild_str89,this.s=5}this.addClickE(this.cancelBtn,this.onTap),this.timeDown.text=""+this.s+this.defaultStr,Timer.ins()["do"](1e3,1e3,this.s,this.updateLabel,this),this.refushMapInfo()},e.prototype.close=function(){t.prototype.close.call(this),Timer.ins().remove(this.updateLabel,this),1!=this.type&&(this.model.killName="")},e.prototype.refushMapInfo=function(){1==this.type?this.mapName.text=this.model.getNextMapName():2==this.type&&(this.model.killEntityType==EntityType.MONSTER_SERVER?(this.killName.text=Lang.guild_str90.replace("$name$",""+this.model.killName),this.guildName.text=""):(this.killName.text=Lang.guild_str91.replace("$name$",""+this.model.killName),this.guildName.text=""+Lang.guild_str92+this.model.killGuild+" "))},e.prototype.updateLabel=function(){this.s--,this.s<=0&&(1==this.type&&GuildWarSys.ins().requestPlayNextMap(),3==this.type&&FbSys.ins().sendExitFb(),closeWin(e)),this.timeDown.text=""+this.s+this.defaultStr},e.prototype.onTap=function(t){switch(t.currentTarget){case this.cancelBtn:closeWin(e)}},e}(BaseWinSingle);__reflect(GuildWarReliveWin.prototype,"GuildWarReliveWin");var GuildWarResultWin=function(t){function e(){return t.call(this)||this}return __extends(e,t),e.prototype.initUI=function(){t.prototype.initUI.call(this),this.layer=LayerMgr.Popup,this.skinName="GuildWarResultWinEUI",this.addBg(),this.list1.itemRenderer=ItemBaseReward,this.list2.itemRenderer=ItemBaseReward,this.bg.visible=!1;var e=MC.create(ResMgr.getEffName("win"),-1);this.titleGroup.addChild(e)},e.prototype.open=function(e,i,n,a,o){void 0===i&&(i=0),void 0===n&&(n=""),void 0===a&&(a=0),void 0===o&&(o=0),t.prototype.open.call(this),this.guildName.text=""==e?Lang.guild_str31:e,this.myPoint.text=i+"",this.guildPoint.text=n,this.guildRank.text=a>0?Lang.guild_str74.replace("$count$",""+a):Lang.common_str17,this.myRank.text=o>0?Lang.guild_str74.replace("$count$",""+o):Lang.common_str17;var s=GuildWarSys.ins().getModel(),r=s.getRewardByPoint(i),u=s.getMyPointRankReward(o);this.list1.dataProvider=new eui.ArrayCollection(u.concat(r)),this.list2.dataProvider=new eui.ArrayCollection(a>0?s.creatGuildRankReward(a):[]),this.addClickE(this.confirmBtn,this.onTap),this.s=5,Timer.ins()["do"](0,1e3,5,this.updateconfirmBtnLabel,this)},e.prototype.close=function(){t.prototype.close.call(this),Timer.ins().remove(this.updateconfirmBtnLabel,this)},e.prototype.onTap=function(){closeWin(e)},e.prototype.updateconfirmBtnLabel=function(){this.s--,this.s<=0&&closeWin(e),this.timeTxt.text="（"+this.s+"s）"},e}(BaseWinSingle);__reflect(GuildWarResultWin.prototype,"GuildWarResultWin");var GuildWarRewardWin=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.winType=WinType.OverlayWin,e}return __extends(e,t),e.prototype.initUI=function(){t.prototype.initUI.call(this),this.addBg()},e.panelNames=[GuildInteRankInfo,PersonalInteRankInfo,GuildInteRewardInfo,PersonInteRewardInfo],e}(BaseWinAutoTab);__reflect(GuildWarRewardWin.prototype,"GuildWarRewardWin");var GuildWarRulesWin=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return __extends(e,t),e.prototype.initUI=function(){t.prototype.initUI.call(this),this.skinName="RuleTipsSkin"},e.prototype.open=function(){t.prototype.open.call(this),this.addClickE(this.bg,this.onTap),this.addClickE(this.attr,this.onTap),this.addClickE(this.leftBtn,this.onTap),this.addClickE(this.rightBtn,this.onTap),this.cruIndex=GuildWarSys.ins().getModel().getMapLevelInfo().id,this.refushInfo()},e.prototype.refushInfo=function(){var t=Cfg.getConfig(GuildBattleLevel,this.cruIndex);this.mapName.text=t.name,this.attr.textFlow=StrUtil.toTF(t.help),this.rightBtn.visible=this.cruIndex<4,this.leftBtn.visible=this.cruIndex>1},e.prototype.onTap=function(t){switch(t.currentTarget){case this.leftBtn:--this.cruIndex,this.refushInfo();break;case this.rightBtn:++this.cruIndex,this.refushInfo();break;default:closeWin(e)}},e}(BaseWinSingle);__reflect(GuildWarRulesWin.prototype,"GuildWarRulesWin");var GuildWarSelectMemberAwardWin=function(t){function e(){var e=t.call(this)||this;return e.dataLen=[],e.layer=LayerMgr.Popup,e.skinName="SelectMemberRewardWinEUI",e.addBg(),e.list.itemRenderer=SelectRewardItemRenderer,e}return __extends(e,t),e.prototype.open=function(){t.prototype.open.call(this),this.model=GuildWarSys.ins().getModel(),GuildWarSys.ins().requestOwnMyGuildRank(),this.addClickE(this.closeBtn0,this.onTap),this.addClickE(this.sendReward,this.onTap),this.addClickE(this.list,this.onTap),this.addLsn(GuildWarSys.ins().patchSendListChange,this.refushList),this.refushPanelInfo()},e.prototype.refushPanelInfo=function(){this.rankLabel.text=Lang.guild_str74.replace("$count$",""+this.model.guildWarRank),this.dataLen.length=this.model.getCanSendNumByRank(),this.refushList()},e.prototype.refushList=function(){this.list.dataProvider=new eui.ArrayCollection(this.dataLen)},e.prototype.onTap=function(t){var i=this;switch(t.currentTarget){case this.closeBtn0:closeWin(e);break;case this.sendReward:Timer.ins()["do"](100,0,1,function(){i.model.checkISSendAll()&&GuildWarSys.ins().sendFenReward(i.dataLen.length,i.model.sendList)},this)}if(t.target&&"SelectRewardItemRenderer.choosePeople"==t.target.name){var n=t.target.parent;this.model.rewardIndex=n.itemIndex,openWin(GuildWarSelectMemberPanelWin,n.itemIndex,n.sendNum)}},e}(BaseWinSingle);__reflect(GuildWarSelectMemberAwardWin.prototype,"GuildWarSelectMemberAwardWin");
var GuildWarSelectMemberPanelWin=function(t){function e(){return t.call(this)||this}return __extends(e,t),e.prototype.initUI=function(){t.prototype.initUI.call(this),this.layer=LayerMgr.Popup,this.skinName="SelectMemberPanelWinEUI",this.addBg(),this.list.itemRenderer=MemberItem3Renderer},e.prototype.open=function(e,i){void 0===i&&(i=0),t.prototype.open.call(this),this.index=e,this.maxNum=i,this.model=GuildWarSys.ins().getModel(),this.addClickE(this.list,this.onTap),this.addClickE(this.sureBtn,this.onTap),this.model.sendList[this.index]=[],this.model.sendNumList[this.index]=[],this.selectList=[],this.numList=[],this.selectItemList=[],this.chooseNum.text=Lang.guild_str93+" "+this.countNum()+"/"+this.maxNum,this.sureBtn.enabled=this.selectList.length==this.maxNum,this.refushList()},e.prototype.refushList=function(){this.list.dataProvider=new eui.ArrayCollection(this.model.getMyGuildPointRank())},e.prototype.close=function(){t.prototype.close.call(this),GuildWarSys.ins().patchSendListChange()},e.prototype.countNum=function(){var t=0;if(this.selectItemList)for(var e in this.selectItemList)t+=this.selectItemList[e].chooseNum;return t},e.prototype.onTap=function(t){switch(t.currentTarget){case this.sureBtn:this.toNumList(),this.model.sendList[this.index]=this.selectList,this.model.sendNumList[this.index]=this.numList,closeWin(e);break;case this.list:var i=t.target.parent;if(i&&i.data){var n=this.selectItemList.lastIndexOf(i);switch(t.target){case i.btn1:--i.chooseNum,i.chooseNum<1&&(i.chooseNum=1);break;case i.btn2:if(this.countNum()>=this.maxNum)return void showtipsFail(Lang.guild_str94);++i.chooseNum;break;default:if(n>=0)i.checkBoxs.selected=!1,i.chooseNum=0,this.selectItemList.splice(n,1);else{if(this.countNum()>=this.maxNum)return i.checkBoxs.selected=!1,void showtipsFail(Lang.guild_str94);i.checkBoxs.selected=!0,this.selectItemList.push(i),i.chooseNum=1}}i.num1.text=i.chooseNum+"",this.setAddInfoShow(i,i.checkBoxs.selected),this.chooseNum.text=Lang.guild_str93+" "+this.countNum()+"/"+this.maxNum,this.sureBtn.enabled=this.countNum()==this.maxNum}}},e.prototype.setAddInfoShow=function(t,e){void 0===e&&(e=!1),t.btn1.visible=t.btn2.visible=t.num1.visible=t.inputBg.visible=e},e.prototype.toNumList=function(){if(this.selectItemList)for(var t in this.selectItemList)this.selectList.push(this.selectItemList[t].data.data),this.numList.push(this.selectItemList[t].chooseNum)},e}(BaseWinSingle);__reflect(GuildWarSelectMemberPanelWin.prototype,"GuildWarSelectMemberPanelWin");var FbModelGuZhan=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.killCount=0,e.dropLogReward=[],e.rewardStatsu=!1,e.cdTick=0,e.isOpen=!1,e.guZhanRankDatas=[],e.myRank=0,e.firstCount=0,e.firstReward=0,e.gotoCount=0,e.gotoReward=0,e.showRewardRedPoint=!0,e.fbTick=0,e}return __extends(e,t),e.prototype.parser=function(t){this.isOpen=1==t.readByte(),this.cdTick=1e3*t.readInt()+Timer.ins().getTimer(),this.killCount=t.readInt(),this.rewardStatsu=t.readBoolean(),this.fbTick=1e3*t.readInt()+Timer.ins().getEgretTimer()},e.prototype.parserDropLogReward=function(t){this.dropLogReward.length=0;for(var e=t.readShort(),i=0;e>i;i++){var n=new ItemDataReward;n.parser(t),this.dropLogReward.push(n)}},e.prototype.parserRank=function(t){this.guZhanRankDatas.length=0;for(var e=t.readShort(),i=0;e>i;i++){var n=new GuZhanRankData;n.parser(t),n.rank=i+1,this.guZhanRankDatas.push(n)}this.myRank=t.readShort(),this.firstCount=t.readInt(),this.gotoCount=t.readInt(),this.firstReward=t.readByte(),this.gotoReward=t.readByte()},e.prototype.parserRankRewardUpdate=function(t){this.firstCount=t.readInt(),this.gotoCount=t.readInt(),this.firstReward=t.readByte(),this.gotoReward=t.readByte()},e.prototype.getConfig=function(){return this.config||(this.config=Cfg.getConfig(GuzhanchangConfig)),this.config},Object.defineProperty(e.prototype,"leftCdTime",{get:function(){return Math.max(0,this.cdTick-Timer.ins().getTimer())},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"fbTime",{get:function(){return Math.max(0,this.fbTick-Timer.ins().getTimer())},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"getMaxKillCount",{get:function(){return this.getConfig().maxKill},enumerable:!0,configurable:!0}),e.prototype.isIntoFuben=function(){return this.killCount<this.getMaxKillCount},e.prototype.rewardKeMai=function(){return this.killCount>=this.getMaxKillCount},e.prototype.rewardYiMai=function(){return this.rewardStatsu},e.prototype.getStarTimer=function(){var t=Cfg.getConfig(GuzhanchangConfig).starTime,e=new Date(Actor.ins().serverTime);return e.setHours(t[0][0],t[0][1]),e.getTime()},e.prototype.getEndTimer=function(){var t=Cfg.getConfig(GuzhanchangConfig).starTime,e=new Date(Actor.ins().serverTime);return e.setHours(t[1][0],t[1][1]),e.getTime()},e.prototype.canGetFirstReward=function(){var t=Cfg.getConfig(GuzhanchangConfig);return this.firstCount>=t.firsttimes&&0==this.firstReward},e.prototype.canGetgotoReward=function(){var t=Cfg.getConfig(GuzhanchangConfig);return this.gotoCount>=t.jointimes&&0==this.gotoReward},e}(FbModelBase);__reflect(FbModelGuZhan.prototype,"FbModelGuZhan");var GuZhanRankData=function(){function t(){this.rank=0,this.name="",this.guildName="",this.time=0}return t.prototype.parser=function(t){this.name=t.readString(),this.guildName=t.readString(),this.time=t.readInt()},t}();__reflect(GuZhanRankData.prototype,"GuZhanRankData");var GuZhanFbPanel=function(t){function e(){var e=t.call(this)||this;return e.isGuaji=!0,e.skinName="GuZhanFbPanelEUI",e.listMySelf.itemRenderer=RedFortFbFaceItem,e.listMySelf.dataProvider=e.arrCollectMyself=new eui.ArrayCollection,e.listTarget.itemRenderer=RedFortFbFaceItem,e.listTarget.dataProvider=e.arrCollectTarget=new eui.ArrayCollection,e.listEnemy.itemRenderer=BossHomeFbPanelFace,e.listEnemy.dataProvider=e.arrCollectEnemy=new eui.ArrayCollection,e.listAtk.itemRenderer=BossHomeFbPanelFace,e.listAtk.dataProvider=e.arrayCollectAtk=new eui.ArrayCollection,e}return __extends(e,t),e.prototype.open=function(){t.prototype.open.call(this),this.addClickE(this,this.onClick),this.addItemTapE(this.listEnemy,this.onEnemyListClick),this.addItemTapE(this.listAtk,this.onEnemyListClick),this.addLsn(LogicSys.ins().patchMainRoleTargetChange,this.onMainRoleTargetChange),this.addLsn(MapContainer.ins().patchGridClick,this.onMapGridClick),this.addLsn(LogicSys.ins().patchEntityClick,this.onEntityClick),this.addLsn(FbSys.ins().patchguZhanKillCount,this.updateKill),this.addLsn(LogicSys.ins().patchCreateCommEntity,this.updateGuaJi),Timer.ins()["do"](1500,1500,0,this.updateAll,this),this.updateAll(),this.updateKill(),this.onMainRoleTargetChange(),this.updateGuaJi()},e.prototype.updateTime=function(){var t=FbSys.ins().guZhanMode;this.labelFbTime.textFlow=addColorTF(getFormatTime(t.fbTime/1e3,"hh小时mm分ss秒"))},e.prototype.updateGuaJi=function(){this.setGuaJi(!0)},e.prototype.onMapGridClick=function(){this.setGuaJi(!1)},e.prototype.onEntityClick=function(){this.setGuaJi(!1)},e.prototype.onEnemyListClick=function(t){var e=t.currentTarget.selectedItem;e&&LogicSys.ins().atkTargetByMasterHandle(e)},e.prototype.updateGuaJiBtn=function(){this.btnGuaji.visible=!this.isGuaji,this.btnStopGuaji.visible=this.isGuaji},e.prototype.updateKill=function(){this.labelFbName.text=Lang.guzhan_str5,this.labelKillCount.text=""+Lang.guzhan_str6+FbSys.ins().guZhanMode.killCount+"/100"},e.prototype.onMainRoleTargetChange=function(t){void 0===t&&(t=-1);var e;e=-1==t?LogicSys.ins().centerEntity.AI.getNextTarget():LogicSys.ins().getEntityByHandle(t),e&&e instanceof EntityRole?(this.groupNoTarget.visible=!1,this.listTarget.visible=!0):(this.groupNoTarget.visible=!0,this.listTarget.visible=!1),this.updateTarget()},e.prototype.updateAll=function(){this.updateMyself(),this.updateTarget(),this.updateEnemys(),this.updateAtk()},e.prototype.updateMyself=function(){this.arrCollectMyself.source=[LogicSys.ins().centerEntity.handle],this.arrCollectMyself.refresh()},e.prototype.updateTarget=function(){var t=LogicSys.ins().centerEntity.AI.getNextTarget();t instanceof EntityRole?(this.arrCollectTarget.source=[t.handle],this.arrCollectTarget.refresh(),this.labelTargetName.textFlow=addColorTF(t.getName(),11508595),this.groupNoTarget.visible=!1,this.listTarget.visible=!0):(this.arrCollectTarget.source=[],this.arrCollectTarget.refresh(),this.groupNoTarget.visible=!0,this.listTarget.visible=!1,this.labelTargetName.text=Lang.fb_str193)},e.prototype.updateEnemys=function(){var t=LogicSys.ins().getEntityMasterHandleList();this.arrCollectEnemy.source=t,this.arrCollectEnemy.refresh(),this.scrollerEnemy.height=148*Math.min(3,t.length)},e.prototype.updateAtk=function(){for(var t=LogicSys.ins().centerEntity.AI.getChouhenList(),e=[],i=0,n=t;i<n.length;i++){var a=n[i];e.push(a.masterHandle)}this.arrayCollectAtk.source=e,this.arrayCollectAtk.refresh(),this.scrollerAtk.width=142*Math.min(3,t.length)},e.prototype.onClick=function(t){switch(t.target){case this.btnToggleEnemy:this.groupEnemy.visible=!this.groupEnemy.visible;break;case this.btnToggleAtk:this.groupAtk.visible=!this.groupAtk.visible;break;case this.btnGuaji:this.setGuaJi(!0);break;case this.btnStopGuaji:this.setGuaJi(!1);break;case this.btnClose:var e=new PopupNumData(Lang.guzhan_str5);e.curNum=5,openWin(EscFubenCountDownWin,e);break;case this.btDropLog:FbSys.ins().sentdguZhanDropRewrad()}},e.prototype.setGuaJi=function(t){this.isGuaji=t,LogicSys.ins().setCenterEntityGuaji(t),this.btnGuaji.visible=!t,this.btnStopGuaji.visible=t},e.prototype.formatCountDown=function(t){return addColor(""+Lang.common_str11+(t/1e3).toFixed(0)+Lang.common_miao,16115290)},e}(BasePanel);__reflect(GuZhanFbPanel.prototype,"GuZhanFbPanel"),window.GuZhanFbPanel=GuZhanFbPanel;var DespairBossConfig=function(){function t(){}return t.fbId="fbId",t}();__reflect(DespairBossConfig.prototype,"DespairBossConfig");var GuZhanPanelResultWin=function(t){function e(){var e=t.call(this)||this;return e.resultDatas=[],e}return __extends(e,t),e.prototype.initUI=function(){t.prototype.initUI.call(this),this.layer=LayerMgr.Popup,this.skinName="GuZhanResultWinEUI",this.addBg(),this.listData=new eui.ArrayCollection,this.list.itemRenderer=ItemBaseReward,this.list.dataProvider=this.listData},e.prototype.open=function(e){t.prototype.open.call(this),SortUtil.sortOn(e,["quality","id"],[SortType.down,SortType.down]),this.resultDatas=e,this.iniData()},e.prototype.iniData=function(){this.listData.source=this.resultDatas},e}(BaseWinSingle);__reflect(GuZhanPanelResultWin.prototype,"GuZhanPanelResultWin"),window.GuZhanPanelResultWin=GuZhanPanelResultWin;var GuZhanRankItem=function(t){function e(){var e=t.call(this)||this;return e.skinName="GuZhanRankPanelItemEUI",e}return __extends(e,t),e.prototype.dataChanged=function(){this.data instanceof GuZhanRankData&&(this.data.rank<=3?(this.imgRank.source="ldsz_zycs_ph"+this.data.rank,this.lbRank.text=""):(this.imgRank.source="",this.lbRank.text=""+Lang.common_di+this.data.rank+Lang.common_str5),this.lbGuildName.text=""==this.data.guildName?Lang.common_wu:Lang.chat_str18+" ："+this.data.guildName+" ",this.lbRoleName.text=this.data.name+" ",this.lbTime.text=DateUtil.formatTime(this.data.time,"hh小时mm分ss秒"))},e}(BaseItemRender);__reflect(GuZhanRankItem.prototype,"GuZhanRankItem"),window.GuZhanRankItem=GuZhanRankItem;var KeyboardUtil=function(t){function e(){var e=t.call(this)||this;if(e.key_ups=new Array,e.key_downs=new Array,ComUtil.IsHtml5){var i=e;document.addEventListener("keyup",function(t){for(var e=0,n=i.key_ups.length;n>e;e++){var a=i.key_ups[e][0],o=i.key_ups[e][1];o?a.call(o,t.keyCode):a(t.keyCode)}}),document.addEventListener("keydown",function(t){for(var e=0,n=i.key_downs.length;n>e;e++){var a=i.key_downs[e][0],o=i.key_downs[e][1];o?a.call(o,t.keyCode):a(t.keyCode)}})}return e}return __extends(e,t),e.ins=function(){return t.getIns.call(this,e)},e.prototype.addKeyUp=function(t,e){this.key_ups.push([t,e])},e.prototype.addKeyDown=function(t,e){this.key_downs.push([t,e])},e.prototype.removeKeyUp=function(t,e){for(var i=0;i<this.key_ups.length;i++)this.key_ups[i][0]==t&&this.key_ups[i][1]==e&&(this.key_ups.splice(i,1),i--)},e.prototype.removeKeyDown=function(t,e){for(var i=0;i<this.key_downs.length;i++)this.key_downs[i][0]==t&&this.key_downs[i][1]==e&&(this.key_downs.splice(i,1),i--)},e.LEFT=37,e.UP=38,e.RIGHT=39,e.DOWN=40,e.KC_1=49,e.KC_2=50,e.KC_3=51,e.KC_4=52,e.KC_5=53,e.KC_6=54,e.KC_7=55,e.KC_8=56,e.KC_9=57,e.KC_0=48,e.A=65,e.B=66,e.C=67,e.D=68,e.E=69,e.F=70,e.G=71,e.H=72,e.I=73,e.J=74,e.K=75,e.L=76,e.M=77,e.N=78,e.O=79,e.P=80,e.Q=81,e.R=82,e.S=83,e.T=84,e.U=85,e.V=86,e.W=87,e.X=88,e.Y=89,e.Z=90,e.SPACE=32,e.SMALL_K_ADD=107,e.SMALL_K_MIN=109,e.BRACE_L=219,e.BACKSLASH=220,e.BRACE_R=221,e.BACK_QUOTE=192,e.ENTER=13,e.KC_BACKSPACE=8,e.KC_TAB=9,e.KC_ENTER=13,e.KC_SHIFT=16,e.KC_CONTROL=17,e.KC_ESCAPE=27,e.KC_SPACE=32,e.KC_WINDOWS=91,e.KC_MENU=93,e}(BaseIns);__reflect(KeyboardUtil.prototype,"KeyboardUtil");var GuZhanRankWin=function(t){function e(){var e=t.call(this)||this;return e.winType=WinType.OverlayWin,e}return __extends(e,t),e.panelNames=[GuZhanRankPanel],e}(BaseDuoPanelWin);__reflect(GuZhanRankWin.prototype,"GuZhanRankWin"),window.GuZhanRankWin=GuZhanRankWin;var HeCHengItem=function(t){function e(){var e=t.call(this)||this;return e.skinName="BtnTab5ZYCSSkin",e}return __extends(e,t),e.prototype.dataChanged=function(){var t=this.data,e=Cfg.getItemCfg(t.id);this.labelDisplay.text=""+e.getName(),this.updateRedPoint()},e.prototype.updateRedPoint=function(){var t=this.data;this.redPoint.visible=RpSys.ins().getData(BagWin,HeChengMainPanel,HeChengPanel,HeChengListWin,t.viewType2,t.id)},e}(BaseItemRender);__reflect(HeCHengItem.prototype,"HeCHengItem"),window.HeCHengItem=HeCHengItem;var HeChengListWin=function(t){function e(){var e=t.call(this)||this;return e.composeConfig=[],e.lastSelect=new HeCHengItem,e.isScrol=!1,e.fitArray=new eui.ArrayCollection,e.composeArray=new eui.ArrayCollection,e.viewType2=0,e.isAutoAdd=!1,e.initUI(),e.addBg(),e}return __extends(e,t),e.prototype.initUI=function(){this.skinName="HeChengListWinEUI",this.listFitItem.useVirtualLayout=!1,this.setSkinPart("fitItem",new ItemBaseReward),this.fitArray=new eui.ArrayCollection,this.composeArray=new eui.ArrayCollection,this.listFitItem.dataProvider=this.fitArray,this.listConsume.dataProvider=this.composeArray,this.listFitItem.itemRenderer=HeCHengItem,this.listConsume.itemRenderer=ItemBaseConsume},e.prototype.open=function(e,i){this.viewType2=e,t.prototype.open.call(this),i>0?Cfg.getItemCfg(i).type==ItemType.guoshi?this.curCompose=Cfg.getConfig(HeChengConfig,Cfg.getConfig(EnumConfig).GUOSHI):this.curCompose=Cfg.getConfig(HeChengConfig,i):this.setCanHeChengItem();var n=Cfg.getConfigs(HeChengConfig,CondType.Equal,HeChengConfig.viewType2,this.viewType2).concat();SortUtil.sortOn(n,["sort"],[SortType.up]),this.composeConfig=n,this.addItemTapE(this.listFitItem,this.onListItemTap),this.addClickE(this.btnFit,this.onclick),this.addClickE(this.btnMin,this.onclick),this.addClickE(this.btnSub,this.onclick),this.addClickE(this.btnAdd,this.onclick),this.addClickE(this.btnMax,this.onclick),this.addEvent(egret.TouchEvent.TOUCH_BEGIN,this.btnAdd,this.onAddBegin),this.addEvent(egret.TouchEvent.TOUCH_END,this,this.onAddend),this.addLsn(BagSys.ins().patchItemChange,this.updateData),this.addLsn(BagSys.ins().patchPropFit,this.updateHecheng),this.addLsn(BagSys.ins().patchItemChange,this.consume),this.addLsn(RpSys.ins().patchRp,this.updateRp),this.updatePanel()},e.prototype.updateHecheng=function(){this.setCanHeChengItem(),this.updatePanel()},e.prototype.setCanHeChengItem=function(){var t=Cfg.getConfigs(HeChengConfig,CondType.Equal,HeChengConfig.viewType2,this.viewType2).concat();this.curCompose=t[0],SortUtil.sortOn(t,["sort"],[SortType.up]);for(var i=0;i<t.length;i++){var n=t[i],a=RpSys.ins().getData(BagWin,HeChengMainPanel,HeChengPanel,e,n.viewType2,n.id);if(a){this.curCompose=n;break}}this.listFitItem.selectedIndex=this.curCompose.sort-1},e.prototype.updatePanel=function(){this.updateData(),this.AotuSelect(),this.consume(),this.setNum(1),this.updateRp()},e.prototype.updateRp=function(t){if(void 0===t&&(t=null),!t||t.check(e)){for(var i=this.listFitItem.numElements,n=0;i>n;n++){var a=this.listFitItem.getElementAt(n);a&&a.updateRedPoint()}this.btnFit.redPoint.visible=RpSys.ins().getData(BagWin,HeChengMainPanel,HeChengPanel,e,this.curCompose.viewType2,this.curCompose.id)}},e.prototype.onAddBegin=function(t){this.clickTarget=t.currentTarget,this.isAutoAdd=!0,Timer.ins()["do"](500,200,0,this.AutoAdd,this)},e.prototype.onAddend=function(){this.isAutoAdd=!1,Timer.ins().remove(this.AutoAdd,this)},e.prototype.AutoAdd=function(){var t=this.num;switch(this.clickTarget){case this.btnSub:t-=1;break;case this.btnAdd:t+=1}if(1>t)t=1,showTipsWarn(Lang.common_str93),this.onAddend();else{var e=this.getMaxNum();t>=e&&(t=e,this.onAddend(),showTipsWarn(Lang.common_str94))}this.setNum(t)},e.prototype.getMaxNum=function(){for(var t=99,e=this.curCompose.item,i=0;i<e.length;i++){var n=e[i],a=BagSys.ins().getItemCount(n.id)||1;a=Math.floor(a/n.count),t=Math.min(t,a)}return t},e.prototype.AotuSelect=function(){for(var t=0;t<this.listFitItem.numElements;t++){var e=this.listFitItem.getElementAt(t),i=e.data;if(i.id==this.curCompose.id){this.lastSelect=e,e.y>this.ScrollerlistFit.viewport.height&&(e.y>this.ScrollerlistFit.viewport.contentHeight-594?this.ScrollerlistFit.viewport.scrollV=this.ScrollerlistFit.viewport.contentHeight-594:this.ScrollerlistFit.viewport.scrollV=e.y);break}}},e.prototype.sort=function(t,e){var i=t.sort,n=e.sort;return n>i?-1:i>n?1:0},e.prototype.updateData=function(){var t=Cfg.getItemCfg(this.curCompose.id);this.fitItem.data=GFunc.creatRewardDataById(this.curCompose.id),this.lbName.text=t.getName(),this.fitArray.replaceAll(this.composeConfig),this.listFitItem.validateNow(),this.setNum(1)},e.prototype.consume=function(){this.composeArray.source=this.curCompose.item,this.btnFit.redPoint.visible=RpSys.ins().getData(BagWin,HeChengMainPanel,HeChengPanel,e,this.curCompose.viewType2,this.curCompose.id)},e.prototype.onclick=function(t){switch(t.currentTarget){case this.btnFit:if(!GFunc.checkConsumeEnough(this.curCompose.item))return;BagSys.ins().sendPropFit(this.curCompose.id,this.num);break;case this.btnMax:var e=this.getMaxNum();this.num==e?showTipsWarn(Lang.common_str94):this.num=e,this.setNum(this.num);break;case this.btnMin:1==this.num?showTipsWarn(Lang.common_str93):this.num=1,this.setNum(1);break;case this.btnSub:this.num<=1?showTipsWarn(Lang.common_str93):this.num--,this.setNum(this.num);break;case this.btnAdd:e=this.getMaxNum(),this.num>=e?showTipsWarn(Lang.common_str94):this.num++,this.setNum(this.num)}},e.prototype.setNum=function(t){this.num=t,this.lbNum.text=t.toString()},e.prototype.listFitScroll=function(t){var e=this.ScrollerlistFit.viewport.scrollH+t,i=this.ScrollerlistFit.viewport.contentWidth-this.ScrollerlistFit.width;e>i&&(e=i),0>e&&(e=0),this.ScrollerlistFit.viewport.scrollH=e;this.ScrollerlistFit.viewport.contentWidth-this.ScrollerlistFit.width},e.prototype.onListItemTap=function(t){var e=t.item;if(void 0!=e){if(e.id==this.curCompose.id)return;var i=Cfg.getItemCfg(e.id);this.fitItem.data=GFunc.creatRewardDataById(e.id),this.lbName.text=i.getName();var n=Cfg.getConfig(HeChengConfig,e.id);this.curCompose=n,this.consume(),this.lastSelect=t.itemRenderer,this.setNum(1)}},e.prototype.getFitBtn=function(){return this.btnFit},e.getTitle=function(){return"btz_zycs_hc"},e.getSysId=function(){return 0},e}(BaseWinSingle);__reflect(HeChengListWin.prototype,"HeChengListWin"),window.HeChengListWin=HeChengListWin;var MathUtil=function(){function t(){}return t.getAngle=function(t){return 180*t/Math.PI},t.getRadian=function(t){return t/180*Math.PI},t.getRadianByP=function(t,e){return Math.atan2(e.y-t.y,e.x-t.x)},t.getDistance=function(t,e){return Math.sqrt(this.getDistanceX2ByObject(t,e))},t.getDistanceX2ByObject=function(t,e){var i=t.x-e.x,n=t.y-e.y;return i*i+n*n},t.getDirMove=function(t,e,i,n){void 0===i&&(i=0),void 0===n&&(n=0);var a=this.getRadian(t),o=new XY;return o.x=Math.cos(a)*e+i,o.y=Math.sin(a)*e+n,o},t.getPByDistance=function(t,e,i){var n=Math.atan2(e.y-t.y,e.x-t.x),a=new XY;return a.x=e.x+i*Math.cos(n),a.y=e.y+i*Math.sin(n),a},t.getTimeFromSpeed=function(t,e,i){var n=e.x-t.x,a=e.y-t.y,o=Math.sqrt(n*n+a*a);return o/i*1e3},t.radom=function(t,e){t=Math.min(t,e),e=Math.max(t,e);var i=e-t;return t+Math.random()*i},t.randomInteger=function(t,e){return Math.round(this.radom(t,e))},t.randomArray=function(t){var e=Math.floor(Math.random()*t.length);return t[e]},t.toInteger=function(t,e){void 0===e&&(e=0);var i=0;if(0!=t){var n=t/Math.abs(t),a=0;0==e?a=Math.abs(t)>>0:1==e?a=Math.abs(Math.ceil(t))>>0:2==e&&(a=Math.abs(Math.round(t))>>0),i=n*a}return i},t.toFixed=function(t,e,i){void 0===i&&(i=0);var n=t*Math.pow(10,e);return n=this.toInteger(n,i)/Math.pow(10,e)},t.getNumber=function(t,e,i){return void 0===e&&(e=1),void 0===i&&(i=0),this.toInteger(t)==t?this.toFixed(t,0,i):this.toFixed(t,e,i)},t.isSamePoint=function(t,e){return this.toInteger(t.x)==Math.floor(e.x)&&Math.floor(t.y)==Math.floor(e.y)},t.getRectangle=function(t,e,i,n,a,o){void 0===o&&(o=Number.MAX_VALUE);var s=[];s.push(e);for(var r=i*MapBase.CELL_SIZE,u=e.x-t.x,h=e.y-t.y,l=Math.atan2(h,u),p=n*MapBase.CELL_SIZE/2,c=0,d=a;c<d.length;c++){var g=d[c];if(s.length>=o)break;var f=g.x-t.x,y=g.y-t.y,m=Math.abs(Math.atan2(y,f)-l),C=f*f+y*y,v=Math.cos(m),S=Math.sin(m);(m<=Math.PI/2||m>=3*Math.PI/2)&&r*r>=v*v*C&&p*p>=S*S*C&&e!=g&&s.push(g)}return s},t.getFanshaped=function(t,e,i,n,a,o){void 0===o&&(o=Number.MAX_VALUE);var s=[];s.push(e);var r,u,h,l,p=MapBase.CELL_SIZE,c=Math.pow(i*p,2),d=this.getRadian(n)/2;r=e.x-t.x,h=e.y-t.y;for(var g=0,f=a;g<f.length;g++){var y=f[g];if(s.length>=o)break;u=y.x-t.x,l=y.y-t.y;var m=u*u+l*l,C=Math.abs(Math.atan2(h,r)-Math.atan2(l,u));c>m&&d>C&&e!=y&&s.push(y)}return s},t.getAngle360byRotation=function(t){var e=0;return t%=180,t>=0?e=t:0>t&&(e=180+-t),e},t.changeIntToArray=function(t,e){var i=[];return i.length=e,this.writeIntToArray(t,[])},t.writeIntToArray=function(t,e,i){void 0===i&&(i=0);for(var n=t.toString(2),a=n.split("").reverse(),o=0;o<e.length;o++)e[o]=a[i]?+a[i]:0,i++;return e},t.compareToArray=function(t,e,i){void 0===i&&(i=0);var n=[],a=[],o=[];t.length>=e.length?(a=t,o=e):(a=e,o=t);for(var s=0;s<a.length&&(void 0!=o[s]&&a[s]==o[s]||(n.push(s),0!=i));s++);return n},t}();__reflect(MathUtil.prototype,"MathUtil");var RegUtil=function(){function t(){}return t.LINE_BREAK=/\r+/g,t.BLANK_REG=/[\s\\]/g,t.ARGB_COLOR=/[a-fA-F0-9]{8}/,t.HTML=/<[^>]+>/g,t.DELETE_SPACE=/\s/g,t.DOT_NUMBER=/\.\d+/,t.NumericExp=/^\d+$/,t.NonNumericExp=/\D/,t.ActorNameExp=/^([\u4e00-\u9fa5]?\w?[^>|!@#$%&*\^\?]){1,48}$/,t.IP=/((2(5[0-5]|[0-4]\d))|[0-1]?\d{1,2})(\.((2(5[0-5]|[0-4]\d))|[0-1]?\d{1,2})){3}/g,t.ServerName=/S[0-9]+\./,t.CHAT_EMOJI=/#emoji\d+#/g,t.CHAT_EMOJI_ID=/#|emoji/gi,t}();__reflect(RegUtil.prototype,"RegUtil");var HeChengTabItem=function(t){function e(){var e=t.call(this)||this;return e.itemListArray=new eui.ArrayCollection,e.skinName="HeChengTabItemEUI",e.name="HeChengTabItem",e.itemList.itemRenderer=HeChengTabItemSub,e.itemList.dataProvider=e.itemListArray,e}return __extends(e,t),e.prototype.dataChanged=function(){var t=this.data;this.lbName.text=t.tabName,this.itemListArray.source=t.heChengSubDatas,this.itemList.validateNow(),this.updateRedPoint()},e.prototype.updateItem=function(){for(var t=this.itemList.numElements,e=0;t>e;e++){var i=this.itemList.getElementAt(e);i&&i.updateItem()}this.updateRedPoint()},e.prototype.updateRedPoint=function(){var t=this.data;if(t){this.redPoint.visible=RpSys.ins().getData(BagWin,HeChengMainPanel,HeChengPanel,HeChengListWin);for(var e=this.itemList.numElements,i=0;e>i;i++){var n=this.itemList.getElementAt(i);n&&n.updateRedPoint()}}},e.prototype.select=function(t){this.currentState=t?"select":"none"},e.prototype.selectSubTabIndex=function(t,e){var i=this.getItemIndex(t);i.select(e)},e.prototype.getItemIndex=function(t){return this.itemList.getChildAt(t)},e}(BaseItemRender);__reflect(HeChengTabItem.prototype,"HeChengTabItem"),window.HeChengTabItem=HeChengTabItem;var HeChengTabItemSub=function(t){function e(){var e=t.call(this)||this;return e.skinName="HeChengTabItemSubEUI",e.name="HeChengTabItemSub",e}return __extends(e,t),e.prototype.dataChanged=function(){this.data;this.updateItem()},e.prototype.updateItem=function(){var t=this.data;this.lbName.textFlow=addColorTF(t.heChengViewConfig.typeName2),this.updateRedPoint()},e.prototype.updateRedPoint=function(){var t=this.data;if(t){var e=t.heChengViewConfig;this.redPoint.visible=RpSys.ins().getData(BagWin,HeChengMainPanel,HeChengPanel,HeChengListWin,e.type2)}},e}(BaseItemRender);__reflect(HeChengTabItemSub.prototype,"HeChengTabItemSub"),window.HeChengTabItemSub=HeChengTabItemSub;var HeChengWin=function(t){function e(){var e=t.call(this)||this;return e.redPointHead=[BagWin],e.winType=WinType.OverlayWin,e}return __extends(e,t),e.prototype.open=function(e){void 0===e&&(e=0),this.curPropItemid=e,t.prototype.open.call(this)},e.prototype.getParam=function(){return this.curPropItemid},e.prototype.getFitBtn=function(t){return this.curPropItemid=t,this.reOpen(),null},e.openCheck=function(e){return void 0===e&&(e=0),t.canOpen.call(this,0)},e.panelNames=[HeChengPanel],e}(BaseWinAutoTab);__reflect(HeChengWin.prototype,"HeChengWin"),window.HeChengWin=HeChengWin;var HeChengData=function(){function t(){this.heChengSubDatas=[]}return t}();__reflect(HeChengData.prototype,"HeChengData");var HeChengSubData=function(){function t(){}return t}();__reflect(HeChengSubData.prototype,"HeChengSubData");var BoxSelelctTipsWin=function(t){function e(){var e=t.call(this)||this;return e.winType=WinType.NormalWin,e.curIndex=0,e}return __extends(e,t),e.prototype.initUI=function(){t.prototype.initUI.call(this),this.skinName="BoxSelectTipsWinEUI",this.addBg(),this.menuListArray=new eui.ArrayCollection,this.list.dataProvider=this.menuListArray,this.list.itemRenderer=ItemBaseName},e.prototype.open=function(e){t.prototype.open.call(this),this.itemData=e,this.setSkinPart("itemBox",new ItemBase),this.addClickE(this.btnOk,this.onClick),this.addItemTapE(this.list,this.onMenuClick),this.itemBox.data=e,this.lbName.text=e.cfg.getName(),this.lbName.textColor=GConst.PZColor[e.cfg.quality];for(var i=[],n=e.cfg.useArg,a=0;a<n.chooseitem.length;a++)i.push(GFunc.creatItemDataByReward(n.chooseitem[a]));this.menuListArray.source=i,this.list.validateNow(),this.list.selectedIndex=0,this.curItemBase=this.list.getElementAt(0),this.curItemBase.bgSelect(!0)},e.prototype.onMenuClick=function(t){this.curIndex=t.itemIndex,this.curItemBase.bgSelect(!1);var e=t.itemRenderer;e.bgSelect(!0),this.curItemBase=e},e.prototype.onClick=function(t){switch(t.currentTarget){case this.btnOk:var e=this.curItemBase.data;if(0==e.cfg.type&&0==BagSys.ins().getSurplusCount())return void showtipsFail(Lang.common_str9);BagSys.ins().sendUseItem(this.itemData.id,1,this.curIndex),closeWin(this)}},e}(BaseWinSingle);__reflect(BoxSelelctTipsWin.prototype,"BoxSelelctTipsWin"),window.BoxSelelctTipsWin=BoxSelelctTipsWin;var GoldBoxTipsWin=function(t){function e(){var e=t.call(this)||this;return e.mc=new MC,e.mc1=new MC,e.layout=new eui.TileLayout,e.useType=0,e.viewShowCount=5,e.itemReward=[],e.boxType=0,e.price=0,e.layer=LayerMgr.Popup,e.skinName="GoldBoxTipsSkin1",e.setSkinPart("priceIcon",new PriceIcon),e.list.itemRenderer=ItemBaseRewardName,e.mc1.x=95,e.mc1.y=90,e.group1.addChild(e.mc1),e.mc.x=95,e.mc.y=90,e.group1.addChild(e.mc),e.group2.alpha=0,e.layout=e.list.layout,e.list.layout=e.layout,e.addBg(),e}return __extends(e,t),e.prototype.open=function(t){var e=this;this.priceIcon.setType(CurType.yb),this.itemReward=t,this.boxType=0,this.price=0,this.currentState=0==this.boxType?"h1":"h2",this.priceIcon.setPrice(this.price),this.list.dataProvider=new eui.ArrayCollection(this.itemReward),this.itemReward.length<=this.viewShowCount?this.layout.requestedColumnCount=this.itemReward.length:this.layout.requestedColumnCount=this.viewShowCount,this.validateNow();for(var i=this.list.numElements,n=0;i>n;n++){var a=this.list.getElementAt(n);a&&(a.visible=!1)}this.mc.playFile(getEffName("hjbxhs"),1,function(){e.mc.playFile(getEffName("hjbxbk"),1)},!1),Timer.ins()["do"](600,1e3,1,function(){e.mc.playFile(getEffName("hjbxdk"),-1),e.mc1.playFile(getEffName("hjbxgc"),-1)},this);var o=egret.Tween.get(this.group2);o.to({alpha:1},200).wait(1e3).call(this.countDown,this),Timer.ins()["do"](700,1e3,1,function(){e.createItem()},this)},e.prototype.close=function(){t.prototype.close.call(this),this.group2.x=-11,this.group2.alpha=0},e.prototype.createItem=function(){for(var t=this.list.numElements,e=function(t){var e=i.list.getElementAt(t);if(e){var n=new ItemBaseReward;n.data=e.data,n.x=100,n.y=50,n.scaleX=n.scaleY=0,n.visible=!1,i.group2.addChild(n);var a=e.localToGlobal(),o=i.group2.globalToLocal(a.x,a.y),s=egret.Tween.get(n);s.wait(50+50*t).call(function(){n.visible=!0}).to({x:o.x,y:o.y,scaleX:1,scaleY:1},200,egret.Ease.circOut).call(function(){e.visible=!0,n.visible=!1})}},i=this,n=0;t>n;n++)e(n)},e.prototype.countDown=function(){this.addClickE(this.colorCanvas,this.onClick)},e.prototype.countDown1=function(){closeWin(this)},e.prototype.onClick=function(t){0==this.boxType&&closeWin(this)},e}(BaseWinSingle);__reflect(GoldBoxTipsWin.prototype,"GoldBoxTipsWin"),window.GoldBoxTipsWin=GoldBoxTipsWin;var ItemFuWenTipsWin=function(t){function e(){var e=t.call(this)||this;return e.datas=[],e.layer=LayerMgr.Top,e.skinName="ItemFuWenTipsEUI",e.list.itemRenderer=FuwenItem3,e.list.dataProvider=e.listData=new eui.ArrayCollection,e.addBg(),e.group.touchEnabled=!1,e.group1.touchEnabled=!1,e}return __extends(e,t),e.prototype.open=function(e){t.prototype.open.call(this),this.datas=e,this.setData();var i=egret.Tween.get(this.group1);i.to({x:0,alpha:1},200),Timer.ins()["do"](1e3,1500,1,this.countDown1,this),Timer.ins()["do"](4e3,0,1,this.countDown2,this)},e.prototype.countDown1=function(){this.addClickE(this.backGround,this.onclick)},e.prototype.countDown2=function(){closeWin(this)},e.prototype.onclick=function(t){switch(t.currentTarget){case this.backGround:closeWin(this)}},e.prototype.setData=function(){this.group1.x=-79,this.group1.alpha=0,this.mcGroup.width=138*(this.datas.length-1);for(var t=this.datas.length-1;t>=0;t--){var e=new MC;e.playFile(getEffName("jlcq"),-1),this.mcGroup.addChild(e),e.touchEnabled=!1,e.x=138*t}this.listData.source=this.datas},e}(BaseWinSingle);__reflect(ItemFuWenTipsWin.prototype,"ItemFuWenTipsWin"),window.ItemFuWenTipsWin=ItemFuWenTipsWin;var ItemTipsMCWin=function(t){function e(){return t.call(this)||this}return __extends(e,t),e.prototype.setSkinName=function(){this.skinName="ItemTipsMCEUI"},e.prototype.initUI=function(){t.prototype.initUI.call(this),this.layer=LayerMgr.Popup,this.addBg(),this.setSkinPart("itemIcon",new ItemIcon),this.gainList.itemRenderer=GainGoodsItem,this.gainList.dataProvider=this.gainListData=new eui.ArrayCollection,this.mcIcon=new McIcon,this.groupMc.addChild(this.mcIcon)},e.prototype.open=function(e){t.prototype.open.call(this),this.addItemTapE(this.gainList,this.onTouchList),this.updatePanel(e)},e.prototype.close=function(){t.prototype.close.call(this),this.mcIcon.close()},e.prototype.updatePanel=function(t){var e=t.itemData.cfg;this.itemIcon.setDataByItemConfig(e),this.imgQuality.source="tips_zycs_"+e.quality,Actor.ins().isLocation?this.lbName.text=e.getName()+("("+e.id+")"):this.lbName.text=e.getName(),this.lbName.textColor=GConst.PZColor[e.quality];var i=Lang.itemtips_str12+StrUtil.addColor(e.level+Lang.common_ji,16777215);this.lbLv.textFlow=addColorTF(i);var n=Lang.itemtips_str26,a=t.itemData.count;if(void 0==a){var o=BagSys.ins().getItemByTypeAndId(0,e.id);n+=o?o.count+"":"0"}else n+=a;this.lbCount.text=n,this.imgAttr.source=t.getAttrNameRes(),this.lbDesc.text=Lang.itemtips_str27.replace("$type$",t.getName()).replace("$name$",e.getName()),this.lbattr.textFlow=addColorTF(this.getAttrAndPower(t));
var s=GFunc.getGainItemWayConfig(e.id);if(s.length>0){this.groupGain.scaleY=this.gainList.scaleY=1,this.gainListData.source=s;var r=s.length>4?4:s.length;this.gainList.width=94*r+35*(r-1)}else this.groupGain.scaleY=this.gainList.scaleY=0;this.updateMC(t)},e.prototype.updateMC=function(t){this.mcIcon.open(t.config),this.mcIcon.scaleX=this.mcIcon.scaleY=t.scale},e.prototype.onTouchList=function(t){var i=t.item;if(null!=t.item){var n=GFunc.createTaskNavData(i.controlTarget);n.setsucceedFrontFun(function(){WinMgr.ins().closeAllWin(),closeWin(e)}),n["goto"](i.sysid)}},e.prototype.getAttrAndPower=function(t){var e=AttrData.getFm(16777215,1176860,"","+"),i=AttrData.parse(t.getAtts(),{fm:e}).join("\n");return i+=addColor("\n"+Lang.common_str113+"+"+t.getPower(),16751375)},e}(BaseWinSingle);__reflect(ItemTipsMCWin.prototype,"ItemTipsMCWin"),window.ItemTipsMCWin=ItemTipsMCWin;var ItemTipsWin=function(t){function e(){var e=t.call(this)||this;return e.layer=LayerMgr.Popup,e.skinName="ItemTipsSkin",e.addBg(),e.lbTimer.text="",e.gainList.itemRenderer=GainGoodsItem,e.gainList.dataProvider=e.gainListData=new eui.ArrayCollection,e}return __extends(e,t),e.prototype.childrenCreated=function(){this.setSkinPart("itemIcon",new ItemIcon),this.setSkinPart("roleSelect",new RoleUseSelect),this.list.itemRenderer=ItemBaseRewardName,this.roleSelect.visible=!1,this.roleSelect.scaleY=0},e.prototype.initUI=function(){t.prototype.initUI.call(this)},e.prototype.open=function(e){t.prototype.open.call(this),this.itemData=e,this.addClickE(this.btnshiyong,this.onclick),this.addItemTapE(this.gainList,this.onTouchList),this.setData(e),this.roleSelect.open(),this.setRoleSelect(e.id),this.showTimer()},e.prototype.showTimer=function(){if(this.itemData){var t=this.itemData.keepTime-Actor.ins().serverTime;t>0&&Timer.ins()["do"](0,1e3,Math.ceil(t/1e3),this.updateTimer,this,TimerType.LAST)}},e.prototype.updateTimer=function(t){this.lbTimer.textFlow=addColorTF(""+Lang.common_str101+StrUtil.addColor(getFormatTime(t,"dd天hh小时mm分钟ss秒"),15733780))},e.prototype.close=function(){t.prototype.close.call(this),Timer.ins().remove(this.updateTimer,this)},e.prototype.setRoleSelect=function(t){},e.prototype.onclick=function(t){switch(t.target){case this.btnshiyong:var e=Cfg.getItemCfg(this.itemId);if(e.level>Actor.ins().level)return void showtipsFail(Lang.common_str57);this.useItemHandler()}},e.prototype.useItemHandler=function(){switch(this.itemData.cfg.useType){case ItemUseType.fruit:openWin(MoJieWin,1),closeWin(this);break;case ItemUseType.SelectBox:openWin(BoxSelelctTipsWin,this.itemData),closeWin(this);break;case ItemUseType.EditorName:openWin(RoleEditorNameWin),closeWin(this);break;case ItemUseType.yellowBox:case ItemUseType.title:default:BagSys.ins().sendUseItem(this.itemId,1),closeWin(this)}},e.prototype.setData=function(t){this.itemId=t.id;var e="",i=t.count,n=t.cfg.type;if(void 0==i){var a=BagSys.ins().getItemByTypeAndId(0,this.itemId);e=a?a.count+"":"0"}else e=i>=1?i+"":"0";this.num.text=e;var o;o=Cfg.getItemCfg(this.itemId),0!=n&&0!=t.handle?(this.btnshiyong.visible=this.itemData.cfg.useType>0,this.btnshiyong.scaleY=this.itemData.cfg.useType>0?1:0):(this.btnshiyong.visible=!1,this.btnshiyong.scaleY=0),Actor.ins().isLocation?this.nameLabel.text=o.getName()+("("+o.id+")"):this.nameLabel.text=o.getName(),this.nameLabel.textColor=GConst.PZColor[o.quality],this.description.textFlow=StrUtil.toTF(o.getDesc()),this.itemIcon.setDataByItemConfig(o);var s="";s=this.itemData.cfg.useType>0?Lang.itemtips_str12+StrUtil.addColor(o.level+Lang.common_ji,11508595):o.type==ItemType.gem?Lang.itemtips_str13+StrUtil.addColor(o.rank+Lang.common_ji,11508595):Lang.itemtips_str13+StrUtil.addColor(o.level+Lang.common_ji,11508595),this.lblvDesc.textFlow=addColorTF(s),o.type==ItemType.skillStone?this.lbJob.textFlow=addColorTF(Lang.itemtips_str14+StrUtil.addColor(GFunc.getJobNameByJob(Actor.ins().job),11508595)):this.lbJob.textFlow=addColorTF(""),this.list.dataProvider=new eui.ArrayCollection(o.viewArg),this.groupItem.scaleY=o.viewArg.length>0?1:0,this.groupItem.visible=o.viewArg.length>0?!0:!1;var r=GFunc.getGainItemWayConfig(o.id);if(r.length>0){this.groupGain.scaleY=this.gainList.scaleY=1,this.gainListData.source=r;var u=r.length>4?4:r.length;this.gainList.width=94*u+35*(u-1),this.groupTUjing.scaleY=0}else this.groupGain.scaleY=this.gainList.scaleY=0,this.lbtujin.text=o.output},e.prototype.onTouchList=function(t){var i=t.item;if(null!=t.item){var n=GFunc.createTaskNavData(i.controlTarget);n.setsucceedFrontFun(function(){WinMgr.ins().closeAllWin(),closeWin(e)}),n.setLoserFun(function(){closeWin(e)}),n["goto"](i.sysid)}},e.prototype.getUseBtn=function(){return this.btnshiyong},e}(BaseWinSingle);__reflect(ItemTipsWin.prototype,"ItemTipsWin"),window.ItemTipsWin=ItemTipsWin;var ItemUseBoxWin=function(t){function e(){var e=t.call(this)||this;return e.maxNum=0,e}return __extends(e,t),e.prototype.initUI=function(){t.prototype.initUI.call(this),this.layer=LayerMgr.Popup,this.skinName="ItemUseBoxWinEUI",this.addBg(),this.setSkinPart("itemIcon",new ItemIcon),this.list.itemRenderer=ItemBaseRewardName,this.list.dataProvider=this.listData=new eui.ArrayCollection},e.prototype.open=function(e){t.prototype.open.call(this),this.useNum=e.getMaxUseCount(),this.itemId=e.id,this.addClickEndE(this.BG,this.otherClose),this.addClickEndE(this.minBtn,this.onTap),this.addClickEndE(this.maxBtn,this.onTap),this.addClickEndE(this.sub1Btn,this.onTap),this.addClickEndE(this.add1Btn,this.onTap),this.addClickEndE(this.useBtn,this.onTap),this.addChangeE(this.numLabel,this.onTxtChange),this.addLsn(BagSys.ins().patchUseItemSuccess,this.useSuccess),this.numLabel.text=this.useNum+"",this.setData(this.itemId)},e.prototype.otherClose=function(t){closeWin(e)},e.prototype.onTxtChange=function(t){var e=Number(this.numLabel.text);e>this.maxNum&&(e=this.maxNum),this.useNum=e,this.numLabel.text=this.useNum+""},e.prototype.onTap=function(t){switch(t.target){case this.minBtn:this.useNum=1;break;case this.maxBtn:this.useNum=this.maxNum;break;case this.sub1Btn:this.useNum--,this.useNum<=0&&(this.useNum=1);break;case this.add1Btn:this.useNum++,this.useNum>this.maxNum&&(this.useNum=this.maxNum);break;case this.useBtn:var i=Cfg.getItemCfg(this.itemId);i.useType==ItemUseType.yellowBox&&BagSys.ins().sendUseItem(this.itemId,this.useNum),closeWin(e)}this.numLabel.text=this.useNum+""},e.prototype.useSuccess=function(){var t=BagSys.ins().getItemById(this.itemId);t?(this.setData(this.itemId),this.onTxtChange(null)):closeWin(e)},e.prototype.setData=function(t){var e="",i=BagSys.ins().getItemByTypeAndId(0,t);i?(this.maxNum=i.getMaxUseCount(),e=i.count+""):(this.maxNum=0,e="0");var n=Cfg.getItemCfg(t);this.nameLabel.text=n.getName(),this.nameLabel.textColor=GConst.PZColor[n.quality],this.itemIcon.setDataByItemConfig(n),this.lblvDesc.textFlow=addColorTF(Lang.itemtips_str12+StrUtil.addColor(n.level+Lang.common_ji,11508595)),this.num.text=e,this.description.textFlow=StrUtil.toTF(n.getDesc()),this.lbtujin.text=n.output,this.listData.source=n.viewArg,this.groupItem.scaleY=n.viewArg.length>0?1:0},e.prototype.getUseBtn=function(){return this.useBtn},e}(BaseWinSingle);__reflect(ItemUseBoxWin.prototype,"ItemUseBoxWin"),window.ItemUseBoxWin=ItemUseBoxWin;var TitleTipsWin=function(t){function e(){return t.call(this)||this}return __extends(e,t),e.prototype.initUI=function(){t.prototype.initUI.call(this),this.skinName="TitleTipsEUI",this.layer=LayerMgr.Popup,this.addBg(),this.effTitle=new MC,this.effTitle.x=0,this.effTitle.y=0,this.groupEntity.addChild(this.effTitle)},e.prototype.open=function(e){t.prototype.open.call(this),this.addClickE(this.btnUse,this.onClick),this.itemData=e,this.updatePanel()},e.prototype.updatePanel=function(){var t=this.itemData.cfg.useArg,e=Cfg.getConfig(TitleConfig,t.titleid);this.lbName.text=e.name+" ",this.imgQuality.source=ResMgr.tipsQualityRes[this.itemData.cfg.quality];var i=e.attrs;this.totalPower.text=GFunc.getPower(i).toFixed(0),this.lbAttr.textFlow=addColorTF(AttrData.parse(i,{fm:"%k："+addColor("+%v",5767068)}).join("\n")),this.lbtujin.text=this.itemData.cfg.output,this.effTitle.playFile(getEffName("ch_zycs_"+e.img),-1),this.groupUse.scaleY=0==this.itemData.handle?0:1},e.prototype.onClick=function(t){switch(t.currentTarget){case this.btnUse:BagSys.ins().sendUseItem(this.itemData.id,1),closeWin(this)}},e}(BaseWinSingle);__reflect(TitleTipsWin.prototype,"TitleTipsWin"),window.TitleTipsWin=TitleTipsWin;var ZuJiItemTipsWin=function(t){function e(){var e=t.call(this)||this;return e.layer=LayerMgr.Popup,e.skinName="ZuJiItemTipsWinEUI",e.addBg(),e}return __extends(e,t),e.prototype.childrenCreated=function(){this.setSkinPart("itemIcon",new ItemIcon)},e.prototype.initUI=function(){t.prototype.initUI.call(this)},e.prototype.open=function(e,i){void 0===i&&(i=""),t.prototype.open.call(this),this.addClickE(this.btnGoto,this.onClick);e.id,e.count;this.lbMaxDesc.text=i,this.setData(e)},e.prototype.setData=function(t){var e=t.id;t.count;this.itemId=e;var i=Cfg.getItemCfg(this.itemId);Actor.ins().isLocation?this.nameLabel.text=i.getName()+("("+i.id+")"):this.nameLabel.text=i.getName(),this.nameLabel.textColor=GConst.PZColor[i.quality],this.lbDesc.textFlow=StrUtil.toTF(i.getDesc()),this.itemIcon.setDataByItemConfig(i),this.groupTUjing.scaleY=""==i.output?0:1,this.lbtujin.text=i.output,this.lbShiYongCount.textFlow=addColorTF(""+Lang.itemtips_str22+t.shiyongCount+"/"+t.maxCount);Cfg.getItemCfg(this.itemId);this.groupGoto.scaleY=this.groupGoto.scaleX=0==Cfg.getConfigs(GainItemWayConfig,CondType.Equal,GainItemWayConfig.itemId,this.itemId).length?0:1},e.prototype.onClick=function(t){switch(t.currentTarget){case this.btnGoto:TipsSys.ins().setBuyGoodsWarn(this.itemId),closeWin(this)}},e}(BaseWinSingle);__reflect(ZuJiItemTipsWin.prototype,"ZuJiItemTipsWin"),window.ZuJiItemTipsWin=ZuJiItemTipsWin;var EquipTipsAttrData=function(){function t(){this.attr=new AttrData,this.strengthenAttr=new AttrData,this.levelUpAttr=new AttrData,this.attrDiffValue=0,this.contrastSize=ContrastSize.None}return t}();__reflect(EquipTipsAttrData.prototype,"EquipTipsAttrData");var ContrastSize;!function(t){t[t.None=0]="None",t[t.Equal=1]="Equal",t[t.More=2]="More"}(ContrastSize||(ContrastSize={}));var EquipTipsGemItem=function(t){function e(){var e=t.call(this)||this;return e.skinName="EquipTipsGemItemEUI",e.attrList0.itemRenderer=EquipTipsGemItemAttr,e.attrList1.itemRenderer=EquipTipsGemItemAttr,e}return __extends(e,t),e.prototype.setData=function(t,e,i,n){void 0===n&&(n=!1),this.lbAttrName.text=GFunc.getEquipAttrTypeName(t),this.attrList0.dataProvider=new eui.ArrayCollection(e.gemData),this.attrList1.dataProvider=new eui.ArrayCollection(i.gemData),this.groupB.visible=n,this.upadteHeight()},e.prototype.upadteHeight=function(){this.height=Math.max(this.groupA.height,this.groupB.height),this.validateNow()},e}(BaseItemRender);__reflect(EquipTipsGemItem.prototype,"EquipTipsGemItem"),window.EquipTipsGemItem=EquipTipsGemItem;var EquipTipsGemItemAttr=function(t){function e(){var e=t.call(this)||this;return e.skinName="EquipTipsGemAttrItemEUI",e}return __extends(e,t),e.prototype.dataChanged=function(){var t=this.data;if(0==t.gemId)this.lbGemName.textFlow=addColorTF("未镶嵌"),this.lbAttr.text="",this.imgTitle.source="bs_zycs_lx";else{this.imgTitle.source=""+t.gemId;var e=Cfg.getItemCfg(t.gemId);this.lbGemName.textFlow=addColorTF(e.getName(),GConst.PZColor[e.quality]),this.lbAttr.textFlow=addColorTF(AttrData.parse(t.stoneConfig.attr,{fm:"%k：%v"}).join("\n"))}},e}(BaseItemRender);__reflect(EquipTipsGemItemAttr.prototype,"EquipTipsGemItemAttr"),window.EquipTipsGemItemAttr=EquipTipsGemItemAttr;var EquipTipsJiChuItem=function(t){function e(){var e=t.call(this)||this;return e.skinName="EquipTipsJiChuItemEUI",e.attrList0.itemRenderer=EquipTipsJiChuItemAttr,e.attrList1.itemRenderer=EquipTipsJiChuItemAttr1,e}return __extends(e,t),e.prototype.setData=function(t,e,i,n,a,o){void 0===n&&(n=[]),void 0===a&&(a=!1),void 0===o&&(o=EquipTipsAttrType.strengthen),this.lbAttrName.text=GFunc.getEquipAttrTypeName(t),this.setAttr(t,e,i,n,o),this.groupB.visible=a,this.upadteHeight()},e.prototype.setAttr=function(t,e,i,n,a){this.attrList0.dataProvider=new eui.ArrayCollection(GFunc.createEquipTipsAttrData2(e,n,t,a)),this.attrList1.dataProvider=new eui.ArrayCollection(GFunc.createEquipTipsAttrData1(e,i,t)),this.upadteHeight()},e.prototype.upadteHeight=function(){this.height=Math.max(this.groupA.height,this.groupB.height),this.validateNow()},e.prototype.setMyDec=function(t){void 0===t&&(t=Lang.foot_str11),this.lbMyDec.text=t},e}(BaseItemRender);__reflect(EquipTipsJiChuItem.prototype,"EquipTipsJiChuItem"),window.EquipTipsJiChuItem=EquipTipsJiChuItem;var DLHLConfig=function(){function t(){}return t}();__reflect(DLHLConfig.prototype,"DLHLConfig");var EquipTipsJiChuItemAttr1=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return __extends(e,t),e.prototype.dataChanged=function(){var t=this.data;this.lbAttr.textFlow=addColorTF(AttrData.getAttrValue(t.attr)),this.imgTitle.source=ResMgr.getEquipAttrContrastIcon(t.contrastSize)},e}(EquipTipsJiChuItemAttr);__reflect(EquipTipsJiChuItemAttr1.prototype,"EquipTipsJiChuItemAttr1"),window.EquipTipsJiChuItemAttr1=EquipTipsJiChuItemAttr1;var EquipTipsOtherItem=function(t){function e(){var e=t.call(this)||this;return e.skinName="EquipTipsJiChuItemEUI",e.attrList0.itemRenderer=EquipTipsOtherItemAttr,e.attrList1.itemRenderer=EquipTipsOtherItemAttr,e}return __extends(e,t),e.prototype.setData=function(t,e,i,n){void 0===n&&(n=!1),this.lbAttrName.text=GFunc.getEquipAttrTypeName(t),this.setAttr(t,e,i),this.groupB.visible=n,this.upadteHeight()},e.prototype.setAttr=function(t,e,i){this.attrList0.dataProvider=new eui.ArrayCollection(GFunc.createEquipTipsAttrData(e,t)),this.attrList1.dataProvider=new eui.ArrayCollection(GFunc.createEquipTipsAttrData(i,t))},e.prototype.upadteHeight=function(){this.height=Math.max(this.groupA.height,this.groupB.height),this.validateNow()},e.prototype.setMyDec=function(t){void 0===t&&(t=Lang.foot_str11),this.lbMyDec.text=t},e}(BaseItemRender);__reflect(EquipTipsOtherItem.prototype,"EquipTipsOtherItem"),window.EquipTipsOtherItem=EquipTipsOtherItem;var DropBoxConstConfig=function(){function t(){}return t}();__reflect(DropBoxConstConfig.prototype,"DropBoxConstConfig");var EquipTipsOtherItemAttr1=function(t){function e(){var e=t.call(this)||this;return e.skinName="EquipTipsJiChuItemAttrEUI",e}return __extends(e,t),e.prototype.dataChanged=function(){var t=this.data;this.lbAttr.textFlow=addColorTF(AttrData.getAttrValue(t.attr),GFunc.getEquipAttrTypeColor(t.type))},e}(BaseItemRender);__reflect(EquipTipsOtherItemAttr1.prototype,"EquipTipsOtherItemAttr1"),window.EquipTipsOtherItemAttr1=EquipTipsOtherItemAttr1;var EffAppearanceConfig=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return __extends(e,t),e}(AppearanceConfig);__reflect(EffAppearanceConfig.prototype,"EffAppearanceConfig");var RoleEquipTipsWin=function(t){function e(){return t.call(this)||this}return __extends(e,t),e.prototype.initUI=function(){t.prototype.initUI.call(this),this.layer=LayerMgr.Popup,this.groupSign.scaleY=1,this.imageState.visible=!0,this.currentState="myRole"},e.prototype.open=function(e,i,n,a){void 0===n&&(n=null),void 0===a&&(a=null),this.fun=n,this.obj=a,t.prototype.open.call(this,e,i,null),this.addClickE(this.btnReplaceEquip,this.onClick),this.updatePanel(e)},e.prototype.updatePanel=function(t){this.LabelTotalScore.textFlow=addColorTF("综合评分："+addColor(t.totalPower.toFixed(0),5949490)),BagSys.ins().hasEquip(t.equipPos)?this.updateRp():(this.groupSign.visible=!1,this.groupSign.scaleY=0),0!=t.cfg.output.length?(this.groupTUjing.visible=!0,this.lbtujin.text=t.cfg.output):this.groupTUjing.visible=!1,this.groupTUjing.scaleY=0},e.prototype.updateAttr=function(e,i){t.prototype.updateAttr.call(this,e,i);var n=[];if(e.strengthen>0){var a=Cfg.getConfig(EnhanceAttrConfig,e.cfg.subType,e.strengthen);n=a.attr}if(this.beaseAttrItem.setData(EquipAttrType.base,e.hasEquipOn()?e.cfg.pattr:[],i?i.cfg.pattr:[],n,this.showDuiBi()),this.zhuiJiaAttrItem.scaleY=e.addlv>0?1:0,e.addlv){var o=Cfg.getConfig(AppendAttrConfig,e.cfg.subType,e.addlv);this.zhuiJiaAttrItem.setData(EquipAttrType.add,o.attr,[],!1)}this.peiyangAttrItem.scaleY=0==e.epicAttr[0].value?0:1,this.peiyangAttrItem.setData(EquipAttrType.shishi,e.epicAttr,[],!1);var s=e.getGemData();this.gemAttrItem.scaleY=1,this.gemAttrItem.setData(EquipAttrType.gem,s,new GemPosData,!1)},e.prototype.getEquipPower=function(t){var e=t.power;return e},e.prototype.updateRp=function(){var t=this.equipsData;this.btnReplaceEquip.redPoint.visible=RpSys.ins().getData(RoleWin,RolePanel,t.equipPos)},e.prototype.hideReplceBtn=function(){this.equipsData;this.groupSign.visible=!1,this.groupSign.scaleY=0},e.prototype.onClick=function(t){closeWin(this),this.fun.call(this.obj,this.equipsData)},e.prototype.getEquipBtn=function(){return this.group.validateNow(),this.btnReplaceEquip},e.prototype.showDuiBi=function(){return!1},e}(EquipTipsWin);__reflect(RoleEquipTipsWin.prototype,"RoleEquipTipsWin"),window.RoleEquipTipsWin=RoleEquipTipsWin;var JinZuanData=function(){function t(){this.jinzuanValue=0,this.zhufuValue=0,this.zhufuType=1,this.xunBaoJiLuOtherDatas=[],this.xunBaoJiLuMyDatas=[],this.jinZuanShopDatas=[],this.jinZuanZhuFuDatas=[],this._showItemDatas=[],this.shopReliveTick=0}return t.prototype.iniData=function(){},t.prototype.parser=function(t){var e=t.readInt(),i=t.readInt(),n=t.readByte(),a=t.readByte();this.setZhuFuValue(e),this.setjinZuanValue(i),this.setZhuFuType(n),this.setZhuFuReceive(a)},t.prototype.setZhuFuType=function(t){this.zhufuType=t,this.jinZuanZhuFuDatas.length=0;for(var e=Cfg.getConfigs(JinzhuanZhufuConfig,this.zhufuType,CondType.ALL),i=0;i<e.length;i++){var n=e[i],a=new JinZuanZhuFuData;a.index=n.index,a.type=t,this.jinZuanZhuFuDatas.push(a)}},t.prototype.setZhuFuReceive=function(t){var e=this.jinZuanZhuFuDatas.length,i=[];this.jinZuanZhuFuDatas;i.length=e,MathUtil.writeIntToArray(t,i);for(var n=0;e>n;n++)this.jinZuanZhuFuDatas[n].setreceive(i[n])},t.prototype.setZhuFuValue=function(t){this.zhufuValue=t},t.prototype.setjinZuanValue=function(t){this.jinzuanValue=t},t.prototype.parserShop=function(t){var e=t.readInt();this.shopReliveTick=1e3*e+Timer.ins().getTimer();var i=t.readByte();this.jinZuanShopDatas.length=0;for(var n=0;i>n;n++){var a=new JinZuanShopData;a.index=n,a.parser(t),this.jinZuanShopDatas.push(a)}},Object.defineProperty(t.prototype,"leftShopTime",{get:function(){return Math.max((this.shopReliveTick-Timer.ins().getTimer())/1e3,0)},enumerable:!0,configurable:!0}),t.prototype.getZhuFuDataById=function(t){return this.jinZuanZhuFuDatas[t-1]},t.prototype.getShopDataById=function(t){return this.jinZuanShopDatas[t-1]},Object.defineProperty(t.prototype,"showItemDatas",{get:function(){if(0==this._showItemDatas.length){var t=Cfg.getConfigs(JinzhuanXunbaoConfig,CondType.MoreEqual,"show",1);SortUtil.sortOn(t,["show"],[SortType.up]);for(var e=0;e<t.length;e++){var i=t[e],n=i.item,a=GFunc.creatItemDataById(n.id);this._showItemDatas.push(a)}}return this._showItemDatas},enumerable:!0,configurable:!0}),t.prototype.getRecelveCount=function(){for(var t=0,e=0;e<this.jinZuanZhuFuDatas.length;e++){var i=this.jinZuanZhuFuDatas[e];i.isReceive&&t++}return 0==t?0:t-1},t.prototype.getRecelveCount1=function(){for(var t=1,e=0;e<this.jinZuanZhuFuDatas.length;e++){var i=this.jinZuanZhuFuDatas[e];i.isReceive&&t++}return t=t>=this.jinZuanZhuFuDatas.length?this.jinZuanZhuFuDatas.length:t},t}();__reflect(JinZuanData.prototype,"JinZuanData");var JinZuanJiLuData=function(){function t(){this.playName="",this.itemId=1,this.count=1}return t.prototype.parser=function(t){this.playName=t.readString(),this.itemId=t.readInt(),this.count=t.readInt()},t}();__reflect(JinZuanJiLuData.prototype,"JinZuanJiLuData");var JinZuanShopData=function(){function t(){this.index=0,this.id=0,this.buyState=0,this.discount=0,this.price=0}return t.prototype.parser=function(t){this.setIsBuy(t.readByte()),this.id=t.readShort(),this.discount=t.readShort(),this.price=t.readShort()},Object.defineProperty(t.prototype,"isBuy",{get:function(){return this.buyState},enumerable:!0,configurable:!0}),t.prototype.setIsBuy=function(t){this.buyState=t},Object.defineProperty(t.prototype,"config",{get:function(){return this._config||(this._config=Cfg.getConfig(JinzhuanSecretConfig,this.id))},enumerable:!0,configurable:!0}),t}();__reflect(JinZuanShopData.prototype,"JinZuanShopData");var JinZuanZhuFuData=function(){function t(){this.type=1,this.index=1}return t.prototype.parser=function(t){},t.prototype.setreceive=function(t){this.receive=t},Object.defineProperty(t.prototype,"isReceive",{get:function(){return 1==this.receive},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"canGet",{get:function(){return!this.isReceive&&RechargeActSys.ins().jinZuanData.zhufuValue>=this.config.score},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"config",{get:function(){return Cfg.getConfig(JinzhuanZhufuConfig,this.type,this.index)},enumerable:!0,configurable:!0}),t}();__reflect(JinZuanZhuFuData.prototype,"JinZuanZhuFuData");var EffectsConfig=function(){function t(){}return t}();__reflect(EffectsConfig.prototype,"EffectsConfig");var JinZuanBagPanelItem=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return __extends(e,t),e}(XunBaoBagPanelItem);__reflect(JinZuanBagPanelItem.prototype,"JinZuanBagPanelItem"),window.JinZuanBagPanelItem=JinZuanBagPanelItem;var JinZuanBarEff=function(t){function e(){var e=t.call(this)||this;return e.skinName="JinZuanBarEffEUI",e.mc=new MC,e.mc.x=62,e.mc.y=67,e.mc.touchEnabled=!1,e.groupMc1.addChild(e.mc),e.mc.playFile(getEffName("jypoor2"),-1),e.mcmax=new MC,e.mcmax.x=58,e.mcmax.y=65,e.mcmax.touchEnabled=!1,e.addChild(e.mcmax),e.dimc=new MC,e.dimc.x=61,e.dimc.y=95,e.dimc.touchEnabled=!1,e.groupShuiPing.addChild(e.dimc),e.hpShape=DisUtil.drawCirByAngle(e.hpShape,58,0,360,!0),e.hpShape.x=59,e.hpShape.y=55,e.groupShuiPing.addChild(e.hpShape),e.dimc.touchEnabled=!1,e.dimc.mask=e.hpShape,e.dimc.playFile(getEffName("jypoor1"),-1),e}return __extends(e,t),e.prototype.setData=function(t,e){var i=t+"/"+e,n=i.length>11,a=n?"\n":"";this.lbValue.text=t+"/"+a+e;var o=t/e;o=o>1?1:o;var s=123*o;this.groupMc.height=s,this.dimc.y=123-s-13,t>=e?this.dimc.visible=!1:this.dimc.visible=t>0,this.validateNow()},e}(BaseItemRender);__reflect(JinZuanBarEff.prototype,"JinZuanBarEff"),window.JinZuanBarEff=JinZuanBarEff;var ElementBaseConfig=function(){function t(){this.id=0,this.quality=0,this.name=""}return t}();__reflect(ElementBaseConfig.prototype,"ElementBaseConfig");var ElementLevelConfig=function(){function t(){this.id=0,this.level=0,this.upLevelConsu=0,this.clearGain=0,this.attr=[]}return t}();__reflect(ElementLevelConfig.prototype,"ElementLevelConfig");var JinZuanCJPanelItem=function(t){function e(){var e=t.call(this)||this;return e.setSkinName(),e.setSkinPart("item",new ItemBase),e}return __extends(e,t),e.prototype.setSkinName=function(){this.skinName="JinZuanCJPanelItemEUI"},e.prototype.dataChanged=function(){var t=this.data;this.item.data=t},e}(BaseItemRender);__reflect(JinZuanCJPanelItem.prototype,"JinZuanCJPanelItem"),window.JinZuanCJPanelItem=JinZuanCJPanelItem;var JinZuanCJPanelZHuFuItem=function(t){function e(){var e=t.call(this)||this;return e.setSkinName(),e.setSkinPart("item",new ItemBaseReward),e}return __extends(e,t),e.prototype.setSkinName=function(){this.skinName="JinZuanCJPanelZHuFuItemEUI"},e.prototype.dataChanged=function(){var t=this.data;this.item.data=t.config.item,this.imgYlq.visible=t.isReceive,this.imgklq.visible=t.canGet,this.redPoint.visible=t.canGet,this.item.touchEnabled=!t.canGet,this.item.touchChildren=!t.canGet},e.prototype.updateItem=function(){var t=this.data;this.imgYlq.visible=t.isReceive,this.imgklq.visible=t.canGet,this.redPoint.visible=t.canGet,this.item.touchEnabled=!t.canGet,this.item.touchChildren=!t.canGet},e}(BaseItemRender);__reflect(JinZuanCJPanelZHuFuItem.prototype,"JinZuanCJPanelZHuFuItem"),window.JinZuanCJPanelZHuFuItem=JinZuanCJPanelZHuFuItem;var JinZuanJiLuItem=function(t){function e(){var e=t.call(this)||this;return e.skinName="XunBaoJiLuItemEUI",e}return __extends(e,t),e.prototype.dataChanged=function(){var t=this.data,e=Cfg.getItemCfg(t.itemId);this.lbDesc.textFlow=addColorTF("运气爆棚,"+addColor(t.playName,3183103)+"获得了"+addColor(e.getName(),GConst.PZColor[e.quality]))},e}(BaseItemRender);__reflect(JinZuanJiLuItem.prototype,"JinZuanJiLuItem"),window.JinZuanJiLuItem=JinZuanJiLuItem;var ElementLibraryConfig=function(){function t(){this.pos=0,this.name="",this.cost=0,this.huntOnce=0}return t}();__reflect(ElementLibraryConfig.prototype,"ElementLibraryConfig");var JinZuanRewardListTipsWin=function(t){function e(){var e=t.call(this)||this;return e.init(),e}return __extends(e,t),e.prototype.init=function(){this.skinName="JinZuanRewardListTipsWinEUI",this.addBg(),this.list.itemRenderer=ItemBaseName},e.prototype.open=function(e){t.prototype.open.call(this),this.addClickE(this.buyXunBao10,this.onClick),this.addClickE(this.buyXunBao50,this.onClick),this.addLsn(LogicSys.ins().patchCurrency,this.updataItem),this.list.dataProvider=new eui.ArrayCollection(e),this.list.validateNow(),this.updateConsume(),this.updateBtn(),Timer.ins()["do"](100,1,1,this.flyItemList,this)},e.prototype.updateBtn=function(){this.buyXunBao10.labelDisplay.text="抽奖"+this.jinzhuanConstConfig.drawtimes[1]+"次",this.buyXunBao50.labelDisplay.text="抽奖"+this.jinzhuanConstConfig.drawtimes[2]+"次"},e.prototype.flyItemList=function(){var t=this.list.numElements;if(isShowWin(JinZuanWin))for(var e=0;t>e;e++){var i=this.list.getElementAt(e);if(i){var n=i.data,a=i.localToGlobal(),o=n.id,s=new eui.Image;s.source=ResMgr.getItemIcon(Cfg.getItemCfg(o).getIcon(),IconType.IT_80x80),s.anchorOffsetX=37,s.anchorOffsetY=37,s.x=a.x+i.width/2,s.y=a.y+i.height/2,LayerMgr.Popup.addChild(s);var r=getWin(JinZuanWin).getJinZuanBag();if(GFunc.flyToBag1(s,r),9==e)break}}},e.prototype.onClick=function(t){switch(t.currentTarget){case this.buyXunBao10:this.sendChouJiang(1);break;case this.buyXunBao50:this.sendChouJiang(2)}},e.prototype.updataItem=function(t){t.type==CurType.JinZuan&&this.updateConsume()},e.prototype.updateConsume=function(){this.updateSingleConsume(1,this.lbXunBao10),this.updateSingleConsume(2,this.lbXunBao50)},e.prototype.updateSingleConsume=function(t,e){var i=CurType.JinZuan,n=GFunc.getItemCount(i),a=this.jinzhuanConstConfig.drawcost[t];e.text=n+"/"+a},e.prototype.sendChouJiang=function(t){var e=this.jinzhuanConstConfig.drawcost[t];GFunc.checkCurrency(CurType.JinZuan,e)&&RechargeActSys.ins().sendJinZuanChouJian(t+1)},Object.defineProperty(e.prototype,"jinzhuanConstConfig",{get:function(){return Cfg.getConfig(JinzhuanConstConfig)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"data",{get:function(){return RechargeActSys.ins().jinZuanData},enumerable:!0,configurable:!0}),e}(BaseWin);__reflect(JinZuanRewardListTipsWin.prototype,"JinZuanRewardListTipsWin"),window.JinZuanRewardListTipsWin=JinZuanRewardListTipsWin;var JinZuanRewardViewWin=function(t){function e(){var e=t.call(this)||this;return e.init(),e}return __extends(e,t),e.prototype.init=function(){this.skinName="JinZuanRewardViewWinEUI",this.addBg(),this.list0.itemRenderer=ItemBaseReward,this.list1.itemRenderer=ItemBaseReward},e.prototype.open=function(){t.prototype.open.call(this);var e=Cfg.getConfig(JinzhuanConstConfig);this.list0.dataProvider=new eui.ArrayCollection(e.jipinitem),this.list1.dataProvider=new eui.ArrayCollection(e.zhenxiitem)},e}(BaseWin);__reflect(JinZuanRewardViewWin.prototype,"JinZuanRewardViewWin"),window.JinZuanRewardViewWin=JinZuanRewardViewWin;var ElementLockPosConfig=function(){function t(){this.pos=0,this.lockLevel=0}return t}();__reflect(ElementLockPosConfig.prototype,"ElementLockPosConfig");var JinZuanShopPanelItem=function(t){function e(){var e=t.call(this)||this;return e.skinName="JinZuanShopPanelEUIItemEUI",e.setSkinPart("priceIconOld",new PriceIcon),e.setSkinPart("priceIconNew",new PriceIcon),e.setSkinPart("item",new ItemBase),e.btnBuy.name="btnBuy",e.priceIconOld.setType(CurType.JinZuan),e.priceIconOld.setIsYuanJia(!0),e.priceIconNew.setType(CurType.JinZuan),e}return __extends(e,t),e.prototype.dataChanged=function(){var t=this.data,e=GFunc.creatItemDataById(t.config.item.id);e.count=t.config.item.count,this.item.data=e,this.labelName.text=e.cfg.getName(),this.labelName.textColor=GConst.PZColor[e.cfg.quality],this.priceIconOld.setPrice(t.config.price),this.priceIconNew.setPrice(t.price),this.bmpLabelDiscount.text=t.discount/10+"z",this.imgDiscountBg.source=t.discount<20?"public_zycs_tab2":"public_zycs_tab1",this.updateRedPoint(),this.updateState()},e.prototype.updateState=function(){var t=this.data;this.currentState=t.isBuy?"yiBuy":"normal"},e.prototype.updateRedPoint=function(){var t=this.data;this.btnBuy.redPoint.visible=RpSys.ins().getData(ExtCom,JinZuanWin,JinZuanShopPanel,e,t.index)},e}(BaseItemRender);__reflect(JinZuanShopPanelItem.prototype,"JinZuanShopPanelItem"),window.JinZuanShopPanelItem=JinZuanShopPanelItem;var JinZuanWin=function(t){function e(){var e=t.call(this)||this;return e.redPointHead=[ExtCom],e.winType=WinType.OverlayWin,e}return __extends(e,t),e.prototype.getJinZuanBag=function(){return this.getPanel(JinZuanCJMainPanel).getJinZuanBagPanelTab()},e.panelNames=[JinZuanPanel,JinZuanCJMainPanel,JinZuanShopPanel],e}(BaseDuoPanelWin);__reflect(JinZuanWin.prototype,"JinZuanWin"),window.JinZuanWin=JinZuanWin;var DuiLieData=function(){function t(){this.flyItemDatas=[]}return t.prototype.addFlyData=function(t){var e=this;this.removeRepeat(t),this.flyItemDatas.push(t);var i=new Caller;i.obj=this,i.func=function(){e.flyNext()},t.addCall(i),null==this.curData&&this.flyNext(),SortUtil.sortOn(this.flyItemDatas,["order"],[SortType.up])},t.prototype.removeRepeat=function(t){for(var e=this.flyItemDatas.length-1;e>=0;e--){var i=this.flyItemDatas[e];null!=i.t&&i.t==t.t&&this.flyItemDatas.splice(e,1)}},t.prototype.flyNext=function(){this.flyItemDatas.length>0?(this.curData=this.flyItemDatas.shift(),this.curData.call()):this.curData=null},t}();__reflect(DuiLieData.prototype,"DuiLieData");var DuiLieFlyItemData=function(t){function e(){return t.call(this)||this}return __extends(e,t),e.prototype.setData=function(t,e,i,n,a,o){var s=this;void 0===o&&(o=null),this.fromDisplayObject=t;var r=new Caller;r.func=e,r.obj=i;var u=new Caller,h=new Caller,l=new Caller;u.obj=this,u.call=function(){openWin(n,a,function(t){s.fromDisplayObject.x=t.x,s.fromDisplayObject.y=t.y,s.call()},s)},h.obj=this,h.func=function(){LayerMgr.Top.addChild(s.fromDisplayObject),s.fromDisplayObject.scaleX=1.5,s.fromDisplayObject.scaleY=1.5,s.fromDisplayObject.anchorOffsetX=s.fromDisplayObject.width/2,s.fromDisplayObject.anchorOffsetY=s.fromDisplayObject.height/2;var t=.5*s.fromDisplayObject.width,e=.5*s.fromDisplayObject.height;s.fromDisplayObject.x=s.fromDisplayObject.x+t,s.fromDisplayObject.y=s.fromDisplayObject.y+e;var i=egret.Tween.get(s.fromDisplayObject);i.to({scaleX:1,scaleY:1},500,egret.Ease.circOut).call(function(){s.fromDisplayObject.anchorOffsetX=0,s.fromDisplayObject.anchorOffsetY=0,s.fromDisplayObject.x=s.fromDisplayObject.x-t,s.fromDisplayObject.y=s.fromDisplayObject.y-e,GFunc.flyTo(s.fromDisplayObject,s.fromDisplayObject,r.call(),1e3,egret.Ease.circOut,function(){s.call()})},s)},l.obj=this,l.func=function(){DisUtil.remove(s.fromDisplayObject),s.call(),o&&o.call()},this.addCall(u),this.addCall(h),this.addCall(l)},e}(DuiLieBaseData);__reflect(DuiLieFlyItemData.prototype,"DuiLieFlyItemData");var DuiLieOpenWinData=function(t){function e(){var e=t.call(this)||this;return e.caller=new Caller,e}return __extends(e,t),e.prototype.setData=function(t,e,i){var n=this;void 0===i&&(i=0),this.caller.func=t,this.caller.obj=e;var a=new Caller,o=new Caller;a.obj=this,a.call=function(){var t=egret.Tween.get(n);t.wait(i).call(n.caller.call,n.caller)},o.obj=this,o.func=function(){n.call()
},this.addCall(a),this.addCall(o)},e}(DuiLieBaseData);__reflect(DuiLieOpenWinData.prototype,"DuiLieOpenWinData"),window.DuiLieOpenWinData=DuiLieOpenWinData;var DuiLieSys=function(t){function e(){var e=t.call(this)||this;return e.flyData=new DuiLieData,e}return __extends(e,t),e.ins=function(){return t.getIns.call(this,e)},e}(BaseIns);__reflect(DuiLieSys.prototype,"DuiLieSys"),window.DuiLieSys=DuiLieSys;var FlyItemData=function(t){function e(){return t.call(this)||this}return __extends(e,t),e.prototype.setData=function(t,e,i,n){var a=this;this.fromDisplayObject=t,this.toXY=e;var o=new Caller,s=new Caller,r=new Caller;o.obj=this,o.call=function(){openWin(i,n,function(t){a.fromDisplayObject.x=t.x,a.fromDisplayObject.y=t.y,a.call()},a)},s.obj=this,s.func=function(){LayerMgr.Top.addChild(a.fromDisplayObject),GFunc.flyTo(a.fromDisplayObject,a.fromDisplayObject,a.toXY,1e3,egret.Ease.circOut,function(){a.call()})},r.obj=this,r.func=function(){DisUtil.remove(a.fromDisplayObject),a.call()},this.addCall(o),this.addCall(s),this.addCall(r)},e}(DuiLieBaseData);__reflect(FlyItemData.prototype,"FlyItemData");var JobData=function(){function t(){this.surplusSpot=0,this.spot=[],this.spot.length=3}return t}();__reflect(JobData.prototype,"JobData");var JobSys=function(t){function e(){var e=t.call(this)||this;return e.roleUpLvAttr=[],e.newFun=[],e.qijiZhiLuId=-1,e.qijiOpenId=[],e.isFenPei=!0,e.wordLevel=0,e.flyItemDatas=[],e.sysId=PackId.AttrAdd,e.reg(21,e.patchNewFunOpen),e.reg(31,e.patchQiJizl),e.reg(41,e.patchShowFisrtRechargeWin),e.reg(42,e.patchShowSevenDayLoginTipsWin),e.reg(65,e.patchWordLevel),e.reg(70,e.patchZSData),e.reg(71,e.patchZSTask),e.reg(72,e.patchZSOneKey),e.reg(73,e.patchZS),e.reg(74,e.patchZSTaskUpdate),e.zsData=new ZSData,e.zsData.iniData(),e}return __extends(e,t),e.ins=function(){return t.getIns.call(this,e)},e.prototype.patchNewFunOpen=function(t){for(var e=t.readShort(),i=0;e>i;i++){var n=t.readShort(),a=Cfg.getConfig(LimitConfig,n);RpFun.newFunOpenupdateRed(n),1==a.isprompt?this.addSysFly(n):this.patchSysOpen(n),this.doNewAppearance(n)}RuleIconMgr.ins().updateAllRuleSys()},e.prototype.doNewAppearance=function(t){var e=0;switch(t){case 216:e=ShouHuNewSys.ins().damonModel.getStage(),GFunc.OpenSqXyActTipsWin(ShouHuStageActTipsWin,new DamonHuanHuaData(e),t);break;case 217:e=ShouHuNewSys.ins().yongbingModel.getStage(),GFunc.OpenSqXyActTipsWin(ShouHuStageActTipsWin,new YongbingHuanHuaData(e),t);break;case 218:e=ShouHuNewSys.ins().shenmoModel.getStage(),GFunc.OpenSqXyActTipsWin(ShouHuStageActTipsWin,new ShenmoHuanHuaData(e),t)}},e.prototype.addSysFly=function(t){var i=new DuiLieFlyItemData,n=this.createFlyItem(t),a=new Caller;a.param=[t],a.func=this.patchSysOpen,a.obj=this,i.setData(n,function(){var i=e.ins().getXy(t,n);return i=LayerMgr.Top.globalToLocal(i.x,i.y)},this,NewFunctionOpen,t,a),i.setOrder(3),DuiLieSys.ins().flyData.addFlyData(i)},e.prototype.createFlyItem=function(t){var e=Cfg.getConfig(LimitConfig,t),i=new NewFunctionOpenItem;return i.imgOpenIcon.source=ResMgr.getQijiIconRes1(e.idx,!0),i.imgOpenName.source=ResMgr.getQijiNameRes1(e.idx,!0),i},e.prototype.patchSysOpen=function(t){return 119==t&&(t=255),t},e.prototype.getXy=function(t,e){var i,n=getWin(MainWin),a=getWin(MainUIButton);switch(t){case 255:case 119:i=this.getIconXy(n.com_ext.btn_Guild,e);break;case 202:case 201:i=this.getIconXy(a.getBtnTianShiTouXian(),e);break;case 211:case 207:case 209:case 208:case 204:i=this.getIconXy(a.getRoleBtn(),e);break;case 215:case 214:i=this.getIconXy(a.getBtnSkill(),e);break;case 220:case 219:case 222:case 223:case 221:i=this.getIconXy(a.getForgeBtn(),e);break;case 999:i=this.getIconXy(a.getBagBtn(),e);break;case 238:case 239:case 240:case 241:case 288:case 250:case 237:i=this.getIconXy(n.getFuBenBtn(),e);break;case 234:case 235:case 236:i=this.getIconXy(n.getBossBtn(),e);break;case 252:case 253:case 254:case 256:i=this.getIconXy(n.getBtn_JJ(),e);break;case 216:case 218:case 217:case 292:case 293:i=this.getIconXy(a.getBtnYB(),e);break;case 226:i=this.getIconXy(n.getBtnDailyWanFa(),e);break;default:i=this.getIconXy(a.getRoleBtn(),e)}return i},e.prototype.getIconXy=function(t,e){var i=t.localToGlobal(0,0);return i.x=i.x,i.y=i.y,i.x=i.x+t.width/2-e.width/2,i.y=i.y+t.height/2-e.height/2,i},e.prototype.patchQiJizl=function(t){if(0==this.qijiOpenId.length)for(var e=Cfg.getConfigs(WayConfig),i=0;i<e.length;i++){var n=e[i];this.qijiOpenId[n.idx]=!1}for(var a=t.readByte(),i=0;a>i;i++){var o=t.readByte();this.qijiOpenId[o]=!0}RpFun.showQiJiluRedPoint()},e.prototype.getQijiReceiveAwardByPageNext=function(t){var e=0,i=0;return e=4*(t+1)-3,i=16,this.getQijiReceiveAwardByPage(t,e,i)},e.prototype.getQijiReceiveAwardByPageLast=function(t){var e=0,i=0;return e=1,i=4*(t-1),this.getQijiReceiveAwardByPage(t,e,i)},e.prototype.getQijiReceiveAwardByPage=function(t,e,i){for(var n=Cfg.getConfigs(WayConfig),a=0;a<n.length;a++){var o=n[a];if(o.idx>=e&&o.idx<=i&&FbSys.ins().guajiData.guanId>=o.guanqia&&0==this.qijiOpenId[o.idx])return!0}return!1},e.prototype.getQijiReceiveAward=function(){for(var t=Cfg.getConfigs(WayConfig),e=0;e<t.length;e++){var i=t[e];if(FbSys.ins().guajiData.guanId>=i.guanqia&&0==this.qijiOpenId[i.idx])return!0}return!1},e.prototype.getQijiReceiveAwardData=function(){for(var t,e=Cfg.getConfigs(WayConfig),i=0;i<e.length;i++){var n=e[i];FbSys.ins().guajiData.guanId>=n.guanqia&&0==this.qijiOpenId[n.idx]&&(t=n)}return t},e.prototype.getQijiReceiveMinAwardData=function(){for(var t,e=Cfg.getConfigs(WayConfig),i=0;i<e.length;i++){var n=e[i];if(FbSys.ins().guajiData.guanId>=n.guanqia&&0==this.qijiOpenId[n.idx]){t=n;break}}if(null==t)for(var i=0;i<e.length;i++){var n=e[i];if(n.guanqia>FbSys.ins().guajiData.guanId){t=n;break}}return null==t&&(t=e[e.length-1]),t},e.prototype.getQijiReceiveMaxAwardData=function(){for(var t,e=Cfg.getConfigs(WayConfig),i=0;i<e.length;i++){var n=e[i];FbSys.ins().guajiData.guanId>=n.guanqia&&0==this.qijiOpenId[n.idx]&&(t=n)}if(null==t)for(var i=0;i<e.length;i++){var n=e[i];if(n.guanqia>FbSys.ins().guajiData.guanId){t=n;break}}return t},e.prototype.getLast=function(){for(var t=Cfg.getConfigs(WayConfig),e=t[t.length-1],i=0;i<t.length;i++){var n=t[i];if(n.guanqia>FbSys.ins().guajiData.guanId){e=n;break}}return e},e.prototype.getAllSysOpen=function(){var t=Cfg.getConfigs(WayConfig);return FbSys.ins().guajiData.guanId>=t[ComUtil.getObjLen(t)-1].guanqia},e.prototype.getMaxOpen=function(){for(var t=Cfg.getConfigs(WayConfig),e=0;e<t.length;e++){var i=t[e];if(i.guanqia>FbSys.ins().guajiData.guanId)return i}return t[1]},e.prototype.getQijiIsEnd=function(){for(var t=Cfg.getConfigs(WayConfig),e=!0,i=0;i<t.length;i++){var n=t[i];0==this.qijiOpenId[n.idx]&&(e=!1)}return e},e.prototype.QijiReceiveAwardByIdx=function(t){return this.qijiOpenId[t]},e.prototype.sendQiJizl=function(t){var e=this.getBytes(32);e.writeInt(t),this.send(e)},e.prototype.patchShowFisrtRechargeWin=function(t){openWin(FirstRechargeTipsWin)},e.prototype.patchShowSevenDayLoginTipsWin=function(t){openWin(SevenDayLoginTipsWin),this.updateSevenDayLoginTipsWinPoint()},e.prototype.updateSevenDayLoginTipsWinPoint=function(){var t=getWin(SevenDayLoginTipsWin);if(t){var e=getWin(MainWin).getExt_getSevenDayLoginBtnPoint();t.x=e.x+45,t.y=e.y+95}},e.prototype.patchWordLevel=function(t){this.wordLevel=t.readInt()},e.prototype.patchZSData=function(t){this.zsData.parser(t)},e.prototype.sendZSTask=function(t){var e=this.getBytes(71);e.writeByte(t),this.send(e)},e.prototype.patchZSTask=function(t){var e=t.readByte(),i=t.readByte();this.zsData.zsTaskDatas[e].state=i,RpFun.showZSRedPoint(),RpFun.updateZS()},e.prototype.sendZSOneKey=function(){var t=this.getBytes(72);this.send(t)},e.prototype.patchZSOneKey=function(t){this.patchZS(t)},e.prototype.sendZS=function(){var t=this.getBytes(73);this.send(t)},e.prototype.patchZS=function(t){var e=this.zsData.zsId;this.zsData.parser(t);var i=this.zsData.zsId,n=new DuiLieOpenWinData;n.setData(function(){openWin(ZSPanelUpLevelTipsWin,e,i,n.call.bind(n))},this),n.setOrder(0),DuiLieSys.ins().flyData.addFlyData(n),RpFun.updateZS(),RpFun.showZSRedPoint(),BagSys.ins().showTiHuanEquip()},e.prototype.patchZSTaskUpdate=function(t){var e=t.readByte(),i=t.readByte(),n=t.readInt(),a=this.zsData.zsTaskDatas[e];a.state=i,a.value=n,RpFun.showZSRedPoint()},e}(BaseSys);__reflect(JobSys.prototype,"JobSys");var System;!function(t){t.jobSys=JobSys.ins.bind(JobSys)}(System||(System={})),window.JobSys=JobSys;var ElementOtherConfig=function(){function t(){this.maxLevel=0}return t}();__reflect(ElementOtherConfig.prototype,"ElementOtherConfig");var TouXianSys=function(t){function e(){var e=t.call(this)||this;return e.sysId=PackId.TouXian,e.reg(1,e.patchTouXianData),e.reg(2,e.patchTouXianTask),e.reg(3,e.patchTouXianMeiRi),e.reg(4,e.patchTouXianTaskUpdate),e.touxianData=new TouXianData,e}return __extends(e,t),e.ins=function(){return t.getIns.call(this,e)},e.prototype.patchTouXianData=function(t){this.touxianData.parser(t),RpFun.showTouXianRedPoint()},e.prototype.sendTouXianTask=function(t){var e=this.getBytes(2);e.writeByte(t),this.send(e)},e.prototype.patchTouXianTask=function(t){var e=this.touxianData.level;this.touxianData.parserUpdate(t);var i=this.touxianData.level;if(i>e){var n=Cfg.getConfig(TouxianConfig,i);n.stagereward.length>0&&openWin(TouXianPanelUpLevelTipsWin,n.stagereward),this.patchTouXianUpLevel()}RpFun.showTouXianRedPoint()},e.prototype.patchTouXianUpLevel=function(){},e.prototype.sendTouXianMeiRi=function(t){var e=this.getBytes(3);e.writeShort(t),this.send(e)},e.prototype.patchTouXianMeiRi=function(t){var e=t.readShort(),i=t.readByte();this.touxianData.dailyStates[e-1]=i,RpFun.showTouXianRedPoint()},e.prototype.patchTouXianTaskUpdate=function(t){this.touxianData.parserUpdateTask(t),RpFun.showTouXianRedPoint()},e}(BaseSys);__reflect(TouXianSys.prototype,"TouXianSys");var System;!function(t){t.touXianSys=TouXianSys.ins.bind(TouXianSys)}(System||(System={})),window.TouXianSys=TouXianSys;var EnchantAttrConfig=function(){function t(){}return t}();__reflect(EnchantAttrConfig.prototype,"EnchantAttrConfig");var HuoDongPanelItem=function(t){function e(){var e=t.call(this)||this;return e.skinName="HuoDongPanelItemEUI",e.list.itemRenderer=ItemBaseReward,e.list.dataProvider=e.listarr=new eui.ArrayCollection,e.addClickE(e,e.onClick),e}return __extends(e,t),e.prototype.onClick=function(t){var e=this.data;switch(t.target){case this.btnSend:openWin.apply(void 0,[e.openWinClass].concat(e.openPanelIndexs)),closeWin(LiLianWin);break;case this.btnHelp:openWin(HelpWin,Cfg.getConfig(HelpInfoConfig,e.helpId).text)}},e.prototype.dataChanged=function(){var t=this.data;if(t){var e="qw";t.isOpen()?e="jxz":t.isEnd()&&(e="js"),this.currentState=e,this.validateNow(),this.btnSend.visible&&(this.btnSend.redPoint.visible=t.isOpen()),this.lbTimeTitle.text=t.getTitle(),this.btnHelp.visible=!!t.helpId,this.lbTime.text=t.getTimeStr(),this.listarr.source=t.rewards,this.imgBg.source="hdlb_zycs_"+t.icon+"_bg_png",this.imgTitle.source="hdlb_zycs_"+t.icon}},e}(BaseItemRender);__reflect(HuoDongPanelItem.prototype,"HuoDongPanelItem");var EnchantChangeConfig=function(){function t(){}return t}();__reflect(EnchantChangeConfig.prototype,"EnchantChangeConfig");var LiLianPanelTaskItem=function(t){function e(){var e=t.call(this)||this;return e.skinName="LiLianPanelTaskItemEUI",e.addClickE(e,e.onClick),e}return __extends(e,t),e.prototype.onClick=function(t){var e=this.data;switch(t.target){case this.btnOk:TaskSys.ins().sendLiLianReceiveTaskReward(e.id);break;case this.btnGoto:var i=e.config,n=GFunc.createTaskNavData(i.controlTarget);n.setsucceedFrontFun(function(){closeWin(LiLianWin)}),n["goto"]()}},e.prototype.dataChanged=function(){var t=this.data,e=t.config;this.lbName.text=e.desc,this.lbPro.text=t.value+"/"+e.target,this.lbPro.textColor=t.value>=e.target?5949490:15733780,this.lbShenWang.text="声望+"+e.renown,this.currentState=t.state.toString(),this.updateRedPoint()},e.prototype.updateRedPoint=function(){var t=this.data;this.btnOk.redPoint.visible=RpSys.ins().getData(LiLianWin,LiLianPanel,e,t.id)},e}(BaseItemRender);__reflect(LiLianPanelTaskItem.prototype,"LiLianPanelTaskItem"),window.LiLianPanelTaskItem=LiLianPanelTaskItem;var LiLianPanelUpLevelTipsWin=function(t){function e(){var e=t.call(this)||this;return e.closeFun=new Caller,e.init(),e}return __extends(e,t),e.prototype.init=function(){this.skinName="LiLianPanelUpLevelTipsWinEUI",this.addBg("public_zycs_greybg1"),this.attrs.itemRenderer=ComAttrItem3,this.attrs.dataProvider=this.attrData=new eui.ArrayCollection},e.prototype.open=function(e,i,n,a){t.prototype.open.call(this),t.prototype.open.call(this),this.closeFun.func=n,this.closeFun.obj=a,this.attrData.source=this.getLevelAttrDatas(e,i);var o=Cfg.getConfig(JunxianLevelConfig,i);this.imgName.source="lilian_zycs_jx"+o.junxian},e.prototype.close=function(){t.prototype.close.call(this),this.closeFun.call()},e.prototype.getLevelAttrDatas=function(t,e){for(var i=[],n=Cfg.getConfig(JunxianLevelConfig,t),a=Cfg.getConfig(JunxianLevelConfig,e),o=n.attr.length,s=0;o>s;s++){var r=n.attr[s],u=a.attr[s],h=new ComAttrData(r,u,!0);i.push(h)}return i},e}(BaseWin);__reflect(LiLianPanelUpLevelTipsWin.prototype,"LiLianPanelUpLevelTipsWin"),window.LiLianPanelUpLevelTipsWin=LiLianPanelUpLevelTipsWin;var LiLianPanelYuanItem=function(t){function e(){var e=t.call(this)||this;return e.skinName="LiLianPanelYuanItemEUI",e}return __extends(e,t),e.prototype.dataChanged=function(){var t=this.data;this.imgYuan.source=t?"shenmo_zycs_zhu_02":"shenmo_zycs_zhu_01"},e}(BaseItemRender);__reflect(LiLianPanelYuanItem.prototype,"LiLianPanelYuanItem"),window.LiLianPanelYuanItem=LiLianPanelYuanItem;var LiLianPanelYuanPanel=function(t){function e(){var e=t.call(this)||this;return e.itemYuans=[],e.skinName="LiLianPanelYuanEUI",e.setSkinPart("itemYuan0",new LiLianPanelYuanItem),e.setSkinPart("itemYuan1",new LiLianPanelYuanItem),e.setSkinPart("itemYuan2",new LiLianPanelYuanItem),e.setSkinPart("itemYuan3",new LiLianPanelYuanItem),e.setSkinPart("itemYuan4",new LiLianPanelYuanItem),e.setSkinPart("itemYuan5",new LiLianPanelYuanItem),e.setSkinPart("itemYuan6",new LiLianPanelYuanItem),e.setSkinPart("itemYuan7",new LiLianPanelYuanItem),e.itemYuans=[e.itemYuan0,e.itemYuan1,e.itemYuan2,e.itemYuan3,e.itemYuan4,e.itemYuan5,e.itemYuan6,e.itemYuan7],e}return __extends(e,t),e.prototype.open=function(t){this.updateView(t)},e.prototype.updateView=function(t){for(var e=Cfg.getConfig(JunxianLevelConfig,t.id),i=Cfg.getJunLianCountByLevel(e.junxian),n=e.level,a=0;i>a;a++)this.itemYuans[a].data=!1;for(var a=0;n>a;a++)this.itemYuans[a].data=!0;this.updateStatus(i)},e.prototype.updateStatus=function(t){this.currentState="state"+t},e}(BasePanel);__reflect(LiLianPanelYuanPanel.prototype,"LiLianPanelYuanPanel"),window.LiLianPanelYuanPanel=LiLianPanelYuanPanel;var LiLianRewardTipsWin=function(t){function e(){var e=t.call(this)||this;return e.init(),e}return __extends(e,t),e.prototype.init=function(){this.skinName="LiLianRewardTipsWinEUI",this.addBg("public_zycs_greybg1"),this.list.itemRenderer=ItemBaseReward},e.prototype.open=function(e,i){void 0===i&&(i=""),t.prototype.open.call(this),this.lbDec.text=i,this.list.dataProvider=new eui.ArrayCollection(e)},e}(BaseWin);__reflect(LiLianRewardTipsWin.prototype,"LiLianRewardTipsWin"),window.LiLianRewardTipsWin=LiLianRewardTipsWin;var ResUtil=function(t){function e(){var e=t.call(this)||this;return e.configCaller=new Caller,e.configCaller=new Caller,e.groups={},RES.addEventListener(RES.ResourceEvent.GROUP_COMPLETE,e.onResComplete,e),RES.addEventListener(RES.ResourceEvent.GROUP_PROGRESS,e.onResProgress,e),RES.addEventListener(RES.ResourceEvent.GROUP_LOAD_ERROR,e.onResError,e),e}return __extends(e,t),e.ins=function(){return t.getIns.call(this,e)},e.prototype.loadConfig=function(t,e,i,n){RES.addEventListener(RES.ResourceEvent.CONFIG_COMPLETE,this.onConfigComplete,this),this.configCaller.func=i,this.configCaller.obj=n,RES.loadConfig(t,e)},e.prototype.onConfigComplete=function(t){RES.removeEventListener(RES.ResourceEvent.CONFIG_COMPLETE,this.onConfigComplete,this),this.configCaller.call(),this.configCaller.reset()},e.prototype.loadGroup=function(t,e,i,n,a){if(void 0===a&&(a=3),this.groups[t]){var o=this.groups[t];o.func=e,o.funcProgress=i,o.obj=n,o.maxErrCount=a}else this.groups[t]=new CallerRes(e,i,n,a);RES.loadGroup(t)},e.prototype.onResComplete=function(t){var e=t.groupName;if(this.groups[e]){var i=this.groups[e];i.call(),i.reset(),delete this.groups[e]}},e.prototype.onResProgress=function(t){var e=t.groupName;this.groups[e]&&this.groups[e].callProgress(t.itemsLoaded,t.itemsTotal)},e.prototype.onResError=function(t){var e=this.groups[t.groupName];if(e.addError(),e.isErrorMax()){for(var i=RES.getGroupByName(t.groupName),n=[],a=0,o=i;a<o.length;a++){var s=o[a];s.data||n.push(s.name)}for(var r="",u=0,h=n;u<h.length;u++){var l=h[u];r+=l+","}this.onResComplete(t)}else RES.loadGroup(t.groupName)},e}(BaseIns);__reflect(ResUtil.prototype,"ResUtil");var EnhanceAddDaShiConfig=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return __extends(e,t),e}(EnhanceAddDaRenConfig);__reflect(EnhanceAddDaShiConfig.prototype,"EnhanceAddDaShiConfig");var HuoDongData1=function(t){function e(){var e=t.call(this)||this;e.id=1,e.sysId=254,e.helpId=41,e.icon="csys";var i=Cfg.getConfig(FortCommonConfig);e.rewards=i.zjjl.concat();var n=[new QMDBTimeData(i.starTime1[0],i.starTime1[1],i.endTime1[0],i.endTime1[1]),new QMDBTimeData(i.starTime2[0],i.starTime2[1],i.endTime2[0],i.endTime2[1])];return e.times=n,e.openWinClass=JJCWin,e.openPanelIndexs=[JJCWin.getTabIndexbyPanel(JJCManyPanel),JJCManyPanel.getTabIndexbyPanel(RedFortPanel)],e}return __extends(e,t),e}(HuoDongBaseData);__reflect(HuoDongData1.prototype,"HuoDongData1");var HuoDongData2=function(t){function e(){var e=t.call(this)||this;e.id=2,e.sysId=318,e.helpId=107,e.icon="hwbz";for(var i=Cfg.getConfig(DartConstConfig),n=[],a=0;a<i.startTimes.length;a++){var o=i.startTimes[a];n.push(new QMDBTimeData(o[0],o[1],o[0]+i.lastTime,o[1]))}e.times=n;var s=Cfg.getConfig(DartGuildRankConfig,1);return e.rewards=s.allaward.concat(),e.openWinClass=JJCWin,e.openPanelIndexs=[JJCWin.getTabIndexbyPanel(DartPanel)],e}return __extends(e,t),e}(HuoDongBaseData);__reflect(HuoDongData2.prototype,"HuoDongData2");var HuoDongData3=function(t){function e(){var e=t.call(this)||this;e.id=3,e.sysId=345,e.helpId=115,e.icon="qmdb";var i=Cfg.getConfig(DropBoxConstConfig);e.rewards=i.showRewards.concat();for(var n=[],a=0;a<i.opentime.length;a++){var o=i.opentime[a];n.push(new QMDBTimeData(o[0][0],o[0][1],o[1][0],o[1][1]))}return e.times=n,e.openWinClass=QiyuWin,e.openPanelIndexs=[QiyuWin.getTabIndexbyPanel(QMDBPanel)],e}return __extends(e,t),e}(HuoDongBaseData);__reflect(HuoDongData3.prototype,"HuoDongData3");var HuoDongData4=function(t){function e(){var e=t.call(this)||this;e.id=4,e.sysId=342,e.helpId=40,e.icon="zhuzaibg";var i=Cfg.getConfig(ZhuZaiCommonConfig),n=i.starTime1,a=i.starTime2,o=i.endTime1,s=i.endTime2;e.rewards=i.zjjl.concat();var r=[new QMDBTimeData(n[0],n[1],o[0],o[1]),new QMDBTimeData(a[0],a[1],s[0],s[1])];return e.times=r,e.openWinClass=BossWin,e.openPanelIndexs=[BossWin.getTabIndexbyPanel(ZhuZaiMainPanel)],e}return __extends(e,t),e}(HuoDongBaseData);__reflect(HuoDongData4.prototype,"HuoDongData4");var HuoDongMonterSiegeData=function(t){function e(){var e=t.call(this)||this;e.id=5,e.sysId=354,e.helpId=34,e.icon="mwwc";var i=Cfg.getConfig(MSCommonConfig);e.rewards=i.showReward.concat();var n=[new QMDBTimeData(i.startTime[0],i.startTime[1],i.endTime[0],i.endTime[1])];return e.times=n,e.openWinClass=BossWin,e.openPanelIndexs=[BossWin.getTabIndexbyPanel(ZhuZaiMainPanel),ZhuZaiMainPanel.getTabIndexbyPanel(MonsterSiegeMainPanel)],e}return __extends(e,t),e}(HuoDongBaseData);__reflect(HuoDongMonterSiegeData.prototype,"HuoDongMonterSiegeData");var LiLianData=function(){function t(){this.id=1,this.value=0,this.dailyValue=0,this.rewardIndex=0,this.liLianTaskDatas=[]}return t.prototype.parser=function(t){this.id=t.readShort(),this.value=t.readInt(),this.rewardIndex=t.readByte(),this.dailyValue=t.readShort();var e=t.readByte();this.liLianTaskDatas.length=0;for(var i=0;e>i;i++){var n=new LiLianTaskData;n.parser(t),this.liLianTaskDatas.push(n)}},t.prototype.parserUpdateTask=function(t){var e=t.readByte(),i=t.readByte();this.value=t.readInt(),this.dailyValue=t.readShort();var n=this.getTaskDataById(e);n&&(n.state=i)},t.prototype.getTaskDataById=function(t){for(var e,i=0;i<this.liLianTaskDatas.length;i++){var n=this.liLianTaskDatas[i];if(n.id==t){e=n;break}}return e},Object.defineProperty(t.prototype,"isMax",{get:function(){return this.id>=Cfg.getConfigLength(JunxianLevelConfig)},enumerable:!0,configurable:!0}),t.prototype.dailyRewardState=function(){var t=Cfg.getConfig(JunxianLevelConfig,this.id),e=Cfg.getConfig(JunxianDailyConfig,t.junxian),i=e.dialyrenown[this.rewardIndex];this.dailyValue>=i;return this.rewardIndex==e.dialyrenown.length?TaskRewardState.CanGet:this.dailyValue>=i?TaskRewardState.Geted:TaskRewardState.NotReached},t}();__reflect(LiLianData.prototype,"LiLianData");var LiLianTaskData=function(){function t(){this.id=1,this.state=0,this.value=0}return t.prototype.parser=function(t){this.id=t.readByte(),this.state=t.readByte(),this.value=t.readDouble()},Object.defineProperty(t.prototype,"config",{get:function(){return Cfg.getConfig(LilianTaskConfig,this.id)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"canGetAward",{get:function(){return 1==this.state},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"hasGetAward",{get:function(){return 2==this.state},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"isDoing",{get:function(){return 0==this.state},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"sort",{get:function(){return 2==this.state?0:1==this.state?2:1},enumerable:!0,configurable:!0}),t}();__reflect(LiLianTaskData.prototype,"LiLianTaskData");var EnhanceAttrConfig=function(){function t(){}return t}();__reflect(EnhanceAttrConfig.prototype,"EnhanceAttrConfig");var TouXianPanelTaskItem=function(t){function e(){var e=t.call(this)||this;return e.mcBtnOk=new MC,e.skinName="TouXianPanelTaskItemEUI",e.proValue.slideDuration=0,e.mcBtnOk.x=e.btnOk.width/2,e.mcBtnOk.y=e.btnOk.height/2,e.btnOk.addChild(e.mcBtnOk),e.mcBtnOk.playFile(ResMgr.getEffName("public_zycs_button03"),-1),e.addClickE(e,e.onClick),e}return __extends(e,t),e.ItemGlobal=function(t){return t},e.prototype.onClick=function(t){var i=this.data;switch(t.target){case this.btnOk:e.ItemGlobal(this.localToGlobal(0,0)),TouXianSys.ins().sendTouXianTask(i.type);break;case this.btnGoto:var n=GFunc.createTaskNavData(i.config.controlTarget);n.setsucceedFrontFun(function(){closeWin(JobWin)}),n["goto"]()}},e.prototype.dataChanged=function(){var t=this.data,e=t.config;this.lbName.text=e.desc,this.imgBg.source="tx_zycs_dikuang"+e.bgType,this.proValue.maximum=e.target,this.proValue.value=t.value,this.lbRewardValue.text=e.awardList[0].count.toString(),this.lbYb.text=e.awardList[1].count.toString(),this.currentState=t.state.toString(),this.updateRedPoint()},e.prototype.updateRedPoint=function(){var t=this.data;this.btnOk.redPoint.visible=RpSys.ins().getData(JobWin,TouXianPanel,e,t.type)},__decorate([post()],e,"ItemGlobal",null),e}(BaseItemRender);__reflect(TouXianPanelTaskItem.prototype,"TouXianPanelTaskItem"),window.TouXianPanelTaskItem=TouXianPanelTaskItem;var TouXianPanelUpLevelTipsWin=function(t){function e(){var e=t.call(this)||this;return e.init(),e}return __extends(e,t),e.prototype.init=function(){this.skinName="TouXianPanelUpLevelTipsWinEUI",this.addBg(),this.list.itemRenderer=ItemBaseReward},e.prototype.open=function(e){t.prototype.open.call(this),this.list.dataProvider=new eui.ArrayCollection(e)},e}(BaseWin);__reflect(TouXianPanelUpLevelTipsWin.prototype,"TouXianPanelUpLevelTipsWin"),window.TouXianPanelUpLevelTipsWin=TouXianPanelUpLevelTipsWin;var TouXianData=function(){function t(){this.level=1,this.value=0,this.dailyStates=[],this.touXianTaskDatas=[]}return t.prototype.parser=function(t){this.level=t.readShort(),this.value=t.readInt();var e=t.readShort();this.dailyStates.length=0;for(var i=0;e>i;i++)this.dailyStates[i]=t.readByte();var n=t.readByte();this.touXianTaskDatas.length=0;for(var i=0;n>i;i++){var a=new TouXianTaskData;a.parser(t),this.touXianTaskDatas.push(a)}},t.prototype.parserUpdate=function(t){this.level=t.readShort(),this.value=t.readInt();var e=t.readByte(),i=t.readInt(),n=t.readByte(),a=t.readDouble(),o=this.getTaskDataById(e);o&&(o.state=n,o.id=i,o.value=a)},t.prototype.parserUpdateTask=function(t){var e=t.readByte(),i=t.readInt(),n=t.readByte(),a=t.readDouble(),o=this.getTaskDataById(e);o&&(o.state=n,o.id=i,o.value=a)},t.prototype.getTaskDataById=function(t){for(var e,i=0;i<this.touXianTaskDatas.length;i++){var n=this.touXianTaskDatas[i];if(n.type==t){e=n;break}}return e},t.prototype.canReceiveReward=function(){for(var t=0;t<this.dailyStates.length;t++){var e=this.dailyStates[t];if(this.level-1>=t&&0==e)return!0}return!1},t.prototype.canReward=function(t){return 0==this.dailyStates[t-1]&&this.level>=t},t.prototype.isReward=function(t){return 1==this.dailyStates[t-1]&&this.level>=t},t.prototype.isReward1=function(t,e){for(var i=!1,n=t-1;e>n;n++){this.dailyStates[n];if(0==this.dailyStates[n]&&this.level-1>=n){i=!0;break}}return i},Object.defineProperty(t.prototype,"isMax",{get:function(){return this.level>=Cfg.getConfigLength(TouxianConfig)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"isMaxRank",{get:function(){return this.rank>=Cfg.getMaxConfig(TouxianConfig).stage},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"rank",{get:function(){return Cfg.getConfig(TouxianConfig,this.level).stage},enumerable:!0,configurable:!0}),t}();__reflect(TouXianData.prototype,"TouXianData");var TouXianTaskData=function(){function t(){this.id=1,this.type=1,this.state=0,this.value=0}return t.prototype.parser=function(t){this.type=t.readByte(),this.id=t.readInt(),this.state=t.readByte(),this.value=t.readDouble()},Object.defineProperty(t.prototype,"config",{get:function(){return Cfg.getConfig(TouxianTaskConfig,this.id)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"canGetAward",{get:function(){return 1==this.state},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"hasGetAward",{get:function(){return 2==this.state},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"isDoing",{get:function(){return 0==this.state},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"sort",{get:function(){return 2==this.state?0:1==this.state?2:1},enumerable:!0,configurable:!0}),t}();__reflect(TouXianTaskData.prototype,"TouXianTaskData");var ZSEntranceWin=function(t){function e(){return t.call(this)||this}return __extends(e,t),e.openCheck=function(t){return!1},e}(BaseWinSingle);__reflect(ZSEntranceWin.prototype,"ZSEntranceWin"),window.ZSEntranceWin=ZSEntranceWin;var EnhanceCostConfig=function(){function t(){}return t}();__reflect(EnhanceCostConfig.prototype,"EnhanceCostConfig");var ZSPanelOneKeyZSTipsTaksItem=function(t){function e(){var e=t.call(this)||this;return e.skinName="ZSPanelOneKeyZSTipsTaksItemEUI",e.setSkinPart("itemReward",new ItemBaseReward),e.addClickE(e.btnAct,e.onClick),e}return __extends(e,t),e.prototype.onClick=function(t){showTipsWarn("使用转生石可领取当前所有奖励")},e.prototype.dataChanged=function(){var t=this.data,e=t.config;this.itemReward.data=e.rewards[0],this.taskName.text=e.desc;var i=t.value>=e.target;this.lbjd.textFlow=addColorTF("("+t.value+"/"+e.target+")",i?5949490:16712708),t.isAct()?this.currentState="act":this.currentState="noact"},e}(BaseItemRender);__reflect(ZSPanelOneKeyZSTipsTaksItem.prototype,"ZSPanelOneKeyZSTipsTaksItem"),window.ZSPanelOneKeyZSTipsTaksItem=ZSPanelOneKeyZSTipsTaksItem;var ZSPanelOneKeyZSTipsWin=function(t){function e(){var e=t.call(this)||this;return e.init(),e}return __extends(e,t),e.prototype.init=function(){this.skinName="ZSPanelOneKeyZSTipsEUI",this.taskList.itemRenderer=ZSPanelOneKeyZSTipsTaksItem,this.addBg()},e.prototype.open=function(){t.prototype.open.call(this),this.addClickE(this.btnOk,this.onclick),this.addLsn(BagSys.ins().patchItemChange,this.updataItem);var e=JobSys.ins().zsData;this.taskList.dataProvider=new eui.ArrayCollection(e.zsTaskDatas),this.updateConsume()},e.prototype.updateConsume=function(){var t=JobSys.ins().zsData,e=(Cfg.getConfig(ZhuanShengLevelConfig,t.zsId),t.getCurUseItemId()),i=Cfg.getItemCfg(e);this.imgItemIcon.source=ResMgr.getItemIcon(i.getIcon());var n=BagSys.ins().getItemCount(e);this.lbCount.text=n+"/1",this.lbCount.textColor=n>=1?5949490:15733780},e.prototype.updataItem=function(t){t.cfg.type==ItemType.ZsItem&&this.updateConsume()},e.prototype.onclick=function(t){switch(t.target){case this.btnOk:var i=JobSys.ins().zsData;if(i.isSucceedAllTask())showtipsFail("转生任务已全部完成，可直接转生");else{var n=(Cfg.getConfig(ZhuanShengLevelConfig,i.zsId),i.getCurUseItemId()),a=new ItemDataReward;if(a.id=n,a.count=1,GFunc.checkConsumeEnough(a))if(i.zsId<10104){var o="确认使用稀有转生石吗？\n"+addColor("强烈推荐在1重4转时使用！！",5767068),s=new PopupData(o);s.sureStr="使用",s.setFunction(this,function(){JobSys.ins().sendZSOneKey(),closeWin(CommonTipsWin),closeWin(e)}),openWin(CommonTipsWin,s)}else JobSys.ins().sendZSOneKey(),closeWin(e)}}},e}(BaseWin);__reflect(ZSPanelOneKeyZSTipsWin.prototype,"ZSPanelOneKeyZSTipsWin"),window.ZSPanelOneKeyZSTipsWin=ZSPanelOneKeyZSTipsWin;var ZSPanelTaskItem=function(t){function e(){var e=t.call(this)||this;return e.mcbtnAct=new MC,e.skinName="ZSPanelTaskItemEUI",e.btnAct.redPoint.visible=!0,e.setSkinPart("itemReward",new ItemBaseReward),e.mcbtnAct.x=e.btnAct.width/2,e.mcbtnAct.y=e.btnAct.height/2,e.btnAct.addChild(e.mcbtnAct),e.addClickE(e,e.onClick),e}return __extends(e,t),e.prototype.onClick=function(t){var e=this.data;switch(t.target){case this.btnGoto:var i=e.config,n=GFunc.createTaskNavData(i.controlTarget);n.setsucceedFrontFun(function(){closeWin(JobWin)}),n["goto"]();break;case this.btnAct:JobSys.ins().sendZSTask(e.index)}},e.prototype.dataChanged=function(){var t=this.data,e=t.config;this.itemReward.data=e.rewards[0],this.taskName.text=e.desc;var i=t.value>=e.target;this.lbjd.textFlow=addColorTF("("+t.value+"/"+e.target+")",i?5767068:15733780),t.isAct()?(this.currentState="act",this.mcbtnAct.stop(),this.mcbtnAct.visible=!1):t.canAct()?this.currentState="canact":this.currentState="noact",t.canAct()?this.mcbtnAct.playFile(ResMgr.getEffName("public_zycs_button01"),-1):(this.mcbtnAct.stop(),this.mcbtnAct.visible=!1),this.updateRedPoint()},e.prototype.updateRedPoint=function(){this.data;this.redPoint.visible=!1},e.prototype.getbtnAct=function(){return this.btnAct},e.prototype.getbtnGoto=function(){return this.btnGoto},e}(BaseItemRender);__reflect(ZSPanelTaskItem.prototype,"ZSPanelTaskItem"),window.ZSPanelTaskItem=ZSPanelTaskItem;var ZSPanelUpLevelTipsWin=function(t){function e(){var e=t.call(this)||this;return e.mc=new MC,e.init(),e}return __extends(e,t),e.prototype.init=function(){this.skinName="ZSPanelUpLevelTipsEUI",this.setSkinPart("item2",new ItemBaseReward),this.attrs.itemRenderer=ComAttrItem2,this.attrs.dataProvider=this.attrData=new eui.ArrayCollection,this.addBg(),this.mc.playFile(ResMgr.getEffName("zscg"),-1),this.groupMC.addChild(this.mc)},e.prototype.open=function(e,i,n){t.prototype.open.call(this),this.closeFun=n,this.imgJob.source="zycs_zsjob"+Actor.ins().job+"_png",this.bitCurLevel.text=1e4==e?"wzs":GFunc.getZSName1(e),this.bitNextLevel.text=GFunc.getZSName1(i);var a=(JobSys.ins().zsData,Cfg.getConfig(ZhuanShengLevelConfig,i));this.attrData.source=AttrData.getAttrDatas(a.attr,[],!0);var o=Cfg.getConfig(ZhuanShengLevelConfig,i).cslevel,s=o!=Cfg.getConfig(ZhuanShengLevelConfig,e).cslevel?Cfg.getConfig(ChongshengLevelConfig,o):null;if(s){var r=Cfg.getItemCfg(s.additem1.id);this.imgSkillIcon.source=ResMgr.getItemIcon(r.getIcon(),IconType.IT_80x80),this.lbSkillName.text=r.getName(),this.lbSkillName.textColor=GConst.PZColor[r.quality];
var u=GFunc.getItemDataRewardByJob(s.additem2)[0],h=Cfg.getItemCfg(u.id);this.lbItem2Name.text=h.getName(),this.lbItem2Name.textColor=GConst.PZColor[h.quality],this.item2.data=u}else this.groupItem.visible=!1;Timer.ins()["do"](0,1e3,7,this.updateTimer,this),this.amaration()},e.prototype.close=function(){for(var e=[],i=0;i<arguments.length;i++)e[i]=arguments[i];t.prototype.close.call(this),this.closeFun()},e.prototype.amaration=function(){var t=this;this.background.x=-616;var e=egret.Tween.get(this.background);e.to({x:0},200),this.imgJob.x=658;var i=egret.Tween.get(this.imgJob);i.to({x:216},200),this.imgTitle.alpha=0,Timer.ins()["do"](200,1,1,function(){var e=egret.Tween.get(t.imgTitle);e.to({alpha:1},200)},this),this.mc.visible=!1,this.groupZsLevel.alpha=0,Timer.ins()["do"](400,1,1,function(){var e=egret.Tween.get(t.groupZsLevel);e.to({alpha:1},200),t.mc.visible=!0},this),this.attrs.alpha=0,this.attrs.scaleX=8,this.attrs.scaleY=8,Timer.ins()["do"](600,1,1,function(){t.attrs.alpha=1;var e=egret.Tween.get(t.attrs);e.to({scaleX:1,scaleY:1},200)},this),this.groupItem.alpha=0,this.groupItem.scaleX=8,this.groupItem.scaleY=8,Timer.ins()["do"](800,1,1,function(){t.groupItem.alpha=1;var e=egret.Tween.get(t.groupItem);e.to({scaleX:1,scaleY:1},200)},this),this.groupBtn.alpha=0,Timer.ins()["do"](1e3,1,1,function(){var e=egret.Tween.get(t.groupBtn);e.to({alpha:1},200)},this)},e.prototype.updateTimer=function(t){0>=t&&closeWin(this),this.lbTimer.text=t+"秒后自动关闭"},e}(BaseWin);__reflect(ZSPanelUpLevelTipsWin.prototype,"ZSPanelUpLevelTipsWin"),window.ZSPanelUpLevelTipsWin=ZSPanelUpLevelTipsWin;var ZSData=function(){function t(){this.zsId=1e4,this.zsTaskDatas=[]}return t.prototype.iniData=function(){for(var t=4,e=0;t>e;e++){var i=new ZSTaskData;i.index=e,this.zsTaskDatas.push(i)}},t.prototype.parser=function(t){this.zsId=t.readInt();for(var e=t.readByte(),i=Cfg.getConfig(ZhuanShengLevelConfig,this.isMax()?this.zsId-1:this.zsId),n=0;e>n;n++)this.zsTaskDatas[n].taskId=i.taskids[n],this.zsTaskDatas[n].value=t.readInt(),this.zsTaskDatas[n].state=t.readByte()},Object.defineProperty(t.prototype,"config",{get:function(){return Cfg.getConfig(ZhuanShengLevelConfig,this.zsId)},enumerable:!0,configurable:!0}),t.prototype.isMax=function(){return this.zsId>=Cfg.getMaxConfig(ZhuanShengLevelConfig).id},t.prototype.isMaxChong=function(){return this.config.cslevel>=Cfg.getMaxConfig(ChongshengLevelConfig).level},Object.defineProperty(t.prototype,"power",{get:function(){return GFunc.getPower(Cfg.getConfig(ZhuanShengLevelConfig,this.zsId).attr)},enumerable:!0,configurable:!0}),t.prototype.isSucceedAllTask=function(){for(var t=!0,e=0;e<this.zsTaskDatas.length;e++){var i=this.zsTaskDatas[e];if(0==i.state){t=!1;break}}return t},t.prototype.isReceiveAllTask=function(){for(var t=!0,e=0;e<this.zsTaskDatas.length;e++){var i=this.zsTaskDatas[e];if(2!=i.state){t=!1;break}}return t},t.prototype.getCurUseItemId=function(){for(var t=0,e=[],i=Cfg.getConfigs(ChongshengLevelConfig,CondType.MoreEqual,ChongshengLevelConfig.level,this.config.cslevel),n=0;n<i.length;n++){var a=i[n];e.push(a.needitem.id)}var o=BagSys.ins().getItemsById(e);return SortUtil.sortOn(o,["id"],[SortType.up]),t=o.length>0?o[0].id:e[0]},t}();__reflect(ZSData.prototype,"ZSData");var ZSTaskData=function(){function t(){this.index=0,this.taskId=1,this.state=0,this.value=0}return Object.defineProperty(t.prototype,"config",{get:function(){return(null==this._config||this._config.id!=this.taskId)&&(this._config=Cfg.getConfig(ZhuanshengTaskConfig,this.taskId)),this._config},enumerable:!0,configurable:!0}),t.prototype.isAct=function(){return 2==this.state},t.prototype.canAct=function(){return 1==this.state},t}();__reflect(ZSTaskData.prototype,"ZSTaskData");var FbModelKlm=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.refreshTick=0,e.klmInfos=[],e.atkMeList=[],e.belongerMasterHandle=0,e.belongerName="",e.belongerJob=0,e.belongerHp=0,e.belongerHpMax=0,e.oldBelongerMasterHandle=0,e.oldBelongerName="",e.cdTick=0,e.reliveTick=0,e.kunDunValue=0,e.kunDunMax=100,e.myHurt=0,e.curBoss=1,e.rewards=[],e}return __extends(e,t),e.prototype.parser=function(t){var e=t.readShort();this.klmInfos.length=e;for(var i=0;e>i;i++){var n=this.klmInfos[i]=this.klmInfos[i]||new KlmInfo;n.parser(t)}this.kunDunValue=t.readInt(),this.kunDunMax=t.readInt()},e.prototype.parserUpdateHp=function(t){var e=t.readShort(),i=this.klmInfos[e-1]=this.klmInfos[e-1]||new KlmInfo;i.hpPecent=t.readShort()},e.prototype.patchKlmInfo=function(t){this.cdTick=1e3*t.readShort()+Timer.ins().getTimer()},e.prototype.patchFight=function(t){var e=t.readByte(),i=t.readInt(),n=Cfg.getConfigs(KalimaDamageRewardConfig,e);this.rewards.length=0;for(var a=0;a<n.length;a++){var o=n[a],s=new FbModelKlmReward;s.bossId=e,s.index=o.index,this.rewards.push(s)}var r=[];r.length=this.rewards.length,MathUtil.writeIntToArray(i,r,1);for(var a=0;a<r.length;a++)this.rewards[a].setStates(r[a])},e.prototype.parserAtkerList=function(t){var e=t.readUnsignedInt();this.atkMeList.length=0;for(var i=0;e>i;i++){var n=t.readDouble(),a=LogicSys.ins().getEntitysByMasterHandle(n);if(a.length){var o=a[0].handle;this.atkMeList.push(o)}}},e.prototype.parserBelonger=function(t){this.belongerMasterHandle=t.readDouble(),this.oldBelongerMasterHandle=t.readDouble(),this.oldBelongerName=t.readString(),this.belongerName=t.readString(),this.belongerJob=t.readByte(),this.belongerHp=t.readDouble(),this.belongerHpMax=t.readDouble()},e.prototype.resetAtkMeList=function(){this.atkMeList.length=0},e.prototype.resetAll=function(){this.atkMeList.length=0},Object.defineProperty(e.prototype,"leftKunDun",{get:function(){return Math.max(0,this.kunDunTick-Timer.ins().getTimer())},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"leftRefreshTime",{get:function(){return Math.max(0,this.refreshTick-Timer.ins().getTimer())},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"leftCdTime",{get:function(){return Math.max(0,this.cdTick-Timer.ins().getTimer())},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"reliveTime",{get:function(){return Math.max(0,this.reliveTick-Timer.ins().getTimer())},enumerable:!0,configurable:!0}),e.prototype.getBossInfoByBossId=function(t){for(var e=0,i=this.klmInfos;e<i.length;e++){var n=i[e];if(n.id==t)return n}return null},e.prototype.getKlmRemindByIndex=function(t){return this.klmInfos[t].isRemind},e.prototype.isKunDunMax=function(){return this.kunDunValue>=this.kunDunMax},e.prototype.isKunDunOpen=function(){return this.kunDunValue>=this.kunDunMax&&this.leftKunDun<=0},Object.defineProperty(e.prototype,"isShowNpc",{get:function(){return this.kunDunIsShow},enumerable:!0,configurable:!0}),e.prototype.getkundunJinDu=function(){return this.kunDunValue/this.kunDunMax*100},e.prototype.getCurRewarData=function(){for(var t=this.rewards.length,e=this.rewards[t-1]||new FbModelKlmReward,i=0;t>i;i++){var n=this.rewards[i];if(0==n.state){e=n;break}}return e},e}(FbModelBase);__reflect(FbModelKlm.prototype,"FbModelKlm");var FbModelKlmReward=function(){function t(){this.bossId=1,this.index=1,this.state=0,this.hurt=0}return t.prototype.setStates=function(t){this.state=t},t.prototype.canGet=function(){var t=this.hurt>=this.config.damage;return t},Object.defineProperty(t.prototype,"config",{get:function(){return this._config||(this._config=Cfg.getConfig(KalimaDamageRewardConfig,this.bossId,this.index))},enumerable:!0,configurable:!0}),t}();__reflect(FbModelKlmReward.prototype,"FbModelKlmReward");var KlmInfo=function(){function t(){}return t.prototype.parser=function(t){this.id=t.readInt(),this.monsterName=t.readString(),this.monsterHead=t.readString(),this.monsterModel=t.readShort(),this.hpPecent=t.readShort(),this.fighterCount=t.readShort(),this.reliveTick=1e3*t.readInt()+Timer.ins().getTimer(),this.isFighting=t.readBoolean(),this.isRemind=t.readBoolean(),this.belongName=t.readString()},Object.defineProperty(t.prototype,"isDie",{get:function(){return 0==this.hpPecent},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"isDieNumber",{get:function(){return 0==this.hpPecent?-1:1},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"config",{get:function(){return this._config=this._config||Cfg.getConfig(KalimaFubenConfig,this.id)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"isopen",{get:function(){return Actor.ins().zsId>=this.config.zslevel},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"isopenNumber",{get:function(){return Actor.ins().zsId>=this.config.zslevel?1:-1},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"getLv",{get:function(){return this.config.zslevel},enumerable:!0,configurable:!0}),t}();__reflect(KlmInfo.prototype,"KlmInfo");var KlmFbPanel=function(t){function e(){var e=t.call(this)||this;return e.mcBtnOk=new MC,e.initUI(),e}return __extends(e,t),e.prototype.initUI=function(){this.skinName="ZhuZaiFbPanelEUI",this.list.itemRenderer=ItemBaseRewardEvent,this.groupShouYi.visible=!1},e.prototype.open=function(){t.prototype.open.call(this),this.addClickE(this.lbOk,this.onClick),this.addLsn(FbSys.ins().patchKlmReward,this.updateData),this.addLsn(FbSys.ins().patchKlmMyHurt,this.updateHurt),this.addItemTapE(this.list,this.onMenuClick),this.updateData()},e.prototype.updateData=function(){var t=FbSys.ins().klmModel.getCurRewarData(),e=t.config;this.list.dataProvider=new eui.ArrayCollection(e.rewards),this.updateHurt()},e.prototype.updateHurt=function(){var t=FbSys.ins().klmModel,e=FbSys.ins().klmModel.getCurRewarData();this.lbDesc.textFlow=addColorTF(Lang.fb_str372+"·"+e.index);var i=e.config;t.curBoss;this.lbHurt.textFlow=addColorTF(Lang.fb_str373.replace("$damge$",GFunc.overLength(i.damage,2))),1==e.state?this.currentState="get":this.currentState=t.myHurt>=i.damage?"canget":"noget"},e.prototype.onMenuClick=function(t){var e=FbSys.ins().klmModel,i=FbSys.ins().klmModel.getCurRewarData(),n=t.itemRenderer,a=n.data;0==i.state&&e.myHurt>=i.config.damage?(FbSys.ins().sendKlmReward(i.bossId,i.index),t.stopImmediatePropagation()):GFunc.openItemTips(a)},e.prototype.onClick=function(t){switch(t.target){case this.lbOk:var e=FbSys.ins().klmModel.getCurRewarData();FbSys.ins().sendKlmReward(e.bossId,e.index)}},e}(BasePanel);__reflect(KlmFbPanel.prototype,"KlmFbPanel"),window.KlmFbPanel=KlmFbPanel;var KlmFbPanelFace2=function(t){function e(){var e=t.call(this)||this;return e.skinName="BossHomeFbPanelFace2Skin",e}return __extends(e,t),e.prototype.dataChanged=function(){var t=this.data;if(t){var e=LogicSys.ins().getEntityByHandle(t);if(e){if(e instanceof EntityRole)this.imgFace.source=ResMgr.getHeadIcon(e.getJob()),this.imgFace.visible=!0,this.imgBoss.visible=!1;else if(e instanceof EntityMonster){this.imgFace.visible=!1,this.imgBoss.visible=!0;var i=Cfg.getMonstersConfigNew(e.getCfgId()).head;this.imgBoss.source=ResMgr.getMonsterHead(i)}this.labelName.text=e.getName()}}},e.prototype.update=function(){this.dataChanged()},e.prototype.$setVisible=function(e){return t.prototype.$setVisible.call(this,e),e?this.playMovie():this.stopMovie(),e},e.prototype.playMovie=function(){this.fightingMc||(this.fightingMc=new MC,this.fightingMc.x=72,this.fightingMc.y=30,this.addChild(this.fightingMc)),this.fightingMc.playFile(getEffName("fighting"),-1)},e.prototype.stopMovie=function(){this.fightingMc&&(this.fightingMc.stop(),this.fightingMc.visible=!1)},e}(BaseItemRender);__reflect(KlmFbPanelFace2.prototype,"KlmFbPanelFace2");var KlmBarEff=function(t){function e(){var e=t.call(this)||this;return e.skinName="KlmBarEffEUI",e.mc=new MC,e.mc.x=58,e.mc.y=46,e.mc.touchEnabled=!1,e.groupMc1.addChild(e.mc),e.mc.playFile(getEffName("bloodball0"),-1),e.mcmax=new MC,e.mcmax.x=58,e.mcmax.y=65,e.mcmax.touchEnabled=!1,e.addChild(e.mcmax),e.dimc=new MC,e.dimc.x=58,e.dimc.y=95,e.dimc.touchEnabled=!1,e.groupShuiPing.addChild(e.dimc),e.hpShape=DisUtil.drawCirByAngle(e.hpShape,26,170,0,!0),e.hpShape.x=58,e.hpShape.y=65,e.groupShuiPing.addChild(e.hpShape),e.dimc.touchEnabled=!1,e.dimc.mask=e.hpShape,e.hpShape=DisUtil.drawCirByAngle(e.hpShape,40,0,360,!0),e.touchChildren=!1,e.touchEnabled=!1,e.groupShuiPing.touchEnabled=!1,e.groupShuiPing.touchChildren=!1,e.groupMc1.touchEnabled=!1,e.groupMc1.touchChildren=!1,e}return __extends(e,t),e.prototype.setData=function(t,e){this.lbValue.text=t+"/"+e;var i=FbSys.ins().klmModel.isKunDunOpen(),n=t/e*100*.83;n=n>=83?83:n,this.groupMc.height=n,this.dimc.y=18+(83-n),i?this.mcmax.playFile(getEffName("kundunfire"),-1):(this.mcmax.visible=!1,this.mcmax.stop()),t==e?(this.dimc.visible=!1,this.dimc.stop()):this.dimc.playFile(getEffName("bloodball1"),-1),this.validateNow()},e}(BaseItemRender);__reflect(KlmBarEff.prototype,"KlmBarEff"),window.KlmBarEff=KlmBarEff;var EnumConfig=function(){function t(){}return t}();__reflect(EnumConfig.prototype,"EnumConfig");var KlmKunDunShowWin=function(t){function e(){var e=t.call(this)||this;return e.winType=WinType.OverlayWin,e}return __extends(e,t),e.panelNames=[KlmKunDunShowPanel],e}(BaseWinAutoTab);__reflect(KlmKunDunShowWin.prototype,"KlmKunDunShowWin"),window.KlmKunDunShowWin=KlmKunDunShowWin;var EquipConstConfig=function(){function t(){}return t}();__reflect(EquipConstConfig.prototype,"EquipConstConfig");var KlmPanelItem=function(t){function e(){var e=t.call(this)||this;return e.skinName="KlmPanelItemEUI",e}return __extends(e,t),e.prototype.dataChanged=function(){if(this.data){var t=this.data;this.nameTxt.text=""+t.monsterName,this.updateTime()}},e.prototype.updateTime=function(){var t=this.data,e=t.reliveTick-Timer.ins().getEgretTimer();e>0&&t.isDie?(this.timeTxt.text=Lang.fb_str101.replace("$time$",""+getFormatTime(Math.floor(e/1e3),"hh:mm:ss")),this.timeTxt.textColor=15733780):this.updateStatus(),this.updateRedPoint()},e.prototype.updateRedPoint=function(){var t=this.data;t&&(this.redPoint.visible=RpSys.ins().getData(BossWin,ZhuZaiMainPanel,KlmPanel,t.id))},e.prototype.updateStatus=function(){var t=this.data;this.timeTxt.text="",t.isopen?t.isDie||(this.timeTxt.text=Lang.common_str56,this.timeTxt.textColor=5949490):(this.timeTxt.text=""+GFunc.getZSNameBydb(t.config.zslevel),this.timeTxt.textColor=15733780)},e}(BaseItemRender);__reflect(KlmPanelItem.prototype,"KlmPanelItem");var KlmRemindItem=function(t){function e(){var e=t.call(this)||this;return e.skinName="KlmRemindItemEUI",e.checkBoxs.name="checkBoxs",e}return __extends(e,t),e.prototype.dataChanged=function(){var t=this.data;this.checkBoxs.visible=t.isopen,this.checkBoxs.selected=t.isRemind,this.txt.visible=!t.isopen,this.bossName.text=t.monsterName,this.levelShow.textFlow=StrUtil.toTF(GFunc.getZSNameBydb(t.config.zslevel))},e}(BaseItemRender);__reflect(KlmRemindItem.prototype,"KlmRemindItem");var KlmRemindWin=function(t){function e(){return t.call(this)||this}return __extends(e,t),e.prototype.initUI=function(){t.prototype.initUI.call(this),this.layer=LayerMgr.Popup,this.skinName="KlmRemindWinEUI",this.addBg(),this.list0.itemRenderer=KlmRemindItem,this.list0.dataProvider=this.listDatas=new eui.ArrayCollection},e.prototype.open=function(){t.prototype.open.call(this),this.list0.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onListItemTap,this);var e=FbSys.ins().klmModel.klmInfos.concat();SortUtil.sortOn(e,["id"],[SortType.up]),this.listDatas.source=e},e.prototype.onListItemTap=function(t){if("checkBoxs"==t.target.name){var e=t.target.parent.data,i=t.target;e.isRemind=i.selected,FbSys.ins().sendKlmRemind(e.id,e.isRemind)}},e}(BaseWinSingle);__reflect(KlmRemindWin.prototype,"KlmRemindWin"),window.KlmRemindWin=KlmRemindWin;var ResultWinKlm=function(t){function e(){var e=t.call(this)||this;return e.resultData=new FbResultKlmData,e}return __extends(e,t),e.prototype.initUI=function(){this.layer=LayerMgr.Popup,this.skinName="ResultKlmBossSkin",this.addBg(),this.listData=new eui.ArrayCollection,this.clickClose=!1},e.prototype.open=function(e){t.prototype.open.call(this),this.resultData=e,this.addClickE(this.closeBtn,this.onTap),this.list.itemRenderer=ItemBaseReward,this.list.dataProvider=this.listData,this.currentState=this.resultData.isWin?"win":"lost",this.iniData()},e.prototype.iniData=function(){Timer.ins()["do"](0,1e3,5,this.updateLabel,this),this.lbfisrtName.text=this.resultData.fisrtName,this.lbRank.text=this.resultData.rank.toString(),this.imgjl.source=1==this.resultData.rank?"fb_zycs_bsj":"fb_zycs_cyj",SortUtil.sortOn(this.resultData.rewardItem,["quality"],[SortType.down]),this.listData.source=this.resultData.rewardItem},e.prototype.close=function(){t.prototype.close.call(this),Timer.ins().removeAll(this)},e.prototype.escFubBen=function(){Timer.ins().remove(this.updateLabel,this),this.closeFunc&&(this.closeFunc(),this.closeFunc=null)},e.prototype.updateLabel=function(t){0>=t&&this.onCloseBtn(),this.closeBtn.label=Lang.common_str47.replace("$second$",t.toString())},e.prototype.onTap=function(t){switch(t.currentTarget){case this.closeBtn:this.onCloseBtn();break;case this.closeBtn0:FbSys.ins().sendExitFb(),closeWin(this);break;case this.closeBtn:closeWin(this)}},e.prototype.onCloseBtn=function(){FbSys.ins().sendExitFb(),this.escFubBen(),closeWin(this)},e}(BaseWinSingle);__reflect(ResultWinKlm.prototype,"ResultWinKlm");var ResultWinKlmKunDun=function(t){function e(){var e=t.call(this)||this;return e.isWin=!0,e.resultData=new FbResultKlmKunDunData,e}return __extends(e,t),e.prototype.initUI=function(){this.layer=LayerMgr.Popup,this.skinName="ResultKlmSkin",this.setSkinPart("resultCreateRole",new ResultCreateRole),this.listData=new eui.ArrayCollection,this.listLastData=new eui.ArrayCollection,this.clickClose=!1,this.addBg()},e.prototype.open=function(e,i){var n=this;void 0===i&&(i=!1),t.prototype.open.call(this),this.resultData=e,this.isWin=i,this.addClickE(this.closeBtn,this.onTap),this.currentState=this.isWin?"win":"lost",this.list.itemRenderer=ItemBaseReward,this.list.dataProvider=this.listData,this.listLast.itemRenderer=ItemBaseReward,this.listLast.dataProvider=this.listLastData,this.iniData(),this.resultCreateRole.open(!1,function(){closeWin(n)},this)},e.prototype.iniData=function(){Timer.ins()["do"](0,1e3,this.isWin?5:15,this.updateLabel,this),this.lbhh.text=this.resultData.hurt.toString(),this.lbpm.text=this.resultData.hurtRank.toString(),this.lblastName.text=this.resultData.lastName,SortUtil.sortOn(this.resultData.rewardItem,["quality"],[SortType.down]),this.listData.source=this.resultData.rewardItem,this.listLastData.source=this.resultData.lastRewardItem,this.groupZhyj.visible=this.resultData.lastRewardItem.length>0,this.imgwptitle7.visible=this.resultData.lastRewardItem.length>0,this.validateNow()},e.prototype.close=function(){t.prototype.close.call(this),Timer.ins().removeAll(this)},e.prototype.escFubBen=function(){Timer.ins().remove(this.updateLabel,this),this.closeFunc&&(this.closeFunc(),this.closeFunc=null)},e.prototype.updateLabel=function(t){0>=t&&this.onCloseBtn(),this.closeBtn.label=Lang.common_str47.replace("$second$",t.toString())},e.prototype.onTap=function(t){switch(t.currentTarget){case this.closeBtn:this.onCloseBtn();break;case this.closeBtn0:FbSys.ins().sendExitFb(),closeWin(this);break;case this.closeBtn:closeWin(this)}},e.prototype.onCloseBtn=function(){FbSys.ins().sendExitFb(),this.escFubBen(),closeWin(this)},e}(BaseWinSingle);__reflect(ResultWinKlmKunDun.prototype,"ResultWinKlmKunDun");var MailData=function(){function t(){}return t.prototype.parser=function(t){this.disposeData(t),this.item=[],this.text=t.readString();for(var e=t.readInt(),i=0;e>i;i++){var n=new ItemDataReward;n.parser(t),this.item.push(n)}},t.prototype.disposeData=function(t){this.handle=t.readInt(),this.title=t.readString(),this.times=t.readInt(),this.type=t.readInt(),this.receive=t.readInt()},t}();__reflect(MailData.prototype,"MailData");var MailSys=function(t){function e(){var e=t.call(this)||this;return e.currentMailHandle=0,e.mailData=[],e.sysId=PackId.Mail,e.reg(1,e.doMailData),e.reg(2,e.doMailDetailedData),e.reg(3,e.doDeleteMail),e.reg(4,e.doGetItemMail),e.reg(5,e.doAddMail),e}return __extends(e,t),e.ins=function(){return t.getIns.call(this,e)},e.prototype.sendMailContentData=function(t){var e=this.getBytes(2);e.writeInt(t),this.send(e)},e.prototype.sendGetItem=function(t){var e=this.getBytes(4);e.writeInt(t.length);for(var i=0;i<t.length;i++)e.writeInt(t[i]);this.send(e)},e.prototype.doMailData=function(t){this.parser(t,1),this.patchMailData(),RpFun.showMailSRedPoint(PCode.UPD)},e.prototype.patchMailData=function(){},e.prototype.doMailDetailedData=function(t){var e=new MailData;e.parser(t);for(var i=0;i<this.mailData.length;i++)if(this.mailData[i].handle==e.handle){this.mailData.splice(i,1,e);break}this.currentMailHandle=e.handle,openWin(MailDetailWin),this.patchMailDetail(e),RpFun.showMailSRedPoint(PCode.DEL)},e.prototype.patchMailDetail=function(t){return t},e.prototype.doDeleteMail=function(t){this.deleteMailDataByHandle(t.readInt()),this.patchMailData(),RpFun.showMailSRedPoint(PCode.DEL)},e.prototype.doGetItemMail=function(t){this.setMailListData(t),RpFun.showMailSRedPoint(PCode.UPD)},e.prototype.patchGetItemFromMail=function(){},e.prototype.doAddMail=function(t){this.parser(t,0),this.patchMailData(),RpFun.showMailSRedPoint(PCode.ADD)},e.prototype.parser=function(t,e){if(e){this.mailData=[];for(var i=t.readInt(),n=0;i>n;n++){var a=new MailData;a.disposeData(t),this.mailData.push(a)}this.mailSort(1)}else{var a=new MailData;a.disposeData(t),this.mailData.unshift(a)}},e.prototype.getMailDataByHandle=function(t){for(var e=0,i=this.mailData;e<i.length;e++){var n=i[e];if(n.handle==t)return n}return null},e.prototype.deleteMailDataByHandle=function(t){for(var e=0;e<this.mailData.length;e++)if(this.mailData[e].handle==t)return void this.mailData.splice(e,1)},e.prototype.getMailByReceive=function(t){void 0===t&&(t=0);for(var e=[],i=this.mailData.length-1;i>=0;i--)this.mailData[i].receive==t&&e.push(this.mailData[i]);return e},e.prototype.getMailByReceive2=function(){for(var t=[],e=this.mailData.length-1;e>=0;e--)(0==this.mailData[e].receive||0==this.mailData[e].type)&&t.push(this.mailData[e]);return t},e.prototype.getUnreadMail=function(){for(var t=0,e=this.mailData.length-1;e>=0;e--){var i=this.mailData[e];(0==i.type||0==i.receive)&&(t+=1)}return t},e.prototype.getCurrentMail=function(){return this.getMailDataByHandle(this.currentMailHandle)},e.prototype.setMailListData=function(t){for(var e=t.readInt(),i=0;e>i;i++)for(var n=t.readInt(),a=0,o=this.mailData;a<o.length;a++){var s=o[a];if(s.handle==n){s.type=t.readInt(),s.receive=t.readInt(),this.patchMailDetail(s);break}}this.patchGetItemFromMail()},e.prototype.sortDesc=function(t,e){var i=t.times,n=e.times;return SortUtil.sortDesc(i,n)},e.prototype.sortAsc=function(t,e){var i=t.times,n=e.times;return SortUtil.sortAsc(i,n)},e.prototype.mailSort=function(t){var e=this.mailData;return t?e.sort(this.sortDesc):e.sort(this.sortAsc),e},e.prototype.hasMailCanGet=function(){for(var t=!1,e=0;e<this.mailData.length;e++){var i=this.mailData[e];if(0==i.type||0==i.receive){t=!0;break}}return t},e}(BaseSys);__reflect(MailSys.prototype,"MailSys");var System;!function(t){t.mailSys=MailSys.ins.bind(MailSys)}(System||(System={})),window.MailSys=MailSys;var MailDetailWin=function(t){function e(){return t.call(this)||this}return __extends(e,t),e.prototype.initUI=function(){t.prototype.initUI.call(this),this.layer=LayerMgr.Popup,this.skinName="MailContentEUI",this.addBg(),this.list.itemRenderer=ItemBaseReward,this.list.dataProvider=this.listData=new eui.ArrayCollection,this.pagePanel=new PageTurnPanel,this.pagePanel.setListItemRenderer(MailEnclosureItem,425,106),this.pagePanel.x=65,this.pagePanel.y=332},e.prototype.open=function(){t.prototype.open.call(this),this.addClickE(this.receiveBtn,this.onTap),this.addLsn(MailSys.ins().patchGetItemFromMail,this.setMailData),this.pagePanel.open(),this.setMailData()},e.prototype.close=function(){t.prototype.close.call(this),this.pagePanel.close()},e.prototype.onTap=function(t){switch(t.currentTarget){case this.receiveBtn:var e=[];e.push(MailSys.ins().currentMailHandle),MailSys.ins().sendGetItem(e)}},e.prototype.otherClose=function(t){},e.prototype.setMailData=function(){var t=MailSys.ins().getCurrentMail();this.textLabel.textFlow=StrUtil.toTF(t.text),this.setReceiveBtn(t.receive,t.item.length>0);for(var e=[],i=0;i<t.item.length;i++)i%4==0&&(e[Math.floor(i/4)]=[]),e[Math.floor(i/4)].push(GFunc.creatUnknown(t.item[i].id,t.item[i].count));this.pagePanel.setListData(e),this.listData.source=t.item;var n=t.item.length>5?5:t.item.length;this.list.width=94*n+27*(n-1)},e.prototype.setReceiveBtn=function(t,e){void 0===e&&(e=!1);var i="";this.receiveBtn.visible=t>=0,i=t?Lang.common_str58:Lang.mail_str1,this.receiveBtn.label=i,this.receiveBtn.enabled=!Boolean(t),this.receiveBtn.visible=e,this.desc.visible=!e},e}(BaseWinSingle);__reflect(MailDetailWin.prototype,"MailDetailWin"),window.MailDetailWin=MailDetailWin;var MailEnclosureItem=function(t){function e(){var e=t.call(this)||this,i=new eui.HorizontalLayout;return i.gap=15,e.list=new eui.List,e.list.layout=i,e.list.itemRenderer=ItemBase,e.addChild(e.list),e.width=405,e}return __extends(e,t),e.prototype.dataChanged=function(){this.list.dataProvider=new eui.ArrayCollection(this.data)},e}(BaseItemRender);__reflect(MailEnclosureItem.prototype,"MailEnclosureItem"),window.MailEnclosureItem=MailEnclosureItem;var MailItem=function(t){function e(){var e=t.call(this)||this;return e.skinName="MailItemEUI",e}return __extends(e,t),e.prototype.dataChanged=function(){var t=this.data;if(t instanceof MailData){var e=StrUtil.addColor(t.title,16751375);e+=t.type&&0==t.receive?StrUtil.addColor(Lang.common_str77,5949490):StrUtil.addColor(t.type?Lang.common_str78:Lang.common_str79,t.type?5987163:5949490),this.nameLabel.textFlow=addColorTF(e),this.dateLabel.text=DateUtil.formatDayTime(1e3*t.times,"yy-mo-dd hh:mm"),this.treasure.visible=0==t.receive,this.mailIcon=t.type?"yj_zycs_open":"yj_zycs_close"}},e}(BaseItemRender);__reflect(MailItem.prototype,"MailItem"),window.MailItem=MailItem;var FenJieConfig=function(){function t(){}return t.viewType2="viewType2",t}();__reflect(FenJieConfig.prototype,"FenJieConfig");var MailWin=function(t){function e(){var e=t.call(this)||this;return e.winType=WinType.MainWin,e}return __extends(e,t),e.panelNames=[MailPanel],e}(BaseWinAutoTab);__reflect(MailWin.prototype,"MailWin"),window.MailWin=MailWin;var MonsterSiegeSys=function(t){function e(){var e=t.call(this)||this;return e.isOpen=0,e.isDouble=0,e.count=0,e.huifuTick=0,e.scoreRewardDatas=[],e.scoreRankDatas=[],e.curId=1,e.myRank=1,e.dabiaoRewards=[],e.logDatas=[],e.damageData=new FBDamageData,e.sysId=PackId.MonsterSiege,e.reg(1,e.patchInfo),e.reg(2,e.patchScoreRankData),e.reg(3,e.patchCityMonster),e.reg(4,e.patchSingleMonsterData),e.reg(5,e.patchFbDataUpdate),e.reg(6,e.patchReceiveDaBiaoReward),e.reg(7,e.patchReceiveScoreReward),e.reg(8,e.patchOffNo),e.reg(9,e.patchEnterFb),e.reg(10,e.patchResult),e.reg(11,e.patchUpdateCount),e.reg(12,e.patchCityMonsterUpdate),e.iniData(),e}return __extends(e,t),e.ins=function(){return t.getIns.call(this,e)},e.prototype.iniData=function(){var t=Cfg.getConfigs(MSScoreConfig);this.scoreRewardDatas.length=0;for(var e=0;e<t.length;e++){var i=t[e],n=new MonsterSiegeScoreRewardData;n.id=i.id,this.scoreRewardDatas.push(n)}},e.prototype.sendInfo=function(){var t=this.getBytes(1);this.send(t)},e.prototype.patchInfo=function(t){this.isOpen=t.readByte(),this.isDouble=t.readByte(),this.count=t.readByte();var e=t.readInt();this.huifuTick=1e3*e+Timer.ins().getEgretTimer();var i=t.readInt(),n=[];n.length=this.scoreRewardDatas.length+1,MathUtil.writeIntToArray(i,n,1),this.setRewardState(n);var a=t.readByte();this.logDatas.length=0;for(var o=0;a>o;o++){var s=new MonsterSiegeSingleLogData;s.patchData(t),this.logDatas.push(s)}RpFun.showMonsterSiegeRp()},e.prototype.setRewardState=function(t){for(var e=Cfg.getConfigs(MSScoreConfig),i=0,n=e;i<n.length;i++){var a=n[i],o=a.id-1;this.scoreRewardDatas[o].state=t[o]}},e.prototype.sendScoreRankData=function(){var t=this.getBytes(2);this.send(t)},e.prototype.patchScoreRankData=function(t){for(var e=t.readShort(),i=Cfg.getConfigs(MSRankConfig),n=i.length,a=0;a<i.length;a++){var o=new MonsterSiegeScoreRankData;o.rank=a+1,this.scoreRankDatas[a]=o}for(var a=0;e>a;a++){var o=new MonsterSiegeScoreRankData;o.rank=a+1,o.name=t.readString(),o.score=t.readInt(),o.rank<=n&&(this.scoreRankDatas[a]=o)}this.myRank=t.readShort();var s=t.readByte(),r=t.readByte(),u=t.readInt(),h=t.readInt(),l=(t.readInt(),t.readInt()),p=t.readInt(),c=t.readInt();if(s>0){this.rankTop1Appearance||(this.rankTop1Appearance=new EntityRoleData);var o=this.rankTop1Appearance;o.szId=u,o.sqId=h,o.shengLingId=l,o.meilinId=p,o.job=s,o.sex=r,o.damonId=c}},e.prototype.patchCityMonster=function(t){for(var e=t.readByte(),i=0;e>i;i++){var n=new EntityMonsterSiegeData;n.parser(t),LogicSys.ins().creatSiege(n)}RpFun.showMonsterSiegeRp()},e.prototype.sendSingleMonsterData=function(t){if(GFunc.isKuaFu()){var e=this.getBytes(4);e.writeByte(t),this.send(e)}},e.prototype.patchSingleMonsterData=function(t){this.curMonsterSiegeSingleData=new MonsterSiegeSingleData,this.curMonsterSiegeSingleData.iniData(),this.curMonsterSiegeSingleData.patchData(t),openWin(MonsterSiegeInfoTipsWin,this.curMonsterSiegeSingleData)},e.prototype.patchFbDataUpdate=function(t){this.damageData=new FBDamageData,this.damageData.parser(t),FbSys.ins().updateDamage(this.damageData)},Object.defineProperty(e.prototype,"curHurt",{get:function(){for(var t=0;t<this.damageData.playerList.length;t++)if(this.damageData.playerList[t].id==Actor.ins().actorID)return this.damageData.playerList[t].damage;return 0},enumerable:!0,configurable:!0}),e.prototype.sendReceiveDaBiaoReward=function(t){var e=this.getBytes(6);e.writeByte(t),this.send(e)},e.prototype.patchReceiveDaBiaoReward=function(t){var e=t.readInt(),i=[];i.length=this.dabiaoRewards.length,MathUtil.writeIntToArray(e,i,1);for(var n=0;n<i.length;n++)this.dabiaoRewards[n].setStates(i[n])},e.prototype.sendReceiveScoreReward=function(t){var e=this.getBytes(7);e.writeByte(t),this.send(e)},e.prototype.patchReceiveScoreReward=function(t){var e=t.readInt(),i=[];i.length=this.scoreRewardDatas.length,MathUtil.writeIntToArray(e,i,1),this.setRewardState(i),RpFun.showMonsterSiegeRp()},e.prototype.patchOffNo=function(t){this.isOpen=t.readByte();var e=LogicSys.ins();if(!this.isOpen)for(var i=e.getEntitysByType(EntityType.SIEGE),n=0;n<i.length;n++)e.removeEntityByHandle(i[n].handle);RpFun.showMonsterSiegeRp()},e.prototype.sendEnterFb=function(t){var e=this.getBytes(9);e.writeByte(t),this.send(e)},e.prototype.patchEnterFb=function(t){this.curId=t.readByte();var e=t.readInt(),i=Cfg.getConfigs(MSDabiaoConfig,Cfg.getConfig(MSMonsterConfig,this.curId).monsterid);this.dabiaoRewards.length=i.length;for(var n=0;n<i.length;n++){var a=i[n],o=new MonsterSiegeDaBiaoRewardData;o.index=a.index,o.monsterId=a.monsterId,this.dabiaoRewards[n]=o}var s=[];s.length=this.dabiaoRewards.length,MathUtil.writeIntToArray(e,s,1);for(var n=0;n<s.length;n++)this.dabiaoRewards[n].setStates(s[n])},e.prototype.patchResult=function(t){var e=new FbResultSiegeData;e.parser(t),openWin(MonsterSiegeResultWin,e)},e.prototype.patchUpdateCount=function(t){this.count=t.readByte();var e=t.readInt();this.huifuTick=1e3*e+Timer.ins().getEgretTimer()},e.prototype.patchCityMonsterUpdate=function(t){var e=new EntityMonsterSiegeData;e.parser(t);for(var i=LogicSys.ins().getEntitysByType(EntityType.SIEGE),n=0;n<i.length;n++){var a=i[n];if(a.getCfgId()==e.id){var o=a.isDead();a.setData(e),e.isDie()?a.AI.startDie():o&&e.isLive()&&a.AI.startAlive();break}}RpFun.showMonsterSiegeRp()},e.prototype.gethuiFuTimer=function(){return Math.max(0,(this.huifuTick-Timer.ins().getEgretTimer())/1e3)},e.prototype.getCurDaBiaoRewarData=function(){for(var t=this.dabiaoRewards.length,e=this.dabiaoRewards[t-1],i=0;t>i;i++){var n=this.dabiaoRewards[i];if(0==n.state){e=n;break}}return e},e.prototype.getDefaultScoreRewardData=function(){for(var t=0;t<this.scoreRewardDatas.length;t++){var e=this.scoreRewardDatas[t];
if(0==e.state)return e}return this.scoreRewardDatas[0]},e}(BaseSys);__reflect(MonsterSiegeSys.prototype,"MonsterSiegeSys");var System;!function(t){t.monsterSiegeSys=MonsterSiegeSys.ins.bind(MonsterSiegeSys)}(System||(System={})),window.MonsterSiegeSys=MonsterSiegeSys;var MonsterSiegeDaBiaoRewardData=function(){function t(){this.monsterId=1,this.index=1,this.state=0}return t.prototype.setStates=function(t){this.state=t},t.prototype.canGet=function(){var t=MonsterSiegeSys.ins().curHurt>=this.config.hurt&&0==this.state;return t},Object.defineProperty(t.prototype,"config",{get:function(){return this._config||(this._config=Cfg.getConfig(MSDabiaoConfig,this.monsterId,this.index))},enumerable:!0,configurable:!0}),t}();__reflect(MonsterSiegeDaBiaoRewardData.prototype,"MonsterSiegeDaBiaoRewardData"),window.MonsterSiegeSingleRankData=MonsterSiegeSingleRankData;var MonsterSiegeScoreRankData=function(){function t(){this.rank=1,this.name="",this.score=0}return Object.defineProperty(t.prototype,"config",{get:function(){return this._config||(this._config=Cfg.getConfig(MSRankConfig,this.rank))},enumerable:!0,configurable:!0}),t}();__reflect(MonsterSiegeScoreRankData.prototype,"MonsterSiegeScoreRankData"),window.MonsterSiegeScoreRankData=MonsterSiegeScoreRankData;var MonsterSiegeScoreRewardData=function(){function t(){this.id=1,this.state=0}return Object.defineProperty(t.prototype,"config",{get:function(){return this._config||(this._config=Cfg.getConfig(MSScoreConfig,this.id))},enumerable:!0,configurable:!0}),t.prototype.canGet=function(){return 0==this.state&&GFunc.getItemCount(CurType.gongchengJifen)>=this.config.score},t}();__reflect(MonsterSiegeScoreRewardData.prototype,"MonsterSiegeScoreRewardData"),window.MonsterSiegeScoreRewardData=MonsterSiegeScoreRewardData;var FenJieViewConfig=function(){function t(){}return t}();__reflect(FenJieViewConfig.prototype,"FenJieViewConfig");var MonsterSiegeSingleLogData=function(){function t(){this.id=1,this.tick=0,this.hurt=0}return t.prototype.patchData=function(t){this.id=t.readByte();var e=t.readInt();this.hurt=t.readDouble(),this.tick=DateUtil.formatMiniDateTime(e)},t.prototype.gethuiFuTimer=function(){return Math.min(0,(this.tick-Timer.ins().getEgretTimer())/1e3)},Object.defineProperty(t.prototype,"config",{get:function(){return this._config||(this._config=Cfg.getConfig(MSMonsterConfig,this.id))},enumerable:!0,configurable:!0}),t}();__reflect(MonsterSiegeSingleLogData.prototype,"MonsterSiegeSingleLogData"),window.MonsterSiegeSingleData=MonsterSiegeSingleData;var FirstRechargeConfig=function(){function t(){this.day=0}return t}();__reflect(FirstRechargeConfig.prototype,"FirstRechargeConfig");var MonsterSiegeBox=function(t){function e(){var e=t.call(this)||this;return e.mc=new MC,e.skinName="MonsterSiegeBoxEUI",e.group.addChild(e.mc),e}return __extends(e,t),e.prototype.dataChanged=function(){var t=this.data;this.lbScore.text=t.config.score+"积分",this.updateRedPoint()},e.prototype.updateRedPoint=function(){var t=this.data,i=RpSys.ins().getData(BossWin,ZhuZaiMainPanel,MonsterSiegeMainPanel,e,t.id);this.redPoint.visible=i,1==t.state?this.currentState="ylq":this.currentState="wlq",i?this.mc.playFile(getEffName("mwwc_box"),-1):(this.mc.stop(),this.mc.visible=!1)},e}(BaseItemRender);__reflect(MonsterSiegeBox.prototype,"MonsterSiegeBox"),window.MonsterSiegeBox=MonsterSiegeBox;var MonsterSiegeBoxTipsWin=function(t){function e(){var e=t.call(this)||this;return e.skinName="MonsterSiegeBoxTipsWinEUI",e.itemList.itemRenderer=ItemBaseReward,e.addBg(),e}return __extends(e,t),e.prototype.open=function(e){t.prototype.open.call(this),this.addClickE(this,this.onclick),this.addLsn(MonsterSiegeSys.ins().patchReceiveScoreReward,this.iniPanel),this.msdata=e,this.iniPanel()},e.prototype.close=function(){t.prototype.close.call(this)},e.prototype.iniPanel=function(){this.lbDaBiaoDesc.textFlow=addColorTF("达到"+addColor(this.msdata.config.score,5767068)+"积分可领取以下奖励"),this.itemList.dataProvider=new eui.ArrayCollection(this.msdata.config.reward),this.lbScore.textFlow=addColorTF("我的积分："+addColor(GFunc.getItemCount(CurType.gongchengJifen).toString(),5767068)),1==this.msdata.state?this.currentState="ylq":GFunc.getItemCount(CurType.gongchengJifen)>=this.msdata.config.score?this.currentState="lq":this.currentState="wdb"},e.prototype.onclick=function(t){switch(t.target){case this.btnRecoive:MonsterSiegeSys.ins().sendReceiveScoreReward(this.msdata.id)}},e}(BaseWinSingle);__reflect(MonsterSiegeBoxTipsWin.prototype,"MonsterSiegeBoxTipsWin"),window.MonsterSiegeBoxTipsWin=MonsterSiegeBoxTipsWin;var MonsterSiegeFbPanel=function(t){function e(){var e=t.call(this)||this;return e.mcBtnOk=new MC,e.initUI(),e}return __extends(e,t),e.prototype.initUI=function(){this.skinName="MonsterSiegeFbPanelEUI",this.list.itemRenderer=ItemBaseRewardEvent},e.prototype.open=function(){t.prototype.open.call(this),this.addClickE(this.lbOk,this.onClick),this.addClickE(this.list,this.onClick),this.addLsn(LogicSys.ins().patchEnterMap,this.updataMapName),this.addLsn(FbSys.ins().patchUpdateFbTime,this.updataMapName),this.addLsn(MonsterSiegeSys.ins().patchFbDataUpdate,this.updateScore),this.addLsn(MonsterSiegeSys.ins().patchReceiveDaBiaoReward,this.updateData),this.addLsn(MonsterSiegeSys.ins().patchEnterFb,this.updateData),this.addItemTapE(this.list,this.onMenuClick),this.updataMapName(),this.updateData()},e.prototype.close=function(){t.prototype.close.call(this)},e.prototype.updateData=function(){var t=MonsterSiegeSys.ins().getCurDaBiaoRewarData();if(t){t.config;this.list.dataProvider=new eui.ArrayCollection(t.config.reward),this.updateScore()}},e.prototype.updateScore=function(){var t=MonsterSiegeSys.ins(),e=MonsterSiegeSys.ins().getCurDaBiaoRewarData();this.lbDesc.textFlow=addColorTF("伤害达标奖励·"+e.index);var i=e.config;this.lbHurt.textFlow=addColorTF("伤害达到"+GFunc.overLength(i.hurt,2)+"可领取"),1==e.state?this.currentState="get":this.currentState=t.curHurt>=i.hurt?"canget":"noget"},e.prototype.updataMapName=function(){FbSys.ins().commonEndTick>0&&Timer.ins()["do"](0,1e3,0,this.SweepCountDown,this,TimerType.LAST)},e.prototype.SweepCountDown=function(t){this.bmpTime.text=FbSys.ins().surplusTime+"s"},e.prototype.onMenuClick=function(t){var e=MonsterSiegeSys.ins(),i=MonsterSiegeSys.ins().getCurDaBiaoRewarData(),n=t.itemRenderer,a=n.data;0==i.state&&e.curHurt>=i.config.hurt?(MonsterSiegeSys.ins().sendReceiveDaBiaoReward(i.index),t.stopImmediatePropagation()):GFunc.openItemTips(a)},e.prototype.onClick=function(t){switch(t.target){case this.lbOk:var e=MonsterSiegeSys.ins().getCurDaBiaoRewarData();MonsterSiegeSys.ins().sendReceiveDaBiaoReward(e.index)}},e}(BasePanel);__reflect(MonsterSiegeFbPanel.prototype,"MonsterSiegeFbPanel"),window.MonsterSiegeFbPanel=MonsterSiegeFbPanel;var MonsterSiegeInfoTipsWin=function(t){function e(){var e=t.call(this)||this;return e.skinName="MonsterSiegeInfoTipsWinEUI",e.addBg(),e.listDaBiaoReward.itemRenderer=ItemBaseReward,e.listScoreRank.itemRenderer=MonsterSiegeInfoTipsWinItem,e}return __extends(e,t),e.prototype.open=function(e){t.prototype.open.call(this),this.addClickE(this,this.onclick),this.msdata=e,this.iniPanel(),this.updateTime()},e.prototype.close=function(){t.prototype.close.call(this)},e.prototype.iniPanel=function(){var t=this.msdata,e=Cfg.getConfig(MSCommonConfig);this.lbDesc.textFlow=StrUtil.toTF(e.monsterdesc),this.lbBeActCount.textFlow=addColorTF("已被攻击次数："+(e.monstertimes-t.hp)+"次"),this.listDaBiaoReward.dataProvider=new eui.ArrayCollection(t.config.viewreward),this.listScoreRank.dataProvider=new eui.ArrayCollection(t.rankDatas),this.lbMonsterName.textFlow=StrUtil.toTF(t.config.monsterName+t.config.monstrColor)},e.prototype.updateTime=function(){var t=this.msdata,e=Cfg.getConfig(MSCommonConfig),i=MonsterSiegeSys.ins().gethuiFuTimer(),n="hh小时mm分ss秒",a=i>0?addColor("("+getFormatTime(i,n)+"后恢复一次)",5767068):"",o=""+addColor(MonsterSiegeSys.ins().count+"/"+e.maxtimes,0==MonsterSiegeSys.ins().count?15733780:5767068);this.lbCount.textFlow=addColorTF("剩余挑战次数:"+o+a),this.lbZhengDunTimer.textFlow=addColorTF("正在重新整顿:"+getFormatTime(t.gethuiFuTimer(),n)),t.gethuiFuTimer()>0?(this.lbBeActCount.visible=!1,this.lbZhengDunTimer.visible=!0):(this.lbBeActCount.visible=!0,this.lbZhengDunTimer.visible=!1),t.isTz()?this.currentState="ytz":t.gethuiFuTimer()>0?this.currentState="die":MonsterSiegeSys.ins().count>0?this.currentState="enter":this.currentState="noCount"},e.prototype.onclick=function(t){switch(t.target){case this.btnOk:if(!GFunc.checkGotoFuben())return void closeWin(this);MonsterSiegeSys.ins().sendEnterFb(this.msdata.id),closeWin(this)}},e.openCheck=function(){return GFunc.checkSysOpen(354)},e}(BaseWinSingle);__reflect(MonsterSiegeInfoTipsWin.prototype,"MonsterSiegeInfoTipsWin"),window.MonsterSiegeInfoTipsWin=MonsterSiegeInfoTipsWin;var MonsterSiegeInfoTipsWinItem=function(t){function e(){var e=t.call(this)||this;return e.skinName="MonsterSiegeInfoTipsWinItemEUI",e.list.itemRenderer=ItemBaseReward,e}return __extends(e,t),e.prototype.dataChanged=function(){var t=this.data;this.lbRank.text=t.rank>3?""+t.rank:"",this.imgRank.source=t.rank<=3?"hwbz_zycs_phb"+t.rank:"",t.actorId==Actor.ins().actorID?this.lbName.textFlow=addColorTF(""+addColor(t.name,5767068)):this.lbName.textFlow=addColorTF(""+(0==t.actorId?Lang.act_str87:t.name)),this.lbScore.textFlow=addColorTF("造成伤害："+GFunc.overLength(t.hurt));var e=[];e=2==MonsterSiegeSys.ins().isDouble?GFunc.itemDataRewardBeishu(t.hurtRankConfig.doubleReward,2):GFunc.mergeItemDataReward(e,t.hurtRankConfig.doubleReward),e=GFunc.mergeItemDataReward(e,t.hurtRankConfig.reward),this.list.dataProvider=new eui.ArrayCollection(e)},e}(BaseItemRender);__reflect(MonsterSiegeInfoTipsWinItem.prototype,"MonsterSiegeInfoTipsWinItem"),window.MonsterSiegeInfoTipsWinItem=MonsterSiegeInfoTipsWinItem;var MonsterSiegeLogTipsWin=function(t){function e(){var e=t.call(this)||this;return e.skinName="MonsterSiegeLogTipsWinEUI",e.addBg(),e.list.itemRenderer=MonsterSiegeLogTipsWinItem,e}return __extends(e,t),e.prototype.open=function(e){t.prototype.open.call(this),this.addClickE(this,this.onclick),this.iniPanel()},e.prototype.close=function(){t.prototype.close.call(this)},e.prototype.iniPanel=function(){var t=MonsterSiegeSys.ins();this.list.dataProvider=new eui.ArrayCollection(t.logDatas),this.lbTimer.textFlow=addColorTF("只记录"+addColor("本周自身挑战记录",5767068)+",周一刷新")},e.prototype.onclick=function(t){switch(t.target){case this.btnOk:closeWin(this)}},e}(BaseWinSingle);__reflect(MonsterSiegeLogTipsWin.prototype,"MonsterSiegeLogTipsWin"),window.MonsterSiegeLogTipsWin=MonsterSiegeLogTipsWin;var MonsterSiegeLogTipsWinItem=function(t){function e(){var e=t.call(this)||this;return e.skinName="MonsterSiegeLogTipsWinItemEUI",e}return __extends(e,t),e.prototype.dataChanged=function(){var t=this.data;this.lbTargerName.textFlow=StrUtil.toTF("进攻目标："+t.config.monsterName+t.config.monstrColor),this.lbTime.textFlow=addColorTF(""+DateUtil.formatDayTime(t.tick,"yy-mo-dd hh:mm")),this.lbScore.textFlow=addColorTF("造成伤害："+addColor(GFunc.overLength(t.hurt),5767068))},e}(BaseItemRender);__reflect(MonsterSiegeLogTipsWinItem.prototype,"MonsterSiegeLogTipsWinItem"),window.MonsterSiegeLogTipsWinItem=MonsterSiegeLogTipsWinItem;var FootAppearanceConfig=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return __extends(e,t),e}(AppearanceConfig);__reflect(FootAppearanceConfig.prototype,"FootAppearanceConfig");var MonsterSiegeName=function(t){function e(){var e=t.call(this)||this;return e.skinName="MonsterSiegeNameEUI",e.touchEnabled=!1,e.touchChildren=!1,e}return __extends(e,t),e.prototype.updateName=function(t){this.labelName.textFlow=StrUtil.toTF(t)},e.prototype.updateTime=function(t,e){this.labelTime.textFlow=addColorTF(t),""==t?this.img_time.visible=!1:this.img_time.visible=!0},e}(BaseEUI);__reflect(MonsterSiegeName.prototype,"MonsterSiegeName");var FootConstConfig=function(){function t(){}return t}();__reflect(FootConstConfig.prototype,"FootConstConfig");var MonsterSiegeRankPanelListItem=function(t){function e(){var e=t.call(this)||this;return e.skinName="MonsterSiegeRankPanelListItemEUI",e.list.itemRenderer=ItemBaseRewardEvent,e}return __extends(e,t),e.prototype.dataChanged=function(){var t=this.data;this.lbRank.text=t.rank>3?""+t.rank:"",this.imgRank.source=t.rank<=3?"hwbz_zycs_phb"+t.rank:"",this.lbName.textFlow=addColorTF(""+(""==t.name?Lang.act_str87:t.name)),this.lbScore.text="获得积分："+t.score,this.list.dataProvider=new eui.ArrayCollection(t.config.reward)},e}(BaseItemRender);__reflect(MonsterSiegeRankPanelListItem.prototype,"MonsterSiegeRankPanelListItem"),window.MonsterSiegeRankPanelListItem=MonsterSiegeRankPanelListItem;var MonsterSiegeRankRewardTipsWin=function(t){function e(){var e=t.call(this)||this;return e.skinName="MonsterSiegeRankRewardTipsWinEUI",e.addBg(),e.itemList.itemRenderer=ItemBaseReward,e}return __extends(e,t),e.prototype.open=function(e){t.prototype.open.call(this),this.iniPanel(e)},e.prototype.close=function(){t.prototype.close.call(this)},e.prototype.iniPanel=function(t){var e=MonsterSiegeSys.ins();this.lbMyRank.textFlow=addColorTF(""+Lang.fb_str89+(0==e.myRank?Lang.common_str17:e.myRank)),this.itemList.dataProvider=new eui.ArrayCollection(t.config.reward),this.lbDesc1.textFlow=addColorTF("每周日晚 22：00 结算时，排名第"+t.rank+"的玩家\n可获得以下奖励")},e}(BaseWinSingle);__reflect(MonsterSiegeRankRewardTipsWin.prototype,"MonsterSiegeRankRewardTipsWin"),window.MonsterSiegeRankRewardTipsWin=MonsterSiegeRankRewardTipsWin;var MonsterSiegeRankWin=function(t){function e(){var e=t.call(this)||this;return e.winType=WinType.OverlayWin,e}return __extends(e,t),e.prototype.initUI=function(){t.prototype.initUI.call(this)},e.prototype.open=function(e){t.prototype.open.call(this,e)},e.panelNames=[MonsterSiegeRankPanel],e}(BaseWinAutoTab);__reflect(MonsterSiegeRankWin.prototype,"MonsterSiegeRankWin"),window.MonsterSiegeRankWin=MonsterSiegeRankWin;var MonsterSiegeResultWin=function(t){function e(){var e=t.call(this)||this;return e.resultData=new FbResultSiegeData,e}return __extends(e,t),e.prototype.initUI=function(){this.layer=LayerMgr.Popup,this.skinName="MonsterSiegeResultWinEUI",this.addBg(),this.listData=new eui.ArrayCollection,this.clickClose=!1},e.prototype.open=function(e){t.prototype.open.call(this),this.resultData=e,this.addClickE(this.closeBtn,this.onTap),this.list.itemRenderer=ItemBaseReward,this.list.dataProvider=this.listData,this.iniData()},e.prototype.iniData=function(){Timer.ins()["do"](0,1e3,5,this.updateLabel,this),SortUtil.sortOn(this.resultData.rewardItem,["quality"],[SortType.down]),this.listData.source=this.resultData.rewardItem,this.lbhh.textFlow=addColorTF(""+GFunc.overLength(this.resultData.hurt)),this.lbpm.textFlow=addColorTF(""+this.resultData.rank)},e.prototype.close=function(){t.prototype.close.call(this),Timer.ins().removeAll(this)},e.prototype.updateLabel=function(t){0>=t&&this.onCloseBtn(),this.closeBtn.label=Lang.common_str47.replace("$second$",t.toString())},e.prototype.onTap=function(t){switch(t.currentTarget){case this.closeBtn:this.onCloseBtn();break;case this.closeBtn0:FbSys.ins().sendExitFb(),closeWin(this)}},e.prototype.onCloseBtn=function(){FbSys.ins().sendExitFb(),closeWin(this)},e}(BaseWinSingle);__reflect(MonsterSiegeResultWin.prototype,"MonsterSiegeResultWin"),window.MonsterSiegeResultWin=MonsterSiegeResultWin;var NoticeGameUpdateData=function(){function t(){this.desc="",this.rewardStatus=!1,this.rewards=[]}return t.prototype.parser=function(t){this.desc=t.readString(),this.rewardStatus=t.readBoolean();var e=t.readInt();this.rewards.length=0;for(var i=0;e>i;i++){var n=new ItemDataReward;n.parser(t),this.rewards.push(n)}},t}();__reflect(NoticeGameUpdateData.prototype,"NoticeGameUpdateData");var NoticeGameUpdatePanel=function(t){function e(){var e=t.call(this)||this;return e.skinName="NoticeGameUpdatePanelEUI",e.list.itemRenderer=ItemBaseReward,e.list.dataProvider=e.listData=new eui.ArrayCollection,e}return __extends(e,t),e.prototype.open=function(){NoticeSys.ins().sentGameUpdateNotice(),this.addClickE(this.sendBtn,this.onTap),this.addLsn(NoticeSys.ins().patchGameUpdateNotice,this.updateData),this.addLsn(NoticeSys.ins().patchReceiveNotice,this.updateData),this.updateData()},e.prototype.updateData=function(){var t=NoticeSys.ins().noticeGameUpdateData;this.lbDesc.textFlow=StrUtil.toTF(t.desc),this.listData.source=t.rewards,this.sendBtn.enabled=t.rewardStatus,this.sendBtn.label=t.rewardStatus?Lang.notice_str1:Lang.common_str58,this.sendBtn.visible=t.rewards.length>0},e.prototype.onTap=function(t){switch(t.currentTarget){case this.sendBtn:NoticeSys.ins().sentReceiveNotice()}},e.getTabTitle=function(){return"fl_zycs_gg"},e}(BasePanel);__reflect(NoticeGameUpdatePanel.prototype,"NoticeGameUpdatePanel"),window.NoticeGameUpdatePanel=NoticeGameUpdatePanel;var NoticeSys=function(t){function e(){var e=t.call(this)||this;return e.sysId=PackId.Notice,e.reg(1,e.doNotice),e.reg(2,e.patchGameNotice),e.reg(3,e.patchGameUpdateNotice),e.reg(4,e.patchIsGameUpdateNotice),e.reg(5,e.patchReceiveNotice),e.reg(6,e.doInitNotice),e.reg(7,e.patchRoleLoginNotice),e.noticeGameUpdateData=new NoticeGameUpdateData,e}return __extends(e,t),e.ins=function(){return t.getIns.call(this,e)},e.prototype.doNotice=function(t){var e=t.readShort(),i=t.readString(),n=t.readUnsignedByte();1==e&&0==n&&openWin(PaomadengWin,i),ChatSys.ins().patchSysChatMsg(i)},e.prototype.patchGameNotice=function(t){},e.prototype.setNoticeOPen=function(){this.sendBase(2)},e.prototype.sentGameUpdateNotice=function(){this.sendBase(3)},e.prototype.patchGameUpdateNotice=function(t){this.noticeGameUpdateData.parser(t),RpFun.showGameUpdateNoticeRedPoint(PCode.UPD)},e.prototype.patchIsGameUpdateNotice=function(t){this.noticeGameUpdateData.rewardStatus=t.readBoolean(),RpFun.showGameUpdateNoticeRedPoint(PCode.UPD)},e.prototype.sentReceiveNotice=function(){this.sendBase(5)},e.prototype.patchReceiveNotice=function(t){this.noticeGameUpdateData.rewardStatus=!1,RpFun.showGameUpdateNoticeRedPoint(PCode.UPD)},e.prototype.doInitNotice=function(t){for(var e=t.readShort(),i=0;e>i;i++){var n=(t.readShort(),t.readString());t.readByte(),t.readInt();e-1>i?ChatSys.ins().addSysChatMsg(n):ChatSys.ins().patchSysChatMsg(n)}},e.prototype.patchRoleLoginNotice=function(t){var e=t.readByte(),i=(t.readByte(),0),n=t.readString(),a=Cfg.getConfig(LoginNoticeConfig,e),o=Cfg.getConfig(BlockNoticeConfig,a.type);if(console.log("20-7 下发角色上线公告"),FbSys.ins().fubenConfig&&-1==o.groups.indexOf(FbSys.ins().fubenConfig.group))switch(a.type){case LoginNoticeType.GuildBattle:openWin(GuildBattleNoticeWin,i,n,a)}},e}(BaseSys);__reflect(NoticeSys.prototype,"NoticeSys");var System;!function(t){t.noticeSys=NoticeSys.ins.bind(NoticeSys)}(System||(System={})),window.NoticeSys=NoticeSys;var PaomadengWin=function(t){function e(){var e=t.call(this)||this;return e.layer=LayerMgr.Main_Down,e.winType=WinType.NeverCloseWin,e.isLog=!1,e.list=[],e.w=720,e.isTweening=!1,e}return __extends(e,t),e.prototype.initUI=function(){t.prototype.initUI.call(this),this.frame=new eui.Image,this.frame.source="public_zycs_greybg5",this.frame.width=640,this.frame.height=28,this.frame.y=360,this.frame.horizontalCenter="0",this.addChild(this.frame);var e=new eui.Image;e.source="public_zycs_greybg5",e.width=600,e.height=28,e.y=this.frame.y,e.horizontalCenter="",this.addChild(e),this.label=new eui.Label,this.label.size=20,this.label.fontFamily="黑体",this.label.x=this.frame.x+this.w,this.label.y=this.frame.y+4,this.addChild(this.label),this.label.mask=e,this.touchChildren=!1,this.touchEnabled=!1},e.prototype.open=function(t){this.horizontalCenter="0",this.validateNow(),this.list.push(t),this.isTweening||this.tweenLab()},e.prototype.tweenLab=function(){var t=this;this.isTweening=!0,this.label.visible=!0,this.label.alpha=1,this.label.textFlow=StrUtil.toTF(this.list.shift());var e=LayerMgr.getStage().stageWidth,i=e-(e-LayerMgr.px)/2-70,n=(e-LayerMgr.px)/2+70,a=(e-LayerMgr.px)/2+40-this.label.width,o=1e3;this.label.x=i;var s=egret.Tween.get(this.label);s.to({x:n},o).wait(2e3).to({x:a},5e3).call(function(){t.label.visible=!1,0==t.list.length?(t.isTweening=!1,closeWin(t)):t.tweenLab()},this)},e.prototype.tweenLab2=function(){var t=this;this.isTweening=!0,this.label.visible=!0,this.label.alpha=1,this.label.textFlow=StrUtil.toTF(this.list.shift());var e=LayerMgr.getStage().stageWidth,i=e-(e-LayerMgr.px)/2-200,n=(e-LayerMgr.px)/2+60,a=.8,o=1e4;this.label.x=n;var s=n+(i-n)*a,r=egret.Tween.get(this.label);r.to({x:s},o*a).to({alpha:0,x:i},o*(1-a)).call(function(){t.label.visible=!1,0==t.list.length?(t.isTweening=!1,closeWin(t)):t.tweenLab2()},this)},e}(BaseWinSingle);__reflect(PaomadengWin.prototype,"PaomadengWin"),window.PaomadengWin=PaomadengWin;var PfActivitySys=function(t){function e(){var e=t.call(this)||this;return e.isGetFocusAward=!1,e.focusInfo={show:!1,state:!1,callback:function(){}},e.getAwardCount=0,e.fxCdEndTick=0,e.shareInfo={isShow:!1,isArrow:!1,showShare:function(){}},e._hasShare=!1,e.isRenZhengReward=!0,e.renZhengData={status:0,isOpenVerify:0,isOpenIndulge:0,callback:function(t){}},e.isShowkeFu=!1,e.isUserInfoBtn=!1,e.verifyApiInfo={ishow:!1,sendVerifyFun:function(t,e){}},e.sysId=PackId.pfActivity,e.reg(2,e.patchGuanZhuGift),e.reg(4,e.patchFxInfo),e.reg(5,e.patchRenZhengRewardData),e.addLsn(LogicSys.ins().patchAllSysInit,e.doSysInit),e}return __extends(e,t),e.ins=function(){return t.getIns.call(this,e)},e.prototype.doSysInit=function(){this.initKeFuBtnState(),this.doFxOpen(),this.initVerifyInfo(),this.initVerifyApi(),this.initFocusInfo(),this.initUserInfoBtn(),this.txlittleGame()},e.prototype.initUserInfoBtn=function(){return __awaiter(this,void 0,void 0,function(){var t,e=this;return __generator(this,function(i){switch(i.label){case 0:return[4,window.platform.getUserInfoBtn(function(t){closeWin(ShouquanBgTips),e.isUserInfoBtn=t,e.patchuserInfoBtn()})];case 1:return t=i.sent(),this.isUserInfoBtn=t[0],this.userInfoShowFun=t[1],this.userInfoHideFun=t[2],this.patchuserInfoBtn(),[2]}})})},e.prototype.patchuserInfoBtn=function(){},e.prototype.txlittleGame=function(){var t=WxYqhlSys.ins(),e=window.platform.optios();if(e){if(urlParam.isnew&&e.query&&e.query.actorId){var i=Actor.ins(),n=e.query,a="?actorid="+i.actorID+"&serverid="+i.serverID+"&openId="+urlParam.openId;a+="&iactorid="+n.actorId+"&iserverid="+n.srvId+"&iopenId="+n.openId,Http.get(urlParam.reportRoot+"back/actor/invite"+a)}e.isApplets&&!t.isCollect&&t.sendCollectionReward()}},e.prototype.initKeFuBtnState=function(){return __awaiter(this,void 0,void 0,function(){var t;return __generator(this,function(e){switch(e.label){case 0:return t=this,[4,window.platform.getKeFu()];case 1:return t.isShowkeFu=e.sent(),this.patchKeFuStatus(),[2]}})})},e.prototype.initVerifyApi=function(){return __awaiter(this,void 0,void 0,function(){var t;return __generator(this,function(e){switch(e.label){case 0:return[4,window.platform.getVerifyApi()];case 1:return(t=e.sent())?(this.verifyApiInfo.ishow=t[0],this.verifyApiInfo.sendVerifyFun=t[1],t[0]&&openWin(VerifyApiWin),this.updateVerifyApi(),[2]):[2]}})})},e.prototype.sendVerifyApi=function(t,e){return __awaiter(this,void 0,void 0,function(){var i,n,a,o,s,r;return __generator(this,function(u){switch(u.label){case 0:return[4,this.verifyApiInfo.sendVerifyFun(t,e)];case 1:return i=u.sent(),n=i.code,a=i.result,o=!1,s="",a&&a.data?(r=a.data.realNameAuthResult,0==r?(s="验证失败",o=!0):3==r&&(s="验证失败，超过今日最大认证次数限制",o=!0),a.data.authTips&&(s=a.data.authTips)):(o=0!=n,s="验证失败"),this.verifyApiInfo.ishow=o,s&&showTipsWarn(s),this.verifyApiInfo.ishow||closeWin(VerifyApiWin),this.updateVerifyApi(),[2]}})})},e.prototype.updateVerifyApi=function(){},e.prototype.initVerifyInfo=function(){return __awaiter(this,void 0,void 0,function(){var t,i;return __generator(this,function(n){switch(n.label){case 0:return[4,window.platform.getVerify()];case 1:return t=n.sent(),i=t[0],this.renZhengData.isOpenVerify=isNaN(i.isOpenVerify)?0:i.isOpenVerify,this.renZhengData.isOpenIndulge=isNaN(i.isOpenIndulge)?0:i.isOpenIndulge,this.renZhengData.callback=t[1],LogicSys.ins().sendFcm(0,0),this.patchRenZhengStatus(i.status),this.renZhengData.status&&this.renZhengData.isOpenVerify&&e.ins().getRenZhengReward(),[2]}})})},e.prototype.initFocusInfo=function(){return __awaiter(this,void 0,void 0,function(){return __generator(this,function(t){switch(t.label){case 0:return[4,this.getFocusInfo()];case 1:return t.sent(),this.focusInfo.state&&!this.focusInfo.show&&e.ins().sendGuanZhuGift(),[2]}})})},e.prototype.getFocusInfo=function(){return __awaiter(this,void 0,void 0,function(){var t;return __generator(this,function(e){switch(e.label){case 0:return[4,window.platform.getFocus()];case 1:return t=e.sent(),this.focusInfo.show=t[0],this.focusInfo.callback=t[2],this.patchGuanZhuState(t[1]),[2]}})})},e.prototype.sendGuanZhuGift=function(){this.sendBase(2)},e.prototype.patchGuanZhuGift=function(t){this.isGetFocusAward=t.readBoolean(),RpFun.showGzhlRp()},e.prototype.patchGuanZhuState=function(t){this.focusInfo.state=t,RpFun.showGzhlRp()},e.prototype.isShowFocus=function(){return this.focusInfo.show},e.prototype.isFocus=function(){return this.focusInfo.state},e.prototype.sendGetFxAward=function(){this.sendBase(4)},e.prototype.patchFxInfo=function(t){this.getAwardCount=t.readInt();var e=t.readInt();this.fxCdEndTick=1e3*e+Timer.ins().getTimer(),this.hasShare=!1},e.prototype.doFxOpen=function(){return __awaiter(this,void 0,void 0,function(){var t,e,i,n;return __generator(this,function(a){switch(a.label){case 0:return[4,window.platform.getShare(this.shareCallback)];case 1:return t=a.sent(),e=t[0],i=t[1],n=t[2],this.shareInfo.isShow=e,this.shareInfo.isArrow=!i,this.shareInfo.showShare=n,this.patchFxOpen(),[2]}})})},e.prototype.shareCallback=function(t){return t},e.prototype.patchFxOpen=function(){},e.prototype.isShowShareArrow=function(){return this.shareInfo.isArrow},e.prototype.getCd=function(){return Math.max(this.fxCdEndTick-Timer.ins().getTimer(),0)},e.prototype.canGetShareAward=function(){return this.hasShare&&this.hasShareGetAwardCount()&&0==this.getCd()},e.prototype.hasShareGetAwardCount=function(){return this.getAwardCount<Cfg.getConfig(SDKConfig).shareCount},Object.defineProperty(e.prototype,"hasShare",{get:function(){return this._hasShare},set:function(t){this._hasShare=t,RpFun.showShareRp()},enumerable:!0,configurable:!0}),e.prototype.patchRenZhengStatus=function(t){this.renZhengData.status=isNaN(t)?0:t},e.prototype.isShowRenZheng=function(){return 1!=this.renZhengData.status&&1==this.renZhengData.isOpenVerify},e.prototype.isRenZheng=function(){return 1==this.renZhengData.status},e.prototype.patchRenZhengRewardData=function(t){this.isRenZhengReward=t.readBoolean()},e.prototype.sendRenZhengReward=function(){this.sendBase(5)},e.prototype.getRenZhengReward=function(){this.isRenZheng()&&!this.isRenZhengReward&&this.sendRenZhengReward()},e.prototype.patchKeFuStatus=function(){},__decorate([post()],e.prototype,"updateVerifyApi",null),__decorate([post()],e.prototype,"shareCallback",null),e}(BaseSys);__reflect(PfActivitySys.prototype,"PfActivitySys");var System;!function(t){t.pfActivitySys=PfActivitySys.ins.bind(PfActivitySys)}(System||(System={})),window.PfActivitySys=PfActivitySys;var CollectionWin=function(t){function e(){return t.call(this)||this}return __extends(e,t),e.prototype.setSkinName=function(){this.skinName="CollectionWinEUI"},e.prototype.initUI=function(){t.prototype.initUI.call(this),this.layer=LayerMgr.Popup,this.addBg(),this.listAward.itemRenderer=ItemBaseReward},e.prototype.open=function(){t.prototype.open.call(this),this.listAward.dataProvider=new eui.ArrayCollection(Cfg.getConfig(WeChatConstConfig).collectReward)},e}(BaseWinSingle);__reflect(CollectionWin.prototype,"CollectionWin"),window.CollectionWin=CollectionWin;var CollectionWin2=function(t){function e(){var e=t.call(this)||this;return e.maxStep=5,e.curStep=0,e}return __extends(e,t),e.prototype.setSkinName=function(){this.skinName="CollectionWinEUI2"},e.prototype.initUI=function(){t.prototype.initUI.call(this),this.layer=LayerMgr.Popup,this.addBg(),this.listAward.itemRenderer=ItemBaseReward},e.prototype.open=function(){t.prototype.open.call(this),this.listAward.dataProvider=new eui.ArrayCollection(Cfg.getConfig(WeChatConstConfig).collectReward),this.addClickE(this.btn_send,this.onClick),this.setStep()},e.prototype.onClick=function(){var t=this;t.curStep>=t.maxStep?(WxYqhlSys.ins().sendCollectionReward(),closeWin(t)):this.setStep(t.curStep+1)},e.prototype.setStep=function(t){void 0===t&&(t=1),t>this.maxStep&&(t=this.maxStep),this.curStep=t,this.step_icon.source="collect_xxtx_"+t,this.btn_send.label=t>=this.maxStep?"领取奖励":"下一步"},e}(BaseWinSingle);__reflect(CollectionWin2.prototype,"CollectionWin2"),window.CollectionWin2=CollectionWin2;var FocusWin=function(t){function e(){var e=t.call(this)||this;return e.layer=LayerMgr.Popup,e}return __extends(e,t),e.prototype.initUI=function(){t.prototype.initUI.call(this),this.listAward.itemRenderer=ItemBaseReward,this.listAward.dataProvider=this.listAwardArr=new eui.ArrayCollection,this.listAwardArr.source=Cfg.getConfig(SDKConfig).guanzhurewrd,this.btnGet.redPoint.visible=!0,this.addBg()},e.prototype.setSkinName=function(){this.skinName="FocusWinEUI"},e.prototype.open=function(){t.prototype.open.call(this),this.addClickE(this.btnGo,this.onClick),this.addClickE(this.btnGet,this.onClick),this.addLsn(PfActivitySys.ins().patchGuanZhuGift,this.update),this.addLsn(PfActivitySys.ins().patchGuanZhuState,this.update),this.update(),PfActivitySys.ins().getFocusInfo()},e.prototype.update=function(){var t=PfActivitySys.ins().isFocus(),e=PfActivitySys.ins().isGetFocusAward;this.btnGo.visible=!t,this.btnGet.visible=t&&!e,this.labelYGZ.visible=e},e.prototype.onClick=function(t){switch(t.currentTarget){case this.btnGo:Actor.ins().isLocation?(PfActivitySys.ins().patchGuanZhuState(!0),showtipsSuc("关注成功")):(PfActivitySys.ins().focusInfo.callback(),closeWin(this));break;case this.btnGet:PfActivitySys.ins().sendGuanZhuGift()}},e}(BaseWinSingle);__reflect(FocusWin.prototype,"FocusWin"),window.FocusWin=FocusWin;var ShareWin=function(t){function e(){var e=t.call(this)||this;return e.layer=LayerMgr.Popup,e}return __extends(e,t),e.prototype.initUI=function(){t.prototype.initUI.call(this),this.listAward.itemRenderer=ItemBaseReward,this.listAward.dataProvider=this.listAwardArr=new eui.ArrayCollection,this.listAwardArr.source=Cfg.getConfig(SDKConfig).shareReward,this.addBg()},e.prototype.setSkinName=function(){this.skinName="ShareWinEUI"},e.prototype.open=function(){t.prototype.open.call(this),this.addLsn(PfActivitySys.ins().patchFxInfo,this.updateFxCount),this.addLsn(PfActivitySys.ins().shareCallback,this.shareCallback),this.addClickE(this.btnGetAward,this.onClick),this.addClickE(this.btn_send,this.onClick),this.updateFxCount()},e.prototype.updateFxCount=function(){this.labelCount.text="分享次数("+PfActivitySys.ins().getAwardCount+"/"+Cfg.getConfig(SDKConfig).shareCount+")";var t=PfActivitySys.ins().hasShareGetAwardCount();PfActivitySys.ins().getCd()>0&&t?this.currentState="cd":PfActivitySys.ins().canGetShareAward()?this.currentState="normal":(this.currentState="fx",this.validateNow(),this.btn_send.enabled=t,this.imgArrow.visible=PfActivitySys.ins().isShowShareArrow(),this.btn_send.visible=!this.imgArrow.visible);var e=PfActivitySys.ins().getCd();e&&PfActivitySys.ins().hasShareGetAwardCount()&&Timer.ins()["do"](0,1e3,Math.ceil(e/1e3),this.formatTime,this)},e.prototype.formatTime=function(t){var e=""+StrUtil.addColor(getFormatTime(t,"mm:ss"),15733780);0>=t&&this.updateFxCount(),this.labelCd.textFlow=addColorTF(t?e:"")},e.prototype.shareCallback=function(t){PfActivitySys.ins().hasShare=t,t?(showtipsSuc("分享成功"),this.updateFxCount()):showtipsFail("分享失败,请重新分享!")},e.prototype.onClick=function(t){switch(t.currentTarget){case this.btnGetAward:PfActivitySys.ins().sendGetFxAward();break;case this.btn_send:PfActivitySys.ins().shareInfo.showShare()}},e}(BaseWinSingle);__reflect(ShareWin.prototype,"ShareWin"),window.ShareWin=ShareWin;var SmrzWin=function(t){function e(){var e=t.call(this)||this;
return e.layer=LayerMgr.Popup,e}return __extends(e,t),e.prototype.initUI=function(){t.prototype.initUI.call(this),this.listAward.itemRenderer=ItemBaseReward,this.listAward.dataProvider=this.listAwardArr=new eui.ArrayCollection,this.listAwardArr.source=Cfg.getConfig(SDKConfig).verifyrewrd,this.addBg()},e.prototype.setSkinName=function(){this.skinName="SmrzWinEUI"},e}(BaseWinSingle);__reflect(SmrzWin.prototype,"SmrzWin"),window.SmrzWin=SmrzWin;var WxYqhlRankTipsWin=function(t){function e(){var e=t.call(this)||this;return e.layer=LayerMgr.Popup,e.winType=WinType.NeverCloseWin,e.skinName="WxYqhlRankTipsWinEUI",e.addBg(),e.list.itemRenderer=WxYqhlRankTipsItem,e.list.dataProvider=e.listData=new eui.ArrayCollection,e}return __extends(e,t),e.prototype.open=function(){t.prototype.open.call(this),this.updatePanel()},e.prototype.updatePanel=function(){var t=WxYqhlSys.ins().wxYqhlRankDatas;this.listData.source=t,this.lbRank.textFlow=addColorTF(""+Lang.act_str25+StrUtil.addColor(WxYqhlSys.ins().myRank>0?WxYqhlSys.ins().myRank:Lang.common_str17,16751375))},e}(BaseWinSingle);__reflect(WxYqhlRankTipsWin.prototype,"WxYqhlRankTipsWin"),window.WxYqhlRankTipsWin=WxYqhlRankTipsWin;var WxYqhlSys=function(t){function e(){var e=t.call(this)||this;return e.shareTick=0,e.shareCount=0,e.inviteCount=0,e.wxYqhlRankDatas=[],e.myRank=0,e.myCount=0,e.rankTick=0,e.wxYqhlEggData=[],e.eggDay=0,e.eggCount=0,e.wxYqDatas=[],e.wxJjDatas=[],e.wxZsDatas=[],e.wxSvipDatas=[],e.isCollect=!1,e.sysId=PackId.WxYqhl,e.reg(1,e.patchTaskInfo),e.reg(2,e.patchTaskUp),e.reg(3,e.patchTaskGroup),e.reg(5,e.patchRankInfo),e.reg(8,e.patchEggInfo),e.reg(9,e.patchSmashedEggInfo),e.reg(10,e.patchNoteInfo),e.reg(11,e.patchEggCountInfo),e.reg(13,e.patchCollectionReward),e.reg(15,e.patchShareSuccess),e.reg(16,e.patchInviteSuccess),e}return __extends(e,t),e.ins=function(){return t.getIns.call(this,e)},e.prototype.patchTaskInfo=function(t){for(var e=t.readByte(),i=0;e>i;i++){var n=t.readByte(),a=this.getTaskDatasByGroup(n);a.length=0;for(var o=t.readShort(),s=0;o>s;s++){var r=new WxYqhlTaskData(n);r.parser(t),a.push(r)}}RpFun.showWxYqhlYqkRp(),RpFun.showWxYqhlJjkRp(),RpFun.showWxYqhlZsRp(),RpFun.showWxYqhlSvipRp()},e.prototype.sendTaskUp=function(t,e){var i=this.getBytes(2);i.writeByte(t),i.writeShort(e),this.send(i)},e.prototype.patchTaskUp=function(t){var e=t.readByte(),i=t.readShort(),n=this.getTaskDataById(e,i);n.parser2(t),this.updateTaskGroupRp(e)},e.prototype.patchTaskGroup=function(t){var e=t.readByte(),i=this.getTaskDatasByGroup(e);i.length=0;for(var n=t.readShort(),a=0;n>a;a++){var o=new WxYqhlTaskData(e);o.parser(t),i.push(o)}this.updateTaskGroupRp(e)},e.prototype.updateTaskGroupRp=function(t){switch(t){case WxTaskGroup.yq:RpFun.showWxYqhlYqkRp();break;case WxTaskGroup.zs:RpFun.showWxYqhlZsRp();break;case WxTaskGroup.jj:RpFun.showWxYqhlJjkRp();break;case WxTaskGroup.svip:RpFun.showWxYqhlSvipRp()}},e.prototype.sendRankInfo=function(){this.sendBase(5)},e.prototype.patchRankInfo=function(t){this.wxYqhlRankDatas.length=0;for(var e=t.readShort(),i=0;e>i;i++){var n=new WxYqhlRankData(i+1);n.parser(t),this.wxYqhlRankDatas.push(n)}this.myRank=t.readShort(),this.myCount=t.readShort(),this.rankTick=DateUtil.formatMiniDateTime(t.readInt())},e.prototype.patchEggInfo=function(t){this.eggDay=t.readShort(),this.eggCount=t.readByte();var e=t.readByte();this.initEggDatas();for(var i=0;e>i;i++){var n=this.getEggDataByPos(t.readByte());n.parser(t)}RpFun.showWxYqhlEggRp(),RpFun.showWxYqhlEggRp2()},e.prototype.sendSmashedEgg=function(t){var e=this.getBytes(9);e.writeInt(t),this.send(e)},e.prototype.patchSmashedEggInfo=function(t){this.eggCount=t.readByte();var e=t.readByte(),i=this.getEggDataByPos(e);return i.parser(t),RpFun.showWxYqhlEggRp(),e},e.prototype.patchNoteInfo=function(t){t.readString(),t.readString()},e.prototype.patchEggCountInfo=function(t){this.eggCount=t.readByte(),RpFun.showWxYqhlEggRp()},e.prototype.sendCollectionReward=function(){this.sendBase(13)},e.prototype.patchCollectionReward=function(t){this.isCollect=1==t.readByte()},e.prototype.sendShareSuccess=function(){this.sendBase(15),window.platform.shareAppMessage()},e.prototype.patchShareSuccess=function(t){this.shareCount=t.readByte()},e.prototype.patchInviteSuccess=function(t){this.inviteCount=t.readByte()},e.prototype.initEggDatas=function(){this.wxYqhlEggData.length=0;for(var t=0;9>t;t++){var e=new WxYqhlEggData(this.eggDay,t+1);this.wxYqhlEggData.push(e)}},e.prototype.getEggDataByPos=function(t){for(var e=0,i=this.wxYqhlEggData;e<i.length;e++){var n=i[e];if(n.pos==t)return n}return null},e.prototype.getRankTime=function(t){return void 0===t&&(t=Actor.ins().serverTime),Math.max(Math.ceil(this.rankTick-t)/1e3,0)},e.prototype.getTaskDatasByGroup=function(t){switch(t){case WxTaskGroup.yq:return this.wxYqDatas;case WxTaskGroup.jj:return this.wxJjDatas;case WxTaskGroup.zs:return this.wxZsDatas;case WxTaskGroup.svip:return this.wxSvipDatas}return[]},e.prototype.getTaskDataById=function(t,e){for(var i=this.getTaskDatasByGroup(t),n=0;n<i.length;n++)if(i[n].id==e)return i[n];return null},e.prototype.isCanSmash=function(){return this.eggCount>0},e.prototype.isWxYqhlRewardAll=function(){if(this.isShow())return!1;for(var t=0,e=this.wxYqDatas;t<e.length;t++){var i=e[t];if(2!=i.state)return!1}for(var n=0,a=this.wxJjDatas;n<a.length;n++){var o=a[n];if(2!=o.state)return!1}for(var s=0,r=this.wxZsDatas;s<r.length;s++){var u=r[s];if(2!=u.state)return!1}for(var h=0,l=this.wxSvipDatas;h<l.length;h++){var p=l[h];if(2!=p.state)return!1}return!0},e.prototype.isShow=function(){return Actor.ins().serverOpenDay<7},e}(BaseSys);__reflect(WxYqhlSys.prototype,"WxYqhlSys");var System;!function(t){t.wxYqhlSys=WxYqhlSys.ins.bind(WxYqhlSys)}(System||(System={})),window.WxYqhlSys=WxYqhlSys;var WxYqhlWin=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.redPointHead=[],e.winType=WinType.MainWin,e}return __extends(e,t),e.prototype.initUI=function(){t.prototype.initUI.call(this),this.closeBtn.icon="svip_zycs_close",this.eGroup.visible=!1},e.panelNames=[WxYqhlPanel],e}(BaseWinAutoTab);__reflect(WxYqhlWin.prototype,"WxYqhlWin"),window.WxYqhlWin=WxYqhlWin;var WxYqhlEggData=function(){function t(t,e){this.day=0,this.pos=1,this.itemId=0,this.count=0,this.day=t,this.pos=e}return t.prototype.parser=function(t){this.itemId=t.readInt(),this.count=t.readInt()},t.prototype.getConfig=function(){return this.config&&this.config.day==this.day||(this.config=Cfg.getConfig(WeChatEggConfig,this.day,this.pos)),this.config},t}();__reflect(WxYqhlEggData.prototype,"WxYqhlEggData");var WxYqhlRankData=function(){function t(t){this.rank=1,this.roleName="",this.count=0,this.job=JobConst.ZhanShi,this.rank=t}return t.prototype.parser=function(t){this.roleName=t.readString(),this.count=t.readShort(),this.job=t.readByte()},t.prototype.getConfig=function(){return this.config||(this.config=Cfg.getConfig(WeChatRankConfig,this.rank))},t.prototype.getName=function(){return""==this.roleName?Lang.act_str87:this.roleName},t.prototype.getDec=function(){return 1==this.rank?""==this.roleName?"分享"+addColor(this.getConfig().value,5570465)+"位好友上榜":"已分享"+addColor(this.count,5570465)+"位好友":"分享"+addColor(this.getConfig().value,5570465)+"位好友上榜"},t}();__reflect(WxYqhlRankData.prototype,"WxYqhlRankData");var WxYqhlTaskData=function(){function t(t){this.group=WxTaskGroup.yq,this.id=1,this.state=0,this.bar=0,this.count=0,this.group=t}return t.prototype.parser=function(t){this.id=t.readShort(),this.state=t.readByte(),this.bar=t.readDouble(),this.count=t.readByte()},t.prototype.parser2=function(t){this.state=t.readByte(),this.bar=t.readDouble()},t.prototype.getConfig=function(){return this.config||(this.config=Cfg.getConfig(WeChatTaskConfig,this.group,this.id))},t.prototype.getDec=function(){var t="",e=this.getConfig().target;return t=StrUtil.toTF2(this.getConfig().dec),t+=addColor("（"+this.bar+"/"+e+"）",this.bar<e?14931902:5570465)},Object.defineProperty(t.prototype,"sortState",{get:function(){var t=ActRewardState.NotReached;return 0==this.state?t=ActRewardState.NotReached:1==this.state?t=ActRewardState.CanGet:2==this.state&&(t=ActRewardState.Geted),t},enumerable:!0,configurable:!0}),t}();__reflect(WxYqhlTaskData.prototype,"WxYqhlTaskData");var WxTaskGroup;!function(t){t[t.yq=1]="yq",t[t.jj=2]="jj",t[t.zs=3]="zs",t[t.svip=4]="svip"}(WxTaskGroup||(WxTaskGroup={}));var WxYqhlEggItem=function(t){function e(){var e=t.call(this)||this;return e._pos=0,e.skinName="WxYqhlEggItemEUI",e.item.reInit(),e}return __extends(e,t),e.prototype.updateData=function(t){if(t&&t.itemId>0){this.currentState="rot",this.validateNow();var e=GFunc.creatRewardDataById(t.itemId);e.count=t.count,this.item.data=e,this.item.scaleX=this.item.scaleY=1}else this.currentState="egg",this.validateNow(),this.smashBtn.redPoint.visible=WxYqhlSys.ins().isCanSmash();this._pos=t.pos},e.prototype.setItemIcon=function(t){this.item.visible=t,this.item.reInit()},e.prototype.showEggImg=function(t){void 0===t&&(t=!0),this.imgEgg.visible=t},e.prototype.showIcon=function(){this.setItemIcon(!0),egret.Tween.removeTweens(this.item),this.item.scaleX=this.item.scaleY=0,this.item.y=120;var t=egret.Tween.get(this.item);t.to({scaleX:1,scaleY:1,y:0},300)},Object.defineProperty(e.prototype,"pos",{get:function(){return this._pos},enumerable:!0,configurable:!0}),e.prototype.onMoveShake=function(){if("egg"==this.currentState&&this.imgIocn){egret.Tween.removeTweens(this.imgIocn);var t=egret.Tween.get(this.imgIocn);t.to({rotation:-5},100,egret.Ease.cubicIn).to({rotation:5},200,egret.Ease.cubicIn).to({rotation:0},100,egret.Ease.cubicIn)}},e}(BaseItemRender);__reflect(WxYqhlEggItem.prototype,"WxYqhlEggItem"),window.WxYqhlEggItem=WxYqhlEggItem;var WxYqhlEggSubItem=function(t){function e(){var e=t.call(this)||this;return e.skinName="WxYqhlEggSubItemEUI",e.itemA.reInit(),e}return __extends(e,t),e.prototype.dataChanged=function(){var t=this.data,e=GFunc.creatRewardDataById(t.itemid);e.count=t.count,this.itemA.data=e,this.imgGet.visible=this.isGetReward(t.itemid,t.count),1==t.needNotice&&(this.itemA.setItemKuangEffect(!0,"eff5"),this.itemA.setItemEffect(!0,"eff7"))},e.prototype.isGetReward=function(t,e){for(var i=WxYqhlSys.ins().wxYqhlEggData,n=0,a=i;n<a.length;n++){var o=a[n];if(e==o.count&&t==o.itemId)return!0}return!1},e}(BaseItemRender);__reflect(WxYqhlEggSubItem.prototype,"WxYqhlEggSubItem"),window.WxYqhlEggSubItem=WxYqhlEggSubItem;var FootDashiConfig=function(){function t(){}return t}();__reflect(FootDashiConfig.prototype,"FootDashiConfig");var FootFenjieConfig=function(){function t(){}return t}();__reflect(FootFenjieConfig.prototype,"FootFenjieConfig");var WxYqhlRankItemTop=function(t){function e(){var e=t.call(this)||this;return e.skinName="WxYqhlRankItemTopEUI",e.list.itemRenderer=ItemBaseReward,e.list.dataProvider=e.listData=new eui.ArrayCollection,e.mcTitle.data=getEffName("ch_zycs_36"),e}return __extends(e,t),e.prototype.dataChanged=function(){this.data instanceof WxYqhlRankData&&(this.imgXwyd.visible=""==this.data.roleName,this.lbName.text=this.data.roleName,this.lbDec.textFlow=addColorTF(this.data.getDec()),this.listData.source=this.data.getConfig().rewards.concat())},e}(BaseItemRender);__reflect(WxYqhlRankItemTop.prototype,"WxYqhlRankItemTop"),window.WxYqhlRankItemTop=WxYqhlRankItemTop;var WxYqhlRankTipsItem=function(t){function e(){var e=t.call(this)||this;return e.skinName="WxYqhlRankTipsItemEUI",e.imgXwyd.visible=!1,e}return __extends(e,t),e.prototype.dataChanged=function(){if(this.data instanceof WxYqhlRankData){var t=this.data;t.rank<=3?this.currentState="max":this.currentState="min",this.validateNow(),t.rank<=3?(this.imgBg.source="cg_zycs_di"+t.rank,this.imgRank.source="jjc_zycs_no"+t.rank,this.imgRank.visible=!0,this.lbRank.visible=!1):(this.imgRank.visible=!1,this.lbRank.visible=!0,this.lbRank.text=t.rank.toString()),this.lbName.text=""+t.getName(),this.lbNum.text=""+(""==this.data.roleName?this.data.getConfig().value:t.count)}},e}(BaseItemRender);__reflect(WxYqhlRankTipsItem.prototype,"WxYqhlRankTipsItem"),window.WxYqhlRankTipsItem=WxYqhlRankTipsItem;var WxyqhlTabBtn=function(t){function e(){var e=t.call(this)||this;return e.skinName="WxyqhlBtnTabSkin",e.showRedPoint(!1),e}return __extends(e,t),e.prototype.dataChanged=function(){"string"==typeof this.data&&(this.icon=""+this.data,this.choiceIcon="xyzd_zycs_choice")},e.prototype.showRedPoint=function(t){this.redPoint.visible=t},e}(BaseItemRender);__reflect(WxyqhlTabBtn.prototype,"WxyqhlTabBtn");var WxYqhlZsItem=function(t){function e(){return t.call(this)||this}return __extends(e,t),e.prototype.setSkinName=function(){this.skinName="WxYqhlZsItemEUI"},e.prototype.dataChanged=function(){t.prototype.dataChanged.call(this),this.data instanceof WxYqhlTaskData&&(this.lbCount.textFlow=addColorTF("可领取次数："+addColor(this.data.count,5767068)))},e}(WxYqhlInviteItem);__reflect(WxYqhlZsItem.prototype,"WxYqhlZsItem"),window.WxYqhlZsItem=WxYqhlZsItem;var FootHuanhuaBaseConfig=function(){function t(){}return t}();__reflect(FootHuanhuaBaseConfig.prototype,"FootHuanhuaBaseConfig");var WxYqhlEggSubWin=function(t){function e(){var e=t.call(this)||this;return e.layer=LayerMgr.Popup,e}return __extends(e,t),e.prototype.setSkinName=function(){this.skinName="WxYqhlEggSubWinEUI"},e.prototype.initUI=function(){t.prototype.initUI.call(this),this.listAward.itemRenderer=WxYqhlEggSubItem,this.listAward.dataProvider=this.listAwardArr=new eui.ArrayCollection,this.addBg()},e.prototype.open=function(){t.prototype.open.call(this);var e=Actor.ins().serverOpenDay,i=Cfg.getConfigs(WeChatEggConfig,e);SortUtil.sortOn(i,["index"],[SortType.down]),this.listAwardArr.source=i},e}(BaseWinSingle);__reflect(WxYqhlEggSubWin.prototype,"WxYqhlEggSubWin"),window.WxYqhlEggSubWin=WxYqhlEggSubWin;var FootItemConfig=function(){function t(){}return t}();__reflect(FootItemConfig.prototype,"FootItemConfig");var FootLevelConfig=function(){function t(){}return t}();__reflect(FootLevelConfig.prototype,"FootLevelConfig");var FootSecretConfig=function(){function t(){}return t}();__reflect(FootSecretConfig.prototype,"FootSecretConfig");var FortCommonConfig=function(){function t(){}return t}();__reflect(FortCommonConfig.prototype,"FortCommonConfig");var FortConfig=function(){function t(){}return t}();__reflect(FortConfig.prototype,"FortConfig");var FortDieConfig=function(){function t(){}return t}();__reflect(FortDieConfig.prototype,"FortDieConfig");var QiyuAddWin=function(t){function e(){var e=t.call(this)||this;return e.skinName="QiyuAddWinEUI",e}return __extends(e,t),e.prototype.open=function(e){t.prototype.open.call(this),this.updatePanel(e)},e.prototype.close=function(){t.prototype.close.call(this),egret.Tween.removeTweens(this.group)},e.prototype.updatePanel=function(t){this.bmpNum.text="+"+t,egret.Tween.removeTweens(this.group),this.group.alpha=0,this.group.y=550;var i=egret.Tween.get(this.group);i.wait(500).to({alpha:1,y:500},300).wait(1500).to({alpha:0},500).call(function(){closeWin(e)},this)},e}(BaseWinSingle);__reflect(QiyuAddWin.prototype,"QiyuAddWin"),window.QiyuAddWin=QiyuAddWin;var QiyuCaiQuanWin=function(t){function e(){var e=t.call(this)||this;return e.mySelect=CaiQuan.JD,e.myTmp=CaiQuan.JD,e.npcTmp=CaiQuan.JD,e.lhjPos=1,e.state=0,e.skinName="QiyuCaiQuanWinEUI",e.rewardList.itemRenderer=ItemBaseRewardActivity,e.rewardList.dataProvider=e.rewardListData=new eui.ArrayCollection,e.lhj=new LHJG,e.lhj.setTotal(3),e.lhj.setCircleCount(4),e.addBg(),e}return __extends(e,t),e.prototype.open=function(e){t.prototype.open.call(this),this.data=e,this.addClickE(this.btnST,this.onClick),this.addClickE(this.btnJD,this.onClick),this.addClickE(this.btnBu,this.onClick),this.addClickE(this.btnSend,this.onClick),this.addLsn(QiyuSys.ins().patchQiyuResult,this.updatePanel),this.addEvent(egret.Event.CHANGING,this.lhj,this.lhjChanging),this.addEvent(egret.Event.COMPLETE,this.lhj,this.lhjComplete),this.infoPanel()},e.prototype.close=function(){t.prototype.close.call(this),this.lhj.stop()},e.prototype.infoPanel=function(){this.selectJD.visible=!1,this.selectST.visible=!1,this.selectBu.visible=!1,this.rewardListData.source=this.data.rewards,this.myIcon.source=ResMgr.getHeadIcon(Actor.ins().sex),this.groupCaiQuan.visible=!0,this.groupGet.visible=!1,this.myResult.source="",this.npcResult.source=""},e.prototype.updatePanel=function(t,e){this.state=e,this.myTmp=MathUtil.randomInteger(1,3),this.npcTmp=MathUtil.randomInteger(1,3),this.lhj.start(1,3,5e3)},e.prototype.lhjChanging=function(t){if(!this.lhj.isEnd()&&this.lhjPos!=t.data){this.lhjPos=t.data;var e=MathUtil.randomInteger(1,2);this.myTmp=1==e?(this.myTmp+3)%3+1:(this.myTmp+3-2)%3+1,this.myQuan.source="qy_zycs_dh"+this.myTmp+"a",this.npcTmp=2==e?(this.npcTmp+3)%3+1:(this.npcTmp+3-2)%3+1,this.npcQuan.source="qy_zycs_dh"+this.npcTmp}},e.prototype.lhjComplete=function(t){this.setPanel(this.state)},e.prototype.setPanel=function(t){var e;0==t?(this.groupCaiQuan.visible=!1,this.groupGet.visible=!0,this.myResult.source="qy_zycs_sb",this.npcResult.source="qy_zycs_sl",this.lbDec.text=Lang.qy_str8,this.btnSend.label=Lang.qy_str7,e=(this.mySelect+3)%3+1):1==t?(this.groupCaiQuan.visible=!1,this.groupGet.visible=!0,this.myResult.source="qy_zycs_sl",this.npcResult.source="qy_zycs_sb",this.lbDec.text=Lang.qy_str9,this.btnSend.label=Lang.common_str81,e=(this.mySelect+3-2)%3+1):2==t&&(this.groupCaiQuan.visible=!0,this.groupGet.visible=!1,this.myResult.source="",this.npcResult.source="",e=this.mySelect),this.myQuan.source="qy_zycs_dh"+this.mySelect+"a",this.npcQuan.source="qy_zycs_dh"+e},e.prototype.onClick=function(t){switch(t.currentTarget){case this.btnJD:this.lhj.isEnd()&&(this.selectJD.visible=!0,this.selectST.visible=!1,this.selectBu.visible=!1,this.mySelect=CaiQuan.JD,QiyuSys.ins().sendQiyuTaskChallenge(this.data.pos,CaiQuan.JD));break;case this.btnST:this.lhj.isEnd()&&(this.selectJD.visible=!1,this.selectST.visible=!0,this.selectBu.visible=!1,this.mySelect=CaiQuan.ST,QiyuSys.ins().sendQiyuTaskChallenge(this.data.pos,CaiQuan.ST));break;case this.btnBu:this.lhj.isEnd()&&(this.selectJD.visible=!1,this.selectST.visible=!1,this.selectBu.visible=!0,this.mySelect=CaiQuan.Bu,QiyuSys.ins().sendQiyuTaskChallenge(this.data.pos,CaiQuan.Bu));break;case this.btnSend:closeWin(e)}},e}(BaseWinSingle);__reflect(QiyuCaiQuanWin.prototype,"QiyuCaiQuanWin"),window.QiyuCaiQuanWin=QiyuCaiQuanWin;var QiyuDuiHuanWin=function(t){function e(){var e=t.call(this)||this;return e.redPointHead=[QiyuWin,QiyuEventPanel],e.winType=WinType.OverlayWin,e}return __extends(e,t),e.panelNames=[QiyuDuiHuanPanel],e}(BaseWinAutoTab);__reflect(QiyuDuiHuanWin.prototype,"QiyuDuiHuanWin"),window.QiyuDuiHuanWin=QiyuDuiHuanWin;var QiyuNewTipsWin=function(t){function e(){var e=t.call(this)||this;return e.skinName="QiyuNewTipsWinEUI",e.mc=new MC,e.mc.y=-100,e.group.addChild(e.mc),e}return __extends(e,t),e.prototype.open=function(){t.prototype.open.call(this),this.updatePanel()},e.prototype.close=function(){t.prototype.close.call(this),this.mc.stop()},e.prototype.updatePanel=function(){this.mc&&this.mc.stop(),this.mc.playFile(getEffName("cfqy"),1,function(){closeWin(e)})},e}(BaseWinSingle);__reflect(QiyuNewTipsWin.prototype,"QiyuNewTipsWin"),window.QiyuNewTipsWin=QiyuNewTipsWin;var QiyuSys=function(t){function e(){var e=t.call(this)||this;return e.yunLiValue=0,e.eventDatas=[],e._duiHuanDatas=[],e.shengLingModel=new ShengLingModel,e.shenYouData=new ShenYouData,e.sysId=PackId.Qiyu,e.reg(4,e.patchQiyuEventInfo),e.reg(5,e.patchQiyuYunliValue),e.reg(6,e.patchQiyuRemind),e.reg(7,e.patchQiyuResult),e.reg(8,e.patchQiyuFBReward),e.reg(9,e.patchQiyuAddEvent),e.reg(11,e.patchShengLingInfo),e.reg(12,e.patchShengLingLevelUp),e.reg(13,e.patchShengLingYinJiUp),e.reg(14,e.patchShengLingStageUp),e.reg(15,e.patchShengLingDaShiUp),e.reg(16,e.patchShengLingTaoZhuangUp),e.reg(17,e.patchShengLingHuanHua),e.reg(21,e.patchShenYouData),e.reg(22,e.patchShenYouUplevel),e.reg(23,e.patchShenYouSkillBuy),e.reg(24,e.patchShenYouHuanHuaUpLevel),e.reg(25,e.patchShenYouHuanHua),e.reg(26,e.patchShenYouYinJiUpLevel),e.reg(28,e.patchShenYouSkillUplevel),e}return __extends(e,t),e.ins=function(){return t.getIns.call(this,e)},e.prototype.sendQiyuEventReward=function(t){var e=this.getBytes(4);e.writeByte(t),this.send(e)},e.prototype.patchQiyuEventInfo=function(t){this.yunLiValue=t.readInt();var e=t.readByte();this.eventDatas.length=0;for(var i=0;e>i;i++){var n=t.readByte(),a=t.readByte(),o=this.createData(a,n);o.parser(t),this.eventDatas.push(o)}RpFun.showQiyuEventRp()},e.prototype.sendQiyuTaskChallenge=function(t,e){void 0===e&&(e=CaiQuan.Def);var i=this.getBytes(5);i.writeByte(t),i.writeByte(e),this.send(i)},e.prototype.patchQiyuYunliValue=function(t){this.yunLiValue=t.readInt(),RpFun.showQiyuEventRp()},e.prototype.sendQiyuDuihuan=function(t,e){void 0===e&&(e=1);var i=this.getBytes(6);i.writeByte(t),i.writeShort(e),this.send(i)},e.prototype.patchQiyuRemind=function(t){for(var e=t.readByte(),i=0;e>i;i++){var n=this.getDuiHuanDataById(t.readByte());n.remind=t.readByte()}RpFun.showQiyuDuihuanRp()},e.prototype.sendQiyuRemind=function(t){var e=this.getBytes(7);e.writeByte(t),this.send(e)},e.prototype.patchQiyuResult=function(t){var e=t.readByte(),i=t.readByte();return[e,i]},e.prototype.patchQiyuFBReward=function(t){for(var e=[],i=t.readByte(),n=0;i>n;n++){var a=new ItemDataReward;a.parser2(t),e.push(a)}return[e]},e.prototype.patchQiyuAddEvent=function(t){t.readByte(),t.readByte();openWin(QiyuNewTipsWin)},e.prototype.patchShengLingInfo=function(t){this.shengLingModel.parserInfo(t)},e.prototype.sendShengLingLevelUp=function(t){var e=this.getBytes(12);e.writeByte(t),this.send(e)},e.prototype.patchShengLingLevelUp=function(t){this.shengLingModel.parserLevelUp(t),RpFun.showShengLingLevelRp(),RpFun.showShengLingDaShiRp(),RpFun.showShengLingYinJiRp()},e.prototype.sendShengLingYinJiUp=function(t){var e=this.getBytes(13);e.writeInt(t),this.send(e)},e.prototype.patchShengLingYinJiUp=function(t){var e=this.shengLingModel.parserYinJiUp(t);if(RpFun.showShengLingYinJiRp(),RpFun.showShengLingTaoZhuangRp(),1==e.level){var i=this.shengLingModel.getYinJiActCountById(e.getShengLingId());i==this.shengLingModel.yinjiCount&&openWin(ShengLingActTipsWin,e.getShengLingId()),RpFun.showShengLingStageRp()}},e.prototype.sendShengLingStageUp=function(t){var e=this.getBytes(14);e.writeByte(t),this.send(e)},e.prototype.patchShengLingStageUp=function(t){this.shengLingModel.parserStageUp(t),RpFun.showShengLingStageRp()},e.prototype.sendShengLingDaShiUp=function(t){var e=this.getBytes(15);e.writeByte(t),this.send(e)},e.prototype.patchShengLingDaShiUp=function(t){this.shengLingModel.parserDaShiUp(t),RpFun.showShengLingDaShiRp()},e.prototype.sendShengLingTaoZhuangUp=function(t){var e=this.getBytes(16);e.writeByte(t),this.send(e)},e.prototype.patchShengLingTaoZhuangUp=function(t){this.shengLingModel.parserTaoZhuangUp(t),RpFun.showShengLingTaoZhuangRp()},e.prototype.sendShengLingHuanHua=function(t){var e=this.getBytes(17);e.writeByte(t),this.send(e)},e.prototype.patchShengLingHuanHua=function(t){this.shengLingModel.huanHuaId=t.readByte()},e.prototype.patchShenYouData=function(t){this.shenYouData.parser(t)},e.prototype.sendShenYouUplevel=function(){var t=this.getBytes(22);this.send(t)},e.prototype.patchShenYouUplevel=function(t){this.shenYouData.level=t.readShort(),RpFun.showShenYouUpLevelRedPoint()},e.prototype.sendShenYouSkillBuy=function(){var t=this.getBytes(23);this.send(t)},e.prototype.patchShenYouSkillBuy=function(t){this.shenYouData.skillCount=t.readByte(),RpFun.showShenYouSkillRedPoint()},e.prototype.sendShenYouHuanHuaUpLevel=function(t){var e=this.getBytes(24);e.writeByte(t),this.send(e)},e.prototype.patchShenYouHuanHuaUpLevel=function(t){var e=t.readByte(),i=t.readShort(),n=this.shenYouData.getHuanHuaDataById(e);n&&(n.stage=i),1==i&&openWin(ShenYouHuanHuaActTipsWin,n),RpFun.showShenYouHuanHuaRedPoint()},e.prototype.sendShenYouHuanHua=function(t){var e=this.getBytes(25);e.writeByte(t),this.send(e)},e.prototype.patchShenYouHuanHua=function(t){var e=t.readByte();this.shenYouData.huanHuaId=e},e.prototype.sendShenYouYinJiUpLevel=function(){var t=this.getBytes(26);this.send(t)},e.prototype.patchShenYouYinJiUpLevel=function(t){this.shenYouData.yinjiLevel=t.readShort(),this.shenYouData.yinjiExp=t.readInt(),RpFun.showShenYouYinJiRedPoint(),RpFun.showShenYouYinJiSkillRedPoint()},e.prototype.sendShenYouSkillUplevel=function(t){var e=this.getBytes(28);e.writeByte(t),this.send(e)},e.prototype.patchShenYouSkillUplevel=function(t){var e=t.readByte(),i=t.readShort(),n=this.shenYouData.getSkillByIndex(e);n&&(n.level=i)},e.prototype.getDuiHuanDatas=function(){if(0==this._duiHuanDatas.length)for(var t=Cfg.getConfigs(AdventureExchangeConfig),e=0;e<t.length;e++){var i=t[e],n=new QiyuDuiHuanData;n.config=i,this._duiHuanDatas.push(n)}return this._duiHuanDatas},e.prototype.getDuiHuanDataById=function(t){for(var e,i=this.getDuiHuanDatas(),n=0;n<i.length;n++)i[n].id==t&&(e=i[n]);return e},e.prototype.getDataByPos=function(t){for(var e in this.eventDatas)if(t==this.eventDatas[e].pos)return this.eventDatas[e];return null},e.prototype.createData=function(t,e){var i,n=Cfg.getConfig(AdventureEventConfig,t),a=getDefinitionByName("QiyuEventData"+n.type);return a&&(i=new a,i.config=n,i.pos=e),i},e}(BaseSys);__reflect(QiyuSys.prototype,"QiyuSys");var System;!function(t){t.qiyuSys=QiyuSys.ins.bind(QiyuSys)}(System||(System={})),window.QiyuSys=QiyuSys;var FortRankConfig=function(){function t(){}return t}();__reflect(FortRankConfig.prototype,"FortRankConfig");var QiyuDuiHuanData=function(){function t(){this.remind=0}return Object.defineProperty(t.prototype,"id",{get:function(){return this.config.id},enumerable:!0,configurable:!0}),t.prototype.getBuyData=function(){var t=this,e=new BuyData;return e.setBuyFun(function(e){QiyuSys.ins().sendQiyuDuihuan(t.id,e)}),e.itemId=this.config.reward[0].id,e.price=this.config.need,e.consumeItemId=CurType.QiyuValue,e},t}();__reflect(QiyuDuiHuanData.prototype,"QiyuDuiHuanData");var FriendLimit=function(){function t(){}return t}();__reflect(FriendLimit.prototype,"FriendLimit");var QiyuEventData1=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.rewards=[],e}return __extends(e,t),e.prototype.parser=function(t){this.state=t.readByte();var e=t.readByte();this.rewards.length=0;for(var i=0;e>i;i++){var n=new ItemDataReward;n.parser(t),this.rewards.push(n)}},e.prototype["goto"]=function(){1==this.getState()||openWin(QiyuCaiQuanWin,this)},e.prototype.getRewards=function(){return this.config.reward},e.prototype.getBtnStr=function(){return Lang.qy_str13},e}(QiyuEventBaseData);__reflect(QiyuEventData1.prototype,"QiyuEventData1"),window.QiyuEventData1=QiyuEventData1;var QiyuEventData2=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.isStart=!1,e.rewards=[],e.taskMaxCount=0,e.taskDatas=[],e}return __extends(e,t),e.prototype.parser=function(t){this.isStart=t.readBoolean(),this.taskDatas.length=0,this.taskMaxCount=t.readByte();for(var e=0;e<this.taskMaxCount;e++){var i=new QiyuTaskData;i.parser(t),i.index=e+1,this.taskDatas.push(i)}this.rewards.length=0;for(var n=t.readByte(),e=0;n>e;e++){var a=new ItemDataReward;a.parser(t),this.rewards.push(a)}},e.prototype["goto"]=function(){if(1==this.getState())QiyuSys.ins().sendQiyuEventReward(this.pos);else for(var t=0,e=this.taskDatas;t<e.length;t++){var i=e[t];if(0==i.state){if(this.isStart){closeWin(QiyuWin);var n=GFunc.createTaskNavData(i.getConfig().controlTarget);n["goto"]()}else QiyuSys.ins().sendQiyuTaskChallenge(this.pos);break}}},e.prototype.canGoto=function(){return this.isStart?!0:t.prototype.canGoto.call(this)},e.prototype.getCurTaskData=function(){for(var t,e=0;e<this.taskDatas.length&&(t=this.taskDatas[e],2==t.state);e++);return t},e.prototype.getRewards=function(){return this.isStart?this.rewards:this.config.reward},e.prototype.getState=function(){return this.getCurTaskData().state},e.prototype.getMaxPro=function(){return this.taskMaxCount},e.prototype.getCurPro=function(){for(var t=0,e=0,i=this.taskDatas;e<i.length;e++){var n=i[e];2==n.state&&(t+=1)}return t},e.prototype.getBtnStr=function(){var t=this.getCurTaskData();return 1==t.index?this.isStart?Lang.qy_str2:Lang.qy_str14:Lang.qy_str2},e.prototype.getDesc=function(){if(this.isStart){var t=this.getCurTaskData(),e=this.getCurTaskData().getConfig().desc;return e=addColor(t.index+"."+e,5308240),e+=addColor("（"+t.jindu+"/"+t.getConfig().target+"）",0==t.state?16731983:5308240)}return""},e}(QiyuEventBaseData);__reflect(QiyuEventData2.prototype,"QiyuEventData2"),window.QiyuEventData2=QiyuEventData2;var FruitConfig=function(){function t(){}return t}();__reflect(FruitConfig.prototype,"FruitConfig");var QiyuEventData4=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return __extends(e,t),e.prototype.getBtnStr=function(){return Lang.qy_str3},e}(QiyuEventData3);__reflect(QiyuEventData4.prototype,"QiyuEventData4"),window.QiyuEventData4=QiyuEventData4;var QiyuEventData5=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.touxianLv=1,e}return __extends(e,t),e.prototype.parser=function(t){this.state=t.readByte(),this.touxianLv=t.readByte()},e.prototype.getBtnStr=function(){return Lang.qy_str4},e.prototype.getTitleRes=function(){return"qy_zycs_msz"+this.config.type+"_"+this.touxianLv},e}(QiyuEventBaseData);__reflect(QiyuEventData5.prototype,"QiyuEventData5"),window.QiyuEventData5=QiyuEventData5;var QiyuEventData6=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.rewards=[],e}return __extends(e,t),e.prototype.parser=function(t){this.timer=DateUtil.formatMiniDateTime(t.readInt()),this.state=t.readByte(),this.rewards.length=0;for(var e=t.readByte(),i=0;e>i;i++){var n=new ItemDataReward;n.parser(t),this.rewards.push(n)}},e.prototype["goto"]=function(){1==this.getState()?QiyuSys.ins().sendQiyuEventReward(this.pos):QiyuSys.ins().sendQiyuTaskChallenge(this.pos)},e.prototype.getBtnStr=function(){return Lang.qy_str5},e}(QiyuEventBaseData);__reflect(QiyuEventData6.prototype,"QiyuEventData6"),window.QiyuEventData6=QiyuEventData6;var QiyuTaskData=function(){function t(){this.index=1,this.id=1,this.state=0,this.jindu=0}return t.prototype.parser=function(t){this.id=t.readInt(),this.state=t.readByte(),this.jindu=t.readShort()},t.prototype.getConfig=function(){return this._config||(this._config=Cfg.getConfig(AdventureTaskConfig,this.id))},t}();__reflect(QiyuTaskData.prototype,"QiyuTaskData");var QiyuDuiHuanItem=function(t){function e(){var e=t.call(this)||this;return e.skinName="QiyuDuiHuanItemEUI",e.setSkinPart("itemIcon",new ItemBase),e.btnDuiHuan.name="btnDuiHuan",e.checkBoxTiXing.name="checkBoxTiXing",e.redPoint.visible=!1,e}return __extends(e,t),e.prototype.dataChanged=function(){if(this.data instanceof QiyuDuiHuanData){var t=this.data,e=t.config,i=GFunc.creatItemDataById(e.reward[0].id);i.count=e.reward[0].count,this.itemIcon.data=i,this.lbName.text=i.cfg.getName(),this.lbName.textColor=GConst.PZColor[i.cfg.quality],this.updateItem()}},e.prototype.updateItem=function(){var t=this.data,e=t.config,i=GFunc.getItemCount(CurType.QiyuValue),n=i>=e.need?5308240:15733780;this.lbConsumeCount.textFlow=addColorTF(""+e.need,n),this.updateRemind(),this.updateRedPoint()},e.prototype.updateRemind=function(){var t=this.data;this.checkBoxTiXing.selected=1==t.remind},e.prototype.updateRedPoint=function(){var t=this.data,e=t.config,i=RpSys.ins().getData(QiyuWin,QiyuEventPanel,QiyuDuiHuanWin,QiyuDuiHuanPanel,e.id);this.btnDuiHuan.redPoint.visible=i},e}(BaseItemRender);__reflect(QiyuDuiHuanItem.prototype,"QiyuDuiHuanItem"),window.QiyuDuiHuanItem=QiyuDuiHuanItem;var FruitTypeConfig=function(){function t(){}return t}();__reflect(FruitTypeConfig.prototype,"FruitTypeConfig");var QiyuEventItem=function(t){function e(){var e=t.call(this)||this;return e.skinName="QiyuEventItemEUI",e.btnSend.name="btnSend",e.rewardList.itemRenderer=ItemBaseRewardActivity,e.rewardList.dataProvider=e.listArr=new eui.ArrayCollection,e.mcBtnSend=new MC,e.mcBtnSend.x=e.btnSend.width/2,e.mcBtnSend.y=e.btnSend.height/2,e.mcBtnSend.scaleX=e.mcBtnSend.scaleY=.8,e.btnSend.addChildAt(e.mcBtnSend,e.btnSend.numChildren-1),e
}return __extends(e,t),e.prototype.dataChanged=function(){if(this.data&&this.data.pos){var t=this.data;this.imgIcon.source="qy_zycs_xbg"+t.config.type+"_jpg",this.imgTitle.source=t.getTitleRes(),this.listArr.source=t.getRewards();var e=t.getDesc();""==e?this.groupDec.visible=!1:(this.groupDec.visible=!0,this.lbDec.textFlow=addColorTF(e)),1==t.getState()?(this.btnSend.label=Lang.common_str81,this.btnSend.skinName="BtnMin1_2min",this.mcBtnSend.playFile(ResMgr.getEffName("public_zycs_button01"),-1),this.mcBtnSend.visible=!0,this.btnSend.redPoint.visible=!1):(this.btnSend.label=t.getBtnStr(),this.btnSend.skinName="BtnMin1_9min",this.mcBtnSend.stop(),this.mcBtnSend.visible=!1,this.btnSend.redPoint.visible=t.getRed()),this.updateTime()}},e.prototype.updateTime=function(){if(this.data&&this.data.pos){var t=this.data,e=t.getTime();e>0?(this.lbTime.text=Lang.qy_str11+"\n"+getFormatTime(e,"hh:mm:ss"),this.btnSend.visible=!1):(this.lbTime.text="",this.btnSend.visible=!0)}},e}(BaseItemRender);__reflect(QiyuEventItem.prototype,"QiyuEventItem"),window.QiyuEventItem=QiyuEventItem;var FubenCondition=function(){function t(){this.level=0,this.power=0}return t}();__reflect(FubenCondition.prototype,"FubenCondition");var QiyuFbPanel3=function(t){function e(){var e=t.call(this)||this;return e.rewards=[],e.skinName="QiyuFbPanel3EUI",e.list.itemRenderer=ItemBaseReward,e.list.dataProvider=e.listData=new eui.ArrayCollection,e.pageArrowComponentBase=new PageArrowCom(e.scroller,94,94),e.pageArrowComponentBase.setBtn(e.btnLeft,e.btnRight),e}return __extends(e,t),e.prototype.open=function(){t.prototype.open.call(this),this.addLsn(LogicSys.ins().patchEnterMap,this.updataMap),this.addLsn(FbSys.ins().patchUpdateFbTime,this.updataMap),this.addLsn(QiyuSys.ins().patchQiyuFBReward,this.updatePanel),this.updatePanel(),this.updataMap(),this.pageArrowComponentBase.open()},e.prototype.removeDisplay=function(){},e.prototype.close=function(){t.prototype.close.call(this),Timer.ins().removeAll(this),this.pageArrowComponentBase.close()},e.prototype.updatePanel=function(t){void 0===t&&(t=[]),t.length&&(this.rewards=t),this.listData.source=this.rewards},e.prototype.updataMap=function(){FbSys.ins().commonEndTick>0?(Timer.ins()["do"](0,1e3,0,this.SweepCountDown,this,TimerType.LAST),this.groupTime.visible=!0):this.groupTime.visible=!1},e.prototype.SweepCountDown=function(){this.bmpTime.text=""+FbSys.ins().surplusTime},e}(BasePanel);__reflect(QiyuFbPanel3.prototype,"QiyuFbPanel3"),window.QiyuFbPanel3=QiyuFbPanel3;var QMDBModel=function(){function t(){this.collectionTimes=0,this.state=0,this.rewardList=[],this.actTick=0,this.boxTick=0}return t.prototype.isOpen=function(){return 1==this.state},t.prototype.isClose=function(){return 0==this.state},t.prototype.canCaiji=function(){return this.isOpen()&&this.hasCaijiCount()},t.prototype.hasCaijiCount=function(){return this.collectionTimes>0},t.prototype.updateActState=function(t){this.state=t.readByte();var e=t.readShort();this.actTick=1e3*e+Actor.ins().serverTime;var i=t.readShort();this.boxTick=1e3*i+Actor.ins().serverTime,this.isClose()&&(this.rewardList=[])},t.prototype.updateReward=function(t){for(var e=t.readByte(),i=[],n=0;e>n;n++){var a=new ItemDataReward;a.parser4(t),i.push(a)}GFunc.mergeItemDataReward(this.rewardList,i)},t.prototype.getNextStartTime=function(){for(var t=Cfg.getConfig(DropBoxConstConfig),e=new Date(Actor.ins().serverTime),i=e.getHours(),n=e.getMinutes(),a=0;a<t.opentime.length;a++){var o=t.opentime[a],s=o[0][0],r=o[0][1],u=o[1][0],h=o[1][1];if(u>i||i==u&&r>n)return new QMDBTimeData(s,r,u,h)}return null},t}();__reflect(QMDBModel.prototype,"QMDBModel"),window.QMDBModel=QMDBModel;var QMDBTimeData=function(){function t(t,e,i,n){this.startHour=t,this.startMinute=e,this.endHour=i,this.endMinute=n}return t}();__reflect(QMDBTimeData.prototype,"QMDBTimeData");var QMDBBoxRewardWin=function(t){function e(){var e=t.call(this)||this;return e.skinName="QMDBBoxRewardWinEUI",e.layer=LayerMgr.Popup,e.list.itemRenderer=ItemBaseRewardName,e.list.dataProvider=e.listarr=new eui.ArrayCollection,e.addBg(),e}return __extends(e,t),e.prototype.open=function(e){t.prototype.open.call(this),this.imgTitle.source=2==e?"qmdb_zycs_t2":"qmdb_zycs_t1";var i=Cfg.getConfig(DropBoxConstConfig);2==e?this.listarr.source=i.boxRewards2:this.listarr.source=i.boxRewards1},e}(BaseWinSingle);__reflect(QMDBBoxRewardWin.prototype,"QMDBBoxRewardWin"),window.QMDBBoxRewardWin=QMDBBoxRewardWin;var QMDBFbGoCityWin=function(t){function e(){var e=t.call(this)||this;return e.skinName="QMDBFbGoCityWinEUI",e}return __extends(e,t),e.prototype.open=function(){for(var e=[],i=0;i<arguments.length;i++)e[i]=arguments[i];t.prototype.open.call(this,0),GFunc.move(this.groupGoCity,new XY(0,30),new XY(0,0)),this.addLsn(LogicSys.ins().patchEnterMap,this.onClose)},e.prototype.onClose=function(){closeWin(this)},e}(BaseWinSingle);__reflect(QMDBFbGoCityWin.prototype,"QMDBFbGoCityWin"),window.QMDBFbGoCityWin=QMDBFbGoCityWin;var QMDBFbPanel=function(t){function e(){var e=t.call(this)||this;return e.skinName="QMDBFbPanelEUI",e.lbReward.textFlow=addColorTF(e.lbReward.text,null,!0),e.lbShowReward1.textFlow=addColorTF(e.lbShowReward1.text,null,!0),e.lbShowReward2.textFlow=addColorTF(e.lbShowReward2.text,null,!0),e.maskBoxBar=new MaskSector,e.maskBoxBar.x=e.maskBoxBar.y=52,e.maskBoxBar.setParam(60,-90,270),e.groupMask.addChild(e.maskBoxBar),e.imgBoxBar.mask=e.maskBoxBar,e.selectMc=new MC,e.selectMc.touchEnabled=!1,e}return __extends(e,t),e.prototype.open=function(){var t=FbSys.ins();this.addClickE(this,this.onClick),this.addLsn(LogicSys.ins().patchCaijiEntity,this.onCollectionEntity),this.addLsn(t.patchQmdbInfo,this.updateCount),this.addLsn(t.patchQmdbActState,this.updatePanel),this.addLsn(LogicSys.ins().patchEntityClick,this.onEntityClick),this.addLsn(MapContainer.ins().patchGridClick,this.onGridClick),this.updateCount(),FbSys.ins().qmdbModel.collectionTimes?(this.group1.visible=!0,GFunc.move(this.group1,new XY(this.group1.x,this.group1.y),new XY(this.group1.x,this.group1.y-40))):this.removeTween()},e.prototype.close=function(){this.removeTween(),t.prototype.close.call(this)},e.prototype.removeTween=function(){egret.Tween.removeTweens(this.group1),this.group1.visible=!1},e.prototype.onGridClick=function(){this.onClickBox(null)},e.prototype.updateTime=function(){t.prototype.updateTime.call(this),this.updatePanel()},e.prototype.onEntityClick=function(t){if(t.entityType==EntityType.COLLECTION){if(!t.isBeCaiJi())return void showtipsFail(Lang.db_str5);if(this.checkCaiji()){var e=t.getCfgId(),i=Cfg.getConfig(DropBoxConstConfig),n=void 0;n=i.monster1==t.getCfgId()?this.btnBox1:i.monster2==t.getCfgId()?this.btnBox2:null,this.onClickBox(n);var a=LogicSys.ins().centerEntity.AI;a.stopAndStand(),a.startCaiJi(t.handle,e)}}},e.prototype.updatePanel=function(){var t=Actor.ins().serverTime,e=FbSys.ins().qmdbModel.actTick-t;e=e>0?e:0,this.lbTime.text=DateUtil.formatDayTime(e,"mm:ss"),e=Math.floor((FbSys.ins().qmdbModel.boxTick-t)/1e3),e=e>0?e:0,this.lbBXtime.text=e+Lang.common_miao},e.prototype.updateCount=function(){var t=FbSys.ins().qmdbModel.collectionTimes,e=Cfg.getConfig(DropBoxConstConfig),i=t>0?5767068:15733780,n=e.collecttimes-t;this.lbCount.textFlow=addColorTF(n+"/"+e.collecttimes,i)},e.prototype.onCollectionEntity=function(t,e,i,n){if(n==Actor.ins().handle)if(2==e){var a=Math.floor((i-Actor.ins().serverTime)/1e3);a>0&&(this.maskBoxBar.setValue(0,a),this.maskBoxBar.setValue(a,a,1e3*a),this.collectionGroup.visible=!0)}else if(0==e||1==e)this.collectionGroup.visible=!1;else if(3==e&&(this.collectionGroup.visible=!1,!FbSys.ins().qmdbModel.hasCaijiCount())){var o=LogicSys.ins().centerEntity.AI;o.stopAndStand(),o.startNone()}},e.prototype.onClick=function(t){var e=this,i=LogicSys.ins();switch(t.target){case this.lbReward:openWin(QMDBRewardWin);break;case this.lbShowReward1:openWin(QMDBBoxRewardWin,1);break;case this.lbShowReward2:openWin(QMDBBoxRewardWin,2);break;case this.btnBox1:if(this.checkCaiji()){this.onClickBox(this.btnBox1);var n=i.centerEntity,a=Cfg.getConfig(DropBoxConstConfig),o=i.getNearestCaijiById(n,a.monster1);if(o)this.startCaiji(a.monster1);else{var s=MathUtil.randomArray(a.pos1),r=new XY(s[0]*MapBase.CELL_SIZE,s[1]*MapBase.CELL_SIZE);i.onMapGridClick(r,function(){var t=i.getNearestCaijiById(n,a.monster1);t?e.startCaiji(a.monster1):showtipsFail(Lang.db_str6)})}}break;case this.btnBox2:if(this.checkCaiji()){this.onClickBox(this.btnBox2);var u=i.centerEntity,h=Cfg.getConfig(DropBoxConstConfig),o=i.getNearestCaijiById(u,h.monster2);if(o)this.startCaiji(h.monster2);else{var s=MathUtil.randomArray(h.pos2),r=new XY(s[0]*MapBase.CELL_SIZE,s[1]*MapBase.CELL_SIZE);i.onMapGridClick(r,function(){var t=i.getNearestCaijiById(u,h.monster2);t?e.startCaiji(h.monster2):showtipsFail(Lang.db_str6)})}}}},e.prototype.onClickBox=function(t){if(t){this.removeTween();var e=t===this.btnBox1?"dropbox":"dropbox1";this.selectMc.playFile(getEffName(e),-1),this.selectMc.x=62,this.selectMc.y=60,t.addChild(this.selectMc)}else this.selectMc.reset(),DisUtil.remove(this.selectMc)},e.prototype.startCaiji=function(t){var e=LogicSys.ins().centerEntity.AI;e.stopAndStand(),e.startCaiJi(0,t)},e.prototype.checkCaiji=function(){return 0==FbSys.ins().qmdbModel.collectionTimes?(showtipsFail(Lang.db_str7),!1):LogicSys.ins().centerEntity.isBianShenStatus()?(showtipsFail(Lang.db_str8),!1):!0},e}(BasePanel);__reflect(QMDBFbPanel.prototype,"QMDBFbPanel"),window.QMDBFbPanel=QMDBFbPanel;var FubenConfig=function(){function t(){}return Object.defineProperty(t,"group",{get:function(){return"group"},enumerable:!0,configurable:!0}),t}();__reflect(FubenConfig.prototype,"FubenConfig");var QMDBRewardWin=function(t){function e(){var e=t.call(this)||this;return e.skinName="QMDBRewardWinEUI",e.layer=LayerMgr.Popup,e.list.itemRenderer=ItemBaseRewardName,e.list.dataProvider=e.listarr=new eui.ArrayCollection,e.addBg(),e}return __extends(e,t),e.prototype.open=function(e){t.prototype.open.call(this),this.listarr.source=FbSys.ins().qmdbModel.rewardList},e}(BaseWinSingle);__reflect(QMDBRewardWin.prototype,"QMDBRewardWin"),window.QMDBRewardWin=QMDBRewardWin;var RankSys=function(t){function e(){var e=t.call(this)||this;return e.rankTypeData=[],e.showRankType=[],e.indexToType=[RankType.JSZL,RankType.JSDJ,RankType.SMZL,RankType.YBZL,RankType.JLZL,RankType.SQZL,RankType.CBZL,RankType.SZZL,RankType.MLZL,RankType.HQZL,RankType.LLDJ,RankType.TXDJ,RankType.ZBZL],e.sysId=PackId.Rank,e.reg(1,e.patchRankData),e.reg(2,e.patchPraiseData),e.reg(3,e.patchPraiseResult),e.reg(4,e.patchAllPraiseData),e.reg(7,e.patchShowRankType),e}return __extends(e,t),e.ins=function(){return t.getIns.call(this,e)},e.prototype.sendGetRankData=function(t){var e=this.getBytes(1);e.writeShort(t),this.send(e)},e.prototype.patchRankData=function(t){var e=t.readShort(),i=this.getRankData(e);return t.position-=2,i.parser(t),i},e.prototype.sendGetPraise=function(t){var e=this.getBytes(2);e.writeShort(t),this.send(e)},e.prototype.patchPraiseData=function(t){var e=t.readByte(),i=this.getRankData(e);return i.praise.parser(t,e),i},e.prototype.sendPraise=function(t){var e=this.getBytes(3);e.writeShort(t),this.send(e)},e.prototype.patchPraiseResult=function(t){var e=this.getRankData(t.readShort());return e.praise.praiseCount=t.readShort(),RpFun.showRankRedpoint(),e},e.prototype.patchAllPraiseData=function(t){for(var e=t.readShort(),i=0;e>i;i++){var n=t.readShort(),a=this.getRankData(n);a.type=n,a.praise.praiseCount=t.readShort()}RpFun.showRankRedpoint()},e.prototype.sendShowRankType=function(){this.sendBase(7)},e.prototype.patchShowRankType=function(t){for(var e=[],i=t.readByte(),n=0;i>n;n++){var a=t.readByte();this.indexToType.indexOf(a)>-1&&e.push(a)}this.showRankType.length=0;for(var o=0;o<this.indexToType.length;o++){var a=this.indexToType[o];e.indexOf(a)>-1&&this.showRankType.push(a)}RpFun.showRankRedpoint()},e.prototype.getRankData=function(t){return this.rankTypeData[t]||(this.rankTypeData[t]=new RankTypeData)},e.prototype.canPraiseByType=function(t){return this.rankTypeData[t]&&this.rankTypeData[t].praise.canPraise()&&this.indexToType.indexOf(t)>-1&&(this.showRankType.indexOf(t)>-1||this.rankTypeData[t].isShowPraise())},e.prototype.canPraiseInAll=function(){for(var t=0,e=this.rankTypeData;t<e.length;t++){var i=e[t];if(i&&i.praise.canPraise())return!0}return!1},e.prototype.getCanPraiseIndex=function(){for(var t,e=0;e<this.indexToType.length;e++)if(this.canPraiseByType(this.indexToType[e])){t=this.indexToType.indexOf(this.indexToType[e]);break}return t},e.prototype.getPraiseCount=function(){for(var t=0,e=this.showRankType,i=!1,n=0,a=e;n<a.length;n++){var o=a[n];i=this.canPraiseByType(o),i&&t++}return t},e.prototype.canRankWinPraise=function(){for(var t=this.showRankType,e=!1,i=0,n=t;i<n.length;i++){var a=n[i];if(e=this.canPraiseByType(a))break}return e},e.prototype.getTSSZLeftTime=function(){var t=new Date(Actor.ins().serverOpenTimer);t.setHours(0),t.setMinutes(0),t.setSeconds(0);var e=t.getTime()+Cfg.getConfig(RankCommonConfig).endtime*DateUtil.MS_PER_DAY,i=Math.max(e-Actor.ins().serverTime,0)/1e3;return i},e.prototype.getJobByRankType=function(t){var e=0;return t==RankType.JOB_ZS?e=JobConst.ZhanShi:t==RankType.JOB_FS?e=JobConst.FaShi:t==RankType.JOB_GJS&&(e=JobConst.GongJianShou),e},e.prototype.getRankTypeByJob=function(t){var e;return e=t==JobConst.ZhanShi?RankType.JOB_ZS:t==JobConst.FaShi?RankType.JOB_FS:t==JobConst.GongJianShou?RankType.JOB_GJS:RankType.JOB_ZS},e.prototype.getRankNumber=function(t,e){var i=0;switch(e){case RankType.JSZL:i=t.power;break;case RankType.CBZL:i=t.power;break;case RankType.JOB_ZS:case RankType.JOB_FS:case RankType.JOB_GJS:case RankType.GuaJi:i=t.power;break;case RankType.JSDJ:i=t.power;break;case RankType.WanMo:case RankType.HeiAn:i=t.rank;break;case RankType.JJC:i=t.rank;break;case RankType.Fort:i=t.score;break;case RankType.QHDJ:case RankType.PYZL:case RankType.JLZL:case RankType.YSZL:case RankType.HFDJ:case RankType.gem:case RankType.MLZL:case RankType.juhun:case RankType.emoisle:case RankType.FieldPk:case RankType.Qizhi:case RankType.CBZL:i=t.dabiaoValue}return i},e}(BaseSys);__reflect(RankSys.prototype,"RankSys");var System;!function(t){t.rankSys=RankSys.ins.bind(RankSys)}(System||(System={})),window.RankSys=RankSys;var PraiseData=function(){function t(){this.szId=0,this.sqId=0,this.wingId=0,this.hqId=0,this.junxianId=0,this.txId=0,this.titleId=0,this.damonId=0,this.yongbingId=0,this.meilinId=0,this.shenmoId=0,this.mzId=0,this.sex=0}return t.prototype.canPraise=function(){return this.praiseCount<1},t.prototype.parser=function(t,e){this.type=e;var i=t.readByte();if(this.praiseCount=t.readByte(),1==i)switch(this.type){case RankType.JLZL:this.damonId=t.readInt(),this.mzId=t.readInt();break;case RankType.YBZL:this.yongbingId=t.readInt(),this.mzId=t.readInt();break;case RankType.SQZL:this.job=t.readByte(),this.sqId=t.readInt();break;case RankType.CBZL:this.job=t.readByte(),this.wingId=t.readInt();break;case RankType.SZZL:this.job=t.readByte(),this.sex=t.readByte(),this.szId=t.readInt();break;case RankType.MLZL:this.job=t.readByte(),this.meilinId=t.readInt();break;case RankType.SMZL:this.job=t.readByte(),this.shenmoId=t.readInt();break;default:this.job=t.readByte(),this.sex=t.readByte(),this.szId=t.readInt(),this.sqId=t.readInt(),this.wingId=t.readInt(),this.txId=t.readInt(),this.titleId=t.readInt(),this.mzId=t.readInt(),this.damonId=t.readInt(),this.meilinId=t.readInt(),this.junxianId=t.readInt(),this.hqId=t.readInt()}},t}();__reflect(PraiseData.prototype,"PraiseData");var FubenConstConfig=function(){function t(){}return t}();__reflect(FubenConstConfig.prototype,"FubenConstConfig");var RankDataCommon=function(t){function e(){var e=t.call(this)||this;return e.dabiaoValue=0,e}return __extends(e,t),e.prototype.parser=function(t){this.rank=t.readShort(),this.userId=t.readInt(),this.playerName=t.readString(),this.dabiaoValue=t.readDouble()},e}(RankData);__reflect(RankDataCommon.prototype,"RankDataCommon");var RankDataFieldPk=function(t){function e(){var e=t.call(this)||this;return e.dabiaoValue=0,e}return __extends(e,t),e.prototype.parser=function(e){t.prototype.parser.call(this,e),this.dabiaoValue=e.readDouble(),this.vipLv=e.readShort()},e.prototype.getRankStr=function(){return""+Lang.fb_str253+this.dabiaoValue},e}(RankData);__reflect(RankDataFieldPk.prototype,"RankDataFieldPk");var RankDataGuaJi=function(t){function e(){var e=t.call(this)||this;return e.guan=0,e}return __extends(e,t),e.prototype.parser=function(e){t.prototype.parser.call(this,e),this.guan=e.readDouble()},e.prototype.getRankStr=function(){return""+this.guan},e}(RankData);__reflect(RankDataGuaJi.prototype,"RankDataGuaJi");var RankDataHQZL=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return __extends(e,t),e.prototype.getRankStr=function(){return this.power>=1e8?Lang.rank_str15+"："+GFunc.overLength(this.power,2):Lang.rank_str15+"："+GFunc.overLength(this.power)},e}(RankDataPower);__reflect(RankDataHQZL.prototype,"RankDataHQZL");var RankDataJJC=function(t){function e(){var e=t.call(this)||this;return e.power=0,e.guildName="",e}return __extends(e,t),e.prototype.parser=function(e){t.prototype.parser.call(this,e),this.power=e.readDouble(),this.guildName=e.readString()},e}(RankData);__reflect(RankDataJJC.prototype,"RankDataJJC");var RankDataJLZL=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return __extends(e,t),e.prototype.getRankStr=function(){return this.power>=1e8?Lang.rank_str11+"："+GFunc.overLength(this.power,2):Lang.rank_str11+"："+GFunc.overLength(this.power)},e}(RankDataPower);__reflect(RankDataJLZL.prototype,"RankDataJLZL");var RankDataJob=function(t){function e(){return t.call(this)||this}return __extends(e,t),e}(RankData);__reflect(RankDataJob.prototype,"RankDataJob");var RankDataLadder=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.ladderLevel=1,e.id=0,e.count=0,e.conf=null,e}return __extends(e,t),e.prototype.parser=function(t){this.rank=t.readShort(),this.playerName=t.readString(),this.ladderLevel=t.readInt(),this.id=t.readInt(),this.count=t.readInt()},e.prototype.getRankStr=function(){var t="";return t=this.ladderLevel==LadderSys.ins().MAX_LEVEL?""+this.getConfig().showLevel:""+this.getConfig().showLevel+this.getConfig().showDan+Lang.fb_str135},e.prototype.getConfig=function(){return this.conf||(this.conf=Cfg.getConfig(TianTiDanConfig,this.ladderLevel,this.id))},e}(RankData);__reflect(RankDataLadder.prototype,"RankDataLadder");var RankDataLevel=function(t){function e(){var e=t.call(this)||this;return e.level=0,e}return __extends(e,t),e.prototype.parser=function(e){t.prototype.parser.call(this,e),this.level=e.readDouble()},e.prototype.getRankStr=function(){return Lang.common_str30+"："+GFunc.GetLvStrByLv(this.level)},e}(RankData);__reflect(RankDataLevel.prototype,"RankDataLevel");var RankDataLLDJ=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.id=1,e}return __extends(e,t),e.prototype.parser=function(e){t.prototype.parser.call(this,e),this.id=e.readDouble()},e.prototype.getRankStr=function(){var t=Cfg.getConfig(JunxianLevelConfig,this.id);return Lang.rank_str16+"："+Lang.junxianName[t.junxian]+GFunc.getChineseNum(t.level)+Lang.common_jie},e}(RankData);__reflect(RankDataLLDJ.prototype,"RankDataLLDJ");var RankDataMZZL=function(t){function e(){return t.call(this)||this}return __extends(e,t),e}(RankData);__reflect(RankDataMZZL.prototype,"RankDataMZZL");var FubenGroupConfig=function(){function t(){}return t}();__reflect(FubenGroupConfig.prototype,"FubenGroupConfig");var RankDataQHZL=function(t){function e(){return t.call(this)||this}return __extends(e,t),e}(RankData);__reflect(RankDataQHZL.prototype,"RankDataQHZL");var RankDataRedFort=function(t){function e(){var e=t.call(this)||this;return e.floor=0,e.score=0,e}return __extends(e,t),e.prototype.parser=function(t){this.rank=t.readShort(),this.userId=t.readInt(),this.playerName=t.readString(),this.floor=t.readShort(),this.score=t.readInt()},e}(RankData);__reflect(RankDataRedFort.prototype,"RankDataRedFort");var RankDataSMZL=function(t){function e(){return t.call(this)||this}return __extends(e,t),e}(RankDataPower);__reflect(RankDataSMZL.prototype,"RankDataSMZL");var RankDataTXDJ=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.id=0,e}return __extends(e,t),e.prototype.parser=function(e){t.prototype.parser.call(this,e),this.id=e.readDouble()},e.prototype.getRankStr=function(){var t=Cfg.getConfig(TouxianConfig,this.id);return Lang.rank_str17+"："+t.name+GFunc.getChineseNum(t.stage)+Lang.common_jie},e}(RankData);__reflect(RankDataTXDJ.prototype,"RankDataTXDJ");var RankDataWanmo=function(t){function e(){return t.call(this)||this}return __extends(e,t),e.prototype.parser=function(e){t.prototype.parser.call(this,e),this.fbCount=e.readDouble()},e}(RankData);__reflect(RankDataWanmo.prototype,"RankDataWanmo");var RankDataWeiWang=function(t){function e(){return t.call(this)||this}return __extends(e,t),e}(RankData);__reflect(RankDataWeiWang.prototype,"RankDataWeiWang");var RankDataWing=function(t){function e(){return t.call(this)||this}return __extends(e,t),e}(RankDataPower);__reflect(RankDataWing.prototype,"RankDataWing");var RankDataYongZheShiLian=function(t){function e(){return t.call(this)||this}return __extends(e,t),e.prototype.parser=function(e){t.prototype.parser.call(this,e),this.ceng=e.readShort(),this.stage=e.readShort()},e}(RankData);__reflect(RankDataYongZheShiLian.prototype,"RankDataYongZheShiLian");var RankDataZMZL=function(t){function e(){var e=t.call(this)||this;return e.guildName="",e.guildLv=0,e}return __extends(e,t),e.prototype.parser=function(t){this.rank=t.readShort(),this.guildName=t.readString(),this.guildLv=t.readDouble()},e.prototype.getRankName=function(){return this.guildName},e.prototype.getRankStr=function(){return""+Lang.common_str84+this.guildLv},e}(RankData);__reflect(RankDataZMZL.prototype,"RankDataZMZL");var FubenLostSkipConfig=function(){function t(){}return t}();__reflect(FubenLostSkipConfig.prototype,"FubenLostSkipConfig");var RankTypeData=function(){function t(){this.praise=new PraiseData,this.dataList=[]}return t.prototype.parser=function(t){this.type=t.readShort();var e=t.readShort();this.dataList.length=0,this.top=null;for(var i=0;e>i;i++){var n=void 0;switch(this.type){case RankType.JSZL:case RankType.YBZL:case RankType.SQZL:case RankType.SZZL:case RankType.MLZL:case RankType.ZBZL:case RankType.JOB_ZS:case RankType.JOB_FS:case RankType.JOB_GJS:n=new RankDataPower;break;case RankType.HQZL:n=new RankDataHQZL;break;case RankType.JSDJ:n=new RankDataLevel;break;case RankType.GuaJi:n=new RankDataGuaJi;break;case RankType.WanMo:case RankType.HeiAn:n=new RankDataWanmo;break;case RankType.JJC:n=new RankDataJJC;break;case RankType.ZMZL:n=new RankDataZMZL;break;case RankType.JLZL:n=new RankDataJLZL;break;case RankType.CBZL:n=new RankDataWing;break;case RankType.LLDJ:n=new RankDataLLDJ;break;case RankType.TXDJ:n=new RankDataTXDJ;break;case RankType.SMZL:n=new RankDataSMZL;break;case RankType.Fort:n=new RankDataRedFort;break;case RankType.Ladder:n=new RankDataLadder;break;case RankType.FieldPk:n=new RankDataFieldPk;break;case RankType.QHZL:n=new RankDataQHZL;break;case RankType.MZZL:n=new RankDataMZZL;break;case RankType.QHDJ:case RankType.PYZL:case RankType.YSZL:case RankType.HFDJ:case RankType.gem:case RankType.juhun:case RankType.emoisle:case RankType.Qizhi:n=new RankDataCommon;break;case RankType.weiwang:n=new RankDataWeiWang;break;case RankType.YongZheShiLian:n=new RankDataYongZheShiLian}n.parser(t),0==i?this.top=n:this.dataList.push(n)}this.myRank=t.readShort()},t.prototype.isShowPraise=function(){return null!=this.top||this.dataList.length>0},t.prototype.getFullDatalist=function(){return this.top?[].concat(this.top).concat(this.dataList):[]},t}();__reflect(RankTypeData.prototype,"RankTypeData");var GainItemWayConfig=function(){function t(){}return t.itemId="itemId",t}();__reflect(GainItemWayConfig.prototype,"GainItemWayConfig");var TSSZPanelItem=function(t){function e(){var e=t.call(this)||this;return e.skinName="TSSZPanelItemEUI",e}return __extends(e,t),e.prototype.dataChanged=function(){var t=this.data;t.rank<=3?this.currentState="s"+t.rank:this.currentState="s4",this.lbRank.text=t.rank.toString(),this.lbName.text=t.playerName,this.lbPower.text=t.power.toString()},e}(BaseItemRender);__reflect(TSSZPanelItem.prototype,"TSSZPanelItem"),window.TSSZPanelItem=TSSZPanelItem;var TSSZPanelRankItem=function(t){function e(){var e=t.call(this)||this;return e.skinName="TSSZPanelRankItemEUI",e}return __extends(e,t),e.prototype.dataChanged=function(){var t=this.data;t.rank<=3?this.currentState="s"+t.rank:this.currentState="s4",this.lbRank.text=t.rank.toString(),this.lbName.text=t.playerName,this.lbPower.text=t.power.toString()},e}(BaseItemRender);__reflect(TSSZPanelRankItem.prototype,"TSSZPanelRankItem"),window.TSSZPanelRankItem=TSSZPanelRankItem;var TSSZPanelTabItem=function(t){function e(){var e=t.call(this)||this;return e.skinName="TSSZPanelTabItemEUI",e}return __extends(e,t),e.prototype.dataChanged=function(){var t=this.data;null!=t?(this.iconDisplay1.source=this.getIconDisplay(),this.iconDisplay.source=this.getSelectIcon(),this.labelName.text=Cfg.getConfig(TSSZConfig,t).name,this.updateRp()):this.iconDisplay.source=""},e.prototype.updateRp=function(){var t=this.data;t&&(this.redPoint.visible=RpSys.ins().getData(ExtCom,TSSZWin,TSSZPanel,t))},e.prototype.getIconDisplay=function(){var t=this.data;return null!=t?"tssz_zycs_tap"+t+"a":void 0},e.prototype.getSelectIcon=function(){var t=this.data;return null!=t?"tssz_zycs_tap"+t:void 0},e}(BaseItemRender);__reflect(TSSZPanelTabItem.prototype,"TSSZPanelTabItem"),window.TSSZPanelTabItem=TSSZPanelTabItem;var TSSZWin=function(t){function e(){var e=t.call(this)||this;return e.winType=WinType.MainWin,e}return __extends(e,t),e.panelNames=[TSSZPanel],e}(BaseWinAutoTab);__reflect(TSSZWin.prototype,"TSSZWin"),window.TSSZWin=TSSZWin;var GBConstConfig=function(){function t(){}return t}();__reflect(GBConstConfig.prototype,"GBConstConfig");var RankItemPower=function(t){function e(){return t.call(this)||this}return __extends(e,t),e.prototype.dataChanged=function(){t.prototype.dataChanged.call(this)},e}(RankItemBase);__reflect(RankItemPower.prototype,"RankItemPower"),window.RankItemPower=RankItemPower;var GBDabiaoRewardConfig=function(){function t(){}return t}();__reflect(GBDabiaoRewardConfig.prototype,"GBDabiaoRewardConfig");var GBGuessConfig=function(){function t(){}return t}();__reflect(GBGuessConfig.prototype,"GBGuessConfig");var GBInspireConfig=function(){function t(){}return t}();__reflect(GBInspireConfig.prototype,"GBInspireConfig");var RechargeActSys=function(t){function e(){var e=t.call(this)||this;e.costList=0,e.monthFlag=0,e.firstRechargeData=new FirstRechargeData,e.firstRechargeEveryDay=new RechargeData,e.redbaoNum=0,e.redBaoSendData=[],e.rechargeNum=0,e.redbaoRobDatas=[],e.yymsRechargeStates=[],e.svipmsRechargeStates=[],e.jinZuanBagItemDatas=[],e.firstPower=0,e.zeroBuyDatas=[],e.yzzhData=new YZZHData,e.firstOpen=!0,e.tipsDatas=[],e.sysId=PackId.RechargeActivity,e.reg(1,e.patchInitRechargeEveryday),e.reg(2,e.patchRechargeEveryday),e.reg(10,e.patchUpDataItem),e.reg(20,e.patchGetMonthDay),e.reg(21,e.patchFirstRecharge),e.reg(22,e.patchZZTQ),e.reg(23,e.patchZZTQBossAutoTZ),e.reg(41,e.patchRedbaoInfo),e.reg(43,e.patchRedbaoRobInfo),e.reg(44,e.patchRedbaoRobResult),e.reg(45,e.doRedbaoLog),e.reg(46,e.patchRedbaoInfo2),e.reg(53,e.patchYYMS),e.reg(54,e.patchSVIPMS),e.reg(60,e.patchJinZuanValueUpdate),e.reg(61,e.patchJinZuanData),e.reg(62,e.patchJinZuanChouJian),e.reg(63,e.patchJinZuanJiLu),e.reg(64,e.patchJinZuanZhuFuReward),e.reg(65,e.patchJinZuanShopData),e.reg(66,e.patchJinZuanShopRefresh),e.reg(67,e.patchJinZuanShopBuy),e.reg(68,e.patchZeroBuyData),e.reg(69,e.patchZeroBuyGetAward),e.reg(74,e.patchsendZeroBuyBuy),e.reg(70,e.patchBBFLInfo),e.reg(71,e.patchBBFLReward),e.reg(72,e.patchBBFLLoginDay),e.reg(73,e.patchBBFLBuy),e.reg(80,e.patchYiYuanData),e.reg(81,e.patchYiYuanReceived),e.reg(90,e.patchYZZHData),e.reg(91,e.patchYZZHBuyUpdate),e.reg(92,e.patchYZZHBuyLevel),e.reg(93,e.patchYZZHJieDuanTaskUpdate),e.reg(94,e.patchYZZHJieDuanTaskGet),e.reg(95,e.patchYZZHGetExp),e.reg(96,e.patchYZZHGetReward);for(var i=0;3>i;i++)e.yymsRechargeStates[i]=0;for(var i=0;3>i;i++)e.svipmsRechargeStates[i]=0;for(var i=0;3>i;i++)e.zeroBuyDatas[i]=new ZeroBuyData;return e.jinZuanData=new JinZuanData,e.jinZuanData.iniData(),e.bbflModel=new BBFLModel,e.rechargeYiYuanData=new RechargeYiYuanData,e}return __extends(e,t),e.ins=function(){return t.getIns.call(this,e)},e.prototype.patchInitRechargeEveryday=function(t){this.firstRechargeEveryDay.parser(t),this.firstRechargeEveryDay.isEverydayFirst&&isShowWin(RechargeWin)&&openWin(RechargeWin1,2),this.updateShouHuActItemid(),this.patchUpdateRecharge(),RpFun.showFirstRechargeEverydayRedPoint()},e.prototype.sendRechargeEveryday=function(t){void 0===t&&(t=1);var e=this.getBytes(2);e.writeShort(t),this.send(e)},e.prototype.patchRechargeEveryday=function(t){this.firstRechargeEveryDay.change(t),this.updateShouHuActItemid(),RpFun.showFirstRechargeEverydayRedPoint(),this.patchUpdateRecharge()},e.prototype.updateShouHuActItemid=function(){var t=this.firstRechargeEveryDay,e=t.configs;ShouHuNewSys.ins().damonModel.actZhiZhengItemId=[],ShouHuNewSys.ins().yongbingModel.actZhiZhengItemId=[],ShouHuNewSys.ins().shenmoModel.actZhiZhengItemId=[];for(var i=0;i<e.length;i++){var n=e[i],a=t.states[i];1!=a&&(ShouHuNewSys.ins().damonModel.actZhiZhengItemId=ShouHuNewSys.ins().damonModel.actZhiZhengItemId.concat(GFunc.getItemListByReward(n.awardList)),ShouHuNewSys.ins().yongbingModel.actZhiZhengItemId=ShouHuNewSys.ins().yongbingModel.actZhiZhengItemId.concat(GFunc.getItemListByReward(n.awardList)),ShouHuNewSys.ins().shenmoModel.actZhiZhengItemId=ShouHuNewSys.ins().shenmoModel.actZhiZhengItemId.concat(GFunc.getItemListByReward(n.awardList)))}},e.prototype.patchUpdateRecharge=function(){},e.prototype.patchUpDataItem=function(t){this.costList=t.readInt()},e.prototype.patchGetMonthDay=function(t){var e=t.readUnsignedInt();this.monthFlag=t.readInt();var i=ActSys.ins().getActDataById(ActId.ID_99900);i||(i=ActSys.ins().createData(ActId.ID_99900,ActType.TYPE_201)),i.endTime=i.jiesuanTime=Actor.ins().serverTime+1e3*e,RpFun.showMonthCardRedPoint()},e.prototype.senbFirstRecharge=function(t){var e=this.getBytes(21);e.writeByte(t),this.send(e)},e.prototype.patchFirstRecharge=function(t){this.firstRechargeData.patchFirstRecharge(t),RpFun.showFirstRecharge()},e.prototype.openFirstRechargeTipsWin=function(){GFunc.isSysOpen(260)&&!e.ins().firstRechargeData.isRecharge()&&(GFunc.isInGuaJiFb()||GFunc.isInCity())&&(this.firstPower=0,openWin(FirstRechargeTipsWin))},e.prototype.patchZZTQ=function(t){var e=ActSys.ins().getActDataById(ActId.ID_99500);e||(e=ActSys.ins().createData(ActId.ID_99500,ActType.TYPE_202)),e.commonData=t.readByte();var i=t.readByte();if(e instanceof ActData202_1){var n=e.isAct();n&&RpFun.showZZTQCardRedPoint(),e.bossDatas.length=0;for(var a=0;i>a;a++){var o=t.readShort(),s=t.readByte(),r=new ActData202_1BossData;r.sysId=o,r.state=s,e.bossDatas.push(r)}}},e.prototype.sendZZTQBossAutoTZ=function(t,e){var i=this.getBytes(23);i.writeShort(t),i.writeByte(e),this.send(i)},e.prototype.patchZZTQBossAutoTZ=function(t){for(var e=t.readShort(),i=t.readByte(),n=ActSys.ins().getActDataById(ActId.ID_99500),a=0;a<n.bossDatas.length;a++){var o=n.bossDatas[a];if(o.sysId==e){o.state=i;break}}},e.prototype.patchRedbaoInfo=function(t){this.redbaoNum=t.readShort(),this.redBaoSendData=[];for(var e=0;e<this.redbaoNum;e++){var i=new RedBaoSendData;i.parser(t),this.redBaoSendData.push(i)}this.rechargeNum=t.readInt();t.readBoolean();RpFun.showSendRedBaoRedPoint()},e.prototype.sendRedbaoRequest=function(){var t=this.getBytes(42);this.send(t)},e.prototype.patchRedbaoRobInfo=function(t){var e=new RedBaoRobData;e.parser(t),this.redbaoRobDatas.unshift(e)
},e.prototype.sendRedbaoRob=function(t){var e=this.getBytes(44);e.writeInt(t),this.send(e)},e.prototype.patchRedbaoRobResult=function(t){for(var e=t.readInt(),i=0,n=this.redbaoRobDatas;i<n.length;i++){var a=n[i];if(a.redbaoId==e){a.parser2(t),a.receiveState==RedbaoReceiveState.guoQi?showtipsFail(Lang.recharge_str16):openWin(RedBaoResultWin,a);break}}},e.prototype.sendRedbaoLog=function(t){var e=this.getBytes(45);e.writeInt(t),this.send(e)},e.prototype.doRedbaoLog=function(t){var e=new RedbaoLogData;e.parser(t),openWin(RedBaoLogWin,e)},e.prototype.sendRedbaoInfo=function(){this.sendBase(46)},e.prototype.patchRedbaoInfo2=function(t){},e.prototype.sendYYMS=function(t){var e=this.getBytes(53);e.writeByte(t),this.send(e)},e.prototype.patchYYMS=function(t){for(var e=t.readByte(),i=0;e>i;i++)this.yymsRechargeStates[i]=t.readByte();RpFun.showYYMSRp()},e.prototype.sendSVIPMS=function(t){var e=this.getBytes(54);e.writeByte(t),this.send(e)},e.prototype.patchSVIPMS=function(t){for(var e=t.readByte(),i=0;e>i;i++)this.svipmsRechargeStates[i]=t.readByte();RpFun.showSVIPMSRp()},e.prototype.sendLevelInvest=function(t){var e=this.getBytes(48);e.writeByte(t),this.send(e)},e.prototype.getNextRedbaoByYuanbao=function(){for(var t=Cfg.getConfig(HongbaoConfig).condition,e=0;e<t.length;e++)if(this.rechargeNum<t[e])return t[e]-this.rechargeNum;return-1},e.prototype.getOrderByIndex=function(t){void 0===t&&(t=0);var e=this.costList>>t&1;return e},e.prototype.getAddBagGrid=function(){return 1==this.monthFlag?100:0},e.prototype.getRedbaoReceiveNum=function(){for(var t=0,e=0,i=this.redbaoRobDatas;e<i.length;e++){var n=i[e];n.receiveState==RedbaoReceiveState.weiLing&&(t+=1)}return t},e.prototype.onSocketClose=function(){this.redbaoRobDatas=[]},e.prototype.isFirstRechargeEveryDay=function(){var t=this.firstRechargeEveryDay;return t.isEverydayFirst&&GFunc.isSysOpen(287)&&!t.hasGetAward()},e.prototype.isRechargeEveryday=function(){var t=!1;if(t=this.firstRechargeEveryDay.isEverydayFirst?!this.isFirstRechargeEveryDay():1==this.firstRechargeData.firstRechargeState){var e=ActSys.ins().getActivityDatasByType(ActType.TYPE_1,ActSubType.TYPE_7);t=e.length>0}return t},e.prototype.isYYMSBuy=function(t){return 1==this.yymsRechargeStates[t]},e.prototype.getYYMSState=function(t){return this.yymsRechargeStates[t]},e.prototype.isYYMSBuyAll=function(){for(var t=!0,e=0,i=this.yymsRechargeStates;e<i.length;e++){var n=i[e];if(0==n){t=!1;break}}return t},e.prototype.isYYMSGetAwardAll=function(){for(var t=!0,e=0,i=this.yymsRechargeStates;e<i.length;e++){var n=i[e];if(2!=n){t=!1;break}}return t},e.prototype.isSVIPMSBuy=function(t){return 1==this.svipmsRechargeStates[t]},e.prototype.getSVIPMSState=function(t){return this.svipmsRechargeStates[t]},e.prototype.isSVIPMSBuyAll=function(){for(var t=!0,e=0,i=this.svipmsRechargeStates;e<i.length;e++){var n=i[e];if(0==n){t=!1;break}}return t},e.prototype.isSVIPMSGetAwardAll=function(){for(var t=!0,e=0,i=this.svipmsRechargeStates;e<i.length;e++){var n=i[e];if(2!=n){t=!1;break}}return t},e.prototype.patchJinZuanValueUpdate=function(t){var e=t.readInt();this.jinZuanData.setjinZuanValue(e)},e.prototype.patchJinZuanData=function(t){this.jinZuanData.parser(t)},e.prototype.sendJinZuanChouJian=function(t){var e=this.getBytes(62);e.writeByte(t),this.send(e)},e.prototype.patchJinZuanChouJian=function(t){for(var e=t.readByte(),i=[],n=0;e>n;n++){var a=new ItemDataReward;a.parser2(t);var o=GFunc.creatItemDataById(a.id);o.count=a.count,i.push(o);var s=1==t.readByte();s&&(this.tipsDatas.push(o),isShowWin(XunBaoJiPingItemTipsWin)||this.showJiPingItem())}if(i.length>=10)openWin(JinZuanRewardListTipsWin,i);else if(i.length>0&&isShowWin(JinZuanWin)){var r=i[0].id,u=new eui.Image;u.source=ResMgr.getItemIcon(Cfg.getItemCfg(r).getIcon(),IconType.IT_80x80),u.anchorOffsetX=37,u.anchorOffsetY=37,u.x=LayerMgr.Popup.width/2+40,u.y=LayerMgr.Popup.height/2-200,LayerMgr.Popup.addChild(u);var h=getWin(JinZuanWin).getJinZuanBag();GFunc.flyToBag1(u,h)}var l=t.readInt();this.jinZuanData.setZhuFuValue(l),RpFun.showJinZuanRedPoint()},e.prototype.showJiPingItem=function(){if(this.tipsDatas.length>0){var t=this.tipsDatas[0];openWin(XunBaoJiPingItemTipsWin,t,this.showJiPingItem,this,XunBaoJiPingItemTipsWin.JIN_ZUAN),this.tipsDatas.splice(0,1)}},e.prototype.sendJinZuanJiLu=function(t){var e=this.getBytes(63);e.writeByte(t),this.send(e)},e.prototype.patchJinZuanJiLu=function(t){var e=t.readByte(),i=t.readByte(),n=[],a=0;n=0==e?this.jinZuanData.xunBaoJiLuMyDatas:this.jinZuanData.xunBaoJiLuOtherDatas,a=n.length;for(var o=0;i>o;o++)if(o>a-1){var s=new JinZuanJiLuData;s.parser(t),n.push(s),1==e&&this.patchJinZuanOtherJiLuUpdate(s)}},e.prototype.patchJinZuanOtherJiLuUpdate=function(t){return t},e.prototype.sendJinZuanZhuFuReward=function(t){var e=this.getBytes(64);e.writeByte(t),this.send(e)},e.prototype.patchJinZuanZhuFuReward=function(t){var e=t.readByte(),i=(t.readByte(),t.readInt()),n=t.readInt();this.jinZuanData.setZhuFuValue(n),this.jinZuanData.setZhuFuType(e),this.jinZuanData.setZhuFuReceive(i),RpFun.showJinZuanRedPoint()},e.prototype.sendJinZuanShopData=function(){var t=this.getBytes(65);this.send(t)},e.prototype.patchJinZuanShopData=function(t){this.jinZuanData.parserShop(t)},e.prototype.sendJinZuanShopRefresh=function(){var t=this.getBytes(66);this.send(t)},e.prototype.patchJinZuanShopRefresh=function(t){this.jinZuanData.parserShop(t),showtipsSuc("刷新成功")},e.prototype.sendJinZuanShopBuy=function(t){var e=this.getBytes(67);e.writeByte(t),this.send(e)},e.prototype.patchJinZuanShopBuy=function(t){var e=t.readByte(),i=t.readByte(),n=this.jinZuanData.getShopDataById(e);n&&(n.setIsBuy(i),showtipsSuc("购买成功"))},e.prototype.patchZeroBuyData=function(t){var e=t.readByte();this.zeroBuyDatas.length=e;for(var i=0;e>i;i++){var n=this.zeroBuyDatas[i]=this.zeroBuyDatas[i]||new ZeroBuyData;n.id=i+1,n.parser(t)}this.startUpdateZeroBuyTime()},e.prototype.sendZeroBuyGetAward=function(t){var e=this.getBytes(69);e.writeByte(t),this.send(e)},e.prototype.patchZeroBuyGetAward=function(t){var e=t.readByte(),i=this.getZeroBuyData(e);return i&&(i.state=2,RpFun.showZeroBuyRpSingle(i)),i},e.prototype.sendZeroBuyBuy=function(t){var e=this.getBytes(74);e.writeByte(t),this.send(e)},e.prototype.patchsendZeroBuyBuy=function(t){var e=t.readByte(),i=t.readInt(),n=this.getZeroBuyData(e);return n&&(n.state=1,n.endTick=Timer.ins().getEgretTimer()+1e3*i,showtipsSuc("购买成功"),this.startUpdateZeroBuyTime()),n},e.prototype.getZeroBuyData=function(t){return this.zeroBuyDatas[t-1]},e.prototype.isZeroBuyCanGetAward=function(){for(var t=!1,e=0,i=this.zeroBuyDatas;e<i.length;e++){var n=i[e];if(t=n.canGetAward())break}return t},e.prototype.isZeroAllGetAward=function(){for(var t=!0,e=0,i=this.zeroBuyDatas;e<i.length;e++){var n=i[e];t=t&&n.hasGetAward()}return t},e.prototype.getZeroNextTime=function(){for(var t=Number.MAX_VALUE,e=0,i=this.zeroBuyDatas;e<i.length;e++){var n=i[e];n.leftTime>0&&(t=Math.min(n.leftTime,t))}return t<Number.MAX_VALUE?t:0},e.prototype.startUpdateZeroBuyTime=function(){var t=this.getZeroNextTime();t>0&&t<DateUtil.SECOND_PER_DAY&&Timer.ins()["do"](t,0,1,this.startUpdateZeroBuyTime,this,TimerType.LAST),RpFun.showZeroBuyRp()},e.prototype.patchBBFLInfo=function(t){this.bbflModel.parserInfo(t)},e.prototype.sendBBFLReward=function(t,e){var i=this.getBytes(71);i.writeByte(t),i.writeByte(e),this.send(i)},e.prototype.patchBBFLReward=function(t){var e=this.bbflModel.parserReward(t);switch(e){case BBFLType.Login:RpFun.showBBFLLoginRp();break;case BBFLType.Custom:RpFun.showBBFLCustomRp();break;case BBFLType.Level:RpFun.showBBFLLevelRp()}},e.prototype.patchBBFLLoginDay=function(t){this.bbflModel.parserLoginDay(t),RpFun.showBBFLLoginRp()},e.prototype.sendBBFLBuy=function(t){var e=this.getBytes(73);e.writeByte(t),this.send(e)},e.prototype.patchBBFLBuy=function(t){var e=this.bbflModel.parserBuy(t);switch(e){case BBFLType.Login:RpFun.showBBFLLoginRp();break;case BBFLType.Custom:RpFun.showBBFLCustomRp();break;case BBFLType.Level:RpFun.showBBFLLevelRp()}showtipsSuc("投资成功")},e.prototype.doBagData=function(t){this.jinZuanBagItemDatas=[];for(var e,i=t.readInt(),n=0;i>n;n++)e=new ItemDataBase,e.parser(t),this.jinZuanBagItemDatas.push(e)},e.prototype.patchDeleteItem=function(t){for(var e=t.readDouble(),i=this.jinZuanBagItemDatas.length-1;i>=0;i--)if(this.jinZuanBagItemDatas[i].handle==e){this.jinZuanBagItemDatas.splice(i,1);break}RpFun.showJinZuanRedPoint()},e.prototype.patchAddItem=function(t){var e=new ItemDataBase;e.parser(t),this.jinZuanBagItemDatas.unshift(e);t.readByte(),t.readByte();RpFun.showJinZuanRedPoint()},e.prototype.patchUpDateItem=function(t){for(var e,i=t.readDouble(),n=t.readInt(),a=(t.readByte(),t.readByte(),0);a<this.jinZuanBagItemDatas.length;a++)if(e=this.jinZuanBagItemDatas[a],e.handle==i){e.count=n;break}},e.prototype.patchYiYuanData=function(t){this.rechargeYiYuanData.patch(t),RpFun.showYiYuanRedPoint()},e.prototype.sendYiYuanReceived=function(){var t=this.getBytes(81);this.send(t)},e.prototype.patchYiYuanReceived=function(t){this.rechargeYiYuanData.patch(t),RpFun.showYiYuanRedPoint()},e.prototype.patchYZZHData=function(t){this.yzzhData.parser(t)},e.prototype.patchYZZHBuyUpdate=function(t){this.yzzhData.buyShengHui=1==t.readByte(),RpFun.showYZZHRedPoint(),RpFun.showYZZHBoxRedPoint()},e.prototype.sendYZZHBuyLevel=function(t){var e=this.getBytes(92);e.writeShort(t),this.send(e)},e.prototype.patchYZZHBuyLevel=function(t){this.yzzhData.level=t.readShort(),RpFun.showYZZHRedPoint()},e.prototype.patchYZZHJieDuanTaskUpdate=function(t){this.yzzhData.parserJieDuanTaskUpdate(t),RpFun.showYZZHTaskRedPoint()},e.prototype.sendYZZHJieDuanTaskGet=function(t,e){var i=this.getBytes(94);i.writeByte(t),i.writeInt(e),this.send(i)},e.prototype.patchYZZHJieDuanTaskGet=function(t){this.yzzhData.parserJieDuanTaskGet(t),RpFun.showYZZHRedPoint(),RpFun.showYZZHTaskRedPoint()},e.prototype.sendYZZHGetExp=function(t){var e=this.getBytes(95);e.writeByte(t),this.send(e)},e.prototype.patchYZZHGetExp=function(t){this.yzzhData.parserGetExp(t),RpFun.showYZZHRedPoint(),RpFun.showYZZHBoxRedPoint();var e=Cfg.getConfig(YongZheSaiJiConfig,this.yzzhData.saiji);if(e){var i=e.exp[this.yzzhData.jieduan-1];showtipsSuc("经验+"+i)}},e.prototype.sendYZZHGetReward=function(t,e){var i=this.getBytes(96);i.writeByte(t),i.writeInt(e),this.send(i)},e.prototype.patchYZZHGetReward=function(t){var e=this.yzzhData.parserGetReward(t);return RpFun.showYZZHRedPoint(),e},e}(BaseSys);__reflect(RechargeActSys.prototype,"RechargeActSys");var RechargeData=function(){function t(){this.day=1,this.isEverydayFirst=!1,this.num=0,this.record=0,this.states=[-1,-1,-1],this.configs=[]}return t.prototype.parser=function(t){this.isEverydayFirst=t.readBoolean(),this.change(t),this.day=t.readShort(),this.configs=Cfg.getConfigs(ChongZhi1Config,RechargeActSys.ins().firstRechargeEveryDay.day,CondType.ALL),this.formState()},t.prototype.change=function(t){this.num=t.readInt(),this.record=t.readInt(),this.formState()},t.prototype.isShowRedPoint=function(){return-1!=this.states.indexOf(0)&&this.isEverydayFirst},t.prototype.hasGetAward=function(){return-1==this.states.indexOf(0)&&-1==this.states.indexOf(-1)},t.prototype.formState=function(){for(var t in this.configs){var e=this.configs[t];this.num>=e.pay?this.states[e.index-1]=this.record>>e.index&1:this.states[e.index-1]=-1}},t.prototype.getFormItemIndexByItemId=function(t){for(var e=this.configs,i=0;i<e.length;i++){var n=e[i],a=this.states[i];if(1!=a)for(var o=n.awardList,s=0;s<o.length;s++)if(o[s].id==t)return i}return 0},t}();__reflect(RechargeData.prototype,"RechargeData");var System;!function(t){t.rechargeActSys=RechargeActSys.ins.bind(RechargeActSys)}(System||(System={})),window.RechargeActSys=RechargeActSys;var RechargePowerSys=function(t){function e(){var e=t.call(this)||this;return e.shengbeiData=new ShengbeiData,e.sysId=PackId.RechargePower,e.reg(1,e.patchZhaoCaiLongDate),e.reg(2,e.patchhaoCaiLongBuy),e.reg(3,e.patchhaoCaiLongReceive),e.reg(11,e.patchXunZhangDate),e.reg(12,e.patchXunZhangBuy),e.reg(13,e.patchXunZhangReceive),e.reg(21,e.patchShengbeiInit),e.reg(22,e.patchShengbeiState),e.reg(23,e.patchShengbeiXiangqian),e.zhaoCaiLongData=new ZhaoCaiLongData,e.zhaoCaiLongData.iniData(),e.xunZhangData=new XunZhangData,e.xunZhangData.iniData(),e}return __extends(e,t),e.ins=function(){return t.getIns.call(this,e)},e.prototype.patchZhaoCaiLongDate=function(t){this.zhaoCaiLongData.parser(t)},e.prototype.sendhaoCaiLongBuy=function(){var t=this.getBytes(2);this.send(t)},e.prototype.patchhaoCaiLongBuy=function(t){var e=t.readByte();this.zhaoCaiLongData.setBuyState(e),RpFun.showZhaoCaiLongRedPoint(),RpFun.showZhaoCaiLongBuyRp(),2==e&&openWin(ZhaoCaiLongActTipsWin)},e.prototype.sendhaoCaiLongReceive=function(){var t=this.getBytes(3);this.send(t)},e.prototype.patchhaoCaiLongReceive=function(t){var e=t.readShort();this.zhaoCaiLongData.setReceiveId(e),RpFun.showZhaoCaiLongRedPoint()},e.prototype.patchXunZhangDate=function(t){this.xunZhangData.parser(t)},e.prototype.sendXunZhangBuy=function(){var t=this.getBytes(12);this.send(t)},e.prototype.patchXunZhangBuy=function(t){var e=t.readByte();this.xunZhangData.setBuyState(e),RpFun.showXunZhangRedPoint(),RpFun.showXunZhangBuyRp(),2==e&&openWin(XunZhangActTipsWin)},e.prototype.sendXunZhangReceive=function(){var t=this.getBytes(13);this.send(t)},e.prototype.patchXunZhangReceive=function(t){var e=t.readShort();this.xunZhangData.setReceiveId(e),RpFun.showXunZhangRedPoint(),RpFun.showXunZhangBuyRp()},e.prototype.patchShengbeiInit=function(t){this.shengbeiData.parser(t)},e.prototype.sendShengbeiGetAward=function(){var t=this.getBytes(22);this.send(t)},e.prototype.patchShengbeiState=function(t){var e=this.shengbeiData.state;this.shengbeiData.parserState(t),1==e&&2==this.shengbeiData.state&&openWin(ShengbeiActWin),RpFun.showShengbeiRp(),RpFun.showShengbeiBuyRp()},e.prototype.sendShengbeiXiangqian=function(t){var e=this.getBytes(23);e.writeInt(t),this.send(e)},e.prototype.patchShengbeiXiangqian=function(t){var e=this.shengbeiData.parserLv(t);return RpFun.showShengbeiRpSingle(e),e},e}(BaseSys);__reflect(RechargePowerSys.prototype,"RechargePowerSys");var System;!function(t){t.rechargePowerSys=RechargePowerSys.ins.bind(RechargePowerSys)}(System||(System={})),window.RechargePowerSys=RechargePowerSys;var FirstRechargeData=function(){function t(){this.firstRechargeState=0,this.firstRechargeTimer=0,this.firstRechargeItemDatas=[]}return t.prototype.patchFirstRecharge=function(t){this.firstRechargeState=t.readByte();var e=t.readInt(),i=t.readInt();this.firstRechargeTimer=Timer.ins().getTimer()+1e3*i;var n=Cfg.getConfigs(FirstRechargeConfig),a=[];a.length=n.length,MathUtil.writeIntToArray(e,a),this.firstRechargeItemDatas.length=0;for(var o=0;o<n.length;o++){var s=n[o],r=new FirstRechargeItemData;r.day=s.day,r.state=1==a[o]?2:this.firstRechargeState>=s.day?1:0,this.firstRechargeItemDatas.push(r)}},t.prototype.getCurDay=function(){for(var t=3,e=0;e<this.firstRechargeItemDatas.length;e++){var i=this.firstRechargeItemDatas[e];if(2!=i.state){t=i.day;break}}return t},t.prototype.isReceivedAll=function(){for(var t=0;t<this.firstRechargeItemDatas.length;t++){var e=this.firstRechargeItemDatas[t];if(2!=e.state)return!0}return!1},t.prototype.isRecharge=function(){return this.firstRechargeState>0},t.prototype.getFirstRechargeTimer=function(){return Math.max(0,this.firstRechargeTimer-Timer.ins().getTimer())},t.prototype.canGet=function(){return this.isRecharge()&&2!=this.firstRechargeState},t}();__reflect(FirstRechargeData.prototype,"FirstRechargeData");var FirstRechargeItemData=function(){function t(){this.day=1,this.state=0}return Object.defineProperty(t.prototype,"config",{get:function(){return Cfg.getConfig(FirstRechargeConfig,this.day)},enumerable:!0,configurable:!0}),t}();__reflect(FirstRechargeItemData.prototype,"FirstRechargeItemData");var FirstRechargeBtnRender=function(t){function e(){var e=t.call(this)||this;return e.skinName="FirstRechargeBtnRenderEUI",e}return __extends(e,t),e.prototype.dataChanged=function(){var t=this.data;this.imgTitle.source="sc_zycs_day"+t.day},e.prototype.updateRedPoint=function(){var t=this.data;this.redPoint.visible=RpSys.ins().getData(RechargeWin1,FirstRechargePanel,e,t.day)},e}(BaseItemRender);__reflect(FirstRechargeBtnRender.prototype,"FirstRechargeBtnRender"),window.FirstRechargeBtnRender=FirstRechargeBtnRender;var GBManorConfig=function(){function t(){}return t}();__reflect(GBManorConfig.prototype,"GBManorConfig");var FirstRechargeBuyWinBtnRender=function(t){function e(){var e=t.call(this)||this;return e.skinName="FirstRechargeBuyWinBtnRenderEUI",e}return __extends(e,t),e.prototype.dataChanged=function(){this.lab=Lang.replaceEnum("第%s天可领",this.data.day),this.updateRedPoint()},e.prototype.updateRedPoint=function(){this.redPoint.visible=RpSys.ins().getData(FirstRechargeBuyWin,e,this.data.day)},e}(BaseItemRender);__reflect(FirstRechargeBuyWinBtnRender.prototype,"FirstRechargeBuyWinBtnRender"),window.FirstRechargeBuyWinBtnRender=FirstRechargeBuyWinBtnRender;var GBManorIndexConfig=function(){function t(){}return t}();__reflect(GBManorIndexConfig.prototype,"GBManorIndexConfig");var GBMutliKillBroConfig=function(){function t(){}return t}();__reflect(GBMutliKillBroConfig.prototype,"GBMutliKillBroConfig");var FirstRechargeEveryDayPanel2=function(t){function e(){return t.call(this)||this}return __extends(e,t),e.prototype.setSkinName=function(){this.skinName="FirstreChargeeVeryDayEUI2",this.index=2},e}(FirstRechargeEveryDayPanel1);__reflect(FirstRechargeEveryDayPanel2.prototype,"FirstRechargeEveryDayPanel2"),window.FirstRechargeEveryDayPanel2=FirstRechargeEveryDayPanel2;var FirstRechargeEveryDayPanel3=function(t){function e(){return t.call(this)||this}return __extends(e,t),e.prototype.setSkinName=function(){this.skinName="FirstreChargeeVeryDayEUI3",this.index=3},e}(FirstRechargeEveryDayPanel1);__reflect(FirstRechargeEveryDayPanel3.prototype,"FirstRechargeEveryDayPanel3"),window.FirstRechargeEveryDayPanel3=FirstRechargeEveryDayPanel3;var FirstRechargeEveryDayWin=function(t){function e(){var e=t.call(this)||this;return e.winType=WinType.MainWin,e}return __extends(e,t),e.prototype.initUI=function(){t.prototype.initUI.call(this),this.addBg()},e.panelNames=[FirstRechargeEveryDayPanel],e}(BaseWinAutoTab);__reflect(FirstRechargeEveryDayWin.prototype,"FirstRechargeEveryDayWin"),window.FirstRechargeEveryDayWin=FirstRechargeEveryDayWin;var GBPowerConfig=function(){function t(){}return t}();__reflect(GBPowerConfig.prototype,"GBPowerConfig");var FirstRechargeTipsWin=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return __extends(e,t),e.prototype.initUI=function(){this.skinName="FirstRechargeTipsWinEUI",t.prototype.initUI.call(this),this.layer=LayerMgr.Main_Down,this.mc=new MC,this.mc.touchEnabled=!1,this.groupEntity.addChild(this.mc)},e.prototype.close=function(){t.prototype.close.call(this)},e.prototype.open=function(){t.prototype.open.call(this),this.addClickE(this.imgBg,this.onClick),Timer.ins()["do"](1e4,1e3,1,this.countDown,this);var e=Cfg.getConfig(FirstRechargeConfig,1);this.mc.playFile(ResMgr.getEffName("bigweapon"+e.mc[Actor.ins().job-1]),-1)},e.prototype.countDown=function(){closeWin(e)},e.prototype.onClick=function(t){closeWin(e),openWin(FirstRechargeBuyWin)},e.prototype.addToParent=function(t){this.addToParentAt(t,0)},e}(BaseWinSingle);__reflect(FirstRechargeTipsWin.prototype,"FirstRechargeTipsWin"),window.FirstRechargeTipsWin=FirstRechargeTipsWin;var FirstRechargeVeryDayTab=function(t){function e(){var e=t.call(this)||this;return e.skinName="FirstRechargeVeryDayTabEUI",e.redPoint.visible=!1,e}return __extends(e,t),e.prototype.dataChanged=function(){if(this.data&&this.data.pay){var t=this.data;this.lbYuan.text=""+t.pay/100+Lang.common_yuan,this.lbDec.text=""+t.dec,this.redPoint.visible=RpSys.ins().getData(FirstRechargeVeryDayWin,this.itemIndex+1)}},e}(BaseItemRender);__reflect(FirstRechargeVeryDayTab.prototype,"FirstRechargeVeryDayTab"),window.FirstRechargeVeryDayTab=FirstRechargeVeryDayTab;var FirstRechargeVeryDayWin=function(t){function e(){var e=t.call(this)||this;return e.skinName="FirstRechargeVeryDayWinEUI",e.layer=LayerMgr.Popup,e.addBg(),e.tabList.itemRenderer=FirstRechargeVeryDayTab,e.tabList.dataProvider=e.tabData=new eui.ArrayCollection,e.list.itemRenderer=ItemBaseRewardName,e.list.dataProvider=e.listData=new eui.ArrayCollection,e.btnGetAward.redPoint.visible=!0,e.mcIcon=new McIcon,e.groupMc.addChild(e.mcIcon),e}return __extends(e,t),e.prototype.open=function(e){t.prototype.open.call(this),this.curIndex=e,this.addClickE(this.btnRecharge,this.onClick),this.addClickE(this.btnGetAward,this.onClick),this.addItemTapE(this.tabList,this.onItemList),this.addLsn(RechargeActSys.ins().patchUpdateRecharge,this.updateState),this.addLsn(RpSys.ins().patchRp,this.updateRp),this.infoPanel()},e.prototype.close=function(){this.mcIcon.close(),t.prototype.close.call(this)},e.prototype.updateRp=function(t){void 0===t&&(t=null),(!t||t.check(e))&&this.tabData.replaceAll(this.data.configs.concat())},e.prototype.infoPanel=function(){this.data=RechargeActSys.ins().firstRechargeEveryDay,this.tabData.source=this.data.configs,isNaN(this.curIndex)?this.updateState():(this.tabList.selectedIndex=this.curIndex,this.updatePanel())},e.prototype.updateState=function(){for(var t=this.data.configs,i=this.tabList.selectedIndex>=0?this.tabList.selectedIndex:0,n=0,a=t;n<a.length;n++){var o=a[n],s=RpSys.ins().getData(e,o.index);if(s){i=o.index-1;break}}this.tabList.selectedIndex=i,this.updatePanel()},e.prototype.updatePanel=function(){var t=this.data.configs[this.tabList.selectedIndex];this.listData.source=t.awardList,this.lbDesc.textFlow=addColorTF(Lang.recharge_str2.replace("$yuan$",""+StrUtil.addColor(t.pay/100+Lang.common_yuan,16751375))),this.imgYlq.visible=!1,this.btnRecharge.visible=!1,this.btnGetAward.visible=!1;var e=this.data.states[this.tabList.selectedIndex];0==e?this.btnGetAward.visible=!0:1==e?this.imgYlq.visible=!0:-1==e&&(this.btnRecharge.visible=!0),this.mcIcon.open(t.mcIcon)},e.prototype.onItemList=function(t){this.updatePanel()},e.prototype.onClick=function(t){switch(t.target){case this.btnRecharge:openWin(RechargeWin),closeWin(e);break;case this.btnGetAward:BagSys.ins().checkBagFreeCount(5)&&RechargeActSys.ins().sendRechargeEveryday(this.tabList.selectedIndex+1)}},__decorate([callDelay(100)],e.prototype,"updateState",null),e}(BaseWinSingle);__reflect(FirstRechargeVeryDayWin.prototype,"FirstRechargeVeryDayWin"),window.FirstRechargeVeryDayWin=FirstRechargeVeryDayWin;var GBRankRewardConfig=function(){function t(){}return t}();__reflect(GBRankRewardConfig.prototype,"GBRankRewardConfig");var YYMSTabItem=function(t){function e(){var e=t.call(this)||this;return e.skinName="YYMSTabItemEUI",e.mcSelect=new MC,e.mcSelect.playFile(ResMgr.getEffName("yyms1"),-1),e.mcSelect.scaleX=e.mcSelect.scaleY=.4,e.groupSelect.addChild(e.mcSelect),e}return __extends(e,t),e.prototype.dataChanged=function(){var t=this.data;this.imgIcon.source="yyms_zycs_box"+t.id,this.imgYB.source="yyms_zycs_b"+t.id,this.updateRp()},e.prototype.updateRp=function(){this.redPoint.visible=RpSys.ins().getData(YYMSWin,YYMSPanel,this.itemIndex)},e}(BaseItemRender);__reflect(YYMSTabItem.prototype,"YYMSTabItem"),window.YYMSTabItem=YYMSTabItem;var GlobalConfig=function(){function t(){}return t}();__reflect(GlobalConfig.prototype,"GlobalConfig");var RechargeEverydayWin=function(t){function e(){return t.call(this)||this}return __extends(e,t),e.prototype.initUI=function(){this.layer=LayerMgr.Popup,this.skinName="RechargeEverydayWinEUI",this.addBg(),t.prototype.initUI.call(this),this.list.itemRenderer=ItemBaseRewardActivity,this.list.dataProvider=this.listAwardCollection=new eui.ArrayCollection,this.mcBtn=new MC,this.mcBtn.x=85,this.mcBtn.y=28,this.btnGetAward.addChild(this.mcBtn)},e.prototype.open=function(){t.prototype.open.call(this),this.addLsn(ActSys.ins().patchRechargeEveryDay,this.update),this.addLsn(ActSys.ins().patchActivityIsGetAwards,this.update),this.addClickE(this.btnRecharge,this.onClick),this.addClickE(this.btnGetAward,this.onClick),this.update()},e.prototype.update=function(){var t=ActSys.ins().getActivityDatasByType(ActType.TYPE_1,ActSubType.TYPE_7,SortType.down),e=ActSys.ins().getEveryDayPrice(),i=t[0];if(i){var n=i.getConfigs(),a=(i.dabiao,1),o=ActRewardState.NotReached;for(var s in n){if(o=i.getRewardStateById(a),a++,this.currentConfig=n[s],o==ActRewardState.CanGet)break;if(o==ActRewardState.NotReached)break;o==ActRewardState.Geted}this.btnRecharge.visible=o==ActRewardState.NotReached,this.btnGetAward.visible=o==ActRewardState.CanGet,this.btnGetAward.redPoint.visible=!0,this.btnHasGet.visible=o==ActRewardState.Geted,this.bmpWorth.text=this.currentConfig.worth.toFixed(0),this.listAwardCollection.source=this.currentConfig.rewards;var r=Math.max(this.currentConfig.condition-e,0);this.bmpzc.text=r.toString()}},e.prototype.onClick=function(t){switch(t.currentTarget){case this.btnRecharge:closeWin(this),openWin(RechargeWin);break;case this.btnGetAward:BagSys.ins().checkBagFreeCount(5)&&ActSys.ins().sendReward(this.currentConfig.id,this.currentConfig.index)}},e}(BaseWinSingle);__reflect(RechargeEverydayWin.prototype,"RechargeEverydayWin"),window.RechargeEverydayWin=RechargeEverydayWin;var RechargeItem=function(t){function e(){var e=t.call(this)||this;return e.skinName="RechargeItemEUI",e}return __extends(e,t),e.prototype.dataChanged=function(){var t=this.data;this.updasteState(),this.validateNow(),this.imgYb.source="sc_zycs_bg"+t.icon;var e=Cfg.getPayMoneyVipExpByYb(t.amount);this.lbYb.text=e+"",this.lbDoubleYb.text=e+"",this.lbPrice.text="¥"+Cfg.getPayMoneyRMBByYb(t.amount)+Lang.common_yuan},e.prototype.updasteState=function(){var t=this.data,e=RechargeActSys.ins().getOrderByIndex(t.id);t.isForeverDouble?this.currentState="yongjiu":this.currentState=0==e?"first":"none"},e.prototype.playSelectMC=function(){this.selectMc=this.selectMc||new MC,this.selectMc.playFile(ResMgr.getEffName("sc_zycs_dikuang"),-1),this.selectMc.x=187,this.selectMc.y=118,this.groupMC.addChild(this.selectMc)},e}(BaseItemRender);__reflect(RechargeItem.prototype,"RechargeItem"),window.RechargeItem=RechargeItem;var GrailStoneConfig=function(){function t(){}return t}();__reflect(GrailStoneConfig.prototype,"GrailStoneConfig");var RechargeOtherMonthCardItem=function(t){function e(){return t.call(this)||this}return __extends(e,t),e.prototype.open=function(){this.imgBg.source="sc_zycs_yueka_jpg";var t=ActSys.ins().getActDataById(ActId.ID_99900),e=t.getConfig(),i=t.isInYueKaTime();this.lbPrice.text="￥"+Cfg.getPayMoneyRMBByYb(e.money)+"元",this.currentState=i?"buy":"nobuy",this.lbName.text="超值月卡",this.lbDesc.text="每日领取"+e.mailAward[0].count+"仙玉"},e}(RechargeOtherItem);__reflect(RechargeOtherMonthCardItem.prototype,"RechargeOtherMonthCardItem"),window.RechargeOtherMonthCardItem=RechargeOtherMonthCardItem;var RechargeOtherTeQuanCardItem=function(t){function e(){return t.call(this)||this}return __extends(e,t),e.prototype.open=function(){this.imgBg.source="sc_zycs_zztq_jpg";var t=ActSys.ins().getActDataById(ActId.ID_99500),e=t.getConfig(),i=t.isAct();this.lbPrice.text="￥"+Cfg.getPayMoneyRMBByYb(e.money)+"元",this.currentState=i?"buy":"nobuy",this.lbName.text="至尊特权",this.lbDesc.text="立即领取大量仙玉"},e}(RechargeOtherItem);__reflect(RechargeOtherTeQuanCardItem.prototype,"RechargeOtherTeQuanCardItem"),window.RechargeOtherTeQuanCardItem=RechargeOtherTeQuanCardItem;var GrailStoneIdConfig=function(){function t(){}return t}();__reflect(GrailStoneIdConfig.prototype,"GrailStoneIdConfig");var RechargeTipsWin=function(t){function e(){return t.call(this)||this}return __extends(e,t),e.prototype.initUI=function(){this.setSkinName(),t.prototype.initUI.call(this),this.layer=LayerMgr.Popup,this.addBg()},e.prototype.setSkinName=function(){this.skinName="RechargeTipsWinEUI"},e.prototype.open=function(){t.prototype.open.call(this),this.addClickE(this,this.onClick),this.lbContent.textFlow=addColorTF("仙玉不足,以下途径可以获取大量仙玉")},e.prototype.onClick=function(t){switch(t.target){case this.btnBuy:openWin(ZhaoCaiLongBuyWin),closeWin(this);break;case this.btnRecharge:openWin(RechargeWin2),closeWin(this);break;case this.closeBtn0:closeWin(this);break;case this.colorCanvas:this.clickClose&&closeWin(this)}},e}(BaseWinSingle);__reflect(RechargeTipsWin.prototype,"RechargeTipsWin"),window.RechargeTipsWin=RechargeTipsWin;var GuajiConstConfig=function(){function t(){}return t}();__reflect(GuajiConstConfig.prototype,"GuajiConstConfig");var RechargeWin1=function(t){function e(){var e=t.call(this)||this;return e.panelIndex=0,e.winType=WinType.OverlayWin,e}return __extends(e,t),e.prototype.initUI=function(){t.prototype.initUI.call(this),this.addBg()},e.prototype.open=function(e){void 0===e&&(e=-1);for(var i=[],n=1;n<arguments.length;n++)i[n-1]=arguments[n];this.panelIndex=i[0]||0,t.prototype.open.call(this,e)},e.prototype.getParam=function(){return[this.panelIndex]},e.panelNames=[FirstRechargePanel,FirstRechargeEveryDayPanel],e}(BaseWinAutoTab);__reflect(RechargeWin1.prototype,"RechargeWin1"),window.RechargeWin1=RechargeWin1;var RechargeWin2=function(t){function e(){var e=t.call(this)||this;return e.winType=WinType.NormalWin,e}return __extends(e,t),e.prototype.initUI=function(){t.prototype.initUI.call(this),this.addBg("background_zycs_bg_jpg"),this.layer=LayerMgr.Popup,this.eGroup.visible=!1,this.closeBtn.icon="svip_zycs_close"},e.prototype.open=function(e){void 0===e&&(e=-1);for(var i=[],n=1;n<arguments.length;n++)i[n-1]=arguments[n];this.param1=i[0],t.prototype.open.call(this,e)},e.prototype.getParam=function(){return this.param1},e.panelNames=[RechargePanel],e}(BaseWinAutoTab);__reflect(RechargeWin2.prototype,"RechargeWin2"),window.RechargeWin2=RechargeWin2;var RedbaoLogData=function(){function t(){this.redbaoId=0,this.count=0,this.totalPrice=0,this.totalCount=0,this.infoDatas=[]}return t.prototype.parser=function(t){this.redbaoId=t.readInt(),this.count=t.readByte(),this.infoDatas=[];for(var e=0;e<this.count;e++){var i=new RedbaoLogInfoData;i.parser(t),this.infoDatas.push(i)}this.totalPrice=t.readShort(),this.totalCount=t.readShort()},t}();__reflect(RedbaoLogData.prototype,"RedbaoLogData");var RedbaoLogInfoData=function(){function t(){this.roleName="",this.job=0,this.yuanbao=0,this.time=0}return t.prototype.parser=function(t){this.roleName=t.readString(),this.job=t.readByte(),this.yuanbao=t.readByte(),this.time=Timer.ins().getEgretTimer()-1e3*t.readInt()},t.prototype.getTime=function(){return(Timer.ins().getEgretTimer()-this.time)/1e3},t}();__reflect(RedbaoLogInfoData.prototype,"RedbaoLogInfoData");var RedBaoRobData=function(){function t(){this.actorId=0,this.redbaoId=0,this.roleName="",this.job=0,this.vipLv=0,this.monthCard=0,this.time=0,this.successState=0,this.receiveState=0,this.yuanbaoNum=0}return t.prototype.parser=function(t){this.actorId=t.readInt(),this.redbaoId=t.readInt(),this.roleName=t.readString(),this.job=t.readByte(),this.vipLv=t.readByte(),this.monthCard=t.readByte(),this.time=DateUtil.formatMiniDateTime(t.readInt()),this.receiveState=0},t.prototype.parser2=function(t){this.successState=t.readByte(),this.receiveState=t.readByte(),this.yuanbaoNum=t.readInt()},t}();__reflect(RedBaoRobData.prototype,"RedBaoRobData");var RedbaoReceiveState;!function(t){t[t.weiLing=0]="weiLing",t[t.yiLing=1]="yiLing",t[t.qiangWan=2]="qiangWan",t[t.guoQi=3]="guoQi"}(RedbaoReceiveState||(RedbaoReceiveState={}));var RedBaoSendData=function(){function t(){this.id=0,this.price=0,this.count=0}return t.prototype.parser=function(t){this.id=t.readInt(),this.price=t.readShort(),this.count=t.readShort()},t}();__reflect(RedBaoSendData.prototype,"RedBaoSendData");var RedBaoLogItem=function(t){function e(){var e=t.call(this)||this;return e.skinName="RedBaoLogItemEUI",e.setSkinPart("boostPrice1",new PriceIcon),e.boostPrice1.setType(CurType.yb),e}return __extends(e,t),e.prototype.dataChanged=function(){if(this.data&&this.data.roleName){var t=this.data;this.head.source=ResMgr.getHeadIcon(t.job),this.nameLabel.text=""+t.roleName,this.boostPrice1.setPrice(t.yuanbao),this.timeTxt.text=""+getFormatTime(t.getTime(),"hh小时mm分ss秒")+Lang.common_qian
}},e}(BaseItemRender);__reflect(RedBaoLogItem.prototype,"RedBaoLogItem"),window.RedBaoLogItem=RedBaoLogItem;var RedBaoRobItem=function(t){function e(){var e=t.call(this)||this;return e.skinName="RedBaoRobItemEUI",e}return __extends(e,t),e.prototype.dataChanged=function(){if(this.data&&this.data.actorId){var t=this.data;this.head.source=ResMgr.getHeadIcon(t.job),this.nameLabel.text=""+t.roleName;var e=Actor.ins().serverTime-t.time;e=0>=e?1:e/1e3,this.timeTxt.text=""+getFormatTime(e,"hh小时mm分ss秒")+Lang.common_qian,this.ybTxt.text=""+t.yuanbaoNum,this.setState(t.receiveState),this.setVip(t.vipLv);var i=Cfg.getItemCfg(CurType.yb);this.ybImg.source=ResMgr.getItemIcon(i.getIcon(),IconType.IT_80x80)}},e.prototype.setVip=function(t){t>0?(this.vipBmp.visible=!0,this.vipBmp.text="v"+t.toString()):this.vipBmp.visible=!1},e.prototype.setState=function(t){var e="";this.ybImg.visible=!1,this.ybTxt.visible=!1,t==RedbaoReceiveState.weiLing?(this.titleImg.source="czhb_zycs_hb1",e=StrUtil.addColor(Lang.recharge_str9,13486270)):t==RedbaoReceiveState.yiLing?(this.titleImg.source="czhb_zycs_hb3",e=StrUtil.addUnderLine(StrUtil.addColor(Lang.recharge_str10,13486270)),this.ybImg.visible=!0,this.ybTxt.visible=!0):t==RedbaoReceiveState.qiangWan?(this.titleImg.source="czhb_zycs_hb2",e=StrUtil.addColor(Lang.recharge_str11,11508595)):t==RedbaoReceiveState.guoQi&&(this.titleImg.source="czhb_zycs_hb4",e=StrUtil.addColor(Lang.recharge_str11,6513507)),this.decTxt.textFlow=addColorTF(e)},e}(BaseItemRender);__reflect(RedBaoRobItem.prototype,"RedBaoRobItem"),window.RedBaoRobItem=RedBaoRobItem;var GuajiFubenBossPosConfig=function(){function t(){}return t}();__reflect(GuajiFubenBossPosConfig.prototype,"GuajiFubenBossPosConfig");var GuajiFubenConfig=function(){function t(){}return t}();__reflect(GuajiFubenConfig.prototype,"GuajiFubenConfig");var RedBaoBuySendWin=function(t){function e(){var e=t.call(this)||this;return e.layer=LayerMgr.Popup,e.skinName="RedBaoBuySendWinEUI",e.addBg(),e.setSkinPart("priceIcon",new PriceIcon),e.priceIcon.setType(CurType.yb),e}return __extends(e,t),e.prototype.open=function(){t.prototype.open.call(this),this.addClickE(this.buyBtn,this.buy),this.updateView()},e.prototype.updateView=function(){var t=RechargeActSys.ins().redBaoSendData[0];this.priceIcon.setPrice(t.price),this.countTxt.text=""+t.count},e.prototype.buy=function(t){RechargeActSys.ins().sendRedbaoRequest(),closeWin(e),showtipsFail(Lang.recharge_str13)},e}(BaseWinSingle);__reflect(RedBaoBuySendWin.prototype,"RedBaoBuySendWin"),window.RedBaoBuySendWin=RedBaoBuySendWin;var RedBaoLogWin=function(t){function e(){var e=t.call(this)||this;return e.layer=LayerMgr.Popup,e.skinName="RedBaoLogsWinEUI",e.addBg(),e.setSkinPart("boostPrice1",new PriceIcon),e.boostPrice1.setType(CurType.yb),e.list.itemRenderer=RedBaoLogItem,e.scroller.scrollPolicyH=eui.ScrollPolicy.OFF,e}return __extends(e,t),e.prototype.open=function(e){t.prototype.open.call(this),this.updatePanel(e)},e.prototype.updatePanel=function(t){this.boostPrice1.setPrice(t.totalPrice);var e=StrUtil.addColor(Lang.recharge_str14,10061155);e+=StrUtil.addColor(t.count+"/"+t.totalCount,1421059),this.receiveCountTxt.textFlow=addColorTF(e),this.list.dataProvider=new eui.ArrayCollection(t.infoDatas)},e}(BaseWinSingle);__reflect(RedBaoLogWin.prototype,"RedBaoLogWin"),window.RedBaoLogWin=RedBaoLogWin;var RedBaoResultWin=function(t){function e(){var e=t.call(this)||this;return e.layer=LayerMgr.Popup,e.skinName="RedBaoResultWinEUI",e.addBg(),e}return __extends(e,t),e.prototype.open=function(e){t.prototype.open.call(this),this.data=e,this.addClickE(this.logBtn,this.onClick),this.updatePanel()},e.prototype.updatePanel=function(){this.head.source=ResMgr.getHeadIcon(this.data.job);var t=StrUtil.addColor(Lang.recharge_str15,12247261);t+=StrUtil.addColor(""+this.data.roleName,15383908),this.nameLabel.textFlow=addColorTF(t),this.data.receiveState==RedbaoReceiveState.yiLing?(this.priceTxt.text=""+this.data.yuanbaoNum,this.currentState="h1"):this.currentState="h2"},e.prototype.onClick=function(t){RechargeActSys.ins().sendRedbaoLog(this.data.redbaoId),closeWin(e)},e}(BaseWinSingle);__reflect(RedBaoResultWin.prototype,"RedBaoResultWin"),window.RedBaoResultWin=RedBaoResultWin;var RedBaoWin=function(t){function e(){var e=t.call(this)||this;return e.winType=WinType.OverlayWin,e}return __extends(e,t),e.panelNames=[RedBaoRobPanel,RedBaoSendPanel],e}(BaseWinAutoTab);__reflect(RedBaoWin.prototype,"RedBaoWin"),window.RedBaoWin=RedBaoWin;var GuanghuanAppearanceConfig=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return __extends(e,t),e}(AppearanceConfig);__reflect(GuanghuanAppearanceConfig.prototype,"GuanghuanAppearanceConfig");var SVIPMSTabItem=function(t){function e(){var e=t.call(this)||this;return e.skinName="SVIPMSTabItemEUI",e.mcSelect=new MC,e.mcSelect.playFile(ResMgr.getEffName("yyms1"),-1),e.mcSelect.scaleX=e.mcSelect.scaleY=.4,e.groupSelect.addChild(e.mcSelect),e}return __extends(e,t),e.prototype.dataChanged=function(){var t=this.data;this.imgIcon.source="yyms_zycs_box"+t.id,this.imgYB.source="svipms_zycs_b"+t.id,this.updateRp()},e.prototype.updateRp=function(){this.redPoint.visible=RpSys.ins().getData(SVIPMSWin,SVIPMSPanel,this.itemIndex)},e}(BaseItemRender);__reflect(SVIPMSTabItem.prototype,"SVIPMSTabItem"),window.SVIPMSTabItem=SVIPMSTabItem;var GuideConfig=function(){function t(){}return t}();__reflect(GuideConfig.prototype,"GuideConfig");var XunZhangActTipsWin=function(t){function e(){var e=t.call(this)||this;return e.init(),e}return __extends(e,t),e.prototype.init=function(){this.skinName="ZhaoCaiLongActTipsWinEUI",this.addBg(),this.layer=LayerMgr.Popup,this.mc=new MC,this.groupEntity.addChild(this.mc),this.imgTitle.source="zlxz_zycs_msz2"},e.prototype.open=function(){t.prototype.open.call(this),this.mc.playFile(ResMgr.getEffName("zlxz_zycs_xz"),-1)},e}(BaseWin);__reflect(XunZhangActTipsWin.prototype,"XunZhangActTipsWin"),window.XunZhangActTipsWin=XunZhangActTipsWin;var XunZhangBuyWin=function(t){function e(){var e=t.call(this)||this;return e.init(),e}return __extends(e,t),e.prototype.init=function(){this.skinName="XunZhangBuyWinEUI",this.addBg(),this.layer=LayerMgr.Popup,this.btnReceive.redPoint.visible=!0,this.listArray=new eui.ArrayCollection,this.list.itemRenderer=ItemBaseRewardEvent,this.list.dataProvider=this.listArray,this.mc=new MC,this.entityGroup.addChild(this.mc)},e.prototype.open=function(){t.prototype.open.call(this),this.addLsn(RechargePowerSys.ins().patchXunZhangBuy,this.updatePanel),this.addClickE(this.btnBuy,this.onClick),this.addClickE(this.btnReceive,this.onClick),this.addItemTapE(this.list,this.onlistItemClick),this.mc.playFile(ResMgr.getEffName("zlxz_zycs_xz"),-1),this.updatePanel()},e.prototype.updatePanel=function(){var t=RechargePowerSys.ins().xunZhangData,e=Cfg.getConfig(RechagePowerConstConfig);this.listArray.source=e.zlxzreward;var i=Cfg.getPayMoneyRMBByYb(Cfg.getConfig(RechagePowerConstConfig).zlxzbuycount);this.btnBuy.label="投资"+i+"元",this.lbDesc.text=""+e.zlxzmoshi,this.currentState=0==t.buyState?"buy":"receive"},e.prototype.onlistItemClick=function(t){var e=t.itemRenderer,i=e.data;i.id==GConst.ZLXZID?(openWin(XunZhangWin),t.stopImmediatePropagation()):GFunc.openItemTips(i)},e.prototype.onClick=function(t){switch(t.currentTarget){case this.btnBuy:VipSys.ins().showReCharge(Cfg.getConfig(RechagePowerConstConfig).zlxzbuycount);break;case this.btnReceive:RechargePowerSys.ins().sendXunZhangBuy(),closeWin(this)}},e}(BaseWin);__reflect(XunZhangBuyWin.prototype,"XunZhangBuyWin"),window.XunZhangBuyWin=XunZhangBuyWin;var GuildActivityConfig=function(){function t(){}return t}();__reflect(GuildActivityConfig.prototype,"GuildActivityConfig");var XunZhangWinItem=function(t){function e(){var e=t.call(this)||this;return e.skinName="XunZhangWinItemEUI",e}return __extends(e,t),e.prototype.dataChanged=function(){var t=this.data;this.lbPower.text="",this.lbDesc.textFlow=addColorTF(t.config.desc),t.isReceive?this.currentState="get":t.canGet()?this.currentState="act":this.currentState="noact"},e}(BaseItemRender);__reflect(XunZhangWinItem.prototype,"XunZhangWinItem"),window.XunZhangWinItem=XunZhangWinItem;var XunZhangData=function(){function t(){this.buyState=0,this.xunZhangItemData=[]}return t.prototype.iniData=function(){var t=Cfg.getConfigs(ZLXZConfig,CondType.NONE);for(var e in t){var i=t[e],n=new XunZhangItemData;n.id=i.id,this.xunZhangItemData.push(n)}},t.prototype.isAct=function(){return 2==this.buyState&&!urlParam.isShenhe},t.prototype.canGet=function(){return 1==this.buyState},t.prototype.isPayMoney=function(){return this.buyState>0},t.prototype.parser=function(t){var e=t.readByte(),i=t.readShort();this.setReceiveId(i),this.setBuyState(e)},t.prototype.setBuyState=function(t){this.buyState=t;for(var e=0;e<this.xunZhangItemData.length;e++){var i=this.xunZhangItemData[e];i.buyState=t}},t.prototype.setReceiveId=function(t){for(var e=0;e<this.xunZhangItemData.length;e++){var i=this.xunZhangItemData[e];i.isReceive=t>=i.id?!0:!1}},t.prototype.canReceiva=function(){if(this.buyState>0)for(var t=0;t<this.xunZhangItemData.length;t++){var e=this.xunZhangItemData[t];if(e.canGet())return!0}return!1},t.prototype.isReceivaAll=function(){for(var t=0;t<this.xunZhangItemData.length;t++){var e=this.xunZhangItemData[t];if(0==e.isReceive)return!1}return!0},t.prototype.getPower=function(){for(var t=0,e=0;e<this.xunZhangItemData.length;e++){var i=this.xunZhangItemData[e];i.isReceive&&(t=i.config.power)}return this.xunZhangItemData[this.xunZhangItemData.length-1].config.power-t},t.prototype.getReceiveIndex=function(){for(var t=0,e=0;e<this.xunZhangItemData.length;e++){var i=this.xunZhangItemData[e];if(0==i.isReceive){t=e;break}}return t},t}();__reflect(XunZhangData.prototype,"XunZhangData");var XunZhangItemData=function(){function t(){this.id=0,this.isReceive=!1,this.buyState=0}return Object.defineProperty(t.prototype,"config",{get:function(){return this._config||(this._config=Cfg.getConfig(ZLXZConfig,this.id))},enumerable:!0,configurable:!0}),t.prototype.canGet=function(){return this.config.buyAct?0==this.isReceive&&2==this.buyState:0==this.isReceive&&Actor.ins().zsId>=this.config.zhuansheng},t.prototype.setBuyState=function(t){this.buyState=t},Object.defineProperty(t.prototype,"sort",{get:function(){return this.isReceive?0:this.canGet()?2:1},enumerable:!0,configurable:!0}),t}();__reflect(XunZhangItemData.prototype,"XunZhangItemData");var RechargeYiYuanData=function(){function t(){this.state=0,this.firstRechargeTimer=0}return t.prototype.patch=function(t){this.state=t.readByte();var e=t.readInt();this.firstRechargeTimer=Timer.ins().getTimer()+1e3*e},t.prototype.getFirstRechargeTimer=function(){return Math.max(0,this.firstRechargeTimer-Timer.ins().getTimer())},t.prototype.canReceived=function(){return 1==this.state},t.prototype.isOpen=function(){return this.getFirstRechargeTimer()>0&&2!=this.state},t}();__reflect(RechargeYiYuanData.prototype,"RechargeYiYuanData");var RechargeYiYuanWin=function(t){function e(){var e=t.call(this)||this;return e.layer=LayerMgr.Popup,e}return __extends(e,t),e.prototype.initUI=function(){t.prototype.initUI.call(this),this.listAward.itemRenderer=ItemBaseReward,this.listAward.dataProvider=this.listAwardArr=new eui.ArrayCollection,this.listAwardArr.source=Cfg.getConfig(RechargeConstConfig).yyqgrewards,this.addBg()},e.prototype.setSkinName=function(){this.skinName="RechargeYiYuanWinEUI"},e.prototype.open=function(){t.prototype.open.call(this),this.addClickE(this.btnBuy,this.onClick),this.addClickE(this.btnReceived,this.onClick),this.addLsn(RpSys.ins().patchRp,this.updateRp),this.addLsn(RechargeActSys.ins().patchYiYuanData,this.update),this.addLsn(RechargeActSys.ins().patchYiYuanReceived,this.update),this.update(),this.updateRp()},e.prototype.updateRp=function(t){void 0===t&&(t=null),(!t||t.check(e))&&(this.btnReceived.redPoint.visible=RpSys.ins().getData(ExtCom,e))},e.prototype.update=function(){var t=RechargeActSys.ins().rechargeYiYuanData;this.btnBuy.label=Cfg.getPayMoneyRMBByYb(Cfg.getConfig(RechargeConstConfig).yyqgyuanbao)+"元抢购",0==t.state?this.currentState="buy":1==t.state?this.currentState="received":this.currentState="yiReceived"},e.prototype.updateTime=function(){var t=RechargeActSys.ins().rechargeYiYuanData,e=t.getFirstRechargeTimer()/1e3,i=DateUtil.isDayTime(1e3*e)?"dd天hh小时mm分钟":"hh小时mm分钟ss秒";this.lbTimer.textFlow=addColorTF("活动倒计时:"+addColor(getFormatTime(e,i),5373822))},e.prototype.onClick=function(t){switch(t.currentTarget){case this.btnBuy:Actor.ins().sVipLv>=Cfg.getConfig(RechargeConstConfig).yyqgvip?VipSys.ins().showReCharge(Cfg.getConfig(RechargeConstConfig).yyqgyuanbao):(showtipsFail("SVIP等级不足，无法购买"),openWin(FirstRechargeBuyWin));break;case this.btnReceived:RechargeActSys.ins().sendYiYuanReceived()}},e.getSysId=function(){return 11},e}(BaseWinSingle);__reflect(RechargeYiYuanWin.prototype,"RechargeYiYuanWin"),window.RechargeYiYuanWin=RechargeYiYuanWin;var ZeroBuyData=function(){function t(){this.id=1,this.state=0,this.endTick=0}return t.prototype.parser=function(t){this.state=t.readByte();var e=t.readInt();this.endTick=Timer.ins().getEgretTimer()+1e3*e},Object.defineProperty(t.prototype,"config",{get:function(){return this._config||(this._config=Cfg.getConfig(ZeroBuyConfig,this.id))},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"leftTime",{get:function(){return Math.max((this.endTick-Timer.ins().getEgretTimer())/1e3,0)},enumerable:!0,configurable:!0}),t.prototype.isBuy=function(){return 1==this.state},t.prototype.hasGetAward=function(){return 2==this.state},t.prototype.isNotBuy=function(){return 0==this.state},t.prototype.isConsumeEnough=function(){return Actor.ins().getCurrency(CurType.JinZuan)>=this.config.need},t.prototype.canGetAward=function(){return this.isBuy()&&0==this.leftTime},t}();__reflect(ZeroBuyData.prototype,"ZeroBuyData");var ZeroBuyWin=function(t){function e(){var e=t.call(this)||this;return e.selectIndex=0,e.initUI(),e}return __extends(e,t),e.prototype.initUI=function(){this.skinName="ZeroBuyWinEUI",this.layer=LayerMgr.Popup,t.prototype.initUI.call(this),this.tabType.dataProvider=new eui.ArrayCollection([{source:"lyg_zycs_yjlb"},{source:"lyg_zycs_fhlb"},{source:"lyg_zycs_jbsz"}]),this.listAward.itemRenderer=ItemBaseReward,this.listAward.dataProvider=this.listAwardArr=new eui.ArrayCollection,this.setSkinPart("item",new ItemBaseReward),this.addBg()},e.prototype.open=function(){t.prototype.open.call(this),this.addClickE(this.btnBuy,this.onClick),this.addClickE(this.btnGet,this.onClick),this.addItemTapE(this.tabType,this.onItemClick),this.addLsn(RechargeActSys.ins().patchsendZeroBuyBuy,this.updateBtnState),this.addLsn(RechargeActSys.ins().patchZeroBuyGetAward,this.updateBtnState),this.addLsn(RpSys.ins().patchRp,this.updateRp),this.tabType.selectedIndex=this.selectIndex=this.getAutoIndex(),this.update(),this.updateRp()},e.prototype.getAutoIndex=function(){for(var t=0,e=RechargeActSys.ins().zeroBuyDatas,i=0;i<e.length;i++)if(e[i].canGetAward()){t=i;break}return t},e.prototype.updateTime=function(t){void 0===t&&(t=0);var e=RechargeActSys.ins().getZeroBuyData(this.curId),i=e.leftTime;i&&(this.labelDesc.text=DateUtil.formatTime(1e3*i,"dd天hh小时mm分钟ss秒")+"后可领取仙券")},e.prototype.updateRp=function(t){if(!t||t.check(this.getThisDef())){this.tabType.validateNow();for(var i=0;i<this.tabType.numElements;i++){var n=this.tabType.getElementAt(i);n&&(n.redPoint.visible=RpSys.ins().getData(ExtCom,e,RechargeActSys.ins().zeroBuyDatas[i].id))}this.updateBtnRp(t)}},e.prototype.updateBtnRp=function(t){(!t||t.check(this.getThisDef()))&&(this.btnBuy.redPoint.visible=RpSys.ins().getData(ExtCom,e,this.curId,"buy"))},e.prototype.onItemClick=function(t){this.selectIndex!=t.itemIndex&&(this.selectIndex=t.itemIndex,this.update())},e.prototype.update=function(){var t=Cfg.getConfig(ZeroBuyConfig,this.curId);this.listAwardArr.source=t.item,this.item.data=GFunc.creatRewardDataById(CurType.JinZuan,t.need),this.imgJZ.source="lyg_zycs_"+(this.curId+3),this.imgName.source="lyg_zycs_msz"+this.curId,this.imgDay.source="lyg_zycs_"+this.curId,this.labelPrice.text=t.need.toString(),this.labelPrice.textColor=Actor.ins().getCurrency(CurType.JinZuan)>=t.need?5767068:16773538,this.bitPower.text=t.power.toString(),this.updateBtnState()},e.prototype.updateBtnState=function(){var t=RechargeActSys.ins().getZeroBuyData(this.curId);this.groupDesc.visible=this.btnBuy.visible=t.isNotBuy(),this.labelTips.text="第"+t.config.returnday+"天登录可以领取",this.imgYGM.visible=!t.isNotBuy(),this.labelDesc.visible=!t.isNotBuy()&&t.leftTime>0,this.btnGet.visible=t.canGetAward(),this.imgYLQ.visible=t.hasGetAward(),this.updateBtnRp(),this.updateTime()},Object.defineProperty(e.prototype,"curId",{get:function(){return this.selectIndex+1},enumerable:!0,configurable:!0}),e.prototype.onClick=function(t){switch(t.currentTarget){case this.btnGet:var e=RechargeActSys.ins().getZeroBuyData(this.curId);e.isBuy()&&RechargeActSys.ins().sendZeroBuyGetAward(this.curId);break;case this.btnBuy:var e=RechargeActSys.ins().getZeroBuyData(this.curId);e.isNotBuy()&&GFunc.checkCurrency(CurType.JinZuan,e.config.need)&&RechargeActSys.ins().sendZeroBuyBuy(this.curId)}},e}(BaseWinSingle);__reflect(ZeroBuyWin.prototype,"ZeroBuyWin"),window.ZeroBuyWin=ZeroBuyWin;var ZhaoCaiLongActTipsWin=function(t){function e(){var e=t.call(this)||this;return e.init(),e}return __extends(e,t),e.prototype.init=function(){this.skinName="ZhaoCaiLongActTipsWinEUI",this.addBg(),this.layer=LayerMgr.Popup,this.mc=new MC,this.groupEntity.addChild(this.mc),this.imgTitle.source="hjsl_zycs_msz3"},e.prototype.open=function(){t.prototype.open.call(this),this.mc.playFile(ResMgr.getEffName("hjyl"),-1)},e}(BaseWin);__reflect(ZhaoCaiLongActTipsWin.prototype,"ZhaoCaiLongActTipsWin"),window.ZhaoCaiLongActTipsWin=ZhaoCaiLongActTipsWin;var ZhaoCaiLongBuyWin=function(t){function e(){var e=t.call(this)||this;return e.init(),e}return __extends(e,t),e.prototype.init=function(){this.skinName="ZhaoCaiLongBuyWinEUI",this.addBg(),this.layer=LayerMgr.Popup,this.btnReceive.redPoint.visible=!0,this.listArray=new eui.ArrayCollection,this.list.itemRenderer=ItemBaseRewardEvent,this.list.dataProvider=this.listArray,this.mc=new MC,this.entityGroup.addChild(this.mc)},e.prototype.open=function(){t.prototype.open.call(this),this.addLsn(RechargePowerSys.ins().patchhaoCaiLongBuy,this.updatePanel),this.addClickE(this.btnBuy,this.onClick),this.addClickE(this.btnReceive,this.onClick),this.addItemTapE(this.list,this.onlistItemClick),this.mc.playFile(ResMgr.getEffName("hjyl"),-1),this.updatePanel()},e.prototype.updatePanel=function(){var t=RechargePowerSys.ins().zhaoCaiLongData,e=Cfg.getConfig(RechagePowerConstConfig);this.listArray.source=e.zclreward,this.btnBuy.label="投资"+Cfg.getPayMoneyRMBByYb(e.zclbuycount)+"元",this.lbDesc.text=""+e.zclmoshi,this.currentState=0==t.buyState?"buy":"receive"},e.prototype.onlistItemClick=function(t){var e=t.itemRenderer,i=e.data;i.id==GConst.ZCMID?(openWin(ZhaoCaiLongWin),t.stopImmediatePropagation()):GFunc.openItemTips(i)},e.prototype.onClick=function(t){switch(t.currentTarget){case this.btnBuy:VipSys.ins().showReCharge(Cfg.getConfig(RechagePowerConstConfig).zclbuycount);break;case this.btnReceive:RechargePowerSys.ins().sendhaoCaiLongBuy(),closeWin(this)}},e}(BaseWin);__reflect(ZhaoCaiLongBuyWin.prototype,"ZhaoCaiLongBuyWin"),window.ZhaoCaiLongBuyWin=ZhaoCaiLongBuyWin;var GuildBattleConst=function(){function t(){}return t}();__reflect(GuildBattleConst.prototype,"GuildBattleConst");var ZhaoCaiLongWinItem=function(t){function e(){var e=t.call(this)||this;return e.skinName="ZhaoCaiLongWinItemEUI",e}return __extends(e,t),e.prototype.dataChanged=function(){var t=this.data;this.lbYb.text=t.config.yuanbao.toString(),this.lbDesc.textFlow=addColorTF("转生达到"+GFunc.getZSNameBydb(t.config.zhuansheng)+"可获得"),t.isReceive?this.currentState="get":t.canGet()?this.currentState="act":this.currentState="noact"},e}(BaseItemRender);__reflect(ZhaoCaiLongWinItem.prototype,"ZhaoCaiLongWinItem"),window.ZhaoCaiLongWinItem=ZhaoCaiLongWinItem;var ZhaoCaiLongData=function(){function t(){this.buyState=0,this.zhaoCaiLongItemDatas=[]}return t.prototype.iniData=function(){var t=Cfg.getConfigs(ZCLConfig,CondType.NONE);for(var e in t){var i=t[e],n=new ZhaoCaiLongItemData;n.id=i.id,this.zhaoCaiLongItemDatas.push(n)}},t.prototype.noBuy=function(){return 0==this.buyState},t.prototype.isBuy=function(){return this.buyState>0},t.prototype.isAct=function(){return 2==this.buyState},t.prototype.canGet=function(){return 1==this.buyState},t.prototype.parser=function(t){this.buyState=t.readByte();var e=t.readShort();this.setReceiveId(e)},t.prototype.setBuyState=function(t){this.buyState=t},t.prototype.setReceiveId=function(t){for(var e=0;e<this.zhaoCaiLongItemDatas.length;e++){var i=this.zhaoCaiLongItemDatas[e];i.isReceive=t>=i.id?!0:!1}},t.prototype.canReceiva=function(){if(this.buyState>0)for(var t=0;t<this.zhaoCaiLongItemDatas.length;t++){var e=this.zhaoCaiLongItemDatas[t];if(e.canGet())return!0}return!1},t.prototype.isReceivaAll=function(){for(var t=0;t<this.zhaoCaiLongItemDatas.length;t++){var e=this.zhaoCaiLongItemDatas[t];if(0==e.isReceive)return!1}return!0},t.prototype.getYb=function(){for(var t=0,e=0;e<this.zhaoCaiLongItemDatas.length;e++){var i=this.zhaoCaiLongItemDatas[e];0==i.isReceive&&(t+=i.config.yuanbao)}return t},t.prototype.getReceiveIndex=function(){for(var t=0,e=0;e<this.zhaoCaiLongItemDatas.length;e++){var i=this.zhaoCaiLongItemDatas[e];if(0==i.isReceive){t=e;break}}return t},t}();__reflect(ZhaoCaiLongData.prototype,"ZhaoCaiLongData");var ZhaoCaiLongItemData=function(){function t(){this.id=0,this.isReceive=!1}return Object.defineProperty(t.prototype,"config",{get:function(){return this._config||(this._config=Cfg.getConfig(ZCLConfig,this.id))},enumerable:!0,configurable:!0}),t.prototype.canGet=function(){return 0==this.isReceive&&Actor.ins().zsId>=this.config.zhuansheng},Object.defineProperty(t.prototype,"sort",{get:function(){return this.isReceive?0:this.canGet()?2:1},enumerable:!0,configurable:!0}),t}();__reflect(ZhaoCaiLongItemData.prototype,"ZhaoCaiLongItemData");var ErrorWin=function(t){function e(){var e=t.call(this)||this;return e.layer=LayerMgr.Top,e.winType=WinType.NormalWin,e.index=0,e.errorAtrList=[],e}return __extends(e,t),e.prototype.initUI=function(){t.prototype.initUI.call(this),this.isLog=!1,this.skinName="ErrorWinSkin"},e.prototype.open=function(e,i){void 0===e&&(e=""),void 0===i&&(i=0),t.prototype.open.call(this),this.addClickE(this,this.onClick);var n=new ErrorStrData;n.errorstr=e,n.type=i,this.errorAtrList.push(n),this.updateDesc()},e.prototype.close=function(){t.prototype.close.call(this),this.index=0,this.errorAtrList.length=0},e.prototype.updateDesc=function(){var t=this.errorAtrList[this.index];0==t.type?this.labelTitle.text="客户端异常":1==t.type&&(this.labelTitle.text="服务器异常"),this.labelContent.textFlow=addColorTF(t.errorstr),this.lbCount.text=this.index+1+"/"+this.errorAtrList.length},e.prototype.onClick=function(t){switch(t.target){case this.btnLeft:0==this.index?showtipsFail("当前在第一页"):(this.index--,this.updateDesc());break;case this.btnRight:this.index==this.errorAtrList.length-1?showtipsFail("当前在最后一页"):(this.index++,this.updateDesc());break;case this.btnCopy:ComUtil.copyResult(this.labelContent.text),showtipsSuc("复制成功")}},e}(BaseWinSingle);__reflect(ErrorWin.prototype,"ErrorWin"),window.ErrorWin=ErrorWin;var ErrorStrData=function(){function t(){this.type=0}return t}();__reflect(ErrorStrData.prototype,"ErrorStrData");var DaZaoSys=function(t){function e(){var e=t.call(this)||this;return e.sysId=PackId.Equip,e}return __extends(e,t),e.ins=function(){return t.getIns.call(this,EquipSys)},e}(BaseSys);__reflect(DaZaoSys.prototype,"DaZaoSys");var System;!function(t){t.daZaoSys=DaZaoSys.ins.bind(DaZaoSys)}(System||(System={})),window.DaZaoSys=DaZaoSys;var EquipSys=function(t){function e(){var e=t.call(this)||this;e.hufudata=[],e.roleZhuoYueCounts=[],e.daZaoTabDatas=[],e.sysId=PackId.Equip,e.reg(1,e.doUpDataEquip),e.reg(2,e.patchSmeltEquipComplete),e.reg(3,e.patchHuFuUpdate),e.reg(4,e.patchEquipList),e.reg(5,e.patchRongLianData),e.reg(6,e.patchOneKeyEquip),e.reg(10,e.patchDaZaoEquip),e.reg(11,e.patchDaZaoRingUpStar),e.reg(12,e.patchDaZaoRingUpRank),e.reg(13,e.patchDaZaoFenJie);for(var i=0;3>i;i++)e.hufudata[i]=new EquipsData,e.hufudata[i].equipPos=EquipPos.Hufu;var n=Cfg.getConfigs(DazaoEquipConfig,CondType.NONE);for(var a in n){var o=n[a],s=new DaZaoTabData;s.tabName=GFunc.getChineseNum(Number(a))+"星装备";for(var r in o){var u=o[r],h=new DaZaoTabEqupData;h.config=u,h.parentTabName=s.tabName,h.iniData(),s.daZaoTabSubDatas.push(h)}e.daZaoTabDatas.push(s)}var l=new DaZaoTabData;l.tabName="仙戒魔戒";var p=new DaZaoTabGodRingStageData;p.pos=EquipPos.RING1,p.parentTabName=l.tabName,l.daZaoTabSubDatas.push(p);var c=new DaZaoTabMoRingStageData;c.pos=EquipPos.RING2,c.parentTabName=l.tabName,l.daZaoTabSubDatas.push(c);var d=new DaZaoTabGodRingStarData;d.pos=EquipPos.RING1,d.parentTabName=l.tabName,l.daZaoTabSubDatas.push(d);var g=new DaZaoTabMoRingStarData;g.pos=EquipPos.RING2,g.parentTabName=l.tabName,l.daZaoTabSubDatas.push(g),e.daZaoTabDatas.push(l);var f=Cfg.getConfigs(DazaoFootEquipConfig),y=new DaZaoTabData;y.tabName="足迹铭文";for(var i=0;i<f.length;i++){var o=f[i],m=f[i],C=getDefinitionByName("DaZaoTabFootEqupData"+o.viewType),h=new C;h.config=m,h.parentTabName=y.tabName,h.iniData(),y.daZaoTabSubDatas.push(h)}e.daZaoTabDatas.push(y);var v=new DaZaoTabData;v.tabName="分解";for(var i=1;5>i;i++){var S=new DaZaoFenJieEquipData;S.star=i,S.parentTabName=v.tabName,v.daZaoTabSubDatas.push(S)}return e.daZaoTabDatas.push(v),e}return __extends(e,t),e.ins=function(){return t.getIns.call(this,e)},Object.defineProperty(e.prototype,"rongLianData",{get:function(){return null==this._rongLianData&&(this._rongLianData=new RongLianData),this._rongLianData},enumerable:!0,configurable:!0}),e.prototype.sendWearEquipment=function(t){var i=e.ins().getBytes(1);i.writeInt(t),this.send(i)},e.prototype.doUpDataEquip=function(t){BagSys.ins().doUpDataEquip(t)},e.prototype.sendSmeltEquip=function(t){for(var i=e.ins().getBytes(2),n=0,a=0;a<t.length;a++)null!=t[a]&&n++;i.writeShort(n);for(var a=0;a<t.length;a++)null!=t[a]&&i.writeDouble(t[a].handle);this.send(i)},e.prototype.patchSmeltEquipComplete=function(t){for(var e=t.readByte(),i=[],n=0;e>n;n++){var a=new ItemDataReward;a.parser2(t),i.push(a)}this.rongLianData.level=t.readInt(),this.rongLianData.exp=t.readInt();var o=new RongLianRewearData;return o.itemRewear=i,0==e&&showtipsSuc("已自动熔炼多余装备"),o},e.prototype.sendHuFuOpen=function(t){var e=this.getBytes(3);e.writeShort(t),this.send(e)},e.prototype.patchHuFuUpdate=function(t){BagSys.ins().doUpDataEquip(t)},e.prototype.patchEquipList=function(t){BagSys.ins().patchEquipList(t),RpFun.showDaZaoEquipRedPoint()},e.prototype.patchRongLianData=function(t){this.rongLianData.level=t.readInt(),this.rongLianData.exp=t.readInt()},e.prototype.sendOneKeyEquip=function(t){var e=this.getBytes(6);e.writeByte(t.length);for(var i=0;i<t.length;i++)e.writeInt(t[i]);this.send(e)},e.prototype.patchOneKeyEquip=function(t){BagSys.ins().patchOneKeyEquip(t)},e.prototype.gethufu=function(t){return this.hufudata[t]},e.prototype.sendDaZaoEquip=function(t,e){void 0===e&&(e=[]);var i=this.getBytes(10);i.writeInt(t),i.writeByte(e.length);for(var n=0;n<e.length;n++)i.writeDouble(e[n]);this.send(i)},e.prototype.patchDaZaoEquip=function(t){var e=t.readInt();openWin(DaZaoSuccessTipsWin,e)},e.prototype.sendDaZaoRingUpStar=function(t){var e=this.getBytes(11);e.writeByte(t),this.send(e)},e.prototype.patchDaZaoRingUpStar=function(t){var e=t.readInt();BagSys.ins().getEquipByIndex(Cfg.getItemCfg(e).subType).updateEquipId(e),openWin(DaZaoSuccessTipsWin,e),RpFun.showDaZaoEquipRedPoint()},e.prototype.sendDaZaoRingUpRank=function(t){var e=this.getBytes(12);e.writeByte(t),this.send(e)},e.prototype.patchDaZaoRingUpRank=function(t){var e=t.readInt();BagSys.ins().getEquipByIndex(Cfg.getItemCfg(e).subType).updateEquipId(e),openWin(DaZaoSuccessTipsWin,e),RpFun.showDaZaoEquipRedPoint()},e.prototype.sendDaZaoFenJie=function(t){var e=this.getBytes(13),i=t.length;e.writeByte(i);for(var n=0;i>n;n++)e.writeDouble(t[n]);this.send(e)},e.prototype.patchDaZaoFenJie=function(t){for(var e=t.readByte(),i=[],n=0;e>n;n++){var a=new ItemDataReward;a.parser2(t),i.push(a)}openWin(DaZaoFenJieSuccessTips,i)},e.prototype.patchDaZaoEquipSelect=function(t,e){return[t,e]},e.prototype.getTuiJianTabIndex=function(){for(var t=0,e=0;e<this.daZaoTabDatas.length;e++)if(this.daZaoTabDatas[e].getTuiJianSubTabIndex()>0){t=e;break}return t},e.prototype.getEquipCount=function(){for(var t=0,e=BagSys.ins().equipDatas,i=0;i<e.length;i++){var n=e[i];n.hasEquipOn()&&t++}return t},e.prototype.getEquipAddLevelCouontByLevel=function(t){for(var e=0,i=BagSys.ins().equipDatas,n=0;n<i.length;n++){var a=i[n];a.addlv>=t&&e++}return e},e.prototype.getMinAddLevelPos=function(){for(var t=BagSys.ins().getStrengthenEquipsByRoleIndex(),e=0,i=t[0].strengthen,n=0;n<t.length;n++){var a=t[n];a&&a.hasEquipOn()&&i>a.addlv&&(i=a.addlv,e=n)}return e},e}(BaseSys);__reflect(EquipSys.prototype,"EquipSys");var System;!function(t){t.equipSys=EquipSys.ins.bind(EquipSys)}(System||(System={})),window.EquipSys=EquipSys;var RoleEditorNameWin=function(t){function e(){return t.call(this)||this}return __extends(e,t),e.prototype.initUI=function(){t.prototype.initUI.call(this),this.layer=LayerMgr.Popup,this.skinName="RoleEditorNameWinEUI",this.addBg(),this.textInput.textDisplay.textAlign=egret.HorizontalAlign.LEFT},e.prototype.open=function(){t.prototype.open.call(this),this.addClickE(this.btnOk,this.onClick)},e.prototype.onClick=function(t){switch(t.currentTarget){case this.btnOk:var e=this.textInput.text;""==e?showtipsFail(Lang.gmk_str3):e.length>7?showtipsFail(Lang.gmk_str8):LogicSys.ins().sendRename(e)}},e}(BaseWinSingle);__reflect(RoleEditorNameWin.prototype,"RoleEditorNameWin"),window.RoleEditorNameWin=RoleEditorNameWin;var DaZaoEquipConsumeItem=function(t){function e(){var e=t.call(this)||this;return e.skinName="DaZaoEquipConsumeItemEUI",e.setSkinPart("itemTarget",new ItemBase),e.itemTarget.touchEnabled=!1,e.itemTarget.touchChildren=!1,e.imgPlus.visible=!0,e.itemTarget.visible=!1,e.init(),e}return __extends(e,t),e.prototype.init=function(){this.createClickSprite()},e.prototype.createClickSprite=function(){},e.prototype.dataChanged=function(){t.prototype.dataChanged.call(this);var e=this.data;e?(this.itemTarget.data=e,this.itemTarget.visible=!0,this.imgPlus.visible=!1):(this.imgPlus.visible=!0,this.itemTarget.visible=!1)},e}(BaseItemRender);__reflect(DaZaoEquipConsumeItem.prototype,"DaZaoEquipConsumeItem"),window.DaZaoEquipConsumeItem=DaZaoEquipConsumeItem;var DaZaoEquipItem=function(t){function e(){var e=t.call(this)||this;return e.skinName="DaZaoEquipItemEUI",e.mc=new MC,e.groupMc.addChild(e.mc),e}return __extends(e,t),e.prototype.dataChanged=function(){var t=this.data;if(t){var e=t.cfg;e?(this.imgPlus.visible=!1,this.imgIcon.source=ResMgr.getItemIcon(e.getIcon(),IconType.IT_80x80),this.setStar(e.star),this.setRank(ItemType.isShowRank(e.type)?e.rank:0),this.imgEquipBg.source=ResMgr.getEquipQualityBg(e.quality),e.quality>=QualityType.Green?this.mc.playFile(ResMgr.getEquipEffResource(e.quality),-1):(this.mc.visible=!1,this.mc.stop())):(this.imgEquipBg.source=ResMgr.getEquipDefaultIcon(t.equipPos),this.clear())}else this.clear()},e.prototype.clear=function(){this.setStar(0),this.setRank(0),this.imgIcon.source="",this.imgPlus.visible=!0,this.mc.visible=!1,this.mc.stop()},e.prototype.setRank=function(t){this.bitlbRank.text=t>0?t+"r":""},e.prototype.setStar=function(t){this.groupStart.removeChildren();for(var e=0;t>e;e++){var i=new eui.Image;i.source="role_zycs_star",i.touchEnabled=!1,this.groupStart.addChild(i)}this.imgStarBg.visible=t>0},e}(BaseItemRender);__reflect(DaZaoEquipItem.prototype,"DaZaoEquipItem"),window.DaZaoEquipItem=DaZaoEquipItem;var GuildBattleDayAward=function(){function t(){}return t}();__reflect(GuildBattleDayAward.prototype,"GuildBattleDayAward");
var DaZaoEquipPosTab=function(t){function e(){var e=t.call(this)||this;return e.skinName="DaZaoEquipPosTabEUI",e}return __extends(e,t),e.prototype.dataChanged=function(){var t=this.data;this.lbName.text=t.tabName,this.imgTuiJian.visible=t.isTuiJian()},e}(BaseItemRender);__reflect(DaZaoEquipPosTab.prototype,"DaZaoEquipPosTab"),window.DaZaoEquipPosTab=DaZaoEquipPosTab;var DaZaoEquipSelectItem=function(t){function e(){var e=t.call(this)||this;return e.skinName="DaZaoEquipSelectPanelItemEUI",e.setSkinPart("itemTarget",new ItemBase),e}return __extends(e,t),e.prototype.dataChanged=function(){var t=this.data;this.itemTarget.data=t,this.lbName.text=t.cfg.getName()},e}(BaseItemRender);__reflect(DaZaoEquipSelectItem.prototype,"DaZaoEquipSelectItem"),window.DaZaoEquipSelectItem=DaZaoEquipSelectItem;var DaZaoEquipSelectWin=function(t){function e(){var e=t.call(this)||this;return e.curIndex=0,e.init(),e}return __extends(e,t),e.prototype.init=function(){this.skinName="DaZaoEquipSelectPanelEUI",this.addBg(),this.list.itemRenderer=DaZaoEquipSelectItem,this.listArray=new eui.ArrayCollection,this.list.dataProvider=this.listArray},e.prototype.open=function(e,i,n,a){void 0===a&&(a=[]),t.prototype.open.call(this),this.curIndex=e,this.addItemTapE(this.list,this.onPosListClick),this.listArray.source=a},e.prototype.onPosListClick=function(t){var e=t.itemRenderer.data;EquipSys.ins().patchDaZaoEquipSelect(this.curIndex,e),closeWin(this)},e}(BaseWin);__reflect(DaZaoEquipSelectWin.prototype,"DaZaoEquipSelectWin"),window.DaZaoEquipSelectWin=DaZaoEquipSelectWin;var DaZaoFenJiePanel=function(t){function e(){var e=t.call(this)||this;return e.selectItemDatas=[],e.maxCount=8,e.init(),e}return __extends(e,t),e.prototype.init=function(){this.skinName="DaZaoFenJiePanelEUI",this.listBagItem.itemRenderer=DaZaoFenJieSelectItem,this.listBagItemArray=new eui.ArrayCollection,this.listBagItem.dataProvider=this.listBagItemArray,this.listSelectItem.itemRenderer=ItemBase,this.listSelectItemArray=new eui.ArrayCollection,this.listSelectItem.dataProvider=this.listSelectItemArray,this.listFenJieItem.itemRenderer=ItemBaseReward,this.listFenJieItemArray=new eui.ArrayCollection,this.listFenJieItem.dataProvider=this.listFenJieItemArray},e.prototype.open=function(t){this.data=t,this.addLsn(EquipSys.ins().patchDaZaoFenJie,this.updateFenJie),this.addClickE(this.btnSelect,this.onClick),this.addClickE(this.btnFenJie,this.onClick),this.addItemTapE(this.listBagItem,this.onlistBagItemClick),this.resetPanel(),this.updatePanel()},e.prototype.updateFenJie=function(){this.resetPanel(),this.updatePanel()},e.prototype.updatePanel=function(){var t=BagSys.ins().getEquipByQualityStar(QualityType.Red,this.data.star).concat();SortUtil.sortOn(t,["rank"],[SortType.up]),this.listBagItemArray.source=t},e.prototype.updateRp=function(t){void 0===t&&(t=null)},e.prototype.onlistBagItemClick=function(t){var e=t.itemRenderer,i=e.data;-1==this.selectItemDatas.indexOf(i)?this.selectItemDatas.length>=this.maxCount?showtipsFail("最多选择"+this.maxCount+"件装备"):(this.selectItemDatas.push(i),e.setSelect(!0)):(e.setSelect(!1),this.selectItemDatas.splice(this.selectItemDatas.indexOf(i),1)),this.updateFenJieSelect(this.selectItemDatas)},e.prototype.updateFenJieSelect=function(t){this.listSelectItemArray.source=t,this.lbSelectCount.textFlow=addColorTF("已选择的装备("+t.length+"/"+this.maxCount+")"),this.updateFenJieGetItem(t)},e.prototype.updateFenJieGetItem=function(t){for(var e=[],i=0;i<t.length;i++){var n=t[i],a=Cfg.getConfig(DazaoFenjieConfig,n.cfg.rank,n.cfg.star);GFunc.mergeItemDataReward(e,a.additem)}this.listFenJieItemArray.source=e},e.prototype.resetPanel=function(){this.listBagItemArray.removeAll(),this.listBagItemArray=new eui.ArrayCollection,this.listBagItem.dataProvider=this.listBagItemArray,this.selectItemDatas.length=0,this.updateFenJieSelect(this.selectItemDatas)},e.prototype.onClick=function(t){switch(t.target){case this.btnSelect:var e=this.listBagItemArray.source;if(e.length>0){for(var i=0;i<e.length;i++){var n=e[i];if(BagSys.ins().getEquipByIndex(n.cfg.subType).power>=n.power&&-1==this.selectItemDatas.indexOf(n)&&this.selectItemDatas.length<this.maxCount){this.selectItemDatas.push(n);var a=this.listBagItem.getChildAt(i);a.setSelect(!0)}}this.updateFenJieSelect(this.selectItemDatas)}else showtipsFail("无可分解装备");break;case this.btnFenJie:if(this.selectItemDatas.length>0){for(var o=[],i=0;i<this.selectItemDatas.length;i++){var n=this.selectItemDatas[i];n&&o.push(n.handle)}EquipSys.ins().sendDaZaoFenJie(o)}else showtipsFail("请选择你要分解的装备")}},e}(BasePanel);__reflect(DaZaoFenJiePanel.prototype,"DaZaoFenJiePanel"),window.DaZaoFenJiePanel=DaZaoFenJiePanel;var DaZaoFenJieSelectItem=function(t){function e(){var e=t.call(this)||this;return e.skinName="DaZaoFenJieSelectItemEUI",e.setSkinPart("itemTarget",new ItemBase),e.itemTarget.touchEnabled=!1,e.itemTarget.touchChildren=!1,e.setSelect(!1),e}return __extends(e,t),e.prototype.dataChanged=function(){var t=this.data;this.itemTarget.data=t},e.prototype.setSelect=function(t){this.imgPlus.visible=t},e}(BaseItemRender);__reflect(DaZaoFenJieSelectItem.prototype,"DaZaoFenJieSelectItem"),window.DaZaoFenJieSelectItem=DaZaoFenJieSelectItem;var DaZaoFenJieSuccessTips=function(t){function e(){var e=t.call(this)||this;return e.init(),e}return __extends(e,t),e.prototype.init=function(){this.skinName="DaZaoFenJieSuccessTipsEUI",this.addBg(),this.list.itemRenderer=ItemBaseRewardName},e.prototype.open=function(e){t.prototype.open.call(this),this.list.dataProvider=new eui.ArrayCollection(e)},e}(BaseWin);__reflect(DaZaoFenJieSuccessTips.prototype,"DaZaoFenJieSuccessTips"),window.DaZaoFenJieSuccessTips=DaZaoFenJieSuccessTips;var GuildBattleDistributionAward=function(){function t(){}return t}();__reflect(GuildBattleDistributionAward.prototype,"GuildBattleDistributionAward");var DaZaoFootEquipPanel2=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return __extends(e,t),e.prototype.setSkinName=function(){this.skinName="DaZaoFootEquipPanelEUI"},e.prototype.init=function(){t.prototype.init.call(this),this.itemConsumes=[this.itemConsume0,this.itemConsume1,this.itemConsume2]},e.prototype.open=function(e){t.prototype.open.call(this,e),this.addLsn(FootSys.ins().patchFootMiYuDaZao,this.updateDaZaoSucceed),this.addLsn(BagSys.ins().patchItemChange,this.updateItemConsume),this.updateItemConsume()},e.prototype.updatePanel=function(){t.prototype.updatePanel.call(this),this.itemConsumeCaiLiao.data=GFunc.creatRewardDataById(Cfg.getConfig(FootConstConfig).dazaoneeditem.id,0)},e.prototype.updateItemConsume=function(t){if(void 0===t&&(t=null),null==t||t.id==Cfg.getConfig(FootConstConfig).dazaoneeditem.id){var e=Cfg.getConfig(FootConstConfig).dazaoneeditem,i=BagSys.ins().getItemCount(e.id),n=i>=e.count?5767068:15733780;this.lbConsumeCaiLiao.textFlow=addColorTF(i+"/"+e.count,n)}},e.prototype.sendDaZao=function(){GFunc.checkConsumeEnough(Cfg.getConfig(FootConstConfig).dazaoneeditem)&&t.prototype.sendDaZao.call(this)},e}(DaZaoFootEquipPanel1);__reflect(DaZaoFootEquipPanel2.prototype,"DaZaoFootEquipPanel2"),window.DaZaoFootEquipPanel2=DaZaoFootEquipPanel2;var GuildBattleLevel=function(){function t(){}return t}();__reflect(GuildBattleLevel.prototype,"GuildBattleLevel");var DaZaoRankPanel=function(t){function e(){var e=t.call(this)||this;return e.init(),e}return __extends(e,t),e.prototype.init=function(){this.skinName="DaZaoRankPanelEUI",this.setSkinPart("itemCur",new DaZaoEquipItem),this.setSkinPart("itemNext",new DaZaoEquipItem),this.listConsumeArray=new eui.ArrayCollection,this.listConsume.itemRenderer=ItemBaseConsume,this.listConsume.dataProvider=this.listConsumeArray},e.prototype.open=function(e){this.data=e,t.prototype.open.call(this),this.addLsn(BagSys.ins().patchItemChange,this.updateItem),this.addLsn(EquipSys.ins().patchDaZaoRingUpRank,this.updatePanel),this.addLsn(EquipSys.ins().patchDaZaoRingUpStar,this.updatePanel),this.addClickE(this.btnDaZao,this.onClick),this.addClickE(this.itemCur,this.onClick),this.addClickE(this.itemNext,this.onClick),this.updatePanel()},e.prototype.updateItem=function(t){void 0===t&&(t=null),(t.cfg.type==ItemType.GodRing||t.cfg.type==ItemType.MoRing)&&this.selectEquip(this.equipData)},e.prototype.updatePanel=function(){this.lbConsumeDesc.textFlow=addColorTF(this.data.getConsumeDesc()),this.lbEquipDesc.textFlow=addColorTF(this.data.getEquipDaZaoDesc()),this.lbConsumeType.text=this.data.consumeDesc,this.lbMaxDesc.text=this.data.maxLevelDesc,this.equipData=BagSys.ins().getEquipByIndex(this.data.pos),this.selectEquip(this.equipData),this.currentState=this.data.isMax()?"max":"normal"},e.prototype.selectEquip=function(t){t.hasEquipOn()?(this.itemCur.data=t,this.itemNext.data=this.data.isMax()?null:GFunc.creatItemDataById(this.data.config.tarid),this.listConsumeArray.source=this.data.isMax()?[]:this.data.config.needitem):(this.itemCur.data=t,this.itemNext.data=t,this.listConsumeArray.source=this.data.config.needitem)},e.prototype.updateRp=function(t){void 0===t&&(t=null)},e.prototype.onClick=function(t){switch(t.currentTarget){case this.btnDaZao:this.equipData.hasEquipOn()?GFunc.checkConsumeEnough(this.data.config.needitem)&&this.data.sendUp():showtipsFail(this.data.getNoEquipRankTips());break;case this.itemCur:var e=this.itemCur.data;null==e.cfg?openWin(XunBaoWin):GFunc.openItemTips(this.itemCur.data);break;case this.itemNext:e=this.itemNext.data,null==e.cfg?openWin(XunBaoWin):GFunc.openItemTips(this.itemNext.data)}},e.prototype.resetPanel=function(){this.updatePanel(),this.listConsumeArray.source=null},e}(BasePanel);__reflect(DaZaoRankPanel.prototype,"DaZaoRankPanel"),window.DaZaoRankPanel=DaZaoRankPanel;var DaZaoSuccessTipsWin=function(t){function e(){var e=t.call(this)||this;return e.init(),e}return __extends(e,t),e.prototype.init=function(){this.skinName="DaZaoSuccessTipsEUI",this.addBg(),this.setSkinPart("itemTarget",new ItemBase)},e.prototype.open=function(e){t.prototype.open.call(this),this.itemTarget.data=GFunc.creatItemDataById(e)},e}(BaseWin);__reflect(DaZaoSuccessTipsWin.prototype,"DaZaoSuccessTipsWin"),window.DaZaoSuccessTipsWin=DaZaoSuccessTipsWin;var DaZaoTabItem=function(t){function e(){var e=t.call(this)||this;return e.itemListArray=new eui.ArrayCollection,e.skinName="DaZaoTabItemEUI",e.name="DaZaoTabItem",e.itemList.itemRenderer=DaZaoTabItemSub,e.itemList.dataProvider=e.itemListArray,e}return __extends(e,t),e.prototype.dataChanged=function(){var t=this.data;this.lbName.text=t.tabName,this.itemListArray.source=t.daZaoTabSubDatas,this.itemList.validateNow(),this.updateRedPoint()},e.prototype.updateItem=function(){for(var t=this.itemList.numElements,e=0;t>e;e++){var i=this.itemList.getElementAt(e);i&&i.updateItem()}this.updateRedPoint()},e.prototype.updateRedPoint=function(){var t=this.data;if(t){this.redPoint.visible=RpSys.ins().getData(ForgeWin,DaZaoMainPanel,t.tabName);for(var e=this.itemList.numElements,i=0;e>i;i++){var n=this.itemList.getElementAt(i);n&&n.updateRedPoint()}}},e.prototype.select=function(t){this.currentState=t?"select":"none"},e.prototype.selectSubTabIndex=function(t,e){var i=this.getItemIndex(t);i.select(e)},e.prototype.getItemIndex=function(t){return this.itemList.getChildAt(t)},e}(BaseItemRender);__reflect(DaZaoTabItem.prototype,"DaZaoTabItem"),window.DaZaoTabItem=DaZaoTabItem;var DaZaoTabItemSub=function(t){function e(){var e=t.call(this)||this;return e.skinName="DaZaoTabItemSubEUI",e.name="DaZaoTabItemSub",e}return __extends(e,t),e.prototype.dataChanged=function(){var t=this.data;this.currentState=t.zslevel>Actor.ins().zsId?"noOpen":"none",this.updateItem()},e.prototype.updateItem=function(){var t=this.data;this.lbName.textFlow=addColorTF(t.tabName),this.updateRedPoint()},e.prototype.updateRedPoint=function(){var t=this.data;t&&(this.redPoint.visible=RpSys.ins().getData(ForgeWin,DaZaoMainPanel,t.parentTabName,t.redTabName))},e.prototype.select=function(t){this.currentState=t?"select":"none"},e}(BaseItemRender);__reflect(DaZaoTabItemSub.prototype,"DaZaoTabItemSub"),window.DaZaoTabItemSub=DaZaoTabItemSub;var DaZaoTipsWin=function(t){function e(){var e=t.call(this)||this;return e.skinName="DaZaoTipsWinEUI",e.list.itemRenderer=ItemBase,e.list.dataProvider=e.listArr=new eui.ArrayCollection,e}return __extends(e,t),e.prototype.open=function(e,i){var n=this;t.prototype.open.call(this),this.listArr.source=e,this.callFun=i,this.addClickE(this.btnDaZao,function(){i&&i(),closeWin(n)})},e}(BaseWinSingle);__reflect(DaZaoTipsWin.prototype,"DaZaoTipsWin"),window.DaZaoTipsWin=DaZaoTipsWin;var DaZaoFenJieEquipData=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.star=1,e}return __extends(e,t),e.prototype.getPanelName=function(){return egret.getQualifiedClassName(DaZaoFenJiePanel)},Object.defineProperty(e.prototype,"tabName",{get:function(){var t=BagSys.ins().getEquipByQualityStar(QualityType.Red,this.star).length,e=t>0?addColor("("+t+")",5949490):"";return GFunc.getChineseNum(this.star)+"星红装"+e},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"redTabName",{get:function(){return GFunc.getChineseNum(this.star)+"星红装"},enumerable:!0,configurable:!0}),e.prototype.getRedPoint=function(){var t=BagSys.ins().getEquipByQualityStar(QualityType.Red,this.star).length;return t>0},e}(DaZaoTabSubDataBase);__reflect(DaZaoFenJieEquipData.prototype,"DaZaoFenJieEquipData");var DaZaoTabData=function(){function t(){this.daZaoTabSubDatas=[]}return Object.defineProperty(t.prototype,"zslevel",{get:function(){for(var t=999999,e=0;e<this.daZaoTabSubDatas.length;e++){var i=this.daZaoTabSubDatas[e].zslevel;t>i&&(t=i)}return t},enumerable:!0,configurable:!0}),t.prototype.getTuiJianSubTabIndex=function(){for(var t=0,e=0;e<this.daZaoTabSubDatas.length;e++)if(this.daZaoTabSubDatas[e].isTuiJian()){t=e;break}return t},t.prototype.getRedPointSubTabIndex=function(){for(var t=-1,e=0;e<this.daZaoTabSubDatas.length;e++){var i=this.daZaoTabSubDatas[e],n=RpSys.ins().getData(ForgeWin,DaZaoMainPanel,i.parentTabName,i.tabName);if(n){t=e;break}}return t},t.prototype.getRedPoint=function(){return!1},t}();__reflect(DaZaoTabData.prototype,"DaZaoTabData");var DaZaoTabEqupData=function(t){function e(){var e=t.call(this)||this;return e.daZaoTabEqupPosData=[],e}return __extends(e,t),Object.defineProperty(e.prototype,"star",{get:function(){return this.config.star},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"stage",{get:function(){return this.config.stage},enumerable:!0,configurable:!0}),e.prototype.iniData=function(){for(var t=0;t<EquipPos.RING1;t++)this.daZaoTabEqupPosData[t]=new DaZaoTabEqupPosData,this.daZaoTabEqupPosData[t].pos=t,this.daZaoTabEqupPosData[t].tabName=GFunc.getEquipNameByType(t),this.daZaoTabEqupPosData[t].equipId=this.config.equipid[0][t]},e.prototype.getPanelName=function(){return egret.getQualifiedClassName(DaZaoEquipPanel)},Object.defineProperty(e.prototype,"tabName",{get:function(){return this.stage+"阶"+this.config.name[this.job]},enumerable:!0,configurable:!0}),e.prototype.getEquipDaZaoDesc=function(){return"必定获得"+addColor(this.stage+"阶红色"+this.star+"星",16711680)+"装备一件(指定部位)"},e.prototype.getConsumeDesc=function(){return Cfg.getConfig(DazaoCommonConfig).equipConsumeDesc},e.prototype.isTuiJian=function(){for(var t=!1,e=0;e<this.daZaoTabEqupPosData.length;e++)if(this.daZaoTabEqupPosData[e].isTuiJian()&&Actor.ins().zsId>=this.zslevel){t=!0;break}return t},e.prototype.getTuiJianSubTabIndex=function(){for(var t=0,e=0;e<this.daZaoTabEqupPosData.length;e++)if(this.daZaoTabEqupPosData[e].isTuiJian()){t=e;break}return t},Object.defineProperty(e.prototype,"zslevel",{get:function(){return this.config.needzslevel},enumerable:!0,configurable:!0}),e.prototype.getRedPoint=function(){var t=BagSys.ins().getEquipByStarRank(this.star-1,this.stage).concat(),e=t.length>=5&&Actor.ins().zsId>=this.zslevel;return e},e}(DaZaoTabSubDataBase);__reflect(DaZaoTabEqupData.prototype,"DaZaoTabEqupData");var GuildBattlePersonalAward=function(){function t(){}return t}();__reflect(GuildBattlePersonalAward.prototype,"GuildBattlePersonalAward");var GuildBattlePersonalRankAward=function(){function t(){}return t}();__reflect(GuildBattlePersonalRankAward.prototype,"GuildBattlePersonalRankAward");var DaZaoTabFootEqupData2=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return __extends(e,t),e.prototype.getRedPoint=function(){var t=FootSys.ins().getEquipByStar(this.star-1).concat(),e=t.length>=5&&Actor.ins().zsId>=this.zslevel&&GFunc.isConsumeEnough(Cfg.getConfig(FootConstConfig).dazaoneeditem);return e},e}(DaZaoTabFootEqupData1);__reflect(DaZaoTabFootEqupData2.prototype,"DaZaoTabFootEqupData2"),window.DaZaoTabFootEqupData2=DaZaoTabFootEqupData2;var DaZaoTabFootEqupPosData=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.pos=0,e.equipId=0,e}return __extends(e,t),e.prototype.isTuiJian=function(){var t=FootSys.ins().isChuanDaiEquipByEquipId(this.pos+1,this.equipId);return t},e.prototype.posName=function(){return GFunc.getFootEquipNameByType(this.pos)},e}(DaZaoTabEqupPosData);__reflect(DaZaoTabFootEqupPosData.prototype,"DaZaoTabFootEqupPosData");var GuildBossCommonConfig=function(){function t(){}return t}();__reflect(GuildBossCommonConfig.prototype,"GuildBossCommonConfig");var GuildBossConfig=function(){function t(){}return t}();__reflect(GuildBossConfig.prototype,"GuildBossConfig");var DaZaoTabMoRingStageData=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return __extends(e,t),Object.defineProperty(e.prototype,"tabName",{get:function(){return"魔戒升阶"},enumerable:!0,configurable:!0}),e.prototype.sendUp=function(){EquipSys.ins().sendDaZaoRingUpRank(this.pos)},e.prototype.getMinRingId=function(){return Cfg.getConfig(DazaoCommonConfig).minRankModRing[this.job]},e}(DaZaoTabGodRingStageData);__reflect(DaZaoTabMoRingStageData.prototype,"DaZaoTabMoRingStageData");var DaZaoTabMoRingStarData=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return __extends(e,t),Object.defineProperty(e.prototype,"tabName",{get:function(){return"魔戒升星"},enumerable:!0,configurable:!0}),e.prototype.sendUp=function(){EquipSys.ins().sendDaZaoRingUpStar(this.pos)},e.prototype.getMinRingId=function(){return Cfg.getConfig(DazaoCommonConfig).minStarMoRing[this.job]},e}(DaZaoTabGodRingStarData);__reflect(DaZaoTabMoRingStarData.prototype,"DaZaoTabMoRingStarData");var GuildCommonSkillConfig=function(){function t(){}return t}();__reflect(GuildCommonSkillConfig.prototype,"GuildCommonSkillConfig");var GuildConfig=function(){function t(){}return t}();__reflect(GuildConfig.prototype,"GuildConfig");var OtherRoleWin=function(t){function e(){var e=t.call(this)||this;return e.layer=LayerMgr.Popup,e.winType=WinType.NormalWin,e}return __extends(e,t),e.prototype.initUI=function(){t.prototype.initUI.call(this),this.addBg()},e.prototype.getParam=function(){return[Actor.ins().getOther()]},e.panelNames=[OtherRoleInfoPanel],e}(BaseWinAutoTab);__reflect(OtherRoleWin.prototype,"OtherRoleWin"),window.OtherRoleWin=OtherRoleWin;var GuildConveneTaskConfig=function(){function t(){}return t}();__reflect(GuildConveneTaskConfig.prototype,"GuildConveneTaskConfig");var SeePlayModelMy=function(t){function e(){return t.call(this)||this}return __extends(e,t),Object.defineProperty(e.prototype,"sex",{get:function(){return Actor.ins().sex},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"actorID",{get:function(){return Actor.ins().actorID},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"level",{get:function(){return Actor.ins().level},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"vip",{get:function(){return VipSys.ins().getCurSVipConfig().lv},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"power",{get:function(){return Actor.ins().power},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"job",{get:function(){return Actor.ins().job},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"titleId",{get:function(){return ChengHaoSys.ins().showID},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"szId",{get:function(){return SqXySys.ins().szModel.huanHuaId},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"sqId",{get:function(){return SqXySys.ins().shenQiModel.huanHuaId},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"wingId",{get:function(){return SqXySys.ins().wingModel.huanHuaId},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"meilinId",{get:function(){return SqXySys.ins().meilinModel.huanHuaId},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"damonId",{get:function(){return ShouHuNewSys.ins().damonModel.useId},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"damonMozhenId",{get:function(){return ShouHuNewSys.ins().damonModel.moZhenId},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"yongbingId",{get:function(){return ShouHuNewSys.ins().yongbingModel.useId},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"yongbingMozhenId",{get:function(){return ShouHuNewSys.ins().yongbingModel.moZhenId},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"shenmoId",{get:function(){return ShouHuNewSys.ins().shenmoModel.useId},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"shenglingId",{get:function(){return QiyuSys.ins().shengLingModel.huanHuaId},enumerable:!0,configurable:!0}),e.prototype.getEquipByIndex=function(t){return BagSys.ins().equipDatas[t]},e.prototype.getEquipLen=function(){return BagSys.ins().equipDatas.length},e.prototype.gethufu=function(t){return EquipSys.ins().gethufu(t)},e.prototype.getRoleModel=function(){return Actor.ins().attrData},e}(SeePlayModel);__reflect(SeePlayModelMy.prototype,"SeePlayModelMy");var GuildCreateConfig=function(){function t(){}return t}();__reflect(GuildCreateConfig.prototype,"GuildCreateConfig");var GuildDonateConfig=function(){function t(){}return t}();__reflect(GuildDonateConfig.prototype,"GuildDonateConfig");var RoleItemBig1=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return __extends(e,t),e.prototype.showMc=function(t){this.mc.playFile(ResMgr.getEffName("mjeff"),-1)},e}(RoleItemBig);__reflect(RoleItemBig1.prototype,"RoleItemBig1"),window.RoleItemBig1=RoleItemBig1;var GuildfbDayRawardConfig=function(){function t(){}return t}();__reflect(GuildfbDayRawardConfig.prototype,"GuildfbDayRawardConfig");var RoleUpLevelTipsWin=function(t){function e(){var e=t.call(this)||this;return e.skinName="RoleUpLevelTipsWinEUI",e.touchEnabled=!1,e.touchChildren=!1,e}return __extends(e,t),e.prototype.open=function(t){this.bitLevel.text="e"+t+"c",GFunc.playUIMovie("ls",0,0,this.groupMC)},e}(BaseItemRender);__reflect(RoleUpLevelTipsWin.prototype,"RoleUpLevelTipsWin"),window.RoleUpLevelTipsWin=RoleUpLevelTipsWin;var GuildGiftConfig=function(){function t(){}return t}();__reflect(GuildGiftConfig.prototype,"GuildGiftConfig");var KeyboardWin=function(t){function e(){var e=t.call(this)||this;return e.popupData=null,e.initUI(),e}return __extends(e,t),e.prototype.initUI=function(){this.skinName="KeyboardWinEUI"},e.prototype.open=function(e){t.prototype.open.call(this),this.popupData=e,this.addClickE(this.groupKey,this.onChange)},e.prototype.onChange=function(t){var e=t.target;if(e&&e instanceof eui.Button){var i=e;this.setNum(i.name)}},e.prototype.setXY=function(t,e){this.x=t-10,this.y=e},e.prototype.setNum=function(t){var e=this.popupData.curNum+"";switch(t){case"c":e=this.popupData.minNum+"";break;case"ok":return void(this.visible=!1);default:if(0==this.popupData.maxNum)return;e==this.popupData.minNum+""&&t==this.popupData.minNum+""?e=this.popupData.minNum+"":e+=t}this.popupData.curNum=Number(e),this.popupData.curNum>this.popupData.maxNum&&(this.popupData.curNum=this.popupData.maxNum),this.popupData.sureFun(this.popupData.curNum)},e}(BasePanel);__reflect(KeyboardWin.prototype,"KeyboardWin"),window.KeyboardWin=KeyboardWin;var RoleAttrWin1=function(t){function e(){return t.call(this)||this}return __extends(e,t),e.prototype.initUI=function(){this.layer=LayerMgr.Popup,this.skinName="RoleAttrWinEUI",this.addBg(),t.prototype.initUI.call(this),this.attrs1.itemRenderer=RoleAttrWinItem,this.attrs2.itemRenderer=RoleAttrWinItem},e.prototype.open=function(){t.prototype.open.call(this),this.iniPanel()},e.prototype.iniPanel=function(){this.lbLevel.textFlow=addColorTF("等级:"+GFunc.GetLvStrByLv(Actor.ins().level));var t=this.getDatas(1);this.attrs1.dataProvider=new eui.ArrayCollection(t);var e=this.getDatas(2);this.attrs2.dataProvider=new eui.ArrayCollection(e),this.updataExp()},e.prototype.updataExp=function(){this.proExp.maximum=Actor.ins().totalexp,this.proExp.value=Actor.ins().exp},e.prototype.getDatas=function(t){for(var e=[],i=Cfg.getConfigs(AttrViewConfig,t,CondType.ALL),n=Actor.ins().attrData,a=0;a<i.length;a++){var o=i[a],s=new RoleAttrViewData;s.attrViewConfig=o,s.attrData.type=o.type,s.attrData.value=Math.ceil(n.getAtt(o.type)),e.push(s)}return e},e}(BaseWinSingle);__reflect(RoleAttrWin1.prototype,"RoleAttrWin1"),window.RoleAttrWin1=RoleAttrWin1;var RoleAttrWinItem=function(t){function e(){var e=t.call(this)||this;return e.skinName="ComAttrItemEUI",e}return __extends(e,t),e.prototype.dataChanged=function(){var t=this.data;if(-1==t.attrViewConfig.type)this.lbCurAttr.visible=!1;else{this.lbCurAttr.visible=!0;var e=AttrData.getFm(3821938,5767068,"：");this.lbCurAttr.textFlow=addColorTF(AttrData.parse([t.attrData],{fm:e}).join("\n"))}this.lbNextAttr.text=""},e}(BaseItemRender);__reflect(RoleAttrWinItem.prototype,"RoleAttrWinItem"),window.RoleAttrWinItem=RoleAttrWinItem;var RoleEquipSelectWin=function(t){function e(){return t.call(this)||this}return __extends(e,t),e.prototype.initUI=function(){this.layer=LayerMgr.Popup,this.skinName="equipchangskin_1",this.addBg(),this.itemList.itemRenderer=RoleEquiSelectItem,this.itemScroller.viewport=this.itemList,t.prototype.initUI.call(this)},e.prototype.open=function(e){t.prototype.open.call(this),this.equipsData=e,this.setListData()},e.prototype.setListData=function(){var t=BagSys.ins().getEquipBySubType(GFunc.getEquipTypeByPos(this.equipsData.equipPos)),e=[];void 0!=this.equipsData&&void 0!=this.equipsData.cfg&&t.unshift(this.equipsData);for(var i=0;i<t.length;i++){var n=new RoleEquiSelectItemData;n.itemData=t[i],n.selectEquipData=this.equipsData,this.equipsData?1==i&&(n.isTj=!0):0==i&&(n.isTj=!0),e.push(n)}this.itemList.dataProvider=new eui.ArrayCollection(e)},e.prototype.getListItem=function(t){return this.itemList.validateNow(),this.itemList.getElementAt(t)},e}(BaseWinSingle);__reflect(RoleEquipSelectWin.prototype,"RoleEquipSelectWin"),window.RoleEquipSelectWin=RoleEquipSelectWin;var RoleEquiSelectItemData=function(){function t(){this.isTj=!1}return t}();__reflect(RoleEquiSelectItemData.prototype,"RoleEquiSelectItemData");var RoleEquiSelectItem=function(t){function e(){var e=t.call(this)||this;return e.greedmc=new MC,e.skinName="equipchangskin_3",e.setSkinPart("itemIcon",new ItemIcon),e.init(),e.greedmc.x=400,e.greedmc.y=70,e.addChild(e.greedmc),e}return __extends(e,t),e.prototype.init=function(){this.lbArrt1.lineSpacing=3,this.lbArrt2.lineSpacing=3,this.btnEquip.touchEnabled=!0,this.imgline1.visible=!1,this.addClickE(this.btnEquip,this.onClick)},e.prototype.onClick=function(t){EquipSys.ins().sendWearEquipment(this.equiSelect.itemData.id),closeWin(RoleEquipSelectWin)},e.prototype.dataChanged=function(){this.equiSelect=this.data,this.setItemData(this.equiSelect.itemData)},e.prototype.setItemData=function(t){var e=430,i=-28;if(null!=t){this.itemIcon.setDataByItemConfig(t.cfg),this.lbName.text=t.equipName,this.lbScore.text=Lang.common_str66+Math.floor(BagSys.ins().getPowerOfItem(t)),this.lbNeed.text=1e4==t.cfg.zslevel?GFunc.GetLvStrByLv(t.cfg.level).trim():GFunc.getZSNameBydb(t.cfg.zslevel),this.lbrank.text=t.cfg.rank+Lang.common_jie,this.lbtype.text=GFunc.getEquipNameByType(t.cfg.subType),this.lbjob.text=GFunc.getJobNameByJob(Actor.ins().job);for(var n="",a=t.cfg.pattr,o=AttrData.getFm(2508416,2508416,"","："),s=0;s<a.length;s++){var r=a[s].value;r>0&&(n+=AttrData.parse([a[s]],{fm:o}).join("\n")+"\n",i+=28)}this.lbArrt1.textFlow=addColorTF(n,2508416),this.imgline2.y=155+i,this.imgline2.visible=!1,n="";for(var s=0;s<t.cfg.exattr.length;s++)if(0!=t.cfg.exattr[s].type){var u=GConst.ZhuoYueColor[0],h=GFunc.getEquipAttrNoColor(AttrType.ZY,t.cfg.exattr[s],u,u);h=StrUtil.addColor(h,u),n+=h+"\n",i+=28,0==s&&(i+=10),this.imgline2.visible=!0}if(this.lbArrt2.textFlow=addColorTF(n),n="",this.btnEquip.redPoint.visible=!1,this.equiSelect.selectEquipData.handle==this.equiSelect.itemData.handle)this.isShowDressUI(!0),this.imgTipIcon.source="";else{this.isShowDressUI(!1);var l=this.equiSelect.selectEquipData;void 0!=l.cfg?(t.power>l.power&&(this.btnEquip.redPoint.visible=this.equiSelect.isTj),this.imgTipIcon.source=ResMgr.getEquipAttrContrastIcon1(t.power,l.power)):this.imgTipIcon.source=ResMgr.getEquipAttrContrastIcon1(t.power,0)}e=165+i}else this.imgIcon.source="",this.imgBg.source=ResMgr.getItemqualityResource(1);this.imgbg.height=250>=e?250:e,this.height=250>=e?250:e},e.prototype.isShowDressUI=function(t){this.imgDress.visible=t,this.btnEquip.visible=!t},e.prototype.getEuipBtn=function(){return this.btnEquip},e}(BaseItemRender);__reflect(RoleEquiSelectItem.prototype,"RoleEquiSelectItem"),window.RoleEquiSelectItem=RoleEquiSelectItem;var RoleOpenTipsItem=function(t){function e(){var e=t.call(this)||this;return e.skinName="RoleOpenTipsItemEUI",e}return __extends(e,t),e.prototype.dataChanged=function(){var t=this.data;this.imgIcon.source=ResMgr.getSkillResourceItemName(t.icon,!0,!1)},e}(BaseItemRender);__reflect(RoleOpenTipsItem.prototype,"RoleOpenTipsItem"),window.RoleOpenTipsItem=RoleOpenTipsItem;var RoleUseSelect=function(t){function e(){var e=t.call(this)||this;return e._curRole=0,e.roleModels=[],e.init(),e}return __extends(e,t),e.prototype.init=function(){this.skinName="RoleUseSelectSkin",this.btnRoles=[this.role0,this.role1,this.role2],this.roleMovie=[];for(var t=0;3>t;t++){var e=new MC;e.x=45,e.y=45,this.roleMovie.push(e)}},e.prototype.open=function(){this.addClickE(this,this.onClick),this.setCurRole(this._curRole),this.setModel(Actor.ins().attrData)},e.prototype.setModel=function(t){this.roleModels=[t],this.updateRole()},e.prototype.setRedPoint=function(t,e){this.btnRoles[t].redPoint.visible=e},e.prototype.getCurRole=function(){return this._curRole},e.prototype.getCurRoleModel=function(){return this.roleModels[this._curRole]},e.prototype.setCurRole=function(t){this._curRole=t;for(var e=0;e<this.btnRoles.length;e++)this.btnRoles[e].selected=e==t},e.prototype.getCurJob=function(){return Actor.ins().job},e.prototype.setIndex=function(t){this.setCurRole(t),this.dispatchEventWith(egret.Event.CHANGE,!1,this._curRole)},e.prototype.onClick=function(t){var e=this.btnRoles.indexOf(t.target);e>-1&&this.setIndex(e)},e.prototype.updateRole=function(){for(var t,e,i=this.btnRoles.length,n=0;i>n;n++)t=this.btnRoles[n],e=this.roleModels[n],e?(t.visible=!0,t.imgJob.visible=!0,t.imgJob.source=ResMgr.getJobImgBG(Actor.ins().job),t.lbjob.text=Lang.common_jobName[Actor.ins().job],t.icon=ResMgr.getHeadIcon(Actor.ins().sex),this.roleMovie[n]&&DisUtil.remove(this.roleMovie[n])):t.visible=!1},e}(BaseEUI);__reflect(RoleUseSelect.prototype,"RoleUseSelect"),window.RoleUseSelect=RoleUseSelect;var RoleAttrViewData=function(){function t(){this.attrData=new AttrData}return t}();__reflect(RoleAttrViewData.prototype,"RoleAttrViewData");var RongLianEquipItem=function(t){function e(){var e=t.call(this)||this;return e.skinName="RongLianPanelItemEUI",e.itemTarget.touchChildren=!1,e.itemTarget.touchEnabled=!1,e.setSkinPart("itemTarget",new ItemBase),e}return __extends(e,t),e.prototype.dataChanged=function(){t.prototype.dataChanged.call(this);var e=this.data;this.itemTarget.visible=e?!0:!1,this.itemTarget.data=e},e.prototype.playEff=function(){this.mc=new MC,this.mc.x=46,this.mc.y=45,this.mc.playFile(getEffName("rl"),1),this.addChild(this.mc)
},e}(BaseItemRender);__reflect(RongLianEquipItem.prototype,"RongLianEquipItem"),window.RongLianEquipItem=RongLianEquipItem;var GuildLevelConfig=function(){function t(){}return t}();__reflect(GuildLevelConfig.prototype,"GuildLevelConfig");var RongLianSuccessTips=function(t){function e(){var e=t.call(this)||this;return e.init(),e}return __extends(e,t),e.prototype.init=function(){this.skinName="RongLianSuccessTipsEUI",this.addBg(),this.list.itemRenderer=ItemBaseRewardName},e.prototype.open=function(e){t.prototype.open.call(this),this.list.dataProvider=new eui.ArrayCollection(e)},e}(BaseWin);__reflect(RongLianSuccessTips.prototype,"RongLianSuccessTips"),window.RongLianSuccessTips=RongLianSuccessTips;var RongLianTipsWin=function(t){function e(){var e=t.call(this)||this;return e.oldLevel=0,e.init(),e}return __extends(e,t),e.prototype.init=function(){this.skinName="RongLianTipsEUI",this.addBg()},e.prototype.open=function(){t.prototype.open.call(this),this.addClickE(this.btnOk,this.onClick),this.addLsn(EquipSys.ins().patchSmeltEquipComplete,this.updateRongLianSucceed),this.oldLevel=EquipSys.ins().rongLianData.level},e.prototype.updateRongLianSucceed=function(t){this.oldLevel!=EquipSys.ins().rongLianData.level&&openWin(RongLianUpLevelTips,this.oldLevel,EquipSys.ins().rongLianData.level,function(){},this),closeWin(e)},e.prototype.onClick=function(t){switch(t.currentTarget){case this.btnOk:EquipSys.ins().sendSmeltEquip([])}},e}(BaseWin);__reflect(RongLianTipsWin.prototype,"RongLianTipsWin"),window.RongLianTipsWin=RongLianTipsWin;var RongLianUpLevelTips=function(t){function e(){var e=t.call(this)||this;return e.closeFun=new Caller,e.mc2=new MC,e.init(),e}return __extends(e,t),e.prototype.init=function(){this.skinName="RongLianUpLevelTipsEUI",this.addBg(),this.attrs.itemRenderer=ComAttrItem,this.attrs.dataProvider=this.attrData=new eui.ArrayCollection,this.groupMC1.addChild(this.mc2)},e.prototype.open=function(e,i,n,a){t.prototype.open.call(this),this.closeFun.func=n,this.closeFun.obj=a,this.bitLevel.text=""+i,this.attrData.source=this.getLevelAttrDatas(e,i),this.mc2.playFile(ResMgr.getEffName("hjbxbk"),1)},e.prototype.close=function(){t.prototype.close.call(this),this.closeFun.call()},e.prototype.getLevelAttrDatas=function(t,e){for(var i=[],n=Cfg.getConfig(LianjinConfig,t),a=Cfg.getConfig(LianjinConfig,e),o=n.addattr.length,s=0;o>s;s++){var r=n.addattr[s],u=a.addattr[s],h=new ComAttrData(r,u,n.level>=a.level);i.push(h)}return i},e}(BaseWin);__reflect(RongLianUpLevelTips.prototype,"RongLianUpLevelTips"),window.RongLianUpLevelTips=RongLianUpLevelTips;var RongLianData=function(){function t(){this.level=0,this.exp=0}return Object.defineProperty(t.prototype,"config",{get:function(){return null==this._config?this._config=Cfg.getConfig(LianjinConfig,this.level):this._config.level!=this.level&&(this._config=Cfg.getConfig(LianjinConfig,this.level)),this._config},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"power",{get:function(){return GFunc.getPower(this.config.addattr).toFixed()},enumerable:!0,configurable:!0}),t.prototype.isMax=function(){return this.level==Cfg.getMaxConfig(LianjinConfig).level},t.prototype.getLevelAttrDatas=function(){for(var t=[],e=Cfg.getConfig(LianjinConfig,this.level),i=Cfg.getConfig(LianjinConfig,this.isMax()?this.level:this.level+1),n=e.addattr.length,a=0;n>a;a++){var o=e.addattr[a],s=i.addattr[a],r=new ComAttrData(o,s,e.level>=i.level);t.push(r)}return t},t}();__reflect(RongLianData.prototype,"RongLianData");var RongLianRewearData=function(){function t(){this.itemRewear=[]}return t}();__reflect(RongLianRewearData.prototype,"RongLianRewearData");var GuildPracticeSkillConfig=function(){function t(){}return t}();__reflect(GuildPracticeSkillConfig.prototype,"GuildPracticeSkillConfig");var RuleIconMgr=function(t){function e(){var e=t.call(this)||this;return e.ruleIcons={},e.funAlls=[],e}return __extends(e,t),e.ins=function(){return t.getIns.call(this,e)},e.prototype.iniRule=function(){var t=LogicSys.ins().patchLevelChange,e=ActSys.ins(),i=e.patchActivityIsGetAwards,n=RechargeActSys.ins(),a=n.patchFirstRecharge,o=VipSys.ins(),s=PfActivitySys.ins(),r=FbSys.ins();this.addFunc(ActivityIconRule,[t]),this.addFunc(Activity12IconRule,[t]),this.addFunc(Activity21IconRule,[t]),this.addFunc(Activity24IconRule,[t]),this.addFunc(FuLiIconRule,[t,FuLiSys.ins().patchSigninInfo]),this.addFunc(ActKFLCIconRule,[i]),this.addFunc(ActCSKRule,[i]),this.addFunc(ActYYHLIconRule,[i]),this.addFunc(ActQMKHIconRule,[i]),this.addFunc(BBFLIconRule,[n.patchBBFLInfo,n.patchBBFLReward,n.patchBBFLBuy]),this.addFunc(FirstRechargeIconRule,[t,a]),this.addFunc(FirstRechargeTimerIconRule,[t,a]),this.addFunc(FirstRechargeEveryDayIconRule,[n.patchInitRechargeEveryday,n.patchUpdateRecharge,o.patchVipInit,t,i,a,o.patchSVipAwardstate]),this.addFunc(RechargeYiYuanIconRule,[n.patchYiYuanReceived,n.patchYiYuanData]),this.addFunc(LoginAwardIconRule,[e.patchLoginAwardData,t]),this.addFunc(KeFuRule,[s.patchKeFuStatus]),this.addFunc(FxylRule,[s.patchFxOpen,s.patchFxInfo]),this.addFunc(GzhlRule,[s.patchGuanZhuState,s.patchGuanZhuGift]),this.addFunc(SmrzRule,[s.patchRenZhengStatus,s.patchRenZhengRewardData]),this.addFunc(SmrzApiRule,[s.updateVerifyApi]),this.addFunc(QiYueRule,[TaskSys.ins().patchAgreementData,TaskSys.ins().patchAgreementUpdate]),this.addFunc(ZhuanZhiRule,[t]),this.addFunc(RedFortRule,[r.patchRedFortInfo]),this.addFunc(ActivityHefuIconRule,[t,i]),this.addFunc(ActivityJueZhanIconRule,[t,i]),this.addFunc(DailyWanFaRule,[TaskSys.ins().patchLiLianTaskUpdate,TaskSys.ins().patchLiLianReceiveTaskReward,TaskSys.ins().patchLiLianReceiveDailyReward]),this.addFunc(ZhaoCaiLongRule,[a,RechargePowerSys.ins().patchZhaoCaiLongDate,RechargePowerSys.ins().patchhaoCaiLongBuy]),this.addFunc(XunZhangRule,[a,RechargePowerSys.ins().patchXunZhangDate,RechargePowerSys.ins().patchXunZhangBuy]),this.addFunc(ShengbeiRule,[a,RechargePowerSys.ins().patchShengbeiState,RechargePowerSys.ins().patchhaoCaiLongBuy,RechargePowerSys.ins().patchXunZhangBuy,t]),this.addFunc(FuBenRule,[t]),this.addFunc(YkRule,[n.patchGetMonthDay]),this.addFunc(ZZTQRule,[n.patchZZTQ]),this.addFunc(YYMSRule,[n.patchYYMS]),this.addFunc(SVIPMSRule,[n.patchSVIPMS,a,o.patchSvipLvChange]),this.addFunc(XunBaoRule,[XunBaoSys.ins().patchAddItem,XunBaoSys.ins().patchDeleteItem,XunBaoSys.ins().patchXunBaoRemind,XunBaoSys.ins().patchXunBaoDuiHuan,XunBaoSys.ins().patchXunBaoChouJiang]),this.addFunc(ZeroBuyRule,[n.patchZeroBuyGetAward]),this.addFunc(YZZHRule,[n.patchYZZHData]),this.addFunc(ZhuzaiRule,[r.patchZhuZaiFubenData]),this.addFunc(YdssRule,[e.patchActivityPanel,e.doRewardResult]),this.addFunc(XJHBRule,[o.vipRedpacketInfoBack]),this.addFunc(CollectionRule,[WxYqhlSys.ins().patchCollectionReward]),this.addFunc(WxYqhlRule,[WxYqhlSys.ins().patchTaskInfo,WxYqhlSys.ins().patchTaskUp,WxYqhlSys.ins().patchTaskGroup]),this.addFunc(QmdbRule,[r.patchQmdbActState,r.patchQmdbInfo]),this.addFunc(HwbzRule,[DartSys.ins().patchInfo,DartSys.ins().patchRefreshCar,DartSys.ins().patchUpdateCar]),this.addFunc(GuildBattleRule,[GuildBattleSys.ins().patchTimeInfo,GuildBattleSys.ins().patchState]),this.addFunc(ShouquanRule,[s.patchuserInfoBtn]),this.addFunc(TaQingFirstRechargeRule,[i,e.patchMeiRi60]),this.addFunc(Activity23IconRule,[i,e.patchMeiRi60]),this.addFunc(ActHFSYRule,[i]),this.addFunc(Activity15IconRule,[i]),this.addFunc(GuZhanRule,[r.patchguZhanModeUpdate]),this.addLsn(RpSys.ins().patchRp,this.updateRedPoint),this.addLsn(JobSys.ins().patchSysOpen,this.showRule),this.addLsn(LogicSys.ins().patchAllSysInit,this.allSysInit),this.addLsn(LogicSys.ins().patchNewDayBegin,this.allSysInit),this.addLsn(r.patchGuaJiChallenge,this.updateAllRuleSys),this.addLsn(LogicSys.ins().patchEnterMap,this.updateAllRuleSys),this.addLsn(r.patchGuaJiHelp,this.updateAllRuleSys),LayerMgr.getStage().addEventListener(eui.UIEvent.RESIZE,this.onUpdateResize,this),Timer.ins()["do"](0,1e3,0,this.updateTimeBtn,this,TimerType.LAST);for(var u in this.ruleIcons){var h=this.ruleIcons[u];h&&h.update()}},e.prototype.addFunc=function(t,e){for(var i=0;i<e.length;i++){var n=e[i],a=n.bindFuncName;if(this.funAlls[a]){var o=this.funAlls[a];o.push(egret.getQualifiedClassName(t))}else this.funAlls[a]=[egret.getQualifiedClassName(t)],this.addLsn(n,this.updateFunAllRule)}},e.prototype.onUpdateResize=function(){for(var t in this.ruleIcons){var e=this.ruleIcons[t];e.updateMcPoint()}},e.prototype.updateFunAllRule=function(){var t=this.funAlls[arguments.callee.callFuncName];for(var e in this.ruleIcons){var i=this.ruleIcons[e];i&&t.indexOf(egret.getQualifiedClassName(i))>=0&&i.updateSys()}},e.prototype.updateAllRuleSys=function(){for(var t in this.ruleIcons){var e=this.ruleIcons[t];e&&e.updateSys()}},e.prototype.updateRedPoint=function(t){void 0===t&&(t=null);for(var e in this.ruleIcons){var i=this.ruleIcons[e];i&&i.updateRedPoint(t)}},e.prototype.updateMC=function(){for(var t in this.ruleIcons){var e=this.ruleIcons[t];e&&e.updateEff()}},e.prototype.allSysInit=function(){this.updateAllRuleSys(),this.updateRedPoint()},e.prototype.push=function(t){this.ruleIcons[t.tar.hashCode]=t},e.prototype.getRule=function(t){return this.ruleIcons[t.hashCode]},e.prototype.getRuleBySysid=function(t){for(var e in this.ruleIcons){var i=this.ruleIcons[e];if(i&&i.sysId==t)return i}return null},e.prototype.showRule=function(t){if(0!=t){var e=this.getRuleBySysid(t);e&&e.updateSys()}else this.updateAllRuleSys()},e.prototype.updateTimeBtn=function(){for(var t in this.ruleIcons){var e=this.ruleIcons[t];e&&e.updateTime()}this.updateTimerBtn()},e.prototype.updateTimerBtn=function(){var t,e=Number.MAX_VALUE;for(var i in this.ruleIcons){var n=this.ruleIcons[i],a=n.getOpenTick();e>a&&(e=a,t=n)}for(var i in this.ruleIcons)this.ruleIcons[i].setIsShow(this.ruleIcons[i]==t)},__decorate([callDelay(50)],e.prototype,"onUpdateResize",null),e}(BaseSys);__reflect(RuleIconMgr.prototype,"RuleIconMgr");var System;!function(t){t.ruleIconMgr=RuleIconMgr.ins.bind(RuleIconMgr)}(System||(System={})),window.RuleIconMgr=RuleIconMgr;var SettingSys=function(t){function e(){var e=t.call(this)||this;return e.addLsn(LogicSys.ins().patchActorInfo,e.initDef),e}return __extends(e,t),e.ins=function(){return t.getIns.call(this,e)},e.prototype.initDef=function(){return __awaiter(this,void 0,void 0,function(){var t,e;return __generator(this,function(i){return setLocationDef(4,"true"),setLocationDef("isShowOtherEff","false"),setLocationDef("isShowHit","true"),setLocationDef("isShowOtherWing","false",function(t){LogicSys.ins().updateIsShowWing()}),setLocationDef("sound","true",function(t){SoundUtil.enable="true"===t}),t=Cfg.getConfig(GlobalConfig),e=t.liuhaiPfids.indexOf(+urlParam.apptype)>=0,e||(e=t.liuhaiAppids.indexOf(+urlParam.appid)>=0),setLocationDef("setLiuhai",e+"",function(t){LayerMgr.setLiuhai()}),setLocationDef("isShowHundun","true",function(t){LogicSys.ins().updateIsShowHuDun()}),[2]})})},e}(BaseSys);__reflect(SettingSys.prototype,"SettingSys");var System;!function(t){t.settingSys=SettingSys.ins.bind(SettingSys)}(System||(System={})),window.SettingSys=SettingSys;var VirtualServer=function(t){function e(){var i=t.call(this)||this;return i.handleCounter=0,i.aliveTimes=[Number.MAX_VALUE,Number.MAX_VALUE,Number.MAX_VALUE],i.buffs=[],i.monsters=[],i.refreshState=e.REFRSH_MONSTER,i.isRefreshBoss=!1,i.prevIndex=[],i.monsterRsfCount=0,i}return __extends(e,t),e.ins=function(){return t.getIns.call(this,e)},e.prototype.getHandle=function(){return this.handleCounter>e.MAX_HANDLE&&(this.handleCounter=0),++this.handleCounter},e.prototype.sendUseSkill=function(t,e,i,n){var a=LogicSys.ins().getEntityByHandle(t),o=LogicSys.ins().getEntityByHandle(i);if(a&&o&&!o.isDead()){var s=(ObjPool.pop(SkillDamageData),n.skillConfig);if(s.targetType==TargetType.Enemy){var r=s.affectRange,u=[];if(0==r)s.calcType==CalcType.Enemy&&u.push(o);else{var h=LogicSys.ins().getAliveEnemysByAI(a.AI),l=h.indexOf(o);if(-1!=l&&(h=h.splice(l,1).concat(h)),s.wide)u=LogicSys.ins().getRectEnemenys(a,o,r,s.wide,h,s.affectCount);else if(s.angle)u=LogicSys.ins().getFanshapedEnemenys(a,o,r,s.angle,h,s.affectCount);else{var p=LogicSys.ins().getEntityByHandle(e);u=LogicSys.ins().getRangeEnemenys(a,p,r,h,s.affectCount)}}this.doSkill(a,o,u,n)}}},e.prototype.doSkill=function(t,e,i,n){for(var a=[],o=n.skillConfig,s=0;s<i.length;s++){var r=ObjPool.pop(Damage);this.calDamage(t,i[s],n,r),a[s]=r}var u=ObjPool.pop(SkillDamageData);this.writeSkillDamageData(t,e,o,a,u),SkillSys.ins().doSkillResultByData(u);for(var h=!1,s=0;s<i.length;s++){var l=i[s],r=a[s];if(l.setProp(AttrType.atHp,Math.max(l.getHP()+r.value,0)),h=t.isDead(),r.fs&&t.setProp(AttrType.atHp,Math.max(t.getHP()+r.fs,0)),t.isDead()&&!h&&this.doEntityDie(t,l,0),l.isDead())this.doEntityDie(l,t,o.id);else if(l instanceof EntityMonster&&!l.isDead()&&r.damageType!=DamageTypes.MISS&&r.damageType!=DamageTypes.FS&&o.repelDistance){var p=DirUtil.get8Dir(l,t),c=DirUtil.getGridByDir(p,o.repelDistance/MapBase.CELL_SIZE,l),d=100;MapContainer.ins().checkWalkableByPixel(c.x,c.y)&&LogicSys.ins().atkedTarget(l.handle,c.x,c.y,d,t.handle)}ObjPool.push(r)}},e.prototype.doEntityDie=function(t,e,i){t instanceof EntityMonster?(LogicSys.ins().doCreatDropItem1(t.x,t.y,t.getDropItems()),0==LogicSys.ins().getEntityAliveCountByName(egret.getQualifiedClassName(EntityMonster))&&this.creatMonster()):t.masterHandle==Actor.ins().handle&&(this.aliveTimes[t.index]=Timer.ins().getTimer()+3),LogicSys.ins().patchEntityDie(t,e,i)},e.prototype.calDamage=function(t,e,i,n){var a=t.getAttributes(),o=e.getAttributes(),s=0,r=!1,u=0,h=this.getValue(o,AttrType.atDef),l=DamageTypes.HIT,p=!1,c=!1,d=!1,g=!1,f=!1,y=!1;if(a[AttrType.atWSYJ]&&(p=MathUtil.randomInteger(1,1e4)<=a[AttrType.atWSYJ],p&&(h=0,r=!0)),!p){var m=MathUtil.randomInteger(1,1e4),C=this.getValue(a,AttrType.atAtkSuc),v=this.getValue(o,AttrType.atDefSuc),S=Math.max(C-v+9500,2500);r=S>m}if(r=!0){if(c=this.getValue(a,AttrType.atHXYJ)>=MathUtil.randomInteger(1,1e4))u=this.getValue(a,AttrType.atAtkMax);else{var b=this.getValue(a,AttrType.atAtkMin),I=this.getValue(a,AttrType.atAtkMax);u=MathUtil.randomInteger(b,I)}var _=0,w=0;s=u>2*h?u-h:.6*u-.2*h,s=(s*_+w+this.getValue(a,AttrType.atAtkExtra)-this.getValue(o,AttrType.atReduceAtk))*(1+(this.getValue(a,AttrType.atDamagePer)-this.getValue(o,AttrType.atReductionPer))/1e4),d=this.getValue(a,AttrType.atZYYJ)>=MathUtil.randomInteger(1,1e4),d&&(s*=1.2),g=this.getValue(a,AttrType.atSSYJ)>=MathUtil.randomInteger(1,1e4),f=this.getValue(a,AttrType.atTSYJ)>=MathUtil.randomInteger(1,1e4),y=this.getValue(a,AttrType.atZMYJ)>=MathUtil.randomInteger(1,1e4),g?s*=3:f?s*=2.5:y&&(s*=2);var D=this.getValue(o,AttrType.atReflex),T=s*D/1e4;p?l=DamageTypes.WSYJ:y?l=DamageTypes.ZMYJ:d?l=DamageTypes.ZYYJ:c&&(l=DamageTypes.HXYJ),n.value=-Math.max(s>>0,1),D>0?n.fs=-Math.max(Math.floor(T),1):n.fs=0}else l=DamageTypes.MISS;return n.damageType=l,n.senderHandle=t.handle,n.targetHandle=e.handle,n.skillId=i.skillConfig.id,n.selfAtk=u,n},e.prototype.getValue=function(t,e){return t[e]?t[e]:0},e.prototype.writeSkillDamageData=function(t,e,i,n,a){a.senderHandle=t.handle,a.targetHandle=e.handle,a.skillId=i.id,a.isMyDamage=t.masterHandle==Actor.ins().handle;for(var o=0,s=n;o<s.length;o++){var r=s[o],u=ObjPool.pop(SkillDamageRange);u.handle=r.targetHandle,u.damageType=r.damageType,u.senderType=t.isBianShenStatus()?1:0,u.value=r.value,u.senderPos.x=t.x,u.senderPos.y=t.y;var h=LogicSys.ins().getEntityByHandle(r.targetHandle);if(u.targetPos.x=h.x,u.targetPos.y=h.y,a.skillDamageRanges.push(u),r.fs){var l=ObjPool.pop(SkillDamageRange);l.handle=r.senderHandle,l.damageType=DamageTypes.FS,l.value=r.fs,l.senderPos.x=h.x,l.senderPos.y=h.y,l.targetPos.x=t.x,l.targetPos.y=t.y,a.skillDamageRanges.push(l)}}},e.prototype.restart=function(){this.stop(),this.isRefreshBoss?(this.setRefreshState(e.REFRSH_BOSS),this.isRefreshBoss=!1):this.startCheckAlive(),this.startRefreshMonster(),this.startBuff()},e.prototype.stop=function(){Timer.ins().remove(this.creatMonster,this),Timer.ins().remove(this.checkRoleAlive,this),Timer.ins().remove(this.checkBuff,this),this.monsters.length=0,this.setRefreshState(e.REFRSH_MONSTER),this.clearBuff()},e.prototype.setRefreshState=function(t){this.refreshState!=t&&(this.refreshState=t,this.refreshState==e.REFRSH_BOSS?this.addLsn(LogicSys.ins().patchEntityDie,this.onEntityDie):this.removeLsn(LogicSys.ins().patchEntityDie,this.onEntityDie))},e.prototype.setIsrefreshBoss=function(t){this.isRefreshBoss=t},e.prototype.onEntityDie=function(t){t instanceof EntityRole?LogicSys.ins().centerEntity.isDead()&&(LogicSys.ins().removeEntityByHandle(this.boss.handle),this.boss.hasRefresh=!1,this.restart()):t.entityType==EntityType.MONSTER_CLIENT&&this.boss&&t.handle==this.boss.handle&&(this.restart(),this.boss=null)},e.prototype.startCheckAlive=function(){for(var t=0;t<this.aliveTimes.length;t++)this.aliveTimes[t]=Number.MAX_VALUE;Timer.ins()["do"](5e3,5e3,0,this.checkRoleAlive,this)},e.prototype.checkRoleAlive=function(){},e.prototype.startBuff=function(){},e.prototype.clearBuff=function(){this.buffs.length=0,Timer.ins().remove(this.checkBuff,this)},e.prototype.checkBuff=function(){},e.prototype.startRefreshMonster=function(){var t=FbSys.ins().refreshConfig;Timer.ins()["do"](0,1e3*t.refreshTime,0,this.creatMonster,this)},e.prototype.creatMonster=function(t){if(void 0===t&&(t=0),this.refreshState==e.REFRSH_MONSTER){var i=egret.getQualifiedClassName(EntityMonster),n=LogicSys.ins().getEntityAliveCountByName(i),a=(FbSys.ins().fbId,FbSys.ins().refreshConfig),o=a.minCount,s=a.maxCount;this.hasInsertMonster()&&(o+=5,s+=5);var r=t||s-n;if(r=r>7?7:r,o>=n){var u=this.spliceMonsterData(r);this.refreshMonsters(u)}this.monsters.length<=10&&FbSys.ins().sendCreatMonsters()}else if(this.refreshState==e.REFRSH_BOSS&&this.boss&&!this.boss.hasRefresh){for(var h=LogicSys.ins().getEntityList(),l=!1,p=0,c=h;p<c.length;p++){var d=c[p];if(d instanceof EntityMonster&&!d.isDead()){l=!0;break}}l||(this.refreshMonsters([this.boss]),this.boss.hasRefresh=!0)}},e.prototype.refreshMonsters=function(t){if(this.monsterRsfCount+=t.length,this.monsterRsfCount>20&&(this.monsterRsfCount=0,t.length>0)){var e=Cfg.getMonstersConfigNew(t[0].id),i=Cfg.getConfig(MonsterModelConfig,e.avatar[0]);SoundUtil.play(i.atkedSound)}for(var n=FbSys.ins().fbId,a=Cfg.getConfig(FubenConfig,n),o=FbSys.ins().refreshConfig,s=MapBase.CELL_SIZE,r=[];r.length<1;){var u=MathUtil.randomInteger(0,o.position.length-1);-1==r.indexOf(u)&&-1==this.prevIndex.indexOf(u)&&r.push(u)}this.prevIndex=r;for(var h=[],l=0;l<r.length;l++)h[l]=o.position[r[l]];for(var l=0;l<t.length;l++){var p=Math.floor(l/(t.length/h.length)),c=t[l],d=LogicSys.ins().createEntityByType(EntityType.MONSTER_CLIENT);d.handle=c.handle;var g=new EntityGatherMonsterData;g.configID=c.id,d.setData(g);for(var f=new XY(1e6,1e6),y=0;!MapContainer.ins().checkWalkableByPixel(f.x,f.y);)if(f.x=h[p].x*s+MathUtil.randomInteger(2.5*-s,2.5*s),f.y=h[p].y*s+MathUtil.randomInteger(2.5*-s,2.5*s),y++,y>100){console.log("副本id:"+a.fbid+"配置的刷怪点有误:("+h[p].x/MapBase.CELL_SIZE+","+h[p].y/MapBase.CELL_SIZE+")");break}d.x=f.x,d.y=f.y,d.setDropItem(c.dropItem),d.setAI(new AIMonsterClient),d.AI.start(),d.AI.startPatrol(d.x,d.y);for(var m=Cfg.getAiConfigByMonsterId(d.getCfgId()),C=m.skills,v=[],S=0;S<C.length;S++){var b=new SkillData;b.skillId=C[S].id,b.level=1,v[S]=b}d.AI.setSkillData(v),LogicSys.ins().addEntity(d);var I=egret.Tween.get(d);d.alpha=.1,I.to({alpha:1},800)}},e.prototype.spliceMonsterData=function(t){return void 0===t&&(t=0),this.monsters.length?this.monsters.splice(0,t):[]},e.prototype.addBoss=function(t){this.boss=t},e.prototype.delBoss=function(){this.boss=null},e.prototype.hasBoss=function(){return null!=this.boss},e.prototype.addMonsters=function(t){this.monsters=this.monsters.concat(t)},e.prototype.insertMonsters=function(t){this.monsters=t.concat(this.monsters),this.creatMonster(5)},e.prototype.hasInsertMonster=function(){return this.monsters.length>0?this.monsters[0].isInsert:!1},e.MAX_HANDLE=1e5,e.REFRSH_MONSTER=0,e.REFRSH_BOSS=1,e}(BaseSys);__reflect(VirtualServer.prototype,"VirtualServer");var CalcType;!function(t){t[t.NoDamage=1]="NoDamage",t[t.Enemy=2]="Enemy",t[t.Self=3]="Self"}(CalcType||(CalcType={}));var Damage=function(){function t(){this.damageType=0,this.value=0,this.fs=0,this.senderHandle=0,this.targetHandle=0,this.skillId=0,this.selfAtk=0}return t.prototype.reset=function(){this.damageType=0,this.value=0,this.fs=0,this.senderHandle=0,this.targetHandle=0,this.skillId=0,this.selfAtk=0},t}();__reflect(Damage.prototype,"Damage",["IObjectPool"]),window.VirtualServer=VirtualServer,window.Damage=Damage;var GuildSiegeCommonConfig=function(){function t(){}return t}();__reflect(GuildSiegeCommonConfig.prototype,"GuildSiegeCommonConfig");var GuildStoreConfig=function(){function t(){}return t}();__reflect(GuildStoreConfig.prototype,"GuildStoreConfig");var AIBossHome=function(t){function e(){return t.call(this)||this}return __extends(e,t),e.prototype.getNewTarget=function(){var t=this.getFirstAtkMasterTarget()||this.getFirstAtkTarget()||this.getMonsterIdTarget()||this.getCurTarget()||this.getNearestTarget();return t},e}(AIRole);__reflect(AIBossHome.prototype,"AIBossHome");var GuildTaskConfig=function(){function t(){}return t}();__reflect(GuildTaskConfig.prototype,"GuildTaskConfig");var AIGuildBattleRole=function(t){function e(){var e=t.call(this)||this;return e.defaultEnemyType=[EntityType.MONSTER_SERVER,EntityType.ROLE,EntityType.BIANSHEN],e.enemyType=e.defaultEnemyType,e}return __extends(e,t),e.prototype.isEnemy=function(e){var i=t.prototype.isEnemy.call(this,e);return i&&(i=this.entity.teamId!=e.teamId),i},e}(AIRedFort);__reflect(AIGuildBattleRole.prototype,"AIGuildBattleRole");var AIGuildBattleYongbing=function(t){function e(){var e=t.call(this)||this;return e.defaultEnemyType=[EntityType.MONSTER_SERVER,EntityType.ROLE,EntityType.BIANSHEN],e.enemyType=e.defaultEnemyType,e}return __extends(e,t),e}(AIYongbing);__reflect(AIGuildBattleYongbing.prototype,"AIGuildBattleYongbing");var AIGuildWarPVE=function(t){function e(){var e=t.call(this)||this;return e.enemyType=[EntityType.MONSTER_SERVER],e}return __extends(e,t),e}(AIRole);__reflect(AIGuildWarPVE.prototype,"AIGuildWarPVE");var AIGuildWarPVP=function(t){function e(){return t.call(this)||this}return __extends(e,t),e.prototype.startCaiJi=function(e){return t.prototype.startCaiJi.call(this,e),0==e?void(LogicSys.ins().centerEntity==this.entity&&LogicSys.ins().sendCollectionEntity(0)):void 0},e.prototype.CaiJi=function(){},e.prototype.startAttack=function(e){return void 0===e&&(e=null),this.params.caiJihandle?void(LogicSys.ins().centerEntity==this.entity&&openWin(WarnWin,Lang.scene_str1.replace("$str$",""+StrUtil.addColor(Lang.scene_str2,16758826)),function(){LogicSys.ins().sendCollectionEntity(0),LogicSys.ins().centerEntity.AI.startCaiJi(0),LogicSys.ins().centerEntity.AI.startAttack()},this)):void t.prototype.startAttack.call(this,e)},e.prototype.startAtked=function(e){GuildWarSys.ins().getModel().checkinAppoint(1)||this.params.caiJihandle>0||t.prototype.startAtked.call(this,e)},e.prototype.checkBianshen=function(){return GuildWarSys.ins().getModel().getIsBaJian()?(showTipsWarn(Lang.scene_str20),!1):t.prototype.checkBianshen.call(this)},e.prototype.canBianshen=function(){return!GuildWarSys.ins().getModel().getIsBaJian()&&t.prototype.canBianshen.call(this)},e}(AIRedFort);__reflect(AIGuildWarPVP.prototype,"AIGuildWarPVP");var AIMainRole=function(t){function e(){return t.call(this)||this}return __extends(e,t),e.prototype.None=function(){this.params.fbId==FbSys.ins().fbId&&this.MoveToXY()},e.prototype.stop=function(){this.nextActionTick=0},e.prototype.startfindNpc=function(t,e){if(t){var i=Cfg.getConfig(NPCConfig,t),n=new XY((i.pos.mapX+.5)*MapBase.CELL_SIZE,(i.pos.mapY+.5)*MapBase.CELL_SIZE),a=void 0;a=i.sceneId==FbSys.ins().mapId?MapContainer.ins().getNearestAroundXY(n,this.entity):n,e?this.startMoveToXY(a,i.fbId,e):this.startMoveToXY(a,i.fbId,function(){var t=Cfg.getWinClassById(i.npcEvent.winId);openWin(t,i.npcEvent.winTab,i.npcEvent.winTab1)})}},e.prototype.update=function(){return null==this.entity?!1:t.prototype.update.call(this)},e.prototype.destruct=function(){t.prototype.destruct.call(this),this.state=AIState.Stand},e}(AIRole);__reflect(AIMainRole.prototype,"AIMainRole");var AIMeilin=function(t){function e(){return t.call(this)||this}return __extends(e,t),e.prototype.getFollowXY=function(t){var e=DirUtil.get8Dir(this.entity,t),i=DirUtil.getGridByDir((e+8-1)%8,this.params.followDis/MapBase.CELL_SIZE,t);return i},e}(AIDamon);__reflect(AIMeilin.prototype,"AIMeilin");var AIMine=function(t){function e(){return t.call(this)||this}return __extends(e,t),e}(AIRole);__reflect(AIMine.prototype,"AIMine");var GuzhanchangConfig=function(){function t(){}return t}();__reflect(GuzhanchangConfig.prototype,"GuzhanchangConfig");var AIMonsterClient=function(t){function e(){var e=t.call(this)||this;return e.nextPatrolTick=0,e.dialogue=[],e.bubbleTimer=0,e.indexs=[],e.aiTime=MathUtil.radom(400,600),e.enemyType=[EntityType.ROLE],e}return __extends(e,t),e.prototype.setBubble=function(t,e){void 0===e&&(e=10),"string"==typeof t?(this.dialogue=[t],this.indexs.length=0,this.entity.setBubble(t[0],e)):t instanceof Array&&(this.dialogue=t,this.indexs=GFunc.randomArr(t.length))},e.prototype.updateBubble=function(){this.dialogue.length>1&&(0==this.indexs.length&&(this.indexs=GFunc.randomArr(this.dialogue.length)),this.bubbleTimer<Timer.ins().getTimer()&&(this.bubbleTimer=Timer.ins().getTimer()+3e3,this.entity.setBubble(this.dialogue[this.indexs.pop()],0)))},e.prototype.update=function(){return this.updateBubble(),t.prototype.update.call(this)},e.prototype.Atk=function(){var t;if(this.params.targetHandle&&(t=LogicSys.ins().getEntityByHandle(this.params.targetHandle)),!t||t.isDead())return void this.Patrol();this.isOutOfRange()&&this.startReturnPatrol(),this.resetTargetHandle(t.handle),this.params.x=t.x,this.params.y=t.y;var e=this.getNextSkill();if(e)if(e&&GFunc.checkSkillDis(this.entity,new XY(this.params.x,this.params.y),e.skillConfig.castRange)){if(Timer.ins().getTimer()>e.skillCDTick){var i=e.skillConfig,n=this.getCastTargetHandle(i),a=Timer.ins().getTimer();this.playMyEntityAction(i,t,e.actionIndex),this.entity.entityType==EntityType.BIANSHEN&&e.skillId<500&&console.log("仙灵实体与仙术不匹配,仙术id:"+e.skillId),this.entity.entityType==EntityType.ROLE&&e.skillId>500&&console.log("角色实体与仙术不匹配,仙术id:"+e.skillId),i.actionParam?this.playActionMovie(i,e.actionIndex,t,this.useSkillComplete.bind(this,this.entity.handle,n,this.params.targetHandle,e,a),null,MapContainer.ins().isShow()):this.useSkillComplete(this.entity.handle,n,this.params.targetHandle,e,a)}}else this.isMoveing()||this.startMove(t)},e.prototype.getSkillCanUse=function(){for(var t=0;t<this.skillDatas.length;t++){var e=this.skillDatas[t];if(Timer.ins().getTimer()>e.skillCDTick)return e}return null},e.prototype.Patrol=function(){this.resetTargetHandle();var t=LogicSys.ins().getNearestEnemyByAI(this);if(t){var e=MathUtil.getDistanceX2ByObject(this.entity,t),i=Cfg.getAiConfigByMonsterId(this.entity.getCfgId());Math.pow(i.vision,2)>e?this.startAttack(t):this.radomMove()}else this.radomMove()},e.prototype.ReturnPatrol=function(){this.isMoveing()||this.startPatrol(this.params.homeX,this.params.homeY)},e.prototype.startReturnPatrol=function(){this.setAIState(AIState.ReturnPatrol),this.startMove(new XY(this.params.homeX,this.params.homeY))},e.prototype.radomMove=function(){if(Timer.ins().getTimer()>this.nextPatrolTick&&!this.isMoveing()){var t=this.getPointCanMove();t?(this.startMove(t),this.nextPatrolTick+=MathUtil.radom(5e3,1e4)):console.log("怪物刷新在错误的区域,请策划查询配置,副本id:"+FbSys.ins().fbId+"--刷怪坐标:"+(this.params.homeX/MapBase.CELL_SIZE).toFixed(1)+","+(this.params.homeY/MapBase.CELL_SIZE).toFixed(1))}},e.prototype.getPointCanMove=function(){for(var t,e=0,i=Cfg.getAiConfigByMonsterId(this.entity.getCfgId()),n=i.patrolRadius;100>e;){var a=MathUtil.radom(this.params.homeX-n>>0,this.params.homeX+n>>0),o=MathUtil.radom(this.params.homeY-n>>0,this.params.homeY+n>>0);if(MapContainer.ins().checkWalkableByPixel(a,o)){t=new XY,t.x=a,t.y=o;break}e++}return t},e.prototype.isOutOfRange=function(){var t=Cfg.getAiConfigByMonsterId(this.entity.getCfgId()),e=t.home_range,i=MathUtil.getDistanceX2ByObject(this.entity,new XY(this.params.homeX,this.params.homeY));return i>e*e},e.prototype.startPatrol=function(e,i){t.prototype.startPatrol.call(this,e,i),this.nextPatrolTick=Timer.ins().getTimer()+MathUtil.randomInteger(0,5e3)},e.prototype.startAtked=function(e){t.prototype.startAtked.call(this,e),this.setAIState(AIState.Atk)},e}(AIMonster);__reflect(AIMonsterClient.prototype,"AIMonsterClient");var AIMonsterServer=function(t){function e(){return t.call(this)||this}return __extends(e,t),e.prototype.getPath=function(t){return MapContainer.ins().getPath(t,this.entity,function(t,e){return!0})},e}(AIMonster);__reflect(AIMonsterServer.prototype,"AIMonsterServer");var AINpc=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return __extends(e,t),e}(AIBase);__reflect(AINpc.prototype,"AINpc");var AIPoltRobot=function(t){function e(){var e=t.call(this)||this;return e.enemyType=[EntityType.MONSTER_SERVER],e}return __extends(e,t),e.prototype.startTask=function(e,i,n,a){t.prototype.startTask.call(this,e,i,n,a)},e.prototype.startfindNpc=function(t,e){if(t){var i=Cfg.getConfig(NPCConfig,t),n=new XY((i.pos.mapX+.5)*MapBase.CELL_SIZE,(i.pos.mapY+.5)*MapBase.CELL_SIZE),a=MapContainer.ins().getNearestRandomXY(n);this.startMoveToXY(a,i.fbId,e)}},e.prototype.updateTaskValue=function(t){t==this.params.taskTager&&(this.params.taskValue+=1)},e.prototype.getNewTarget=function(){var t=this.getMonsterIdTarget();return t},e.prototype.updateSkillCd=function(t){},e.prototype.sendMoveEntity=function(t){},e}(AIRole);__reflect(AIPoltRobot.prototype,"AIPoltRobot");var HeChengConfig=function(){function t(){}return t.viewType2="viewType2",t}();__reflect(HeChengConfig.prototype,"HeChengConfig");var HeChengViewConfig=function(){function t(){}return t}();__reflect(HeChengViewConfig.prototype,"HeChengViewConfig");var AIRoleJJC=function(t){function e(){var e=t.call(this)||this;return e.moveCd=0,e.enemyType=[EntityType.ROLE_CLONE,EntityType.CLONEBIANSHEN],e.aiTime=100,e}return __extends(e,t),e.prototype.setEntity=function(e){t.prototype.setEntity.call(this,e),this.entity.setDir(3)},e.prototype.getNewTarget=function(){var e;if(this.params.targetHandle){var i=LogicSys.ins().getEntityByHandle(this.params.targetHandle);i&&!i.isDead()&&(e=i)}if(!e)for(var n=LogicSys.ins().getEntityList(),a=JobConst.JobCount,o=0,s=n;o<s.length;o++){var r=s[o];if(this.isEnemy(r)&&r.canBeAtk()){var u=r.getJob();a>u&&(a=u,e=r)}}return e||(e=t.prototype.getNewTarget.call(this)),e},e.prototype.updateTick=function(e){t.prototype.updateTick.call(this,e),this.isMoveing()&&this.isAIState(AIState.Atk)&&this.moveCd<Timer.ins().getEgretTimer()&&(this.moveCd=1e3+Timer.ins().getEgretTimer(),LogicSys.ins().getEntityByHandle(this.params.targetHandle)||this.stopMove())},e}(AIRole);__reflect(AIRoleJJC.prototype,"AIRoleJJC");var AIRoleJueWang=function(t){function e(){var e=t.call(this)||this;return e.enemyType=[EntityType.MONSTER_SERVER],e}return __extends(e,t),e}(AIRole);__reflect(AIRoleJueWang.prototype,"AIRoleJueWang");var AIRoleKfBossSd=function(t){function e(){return t.call(this)||this}return __extends(e,t),e.prototype.getNewTarget=function(){return this.getFirstAtkMasterTarget()||this.getMonsterIdTarget()},e.prototype.canBianshen=function(){return this.getNewTarget()?t.prototype.canBianshen.call(this):!1},e}(AIRole);__reflect(AIRoleKfBossSd.prototype,"AIRoleKfBossSd");var AIRoleUI=function(t){function e(){return t.call(this)||this}return __extends(e,t),e.prototype.setDir=function(t){t!=this.entity&&this.entity.setDir(DirUtil.get8Dir(this.entity,t))},e}(AIBase);__reflect(AIRoleUI.prototype,"AIRoleUI");var AIXuese=function(t){function e(){return t.call(this)||this}return __extends(e,t),e.prototype.startfindNpc=function(t){var e=this;
if(t){var i=Cfg.getConfig(NPCConfig,t),n=new XY((i.pos.mapX+.5)*MapBase.CELL_SIZE,(i.pos.mapY+.5)*MapBase.CELL_SIZE),a=MapContainer.ins().getNearestAroundXY(n,this.entity);this.startMoveToXY(a,FbSys.ins().fbId,function(){e.entity==LogicSys.ins().centerEntity&&FbSys.ins().sendXueSeTaskCommit()})}},e.prototype.startPickItem=function(e){if(void 0===e&&(e=null),e){var i=LogicSys.ins().getItemByHandle(e.handle);i.item.id!=Cfg.getConfig(EnumConfig).XUESE_DATIANSHI?t.prototype.startPickItem.call(this,e):this.itemXese=e}else t.prototype.startPickItem.call(this,e)},e.prototype.PickItem=function(){if(this.itemXese&&1==LogicSys.ins().getItemList().length&&(this.params.pickItems.push(this.itemXese),this.itemXese=null),this.params.pickItems.length)return t.prototype.PickItem.call(this);var e=LogicSys.ins().getMyYongbing();if(e){var i=e.AI,n=i.getPickItem();if(n)return this.params.pickItems.push(n),void this.update()}LogicSys.ins().getAliveEnemysByAI(this).length?this.startAttack():this.entity!=LogicSys.ins().centerEntity&&this.startFollow(LogicSys.ins().centerEntity.handle,this.params.followMasterHandle)},e.prototype.Atk=function(){return LogicSys.ins().getAliveEnemysByAI(this).length?t.prototype.Atk.call(this):void this.startPickItem()},e}(AIRole);__reflect(AIXuese.prototype,"AIXuese");var HeianfbBaseConfig=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return __extends(e,t),e}(ChallengefbBaseConfig);__reflect(HeianfbBaseConfig.prototype,"HeianfbBaseConfig");var AIYongbingJJC=function(t){function e(){return t.call(this)||this}return __extends(e,t),e.prototype.setEntity=function(e){t.prototype.setEntity.call(this,e),this.entity.setDir(3)},e}(AIYongbing);__reflect(AIYongbingJJC.prototype,"AIYongbingJJC");var AIYongbingKfBossSd=function(t){function e(){return t.call(this)||this}return __extends(e,t),e.prototype.Follow=function(){if(this.isMoveing())return!0;if(this.isFaraway())return this.startFollow(this.params.followHandle,this.params.followMasterHandle),!0;var t=this.getFollowTarget();if(t&&!t.isDead()){var e=t.AI.getCurTarget();return e&&this.hasSkill()?(this.startAttack(e),!0):!1}return!1},e.prototype.getNextTarget=function(){var t,e=this.getFollowTarget();if(e&&!e.isDead()){var i=LogicSys.ins().getNearestEnemyByAI(e.AI);i&&i.isAlive()&&this.hasSkill()&&(t=e.AI.getCurTarget())}return t},e}(AIYongbing);__reflect(AIYongbingKfBossSd.prototype,"AIYongbingKfBossSd");var AIYongbingMoLong=function(t){function e(){var e=t.call(this)||this;return e.enemyType=[EntityType.MONSTER_SERVER],e}return __extends(e,t),e}(AIYongbing);__reflect(AIYongbingMoLong.prototype,"AIYongbingMoLong");var AICurTargetHandle=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return __extends(e,t),e}(AITargetHandle);__reflect(AICurTargetHandle.prototype,"AICurTargetHandle");var HeianfbConfig=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return __extends(e,t),e}(ChallengefbConfig);__reflect(HeianfbConfig.prototype,"HeianfbConfig");var AITargetChouhen=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.chouhenList=[],e}return __extends(e,t),e.prototype.getTarget=function(t){for(var e,i=0,n=this.chouhenList;i<n.length;i++){var a=n[i],o=a.masterHandle,s=LogicSys.ins().getMainRoleByMasterHandle(o);s&&!s.isDead()&&(e=s)}return e},e.prototype.setParam=function(t){this.chouhenList=t.concat()},e.prototype.addParam=function(t){},e.prototype.delParam=function(t){},e.prototype.reset=function(){this.chouhenList.length=0},e}(AITargetBase);__reflect(AITargetChouhen.prototype,"AITargetChouhen");var HelpInfoConfig=function(){function t(){}return t}();__reflect(HelpInfoConfig.prototype,"HelpInfoConfig");var AITargetJob=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return __extends(e,t),e.prototype.getTarget=function(t){var e;return e},e}(AITargetBase);__reflect(AITargetJob.prototype,"AITargetJob");var AITargetMasterHandle=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.masterHandle=0,e}return __extends(e,t),e.prototype.getTarget=function(t){var e;if(this.masterHandle){var i=LogicSys.ins().getMainRoleByMasterHandle(this.masterHandle);i&&!i.isDead()&&(e=i),e||this.reset()}return e},e.prototype.setParam=function(t){this.masterHandle=t},e.prototype.reset=function(){this.masterHandle=0},e}(AITargetBase);__reflect(AITargetMasterHandle.prototype,"AITargetMasterHandle");var AITargetMonsterId=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.monsterId=0,e}return __extends(e,t),e.prototype.getTarget=function(t){var e;return!e&&this.monsterId&&(e=LogicSys.ins().getNearestMonsterById(t,this.monsterId)),e},e.prototype.setParam=function(t){this.monsterId=t},e.prototype.reset=function(){this.monsterId=0},e}(AITargetBase);__reflect(AITargetMonsterId.prototype,"AITargetMonsterId");var AITargetNearest=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return __extends(e,t),e.prototype.getTarget=function(t){var e=LogicSys.ins().getNearestEnemyByAI(t);return e},e.prototype.setParam=function(t){},e}(AITargetBase);__reflect(AITargetNearest.prototype,"AITargetNearest");var HongbaoConfig=function(){function t(){}return t}();__reflect(HongbaoConfig.prototype,"HongbaoConfig");var EntityDamon=function(t){function e(){var e=t.call(this)||this;return e.damonId=0,e._hpBar.visible=!1,e}return __extends(e,t),e.prototype.setConfig=function(t){},e.prototype.getCfgId=function(){return this.damonId},e}(Entity);__reflect(EntityDamon.prototype,"EntityDamon"),window.EntityDamon=EntityDamon;var EntityDropItem=function(t){function e(){var e=t.call(this)||this;return e.pickerHandle=0,e.hasPicked=!1,e.touchEnabled=!1,e.touchChildren=!1,e.movieContainer=new egret.DisplayObjectContainer,e.addChild(e.movieContainer),e.labelName=new eui.Label,e.labelName.fontFamily="黑体",e.labelName.stroke=1,e.labelName.strokeColor=0,e.labelName.size=16,e.labelName.y=16,e.imgItem=new eui.Image,e.imgItem.x=-32,e.imgItem.y=-32,e.mc=new MC,e.imgItem.scaleX=e.imgItem.scaleY=.6,e.movieContainer.addChild(e.mc),e.movieContainer.addChild(e.imgItem),e.movieContainer.addChild(e.labelName),e}return __extends(e,t),e.prototype.setData=function(t){this.item=t;var e=Cfg.getItemCfg(t.id),i=""!=t.roleName?"("+t.roleName+")":"";GFunc.isCur(e.id)?this.labelName.textFlow=addColorTF(StrUtil.addColor(e.getName(),GConst.PZColor[e.quality])+"x"+t.count+i):this.labelName.text=e.getName()+i,this.imgItem.source=ResMgr.getItemIcon(e.getIcon()),this.labelName.textColor=GConst.PZColor[e.quality],this.labelName.x=-this.labelName.textWidth>>1,e.quality>=QualityType.Green&&this.mc.playFile(getEffName(ResMgr.dropmc[e.quality]),-1)},e.prototype.playDropMovie=function(){var t=64,e=this.movieContainer.y-t/2,i=this.movieContainer.y-t,n=this.movieContainer.y,a=egret.Tween.get(this.movieContainer);a.to({y:e},120).to({y:i},120).to({y:n},200)},e.prototype.reset=function(){this.item=null,this.hasPicked=!1,this.labelName.text="",this.imgItem.source=null,this.imgItem.x=-32,this.imgItem.y=-32,this.pickerHandle=0,egret.Tween.removeTweens(this.movieContainer),this.movieContainer.x=this.movieContainer.y=0,this.mc.visible=!1,this.mc.stop()},e}(egret.DisplayObjectContainer);__reflect(EntityDropItem.prototype,"EntityDropItem",["IObjectPool"]),window.EntityDropItem=EntityDropItem;var EntityEff=function(t){function e(){var e=t.call(this)||this;return e.setHpAndNameVisible(!1),e._shadow.visible=!1,e}return __extends(e,t),e.prototype.canBeAtk=function(){return!1},e.prototype.updateMC=function(){this._body.playFile(this.data.bodyFileName,-1,null,!1)},e}(Entity);__reflect(EntityEff.prototype,"EntityEff"),window.EntityEff=EntityEff;var EntityEff1=function(t){function e(){var e=t.call(this)||this;return e.rate=1,e.dir=4,e}return __extends(e,t),e.prototype.copy=function(t){},e}(egret.DisplayObjectContainer);__reflect(EntityEff1.prototype,"EntityEff1",["IEntity","IXYDir","IXY"]),window.EntityEff1=EntityEff1;var EntityFriendMonster=function(t){function e(){return t.call(this)||this}return __extends(e,t),e.prototype.setData=function(e){t.prototype.setData.call(this,e);var i=Cfg.getMonstersConfigNew(e.configID);this.setHpAndNameVisible(!0),this.setName(i.name,16769375)},e.prototype.iniHpBar=function(){this._hpBar=new eui.ProgressBar,this._hpBar.touchEnabled=!1,this._hpBar.touchChildren=!1,this._hpBar.skinName="bloodBarSkin2",this._hpBar.anchorOffsetX=this._hpBar.width>>1,this._hpBar.direction=eui.Direction.LTR,this._hpBar.slideDuration=1200,this.addChild(this._hpBar)},e.prototype.setHp=function(t,e){e&&(this._hpBar.maximum=Math.floor(e)),0>t&&(t=0),t>e&&(t=e),this._hpBar.value=Math.floor(t),this._hpBar.labelFunction=function(t,e){return Math.floor(100*t/e)+"%"}},e}(EntityMonster);__reflect(EntityFriendMonster.prototype,"EntityFriendMonster"),window.EntityFriendMonster=EntityFriendMonster;var EntityMeilin=function(t){function e(){var e=t.call(this)||this;return e._hpBar.visible=!1,e}return __extends(e,t),e.prototype.setData=function(t){this.data=t;var e=t.config;this.setProp(AttrType.atMvSpeed,64*e.MvSpeed/1e3),this.setProp(AttrType.atHpMax,1),this.setProp(AttrType.atHp,1),this._body.y=-e.high,this.setHpAndNameVisible(!1),this.readyUpdateMC(),this._shadow.visible=!1},e.prototype.getDir=function(){return 4},e.prototype.setFlow=function(){GFunc.move(this._bodyContainer,new XY,new XY(0,20),1500)},e.prototype.reset=function(){egret.Tween.removeTweens(this._bodyContainer),t.prototype.reset.call(this)},e.prototype.setBodyVisible=function(t){this._isShowBody=this._effContainerUp.visible=this._effContainerDown.visible=this._bodyContainer.visible=t,this._shadow.visible=!1},e}(Entity);__reflect(EntityMeilin.prototype,"EntityMeilin"),window.EntityMeilin=EntityMeilin;var EntityMiner=function(t){function e(){var e=t.call(this)||this;return e.headNameComponent=new MinerNameComponent,e.headNameComponent.x=-e.headNameComponent.width/2,e.addChild(e.headNameComponent),e.titleArr.push(e.headNameComponent),e}return __extends(e,t),e.prototype.addDisplay=function(){},e.prototype.setData=function(t){this.data=t;var e=Cfg.getConfig(MinerConfig,this.data.minerQuality);this.setDir(this.data.getMineFBConfig().dir),this.headNameComponent.updateRoleName(this.data.roleName),this.headNameComponent.updateMinerName(this.data.minerQuality),this.headNameComponent.setRobImgShow(this.data.isRob()&&!this.data.isMyMiner()?!0:!1);var i=Math.floor(t.getTime()/1e3);i>0&&Timer.ins()["do"](0,1e3,i,this.onTimer,this),this.data.setBodyFileName("npc"+e.apperance),this.setHpAndNameVisible(!1),this.setClickEnable(!0),this.updatePos(),this.readyUpdateMC()},e.prototype.onTap=function(t){if(this._body.hitTestPoint(t.stageX,t.stageY)&&this.data){if(this.data.isMyMiner())return void showtipsFail(Lang.scene_str3);if(this.data.isGrab())return void showtipsFail(Lang.scene_str4);if(this.data.isRobing)return void showtipsFail(Lang.scene_str5);if(!this.data.isRob())return void showtipsFail(Lang.scene_str6.replace("$count$",""+Cfg.getConfig(MineCommonConfig).berob));openWin(MineRobWin,this.data)}},e.prototype.onTimer=function(){var t=""+Lang.common_str85+getFormatTime(this.data.getTime()/1e3,"mm:ss");this.headNameComponent.updateTime(t)},e}(EntityRole);__reflect(EntityMiner.prototype,"EntityMiner"),window.EntityMiner=EntityMiner;var HunqiAwakeConfig=function(){function t(){}return t}();__reflect(HunqiAwakeConfig.prototype,"HunqiAwakeConfig");var EntityMonsterSiege=function(t){function e(){var e=t.call(this)||this;return e.updateHeadNameTick=0,e.headNameComponent=new MonsterSiegeName,e.addChild(e.headNameComponent),e}return __extends(e,t),e.prototype.setData=function(t){this.data=t;var e=Cfg.getMonstersConfigNew(t.monsterId),i=Cfg.getConfig(MonsterModelConfig,e.avatar[0]);this.setProp(AttrType.atHpMax,3),this.setProp(AttrType.atHp,t.hp),this.setDir(i.dir),this.data.setBodyFileName(i.appearance),this.setEntityScale(i.scale),this.myHeight=i.height*i.scale,this._hpBar.currentState="s"+(t.config.type+1),this.setHPBarVisible(t.isLive());var n=t.config.monstrColor;this.headNameComponent.updateName(e.name+n),this.headNameComponent.x=-this.headNameComponent.width/2,this.readyUpdateMC()},e.prototype.iniHpBar=function(){this._hpBar=new eui.ProgressBar,this._hpBar.touchEnabled=!1,this._hpBar.touchChildren=!1,this._hpBar.skinName="bloodBarMSSkin",this._hpBar.direction=eui.Direction.LTR,this._hpBar.slideDuration=1200,this.addChild(this._hpBar),this._hpBar.x=-this._hpBar.width/2;var t=-50-this.myHeight;this._hpBar.y=t-this._hpBar.height},e.prototype.getCfgId=function(){return this.data.id},e.prototype.updateTick=function(e){t.prototype.updateTick.call(this,e),Timer.ins().getTimer()>this.updateHeadNameTick&&(this.updateHeadNameTick=Timer.ins().getTimer()+1e3,this.updateTime())},e.prototype.updateTime=function(){var t="";this.data.hp<=2&&(t=getFormatTime(this.data.getTimer(),"hh小时mm分ss秒")+"后"+(this.data.isDie()?"复活":"整顿")),this.headNameComponent.updateTime(t,this.data.isDie())},e.prototype.onTap=function(t){var e=this;this._body.hitTestPoint(t.stageX,t.stageY)&&(LogicSys.ins().onMapGridClick(MapContainer.ins().getNearestAroundXY(this,LogicSys.ins().centerEntity),function(){MonsterSiegeSys.ins().sendSingleMonsterData(e.data.id)}),t.stopImmediatePropagation())},e.prototype.canBeAtk=function(){return!1},e}(Entity);__reflect(EntityMonsterSiege.prototype,"EntityMonsterSiege"),window.EntityMonsterSiege=EntityMonsterSiege;var EntityNPC=function(t){function e(){var e=t.call(this)||this;return e.isShowRedpoint=!1,e.npcId=0,e._hpBar.visible=!1,e.touchEnabled=!0,e.touchChildren=!0,e.imgTower=new eui.Image,e.imgTower.touchEnabled=!1,e.imgTower.x=-94,e.imgTower.y=-37,e.addChildAt(e.imgTower,0),e.mcRedPoint=new MC,e.addChild(e.mcRedPoint),e.titleArr.push(e.mcRedPoint),e}return __extends(e,t),e.prototype.addDisplay=function(){MapContainer.ins().addEffectToDown2(this._shadow)},e.prototype.setData=function(t){this.data=t;var e=Cfg.getConfig(NPCConfig,t.configID);this.setName(e.name),this.setDir(e.dir),this.myHeight=e.myHeight,this.npcId=e.id,e.bodyAppearanceId&&this.data.setBodyFileName(Cfg.getConfig(BodyAppearanceConfig,e.bodyAppearanceId).appearance),e.weaponAppearanceId&&this.data.setWeaponFileName(Cfg.getConfig(WeaponAppearanceConfig,e.weaponAppearanceId).appearance),e.wingAppearanceId&&this.data.setWingFileName(Cfg.getConfig(WingAppearanceConfig,e.wingAppearanceId).appearance),this.setTitle(e.titleId),this.showImgTower(-1!=GConst.RankNPCId.indexOf(e.id)),this.setHPBarVisible(!1),this.updatePos(),this.readyUpdateMC(),this.setClickEnable(!0)},e.prototype.onTap=function(t){this._body.hitTestPoint(t.stageX,t.stageY)&&(LogicSys.ins().centerEntity.AI.startfindNpc(this.npcId),t.stopImmediatePropagation())},e.prototype.setName=function(e,i,n){void 0===i&&(i=16769375),void 0===n&&(n=16),t.prototype.setName.call(this,e,i),this._nameTxt.size=n,this.updateNameGroupSize()},e.prototype.getCfgId=function(){return this.npcId},e.prototype.setCfgId=function(t){this.npcId=t},e.prototype.reset=function(){this.removeEventListener(egret.TouchEvent.TOUCH_BEGIN,this.onTap,this),this.mcRedPoint.stop(),t.prototype.reset.call(this)},e.prototype.showRedPoint=function(t){this.isShowRedpoint=this.mcRedPoint.visible=t,t?this.mcRedPoint.playFile(getEffName("npctips"),-1,null,!1):this.mcRedPoint.stop()},e.prototype.showImgTower=function(t){this.imgTower.source=t?"single_zycs_dizuo_png":""},e.prototype.continuePlay=function(){t.prototype.continuePlay.call(this),this.showRedPoint(this.isShowRedpoint)},e.prototype.getBodyFileName=function(){return ResMgr.getEntityBodyRes(this.entityType,this.data.bodyFileName,this.getDir(),this.action,this.hasWing,0)},e}(EntityRole);__reflect(EntityNPC.prototype,"EntityNPC"),window.EntityNPC=EntityNPC;var HunqiIdConfig=function(){function t(){}return t}();__reflect(HunqiIdConfig.prototype,"HunqiIdConfig");var EntityOtherName=function(t){function e(){var e=t.call(this)||this;return e.lbBelongName=new eui.Label,e.lbBelongName.fontFamily="黑体",e.lbBelongName.width=240,e.lbBelongName.textAlign="center",e.lbBelongName.size=16,e.lbBelongName.height=e.lbBelongName.size,e.lbBelongName.stroke=1,e.lbBelongName.strokeColor=0,e.lbBelongName.textColor=16777215,e.lbBelongName.anchorOffsetX=e.lbBelongName.width>>1,e.lbBelongName.verticalAlign="bottom",e.lbBelongName.touchEnabled=!1,e.addChild(e.lbBelongName),e.titleArr.push(e.lbBelongName),e.updatePos(),e}return __extends(e,t),e.prototype.setData=function(e){t.prototype.setData.call(this,e);var i=Cfg.getMonstersConfigNew(e.configID);if(this.setName(i.name,16777215),this.setHpAndNameVisible(!0),this.setHPBarVisible(!1),e.belongName){var n=addColor(Lang.fb_str1+"：",16115290)+e.belongName;this.lbBelongName.textFlow=addColorTF(n)}else this.lbBelongName.text=""},e}(EntityOther);__reflect(EntityOtherName.prototype,"EntityOtherName"),window.EntityOtherName=EntityOtherName;var HunqiLevelConfig=function(){function t(){}return t}();__reflect(HunqiLevelConfig.prototype,"HunqiLevelConfig");var EntityRoleUI=function(t){function e(){var e=t.call(this)||this;return e.disOrder=[],e.dir=4,e}return __extends(e,t),e.prototype.setAction=function(t){this.action=t,this.updateMC()},e.prototype.setDir=function(t){this.dir=t,this.updateMC()},e.prototype.setData=function(t,e,i){void 0===i&&(i=EntityAction.STAND),this.data=t,this.dir=e,this.action=i,this.updateMC()},e.prototype.updateMC=function(){var t=this.data,e=0,i=this.dir,n=isNaN(t.type)?EntityType.ROLE:t.type;if(t.damonId){var a=Cfg.getConfig(DamonHuanhuaBaseConfig,t.damonId);e=isNaN(a.high)?0:-a.high;var o=this.getMC(McOrder.MOUNT,i),s=this.getMC(McOrder.MOUNT2,i);o.playFile(ResMgr.getMountSource(t.mountFileName,i,this.action),-1),s.playFile(ResMgr.getMount2Source(t.mountFileName,i,this.action),-1)}var r=this.getMC(McOrder.BODY,i);if(r.playFile(ResMgr.getEntityBodyRes(n,t.bodyFileName,i,this.action,!0,t.sex),-1),r.y=e,t.weaponFileName){var u=this.getMC(McOrder.WEAPON,i);u.playFile(ResMgr.getEntityWeaponRes(n,t.weaponFileName,i,this.action),-1),u.y=e}if(t.wingId){var h=this.getMC(McOrder.WING,i);h.playFile(ResMgr.getEntityWingRes(n,t.wingFileName,i,this.action),-1),h.y=e}if(t.shengLingId>0){var l=this.getMC(McOrder.SHENGLING,i);l.playFile(ResMgr.getEntityShengLingRes(n,t.shengLingFileName,i,this.action,""!=t.wingFileName),-1),l.y=e}var p=GConst.mcOrderJob[t.job],c=p[i];if(c)for(var d=c.length,g=0;d>g;g++){var f=c[g];this.disOrder[f]&&this.addChild(this.disOrder[f])}},e.prototype.getMC=function(t,e){var i=this.disOrder[t];return i||(this.disOrder[t]=i=new MC),i.setDir(e),i},e.prototype.reset=function(){for(var t=0,e=this.disOrder;t<e.length;t++){var i=e[t];i&&i.reset()}},__decorate([callDelay()],e.prototype,"updateMC",null),e}(eui.Component);__reflect(EntityRoleUI.prototype,"EntityRoleUI");var EntityYongbing=function(t){function e(){var e=t.call(this)||this;return e.setHPBarVisible(!1),e}return __extends(e,t),e.prototype.canBeAt=function(){return!1},e.prototype.setData=function(t){this.data=t,this.setName(t.entityName+"的灵宠"),this.setProps(t.attributeData)},e.prototype.getBodyFileName=function(){return ResMgr.getEntityBodyRes(this.entityType,this.data.bodyFileName,this.getDir(),this.action,this.hasWing,0)},e}(EntityRole);__reflect(EntityYongbing.prototype,"EntityYongbing");var MapContainer=function(t){function e(){var i=t.call(this)||this;return i.imgSize=1024,i.isSmallImgComplete=!0,i.lastUpdateX=0,i.lastUpdateY=0,i.images={},i.mapId=-1,i.mapFileNames=[],i.curMapFileName="",MessageMgr.ins().coverFunc(e),i.container=new egret.DisplayObjectContainer,i.container.touchChildren=!1,i.container.touchEnabled=!0,i.addChild(i.container),i.smallImg=new eui.Image,i.container.addChild(i.smallImg),i.smallImg.addEventListener(egret.Event.COMPLETE,i.onThumbnailComplete,i),i.mapEffLayer=new egret.DisplayObjectContainer,i.addChild(i.mapEffLayer),i.layerDrop=new egret.DisplayObjectContainer,i.addChild(i.layerDrop),i.downLayer1=new egret.DisplayObjectContainer,i.addChild(i.downLayer1),i.downLayer2=new egret.DisplayObjectContainer,i.addChild(i.downLayer2),i.middleLayer=new egret.DisplayObjectContainer,i.middleLayer.sortableChildren=!0,i.addChild(i.middleLayer),i.upLayer1=new egret.DisplayObjectContainer,i.addChild(i.upLayer1),i.upLayer2=new egret.DisplayObjectContainer,i.addChild(i.upLayer2),i.layerBlood=new egret.DisplayObjectContainer,i.addChild(i.layerBlood),i.addEventListener(egret.TouchEvent.TOUCH_BEGIN,i.patchGridClick,i),i.checkWalkable=i.checkWalkable.bind(i),i.checkWalkableTemp=i.checkWalkableTemp.bind(i),i}return __extends(e,t),e.ins=function(){return this.instance||(this.instance=new e)},e.prototype.getPath=function(i,n,a){return void 0===a&&(a=e.ins().checkWalkable),t.prototype.getPath.call(this,i,n,a)},e.prototype.getAroundPath=function(i,n,a){return void 0===a&&(a=e.ins().checkWalkableTemp),t.prototype.getAroundPath.call(this,i,n,a)},e.prototype.getNearestAroundXY=function(i,n,a){return void 0===a&&(a=e.ins().checkWalkable),t.prototype.getNearestAroundXY.call(this,i,n,a)},e.prototype.getNearestRandomXY=function(i,n){return void 0===n&&(n=e.ins().checkWalkable),t.prototype.getNearestRandomXY.call(this,i,n)},e.prototype.addToParent=function(t){if(void 0===t&&(t=null),t&&(this.myParent=t),this.myParent&&null==this.parent){this.myParent.addChild(this);for(var e=0;e<this.middleLayer.numChildren;e++){var i=this.middleLayer.getChildAt(e);i instanceof EntityBase&&i.continuePlay()}}},e.prototype.addEffectToDown1=function(t){this.downLayer1.addChild(t)},e.prototype.addEffectToDown2=function(t){this.downLayer2.addChild(t)},e.prototype.addEffectToUp1=function(t){this.upLayer1.addChild(t)},e.prototype.addEntity=function(t){this.middleLayer.addChild(t)},e.prototype.addDropTo=function(t){this.layerDrop.addChild(t)},e.prototype.addMapEff=function(t){this.mapEffLayer.addChild(t)},e.prototype.addBlood=function(t){this.layerBlood.addChild(t)},e.prototype.updateTick=function(t){},e.prototype.patchGridClick=function(t){return this.container.globalToLocal(t.stageX,t.stageY)},e.prototype.focusTo=function(t,e,i){void 0===i&&(i=!1);var n=50,a=LayerMgr.getStage();this.x=-Math.min(Math.max(t-(a.stageWidth>>1),0),this.maxWidth-a.stageWidth),this.y=-Math.min(Math.max(e-n-(a.stageHeight>>1),0),this.maxHeight-a.stageHeight),this.updateImgs(this.x,this.y,i)},e.prototype.changeMap=function(e,i,n){this.clearAll(),this.curMapFileName=Cfg.getConfig(ScenesConfig,e).mapfilename,-1==this.mapFileNames.indexOf(this.curMapFileName)&&(this.mapFileNames.length>=2?(this.mapFileNames.push(this.curMapFileName),this.isSmallImgComplete=!1,this.clearImgs()):this.mapFileNames.push(this.curMapFileName)),this.mapId=e,console.log("地图mapId:"+e),t.prototype.initMap.call(this,Cfg.getConnectConfig(MapInfo,ScenesConfig,this.mapId));var a=ResMgr.getSmallMapName(this.curMapFileName);this.smallImg.width=this.maxWidth,this.smallImg.height=this.maxHeight,this.smallImg.source=a,ResMgr.addResFilter(this.curMapFileName,a),this.maxImagX=Math.ceil(this.maxWidth/this.imgSize),this.maxImagY=Math.ceil(this.maxHeight/this.imgSize),this.container.addChild(this.smallImg),this.focusTo(i,n,!0)},e.prototype.clearAll=function(){this.layerBlood.removeChildren(),this.mapEffLayer.removeChildren(),this.layerDrop.removeChildren(),this.downLayer1.removeChildren(),this.downLayer2.removeChildren(),this.middleLayer.removeChildren(),this.upLayer1.removeChildren(),this.upLayer2.removeChildren(),this.shapesContainer&&this.shapesContainer.parent&&this.removeChild(this.shapesContainer),this.container.removeChildren()},e.prototype.isShow=function(){return 1==this.visible&&null!=this.parent&&void 0!=this.parent},e.prototype.onThumbnailComplete=function(){this.isSmallImgComplete=!0,this.updateImgs(this.lastUpdateX,this.lastUpdateY,!0)},e.prototype.clearImgs=function(){for(var t in this.images){var e=this.images[t];if(e.source=null,e.$getRenderNode){var i=e.$getRenderNode();i.cleanBeforeRender()}e.$getRenderNode().cleanBeforeRender()}},e.prototype.updateImgs=function(t,e,i){void 0===i&&(i=!1);var n=this.imgSize/4;if(!(!i&&Math.abs(this.lastUpdateX-t)<=n&&Math.abs(this.lastUpdateY-e)<=n)&&(this.lastUpdateX=t,this.lastUpdateY=e,this.isSmallImgComplete)){var a=LayerMgr.getStage().stageWidth,o=LayerMgr.getStage().stageHeight,s=Math.max(Math.floor(-t/this.imgSize),0),r=Math.max(Math.floor(-e/this.imgSize),0),u=s+Math.ceil(a/this.imgSize),h=r+Math.ceil(o/this.imgSize),l=new egret.Rectangle(-t,-e,a,o),p=[];for(var c in this.images){var d=this.images[c],g=d.getBounds();g.x=d.x,g.y=d.y,l.intersects(g)||(p.push(d),d.source=null,d.visible=!1,delete this.images[c])}for(var f=s;u>=f&&f<this.maxImagX;f++)for(var y=r;h>=y&&y<this.maxImagY;y++){var m=""+f+y,C=ResMgr.getMapSourceName(Cfg.getConfig(ScenesConfig,this.mapId).mapfilename,y,f),d=this.images[m];d&&d.source==C||(d=d||p.pop()||new eui.Image,d.source=C,d.x=f*this.imgSize,d.y=y*this.imgSize,ResMgr.addResFilter(this.curMapFileName,C),this.images[m]=d,d.visible||(d.alpha=0,egret.Tween.get(d).to({alpha:1},2e3)),d.visible=!0),d.parent||this.container.addChild(d)}for(var v=0,S=p;v<S.length;v++){var b=S[v];DisUtil.remove(b)}}},e}(MapBase);__reflect(MapContainer.prototype,"MapContainer",["ILayer"]);var System;!function(t){t.map=MapContainer.ins.bind(MapContainer)}(System||(System={}));var Actor=function(t){function e(){var e=t.call(this)||this;return e.zhuanShengLv=80,e._actorID=0,e.level=0,e.exp=0,e.totalexp=0,e.power=0,e.myName="",e.createRoleTime="2020-01-06 00:00:00",e.job=JobConst.ZhanShi,e.outboardExp=0,e.outboardGold=0,e.currencys=[],e.MyAI=new AIMainRole,e.seePlayModel=new SeePlayModel,e.serverName="",e.serverOpenDay=0,e.serverHefuTimer=0,e.serverOpenTimer=0,e._serverTime=0,e.attrData=new EntityAttrData,e.vipLv=1,e.sVipLv=0,e}return __extends(e,t),Object.defineProperty(e.prototype,"actorID",{get:function(){return this._actorID},set:function(t){urlParam.actorid=t,this._actorID=t},enumerable:!0,configurable:!0}),e.ins=function(){return t.getIns.call(this,e)},e.prototype.setCurrency=function(t,e){t<CurType.max&&(this.currencys[t]=e)},e.prototype.getCurrency=function(t){var e=0;return t<CurType.max&&(e=this.currencys[t]||0),e},Object.defineProperty(e.prototype,"serverTime",{get:function(){return this._serverTime+Timer.ins().getEgretTimer()},enumerable:!0,configurable:!0}),e.prototype.setServerTime=function(t){this._serverTime=DateUtil.formatMiniDateTime(t)-Timer.ins().getEgretTimer()},e.prototype.getOther=function(){return this.seePlayModel},e.prototype.getMyData=function(){return this.seePlayModelMy||(this.seePlayModelMy=new SeePlayModelMy),this.seePlayModelMy},e.prototype.getAtt=function(t){return this.attrData.getAtt(t)},Object.defineProperty(e.prototype,"hefuDay",{get:function(){return 0==this.serverHefuTimer?-1:Math.floor((this.serverTime-this.serverHefuTimer)/DateUtil.MS_PER_DAY)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"zsId",{get:function(){return JobSys.ins().zsData.zsId},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"myBaseName",{get:function(){return this.myName.replace(RegUtil.ServerName,"")},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"isLocation",{get:function(){return 1==e.ins().serverEnv},enumerable:!0,configurable:!0}),e}(BaseSys);__reflect(Actor.prototype,"Actor"),window.Actor=Actor;var HunqiQualityConfig=function(){function t(){}return t}();__reflect(HunqiQualityConfig.prototype,"HunqiQualityConfig");var EntityBianshenData=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.bianShenEndTick=0,e}return __extends(e,t),e.prototype.parser=function(e){t.prototype.parser.call(this,e),this.parserSkill(e)},e.prototype.parserData=function(t){this.entityName=t.readString(),this.job=t.readByte(),this.sex=t.readByte(),this.lv=t.readInt(),this.szId=t.readInt(),this.sqId=t.readInt(),this.wingId=t.readInt(),this.touxianStage=t.readInt(),this.title=t.readInt(),this.guildID=t.readInt(),this.guildName=t.readString(),this.teamId=t.readInt(),this.guildOffice=t.readInt(),this.mozhenId=t.readInt(),this.bianshenId=t.readInt();var e=t.readInt();this.bianShenEndTick=e+Timer.ins().getTimer(),this.damonId=t.readInt(),this.damonFazhenId=t.readInt(),this.meilinId=t.readInt(),this.footId=t.readInt();var i=t.readInt();Cfg.hasConfig(ShenYouHuanhuaConfig,i)&&(this.huDunId=i),this.isShowHunduBar=1==t.readByte()},Object.defineProperty(e.prototype,"leftCdTime",{get:function(){return Math.max(0,this.bianShenEndTick-Timer.ins().getTimer())},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"footFileName",{get:function(){var t="";if(this.bianshenId){var e=Cfg.getConfig(ShenmoHuanhuaBaseConfig,this.bianshenId);t=e.footId?Cfg.getConfig(FootAppearanceConfig,e.footId).appearance:""}return t},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"faZhenFileName",{get:function(){if(this.mozhenId){var t=Cfg.getConfig(ShenmoMozhenBaseConfig,this.mozhenId).appearanceId;return Cfg.getConfig(GuanghuanAppearanceConfig,t).appearance}return""},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"bodyFileName",{get:function(){var t=Cfg.getConfig(ShenmoHuanhuaBaseConfig,this.bianshenId);return t.facade},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"wingFileName",{get:function(){return""},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"mountFileName",{get:function(){return""},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"weaponFileName",{get:function(){return""},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"guanghuanFileName",{get:function(){return""},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"shengLingFileName",{get:function(){return""},enumerable:!0,configurable:!0}),e}(EntityRoleData);__reflect(EntityBianshenData.prototype,"EntityBianshenData");var EntityCollectionMonsterData=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return __extends(e,t),e.prototype.parser=function(t){this.parserBase(t),this.state=t.readByte(),this.tick=t.readInt(),this.tick=DateUtil.formatMiniDateTime(this.tick),this.tMasterHandle=t.readDouble()},e}(EntityData);__reflect(EntityCollectionMonsterData.prototype,"EntityCollectionMonsterData");var EntityDamonData=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.fazhenId=0,e.followHandle=0,e}return __extends(e,t),e.prototype.parser=function(t){this.masterHandle=t.readDouble(),this.followHandle=t.readDouble(),this.configID=t.readInt(),this.fazhenId=t.readInt()},e}(EntityData);__reflect(EntityDamonData.prototype,"EntityDamonData");var ImageAppearanceConfig=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return __extends(e,t),e}(AppearanceConfig);__reflect(ImageAppearanceConfig.prototype,"ImageAppearanceConfig");var EntityFaBaoData=function(t){function e(){return t.call(this)||this}return __extends(e,t),e.prototype.setConfig=function(t){this.config=t,this.configID=t.id;var e=Cfg.getConfig(MeilinAppearanceConfig,t.appearanceId).appearance;this.setBodyFileName(e)},e}(EntityData);__reflect(EntityFaBaoData.prototype,"EntityFaBaoData");var ItemConfig=function(){function t(){this.huanhuaId=0,this.equippower=0,this.viewArg=[]}return t.prototype.copy=function(t){for(var e in t)this[e]=t[e]},t.prototype.getName=function(t){return void 0===t&&(t=Actor.ins().sex),this.getValueByArr(this.name,t)},t.prototype.getDesc=function(t){return void 0===t&&(t=Actor.ins().sex),this.getValueByArr(this.desc,t)},t.prototype.getIcon=function(t){return void 0===t&&(t=Actor.ins().sex),this.getValueByArr(this.icon,t)},t.prototype.getValueByArr=function(t,e){var i;return i=t.length>1?t[e]:t[0]},t.getUI=function(e){var i=Cfg.getConfig(t,e),n=i.huanhuaId,a=i.type;return a==ItemType.ShenqiHuanHua?"res/uiweaponeff/"+Cfg.getConfig(WeaponAppearanceConfig,Cfg.getConfig(ShenqiHuanhuaBaseConfig,n).weaponIds[0]).appearance:a==ItemType.SzHuanHua?Cfg.getConfig(SzHuanhuaBaseConfig,n).uibody[Actor.ins().sex]:a==ItemType.WingHuanHua?"res/wingui/"+Cfg.getConfig(WingHuanhuaBaseConfig,n).uirole:a==ItemType.DamonHuanHua?Cfg.getConfig(DamonHuanhuaBaseConfig,n).uibody:a==ItemType.MeilinHuanHua?Cfg.getConfig(MeilinHuanhuaBaseConfig,n).uirole:void 0
},t}();__reflect(ItemConfig.prototype,"ItemConfig");var EntityMonsterData=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return __extends(e,t),e}(EntityGatherMonsterData);__reflect(EntityMonsterData.prototype,"EntityMonsterData");var EntityMonsterSiegeData=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.id=1,e.hp=1,e.tick=0,e}return __extends(e,t),e.prototype.parser=function(t){this.id=t.readByte(),this.hp=t.readByte();var e=t.readInt();this.tick=1e3*e+Timer.ins().getTimer()},Object.defineProperty(e.prototype,"monsterId",{get:function(){return Cfg.getConfig(MSMonsterConfig,this.id).monsterid},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"config",{get:function(){return Cfg.getConfig(MSMonsterConfig,this.id)},enumerable:!0,configurable:!0}),e.prototype.getTimer=function(){return Math.max(0,(this.tick-Timer.ins().getEgretTimer())/1e3)},e.prototype.isDie=function(){return 0==this.hp},e.prototype.isLive=function(){return this.hp>0},e}(EntityData);__reflect(EntityMonsterSiegeData.prototype,"EntityMonsterSiegeData");var JinzhuanConstConfig=function(){function t(){}return t}();__reflect(JinzhuanConstConfig.prototype,"JinzhuanConstConfig");var EntityYongbingData=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.id=0,e.fazhenId=0,e.entityName="",e}return __extends(e,t),e.prototype.parser=function(e){t.prototype.parser.call(this,e),this.entityName=e.readString(),this.id=e.readInt(),this.fazhenId=e.readInt(),t.prototype.parserSkill.call(this,e)},e.prototype.parserSkill=function(e){t.prototype.parserSkill.call(this,e);for(var i=0,n=this.skillDatas;i<n.length;i++){var a=n[i],o=Cfg.getConfig(YongbingHuanhuaBaseConfig,this.id);a.actionIndex=o.effect-1}},e.prototype.parserChange=function(t){this.handle=t.readDouble(),this.id=t.readInt(),this.fazhenId=t.readInt()},Object.defineProperty(e.prototype,"bodyFileName",{get:function(){var t=Cfg.getConfig(YongbingHuanhuaBaseConfig,this.id).facade;return t},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"guanghuanFileName",{get:function(){var t="";if(this.fazhenId>0){var e=Cfg.getConfig(YongbingMozhenBaseConfig,this.fazhenId).appearanceId;t=Cfg.getConfig(GuanghuanAppearanceConfig,e).appearance}return t},enumerable:!0,configurable:!0}),e}(EntityData);__reflect(EntityYongbingData.prototype,"EntityYongbingData");var SkillEditorData=function(){function t(){this.isEditor=!1,this.append="",this.isShow=!0,this.startTick=0,this.endTick=0,this.configs=[],this.canPlaySound=!1,this.selectIndex=-1,this.setLayerByLayer(MapContainer.ins()),this.sender=new EntityBase,this.target=new XY,this.hitFun=function(){},this.effResDir=ResDir.RES_DIR_SKILLEFF}return Object.defineProperty(t.prototype,"dTick",{get:function(){return this.endTick-this.startTick},enumerable:!0,configurable:!0}),t.prototype.getLayerByIndex=function(t){var e=this.layers;return e[t]||e[e.length-1]},t.prototype.isMiddleLayer=function(t){return t==this.layers.indexOf(this.middleLayer)},t.prototype.setLayerByLayer=function(t){this.setLayer(t.downLayer1,t.downLayer2,t.upLayer1,t.upLayer2,t.middleLayer)},t.prototype.setLayer=function(t,e,i,n,a){this.downLayer1=t,this.downLayer2=e,this.upLayer1=i,this.upLayer2=n,this.middleLayer=a,this.layers=[this.downLayer1,this.downLayer2,this.upLayer1,this.upLayer2,this.middleLayer]},t.prototype.playSound=function(t){this.canPlaySound&&SoundUtil.play(t)},t}();__reflect(SkillEditorData.prototype,"SkillEditorData",["ISkillEditorData"]);var BossRemindWin=function(t){function e(){return t.call(this)||this}return __extends(e,t),e.prototype.open=function(e,i,n,a,o){void 0===e&&(e=""),void 0===i&&(i=""),void 0===n&&(n=""),void 0===a&&(a=""),void 0===o&&(o=null),this.skinName="ExtBossRemindWinEUI",t.prototype.open.call(this),this.addClickE(this.btnOk,this.onClick),this.addClickE(this.closeBtn,this.onClick),this.funBack=o,this.lbTitle.text=e,this.lbBossname.text=i,this.lblevel.text=n,this.imgBossHead.source=ResMgr.getMonsterHead(a)},e.prototype.onClick=function(t){switch(t.currentTarget){case this.btnOk:this.funBack&&(this.funBack(),this.visible=!1);break;case this.closeBtn:this.visible=!1}},e.prototype.hideImgArrow=function(){this.imgArrow.visible=!1},e}(BaseWinSingle);__reflect(BossRemindWin.prototype,"BossRemindWin"),window.BossRemindWin=BossRemindWin;var DailyOnlineCom=function(t){function e(){var e=t.call(this)||this;return e.skinName="DailyOnlineComEUI",e}return __extends(e,t),e.prototype.open=function(){t.prototype.open.call(this),this.group.visible=!0,this.scaleX=1,this.addClickE(this,this.onClick),this.addLsn(FuLiSys.ins().patchDailyOnlineAward,this.restartTime),this.addLsn(RpSys.ins().patchRp,this.updateRp),this.restartTime(),this.updateRp()},e.prototype.close=function(){t.prototype.close.call(this),Timer.ins().removeAll(this),this.group.visible=!1,this.scaleX=0},e.prototype.updateTime=function(t){if(t>0){var e=DateUtil.formatTime(1e3*t,"mm:ss");e=e.replace(":","m"),this.bmpLabelTime.text=e}else this.updateState()},e.prototype.restartTime=function(){var t=FuLiSys.ins().dailyOnlineData.canGetAward();if(!t){var e=FuLiSys.ins().dailyOnlineData.getNextUpdateTime();e>0&&Timer.ins()["do"](0,1e3,Math.ceil(e/1e3),this.updateTime,this,TimerType.LAST)}this.updateState()},e.prototype.updateState=function(){var t=FuLiSys.ins().dailyOnlineData;if(t.hasGetAllAward()){if(t.isBefore1Day()){this.bmpLabelTime.visible=!1,this.labelCanGet.visible=!0,this.labelCanGet.text="明日可领取";var e=Cfg.getDailyOnlineEffId(t.day,Actor.ins().job);this.mcName=Cfg.getConfig(EffAppearanceConfig,e).appearance}}else{t.canGetAward()?(this.labelCanGet.visible=!0,this.bmpLabelTime.visible=!1,this.labelCanGet.text="可领取"):(this.labelCanGet.visible=!1,this.bmpLabelTime.visible=!0);var i=t.getNextData();this.mcName=Cfg.getConfig(EffAppearanceConfig,i.effId).appearance}},e.prototype.updateRp=function(t){(!t||t.check(DailyOnlinePanel))&&(this.redPoint.visible=RpSys.ins().getData(ExtCom,FuliWin,DailyOnlinePanel))},e.prototype.onClick=function(t){openWin(FuliWin,FuliWin.getTabIndexbyPanel(DailyOnlinePanel))},e}(BaseEUI);__reflect(DailyOnlineCom.prototype,"DailyOnlineCom"),window.DailyOnlineCom=DailyOnlineCom;var ExtCom=function(t){function e(){var i=t.call(this)||this;return i.isShowBtn=!0,i.clonesbtn=[],i.tweenList=[],i.oneKeyCDTick=0,i.reliveType=ReliveType.Boss,i.skinName="ExtcompentEUI",i.touchEnabled=!1,i.addAllRule(),e.ins=i,i.toolbarIconArr=[i.group_toolbar1,i.groupIcon],i.groupAllIconArr=[i.groupAllIcon,i.groupAllIcon1,i.groupAct],i.rightIconArr=[i.rightGroup,i.rightTopGroup],i.rightTopGroup.cacheAsBitmap=!0,i}return __extends(e,t),e.prototype.open=function(){var t="mianui_zycs_xjhb";ComUtil.isXianYuApp&&(t+="30009"),this.btn_xjhb.icon=t,this.addClickE(this.btn_QieHuan,this.onToggleTouchTap),this.addEvent(eui.UIEvent.MOVE,this,this.createChildren),this.addLsn(RpSys.ins().patchRp,this.updateRedPoint),this.addLsn(JobSys.ins().patchQiJizl,this.qiJiOpen),this.addLsn(RpSys.ins().patchRp,this.updateRedPoint),this.addLsn(JobSys.ins().patchNewFunOpen,this.yanshiupdateXY),this.addLsn(TaskSys.ins().patchAgreementData,this.yanshiupdateXY),this.addLsn(TaskSys.ins().patchAgreementUpdate,this.yanshiupdateXY),this.addClickE(this,this.onItemClick),this.updateRedPoint(),this.qiJiOpen(),this.updateBossRemindXY()},e.prototype.addDisplay=function(){this.addLsn(LogicSys.ins().patchEnterMap,this.updateEnterMap),this.checkGuaji()},e.prototype.updateEnterMap=function(){this.qiJiOpen(),this.checkGuaji()},e.prototype.checkGuaji=function(){this.isGJ=FbSys.ins().fbId<=Cfg.getConfig(EnumConfig).GUAJI_FUBEN_MAX_ID&&!FbSys.ins().guajiData.isGuanQia},e.prototype.onItemClick=function(t){var e=t.target;if(e&&e instanceof eui.Button){var i=RuleIconMgr.ins().getRule(e);i&&i.tapExecute()}},e.prototype.qiJiOpen=function(){JobSys.ins().getQijiIsEnd()||!GFunc.isSysOpen(251)?DisUtil.remove(this.com_qiji):this.com_qiji.show()},e.prototype.showToggleTap=function(t){var i=this;void 0===t&&(t=!1);var n=Timer.ins().getEgretTimer();if(t||!(n<this.oneKeyCDTick)){this.oneKeyCDTick=n+400;for(var a=0;a<this.tweenList.length;a++)this.tweenList[a].alpha=0,egret.Tween.removeTweens(this.tweenList[a]);if(this.tweenList.length=0,this.isShowBtn){var o=this.groupIcon.numChildren;this.groupCloneIcon.removeChildren(),this.clonesbtn=[];for(var s=function(t){var e=r.groupIcon.getChildAt(t);if(e instanceof eui.Button){var i=e,n=RuleIconMgr.ins().getRule(i);if(n){n.setVisible(!1);var a=new eui.Button;a.skinName="Btn0Skin1",a.icon=i.icon,r.groupCloneIcon.addChild(a),r.clonesbtn.push(n);var o=i.localToGlobal(),s=r.groupCloneIcon.globalToLocal(o.x,o.y);a.x=s.x,a.y=s.y;var u=egret.Tween.get(a);r.tweenList.push(a),u.wait(10*(t-1)).to({x:s.x-50,alpha:0},100).call(function(){a.visible=!1})}}},r=this,a=o-1;a>=0;a--)s(a)}else for(var o=this.groupCloneIcon.numChildren,u=function(t){var e=h.groupCloneIcon.getChildAt(t);if(e instanceof eui.Button){var n=e;n.visible=null!=h.clonesbtn[t].tar.parent;var a=n.x,o=egret.Tween.get(n);h.tweenList.push(n);var s=h;o.wait(10*t).to({x:a+50,alpha:1},100).call(function(){i.clonesbtn[t].setVisible(!0),s.groupCloneIcon.removeChild(n)})}},h=this,a=0;o>a;a++)u(a);this.isShowBtn=!this.isShowBtn;var l=egret.Tween.get(this.btn_QieHuan);l.to({scaleX:this.isShowBtn?1:-1},200),this.btn_QieHuan.redPoint.visible=this.getQieHuanRedPoint(),e.showOrHide()}},e.prototype.onToggleTouchTap=function(){this.showToggleTap()},e.showOrHide=function(){return e.ins.isShowBtn},e.prototype.getQieHuanRedPoint=function(){var t=!1;if(!this.isShowBtn)for(var e=this.groupIcon.numChildren,i=0;e>i;i++){var n=this.groupIcon.getChildAt(i);if(n instanceof eui.Button&&!n.visible&&n.redPoint.visible){t=!0;break}}return t},e.prototype.showQieHuan=function(t){this.isShowBtn!=t&&this.showToggleTap(!0)},e.prototype.addAllRule=function(){var t=RuleIconMgr.ins();t.push(new ActivityIconRule(this.btn_activity)),t.push(new Activity12IconRule(this.btn_activity12)),t.push(new FuLiIconRule(this.btn_fuli)),t.push(new ActKFLCIconRule(this.btn_KFLC)),t.push(new ActYYHLIconRule(this.btn_YYHL)),t.push(new FirstRechargeIconRule(this.btn_firstRecharge)),t.push(new FirstRechargeTimerIconRule(this.btn_firstRechargeTimer)),t.push(new FirstRechargeEveryDayIconRule(this.btn_firstRechargeEveryday)),t.push(new RechargeYiYuanIconRule(this.btn_rechargeYiYuan)),t.push(new LoginAwardIconRule(this.btn_LianXu)),t.push(new ChengJiuIconRule(this.btn_Achieve)),t.push(new RankRule(this.btn_datianshi)),t.push(new KeFuRule(this.btn_kefu)),t.push(new SmrzRule(this.btn_smrz)),t.push(new SmrzApiRule(this.btn_smrzApi)),t.push(new FxylRule(this.btn_fxly)),t.push(new YkRule(this.btn_YK)),t.push(new ZZTQRule(this.btn_ZZTQ)),t.push(new GzhlRule(this.btn_gzhl)),t.push(new BossIconRule(this.btn_Boss)),t.push(new QiYueRule(this.btn_QiYue)),t.push(new BtnoolbarRule(this.btn_QieHuan)),t.push(new RedFortRule(this.btn_RedFort)),t.push(new LuoLanRule(this.btn_LuoLan)),t.push(new ActivityHefuIconRule(this.btn_activityHefu)),t.push(new DailyWanFaRule(this.btn_DailyWanFa)),t.push(new ZhaoCaiLongRule(this.btn_ZhaoCaiLong)),t.push(new XunZhangRule(this.btn_XunZhang)),t.push(new ShengbeiRule(this.btn_Shengbei)),t.push(new FuBenRule(this.btn_FuBen)),t.push(new JJCRule(this.btn_JJC)),t.push(new YYMSRule(this.btn_yyms)),t.push(new SVIPMSRule(this.btn_svipms)),t.push(new ActCSKRule(this.btn_CSK)),t.push(new XunBaoRule(this.btn_XunBao)),t.push(new QiYuRule(this.btn_QiYu)),t.push(new SuitIconRule(this.btn_Suit)),t.push(new TSSZIconRule(this.btn_tssz)),t.push(new JinZuanIconRule(this.btn_JinZuan)),t.push(new ActQMKHIconRule(this.btn_QMKH)),t.push(new BBFLIconRule(this.btn_BBFL)),t.push(new ZeroBuyRule(this.btn_ZeroBuy)),t.push(new GuildIconRule(this.btn_Guild)),t.push(new YZZHRule(this.btn_YZZH)),t.push(new ZhuzaiRule(this.btn_ShenYuBoss)),t.push(new TclyRule(this.btn_tcly)),t.push(new YdssRule(this.btn_ydss)),t.push(new XJHBRule(this.btn_xjhb)),t.push(new CollectionRule(this.btn_sc)),t.push(new WxYqhlRule(this.btn_yqhl)),t.push(new QmdbRule(this.btn_qmdb)),t.push(new HwbzRule(this.btn_hwbz)),t.push(new GuZhanRule(this.btn_GuZhan)),t.push(new GuildBattleRule(this.btn_GuildBattle)),t.push(new ShouquanRule(this.btn_Shouquan)),t.push(new TaQingFirstRechargeRule(this.btn_TaQingFirstRecharge)),t.push(new ActHFSYRule(this.btn_HFSY)),t.push(new Activity21IconRule(this.btn_act21)),t.push(new Activity24IconRule(this.btn_act24)),t.push(new Activity15IconRule(this.btn_act15)),t.push(new Activity23IconRule(this.btn_jqsc)),t.iniRule()},e.prototype.updateRedPoint=function(){this.btn_QieHuan.redPoint.visible=this.getQieHuanRedPoint()},e.prototype.getBtnDailyWanFa=function(){return this.btn_DailyWanFa},e.prototype.getBossBtn=function(){return this.btn_Boss},e.prototype.getBtn_Npc=function(){return this.btn_FuBen},e.prototype.getXunBaoBtn=function(){return this.btn_XunBao},e.prototype.getBtn_JJ=function(){return this.btn_JJC},e.prototype.getBtn_QuYu=function(){return this.btn_QiYu},e.prototype.showBossRemind=function(t,e,i,n,a,o){void 0===t&&(t=""),void 0===e&&(e=""),void 0===i&&(i=""),void 0===n&&(n=""),void 0===a&&(a=null),this.reliveType=o,this.com_BossRemind.open(t,e,i,n,a),this.com_BossRemind.visible=!0,this.updateBossRemindXY()},e.prototype.yanshiupdateXY=function(){var t=this;Timer.ins()["do"](50,1,1,function(){t.updateBossRemindXY()},this)},e.prototype.updateBossRemindXY=function(){if(FbSys.ins().fbId<=Cfg.getConfig(EnumConfig).GUAJI_FUBEN_MAX_ID){var t=this.btn_Boss.localToGlobal(0,0),e=this.groupRight1.globalToLocal(t.x,t.y);this.com_BossRemind.y=e.y+30}},e.prototype.closeRemind=function(){this.com_BossRemind.visible=!1},e.prototype.getSevenDayLoginBtnPoint=function(){return this.btn_LianXu.localToGlobal()},e.prototype.groupMcAddChild=function(t){this.groupMc.addChild(t)},e.prototype.groupMcRemoveChild=function(t){this.groupMc.removeChild(t)},e.prototype.getGroupMc=function(){return this.groupMc},e.prototype.setMiBtn=function(t){this.groupAllIcon.visible=t,RuleIconMgr.ins().updateMC()},e.prototype.getIsShowBtn=function(){return this.isShowBtn},e.prototype.updateGuanQiaBoss=function(){if(GFunc.isInGuaJiFb()){var t=FbSys.ins().guajiData.isGuanQia;this.rightGroup.visible=!t,this.rightTopGroup.visible=!t,this.setMiBtn(!t),this.checkGuaji()}},e.prototype.getParentVisible=function(t){return t.parent?this.isIncluded(t,this.toolbarIconArr)?this.getObjVisible(t,this.toolbarIconArr):this.isIncluded(t,this.groupAllIconArr)?this.getObjVisible(t,this.groupAllIconArr):this.isIncluded(t,this.rightIconArr)?this.getObjVisible(t,this.rightIconArr):!1:!1},e.prototype.isIncluded=function(t,e){if(!t.parent||t.parent==this)return!1;for(var i=t.parent,n=e.length-1;n>=0;n--){if(i==e[n])return!0;if(!i.parent)return!1;i=i.parent}return!1},e.prototype.getObjVisible=function(t,e){for(var i=t.parent,n=!0,a=0;a<e.length;a++){if(!e[a].visible){n=!1;break}if(i==e[a])break}return n},__decorate([post()],e,"showOrHide",null),e}(BaseTabEUI);__reflect(ExtCom.prototype,"ExtCom"),window.ExtCom=ExtCom;var ExtRemind=function(t){function e(){var e=t.call(this)||this;return e.sysid=0,e.skinName="ExtRemindItemEUI",e}return __extends(e,t),e.prototype.open=function(){},e.prototype.setSysId=function(t){this.sysid=t},e.prototype.getSysId=function(){return this.sysid},e.prototype.setDesc=function(t){this.lbRemindDesc.textFlow=addColorTF(t),this.width=this.groupRemind.width},e}(BaseEUI);__reflect(ExtRemind.prototype,"ExtRemind"),window.ExtRemind=ExtRemind;var KefuWin=function(t){function e(){var e=t.call(this)||this;return e.winType=WinType.NormalWin,e.nextSpeakTick=0,e.skinName="KefuWinEUI",e.checkBoxs=[e.checkBox0,e.checkBox1,e.checkBox2,e.checkBox3],e.addBg(),e.chatInput.promptColor=e.chatInput.textColor,e.chatInput.prompt=e.chatInput.text,e}return __extends(e,t),e.prototype.open=function(){t.prototype.open.call(this),this.addChangeE(this.checkBox0,this.onCheckBox),this.addChangeE(this.checkBox1,this.onCheckBox),this.addChangeE(this.checkBox2,this.onCheckBox),this.addChangeE(this.checkBox3,this.onCheckBox),this.addClickE(this.btnTijiao,this.onClick),this.addEvent(egret.FocusEvent.FOCUS_IN,this.chatInput,this.onFocusIn),this.labelTime.text=""+Lang.scene_str13+new Date(Actor.ins().serverTime).toLocaleDateString()},e.prototype.onCheckBox=function(t){for(var e=t.currentTarget,i=this.checkBoxs.length,n=0;i>n;n++)this.checkBoxs[n]!=e&&(this.checkBoxs[n].selected=!1)},e.prototype.onClick=function(){if(""==this.chatInput.text.replace(/\s/g,""))return void showtipsFail(Lang.scene_str14);if(this.nextSpeakTick>Timer.ins().getTimer()){var t=Math.ceil((this.nextSpeakTick-Timer.ins().getTimer())/1e3);return void showtipsFail(Lang.scene_str15.replace("$second$",""+t))}return this.chatInput.text==Lang.scene_str16?void showtipsFail(Lang.scene_str14):void(ChatSys.ins().checkRepeatString(this.chatInput.text)&&(this.sendKeFuInfo(this.chatInput.text),ChatSys.ins().lastSpeak=this.chatInput.text,this.nextSpeakTick=Timer.ins().getTimer()+3e5))},e.prototype.sendKeFuInfo=function(t){var e=urlParam.srvid,i=urlParam.appid,n=urlParam.openId,a=urlParam.reportRoot,o=Actor.ins(),s="?game="+e;s+="&appId="+i,s+="&userId="+o.actorID,s+="&userName="+n,s+="&userNameCn="+o.myName,s+="&userLevel="+o.level,s+="&vipLevel="+o.sVipLv,s+="&content="+t,Http.get(a+"back/custom/receive"+s),showtipsSuc("发送成功")},e.prototype.onFocusIn=function(){this.chatInput.text=""},e.openCheck=function(){return GFunc.checkSysOpen(96)},e}(BaseWinSingle);__reflect(KefuWin.prototype,"KefuWin"),window.KefuWin=KefuWin;var MainChat=function(t){function e(){var e=t.call(this)||this;return e.lastTime=0,e.skinName="ChatMainSkin1",e.itemList.itemRenderer=ChatItemMainChat,e}return __extends(e,t),e.prototype.open=function(e){void 0===e&&(e=0),t.prototype.open.call(this,e),this.addClickE(this.itemList,this.onListTap),this.addLsn(ChatSys.ins().patchLogMsg,this.updataList),this.addLsn(ChatSys.ins().patchNewChatMsg,this.updataList),this.addLsn(ChatSys.ins().patchSysChatMsg,this.updataList),this.addLsn(GuildSys.ins().patchGuildMessage,this.updataList),this.addLsn(GuildActSys.ins().patchGuildBossTeamInvitation,this.updataList),this.addLsn(FbSys.ins().patchGuaJiHelpBroadcast,this.updataList),this.addLsn(FbSys.ins().patchGuaJiAssistBroadcast,this.updataList),this.addLsn(FbSys.ins().patchMoLongYaoQing,this.updataList),this.updataList()},e.prototype.updataList=function(){var t=ChatSys.ins().getMsgsByType(ChatType.All);t.chatBaseDatas.length<=0||this.lastTime==t.chatBaseDatas[t.chatBaseDatas.length-1].timer||(this.dataList=new eui.ArrayCollection(t.chatBaseDatas),this.lastTime=t.chatBaseDatas[t.chatBaseDatas.length-1].timer)},e.prototype.onListTap=function(t){var e=t.target,i=e.data;i&&e.data.type==ChatType.Camp?GuildActSys.ins().sendGuildBossTeam(i.roleId):(openWin(ChatWin),this.visible=!1)},e}(BaseEUI);__reflect(MainChat.prototype,"MainChat"),window.MainChat=MainChat;var MainMap=function(t){function e(){var e=t.call(this)||this;return e.bottom=0,e}return __extends(e,t),e.prototype.open=function(){t.prototype.open.call(this),this.addLsn(LogicSys.ins().patchCreateCommEntity,this.updataMapName),LogicSys.ins().centerEntity&&this.updataMapName()},e.prototype.updataMapName=function(){this.fbid==FbSys.ins().fbId?this.mainUI_LeftTop&&this.mainUI_LeftTop.open():this.openFubenScoring(FbSys.ins().fubenConfig.group)},e.prototype.updateMap=function(){this.openFubenScoring(FbSys.ins().fubenConfig.group)},e.prototype.openFubenScoring=function(t){if(this.mainUI_LeftTop&&(this.mainUI_LeftTop.close(),DisUtil.remove(this.mainUI_LeftTop),this.mainUI_LeftTop=null),t==FbGroup.City)FbSys.ins().qmdbModel.isOpen()&&(this.mainUI_LeftTop=new QMDBFbPanel,this.mainUI_LeftTop.top=0,this.mainUI_LeftTop.bottom=0);else if(100>t);else switch(t){case FbGroup.Exp:case FbGroup.Gold:case FbGroup.Mojing:case FbGroup.Qizhi:case FbGroup.TianFu:case FbGroup.Damon:case FbGroup.Yongbing:case FbGroup.Shenmo:case FbGroup.Shenqi:case FbGroup.Wing:case FbGroup.Sz:case FbGroup.Meilin:this.mainUI_LeftTop=new MeiRiMapFbPanel,this.mainUI_LeftTop.top=0,this.mainUI_LeftTop.bottom=0;break;case FbGroup.Emo:this.mainUI_LeftTop=new EmoScoringPanel,this.mainUI_LeftTop.top=0,this.mainUI_LeftTop.bottom=0;break;case FbGroup.XueSe:this.mainUI_LeftTop=new XueSeScoringPanel,this.mainUI_LeftTop.top=0,this.mainUI_LeftTop.bottom=0;break;case FbGroup.RedFortress:this.mainUI_LeftTop=new RedFortFbPanel,this.mainUI_LeftTop.height=void 0,this.mainUI_LeftTop.top=0,this.mainUI_LeftTop.bottom=0;break;case FbGroup.BossHome:this.mainUI_LeftTop=new BossHomeFbPanel,this.mainUI_LeftTop.height=void 0,this.mainUI_LeftTop.top=0,this.mainUI_LeftTop.bottom=0;break;case FbGroup.GuildWarPVE:case FbGroup.GuildWarPVP:this.mainUI_LeftTop=new GuildWarFbPanel;break;case FbGroup.Mine:this.mainUI_LeftTop=new MineFBPanel;break;case FbGroup.kfbosssd:this.mainUI_LeftTop=new SmsdFbPanel;break;case FbGroup.KuaFuBoss:this.mainUI_LeftTop=new KfBossFbPanel,this.mainUI_LeftTop.top=0,this.mainUI_LeftTop.bottom=0;break;case FbGroup.QiyuEvent3:this.mainUI_LeftTop=new QiyuFbPanel3,this.mainUI_LeftTop.top=0,this.mainUI_LeftTop.bottom=0;break;case FbGroup.MoLong:this.mainUI_LeftTop=new MoLongFBPanel,this.mainUI_LeftTop.top=0,this.mainUI_LeftTop.bottom=0;break;case FbGroup.ShiJieBoss:this.mainUI_LeftTop=new ZhuZaiFbPanel,this.mainUI_LeftTop.top=0,this.mainUI_LeftTop.bottom=0;break;case FbGroup.ShenDian:this.mainUI_LeftTop=new ShenDianFbPanel,this.mainUI_LeftTop.top=0,this.mainUI_LeftTop.bottom=0;break;case FbGroup.Siege:this.mainUI_LeftTop=new MonsterSiegeFbPanel,this.mainUI_LeftTop.top=0,this.mainUI_LeftTop.bottom=0;break;case FbGroup.GuildBattle:this.mainUI_LeftTop=new GuildBattleFbPanel,this.mainUI_LeftTop.top=0,this.mainUI_LeftTop.bottom=0;break;case FbGroup.Guzhanchang:this.mainUI_LeftTop=new GuZhanFbPanel,this.mainUI_LeftTop.top=0,this.mainUI_LeftTop.bottom=0;break;case FbGroup.Brave:this.mainUI_LeftTop=new BraveFbPanel,this.mainUI_LeftTop.top=0,this.mainUI_LeftTop.bottom=0;break;case FbGroup.Kalima:this.mainUI_LeftTop=new KlmFbPanel,this.mainUI_LeftTop.top=0,this.mainUI_LeftTop.bottom=0;break;case FbGroup.CampWar:this.mainUI_LeftTop=new CampWarFbPanel,this.mainUI_LeftTop.top=0,this.mainUI_LeftTop.bottom=0;break;default:this.mainUI_LeftTop=new MainUIMapFuben}this.mainUI_LeftTop&&(this.mainUI_LeftTop.left=0,this.mainUI_LeftTop.right=0,this.mainUI_LeftTop.open(),this.addChild(this.mainUI_LeftTop),this.validateNow(),this.mainUI_LeftTop.validateNow())},e.prototype.updateTime=function(t){void 0===t&&(t=0),this.mainUI_LeftTop&&this.mainUI_LeftTop.updateTime()},e.prototype.getGuildWarEnemyItem=function(){this.validateNow();var t,e=this.mainUI_LeftTop;return e instanceof GuildWarFbPanel&&(t=e.getEnemyItem()),t},e.prototype.getXueseFbGrowBtn=function(){return this.mainUI_LeftTop instanceof XueSeScoringPanel?this.mainUI_LeftTop.getXueseFbGrowBtn():null},e.prototype.getEmoFbGrowBtn=function(){return this.mainUI_LeftTop instanceof EmoScoringPanel?this.mainUI_LeftTop.getEmoFbGrowBtn():null},__decorate([callDelay()],e.prototype,"updataMapName",null),e}(BaseWinSingle);__reflect(MainMap.prototype,"MainMap"),window.MainMap=MainMap;var MainName=function(t){function e(){var e=t.call(this)||this;return e.layer=LayerMgr.Main,e.winType=WinType.NeverCloseWin,e}return __extends(e,t),e.prototype.initUI=function(){t.prototype.initUI.call(this),this.isLog=!1,this.skinName="MianNameSkin1",this.touchEnabled=!1},e.prototype.open=function(){t.prototype.open.call(this),this.addLsn(LogicSys.ins().patchAllSysInit,this.allSysInit),this.addLsn(LogicSys.ins().patchCurrency,this.updateCurrency),this.addClickE(this.imgDiamon,this.onClick),this.addClickE(this.labelMesonry,this.onClick),this.allSysInit()},e.prototype.allSysInit=function(){this.updateCurrency()},e.prototype.updateCurrency=function(t){t?t.type==CurType.JinZuan?this.lbJinZuan.text=GFunc.overLength(Actor.ins().getCurrency(CurType.JinZuan)):t.type==CurType.gold?this.labelGoldTxt.text=GFunc.overLength(Actor.ins().getCurrency(CurType.gold)):t.type==CurType.yb&&(this.labelMesonry.text=GFunc.overLength(Actor.ins().getCurrency(CurType.yb))):(this.lbJinZuan.text=GFunc.overLength(Actor.ins().getCurrency(CurType.JinZuan)),this.labelGoldTxt.text=GFunc.overLength(Actor.ins().getCurrency(CurType.gold)),this.labelMesonry.text=GFunc.overLength(Actor.ins().getCurrency(CurType.yb)))},e.prototype.onClick=function(t){switch(t.currentTarget){case this.labelMesonry:case this.imgDiamon:openWin(RechargeWin)}},e}(BaseWinSingle);__reflect(MainName.prototype,"MainName"),window.MainName=MainName;var MainQiJi=function(t){function e(){var e=t.call(this)||this;return e.id=1,e.skinName="MainQiJiZhiLuSkin",e}return __extends(e,t),e.prototype.show=function(){this.tempParent&&this.tempParent.addChild(this)},e.prototype.addDisplay=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];this.tempParent=this.parent,this.addClickE(this,this.onClick),this.addLsn(JobSys.ins().patchQiJizl,this.updataData),this.addLsn(RpSys.ins().patchRp,this.updateRedPoint),this.addLsn(FbSys.ins().patchGuaJiInfo,this.updataData),this.addLsn(FbSys.ins().patchGuaJiChallenge,this.updataData),this.addLsn(FbSys.ins().patchGuaJiHelp,this.updataData),this.updateRedPoint(),this.updataData()},e.prototype.updateRedPoint=function(t){void 0===t&&(t=null),(!t||t.check(ZhuoYueWin))&&(this.redPoint.visible=RpSys.ins().getData(ZhuoYueWin),this.redPoint.visible&&(this.mcName="res/eff/qjzlzjm"))},e.prototype.updataData=function(){this.curConfig=Cfg.getConfig(WayConfig,CondType.More,WayConfig.guanqia,FbSys.ins().guajiData.guanId),JobSys.ins().getAllSysOpen()&&(this.curConfig=JobSys.ins().getQijiReceiveAwardData()),this.curConfig&&(this.imgIcon.source=ResMgr.getQijiIconRes1(this.curConfig.id,!1),this.imgTitle.source=ResMgr.getQijiNameRes1(this.curConfig.id,!0),this.lbGuanqia.text="第"+this.curConfig.guanqia+"层开启")},e.prototype.onClick=function(t){openWin(ZhuoYueWin,0)},e}(BaseEUI);__reflect(MainQiJi.prototype,"MainQiJi"),window.MainQiJi=MainQiJi;var MainTask=function(t){function e(){var e=t.call(this)||this;return e.TaskType=0,e.taskOkStatus=!1,e.skinName="MainTaskSkin",e.touchEnabled=!1,e.addClickE(e,e.onClick),e}return __extends(e,t),e.prototype.addDisplay=function(){this.addLsn(TaskSys.ins().patchMainTaskReward,this.TaskNav),this.addLsn(TaskSys.ins().patchMainTaskUpdata,this.TaskNav),this.addLsn(TaskSys.ins().patchMainTaskReward,this.descAnimation),this.TaskNav()},e.prototype.TaskNav=function(){if(0!=TaskSys.ins().taskId){this.taskOkStatus=!1;var t=!0;if(TaskSys.ins().taskId>0&&2!=TaskSys.ins().mainTaskStatus&&t){t=!1,this.TaskType=0;var e=TaskSys.ins().mainTaskStatus,i=Cfg.getConfig(MainTaskConfig,TaskSys.ins().taskId);i.awardShow;if(i.isAuto?this.taskShowAuto(i,TaskSys.ins().mainTaskokValue,e):this.taskShow(i.desc,"",TaskSys.ins().mainTaskokValue,i.showTarget,i.name,e,i.awardShow,i.type),i.isAuto&&1==e)return void this.autoCompleteTask(i);if(1==e)return}t&&(this.taskOkStatus=!0)}},e.prototype.autoCompleteTask=function(t){t.controlTarget==TaskNavType.FindNpc?GFunc.createTaskNavData(t.controlTarget)["goto"]():TaskSys.ins().sendMainTaskOK()},e.prototype.taskShowAuto=function(t,e,i){var n="",a="";if(1==i)n=StrUtil.addColor(Lang.common_str76,4718455),a=t.descComele?t.descComele:"";else{var o=e>=t.showTarget?4718455:16729927;a=t.desc?t.desc:""+StrUtil.addColor("("+e+"/"+t.showTarget+")",o)}this.lbTaskName.textFlow=addColorTF(t.name+n),this.lbTaskDesc.textFlow=addColorTF(a)},e.prototype.taskShow=function(t,e,i,n,a,o,s,r){void 0===r&&(r=0);var u=StrUtil.addColor(Lang.common_str76,4718455);if(0==o)if(2==r)u="";else{var h=i>=n?4718455:16729927;u=StrUtil.addColor("("+i+"/"+n+")",h)}this.lbTaskName.textFlow=addColorTF(StrUtil.addColor(e,2407922)+a+u),this.lbTaskDesc.textFlow=addColorTF(t),this.mc=1==o?ResMgr.getEffName("rweff1"):""},e.prototype.onClick=function(t){var e,i=0,n=[];if(0==this.TaskType){if(TaskSys.ins().saveMainTaskId.push(TaskSys.ins().taskId+"_"+TaskSys.ins().mainTaskStatus),1==TaskSys.ins().mainTaskStatus)return void TaskSys.ins().sendMainTaskOK();var a=Cfg.getConfig(MainTaskConfig,TaskSys.ins().taskId);if(2==a.type&&a.showTarget>Actor.ins().level)return void openWin(MeNeedLevelWin,1);n=a.controlTarget,e=GFunc.createTaskNavData(n),i=a.sysid}e["goto"](i)},e.prototype.descAnimation=function(t){var e=this,i=0;if(0!=t){var n=Cfg.getConfig(MainTaskConfig,t);i=n.next}this.mcGroup.addChild(MC.createCenterGruop(getEffName("complete"),1,function(){0!=i&&0!=t&&e.mcGroup.addChild(MC.createCenterGruop(getEffName("receive"),1))}))},e.prototype.getGroup1=function(){return this.eg||(this.eg=new eui.Group,this.eg.right=this.eg.left=this.eg.top=this.eg.bottom=0,this.addChild(this.eg)),this.eg},e.prototype.getGroupdesc=function(){return this},e}(BaseEUI);__reflect(MainTask.prototype,"MainTask"),window.MainTask=MainTask;var MainTianShiTouXianBtn=function(t){function e(){var e=t.call(this)||this;return e.skinName="MainTianShiTouXianBtnEUI",e.touchEnabled=!0,e.touchChildren=!1,e}return __extends(e,t),e.prototype.skinComplete=function(){this.addClickE(this,this.onClick)},e.prototype.addDisplay=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];this.addLsn(JobSys.ins().patchZS,this.updatePanel),this.updatePanel()},e.prototype.updatePanel=function(){var t=this,e=JobSys.ins().zsData,i=Cfg.getConfig(ChongshengLevelConfig,e.isMaxChong()?e.config.cslevel:e.config.cslevel+1),n=GFunc.creatItemDataById(i.additem2[0].id),a=Cfg.getConfig(ShenqiHuanhuaBaseConfig,n.cfg.huanhuaId),o=Cfg.getConfig(WeaponAppearanceConfig,a.weaponIds[Actor.ins().job-1]).appearance;this.mc1=ResMgr.getWeaponUIEFFResource(o),Timer.ins()["do"](800,1,1,function(){t.mc2=ResMgr.getEffName("tszl")},this)},e.prototype.onClick=function(){isShowWin(JobWin)?closeWin(JobWin):openWin(JobWin)},e}(BaseEUI);__reflect(MainTianShiTouXianBtn.prototype,"MainTianShiTouXianBtn"),window.MainTianShiTouXianBtn=MainTianShiTouXianBtn;var MainUIButton=function(t){function e(){var e=t.call(this)||this;return e.layer=LayerMgr.Main_Down,e.winType=WinType.NeverCloseWin,e.tempBoo=!1,e.skinName="MainUIButtonEUI",e.isLog=!1,e.initUI(),e.touchEnabled=!1,e.btns=[e.toggleBtnRole,e.toggleBtnBag,e.btnYB,e.toggleForging,e.btnSkill],e.btn_XLHB.redPoint.visible=!0,e.btn_chat.redPoint.visible=!0,e}return __extends(e,t),e.prototype.addDisplay=function(){this.addClickE(this.bagMaxIcon,this.onClick),this.addClickE(this.toggleBtnRole,this.onClick),this.addClickE(this.toggleBtnBag,this.onClick),this.addClickE(this.toggleForging,this.onClick),this.addClickE(this.btnYB,this.onClick),this.addClickE(this.btnSkill,this.onClick),this.addClickE(this.xlGroup,this.onClick),this.addClickE(this.btn_RedBao,this.onClick),this.addClickE(this.btn_Mail,this.onClick),this.addClickE(this.btn_chat,this.onClick),this.addClickE(this.btn_XLHB,this.onClick),this.addClickE(this,this.onItemClick),this.addLsn(LogicSys.ins().patchLevelChange,this.updataExp),this.addLsn(LogicSys.ins().patchExpChange,this.updataExp),this.addLsn(LogicSys.ins().patchActorInfo,this.updataExp),this.addLsn(RpSys.ins().patchRp,this.updateRp),this.addLsn(BagSys.ins().patchBagVolChange,this.updateBagMaxIcon),this.addLsn(RechargeActSys.ins().patchRedbaoInfo,this.updateRedBag),this.addLsn(RechargeActSys.ins().patchRedbaoRobResult,this.updateRedBag),this.addLsn(RechargeActSys.ins().patchRedbaoRobInfo,this.updateRedBag),this.addLsn(RechargeActSys.ins().patchRedbaoInfo2,this.updateRedBag),this.addLsn(JobSys.ins().patchQiJizl,this.updateRedBag),this.addLsn(LogicSys.ins().patchEnterMap,this.patchEnterMap),this.addLsn(WinMgr.ins().patchTopWinOpen,this.patchTopWinOpen),this.addLsn(WinMgr.ins().patchTopWinClose,this.patchTopWinClose),this.addLsn(MailSys.ins().patchMailData,this.updateMail),this.addLsn(XianLuSys.ins().updateXianyuanHBInfo,this.updateXLHB),this.addLsn(XianLuSys.ins().openXianyuanHBInfo,this.updateXLHB),this.addLsn(ChatSys.ins().updateXianluChat,this.updateXianluChat),this.addLsn(ShouHuNewSys.ins().patchShenmoHuanHua,this.updateState),this.addLsn(ShouHuNewSys.ins().patchShenmoBianShen,this.tweenBianshen),this.addLsn(JobSys.ins().patchSysOpen,this.onNewSysOpen),this.addLsn(AIRole.startAtk,this.autoBs),this.addLsn(ChatWin.showChatWin,this.updateChatWin),this.updateRp(),this.updateBagMaxIcon(),this.updateRedBag(),this.updateMail(),this.mainTianShiTouXianBtn.open(),GFunc.zoom(this.bagMaxIcon,1,1.2,0,500),this.addDisplayActRp(this.toggleBtnRole,RoleWin),this.addDisplayActRp(this.toggleForging,ForgeWin),this.eAuto.selected=!0,this.updateChatWin(),this.updateXianluChat(!1),this.updateXLHB(),this.updateState()
},e.prototype.updateXLHB=function(){WinMgr.ins().hasTopWinNotClose()?this.groupXLHB.visible=!1:this.groupXLHB.visible=XianLuSys.ins().hadHongBao},e.prototype.updateXianluChat=function(t){WinMgr.ins().hasTopWinNotClose()?this.groupChat.visible=!1:(isShowWin(ChatWin)?this.groupChat.visible=!1:this.groupChat.visible=t,this.tempBoo=t)},e.prototype.updateChatWin=function(){this.chatBg.visible=isShowWin(ChatWin)},e.prototype.autoBs=function(t){var e=LogicSys.ins().centerEntity;t==e.handle&&this.canBS&&this.eAuto.selected&&e.AI.canBianshen()&&(this.canBS=!1,ShouHuNewSys.ins().sendShenmoBianShen())},e.prototype.onNewSysOpen=function(t){218==t&&this.updateState()},e.prototype.updateState=function(){var t=!ShouHuNewSys.ins().canBianshen();if(t)return void(this.currentState="noXL");this.currentState="normal";var e=ShouHuNewSys.ins().shenmoModel.useId;if(e>0){var i=Cfg.getConfig(ShenmoHuanhuaBaseConfig,e);this.xlHead="res/monhead/smhead"+i.id+".png"}else this.xlHead="";this.tweenBianshen()},e.prototype.tweenBianshen=function(){var t=this,e=ShouHuNewSys.ins(),i=e.shenmoModel.useId,n=e.bianshenDurationTime,a=e.bianshenCdTime;if(i){var o=Cfg.getConfig(ShenmoHuanhuaBaseConfig,i).cd;if(egret.Tween.removeTweens(this.eMc),this.canBS=!1,a)return void egret.Tween.get(this.eMc).to({drawRect:0},a).wait(50).call(this.tweenBianshen,this);o*=1e3;var s=(o-n)/o;0>s||(this.eMc.drawRect=s,egret.Tween.get(this.eMc).to({drawRect:1},o*(1-s)).call(function(){t.canBS=!0}))}},e.prototype.onItemClick=function(t){var e=t.target;if(e&&e instanceof eui.Button){var i=RuleIconMgr.ins().getRule(e);i&&i.tapExecute()}},e.prototype.patchEnterMap=function(){this.updateRedBag(),this.updateMail(),this.updateXianluChat(this.tempBoo),this.updateXLHB()},e.prototype.patchTopWinOpen=function(){this.updateRedBag(),this.updateMail(),this.updateXianluChat(this.tempBoo),this.updateXLHB()},e.prototype.patchTopWinClose=function(){this.updateRedBag(),this.updateMail(),this.updateXianluChat(this.tempBoo),this.updateXLHB()},e.prototype.updateRedBag=function(){this.redBaoGroup.visible=!1,WinMgr.ins().hasTopWinNotClose()?(this.btn_RedBao.visible=!1,Timer.ins().remove(this.onMoveShake,this)):(this.btn_RedBao.visible=!1,Timer.ins()["do"](2e3,2e3,0,this.onMoveShake,this))},e.prototype.onMoveShake=function(){egret.Tween.removeTweens(this.btn_RedBao);var t=egret.Tween.get(this.btn_RedBao);t.to({rotation:-30},100,egret.Ease.cubicIn).to({rotation:30},200,egret.Ease.cubicIn).to({rotation:0},100,egret.Ease.cubicIn)},e.prototype.updateMail=function(){var t=MailSys.ins().getMailByReceive2().length;WinMgr.ins().hasTopWinNotClose()?(this.groupMail.visible=!1,Timer.ins().remove(this.onMailMoveShake,this)):(this.groupMail.visible=t>0&&GFunc.isSysOpen(100),Timer.ins()["do"](2e3,2e3,0,this.onMailMoveShake,this)),this.lbMailCouont.text=t>99?"N":t.toString()},e.prototype.onMailMoveShake=function(){DisUtil.shakeIt(this.groupMail,5,100)},e.prototype.updateRp=function(t){void 0===t&&(t=null),(!t||t.check(RoleWin))&&(this.toggleBtnRole.redPoint.visible=RpSys.ins().getData(RoleWin)),(!t||t.check(ShouHuWin))&&(this.btnYB.redPoint.visible=RpSys.ins().getData(ShouHuWin)),(!t||t.check(BagWin))&&(this.toggleBtnBag.redPoint.visible=RpSys.ins().getData(BagWin)),(!t||t.check(ForgeWin))&&(this.toggleForging.redPoint.visible=RpSys.ins().getData(ForgeWin)),(!t||t.check(JobWin))&&(this.mainTianShiTouXianBtn.redPoint.visible=RpSys.ins().getData(JobWin)),(!t||t.check(SkillWin))&&(this.btnSkill.redPoint.visible=RpSys.ins().getData(SkillWin))},e.prototype.updateNpcRed=function(){},e.prototype.updateBagMaxIcon=function(){var t=0==BagSys.ins().getSurplusCount();this.bagMaxIcon.visible!=t&&(this.bagMaxIcon.visible=t)},e.prototype.updataExp=function(){var t=this;egret.Tween.removeTweens(this.progressBarExp);var e=egret.Tween.get(this.progressBarExp);if(Actor.ins().totalexp>this.progressBarExp.maximum){var i=egret.Tween.get(this.progressBarExp);i.to({value:this.progressBarExp.maximum},250).call(function(){var e=egret.Tween.get(t.progressBarExp);t.progressBarExp.maximum=Actor.ins().totalexp,t.progressBarExp.value=0,e.to({value:Actor.ins().exp},150)})}else this.progressBarExp.maximum=Actor.ins().totalexp,e.to({value:Actor.ins().exp},150);this.updateBagMaxIcon(),this.updateNpcRed()},e.prototype.onClick=function(t){switch(t.currentTarget){case this.btn_XLHB:XianLuSys.ins().sendOpenHongbao();break;case this.btn_chat:this.tempBoo=!1,this.updateXianluChat(this.tempBoo),openWin(ChatWin,4);break;case this.xlGroup:ShouHuNewSys.ins().sendShenmoBianShen();break;case this.btnSkill:openWin(SkillWin);break;case this.btn_Mail:openWin(MailWin);break;case this.btn_RedBao:openWin(RedBaoWin);break;case this.toggleBtnRole:this.openWin(RoleWin);break;case this.bagMaxIcon:case this.toggleBtnBag:this.openWin(BagWin);break;case this.btnYB:openWin(ShouHuWin);break;case this.toggleForging:this.openWin(ForgeWin)}},e.prototype.openWin=function(t){for(var e=[],i=1;i<arguments.length;i++)e[i-1]=arguments[i];isShowWin(t)?closeWin(t):openWin.apply(void 0,[t].concat(e))},e.prototype.getToggleBtn=function(t){return this.btns[t]},e.prototype.getBagBtn=function(){return this.toggleBtnBag},e.prototype.getForgeBtn=function(){return this.toggleForging},e.prototype.getRoleBtn=function(){return this.toggleBtnRole},e.prototype.getBtnTianShiTouXian=function(){return this.mainTianShiTouXianBtn},e.prototype.getBtnSkill=function(){return this.btnSkill},e.prototype.getBtnYB=function(){return this.btnYB},e.NAV_ROLE=0,e.NAV_BAG=1,e.NAV_TASK=2,e.NAV_FORGE=3,e.NAV_NPC=4,e.NAV_SHENMO=5,__decorate([callDelay(50)],e.prototype,"updateChatWin",null),e}(BaseWinSingle);__reflect(MainUIButton.prototype,"MainUIButton"),window.MainUIButton=MainUIButton;var MainUIMapFuben=function(t){function e(){var e=t.call(this)||this;return e.initUI(),e}return __extends(e,t),e.prototype.initUI=function(){this.skinName="mainUI_LeftTopSkin1",this.showFbCurrencyStatistics([0,0]),this.groupExp.visible=!1},e.prototype.open=function(){t.prototype.open.call(this),this.addLsn(LogicSys.ins().patchEnterMap,this.updataMapName),this.addLsn(FbSys.ins().patchUpdateFbTime,this.updataMapName),this.addLsn(FbSys.ins().patchFbCurrency,this.showFbCurrencyStatistics),this.addLsn(FbSys.ins().patchUpdateFbTime,this.showFbCurrencyStatistics),this.updataMapName()},e.prototype.close=function(){t.prototype.close.call(this),Timer.ins().removeAll(this)},e.prototype.updataMapName=function(){FbSys.ins().commonEndTick>0&&Timer.ins()["do"](0,1e3,0,this.SweepCountDown,this,TimerType.LAST)},e.prototype.showFbCurrencyStatistics=function(t){if(FbSys.ins().commonEndTick>0){var e=Cfg.getConfig(FubenConfig,FbSys.ins().fbId).group;if(FbSys.ins().isShowFuBenCurrency(e)){var i=FbSys.ins().fubenCurrency;this.helpTxt.text=Lang.fb_str28+FbSys.ins().getFubenCurrency(e),this.countBmp.text=i.toFixed(0),this.currentState="h1"}else this.currentState="h2"}else this.currentState="h3"},e.prototype.SweepCountDown=function(t){this.bmpTime.text=FbSys.ins().surplusTime+"s"},e}(BasePanel);__reflect(MainUIMapFuben.prototype,"MainUIMapFuben"),window.MainUIMapFuben=MainUIMapFuben;var MainUIMapItem=function(t){function e(){var e=t.call(this)||this;return e.skinName="MainUIMapItemEUI",e.mcCircleMask=new MaskSector,e.mcCircleMask.setParam(32,120,50,0),e.mcCircleMask.x=65,e.mcCircleMask.y=56,e.groupMap.addChild(e.mcCircleMask),e.beimc=new MC,e.beimc.x=19,e.beimc.y=15,e.groupMap.addChild(e.beimc),e.cacheAsBitmap=!0,e}return __extends(e,t),e.prototype.open=function(){this.addLsn(LogicSys.ins().patchEnterMap,this.updataMapName),this.addLsn(FbSys.ins().patchGuaJiChallenge,this.updataMapName),this.addLsn(FbSys.ins().patchGuaJiHelp,this.updataMapName),this.addLsn(LogicSys.ins().patchEnterMap,this.QieHuanMapIcon),this.addClickE(this.btnCity,this.onClick),this.QieHuanMapIcon(),this.updataMapName(),this.updateState()},e.prototype.close=function(){t.prototype.close.call(this),Timer.ins().removeAll(this)},e.prototype.updateState=function(){var t=Cfg.getConfig(FubenConfig,FbSys.ins().fbId),e=Cfg.getConfig(FubenGroupConfig,t.group);e.type==GroupType.xianshi?t.group<100?this.currentState="main":this.currentState="fuben":this.currentState="nonamefuben"},e.prototype.QieHuanMapIcon=function(){GFunc.isInCity()?this.btnCity.icon="mianui_zycs_zhandou":this.btnCity.icon="mianui_zycs_huicheng"},e.prototype.onClick=function(t){switch(t.currentTarget){case this.btnCity:GFunc.enterCityOrGuaJi()}},e.prototype.updataMapName=function(){var t=Cfg.getConfig(GuajiFubenConfig,FbSys.ins().guajiData.challengeGuanId);this.labelExp.text=GFunc.overLength(t.exp,t.exp<1e8?1:2)+"/"+Lang.common_xs,this.labelGold.text=GFunc.overLength(t.gold,t.gold<1e8?1:2)+"/"+Lang.common_xs,this.labelMapName1.text=Cfg.getFubenName(FbSys.ins().fbId),this.updateState()},e.prototype.getMapBtn=function(){return this.imgOpenMap},e.prototype.getbtnCity=function(){return this.btnCity},e}(BasePanel);__reflect(MainUIMapItem.prototype,"MainUIMapItem"),window.MainUIMapItem=MainUIMapItem;var MainUITipsPower=function(t){function e(){var e=t.call(this)||this;return e.winType=WinType.NeverCloseWin,e.layer=LayerMgr.Popup,e.hig=40,e.attrs=[],e.curIndex=0,e.totalIndex=0,e.isTeenRun=!1,e.skinName="MainUITipsPowerEUI",e.touchChildren=!1,e.touchEnabled=!1,e}return __extends(e,t),e.prototype.open=function(e){e&&(t.prototype.open.call(this),this.attrs=this.attrs.length<=1?e:this.attrs.concat(e),this.uodatePanel())},e.prototype.uodatePanel=function(){this.totalIndex=this.attrs.length,1==this.totalIndex&&(this.isTeenRun=!1,this.curIndex=0,this.groupAttr.y=963,this.groupAttr.alpha=1,this.groupAttr.removeChildren(),egret.Tween.removeTweens(this.groupAttr)),this.curIndex<this.totalIndex&&!this.isTeenRun&&(this.isTeenRun=!0,this.itemTween())},e.prototype.itemTween=function(){var t=this;if(this.curIndex<this.totalIndex){var e=this.crateItem(this.curIndex,this.attrs[this.curIndex]),i=0==this.curIndex?200:100;0==this.curIndex?300:150;this.curIndex+=1;var n=egret.Tween.get(e);n.to({alpha:1,x:0},i).call(function(){1==t.totalIndex||t.curIndex==t.totalIndex?t.groupTweenEnd():t.groupTweenUp()},this)}},e.prototype.groupTweenUp=function(){if(this.curIndex>0){var t=egret.Tween.get(this.groupAttr),e=this.groupAttr.y-this.hig,i=0==this.curIndex?300:150;t.wait(i).to({y:e},150).call(this.groupTweenEnd,this)}},e.prototype.groupTweenEnd=function(){if(this.curIndex<this.totalIndex)this.itemTween();else{var t=egret.Tween.get(this.groupAttr),i=this.groupAttr.y-this.hig;t.wait(300).to({y:i,alpha:0},300,egret.Ease.cubicIn).call(function(){closeWin(e)},this)}},e.prototype.crateItem=function(t,e){var i=new MainUITipsPowerItem;return this.groupAttr.addChild(i),i.setData(e),i.alpha=0,i.x=280,i.y=t*this.hig,i},e}(BaseWinSingle);__reflect(MainUITipsPower.prototype,"MainUITipsPower"),window.MainUITipsPower=MainUITipsPower;var MainUITipsPower2=function(t){function e(){var e=t.call(this)||this;return e.winType=WinType.NeverCloseWin,e.layer=LayerMgr.Popup,e.itemsAll=[],e.items1=[],e.items2=[],e.attrs=[],e.hig=40,e.curIndex=0,e.totalIndex=0,e.skinName="MainUITipsPowerEUI",e.touchChildren=!1,e.touchEnabled=!1,e}return __extends(e,t),e.prototype.open=function(e){t.prototype.open.call(this),this.attrs=this.attrs.concat(e),this.updatePanel()},e.prototype.addAttrData=function(t){this.attrs.length-this.curIndex-1>4&&this.attrs.splice(this.curIndex+2,6),this.attrs=this.attrs.concat(t),this.totalIndex=this.attrs.length},e.prototype.updatePanel=function(){this.totalIndex=this.attrs.length,Timer.ins()["do"](0,500,0,this.itemTween,this)},e.prototype.itemTween=function(){var t=this;if(this.curIndex<this.totalIndex){var e=this.crateItem(this.curIndex,this.attrs[this.curIndex]),i=egret.Tween.get(e);i.to({alpha:1,x:0},150).call(function(){t.groupAttr.addChild(e),e.y=t.curIndex*t.hig,t.itemTweenEnd2(e),t.items2.push(t.items1.shift()),t.curIndex+=1},this),this.curIndex>0&&this.groupTweenUp()}},e.prototype.groupTweenUp=function(){var t=egret.Tween.get(this.groupAttr),e=this.groupAttr.y-this.hig;t.to({y:e},150)},e.prototype.itemTweenEnd2=function(t){var i=this,n=egret.Tween.get(t),a=t.y-1.5*this.hig;n.wait(900).to({y:a,alpha:0},300,egret.Ease.cubicIn).call(function(){t.index>=i.totalIndex-1?closeWin(e):i.itemsAll.push(i.items2.shift())},this)},e.prototype.crateItem=function(t,e){var i=this.itemsAll.shift()||new MainUITipsPowerItem;return this.group.addChild(i),i.setData(e),i.alpha=0,i.x=280,i.y=963,i.index=t,this.items1.push(i),i},e}(BaseWinSingle);__reflect(MainUITipsPower2.prototype,"MainUITipsPower2"),window.MainUITipsPower2=MainUITipsPower2;var MainUITipsPowerItem=function(t){function e(){var e=t.call(this)||this;return e.data=null,e.index=0,e.skinName="MainUITipsPowerItemEUI",e}return __extends(e,t),e.prototype.setData=function(t){this.data=t,this.arr=AttrData.parse([t],{fm:"%k +%v",fix:function(t,e,i){return t.replace(i+"",i.toFixed(0))}}).join().split(" ")},e}(BaseItemRender);__reflect(MainUITipsPowerItem.prototype,"MainUITipsPowerItem"),window.MainUITipsPowerItem=MainUITipsPowerItem;var MainUITipsPowerItem2=function(t){function e(){var e=t.call(this)||this;return e.data=null,e.index=0,e._isRemoveTweening=!1,e._isAddTimer=!1,e.skinName="MainUITipsPowerItemEUI",e._isRemoveTweening=!1,e._isAddTimer=!1,e}return __extends(e,t),e.prototype.setData=function(t){this.group.x=0,this.data=t,this.arr=AttrData.parse([t],{fm:"%k +%v",fix:function(t,e,i){return t.replace(i+"",i.toFixed(0))}}).join().split(" "),this.addTimer()},e.prototype.addTimer=function(){0==this._isAddTimer&&(this._isAddTimer=!0,this._isRemoveTweening=!1,Timer.ins()["do"](739,1,1,this.tweenToDisappear,this))},e.prototype.tweenToDisappear=function(){0==this._isRemoveTweening&&(this._isRemoveTweening=!0,egret.Tween.removeTweens(this.group),egret.Tween.get(this.group).to({x:-this.width},200).call(this.removeFromParent,this))},e.prototype.removeFromParent=function(){Timer.ins().remove(this.tweenToDisappear,this),DisUtil.remove(this)},e.prototype.reset=function(){this._isAddTimer=!1,this._isRemoveTweening=!1,this.group.x=0,this.arr.length=0},e}(BaseItemRender);__reflect(MainUITipsPowerItem2.prototype,"MainUITipsPowerItem2",["IObjectPool"]),window.MainUITipsPowerItem2=MainUITipsPowerItem2;var MainWin=function(t){function e(){var e=t.call(this)||this;return e.isShowVip=!1,e.destroyTime=DateUtil.SECOND_PER_WEEK,e.isLog=!1,e.skinName="MainWinEUI",e.layer=LayerMgr.Main_Down1,e}return __extends(e,t),e.prototype.skinComplete=function(){this.mainMap=new MainMap,this.group.addChild(this.mainMap),this.isShowVip=!LogicSys.ins().isFirstRegister,this.mcVip.visible=this.mcSVip.visible=!1},e.prototype.open=function(){t.prototype.open.call(this),this.isShow()||(this.btnRecharge.visible=this.btnGoldRecharge.visible=this.btnJinZuanRecharge.visible=this.btnRecharge1.visible=!urlParam.isShenhe,this.addClickE(this.btnMail,this.onClick),this.addClickE(this.btnClose,this.onClick),this.addClickE(this.imgVipBg,this.onClick),this.addClickE(this.imgSVipBg,this.onClick),this.addClickE(this.imageRole,this.onClick),this.addClickE(this.btnBuff,this.onClick),this.addClickE(this.imgDiamon,this.onClick),this.addClickE(this.btnRecharge,this.onClick),this.addClickE(this.btnRecharge1,this.onClick),this.addClickE(this.groupJinzuan,this.onClick),this.addClickE(this.groupGold,this.onClick),this.addClickE(this.groupYb,this.onClick),this.addClickE(this.btnShop,this.onClick),this.addClickE(this.btnXianlu,this.onClick),this.addLsn(LogicSys.ins().patchAllSysInit,this.onAllSysinit),this.addLsn(LogicSys.ins().patchFbInfo,this.updataPower),this.addLsn(LogicSys.ins().patchPowerChange,this.updataPower),this.addLsn(RpSys.ins().patchRp,this.updateRp),this.addLsn(VipSys.ins().patchSvipData,this.updateVipData),this.addLsn(VipSys.ins().patchVipUpdate,this.updateVipData),this.addLsn(VipSys.ins().patchVipFlyEnd,this.updateVipFlyEnd),this.addLsn(LogicSys.ins().patchEnterMap,this.updateMap),this.addLsn(FuLiSys.ins().patchDailyOnlineAward,this.updateComDailyOnline),this.addLsn(FuLiSys.ins().patchDailyOnlineData,this.updateComDailyOnline),this.addLsn(JobSys.ins().patchSysOpen,this.updateComDailyOnline),this.addLsn(FbSys.ins().patchGuaJiChallenge,this.updateGuanQia),this.addLsn(FbSys.ins().patchGuaJiBossShow,this.updateGuanQiaBoss),this.addLsn(LogicSys.ins().patchCurrency,this.updateCurrency),this.addLsn(LogicSys.ins().patchLevelChange,this.updateLv),this.addLsn(JobSys.ins().patchZS,this.updateLv),this.setHead(),this.com_ext.open(),this.com_Chat.open(),this.mainMap.open(),this.mainUIMapItem.open(),this.btnGuaji.open(),this.updateRp(),this.updateVipData(),this.onAllSysinit(),this.updateMap())},e.prototype.close=function(){t.prototype.close.call(this),this.btnGuaji.close(),this.com_ext.close(),this.comDailyOnline.close(),GFunc.isShowExtActIcon=this.com_ext.getIsShowBtn()},e.prototype.updateTime=function(e){void 0===e&&(e=0),t.prototype.updateTime.call(this,e),this.mainMap&&this.mainMap.updateTime(e)},e.prototype.onAllSysinit=function(){this.updataPower(),this.updataView(),this.updateVipData(),this.updateLv(),this.updateComDailyOnline()},e.prototype.updateComDailyOnline=function(t){if(void 0===t&&(t=270),270==t){var e=FuLiSys.ins().dailyOnlineData;if(GFunc.isSysOpen(270)&&e.isBefore3Day())if(e.isBefore1Day()||!e.hasGetAllAward()){this.comDailyOnline.open();var i=new eui.HorizontalLayout;i.gap=22,this.groupSingleAct.layout=i}else{this.comDailyOnline.close();var i=new eui.HorizontalLayout;i.gap=0,this.groupSingleAct.layout=i}else{this.comDailyOnline.close();var i=new eui.HorizontalLayout;i.gap=0,this.groupSingleAct.layout=i}}},e.prototype.updateGuanQiaBoss=function(){this.com_ext.updateGuanQiaBoss(),this.updateGuanQia()},e.prototype.updateMap=function(){this.updataMapName(),this.updateGuanQiaBoss()},e.prototype.updataMapName=function(){this.iniMapName(),this.updateActBtn()},e.prototype.iniMapName=function(){var t=FbSys.ins().fbId,e=Cfg.getConfig(FubenConfig,t),i=Cfg.getConfig(FubenGroupConfig,e.group);this.com_Chat.visible=1==i.showchat,this.headGroup.visible=1==i.type;var n=getWin(MainUIButton);n&&(n.visible=1==i.showdownbtn),this.com_Task.visible=1==i.showtask,this.btnClose.visible=1==i.quitfuben,this.com_ext.setMiBtn(1==i.showmiddlebtn),this.groupSingleAct.visible=1==i.singleAct,this.com_ext.visible=1==i.isActIcon;var a=GFunc.isInGuaJiFb();this.comDailyOnline.visible=a||GFunc.isInCity(),RuleIconMgr.ins().updateMC(),this.updateGuanQia()},e.prototype.updateActBtn=function(){this.com_ext.showQieHuan(GFunc.isShowExtActIcon)},e.prototype.updateGuanQia=function(){this.btnGuaji.visible=GFunc.isInGuaJiFb()&&FbSys.ins().guajiData.guanId>=Cfg.getGuajiConstConfig().isShow&&!FbSys.ins().guajiData.isGuanQia},e.prototype.setHead=function(){this.imageRole.source=ResMgr.getHeadIcon(Actor.ins().sex)},e.prototype.updataPower=function(){this.bmpNumberPower.text=Actor.ins().power.toFixed(0)},e.prototype.updateVipFlyEnd=function(){this.isShowVip=!0,this.updateVipData()},e.prototype.updateVipData=function(){this.groupAllVip.visible=this.isShowVip&&!urlParam.isShenhe,this.bitVipLv.text=Actor.ins().vipLv.toString(),this.bitSVipLv.text=Actor.ins().sVipLv.toString();var t=Actor.ins().sVipLv>0;this.groupSVip.visible=t,this.groupVip.visible=!t},e.prototype.updateRp=function(t){(!t||t.check(MailWin))&&(this.btnMail.redPoint.visible=RpSys.ins().getData(MailWin)),(!t||t.check(VipWin))&&(this.imageRedPointSVip.visible=RpSys.ins().getData(VipWin),this.mcVip.visible=RpSys.ins().getData(VipWin),this.mcSVip.visible=RpSys.ins().getData(VipWin)),(!t||t.check(ShopWin))&&(this.btnShop.redPoint.visible=RpSys.ins().getData(ShopWin)),(!t||t.check(SettingAndChatWin))&&(this.imageRedRole.visible=RpSys.ins().getData(SettingAndChatWin)),(!t||t.check(XianLuWin))&&(this.btnXianlu.redPoint.visible=RpSys.ins().getData(XianLuWin))},e.prototype.updataView=function(){this.updateCurrency(),this.updateLv()},e.prototype.updateCurrency=function(t){t?t.type==CurType.JinZuan?this.lbJinZuan.text=GFunc.overLength(Actor.ins().getCurrency(CurType.JinZuan)):t.type==CurType.gold?this.labelGoldTxt.text=GFunc.overLength(Actor.ins().getCurrency(CurType.gold)):t.type==CurType.yb&&(this.labelMesonry.text=GFunc.overLength(Actor.ins().getCurrency(CurType.yb))):(this.lbJinZuan.text=GFunc.overLength(Actor.ins().getCurrency(CurType.JinZuan)),this.labelGoldTxt.text=GFunc.overLength(Actor.ins().getCurrency(CurType.gold)),this.labelMesonry.text=GFunc.overLength(Actor.ins().getCurrency(CurType.yb)))},e.prototype.updateLv=function(){this.lbLevel.textFlow=addColorTF(GFunc.GetLvStrByLv(Actor.ins().level)),this.lbZsLevel.text=GFunc.getZSNameBydb(Actor.ins().zsId)},e.prototype.onClick=function(t){switch(t.currentTarget){case this.btnShop:openWin(ShopWin);break;case this.groupJinzuan:if(urlParam.isShenhe)return;openWin(JinZuanWin);break;case this.groupGold:if(urlParam.isShenhe)return;GFunc.checkCurrency(CurType.gold,Actor.ins().getCurrency(CurType.gold)+1);break;case this.btnRecharge1:case this.btnRecharge:case this.groupYb:if(urlParam.isShenhe)return;openWin(RechargeActSys.ins().firstRechargeData.isRecharge()?RechargePowerSys.ins().zhaoCaiLongData.noBuy()&&GFunc.isSysOpen(205)?RechargeTipsWin:RechargeWin2:FirstRechargeBuyWin);break;case this.btnClose:var e="",i=Cfg.getConfig(FubenConfig,FbSys.ins().fbId);switch(i.group){case FbGroup.GuildWarPVE:case FbGroup.GuildWarPVP:openWin(GuildWarReliveWin,3);break;default:e=i.group==FbGroup.Mine?Lang.fb_str287:i.group==FbGroup.MoLong&&0!=FbSys.ins().molongData.getState()?"退出副本将扣减次数，是否退出副本？":i.group==FbGroup.Brave?Lang.fb_str26+"\n"+Lang.fb_str360:Lang.fb_str26;var n=new PopupData(e);n.setFunction(this,function(){FbSys.ins().sendExitFb()}),openWin(CommonTipsWin,n)}break;case this.btnXianlu:openWin(XianLuWin);break;case this.btnMail:openWin(MailWin);break;case this.imgVipBg:openWin(VipWin);break;case this.imgSVipBg:openWin(VipWin,1);break;case this.imageRole:openWin(SettingAndChatWin);break;case this.btnBuff:openWin(BuffWin)}},e.prototype.playShenmoHanZhao=function(t){t.skillConfig.hanzhao>0},e.prototype.getMowangBtn=function(){return this.btnGuaji},e.prototype.setShowMainUI=function(t){this.com_Chat.visible=t},e.prototype.getBossBtn=function(){return this.com_ext.getBossBtn()},e.prototype.getBtnDailyWanFa=function(){return this.com_ext.getBtnDailyWanFa()},e.prototype.getFuBenBtn=function(){return this.com_ext.getBtn_Npc()},e.prototype.getXunBaoBtn=function(){return this.com_ext.getXunBaoBtn()},e.prototype.getBtn_JJ=function(){return this.com_ext.getBtn_JJ()},e.prototype.getBtn_QuYu=function(){return this.com_ext.getBtn_QuYu()},e.prototype.com_Name_btnRechargeMesonry=function(){return this.imgDiamon},e.prototype.getXueseFbGrowBtn=function(){return this.mainMap.getXueseFbGrowBtn()},e.prototype.getEmoFbGrowBtn=function(){return this.mainMap.getEmoFbGrowBtn()},e.prototype.updateMianMap=function(){this.mainMap.updateMap()},e.prototype.com_ext_closeRemind=function(){this.com_ext.closeRemind()},e.prototype.getCom_TaskGroupdesc=function(){return this.com_Task.getGroup1()},e.prototype.getExt_getSevenDayLoginBtnPoint=function(){return this.com_ext.getSevenDayLoginBtnPoint()},e.prototype.getGuaJiBtn=function(){return this.btnGuaji},e.prototype.getVipGroup=function(){return this.groupVip},e.prototype.addToParent=function(t){this.addToParentAt(t,0)},e}(BaseWinSingle);__reflect(MainWin.prototype,"MainWin"),window.MainWin=MainWin;var NewFunctionOpen=function(t){function e(){var e=t.call(this)||this;return e.layer=LayerMgr.Top,e.winType=WinType.NeverCloseWin,e.mc=new MC,e.limitId=0,e.flyFun=new Caller,e.closeTimes=20,e.skinName="NewFunctionOpenWinEUI",e.setSkinPart("comIcon",new NewFunctionOpenItem),e.mc.playFile(getEffName("xgnkq"),-1),e.mc.x=212,e.mc.y=160,e.groupMc.addChild(e.mc),e}return __extends(e,t),e.prototype.open=function(t,e,i){this.limitId=t,this.flyFun.obj=i,this.flyFun.func=e,this.addClickE(this.group,this.onTap);var n=Cfg.getConfig(LimitConfig,this.limitId);this.comIcon.imgOpenIcon.source=ResMgr.getQijiIconRes1(n.idx,!0),this.comIcon.imgOpenName.source=ResMgr.getQijiNameRes1(n.idx,!0)},e.prototype.updateTime=function(e){void 0===e&&(e=0),t.prototype.updateTime.call(this,e),this.closeTimes--,this.closeTimes<=0&&this.onTap()},e.prototype.onTap=function(){this.flyFun.param=[this.comIcon.localToGlobal()],this.flyFun.call(),closeWin(this)},e}(BaseWinSingle);__reflect(NewFunctionOpen.prototype,"NewFunctionOpen"),window.NewFunctionOpen=NewFunctionOpen;var NewFunctionOpenItem=function(t){function e(){var e=t.call(this)||this;return e.imgOpenName=new eui.Image,e.limitId=0,e.skinName="NewFunctionOpenItemEUI",e}return __extends(e,t),e}(BaseEUI);__reflect(NewFunctionOpenItem.prototype,"NewFunctionOpenItem"),window.NewFunctionOpenItem=NewFunctionOpenItem;var JinzhuanSecretConfig=function(){function t(){}return t}();__reflect(JinzhuanSecretConfig.prototype,"JinzhuanSecretConfig");var SvipLimitCom=function(t){function e(){var e=t.call(this)||this;return e.skinName="SvipLimitComEUI",e.addClickE(e,e.onClick),e}return __extends(e,t),e.prototype.addDisplay=function(){this.addLsn(VipSys.ins().patchSvipLimitGiftData,this.updatePanel),this.addLsn(VipSys.ins().patchSvipLimitGiftUpdate,this.updatePanel),this.updatePanel()},e.prototype.updatePanel=function(){var t=VipSys.ins().sVipLimitGiftData.isOpen();this.scaleX=this.scaleY=t?1:0,this.visible=t},e.prototype.onClick=function(t){openWin(SVipLimitGiftWin)},e}(BaseEUI);__reflect(SvipLimitCom.prototype,"SvipLimitCom"),window.SvipLimitCom=SvipLimitCom;var ActRedPoint=function(t){function e(){var e=t.call(this)||this;return e.redValue=1,e.skinName="ActRedPointEUI",Timer.ins()["do"](6e3,6e3,0,e.shakeIt,e),e}return __extends(e,t),e.prototype.shakeIt=function(){GFunc.zoom(this.redPoint,1,1.2,1,500)},e.prototype.setRedValue=function(t){this.redValue=t},e.prototype.close=function(){egret.Tween.removeTweens(this.redPoint)},e}(BaseEUI);__reflect(ActRedPoint.prototype,"ActRedPoint"),window.ActRedPoint=ActRedPoint;var ActRedPointGoto=function(t){function e(){var e=t.call(this)||this;return e.type=1,e.skinName="ActRedPointGotoEUI",e.lbDesc.textFlow=addColorTF(StrUtil.addUnderLine(Lang.act_str61)),e}return __extends(e,t),e.prototype.open=function(){t.prototype.open.call(this),this.addClickE(this,this.onclick)},e.prototype.close=function(){t.prototype.close.call(this)},e.prototype.setType=function(t){this.type=t,this.visible=this.type==GConst.rankType[Actor.ins().serverOpenDay]&&GFunc.isSysOpen(999)},e.prototype.onclick=function(t){openWin(ActOpenServerWin)},e}(BaseEUI);__reflect(ActRedPointGoto.prototype,"ActRedPointGoto"),window.ActRedPointGoto=ActRedPointGoto;var MainRoleItem=function(t){function e(){var e=t.call(this)||this;return e.state=-1,e.isDead=!1,e.job=JobConst.ZhanShi,e.bianshenId=0,e.sex=0,e.skinName="MainRoleItemEUI",e.hpShape=DisUtil.drawCirByAngle(e.hpShape,26,170,0,!0),e.hpShape.x=e.imgHp.x+24,e.hpShape.y=e.imgHp.y+2,e.grouphp.addChild(e.hpShape),e.imgHp.mask=e.hpShape,e.grouphp.visible=!1,e.grouphp.touchEnabled=!1,e.grouphp.touchChildren=!1,e.eff=new MC,e.eff.playFile(getEffName("actIconCircle"),-1),e.eff.touchEnabled=!1,e.eff.scaleX=e.eff.scaleY=.65,e.eff.x=32.5,e.eff.y=35,e.addChild(e.eff),e}return __extends(e,t),e.prototype.setBianshen=function(t){this.bianshenId=t,this.job=0},e.prototype.setJob=function(t){this.job=t,this.bianshenId=0},e.prototype.setSex=function(t){this.sex=t,this.updateHead()},e.prototype.setIsDead=function(t){this.isDead=t,this.updateHead()},e.prototype.updateHead=function(){var t;t=this.isDead?this.bianshenId>0?ResMgr.getMonsterHead("smhead"+this.bianshenId,!1):ResMgr.getHeadIconGray(this.sex):this.bianshenId>0?ResMgr.getMonsterHead("smhead"+this.bianshenId,!0):ResMgr.getHeadIcon(this.sex),this.imgIcon.source!=t&&(this.imgIcon.source=t),this.imgDIe.visible=this.isDead},e.prototype.setState=function(t){this.state!=t&&(t==e.STATE_0?(this.imgIcon.visible=!0,this.grouphp.visible=!0,this.imgHp1.visible=!0,this.imgLock.visible=!1,this.imgPlus.visible=!1,this.imgBg.source="mianui_zycs_touxiangkuang_02",this.eff.alpha=0):t==e.STATE_1?(this.imgIcon.visible=!1,this.imgPlus.visible=!0,this.imgLock.visible=!1,this.imgHp1.visible=!1,this.imgBg.source="mianui_zycs_touxiangkuang_02",this.eff.alpha=1):t==e.STATE_2&&(this.imgIcon.visible=!1,this.imgPlus.visible=!1,this.imgHp1.visible=!1,this.imgLock.visible=!0,this.eff.alpha=1))},e.prototype.updateHP=function(t,e){var i=t/e;this.imgHp.source="mianui_zycs_xuetiao02_02",this.hpShape=DisUtil.drawCirByAngle(this.hpShape,50,170,170-170*i,!0)},e.STATE_0=0,e.STATE_1=1,e.STATE_2=2,e}(BaseItemRender);__reflect(MainRoleItem.prototype,"MainRoleItem"),window.MainRoleItem=MainRoleItem;var ActCSKRule=function(t){function e(e){var i=t.call(this,e)||this;return i.sysId=306,i}return __extends(e,t),e.prototype.updateSys=function(){if(t.prototype.updateSys.call(this),this.isShow){var e=ActSys.ins().getActDataById(ActId.ID_335);this.isShow=RechargeActSys.ins().firstRechargeData.isRecharge()&&e&&e.isSeeActivity()&&!e.isRewardALL()}},e.prototype.getEffName=function(){return"actIconCircle"},e.prototype.updateRedPoint=function(e){if(void 0===e&&(e=null),t.prototype.updateRedPoint.call(this,e),!e||e.check(ActCSKWin)){var i=RpSys.ins().getData(ExtCom,ActCSKWin);this.setRedPoint(i)}},e.prototype.tapExecute=function(){t.prototype.tapExecute.call(this),openWin(ActCSKWin)},e}(RuleIconBase);__reflect(ActCSKRule.prototype,"ActCSKRule"),window.ActCSKRule=ActCSKRule;var ActHFSYRule=function(t){function e(e){var i=t.call(this,e)||this;return i.sysId=333,i}return __extends(e,t),e.prototype.updateSys=function(){t.prototype.updateSys.call(this),this.isShow&&(this.isShow=ActSys.ins().getBtnConfigs(ActOnPlace.ActHFSY).length>0)},e.prototype.updateRedPoint=function(e){if(void 0===e&&(e=null),t.prototype.updateRedPoint.call(this,e),!e||e.check(ActHFSYWin)){var i=RpSys.ins().getData(ExtCom,ActHFSYWin);this.setRedPoint(i)}},e.prototype.getEffName=function(){return"actIconCircle"},e.prototype.tapExecute=function(){t.prototype.tapExecute.call(this),openWin(ActHFSYWin)},e}(RuleIconBase);__reflect(ActHFSYRule.prototype,"ActHFSYRule");var Activity12IconRule=function(t){function e(e){var i=t.call(this,e)||this;return i.sysId=45,i}return __extends(e,t),e.prototype.updateSys=function(){t.prototype.updateSys.call(this),this.isShow&&(this.isShow=ActSys.ins().getBtnConfigs(ActOnPlace.ACT12).length>0)},e.prototype.getEffName=function(){return"actIconCircle"},e.prototype.updateRedPoint=function(t){if(void 0===t&&(t=null),!t||t.check(ActPlace12Win)){var e=RpSys.ins().getData(ExtCom,ActPlace12Win);this.setRedPoint(e)}},e.prototype.tapExecute=function(){t.prototype.tapExecute.call(this),openWin(ActPlace12Win)},e}(RuleIconBase);__reflect(Activity12IconRule.prototype,"Activity12IconRule"),window.Activity12IconRule=Activity12IconRule;var Activity15IconRule=function(t){function e(e){var i=t.call(this,e)||this;return i.sysId=45,i}return __extends(e,t),e.prototype.updateSys=function(){t.prototype.updateSys.call(this),this.isShow&&(this.isShow=ActSys.ins().getBtnConfigs(ActOnPlace.Actqingming).length>0)},e.prototype.getEffName=function(){return"actIconCircle"},e.prototype.updateRedPoint=function(t){if(void 0===t&&(t=null),!t||t.check(ActPlace15Win)){var e=RpSys.ins().getData(ExtCom,ActPlace15Win);this.setRedPoint(e)}},e.prototype.tapExecute=function(){t.prototype.tapExecute.call(this),openWin(ActPlace15Win)},e}(RuleIconBase);__reflect(Activity15IconRule.prototype,"Activity15IconRule"),window.Activity15IconRule=Activity15IconRule;var Activity21IconRule=function(t){function e(e){var i=t.call(this,e)||this;return i.sysId=45,i}return __extends(e,t),e.prototype.updateSys=function(){t.prototype.updateSys.call(this),this.isShow&&(this.isShow=ActSys.ins().getBtnConfigs(ActOnPlace.ACT21).length>0)},e.prototype.getEffName=function(){return"actIconCircle"},e.prototype.updateRedPoint=function(t){if(void 0===t&&(t=null),!t||t.check(ActPlace21Win)){var e=RpSys.ins().getData(ExtCom,ActPlace21Win);this.setRedPoint(e)}},e.prototype.tapExecute=function(){t.prototype.tapExecute.call(this),openWin(ActPlace21Win)},e}(RuleIconBase);__reflect(Activity21IconRule.prototype,"Activity21IconRule"),window.Activity21IconRule=Activity21IconRule;
var Activity23IconRule=function(t){function e(e){var i=t.call(this,e)||this;return i.sysId=361,i}return __extends(e,t),e.prototype.updateSys=function(){t.prototype.updateSys.call(this),this.isShow&&(this.isShow=GFunc.isSysOpen(this.sysId)&&0==ActSys.ins().zqFisrtRechargeRewardState()&&ActSys.ins().getBtnConfigs(ActOnPlace.zqFisrtRecharge).length>0)},e.prototype.updateRedPoint=function(e){if(void 0===e&&(e=null),t.prototype.updateRedPoint.call(this,e),!e||e.check(Act23_4Win2)){var i=RpSys.ins().getData(ExtCom,Act23_4Win2);this.setRedPoint(i)}},e.prototype.isShowEff=function(){return!1},e.prototype.getEffName=function(){return"actIconCircle"},e.prototype.tapExecute=function(){t.prototype.tapExecute.call(this),openWin(Act23_4Win2)},e}(RuleIconBase);__reflect(Activity23IconRule.prototype,"Activity23IconRule");var Activity24IconRule=function(t){function e(e){var i=t.call(this,e)||this;return i.sysId=45,i}return __extends(e,t),e.prototype.updateSys=function(){t.prototype.updateSys.call(this),this.isShow&&(this.isShow=ActSys.ins().getBtnConfigs(ActOnPlace.ACT24).length>0)},e.prototype.getEffName=function(){return"actIconCircle"},e.prototype.updateRedPoint=function(t){if(void 0===t&&(t=null),!t||t.check(ActPlace24Win)){var e=RpSys.ins().getData(ExtCom,ActPlace24Win);this.setRedPoint(e)}},e.prototype.tapExecute=function(){t.prototype.tapExecute.call(this),openWin(ActPlace24Win)},e}(RuleIconBase);__reflect(Activity24IconRule.prototype,"Activity24IconRule"),window.Activity24IconRule=Activity24IconRule;var ActivityHefuIconRule=function(t){function e(e){var i=t.call(this,e)||this;return i.sysId=332,i}return __extends(e,t),e.prototype.getEffName=function(){return"actIconCircle"},e.prototype.updateSys=function(){t.prototype.updateSys.call(this),this.isShow&&(this.isShow=ActSys.ins().getBtnConfigs(ActOnPlace.ActHefu).length>0)},e.prototype.updateRedPoint=function(e){if(void 0===e&&(e=null),t.prototype.updateRedPoint.call(this,e),!e||e.check(ActHeFuWin)){var i=RpSys.ins().getData(ExtCom,ActHeFuWin);this.setRedPoint(i)}},e.prototype.tapExecute=function(){t.prototype.tapExecute.call(this),openWin(ActHeFuWin)},e}(RuleIconBase);__reflect(ActivityHefuIconRule.prototype,"ActivityHefuIconRule"),window.ActivityHefuIconRule=ActivityHefuIconRule;var ActivityIconRule=function(t){function e(e){var i=t.call(this,e)||this;return i.sysId=45,i}return __extends(e,t),e.prototype.updateSys=function(){t.prototype.updateSys.call(this),this.isShow&&(this.isShow=ActSys.ins().getBtnConfigs(ActOnPlace.huodong).length>0)},e.prototype.getEffName=function(){return"actIconCircle"},e.prototype.updateRedPoint=function(e){if(void 0===e&&(e=null),t.prototype.updateRedPoint.call(this,e),!e||e.check(ActWin)){var i=RpSys.ins().getData(ExtCom,ActWin);this.setRedPoint(i)}},e.prototype.tapExecute=function(){t.prototype.tapExecute.call(this),openWin(ActWin)},e}(RuleIconBase);__reflect(ActivityIconRule.prototype,"ActivityIconRule"),window.ActivityIconRule=ActivityIconRule;var ActivityJueZhanIconRule=function(t){function e(e){var i=t.call(this,e)||this;return i.sysId=999,i}return __extends(e,t),e.prototype.getEffName=function(){return"actIconCircle"},e.prototype.updateRedPoint=function(e){if(void 0===e&&(e=null),t.prototype.updateRedPoint.call(this,e),!e||e.check(ActJueZhanWin)){var i=RpSys.ins().getData(ExtCom,ActJueZhanWin);this.setRedPoint(i)}},e.prototype.tapExecute=function(){t.prototype.tapExecute.call(this),openWin(ActJueZhanWin)},e}(RuleIconBase);__reflect(ActivityJueZhanIconRule.prototype,"ActivityJueZhanIconRule"),window.ActivityJueZhanIconRule=ActivityJueZhanIconRule;var ActKFLCIconRule=function(t){function e(e){var i=t.call(this,e)||this;return i.sysId=266,i}return __extends(e,t),e.prototype.updateSys=function(){t.prototype.updateSys.call(this),this.isShow&&(this.isShow=ActSys.ins().getBtnConfigs(ActOnPlace.KFLC).length>0)},e.prototype.getEffName=function(){return"actIconCircle"},e.prototype.updateRedPoint=function(e){void 0===e&&(e=null),t.prototype.updateRedPoint.call(this,e),(!e||e.check(ActKFLCWin))&&this.setRedPoint(RpSys.ins().getData(ExtCom,ActKFLCWin))},e.prototype.tapExecute=function(){t.prototype.tapExecute.call(this),openWin(ActKFLCWin)},e}(RuleIconBase);__reflect(ActKFLCIconRule.prototype,"ActKFLCIconRule"),window.ActKFLCIconRule=ActKFLCIconRule;var ActQMKHIconRule=function(t){function e(e){var i=t.call(this,e)||this;return i.sysId=303,i}return __extends(e,t),e.prototype.updateSys=function(){t.prototype.updateSys.call(this),this.isShow&&(this.isShow=ActSys.ins().getBtnConfigs(ActOnPlace.QMKH).length>0)},e.prototype.getEffName=function(){return"actIconCircle"},e.prototype.updateRedPoint=function(e){if(void 0===e&&(e=null),t.prototype.updateRedPoint.call(this,e),!e||e.check(ActQMKHWin)){var i=RpSys.ins().getData(ExtCom,ActQMKHWin);this.setRedPoint(i)}},e.prototype.tapExecute=function(){t.prototype.tapExecute.call(this),openWin(ActQMKHWin)},e}(RuleIconBase);__reflect(ActQMKHIconRule.prototype,"ActQMKHIconRule"),window.ActQMKHIconRule=ActQMKHIconRule;var ActYYHLIconRule=function(t){function e(e){var i=t.call(this,e)||this;return i.sysId=268,i}return __extends(e,t),e.prototype.updateSys=function(){t.prototype.updateSys.call(this),this.isShow&&(this.isShow=ActSys.ins().getBtnConfigs(ActOnPlace.YiYuanHaoLi).length>0)},e.prototype.getEffName=function(){return"actIconCircle"},e.prototype.updateRedPoint=function(e){if(void 0===e&&(e=null),t.prototype.updateRedPoint.call(this,e),!e||e.check(ActYiYuanHaoLiWin)){var i=RpSys.ins().getData(ExtCom,ActYiYuanHaoLiWin);this.setRedPoint(i)}},e.prototype.tapExecute=function(){t.prototype.tapExecute.call(this),openWin(ActYiYuanHaoLiWin)},e}(RuleIconBase);__reflect(ActYYHLIconRule.prototype,"ActYYHLIconRule"),window.ActYYHLIconRule=ActYYHLIconRule;var BBFLIconRule=function(t){function e(e){var i=t.call(this,e)||this;return i.sysId=304,i}return __extends(e,t),e.prototype.updateSys=function(){t.prototype.updateSys.call(this),this.isShow&&(this.isShow=!RechargeActSys.ins().bbflModel.isRewardAll)},e.prototype.getEffName=function(){return"actIconCircle"},e.prototype.updateRedPoint=function(e){if(void 0===e&&(e=null),t.prototype.updateRedPoint.call(this,e),!e||e.check(BBFLWin)){var i=RpSys.ins().getData(ExtCom,BBFLWin);this.setRedPoint(i)}},e.prototype.tapExecute=function(){t.prototype.tapExecute.call(this),openWin(BBFLWin)},e}(RuleIconBase);__reflect(BBFLIconRule.prototype,"BBFLIconRule"),window.BBFLIconRule=BBFLIconRule;var BtnoolbarRule=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.sysId=135,e}return __extends(e,t),e.prototype.updateSys=function(){this.isShow=GFunc.isSysOpen(this.sysId)},e}(RuleIconBase);__reflect(BtnoolbarRule.prototype,"BtnoolbarRule"),window.BtnoolbarRule=BtnoolbarRule;var ChengJiuIconRule=function(t){function e(e){var i=t.call(this,e)||this;return i.sysId=999,i}return __extends(e,t),e.prototype.updateRedPoint=function(e){if(void 0===e&&(e=null),t.prototype.updateRedPoint.call(this,e),!e||e.check(ChengJiuWin)){var i=RpSys.ins().getData(ExtCom,ChengJiuWin);this.setRedPoint(i)}},e.prototype.tapExecute=function(){t.prototype.tapExecute.call(this),openWin(ChengJiuWin,0)},e}(RuleIconBase);__reflect(ChengJiuIconRule.prototype,"ChengJiuIconRule"),window.ChengJiuIconRule=ChengJiuIconRule;var CollectionRule=function(t){function e(e){var i=t.call(this,e)||this;return i.sysId=344,i}return __extends(e,t),e.prototype.updateSys=function(){this.isShow=GFunc.isSysOpen(344)&&!WxYqhlSys.ins().isCollect},e.prototype.tapExecute=function(){t.prototype.tapExecute.call(this);var e=window.platform.optios();openWin(e&&e.isApplets?CollectionWin:CollectionWin2)},e}(RuleIconBase);__reflect(CollectionRule.prototype,"CollectionRule"),window.CollectionRule=CollectionRule;var BossIconRule=function(t){function e(e){var i=t.call(this,e)||this;return i.sysId=298,i}return __extends(e,t),e.prototype.updateRedPoint=function(e){if(void 0===e&&(e=null),t.prototype.updateRedPoint.call(this,e),!e||e.check(BossWin)){var i=RpSys.ins().getData(BossWin);this.setRedPoint(i)}},e.prototype.tapExecute=function(){t.prototype.tapExecute.call(this),openWin(BossWin)},e}(RuleIconBase);__reflect(BossIconRule.prototype,"BossIconRule"),window.BossIconRule=BossIconRule;var DailyWanFaRule=function(t){function e(e){var i=t.call(this,e)||this;return i.sysId=226,i}return __extends(e,t),e.prototype.isShowEff=function(){return!1},e.prototype.updateRedPoint=function(e){if(void 0===e&&(e=null),t.prototype.updateRedPoint.call(this,e),!e||e.check(LiLianWin)){var i=RpSys.ins().getData(LiLianWin);this.setRedPoint(i)}},e.prototype.tapExecute=function(){t.prototype.tapExecute.call(this),openWin(LiLianWin)},e}(RuleIconBase);__reflect(DailyWanFaRule.prototype,"DailyWanFaRule"),window.DailyWanFaRule=DailyWanFaRule;var FirstRechargeEveryDayIconRule=function(t){function e(e){var i=t.call(this,e)||this;return i.sysId=287,i}return __extends(e,t),e.prototype.updateSys=function(){this.isShow=RechargeActSys.ins().isFirstRechargeEveryDay()&&GFunc.isSysOpen(this.sysId);var t=RechargeActSys.ins().firstRechargeEveryDay,e=t.configs[0];this.tar.labelDisplay.text=e?e.name:"",this.setVisible(this.isShow)},e.prototype.getEffName=function(){return"actIconCircle"},e.prototype.updateRedPoint=function(e){if(void 0===e&&(e=null),t.prototype.updateRedPoint.call(this,e),!e||e.check(FirstRechargeVeryDayWin)){var i=RpSys.ins().getData(FirstRechargeVeryDayWin);this.setRedPoint(i)}},e.prototype.tapExecute=function(){t.prototype.tapExecute.call(this),openWin(FirstRechargeVeryDayWin)},e}(RuleIconBase);__reflect(FirstRechargeEveryDayIconRule.prototype,"FirstRechargeEveryDayIconRule"),window.FirstRechargeEveryDayIconRule=FirstRechargeEveryDayIconRule;var FirstRechargeIconRule=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.sysId=260,e}return __extends(e,t),e.prototype.updateSys=function(){this.isShow=GFunc.isSysOpen(260)&&(!RechargeActSys.ins().firstRechargeData.isRecharge()||RechargeActSys.ins().firstRechargeData.isReceivedAll())},e.prototype.getEffName=function(){return"actIconCircle"},e.prototype.updateRedPoint=function(e){if(void 0===e&&(e=null),t.prototype.updateRedPoint.call(this,e),!e||e.check(FirstRechargeBuyWin)){var i=RpSys.ins().getData(FirstRechargeBuyWin);this.setRedPoint(i)}},e.prototype.tapExecute=function(){t.prototype.tapExecute.call(this),openWin(FirstRechargeBuyWin)},e}(RuleIconBase);__reflect(FirstRechargeIconRule.prototype,"FirstRechargeIconRule"),window.FirstRechargeIconRule=FirstRechargeIconRule;var FirstRechargeTimerIconRule=function(t){function e(e){var i=t.call(this,e)||this;return i.sysId=260,i.effX=38,i.effY=38,i.timer=0,i.timer1=0,i}return __extends(e,t),e.prototype.updateSys=function(){this.isShow=GFunc.isSysOpen(260)&&!RechargeActSys.ins().firstRechargeData.isRecharge()&&RechargeActSys.ins().firstRechargeData.getFirstRechargeTimer()>0},e.prototype.getEffName=function(){return""},e.prototype.updateTime=function(){t.prototype.updateTime.call(this);var e=RechargeActSys.ins().firstRechargeData;this.timer=RechargeActSys.ins().firstRechargeData.getFirstRechargeTimer(),this.timer1=99;var i=this.tar;this.timer>0&&!e.isRecharge()?Timer.ins()["do"](0,33,33,this.onTimer,this,TimerType.LAST):(i.labelDisplay.text="",this.updateSys())},e.prototype.onTimer=function(){this.timer1=Math.abs(this.timer1-3);var t=getFormatTime(this.timer/1e3,"mm:ss")+("d"+(this.timer1<=9?"0"+this.timer1:this.timer1));t=t.replace(":","m"),this.tar.labelDisplay.text=t},e.prototype.updateRedPoint=function(e){if(void 0===e&&(e=null),t.prototype.updateRedPoint.call(this,e),!e||e.check(FirstRechargeBuyWin)){var i=RpSys.ins().getData(FirstRechargeBuyWin);this.setRedPoint(i)}},e.prototype.tapExecute=function(){t.prototype.tapExecute.call(this),openWin(FirstRechargeBuyWin)},e}(RuleIconBase);__reflect(FirstRechargeTimerIconRule.prototype,"FirstRechargeTimerIconRule"),window.FirstRechargeTimerIconRule=FirstRechargeTimerIconRule;var FuBenRule=function(t){function e(e){var i=t.call(this,e)||this;return i.sysId=297,i}return __extends(e,t),e.prototype.updateRedPoint=function(e){if(void 0===e&&(e=null),t.prototype.updateRedPoint.call(this,e),!e||e.check(FuBenWin)){var i=RpSys.ins().getData(ExtCom,FuBenWin);this.setRedPoint(i)}},e.prototype.tapExecute=function(){t.prototype.tapExecute.call(this),openWin(FuBenWin)},e}(RuleIconBase);__reflect(FuBenRule.prototype,"FuBenRule"),window.FuBenRule=FuBenRule;var FuLiIconRule=function(t){function e(e){var i=t.call(this,e)||this;return i.sysId=43,i}return __extends(e,t),e.prototype.updateRedPoint=function(e){if(void 0===e&&(e=null),t.prototype.updateRedPoint.call(this,e),!e||e.check(FuliWin)){var i=RpSys.ins().getData(ExtCom,FuliWin);this.setRedPoint(i)}},e.prototype.tapExecute=function(){t.prototype.tapExecute.call(this),openWin(FuliWin)},e}(RuleIconBase);__reflect(FuLiIconRule.prototype,"FuLiIconRule"),window.FuLiIconRule=FuLiIconRule;var FxylRule=function(t){function e(e){var i=t.call(this,e)||this;return i.sysId=9,i}return __extends(e,t),e.prototype.updateRedPoint=function(e){if(void 0===e&&(e=null),t.prototype.updateRedPoint.call(this,e),!e||e.check(ShareWin)){var i=RpSys.ins().getData(ExtCom,ShareWin);this.setRedPoint(i)}},e.prototype.updateSys=function(){return Actor.ins().isLocation?void(this.isShow=!0):void(this.isShow=GFunc.isSysOpen(9)&&PfActivitySys.ins().shareInfo.isShow&&PfActivitySys.ins().hasShareGetAwardCount())},e.prototype.tapExecute=function(){t.prototype.tapExecute.call(this),openWin(ShareWin)},e}(RuleIconBase);__reflect(FxylRule.prototype,"FxylRule"),window.FxylRule=FxylRule;var GuildBattleRule=function(t){function e(e){var i=t.call(this,e)||this;return i.sysId=334,i.openWinClass=GuildBattleMainWin,i.paramsRedPoint=[],i.effX=-7,i.effY=-29,i}return __extends(e,t),e.prototype.updateSys=function(){var t=!1;t=t||GuildBattleSys.ins().getGuildBattleState()==GuildBattleState.lottery,t=t||GuildBattleSys.ins().getGuildBattleState()==GuildBattleState.prelimReady,t=t||GuildBattleSys.ins().getGuildBattleState()==GuildBattleState.prelim,t=t||GuildBattleSys.ins().getGuildBattleState()==GuildBattleState.finalsReady,t=t||GuildBattleSys.ins().getGuildBattleState()==GuildBattleState.finals,this.isShow=GFunc.isSysOpen(this.sysId)&&t},e.prototype.getEffName=function(){return"circle"},e.prototype.isShowEff=function(){return t.prototype.isShowEff.call(this)},e.prototype.getOpenSysTick=function(){return GuildBattleSys.ins().lotteryTick},e.prototype.setIsShow=function(t){},e.prototype.updateTime=function(){t.prototype.updateTime.call(this),this.setTime(getFormatTime(GuildBattleSys.ins().getGuildBattleTime(),"mm分ss秒"))},e.prototype.tapExecute=function(){this.isClick=!0,this.updateEff(),GuildSys.ins().isAddGuild()?openWin(GuildBattleMainWin,GuildBattleMainWin.getTabIndexbyPanel(GuildBattleMainPanel)):openWin(GuildApplyWin)},e}(RuleIconBase);__reflect(GuildBattleRule.prototype,"GuildBattleRule");var GuildIconRule=function(t){function e(e){var i=t.call(this,e)||this;return i.sysId=255,i}return __extends(e,t),e.prototype.updateRedPoint=function(e){if(void 0===e&&(e=null),t.prototype.updateRedPoint.call(this,e),!e||e.check(GuildMapWin)){var i=RpSys.ins().getData(GuildMapWin);this.setRedPoint(i)}},e.prototype.tapExecute=function(){t.prototype.tapExecute.call(this),openWin(GuildNavWin)},e}(RuleIconBase);__reflect(GuildIconRule.prototype,"GuildIconRule"),window.GuildIconRule=GuildIconRule;var GuZhanRule=function(t){function e(e){var i=t.call(this,e)||this;return i.sysId=359,i}return __extends(e,t),e.prototype.getEffName=function(){return"actIconCircle"},e.prototype.isShowEff=function(){return t.prototype.isShowEff.call(this)&&FbSys.ins().guZhanMode.isOpen},e.prototype.getOpenSysTick=function(){var t=0,e=FbSys.ins().guZhanMode;return t=FbSys.ins().guZhanMode.isOpen?e.getEndTimer():e.getStarTimer()},e.prototype.updateTime=function(){t.prototype.updateTime.call(this);var e=FbSys.ins().guZhanMode;FbSys.ins().guZhanMode.isOpen?this.setTime(Lang.fb_str317):this.setTime(getFormatTime(e.getStarTimer()/1e3,"hh:mm")+Lang.common_str43)},e.prototype.tapExecute=function(){t.prototype.tapExecute.call(this),openWin(JJCWin,JJCWin.getTabIndexbyPanel(JJCManyPanel),JJCManyPanel.getTabIndexbyPanel(GuZhanPanel))},e}(RuleIconBaseHuchi);__reflect(GuZhanRule.prototype,"GuZhanRule"),window.GuZhanRule=GuZhanRule;var GzhlRule=function(t){function e(e){var i=t.call(this,e)||this;return i.sysId=8,i}return __extends(e,t),e.prototype.updateSys=function(){this.isShow=GFunc.isSysOpen(8)&&PfActivitySys.ins().isShowFocus()&&!PfActivitySys.ins().isGetFocusAward},e.prototype.updateRedPoint=function(e){if(void 0===e&&(e=null),t.prototype.updateRedPoint.call(this,e),!e||e.check(FocusWin)){var i=RpSys.ins().getData(ExtCom,FocusWin);this.setRedPoint(i)}},e.prototype.tapExecute=function(){t.prototype.tapExecute.call(this),openWin(FocusWin)},e}(RuleIconBase);__reflect(GzhlRule.prototype,"GzhlRule"),window.GzhlRule=GzhlRule;var HwbzRule=function(t){function e(e){var i=t.call(this,e)||this;return i.sysId=318,i}return __extends(e,t),e.prototype.getEffName=function(){return"circle"},e.prototype.isShowEff=function(){return GFunc.isSysOpen(this.sysId)&&2==DartSys.ins().openState&&this.isShow&&t.prototype.isShowEff.call(this)},e.prototype.getOpenSysTick=function(){var t=DartSys.ins();if(0==t.openState)return 0;var e=t.openTime;return e[2]?e[2]:0},e.prototype.updateTime=function(){t.prototype.updateTime.call(this);var e=DartSys.ins();if(0!=e.openState)if(2==e.openState)this.setTime(Lang.fb_str317);else{var i=e.openTime,n=i[0]+":"+i[1]+Lang.common_str43;this.setTime(n)}},e.prototype.tapExecute=function(){this.update(),openWin(JJCWin,JJCWin.getTabIndexbyPanel(DartPanel))},e}(RuleIconBaseHuchi);__reflect(HwbzRule.prototype,"HwbzRule"),window.HwbzRule=HwbzRule;var JinZuanIconRule=function(t){function e(e){var i=t.call(this,e)||this;return i.sysId=2,i}return __extends(e,t),e.prototype.updateRedPoint=function(e){if(void 0===e&&(e=null),t.prototype.updateRedPoint.call(this,e),!e||e.check(JinZuanWin)){var i=RpSys.ins().getData(ExtCom,JinZuanWin);this.setRedPoint(i)}},e.prototype.tapExecute=function(){t.prototype.tapExecute.call(this),openWin(JinZuanWin)},e}(RuleIconBase);__reflect(JinZuanIconRule.prototype,"JinZuanIconRule"),window.JinZuanIconRule=JinZuanIconRule;var JJCRule=function(t){function e(e){var i=t.call(this,e)||this;return i.sysId=299,i}return __extends(e,t),e.prototype.updateRedPoint=function(e){if(void 0===e&&(e=null),t.prototype.updateRedPoint.call(this,e),!e||e.check(JJCWin)){var i=RpSys.ins().getData(JJCWin);this.setRedPoint(i)}},e.prototype.tapExecute=function(){t.prototype.tapExecute.call(this),openWin(JJCWin)},e}(RuleIconBase);__reflect(JJCRule.prototype,"JJCRule"),window.JJCRule=JJCRule;var KeFuRule=function(t){function e(e){var i=t.call(this,e)||this;return i.sysId=96,i}return __extends(e,t),e.prototype.updateSys=function(){this.isShow=GFunc.isSysOpen(96)&&PfActivitySys.ins().isShowkeFu},e.prototype.tapExecute=function(){openWin(KefuWin)},e}(RuleIconBase);__reflect(KeFuRule.prototype,"KeFuRule"),window.KeFuRule=KeFuRule;var LoginAwardIconRule=function(t){function e(e){var i=t.call(this,e)||this;return i.sysId=267,i}return __extends(e,t),e.prototype.updateSys=function(){var t=ActSys.ins().getActDataById(ActId.ID_99800),e=t.isSeeActivity();this.isShow=GFunc.isSysOpen(267)&&e},e.prototype.updateRedPoint=function(e){if(void 0===e&&(e=null),t.prototype.updateRedPoint.call(this,e),!e||e.check(LoginAwardWin)){var i=RpSys.ins().getData(ExtCom,LoginAwardWin);this.setRedPoint(i)}},e.prototype.tapExecute=function(){t.prototype.tapExecute.call(this),openWin(LoginAwardWin)},e}(RuleIconBase);__reflect(LoginAwardIconRule.prototype,"LoginAwardIconRule"),window.LoginAwardIconRule=LoginAwardIconRule;var LuoLanRule=function(t){function e(e){var i=t.call(this,e)||this;return i.sysId=255,i}return __extends(e,t),e.prototype.getEffName=function(){return"circle"},e.prototype.isShowEff=function(){return GuildWarSys.ins().getModel().isWatStart&&GFunc.isSysOpen(this.sysId)&&this.isShow},e.prototype.getOpenSysTick=function(){var t=0,e=GuildWarSys.ins().getModel();return t=e.isWatStart?e.startTime+e.acEndTime:e.startTime+e.acEndTime},e.prototype.updateTime=function(){t.prototype.updateTime.call(this);GuildWarSys.ins().getStartTimeTick();GuildWarSys.ins().getModel().isWatStart?this.setTime(Lang.fb_str317):this.setTime(GuildWarSys.ins().getModel().getOpenDescHours())},e.prototype.tapExecute=function(){t.prototype.tapExecute.call(this),openWin(GuildWarMainWin)},e}(RuleIconBaseHuchi);__reflect(LuoLanRule.prototype,"LuoLanRule"),window.LuoLanRule=LuoLanRule;var QiYueRule=function(t){function e(e){var i=t.call(this,e)||this;return i.sysId=1,i}return __extends(e,t),e.prototype.updateSys=function(){t.prototype.updateSys.call(this),this.isShow&&(this.isShow=!TaskSys.ins().agreementData.isFinish())},e.prototype.isShowEff=function(){return!1},e.prototype.updateRedPoint=function(e){if(void 0===e&&(e=null),t.prototype.updateRedPoint.call(this,e),!e||e.check(QiYuePanel)){var i=RpSys.ins().getData(ExtCom,QiYueWin,QiYuePanel);this.setRedPoint(i)}},e.prototype.tapExecute=function(){t.prototype.tapExecute.call(this),openWin(QiYueWin)},e}(RuleIconBase);__reflect(QiYueRule.prototype,"QiYueRule"),window.QiYueRule=QiYueRule;var QiYuRule=function(t){function e(e){var i=t.call(this,e)||this;return i.sysId=296,i}return __extends(e,t),e.prototype.updateRedPoint=function(e){if(void 0===e&&(e=null),t.prototype.updateRedPoint.call(this,e),!e||e.check(QiyuWin)){var i=RpSys.ins().getData(QiyuWin);this.setRedPoint(i)}},e.prototype.isShowEff=function(){return this.isShow},e.prototype.tapExecute=function(){t.prototype.tapExecute.call(this),openWin(QiyuWin)},e}(RuleIconBase);__reflect(QiYuRule.prototype,"QiYuRule"),window.QiYuRule=QiYuRule;var QmdbRule=function(t){function e(e){var i=t.call(this,e)||this;return i.sysId=345,i}return __extends(e,t),e.prototype.getEffName=function(){return"circle"},e.prototype.isShowEff=function(){return FbSys.ins().qmdbModel.canCaiji()&&this.isShow&&t.prototype.isShowEff.call(this)},e.prototype.getOpenSysTick=function(){var t=FbSys.ins().qmdbModel,e=t.getNextStartTime();if(!e)return 0;var i=new Date(Actor.ins().serverTime);return t.isOpen()?(i.setHours(e.endHour,e.endMinute,0,0),i.setTime(i.getTime()-1e3)):i.setHours(e.startHour,e.startMinute,0,0),i.getTime()},e.prototype.updateTime=function(){t.prototype.updateTime.call(this);var e=FbSys.ins().qmdbModel,i=e.getNextStartTime();if(i)if(e.isOpen())this.setTime(Lang.fb_str317);else{var n=i.startHour+":"+i.startMinute+Lang.common_str43;this.setTime(n)}},e.prototype.tapExecute=function(){t.prototype.tapExecute.call(this),openWin(QiyuWin,QiyuWin.getTabIndexbyPanel(QMDBPanel))},e}(RuleIconBaseHuchi);__reflect(QmdbRule.prototype,"QmdbRule"),window.QmdbRule=QmdbRule;var RankRule=function(t){function e(e){var i=t.call(this,e)||this;return i.sysId=29,i}return __extends(e,t),e.prototype.getEffName=function(){return"actIconCircle"},e.prototype.updateRedPoint=function(e){if(void 0===e&&(e=null),t.prototype.updateRedPoint.call(this,e),!e||e.check(RankWin)){var i=RpSys.ins().getData(RankWin,RankPanel);this.setRedPoint(i)}},e.prototype.tapExecute=function(){t.prototype.tapExecute.call(this),openWin(RankWin,0)},e}(RuleIconBase);__reflect(RankRule.prototype,"RankRule"),window.RankRule=RankRule;var RechargeYiYuanIconRule=function(t){function e(e){var i=t.call(this,e)||this;return i.sysId=11,i.effX=46,i.effY=50,i}return __extends(e,t),e.prototype.updateSys=function(){this.isShow=GFunc.isSysOpen(this.sysId)&&RechargeActSys.ins().rechargeYiYuanData.isOpen()},e.prototype.updateRedPoint=function(e){if(void 0===e&&(e=null),t.prototype.updateRedPoint.call(this,e),!e||e.check(RechargeYiYuanWin)){var i=RpSys.ins().getData(ExtCom,RechargeYiYuanWin);this.setRedPoint(i)}},e.prototype.updateTime=function(){t.prototype.updateTime.call(this);var e=RechargeActSys.ins().rechargeYiYuanData,i=e.getFirstRechargeTimer()/1e3,n="dd天hh小时mm分钟ss秒";n=i<DateUtil.SECOND_PER_HOUR?"mm分ss秒":i<DateUtil.SECOND_PER_DAY?"hh小时mm分":"dd天hh小时",this.setTime(""+addColor(getFormatTime(i,n),5767068))},e.prototype.tapExecute=function(){t.prototype.tapExecute.call(this),openWin(RechargeYiYuanWin)},e}(RuleIconBase);__reflect(RechargeYiYuanIconRule.prototype,"RechargeYiYuanIconRule"),window.RechargeYiYuanIconRule=RechargeYiYuanIconRule;var RedFortRule=function(t){function e(e){var i=t.call(this,e)||this;return i.sysId=254,i.time=600,i}return __extends(e,t),e.prototype.getEffName=function(){return"circle"},e.prototype.updateRedPoint=function(e){void 0===e&&(e=null),t.prototype.updateRedPoint.call(this,e),this.setRedPoint(!1)},e.prototype.isShowEff=function(){return!1},e.prototype.getOpenSysTick=function(){var t=0,e=FbSys.ins().redFort;return t=1==FbSys.ins().redFort.fbType?e.getEndTime():e.getStarTime()},e.prototype.updateTime=function(){t.prototype.updateTime.call(this),1==FbSys.ins().redFort.fbType?this.setTime(Lang.fb_str317):this.setTime(DateUtil.formatDayTime(FbSys.ins().redFort.getStarTime(),"hh:mm")+Lang.common_str43)},e.prototype.tapExecute=function(){t.prototype.tapExecute.call(this),openWin(JJCWin,JJCWin.getTabIndexbyPanel(JJCManyPanel),JJCManyPanel.getTabIndexbyPanel(RedFortPanel))},e}(RuleIconBaseHuchi);__reflect(RedFortRule.prototype,"RedFortRule"),window.RedFortRule=RedFortRule;var JinzhuanXunbaoConfig=function(){function t(){}return t}();__reflect(JinzhuanXunbaoConfig.prototype,"JinzhuanXunbaoConfig");var JinzhuanZhufuConfig=function(){function t(){}return t}();__reflect(JinzhuanZhufuConfig.prototype,"JinzhuanZhufuConfig");var ShengbeiRule=function(t){function e(e){var i=t.call(this,e)||this;return i.sysId=286,i}return __extends(e,t),e.prototype.updateSys=function(){this.isShow=GFunc.isSysOpen(this.sysId)&&!RechargePowerSys.ins().shengbeiData.isGet()&&RechargeActSys.ins().firstRechargeData.isRecharge()&&(RechargePowerSys.ins().zhaoCaiLongData.isAct()||RechargePowerSys.ins().xunZhangData.isAct())},e.prototype.updateRedPoint=function(e){if(void 0===e&&(e=null),t.prototype.updateRedPoint.call(this,e),!e||e.check(ShengbeiBuyWin)){var i=RpSys.ins().getData(ExtCom,ShengbeiBuyWin);this.setRedPoint(i)}},e.prototype.tapExecute=function(){t.prototype.tapExecute.call(this),openWin(ShengbeiBuyWin)},e}(RuleIconBase);__reflect(ShengbeiRule.prototype,"ShengbeiRule"),window.ShengbeiRule=ShengbeiRule;var ShopRule=function(t){function e(e){var i=t.call(this,e)||this;return i.sysId=291,i}return __extends(e,t),e.prototype.updateRedPoint=function(e){if(void 0===e&&(e=null),t.prototype.updateRedPoint.call(this,e),!e||e.check(ShopWin)){var i=RpSys.ins().getData(ExtCom,ShopWin);this.setRedPoint(i)}},e.prototype.tapExecute=function(){t.prototype.tapExecute.call(this),openWin(ShopWin)},e}(RuleIconBase);__reflect(ShopRule.prototype,"ShopRule"),window.ShopRule=ShopRule;var ShouquanRule=function(t){function e(e){return t.call(this,e)||this}return __extends(e,t),e.prototype.updateSys=function(){this.isShow=PfActivitySys.ins().isUserInfoBtn&&GFunc.isGuaJiFb()},e.prototype.tapExecute=function(){t.prototype.tapExecute.call(this),openWin(ShouquanBgTips)},e}(RuleIconBase);__reflect(ShouquanRule.prototype,"ShouquanRule"),window.ShouquanRule=ShouquanRule;var SmrzApiRule=function(t){function e(e){return t.call(this,e)||this}return __extends(e,t),e.prototype.updateSys=function(){this.isShow=PfActivitySys.ins().verifyApiInfo.ishow},e.prototype.tapExecute=function(){t.prototype.tapExecute.call(this),openWin(VerifyApiWin)},e}(RuleIconBase);__reflect(SmrzApiRule.prototype,"SmrzApiRule"),window.SmrzApiRule=SmrzApiRule;var SmrzRule=function(t){function e(e){var i=t.call(this,e)||this;return i.sysId=10,i}return __extends(e,t),e.prototype.isVerifyCallback=function(t){t&&(PfActivitySys.ins().sendRenZhengReward(),openWin(SmrzWin)),PfActivitySys.ins().patchRenZhengStatus(t?1:0)},e.prototype.updateSys=function(){this.isShow=GFunc.isSysOpen(10)&&PfActivitySys.ins().isShowRenZheng()&&!PfActivitySys.ins().isRenZhengReward},e.prototype.tapExecute=function(){t.prototype.tapExecute.call(this),Actor.ins().isLocation?(this.isVerifyCallback(!0),showtipsSuc("认证成功")):PfActivitySys.ins().renZhengData.callback(this.isVerifyCallback.bind(this))},e}(RuleIconBase);__reflect(SmrzRule.prototype,"SmrzRule"),window.SmrzRule=SmrzRule;var SuitIconRule=function(t){function e(e){var i=t.call(this,e)||this;return i.sysId=204,i}return __extends(e,t),e.prototype.updateSys=function(){this.isShow=GFunc.isSysOpen(204)},e.prototype.updateRedPoint=function(e){if(void 0===e&&(e=null),t.prototype.updateRedPoint.call(this,e),!e||e.check(SuitWin)){var i=RpSys.ins().getData(ExtCom,SuitWin);this.setRedPoint(i)}},e.prototype.tapExecute=function(){t.prototype.tapExecute.call(this),openWin(SuitWin)},e}(RuleIconBase);__reflect(SuitIconRule.prototype,"SuitIconRule"),window.SuitIconRule=SuitIconRule;var SVIPMSRule=function(t){function e(e){return t.call(this,e)||this}return __extends(e,t),e.prototype.updateSys=function(){this.isShow=Actor.ins().sVipLv>=2&&GFunc.isSysOpen(263)&&!RechargeActSys.ins().isSVIPMSGetAwardAll()&&RechargeActSys.ins().firstRechargeData.isRecharge()},e.prototype.updateRedPoint=function(e){if(void 0===e&&(e=null),t.prototype.updateRedPoint.call(this,e),!e||e.check(SVIPMSWin)){var i=RpSys.ins().getData(SVIPMSWin);this.setRedPoint(i)}},e.prototype.isShowEff=function(){return this.isShow&&RpSys.ins().getData(SVIPMSWin)},e.prototype.tapExecute=function(){t.prototype.tapExecute.call(this),openWin(SVIPMSWin)},e}(RuleIconBase);__reflect(SVIPMSRule.prototype,"SVIPMSRule"),window.SVIPMSRule=SVIPMSRule;var TaQingFirstRechargeRule=function(t){function e(e){var i=t.call(this,e)||this;return i.sysId=319,i}return __extends(e,t),e.prototype.updateSys=function(){t.prototype.updateSys.call(this),this.isShow&&(this.isShow=GFunc.isSysOpen(this.sysId)&&0==ActSys.ins().taqingFisrtRechargeRewardState()&&ActSys.ins().getBtnConfigs(ActOnPlace.TaQingActFisrtRecharge).length>0)},e.prototype.updateRedPoint=function(e){if(void 0===e&&(e=null),t.prototype.updateRedPoint.call(this,e),!e||e.check(Act23_4Win)){var i=RpSys.ins().getData(ExtCom,Act23_4Win);this.setRedPoint(i)}},e.prototype.isShowEff=function(){return!1},e.prototype.getEffName=function(){return"actIconCircle"},e.prototype.tapExecute=function(){t.prototype.tapExecute.call(this),openWin(Act23_4Win)},e}(RuleIconBase);__reflect(TaQingFirstRechargeRule.prototype,"TaQingFirstRechargeRule");var TclyRule=function(t){function e(e){var i=t.call(this,e)||this;return i.type=RuleIconType.normal,i}return __extends(e,t),e.prototype.updateSys=function(){return GFunc.isSysOpen(352)?void(this.isShow=ActSys.ins().getBtnConfigs(ActOnPlace.TCLY).length>0):void(this.isShow=!1)},e.prototype.updateRedPoint=function(e){if(void 0===e&&(e=null),t.prototype.updateRedPoint.call(this,e),!e||e.check(TclyWin)){var i=RpSys.ins().getData(ExtCom,TclyWin);this.setRedPoint(i)}},e.prototype.updateTime=function(){t.prototype.updateTime.call(this);var e=ActSys.ins().getActDataById(2001);e&&this.setTime(e.getformatTime2())},e.prototype.isShowEff=function(){return this.isShow},e.prototype.tapExecute=function(){t.prototype.tapExecute.call(this),openWin(TclyWin)},e}(RuleIconBase);__reflect(TclyRule.prototype,"TclyRule"),window.TclyRule=TclyRule;var TSSZIconRule=function(t){function e(e){var i=t.call(this,e)||this;return i.sysId=12,i}return __extends(e,t),e.prototype.updateSys=function(){this.isShow=!1},e.prototype.updateRedPoint=function(e){if(void 0===e&&(e=null),t.prototype.updateRedPoint.call(this,e),!e||e.check(TSSZWin)){var i=RpSys.ins().getData(ExtCom,TSSZWin);this.setRedPoint(i)}},e.prototype.getEffName=function(){return"actIconCircle"},e.prototype.tapExecute=function(){t.prototype.tapExecute.call(this),openWin(TSSZWin)},e}(RuleIconBase);__reflect(TSSZIconRule.prototype,"TSSZIconRule"),window.TSSZIconRule=TSSZIconRule;var WxYqhlRule=function(t){function e(e){var i=t.call(this,e)||this;return i.sysId=343,i}return __extends(e,t),e.prototype.updateRedPoint=function(e){void 0===e&&(e=null),t.prototype.updateRedPoint.call(this,e),(!e||e.check(WxYqhlWin))&&this.setRedPoint(RpSys.ins().getData(WxYqhlWin))
},e.prototype.updateSys=function(){this.isShow=GFunc.isSysOpen(343)&&!WxYqhlSys.ins().isWxYqhlRewardAll()},e.prototype.tapExecute=function(){t.prototype.tapExecute.call(this),openWin(WxYqhlWin)},e}(RuleIconBase);__reflect(WxYqhlRule.prototype,"WxYqhlRule"),window.WxYqhlRule=WxYqhlRule;var XJHBRule=function(t){function e(e){var i=t.call(this,e)||this;return i.sysId=356,i.type=RuleIconType.normal,i}return __extends(e,t),e.prototype.updateSys=function(){this.isShow=VipSys.ins().xjhbData.isShowIcon()&&GFunc.isSysOpen(this.sysId)},e.prototype.getEffName=function(){return ComUtil.isXianYuApp?"xyhbicon":"hbicon"},e.prototype.updateRedPoint=function(t){if(void 0===t&&(t=null),!t||t.check(XJHBWin)){var e=RpSys.ins().getData(XJHBWin);this.setRedPoint(e)}},e.prototype.tapExecute=function(){t.prototype.tapExecute.call(this),openWin(XJHBWin)},e}(RuleIconBase);__reflect(XJHBRule.prototype,"XJHBRule"),window.XJHBRule=XJHBRule;var XunBaoRule=function(t){function e(e){var i=t.call(this,e)||this;return i.sysId=271,i}return __extends(e,t),e.prototype.updateSys=function(){this.isShow=GFunc.isSysOpen(271)},e.prototype.updateRedPoint=function(e){if(void 0===e&&(e=null),t.prototype.updateRedPoint.call(this,e),!e||e.check(XunBaoWin)){var i=RpSys.ins().getData(ExtCom,XunBaoWin);this.setRedPoint(i);var n=this.tar.imgFree;n&&(n.visible=XunBaoSys.ins().hasFreeCount())}},e.prototype.isShowEff=function(){return this.isShow&&RpSys.ins().getData(XunBaoWin)},e.prototype.tapExecute=function(){t.prototype.tapExecute.call(this),openWin(XunBaoWin)},e}(RuleIconBase);__reflect(XunBaoRule.prototype,"XunBaoRule"),window.XunBaoRule=XunBaoRule;var XunZhangRule=function(t){function e(e){var i=t.call(this,e)||this;return i.sysId=205,i}return __extends(e,t),e.prototype.updateSys=function(){this.isShow=GFunc.isSysOpen(231)&&!RechargePowerSys.ins().xunZhangData.isAct()&&RechargeActSys.ins().firstRechargeData.isRecharge()},e.prototype.updateRedPoint=function(e){if(void 0===e&&(e=null),t.prototype.updateRedPoint.call(this,e),!e||e.check(XunZhangBuyWin)){var i=RpSys.ins().getData(ExtCom,XunZhangBuyWin);this.setRedPoint(i)}},e.prototype.tapExecute=function(){t.prototype.tapExecute.call(this),openWin(XunZhangBuyWin)},e}(RuleIconBase);__reflect(XunZhangRule.prototype,"XunZhangRule"),window.XunZhangRule=XunZhangRule;var YdssRule=function(t){function e(e){var i=t.call(this,e)||this;return i.type=RuleIconType.normal,i}return __extends(e,t),e.prototype.updateSys=function(){this.isShow=XianLuSys.ins().ShowYdssRule()},e.prototype.updateRedPoint=function(e){if(void 0===e&&(e=null),t.prototype.updateRedPoint.call(this,e),!e||e.check(YdssWin)){var i=RpSys.ins().getData(ExtCom,YdssWin);this.setRedPoint(i)}},e.prototype.isShowEff=function(){return this.isShow},e.prototype.tapExecute=function(){t.prototype.tapExecute.call(this),openWin(YdssWin)},e}(RuleIconBase);__reflect(YdssRule.prototype,"YdssRule"),window.YdssRule=YdssRule;var YkRule=function(t){function e(e){var i=t.call(this,e)||this;return i.sysId=262,i}return __extends(e,t),e.prototype.updateRedPoint=function(e){if(void 0===e&&(e=null),t.prototype.updateRedPoint.call(this,e),!e||e.check(YKWin)){var i=RpSys.ins().getData(ExtCom,YKWin);this.setRedPoint(i)}},e.prototype.tapExecute=function(){t.prototype.tapExecute.call(this),openWin(YKWin,YKWin.getTabIndexbyPanel(MonthCardPanel))},e}(RuleIconBase);__reflect(YkRule.prototype,"YkRule"),window.YkRule=YkRule;var YYMSRule=function(t){function e(e){return t.call(this,e)||this}return __extends(e,t),e.prototype.updateSys=function(){this.isShow=GFunc.isSysOpen(263)&&!RechargeActSys.ins().isYYMSGetAwardAll()},e.prototype.updateRedPoint=function(e){if(void 0===e&&(e=null),t.prototype.updateRedPoint.call(this,e),!e||e.check(YYMSWin)){var i=RpSys.ins().getData(YYMSWin);this.setRedPoint(i)}},e.prototype.isShowEff=function(){return this.isShow&&RpSys.ins().getData(YYMSWin)},e.prototype.tapExecute=function(){t.prototype.tapExecute.call(this),openWin(YYMSWin)},e}(RuleIconBase);__reflect(YYMSRule.prototype,"YYMSRule"),window.YYMSRule=YYMSRule;var YZZHRule=function(t){function e(e){var i=t.call(this,e)||this;return i.sysId=315,i}return __extends(e,t),e.prototype.updateRedPoint=function(e){if(void 0===e&&(e=null),t.prototype.updateRedPoint.call(this,e),!e||e.check(YZZHWin)){var i=RpSys.ins().getData(YZZHWin);this.setRedPoint(i)}},e.prototype.isShowEff=function(){return this.isShow},e.prototype.tapExecute=function(){t.prototype.tapExecute.call(this),openWin(YZZHWin)},e}(RuleIconBase);__reflect(YZZHRule.prototype,"YZZHRule"),window.YZZHRule=YZZHRule;var ZeroBuyRule=function(t){function e(e){return t.call(this,e)||this}return __extends(e,t),e.prototype.updateSys=function(){this.isShow=GFunc.isSysOpen(3)&&!RechargeActSys.ins().isZeroAllGetAward()},e.prototype.updateRedPoint=function(e){if(void 0===e&&(e=null),t.prototype.updateRedPoint.call(this,e),!e||e.check(ZeroBuyWin)){var i=RpSys.ins().getData(ExtCom,ZeroBuyWin);this.setRedPoint(i)}},e.prototype.isShowEff=function(){return this.isShow&&RpSys.ins().getData(ExtCom,ZeroBuyWin)},e.prototype.tapExecute=function(){t.prototype.tapExecute.call(this),openWin(ZeroBuyWin)},e}(RuleIconBase);__reflect(ZeroBuyRule.prototype,"ZeroBuyRule"),window.ZeroBuyRule=ZeroBuyRule;var ZhaoCaiLongRule=function(t){function e(e){var i=t.call(this,e)||this;return i.sysId=205,i}return __extends(e,t),e.prototype.updateSys=function(){this.isShow=GFunc.isSysOpen(205)&&!RechargePowerSys.ins().zhaoCaiLongData.isAct()&&RechargeActSys.ins().firstRechargeData.isRecharge()},e.prototype.updateRedPoint=function(e){if(void 0===e&&(e=null),t.prototype.updateRedPoint.call(this,e),!e||e.check(ZhaoCaiLongBuyWin)){var i=RpSys.ins().getData(ExtCom,ZhaoCaiLongBuyWin);this.setRedPoint(i)}},e.prototype.tapExecute=function(){t.prototype.tapExecute.call(this),openWin(ZhaoCaiLongBuyWin)},e}(RuleIconBase);__reflect(ZhaoCaiLongRule.prototype,"ZhaoCaiLongRule"),window.ZhaoCaiLongRule=ZhaoCaiLongRule;var ZhuangShengIconRule=function(t){function e(e){var i=t.call(this,e)||this;return i.sysId=202,i.lastStatus=!1,i}return __extends(e,t),e.prototype.updateSys=function(){this.isShow=GFunc.isSysOpen(202)||GFunc.isSysOpen(999)},e.prototype.updateRedPoint=function(e){if(void 0===e&&(e=null),t.prototype.updateRedPoint.call(this,e),!e||e.check(JobWin)){var i=RpSys.ins().getData(ExtCom,JobWin);this.setRedPoint(i)}},e.prototype.tapExecute=function(){t.prototype.tapExecute.call(this),openWin(JobWin,0)},e}(RuleIconBase);__reflect(ZhuangShengIconRule.prototype,"ZhuangShengIconRule"),window.ZhuangShengIconRule=ZhuangShengIconRule;var ZhuanZhiRule=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.lastStatus=!1,e}return __extends(e,t),e.prototype.updateSys=function(){this.isShow=!1},e.prototype.updateRedPoint=function(e){if(void 0===e&&(e=null),t.prototype.updateRedPoint.call(this,e),!e||e.check(JobWin)){var i=RpSys.ins().getData(ExtCom,JobWin);this.setRedPoint(i)}},e.prototype.tapExecute=function(){t.prototype.tapExecute.call(this),openWin(JobWin,2)},e}(RuleIconBase);__reflect(ZhuanZhiRule.prototype,"ZhuanZhiRule"),window.ZhuanZhiRule=ZhuanZhiRule;var ZhuzaiRule=function(t){function e(e){var i=t.call(this,e)||this;return i.sysId=342,i}return __extends(e,t),e.prototype.updateRedPoint=function(e){void 0===e&&(e=null),t.prototype.updateRedPoint.call(this,e),this.setRedPoint(!1)},e.prototype.getEffName=function(){return"circle"},e.prototype.isShowEff=function(){return t.prototype.isShowEff.call(this)&&2==FbSys.ins().zhuzaiMode.refreshTickType},e.prototype.getOpenSysTick=function(){var t=0,e=FbSys.ins().zhuzaiMode;return t=1==e.refreshTickType?Actor.ins().serverTime+e.leftRefreshTime:Actor.ins().serverTime+e.leftRefreshTime},e.prototype.updateTime=function(){t.prototype.updateTime.call(this);var e=FbSys.ins().zhuzaiMode,i=e.leftRefreshTime,n=Math.ceil(i/1e3);if(2==e.refreshTickType){var a=Math.abs(Math.ceil(Math.abs(n)));this.setTime(getFormatTime(a,"mm：ss")+Lang.fb_str370)}else this.setTime(DateUtil.formatDayTime(e.getTimer(),"hh:mm")+Lang.common_str43)},e.prototype.tapExecute=function(){t.prototype.tapExecute.call(this),openWin(BossWin,2,0)},e}(RuleIconBaseHuchi);__reflect(ZhuzaiRule.prototype,"ZhuzaiRule"),window.ZhuzaiRule=ZhuzaiRule;var ZZTQRule=function(t){function e(e){var i=t.call(this,e)||this;return i.sysId=261,i}return __extends(e,t),e.prototype.updateSys=function(){var t=!0,e=ActSys.ins().getActDataById(ActId.ID_99500);e&&(t=!e.isAct()),this.isShow=t&&GFunc.isSysOpen(this.sysId)},e.prototype.updateRedPoint=function(e){if(void 0===e&&(e=null),t.prototype.updateRedPoint.call(this,e),!e||e.check(ZZTQWin)){var i=RpSys.ins().getData(ExtCom,ZZTQWin);this.setRedPoint(i)}},e.prototype.tapExecute=function(){t.prototype.tapExecute.call(this),openWin(ZZTQWin,ZZTQWin.getTabIndexbyPanel(ZZTQCardPanel))},e}(RuleIconBase);__reflect(ZZTQRule.prototype,"ZZTQRule"),window.ZZTQRule=ZZTQRule;var JjcConstConfig=function(){function t(){}return t}();__reflect(JjcConstConfig.prototype,"JjcConstConfig");var ZhuoYueWinItem=function(t){function e(){var e=t.call(this)||this;return e.skinName="ZhuoYueWinItemEUI",e}return __extends(e,t),e.prototype.dataChanged=function(){this.update()},e.prototype.update=function(){var t=this.data,e=Cfg.getConfig(LimitConfig,t.id);this.lbGuaQia.text="第"+t.guanqia+"层开启",this.lbName.text=""+e.sysName,this.imgIcon.source=ResMgr.getQijiIconRes1(t.id),this.updateState()},e.prototype.updateState=function(){var t=this.data,e=JobSys.ins().QijiReceiveAwardByIdx(t.idx),i=FbSys.ins().guajiData.guanId>=t.guanqia;this.imgYyq.visible=e,this.lbKlq.visible=i&&!e,this.lbWjh.visible=!i,this.imgBg.source=i?"zyzl_zycs_di1":"zyzl_zycs_di2"},e}(BaseItemRender);__reflect(ZhuoYueWinItem.prototype,"ZhuoYueWinItem"),window.ZhuoYueWinItem=ZhuoYueWinItem;var ShengbeiActWin=function(t){function e(){return t.call(this)||this}return __extends(e,t),e.prototype.initUI=function(){this.skinName="ShengbeiActWinEUI",this.addBg(),this.layer=LayerMgr.Popup,GFunc.playUIMovie("bxsb_zycs_sb1",0,0,this.groupShengbei,-1)},e}(BaseWin);__reflect(ShengbeiActWin.prototype,"ShengbeiActWin"),window.ShengbeiActWin=ShengbeiActWin;var ShengbeiBuyWin=function(t){function e(){var e=t.call(this)||this;return e.init(),e}return __extends(e,t),e.prototype.init=function(){this.skinName="ShengbeiBuyWinEUI",this.addBg(),this.layer=LayerMgr.Popup,this.btnReceive.redPoint.visible=!0,this.list.itemRenderer=ItemBaseReward,this.list.dataProvider=this.listArray=new eui.ArrayCollection,GFunc.playUIMovie("bxsb_zycs_sb1",100,170,this.entityGroup,-1)},e.prototype.open=function(){t.prototype.open.call(this),this.addLsn(RechargePowerSys.ins().patchShengbeiState,this.update),this.addClickE(this.btnBuy,this.onClick),this.addClickE(this.entityGroup,this.onClick),this.addClickE(this.btnReceive,this.onClick),this.addItemTapE(this.list,this.onlistItemClick,!0),this.update()},e.prototype.update=function(){var t=RechargePowerSys.ins().shengbeiData;this.currentState=0==t.state?"buy":"receive";var e=Cfg.getConfig(RechagePowerConstConfig);this.listArray.source=e.grailreward,this.lbDesc.text=e.grailmoshi+"仙券不计入每日获取上限",this.btnBuy.label="投资"+Cfg.getPayMoneyRMBByYb(e.grailbuycount)+"元"},e.prototype.onlistItemClick=function(t){var e=t.itemRenderer,i=e.data;i.id==Cfg.getConfig(RechagePowerConstConfig).grailitemid?(openWin(ShengbeiWin),closeWin(this),t.stopImmediatePropagation()):GFunc.openItemTips(i)},e.prototype.onClick=function(t){switch(t.currentTarget){case this.btnBuy:VipSys.ins().showReCharge(Cfg.getConfig(RechagePowerConstConfig).grailbuycount);break;case this.btnReceive:RechargePowerSys.ins().sendShengbeiGetAward(),closeWin(this);break;case this.entityGroup:openWin(ShengbeiWin),closeWin(this)}},e}(BaseWin);__reflect(ShengbeiBuyWin.prototype,"ShengbeiBuyWin"),window.ShengbeiBuyWin=ShengbeiBuyWin;var ShengbeiData=function(){function t(){this.state=0,this.stoneDatas=[]}return t.prototype.parser=function(t){this.state=t.readByte();for(var e=t.readByte(),i=0;e>i;i++){var n=this.stoneDatas[i]=new ShengbeiStoneData;n.id=i+1,n.level=t.readShort()}},t.prototype.parserState=function(t){this.state=t.readByte()},t.prototype.parserLv=function(t){var e=t.readByte(),i=t.readShort(),n=this.getStoneDataById(e);return n?n.level=i:console.log("圣杯id:"+e+"不存在"),n},t.prototype.getStoneDataById=function(t){return this.stoneDatas[t-1]},t.prototype.getStoneDataByIndex=function(t){return this.stoneDatas[t]},Object.defineProperty(t.prototype,"power",{get:function(){for(var t=0,e=0,i=0,n=this.stoneDatas;i<n.length;i++){var a=n[i];t+=a.power,e+=a.config.percent/1e4}var o=Cfg.getConfig(RechagePowerConstConfig).grailattr;t+=GFunc.getPower(o)*(1+e);var s=Cfg.getConfig(RechagePowerConstConfig).grailskill;return t+=Cfg.getConfig(SkillPassiveConfig,s,1).power},enumerable:!0,configurable:!0}),t.prototype.isBuy=function(){return this.state>0},t.prototype.isGet=function(){return 2==this.state},t.prototype.canGet=function(){return 1==this.state},t.prototype.getStoneAttrs=function(){for(var t=[],e=0,i=this.stoneDatas;e<i.length;e++){var n=i[e];t.push(n.config.attr[0])}return t},t}();__reflect(ShengbeiData.prototype,"ShengbeiData");var ShengbeiStoneData=function(){function t(){this.id=1,this.level=0}return Object.defineProperty(t.prototype,"config",{get:function(){return this._config&&this._config.level==this.level&&this.id==this._config.id||(this._config=Cfg.getConfig(GrailStoneConfig,this.id,this.level)),this._config},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"idConfig",{get:function(){return this._idConfig&&this.id==this._idConfig.id||(this._idConfig=Cfg.getConfig(GrailStoneIdConfig,this.id)),this._idConfig},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"index",{get:function(){return this.id-1},enumerable:!0,configurable:!0}),t.prototype.isAct=function(){return this.level>0},Object.defineProperty(t.prototype,"power",{get:function(){return GFunc.getPower(this.config.attr)+this.config.power},enumerable:!0,configurable:!0}),t.prototype.isMax=function(){return this.level>=Cfg.getShengbeiStoneMaxLv(this.id)},Object.defineProperty(t.prototype,"bagItemCount",{get:function(){var t=Cfg.getConfig(RechagePowerConstConfig).grailitems[this.index];return BagSys.ins().getItemCount(t)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"needCount",{get:function(){return 1},enumerable:!0,configurable:!0}),t.prototype.canUp=function(){return!this.isMax()&&this.bagItemCount>=this.needCount},t}();__reflect(ShengbeiStoneData.prototype,"ShengbeiStoneData");var ShengbeiTipsWin=function(t){function e(){return t.call(this)||this}return __extends(e,t),e.prototype.initUI=function(){this.skinName="ShengbeiTipsWinEUI",t.prototype.initUI.call(this),this.layer=LayerMgr.Popup,this.setSkinPart("itemIcon",new ItemBaseReward),this.listAttrShengbei.itemRenderer=ShengbeiTipsWinItemBei,this.listAttrShengbei.dataProvider=this.listAttrShengbeiArr=new eui.ArrayCollection,this.listAttrStone.dataProvider=this.listAttrStoneArr=new eui.ArrayCollection,this.listAttrStone.itemRenderer=ShengbeiTipsWinItemStone,this.addBg()},e.prototype.open=function(){t.prototype.open.call(this),this.update()},e.prototype.update=function(){var t=RechargePowerSys.ins().shengbeiData;this.labelName.text="六道神镜",this.itemIcon.data=GFunc.creatRewardDataById(Cfg.getConfig(RechagePowerConstConfig).grailitemid),this.bmpLabelPower.text=t.power.toFixed(0),this.listAttrShengbeiArr.source=Cfg.getConfig(RechagePowerConstConfig).grailattr,this.listAttrStoneArr.source=t.stoneDatas;var e=Cfg.getConfig(SkillPassiveConfig,Cfg.getConfig(RechagePowerConstConfig).grailskill,1);this.imgSkillIcon.source=ResMgr.getSkillPassivityItemName(e.id,!0),this.labelSkillName.text=e.name,this.labelSkillDesc.textFlow=StrUtil.toTF(e.skinname)},e}(BaseWinSingle);__reflect(ShengbeiTipsWin.prototype,"ShengbeiTipsWin"),window.ShengbeiTipsWin=ShengbeiTipsWin;var ShengbeiTipsWinItemBei=function(t){function e(){var e=t.call(this)||this;return e.skinName="ShengbeiTipsWinItemBeiEUI",e}return __extends(e,t),e.prototype.dataChanged=function(){var t=this.data;this.imgIcon.filters=RechargePowerSys.ins().shengbeiData.isBuy()?null:DisUtil.grayFilter();var e=AttrData.getFm(13486270,5949490,"","  +");this.labelAttr.textFlow=addColorTF(AttrData.parse([t],{fm:e}).join(""))},e}(BaseItemRender);__reflect(ShengbeiTipsWinItemBei.prototype,"ShengbeiTipsWinItemBei"),window.ShengbeiTipsWinItemBei=ShengbeiTipsWinItemBei;var ShengbeiTipsWinItemStone=function(t){function e(){var e=t.call(this)||this;return e.skinName="ShengbeiTipsWinItemStoneEUI",e}return __extends(e,t),e.prototype.dataChanged=function(){var t=this.data,e=Cfg.getConfig(RechagePowerConstConfig).grailitems[this.itemIndex];this.imgIcon.source=ResMgr.getItemIconMin(Cfg.getItemCfg(e).getIcon()),this.labelName.textFlow=addColorTF(t.idConfig.name+addColor("Lv."+t.level,5949490));var i=t.idConfig.desc1.replace("{a}",AttrData.getAttrValue(t.config.attr[0]));this.labelAttr.textFlow=StrUtil.toTF(i)},e}(BaseItemRender);__reflect(ShengbeiTipsWinItemStone.prototype,"ShengbeiTipsWinItemStone"),window.ShengbeiTipsWinItemStone=ShengbeiTipsWinItemStone;var JjcRewardConfig=function(){function t(){}return t}();__reflect(JjcRewardConfig.prototype,"JjcRewardConfig");var ShengbeiWinItem=function(t){function e(){var e=t.call(this)||this;return e.skinName="ShengbeiWinItemEUI",e}return __extends(e,t),e.prototype.setRedPoint=function(t){this.redPoint.visible=t},e.prototype.dataChanged=function(){var t=this.data;this.currentState=t.isAct()?"normal":"noStone",this.imgIcon.source="bxsb_zycs_ys"+t.index,this.updateRp()},e.prototype.setSelect=function(t){this.imgSelect.visible=t},e.prototype.updateRp=function(){var t=this.data;t&&(this.redPoint.visible=RpSys.ins().getData(RoleWin,RolePanel,ShengbeiWin,t.id))},e}(BaseItemRender);__reflect(ShengbeiWinItem.prototype,"ShengbeiWinItem"),window.ShengbeiWinItem=ShengbeiWinItem;var FbModelShenDian=function(t){function e(){var e=t.call(this)||this;return e.boshu=0,e.jibaiCount=0,e.subRoleDatas=[],e._shuaguaiTime=0,e.guwuAttrData=new GuwuAttrData,e.guwuCount=0,e.count=0,e.buyCount=0,e.zhuzhanCount=0,e._zuduiTime=0,e.shuohuaId=0,e.rewardType=1,e.yaoqingtimer=0,e.yaoqingtimerGuild=0,e.isfaGuoYoaQing=!1,e.state=0,e.fbId=1,e}return __extends(e,t),e.prototype.parser=function(t){this.boshu=t.readByte(),this.jibaiCount=t.readInt();var e=t.readByte();this.subRoleDatas.length=0;for(var i=0,n=2,a=0;e>a;a++){var o=new SubRoleData;o.parser(t),o.index=o.playName==Actor.ins().myName?1:n++,i+=o.hurt,this.subRoleDatas.push(o)}for(var a=0;a<this.subRoleDatas.length;a++)this.subRoleDatas[a].sumHurt=i;var s=t.readShort();this._shuaguaiTime=Timer.ins().getTimer()+1e3*s},e.prototype.parser1=function(t){this.count=t.readByte(),this.buyCount=t.readByte(),this.zhuzhanCount=t.readByte()},e.prototype.parserGotoFuben=function(t){this.rewardType=t.readByte();var e=t.readShort();this.fbId=t.readInt(),-1!=e?this.SweepEndTick=Timer.ins().getTimer()+1e3*e:this.SweepEndTick=-1},e.prototype.canYaoqing=function(){return 0==this.getYaoqingCD()},e.prototype.getYaoqingCD=function(){return Math.max(0,Math.ceil((this.yaoqingtimer-Timer.ins().getTimer())/1e3))},e.prototype.canYaoqingGuild=function(){return 0==this.getYaoqingCDGuild()},e.prototype.getYaoqingCDGuild=function(){return Math.max(0,Math.ceil((this.yaoqingtimerGuild-Timer.ins().getTimer())/1e3))},Object.defineProperty(e.prototype,"shenghunCommonConfig",{get:function(){return Cfg.getConfig(ShenghunCommonConfig)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"shuaguaiTime",{get:function(){return Math.max(0,Math.ceil(this._shuaguaiTime-Timer.ins().getTimer())/1e3)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"zuduiTime",{get:function(){return Math.max(0,Math.ceil(this._zuduiTime-Timer.ins().getTimer())/1e3)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"leftCdTime",{get:function(){return Math.max(0,Math.ceil(this.SweepEndTick-Timer.ins().getTimer())/1e3)},enumerable:!0,configurable:!0}),e.prototype.isMax=function(){var t=Cfg.getConfig(ShenghunFubenConfig,CondType.LessEqual,ShenghunFubenConfig.zslevel,Actor.ins().zsId);return t.id>=Cfg.getMaxConfig(MolongFubenConfig).id},e.prototype.istixingguwu=function(){return this.count<=3&&this.guwuCount<=4},Object.defineProperty(e.prototype,"leftCount",{get:function(){return Cfg.getConfig(ShenghunCommonConfig).fightcount+this.buyCount-this.count},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"canbuyCount",{get:function(){return Math.max(VipSys.ins().getCurSVipConfig().shenghunbuy-this.buyCount,0)},enumerable:!0,configurable:!0}),e.prototype.updateTimes=function(t,e){Timer.ins()["do"](t,1e3,1,this.openYaoQingWin,e)},e.prototype.openYaoQingWin=function(){var t=FbSys.ins().fubenConfig;if(!this.isfaGuoYoaQing&&t.group==FbGroup.ShenDian){var e=Cfg.getConfig(ShenghunCommonConfig).yaoqingdesc,i=new PopupTimeData(e);i.timer=5,i.setFunction(this,function(){FbSys.ins().sendShenDianYaoQing(1)}),openWin(ShenDianZuDuiWin,i)}},e.prototype.isZhuZhan=function(){return 2==this.rewardType},e.prototype.getState=function(){var t=0;return t=-1!=this.SweepEndTick?2:0==this.state?0:1},e.prototype.resetAll=function(){this.isfaGuoYoaQing=!1,this.subRoleDatas.length=0,this.boshu=0,this.jibaiCount=0,this.guwuCount=0,this.yaoqingtimer=0,this.yaoqingtimerGuild=0,this._shuaguaiTime=0,this._zuduiTime=0,this.guwuAttrData.resetAll(),Timer.ins().removeAll(this)},e}(FbModelBase);__reflect(FbModelShenDian.prototype,"FbModelShenDian"),window.FbModelShenDian=FbModelShenDian;var ShenDianFbPanel=function(t){function e(){var e=t.call(this)||this;return e.isGuaji=!0,e.skinName="ShenDianFBPanelEUI",e.listrole.itemRenderer=ShenDianRoleItem,e.listrole.dataProvider=e.listroleArray=new eui.ArrayCollection,e.mcFingerCenter=new MC,e.mcFingerCenter.playFile(getEffName("csys_finger"),-1),e.mcFingerCenter.x=e.mcFingerCenter.y=45,e.btnGuaji.addChild(e.mcFingerCenter),e.mcFingerCenter.alpha=0,e.list.itemRenderer=ItemBaseReward,e.list.dataProvider=e.listData=new eui.ArrayCollection,e}return __extends(e,t),e.prototype.open=function(){t.prototype.open.call(this),this.fbId=FbSys.ins().fbId,this.addClickE(this,this.onClick),this.addLsn(MapContainer.ins().patchGridClick,this.onMapGridClick),this.addLsn(LogicSys.ins().patchEntityClick,this.onEntityClick),this.addLsn(FbSys.ins().patchMoneyChange,this.onGuwuMoneyChange),this.addLsn(FbSys.ins().patchShenDianZuDuiTime,this.updateGuWuBtn),this.addLsn(FbSys.ins().patchShenDianStarTime,this.fubenStar),this.addLsn(FbSys.ins().patchShenDianGotoFubenData,this.fubenStar),this.addLsn(FbSys.ins().patchShenDianGuWu,this.guwu),this.addLsn(LogicSys.ins().patchCreateCommEntity,this.updateGuaJi),this.shenghunCommonConfig=Cfg.getConfig(ShenghunCommonConfig),this.updateAll(),this.guwu(),this.updateGuWuBtn(),this.updateReward()},e.prototype.updateReward=function(){var t=FbSys.ins().shendianData,e=ActSys.ins().beishu,i=Cfg.getConfig(ShenghunFubenConfig,CondType.Equal,ShenghunFubenConfig.fbId,this.fbId);t.isZhuZhan()?this.listData.source=GFunc.setItemDataRewardValue(i.fubenhelprewards,ItemDataReward["double"],e):this.listData.source=GFunc.setItemDataRewardValue(i.fubenrewards,ItemDataReward["double"],e)},e.prototype.close=function(){t.prototype.close.call(this)},e.prototype.updateGuaJi=function(){this.setGuaJi(!0)},e.prototype.updateCombatDate=function(){var t=FbSys.ins().shendianData,e="";e=2==t.getState()?Lang.fb_str297.replace("$time$",getFormatTime(t.leftCdTime,"mm:ss")):Lang.fb_str297.replace("$time$"," --:--"),this.lbTime.textFlow=addColorTF(e),this.lbMonsterBar.textFlow=addColorTF(Lang.fb_str298.replace("$count$",t.boshu+"/"+this.shenghunCommonConfig.monstermaxcount)),this.lbMonsterAtkCount.textFlow=addColorTF(Lang.fb_str299.replace("$count$",t.jibaiCount.toString()));var i=Cfg.getConfig(ShenghunFubenConfig,CondType.Equal,ShenghunFubenConfig.fbId,this.fbId);if(i){var n=Cfg.getShenghunCommonByIdCount(i.fbId,t.jibaiCount),a=i.grade.length-1,o=n>=a?a:n+1,s=i.grade[o],r=GConst.fbrate[o],u=addColor(s,5949490),h=addColor(""+(r+Lang.common_ji),5949490);this.lbScore.textFlow=addColorTF(Lang.fb_str375.replace("$count$",u)+":"+h),this.updateCenterBtnEff()}},e.prototype.onMapGridClick=function(){this.setGuaJi(!1)},e.prototype.onEntityClick=function(){this.setGuaJi(!1)},e.prototype.updateGuaJiBtn=function(){this.btnGuaji.visible=!this.isGuaji,this.btnStopGuaji.visible=this.isGuaji},e.prototype.updateGuWuBtn=function(){var t=0!=FbSys.ins().shendianData.getState(),e=this.btnCoinGuWu.visible;this.btnCoinGuWu.visible=t,e!=t&&this.guwu(),this.btnGuild.visible=!t,this.btnWord.visible=!t},e.prototype.updateTime=function(){this.updateAll()},e.prototype.updateAll=function(){this.updateMyself(),this.updateCombatDate()},e.prototype.updateMyself=function(){this.listroleArray.source=FbSys.ins().shendianData.subRoleDatas,this.listroleArray.refresh()},e.prototype.onClick=function(t){switch(t.target){case this.btnGuaji:this.setGuaJi(!0);break;case this.btnStopGuaji:this.setGuaJi(!1);break;case this.btnCoinGuWu:0!=FbSys.ins().shendianData.getState()?openWin(GuWuWin,FbSys.ins().guWuData.getShenDianWuGuDatas()):showtipsSuc(Lang.fb_str304);break;case this.btnGuild:GuildSys.ins().isAddGuild()?FbSys.ins().shendianData.canYaoqingGuild()?(FbSys.ins().sendShenDianYaoQing(2),showtipsSuc(Lang.fb_str302)):showTipsWarn(Lang.fb_str303.replace("$miao$",FbSys.ins().shendianData.getYaoqingCDGuild().toString())):showTipsWarn(Lang.guild_str7);break;case this.btnWord:FbSys.ins().shendianData.canYaoqing()?(FbSys.ins().sendShenDianYaoQing(1),showtipsSuc(Lang.fb_str302)):showTipsWarn(Lang.fb_str303.replace("$miao$",FbSys.ins().shendianData.getYaoqingCD().toString()))}},e.prototype.setGuaJi=function(t){this.isGuaji=t,LogicSys.ins().centerEntity.AI.setGuaji(t),this.updateGuaJiBtn()},e.prototype.formatCountDown=function(t){return addColor(""+Lang.common_str11+(t/1e3).toFixed(0)+Lang.common_miao,16115290)},e.prototype.guwu=function(){this.guwuRedPoint(),this.groupJiaCheng.visible=this.btnCoinGuWu.visible&&(FbSys.ins().shendianData.guwuAttrData.atk>0||FbSys.ins().shendianData.guwuAttrData.hp>0),this.lbjiacheng.text=Lang.fb_str23+.01*FbSys.ins().shendianData.guwuAttrData.atk+"%"},e.prototype.onGuwuMoneyChange=function(t,e){var i,n;n=1==t?this.lbMoney1:this.lbMoney2,egret.Tween.removeTweens(n),i=egret.Tween.get(n),n.visible=!0,n.alpha=1,n.textFlow=addColorTF(Lang.common_str49+" "+e.count+" "+Cfg.getItemCfg(e.id).name,GConst.PZColor[0]),i.wait(1e3).to({alpha:0},500).call(function(){n.visible=!1})},e.prototype.fubenStar=function(){0!=FbSys.ins().shendianData.getState()&&this.guwuRedPoint(),this.updateGuWuBtn()},e.prototype.updateCenterBtnEff=function(){this.mcFingerCenter.alpha=2==FbSys.ins().shendianData.getState()?1:0},e.prototype.guwuRedPoint=function(){var t=this.canGuWu(1)||this.canGuWu(2);this.btnCoinGuWu.redPoint.visible=t,t?Timer.ins()["do"](1e3,3e3,0,this.doudong,this,TimerType.FIRST):Timer.ins().remove(this.doudong,this)},e.prototype.doudong=function(){DisUtil.shakeIt(this.btnCoinGuWu,5,100)},e.prototype.canGuWu=function(t){var e=!1,i=Cfg.getConfig(ShenghunFubenConfig,CondType.Equal,ShenghunFubenConfig.fbId,this.fbId),n=Cfg.getConfig(ShenghunInspireConfig,t);return FbSys.ins().shendianData.guwuAttrData.atk>=n.attMax?e=!1:1==t?GFunc.isConsumeEnough(i.goldSp[0])&&(e=!0):GFunc.isConsumeEnough(i.diamondSp[0])&&(e=!0),e},e}(BasePanel);__reflect(ShenDianFbPanel.prototype,"ShenDianFbPanel"),window.ShenDianFbPanel=ShenDianFbPanel;var JunxianDailyConfig=function(){function t(){}return t}();__reflect(JunxianDailyConfig.prototype,"JunxianDailyConfig");var ShenDianResultWin=function(t){function e(){var e=t.call(this)||this;return e.resultData=new FbResultShenDianData,e}return __extends(e,t),e.prototype.initUI=function(){t.prototype.initUI.call(this),this.layer=LayerMgr.Popup,this.skinName="ShenDianResultEUI",this.addBg(),this.list.itemRenderer=ItemBaseReward,this.list.dataProvider=this.listArray=new eui.ArrayCollection},e.prototype.open=function(t){this.resultData=t,this.addClickE(this.closeBtn,this.onTap),this.addClickE(this.closeBtn0,this.onTap),this.iniData()},e.prototype.iniData=function(){Timer.ins()["do"](0,1e3,5,this.updateLabel,this);var t=this.resultData.rewardItem.concat();SortUtil.sortOn(t,["quality"],[SortType.down]),this.listArray.source=t,this.lbTime.textFlow=addColorTF(""+getFormatTime(this.resultData.leftCdTime,"mm:ss")),this.lbHP.textFlow=addColorTF(this.resultData.hp+"%"),this.lbCount.textFlow=addColorTF(""+this.resultData.count);var e=(Cfg.getConfig(ShenghunFubenConfig,CondType.Equal,ShenghunFubenConfig.fbId,this.resultData.fbId),Cfg.getShenghunCommonByIdCount(this.resultData.fbId,this.resultData.count));this.imgSroce.source=ResMgr.imgScore[e+1]},e.prototype.close=function(){t.prototype.close.call(this),Timer.ins().removeAll(this),FbSys.ins().sendExitFb()},e.prototype.updateLabel=function(t){0>=t&&this.onCloseBtn(),this.closeBtn.label=Lang.common_str47.replace("$second$",t.toString())},e.prototype.onTap=function(t){switch(t.currentTarget){case this.closeBtn:this.onCloseBtn();break;case this.closeBtn0:closeWin(this)}},e.prototype.onCloseBtn=function(){closeWin(this)},e}(BaseWinSingle);__reflect(ShenDianResultWin.prototype,"ShenDianResultWin"),window.ShenDianResultWin=ShenDianResultWin;var ShenDianRoleFaceItem=function(t){function e(){var e=t.call(this)||this;return e.skinName="RedFortFbFaceItemskin",e.setSkinPart("roleItem",new MainRoleItem),e}return __extends(e,t),e.prototype.dataChanged=function(){var t=this.data;this.roleItem.setState(MainRoleItem.STATE_0),this.roleItem.setJob(t),this.roleItem.setIsDead(!1),this.roleItem.updateHP(100,100)},e}(BaseItemRender);__reflect(ShenDianRoleFaceItem.prototype,"ShenDianRoleFaceItem"),window.ShenDianRoleFaceItem=ShenDianRoleFaceItem;var ShenDianRoleItem=function(t){function e(){var e=t.call(this)||this;return e.MAX_WIDTH=182,e.skinName="MoLongRoleEUI",e.mc1=new MC,e.mc1.y=12,e.groupMC1.addChild(e.mc1),e.mc3=new MC,e.mc3.scaleY=2,e.mc3.x=91,e.groupMC.addChild(e.mc3),e.groupMC.visible=!1,e.maskMC1=new MaskRect,e.maskMC1.setParam(182,40,MoveDir.R_To_L),e.groupMC.addChild(e.maskMC1),e.mc3.mask=e.maskMC1,e}return __extends(e,t),e.prototype.dataChanged=function(){var t=this.data;this.lbHurt.text=t.hurt>0?GFunc.overLength(t.hurt):"",this.lbPlayName.text=t.playName,this.lbPlayName.textColor=t.isMy?5949490:15129784,this.roleFace.data=t.sex,t.hurt>0?this.lbPercentHurt.text=(t.hurt/t.sumHurt*100).toFixed(0)+"%":this.lbPercentHurt.text="";var e="jdt"+t.index,i="gd"+t.index;~this.mc3.name.indexOf(e)||(this.mc3.playFile(getEffName(e),-1),this.mc1.playFile(getEffName(i),-1));var n=0;t.hurt>0&&(n=t.hurt/t.sumHurt,n>1&&(n=1),this.groupMC.visible=!0),this.maskMC1.setPercent(n);var a=0;1==t.index?a=7:2==t.index?a=4:3==t.index&&(a=8),this.mc1.x=(1-n)*this.MAX_WIDTH-a},e}(BaseItemRender);__reflect(ShenDianRoleItem.prototype,"ShenDianRoleItem"),window.ShenDianRoleItem=ShenDianRoleItem;var ShenDianZuDuiWin=function(t){function e(){return t.call(this)||this}return __extends(e,t),e.prototype.initUI=function(){t.prototype.initUI.call(this),this.skinName="CommonTipsWinEUI1",this.addBg()},e.prototype.open=function(t){this.addClickE(this.btnOk,this.onClick),this.popupBaseData=t,this.lbContent.textFlow=StrUtil.toTF(t.desc),Timer.ins()["do"](0,1e3,t.timer,this.updateLabel,this)},e.prototype.close=function(){t.prototype.close.call(this),Timer.ins().removeAll(this)},e.prototype.updateLabel=function(t){0>=t&&this.onCloseBtn(),this.btnOk.label=Lang.mol_str20+"("+t+")"},e.prototype.onClick=function(t){switch(t.currentTarget){case this.btnOk:this.popupBaseData.sureFun(),closeWin(this)}},e.prototype.onCloseBtn=function(){this.popupBaseData.sureFun(),closeWin(this)},e}(BaseWinSingle);__reflect(ShenDianZuDuiWin.prototype,"ShenDianZuDuiWin"),window.ShenDianZuDuiWin=ShenDianZuDuiWin;var ShenDianZuZuiTimeWin=function(t){function e(){var e=t.call(this)||this;return e.time=0,e.desc="",e}return __extends(e,t),e.prototype.initUI=function(){t.prototype.initUI.call(this),this.winType=WinType.NeverCloseWin,this.layer=LayerMgr.Main_Down,this.skinName="ShenDianZuZuiTimeWinEUI"
},e.prototype.open=function(e,i){void 0===e&&(e=""),void 0===i&&(i=0),t.prototype.open.call(this),this.time=i,this.desc=e,Timer.ins()["do"](0,1e3,0,this.updateDesc,this)},e.prototype.getTime=function(){return Math.max(0,Math.ceil((this.time-Timer.ins().getTimer())/1e3))},e.prototype.close=function(){t.prototype.close.call(this),Timer.ins().removeAll(this)},e.prototype.updateDesc=function(){this.getTime()<=0&&this.onCloseBtn(),this.lbTime.text=this.desc.replace("$s$",getFormatTime(this.getTime(),"mm:ss"))},e.prototype.onCloseBtn=function(){closeWin(this)},e}(BaseWinSingle);__reflect(ShenDianZuZuiTimeWin.prototype,"ShenDianZuZuiTimeWin"),window.ShenDianZuZuiTimeWin=ShenDianZuZuiTimeWin;var ShengLingActTipsWin=function(t){function e(){var e=t.call(this)||this;return e.layer=LayerMgr.Popup,e.skinName="ShengLingActTipsWinEUI",e}return __extends(e,t),e.prototype.open=function(e,i){t.prototype.open.call(this),this.closeFun=i,this.updatePanel(e),this.addClickE(this,this.onTap)},e.prototype.close=function(){t.prototype.close.call(this),this.groupEntity&&this.groupEntity.removeChildren()},e.prototype.onTap=function(t){this.closeFun&&this.closeFun(),closeWin(this)},e.prototype.updatePanel=function(t){var e="",i=Cfg.getConfig(ShengLingConfig,t),n=Actor.ins().job;e=Cfg.getConfig(ShengLingAppearanceConfig,i.bodyIds[n-1]).appearance,this.groupEntity.addChild(MC.createCenterGruop(e,-1)),this.lb_name.text=i.name},e}(BaseWinSingle);__reflect(ShengLingActTipsWin.prototype,"ShengLingActTipsWin"),window.ShengLingActTipsWin=ShengLingActTipsWin;var ShengLingDaShiWin=function(t){function e(){return t.call(this)||this}return __extends(e,t),e.prototype.initUI=function(){this.skinName="XingHunAttrWinEUI",this.imgTitle.source="shengling_zycs_slds",this.addBg(),t.prototype.initUI.call(this),this.layer=LayerMgr.Popup},e.prototype.open=function(e){t.prototype.open.call(this),this.daShiData=e,this.addClickE(this.btnUp,this.onClick),this.addLsn(QiyuSys.ins().patchShengLingDaShiUp,this.update),this.addLsn(RpSys.ins().patchRp,this.updateRp),this.update(),this.updateRp()},e.prototype.updateRp=function(t){void 0===t&&(t=null),(!t||t.check(this))&&(this.btnUp.redPoint.visible=RpSys.ins().getData(RoleWin,RolePanel,ZhuangBanWin,ShengLingPanel,ShengLingLevelPanel,this.daShiData.id,e))},e.prototype.update=function(){var t=this.daShiData,e=QiyuSys.ins().shengLingModel.getShengLingDataById(t.id),i=e.getBaseConfig().name;this.totalPower.text=t.genPower().toFixed(),this.bitLevel.text="."+t.level+"r";var n=t.getConfig(),a=Cfg.getConfig(ShengLingDashiConfig,t.id,Math.max(t.level-1,0)).needLevel,o=t.noActRank()?addColor(Lang.xh_str4,3822967):addColor(Lang.xh_str4,3822967)+"  "+addColor(i+Lang.sl_str3+a+Lang.sl_str4,16774296)+addColor(Lang.common_str40,5767068);if(this.lbCurLevel.size=20,this.lbCurLevel.textFlow=addColorTF(o),o=t.noActRank()?addColor(Lang.xh_str9,15066597):addColor(""+i+Lang.sl_str9+" +"+t.getConfig().attrPer/100+"%",3407744),this.lbCurAttr.textFlow=addColorTF(o),!t.isMaxRank()){var s=Cfg.getNextConfig(ShengLingDashiConfig,t.id,t.level),r=e.getChong(),u=addColor("("+r+"/"+n.needLevel+")",r<n.needLevel?16724787:5767068);this.lbNextLevel.size=20,this.lbNextLevel.textFlow=addColorTF(addColor(Lang.foot_str2,3822967)+"  "+addColor(i+Lang.sl_str3+n.needLevel+Lang.sl_str4,16774296)+u),this.lbNextAttr.textFlow=addColorTF(""+i+Lang.sl_str9+" +"+s.attrPer/100+"%",15066597)}var h=t.canRank();t.noActRank()?this.currentState=h?"canAct":"noAct":t.isMaxRank()?this.currentState="max":h?this.currentState="upRank":this.currentState="noRank"},e.prototype.onClick=function(t){switch(t.currentTarget){case this.btnUp:this.daShiData.canRank()&&QiyuSys.ins().sendShengLingDaShiUp(this.daShiData.id)}},e}(BaseWinSingle);__reflect(ShengLingDaShiWin.prototype,"ShengLingDaShiWin"),window.ShengLingDaShiWin=ShengLingDaShiWin;var ShengLingModel=function(){function t(){this.yinjiCount=6,this.shengLingDatas=[],this.yinJiDatas=[],this.huanHuaId=0}return t.prototype.parserInfo=function(t){this.shengLingDatas.length=0;for(var e=t.readByte(),i=0;e>i;i++){var n=new ShengLingData;n.parser(t),this.shengLingDatas.push(n)}e=t.readByte();for(var a=0;e>a;a++){var o=new ShengLingYinJiData;o.parser(t),this.yinJiDatas[o.id]=o}this.huanHuaId=t.readByte()},t.prototype.parserLevelUp=function(t){var e=this.getShengLingDataById(t.readByte());e.level=t.readShort()},t.prototype.parserYinJiUp=function(t){var e=t.readInt(),i=this.yinJiDatas[e];return i.level=t.readShort(),i},t.prototype.parserStageUp=function(t){var e=this.getShengLingDataById(t.readByte());e.stage=t.readShort()},t.prototype.parserDaShiUp=function(t){var e=this.getShengLingDataById(t.readByte());e.daShiData.level=t.readShort()},t.prototype.parserTaoZhuangUp=function(t){var e=this.getShengLingDataById(t.readByte());e.tzLevel=t.readShort()},t.prototype.getShengLingDataById=function(t){for(var e=0,i=this.shengLingDatas;e<i.length;e++){var n=i[e];if(n.id==t)return n}return null},t.prototype.getYinJiDatasById=function(t){for(var e=this.getShengLingDataById(t).getBaseConfig().tag,i=[],n=0,a=e;n<a.length;n++){var o=a[n];i.push(this.yinJiDatas[o])}return i},t.prototype.getYinJiActCountById=function(t){for(var e=this.getShengLingDataById(t).getBaseConfig().tag,i=0,n=0,a=e;n<a.length;n++){var o=a[n];this.yinJiDatas[o].isAct()&&(i+=1)}return i},t.prototype.isAct=function(t){var e=!1;if(1==t.id)e=!0;else if(t.level>0)e=!0;else{var i=this.getShengLingDataById(t.getBaseConfig().needId);e=i.level>=t.getBaseConfig().needLevel}return e},t.prototype.getActDec=function(t){var e=this.getShengLingDataById(t.getBaseConfig().needId),i=t.getBaseConfig().needLevel,n=Lang.sl_str1.replace("$name$",e.getBaseConfig().name);return n=n.replace("$chong$",""+e.getChong(i)),n=n.replace("$ji$",""+e.getJi(i))},t.prototype.getTaoZhuangDatas=function(t,e){for(var i=this.getShengLingDataById(t),n=this.getYinJiDatasById(i.id),a=Number.MAX_VALUE,o=0,s=n;o<s.length;o++){var r=s[o];a=Math.min(a,r.level)}var u=[],h=Cfg.getConfigs(ShengLingSuitConfig,i.id);for(var l in h){var p=new ShengLingTaoZhuangData;p.config=h[l],h[l].level>0&&(p.needLevel=h[h[l].level-1].needLevel),i.tzLevel>=h[l].level?p.state=1:1==e&&a>=p.needLevel?p.state=2:p.state=0,p.config.level>0&&u.push(p)}return u},t}();__reflect(ShengLingModel.prototype,"ShengLingModel");var ShengLingStageItemTipsWin=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return __extends(e,t),e.prototype.setSkinName=function(){this.skinName="ShengLingStageItemTipsWinEUI"},e.prototype.initUI=function(){t.prototype.initUI.call(this),this.layer=LayerMgr.Popup,this.addBg(),this.setSkinPart("itemIcon",new ItemIcon)},e.prototype.open=function(e){t.prototype.open.call(this),this.updatePanel(e)},e.prototype.updatePanel=function(t){var e=t.cfg;this.imgBg.source="shengling_zycs_d"+e.quality+"_png",this.itemIcon.setDataByItemConfig(e),Actor.ins().isLocation?this.lbName.text=e.getName()+("("+e.id+")"):this.lbName.text=e.getName(),this.lbName.textColor=GConst.PZColor[e.quality],this.lbScore.textFlow=addColorTF(Lang.sl_str10+"："+addColor(t.power,5767068)),this.lbJob.textFlow=addColorTF(""+Lang.itemtips_str1+addColor(Lang.common_jobName1[0],5767068)),this.desc.textFlow=StrUtil.toTF(e.getDesc());var i=AttrData.getFm(null,5767068,"","+");this.lbAttr.textFlow=addColorTF(AttrData.parse(e.pattr,{fm:i}).join("\n"));var n=Cfg.getConfig(ShengLingConfig,e.huanhuaId),a=Cfg.getConfig(SkillPassiveConfig,n.skill,1);this.lbSkillName.text=""+a.name,this.lbSkillDec.textFlow=StrUtil.toTF(a.skinname)},e}(BaseWinSingle);__reflect(ShengLingStageItemTipsWin.prototype,"ShengLingStageItemTipsWin"),window.ShengLingStageItemTipsWin=ShengLingStageItemTipsWin;var ShengLingTaoZhuangWin=function(t){function e(){var e=t.call(this)||this;return e.skinName="ShengLingTaoZhuangWinEUI",e.addBg(),e.layer=LayerMgr.Popup,e.list.itemRenderer=ShengLingTaoZhuangItem,e.list.dataProvider=e.listData=new eui.ArrayCollection,e}return __extends(e,t),e.prototype.open=function(e){t.prototype.open.call(this),this.shengLingData=e,this.addClickE(this.btnSend,this.onClick),this.addLsn(QiyuSys.ins().patchShengLingTaoZhuangUp,this.updatePanel),this.updatePanel()},e.prototype.updatePanel=function(){var t=QiyuSys.ins().shengLingModel.getTaoZhuangDatas(this.shengLingData.id,1);this.listData.source=t;for(var e=0,i=t.length-1;i>=0;i--)if(0!=t[i].state&&i>=8){e=i;break}this.list.validateNow(),this.scroller.validateNow(),this.scroller.viewport.scrollV=31*Math.max(e-8,0),this.btnSend.redPoint.visible=RpSys.ins().getData(RoleWin,RolePanel,ZhuangBanWin,ShengLingPanel,ShengLingYinJiPanel,this.shengLingData.id,"taozhuang")},e.prototype.onClick=function(t){switch(t.currentTarget){case this.btnSend:var e=QiyuSys.ins().shengLingModel.getTaoZhuangDatas(this.shengLingData.id,1);1==e[e.length-1].state||(this.btnSend.redPoint.visible?QiyuSys.ins().sendShengLingTaoZhuangUp(this.shengLingData.id):showtipsFail("未达到激活条件"))}},e}(BaseWinSingle);__reflect(ShengLingTaoZhuangWin.prototype,"ShengLingTaoZhuangWin"),window.ShengLingTaoZhuangWin=ShengLingTaoZhuangWin;var ShengLingYinJiTipsWin=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return __extends(e,t),e.prototype.setSkinName=function(){this.skinName="ShengLingYinJiTipsWinEUI"},e.prototype.initUI=function(){t.prototype.initUI.call(this),this.layer=LayerMgr.Popup,this.addBg(),this.setSkinPart("itemIcon",new ItemIcon),this.tzList.itemRenderer=ShengLingTaoZhuangItem,this.tzList.dataProvider=this.tzListData=new eui.ArrayCollection,this.gainList.itemRenderer=GainGoodsItem,this.gainList.dataProvider=this.gainListData=new eui.ArrayCollection,this.groupMc.scaleX=this.groupMc.scaleY=.6,this.entityRole=GFunc.createEntityUI(),this.entityRole.y=100,this.entityRole.scaleX=this.entityRole.scaleY=2,this.groupMc.addChild(this.entityRole)},e.prototype.open=function(e){t.prototype.open.call(this),this.addItemTapE(this.gainList,this.onTouchList),this.updatePanel(e)},e.prototype.close=function(){t.prototype.close.call(this),this.entityRole.reset()},e.prototype.updatePanel=function(t){var e=t.cfg;this.itemIcon.setDataByItemConfig(e),this.imgQuality.source="tips_zycs_"+e.quality,Actor.ins().isLocation?this.lbName.text=e.getName()+("("+e.id+")"):this.lbName.text=e.getName(),this.lbName.textColor=GConst.PZColor[e.quality];var i=Lang.itemtips_str12+addColor(e.level+Lang.common_ji,16777215);this.lbLv.textFlow=addColorTF(i);var n=Lang.itemtips_str26,a=t.count;if(void 0==a){var o=BagSys.ins().getItemByTypeAndId(0,e.id);n+=o?o.count+"":"0"}else n+=a;this.lbCount.text=n,this.lbattr.textFlow=addColorTF(this.getAttrAndPower(t)),this.tzListData.source=QiyuSys.ins().shengLingModel.getTaoZhuangDatas(e.huanhuaId,0);var s=GFunc.getGainItemWayConfig(e.id);if(s.length>0){this.groupGain.scaleY=this.gainList.scaleY=1,this.gainListData.source=s;var r=s.length>4?4:s.length;this.gainList.width=94*r+35*(r-1)}else this.groupGain.scaleY=this.gainList.scaleY=0;this.lbDesc.textFlow=StrUtil.toTF(e.getDesc());var u=Cfg.getConfig(ShengLingConfig,e.huanhuaId),h=Lang.common_str23+addColor("6"+Lang.common_ge,5767068)+Lang.sl_str11+addColor(""+u.name+Lang.sl_str12,5767068)+Lang.sl_str13;this.lbDesc2.textFlow=addColorTF(h),this.updateEntity(u.id)},e.prototype.updateEntity=function(t){var e=Actor.ins().getMyData(),i=new EntityRoleData;i.szId=e.szId,i.damonId=e.damonId,i.job=e.job,i.wingId=e.wingId,i.sex=e.sex,i.shengLingId=t,i.type=EntityType.ROLE,this.entityRole.setData(i,3,EntityAction.STAND)},e.prototype.onTouchList=function(t){var i=t.item;if(null!=t.item){var n=GFunc.createTaskNavData(i.controlTarget);n.setsucceedFrontFun(function(){WinMgr.ins().closeAllWin(),closeWin(e)}),n["goto"](i.sysid)}},e.prototype.getAttrAndPower=function(t){var e=AttrData.getFm(null,1176860,"","+"),i=AttrData.parse(t.cfg.pattr,{fm:e}).join("\n");return i+=addColor("\n"+Lang.common_str113+"+"+t.power,16751375)},e}(BaseWinSingle);__reflect(ShengLingYinJiTipsWin.prototype,"ShengLingYinJiTipsWin"),window.ShengLingYinJiTipsWin=ShengLingYinJiTipsWin;var ShengLingDaShiData=function(){function t(){this.id=1,this.level=0}return t.prototype.getConfig=function(){return this.config&&this.config.level==this.level||(this.config=Cfg.getConfig(ShengLingDashiConfig,this.id,this.level)),this.config},t.prototype.noActRank=function(){return 0==this.level},t.prototype.isMaxRank=function(){return this.level>=Cfg.getMaxConfig(ShengLingDashiConfig,this.id).level},t.prototype.canRank=function(){return this.isMaxRank()?!1:QiyuSys.ins().shengLingModel.getShengLingDataById(this.id).getChong()>=this.getConfig().needLevel},t.prototype.getDaShiPlusAttr=function(){var t=[],e=QiyuSys.ins().shengLingModel.getShengLingDataById(this.id).getLevelConfig().attr,i=this.getConfig().attrPer;for(var n in e){var a=new AttrData;a.type=e[n].type,a.value=e[n].value*i/1e4,t.push(a)}return t},t.prototype.genPower=function(){return GFunc.getPower(this.getDaShiPlusAttr())>>0},t}();__reflect(ShengLingDaShiData.prototype,"ShengLingDaShiData");var ShengLingData=function(){function t(){this.id=1,this.stage=0,this.level=0,this.tzLevel=0,this.daShiData=new ShengLingDaShiData}return t.prototype.parser=function(t){this.id=t.readByte(),this.stage=t.readShort(),this.level=t.readShort(),this.tzLevel=t.readShort(),this.daShiData.level=t.readShort(),this.daShiData.id=this.id},t.prototype.getBaseConfig=function(){return this.baseConfig||(this.baseConfig=Cfg.getConfig(ShengLingConfig,this.id))},t.prototype.getLevelConfig=function(){return this.levelConfig&&this.levelConfig.level==this.level||(this.levelConfig=Cfg.getConfig(ShengLingLevelConfig,this.level)),this.levelConfig},t.prototype.getNextLevelConfig=function(){return(!this.nextLevelConfig||this.nextLevelConfig.level<=this.level)&&(this.nextLevelConfig=Cfg.getNextConfig(ShengLingLevelConfig,this.level)),this.nextLevelConfig},t.prototype.getStageConfig=function(){return this.stageConfig||(this.stageConfig=Cfg.getConfig(ShengLingStageConfig,this.id))},t.prototype.getStageAttrDatas=function(t){return void 0===t&&(t=this.stage),t>this.getBaseConfig().maxStage&&(t=this.getBaseConfig().maxStage),AttrData.attrMultiple(this.getStageConfig().attr,t)},t.prototype.getChong=function(t){void 0===t&&(t=this.level);var e=Math.ceil(t/10);return 0==t&&(e=1),e},t.prototype.getJi=function(t){void 0===t&&(t=this.level);var e=t%10;return t>0&&(e=0==e?10:e),e},t.prototype.isMaxLevel=function(){return this.level>=this.getBaseConfig().maxLevel},t.prototype.isMaxStage=function(){return this.stage>=this.getBaseConfig().maxStage},t.prototype.getLevelPower=function(){var t=GFunc.getPower(this.getLevelConfig().attr);return t+=this.daShiData.genPower(),t>>0},t.prototype.getStagePower=function(){var t=GFunc.getPower(this.getStageAttrDatas());return t+=SkillSys.ins().getSkillPassivityDataById(this.getBaseConfig().skill).getPower(),t>>0},t}();__reflect(ShengLingData.prototype,"ShengLingData");var ShengLingYinJiData=function(){function t(){this.id=1,this.level=0}return t.prototype.parser=function(t){this.id=t.readInt(),this.level=t.readShort()},t.prototype.getItemConfig=function(){return this.itemConfig||(this.itemConfig=Cfg.getItemCfg(this.id))},t.prototype.getConfig=function(){return this.config||(this.config=Cfg.getConfig(ShengLingTagConfig,this.id))},t.prototype.getStageAttrDatas=function(t){return void 0===t&&(t=this.level),t>this.getConfig().maxLevel&&(t=this.getConfig().maxLevel),AttrData.attrMultiple(this.getConfig().attr,t)},t.prototype.getName=function(){return this.getItemConfig().getName()},t.prototype.isAct=function(){return this.level>0},t.prototype.isMax=function(){return this.level>=this.getConfig().maxLevel},t.prototype.getPower=function(){var t=GFunc.getPower(this.getStageAttrDatas());return t>>0},t.prototype.getShengLingId=function(){return this.getConfig().shengLingId},t}();__reflect(ShengLingYinJiData.prototype,"ShengLingYinJiData");var ShengLingItem=function(t){function e(){var e=t.call(this)||this;return e.skinName="ShengLingItemEUI",e.showRedPoint(!1),e}return __extends(e,t),e.prototype.dataChanged=function(){this.data instanceof ShengLingData&&(this.imgIcon.source="shengling_zycs_q"+this.data.id)},e.prototype.showRedPoint=function(t){this.redPoint.visible=t},e}(BaseItemRender);__reflect(ShengLingItem.prototype,"ShengLingItem"),window.ShengLingItem=ShengLingItem;var JunxianLevelConfig=function(){function t(){}return t}();__reflect(JunxianLevelConfig.prototype,"JunxianLevelConfig");var KalimaCommonConfig=function(){function t(){this.vip=0}return t}();__reflect(KalimaCommonConfig.prototype,"KalimaCommonConfig");var KalimaDamageRewardConfig=function(){function t(){}return t}();__reflect(KalimaDamageRewardConfig.prototype,"KalimaDamageRewardConfig");var ShengLingTaoZhuangItem=function(t){function e(){var e=t.call(this)||this;return e.skinName="ShengLingTaoZhuangItemEUI",e}return __extends(e,t),e.prototype.dataChanged=function(){if(this.data instanceof ShengLingTaoZhuangData){var t=16777215;0==this.data.state?(t=15066597,this.lbState.textFlow=addColorTF(Lang.common_str24,t)):1==this.data.state?(t=3407744,this.lbState.textFlow=addColorTF(Lang.common_str28,t)):2==this.data.state&&(t=3506362,this.lbState.textFlow=addColorTF(Lang.sl_str6,t));var e=""+Lang.sl_str7+this.data.needLevel+Lang.common_jie+"：";e+=this.data.config.addattr.type==AttrType.shengLingYinjiAllPer?""+this.data.config.attrDec:AttrData.getAttrName(this.data.config.addattr.type)+"+"+AttrData.getAttrValue(this.data.config.addattr),this.lbDec.textFlow=addColorTF(e,t)}},e}(BaseItemRender);__reflect(ShengLingTaoZhuangItem.prototype,"ShengLingTaoZhuangItem"),window.ShengLingTaoZhuangItem=ShengLingTaoZhuangItem;var ShengLingTaoZhuangData=function(){function t(){this.state=0,this.needLevel=0}return t}();__reflect(ShengLingTaoZhuangData.prototype,"ShengLingTaoZhuangData");var ShengLingYinJiItem=function(t){function e(){var e=t.call(this)||this;return e.skinName="ShengLingYinJiItemEUI",e.selectMC=new MC,e.selectMC.playFile(getEffName("sl_zycs_xz"),-1),e.groupSelect.addChild(e.selectMC),e.showRedPoint(!1),e.touchChildren=!1,e}return __extends(e,t),e.prototype.dataChanged=function(){this.data instanceof ShengLingYinJiData&&(this.imgIcon.source=ResMgr.getItemIcon(this.data.id),this.imgIcon.filters=this.data.isAct()?[]:DisUtil.grayFilter(),this.lbLevel.text=this.data.isAct()?""+this.data.level+Lang.common_jie:this.data.getName())},e.prototype.showRedPoint=function(t){this.redPoint.visible=t},e.prototype.playUpMc=function(){GFunc.playUIMovie("sl_zycs_bao",0,0,this.groupMc,1)},e}(BaseItemRender);__reflect(ShengLingYinJiItem.prototype,"ShengLingYinJiItem"),window.ShengLingYinJiItem=ShengLingYinJiItem;var KalimaFubenConfig=function(){function t(){}return t.fbId="fbId",t}();__reflect(KalimaFubenConfig.prototype,"KalimaFubenConfig");var FenjieWin=function(t){function e(){var e=t.call(this)||this;return e.layer=LayerMgr.Popup,e.skinName="TaoZhuangFenJieWinEUI",e.itemList.itemRenderer=FenjieWinItem,e.listArray=new eui.ArrayCollection,e.itemList.dataProvider=e.listArray,e.gainList.itemRenderer=GainGoodsItem,e.itemList.useVirtualLayout=!0,e.imgTitle.source="taozhuang_zycs_fenjiecailiao1",e.imgTitle1.source="taozhuang_zycs_fenjiecailiao",e.imgTitle2.source="taozhuang_zycs_huoqucailiao",e}return __extends(e,t),e.prototype.open=function(){t.prototype.open.call(this),this.addLsn(BagSys.ins().patchItemChange,this.updateData),this.addItemTapE(this.gainList,this.onTouchList),this.addClickE(this.itemList,this.onListItemTap),this.updateData(),this.updategain()},e.prototype.updateData=function(){var t=ForgeSys.ins().getEnchantSplitItem();this.listArray.replaceAll(t)},e.prototype.updategain=function(){var t=Cfg.getItemCfg(Cfg.getConfig(EnumConfig).Item_Fenjie),e=GFunc.getGainItemWayConfig(t.id);this.gainList.dataProvider=new eui.ArrayCollection(e)},e.prototype.onListItemTap=function(t){if("btnOk"==t.target.name){var e=t.target.parent.data;ForgeSys.ins().sendEnchantSplit(e.id,e.count)}},e.prototype.onTouchList=function(t){var e=t.item;if(null!=t.item){var i=e.controlTarget;GFunc.createTaskNavData(i)["goto"](),closeWin(this)}},e}(BaseWinSingle);__reflect(FenjieWin.prototype,"FenjieWin"),window.FenjieWin=FenjieWin;var FenjieWinItem=function(t){function e(){var e=t.call(this)||this;return e.skinName="TaoZhuangFenJieItemEUI",e.setSkinPart("itemIcon",new ItemBaseReward),e}return __extends(e,t),e.prototype.dataChanged=function(){var t=this.data,e=Cfg.getItemCfg(t.id),i=Cfg.getConfig(EnchantChangeConfig,t.id),n=i.items[0];this.itemIcon.data=t,this.lbName.text=e.getName(),this.lbName.textColor=GConst.PZColor[e.quality];var a=n.count*t.count,o=Cfg.getItemCfg(n.id),s=o.name;this.lbDesc.textFlow=addColorTF(Lang.fumo_str2+addColor(s+" X"+a,GConst.PZColor[o.quality]))},e}(BaseItemRender);__reflect(FenjieWinItem.prototype,"FenjieWinItem");var FumoEquipItem=function(t){function e(){var e=t.call(this)||this;return e.job=1,e.setSkinName(),e.clear(),e.imgStarts=[e.imgStart1,e.imgStart2,e.imgStart3],e.mc=new MC,e.groupMc.addChild(e.mc),e}return __extends(e,t),e.prototype.setSkinName=function(){this.skinName="FumoEquipItemEUI"},e.prototype.setRedPoint=function(t){this.redPoint.visible=t},e.prototype.dataChanged=function(){this.clear();var t=this.data;if(t){this.updateIcon();var e=ForgeSys.ins().shenPanTaoZhuangData.getPosData(t.pos);this.setlv(e.leve),this.setStatus(e.leve)}},e.prototype.setlv=function(t,e){if(void 0===e&&(e="+"),t>=1){var i=Math.ceil(t/4);i=0==i?1:i,this.bitlbLevel.text=i+"r"}this.updateIcon(),this.showStart(t),this.setStatus(t)},e.prototype.updateIcon=function(){var t=this.data;this.job=Actor.ins().job;BagSys.ins().getEquipByIndex(t.pos);this.imgLock.visible=!1;var e=Actor.ins().job,i=ForgeSys.ins().shenPanTaoZhuangData.getPosData(t.pos);this.imgIcon.source=ResMgr.getItemIcon(i.getConfig().id[e-1]),this.imgEquipBg.source="role_zycs_"+t.pos},e.prototype.setStatus=function(t){this.currentState=0==t?"unact":"act"},e.prototype.showStart=function(t){this.imgStart1.visible=!1,this.imgStart2.visible=!1,this.imgStart3.visible=!1;var e=t%4;2==e?this.imgStart1.visible=!0:3==e?(this.imgStart1.visible=!0,this.imgStart2.visible=!0):(4==e||0==e&&t>=2)&&(this.imgStart1.visible=!0,this.imgStart2.visible=!0,this.imgStart3.visible=!0)},e.prototype.clear=function(){this.imgIcon.source=null},e.prototype.setSelectBG=function(t){this.imgSelect.visible=t},e}(BaseItemRender);__reflect(FumoEquipItem.prototype,"FumoEquipItem");var FumoItem=function(t){function e(){var e=t.call(this)||this;return e.imgNameStrs=["","fm_zycs_gj01","fm_zycs_fy01","fm_zycs_sm01","fm_zycs_zy01","fm_zycs_zm01","fm_zycs_ts01","fm_zycs_ss01","fm_zycs_js01","fm_zycs_zs01"],e.imgIconStrs=["","fm_zycs_gj","fm_zycs_fy","fm_zycs_sm","fm_zycs_zy","fm_zycs_zm","fm_zycs_ts","fm_zycs_ss","fm_zycs_js","fm_zycs_zs"],e.setSkinName(),e}return __extends(e,t),e.prototype.setSkinName=function(){this.skinName="FumoItemEUI",this.setSkinPart("itemIcon",new ItemIcon)},e.prototype.dataChanged=function(){var t=this.data,e=t.getConfig(),i=t.lv;this.imgName.source=this.imgNameStrs[e.type],t.isAct()?this.imgIcon.source=this.imgIconStrs[e.type]:this.imgIcon.source="fm_zycs_hui",this.setlv(i),this.updateState(i),this.validateNow(),this.updateRedPoint()},e.prototype.updateRedPoint=function(){var t=this.data,e=RpSys.ins().getData(RoleWin,RolePanel,ShengLingWin,ShenPanTaoZhuangMainPanel,FumoPanel,t.pos,t.point);this.setRedPoint(e)},e.prototype.setRedPoint=function(t){this.redPoint.visible=t},e.prototype.setlv=function(t,e){void 0===e&&(e="+"),0==t?this.lbLv.text="":this.lbLv.text="Lv."+t,this.updateState(t)},e.prototype.updateState=function(t){0==t?this.currentState="unAct":this.currentState="act"},e.prototype.setSelect=function(t){this.imgSelect.visible=t},e}(BaseItemRender);__reflect(FumoItem.prototype,"FumoItem");var LevelInvestConfig=function(){function t(){}return t}();__reflect(LevelInvestConfig.prototype,"LevelInvestConfig");var FumoEquipData=function(){function t(){this.fumoPosDatas=[],this.init()}return t.prototype.init=function(){var t=EquipPos.MAX;this.fumoPosDatas.length=0;for(var e=0;t>e;e++){var i=new FumoPosData;i.pos=e;var n=4;i.fumoPointDatas.length=0;for(var a=0;n>a;a++){var o=new FumoPointData;o.pos=i.pos,o.point=a+1,o.lv=0,i.fumoPointDatas.push(o)}this.fumoPosDatas.push(i)}},t.prototype.parser=function(t){for(var e=t.readByte(),i=0;e>i;i++)for(var n=t.readByte(),a=this.getPosDataByPos(n),o=t.readByte(),s=0;o>s;s++){var r=t.readByte(),u=a.getDataByPoint(r);u.lv=t.readShort()}},t.prototype.getPosDataByPos=function(t){for(var e=0;e<this.fumoPosDatas.length;e++)if(this.fumoPosDatas[e].pos==t)return this.fumoPosDatas[e];return this.fumoPosDatas[0]},t.prototype.getPosDataByIndex=function(t){return this.fumoPosDatas[t]},t}();__reflect(FumoEquipData.prototype,"FumoEquipData");var FumoPointData=function(){function t(){this.pos=0,this.point=0,this.lv=1,this.maxLv=0}return t.prototype.isMax=function(){return this.maxLv<=0&&(this.maxLv=Cfg.getMaxConfig(EnchantAttrConfig,this.pos,this.point).level),this.lv>=this.maxLv},t.prototype.isUp=function(){return!this.isMax()&&GFunc.isConsumeEnough(this.getConfig().items)&&this.getSuitLv()>=this.getConfig().suitLv},t.prototype.getSuitLv=function(){return ForgeSys.ins().shenPanTaoZhuangData.getPosData(this.pos).leve},t.prototype.getConfig=function(){return this.config&&this.config.level==this.lv||(this.config=Cfg.getConfig(EnchantAttrConfig,this.pos,this.point,this.lv)),this.config},t.prototype.isAct=function(){return this.lv>0},t}();__reflect(FumoPointData.prototype,"FumoPointData");var FumoPosData=function(){function t(){this.pos=0,this.fumoPointDatas=[]}return t.prototype.setLv=function(t,e){for(var i=0;i<this.fumoPointDatas.length;i++)this.fumoPointDatas[i].point==t&&(this.fumoPointDatas[i].lv=e)},t.prototype.getLv=function(t){for(var e=0;e<this.fumoPointDatas.length;e++)if(this.fumoPointDatas[e].point==t)return this.fumoPointDatas[e].lv;return 0},t.prototype.getDataByPoint=function(t){for(var e=0;e<this.fumoPointDatas.length;e++)if(this.fumoPointDatas[e].point==t)return this.fumoPointDatas[e];return new FumoPointData},t.prototype.getDataByIndex=function(t){return this.fumoPointDatas[t]},t.prototype.isUp=function(){for(var t=0;t<this.fumoPointDatas.length;t++)if(this.fumoPointDatas[t].isUp())return!0;return!1},Object.defineProperty(t.prototype,"power",{get:function(){for(var t=0,e=0;e<this.fumoPointDatas.length;e++)this.fumoPointDatas[e].isAct()&&(t+=GFunc.getPower(this.fumoPointDatas[e].getConfig().attr));return t},enumerable:!0,configurable:!0}),t.prototype.getName=function(){var t=ForgeSys.ins().shenPanTaoZhuangData.getPosData(this.pos).getConfig().name[Actor.ins().job-1];return t},t}();__reflect(FumoPosData.prototype,"FumoPosData");var ShenPanTaoZhuangItem=function(t){function e(){var e=t.call(this)||this;return e.job=1,e.setSkinName(),e.imgStarts=[e.imgStart1,e.imgStart2,e.imgStart3],e.mc=new MC,e.groupMc.addChild(e.mc),e}return __extends(e,t),e.prototype.setSkinName=function(){this.skinName="ShenPanTaoZhuangItemEUI"},e.prototype.setRedPoint=function(t){this.redPoint.visible=t},e.prototype.dataChanged=function(){var t=this.data;t&&(this.updateIcon(),this.setlv(t.leve))},e.prototype.setlv=function(t,e){void 0===e&&(e="+");var i=this.data;this.bitlbLevel.text=i.rank+"r",this.showStart(t),this.setStatus(t),this.updateRedPoint()},e.prototype.updateIcon=function(){var t=this.data,e=Actor.ins().job;this.imgLock.visible=!1,this.imgIcon.source=ResMgr.getItemIcon(t.getConfig().id[e-1]),this.imgEquipBg.source="role_zycs_"+t.pos},e.prototype.updateRedPoint=function(){var t=this.data;t&&this.setRedPoint(RpSys.ins().getData(RoleWin,RolePanel,ShengLingWin,ShenPanTaoZhuangMainPanel,ShenPanTaoZhuangPanel,t.pos))},e.prototype.setStatus=function(t){this.currentState=0==t?"unact":"act"},e.prototype.showStart=function(t){for(var e=t>0?(t-1)%4:0,i=0;3>i;i++)this.imgStarts[i].visible=e>=i+1},e.prototype.setSelectBG=function(t){this.imgSelect.visible=t},e}(BaseItemRender);__reflect(ShenPanTaoZhuangItem.prototype,"ShenPanTaoZhuangItem");var LianjinConfig=function(){function t(){}return t}();__reflect(LianjinConfig.prototype,"LianjinConfig");var LianzhanConfig=function(){function t(){}return t}();__reflect(LianzhanConfig.prototype,"LianzhanConfig");var ShenPanTaoZhuangData=function(){function t(){this.datas=[]}return t.prototype.getPosData=function(t){for(var e=0;e<this.datas.length;e++){var i=this.datas[e];if(i.pos==t)return i}return new ShenPanTaoZhuangPosData},t.prototype.parser=function(t){var e=t.readByte();this.datas.length=e;for(var i=this.datas,n=0;e>n;n++){var a=i[n]||(i[n]=new ShenPanTaoZhuangPosData);a.pos=t.readByte(),a.leve=t.readByte(),i[n]=a}},t.prototype.getSuitposData=function(t){return this.datas[t]?this.datas[t]:null},t}();__reflect(ShenPanTaoZhuangData.prototype,"ShenPanTaoZhuangData");var ShenPanTaoZhuangPosData=function(){function t(){this.pos=1,this.leve=1}return t.prototype.getConfig=function(){return Cfg.getConfig(SuitAttrConfig,this.pos,0==this.leve?1:this.leve)},t.prototype.isAct=function(){return this.leve>0},t.prototype.isMax=function(){return this.leve>=Cfg.getMaxConfig(SuitAttrConfig,this.pos).level},Object.defineProperty(t.prototype,"power",{get:function(){return GFunc.getPower(Cfg.getConfig(SuitAttrConfig,this.pos,this.leve).attr)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"rank",{get:function(){var t=0;if(this.leve>=1){var e=Math.ceil(this.leve/4);t=0==e?1:e}return t},enumerable:!0,configurable:!0}),t}();__reflect(ShenPanTaoZhuangPosData.prototype,"ShenPanTaoZhuangPosData");var ShenYouHuanHuaActTipsWin=function(t){function e(){var e=t.call(this)||this;return e.layer=LayerMgr.Popup,e.skinName="ShenYouHuanHuaActTipsWinEUI",e}return __extends(e,t),e.prototype.open=function(e){t.prototype.open.call(this),this.updatePanel(e),this.addClickE(this,this.onTap)},e.prototype.close=function(){t.prototype.close.call(this)},e.prototype.onTap=function(t){closeWin(this)},e.prototype.updatePanel=function(t){this.lb_name.text=t.getBaseConfig().name,this.totalPower.text=""+t.getHuanHuaPower(),this.mc=this.mc||new MC,this.groupEntity.addChild(this.mc);var e=Cfg.getConfig(ShenYouHuanhuaConfig,t.id),i=Cfg.getConfig(ShenYouHuDunAppearanceConfig,e.bodyId);this.mc.playFile(ResMgr.getHuDunUISource(i.appearance),-1)},e}(BaseWinSingle);__reflect(ShenYouHuanHuaActTipsWin.prototype,"ShenYouHuanHuaActTipsWin"),window.ShenYouHuanHuaActTipsWin=ShenYouHuanHuaActTipsWin;var LilianTaskConfig=function(){function t(){}return t}();__reflect(LilianTaskConfig.prototype,"LilianTaskConfig");var ShenYouData=function(){function t(){this.level=0,this.huanHuaDatas=[],this.skillDatas=[],this.yinjiLevel=0,this.yinjiExp=0,this.huanHuaId=0,this.skillCount=1}return t.prototype.parser=function(t){this.level=t.readShort(),this.skillCount=t.readByte(),this.huanHuaId=t.readByte();var e=t.readByte();this.huanHuaDatas.length=0;for(var i=0;e>i;i++){var n=new ShenYouHuanHuaData;n.parser(t),this.huanHuaDatas.push(n)}this.yinjiLevel=t.readShort(),this.yinjiExp=t.readInt();var a=t.readByte();this.skillDatas.length=0;for(var i=0;a>i;i++){var n=new ShenYouSkillData;n.parser(t),this.skillDatas.push(n)}},t.prototype.getHuanHuaDataById=function(t){return this.huanHuaDatas[t-1]},t.prototype.getHuanHuaPower=function(){var t=0;for(var e in this.huanHuaDatas){var i=this.huanHuaDatas[e];i.stage>0&&(t+=GFunc.getPower(i.getBaseConfig().baseAttrs)>>0)}return t},t.prototype.getHuanHuaDatasAll=function(){var t=[];for(var e in this.huanHuaDatas){var i=this.huanHuaDatas[e];t=AttrData.mergeAttr(i.getAttrData(),t)}return t},t.prototype.getLevelAttrDatas=function(){for(var t=[],e=this.getLevelConfig(),i=this.getLevelNextConfig(),n=e.attr.length,a=0;n>a;a++){var o=e.attr[a],s=i.attr[a],r=new ComAttrData(o,s,e.level>=i.level);t.push(r)}return t},t.prototype.getLevelConfig=function(){return this.levelConfig&&this.levelConfig.level==this.level||(this.levelConfig=Cfg.getConfig(ShenYouLevelConfig,this.level)),this.levelConfig},t.prototype.getLevelNextConfig=function(){return(!this.levelNextConfig||this.levelNextConfig.level<=this.level)&&(this.levelNextConfig=Cfg.getNextConfig(ShenYouLevelConfig,this.level)),this.levelNextConfig
},t.prototype.getNextSkill=function(){return Cfg.getConfig(ShenYouNengLiLevelConfig,CondType.More,ShenYouNengLiLevelConfig.lockRank,this.rank)},t.prototype.isMaxLv=function(){return this.level>=Cfg.getMaxConfig(ShenYouLevelConfig).level},Object.defineProperty(t.prototype,"star",{get:function(){return this.level<=10?this.level%11:this.level%10==0?10:this.level%10},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"rank",{get:function(){return this.level<=10?1:Math.ceil(this.level/10)},enumerable:!0,configurable:!0}),t.prototype.getYinJiAttrDatas=function(){for(var t=[],e=this.getYinJiConfig(),i=this.getYinJiNextConfig(),n=e.attr.length,a=0;n>a;a++){var o=e.attr[a],s=i.attr[a],r=new ComAttrData(o,s,e.level>=i.level);t.push(r)}return t},t.prototype.getYinJiConfig=function(){return this.curShenYouTagConfig&&this.curShenYouTagConfig.level==this.yinjiLevel||(this.curShenYouTagConfig=Cfg.getConfig(ShenYouTagConfig,this.yinjiLevel)),this.curShenYouTagConfig},t.prototype.getYinJiNextConfig=function(){return(!this.nextShenYouTagConfig||this.nextShenYouTagConfig.level<=this.yinjiLevel)&&(this.nextShenYouTagConfig=Cfg.getNextConfig(ShenYouTagConfig,this.yinjiLevel)),this.nextShenYouTagConfig},t.prototype.yinjiMax=function(){return this.yinjiLevel>=Cfg.getMaxConfig(ShenYouTagConfig).level},t.prototype.getYinJiPower=function(){return GFunc.getPower(this.getYinJiConfig().attr)},t.prototype.actSkillCount=function(){for(var t=this.skillDatas,e=0,i=0;i<t.length;i++){var n=t[i];n.isAct()&&e++}return e},t.prototype.getSkillMaxCount=function(){return Cfg.getConfigLength(ShenYouSkillConfig)},t.prototype.getSkillByIndex=function(t){return this.skillDatas[t-1]},t}();__reflect(ShenYouData.prototype,"ShenYouData");var ShenYouHuanHuaData=function(){function t(){this.id=1,this.stage=0}return t.prototype.parser=function(t){this.id=t.readByte(),this.stage=t.readShort()},t.prototype.parserEquip=function(t){},t.prototype.getBaseConfig=function(){return null==this.baseConfig&&(this.baseConfig=Cfg.getConfig(ShenYouHuanhuaConfig,this.id)),this.baseConfig},t.prototype.getAttrData=function(t){return void 0===t&&(t=this.stage),AttrData.attrMultiple(this.getBaseConfig().baseAttrs,t)},t.prototype.isUse=function(){return this.id==QiyuSys.ins().shenYouData.huanHuaId},t.prototype.isMax=function(){return this.stage>=this.getBaseConfig().maxLevel},t.prototype.isAct=function(){return this.stage>0},t.prototype.getHuanHuaPower=function(){var t=GFunc.getPower(this.getAttrData());return t},t.prototype.getHuanHuaAttrDatas=function(){for(var t=[],e=this.getAttrData(),i=AttrData.attrMultiple(this.getBaseConfig().baseAttrs,this.isMax()?this.stage:this.stage+1),n=e.length,a=0;n>a;a++){var o=e[a],s=i[a],r=new ComAttrData(o,s,this.isMax());t.push(r)}return t},t.prototype.getIcon=function(){return"shenyou_zycs_hh"+this.id},t}();__reflect(ShenYouHuanHuaData.prototype,"ShenYouHuanHuaData");var ShenYouSkillData=function(){function t(){this.id=1,this.level=0}return t.prototype.parser=function(t){this.id=t.readByte(),this.level=t.readShort()},t.prototype.isAct=function(){return this.level>0},t.prototype.isMax=function(){return this.level>=this.getConfig().maxLevel},t.prototype.getConfig=function(){return null==this._config&&(this._config=Cfg.getConfig(ShenYouSkillConfig,this.id)),this._config},t.prototype.getPower=function(){var t=this.getConfig().power*this.level,e=AttrData.attrMultiple(this.getConfig().attr,this.level);return t+=GFunc.getPower(e)},t.prototype.getAttrs=function(){var t=AttrData.attrMultiple(this.getConfig().attr,this.level);return t},t}();__reflect(ShenYouSkillData.prototype,"ShenYouSkillData");var LimitConfig=function(){function t(){}return t}();__reflect(LimitConfig.prototype,"LimitConfig");var ShenYouHuanHuaPanelItem=function(t){function e(){var e=t.call(this)||this;return e.skinName="ShenYouHuanHuaPanelItemEUI",e.showRedPoint(!1),e.setSelect(!1),e}return __extends(e,t),e.prototype.dataChanged=function(){if(this.data instanceof ShenYouHuanHuaData)if(this.imgIcon.source=this.data.getIcon(),this.imgPz.source="zuji_zycs_pz"+Cfg.getConfig(ShenYouHuanhuaConfig,this.data.id).quality,this.imgAn.visible=!this.data.isAct(),this.data.isMax())this.showRedPoint(!1);else{var t=this.data.getBaseConfig().needitem;this.showRedPoint(GFunc.isConsumeEnough(t))}},e.prototype.showRedPoint=function(t){this.redPoint.visible=t},e.prototype.setSelect=function(t){this.imgSelect.visible=t},e}(BaseItemRender);__reflect(ShenYouHuanHuaPanelItem.prototype,"ShenYouHuanHuaPanelItem"),window.ShenYouHuanHuaPanelItem=ShenYouHuanHuaPanelItem;var LimitStoreConfig=function(){function t(){}return t}();__reflect(LimitStoreConfig.prototype,"LimitStoreConfig");var ShenYouNengLiWin=function(t){function e(){return t.call(this)||this}return __extends(e,t),e.prototype.initUI=function(){this.layer=LayerMgr.Popup,this.skinName="ShenYouNengLiWinEUI",this.addBg(),this.list.itemRenderer=ShenYouNengLiWinItem,t.prototype.initUI.call(this)},e.prototype.open=function(){t.prototype.open.call(this),this.updatePanel()},e.prototype.updatePanel=function(){this.lbAttr.textFlow=StringUtil.toTF(""+Lang.sy_str12+Actor.ins().getAtt(AttrType.atShenYouShieldMax)),this.list.dataProvider=new eui.ArrayCollection(Cfg.getConfigs(ShenYouNengLiLevelConfig))},e}(BaseWinSingle);__reflect(ShenYouNengLiWin.prototype,"ShenYouNengLiWin"),window.ShenYouNengLiWin=ShenYouNengLiWin;var ShenYouNengLiWinItem=function(t){function e(){var e=t.call(this)||this;return e.skinName="ShenYouNengLiWinItemEUI",e}return __extends(e,t),e.prototype.dataChanged=function(){var t=QiyuSys.ins().shenYouData,e=this.data;this.lbSkillName.text=e.name,this.lbSkillDesc.textFlow=StrUtil.toTF(e.desc);var i=t.rank>=e.lockRank;this.lbSkillRank.text=i?"("+Lang.common_str28+")":"("+e.lockRank+Lang.sy_str0+")",this.lbSkillRank.textColor=i?5767068:15733780,this.imgSkillIcon.source="shenyou_zycs_sk"+e.id},e}(BaseItemRender);__reflect(ShenYouNengLiWinItem.prototype,"ShenYouNengLiWinItem"),window.ShenYouNengLiWinItem=ShenYouNengLiWinItem;var ShenYouNewNengLiOpenWin=function(t){function e(){var e=t.call(this)||this;return e.layer=LayerMgr.Top,e.winType=WinType.NeverCloseWin,e.mc=new MC,e.skinName="ShenYouNewNengLiOpenWinEUI",e.mc.playFile(getEffName("xgnkq"),-1),e.mc.x=212,e.mc.y=160,e.groupMc.addChild(e.mc),e}return __extends(e,t),e.prototype.open=function(t){this.addClickE(this.group,this.onTap),this.imgIcon.source="shenyou_zycs_nl"+t,this.imgName.source="shenyou_zycs_nn"+t},e.prototype.onTap=function(t){closeWin(this)},e}(BaseWinSingle);__reflect(ShenYouNewNengLiOpenWin.prototype,"ShenYouNewNengLiOpenWin"),window.ShenYouNewNengLiOpenWin=ShenYouNewNengLiOpenWin;var LimitTSConfig=function(){function t(){}return t}();__reflect(LimitTSConfig.prototype,"LimitTSConfig");var ShenYouSkillPanelItem=function(t){function e(){var e=t.call(this)||this;return e.skinName="ShenYouSkillPanelItemEUI",e.showRedPoint(!1),e.imgSelect.visible=!1,e}return __extends(e,t),e.prototype.dataChanged=function(){this.updateItem(),this.imgSelect.visible=!1},e.prototype.updateItem=function(){var t=this.data,e=t.getConfig();this.lbName.text=e.skillname,this.lbName.textColor=GConst.PZColor[e.quality];var i=t.isMax()?Lang.common_man:""+t.level;this.lbLevel.text=t.isAct()?i:"0",this.imgIcon.source="shenyou_zycs_jn"+t.id+(t.isAct()?"":"a")},e.prototype.showRedPoint=function(t){this.redPoint.visible=t},e.prototype.setSelect=function(t){this.imgSelect.visible=t},e.prototype.playUpLeveMc=function(){GFunc.playMapMovie("bsxq",65,65,this,1)},e}(BaseItemRender);__reflect(ShenYouSkillPanelItem.prototype,"ShenYouSkillPanelItem"),window.ShenYouSkillPanelItem=ShenYouSkillPanelItem;var LoginGiftConfig=function(){function t(){}return t}();__reflect(LoginGiftConfig.prototype,"LoginGiftConfig");var ShenYouYinJiPanelItem=function(t){function e(){var e=t.call(this)||this;return e.skinName="ShenYouYinJiPanelItemEUI",e.touchChildren=!1,e.redPoint.visible=!1,e}return __extends(e,t),e.prototype.dataChanged=function(){var t=this.data,e=Cfg.getConfig(SkillsConfig,t);this.imgIcon.source=ResMgr.getSkillResourceItemName(e.icon,!0,!1),this.lbName.text=e.name},e}(BaseItemRender);__reflect(ShenYouYinJiPanelItem.prototype,"ShenYouYinJiPanelItem"),window.ShenYouYinJiPanelItem=ShenYouYinJiPanelItem;var ShenYouYinJiSkillShowWin=function(t){function e(){var e=t.call(this)||this;return e.layer=LayerMgr.Popup,e.winType=WinType.NormalWin,e.skillConfig=new SkillsConfig,e}return __extends(e,t),e.prototype.setSkinName=function(){this.skinName="ShenYouYinJiSkillShowWinEUI",this.groupEntity2.scaleX=this.groupEntity2.scaleY=this.groupEntity1.scaleX=this.groupEntity1.scaleY=.7},e.prototype.initUI=function(){t.prototype.initUI.call(this),this.addBg(),this.mc=new MC,this.groupMC.addChild(this.mc),this.entityRole=GFunc.createEntityUI(),this.entityRole.scaleX=this.entityRole.scaleY=1.2,this.groupEntity1.addChild(this.entityRole),this.entityRole2=GFunc.createEntityUI(),this.entityRole2.scaleX=this.entityRole2.scaleY=1.2,this.groupEntity2.addChild(this.entityRole2)},e.prototype.open=function(e,i){t.prototype.open.call(this),this.skillConfig=Cfg.getConfig(SkillsConfig,e),this.lbSkillName.text=this.skillConfig.name,this.lbSkillCD.text=Lang.sy_str10+":"+this.skillConfig.cd/1e3+Lang.common_miao,this.imgIcon.source=ResMgr.getSkillResourceItemName(this.skillConfig.icon,!0,!1),this.lbSkillDesc.textFlow=StrUtil.toTF(Cfg.getConfig(ShenYouBaseConfig).skillViewDesc),this.lbSkillXiaoGuo1.textFlow=StrUtil.toTF(this.skillConfig.desc),this.updateEntity(),this.updateEntity2(),this.entityPlay()},e.prototype.updateEntity2=function(){var t=new EntityRoleData;t.szId=0,t.damonId=1,t.job=1,t.wingId=1,t.sex=1,t.type=EntityType.ROLE,this.entityRole2.setData(t,7,EntityAction.STAND)},e.prototype.updateEntity=function(){var t=new EntityRoleData;t.szId=0,t.damonId=1,t.job=1,t.wingId=1,t.sex=0,t.type=EntityType.ROLE,this.entityRole.setData(t,3,EntityAction.STAND);var e=Cfg.getConfig(ShenYouHuDunAppearanceConfig,100).appearance,i=ResMgr.getEntityHuDunRes(EntityType.ROLE,e),n=MC.createCenterGruop(i,-1);this.groupEntity1.addChild(n)},e.prototype.close=function(){t.prototype.close.call(this),this.entityRole.reset(),Timer.ins().removeAll(this)},e.prototype.entityPlay=function(){var t=this,e=new MC;e.playFile(getEffName("shenyou_skill0"),1,function(){Timer.ins()["do"](2e3,0,1,t.entityPlay,t)}),this.groupMC.addChild(e)},e}(BaseWinSingle);__reflect(ShenYouYinJiSkillShowWin.prototype,"ShenYouYinJiSkillShowWin"),window.ShenYouYinJiSkillShowWin=ShenYouYinJiSkillShowWin;var ShenYouYinJiSkillShowWin2=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.entityXYs=[new XY(-200,-260)],e.monsterXYs=[new XY(200,-40)],e.skillConfig=new SkillsConfig,e}return __extends(e,t),e.prototype.setSkinName=function(){this.skinName="ShenYouYinJiSkillShowWin2EUI",this.groupEntity2.scaleX=this.groupEntity2.scaleY=this.groupEntity1.scaleX=this.groupEntity1.scaleY=.7},e.prototype.initUI=function(){t.prototype.initUI.call(this),this.addBg(),this.entityRole=GFunc.createEntityUI(),this.entityRole.scaleX=this.entityRole.scaleY=1.2,this.groupEntity1.addChild(this.entityRole),this.entityRole2=GFunc.createEntityUI(),this.entityRole2.scaleX=this.entityRole2.scaleY=1.2,this.groupEntity2.addChild(this.entityRole2)},e.prototype.open=function(e,i){t.prototype.open.call(this),this._skillData=e,this.skillMCName="shenyou_skill"+(i+1),this.skillConfig=Cfg.getConfig(SkillsConfig,51004),this.addClickE(this.btnSend,this.onTap),this.addLsn(SkillSys.ins().patchSkillPassivityUp,this.upatePanel),this.upatePanel(),this.updateEntity(),this.updateEntity2(),this.entityPlay()},e.prototype.updateEntity2=function(){var t=new EntityRoleData;t.szId=0,t.damonId=1,t.job=1,t.wingId=1,t.sex=1,t.type=EntityType.ROLE,this.entityRole2.setData(t,7,EntityAction.STAND)},e.prototype.updateEntity=function(){var t=new EntityRoleData;t.szId=0,t.damonId=1,t.job=1,t.wingId=1,t.sex=0,t.type=EntityType.ROLE,this.entityRole.setData(t,3,EntityAction.STAND);var e=Cfg.getConfig(ShenYouHuDunAppearanceConfig,100).appearance,i=ResMgr.getEntityHuDunRes(EntityType.ROLE,e),n=MC.createCenterGruop(i,-1);n.y=50,this.groupEntity1.addChild(n)},e.prototype.close=function(){t.prototype.close.call(this),Timer.ins().removeAll(this)},e.prototype.upatePanel=function(){var t=QiyuSys.ins().shenYouData;this.nextSkillPassiveConfig=Cfg.getConfig(SkillPassiveConfig,this._skillData.id,this._skillData.isMax()?this._skillData.level:this._skillData.level+1);var e=Cfg.getConfig(SkillPassiveConfig,this._skillData.id,this._skillData.level),i=this._skillData;this.lbSkillName.text=this.nextSkillPassiveConfig.name+" Lv."+i.level;var n=Cfg.getMaxConfig(SkillPassiveConfig,this._skillData.id).level;this.lbSkillLevel.text=Lang.sy_str6+":"+n,this.lbSkillDesc.textFlow=StrUtil.toTF(Cfg.getConfig(ShenYouBaseConfig).skillViewDesc),this.lbSkillXiaoGuo1.textFlow=StrUtil.toTF(this.nextSkillPassiveConfig.skinname),this.imgIcon.source=ResMgr.getSkillPassivityItemName(i.id,i.level>0);var a=SkillSys.ins().isSkillPassivityUp(i);this.btnSend.label=i.level>0?Lang.common_str37:Lang.guild_str47;var o="";i.level>0?Lang.skill_str27:Lang.skill_str26,o+=""+Lang.sy_str7+e.typeLevel+Lang.sy_str8+(0==i.level?Lang.guild_str47:Lang.common_str37)+" ";var s=null==e.item.id;if(s){this.groupAct.visible=!a;var r=addColor(t.yinjiLevel+"/"+e.typeLevel,15733780);this.lbYinJiLevel.textFlow=addColorTF("("+Lang.sy_str9+":"+r+")"),this.lbAct.text=a?"":o,this.groupConsu.visible=!1,this.btnSend.enabled=a,this.btnSend.visible=a}else this.groupAct.visible=!1,this.lbAct.text="",this.groupConsu.visible=!0,this.btnSend.enabled=!0,this.btnSend.visible=!0,this.updateConsume(e.item.id);this.updateState()},e.prototype.updateState=function(){this._skillData.isMax()?(this.groupSend.visible=!1,this.imgYml.visible=!0):this.imgYml.visible=!1},e.prototype.updateConsume=function(t){var e=(QiyuSys.ins().shenYouData,Cfg.getItemCfg(t));this.imgConsu.source=ResMgr.getItemIconMin(e.getIcon());var i=BagSys.ins().getItemCount(t);this.lbConsu.text=i+" /1",this.lbConsu.textColor=i>=1?5949490:15733780},e.prototype.onTap=function(t){var e=null==this._skillData.getConfig().item.id;e?SkillSys.ins().sendSkillPassivityUp(this._skillData.id):GFunc.checkConsumeEnough(this._skillData.getConfig().item)&&SkillSys.ins().sendSkillPassivityUp(this._skillData.id)},e.prototype.entityPlay=function(){var t=this,e=new MC;e.playFile(getEffName(this.skillMCName),1,function(){Timer.ins()["do"](2e3,0,1,t.entityPlay,t)}),this.groupMC.addChild(e)},e}(BaseWinSingle);__reflect(ShenYouYinJiSkillShowWin2.prototype,"ShenYouYinJiSkillShowWin2"),window.ShenYouYinJiSkillShowWin2=ShenYouYinJiSkillShowWin2;var ShouYouYinJiComponent=function(t){function e(){var e=t.call(this)||this;return e.skinName="ShouYouYinJiComponentEUI",e}return __extends(e,t),e.prototype.setValue=function(t,e){if(e!=this.groupItem.numChildren){this.groupItem.removeChildren(),this.groupStar.removeChildren();for(var i=0;e>i;i++){var n=new eui.Image("zz");n.width=n.height=16,this.groupStar.addChild(n);var a=new ShouYouYinJiComponentItem;this.groupItem.addChild(a)}}for(var i=0;e>i;i++){var a=this.groupItem.getElementAt(i);a&&(a.data=t>i)}},e.prototype.reset=function(){this.groupItem.removeChildren(),this.groupStar.removeChildren()},e}(eui.Component);__reflect(ShouYouYinJiComponent.prototype,"ShouYouYinJiComponent"),window.ShouYouYinJiComponent=ShouYouYinJiComponent;var ShouYouYinJiComponentItem=function(t){function e(){var e=t.call(this)||this;return e.mc=new MC,e.b=!1,e.width=e.height=16,e.addChild(e.mc),e.mc.x=e.width/2,e.mc.y=e.height/2,e}return __extends(e,t),e.prototype.dataChanged=function(){var t=this,e=this.b;this.b=this.data,0==e&&1==this.b?(this.playMC1(),Timer.ins()["do"](300,1,1,function(){t.playMC2()},this)):1==e&&0==this.b&&(this.mc.stop(),this.mc.visible=!1,this.playMC3())},e.prototype.playMC1=function(){var t=new MC;t.x=this.width/2,t.y=this.height/2,t.playFile(getEffName("syxl"),1),this.addChild(t)},e.prototype.playMC2=function(){this.mc.playFile(getEffName("syhq"),-1)},e.prototype.playMC3=function(){var t=new MC;t.x=this.width/2,t.y=this.height/2,t.playFile(getEffName("syb"),1),this.addChild(t)},e}(eui.ItemRenderer);__reflect(ShouYouYinJiComponentItem.prototype,"ShouYouYinJiComponentItem"),window.ShouYouYinJiComponentItem=ShouYouYinJiComponentItem;var LoginInvestConfig=function(){function t(){}return t}();__reflect(LoginInvestConfig.prototype,"LoginInvestConfig");var LoginNoticeConfig=function(){function t(){}return t}();__reflect(LoginNoticeConfig.prototype,"LoginNoticeConfig");var LoginRewardsConfig=function(){function t(){}return t}();__reflect(LoginRewardsConfig.prototype,"LoginRewardsConfig");var MainTaskConfig=function(){function t(){}return t}();__reflect(MainTaskConfig.prototype,"MainTaskConfig");var MateCommonConfig=function(){function t(){}return t}();__reflect(MateCommonConfig.prototype,"MateCommonConfig");var MateDailyQuestConfig=function(){function t(){}return t}();__reflect(MateDailyQuestConfig.prototype,"MateDailyQuestConfig");var ShopYunBiaoPanelItem=function(t){function e(){var e=t.call(this)||this;return e.skinName="ShopYunBiaoPanelItemEUI",e.setSkinPart("item",new ItemShop),e.setSkinPart("priceIcon",new PriceIcon),e}return __extends(e,t),e.prototype.dataChanged=function(){var t=this.data;this.btnBuy.name="btnBuy_"+this.itemIndex,this.labelName.textFlow=GFunc.getItemName1(t.config.id);var e=ShopSys.ins().getDayCountName(t.config.daycount.type);this.labelDesc.text=e+"："+t.buyCount+"/"+t.config.daycount.count,this.labelDesc.visible=0!=t.config.daycount.count;var i=t.canBuy();this.btnBuy.visible=i,this.labelMax.visible=!i,this.item.data=t.getItemSell(),this.priceIcon.setData(t.getConsumeItem())},e}(MallItemPanelItemBase);__reflect(ShopYunBiaoPanelItem.prototype,"ShopYunBiaoPanelItem"),window.ShopYunBiaoPanelItem=ShopYunBiaoPanelItem;var MateGiftConfig=function(){function t(){}return t}();__reflect(MateGiftConfig.prototype,"MateGiftConfig");var BuyWin1=function(t){function e(){var e=t.call(this)||this;return e._num=1,e}return __extends(e,t),e.prototype.setSkinName=function(){this.skinName="BuyCountSkinNew3"},e.prototype.initUI=function(){t.prototype.initUI.call(this),this.addBg(),this.setSkinPart("itemIcon",new ItemIcon),this.setSkinPart("allPrice",new PriceIcon),this.gainList.itemRenderer=GainGoodsItem,this.gainList.dataProvider=this.gainListData=new eui.ArrayCollection},e.prototype.open=function(e){t.prototype.open.call(this),this.buyData=e,this._num=e.count,this.addItemTapE(this.gainList,this.onTouchList),this.addClickE(this.buyBtn,this.onClick),this.addClickE(this.btnRecharge,this.onClick),this.addClickE(this.checkBoxs,this.onClick),this.updateView()},e.prototype.updateView=function(){var t=Cfg.getItemCfg(this.buyData.itemId);this.itemIcon.setDataByItemConfig(t),this.allPrice.setType(this.buyData.consumeItemId),this.allPrice.setPrice(this.buyData.getTotalPrice(this._num)),this.numLabel.text="是否花费仙玉购买"+this._num+"个";var e=GFunc.getGainItemWayConfig(t.id);if(e.length>0){this.groupGain.scaleY=this.gainList.scaleY=1,this.gainListData.source=e;var i=e.length>4?4:e.length;this.gainList.width=94*i+35*(i-1)}else this.groupGain.scaleY=this.gainList.scaleY=0},e.prototype.onClick=function(t){switch(t.target){case this.btnRecharge:openWin(RechargeWin);break;case this.buyBtn:GFunc.checkCurrency(this.buyData.consumeItemId,this.buyData.getTotalPrice(this._num))&&(this.buyData.buyFun.param=[this._num],this.buyData.buyFun.call(),closeWin(this));break;case this.checkBoxs:var e=this.checkBoxs.selected;this.buyData.saveKey&&TipsSys.ins().setSaveRemind(this.buyData.saveKey,e)}},e.prototype.buy=function(t){},e.prototype.onTouchList=function(t){var i=t.item;if(null!=t.item){var n=GFunc.createTaskNavData(i.controlTarget);n.setsucceedFrontFun(function(){WinMgr.ins().closeAllWin(),closeWin(e)}),n["goto"](i.sysid)}},e}(BaseWin);__reflect(BuyWin1.prototype,"BuyWin1"),window.BuyWin1=BuyWin1;var MateLevelConfig=function(){function t(){}return t}();__reflect(MateLevelConfig.prototype,"MateLevelConfig");var BuyWinCount=function(t){function e(){return t.call(this)||this}return __extends(e,t),e.prototype.setSkinName=function(){this.skinName="BuyCountSkinNew2"},e.prototype.updatePrice=function(){this.allPrice.setType(this.buyData.consumeItemId),this.allPrice.setPrice(this.buyData.getTotalPrice(this.num))},e}(BuyWinBase);__reflect(BuyWinCount.prototype,"BuyWinCount"),window.BuyWinCount=BuyWinCount;var MateQuestConfig=function(){function t(){}return t}();__reflect(MateQuestConfig.prototype,"MateQuestConfig");var BuyDataNoLimit=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return __extends(e,t),Object.defineProperty(e.prototype,"maxBuyCount",{get:function(){return 9999},enumerable:!0,configurable:!0}),e}(BuyData);__reflect(BuyDataNoLimit.prototype,"BuyDataNoLimit");var BuyDataPrices=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.buyCount=0,e.prices=[],e}return __extends(e,t),Object.defineProperty(e.prototype,"maxBuyCount",{get:function(){for(var t=0,e=0,i=GFunc.getItemCount(this.consumeItemId),n=this.buyCount;n<this.prices.length;n++)t+=this.prices[n],i>=t&&e++;return e},enumerable:!0,configurable:!0}),e.prototype.getTotalPrice=function(t){for(var e=0,i=this.prices.slice(this.buyCount,this.buyCount+t),n=0;n<i.length;n++)e+=i[n];return e},e}(BuyData);__reflect(BuyDataPrices.prototype,"BuyDataPrices");var MallItemData=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.index=1,e}return __extends(e,t),Object.defineProperty(e.prototype,"config",{get:function(){return this._config||(this._config=Cfg.getConfig(StoreItemConfig,this.index))},enumerable:!0,configurable:!0}),e.prototype.getConsumeItem=function(){return GFunc.creatRewardDataById(CurType.yb,this.getPrice())},e.prototype.getItemSell=function(){return GFunc.creatRewardDataById(this.getItemId(),this.config.count)},e.prototype.getItemId=function(){return this.config.itemId},e.prototype.getPrice=function(){return this.config.price},e.prototype.canBuy=function(){return!0},e.prototype.getLeftBuyCount=function(){return 9999},Object.defineProperty(e.prototype,"sort",{get:function(){return this.config.sort},enumerable:!0,configurable:!0}),e.prototype.sendBuy=function(t,e){var i=Cfg.getConfig(StoreItemConfig,CondType.Equal,StoreItemConfig.itemId,this.config.itemId);ShopSys.ins().sendItemShopBuy([[i.index,e]])},e.prototype.isFastBuy=function(){return 1==this.config.faseBuy},e}(ShopBaseData);__reflect(MallItemData.prototype,"MallItemData");var MallSVIPData=function(){function t(){this.configIndex=1,this.buyCount=0}return Object.defineProperty(t.prototype,"config",{get:function(){return this._config||(this._config=Cfg.getConfig(SvipStoreConfig,this.configIndex))},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"sort",{get:function(){return this.config.sort},enumerable:!0,configurable:!0}),t.prototype.canBuy=function(){return this.config.daycount.count>this.buyCount||0==this.config.daycount.count},t.prototype.getLeftBuyCount=function(){return this.config.daycount.count-this.buyCount},t.prototype.getConsumeItem=function(){return GFunc.creatRewardDataById(CurType.yb,this.config.yuanbao)},t.prototype.getItemId=function(){return this.config.id},t.prototype.getPrice=function(){return this.config.yuanbao},t}();__reflect(MallSVIPData.prototype,"MallSVIPData");var MallXGTHData=function(){function t(){this.configIndex=1,this.buyCount=0}return Object.defineProperty(t.prototype,"config",{get:function(){return this._config||(this._config=Cfg.getConfig(LimitStoreConfig,this.configIndex))},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"sort",{get:function(){return this.config.sort},enumerable:!0,configurable:!0}),t.prototype.canBuy=function(){return this.config.daycount.count>this.buyCount||0==this.config.daycount.count},t.prototype.canFreeBuy=function(){return this.canBuy()&&0==this.config.zhekou},t.prototype.getItemId=function(){return this.config.id},t.prototype.getLeftCount=function(){return this.config.daycount.count-this.buyCount},t}();__reflect(MallXGTHData.prototype,"MallXGTHData");var MizangHuangguanData=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return __extends(e,t),Object.defineProperty(e.prototype,"config",{get:function(){return this._config||(this._config=Cfg.getConfig(CrownStoreConfig,this.configIndex))},enumerable:!0,configurable:!0}),e}(ShopBossData);__reflect(MizangHuangguanData.prototype,"MizangHuangguanData");var MizangXingshiData=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return __extends(e,t),Object.defineProperty(e.prototype,"config",{get:function(){return this._config||(this._config=Cfg.getConfig(StarStoreConfig,this.configIndex))},enumerable:!0,configurable:!0}),e}(ShopBossData);__reflect(MizangXingshiData.prototype,"MizangXingshiData");var MateReqStrConfig=function(){function t(){}return t}();__reflect(MateReqStrConfig.prototype,"MateReqStrConfig");var MateRingConfig=function(){function t(){}return t}();__reflect(MateRingConfig.prototype,"MateRingConfig");var ShopCampData=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return __extends(e,t),Object.defineProperty(e.prototype,"config",{get:function(){return this._config||(this._config=Cfg.getConfig(StoreCamp,this.configIndex))},enumerable:!0,configurable:!0}),e.prototype.getConsumeItem=function(){return GFunc.creatRewardDataById(CurType.CampWar,this.config.camp)},e.prototype.getItemSell=function(){return GFunc.creatRewardDataById(this.config.id,this.config.count)},e.prototype.getSellCount=function(){return this.config.count},e.prototype.getItemId=function(){return this.config.id},e.prototype.getPrice=function(){return this.config.camp},e.prototype.canBuy=function(){return this.buyCount<this.config.daycount.count||0==this.config.daycount.count},e.prototype.getLeftBuyCount=function(){return 0==this.config.daycount.count?9999:this.config.daycount.count-this.buyCount},e.prototype.sendBuy=function(t,e){ShopSys.ins().sendCampBuy(t,e)},e}(ShopBaseData);__reflect(ShopCampData.prototype,"ShopCampData");var ShopDataBase=function(){function t(){this.index=0,this.curType=CurType.yb,this.curCount=0,this.buyCount=0,this.discount=0,this.isXiyou=!1,this._job=0}return Object.defineProperty(t.prototype,"config",{get:function(){return null},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"job",{get:function(){return JobConst.ZhanShi},enumerable:!0,configurable:!0}),t}();__reflect(ShopDataBase.prototype,"ShopDataBase");var ShopRongyuData=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return __extends(e,t),Object.defineProperty(e.prototype,"config",{get:function(){return this._config||(this._config=Cfg.getConfig(StoreHonor,this.configIndex))},enumerable:!0,configurable:!0}),e.prototype.getConsumeItem=function(){return GFunc.creatRewardDataById(CurType.JJCHoner,this.config.honor)},e.prototype.getItemSell=function(){return GFunc.creatRewardDataById(this.config.id)},e.prototype.getItemId=function(){return this.config.id},e.prototype.getPrice=function(){return this.config.honor},e.prototype.canBuy=function(){return this.buyCount<this.config.daycount.count||0==this.config.daycount.count},e.prototype.getLeftBuyCount=function(){return 0==this.config.daycount.count?9999:this.config.daycount.count-this.buyCount},e}(ShopBaseData);__reflect(ShopRongyuData.prototype,"ShopRongyuData");var ShopYongZheData=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return __extends(e,t),Object.defineProperty(e.prototype,"config",{get:function(){return this._config||(this._config=Cfg.getConfig(YongzheStoreConfig,this.type,this.configIndex))},enumerable:!0,configurable:!0}),e.prototype.getConsumeItem=function(){return GFunc.creatRewardDataById(this.config.needitem,this.config.needcount)},e.prototype.getItemSell=function(){return GFunc.creatRewardDataById(this.config.id,this.config.count)},e.prototype.getItemId=function(){return this.config.id},e.prototype.getPrice=function(){return this.config.needcount},e.prototype.canBuy=function(){return this.buyCount<this.config.daycount.count||0==this.config.daycount.count},e.prototype.isGuanQin=function(){return FbSys.ins().yongZheModel.floorId-1<this.config.needcustom},e.prototype.getLeftBuyCount=function(){return 0==this.config.daycount.count?9999:this.config.daycount.count-this.buyCount},e.prototype.sendBuy=function(t,e){ShopSys.ins().sendYongZheBuy(this.type,t,e)},e.prototype.getBuyData=function(){var t=this,e=new BuyData;return e.setBuyFun(function(e){t.sendBuy(t.configIndex,e)}),e.itemId=this.getItemId(),e.price=this.getPrice(),e.consumeItemId=this.getConsumeItem().id,e.limitCount=this.getLeftBuyCount(),e.itemCount=this.getItemSell().count,e},e.prototype.isFastBuy=function(){return!1},e}(ShopBaseData);__reflect(ShopYongZheData.prototype,"ShopYongZheData");var ShopYunBiaoData=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return __extends(e,t),Object.defineProperty(e.prototype,"config",{get:function(){return this._config||(this._config=Cfg.getConfig(DartStoreConfig,this.configIndex))},enumerable:!0,configurable:!0}),e.prototype.getConsumeItem=function(){return GFunc.creatRewardDataById(this.config.needitem,this.config.needcount)},e.prototype.getItemSell=function(){return GFunc.creatRewardDataById(this.config.id,this.config.count)},e.prototype.getItemId=function(){return this.config.id},e.prototype.getPrice=function(){return this.config.needcount},e.prototype.canBuy=function(){return this.buyCount<this.config.daycount.count||0==this.config.daycount.count},e.prototype.getLeftBuyCount=function(){return 0==this.config.daycount.count?9999:this.config.daycount.count-this.buyCount},e.prototype.sendBuy=function(t,e){ShopSys.ins().sendYunBiaoBuy(t,e)},e.prototype.isFastBuy=function(){return!1},e}(ShopBaseData);__reflect(ShopYunBiaoData.prototype,"ShopYunBiaoData");var MCIconConfig=function(){function t(){}return t}();__reflect(MCIconConfig.prototype,"MCIconConfig");var MeilinAppearanceConfig=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return __extends(e,t),e}(AppearanceConfig);__reflect(MeilinAppearanceConfig.prototype,"MeilinAppearanceConfig");var MallItemPanelItem=function(t){function e(){var e=t.call(this)||this;return e.skinName="MallItemPanelItemEUI",e.setSkinPart("item",new ItemShop),e.setSkinPart("priceIcon",new PriceIcon),e.priceIcon.setType(CurType.yb),e}return __extends(e,t),e.prototype.dataChanged=function(){this.btnBuy.name="btnBuy_"+this.itemIndex;var t=this.data,e=t.config;this.priceIcon.setPrice(e.price),this.labelName.textFlow=GFunc.getItemName1(e.itemId),this.labelDesc.text=e.use,this.item.data=GFunc.creatRewardDataById(e.itemId,e.count),this.btnBuy.redPoint.visible=RpSys.ins().getData(ExtCom,ShopWin,MallItemPanel,e.itemId)},e}(MallItemPanelItemBase);__reflect(MallItemPanelItem.prototype,"MallItemPanelItem"),window.MallItemPanelItem=MallItemPanelItem;var MeilinConstConfig=function(){function t(){}return t}();__reflect(MeilinConstConfig.prototype,"MeilinConstConfig");var MeilinHuanhuaBaseConfig=function(){function t(){}return t}();__reflect(MeilinHuanhuaBaseConfig.prototype,"MeilinHuanhuaBaseConfig");var MallSVIPPanelItem=function(t){function e(){var e=t.call(this)||this;return e.skinName="MallXGTHPanelItemEUI",e.priceIconOld.setType(CurType.yb),e.priceIcon.setType(CurType.yb),e}return __extends(e,t),e.prototype.dataChanged=function(){var t=this.data;this.currentState="svip",this.validateNow(),this.btnBuy.name="btnBuy_"+this.itemIndex,this.btnFree.name="btnFree_"+this.itemIndex;var e=t.config;this.priceIconOld.setPrice(e.before),this.priceIcon.setPrice(e.yuanbao),this.labelName.textFlow=GFunc.getItemName1(e.id);var i=ShopSys.ins().getDayCountName(e.daycount.type);this.labelDesc.text=i+"："+t.buyCount+"/"+e.daycount.count,this.item.data=GFunc.creatRewardDataById(e.id),this.bmpLabelDiscount.text=""+e.zhekou/10;var n=t.canBuy();this.groupFree.visible=n&&0==t.config.zhekou,this.groupDiscount.visible=n&&t.config.zhekou>0,this.labelMax.visible=!n;
var a=Actor.ins().sVipLv>=e.svip;this.groupSVip.visible=!a,a||(this.imgSVIPLv.source="store_zycs_sv"+e.svip),this.btnBuy.visible=this.btnFree.visible=a},e}(MallItemPanelItemBase);__reflect(MallSVIPPanelItem.prototype,"MallSVIPPanelItem"),window.MallSVIPPanelItem=MallSVIPPanelItem;var MeilinHuanhuaGroupConfig=function(){function t(){}return t}();__reflect(MeilinHuanhuaGroupConfig.prototype,"MeilinHuanhuaGroupConfig");var MallXGTHPanelItem=function(t){function e(){var e=t.call(this)||this;return e.skinName="MallXGTHPanelItemEUI",e.priceIconOld.setType(CurType.yb),e.priceIcon.setType(CurType.yb),e}return __extends(e,t),e.prototype.dataChanged=function(){var t=this.data;this.currentState="xgth",this.btnBuy.name="btnBuy_"+this.itemIndex,this.btnFree.name="btnFree_"+this.itemIndex;var e=t.config;this.priceIconOld.setPrice(e.before),this.priceIcon.setPrice(e.yuanbao),this.labelName.textFlow=GFunc.getItemName1(e.id);var i=ShopSys.ins().getDayCountName(e.daycount.type);this.labelDesc.text=i+"："+t.buyCount+"/"+e.daycount.count,this.item.data=GFunc.creatRewardDataById(e.id,e.count),this.bmpLabelDiscount.text=""+e.zhekou/10;var n=t.canBuy();this.groupFree.visible=t.canFreeBuy(),this.groupDiscount.visible=n&&t.config.zhekou>0,this.labelMax.visible=!n,this.imgActIcon.visible=e.actday==Actor.ins().serverOpenDay,this.updateRp()},e.prototype.updateRp=function(){var t=this.data;t&&(this.btnFree.redPoint.visible=RpSys.ins().getData(ShopWin,MallPanel,MallXGTHPanel,t.configIndex))},e.prototype.removeDisplay=function(){egret.Tween.removeTweens(this.imgActIcon)},e.prototype.addDisplay=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];GFunc.zoom(this.imgActIcon,1,1.2,0,500)},e}(MallItemPanelItemBase);__reflect(MallXGTHPanelItem.prototype,"MallXGTHPanelItem"),window.MallXGTHPanelItem=MallXGTHPanelItem;var MeilinLevelConfig=function(){function t(){}return t}();__reflect(MeilinLevelConfig.prototype,"MeilinLevelConfig");var MizangHuangguanPanelItem=function(t){function e(){return t.call(this)||this}return __extends(e,t),e}(ShopBossPanelItem);__reflect(MizangHuangguanPanelItem.prototype,"MizangHuangguanPanelItem"),window.MizangHuangguanPanelItem=MizangHuangguanPanelItem;var MeilinPillConfig=function(){function t(){}return t}();__reflect(MeilinPillConfig.prototype,"MeilinPillConfig");var MizangXingshiPanelItem=function(t){function e(){return t.call(this)||this}return __extends(e,t),e}(ShopBossPanelItem);__reflect(MizangXingshiPanelItem.prototype,"MizangXingshiPanelItem"),window.MizangXingshiPanelItem=MizangXingshiPanelItem;var MeilinPillMaxConfig=function(){function t(){}return Object.defineProperty(t,"max",{get:function(){return"max"},enumerable:!0,configurable:!0}),t}();__reflect(MeilinPillMaxConfig.prototype,"MeilinPillMaxConfig");var MineCommonConfig=function(){function t(){}return t}();__reflect(MineCommonConfig.prototype,"MineCommonConfig");var MineFBConfig=function(){function t(){}return t}();__reflect(MineFBConfig.prototype,"MineFBConfig");var ShopCampPanelItem=function(t){function e(){var e=t.call(this)||this;return e.skinName="ShopCampPanelItemEUI",e.setSkinPart("item",new ItemShop),e.setSkinPart("priceIcon",new PriceIcon),e}return __extends(e,t),e.prototype.dataChanged=function(){var t=this.data;this.btnBuy.name="btnBuy_"+this.itemIndex,this.labelName.textFlow=GFunc.getItemName1(t.config.id);var e=ShopSys.ins().getDayCountName(t.config.daycount.type);this.labelDesc.text=e+"："+t.buyCount+"/"+t.config.daycount.count,this.labelDesc.visible=0!=t.config.daycount.count;var i=t.canBuy();this.btnBuy.visible=i,this.labelMax.visible=!i,this.item.data=t.getItemSell(),this.priceIcon.setData(t.getConsumeItem())},e}(MallItemPanelItemBase);__reflect(ShopCampPanelItem.prototype,"ShopCampPanelItem"),window.ShopCampPanelItem=ShopCampPanelItem;var MinerConfig=function(){function t(){}return t}();__reflect(MinerConfig.prototype,"MinerConfig");var ShopRongyuPanelItem=function(t){function e(){var e=t.call(this)||this;return e.skinName="ShopRongyuPanelItemEUI",e.setSkinPart("item",new ItemShop),e.setSkinPart("priceIcon",new PriceIcon),e}return __extends(e,t),e.prototype.dataChanged=function(){var t=this.data;this.btnBuy.name="btnBuy_"+this.itemIndex,this.labelName.textFlow=GFunc.getItemName1(t.config.id);var e=ShopSys.ins().getDayCountName(t.config.daycount.type);this.labelDesc.text=e+"："+t.buyCount+"/"+t.config.daycount.count,this.labelDesc.visible=0!=t.config.daycount.count;var i=t.canBuy();this.btnBuy.visible=i,this.labelMax.visible=!i,this.item.data=t.getItemSell(),this.priceIcon.setData(t.getConsumeItem())},e}(MallItemPanelItemBase);__reflect(ShopRongyuPanelItem.prototype,"ShopRongyuPanelItem"),window.ShopRongyuPanelItem=ShopRongyuPanelItem;var MolongCommonConfig=function(){function t(){}return t}();__reflect(MolongCommonConfig.prototype,"MolongCommonConfig");var ShopYongZheDailyPanelItem=function(t){function e(){var e=t.call(this)||this;return e.skinName="ShopYongZhePanelItemEUI",e.setSkinPart("item",new ItemShop),e.setSkinPart("priceIcon",new PriceIcon),e.btnBuy.redPoint.visible=!0,e}return __extends(e,t),e.prototype.dataChanged=function(){var t=this.data;if(t instanceof ShopYongZheData){if(this.btnBuy.name="btnBuy_"+this.itemIndex,this.labelName.textFlow=GFunc.getItemName1(t.config.id),t.isGuanQin()){this.lblimit.visible=!1,this.lbneedcustom.visible=!0;var e=Cfg.getConfig(YongzheFubenConfig,t.config.needcustom);this.lbneedcustom.textFlow=addColorTF(addColor(e.name+e.index+"关",15733780)+"可购买"),this.btnBuy.visible=this.labelMax.visible=!1}else{this.lbneedcustom.visible=!1,this.lblimit.visible=!0;var i=t.canBuy(),n=Lang.shop_str20;this.lblimit.text=n+"："+t.buyCount+"/"+t.config.daycount.count,this.btnBuy.visible=i,this.labelMax.visible=!i}this.item.data=t.getItemSell(),this.priceIcon.setData(t.getConsumeItem())}},e}(MallItemPanelItemBase);__reflect(ShopYongZheDailyPanelItem.prototype,"ShopYongZheDailyPanelItem"),window.ShopYongZheDailyPanelItem=ShopYongZheDailyPanelItem;var MolongFubenConfig=function(){function t(){}return Object.defineProperty(t,"zslevel",{get:function(){return"zslevel"},enumerable:!0,configurable:!0}),Object.defineProperty(t,"fbId",{get:function(){return"fbId"},enumerable:!0,configurable:!0}),t}();__reflect(MolongFubenConfig.prototype,"MolongFubenConfig");var ShopYongZheFirstPanelItem=function(t){function e(){var e=t.call(this)||this;return e.skinName="ShopYongZhePanelItemEUI",e.setSkinPart("item",new ItemShop),e.setSkinPart("priceIcon",new PriceIcon),e}return __extends(e,t),e.prototype.dataChanged=function(){var t=this.data;if(t instanceof ShopYongZheData){if(this.btnBuy.name="btnBuy_"+this.itemIndex,this.labelName.textFlow=GFunc.getItemName1(t.config.id),t.isGuanQin()){this.lblimit.visible=!1,this.lbneedcustom.visible=!0;var e=Cfg.getConfig(YongzheFubenConfig,t.config.needcustom);this.lbneedcustom.textFlow=addColorTF(addColor(e.name+e.index+"关",15733780)+"可购买"),this.btnBuy.visible=this.labelMax.visible=!1}else{this.lbneedcustom.visible=!1,this.lblimit.visible=!0;var i=t.canBuy(),n=Lang.shop_str21;this.lblimit.text=n+"："+t.buyCount+"/"+t.config.daycount.count,this.btnBuy.visible=i,this.labelMax.visible=!i}this.item.data=t.getItemSell(),this.priceIcon.setData(t.getConsumeItem())}},e}(MallItemPanelItemBase);__reflect(ShopYongZheFirstPanelItem.prototype,"ShopYongZheFirstPanelItem"),window.ShopYongZheFirstPanelItem=ShopYongZheFirstPanelItem;var MolongInspireConfig=function(){function t(){}return t}();__reflect(MolongInspireConfig.prototype,"MolongInspireConfig");var MonsterModelConfig=function(){function t(){}return t}();__reflect(MonsterModelConfig.prototype,"MonsterModelConfig");var DamonModel=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.huanHuaDatas=[],e.yinJiDatas=[],e.moZhenDatas=[],e}return __extends(e,t),e.prototype.getLevelConfig=function(){return this.levelConfig&&this.levelConfig.level==this.level||(this.levelConfig=Cfg.getConfig(DamonLevelConfig,this.level)),this.levelConfig},e.prototype.getLevelNextConfig=function(){return(!this.levelNextConfig||this.levelNextConfig.level<=this.level)&&(this.levelNextConfig=Cfg.getNextConfig(DamonLevelConfig,this.level)),this.levelNextConfig},e.prototype.getStageConfig=function(){return this.stageConfig&&this.stageConfig.stagelevel==this.stageLevel||(this.stageConfig=Cfg.getConfig(DamonStageConfig,this.stageLevel)),this.stageConfig},e.prototype.getStageNextConfig=function(){return(!this.stageNextConfig||this.stageNextConfig.stagelevel<=this.stageLevel)&&(this.stageNextConfig=Cfg.getNextConfig(DamonStageConfig,this.stageLevel)),this.stageNextConfig},e.prototype.parserInfo=function(t){this.useId=t.readInt(),this.moZhenId=t.readShort(),this.level=t.readShort(),this.levelExp=t.readInt(),this.stageLevel=t.readShort(),this.stageExp=t.readInt();for(var e=t.readByte(),i=0;e>i;i++){var n=t.readInt(),a=t.readShort(),o=this.getHuanHuaDataById(n);o.level=a}e=t.readByte();for(var s=0;e>s;s++){var n=t.readByte(),a=t.readShort(),o=this.getYinJuDataById(n);o.setLv(a)}e=t.readByte();for(var r=0;e>r;r++){var n=t.readShort(),a=t.readShort(),o=this.getMoZhenDataById(n);o.level=a}},e.prototype.parserLevelUp=function(t){this.level=t.readShort(),this.levelExp=t.readInt()},e.prototype.parserStageUp=function(t){this.stageLevel=t.readShort(),this.stageExp=t.readInt()},e.prototype.parserHuanHuaUp=function(t){var e=t.readInt(),i=t.readShort(),n=this.getHuanHuaDataById(e);return n.level=i,n},e.prototype.parserYinJiUp=function(t){var e=t.readByte(),i=t.readShort(),n=this.getYinJuDataById(e);n.setLv(i)},e.prototype.parserMoZhenUp=function(t){var e=t.readShort(),i=t.readShort(),n=this.getMoZhenDataById(e);return n.level=i,n},e.prototype.parserHuanHua=function(t){this.useId=t.readInt()},e.prototype.parserMoZhenHuanHua=function(t){this.moZhenId=t.readShort()},e.prototype.getHuanHuaDataById=function(t){return this.huanHuaDatas[t]||(this.huanHuaDatas[t]=new DamonHuanHuaData(t))},e.prototype.getHuanHuaDatas=function(){for(var t=[],e=0,i=Cfg.getConfig(DamonConstConfig).huanhuaIds;e<i.length;e++){var n=i[e];t.push(this.getHuanHuaDataById(n))}return t},e.prototype.getYinJuDataById=function(t){return this.yinJiDatas[t-1]||(this.yinJiDatas[t-1]=new DamonYinJiData(t))},e.prototype.getYinJuDatas=function(){return this.yinJiDatas},e.prototype.getMoZhenDataById=function(t){return this.moZhenDatas[t-1]||(this.moZhenDatas[t-1]=new DamonMoZhenData(t))},e.prototype.getMoZhenDatas=function(){return this.moZhenDatas},e.prototype.getMoZhenGroupNames=function(){return Cfg.getDamonMozhenGroupConfigNames()},e.prototype.getMoZhenDatasByGroupId=function(t){for(var e=[],i=Cfg.getConfig(DamonMozhenGroupConfig,t),n=0,a=i.huanhuaIds;n<a.length;n++){var o=a[n];e.push(this.getMoZhenDataById(o))}return e},e.prototype.getLevelAttrDatas=function(){for(var t=[],e=this.getLevelConfig(),i=this.getLevelNextConfig(),n=e.baseAttrs.length,a=0;n>a;a++){var o=e.baseAttrs[a],s=i.baseAttrs[a],r=new ComAttrData(o,s,e.level>=i.level);t.push(r)}return t},e.prototype.getStageAttrDatas=function(){for(var t=[],e=this.getStageConfig(),i=this.getStageNextConfig(),n=e.baseAttrs.length,a=0;n>a;a++){var o=e.baseAttrs[a],s=i.baseAttrs[a],r=new ComAttrData(o,s,e.stagelevel>=i.stagelevel);t.push(r)}return t},e.prototype.getYinJiAttrDatas=function(t){for(var e=[],i=t.getConfig(),n=i.baseAttrs.length,a=0;n>a;a++){var o=new AttrData(i.baseAttrs[a].type,i.baseAttrs[a].value*t.getLv()),s=new AttrData(i.baseAttrs[a].type,i.baseAttrs[a].value*(t.getLv()+1)),r=new ComAttrData(o,s,t.isMax());e.push(r)}return e},e.prototype.getYinJiAttrDatasAll=function(){var t=[];for(var e in this.yinJiDatas){var i=this.yinJiDatas[e],n=AttrData.attrMultiple(i.getConfig().baseAttrs,i.getLv());t=AttrData.mergeAttr(n,t)}return t},e.prototype.getMoZhenAttrDatas=function(t){for(var e=[],i=t.getConfig(),n=t.getAttrsByLv(),a=t.getAttrsByLv(t.level+1),o=t.level>=i.maxLevel,s=n.length,r=0;s>r;r++){var u=new ComAttrData(n[r],a[r],o);e.push(u)}return e},e.prototype.getMoZhenDatasAll=function(){var t=[];for(var e in this.moZhenDatas){var i=this.moZhenDatas[e];t=AttrData.mergeAttr(i.getAttrsByLv(),t)}return t},e.prototype.getHuanHuaAttrDatas=function(t){for(var e=[],i=t.getConfig(),n=t.getAttrsByLv(),a=t.getAttrsByLv(t.level+1),o=t.level>=i.maxLevel,s=n.length,r=0;s>r;r++){var u=new ComAttrData(n[r],a[r],o);e.push(u)}return e},e.prototype.getHuanHuaAttrDatasAll=function(){var t=[];for(var e in this.huanHuaDatas){var i=this.huanHuaDatas[e];t=AttrData.mergeAttr(i.getAttrsByLv(),t)}return t},e.prototype.getLevelPower=function(){return GFunc.getPower(this.getLevelConfig().baseAttrs)>>0},e.prototype.getStagePower=function(){return GFunc.getPower(this.getStageConfig().baseAttrs)>>0},e.prototype.getYinJinPower=function(){var t=0;for(var e in this.yinJiDatas){var i=this.yinJiDatas[e];if(i.getLv()>0){var n=AttrData.attrMultiple(i.getConfig().baseAttrs,i.getLv());t+=GFunc.getPower(n)>>0}}return t},e.prototype.getMoZhenPower=function(){var t=0;for(var e in this.moZhenDatas){var i=this.moZhenDatas[e];i.level>0&&(t+=GFunc.getPower(i.getAttrsByLv())>>0)}return t},e.prototype.getHuanHuaPower=function(){var t=0;for(var e in this.huanHuaDatas){var i=this.huanHuaDatas[e];i.level>0&&(t+=GFunc.getPower(i.getAttrsByLv())>>0)}return t},e.prototype.getLevelMaxExp=function(){return this.getLevelConfig().needexp},e.prototype.getStage=function(){return this.getStageConfig().stage},e.prototype.getStageMaxExp=function(){return this.getStageConfig().needexp},e.prototype.getStart=function(t){var e=0;return t<this.getStageConfig().stage?e=this.getStarPerLevel():t==this.getStageConfig().stage?this.stageLevel>0?(e=this.stageLevel%this.getStarPerLevel(),e=e>0?e:this.getStarPerLevel()):e=0:t>this.getStageConfig().stage&&(e=0),e},e.prototype.getStarPerLevel=function(){return Cfg.getConfig(DamonConstConfig).starPerLevel},e.prototype.getStageitemid=function(){return Cfg.getConfig(DamonConstConfig).stageitemid},e.prototype.getStageitemExp=function(){return Cfg.getConfig(DamonConstConfig).stageaddexp},e.prototype.getStageskills=function(){return Cfg.getConfig(DamonConstConfig).stageskills},e.prototype.getLevelitemid=function(){return Cfg.getConfig(DamonConstConfig).levelitemid},e.prototype.getLevelitemExp=function(){return Cfg.getConfig(DamonConstConfig).leveladdexp},e.prototype.getLevelskills=function(){return Cfg.getConfig(DamonConstConfig).levelskills},e.prototype.getApperaenceId=function(){return 0},e.prototype.isMaxLv=function(){return this.getLevelConfig().level>=this.getLevelNextConfig().level},e.prototype.isMaxStage=function(){return this.getStageConfig().stagelevel>=this.getStageNextConfig().stagelevel},e.prototype.getMaxStage=function(){return Cfg.getMaxConfig(DamonStageConfig).stage},e.prototype.getZhiShengItemId=function(){return Cfg.getConfig(DamonHuanhuaBaseConfig,this.getStage()).stoneid},e.prototype.getCanUseZhiShengItemIds=function(){for(var t=[],e=Cfg.getConfigs(DamonHuanhuaBaseConfig,CondType.LessEqual,DamonHuanhuaBaseConfig.id,this.getStage()),i=0;i<e.length;i++){var n=e[i];t.push(n.stoneid)}return t},e}(DamonBaseModel);__reflect(DamonModel.prototype,"DamonModel");var MoZhenActTipsWin=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return __extends(e,t),e.prototype.updatePanel=function(t,e){var i="",n="";switch(this.mc=this.mc||new MC,this.groupEntity.addChild(this.mc),e){case 216:i="jl_zycs_mz"+t.id;break;case 217:i="yb_zycs_mz"+t.id;break;case 218:i="shenmo_zycs_mz"+t.id}this.imgName.textFlow=(new egret.HtmlTextParser).parse(t.getName()),n=Cfg.getConfig(GuanghuanAppearanceConfig,t.getApperaenceId()).appearance,n=ResMgr.getUIFootSource(n),this.mc.playFile(n,-1),this.totalPower.text=""+t.getActPower()},e}(SqXyActTipsWin);__reflect(MoZhenActTipsWin.prototype,"MoZhenActTipsWin"),window.MoZhenActTipsWin=MoZhenActTipsWin;var ShenmoModel=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.huanHuaDatas=[],e.yinJiDatas=[],e.moZhenDatas=[],e}return __extends(e,t),e.prototype.getLevelConfig=function(){return this.levelConfig&&this.levelConfig.level==this.level||(this.levelConfig=Cfg.getConfig(ShenmoLevelConfig,this.level)),this.levelConfig},e.prototype.getLevelNextConfig=function(){return(!this.levelNextConfig||this.levelNextConfig.level<=this.level)&&(this.levelNextConfig=Cfg.getNextConfig(ShenmoLevelConfig,this.level)),this.levelNextConfig},e.prototype.getStageConfig=function(){return this.stageConfig&&this.stageConfig.stagelevel==this.stageLevel||(this.stageConfig=Cfg.getConfig(ShenmoStageConfig,this.stageLevel)),this.stageConfig},e.prototype.getStageNextConfig=function(){return(!this.stageNextConfig||this.stageNextConfig.stagelevel<=this.stageLevel)&&(this.stageNextConfig=Cfg.getNextConfig(ShenmoStageConfig,this.stageLevel)),this.stageNextConfig},e.prototype.parserInfo=function(t){this.useId=t.readInt(),this.moZhenId=t.readShort(),this.level=t.readShort(),this.levelExp=t.readInt(),this.stageLevel=t.readShort(),this.stageExp=t.readInt();for(var e=t.readByte(),i=0;e>i;i++){var n=t.readInt(),a=t.readShort(),o=this.getHuanHuaDataById(n);o.level=a}e=t.readByte();for(var s=0;e>s;s++){var n=t.readByte(),a=t.readShort(),o=this.getYinJuDataById(n);o.setLv(a)}e=t.readByte();for(var r=0;e>r;r++){var n=t.readShort(),a=t.readShort(),o=this.getMoZhenDataById(n);o.level=a}},e.prototype.parserLevelUp=function(t){this.level=t.readShort(),this.levelExp=t.readInt()},e.prototype.parserStageUp=function(t){this.stageLevel=t.readShort(),this.stageExp=t.readInt()},e.prototype.parserHuanHuaUp=function(t){var e=t.readInt(),i=t.readShort(),n=this.getHuanHuaDataById(e);return n.level=i,n},e.prototype.parserYinJiUp=function(t){var e=t.readByte(),i=t.readShort(),n=this.getYinJuDataById(e);n.setLv(i)},e.prototype.parserHuanHua=function(t){this.useId=t.readInt()},e.prototype.parserMoZhenUp=function(t){var e=t.readShort(),i=t.readShort(),n=this.getMoZhenDataById(e);return n.level=i,n},e.prototype.parserMoZhenHuanHua=function(t){this.moZhenId=t.readShort()},e.prototype.getHuanHuaDataById=function(t){return this.huanHuaDatas[t]||(this.huanHuaDatas[t]=new ShenmoHuanHuaData(t))},e.prototype.getHuanHuaDatas=function(){for(var t=[],e=0,i=Cfg.getConfig(ShenmoConstConfig).huanhuaIds;e<i.length;e++){var n=i[e];t.push(this.getHuanHuaDataById(n))}return t},e.prototype.getYinJuDataById=function(t){return this.yinJiDatas[t-1]||(this.yinJiDatas[t-1]=new ShenmoYinJiData(t))},e.prototype.getYinJuDatas=function(){return this.yinJiDatas},e.prototype.getMoZhenDataById=function(t){return this.moZhenDatas[t-1]||(this.moZhenDatas[t-1]=new ShenmoMoZhenData(t))},e.prototype.getMoZhenDatas=function(){return this.moZhenDatas},e.prototype.getMoZhenGroupNames=function(){return Cfg.getShenmoMozhenGroupConfigNames()},e.prototype.getMoZhenDatasByGroupId=function(t){for(var e=[],i=Cfg.getConfig(ShenmoMozhenGroupConfig,t),n=0,a=i.huanhuaIds;n<a.length;n++){var o=a[n];e.push(this.getMoZhenDataById(o))}return e},e.prototype.getLevelAttrDatas=function(){for(var t=[],e=this.getLevelConfig(),i=this.getLevelNextConfig(),n=e.baseAttrs.length,a=0;n>a;a++){var o=e.baseAttrs[a],s=i.baseAttrs[a],r=new ComAttrData(o,s,e.level>=i.level);t.push(r)}return t},e.prototype.getStageAttrDatas=function(){for(var t=[],e=this.getStageConfig(),i=this.getStageNextConfig(),n=e.baseAttrs.length,a=0;n>a;a++){var o=e.baseAttrs[a],s=i.baseAttrs[a],r=new ComAttrData(o,s,e.stagelevel>=i.stagelevel);t.push(r)}return t},e.prototype.getYinJiAttrDatas=function(t){for(var e=[],i=t.getConfig(),n=i.baseAttrs.length,a=0;n>a;a++){var o=new AttrData(i.baseAttrs[a].type,i.baseAttrs[a].value*t.getLv()),s=new AttrData(i.baseAttrs[a].type,i.baseAttrs[a].value*(t.getLv()+1)),r=new ComAttrData(o,s,t.isMax());e.push(r)}return e},e.prototype.getYinJiAttrDatasAll=function(){var t=[];for(var e in this.yinJiDatas){var i=this.yinJiDatas[e],n=AttrData.attrMultiple(i.getConfig().baseAttrs,i.getLv());t=AttrData.mergeAttr(n,t)}return t},e.prototype.getMoZhenAttrDatas=function(t){for(var e=[],i=t.getAttrsByLv(),n=t.getAttrsByLv(t.level+1),a=t.level>=t.getConfig().maxLevel,o=i.length,s=0;o>s;s++){var r=new ComAttrData(i[s],n[s],a);e.push(r)}return e},e.prototype.getMoZhenDatasAll=function(){var t=[];for(var e in this.moZhenDatas){var i=this.moZhenDatas[e];t=AttrData.mergeAttr(i.getAttrsByLv(),t)}return t},e.prototype.getHuanHuaAttrDatas=function(t){for(var e=[],i=t.getAttrsByLv(),n=t.getAttrsByLv(t.level+1),a=t.level>=t.getConfig().maxLevel,o=i.length,s=0;o>s;s++){var r=new ComAttrData(i[s],n[s],a);e.push(r)}return e},e.prototype.getHuanHuaAttrDatasAll=function(){var t=[];for(var e in this.huanHuaDatas){var i=this.huanHuaDatas[e];t=AttrData.mergeAttr(i.getAttrsByLv(),t)}return t},e.prototype.getLevelPower=function(){return GFunc.getPower(this.getLevelConfig().baseAttrs)>>0},e.prototype.getStagePower=function(){return GFunc.getPower(this.getStageConfig().baseAttrs)>>0},e.prototype.getYinJinPower=function(){var t=0;for(var e in this.yinJiDatas){var i=this.yinJiDatas[e];if(i.getLv()>0){var n=AttrData.attrMultiple(i.getConfig().baseAttrs,i.getLv());t+=GFunc.getPower(n)>>0}}return t},e.prototype.getMoZhenPower=function(){var t=0;for(var e in this.moZhenDatas){var i=this.moZhenDatas[e];i.level>0&&(t+=GFunc.getPower(i.getAttrsByLv())>>0)}return t},e.prototype.getHuanHuaPower=function(){var t=0;for(var e in this.huanHuaDatas){var i=this.huanHuaDatas[e];i.level>0&&(t+=GFunc.getPower(i.getAttrsByLv())>>0)}return t},e.prototype.getLevelMaxExp=function(){return this.getLevelConfig().needexp},e.prototype.getStage=function(){return this.getStageConfig().stage},e.prototype.getStageMaxExp=function(){return this.getStageConfig().needexp},e.prototype.getStart=function(t){var e=0;return t<this.getStageConfig().stage?e=this.getStarPerLevel():t==this.getStageConfig().stage?this.stageLevel>0?(e=this.stageLevel%this.getStarPerLevel(),e=e>0?e:this.getStarPerLevel()):e=0:t>this.getStageConfig().stage&&(e=0),e},e.prototype.getStarPerLevel=function(){return Cfg.getConfig(ShenmoConstConfig).starPerLevel},e.prototype.getStageitemid=function(){return Cfg.getConfig(ShenmoConstConfig).stageitemid},e.prototype.getStageitemExp=function(){return Cfg.getConfig(ShenmoConstConfig).stageaddexp},e.prototype.getStageskills=function(){return Cfg.getConfig(ShenmoConstConfig).stageskills},e.prototype.getLevelitemid=function(){return Cfg.getConfig(ShenmoConstConfig).levelitemid},e.prototype.getLevelitemExp=function(){return Cfg.getConfig(ShenmoConstConfig).leveladdexp},e.prototype.getLevelskills=function(){return Cfg.getConfig(ShenmoConstConfig).levelskills},e.prototype.isMaxLv=function(){return this.getLevelConfig().level>=this.getLevelNextConfig().level},e.prototype.isMaxStage=function(){return this.getStageConfig().stagelevel>=this.getStageNextConfig().stagelevel},e.prototype.getMaxStage=function(){return Cfg.getMaxConfig(ShenmoStageConfig).stage},e.prototype.getZhiShengItemId=function(){return Cfg.getConfig(ShenmoHuanhuaBaseConfig,this.getStage()).stoneid},e.prototype.getCanUseZhiShengItemIds=function(){for(var t=[],e=Cfg.getConfigs(ShenmoHuanhuaBaseConfig,CondType.LessEqual,ShenmoHuanhuaBaseConfig.id,this.getStage()),i=0;i<e.length;i++){var n=e[i];t.push(n.stoneid)}return t},e}(DamonBaseModel);__reflect(ShenmoModel.prototype,"ShenmoModel");var ShouHuHuanHuaWin=function(t){function e(){var e=t.call(this)||this;return e.winType=WinType.OverlayWin,e}return __extends(e,t),e.panelNames=[DamonHuanHuaPanel,YongbingHuanHuaPanel,ShenmoHuanHuaPanel],e}(BaseWinAutoTab);__reflect(ShouHuHuanHuaWin.prototype,"ShouHuHuanHuaWin"),window.ShouHuHuanHuaWin=ShouHuHuanHuaWin;var ShouHuNewSys=function(t){function e(){var e=t.call(this)||this;return e.damonModel=new DamonModel,e.yongbingModel=new YongbingModel,e.shenmoModel=new ShenmoModel,e.autoBianShen=!1,e.bianShenCDTick=0,e.bianShenDurationTick=0,e.bianShenCount=0,e.sysId=PackId.JingLing,e.reg(1,e.patchDamonInfo),e.reg(2,e.patchDamonLevelUp),e.reg(3,e.patchDamonStageUp),e.reg(4,e.patchDamonHuanHuaUp),e.reg(5,e.patchDamonYinJiUp),e.reg(6,e.patchDamonMoZhenUp),e.reg(7,e.patchDamonHuanHua),e.reg(8,e.patchDamonMoZhenHuanHua),e.reg(11,e.patchYongbingInfo),e.reg(12,e.patchYongbingLevelUp),e.reg(13,e.patchYongbingStageUp),e.reg(14,e.patchYongbingHuanHuaUp),e.reg(15,e.patchYongbingYinJiUp),e.reg(16,e.patchYongbingMoZhenUp),e.reg(17,e.patchYongbingHuanHua),e.reg(18,e.patchYongbingMoZhenHuanHua),e.reg(19,e.patchYongbingUseZhiSheng),e.reg(31,e.patchShenmoInfo),e.reg(32,e.patchShenmoLevelUp),e.reg(33,e.patchShenmoStageUp),e.reg(34,e.patchShenmoHuanHuaUp),e.reg(35,e.patchShenmoYinJiUp),e.reg(36,e.patchShenmoHuanHua),e.reg(37,e.patchShenmoBianShen),e.reg(38,e.patchShenmoMoZhenUp),e.reg(39,e.patchShenmoMoZhenHuanHua),e.reg(40,e.patchAutoBianShen),e.reg(41,e.patchShenmoUseZhiSheng),e}return __extends(e,t),e.ins=function(){return t.getIns.call(this,e)},e.prototype.patchDamonInfo=function(t){this.damonModel.parserInfo(t)},e.prototype.sendDamonLevelUp=function(){this.sendBase(2)},e.prototype.patchDamonLevelUp=function(t){var e=this.damonModel.level;return this.damonModel.parserLevelUp(t),RpFun.showDamonLvRedPoint(216),RpFun.showDamonLvSkillRedPoint(216),RpFun.showActRp(276),RpFun.showActRp(308),e<this.damonModel.level},e.prototype.sendDamonStageUp=function(){this.sendBase(3)},e.prototype.patchDamonStageUp=function(t){var e=this.damonModel.getStage();this.damonModel.parserStageUp(t);var i=this.damonModel.getStage()>e;return i&&GFunc.OpenSqXyActTipsWin(ShouHuStageActTipsWin,new DamonHuanHuaData(this.damonModel.getStage()),216),RpFun.showDamonStageRedPoint(216),RpFun.showDamonStageSkillRedPoint(216),i},e.prototype.sendDamonHuanHuaUp=function(t){var e=this.getBytes(4);e.writeInt(t),this.send(e)},e.prototype.patchDamonHuanHuaUp=function(t){var e=this.damonModel.parserHuanHuaUp(t);1==e.level&&GFunc.OpenSqXyActTipsWin(SqXyActTipsWin,e,216),RpFun.showHuanHuaRedPoint(216)},e.prototype.sendDamonYinJiUp=function(t){var e=this.getBytes(5);e.writeByte(t),this.send(e)},e.prototype.patchDamonYinJiUp=function(t){this.damonModel.parserYinJiUp(t),RpFun.showYinJiRedPoint(289)},e.prototype.sendDamonMoZhenUp=function(t){var e=this.getBytes(6);e.writeShort(t),this.send(e)},e.prototype.patchDamonMoZhenUp=function(t){var e=this.damonModel.parserMoZhenUp(t);1==e.level&&GFunc.OpenSqXyActTipsWin(MoZhenActTipsWin,e,216),RpFun.showMoZhenRedPoint(290)},e.prototype.sendDamonHuanHua=function(t){var e=this.getBytes(7);e.writeInt(t),this.send(e)},e.prototype.patchDamonHuanHua=function(t){this.damonModel.parserHuanHua(t)},e.prototype.sendDamonMoZhenHuanHua=function(t){var e=this.getBytes(8);e.writeShort(t),this.send(e)},e.prototype.patchDamonMoZhenHuanHua=function(t){this.damonModel.parserMoZhenHuanHua(t)},e.prototype.sendDamonUseZhiSheng=function(t){var e=this.getBytes(9);e.writeShort(t),this.send(e)},e.prototype.patchDamonUseZhiSheng=function(t){this.damonModel.parserStageUp(t)},e.prototype.patchYongbingInfo=function(t){this.yongbingModel.parserInfo(t)},e.prototype.sendYongbingLevelUp=function(){this.sendBase(12)},e.prototype.patchYongbingLevelUp=function(t){var e=this.yongbingModel.level;return this.yongbingModel.parserLevelUp(t),RpFun.showDamonLvRedPoint(217),RpFun.showDamonLvSkillRedPoint(217),RpFun.showActRp(276),RpFun.showActRp(308),e<this.yongbingModel.level},e.prototype.sendYongbingStageUp=function(){this.sendBase(13)},e.prototype.patchYongbingStageUp=function(t){var e=this.yongbingModel.getStage();this.yongbingModel.parserStageUp(t);var i=this.yongbingModel.getStage()>e;return i&&GFunc.OpenSqXyActTipsWin(ShouHuStageActTipsWin,new YongbingHuanHuaData(this.yongbingModel.getStage()),217),RpFun.showDamonStageRedPoint(217),RpFun.showDamonStageSkillRedPoint(217),i},e.prototype.sendYongbingHuanHuaUp=function(t){var e=this.getBytes(14);e.writeInt(t),this.send(e)},e.prototype.patchYongbingHuanHuaUp=function(t){var e=this.yongbingModel.parserHuanHuaUp(t);1==e.level&&GFunc.OpenSqXyActTipsWin(SqXyActTipsWin,e,217),RpFun.showHuanHuaRedPoint(217)},e.prototype.sendYongbingYinJiUp=function(t){var e=this.getBytes(15);e.writeByte(t),this.send(e)},e.prototype.patchYongbingYinJiUp=function(t){this.yongbingModel.parserYinJiUp(t),RpFun.showYinJiRedPoint(292)},e.prototype.sendYongbingMoZhenUp=function(t){var e=this.getBytes(16);e.writeShort(t),this.send(e)},e.prototype.patchYongbingMoZhenUp=function(t){var e=this.yongbingModel.parserMoZhenUp(t);1==e.level&&GFunc.OpenSqXyActTipsWin(MoZhenActTipsWin,e,217),RpFun.showMoZhenRedPoint(293)},e.prototype.sendYongbingHuanHua=function(t){var e=this.getBytes(17);e.writeInt(t),this.send(e)},e.prototype.patchYongbingHuanHua=function(t){this.yongbingModel.parserHuanHua(t)},e.prototype.sendYongbingMoZhenHuanHua=function(t){var e=this.getBytes(18);e.writeShort(t),this.send(e)},e.prototype.patchYongbingMoZhenHuanHua=function(t){this.yongbingModel.parserMoZhenHuanHua(t)},e.prototype.sendYongbingUseZhiSheng=function(t){var e=this.getBytes(19);e.writeShort(t),this.send(e)},e.prototype.patchYongbingUseZhiSheng=function(t){this.yongbingModel.parserStageUp(t)},e.prototype.patchShenmoInfo=function(t){this.shenmoModel.parserInfo(t)},e.prototype.sendShenmoLevelUp=function(){this.sendBase(32)},e.prototype.patchShenmoLevelUp=function(t){var e=this.shenmoModel.level;return this.shenmoModel.parserLevelUp(t),RpFun.showDamonLvRedPoint(218),RpFun.showDamonLvSkillRedPoint(218),RpFun.showActRp(276),RpFun.showActRp(308),e<this.shenmoModel.level},e.prototype.sendShenmoStageUp=function(){this.sendBase(33)},e.prototype.patchShenmoStageUp=function(t){var e=this.shenmoModel.getStage();this.shenmoModel.parserStageUp(t);var i=this.shenmoModel.getStage()>e;return i&&GFunc.OpenSqXyActTipsWin(ShouHuStageActTipsWin,new ShenmoHuanHuaData(this.shenmoModel.getStage()),218),RpFun.showDamonStageRedPoint(218),RpFun.showDamonStageSkillRedPoint(218),i},e.prototype.sendShenmoHuanHuaUp=function(t){var e=this.getBytes(34);e.writeInt(t),this.send(e)},e.prototype.patchShenmoHuanHuaUp=function(t){var e=this.shenmoModel.parserHuanHuaUp(t);1==e.level&&GFunc.OpenSqXyActTipsWin(SqXyActTipsWin,e,218),RpFun.showHuanHuaRedPoint(218)},e.prototype.sendShenmoYinJiUp=function(t){var e=this.getBytes(35);e.writeByte(t),this.send(e)},e.prototype.patchShenmoYinJiUp=function(t){this.shenmoModel.parserYinJiUp(t),RpFun.showYinJiRedPoint(302)},e.prototype.sendShenmoHuanHua=function(t){var e=this.getBytes(36);e.writeInt(t),this.send(e)},e.prototype.patchShenmoHuanHua=function(t){this.shenmoModel.parserHuanHua(t)},e.prototype.sendShenmoBianShen=function(){if(GFunc.checkSysOpen(218)){var t=this.getBytes(37);t.writeShort(this.shenmoModel.useId),this.send(t)}},e.prototype.patchShenmoBianShen=function(t){var e=t.readInt(),i=t.readInt();this.bianShenCDTick=e+Timer.ins().getTimer(),this.bianShenDurationTick=i+Timer.ins().getTimer(),this.bianShenCount=t.readByte(),this.bianShenGuider()},e.prototype.sendShenmoMoZhenUp=function(t){var e=this.getBytes(38);e.writeShort(t),this.send(e)},e.prototype.patchShenmoMoZhenUp=function(t){var e=this.shenmoModel.parserMoZhenUp(t);1==e.level&&GFunc.OpenSqXyActTipsWin(MoZhenActTipsWin,e,218),RpFun.showMoZhenRedPoint(305)},e.prototype.sendShenmoMoZhenHuanHua=function(t){var e=this.getBytes(39);e.writeShort(t),this.send(e)},e.prototype.patchShenmoMoZhenHuanHua=function(t){this.shenmoModel.parserMoZhenHuanHua(t)},e.prototype.bianShenGuider=function(){this.canBianshen()&&GFunc.isInEquipBossFb()&&!e.ins().autoBianShen&&12==TaskSys.ins().taskId&&0==TaskSys.ins().mainTaskStatus&&Timer.ins()["do"](this.bianshenDurationTime,0,1,this.showGuideBianshen,this,TimerType.NONE)},e.prototype.showGuideBianshen=function(){GuiderBianShen.ins().show(GFunc.creatGuideData(GuideType.Week,GuiderId.Id1036))},e.prototype.resetTime=function(){Timer.ins().remove(this.showGuideBianshen,this),this.bianShenDurationTick=999999,GuiderBianShen.ins().closeById(GuiderId.Id1036)},e.prototype.canBianshen=function(){return this.shenmoModel.useId>0},e.prototype.chekBianshen=function(){return this.bianshenDurationTime<=0&&this.canBianshen()},Object.defineProperty(e.prototype,"bianshenCdTime",{get:function(){return Math.max(0,this.bianShenCDTick-Timer.ins().getTimer())
},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"bianshenDurationTime",{get:function(){return Math.max(0,this.bianShenDurationTick-Timer.ins().getTimer())},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"isShowBianShenBtn",{get:function(){return this.canBianshen()?this.bianshenCdTime>0?!0:this.bianshenDurationTime>0?!1:!0:!1},enumerable:!0,configurable:!0}),e.prototype.getModelBySysId=function(t){var e=null;switch(t){case 216:case 289:case 290:e=this.damonModel;break;case 217:case 292:case 293:e=this.yongbingModel;break;case 218:case 302:case 305:e=this.shenmoModel}return e},e.prototype.sendAutoBianShen=function(t){this.autoBianShen=t;var e=this.getBytes(40);e.writeByte(t?1:0),this.send(e)},e.prototype.patchAutoBianShen=function(t){this.autoBianShen=1==t.readByte()},e.prototype.sendShenmoUseZhiSheng=function(t){var e=this.getBytes(41);e.writeShort(t),this.send(e)},e.prototype.patchShenmoUseZhiSheng=function(t){this.shenmoModel.parserStageUp(t)},e}(BaseSys);__reflect(ShouHuNewSys.prototype,"ShouHuNewSys");var System;!function(t){t.shouHuNewSys=ShouHuNewSys.ins.bind(ShouHuNewSys)}(System||(System={})),window.ShouHuNewSys=ShouHuNewSys;var ShouHuStageActTipsWin=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return __extends(e,t),e.prototype.updatePanel=function(e,i){t.prototype.updatePanel.call(this,e,i)},e}(SqXyActTipsWin);__reflect(ShouHuStageActTipsWin.prototype,"ShouHuStageActTipsWin"),window.ShouHuStageActTipsWin=ShouHuStageActTipsWin;var MonstersConfig=function(){function t(){this.avatar=[]}return Object.defineProperty(t,"ai",{get:function(){return"ai"},enumerable:!0,configurable:!0}),t.prototype.parser=function(t){this.id=t.readInt(),this.name=t.readString(),this.HpMax=t.readDouble(),this.AtkMin=t.readInt(),this.AtkMax=t.readInt(),this.Def=t.readInt(),this.AtkSuc=t.readInt(),this.DefSuc=t.readInt(),this.MvSpeed=t.readInt(),this.AtkSpeed=t.readInt();var e=t.readByte();this.avatar.length=e;for(var i=0;e>i;i++)this.avatar[i]=t.readShort();this.head=t.readString(),this.ai=t.readInt(),this.type=t.readByte()},t.prototype.parser2=function(t){this.name=t.readString(),this.head=t.readString();var e=t.readByte();this.avatar.length=e;for(var i=0;e>i;i++)this.avatar[i]=t.readShort();this.type=t.readByte()},t}();__reflect(MonstersConfig.prototype,"MonstersConfig");var YongbingModel=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.huanHuaDatas=[],e.yinJiDatas=[],e.moZhenDatas=[],e}return __extends(e,t),e.prototype.getLevelConfig=function(){return this.levelConfig&&this.levelConfig.level==this.level||(this.levelConfig=Cfg.getConfig(YongbingLevelConfig,this.level)),this.levelConfig},e.prototype.getLevelNextConfig=function(){return(!this.levelNextConfig||this.levelNextConfig.level<=this.level)&&(this.levelNextConfig=Cfg.getNextConfig(YongbingLevelConfig,this.level)),this.levelNextConfig},e.prototype.getStageConfig=function(){return this.stageConfig&&this.stageConfig.stagelevel==this.stageLevel||(this.stageConfig=Cfg.getConfig(YongbingStageConfig,this.stageLevel)),this.stageConfig},e.prototype.getStageNextConfig=function(){return(!this.stageNextConfig||this.stageNextConfig.stagelevel<=this.stageLevel)&&(this.stageNextConfig=Cfg.getNextConfig(YongbingStageConfig,this.stageLevel)),this.stageNextConfig},e.prototype.parserInfo=function(t){this.useId=t.readInt(),this.moZhenId=t.readShort(),this.level=t.readShort(),this.levelExp=t.readInt(),this.stageLevel=t.readShort(),this.stageExp=t.readInt();for(var e=t.readByte(),i=0;e>i;i++){var n=t.readInt(),a=t.readShort(),o=this.getHuanHuaDataById(n);o.level=a}e=t.readByte();for(var s=0;e>s;s++){var n=t.readByte(),a=t.readShort(),o=this.getYinJuDataById(n);o.setLv(a)}e=t.readByte();for(var r=0;e>r;r++){var n=t.readShort(),a=t.readShort(),o=this.getMoZhenDataById(n);o.level=a}},e.prototype.parserLevelUp=function(t){this.level=t.readShort(),this.levelExp=t.readInt()},e.prototype.parserStageUp=function(t){this.stageLevel=t.readShort(),this.stageExp=t.readInt()},e.prototype.parserHuanHuaUp=function(t){var e=t.readInt(),i=t.readShort(),n=this.getHuanHuaDataById(e);return n.level=i,n},e.prototype.parserYinJiUp=function(t){var e=t.readByte(),i=t.readShort(),n=this.getYinJuDataById(e);n.setLv(i)},e.prototype.parserMoZhenUp=function(t){var e=t.readShort(),i=t.readShort(),n=this.getMoZhenDataById(e);return n.level=i,n},e.prototype.parserHuanHua=function(t){this.useId=t.readInt()},e.prototype.parserMoZhenHuanHua=function(t){this.moZhenId=t.readShort()},e.prototype.getHuanHuaDataById=function(t){return this.huanHuaDatas[t]||(this.huanHuaDatas[t]=new YongbingHuanHuaData(t))},e.prototype.getHuanHuaDatas=function(){for(var t=[],e=0,i=Cfg.getConfig(YongbingConstConfig).huanhuaIds;e<i.length;e++){var n=i[e];t.push(this.getHuanHuaDataById(n))}return t},e.prototype.getYinJuDataById=function(t){return this.yinJiDatas[t-1]||(this.yinJiDatas[t-1]=new YongbingYinJiData(t))},e.prototype.getYinJuDatas=function(){return this.yinJiDatas},e.prototype.getMoZhenDataById=function(t){return this.moZhenDatas[t-1]||(this.moZhenDatas[t-1]=new YongbingMoZhenData(t))},e.prototype.getMoZhenDatas=function(){return this.moZhenDatas},e.prototype.getMoZhenGroupNames=function(){return Cfg.getYongbingMozhenGroupConfigNames()},e.prototype.getMoZhenDatasByGroupId=function(t){for(var e=[],i=Cfg.getConfig(YongbingMozhenGroupConfig,t),n=0,a=i.huanhuaIds;n<a.length;n++){var o=a[n];e.push(this.getMoZhenDataById(o))}return e},e.prototype.getLevelAttrDatas=function(){for(var t=[],e=this.getLevelConfig(),i=this.getLevelNextConfig(),n=e.baseAttrs.length,a=0;n>a;a++){var o=e.baseAttrs[a],s=i.baseAttrs[a],r=new ComAttrData(o,s,e.level>=i.level);t.push(r)}return t},e.prototype.getStageAttrDatas=function(){for(var t=[],e=this.getStageConfig(),i=this.getStageNextConfig(),n=e.baseAttrs.length,a=0;n>a;a++){var o=e.baseAttrs[a],s=i.baseAttrs[a],r=new ComAttrData(o,s,e.stagelevel>=i.stagelevel);t.push(r)}return t},e.prototype.getYinJiAttrDatas=function(t){for(var e=[],i=t.getConfig(),n=i.baseAttrs.length,a=0;n>a;a++){var o=new AttrData(i.baseAttrs[a].type,i.baseAttrs[a].value*t.getLv()),s=new AttrData(i.baseAttrs[a].type,i.baseAttrs[a].value*(t.getLv()+1)),r=new ComAttrData(o,s,t.isMax());e.push(r)}return e},e.prototype.getYinJiAttrDatasAll=function(){var t=[];for(var e in this.yinJiDatas){var i=this.yinJiDatas[e],n=AttrData.attrMultiple(i.getConfig().baseAttrs,i.getLv());t=AttrData.mergeAttr(n,t)}return t},e.prototype.getMoZhenAttrDatas=function(t){for(var e=[],i=t.getAttrsByLv(),n=t.getAttrsByLv(t.level+1),a=t.level>=t.getConfig().maxLevel,o=i.length,s=0;o>s;s++){var r=new ComAttrData(i[s],n[s],a);e.push(r)}return e},e.prototype.getMoZhenDatasAll=function(){var t=[];for(var e in this.moZhenDatas){var i=this.moZhenDatas[e];t=AttrData.mergeAttr(i.getAttrsByLv(),t)}return t},e.prototype.getHuanHuaAttrDatas=function(t){for(var e=[],i=t.getAttrsByLv(),n=t.getAttrsByLv(t.level+1),a=t.level>=t.getConfig().maxLevel,o=i.length,s=0;o>s;s++){var r=new ComAttrData(i[s],n[s],a);e.push(r)}return e},e.prototype.getHuanHuaAttrDatasAll=function(){var t=[];for(var e in this.huanHuaDatas){var i=this.huanHuaDatas[e];t=AttrData.mergeAttr(i.getAttrsByLv(),t)}return t},e.prototype.getLevelPower=function(){return GFunc.getPower(this.getLevelConfig().baseAttrs)>>0},e.prototype.getStagePower=function(){return GFunc.getPower(this.getStageConfig().baseAttrs)>>0},e.prototype.getYinJinPower=function(){var t=0;for(var e in this.yinJiDatas){var i=this.yinJiDatas[e];if(i.getLv()>0){var n=AttrData.attrMultiple(i.getConfig().baseAttrs,i.getLv());t+=GFunc.getPower(n)>>0}}return t},e.prototype.getMoZhenPower=function(){var t=0;for(var e in this.moZhenDatas){var i=this.moZhenDatas[e];i.level>0&&(t+=GFunc.getPower(i.getAttrsByLv())>>0)}return t},e.prototype.getHuanHuaPower=function(){var t=0;for(var e in this.huanHuaDatas){var i=this.huanHuaDatas[e];i.level>0&&(t+=GFunc.getPower(i.getAttrsByLv())>>0)}return t},e.prototype.getLevelMaxExp=function(){return this.getLevelConfig().needexp},e.prototype.getStage=function(){return this.getStageConfig().stage},e.prototype.getStageMaxExp=function(){return this.getStageConfig().needexp},e.prototype.getStart=function(t){var e=0;return t<this.getStageConfig().stage?e=this.getStarPerLevel():t==this.getStageConfig().stage?this.stageLevel>0?(e=this.stageLevel%this.getStarPerLevel(),e=e>0?e:this.getStarPerLevel()):e=0:t>this.getStageConfig().stage&&(e=0),e},e.prototype.getStarPerLevel=function(){return Cfg.getConfig(YongbingConstConfig).starPerLevel},e.prototype.getStageitemid=function(){return Cfg.getConfig(YongbingConstConfig).stageitemid},e.prototype.getStageitemExp=function(){return Cfg.getConfig(YongbingConstConfig).stageaddexp},e.prototype.getStageskills=function(){return Cfg.getConfig(YongbingConstConfig).stageskills},e.prototype.getLevelitemid=function(){return Cfg.getConfig(YongbingConstConfig).levelitemid},e.prototype.getLevelitemExp=function(){return Cfg.getConfig(YongbingConstConfig).leveladdexp},e.prototype.getLevelskills=function(){return Cfg.getConfig(YongbingConstConfig).levelskills},e.prototype.isMaxLv=function(){return this.getLevelConfig().level>=this.getLevelNextConfig().level},e.prototype.isMaxStage=function(){return this.getStageConfig().stagelevel>=this.getStageNextConfig().stagelevel},e.prototype.getMaxStage=function(){return Cfg.getMaxConfig(YongbingStageConfig).stage},e.prototype.getZhiShengItemId=function(){return Cfg.getConfig(YongbingHuanhuaBaseConfig,this.getStage()).stoneid},e.prototype.getCanUseZhiShengItemIds=function(){for(var t=[],e=Cfg.getConfigs(YongbingHuanhuaBaseConfig,CondType.LessEqual,YongbingHuanhuaBaseConfig.id,this.getStage()),i=0;i<e.length;i++){var n=e[i];t.push(n.stoneid)}return t},e}(DamonBaseModel);__reflect(YongbingModel.prototype,"YongbingModel");var DamonHuanHuaData=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return __extends(e,t),e.prototype.getConfig=function(){return this._baseConfig||(this._baseConfig=Cfg.getConfig(DamonHuanhuaBaseConfig,this.id))},e.prototype.getBaseAttrs=function(){return this._baseAttrs||(this._baseAttrs=this.getConfig().baseAttrs),this._baseAttrs},e.prototype.getAttrsByLv=function(t){isNaN(t)&&(t=this.level);for(var e=this.getBaseAttrs(),i=[],n=e.length,a=0;n>a;a++){var o=e[a];i.push(new AttrData(o.type,o.value*t))}return i},e.prototype.getName=function(){return this.getConfig().name},e.prototype.getQuality=function(){return this.getConfig().quality},e.prototype.getSrQuality=function(){return this.getConfig().srQuality},e.prototype.getActDec=function(){return this.getConfig().dec},e.prototype.getActPower=function(){return this.getConfig().power},e.prototype.getConsume=function(){return this.getConfig().needitem},e.prototype.getApperaenceId=function(){return 0},e.prototype.isAct=function(){return this.level>0},e.prototype.isMax=function(){return this.level>=this.getConfig().maxLevel},e.prototype.isUse=function(){return this.id==ShouHuNewSys.ins().getModelBySysId(216).useId},e}(BaseHuanHuaData);__reflect(DamonHuanHuaData.prototype,"DamonHuanHuaData");var DamonMoZhenData=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return __extends(e,t),e.prototype.getConfig=function(){return this._baseConfig||(this._baseConfig=Cfg.getConfig(DamonMozhenBaseConfig,this.id))},e.prototype.getBaseAttrs=function(){return this._baseAttrs||(this._baseAttrs=this.getConfig().baseAttrs),this._baseAttrs},e.prototype.getAttrsByLv=function(t){isNaN(t)&&(t=this.level);for(var e=this.getBaseAttrs(),i=[],n=e.length,a=0;n>a;a++){var o=e[a];i.push(new AttrData(o.type,o.value*t))}return i},e.prototype.getName=function(){return this.getConfig().name},e.prototype.getQuality=function(){return this.getConfig().quality},e.prototype.getSrQuality=function(){return this.getConfig().srQuality},e.prototype.getActDec=function(){return this.getConfig().dec},e.prototype.getActPower=function(){return this.getConfig().power},e.prototype.getConsume=function(){return this.getConfig().needitem},e.prototype.getApperaenceId=function(){return this.getConfig().appearanceId},e.prototype.getGroupId=function(){return this.getConfig().groupId},e.prototype.isAct=function(){return this.level>0},e.prototype.isMax=function(){return this.level>=this.getConfig().maxLevel},e.prototype.isUse=function(){return this.id==ShouHuNewSys.ins().getModelBySysId(216).moZhenId},e}(BaseHuanHuaData);__reflect(DamonMoZhenData.prototype,"DamonMoZhenData");var DamonYinJiData=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e._tempLvC=0,e._tempLvN=0,e}return __extends(e,t),e.prototype.getConfig=function(){return this._baseConfig||(this._baseConfig=Cfg.getConfig(DamonPillConfig,this.id))},e.prototype.getCurMaxConfig=function(){return this._curMaxConfig&&this._tempLvC==this._level||(this._curMaxConfig=Cfg.getConfig(DamonPillMaxConfig,this.id,CondType.More,DamonPillMaxConfig.max,this._level),this._tempLvC=this._level),this._curMaxConfig},e.prototype.getNextMaxConfig=function(){return this._nextMaxConfig&&this._tempLvN==this._level||(this._nextMaxConfig=Cfg.getNextConfig(DamonPillMaxConfig,this.id,this.getCurMaxConfig().index),this._tempLvN=this._level),this._nextMaxConfig},e.prototype.getIcon=function(){return ResMgr.getFuHunIcon("jlyj_"+this.id)},e.prototype.getMaxLv=function(){return this.getCurMaxConfig().max},e.prototype.getName=function(){return"jl_zycs_yj"+this.id},e.prototype.getConsume=function(){return this.getConfig().needitem},e.prototype.isAct=function(){return this.getLv()>0},e.prototype.getBaseAttr=function(){return this.getConfig().baseAttrs},e.prototype.isMax=function(){return this.getCurMaxConfig().index>=this.getNextMaxConfig().index&&this.isMaxCur()},e.prototype.isMaxCur=function(){return this._level>=this.getCurMaxConfig().max},e}(BaseFuHunData);__reflect(DamonYinJiData.prototype,"DamonYinJiData");var MonsterSkillConfig=function(){function t(){}return t}();__reflect(MonsterSkillConfig.prototype,"MonsterSkillConfig");var MonthCardConfig=function(){function t(){}return t}();__reflect(MonthCardConfig.prototype,"MonthCardConfig");var MSCommonConfig=function(){function t(){}return t}();__reflect(MSCommonConfig.prototype,"MSCommonConfig");var MSDabiaoConfig=function(){function t(){}return t}();__reflect(MSDabiaoConfig.prototype,"MSDabiaoConfig");var MSHurtRankConfig=function(){function t(){}return t.rank="rank",t}();__reflect(MSHurtRankConfig.prototype,"MSHurtRankConfig");var MSMonsterConfig=function(){function t(){}return t}();__reflect(MSMonsterConfig.prototype,"MSMonsterConfig");var ShenmoHuanHuaData=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return __extends(e,t),e.prototype.getConfig=function(){return this._baseConfig||(this._baseConfig=Cfg.getConfig(ShenmoHuanhuaBaseConfig,this.id))},e.prototype.getBaseAttrs=function(){return this._baseAttrs||(this._baseAttrs=this.getConfig().baseAttrs),this._baseAttrs},e.prototype.getAttrsByLv=function(t){void 0===t&&(t=this.level);for(var e=this.getBaseAttrs(),i=[],n=e.length,a=0;n>a;a++){var o=e[a];i.push(new AttrData(o.type,o.value*t))}return i},e.prototype.getName=function(){return this.getConfig().name},e.prototype.getQuality=function(){return this.getConfig().quality},e.prototype.getSrQuality=function(){return this.getConfig().srQuality},e.prototype.getActDec=function(){return this.getConfig().dec},e.prototype.getActPower=function(){return this.getConfig().power},e.prototype.getConsume=function(){return this.getConfig().needitem},e.prototype.getApperaenceId=function(){return 0},e.prototype.isAct=function(){return this.level>0},e.prototype.isMax=function(){return this.level>=this.getConfig().maxLevel},e.prototype.isUse=function(){return this.id==ShouHuNewSys.ins().getModelBySysId(218).useId},e}(BaseHuanHuaData);__reflect(ShenmoHuanHuaData.prototype,"ShenmoHuanHuaData");var ShenmoMoZhenData=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return __extends(e,t),e.prototype.getConfig=function(){return this._baseConfig||(this._baseConfig=Cfg.getConfig(ShenmoMozhenBaseConfig,this.id))},e.prototype.getBaseAttrs=function(){return this._baseAttrs||(this._baseAttrs=this.getConfig().baseAttrs),this._baseAttrs},e.prototype.getAttrsByLv=function(t){void 0===t&&(t=this.level);for(var e=this.getBaseAttrs(),i=[],n=e.length,a=0;n>a;a++){var o=e[a];i.push(new AttrData(o.type,o.value*t))}return i},e.prototype.getName=function(){return this.getConfig().name},e.prototype.getQuality=function(){return this.getConfig().quality},e.prototype.getSrQuality=function(){return this.getConfig().srQuality},e.prototype.getActDec=function(){return this.getConfig().dec},e.prototype.getActPower=function(){return this.getConfig().power},e.prototype.getConsume=function(){return this.getConfig().needitem},e.prototype.getApperaenceId=function(){return this.getConfig().appearanceId},e.prototype.getGroupId=function(){return this.getConfig().groupId},e.prototype.isAct=function(){return this.level>0},e.prototype.isMax=function(){return this.level>=this.getConfig().maxLevel},e.prototype.isUse=function(){return this.id==ShouHuNewSys.ins().getModelBySysId(218).moZhenId},e}(BaseHuanHuaData);__reflect(ShenmoMoZhenData.prototype,"ShenmoMoZhenData");var ShenmoYinJiData=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e._tempLvC=0,e._tempLvN=0,e}return __extends(e,t),e.prototype.getConfig=function(){return this._baseConfig||(this._baseConfig=Cfg.getConfig(ShenmoPillConfig,this.id))},e.prototype.getCurMaxConfig=function(){return this._curMaxConfig&&this._tempLvC==this._level||(this._curMaxConfig=Cfg.getConfig(ShenmoPillMaxConfig,this.id,CondType.More,ShenmoPillMaxConfig.max,this._level),this._tempLvC=this._level),this._curMaxConfig},e.prototype.getNextMaxConfig=function(){return this._nextMaxConfig&&this._tempLvN==this._level||(this._nextMaxConfig=Cfg.getNextConfig(ShenmoPillMaxConfig,this.id,this.getCurMaxConfig().index),this._tempLvN=this._level),this._nextMaxConfig},e.prototype.getIcon=function(){return ResMgr.getFuHunIcon("shenmo_"+this.id)},e.prototype.getMaxLv=function(){return this.getCurMaxConfig().max},e.prototype.getName=function(){return"shenmo_zycs_yj"+this.id},e.prototype.getConsume=function(){return this.getConfig().needitem},e.prototype.isAct=function(){return this.getLv()>0},e.prototype.getBaseAttr=function(){return this.getConfig().baseAttrs},e.prototype.isMax=function(){return this.getCurMaxConfig().index>=this.getNextMaxConfig().index&&this.isMaxCur()},e.prototype.isMaxCur=function(){return this._level>=this.getCurMaxConfig().max},e}(BaseFuHunData);__reflect(ShenmoYinJiData.prototype,"ShenmoYinJiData");var MSRankConfig=function(){function t(){}return t}();__reflect(MSRankConfig.prototype,"MSRankConfig");var ShenMoEntityPlayWin=function(t){function e(){return t.call(this)||this}return __extends(e,t),e.prototype.open=function(e,i){void 0===e&&(e=null),void 0===i&&(i=null),t.prototype.open.call(this,e,i,EntityType.BIANSHEN),this.currentState="shenmo"},e.prototype.updateView=function(){t.prototype.updateView.call(this);var e=this.getDesc(this.skillConfig);e=e.replace("{c1}",""),e=e.replace("{c2}",""),this.lbDesc.textFlow=StrUtil.toTF(e)},e}(EntityPlayWin);__reflect(ShenMoEntityPlayWin.prototype,"ShenMoEntityPlayWin"),window.ShenMoEntityPlayWin=ShenMoEntityPlayWin;var MSScoreConfig=function(){function t(){}return t}();__reflect(MSScoreConfig.prototype,"MSScoreConfig");var NPCConfig=function(){function t(){}return t}();__reflect(NPCConfig.prototype,"NPCConfig");var NpcEvent=function(){function t(){}return t}();__reflect(NpcEvent.prototype,"NpcEvent");var PayItemsConfig=function(){function t(){}return t}();__reflect(PayItemsConfig.prototype,"PayItemsConfig");var ShenMoSkillItem=function(t){function e(){var e=t.call(this)||this;return e.skinName="ShenMoSkillItemEUI",e}return __extends(e,t),e.prototype.dataChanged=function(){var t=this.data;this.imgIcon.source=ResMgr.getSkillResourceItemName1(t.icon),this.lbName.text=t.name},e.prototype.setRedPoint=function(t){this.imgRedPoint.visible=t},e}(BaseItemRender);__reflect(ShenMoSkillItem.prototype,"ShenMoSkillItem"),window.ShenMoSkillItem=ShenMoSkillItem;var PayMoneyConfig=function(){function t(){}return t}();__reflect(PayMoneyConfig.prototype,"PayMoneyConfig");var PrivilegeConfig=function(){function t(){}return t}();__reflect(PrivilegeConfig.prototype,"PrivilegeConfig");var YongbingHuanHuaData=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return __extends(e,t),e.prototype.getConfig=function(){return this._baseConfig||(this._baseConfig=Cfg.getConfig(YongbingHuanhuaBaseConfig,this.id))},e.prototype.getBaseAttrs=function(){return this._baseAttrs||(this._baseAttrs=this.getConfig().baseAttrs),this._baseAttrs},e.prototype.getAttrsByLv=function(t){void 0===t&&(t=this.level);for(var e=this.getBaseAttrs(),i=[],n=e.length,a=0;n>a;a++){var o=e[a];i.push(new AttrData(o.type,o.value*t))}return i},e.prototype.getName=function(){return this.getConfig().name},e.prototype.getQuality=function(){return this.getConfig().quality},e.prototype.getSrQuality=function(){return this.getConfig().srQuality},e.prototype.getActDec=function(){return this.getConfig().dec},e.prototype.getActPower=function(){return this.getConfig().power},e.prototype.getConsume=function(){return this.getConfig().needitem},e.prototype.getApperaenceId=function(){return 0},e.prototype.isAct=function(){return this.level>0},e.prototype.isMax=function(){return this.level>=this.getConfig().maxLevel},e.prototype.isUse=function(){return this.id==ShouHuNewSys.ins().getModelBySysId(217).useId},e}(BaseHuanHuaData);__reflect(YongbingHuanHuaData.prototype,"YongbingHuanHuaData");var YongbingMoZhenData=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return __extends(e,t),e.prototype.getConfig=function(){return this._baseConfig||(this._baseConfig=Cfg.getConfig(YongbingMozhenBaseConfig,this.id))},e.prototype.getBaseAttrs=function(){return this._baseAttrs||(this._baseAttrs=this.getConfig().baseAttrs),this._baseAttrs},e.prototype.getAttrsByLv=function(t){void 0===t&&(t=this.level);for(var e=this.getBaseAttrs(),i=[],n=e.length,a=0;n>a;a++){var o=e[a];i.push(new AttrData(o.type,o.value*t))}return i},e.prototype.getName=function(){return this.getConfig().name},e.prototype.getQuality=function(){return this.getConfig().quality},e.prototype.getSrQuality=function(){return this.getConfig().srQuality},e.prototype.getActDec=function(){return this.getConfig().dec},e.prototype.getActPower=function(){return this.getConfig().power},e.prototype.getConsume=function(){return this.getConfig().needitem},e.prototype.getApperaenceId=function(){return this.getConfig().appearanceId},e.prototype.getGroupId=function(){return this.getConfig().groupId},e.prototype.isAct=function(){return this.level>0},e.prototype.isMax=function(){return this.level>=this.getConfig().maxLevel},e.prototype.isUse=function(){return this.id==ShouHuNewSys.ins().getModelBySysId(217).moZhenId},e}(BaseHuanHuaData);__reflect(YongbingMoZhenData.prototype,"YongbingMoZhenData");var YongbingYinJiData=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e._tempLvC=0,e._tempLvN=0,e}return __extends(e,t),e.prototype.getConfig=function(){return this._baseConfig||(this._baseConfig=Cfg.getConfig(YongbingPillConfig,this.id))},e.prototype.getCurMaxConfig=function(){return this._curMaxConfig&&this._tempLvC==this._level||(this._curMaxConfig=Cfg.getConfig(YongbingPillMaxConfig,this.id,CondType.More,YongbingPillMaxConfig.max,this._level),this._tempLvC=this._level),this._curMaxConfig},e.prototype.getNextMaxConfig=function(){return this._nextMaxConfig&&this._tempLvN==this._level||(this._nextMaxConfig=Cfg.getNextConfig(YongbingPillMaxConfig,this.id,this.getCurMaxConfig().index),this._tempLvN=this._level),this._nextMaxConfig},e.prototype.getIcon=function(){return ResMgr.getFuHunIcon("ybyj_"+this.id)},e.prototype.getMaxLv=function(){return this.getCurMaxConfig().max},e.prototype.getName=function(){return"yb_zycs_yj"+this.id},e.prototype.getConsume=function(){return this.getConfig().needitem},e.prototype.isAct=function(){return this.getLv()>0},e.prototype.getBaseAttr=function(){return this.getConfig().baseAttrs},e.prototype.isMax=function(){return this.getCurMaxConfig().index>=this.getNextMaxConfig().index&&this.isMaxCur()},e.prototype.isMaxCur=function(){return this._level>=this.getCurMaxConfig().max},e}(BaseFuHunData);__reflect(YongbingYinJiData.prototype,"YongbingYinJiData");var QuaintonFubenConfig=function(){function t(){}return t}();__reflect(QuaintonFubenConfig.prototype,"QuaintonFubenConfig");var RankCommonConfig=function(){function t(){}return t}();__reflect(RankCommonConfig.prototype,"RankCommonConfig");var RechagePowerConstConfig=function(){function t(){}return t}();__reflect(RechagePowerConstConfig.prototype,"RechagePowerConstConfig");var RechargeConstConfig=function(){function t(){}return t}();__reflect(RechargeConstConfig.prototype,"RechargeConstConfig");var RefreshMonsters=function(){function t(){this.position=[]}return t.prototype.parser=function(t){this.id=t.readInt(),this.maxCount=t.readShort(),this.minCount=t.readShort(),this.refreshTime=t.readShort();for(var e=t.readShort(),i=0;e>i;i++){var n=new XY;n.x=t.readShort(),n.y=t.readShort(),this.position[i]=n}},t}();__reflect(RefreshMonsters.prototype,"RefreshMonsters");var ScenesConfig=function(){function t(){}return Object.defineProperty(t,"mapfilename",{get:function(){return"mapfilename"},enumerable:!0,configurable:!0}),t}();__reflect(ScenesConfig.prototype,"ScenesConfig");var AoyiModel=function(){function t(){this.tabTypes=[],this.aoyiDatas=[],this.aoyiTypeBySkillId={}}return t.prototype.iniData=function(){this.aoyiTypeBySkillId.length=0;var t=Cfg.getConfigs2(AoyiConfig,CondType.NONE);for(var e in t)for(var i in t[e])this.aoyiTypeBySkillId[+i]=+e},t.prototype.getTypeBySkillId=function(t){var e=this.aoyiTypeBySkillId[t];return e},t.prototype.getTabTypes=function(){return this.tabTypes&&0!=this.tabTypes.length||(this.tabTypes=Cfg.getConfigKeys(AoyiConfig)),this.tabTypes},t.prototype.getAoyiDatasByType=function(t){var e=this.aoyiDatas[t];if(!e||0==e.length){e=[];var i=Cfg.getConfigs(AoyiConfig,t,CondType.NONE);for(var n in i){var a=new AoyiData(i[n]);e.push(a)}this.aoyiDatas[t]=e}return e},t}();__reflect(AoyiModel.prototype,"AoyiModel");var SkillSys=function(t){function e(){var e=t.call(this)||this;return e.skillDatas=[],e.skillMaxLv=0,e.skillDataFuzhus=[],e.monsterSkillIds={},e.buffDatas=[],e.skillPassivityDatas=[],e.hunqiDatas=[],e.awakeLevel=1,e.awakeExp=1,e.tongji=new SkillDamageTongji,e.bmpNumbers=[],e.flyingNumbers=[],e.sysId=PackId.Skill,e.reg(1,e.doSkillResult),e.reg(2,e.patchAddBuff),e.reg(3,e.patchRemoveBuff),e.reg(4,e.patchSkillUp),e.reg(5,e.patchSkillUpOneKey),e.reg(6,e.doAddEffect),e.reg(7,e.doRemoveEffect),e.reg(8,e.patchSkillInfo),e.reg(11,e.doClearCD),e.reg(12,e.patchShenYouSkillAdd),e.reg(13,e.patchPlayEff),e.reg(50,e.patchAddBuffUI),e.reg(51,e.patchRemoveBuffUI),e.reg(60,e.patchSkillPassivityInfo),e.reg(61,e.patchSkillPassivityUp),e.reg(70,e.patchHunqiData),e.reg(71,e.patchHunqiUp),e.aoyiModel=new AoyiModel,e.aoyiModel.iniData(),e}return __extends(e,t),e.ins=function(){return t.getIns.call(this,e)},e.prototype.sendUseSkill=function(t,e,i,n,a){if(void 0===a&&(a=0),(0==i||i!=i>>0)&&t!=t>>0||n.skillConfig.selfEff.length>0){var o=this.getBytes(1);LogicSys.ins().getEntityByHandle(t),LogicSys.ins().getEntityByHandle(e);o.writeDouble(t),o.writeDouble(e),o.writeInt(n.skillConfig.id),o.writeInt(a),this.send(o)}else VirtualServer.ins().sendUseSkill(t,e,i,n)},e.prototype.doSkillResult=function(t){var e=this,i=new SkillDamageData;i.parser(t);var n=LogicSys.ins().getEntityByHandle(i.senderHandle),a=LogicSys.ins().getEntityByHandle(i.targetHandle);if(n&&a){var o=Cfg.getConfig(SkillsConfig,i.skillId);if(n.masterHandle!=Actor.ins().handle){n.AI.playOtherEntityAction(o,a,0);var s=EntityType.isMonster(n.entityType)||getLocation("isShowOtherEff",2)&&FbSys.ins().fubenGroupConfig.isShowOtherEff;s?n.AI.playActionMovie(o,0,a,function(){e.doSkillResultByData(i)}):this.doSkillResultByData(i)}else o.actionParam[0].isLight&&n.masterHandle==Actor.ins().handle&&MapContainer.ins().isShow()&&!ShouHuNewSys.ins().autoBianShen&&GFunc.playLight(),this.doSkillResultByData(i);n instanceof EntityRole&&a.masterHandle==Actor.ins().handle&&n.masterHandle!=Actor.ins().handle?openWin(BeAtkedWin):n instanceof EntityFriendMonster&&n.getHP()/n.getHpMax()<=.5&&openWin(BeAtkedWin)}},e.prototype.doSkillResultByData=function(t){var e=this;if(MapContainer.ins().isShow())for(var i=t.skillDamageRanges.length,n=Cfg.getConfig(SkillsConfig,t.skillId),a=function(i){var a=t.skillDamageRanges[i],s=a.handle,r=a.damageType,u=a.value;if(r==DamageTypes.BLANK||r==DamageTypes.FS&&Math.abs(u)<100)return"continue";var h=LogicSys.ins().getEntityByHandle(s);if(!h)return{value:void 0};h instanceof EntityMonster&&h.isBoss()?FbSys.ins().fubenGroupConfig.isShowBossBlood||h.setHpAndNameVisible(!1):(t.isMyDamage||t.isTeamDamage)&&h.setHpAndNameVisible(!0),r!=DamageTypes.MISS&&r!=DamageTypes.FS&&(h instanceof EntityMonster&&(h.addAtkedEffect(t.skillId),t.isMyDamage&&h.addSlightFilter()),h.AI.startAtked(t.senderHandle));for(var l=1,p=n.actionParam,c=r!=DamageTypes.MISS&&r!=DamageTypes.FS?p&&p[0].damagePart||1:1,d=Math.floor(u/c),g=0;c>g;g++)(EntityType.isMonster(h.entityType)||EntityType.isRole(h.entityType)||EntityType.isBianshen(h.entityType))&&t.isMyDamage?Timer.ins()["do"](l,0,1,function(){e.showBlood(d,a)},o):(h.masterHandle==Actor.ins().handle&&Timer.ins()["do"](l,0,1,function(){e.showBlood1(d,a)},o),window.Server&&window.Server.isOpenMyDamage&&Timer.ins()["do"](l,0,1,function(){e.showBlood(d,a)},o)),l+=200},o=this,s=0;i>s;s++){var r=a(s);if("object"==typeof r)return r.value}},e.prototype.clear=function(){this.bmpNumbers.length=0,this.flyingNumbers.length=0},e.prototype.getFlyNumber=function(){var t;return t=this.flyingNumbers.length<=30?this.bmpNumbers.length?this.bmpNumbers.shift():new BitmapNumber:this.flyingNumbers.shift(),t.reset(),this.flyingNumbers.push(t),t},e.prototype.showBlood=function(t,e){var i=this.getFlyNumber();if(MapContainer.ins().addBlood(i),e.damageType==DamageTypes.MISS)i.setWordSource("miss1");else{var n=ResMgr.getDamageWord0Resource(e.senderType);e.damageType!=DamageTypes.ZMYJ&&i.setWord0Source(n);var a=ResMgr.getDamagerWordResource(e.damageType);a&&i.setWordSource(n+a),i.setNumber(t,ResMgr.getEntityDamageNumType(e.senderType,e.damageType),-15)}this.fly(i,e)},e.prototype.showBlood1=function(t,e){var i=e.damageType,n=i==DamageTypes.MISS||i==DamageTypes.ZD||i==DamageTypes.CFYS||i==DamageTypes.CFPJ||i==DamageTypes.CFJS||i==DamageTypes.CFZD||i==DamageTypes.WWSH||i==DamageTypes.HUIXUE,a=i==DamageTypes.ZD||i==DamageTypes.HUIXUE;if(n){var o=this.getFlyNumber();MapContainer.ins().addBlood(o),o.setWord0Source(ResMgr.getDamageWord0Resource(e.senderType)),o.setWordSource(ResMgr.getDamagerWordResource(i)),a&&o.setNumber(t,ResMgr.getDamageNumberType(i),-15),this.fly(o,e)}},e.prototype.showMyBlood=function(t,e){var i=e.damageType,n=i==DamageTypes.MISS||i==DamageTypes.ZD||i==DamageTypes.CFYS||i==DamageTypes.CFPJ||i==DamageTypes.CFJS||i==DamageTypes.CFZD||i==DamageTypes.WWSH||i==DamageTypes.HUIXUE,a=i==DamageTypes.ZD||i==DamageTypes.HUIXUE;if(n){var o=this.getFlyNumber();MapContainer.ins().addBlood(o),o.setWord0Source(ResMgr.getDamageWord0Resource(e.senderType)),o.setWordSource(ResMgr.getDamagerWordResource(i)),a&&o.setNumber(t,ResMgr.getDamageNumberType(i)),this.fly(o,e)}},e.prototype.fly=function(t,e){if(getLocation("isShowHit",2)||e.damageType!=DamageTypes.HIT){var i=new EntityXY;i.x=e.targetPos.x,i.y=e.targetPos.y,i.dir=DirUtil.get8Dir(e.senderPos,e.targetPos);var n=ResMgr.getDamageTweenB(e);this.playFlyNumber(t,i,n)}},e.prototype.playFlyNumber=function(t,e,i,n){void 0===n&&(n=null);var a=Cfg.getTweenSourceName();if(RES.hasRes(a)){var o=RES.getRes(a);if(o){var s=o[i];null==s&&console.log("缺少飘字轨迹:"+i),SkillEditor.ins().playFlyNumberByCfg(t,e,s,n)
}else t.visible=!1,RES.getResAsync(a,function(a){var o=a[i];return o?(t.visible=!0,void SkillEditor.ins().playFlyNumberByCfg(t,e,o,n)):void console.log("没有这个飞行轨迹 -- "+i)},this)}},e.prototype.showExp=function(t,e,i){var n=ObjPool.pop(BitmapNumber);MapContainer.ins().addBlood(n);var a="";e>0&&(a="("+e+"%)"),n.setWordSource(ResMgr.getDamagerWordResource(DamageTypes.EXP)),n.setNumber("+"+t+a,ResMgr.getDamageNumberType(DamageTypes.EXP),-5);var o={damageType:DamageTypes.EXP,senderType:0,senderPos:i,targetPos:i};this.fly(n,o)},e.prototype.patchAddBuff=function(t){var e=t.readDouble(),i=new BuffData;i.parser(t),LogicSys.ins().addBuff(e,i.buffId)},e.prototype.patchAddBuffUI=function(t){t.readByte();var e=new BuffData;e.parser(t),this.buffDatas.push(e)},e.prototype.patchRemoveBuffUI=function(t){t.readByte();for(var e=t.readInt(),i=0;i<this.buffDatas.length;i++)if(this.buffDatas[i].buffId==e){this.buffDatas.splice(i,1);break}},e.prototype.sendRemoveBuff=function(t,e){var i=this.getBytes(3);i.writeDouble(t),i.writeInt(e),this.send(i)},e.prototype.patchRemoveBuff=function(t){var e=t.readDouble(),i=t.readInt();LogicSys.ins().removeBuff(e,i)},e.prototype.doAddEffect=function(t){t.readDouble(),t.readInt()},e.prototype.doRemoveEffect=function(t){t.readDouble(),t.readInt()},e.prototype.patchSkillInfo=function(t){var e=t.readShort();this.skillDatas.length=e;for(var i=0;e>i;i++){var n=new SkillData;n.index=i,n.parser(t),this.skillDatas[i]=n}},e.prototype.sendSkillUp=function(t){var e=this.getBytes(4);e.writeShort(t),this.send(e)},e.prototype.patchSkillUp=function(t){var e=t.readInt(),i=t.readShort(),n=this.getSkillDataById(e);if(n){var a=n.level;if(n.level=i,n.isUp=!0,RpFun.showSkillSingleRp(n),0==a){var o=new DuiLieFlyItemData,s=this.createFlyItem(e);o.setData(s,function(){var t=JobSys.ins().getIconXy(getWin(MainUIButton).getBtnSkill(),s);return t=LayerMgr.Top.globalToLocal(t.x,t.y)},this,SkillActFlyWin,e),o.setOrder(5),DuiLieSys.ins().flyData.addFlyData(o)}}else console.log("2-4仙术id:"+e+",数据不存在");return RpFun.showActRp(276),n},e.prototype.createFlyItem=function(t){var e=new eui.Image;return e.width=e.height=85,e.source=ResMgr.getSkillResourceItemName(Cfg.getConfig(SkillsConfig,t).icon,!0,!0),e},e.prototype.sendSkillUpOneKey=function(){this.sendBase(5)},e.prototype.patchSkillUpOneKey=function(t){for(var e=t.readShort(),i=0;e>i;i++){var n=t.readShort(),a=t.readShort(),o=this.getSkillDataById(n);o?o.level!=a&&(o.level=a,o.isUp=!0,RpFun.showSkillSingleRp(o)):console.log("2-5仙术id:"+n+",数据不存在")}RpFun.showActRp(276)},e.prototype.doClearCD=function(t){t.readDouble();var e=t.readByte();if(e)for(var i=0;e>i;i++)for(var n=t.readInt(),a=0,o=this.skillDatas;a<o.length;a++){var s=o[a];if(s.skillId==n){s.skillCDTick=0;break}}else for(var r=0,u=this.skillDatas;r<u.length;r++){var h=u[r];h.skillCDTick=0}},e.prototype.patchShenYouSkillAdd=function(t){var e=t.readDouble(),i=new SkillData;i.parser1(t);var n=t.readInt();this.skillDataFuzhus.push(i),0!=n&&this.removeFuZhuSKillBySkillId(n);var a=LogicSys.ins().getEntityByHandle(e);a&&(0!=n&&a.AI.removeSKillBySkillId(n),a.AI.addSkillData(i)),console.log("神佑辅AI技能添加 2-12 技能ID:"+i.skillId)},e.prototype.patchPlayEff=function(t){var e=t.readDouble(),i=t.readInt(),n=LogicSys.ins().getEntityByHandle(e),a=!1;if(n){var o=new SkillEditorData;o.effectId=i.toString(),o.configs=Cfg.getSkillEditorConfig(i.toString()),o.isShow=!0,o.sender.copy(n),SkillEditor.ins().play(o),a=!0}console.log("2-13 播放特效ID:"+i+" handle:"+e+" 是否成功:"+a)},e.prototype.removeFuZhuSKillBySkillId=function(t){for(var e=0;e<this.skillDataFuzhus.length;e++){var i=this.skillDataFuzhus[e];i.skillId==t&&this.skillDataFuzhus.splice(e,1)}},e.prototype.getSkillDataByIndex=function(t){return this.skillDatas[t]},e.prototype.getSkillDataById=function(t){for(var e=0;e<this.skillDatas.length;e++)if(this.skillDatas[e].skillId==t)return this.skillDatas[e];return null},e.prototype.getSkillTotalLv=function(){for(var t=0,e=0,i=this.skillDatas;e<i.length;e++){var n=i[e];t+=n.level}return t},e.prototype.createSkillData=function(t,e,i){var n=new SkillData;return n.level=i,n.skillId=t,n},e.prototype.sendSkilBuy=function(t,e){var i=this.getBytes(42);i.writeShort(0),i.writeShort(t+1),i.writeShort(e),this.send(i)},e.prototype.patchSkillPassivityInfo=function(t){for(var e=t.readShort(),i=0;e>i;i++){var n=this.getSkillPassivityDataById(t.readInt());n.level=t.readShort(),n.level>0?n.isOpen=1:n.isOpen=0}},e.prototype.sendSkillPassivityUp=function(t){var e=this.getBytes(61);e.writeInt(t),this.send(e)},e.prototype.patchSkillPassivityUp=function(t){var e=this.getSkillPassivityDataById(t.readInt());e.level=t.readShort(),RpFun.showSkillPassivityRedPoint(e)},e.prototype.getSkillPassivityDataById=function(t){return this.skillPassivityDatas[t]||(this.skillPassivityDatas[t]=new SkillPassivityData(t))},e.prototype.getSkillPassivityDatasByIds=function(t){for(var e=[],i=0,n=t;i<n.length;i++){var a=n[i];e.push(this.getSkillPassivityDataById(a))}return e},e.prototype.isSkillPassivityUp=function(t){var e=!1;if(!t.isMax()){var i=t.getConfig().item;e=i&&i.id?GFunc.isConsumeEnough(i):!0,e=e&&this.getSkillPassivityUpValue(t)>=t.getConfig().typeLevel}return e},e.prototype.getSkillPassivityUpValue=function(t){var e=Number.MAX_VALUE;switch(t.getConfig().typeUp){case SkillPassiveType.ShenQi:e=SqXySys.ins().shenQiModel.level;break;case SkillPassiveType.DamonLevel:e=ShouHuNewSys.ins().damonModel.level;break;case SkillPassiveType.DamonStage:e=ShouHuNewSys.ins().damonModel.stageLevel;break;case SkillPassiveType.ChiBang:e=SqXySys.ins().wingModel.level;break;case SkillPassiveType.YongbingLevel:e=ShouHuNewSys.ins().yongbingModel.level;break;case SkillPassiveType.YongbingStage:e=ShouHuNewSys.ins().yongbingModel.stageLevel;break;case SkillPassiveType.Sz:e=SqXySys.ins().szModel.level;break;case SkillPassiveType.Meilin:e=SqXySys.ins().meilinModel.level;break;case SkillPassiveType.ShenmoLevel:e=ShouHuNewSys.ins().shenmoModel.level;break;case SkillPassiveType.ShenmoStage:e=ShouHuNewSys.ins().shenmoModel.stageLevel;break;case SkillPassiveType.Foot:e=FootSys.ins().getHuanHuaDataById(t.param).minEquipLv;break;case SkillPassiveType.Xianlu:e=XianLuSys.ins().isJieYuan()?t.getConfig().typeLevel:-1;break;case SkillPassiveType.ShenYouYinJi:e=QiyuSys.ins().shenYouData.yinjiLevel;break;case SkillPassiveType.ShenYouSkill:e=QiyuSys.ins().shenYouData.rank;break;default:e=0}return e},e.prototype.getSkillPassivityRedPointKey=function(t){var e=[];switch(t.getConfig().typeUp){case SkillPassiveType.ShenQi:e=[RoleWin,RolePanel,SqXyWin,ShenQiPanel,ShenQiLevelPanel];break;case SkillPassiveType.DamonLevel:e=[ShouHuWin,DamonPanel,DamonLevelPanel];break;case SkillPassiveType.DamonStage:e=[ShouHuWin,DamonPanel,DamonStagePanel];break;case SkillPassiveType.ChiBang:e=[RoleWin,RolePanel,SqXyWin,WingPanel,WingLevelPanel];break;case SkillPassiveType.YongbingLevel:e=[ShouHuWin,YongbingPanel,YongbingLevelPanel];break;case SkillPassiveType.YongbingStage:e=[ShouHuWin,YongbingPanel,YongbingStagePanel];break;case SkillPassiveType.Sz:e=[RoleWin,RolePanel,SqXyWin,SzPanel,SzLevelPanel];break;case SkillPassiveType.Meilin:e=[RoleWin,RolePanel,SqXyWin,MeilinPanel,MeilinLevelPanel];break;case SkillPassiveType.ShenmoLevel:e=[ShouHuWin,ShenmoPanel,ShenmoLevelPanel];break;case SkillPassiveType.ShenmoStage:e=[ShouHuWin,ShenmoPanel,ShenmoStagePanel];break;case SkillPassiveType.Aoyi:var i=this.aoyiModel.getTypeBySkillId(t.id);e=[SkillWin,SkillMainPanel,AoyiPanel,i];break;case SkillPassiveType.Foot:e=[RoleWin,RolePanel,ZhuangBanWin,FootPanel,FootMiYuPanel,t.param];break;case SkillPassiveType.Xianlu:e=[XianLuWin,XianluPanel]}return e=e.concat("skillUp",t.id)},e.prototype.getSkillPassivityLevelStr=function(t){var e="",i=t.getConfig().typeLevel,n=0;switch(t.getConfig().typeUp){case SkillPassiveType.DamonStage:n=Cfg.getConfig(DamonConstConfig).starPerLevel;break;case SkillPassiveType.YongbingStage:n=Cfg.getConfig(YongbingConstConfig).starPerLevel;break;case SkillPassiveType.ShenmoStage:n=Cfg.getConfig(ShenmoConstConfig).starPerLevel}return n?(e+=GFunc.getChineseNum(Math.floor(i/n)+1)+Lang.common_jie,e+=GFunc.getChineseNum(i%n)+Lang.common_xing):e+=i,e},e.prototype.getSkillPassivityUpDec=function(t){for(var e=this.getSkillPassivityUpValue(t[0]),i=[],n=0,a=t;n<a.length;n++){var o=a[n];if(!o.isMax()){var s=Cfg.getConfigs(SkillPassiveConfig,o.id,CondType.NONE);for(var r in s)if(s[r].typeLevel>e){i.push(s[r]);break}}}var u="";if(i.length>0){SortUtil.sortOn(i,["typeLevel"],[SortType.up]);var h=i[0],l=h.typeLevel-e;u=Lang.skill_str29+" "+addColor(l+Lang.common_ji,16768297)+" "+Lang.skill_str30,u+=addColor("【"+h.name+"】"+(h.level+1)+Lang.common_ji,16768297)}return u},e.prototype.patchHunqiData=function(t){this.awakeLevel=t.readShort(),this.awakeExp=t.readInt();var e=t.readByte();this.hunqiDatas.length=e;for(var i=0;e>i;i++){var n=new HunqiData;n.parser(t),this.hunqiDatas[i]=n}this.skillMaxLv=Cfg.getConfig(HunqiAwakeConfig,this.awakeLevel).skillmax},e.prototype.sendHunqiUp=function(t){var e=this.getBytes(71);e.writeInt(t),this.send(e)},e.prototype.patchHunqiUp=function(t){var e=this.awakeLevel;this.awakeLevel=t.readShort(),this.awakeExp=t.readInt();var i=t.readShort(),n=this.getHunqiDataById(i),a=n.copy();n.level;return n?n.level=t.readShort():console.log("法器:"+i+"不存在"),n.canUp()||closeWin(HunqiUpWin),this.awakeLevel>e&&openWin(HunqiAwakeWin),n.level>a.level&&0==a.level&&openWin(HunqiActWin,n),RpFun.showHunqiRedPointSingle(n),this.skillMaxLv=Cfg.getConfig(HunqiAwakeConfig,this.awakeLevel).skillmax,n},e.prototype.getDatasByQuality=function(t){for(var e=[],i=0,n=this.hunqiDatas;i<n.length;i++){var a=n[i];a.getQuality()==t&&e.push(a)}return e},e.prototype.getHunqiDataById=function(t){for(var e=0,i=this.hunqiDatas;e<i.length;e++){var n=i[e];if(n.id==t)return n}return null},e.prototype.getHunqiDataByIndex=function(t){return this.hunqiDatas[t]},e.prototype.onSocketClose=function(){this.buffDatas.length=0},e}(BaseSys);__reflect(SkillSys.prototype,"SkillSys");var System;!function(t){t.skillSys=SkillSys.ins.bind(SkillSys)}(System||(System={})),window.SkillSys=SkillSys;var AoyiData=function(){function t(t){this.type=0,this.skillid=0,this.config=t,this.type=t.type,this.skillid=t.skillid}return t.prototype.getSkillData=function(){return this.skillData||(this.skillData=SkillSys.ins().getSkillPassivityDataById(this.skillid))},t.prototype.getName=function(){return this.getSkillData().getConfig().name},t.prototype.getSkillDes=function(){return this.isAct()?this.getSkillData().getConfig().skinname:this.getSkillData().getNextConfig().skinname},t.prototype.getConsume=function(){return[this.getSkillData().getConfig().item]},t.prototype.isAct=function(){return this.getSkillData().isAct()},t}();__reflect(AoyiData.prototype,"AoyiData");var AoyiItem=function(t){function e(){var e=t.call(this)||this;return e.skinName="AoyiItemEUI",e.imgIcon.name="AoyiItem.imgIcon",e.showRedPoint(!1),e}return __extends(e,t),e.prototype.dataChanged=function(){if(this.data instanceof AoyiData){this.imgIcon.source=ResMgr.getSkillPassivityItemName(this.data.skillid,this.data.isAct()),this.lbName.text=this.data.getName(),this.lbJhsm.text=this.data.config.dec,this.lbDesc.textFlow=StrUtil.toTF(this.data.getSkillDes()),this.lbYjh.visible=this.data.isAct(),this.lbJhsm.visible=!this.data.isAct();var t=(e=RpSys.ins()).getData.apply(e,SkillSys.ins().getSkillPassivityRedPointKey(this.data.getSkillData()));this.showRedPoint(t)}var e},e.prototype.showRedPoint=function(t){this.redPoint.visible=t,this.imgKjh.visible=t},e}(BaseItemRender);__reflect(AoyiItem.prototype,"AoyiItem"),window.AoyiItem=AoyiItem;var SDKConfig=function(){function t(){}return t}();__reflect(SDKConfig.prototype,"SDKConfig");var BuffData=function(){function t(){this.buffId=0,this.addTick=0,this.endTick=0,this.targetHandle=0,this.senderHandle=0,this.buffValue=0}return t.prototype.parser=function(t){this.buffId=t.readInt();var e=t.readInt();this.buffValue=t.readInt(),this.addTick=Timer.ins().getTimer(),this.endTick=this.addTick+1e3*e},Object.defineProperty(t.prototype,"buffConfig",{get:function(){return Cfg.getConfig(EffectsConfig,this.buffId)},enumerable:!0,configurable:!0}),t.prototype.getBuffValue=function(){var t=this.buffConfig.args.d;return AttrData.getAttrValue(new AttrData(t,this.buffValue))},t.prototype.getSecond=function(){if(-1==this.buffConfig.duration)return-1;var t=(this.endTick-Timer.ins().getTimer())/1e3;return Math.max(t,0)},t}();__reflect(BuffData.prototype,"BuffData");var ShengdunConstConfig=function(){function t(){}return t}();__reflect(ShengdunConstConfig.prototype,"ShengdunConstConfig");var BuffPanelItemCZ=function(t){function e(){var e=t.call(this)||this;return e.skinName="BuffPanelItemCZEUI",e}return __extends(e,t),e.prototype.dataChanged=function(){var t=this.data;this.btnGoAct.name="btnGoAct_"+this.itemIndex,this.imgIcon.source=t.getIcon(),this.labelContent.textFlow=addColorTF(t.getDesc()),this.labelName.text=t.getName(),this.labelTime.textFlow=addColorTF(t.getTime()),t.isAct?this.currentState="act":this.currentState="noact"},e}(BaseItemRender);__reflect(BuffPanelItemCZ.prototype,"BuffPanelItemCZ"),window.BuffPanelItemCZ=BuffPanelItemCZ;var BuffPanelItemPT=function(t){function e(){var e=t.call(this)||this;return e.skinName="BuffPanelItemPTEUI",e}return __extends(e,t),e.prototype.dataChanged=function(){var t=this.data;this.imgIcon.source=ResMgr.getSkillPassivityItemName(t.buffConfig.icon,!0),this.labelContent.text=t.buffConfig.tip,this.labelName.text=t.buffConfig.name,this.updateTime()},e.prototype.updateTime=function(){var t=this.data;if(t){var e=t.getSecond(),i="";i=e>-1?getFormatTime(e,"hh:mm:ss"):"永久",this.labelTime.textFlow=addColorTF(i)}},e}(BaseItemRender);__reflect(BuffPanelItemPT.prototype,"BuffPanelItemPT"),window.BuffPanelItemPT=BuffPanelItemPT;var ShengdundanConfig=function(){function t(){}return t}();__reflect(ShengdundanConfig.prototype,"ShengdundanConfig");var ShengdunLvConfig=function(){function t(){}return t}();__reflect(ShengdunLvConfig.prototype,"ShengdunLvConfig");var BuffResidentDataMonth=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return __extends(e,t),e.prototype.getDesc=function(){var t=Lang.skill_str3.replace("$jy$",""+StrUtil.addColor("+10%",32047));return t=t.replace("$jb$",""+StrUtil.addColor("+10%",32047)),t=t.replace("$gj$",""+StrUtil.addColor("+5%",32047))},e.prototype.getName=function(){return Lang.skill_str2},e.prototype.getIcon=function(){return ResMgr.getBuffIcon(this.isAct?"buff_zcsy_iconyk":"buff_zcsy_iconyka")},e.prototype.getTime=function(){var t=ActSys.ins().getActDataById(ActId.ID_99900),e="";return t.isInYueKaTime()&&(e=t.getformatTime()),e},Object.defineProperty(e.prototype,"isAct",{get:function(){var t=ActSys.ins().getActDataById(ActId.ID_99900);return t.isInYueKaTime()?!0:!1},enumerable:!0,configurable:!0}),e.prototype.tiaozhuan=function(){openWin(YKWin)},e}(BuffResidentData);__reflect(BuffResidentDataMonth.prototype,"BuffResidentDataMonth");var BuffResidentDataTSZF=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return __extends(e,t),e.prototype.getDesc=function(){var t=Lang.skill_str1.replace("$jb$",""+StrUtil.addColor("+10%",32047));return t=t.replace("$sm$",""+StrUtil.addColor("+5%",32047)),t=t.replace("$fy$",""+StrUtil.addColor("+5%",32047))},e.prototype.getName=function(){return Lang.recharge_str26},e.prototype.getIcon=function(){return ResMgr.getBuffIcon(this.isAct?"buff_zycs_icontqk":"buff_zycs_icontqka")},e.prototype.getTime=function(){var t=ActSys.ins().getActDataById(ActId.ID_99500),e=Lang.common_str24;return t.isAct()&&(e=Lang.common_str28),e},Object.defineProperty(e.prototype,"isAct",{get:function(){var t=ActSys.ins().getActDataById(ActId.ID_99500);return t.isAct()},enumerable:!0,configurable:!0}),e.prototype.tiaozhuan=function(){openWin(ZZTQWin)},e}(BuffResidentData);__reflect(BuffResidentDataTSZF.prototype,"BuffResidentDataTSZF");var BuffResidentDataV5=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return __extends(e,t),e.prototype.getDesc=function(){return"装备强化成功率永久增加"+StrUtil.addColor(this.config.addEnhanceSuccess/100+"%",32047)},e.prototype.getName=function(){return"VIP"+this.config.lv},e}(BuffResidentData);__reflect(BuffResidentDataV5.prototype,"BuffResidentDataV5");var BuffResidentDataWordLevel=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return __extends(e,t),e.prototype.getDesc=function(){return Lang.common_str104.replace("$level$",StrUtil.addColor(GFunc.GetLvStrByLv(JobSys.ins().wordLevel),32047))},e.prototype.getName=function(){return Lang.common_str103},e.prototype.getTime=function(){return Lang.common_str102+"\n"+StrUtil.addColor(GFunc.GetLvStrByLv(Actor.ins().level),15794098)},Object.defineProperty(e.prototype,"isAct",{get:function(){return!0},enumerable:!0,configurable:!0}),e.prototype.getIcon=function(){return ResMgr.getBuffIcon(JobSys.ins().wordLevel>Actor.ins().level?"buff_zycs_iconexp":"buff_zycs_iconexpa")},e}(BuffResidentData);__reflect(BuffResidentDataWordLevel.prototype,"BuffResidentDataWordLevel");var SkillDamageData=function(){function t(){this.senderHandle=0,this.skillId=0,this.targetHandle=0,this.skillDamageRanges=[],this.isMyDamage=!1,this.isTeamDamage=!1}return t.prototype.parser=function(t){this.senderHandle=t.readDouble(),this.skillId=t.readInt(),this.targetHandle=t.readDouble();var e=t.readShort(),i=LogicSys.ins().getEntityByHandle(this.senderHandle);i&&(this.isMyDamage=i.masterHandle==Actor.ins().handle),i&&i instanceof EntityRole&&(this.isTeamDamage=i.data.teamId==LogicSys.ins().centerEntity.data.teamId);for(var n=0;e>n;n++){var a=new SkillDamageRange;a.handle=t.readDouble(),a.damageType=t.readByte(),a.senderType=t.readByte(),a.value=t.readDouble();var o=LogicSys.ins().getEntityByHandle(a.handle);o&&(a.targetPos.x=o.x,a.targetPos.y=o.y),i&&(a.senderPos.x=i.x,a.senderPos.y=i.y),(a.damageType==DamageTypes.MISS||0!=a.value)&&this.skillDamageRanges.push(a);var s=t.readDouble();if(s){var r=new SkillDamageRange;i&&(r.handle=i.handle),r.damageType=DamageTypes.FS,r.value=s,o&&(r.senderPos.x=o.x,r.senderPos.y=o.y),i&&(r.targetPos.x=i.x,r.targetPos.y=i.y),(a.damageType==DamageTypes.MISS||0!=a.value)&&this.skillDamageRanges.push(r)}}},t.prototype.reset=function(){this.senderHandle=0,this.skillId=0,this.targetHandle=0,this.skillDamageRanges.length=0,this.isMyDamage=!1},t}();__reflect(SkillDamageData.prototype,"SkillDamageData"),window.SkillDamageData=SkillDamageData;var SkillDamageRange=function(){function t(){this.damageType=0,this.value=0,this.handle=0,this.senderType=0,this.senderPos=new XY,this.targetPos=new XY}return t.prototype.reset=function(){this.damageType=0,this.value=0,this.handle=0,this.senderPos=new XY,this.targetPos=new XY},t}();__reflect(SkillDamageRange.prototype,"SkillDamageRange",["IDamage"]),window.SkillDamageRange=SkillDamageRange;var SkillDamageTongji=function(){function t(){this.log={}}return t.prototype.setDamage=function(t){this.log[t.senderHandle]||(this.log[t.senderHandle]=new DamageJob);var e=(this.log[t.senderHandle],this.getDamageJobByHandle(t.senderHandle)),i=LogicSys.ins().getEntityByHandle(t.senderHandle);e.isMy=i.AI instanceof AIRoleJJC,e.skillCount++,e.name=i.getName(),e.job=i.getJob();for(var n=0,a=t.skillDamageRanges;n<a.length;n++){var o=a[n],s=this.getDamageJobByHandle(o.handle),r=LogicSys.ins().getEntityByHandle(o.handle);r&&(s.name=r.getName(),s.job=r.getJob(),s.addBeDamage(o.value)),e.addDamage(o.value)}},t.prototype.getDamageJobByHandle=function(t){return this.log[t]||(this.log[t]=new DamageJob),this.log[t]},t}();__reflect(SkillDamageTongji.prototype,"SkillDamageTongji");var DamageJob=function(){function t(){this.skillCount=0,this.isMy=!1,this.name="",this.job=0,this.damageTotle=0,this.damageCount=0,this.beDamageTotle=0,this.beDamageCount=0}return t.prototype.addDamage=function(t){this.damageTotle+=t||0,this.damageCount++},t.prototype.addBeDamage=function(t){this.beDamageTotle+=t||0,this.beDamageCount++},Object.defineProperty(t.prototype,"damageAvg",{get:function(){return Math.abs(this.damageTotle/(this.damageCount||1))>>0},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"beDamageAvg",{get:function(){return Math.abs(this.beDamageTotle/(this.beDamageCount||1))>>0},enumerable:!0,configurable:!0}),t}();__reflect(DamageJob.prototype,"DamageJob");var SkillData=function(){function t(){this.index=0,this.skillId=0,this.level=0,this.skillCDTick=0,this.isUp=!1,this.actionIndex=0}return t.prototype.parser=function(t){this.skillId=t.readShort(),this.level=t.readShort()},t.prototype.parser1=function(t){this.skillId=t.readInt(),this.level=t.readShort()},t.prototype.canTisheng=function(){return this.isAct&&!this.isMax},t.prototype.canUp=function(){return this.isAct&&!this.isMax&&this.isConsumeEnough()},Object.defineProperty(t.prototype,"isMax",{get:function(){return this.level>=SkillSys.ins().skillMaxLv},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"isAct",{get:function(){return this.level>0},enumerable:!0,configurable:!0}),t.prototype.isConsumeEnough=function(){return Actor.ins().getCurrency(CurType.talentValue)>=this.skillLevelConfig.talentvalue},Object.defineProperty(t.prototype,"skillConfig",{get:function(){return this._skillConfig||(this._skillConfig=Cfg.getConfig(SkillsConfig,this.skillId))},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"skillLevelConfig",{get:function(){return this._skillsLevelConfig&&this._skillsLevelConfig.level==this.level||(this._skillsLevelConfig=Cfg.getConfig(SkillsLevelConfig,this.index,this.level)),this._skillsLevelConfig},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"power",{get:function(){var t=this.skillLevelConfig;return t.score+GFunc.getPower(t.attr)||0},enumerable:!0,configurable:!0}),t.prototype.clone=function(){var e=new t;return e.skillId=this.skillId,e.level=this.level,e},t}();__reflect(SkillData.prototype,"SkillData");var SkillPassivityData=function(){function t(t){this.id=0,this.level=0,this.param=0,this.isOpen=0,this.id=t}return t.prototype.getConfig=function(){return this._config&&this._config.level==this.level||(this._config=Cfg.getConfig(SkillPassiveConfig,this.id,this.level)),this._config},t.prototype.getNextConfig=function(){var t=Cfg.getConfigs(SkillPassiveConfig,this.id,CondType.ALL);return t.length==this.level+1?this._nextConfig=t[this.level]:this._nextConfig=t[this.level+1],this._nextConfig},t.prototype.getPower=function(){return 1==this.getConfig().type?GFunc.getPower(this.getConfig().addattr)+this.getConfig().power>>0:this.getConfig().power},t.prototype.getNextPower=function(){return 1==this.getConfig().type?GFunc.getPower(this.getNextConfig().addattr)+this.getNextConfig().power>>0:this.getNextConfig().power},t.prototype.isAct=function(){return this.level>0},t.prototype.isMax=function(){return this.isAct()?this.getConfig().level>=this.getNextConfig().level:!1},t}();__reflect(SkillPassivityData.prototype,"SkillPassivityData");var SkillPifuData=function(){function t(){this.skillId=0,this.isSelect=!1,this.isAct=!1,this.skillPifuLevel=1}return t}();__reflect(SkillPifuData.prototype,"SkillPifuData");var SkillPifuRoleData=function(){function t(){this.skillPifuDatas=[]}return t.prototype.iniData=function(){for(var t=0;6>t;t++);},t}();__reflect(SkillPifuRoleData.prototype,"SkillPifuRoleData");var HunqiActWin=function(t){function e(){return t.call(this)||this}return __extends(e,t),e.prototype.initUI=function(){this.skinName="HunqiActWinEUI",this.addBg("public_zycs_greybg3"),t.prototype.initUI.call(this),this.layer=LayerMgr.Popup,this.mcIcon=new MC,this.groupIcon.addChild(this.mcIcon)},e.prototype.open=function(e){t.prototype.open.call(this),this.mcIcon.playFile(ResMgr.getEffName("hunqi"+e.id),-1),this.labelName.text=e.getIdConfig().name},e}(BaseWinSingle);__reflect(HunqiActWin.prototype,"HunqiActWin"),window.HunqiActWin=HunqiActWin;var HunqiAwakeWin=function(t){function e(){return t.call(this)||this}return __extends(e,t),e.prototype.initUI=function(){this.skinName="HunqiAwakeWinEUI",this.addBg("public_zycs_greybg0"),this.group.touchEnabled=!1,t.prototype.initUI.call(this),this.layer=LayerMgr.Popup},e.prototype.open=function(){t.prototype.open.call(this);var e=Cfg.getConfig(HunqiAwakeConfig,SkillSys.ins().awakeLevel-1),i=Cfg.getConfig(HunqiAwakeConfig,SkillSys.ins().awakeLevel),n=addColor("仙术上限：",13486270)+addColor(e.skillmax+" → "+i.skillmax,5949490);this.labelSkillMax.textFlow=addColorTF(n);var a=addColor("仙术伤害：",13486270)+addColor(e.skilladd/100+"% → "+i.skilladd/100+"%",5949490);this.labelSkillDamage.textFlow=addColorTF(a)},e}(BaseWinSingle);__reflect(HunqiAwakeWin.prototype,"HunqiAwakeWin"),window.HunqiAwakeWin=HunqiAwakeWin;var HunqiData=function(){function t(){this.id=1,this.level=0,this._quality=0}return t.prototype.parser=function(t){this.id=t.readShort(),this.level=t.readShort()},t.prototype.getIdConfig=function(){return this._idConfig&&this._idConfig.id==this.id?this._idConfig:this._idConfig=Cfg.getConfig(HunqiIdConfig,this.id)},t.prototype.getQualityConfig=function(){return Cfg.getConfig(HunqiQualityConfig,this.getQuality())},t.prototype.getLevelConfig=function(){return this._levelConfig&&this._levelConfig.level==this.level?this._levelConfig:this._levelConfig=Cfg.getConfig(HunqiLevelConfig,this.getQuality(),this.level)},t.prototype.getConsumeItem=function(){var t=new ItemDataReward;return t.id=this.getIdConfig().itemid,t.count=this.getLevelConfig().itemcount,t},t.prototype.isAct=function(){return this.level>0},t.prototype.isMax=function(){return this.level>=Cfg.getConfigs(HunqiLevelConfig,this.getQuality(),CondType.ALL).length-1},t.prototype.getQuality=function(){return this._quality||(this._quality=Cfg.getConfig(HunqiIdConfig,this.id).quality)},Object.defineProperty(t.prototype,"power",{get:function(){for(var t=GFunc.getPower(this.getLevelConfig().attr),e=Cfg.getHunqiActConfigsByQuality(this.getQuality(),this.level),i=0,n=e;i<n.length;i++){var a=n[i];t+=GFunc.getPower(a.attrlh)}return t},enumerable:!0,configurable:!0}),t.prototype.canUp=function(){return!this.isMax()&&this.getUpItemCount()>=this.getLevelConfig().itemcount},t.prototype.getUpItemCount=function(){var t=BagSys.ins().getItemCount(this.getIdConfig().itemid);return this.isAct()&&(t+=BagSys.ins().getItemCount(this.getQualityConfig().itemid)),t},t.prototype.copy=function(){var e=new t;return e.level=this.level,e.id=this.id,e},Object.defineProperty(t.prototype,"actNumber",{get:function(){var t=0;return t=!this.isAct()&&this.canUp()?1:this.canUp()?0:-1},enumerable:!0,configurable:!0}),t}();__reflect(HunqiData.prototype,"HunqiData");var ShengdunSkillConfig=function(){function t(){}return t.stage="stage",t}();__reflect(ShengdunSkillConfig.prototype,"ShengdunSkillConfig");var HunqiPanelItem=function(t){function e(){var e=t.call(this)||this;return e.skinName="HunqiPanelItemEUI",e.mcIcon=new MC,e.groupIcon.addChild(e.mcIcon),e.progressBar.labelFunction=e.progressLabelFunction.bind(e),e}return __extends(e,t),e.prototype.dataChanged=function(){var t=this.data,e=t.getUpItemCount(),i=t.getLevelConfig().itemcount;t.isAct()?this.currentState="normal":e>=i?this.currentState="canAct":this.currentState="unAct",this.bg.source="hq_zycs_k"+t.getQuality(),this.labelName.text=t.getIdConfig().name,this.labelLevel.text="Lv."+t.level,this.mcIcon.playFile(ResMgr.getEffName("hunqi"+t.id),-1),this.updateItemCount(),this.updateRp()},e.prototype.updateItemCount=function(){var t=this.data,e=t.getUpItemCount(),i=t.getLevelConfig().itemcount;this.progressBar.maximum=i,this.progressBar.value=e},e.prototype.progressLabelFunction=function(t,e){var i=this.data;return i&&i.isMax()?"MAX":i.getUpItemCount()+"/"+e},e.prototype.updateRp=function(){var t=this.data;this.redPoint.visible=RpSys.ins().getData(SkillWin,HunqiPanel,t.getQuality(),t.id)},e}(BaseItemRender);__reflect(HunqiPanelItem.prototype,"HunqiPanelItem"),window.HunqiPanelItem=HunqiPanelItem;var HunqiPanelTabItem=function(t){function e(){var e=t.call(this)||this;return e.skinName="HunqiPanelTabItemEUI",e}return __extends(e,t),e.prototype.dataChanged=function(){var t=this.data;null!=t?(this.iconDisplay.source=this.getIconDisplay(),this.iconDisplay1.source=this.getSelectIcon(),this.labelName.text=t.name,this.updateRp()):this.iconDisplay.source=""},e.prototype.updateRp=function(){this.redPoint.visible=RpSys.ins().getData(SkillWin,HunqiPanel,this.itemIndex+1)},e.prototype.getIconDisplay=function(){var t=this.data;return null!=t?"hq_zycs_"+t.quality+"1":void 0},e.prototype.getSelectIcon=function(){var t=this.data;return null!=t?"hq_zycs_"+t.quality+"2":void 0},e}(BaseItemRender);__reflect(HunqiPanelTabItem.prototype,"HunqiPanelTabItem"),window.HunqiPanelTabItem=HunqiPanelTabItem;var HunqiUpWin=function(t){function e(){return t.call(this)||this}return __extends(e,t),e.prototype.initUI=function(){this.skinName="HunqiUpWinEUI",t.prototype.initUI.call(this),this.layer=LayerMgr.Popup,this.setSkinPart("itemConsume",new ItemBaseReward),this.listLianhua.dataProvider=this.listLianhuaArr=new eui.ArrayCollection,this.listLianhua.itemRenderer=HunqiUpWinItem,this.labelHowGet.textFlow=addColorTF("获取途径",null,!0),this.progressBar.labelFunction=this.progressLabelFunction.bind(this),this.addBg()},e.prototype.progressLabelFunction=function(t,e){var i=this.hunqiData;return i&&i.isMax()?"MAX":i.getUpItemCount()+"/"+e},e.prototype.open=function(e){t.prototype.open.call(this),this.hunqiData=e,this.addClickE(this.btnAct,this.onClick),this.addClickE(this.btnUp,this.onClick),this.addClickE(this.labelHowGet,this.onClick),this.addLsn(BagSys.ins().patchItemChange,this.onItemChange),this.addLsn(SkillSys.ins().patchHunqiUp,this.onUpdate),this.onUpdate()},e.prototype.onItemChange=function(t){t.cfg.type==ItemType.Hunqi&&(this.progressBar.maximum=this.hunqiData.getLevelConfig().itemcount,this.progressBar.value=this.hunqiData.getUpItemCount())},e.prototype.updateLianhua=function(){for(var t=Cfg.getHunqiLianhuaConfigs(this.hunqiData.getQuality()),e=[],i=0,n=t;i<n.length;i++){var a=n[i],o=new HunqiUpWinItemData;o.id=this.hunqiData.id,o.levelConfig=a,e.push(o)}this.listLianhuaArr.source=e},e.prototype.onUpdate=function(){var t=this.hunqiData.getLevelConfig(),e=new ItemDataReward;e.id=this.hunqiData.getIdConfig().itemid;var i=Cfg.getItemCfg(e.id);if(this.labelName.text=i.getName(),this.labelLv.text="Lv."+t.level,this.itemConsume.data=e,this.progressBar.maximum=t.itemcount,this.progressBar.value=this.hunqiData.getUpItemCount(),this.labelNormalAttrCur.text=AttrData.parse(t.attr).join("\n"),this.hunqiData.isMax())this.currentState="max";else{this.hunqiData.isAct()?this.currentState="up":this.currentState="act";var n=this.hunqiData.copy();n.level+=1;var a=n.getLevelConfig();this.labelNormalAttrNext.text=AttrData.parse(a.attr).join("\n")}this.updateLianhua()},e.prototype.onClick=function(t){switch(t.currentTarget){case this.btnAct:this.hunqiData.canUp()?SkillSys.ins().sendHunqiUp(this.hunqiData.id):GFunc.checkConsumeEnough(this.hunqiData.getConsumeItem());break;case this.btnUp:this.hunqiData.canUp()?SkillSys.ins().sendHunqiUp(this.hunqiData.id):GFunc.checkConsumeEnough(this.hunqiData.getConsumeItem());break;case this.labelHowGet:GFunc.checkConsumeEnough(this.hunqiData.getConsumeItem())}},e.prototype.getBtnAct=function(){return this.btnAct},e}(BaseWinSingle);__reflect(HunqiUpWin.prototype,"HunqiUpWin"),window.HunqiUpWin=HunqiUpWin;var HunqiUpWinItem=function(t){function e(){var e=t.call(this)||this;return e.skinName="HunqiUpWinItemEUI",e}return __extends(e,t),e.prototype.dataChanged=function(){var t=this.data,e=Cfg.getConfig(HunqiIdConfig,t.id),i=SkillSys.ins().getHunqiDataById(e.id);this.labelAttr.text=AttrData.parse(t.levelConfig.attrlh).join("\n"),i.level>=t.levelConfig.level?this.labelActLevel.text="":this.labelActLevel.textFlow=addColorTF(t.levelConfig.level+"级激活",15733780)},e}(BaseItemRender);__reflect(HunqiUpWinItem.prototype,"HunqiUpWinItem"),window.HunqiUpWinItem=HunqiUpWinItem;var HunqiUpWinItemData=function(){function t(){this.id=1
}return t}();__reflect(HunqiUpWinItemData.prototype,"HunqiUpWinItemData");var SkillActFlyWin=function(t){function e(){var e=t.call(this)||this;return e.layer=LayerMgr.Top,e.winType=WinType.NeverCloseWin,e.mc=new MC,e.skillId=0,e.flyFun=new Caller,e.skinName="SkillActFlyWinEUI",e}return __extends(e,t),e.prototype.open=function(t,e,i){this.skillId=t,this.flyFun.obj=i,this.flyFun.func=e;var n=Cfg.getConfig(SkillsConfig,t);this.imgIcon.source=ResMgr.getSkillResourceItemName(n.icon,!0,!0),this.labelName.text=n.name,Timer.ins()["do"](1e3,0,1,this.end,this)},e.prototype.end=function(){this.flyFun.param=[this.imgIcon.localToGlobal()],this.flyFun.call(),closeWin(this)},e}(BaseWinSingle);__reflect(SkillActFlyWin.prototype,"SkillActFlyWin"),window.SkillActFlyWin=SkillActFlyWin;var SkillIcon=function(t){function e(){var e=t.call(this)||this;return e.skinName="SkillItemSkin",e}return __extends(e,t),e.prototype.setData=function(t){this.data=t,this.imgIcon.source=ResMgr.getSkillResourceItemName(t.skillConfig.icon,t.isAct)},e.prototype.setRedPoint=function(t){this.imgRedPoint.visible=t},e}(BaseItemRender);__reflect(SkillIcon.prototype,"SkillIcon"),window.SkillIcon=SkillIcon;var ShengdunStageConfig=function(){function t(){}return t}();__reflect(ShengdunStageConfig.prototype,"ShengdunStageConfig");var ShenghunCommonConfig=function(){function t(){}return t}();__reflect(ShenghunCommonConfig.prototype,"ShenghunCommonConfig");var SkillPanelItem=function(t){function e(){var e=t.call(this)||this;return e.skinName="SkillPanelItemEUI",e}return __extends(e,t),e.prototype.dataChanged=function(){var t=this.data;t.isAct?this.currentState="normal":this.currentState="unAct",this.imgIcon.source=ResMgr.getSkillResourceItemName(t.skillConfig.icon,t.isAct,!0),this.labelName.text=t.skillConfig.name,this.labelLevel.text=t.level.toString(),this.progressBar.maximum=SkillSys.ins().skillMaxLv,this.progressBar.value=t.level,this.progressBar.labelFunction=this.labelFunction.bind(this),t.isUp&&(t.isUp=!1,this.mcGroup.addChild(MC.createCenterGruop("res/eff/jneff2",1)))},e.prototype.labelFunction=function(t,e){var i=this.data;return i.isMax?"MAX":t+"/"+e},e.prototype.setRedPoint=function(t){this.redPoint.visible=t},e.prototype.setSelect=function(t){t?this.selectMC||(this.selectMC=GFunc.playUIMovie("jneff1",73,53,this.groupSelect,-1)):this.selectMC&&(DisUtil.remove(this.selectMC),this.selectMC=null)},e.prototype.getIcon=function(){return this.imgIcon},e}(BaseItemRender);__reflect(SkillPanelItem.prototype,"SkillPanelItem"),window.SkillPanelItem=SkillPanelItem;var ShenghunFubenConfig=function(){function t(){}return Object.defineProperty(t,"zslevel",{get:function(){return"zslevel"},enumerable:!0,configurable:!0}),t.fbId="fbId",t}();__reflect(ShenghunFubenConfig.prototype,"ShenghunFubenConfig");var SkillPassivityItem2=function(t){function e(){return t.call(this)||this}return __extends(e,t),e.prototype.dataChanged=function(){t.prototype.dataChanged.call(this),this.data instanceof SkillPassivityData&&(this.lbLv.text=""+this.data.level)},e}(SkillPassivityItem);__reflect(SkillPassivityItem2.prototype,"SkillPassivityItem2"),window.SkillPassivityItem2=SkillPassivityItem2;var ShenghunInspireConfig=function(){function t(){}return t}();__reflect(ShenghunInspireConfig.prototype,"ShenghunInspireConfig");var SkillPassivityUpWin2=function(t){function e(){return t.call(this)||this}return __extends(e,t),e.prototype.initUI=function(){t.prototype.initUI.call(this),this.setSkinPart("item",new SkillPassivityItem2)},e.prototype.upatePanel=function(){t.prototype.upatePanel.call(this),this.power=""+this.data.getNextPower(),this.lbCur.text=this.data.getNextConfig().skinname,this.lbCur.textColor=3821938,this.lbNext.text="",this.lbN.text="",this.lbC.text=""},e}(SkillPassivityUpWin);__reflect(SkillPassivityUpWin2.prototype,"SkillPassivityUpWin2"),window.SkillPassivityUpWin2=SkillPassivityUpWin2;var ShenghunNpcConfig=function(){function t(){}return t}();__reflect(ShenghunNpcConfig.prototype,"ShenghunNpcConfig");var MeilinModel=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.huanHuaDatas=[],e.fuHunDatas=[],e}return __extends(e,t),e.prototype.getLevelConfig=function(){return this.levelConfig&&this.levelConfig.star==this.level||(this.levelConfig=Cfg.getConfig(MeilinLevelConfig,this.level)),this.levelConfig},e.prototype.getLevelNextConfig=function(){return(!this.levelNextConfig||this.levelNextConfig.star<=this.level)&&(this.levelNextConfig=Cfg.getNextConfig(MeilinLevelConfig,this.level)),this.levelNextConfig},e.prototype.parserInfo=function(t){this.huanHuaId=t.readInt(),this.level=t.readShort();for(var e=t.readByte(),i=0;e>i;i++){var n=t.readInt(),a=t.readShort(),o=this.getHuanHuaDataById(n);o.level=a}e=t.readByte();for(var n=1;e>=n;n++){var o=this.getFuHunDataById(n);o.setLv(t.readShort())}},e.prototype.parserUp=function(t){this.level=t.readShort()},e.prototype.parserHuanHuaUp=function(t){var e=this.getHuanHuaDataById(t.readInt());return e.level=t.readShort(),e},e.prototype.parserFuHunUp=function(t){var e=this.getFuHunDataById(t.readByte());e.setLv(t.readShort())},e.prototype.parserHuanHua=function(t){this.huanHuaId=t.readInt()},e.prototype.getHuanHuaDataById=function(t){return this.huanHuaDatas[t]||(this.huanHuaDatas[t]=new MeilinHuanHuaData(t))},e.prototype.getHuanHuaGroupNames=function(){return Cfg.getMeilinHuanhuaGroupConfigNames()},e.prototype.getHuanHuaDatasByGroupId=function(t){for(var e=[],i=Cfg.getConfig(MeilinHuanhuaGroupConfig,t),n=0,a=i.huanhuaIds;n<a.length;n++){var o=a[n];e.push(this.getHuanHuaDataById(o))}return e},e.prototype.getHuanHuaDatas=function(){var t=[];for(var e in this.huanHuaDatas)t.push(this.huanHuaDatas[e]);return t},e.prototype.getFuHunDataById=function(t){return this.fuHunDatas[t-1]||(this.fuHunDatas[t-1]=new MeilinFuHunData(t))},e.prototype.getFuHunDatas=function(){return this.fuHunDatas},e.prototype.getLevelConsume=function(){return this.getLevelConfig().needitem},e.prototype.getLevelAttrDatas=function(){for(var t=[],e=this.getLevelConfig(),i=this.getLevelNextConfig(),n=e.attr.length,a=0;n>a;a++){var o=e.attr[a],s=i.attr[a],r=new ComAttrData(o,s,e.star>=i.star);t.push(r)}return t},e.prototype.getLevelHuanHuaDatas=function(t){for(var e=[],i=t.getAttrsByLv(),n=t.getAttrsByLv(t.level+1),a=t.level>=t.getConfig().maxLevel,o=i.length,s=0;o>s;s++){var r=new ComAttrData(i[s],n[s],a);e.push(r)}return e},e.prototype.getLevelHuanHuaDatasAll=function(){var t=[];for(var e in this.huanHuaDatas){var i=this.huanHuaDatas[e];t=AttrData.mergeAttr(i.getAttrsByLv(),t)}return t},e.prototype.getLevelFuHunDatas=function(t){for(var e=[],i=t.getConfig(),n=i.attr.length,a=0;n>a;a++){var o=new AttrData(i.attr[a].type,i.attr[a].value*t.getLv()),s=new AttrData(i.attr[a].type,i.attr[a].value*(t.getLv()+1)),r=new ComAttrData(o,s,t.isMax());e.push(r)}return e},e.prototype.getLevelFuHunDatasAll=function(){var t=[];for(var e in this.fuHunDatas){var i=this.fuHunDatas[e],n=AttrData.attrMultiple(i.getConfig().attr,i.getLv());t=AttrData.mergeAttr(n,t)}return t},e.prototype.getLevelPower=function(){return GFunc.getPower(this.getLevelConfig().attr)>>0},e.prototype.getHuanHuaPower=function(){var t=0;for(var e in this.huanHuaDatas){var i=this.huanHuaDatas[e];i.level>0&&(t+=GFunc.getPower(i.getAttrsByLv())>>0)}return t},e.prototype.getFuHunPower=function(){var t=0;for(var e in this.fuHunDatas){var i=this.fuHunDatas[e];if(i.getLv()>0){var n=AttrData.attrMultiple(i.getConfig().attr,i.getLv());t+=GFunc.getPower(n)>>0}}return t},e.prototype.getApperaenceId=function(){return this.getHuanHuaDataById(this.huanHuaId).getApperaenceId()},e.prototype.getSkillIds=function(){return Cfg.getConfig(MeilinConstConfig).skills},e.prototype.isMaxLv=function(){return this.getLevelConfig().star>=this.getLevelNextConfig().star},e}(SqXyBaseModel);__reflect(MeilinModel.prototype,"MeilinModel");var ShenQiModel=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.huanHuaDatas=[],e.fuHunDatas=[],e}return __extends(e,t),e.prototype.getLevelConfig=function(){return this.levelConfig&&this.levelConfig.star==this.level||(this.levelConfig=Cfg.getConfig(ShenqiLevelConfig,this.level)),this.levelConfig},e.prototype.getLevelNextConfig=function(){return(!this.levelNextConfig||this.levelNextConfig.star<=this.level)&&(this.levelNextConfig=Cfg.getNextConfig(ShenqiLevelConfig,this.level)),this.levelNextConfig},e.prototype.parserInfo=function(t){this.huanHuaId=t.readInt(),this.level=t.readShort();for(var e=t.readByte(),i=0;e>i;i++){var n=t.readInt(),a=t.readShort(),o=this.getHuanHuaDataById(n);o.level=a}e=t.readByte();for(var n=1;e>=n;n++){var o=this.getFuHunDataById(n);o.setLv(t.readShort())}},e.prototype.parserUp=function(t){this.level=t.readShort()},e.prototype.parserHuanHuaUp=function(t){var e=this.getHuanHuaDataById(t.readInt());return e.level=t.readShort(),e},e.prototype.parserFuHunUp=function(t){var e=this.getFuHunDataById(t.readByte());e.setLv(t.readShort())},e.prototype.parserHuanHua=function(t){this.huanHuaId=t.readInt()},e.prototype.getHuanHuaDataById=function(t){return this.huanHuaDatas[t]||(this.huanHuaDatas[t]=new ShenQiHuanHuaData(t))},e.prototype.getHuanHuaGroupNames=function(){return Cfg.getShenqiHuanhuaGroupConfigNames()},e.prototype.getHuanHuaDatasByGroupId=function(t){for(var e=[],i=Cfg.getConfig(ShenqiHuanhuaGroupConfig,t),n=0,a=i.huanhuaIds;n<a.length;n++){var o=a[n];e.push(this.getHuanHuaDataById(o))}return e},e.prototype.getHuanHuaDatas=function(){var t=[];for(var e in this.huanHuaDatas)t.push(this.huanHuaDatas[e]);return t},e.prototype.getFuHunDataById=function(t){return this.fuHunDatas[t-1]||(this.fuHunDatas[t-1]=new ShenQiFuHunData(t))},e.prototype.getFuHunDatas=function(){return this.fuHunDatas},e.prototype.getLevelConsume=function(){return this.getLevelConfig().needitem},e.prototype.getLevelAttrDatas=function(){for(var t=[],e=this.getLevelConfig(),i=this.getLevelNextConfig(),n=e.attr.length,a=0;n>a;a++){var o=e.attr[a],s=i.attr[a],r=new ComAttrData(o,s,e.star>=i.star);t.push(r)}return t},e.prototype.getLevelHuanHuaDatas=function(t){for(var e=[],i=t.getAttrsByLv(),n=t.getAttrsByLv(t.level+1),a=t.level>=t.getConfig().maxLevel,o=i.length,s=0;o>s;s++){var r=new ComAttrData(i[s],n[s],a);e.push(r)}return e},e.prototype.getLevelHuanHuaDatasAll=function(){var t=[];for(var e in this.huanHuaDatas){var i=this.huanHuaDatas[e];t=AttrData.mergeAttr(i.getAttrsByLv(),t)}return t},e.prototype.getLevelFuHunDatas=function(t){for(var e=[],i=t.getConfig(),n=i.attr.length,a=0;n>a;a++){var o=new AttrData(i.attr[a].type,i.attr[a].value*t.getLv()),s=new AttrData(i.attr[a].type,i.attr[a].value*(t.getLv()+1)),r=new ComAttrData(o,s,t.isMax());e.push(r)}return e},e.prototype.getLevelFuHunDatasAll=function(){var t=[];for(var e in this.fuHunDatas){var i=this.fuHunDatas[e],n=AttrData.attrMultiple(i.getConfig().attr,i.getLv());t=AttrData.mergeAttr(n,t)}return t},e.prototype.getLevelPower=function(){return GFunc.getPower(this.getLevelConfig().attr)>>0},e.prototype.getHuanHuaPower=function(){var t=0;for(var e in this.huanHuaDatas){var i=this.huanHuaDatas[e];i.level>0&&(t+=GFunc.getPower(i.getAttrsByLv())>>0)}return t},e.prototype.getFuHunPower=function(){var t=0;for(var e in this.fuHunDatas){var i=this.fuHunDatas[e];if(i.getLv()>0){var n=AttrData.attrMultiple(i.getConfig().attr,i.getLv());t+=GFunc.getPower(n)>>0}}return t},e.prototype.getApperaenceId=function(){return this.getHuanHuaDataById(this.huanHuaId).getApperaenceId(Actor.ins().job)},e.prototype.getSkillIds=function(){return Cfg.getConfig(ShenqiConstConfig).skills},e.prototype.isMaxLv=function(){return this.getLevelConfig().star>=this.getLevelNextConfig().star},e}(SqXyBaseModel);__reflect(ShenQiModel.prototype,"ShenQiModel");var ShengLingAppearanceConfig=function(){function t(){}return t}();__reflect(ShengLingAppearanceConfig.prototype,"ShengLingAppearanceConfig");var ShengLingConfig=function(){function t(){}return t}();__reflect(ShengLingConfig.prototype,"ShengLingConfig");var SqXySys=function(t){function e(){var e=t.call(this)||this;return e.shenQiModel=new ShenQiModel,e.wingModel=new WingModel,e.szModel=new SzModel,e.meilinModel=new MeilinModel,e.sysId=PackId.SQXY,e.reg(1,e.patchShenQiInfo),e.reg(2,e.patchShenQiUp),e.reg(3,e.patchShenQiHuanHuaUp),e.reg(4,e.patchShenQiFuHunUp),e.reg(5,e.patchShenQiHuanHua),e.reg(11,e.patchWingInfo),e.reg(12,e.patchWingUp),e.reg(13,e.patchWingHuanHuaUp),e.reg(14,e.patchWingFuHunUp),e.reg(15,e.patchWingHuanHua),e.reg(21,e.patchSzInfo),e.reg(22,e.patchSzUp),e.reg(23,e.patchSzHuanHuaUp),e.reg(24,e.patchSzFuHunUp),e.reg(25,e.patchSzHuanHua),e.reg(31,e.patchMeilinInfo),e.reg(32,e.patchMeilinUp),e.reg(33,e.patchMeilinHuanHuaUp),e.reg(34,e.patchMeilinFuHunUp),e.reg(35,e.patchMeilinHuanHua),e}return __extends(e,t),e.ins=function(){return t.getIns.call(this,e)},e.prototype.patchShenQiInfo=function(t){this.shenQiModel.parserInfo(t)},e.prototype.sendShenQiUp=function(){this.sendBase(2)},e.prototype.patchShenQiUp=function(t){this.shenQiModel.parserUp(t),RpFun.showShenQiLvRedPoint(210),RpFun.showShenQiSkillRedPoint(210),RpFun.showActRp(276),RpFun.showActRp(308)},e.prototype.snedShenQiHuanHuaUp=function(t){var e=this.getBytes(3);e.writeInt(t),this.send(e)},e.prototype.patchShenQiHuanHuaUp=function(t){var e=this.shenQiModel.parserHuanHuaUp(t);1==e.level&&GFunc.OpenSqXyActTipsWin(SqXyActTipsWin,e,210),RpFun.showShenQiHuanHuaRedPoint(210)},e.prototype.sendShenQiFuHunUp=function(t){var e=this.getBytes(4);e.writeByte(t),this.send(e)},e.prototype.patchShenQiFuHunUp=function(t){this.shenQiModel.parserFuHunUp(t),RpFun.showShenQiFuHunRedPoint(210)},e.prototype.sendShenQiHuanHua=function(t){var e=this.getBytes(5);e.writeInt(t),this.send(e)},e.prototype.patchShenQiHuanHua=function(t){this.shenQiModel.parserHuanHua(t)},e.prototype.patchWingInfo=function(t){this.wingModel.parserInfo(t)},e.prototype.sendWingUp=function(){this.sendBase(12)},e.prototype.patchWingUp=function(t){this.wingModel.parserUp(t),RpFun.showShenQiLvRedPoint(211),RpFun.showShenQiSkillRedPoint(211),RpFun.showActRp(276),RpFun.showActRp(308)},e.prototype.snedWingHuanHuaUp=function(t){var e=this.getBytes(13);e.writeInt(t),this.send(e)},e.prototype.patchWingHuanHuaUp=function(t){var e=this.wingModel.parserHuanHuaUp(t);1==e.level&&GFunc.OpenSqXyActTipsWin(SqXyActTipsWin,e,211),RpFun.showShenQiHuanHuaRedPoint(211)},e.prototype.sendWingFuHunUp=function(t){var e=this.getBytes(14);e.writeByte(t),this.send(e)},e.prototype.patchWingFuHunUp=function(t){this.wingModel.parserFuHunUp(t),RpFun.showShenQiFuHunRedPoint(211)},e.prototype.sendWingHuanHua=function(t){var e=this.getBytes(15);e.writeInt(t),this.send(e)},e.prototype.patchWingHuanHua=function(t){this.wingModel.parserHuanHua(t)},e.prototype.patchSzInfo=function(t){this.szModel.parserInfo(t)},e.prototype.sendSzUp=function(){this.sendBase(22)},e.prototype.patchSzUp=function(t){this.szModel.parserUp(t),RpFun.showShenQiLvRedPoint(212),RpFun.showShenQiSkillRedPoint(212),RpFun.showActRp(276),RpFun.showActRp(308)},e.prototype.snedSzHuanHuaUp=function(t){var e=this.getBytes(23);e.writeInt(t),this.send(e)},e.prototype.patchSzHuanHuaUp=function(t){var e=this.szModel.parserHuanHuaUp(t);1==e.level&&GFunc.OpenSqXyActTipsWin(SqXyActTipsWin,e,212),RpFun.showShenQiHuanHuaRedPoint(212)},e.prototype.sendSzFuHunUp=function(t){var e=this.getBytes(24);e.writeByte(t),this.send(e)},e.prototype.patchSzFuHunUp=function(t){this.szModel.parserFuHunUp(t),RpFun.showShenQiFuHunRedPoint(212)},e.prototype.sendSzHuanHua=function(t){var e=this.getBytes(25);e.writeInt(t),this.send(e)},e.prototype.patchSzHuanHua=function(t){this.szModel.parserHuanHua(t)},e.prototype.patchMeilinInfo=function(t){this.meilinModel.parserInfo(t)},e.prototype.sendMeilinUp=function(){this.sendBase(32)},e.prototype.patchMeilinUp=function(t){this.meilinModel.parserUp(t),RpFun.showShenQiLvRedPoint(213),RpFun.showShenQiSkillRedPoint(213),RpFun.showActRp(276),RpFun.showActRp(308)},e.prototype.snedMeilinHuanHuaUp=function(t){var e=this.getBytes(33);e.writeInt(t),this.send(e)},e.prototype.patchMeilinHuanHuaUp=function(t){var e=this.meilinModel.parserHuanHuaUp(t);1==e.level&&GFunc.OpenSqXyActTipsWin(SqXyActTipsWin,e,213),RpFun.showShenQiHuanHuaRedPoint(213)},e.prototype.sendMeilinFuHunUp=function(t){var e=this.getBytes(34);e.writeByte(t),this.send(e)},e.prototype.patchMeilinFuHunUp=function(t){this.meilinModel.parserFuHunUp(t),RpFun.showShenQiFuHunRedPoint(213)},e.prototype.sendMeilinHuanHua=function(t){var e=this.getBytes(35);e.writeInt(t),this.send(e)},e.prototype.patchMeilinHuanHua=function(t){this.meilinModel.parserHuanHua(t)},e.prototype.getModelBySysId=function(t){var e=null;switch(t){case 210:e=this.shenQiModel;break;case 211:e=this.wingModel;break;case 212:e=this.szModel;break;case 213:e=this.meilinModel}return e},e}(BaseSys);__reflect(SqXySys.prototype,"SqXySys");var System;!function(t){t.sqXySys=SqXySys.ins.bind(SqXySys)}(System||(System={})),window.SqXySys=SqXySys;var ShengLingDashiConfig=function(){function t(){}return t}();__reflect(ShengLingDashiConfig.prototype,"ShengLingDashiConfig");var SzModel=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.huanHuaDatas=[],e.fuHunDatas=[],e}return __extends(e,t),e.prototype.getLevelConfig=function(){return this.levelConfig&&this.levelConfig.star==this.level||(this.levelConfig=Cfg.getConfig(SzLevelConfig,this.level)),this.levelConfig},e.prototype.getLevelNextConfig=function(){return(!this.levelNextConfig||this.levelNextConfig.star<=this.level)&&(this.levelNextConfig=Cfg.getNextConfig(SzLevelConfig,this.level)),this.levelNextConfig},e.prototype.parserInfo=function(t){this.huanHuaId=t.readInt(),this.level=t.readShort();for(var e=t.readByte(),i=0;e>i;i++){var n=t.readInt(),a=t.readShort(),o=this.getHuanHuaDataById(n);o.level=a}e=t.readByte();for(var n=1;e>=n;n++){var o=this.getFuHunDataById(n);o.setLv(t.readShort())}},e.prototype.parserUp=function(t){this.level=t.readShort()},e.prototype.parserHuanHuaUp=function(t){var e=this.getHuanHuaDataById(t.readInt());return e.level=t.readShort(),e},e.prototype.parserFuHunUp=function(t){var e=this.getFuHunDataById(t.readByte());e.setLv(t.readShort())},e.prototype.parserHuanHua=function(t){this.huanHuaId=t.readInt()},e.prototype.getHuanHuaDataById=function(t){return this.huanHuaDatas[t]||(this.huanHuaDatas[t]=new SzHuanHuaData(t))},e.prototype.getHuanHuaGroupNames=function(){return Cfg.getSzHuanhuaGroupConfigNames()},e.prototype.getHuanHuaDatasByGroupId=function(t){for(var e=[],i=Cfg.getConfig(SzHuanhuaGroupConfig,t),n=0,a=i.huanhuaIds;n<a.length;n++){var o=a[n];e.push(this.getHuanHuaDataById(o))}return e},e.prototype.getHuanHuaDatas=function(){var t=[];for(var e in this.huanHuaDatas)t.push(this.huanHuaDatas[e]);return t},e.prototype.getFuHunDataById=function(t){return this.fuHunDatas[t-1]||(this.fuHunDatas[t-1]=new SzFuHunData(t))},e.prototype.getFuHunDatas=function(){return this.fuHunDatas},e.prototype.getLevelConsume=function(){return this.getLevelConfig().needitem},e.prototype.getLevelAttrDatas=function(){for(var t=[],e=this.getLevelConfig(),i=this.getLevelNextConfig(),n=e.attr.length,a=0;n>a;a++){var o=e.attr[a],s=i.attr[a],r=new ComAttrData(o,s,e.star>=i.star);t.push(r)}return t},e.prototype.getLevelHuanHuaDatas=function(t){for(var e=[],i=t.getAttrsByLv(),n=t.getAttrsByLv(t.level+1),a=t.level>=t.getConfig().maxLevel,o=i.length,s=0;o>s;s++){var r=new ComAttrData(i[s],n[s],a);e.push(r)}return e},e.prototype.getLevelHuanHuaDatasAll=function(){var t=[];for(var e in this.huanHuaDatas){var i=this.huanHuaDatas[e];t=AttrData.mergeAttr(i.getAttrsByLv(),t)}return t},e.prototype.getLevelFuHunDatas=function(t){for(var e=[],i=t.getConfig(),n=i.attr.length,a=0;n>a;a++){var o=new AttrData(i.attr[a].type,i.attr[a].value*t.getLv()),s=new AttrData(i.attr[a].type,i.attr[a].value*(t.getLv()+1)),r=new ComAttrData(o,s,t.isMax());e.push(r)}return e},e.prototype.getLevelFuHunDatasAll=function(){var t=[];for(var e in this.fuHunDatas){var i=this.fuHunDatas[e],n=AttrData.attrMultiple(i.getConfig().attr,i.getLv());t=AttrData.mergeAttr(n,t)}return t},e.prototype.getLevelPower=function(){return GFunc.getPower(this.getLevelConfig().attr)>>0},e.prototype.getHuanHuaPower=function(){var t=0;for(var e in this.huanHuaDatas){var i=this.huanHuaDatas[e];i.level>0&&(t+=GFunc.getPower(i.getAttrsByLv())>>0)}return t},e.prototype.getFuHunPower=function(){var t=0;for(var e in this.fuHunDatas){var i=this.fuHunDatas[e];if(i.getLv()>0){var n=AttrData.attrMultiple(i.getConfig().attr,i.getLv());t+=GFunc.getPower(n)>>0}}return t},e.prototype.getApperaenceId=function(){return this.getHuanHuaDataById(this.huanHuaId).getApperaenceId(Actor.ins().job)},e.prototype.getSkillIds=function(){return Cfg.getConfig(SzConstConfig).skills},e.prototype.isMaxLv=function(){return this.getLevelConfig().star>=this.getLevelNextConfig().star},e}(SqXyBaseModel);__reflect(SzModel.prototype,"SzModel");var WingModel=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.huanHuaDatas=[],e.fuHunDatas=[],e}return __extends(e,t),e.prototype.getLevelConfig=function(){return this.levelConfig&&this.levelConfig.star==this.level||(this.levelConfig=Cfg.getConfig(WingLevelConfig,this.level)),this.levelConfig},e.prototype.getLevelNextConfig=function(){return(!this.levelNextConfig||this.levelNextConfig.star<=this.level)&&(this.levelNextConfig=Cfg.getNextConfig(WingLevelConfig,this.level)),this.levelNextConfig},e.prototype.parserInfo=function(t){this.huanHuaId=t.readInt(),this.level=t.readShort();for(var e=t.readByte(),i=0;e>i;i++){var n=t.readInt(),a=t.readShort(),o=this.getHuanHuaDataById(n);o.level=a}e=t.readByte();for(var n=1;e>=n;n++){var o=this.getFuHunDataById(n);o.setLv(t.readShort())}},e.prototype.parserUp=function(t){this.level=t.readShort()},e.prototype.parserHuanHuaUp=function(t){var e=this.getHuanHuaDataById(t.readInt());return e.level=t.readShort(),e},e.prototype.parserFuHunUp=function(t){var e=this.getFuHunDataById(t.readByte());e.setLv(t.readShort())},e.prototype.parserHuanHua=function(t){this.huanHuaId=t.readInt()},e.prototype.getHuanHuaDataById=function(t){return this.huanHuaDatas[t]||(this.huanHuaDatas[t]=new WingHuanHuaData(t))},e.prototype.getHuanHuaGroupNames=function(){return Cfg.getWingHuanhuaGroupConfigNames()},e.prototype.getHuanHuaDatasByGroupId=function(t){for(var e=[],i=Cfg.getConfig(WingHuanhuaGroupConfig,t),n=0,a=i.huanhuaIds;n<a.length;n++){var o=a[n];e.push(this.getHuanHuaDataById(o))}return e},e.prototype.getHuanHuaDatas=function(){var t=[];for(var e in this.huanHuaDatas)t.push(this.huanHuaDatas[e]);return t},e.prototype.getFuHunDataById=function(t){return this.fuHunDatas[t-1]||(this.fuHunDatas[t-1]=new WingFuHunData(t))},e.prototype.getFuHunDatas=function(){return this.fuHunDatas},e.prototype.getLevelConsume=function(){return this.getLevelConfig().needitem},e.prototype.getLevelAttrDatas=function(){for(var t=[],e=this.getLevelConfig(),i=this.getLevelNextConfig(),n=e.attr.length,a=0;n>a;a++){var o=e.attr[a],s=i.attr[a],r=new ComAttrData(o,s,e.star>=i.star);t.push(r)}return t},e.prototype.getLevelHuanHuaDatas=function(t){for(var e=[],i=t.getConfig(),n=t.getAttrsByLv(),a=t.getAttrsByLv(t.level+1),o=t.level>=i.maxLevel,s=n.length,r=0;s>r;r++){var u=new ComAttrData(n[r],a[r],o);e.push(u)}return e},e.prototype.getLevelHuanHuaDatasAll=function(){var t=[];for(var e in this.huanHuaDatas){var i=this.huanHuaDatas[e];t=AttrData.mergeAttr(i.getAttrsByLv(),t)}return t},e.prototype.getLevelFuHunDatas=function(t){for(var e=[],i=t.getConfig(),n=i.attr.length,a=0;n>a;a++){var o=new AttrData(i.attr[a].type,i.attr[a].value*t.getLv()),s=new AttrData(i.attr[a].type,i.attr[a].value*(t.getLv()+1)),r=new ComAttrData(o,s,t.isMax());e.push(r)}return e},e.prototype.getLevelFuHunDatasAll=function(){var t=[];for(var e in this.fuHunDatas){var i=this.fuHunDatas[e],n=AttrData.attrMultiple(i.getConfig().attr,i.getLv());t=AttrData.mergeAttr(n,t)}return t},e.prototype.getLevelPower=function(){return GFunc.getPower(this.getLevelConfig().attr)>>0},e.prototype.getHuanHuaPower=function(){var t=0;for(var e in this.huanHuaDatas){var i=this.huanHuaDatas[e];i.level>0&&(t+=GFunc.getPower(i.getAttrsByLv())>>0)}return t},e.prototype.getFuHunPower=function(){var t=0;for(var e in this.fuHunDatas){var i=this.fuHunDatas[e];if(i.getLv()>0){var n=AttrData.attrMultiple(i.getConfig().attr,i.getLv());t+=GFunc.getPower(n)>>0}}return t},e.prototype.getApperaenceId=function(){return this.getHuanHuaDataById(this.huanHuaId||1).getApperaenceId(Actor.ins().job)},e.prototype.getSkillIds=function(){return Cfg.getConfig(WingConstConfig).skills},e.prototype.isMaxLv=function(){return this.getLevelConfig().star>=this.getLevelNextConfig().star},e}(SqXyBaseModel);__reflect(WingModel.prototype,"WingModel");var MeilinFuHunData=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e._tempLvC=0,e._tempLvN=0,e}return __extends(e,t),e.prototype.getConfig=function(){return this._baseConfig||(this._baseConfig=Cfg.getConfig(MeilinPillConfig,this.id))},e.prototype.getCurMaxConfig=function(){return this._curMaxConfig&&this._tempLvC==this._level||(this._curMaxConfig=Cfg.getConfig(MeilinPillMaxConfig,this.id,CondType.More,MeilinPillMaxConfig.max,this._level),this._tempLvC=this._level),this._curMaxConfig},e.prototype.getNextMaxConfig=function(){return this._nextMaxConfig&&this._tempLvN==this._level||(this._nextMaxConfig=Cfg.getNextConfig(MeilinPillMaxConfig,this.id,this.getCurMaxConfig().index),this._tempLvN=this._level),this._nextMaxConfig},e.prototype.getIcon=function(){return ResMgr.getFuHunIcon("merlin_"+this.id)},e.prototype.getMaxLv=function(){return this.getCurMaxConfig().max},e.prototype.getName=function(){return"ml_zycs_sh"+this.id},e.prototype.getConsume=function(){return this.getConfig().needitem},e.prototype.isAct=function(){return this.getLv()>0},e.prototype.getBaseAttr=function(){return this.getConfig().attr},e.prototype.isMax=function(){return this.getCurMaxConfig().index>=this.getNextMaxConfig().index&&this.isMaxCur()},e.prototype.isMaxCur=function(){return this._level>=this.getCurMaxConfig().max},e}(BaseFuHunData);__reflect(MeilinFuHunData.prototype,"MeilinFuHunData");var MeilinHuanHuaData=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return __extends(e,t),e.prototype.getConfig=function(){return this._baseConfig||(this._baseConfig=Cfg.getConfig(MeilinHuanhuaBaseConfig,this.id))},e.prototype.getBaseAttrs=function(){return this._baseAttrs||(this._baseAttrs=this.getConfig().baseAttrs),this._baseAttrs},e.prototype.getAttrsByLv=function(t){void 0===t&&(t=this.level);for(var e=this.getBaseAttrs(),i=[],n=e.length,a=0;n>a;a++){var o=e[a];i.push(new AttrData(o.type,o.value*t))}return i},e.prototype.getName=function(){return this.getConfig().name[0]},e.prototype.getQuality=function(){return this.getConfig().quality},e.prototype.getSrQuality=function(){return this.getConfig().srQuality},e.prototype.getActDec=function(){return this.getConfig().dec},e.prototype.getActPower=function(){return this.getConfig().power},e.prototype.getConsume=function(){return this.getConfig().needitem},e.prototype.getApperaenceId=function(){return this.getConfig().appearanceId},e.prototype.getGroupId=function(){return this.getConfig().groupId},e.prototype.isAct=function(){return this.level>0},e.prototype.isMax=function(){return this.level>=this.getConfig().maxLevel},e.prototype.isUse=function(){return SqXySys.ins().meilinModel.huanHuaId==this.id},e}(BaseHuanHuaData);__reflect(MeilinHuanHuaData.prototype,"MeilinHuanHuaData");var ShengLingLevelConfig=function(){function t(){}return t}();__reflect(ShengLingLevelConfig.prototype,"ShengLingLevelConfig");var ShengLingStageConfig=function(){function t(){}return t}();__reflect(ShengLingStageConfig.prototype,"ShengLingStageConfig");var ShengLingSuitConfig=function(){function t(){}return t}();__reflect(ShengLingSuitConfig.prototype,"ShengLingSuitConfig");var ShengLingTagConfig=function(){function t(){}return t}();__reflect(ShengLingTagConfig.prototype,"ShengLingTagConfig");var ShengwuConfig=function(){function t(){}return t}();__reflect(ShengwuConfig.prototype,"ShengwuConfig");var ShengwuFragmentConfig=function(){function t(){}return t}();__reflect(ShengwuFragmentConfig.prototype,"ShengwuFragmentConfig");var ShenQiFuHunData=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e._tempLvC=0,e._tempLvN=0,e}return __extends(e,t),e.prototype.getConfig=function(){return this._baseConfig||(this._baseConfig=Cfg.getConfig(ShenqiPillConfig,this.id))},e.prototype.getCurMaxConfig=function(){return this._curMaxConfig&&this._tempLvC==this._level||(this._curMaxConfig=Cfg.getConfig(ShenqiPillMaxConfig,this.id,CondType.More,ShenqiPillMaxConfig.max,this._level),this._tempLvC=this._level),this._curMaxConfig},e.prototype.getNextMaxConfig=function(){return this._nextMaxConfig&&this._tempLvN==this._level||(this._nextMaxConfig=Cfg.getNextConfig(ShenqiPillMaxConfig,this.id,this.getCurMaxConfig().index),this._tempLvN=this._level),this._nextMaxConfig},e.prototype.getIcon=function(){return ResMgr.getFuHunIcon("shenqi_"+this.id)},e.prototype.getMaxLv=function(){return this.getCurMaxConfig().max},e.prototype.getName=function(){return"shenqi_zycs_qh"+this.id},e.prototype.getConsume=function(){return this.getConfig().needitem},e.prototype.isAct=function(){return this.getLv()>0},e.prototype.getBaseAttr=function(){return this.getConfig().attr},e.prototype.isMax=function(){return this.getCurMaxConfig().index>=this.getNextMaxConfig().index&&this.isMaxCur()},e.prototype.isMaxCur=function(){return this._level>=this.getCurMaxConfig().max},e}(BaseFuHunData);__reflect(ShenQiFuHunData.prototype,"ShenQiFuHunData");var ShenQiHuanHuaData=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return __extends(e,t),e.prototype.getConfig=function(){return this._baseConfig||(this._baseConfig=Cfg.getConfig(ShenqiHuanhuaBaseConfig,this.id))},e.prototype.getBaseAttrs=function(){return this._baseAttrs||(this._baseAttrs=this.getConfig().baseAttrs),this._baseAttrs},e.prototype.getAttrsByLv=function(t){void 0===t&&(t=this.level);for(var e=this.getBaseAttrs(),i=[],n=e.length,a=0;n>a;a++){var o=e[a];i.push(new AttrData(o.type,o.value*t))}return i},e.prototype.getName=function(){return this.getConfig().name[Actor.ins().job-1]},e.prototype.getQuality=function(){return this.getConfig().quality},e.prototype.getSrQuality=function(){return this.getConfig().srQuality},e.prototype.getActDec=function(){return this.getConfig().dec},e.prototype.getActPower=function(){return this.getConfig().power},e.prototype.getConsume=function(){return this.getConfig().needitem},e.prototype.getApperaenceId=function(t){return this.getConfig().weaponIds[t-1]},e.prototype.getGroupId=function(){return this.getConfig().groupId},e.prototype.isAct=function(){return this.level>0},e.prototype.isMax=function(){return this.level>=this.getConfig().maxLevel},e.prototype.isUse=function(){return SqXySys.ins().shenQiModel.huanHuaId==this.id},e}(BaseHuanHuaData);__reflect(ShenQiHuanHuaData.prototype,"ShenQiHuanHuaData");var FuHunItem=function(t){function e(){var e=t.call(this)||this;return e.skinName="FuHunItemEUI",e.showRedPoint(!1),e}return __extends(e,t),e.prototype.dataChanged=function(){this.data instanceof BaseFuHunData&&(this.imgIcon.source=this.data.getIcon(),this.lbCount.text=this.data.getLv()+"/"+this.data.getMaxLv(),this.imgName.source=this.data.getName(),this.data.isMaxCur()?this.showRedPoint(!1):this.showRedPoint(GFunc.isConsumeEnough(this.data.getConsume())))},e.prototype.showRedPoint=function(t){this.redPoint.visible=t},e.prototype.playEff=function(){this.mc||(this.mc=new MC),this.groupMc.addChild(this.mc),this.mc.playFile(ResMgr.getEffName("fhbd"),1)},e}(BaseItemRender);__reflect(FuHunItem.prototype,"FuHunItem"),window.FuHunItem=FuHunItem;var HuanHuaItem=function(t){function e(){var e=t.call(this)||this;return e.skinName="HuanHuaItemEUI",e.lbSyz.visible=!1,e.showRedPoint(!1),e.setSelect(!1),e}return __extends(e,t),e.prototype.dataChanged=function(){if(this.data instanceof BaseHuanHuaData)if(this.imgIcon.source=this.data.getIcon(),this.imgIcon.filters=this.data.level>0?[]:DisUtil.grayFilter(),this.imgAn.visible=0==this.data.level,this.lbSyz.visible=this.data.isUse(),this.imgColor.source=ResMgr.getItemqualityResource(this.data.getQuality()),this.imgSR.source="shenqi_zycs_"+this.data.getSrQuality(),this.lbLv.text=this.data.level>0?""+this.data.level+Lang.common_jie:this.data.getActDec(),this.lbName.textFlow=addColorTF(this.data.getName()),this.data.isMax())this.showRedPoint(!1);
else{var t=GFunc.getItemDataRewardByJob(this.data.getConsume());this.showRedPoint(GFunc.isConsumeEnough(t))}},e.prototype.showRedPoint=function(t){this.redPoint.visible=t},e.prototype.setSelect=function(t){this.imgSelect.visible=t},e}(BaseItemRender);__reflect(HuanHuaItem.prototype,"HuanHuaItem"),window.HuanHuaItem=HuanHuaItem;var ShenmoConstConfig=function(){function t(){}return t}();__reflect(ShenmoConstConfig.prototype,"ShenmoConstConfig");var ShenmoFubenConfig=function(){function t(){}return Object.defineProperty(t,"bossId",{get:function(){return"bossId"},enumerable:!0,configurable:!0}),t}();__reflect(ShenmoFubenConfig.prototype,"ShenmoFubenConfig");var ShenmoHuanhuaBaseConfig=function(){function t(){}return Object.defineProperty(t,"id",{get:function(){return"id"},enumerable:!0,configurable:!0}),Object.defineProperty(t,"stoneid",{get:function(){return"stoneid"},enumerable:!0,configurable:!0}),t}();__reflect(ShenmoHuanhuaBaseConfig.prototype,"ShenmoHuanhuaBaseConfig");var ShenmoLevelConfig=function(){function t(){}return t}();__reflect(ShenmoLevelConfig.prototype,"ShenmoLevelConfig");var SzFuHunData=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e._tempLvC=0,e._tempLvN=0,e}return __extends(e,t),e.prototype.getConfig=function(){return this._baseConfig||(this._baseConfig=Cfg.getConfig(SzPillConfig,this.id))},e.prototype.getCurMaxConfig=function(){return this._curMaxConfig&&this._tempLvC==this._level||(this._curMaxConfig=Cfg.getConfig(SzPillMaxConfig,this.id,CondType.More,SzPillMaxConfig.max,this._level),this._tempLvC=this._level),this._curMaxConfig},e.prototype.getNextMaxConfig=function(){return this._nextMaxConfig&&this._tempLvN==this._level||(this._nextMaxConfig=Cfg.getNextConfig(SzPillMaxConfig,this.id,this.getCurMaxConfig().index),this._tempLvN=this._level),this._nextMaxConfig},e.prototype.getIcon=function(){return ResMgr.getFuHunIcon("godequip_"+this.id)},e.prototype.getMaxLv=function(){return this.getCurMaxConfig().max},e.prototype.getName=function(){return"sz_zycs_kh"+this.id},e.prototype.getConsume=function(){return this.getConfig().needitem},e.prototype.isAct=function(){return this.getLv()>0},e.prototype.getBaseAttr=function(){return this.getConfig().attr},e.prototype.isMax=function(){return this.getCurMaxConfig().index>=this.getNextMaxConfig().index&&this.isMaxCur()},e.prototype.isMaxCur=function(){return this._level>=this.getCurMaxConfig().max},e}(BaseFuHunData);__reflect(SzFuHunData.prototype,"SzFuHunData");var SzHuanHuaData=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return __extends(e,t),e.prototype.getConfig=function(){return this._baseConfig||(this._baseConfig=Cfg.getConfig(SzHuanhuaBaseConfig,this.id))},e.prototype.getBaseAttrs=function(){return this._baseAttrs||(this._baseAttrs=this.getConfig().baseAttrs),this._baseAttrs},e.prototype.getAttrsByLv=function(t){isNaN(t)&&(t=this.level);for(var e=this.getBaseAttrs(),i=[],n=e.length,a=0;n>a;a++){var o=e[a];i.push(new AttrData(o.type,o.value*t))}return i},e.prototype.getName=function(){return this.getConfig().name[Actor.ins().job-1]},e.prototype.getQuality=function(){return this.getConfig().quality},e.prototype.getSrQuality=function(){return this.getConfig().srQuality},e.prototype.getActDec=function(){return this.getConfig().dec},e.prototype.getActPower=function(){return this.getConfig().power},e.prototype.getConsume=function(){return this.getConfig().needitem},e.prototype.getApperaenceId=function(t){return this.getConfig().bodyIds[t-1]},e.prototype.getGroupId=function(){return this.getConfig().groupId},e.prototype.isAct=function(){return this.level>0},e.prototype.isMax=function(){return 0==this.id||this.level>=this.getConfig().maxLevel},e.prototype.isUse=function(){return SqXySys.ins().szModel.huanHuaId==this.id},e}(BaseHuanHuaData);__reflect(SzHuanHuaData.prototype,"SzHuanHuaData");var ShenmoMozhenBaseConfig=function(){function t(){}return t}();__reflect(ShenmoMozhenBaseConfig.prototype,"ShenmoMozhenBaseConfig");var ShenmoMozhenGroupConfig=function(){function t(){}return t}();__reflect(ShenmoMozhenGroupConfig.prototype,"ShenmoMozhenGroupConfig");var ShenmoPillConfig=function(){function t(){}return t}();__reflect(ShenmoPillConfig.prototype,"ShenmoPillConfig");var ShenmoPillMaxConfig=function(){function t(){}return Object.defineProperty(t,"max",{get:function(){return"max"},enumerable:!0,configurable:!0}),t}();__reflect(ShenmoPillMaxConfig.prototype,"ShenmoPillMaxConfig");var WingFuHunData=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e._tempLvC=0,e._tempLvN=0,e}return __extends(e,t),e.prototype.getConfig=function(){return this._baseConfig||(this._baseConfig=Cfg.getConfig(WingPillConfig,this.id))},e.prototype.getCurMaxConfig=function(){return this._curMaxConfig&&this._tempLvC==this._level||(this._curMaxConfig=Cfg.getConfig(WingPillMaxConfig,this.id,CondType.More,WingPillMaxConfig.max,this._level),this._tempLvC=this._level),this._curMaxConfig},e.prototype.getNextMaxConfig=function(){return this._nextMaxConfig&&this._tempLvN==this._level||(this._nextMaxConfig=Cfg.getNextConfig(WingPillMaxConfig,this.id,this.getCurMaxConfig().index),this._tempLvN=this._level),this._nextMaxConfig},e.prototype.getIcon=function(){return ResMgr.getFuHunIcon("wing_"+this.id)},e.prototype.getMaxLv=function(){return this.getCurMaxConfig().max},e.prototype.getName=function(){return"chibang_zycs_yh"+this.id},e.prototype.getConsume=function(){return this.getConfig().needitem},e.prototype.isAct=function(){return this.getLv()>0},e.prototype.getBaseAttr=function(){return this.getConfig().attr},e.prototype.isMax=function(){return this.getCurMaxConfig().index>=this.getNextMaxConfig().index&&this.isMaxCur()},e.prototype.isMaxCur=function(){return this._level>=this.getCurMaxConfig().max},e}(BaseFuHunData);__reflect(WingFuHunData.prototype,"WingFuHunData");var WingHuanHuaData=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return __extends(e,t),e.prototype.getConfig=function(){return this._baseConfig||(this._baseConfig=Cfg.getConfig(WingHuanhuaBaseConfig,this.id))},e.prototype.getBaseAttrs=function(){return this._baseAttrs||(this._baseAttrs=this.getConfig().baseAttrs),this._baseAttrs},e.prototype.getAttrsByLv=function(t){isNaN(t)&&(t=this.level);for(var e=this.getBaseAttrs(),i=[],n=e.length,a=0;n>a;a++){var o=e[a];i.push(new AttrData(o.type,o.value*t))}return i},e.prototype.getName=function(){return this.getConfig().name[Actor.ins().job-1]},e.prototype.getQuality=function(){return this.getConfig().quality},e.prototype.getSrQuality=function(){return this.getConfig().srQuality},e.prototype.getActDec=function(){return this.getConfig().dec},e.prototype.getActPower=function(){return this.getConfig().power},e.prototype.getConsume=function(){return this.getConfig().needitem},e.prototype.getApperaenceId=function(t){return this.getConfig().wingIds[t-1]},e.prototype.getGroupId=function(){return this.getConfig().groupId},e.prototype.isAct=function(){return this.level>0},e.prototype.isMax=function(){return this.level>=this.getConfig().maxLevel},e.prototype.isUse=function(){return SqXySys.ins().wingModel.huanHuaId==this.id},e}(BaseHuanHuaData);__reflect(WingHuanHuaData.prototype,"WingHuanHuaData");var ShenmoStageConfig=function(){function t(){}return t}();__reflect(ShenmoStageConfig.prototype,"ShenmoStageConfig");var ShenqiConstConfig=function(){function t(){}return t}();__reflect(ShenqiConstConfig.prototype,"ShenqiConstConfig");var ShenqiHuanhuaBaseConfig=function(){function t(){}return t}();__reflect(ShenqiHuanhuaBaseConfig.prototype,"ShenqiHuanhuaBaseConfig");var ShenqiHuanhuaGroupConfig=function(){function t(){}return t}();__reflect(ShenqiHuanhuaGroupConfig.prototype,"ShenqiHuanhuaGroupConfig");var SuitData=function(t){function e(){var e=t.call(this)||this;return e.posDatas=[],e}return __extends(e,t),e.prototype.parser=function(t){this.id=t.readShort();var e=t.readByte();this.xlId=this.xlConfig.xlId;for(var i=0;e>i;i++){var n=this.posDatas[i]=new SuitDataPos;n.pos=i,n.id=this.id,n.xlId=this.xlId,n.state=t.readByte()}},e.prototype.setPosValue=function(t,e){this.posDatas[t].state=e},e.prototype.getPosData=function(t){return this.posDatas[t]},e.prototype.canDianliang=function(){for(var t=!1,e=0,i=this.posDatas;e<i.length;e++){var n=i[e];if(t=n.canDianliang())break}return t},e.prototype.getMinPos=function(){return this.getDianliangCount()<8},e.prototype.getCanDianliangPos=function(){for(var t=0;t<this.posDatas.length;t++)if(this.posDatas[t].canDianliang())return t;return-1},e.prototype.isMax=function(){return this.getDianliangCount()>=8},e.prototype.getDianliangCount=function(){for(var t=0,e=0,i=this.posDatas;e<i.length;e++){var n=i[e];t+=n.state}return t},Object.defineProperty(e.prototype,"power",{get:function(){var t=0,e=Cfg.getSuitAttrConfigByCount(this.id,this.getDianliangCount());t+=GFunc.getPower(e);var i=this.config.skillattrs;return this.isMax()&&(t+=GFunc.getPower([i]),t+=this.config.power),t},enumerable:!0,configurable:!0}),e}(SuitDataBase);__reflect(SuitData.prototype,"SuitData");var ShenqiLevelConfig=function(){function t(){}return t}();__reflect(ShenqiLevelConfig.prototype,"ShenqiLevelConfig");var SuitDataPos=function(t){function e(){var e=t.call(this)||this;return e.pos=0,e.state=0,e}return __extends(e,t),e.prototype.canDianliang=function(){if(0==this.state&&Actor.ins().zsId>=Cfg.getConfig(SuitXLConfig,this.xlId).zsId){var t=BagSys.ins().getEquipByIndex(this.pos);if(t.hasEquipOn())return this.isInCondition(t.rank,t.star,t.quality)}return!1},e}(SuitDataBase);__reflect(SuitDataPos.prototype,"SuitDataPos");var ShenqiPillConfig=function(){function t(){}return t}();__reflect(ShenqiPillConfig.prototype,"ShenqiPillConfig");var SuitPanelItem=function(t){function e(){var e=t.call(this)||this;return e.skinName="SuitPanelItemEUI",e.setSkinPart("item",new ItemBase),e.item.touchEnabled=!1,e.item.touchChildren=!1,e}return __extends(e,t),e.prototype.dataChanged=function(){var t=this.data,e=BagSys.ins().getEquipByIndex(t.pos),i=e.hasEquipOn();this.mcJia="",this.mc2="",this.imgBg.source="",this.imgDi.source="";var n=SuitPanel.orders.indexOf(t.pos)<4?1:-1;if(i){if(t.state){this.currentState="yidianliang"+n;var a=Cfg.getSuitItemId(t.id,t.pos);this.item.data=GFunc.creatItemDataById(a)}else t.canDianliang()?(this.currentState="kedianliang"+n,this.item.data=GFunc.creatItemDataById(e.id),this.mcJia=ResMgr.getEffName("craft_zycs_jh"),this.mc2=ResMgr.getEffName("tzkdl")):(this.currentState="weidabiao"+n,this.item.data=GFunc.creatItemDataById(e.id));this.imgBg.source=ResMgr.getItemqualityResource(this.item.data.cfg.quality)}else this.currentState="wuzhuangbei"+n,this.imgDi.source="role_zycs_"+t.pos},e}(BaseItemRender);__reflect(SuitPanelItem.prototype,"SuitPanelItem"),window.SuitPanelItem=SuitPanelItem;var SuitPanelTabItem=function(t){function e(){var e=t.call(this)||this;return e.skinName="SuitPanelTabItemEUI",e}return __extends(e,t),e.prototype.dataChanged=function(){var t=this.data;this.imgIcon.source="taozhuang_zycs_tb"+t.config.icon,this.labelName.text=Cfg.getSuitXLName(t.id,Actor.ins().job)+t.config.name;var e=t.isMax()?3821938:15733780;this.labelCount.textFlow=addColorTF("("+t.getDianliangCount().toString()+"/8)",e),this.udpateStasr(),this.updateRp()},e.prototype.updateRp=function(){var t=this.data;t&&(this.redPoint.visible=RpSys.ins().getData(RoleWin,RolePanel,SuitWin,SuitPanel,t.xlConfig.xlId,t.id))},e.prototype.udpateStasr=function(){var t=this.data,e=t.config.star;if(this.groupStar.numChildren!=e){this.groupStar.removeChildren();for(var i=0;e>i;i++){var n=new eui.Image;n.source="taozhuang_zycs_xj",this.groupStar.addChild(n)}}},e}(BaseItemRender);__reflect(SuitPanelTabItem.prototype,"SuitPanelTabItem"),window.SuitPanelTabItem=SuitPanelTabItem;var ShenqiPillMaxConfig=function(){function t(){}return Object.defineProperty(t,"max",{get:function(){return"max"},enumerable:!0,configurable:!0}),t}();__reflect(ShenqiPillMaxConfig.prototype,"ShenqiPillMaxConfig");var TaskSys=function(t){function e(){var e=t.call(this)||this;return e.taskId=1,e.mainTaskType=1,e.mainTaskStatus=-1,e.mainTaskokValue=0,e.achDatas=[],e.saveMainTaskId=[],e.sysId=PackId.Task,e.reg(1,e.patchMainTaskUpdata),e.reg(3,e.patchMainTaskReward),e.reg(31,e.doChengjiuInfo),e.reg(32,e.doChengjiuUpdate),e.reg(50,e.patchLiLianData),e.reg(51,e.patchLiLianReceiveTaskReward),e.reg(52,e.patchLiLianReceiveDailyReward),e.reg(53,e.patchLiLianTaskUpdate),e.reg(54,e.patchLiLianJunXianpdate),e.reg(61,e.patchAgreementData),e.reg(62,e.patchAgreementUpdate),e.agreementData=new QiYue,e.liLianData=new LiLianData,e}return __extends(e,t),e.ins=function(){return t.getIns.call(this,e)},e.prototype.patchMainTaskReward=function(t){var e=t.readInt();return e},e.prototype.patchMainTaskUpdata=function(t){var e=this.taskId,i=this.mainTaskStatus;this.taskId=t.readInt(),this.mainTaskStatus=t.readInt(),this.mainTaskokValue=t.readInt();var n=t.readBoolean(),a=Cfg.getConfig(MainTaskConfig,this.taskId);this.mainTaskType=a.type,1==this.taskId&&0==this.mainTaskStatus||(n||e!=this.taskId||this.mainTaskStatus!=i)&&a.guiderId>0&&(0==this.mainTaskStatus&&GuiderTrigger.ins().trigger1(a.guiderId,GuiderStepType.JS),1==this.mainTaskStatus&&GuiderTrigger.ins().trigger1(a.guiderId,GuiderStepType.WC,150)),!n&&Cfg.getConfig(RechargeConstConfig).firstTipsTaskId.indexOf(this.taskId)>0&&0==this.mainTaskStatus&&RechargeActSys.ins().openFirstRechargeTipsWin()},e.prototype.sendMainTaskOK=function(){this.sendBase(2)},e.prototype.sendMainReward=function(){this.sendBase(2)},e.prototype.patchMainReward=function(t){for(var e=t.readInt(),i=0;e>i;i++){var n=new ItemDataReward;n.parser(t)}},e.prototype.doChengjiuInfo=function(t){this.achDatas=[];for(var e=t.readInt(),i=0;e>i;i++){var n=new ChengJiuData;n.parser(t),this.achDatas.push(n)}this.patchAchievePanel()},e.prototype.doChengjiuUpdate=function(t){var e=new ChengJiuData;e.parser(t);for(var i in this.achDatas)if(this.achDatas[i].type==e.type){this.achDatas[i]=e;break}this.patchAchievePanel()},e.prototype.patchAchievePanel=function(){},e.prototype.sendChengjiuReward=function(t){var e=this.getBytes(33);e.writeInt(t),this.send(e)},e.prototype.sendChengjiuRewardAll=function(){this.sendBase(34)},e.prototype.getAchieveData=function(t){for(var e=0,i=this.achDatas;e<i.length;e++){var n=i[e];if(t==n.id)return n}return null},e.prototype.getAchieveTabData=function(){if(this.achieveTabData)return this.achieveTabData;this.achieveTabData=[];var t=Cfg.getConfigs(AchievementTaskConfig,CondType.NONE),e=-1;for(var i in t)e!=t[i].page&&(e=t[i].page,this.achieveTabData.push(e));return this.achieveTabData},e.prototype.getChengjiuDataByType=function(t){if(void 0==this.achDatas)return void console.log("通过成就类型获取成就数据  achiEvement = null");for(var e=[],i=0,n=this.achDatas;i<n.length;i++){var a=n[i];a.config.page==t&&e.push(a)}return e},e.prototype.isTaskIsOk=function(t){return e.ins().taskId==t?2==e.ins().mainTaskStatus:e.ins().taskId>t},e.prototype.achieveSort=function(t,e){var i=0;return 1!=t.state&&1==e.state?1:1==t.state&&1!=e.state?-1:0!=t.state&&0==e.state?1:0==t.state&&0!=e.state?-1:(i=SortUtil.sortAsc(t.config.aType,e.config.aType),0!=i?i:i)},e.prototype.showGuide=function(t,e,i){void 0===i&&(i=0);var n=Cfg.getConfig(MainTaskConfig,t),a=n.controlTarget[0],o=n.controlTarget[1],s=n.controlTarget[2];a==TaskNavType.Guide&&e==o&&(0==i||i&&i==s)&&GFunc.createTaskNavData(n.controlTarget)["goto"]()},e.prototype.patchLiLianData=function(t){this.liLianData.parser(t),RpFun.showLiLianRedPoint()},e.prototype.sendLiLianReceiveTaskReward=function(t){var e=this.getBytes(51);e.writeByte(t),this.send(e)},e.prototype.patchLiLianReceiveTaskReward=function(t){this.liLianData.parserUpdateTask(t),RpFun.showLiLianRedPoint()},e.prototype.sendLiLianReceiveDailyReward=function(){var t=this.getBytes(52);this.send(t)},e.prototype.patchLiLianReceiveDailyReward=function(t){this.liLianData.rewardIndex=t.readByte(),RpFun.showLiLianRedPoint()},e.prototype.patchLiLianTaskUpdate=function(t){var e=t.readByte(),i=t.readByte(),n=t.readDouble(),a=this.liLianData.getTaskDataById(e);a&&(a.state=i,a.value=n),RpFun.showLiLianRedPoint()},e.prototype.patchLiLianJunXianpdate=function(t){var e=this.liLianData.id;this.liLianData.id=t.readShort();var i=Cfg.getConfig(JunxianLevelConfig,this.liLianData.id);openWin(LiLianPanelUpLevelTipsWin,e,this.liLianData.id,function(){i.rewards.length>0&&openWin(LiLianRewardTipsWin,i.rewards,Lang.fuli_str36)},this),RpFun.showLiLianRedPoint()},e.prototype.patchAgreementData=function(t){this.agreementData.parser(t),RpFun.showAgreementRedPoint(PCode.UPD)},e.prototype.patchAgreementUpdate=function(t){var e=t.readByte(),i=t.readShort(),n=t.readDouble(),a=t.readByte(),o=this.agreementData.getAgreementTypeByType(e),s=o.getAgreementInfoById(i);s.setvalue(n),s.setstate(a),o.isAct()&&openWin(Act6RewarWin,o.getConfig().items),RpFun.showAgreementRedPoint(PCode.UPD)},e.prototype.sendAgreementReceive=function(t,e){var i=this.getBytes(63);i.writeByte(t),i.writeShort(e),this.send(i)},e}(BaseSys);__reflect(TaskSys.prototype,"TaskSys");var System;!function(t){t.taskSys=TaskSys.ins.bind(TaskSys)}(System||(System={})),window.TaskSys=TaskSys;var ChengJiuData=function(){function t(){this.id=0,this.type=0,this.state=0,this.value=0}return t.prototype.parser=function(t){this.type=t.readInt(),this.id=t.readInt(),this.state=t.readInt(),this.value=t.readDouble(),this.initConfig()},t.prototype.initConfig=function(){this.config=Cfg.getConfig(AchievementTaskConfig,this.id)},t}();__reflect(ChengJiuData.prototype,"ChengJiuData");var ShenYouBaseConfig=function(){function t(){this.yinjiskills=[],this.buyPrice=[]}return t}();__reflect(ShenYouBaseConfig.prototype,"ShenYouBaseConfig");var ChengJiuWin=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.redPointHead=[ExtCom],e.winType=WinType.MainWin,e}return __extends(e,t),e.panelNames=[ChengJiuPanel],e}(BaseWinAutoTab);__reflect(ChengJiuWin.prototype,"ChengJiuWin"),window.ChengJiuWin=ChengJiuWin;var QiYueItem=function(t){function e(){var e=t.call(this)||this;return e.desc=["anz_zycs_qw","anz_zycs_lq","anz_zycs_ylq"],e.skinName="QiYueItemEUI",e.btnGet.redPoint.visible=!0,e.list.itemRenderer=ItemBaseReward,e.list.dataProvider=e.listArray=new eui.ArrayCollection,e.btnUpmc=new MovieEui,e.btnUpmc.verticalCenter=e.btnUpmc.horizontalCenter=0,e.btnGet.addChild(e.btnUpmc),e.addClickE(e,e.onClick),e}return __extends(e,t),e.prototype.onClick=function(t){var e=this.data;switch(t.target){case this.btnTaget:var i=GFunc.createTaskNavData(e.getConfig().controlTarget);i.setsucceedFrontFun(function(){closeWin(QiYueWin)}),i["goto"]();break;case this.btnGet:TaskSys.ins().sendAgreementReceive(e.type,e.id)}},e.prototype.dataChanged=function(){this.data instanceof QiYueInfo&&(this.titleTF.textFlow=StrUtil.toTF(this.data.getConfig().desc),this.progressTF.textFlow=addColorTF(this.data.getShowProg()),this.listArray.source=this.data.getConfig().rewards,this.btnTaget.visible=this.data.state==RewardStatus.WeiWanCheng,this.btnGet.visible=this.data.state==RewardStatus.KeLinQu,this.imgYlq.visible=this.data.state==RewardStatus.YiLinQu,this.btnUpmc.data=this.data.state==RewardStatus.KeLinQu?getEffName("public_zycs_button01"):"")},e}(BaseItemRender);__reflect(QiYueItem.prototype,"QiYueItem"),window.QiYueItem=QiYueItem;var ShenYouHuanhuaConfig=function(){function t(){}return t}();__reflect(ShenYouHuanhuaConfig.prototype,"ShenYouHuanhuaConfig");var QiYuePanelBtn=function(t){function e(){var e=t.call(this)||this;return e.skinName="QiYuePanelBtnEUI",e}return __extends(e,t),e.prototype.dataChanged=function(){var t=this.data;this.updateRedPoint(),this.title="emqy_zycs_text"+(t.type-1||"")},e.prototype.updateRedPoint=function(){var t=this.data;this.redPoint.visible=RpSys.ins().getData(ExtCom,QiYueWin,QiYuePanel,t.type),this.updateIcon()},e.prototype.updateIcon=function(){var t=this.data;this.imgIcon.source="emqy_zycs_0"+t.type,this.imgIcon.filters=TaskSys.ins().agreementData.isOpen(t.type)?[]:DisUtil.grayFilter()},e}(BaseItemRender);__reflect(QiYuePanelBtn.prototype,"QiYuePanelBtn"),window.QiYuePanelBtn=QiYuePanelBtn;var QiYueWin=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.redPointHead=[ExtCom],e.winType=WinType.MainWin,e}return __extends(e,t),e.panelNames=[QiYuePanel],e}(BaseWinAutoTab);__reflect(QiYueWin.prototype,"QiYueWin"),window.QiYueWin=QiYueWin;var QiYue=function(){function t(){this.agreementTypes=[]}return t.prototype.parser=function(t){var e=t.readByte();this.agreementTypes.length=0;for(var i=0;e>i;i++){var n=new QiYueType;n.parser(t),this.agreementTypes.push(n)}},t.prototype.getAgreementTypeByType=function(t){for(var e=0;e<this.agreementTypes.length;e++)if(this.agreementTypes[e].type==t)return this.agreementTypes[e];return this.agreementTypes[0]},t.prototype.getAgreementTypeByIndex=function(t){return this.agreementTypes[t]},t.prototype.isFinish=function(){for(var t=!0,e=0;e<this.agreementTypes.length;e++)if(!this.agreementTypes[e].isAct()){t=!1;break}return t},t.prototype.isOpen=function(t){var e=this.getAgreementTypeByType(t).getConfig().last;return 0==e||this.getAgreementTypeByType(e).isAct()},t.prototype.isOpenData=function(t){var e=this.getAgreementTypeByType(t).getConfig().last;return this.getAgreementTypeByType(e)},t.prototype.getSelectTypeIndex=function(){for(var t=1,e=!1,i=0;i<this.agreementTypes.length;i++){var n=this.agreementTypes[i];if(n.chekReceive()){e=!0,t=n.getConfig().tp;break}}if(!e)for(var i=0;i<this.agreementTypes.length;i++){var n=this.agreementTypes[i];if(!n.isAct()&&this.isOpen(n.type)){t=n.getConfig().tp;break}}return t-1},t}();__reflect(QiYue.prototype,"QiYue");var ShenYouHuDunAppearanceConfig=function(){function t(){}return t}();__reflect(ShenYouHuDunAppearanceConfig.prototype,"ShenYouHuDunAppearanceConfig");var QiYueInfo1_5=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return __extends(e,t),e}(QiYueInfo);__reflect(QiYueInfo1_5.prototype,"QiYueInfo1_5");var QiYueType=function(){function t(){this.type=1,this.agreementInfos=[]}return t.prototype.parser=function(t){this.type=t.readByte();for(var e=t.readShort(),i=0;e>i;i++){var n=t.readShort();t.position-=2;var a=this.createQiYueInfo(this.type,n);a.parser(t),this.agreementInfos.push(a)}},t.prototype.getConfig=function(){return this.config||(this.config=Cfg.getConfig(AgreementTypeConfig,this.type)),this.config},t.prototype.getAgreementInfoById=function(t){for(var e=0;e<this.agreementInfos.length;e++)if(this.agreementInfos[e].id==t)return this.agreementInfos[e];return this.agreementInfos[0]},t.prototype.getSuccessCount=function(){for(var t=0,e=0;e<this.agreementInfos.length;e++)this.agreementInfos[e].isSuccess()&&t++;return t},t.prototype.getCount=function(){return this.agreementInfos.length},t.prototype.chekReceive=function(){for(var t=0;t<this.agreementInfos.length;t++)if(this.agreementInfos[t].chekReceive())return!0;return!1},t.prototype.isAct=function(){return this.getCount()==this.getSuccessCount()},t.prototype.getIcon=function(){var t=Cfg.getItemCfg(this.getConfig().items[0].id);return ResMgr.getItemIcon(t.getIcon())},t.prototype.createQiYueInfo=function(t,e){var i,n=getDefinitionByName("QiYueInfo"+t+"_"+e);return i=n?new n:new QiYueInfo,i.setType(this.type),i},t}();__reflect(QiYueType.prototype,"QiYueType");var ShenYouLevelConfig=function(){function t(){}return t}();__reflect(ShenYouLevelConfig.prototype,"ShenYouLevelConfig");var TaskLoopData=function(t){function e(){var e=t.call(this)||this;return e.starValue=1,e.cd=0,e.count=0,e.maxCount=5,e.isLingquMaxReward=0,e.cd=e.cd+Timer.ins().getTimer(),e}return __extends(e,t),e.prototype.parser=function(t){this.id=t.readInt(),this.state=t.readInt(),this.value=t.readInt(),this.starValue=t.readInt(),this.loopIndex=t.readInt();var e=t.readInt();this.cd=1e3*e+Timer.ins().getTimer(),this.count=t.readShort(),this.isLingquMaxReward=t.readByte()},e.prototype.cdTick=function(){return Math.max(0,this.cd-Timer.ins().getTimer())/1e3},e.prototype.chekCount=function(){return this.count>0},e.prototype.isMax=function(){return 10==this.loopIndex&&2==this.state},e.prototype.canLingQu10=function(){return 10==this.loopIndex&&2==this.state&&!this.yiLingQu10()},e.prototype.yiLingQu10=function(){return 1==this.isLingquMaxReward},e}(TaskData);__reflect(TaskLoopData.prototype,"TaskLoopData");var ShenYouNengLiLevelConfig=function(){function t(){}return t.lockRank="lockRank",t}();__reflect(ShenYouNengLiLevelConfig.prototype,"ShenYouNengLiLevelConfig");var ShenYouSkillConfig=function(){function t(){}return t}();__reflect(ShenYouSkillConfig.prototype,"ShenYouSkillConfig");var TaskNavDataType10=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return __extends(e,t),e.prototype["goto"]=function(){var t=this.guideId,e=openWin(ChatWin,0);e.autoSetMsg(),GuiderTrigger.ins().trigger(t,GuiderStepType.HM)},Object.defineProperty(e.prototype,"guideId",{get:function(){return this.controlTarget[1]},enumerable:!0,configurable:!0}),e}(TaskNavDataBase);__reflect(TaskNavDataType10.prototype,"TaskNavDataType10"),window.TaskNavDataType10=TaskNavDataType10;var TaskNavDataType11=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return __extends(e,t),e.prototype["goto"]=function(){return showtipsFail(this.getMsg),!1},Object.defineProperty(e.prototype,"getMsg",{get:function(){return this.controlTarget[1]},enumerable:!0,configurable:!0}),e}(TaskNavDataBase);__reflect(TaskNavDataType11.prototype,"TaskNavDataType11"),window.TaskNavDataType11=TaskNavDataType11;var TaskNavDataType12=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return __extends(e,t),e.prototype["goto"]=function(){return GFunc.isInCity()&&LogicSys.ins().sendEnterFb(FbSys.ins().guajiFbId),FbSys.ins().sendGuaJiChallenge(),!0},e}(TaskNavDataBase);__reflect(TaskNavDataType12.prototype,"TaskNavDataType12"),window.TaskNavDataType12=TaskNavDataType12;var TaskNavDataType13=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return __extends(e,t),e.prototype["goto"]=function(){return GFunc.isInCity()?LogicSys.ins().sendEnterFb(FbSys.ins().guajiFbId):showtipsFail("正在杀怪中"),!0},Object.defineProperty(e.prototype,"getMsg",{get:function(){return this.controlTarget[1]},enumerable:!0,configurable:!0}),e}(TaskNavDataBase);__reflect(TaskNavDataType13.prototype,"TaskNavDataType13"),window.TaskNavDataType13=TaskNavDataType13;var TaskNavDataType2=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return __extends(e,t),e.prototype["goto"]=function(e){void 0===e&&(e=null),t.prototype["goto"].call(this,e);if(FbSys.ins().fbId>Cfg.getConfig(EnumConfig).GUAJI_FUBEN_MAX_ID)return void showtipsFail(Lang.npc_str21);var i=Cfg.getConfig(NPCConfig,this.npcId());if(!this.isSameType(i.controlTarget)){var n=checkOpenWin(Cfg.getWinClassById(i.npcEvent.winId),i.npcEvent.winTab,i.npcEvent.winTab1);n?(this.succeedFrontFun.call(),LogicSys.ins().centerEntity.AI.startfindNpc(this.npcId(),function(){var t=Cfg.getWinClassById(i.npcEvent.winId);openWin(t,i.npcEvent.winTab,i.npcEvent.winTab,i.npcEvent.winTab1)}),this.succeedFun.call()):this.loserFun.call()}},e.prototype.npcId=function(t){return void 0===t&&(t=this.controlTarget),this.getParam(t,1)},e.prototype.isSameType=function(t){return t.type==this.type&&this.npcId(t)==this.npcId()},e}(TaskNavDataBase);__reflect(TaskNavDataType2.prototype,"TaskNavDataType2"),window.TaskNavDataType2=TaskNavDataType2;var TaskNavDataType3=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return __extends(e,t),e.prototype["goto"]=function(){return t.prototype["goto"].call(this),FbSys.ins().fbId>Cfg.getConfig(EnumConfig).GUAJI_FUBEN_MAX_ID?void showtipsFail(Lang.npc_str21):void LogicSys.ins().sendEnterFb(FbSys.ins().guajiFbId)},Object.defineProperty(e.prototype,"fbId",{get:function(){return this.controlTarget[1]},enumerable:!0,configurable:!0}),e}(TaskNavDataBase);__reflect(TaskNavDataType3.prototype,"TaskNavDataType3"),window.TaskNavDataType3=TaskNavDataType3;var TaskNavDataType4=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return __extends(e,t),e.prototype["goto"]=function(){t.prototype["goto"].call(this);var e=this.guideId;this.guidWin&&openWin(this.winName,this.guidWinTabIndex,this.guidWinSubTabIndex),GuiderTrigger.ins().trigger(e,GuiderStepType.HM)},Object.defineProperty(e.prototype,"guideId",{get:function(){return this.controlTarget[1]},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"winName",{get:function(){return Cfg.getWinClassById(this.guidWin)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"guidWin",{get:function(){return this.controlTarget[2]},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"guidWinTabIndex",{get:function(){return this.controlTarget[3]},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"guidWinSubTabIndex",{get:function(){return this.controlTarget[4]},enumerable:!0,configurable:!0}),e}(TaskNavDataBase);__reflect(TaskNavDataType4.prototype,"TaskNavDataType4"),window.TaskNavDataType4=TaskNavDataType4;var TaskNavDataType5=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return __extends(e,t),e.prototype["goto"]=function(){var t=checkOpenWin(this.winName,this.winPage,this.winSubPage);if(t?this.succeedFrontFun.call():this.loserFun.call(),t){var e=openWin(this.winName,this.winPage,this.winSubPage,this.winParam),i=null!=e;i&&this.succeedFun.call()}},Object.defineProperty(e.prototype,"winSubPage",{get:function(){return this.controlTarget[3]},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"winParam",{get:function(){return this.controlTarget[4]},enumerable:!0,configurable:!0}),e}(TaskNavDataType1);__reflect(TaskNavDataType5.prototype,"TaskNavDataType5"),window.TaskNavDataType5=TaskNavDataType5;var TaskNavDataType7=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return __extends(e,t),e.prototype["goto"]=function(){t.prototype["goto"].call(this),this.succeedFrontFun.call()},e}(TaskNavDataBase);__reflect(TaskNavDataType7.prototype,"TaskNavDataType7"),window.TaskNavDataType7=TaskNavDataType7;var TaskNavDataType8=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return __extends(e,t),e.prototype["goto"]=function(){t.prototype["goto"].call(this);var e=checkOpenWin(this.winName,this.actId);if(e?this.succeedFrontFun.call():this.loserFun.call(),e){var i=openWin(this.winName,this.actId),n=null!=i;n&&this.succeedFun.call()}},Object.defineProperty(e.prototype,"winName",{get:function(){var t,e=ActSys.ins().getActDataById(this.actId);return e.isSeeActivity()&&(e.onPlace==ActOnPlace.huodong?GFunc.isSysOpen(45)?t=ActWin:GFunc.isSysOpen(999)&&(t=ActOpenServerWin):e.onPlace==ActOnPlace.hefu?t=ActHeFuWin:e.onPlace==ActOnPlace.juezhan?t=ActJueZhanWin:e.onPlace==ActOnPlace.ACT24&&(t=ActPlace24Win)),t},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"actId",{get:function(){return this.controlTarget[1]},enumerable:!0,configurable:!0}),e}(TaskNavDataBase);__reflect(TaskNavDataType8.prototype,"TaskNavDataType8"),window.TaskNavDataType8=TaskNavDataType8;var TaskNavDataType9=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return __extends(e,t),e.prototype["goto"]=function(){for(var t=this.guideId,e=0;e<GConst.GuiderId2EquiId.length;e++){var i=BagSys.ins().getItemById(GConst.GuiderId2EquiId[e]);i&&openWin(TipsWin).addNewEquipTips(i)}GuiderTrigger.ins().trigger(t,GuiderStepType.HM)},Object.defineProperty(e.prototype,"guideId",{get:function(){return this.controlTarget[1]},enumerable:!0,configurable:!0}),e}(TaskNavDataBase);__reflect(TaskNavDataType9.prototype,"TaskNavDataType9"),window.TaskNavDataType9=TaskNavDataType9;var TclySys=function(t){function e(){var e=t.call(this)||this;return e.tclyData=new TclyData,e}return __extends(e,t),e.ins=function(){return t.getIns.call(this,e)},e}(BaseSys);__reflect(TclySys.prototype,"TclySys");
var System;!function(t){t.tclySys=TclySys.ins.bind(TclySys)}(System||(System={})),window.TclySys=TclySys;var TclyData=function(){function t(){}return t}();__reflect(TclyData.prototype,"TclyData");var TclyItemData=function(){function t(){}return t}();__reflect(TclyItemData.prototype,"TclyItemData");var TclyItem=function(t){function e(){var e=t.call(this)||this;return e.mcBtn=new MC,e.skinName="TclyItemEUI",e.list.itemRenderer=ItemBaseRewardActivity,e.list.dataProvider=e.listAwardArr=new eui.ArrayCollection,e.mcBtn.x=e.btnSend.width/2,e.mcBtn.y=e.btnSend.height/2,e.btnSend.addChildAt(e.mcBtn,e.btnSend.numChildren-1),e.addClickE(e,e.onClick),e}return __extends(e,t),e.prototype.onClick=function(t){switch(t.target){case this.btnLink:openWin(RechargeWin),closeWin(TclyWin);break;case this.btnSend:var e=this.data.config;ActSys.ins().sendReward(e.id,e.index)}},e.prototype.dataChanged=function(){var t=this.data.config;this.lbDec.textFlow=addColorTF(this.getDec(this.data)),this.lbValue.textFlow=addColorTF(this.getValue(this.data)),this.list.dataProvider=new eui.ArrayCollection(t.rewards),this.btnLink.visible=!1,this.btnSend.visible=!1,this.imgYlq.visible=!1,this.btnSend.redPoint.visible=!1,this.data.status==ActRewardState.CanGet?(this.btnSend.visible=!0,this.btnSend.redPoint.visible=!0,this.mcBtn.playFile(ResMgr.getEffName("public_zycs_button01"),-1)):this.data.status==ActRewardState.Geted?(this.imgYlq.visible=!0,this.mcBtn.stop()):this.data.status==ActRewardState.NotReached&&(this.btnLink.visible=!0,this.mcBtn.stop())},e.prototype.getDec=function(t){var e=MathUtil.toInteger(t.dabiao/100);return Lang.act_str84.replace("$str$",addColor(""+(e+Lang.common_yuan),5767068))},e.prototype.getValue=function(t){var e=MathUtil.toInteger(t.dabiao/100),i=MathUtil.toInteger(t.yidabiao/100);return addColor("("+GFunc.overLength(i)+"/"+GFunc.overLength(e)+")",e>i?15733780:46913)},e}(BaseItemRender);__reflect(TclyItem.prototype,"TclyItem"),window.TclyItem=TclyItem;var ShenYouStageConfig=function(){function t(){}return t.stage="stage",t}();__reflect(ShenYouStageConfig.prototype,"ShenYouStageConfig");var ShenYouTagConfig=function(){function t(){}return t}();__reflect(ShenYouTagConfig.prototype,"ShenYouTagConfig");var ShengLingWin=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.redPointHead=[RoleWin,RolePanel],e.winType=WinType.OverlayWin,e}return __extends(e,t),e.panelNames=[TianMoMainPanel,TianShiShengDunPanel,ShenPanTaoZhuangMainPanel],e}(BaseWinAutoTab);__reflect(ShengLingWin.prototype,"ShengLingWin"),window.ShengLingWin=ShengLingWin;var TianMoData=function(){function t(){this.tianMoUpLevelDatas=[],this.tianMoEquipRankData=[],this.pos=[EquipPos.HEAD,EquipPos.CLOTHES,EquipPos.HAND,EquipPos.CALIGA]}return t.prototype.iniData=function(){for(var t=0;t<this.pos.length;t++){var e=new TianMoEquipData;e.pos=this.pos[t],e.star=-1,e.isAct=!1,this.tianMoUpLevelDatas.push(e);var i=new TianMoEquipRankData;i.star=-1,i.pos=e.pos,this.tianMoEquipRankData.push(i)}},t.prototype.parser=function(t){for(var e=t.readByte(),i=0;e>i;i++){var n=t.readByte(),a=t.readShort(),o=t.readShort(),s=t.readBoolean(),r=this.getTianMoUpLevelDataByPos(n);r&&(r.star=a,r.isAct=s);var u=this.gettianMoEquipRankDataByPos(n);u&&(u.rankLevel=o,u.star=a)}},t.prototype.getTianMoUpLevelDataByPos=function(t){for(var e=0;e<this.tianMoUpLevelDatas.length;e++)if(t==this.tianMoUpLevelDatas[e].pos)return this.tianMoUpLevelDatas[e];return null},t.prototype.getTianMoUpLevelDataByIndex=function(t){return this.tianMoUpLevelDatas[t]},t.prototype.gettianMoEquipRankDataByPos=function(t){for(var e=0;e<this.tianMoEquipRankData.length;e++)if(t==this.tianMoEquipRankData[e].pos)return this.tianMoEquipRankData[e];return null},t}();__reflect(TianMoData.prototype,"TianMoData");var TianMoEquipData=function(){function t(){this.pos=0,this.star=-1,this.startMax=0,this.isAct=!1}return t.prototype.showStart=function(){return this.star%6},t.prototype.showMaxStart=function(){return 5},t.prototype.showLevel=function(){return this.star<=5?1:Math.ceil((this.star+1)/6)},t.prototype.isUpLevel=function(){return 0==this.getConfig().items.length},t.prototype.getIsAct=function(){return this.isAct},t.prototype.getMaxLevel=function(){if(0==this.startMax){var t=Cfg.getConfigs(TianMoAttrConfig,this.pos,CondType.MoreEqual,"level",0);this.startMax=t[t.length-1].level}return this.startMax},t.prototype.getIsMax=function(){return this.star>=this.getMaxLevel()},t.prototype.getConfig=function(){return Cfg.getConfig(TianMoAttrConfig,this.pos,this.star)},t.prototype.getNextConfig=function(){return Cfg.getConfig(TianMoAttrConfig,this.pos,this.star+1)},t.prototype.getActConfig=function(){return Cfg.getConfig(TianMoAttrConfig,this.pos,-1)},t.prototype.chekLevelUpStar=function(t){return t>=this.getConfig().zslevel},t.prototype.chekUp=function(){return!this.getIsMax()&&GFunc.isConsumeEnough(this.getConfig().items)&&this.chekLevelUpStar(Actor.ins().zsId)},t}();__reflect(TianMoEquipData.prototype,"TianMoEquipData");var TianMoEquipRankData=function(){function t(){this.pos=0,this.star=-1,this.rankLevel=0,this.ranktMax=0}return t.prototype.getMaxLevel=function(){return 0==this.ranktMax&&(this.ranktMax=Cfg.getMaxConfig(TianMoRankConfig,this.pos).rank),this.ranktMax},t.prototype.getIsMax=function(){return this.rankLevel>=this.getMaxLevel()},t.prototype.getConfig=function(){return Cfg.getConfig(TianMoRankConfig,this.pos,this.rankLevel)},t.prototype.getNextUpRankLevelDesc=function(){return""+(Math.floor(this.getConfig().starlimit/6)+1)+Lang.common_ji+this.getConfig().starlimit%6+Lang.common_xing},t.prototype.chekLevelUpRank=function(){return this.star>=this.getConfig().starlimit},t.prototype.chekUp=function(){return!this.getIsMax()&&GFunc.isConsumeEnough(this.getConfig().items)&&this.chekLevelUpRank()},t}();__reflect(TianMoEquipRankData.prototype,"TianMoEquipRankData");var ShenYouTagExpConfig=function(){function t(){}return t.minLv="minLv",t}();__reflect(ShenYouTagExpConfig.prototype,"ShenYouTagExpConfig");var TianMoEquipRankItem=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return __extends(e,t),e.prototype.dataChanged=function(){var t=this.data;this.lbLevel.text=t.rankLevel+"阶",this.lbLevel.visible=this.imgLvBg.visible=t.rankLevel>0;var e=Cfg.getItemCfg(parseInt(t.getConfig().id[Actor.ins().job-1]));this.imgIcon.source=ResMgr.getItemIcon(e.getIcon(),IconType.IT_80x80),this.updateRedPoint()},e.prototype.updateRedPoint=function(){var t=this.data;t&&(this.redPoint.visible=RpSys.ins().getData(RoleWin,RolePanel,ShengLingWin,TianMoMainPanel,TianMoEquipUpRankPanel,t.pos))},e}(TianMoEquipItem);__reflect(TianMoEquipRankItem.prototype,"TianMoEquipRankItem"),window.TianMoEquipRankItem=TianMoEquipRankItem;var TianMoMaterialItem=function(t){function e(){var e=t.call(this)||this;return e.skinName="TaoZhuangFenJieItemEUI",e.addClickE(e.btnOk,e.onClick),e}return __extends(e,t),e.prototype.onClick=function(){BagSys.ins().sendFenJie(this.data.id,this.data.count)},e.prototype.dataChanged=function(){var t=this.data,e=Cfg.getItemCfg(t.id),i=Cfg.getConfig(FenJieConfig,t.id),n=i.item[0];this.itemIcon.data=t,this.lbName.text=e.getName(),this.lbName.textColor=GConst.PZColor[e.quality];var a=n.count*t.count,o=Cfg.getItemCfg(n.id),s=o.name;this.lbDesc.textFlow=addColorTF(Lang.fumo_str2+addColor(s+" X"+a,GConst.PZColor[o.quality]))},e}(BaseItemRender);__reflect(TianMoMaterialItem.prototype,"TianMoMaterialItem"),window.TianMoMaterialItem=TianMoMaterialItem;var TianMoActTipsWin=function(t){function e(){var e=t.call(this)||this;return e.useType=0,e.equipName="",e.equipIcon="",e}return __extends(e,t),e.prototype.initUI=function(){this.skinName="TianMoActTipsEUI",this.addBg(),this.group.touchEnabled=!1,this.group1.touchEnabled=!1,t.prototype.initUI.call(this),this.layer=LayerMgr.Popup;var e=new XY(120,123),i=new XY(120,140);GFunc.move(this.imgIcon,e,i,1500),GFunc.playUIMovie("hqgx",0,0,this.group1,-1)},e.prototype.open=function(e,i){void 0===i&&(i=""),t.prototype.open.call(this),this.addClickE(this,this.onTap),this.equipName=e,this.equipIcon=i,this.setData()},e.prototype.close=function(){t.prototype.close.call(this)},e.prototype.setData=function(){this.lbName.text=this.equipName,this.imgIcon.source=this.equipIcon},e.prototype.onTap=function(t){closeWin(this)},e}(BaseWinSingle);__reflect(TianMoActTipsWin.prototype,"TianMoActTipsWin"),window.TianMoActTipsWin=TianMoActTipsWin;var ShenYouTagLevelConfig=function(){function t(){}return t}();__reflect(ShenYouTagLevelConfig.prototype,"ShenYouTagLevelConfig");var ShilianBossConfig=function(){function t(){}return t}();__reflect(ShilianBossConfig.prototype,"ShilianBossConfig");var ShilianChapConfig=function(){function t(){}return t}();__reflect(ShilianChapConfig.prototype,"ShilianChapConfig");var TianMoMaterialWin=function(t){function e(){var e=t.call(this)||this;return e.layer=LayerMgr.Popup,e.skinName="TaoZhuangFenJieWinEUI",e.itemList.itemRenderer=TianMoMaterialItem,e.listArray=new eui.ArrayCollection,e.itemList.dataProvider=e.listArray,e.gainList.itemRenderer=GainGoodsItem,e.itemList.useVirtualLayout=!0,e}return __extends(e,t),e.prototype.open=function(){t.prototype.open.call(this),this.addLsn(BagSys.ins().patchFenJie,this.updateData),this.addItemTapE(this.gainList,this.onTouchList),this.updateData(),this.updategain()},e.prototype.updateData=function(){this.listArray.replaceAll(BagSys.ins().getTianMoEquipSmes())},e.prototype.updategain=function(){var t=Cfg.getItemCfg(Cfg.getConfig(EnumConfig).Item_TIANMOSUIPIAN),e=GFunc.getGainItemWayConfig(t.id);this.gainList.dataProvider=new eui.ArrayCollection(e)},e.prototype.onTouchList=function(t){var e=t.item;if(null!=t.item){var i=e.controlTarget;GFunc.createTaskNavData(i)["goto"](),closeWin(this)}},e}(BaseWinSingle);__reflect(TianMoMaterialWin.prototype,"TianMoMaterialWin"),window.TianMoMaterialWin=TianMoMaterialWin;var TianShiShengDunAttrDanData=function(){function t(t){this.useCount=0,this.maxUseCount=0,this.maxCount=0,this.id=1,this.config=t}return Object.defineProperty(t.prototype,"config",{get:function(){return this._config},set:function(t){this._config=t,this.id=t.id},enumerable:!0,configurable:!0}),t}();__reflect(TianShiShengDunAttrDanData.prototype,"TianShiShengDunAttrDanData");var TianShiShengDunData=function(){function t(){this.isAct=!1,this._level=0,this.exp=0,this.attrDanDatas=[],this.attrDanDatas.length=0;for(var t=Cfg.getConfigs(ShengdundanConfig),e=0,i=t;e<i.length;e++){var n=i[e];this.attrDanDatas.push(new TianShiShengDunAttrDanData(n))}}return t.prototype.parser=function(t){this.isAct=t.readBoolean(),this.level=t.readShort(),this.exp=t.readInt();for(var e=t.readByte(),i=0;e>i;i++){var n=this.attrDanDatas[i];n.useCount=t.readShort(),n.maxUseCount=this.getUseDanYaoMax(n.id),n.maxCount=this.getDanYaoMax()}},Object.defineProperty(t.prototype,"level",{get:function(){return this._level},set:function(t){this._level=t;for(var e=0,i=this.attrDanDatas;e<i.length;e++){var n=i[e];n.maxUseCount=this.getUseDanYaoMax(n.id)}},enumerable:!0,configurable:!0}),t.prototype.isMax=function(){return this.level>=Cfg.getConfig(ShengdunConstConfig).starMax},t.prototype.getStage=function(){var t=(this.level+1)/Cfg.getConfig(ShengdunConstConfig).starPerLevel;return Math.ceil(t)},t.prototype.getLevel=function(){var t=this.level%Cfg.getConfig(ShengdunConstConfig).starPerLevel;return t},t.prototype.getLvCfg=function(){return this.lvCfg&&this.lvCfg.star==this.level||(this.lvCfg=Cfg.getConfig(ShengdunLvConfig,this.level)),this.lvCfg},t.prototype.getNextLevelConfig=function(){return this.isMax()?this.nextLevelConfig=this.getLvCfg():this.nextLevelConfig&&this.nextLevelConfig.star==this.level+1||(this.nextLevelConfig=Cfg.getConfig(ShengdunLvConfig,this.level+1)),this.nextLevelConfig},t.prototype.getSatgeConfig=function(){return this.satgeConfig&&this.satgeConfig.star==this.getStage()||(this.satgeConfig=Cfg.getConfig(ShengdunStageConfig,this.getStage())),this.satgeConfig},t.prototype.getUseDanYaoMax=function(t){return this.getSatgeConfig().maxpill[t-1]||0},t.prototype.getDanYaoMax=function(){var t=Cfg.getMaxConfig(ShengdunStageConfig).maxpill;return t[t.length-1]},t.prototype.getDanYaoPower=function(){for(var t=0,e=(Cfg.getConfigs(ShengdundanConfig),0),i=this.attrDanDatas;e<i.length;e++){var n=i[e];if(n.config.attr&&n.config.attr.length>0){var a=AttrData.attrMultiple(n.config.attr,n.useCount);t+=GFunc.getPower(a)}else t+=n.config.power*n.useCount}return t},t.prototype.getPower=function(){var t=this.getDanYaoPower(),e=this.getLvCfg().attr;t+=GFunc.getPower(e);for(var i=Cfg.getConfigs(ShengdunSkillConfig,CondType.LessEqual,ShengdunSkillConfig.stage,this.getStage()),n=0,a=i;n<a.length;n++){var o=a[n];t+=GFunc.getPower(o.attr),t+=o.power}return t},t}();__reflect(TianShiShengDunData.prototype,"TianShiShengDunData");var TianShiShengDunSys=function(t){function e(){var e=t.call(this)||this;return e.shengDunData=new TianShiShengDunData,e.sysId=PackId.TianShiShengDun,e.reg(1,e.patchInfo),e.reg(2,e.patchLevel),e.reg(4,e.patchAct),e}return __extends(e,t),e.ins=function(){return t.getIns.call(this,e)},e.prototype.patchInfo=function(t){this.shengDunData.parser(t),RpFun.showTianShiShengDun(),RpFun.showTianShiShengDunDan()},e.prototype.sendLevel=function(t){var e=this.getBytes(2);e.writeByte(t),this.send(e)},e.prototype.patchLevel=function(t){var e=this.shengDunData.level,i=this.shengDunData.getStage();this.shengDunData.level=t.readShort(),this.shengDunData.exp=t.readInt();var n=this.shengDunData.getStage();return RpFun.showTianShiShengDun(),i!=n&&openWin(TianShiShengDunUpLevelTipsWin,n-1),RpFun.showTianShiShengDunDan(),e<this.shengDunData.level},e.prototype.sendUseDanYao=function(t){var e=this.getBytes(3);e.writeByte(t),this.send(e)},e.prototype.sendAct=function(){var t=this.getBytes(4);this.send(t)},e.prototype.patchAct=function(t){this.shengDunData.isAct=!0},e}(BaseSys);__reflect(TianShiShengDunSys.prototype,"TianShiShengDunSys");var System;!function(t){t.tianShiShengDunSys=TianShiShengDunSys.ins.bind(TianShiShengDunSys)}(System||(System={})),window.TianShiShengDunSys=TianShiShengDunSys;var TianShiShengDunAttrDanItem=function(t){function e(){var e=t.call(this)||this;return e.skinName="TianShiShengDunPanelItemEUI",e}return __extends(e,t),e.prototype.dataChanged=function(){var t=this.data;t&&(this.imgBg.source="jlyj_zycs_yx3",this.lbshiyong.textFlow=addColorTF(t.useCount+"/"+t.maxUseCount),this.imgIcon.source=this.getIcon(),this.updateRedPoint())},e.prototype.getIcon=function(){var t=this.data;return"tssd_zycs_ys"+t.id},e.prototype.updateRedPoint=function(){var t=this.data;t&&(this.redPoint.visible=RpSys.ins().getData(RoleWin,RolePanel,ShengLingWin,TianShiShengDunPanel,"dan",t.id))},e}(BaseItemRender);__reflect(TianShiShengDunAttrDanItem.prototype,"TianShiShengDunAttrDanItem");var TianShiShengDunAttrDanTipsWin=function(t){function e(){var e=t.call(this)||this;return e.layer=LayerMgr.Popup,e.skinName="TianShiShengDunAttrDanTipsWinEUI",e.gainList.itemRenderer=GainGoodsItem,e.gainList.dataProvider=e.gainListData=new eui.ArrayCollection,e.addBg(),e}return __extends(e,t),e.prototype.childrenCreated=function(){this.setSkinPart("itemIcon",new ItemIcon)},e.prototype.initUI=function(){t.prototype.initUI.call(this)},e.prototype.open=function(e,i){void 0===i&&(i=""),t.prototype.open.call(this),this.addItemTapE(this.gainList,this.onTouchList);e.id,e.count;this.lbMaxDesc.text=i,this.setData(e)},e.prototype.setData=function(t){var e=t.id;t.count;this.itemId=e;var i=Cfg.getItemCfg(this.itemId);this.nameLabel.text=i.getName(),this.nameLabel.textColor=GConst.PZColor[i.quality],this.lbDesc.textFlow=StrUtil.toTF(i.getDesc()),this.itemIcon.setDataByItemConfig(i),this.groupTUjing.scaleY=""==i.output?0:1,this.lbShiYongCount.textFlow=addColorTF(""+Lang.itemtips_str22+t.shiyongCount+"/"+t.maxCount);var n=(Cfg.getItemCfg(this.itemId),GFunc.getGainItemWayConfig(i.id));if(n.length>0){this.groupGain.scaleY=this.gainList.scaleY=1,this.gainListData.source=n;var a=n.length>4?4:n.length;this.gainList.width=94*a+35*(a-1),this.groupTUjing.scaleY=0}else this.groupGain.scaleY=this.gainList.scaleY=0},e.prototype.onTouchList=function(t){var e=t.item;if(null!=t.item){var i=GFunc.createTaskNavData(e.controlTarget);i.setsucceedFrontFun(function(){WinMgr.ins().closeAllWin(),closeWin(ItemTipsWin)}),i.setLoserFun(function(){closeWin(ItemTipsWin)}),i["goto"](e.sysid)}},e}(BaseWinSingle);__reflect(TianShiShengDunAttrDanTipsWin.prototype,"TianShiShengDunAttrDanTipsWin"),window.TianShiShengDunAttrDanTipsWin=TianShiShengDunAttrDanTipsWin;var ShilianCommonConfig=function(){function t(){}return t}();__reflect(ShilianCommonConfig.prototype,"ShilianCommonConfig");var TianShiShengDunSkillItem=function(t){function e(){var e=t.call(this)||this;return e.skinName="TianShiShengDunPanelSkillEUI",e}return __extends(e,t),e.prototype.dataChanged=function(){if(this.data&&this.data.id){var t=this.data;this.levelImg.source="emzx_zycs_"+t.stage,TianShiShengDunPanel.curStage>=t.stage?(this.imgIcon.source="tssd_zycs_sk"+t.id,this.imgYjh.visible=!0,this.levelImg.visible=!1):TianShiShengDunPanel.skillConfig.stage==t.stage?(this.imgIcon.source="tssd_zycs_sk"+t.id,this.imgYjh.visible=!1,this.levelImg.visible=!0):(this.imgIcon.source="tssd_zycs_sk"+t.id+"a",this.imgYjh.visible=!1,this.levelImg.visible=!0)}},e}(BaseItemRender);__reflect(TianShiShengDunSkillItem.prototype,"TianShiShengDunSkillItem");var TianShiShengDunSkillTipsWin=function(t){function e(){var e=t.call(this)||this;return e.layer=LayerMgr.Popup,e.skinName="TianShiShengDunTipsWinEUI",e.addBg(),e}return __extends(e,t),e.prototype.open=function(e){t.prototype.open.call(this),this.updatePanel(e)},e.prototype.updatePanel=function(t){this.lbName.text=""+t.name,this.imgIcon.source="tssd_zycs_sk"+t.id;var e=AttrData.getFm(GConst.SXColor[0],GConst.SXColor[2],"","+"),i=AttrData.parse(t.attr,{fm:e}).join("\n");this.lbCur.textFlow=addColorTF(i),i=addColor(""+t.stage+Lang.common_jie,15733780),this.lbDesc.textFlow=TianShiShengDunSys.ins().shengDunData.getStage()>=t.stage?addColorTF(Lang.common_str28,5767068):addColorTF(Lang.tssd_str3.replace("$jie$",""+i));for(var n=0;n<t.attr.length;n++)DisUtil.createEuiImage(this.group,"",this.lbCur.x-25,this.lbCur.y+25*n);this.bitPower.text=(t.power+GFunc.getPower(t.attr)).toFixed(0)},e.prototype.updatePanel1=function(t){this.lbName.text=""+t.name,this.imgIcon.source="tssd_zycs_sk"+t.id;var e=AttrData.getFm(GConst.SXColor[0],GConst.SXColor[2],"","+"),i=AttrData.parse(t.attr,{fm:e}).join("\n");this.lbCur.textFlow=addColorTF(i),i=addColor(""+t.stage+Lang.common_jie,15733780),this.lbDesc.textFlow=TianShiShengDunSys.ins().shengDunData.getStage()>=t.stage?addColorTF(Lang.common_str28,5767068):addColorTF(Lang.tssd_str3.replace("$jie$",i));for(var n=0;n<t.attr.length;n++)DisUtil.createEuiImage(this.group,"",this.lbCur.x-25,this.lbCur.y+25*n);this.bitPower.text=(t.power+GFunc.getPower(t.attr)).toFixed(0)},e}(BaseWinSingle);__reflect(TianShiShengDunSkillTipsWin.prototype,"TianShiShengDunSkillTipsWin"),window.TianShiShengDunSkillTipsWin=TianShiShengDunSkillTipsWin;var TianShiShengDunUpLevelTipsWin=function(t){function e(){var e=t.call(this)||this;return e.layer=LayerMgr.Popup,e.skinName="TianShiShengDunUpLevelTipsWinEUI",e.mcIcon=new MC,e.mcIcon.x=0,e.mcIcon.y=0,e.groupEntity.addChild(e.mcIcon),e}return __extends(e,t),e.prototype.open=function(e){t.prototype.open.call(this),this.updatePanel(e)},e.prototype.updatePanel=function(t){this.mcIcon.playFile(getEffName("tssd_zycs_sd"+t),-1)},e}(BaseWinSingle);__reflect(TianShiShengDunUpLevelTipsWin.prototype,"TianShiShengDunUpLevelTipsWin"),window.TianShiShengDunUpLevelTipsWin=TianShiShengDunUpLevelTipsWin;var VipSys=function(t){function e(){var e=t.call(this)||this;e.vipAwardStates=[],e.sVipExp=0,e.sVipAwardStates=[],e.sVipGiftState=[],e.sVipEvervDayAwardState=[],e.payItems=[],e.sysId=PackId.Vip,e.reg(1,e.patchVipInit),e.reg(2,e.patchSvipData),e.reg(3,e.patchSVipAwardstate),e.reg(5,e.patchVipUpdate),e.reg(6,e.patchGetVipAward),e.reg(7,e.patchSvipEveryDayAward),e.reg(10,e.patchSvipLimitGiftData),e.reg(11,e.patchSvipLimitGiftUpdate),e.reg(14,e.vipRedpacketInfoBack);for(var i=Cfg.getConfigs(VipConfig),n=0;n<i.length;n++)e.vipAwardStates[n]=0;for(var a=Cfg.getConfigs(SVipConfig),n=0;n<a.length;n++)e.sVipAwardStates[n]=0,e.sVipEvervDayAwardState[n]=1;for(var o=Cfg.getConfigs(PayMoneyConfig),s=0,r=o;s<r.length;s++){var u=r[s],h=new PayItem;h.readConfig(u),e.payItems.push(h)}return e.sVipLimitGiftData=new SVipLimitGiftData,e.xjhbData=new XJHBData,e}return __extends(e,t),e.ins=function(){return t.getIns.call(this,e)},e.prototype.showReCharge=function(t){var e=this.getPayItem(t),i=e.itemName,n=e.desc,a=e.amount;PfActivitySys.ins().verifyApiInfo.ishow?showtipsFail("请先完成实名认证后再充值"):window.platform.pay(t,a,0,i,n),Actor.ins().isLocation&&gms("@chongzhi "+t)},e.prototype.getPayItem=function(t){for(var e=0,i=this.payItems;e<i.length;e++){var n=i[e];if(n.yb==t)return n}},e.prototype.sendGetAwards=function(t,e){void 0===e&&(e=1);var i=this.getBytes(1);i.writeShort(t),i.writeByte(e),this.send(i)},e.prototype.patchVipInit=function(t){Actor.ins().sVipLv=t.readByte(),this.sVipExp=t.readInt();var e=t.readInt();MathUtil.writeIntToArray(e,this.sVipAwardStates);var i=t.readInt();MathUtil.writeIntToArray(i,this.sVipGiftState),Actor.ins().vipLv=t.readByte(),this.vipExp=t.readInt();var n=t.readInt();MathUtil.writeIntToArray(n,this.vipAwardStates);var a=t.readInt();MathUtil.writeIntToArray(a,this.sVipEvervDayAwardState)},e.prototype.patchSvipData=function(t){var e=Actor.ins().sVipLv,i=t.readShort();Actor.ins().sVipLv=i,this.sVipExp=t.readInt(),i!=e&&(RpFun.showSVipEveryDayAwardRp(),RpFun.showSVipAwardRp(),RpFun.showBBFLLoginRp(),RpFun.showBBFLCustomRp(),RpFun.showBBFLLevelRp(),RpFun.showActTypeRp(ActType.TYPE_10,ActSubType.TYPE_1),this.patchSvipLvChange(),RpFun.showDLHLRedPoint())},e.prototype.patchSvipLvChange=function(){},e.prototype.sendGetSVipAward=function(t){var e=this.getBytes(3);e.writeByte(t),this.send(e)},e.prototype.patchSVipAwardstate=function(t){var e=t.readInt();MathUtil.writeIntToArray(e,this.sVipAwardStates),RpFun.showSVipAwardRp()},e.prototype.sendGetSVipEveryDayAward=function(){this.sendBase(7)},e.prototype.patchSvipEveryDayAward=function(t){var e=t.readInt();MathUtil.writeIntToArray(e,this.sVipEvervDayAwardState),RpFun.showSVipEveryDayAwardRp()},e.prototype.sendBuyVipGift=function(t){var e=this.getBytes(4);e.writeByte(t),this.send(e)},e.prototype.patchBuyVipGift=function(t){var e=t.readInt();MathUtil.writeIntToArray(e,this.sVipGiftState)},e.prototype.isSvipAwardHasGet=function(t){return 1==this.sVipAwardStates[t]},e.prototype.hasSVipAwardCanGet=function(t){void 0===t&&(t=Actor.ins().sVipLv);for(var e=!1,i=0;t>=i&&!(e=this.canGetSVipAward(i));i++);return e},e.prototype.getSVipAwardState=function(t){var e=ActRewardState.Geted,i=this.sVipAwardStates[t];if(0==i){var n=Actor.ins().sVipLv;e=n>=t&&n>0?ActRewardState.CanGet:ActRewardState.NotReached}else e=ActRewardState.Geted;return e},e.prototype.canGetSVipAward=function(t){return this.getSVipAwardState(t)==ActRewardState.CanGet},e.prototype.canGetSvipEveryDayAward=function(){return Actor.ins().sVipLv>0&&this.hasSvipEveryDayAwarCanGet()},e.prototype.hasSvipEveryDayAwarCanGet=function(){for(var t=!1,e=0;e<this.sVipEvervDayAwardState.length;e++)if(t=0==this.sVipEvervDayAwardState[e])return t;return!1},e.prototype.getSvipEveryDayAwardIndex=function(){for(var t=0;t<this.sVipEvervDayAwardState.length;t++)if(0==this.sVipEvervDayAwardState[t])return t;return 0},e.prototype.getCurSVipConfig=function(){return Cfg.getConfig(SVipConfig,Actor.ins().sVipLv)},e.prototype.patchVipUpdate=function(t){var e=t.readByte(),i=t.readByte();Actor.ins().vipLv=e,2==i&&this.createVipFly(e),this.vipExp=t.readInt(),RpFun.showVipAwardRp()},e.prototype.createVipFly=function(t){if(!urlParam.isShenhe){var e=new DuiLieFlyItemData,i=this.createFlyItem(t),n=(getWin(MainUIButton),new Caller);n.func=this.patchVipFlyEnd,n.obj=this,e.setData(i,function(){var t=JobSys.ins().getIconXy(getWin(MainWin).getVipGroup(),i);return t=LayerMgr.Top.globalToLocal(t.x,t.y)},this,VipFlyWin,t,n),e.setOrder(4),DuiLieSys.ins().flyData.addFlyData(e)}},e.prototype.patchVipFlyEnd=function(){},e.prototype.createFlyItem=function(t){var e=new VipFlyWinItem;return e.open(t),e},e.prototype.sendGetVipAward=function(t){var e=this.getBytes(6);e.writeByte(t),this.send(e)},e.prototype.patchGetVipAward=function(t){var e=t.readInt();MathUtil.writeIntToArray(e,this.vipAwardStates),RpFun.showVipAwardRp()},e.prototype.hasVipAwardCanGet=function(t){for(var e=!1,i=0;t>=i&&!(e=this.canGetVipAward(i));i++);return e},e.prototype.getVipAwardState=function(t){var e=ActRewardState.Geted,i=this.vipAwardStates[t-1];return e=0==i?Actor.ins().vipLv>=t?ActRewardState.CanGet:ActRewardState.NotReached:ActRewardState.Geted},e.prototype.canGetVipAward=function(t){return this.getVipAwardState(t)==ActRewardState.CanGet},e.prototype.patchSvipLimitGiftData=function(t){this.sVipLimitGiftData.parse(t)},e.prototype.patchSvipLimitGiftUpdate=function(t){this.sVipLimitGiftData.parseUpdateSingle(t)},e.prototype.sendSvipLimitGifBuy=function(t){var e=this.getBytes(12);e.writeShort(t),this.send(e)},e.prototype.sendVipRedpacket=function(){var t=this.getBytes(13);this.send(t)},e.prototype.sendVipRedpacketInfo=function(){var t=this.getBytes(14);this.send(t)},e.prototype.vipRedpacketInfoBack=function(t){this.xjhbData.parseUpdate(t),this.xjhbData.xjhbNum>0?openWin(XJHBSubWin):this.xjhbData.redTimes>0&&(isShowWin(XJHBWin)||RES.getResAsync("xjhb_bg",this.openXJHBWin,this)),RpFun.showVipRedPacketRp()},e.prototype.openXJHBWin=function(){if(!urlParam.isShenhe){var t=new DuiLieOpenWinData;t.setData(function(){openWin(XJHBWin,function(){t.call()})},this),t.setOrder(2),t.t=XJHBWin,DuiLieSys.ins().flyData.addFlyData(t)}},__decorate([post()],e.prototype,"vipRedpacketInfoBack",null),e}(BaseSys);__reflect(VipSys.prototype,"VipSys");var System;!function(t){t.vipSys=VipSys.ins.bind(VipSys)}(System||(System={})),window.VipSys=VipSys;var SkillArgs=function(){function t(){}return t}();__reflect(SkillArgs.prototype,"SkillArgs");var SvipBuZuTipsWin=function(t){function e(){return t.call(this)||this}return __extends(e,t),e.prototype.initUI=function(){t.prototype.initUI.call(this),this.skinName="SvipBuZuTipsWinEUI",this.addBg()},e.prototype.open=function(e){t.prototype.open.call(this),this.addClickE(this.btnOK,this.onClick),this.lbDesc.textFlow=addColorTF(e)},e.prototype.onClick=function(t){switch(t.currentTarget){case this.btnOK:closeWin(this),openWin(RechargeWin2)}},e}(BaseWinSingle);__reflect(SvipBuZuTipsWin.prototype,"SvipBuZuTipsWin"),window.SvipBuZuTipsWin=SvipBuZuTipsWin;var SVipEveryDayAwardWin=function(t){function e(){var e=t.call(this)||this;return e.curShowSviplv=1,e}return __extends(e,t),e.prototype.initUI=function(){t.prototype.initUI.call(this),this.skinName="SVipEveryDayAwardWinEUI",this.listAward.itemRenderer=ItemBaseRewardName,this.listAward.dataProvider=this.listAwardArr=new eui.ArrayCollection,this.addBg()},e.prototype.open=function(){t.prototype.open.call(this),this.addClickE(this.btnGet,this.onClick),this.addLsn(VipSys.ins().patchSvipEveryDayAward,this.update),this.update()},e.prototype.update=function(){if(Actor.ins().sVipLv>0){var t=VipSys.ins().hasSvipEveryDayAwarCanGet();t?(this.curShowSviplv=VipSys.ins().getSvipEveryDayAwardIndex(),this.btnGet.visible=!0,this.imgYLQ.visible=!1):(this.curShowSviplv=Actor.ins().sVipLv,this.btnGet.visible=!1,this.imgYLQ.visible=!0)}else this.curShowSviplv=1,this.btnGet.visible=!1,this.imgYLQ.visible=!1;this.imgTitle.source="svip_zycs_mrjl"+this.curShowSviplv;var e=Cfg.getConfig(SVipConfig,this.curShowSviplv);this.listAwardArr.source=e.dailyrewards},e.prototype.onClick=function(t){switch(t.currentTarget){case this.btnGet:Actor.ins().sVipLv>=this.curShowSviplv?VipSys.ins().sendGetSVipEveryDayAward():showtipsFail("SVIP"+this.curShowSviplv+"可领取")}},e}(BaseWinSingle);__reflect(SVipEveryDayAwardWin.prototype,"SVipEveryDayAwardWin"),window.SVipEveryDayAwardWin=SVipEveryDayAwardWin;var SkillPassiveConfig=function(){function t(){}return t}();__reflect(SkillPassiveConfig.prototype,"SkillPassiveConfig");var SvipPanelAttrItem=function(t){function e(){var e=t.call(this)||this;return e.skinName="SvipPanelAttrItemEUI",e}return __extends(e,t),e.prototype.dataChanged=function(){var t=this.data;this.labelName.textFlow=StrUtil.toTF(t)},e}(BaseItemRender);__reflect(SvipPanelAttrItem.prototype,"SvipPanelAttrItem"),window.SvipPanelAttrItem=SvipPanelAttrItem;var SVipTequanTipsWin=function(t){function e(){var e=t.call(this)||this;return e.curShowLv=1,e}return __extends(e,t),e.prototype.initUI=function(){t.prototype.initUI.call(this),this.skinName="SVipTequanTipsWinEUI",this.layer=LayerMgr.Popup,this.listAttr.itemRenderer=SvipPanelAttrItem,this.listAttr.dataProvider=this.listAttrArr=new eui.ArrayCollection,this.addBg()},e.prototype.open=function(e){void 0===e&&(e=1),t.prototype.open.call(this),this.addClickE(this.btnLeft,this.onClick),this.addClickE(this.btnRight,this.onClick),this.curShowLv=Math.max(e,1),this.updateCurVip()},e.prototype.updateCurVip=function(){this.imgVipLv.source="svip_zycs_tq"+this.curShowLv;var t=Cfg.getConfig(SVipConfig,this.curShowLv);this.listAttrArr.source=t.description},e.prototype.onClick=function(t){switch(t.currentTarget){case this.btnLeft:this.curShowLv>1&&this.curShowLv--,this.updateCurVip();break;case this.btnRight:this.curShowLv<Cfg.getSVipMaxLv()&&this.curShowLv++,this.updateCurVip()}},e}(BaseWinSingle);__reflect(SVipTequanTipsWin.prototype,"SVipTequanTipsWin"),window.SVipTequanTipsWin=SVipTequanTipsWin;var SkillsConfig=function(){function t(){}return t}();__reflect(SkillsConfig.prototype,"SkillsConfig");var VipComponent=function(t){function e(){var e=t.call(this)||this;return e.skinName="VipComponentEUI",e}return __extends(e,t),e.prototype.open=function(){t.prototype.open.call(this),this.addLsn(VipSys.ins().patchVipUpdate,this.updateChuangguan),this.addLsn(VipSys.ins().patchVipInit,this.updateChuangguan),this.addLsn(VipSys.ins().vipRedpacketInfoBack,this.updateChuangguan),this.addLsn(FbSys.ins().patchGuaJiChallenge,this.updateChuangguan),this.updateChuangguan()},e.prototype.updateChuangguan=function(){ComUtil.isXianYuApp?this.img_tips&&(this.img_tips.source="xjhb_img_tips30009_0"):this.img_tips&&(this.img_tips.source="xjhb_img_tips1");var t=this.visible,e=VipSys.ins().xjhbData.totalNum;e<Cfg.getHongbaoMaxLv()?(this.visible=!0,this.onUpdate()):this.visible=!1,LogicSys.ins().centerEntity&&t!=this.visible&&LogicSys.ins().centerEntity.updatePos()},e.prototype.onUpdate=function(){var t=Cfg.getConfig(VipHongbaoConfig,VipSys.ins().xjhbData.totalNum);this.bmpLabelGuan.text=t.needCustom.toString()},e}(BaseEUI);__reflect(VipComponent.prototype,"VipComponent"),window.VipComponent=VipComponent;var VipFlyWin=function(t){function e(){var e=t.call(this)||this;return e.layer=LayerMgr.Top,e.winType=WinType.NeverCloseWin,e.vipLv=0,e.flyFun=new Caller,e.isMax=!1,e.gqNum=0,e.skinName="VipFlyWinEUI",e.addBg(),e}return __extends(e,t),e.prototype.open=function(e,i,n){void 0===e&&(e=0),t.prototype.open.call(this),this.vipLv=e,this.flyFun.obj=n,this.flyFun.func=i,this.bmpLabelLv.text=e.toString(),this.updateView(e),Timer.ins()["do"](3e3,0,1,this.end,this)},e.prototype.close=function(){for(var e=[],i=0;i<arguments.length;i++)e[i]=arguments[i];t.prototype.close.call(this),Timer.ins().removeAll(this),this.flyFun.param=[this.groupLv],this.flyFun.call()},e.prototype.updateView=function(t){ComUtil.isXianYuApp?this.img_tips&&(this.img_tips.source="xjhb_img_tips30009_1"):this.img_tips&&(this.img_tips.source="xjhb_img_tips2");var e=VipSys.ins().xjhbData.totalNum;if(this.isMax=e>=Cfg.getHongbaoMaxLv(),this.nextGroup.visible=!this.isMax,!this.isMax){var i=Cfg.getConfig(VipHongbaoConfig,VipSys.ins().xjhbData.totalNum);this.gqNum=i.needCustom}},e.prototype.end=function(){closeWin(this)},e}(BaseWinSingle);__reflect(VipFlyWin.prototype,"VipFlyWin"),window.VipFlyWin=VipFlyWin;
var VipFlyWinItem=function(t){function e(){var e=t.call(this)||this;return e.skinName="VipFlyWinItemEUI",e}return __extends(e,t),e.prototype.open=function(t){void 0===t&&(t=0),this.bmpLabelLv.text=t.toString()},e}(BaseEUI);__reflect(VipFlyWinItem.prototype,"VipFlyWinItem"),window.VipFlyWinItem=VipFlyWinItem;var VipLoginWin=function(t){function e(){return t.call(this)||this}return __extends(e,t),e.prototype.initUI=function(){t.prototype.initUI.call(this),this.skinName="VipLoginWinEUI",this.autoCloseTime=5,this.btnGet.addChild(MC.createCenterGruop("res/eff/vipeff",-1))},e.prototype.open=function(e){void 0===e&&(e=0),t.prototype.open.call(this),this.addClickE(this.btnGet,this.onClick)},e.prototype.onAutoClose=function(e){void 0===e&&(e=0),VipSys.ins().createVipFly(1),t.prototype.onAutoClose.call(this,e)},e.prototype.onClick=function(t){switch(t.currentTarget){case this.btnGet:this.onAutoClose()}},e}(BaseWinSingle);__reflect(VipLoginWin.prototype,"VipLoginWin"),window.VipLoginWin=VipLoginWin;var SkillsLevelConfig=function(){function t(){}return t}();__reflect(SkillsLevelConfig.prototype,"SkillsLevelConfig");var VipTequanTipsWin=function(t){function e(){var e=t.call(this)||this;return e.curShowLv=1,e}return __extends(e,t),e.prototype.initUI=function(){t.prototype.initUI.call(this),this.skinName="VipTequanTipsWinEUI",this.listAttr.itemRenderer=SvipPanelAttrItem,this.listAttr.dataProvider=this.listAttrArr=new eui.ArrayCollection,this.addBg()},e.prototype.open=function(e){void 0===e&&(e=1),t.prototype.open.call(this),this.addClickE(this.btnLeft,this.onClick),this.addClickE(this.btnRight,this.onClick),this.curShowLv=e,this.updateCurVip()},e.prototype.updateCurVip=function(){this.imgVipLv.source="vip_zycs_tq"+this.curShowLv;var t=Cfg.getConfig(VipConfig,this.curShowLv);this.listAttrArr.source=t.desc2},e.prototype.onClick=function(t){switch(t.currentTarget){case this.btnLeft:this.curShowLv>1&&this.curShowLv--,this.updateCurVip();break;case this.btnRight:this.curShowLv<Cfg.getVipMaxLv()&&this.curShowLv++,this.updateCurVip()}},e}(BaseWinSingle);__reflect(VipTequanTipsWin.prototype,"VipTequanTipsWin"),window.VipTequanTipsWin=VipTequanTipsWin;var VipZunxiangWin=function(t){function e(){return t.call(this)||this}return __extends(e,t),e.prototype.initUI=function(){t.prototype.initUI.call(this),this.skinName="VipZunxiangWinEUI"},e.prototype.open=function(e){void 0===e&&(e=0),t.prototype.open.call(this),this.addClickE(this.btnGet,this.onClick),this.labelDesc.text=Cfg.getConfig(VipConfig,e).desc,this.bmpLabelLv.text=e.toString(),Timer.ins()["do"](0,1e3,5,this.onTimer,this)},e.prototype.close=function(){t.prototype.close.call(this),Timer.ins().remove(this.onTimer,this),openWin(VipWin,0)},e.prototype.onTimer=function(t){this.labelAutoGet.text=t+"秒后自动领取",0==t&&closeWin(this)},e.prototype.onClick=function(t){switch(t.currentTarget){case this.btnGet:closeWin(this)}},e}(BaseWinSingle);__reflect(VipZunxiangWin.prototype,"VipZunxiangWin"),window.VipZunxiangWin=VipZunxiangWin;var SVipLimitGiftWin=function(t){function e(){var e=t.call(this)||this;return e.skinName="SVipLimitGiftWinEUI",e.addBg(),e.setSkinPart("priceIconOld",new PriceIcon),e.setSkinPart("priceIconNew",new PriceIcon),e.tab1.itemRenderer=SVipLimitGiftWinTabBtn,e.tab1.dataProvider=new eui.ArrayCollection([]),e.list.dataProvider=e.listArray=new eui.ArrayCollection,e.list.itemRenderer=ItemBaseReward,e.priceIconOld.setType(CurType.yb),e.priceIconOld.setIsYuanJia(!0),e.priceIconNew.setType(CurType.yb),e}return __extends(e,t),e.prototype.open=function(){t.prototype.open.call(this),this.addClickE(this.btnBuy,this.onClick),this.addItemTapE(this.tab1,this.onMenuClick),this.addLsn(VipSys.ins().patchSvipLimitGiftData,this.updateList),this.addLsn(VipSys.ins().patchSvipLimitGiftUpdate,this.updateList),this.updateList()},e.prototype.updateList=function(){var t=VipSys.ins().sVipLimitGiftData,i=t.sVipLimitGiftItemDatas.concat();i.length>0?(this.tab1.dataProvider.length!=i.length&&(SortUtil.sortOn(i,["id"],[SortType.up]),this.tab1.dataProvider=new eui.ArrayCollection(i),this.tab1.validateNow(),this.tab1.selectedIndex=0),this.updatePanel()):closeWin(e)},e.prototype.updatePanel=function(){var t=this.data,e=t.config;this.lbDesc.text=0==e.svip?"购买后解锁更低折扣":"SVIP"+e.svip+"可购买",this.listArray.source=e.rewards,this.priceIconOld.setPrice(e.price),this.priceIconNew.setPrice(e.needyuanbao),this.bitZhe.text=""+(e.discount/10).toString().replace(".","d")},e.prototype.updateTime=function(){this.data&&(this.lbDate.text=getFormatTime(this.data.leftTime,"hh小时mm分ss秒")+"后永久消失")},Object.defineProperty(e.prototype,"data",{get:function(){return this.tab1.selectedItem},enumerable:!0,configurable:!0}),e.prototype.onMenuClick=function(t){this.updatePanel()},e.prototype.onClick=function(t){switch(t.target){case this.btnBuy:GFunc.checkSVIP(this.data.config.svip)&&GFunc.checkCurrency(CurType.yb,this.data.config.needyuanbao)&&VipSys.ins().sendSvipLimitGifBuy(this.data.id)}},e.getSysId=function(){return 7},e}(BaseWinSingle);__reflect(SVipLimitGiftWin.prototype,"SVipLimitGiftWin"),window.SVipLimitGiftWin=SVipLimitGiftWin;var SVipLimitGiftWinTabBtn=function(t){function e(){var e=t.call(this)||this;return e.skinName="BtnTab6ZYCSSkin",e.showRedPoint(!1),e}return __extends(e,t),e.prototype.dataChanged=function(){var t=this.data;this.labelDisplay.text=""+GFunc.GetLvStrByLv(t.config.level,!0)},e.prototype.showRedPoint=function(t){this.redPoint.visible=t},e}(BaseItemRender);__reflect(SVipLimitGiftWinTabBtn.prototype,"SVipLimitGiftWinTabBtn"),window.SVipLimitGiftWinTabBtn=SVipLimitGiftWinTabBtn;var SVipLimitGiftData=function(){function t(){this.sVipLimitGiftItemDatas=[]}return t.prototype.parse=function(t){var e=t.readByte();this.sVipLimitGiftItemDatas.length=0;for(var i=0;e>i;i++){var n=new SVipLimitGiftItemData;n.parse(t),this.sVipLimitGiftItemDatas.push(n)}},t.prototype.parseUpdateSingle=function(t){var e=t.readByte(),i=new SVipLimitGiftItemData;i.parse(t);var n=this.getItemByLevel(i.id);switch(e){case 1:this.sVipLimitGiftItemDatas.push(i);break;case 2:this.removeData(i.id);break;case 3:n.svipLevel=i.svipLevel}},t.prototype.removeData=function(t){for(var e=0;e<this.sVipLimitGiftItemDatas.length;e++){var i=this.sVipLimitGiftItemDatas[e];i.id==t&&this.sVipLimitGiftItemDatas.splice(e,1)}},t.prototype.getItemByLevel=function(t){for(var e=0;e<this.sVipLimitGiftItemDatas.length;e++){var i=this.sVipLimitGiftItemDatas[e];if(i.id==t)return i}return null},t.prototype.isOpen=function(){return this.sVipLimitGiftItemDatas.length>0},t}();__reflect(SVipLimitGiftData.prototype,"SVipLimitGiftData");var SVipLimitGiftItemData=function(){function t(){this.id=1,this.svipLevel=1,this.time=0}return t.prototype.parse=function(t){this.id=t.readByte(),this.svipLevel=t.readByte();var e=t.readInt();this.time=1e3*e+Timer.ins().getEgretTimer()},Object.defineProperty(t.prototype,"leftTime",{get:function(){return Math.max((this.time-Timer.ins().getEgretTimer())/1e3,0)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"config",{get:function(){return Cfg.getConfig(SVipLimitGiftConfig,this.id,this.svipLevel)},enumerable:!0,configurable:!0}),t}();__reflect(SVipLimitGiftItemData.prototype,"SVipLimitGiftItemData");var WCDashiWin=function(t){function e(){return t.call(this)||this}return __extends(e,t),e.prototype.initUI=function(){this.skinName="XingHunAttrWinEUI",this.addBg(),t.prototype.initUI.call(this),this.layer=LayerMgr.Popup},e.prototype.open=function(e){t.prototype.open.call(this),this.daShiData=e,this.addClickE(this.btnUp,this.onClick),this.addLsn(WCSys.ins().patchDashiUp,this.update),this.addLsn(RpSys.ins().patchRp,this.updateRp),this.update(),this.updateRp()},e.prototype.updateRp=function(t){void 0===t&&(t=null),(!t||t.check(this))&&(this.btnUp.redPoint.visible=RpSys.ins().getData(RoleWin,RolePanel,MoJieWin,WCPanel,WCLevelPanel,e))},e.prototype.update=function(){var t=this.daShiData;this.totalPower.text=t.genPower().toFixed(),this.imgTitle.source="msbd_zycs_ms"+t.type,this.bitLevel.text="."+t.level+"r";var e=Cfg.getConfig(WCDashiConfig,this.daShiData.type,Math.max(t.level-1,0)),i=t.noActRank()?addColor(Lang.xh_str4,15129784):Lang.xh_str4+"  "+this.daShiData.getDec(e.neednumber)+e.needlv+addColor(Lang.common_str40,5767068);if(this.lbCurLevel.textFlow=addColorTF(i),i=t.noActRank()?addColor(Lang.xh_str9,15129784):t.getAttrDec()+addColor(" +"+t.getConfig().per/100+"%",5767068),this.lbCurAttr.textFlow=addColorTF(i),!t.isMaxRank()){var n=t.getConfig(),a=Cfg.getNextConfig(WCDashiConfig,this.daShiData.type,t.level),o=WCSys.ins().getLevelCountByType(this.daShiData.type,n.needlv),s=addColor("("+o+"/"+n.neednumber+")",o<n.neednumber?15733780:5767068);this.lbNextLevel.textFlow=addColorTF(Lang.foot_str2+"  "+this.daShiData.getDec()+n.needlv+s),this.lbNextAttr.textFlow=addColorTF(t.getAttrDec()+addColor(" +"+a.per/100+"%",5767068))}var r=t.canRank();t.noActRank()?this.currentState=r?"canAct":"noAct":t.isMaxRank()?this.currentState="max":r?this.currentState="upRank":this.currentState="noRank"},e.prototype.onClick=function(t){switch(t.currentTarget){case this.btnUp:this.daShiData.canRank()&&WCSys.ins().sendDashiUp(this.daShiData.type)}},e}(BaseWinSingle);__reflect(WCDashiWin.prototype,"WCDashiWin"),window.WCDashiWin=WCDashiWin;var WCLevelTipsWin=function(t){function e(){var e=t.call(this)||this;return e.longPressBtnUp=new LongPress,e.ids=[],e.index=0,e.skinName="WCLevelTipsWinEUI",e.layer=LayerMgr.Popup,e.addBg(),e.btnGet.textFlow=addColorTF("获取途径",e.btnGet.textColor,!0),e}return __extends(e,t),e.prototype.open=function(e){t.prototype.open.call(this),this.data=e,this.addClickE(this.btnSend,this.onClickCommon),this.addClickE(this.btnGet,this.onClickCommon),this.addClickE(this.btnLeft,this.onClickCommon),this.addClickE(this.btnRight,this.onClickCommon),this.addLsn(WCSys.ins().patchLevelUp,this.updatePanel),this.longPressBtnUp.setDisplay(this.btnSend,this.autoUp,this),this.infoPanel()},e.prototype.close=function(){t.prototype.close.call(this)},e.prototype.infoPanel=function(){var t=Cfg.getConfig(WCQualityConfig,this.data.getConfig().type);this.ids=t.haveid,this.index=t.haveid.indexOf(this.data.id),this.updatePanel()},e.prototype.updatePanel=function(){if(this.item.data=this.data,this.power.text=""+this.data.getPower(),AttrData.getFm(null,null,"："),this.lbCurAttr.textFlow=addColorTF(AttrData.parse(this.data.getAttrData(),{fm:AttrData.getFm(null,null,"：")}).join("\n")),this.lbNextAttr.textFlow=addColorTF(AttrData.parse(this.data.getAttrData(this.data.level+1),{fm:AttrData.getFm(null,null,"：")}).join("\n")),this.btnSend.label=0==this.data.level?Lang.btn_jh:Lang.btn_sjie,this.data.isMax())this.currentState="max";else{this.currentState="normal";var t=GFunc.getItemCount(this.data.getConfig().needitem.id),e=this.data.getConfig().needitem.count,i=Cfg.getItemCfg(this.data.getConfig().needitem.id).getName()+"：";i+=addColor(t+"/"+e,e>t?15410212:5767068),this.lbConsumeCount.textFlow=addColorTF(i)}this.btnSend.redPoint.visible=RpSys.ins().getData(RoleWin,RolePanel,MoJieWin,WCPanel,WCLevelPanel,this.data.getConfig().type,this.data.id),this.showBtn()},e.prototype.showBtn=function(){this.btnLeft.visible=!1,this.btnRight.visible=!1},e.prototype.onClickCommon=function(t){switch(t.currentTarget){case this.btnSend:GFunc.checkConsumeEnough(this.data.getConfig().needitem)&&WCSys.ins().sendLevelUp(this.data.id);break;case this.btnGet:TipsSys.ins().setBuyGoodsWarn(this.data.getConfig().needitem.id);break;case this.btnLeft:this.index-=1,this.index<0&&(this.index=0),this.onQieHuan();break;case this.btnRight:this.index+=1,this.index>this.ids.length-1&&(this.index=this.ids.length-1),this.onQieHuan()}},e.prototype.autoUp=function(){GFunc.checkConsumeEnough(this.data.getConfig().needitem)?WCSys.ins().sendLevelUp(this.data.id):this.longPressBtnUp.stop()},e.prototype.onQieHuan=function(){this.data=WCSys.ins().getLevelDataById(this.ids[this.index]),this.updatePanel()},e}(BaseWinSingle);__reflect(WCLevelTipsWin.prototype,"WCLevelTipsWin"),window.WCLevelTipsWin=WCLevelTipsWin;var WCStageActTipsWin=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return __extends(e,t),e.prototype.initUI=function(){this.skinName="WCStageActTipsWinEUI",this.addBg(),this.mc=new MC,this.groupMC.addChild(this.mc)},e.prototype.open=function(e){t.prototype.open.call(this),this.addClickE(this,this.onTap),this.setPanel(e)},e.prototype.close=function(){t.prototype.close.call(this),this.mc.reset()},e.prototype.setPanel=function(t){var e=t.getShowJ();this.mc.playFile(getEffName("sh"+e+"_zycs"),-1),this.imgName.text=t.getStageName()},e.prototype.onTap=function(t){closeWin(this)},e}(BaseWinSingle);__reflect(WCStageActTipsWin.prototype,"WCStageActTipsWin"),window.WCStageActTipsWin=WCStageActTipsWin;var WCSys=function(t){function e(){var e=t.call(this)||this;return e.levelDatas=[],e.dashiDatas=[],e.stageData=new WCStageData,e.sysId=PackId.WC,e.reg(1,e.patchInfo),e.reg(2,e.patchLevelUp),e.reg(3,e.patchDashiUp),e.reg(4,e.patchStageUp),e}return __extends(e,t),e.ins=function(){return t.getIns.call(this,e)},e.prototype.patchInfo=function(t){for(var e=t.readShort(),i=0;e>i;i++){var n=this.getLevelDataById(i+1);n.level=t.readShort()}e=t.readByte();for(var a=0;e>a;a++){var o=this.getDashiDataByType(a+1);o.level=t.readShort()}this.stageData.level=t.readShort()},e.prototype.sendLevelUp=function(t){var e=this.getBytes(2);e.writeShort(t),this.send(e)},e.prototype.patchLevelUp=function(t){var e=this.getLevelDataById(t.readShort());e.level=t.readShort(),RpFun.showWCLevelRp(),RpFun.showWCDashiRp()},e.prototype.sendDashiUp=function(t){var e=this.getBytes(3);e.writeByte(t),this.send(e)},e.prototype.patchDashiUp=function(t){var e=this.getDashiDataByType(t.readByte());e.level=t.readShort(),RpFun.showWCDashiRp()},e.prototype.sendStageUp=function(){this.sendBase(4)},e.prototype.patchStageUp=function(t){var e=this.stageData.getShowJ();this.stageData.level=t.readShort(),e!=this.stageData.getShowJ()&&openWin(WCStageActTipsWin,this.stageData),RpFun.showWCStageRp()},e.prototype.getLevelDataById=function(t){return this.levelDatas[t]||(this.levelDatas[t]=new WCLevelData(t))},e.prototype.getLevelDatasByType=function(t){for(var e=[],i=Cfg.getConfig(WCQualityConfig,t).haveid,n=0,a=i;n<a.length;n++){var o=a[n];e.push(this.getLevelDataById(o))}return e},e.prototype.getPowerByLevelDatas=function(t){for(var e=0,i=0,n=t;i<n.length;i++){var a=n[i];e+=a.getPower()}return e},e.prototype.getLevelDatasAll=function(t){var e=[];for(var i in t){var n=t[i];e=AttrData.mergeAttr(n.getAttrData(),e)}return e},e.prototype.getDashiDataByType=function(t){return this.dashiDatas[t]||(this.dashiDatas[t]=new WCDashiData(t))},e.prototype.getMinLevelByType=function(t){for(var e=Number.MAX_VALUE,i=Cfg.getConfig(WCQualityConfig,t).haveid,n=0,a=i;n<a.length;n++){var o=a[n];e=Math.min(e,this.getLevelDataById(o).level)}return e},e.prototype.getLevelCountByType=function(t,e){for(var i=0,n=Cfg.getConfig(WCQualityConfig,t).haveid,a=0,o=n;a<o.length;a++){var s=o[a];this.getLevelDataById(s).level>=e&&(i+=1)}return i},e}(BaseSys);__reflect(WCSys.prototype,"WCSys");var System;!function(t){t.wCSys=WCSys.ins.bind(WCSys)}(System||(System={})),window.WCSys=WCSys;var WCDashiData=function(){function t(t){this.type=1,this.level=0,this.type=t}return t.prototype.getConfig=function(){return this.dashiConfig&&this.dashiConfig.level==this.level||(this.dashiConfig=Cfg.getConfig(WCDashiConfig,this.type,this.level)),this.dashiConfig},t.prototype.getBaseConfig=function(){return this.baseConfig||(this.baseConfig=Cfg.getConfig(WCQualityConfig,this.type))},t.prototype.noActRank=function(){return 0==this.level},t.prototype.isMaxRank=function(){return this.level>=Cfg.getMaxConfig(WCDashiConfig,this.type).level},t.prototype.canRank=function(){return this.isMaxRank()?!1:WCSys.ins().getLevelCountByType(this.type,this.getConfig().needlv)>=this.getConfig().neednumber},t.prototype.getDaShiPlusAttr=function(){var t=WCSys.ins().getLevelDatasByType(this.type),e=WCSys.ins().getLevelDatasAll(t),i=[],n=this.getConfig().per;for(var a in e){var o=new AttrData;o.type=e[a].type,o.value=e[a].value*n/1e4,i.push(o)}return i},t.prototype.genPower=function(){return GFunc.getPower(this.getDaShiPlusAttr())>>0},t.prototype.getDec=function(t){void 0===t&&(t=this.getConfig().neednumber);var e=t+"张"+this.getBaseConfig().name+Lang.wc_str5+"Lv.";return e},t.prototype.getAttrDec=function(){var t=""+this.getBaseConfig().name+Lang.wc_str2;return t},t}();__reflect(WCDashiData.prototype,"WCDashiData");var WCLevelData=function(){function t(t){this.id=1,this.level=0,this.id=t}return t.prototype.getConfig=function(){return this.config||(this.config=Cfg.getConfig(WCLevelConfig,this.id))},t.prototype.getAttrData=function(t){return void 0===t&&(t=this.level),t>this.getMaxLv()&&(t=this.getMaxLv()),AttrData.attrMultiple(this.getConfig().addattr,t)},t.prototype.getPower=function(){return GFunc.getPower(this.getAttrData())>>0},Object.defineProperty(t.prototype,"canAct",{get:function(){return 0==this.level?GFunc.getItemCount(this.getConfig().needitem.id)>=this.getConfig().needitem.count:!1},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"canUp",{get:function(){return this.isMax()?!1:GFunc.getItemCount(this.getConfig().needitem.id)>=this.getConfig().needitem.count},enumerable:!0,configurable:!0}),t.prototype.isMax=function(){return this.level>=this.getMaxLv()},t.prototype.getMaxLv=function(){return this.getConfig().maxLevel},t}();__reflect(WCLevelData.prototype,"WCLevelData");var WCStageData=function(){function t(){this.level=0}return t.prototype.getCurConfig=function(){return this.curConfig&&this.curConfig.level==this.level||(this.curConfig=Cfg.getConfig(WCStageConfig,this.level)),this.curConfig},t.prototype.getNextConfig=function(){return(!this.nextConfig||this.nextConfig.level<=this.level)&&(this.nextConfig=Cfg.getNextConfig(WCStageConfig,this.level)),this.nextConfig},t.prototype.getShowJ=function(){return Math.floor(this.level/Cfg.getConfig(WCCommonConfig).starPerLevel)+1},t.prototype.getShowX=function(){return this.level%Cfg.getConfig(WCCommonConfig).starPerLevel},t.prototype.getPower=function(){return GFunc.getPower(this.getCurConfig().addattr)>>0},t.prototype.canUp=function(){return this.isMax()?!1:GFunc.getItemCount(this.getCurConfig().needitem.id)>=this.getCurConfig().needitem.count},t.prototype.isMax=function(){return this.level>=Cfg.getMaxConfig(WCStageConfig).level},t.prototype.getStageName=function(){var t=Cfg.getConfig(WCCommonConfig).stageNames;return t[this.getShowJ()-1]},t}();__reflect(WCStageData.prototype,"WCStageData");var WCLevelItem=function(t){function e(){var e=t.call(this)||this;return e.strokeColors=[0,0,43263,16122111,8465920,16711680],e.skinName="WCLevelItemEUI",e.groupMC.mask=e.imgMask,e}return __extends(e,t),e.prototype.dataChanged=function(){if(this.data instanceof WCLevelData){this.entity||(this.entity=new MC,this.groupMC.addChild(this.entity));var t=this.data.getConfig(),e=Cfg.getConfig(MonsterModelConfig,t.apperence);this.entity.scaleX=this.entity.scaleY=t.scale/100;var i=ResMgr.getEntityBodyRes(EntityType.MONSTER_SERVER,e.appearance,4,EntityAction.STAND);this.entity.playFile(i,-1),this.groupMC.y=191-this.data.getConfig().modelHeight,this.imgBg.source="msbd_zycs_wk"+this.data.getConfig().quality,this.lbName.text=""+this.data.getConfig().name,this.lbName.strokeColor=this.strokeColors[this.data.getConfig().quality],this.lbLevel.text="Lv."+this.data.level,this.lbLevel.strokeColor=this.strokeColors[this.data.getConfig().quality],this.groupWjh.visible=0==this.data.level,this.updateRadPoint()}},e.prototype.updateRadPoint=function(){this.data instanceof WCLevelData&&(this.redPoint.visible=RpSys.ins().getData(RoleWin,RolePanel,MoJieWin,WCPanel,WCLevelPanel,this.data.getConfig().type,this.data.id))},e}(BaseItemRender);__reflect(WCLevelItem.prototype,"WCLevelItem"),window.WCLevelItem=WCLevelItem;var WCLevelTabItem=function(t){function e(){var e=t.call(this)||this;return e.skinName="WCLevelTabItemEUI",e}return __extends(e,t),e.prototype.dataChanged=function(){if(this.data&&this.data.type){var t=this.data;this.imgBg.source="msbd_zycs_dt"+t.type,this.imgName.source="msbd_zycs_id"+t.type,this.updateRadPoint()}},e.prototype.updateRadPoint=function(){var t=this.data;this.redPoint.visible=RpSys.ins().getData(RoleWin,RolePanel,MoJieWin,WCPanel,WCLevelPanel,t.type)},e}(BaseItemRender);__reflect(WCLevelTabItem.prototype,"WCLevelTabItem"),window.WCLevelTabItem=WCLevelTabItem;var SmeltConfig=function(){function t(){}return t}();__reflect(SmeltConfig.prototype,"SmeltConfig");var SMFBCommonConfig=function(){function t(){}return t}();__reflect(SMFBCommonConfig.prototype,"SMFBCommonConfig");var StarsoulCommonConfig=function(){function t(){}return t}();__reflect(StarsoulCommonConfig.prototype,"StarsoulCommonConfig");var GuaJiHelpWin=function(t){function e(){return t.call(this)||this}return __extends(e,t),e.prototype.setSkinName=function(){this.skinName="GuaJiHelpWinEUI"},e.prototype.initUI=function(){t.prototype.initUI.call(this),this.layer=LayerMgr.Popup,this.addBg(),this.updatePanel()},e.prototype.open=function(){t.prototype.open.call(this),this.addClickE(this.lbHelpAll,this.onClick),this.addClickE(this.lbHelpGuild,this.onClick)},e.prototype.updatePanel=function(){this.lbHelpAll.textFlow=addColorTF(StrUtil.addUnderLine(Lang.gj_str5),1176860),this.lbHelpGuild.textFlow=addColorTF(StrUtil.addUnderLine(Lang.gj_str6),1176860);var t=FbSys.ins().guajiData.getHelpCount(),e=Lang.gj_str7+addColor(t+"/"+Cfg.getGuajiConstConfig().dailyreqcount,t?1176860:16711680);this.lbHelp.textFlow=addColorTF(e),t=FbSys.ins().guajiData.getAssistCount(),e=Lang.gj_str8+addColor(t+"/"+Cfg.getGuajiConstConfig().dailyhelpcount,t?1176860:16711680),this.lbAssist.textFlow=addColorTF(e)},e.prototype.onClick=function(t){switch(t.currentTarget){case this.lbHelpAll:FbSys.ins().guajiData.getHelpCount()?(FbSys.ins().sendGuaJiHelp(2),showtipsSuc(Lang.gj_str28)):showtipsFail(Lang.gj_str26),FbSys.ins().guajiData.updateHelpCD(),closeWin(e);break;case this.lbHelpGuild:if(!GuildSys.ins().isAddGuild())return void showtipsFail(Lang.guild_str117);FbSys.ins().guajiData.getHelpCount()?(FbSys.ins().sendGuaJiHelp(1),showtipsSuc(Lang.gj_str28)):showtipsFail(Lang.gj_str26),FbSys.ins().guajiData.updateHelpCD(),closeWin(e)}},e}(BaseWinSingle);__reflect(GuaJiHelpWin.prototype,"GuaJiHelpWin"),window.GuaJiHelpWin=GuaJiHelpWin;var StarsoulLevelConfig=function(){function t(){}return t}();__reflect(StarsoulLevelConfig.prototype,"StarsoulLevelConfig");var GuaJiRankWin=function(t){function e(){return t.call(this)||this}return __extends(e,t),e.prototype.setSkinName=function(){this.skinName="GuaJiRankWinEUI"},e.prototype.initUI=function(){t.prototype.initUI.call(this),this.layer=LayerMgr.Popup,this.addBg(),this.list.itemRenderer=GuaJiRankItem,this.list.dataProvider=this.listData=new eui.ArrayCollection},e.prototype.open=function(){t.prototype.open.call(this),this.addLsn(RankSys.ins().patchRankData,this.updatePanel),this.updatePanel()},e.prototype.updatePanel=function(){var t=RankSys.ins().getRankData(RankType.GuaJi);this.listData.source=t.getFullDatalist(),this.lbRank.text=""+(t.myRank>0?t.myRank:Lang.common_str17),this.lbGuan.text=FbSys.ins().guajiData.guanId+Lang.common_ceng},e}(BaseWinSingle);__reflect(GuaJiRankWin.prototype,"GuaJiRankWin"),window.GuaJiRankWin=GuaJiRankWin;var StarsoulStageConfig=function(){function t(){}return t}();__reflect(StarsoulStageConfig.prototype,"StarsoulStageConfig");var VipGuaJiBuyWin=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return __extends(e,t),e.prototype.initUI=function(){t.prototype.initUI.call(this),this.btnOk.label=Lang.ml_str4,this.groupBuy.visible=!0},e.prototype.updatePanel=function(e){t.prototype.updatePanel.call(this,e),this.dataModel=FbSys.ins().guajiData,this.price.setPrice(this.dataModel.getKsgjBuyConsume()),this.lbCount.text=Lang.fb_str125+this.dataModel.ksgjBuyCount+"/"+this.dataModel.getKsgjSdCountAll()},e.prototype.onTap=function(t){GFunc.isCurrency(CurType.yb,this.dataModel.getKsgjBuyConsume())?(FbSys.ins().sendGuaJiKsgjBuy(),closeWin(e)):showtipsFail(Lang.damon_str35)},e}(SVipTipsWin);__reflect(VipGuaJiBuyWin.prototype,"VipGuaJiBuyWin"),window.VipGuaJiBuyWin=VipGuaJiBuyWin;var WorldMapExpEfficiencyWin=function(t){function e(){var e=t.call(this)||this;return e.winType=WinType.NeverCloseWin,e.layer=LayerMgr.Main_Down,e.skinName="WorldMapExpEfficiencyWinEUI",e.touchEnabled=!1,e.touchChildren=!1,e}return __extends(e,t),e.prototype.open=function(e){t.prototype.open.call(this),this.closeFun=e,this.updatePanel()},e.prototype.close=function(){t.prototype.close.call(this)},e.prototype.updatePanel=function(){var t=Cfg.getConfig(GuajiFubenConfig,FbSys.ins().guajiData.challengeGuanId),e=Cfg.getConfig(GuajiFubenConfig,FbSys.ins().guajiData.challengeGuanId-1);this.lastTxt.text=GFunc.overLength(e.exp,e.exp<1e8?1:2)+"/"+Lang.common_xs,this.currTxt.text=GFunc.overLength(t.exp,t.exp<1e8?1:2)+"/"+Lang.common_xs,this.lastTxt0.text=GFunc.overLength(e.gold,e.gold<1e8?1:2)+"/"+Lang.common_xs,this.currTxt0.text=GFunc.overLength(t.gold,t.gold<1e8?1:2)+"/"+Lang.common_xs,this.scaleX=1,this.scaleY=1,this.alpha=0;var i=egret.Tween.get(this);i.wait(200).to({alpha:1},500).wait(2e3).call(this.flyEff,this)},e.prototype.flyEff=function(){closeWin(this),this.closeFun()},e}(BaseWinSingle);__reflect(WorldMapExpEfficiencyWin.prototype,"WorldMapExpEfficiencyWin"),window.WorldMapExpEfficiencyWin=WorldMapExpEfficiencyWin;var GuaJiMaxData=function(){function t(t){this.state=0,this.config=t}return Object.defineProperty(t.prototype,"id",{get:function(){return this.config.group},enumerable:!0,configurable:!0}),t.prototype.getDes=function(){var t="";return 0==this.state?t=addColor(this.config.custom+Lang.gj_str2,15437326):1==this.state?t=addColor(Lang.common_str58,15437326):2==this.state&&(t=addColor(Lang.gj_str3,15794098)),t},t}();__reflect(GuaJiMaxData.prototype,"GuaJiMaxData");var WorldMapTabData=function(){function t(){this.mapGroup=1,this.config=null,this.state=0}return t}();__reflect(WorldMapTabData.prototype,"WorldMapTabData");var GuaJiBtnPanel=function(t){function e(){var e=t.call(this)||this;return e.skinName="GuaJiBtnPanelEUI",e}return __extends(e,t),e.prototype.addDisplay=function(){this.mc=this.mc||new MC,this.mc.playFile(getEffName("tzbs"),-1),this.groupMC.addChild(this.mc),this.addClickE(this.btnSend,this.onClick),this.addClickE(this.btnAuto,this.onClick),this.addLsn(FbSys.ins().patchGuaJiInfo,this.updateBoCount),this.addLsn(FbSys.ins().patchGuaJiChallenge,this.updateGuan),this.addLsn(FbSys.ins().patchGuaJiHelp,this.updateGuan),this.addLsn(FbSys.ins().patchGuaJiBoCount,this.updateBoCount),this.addLsn(FbSys.ins().patchGuaJiAutoChallenge,this.updateBtnAuto),this.addLsn(BagSys.ins().patchBagVolChange,this.updateBagMax),this.addLsn(RpSys.ins().patchRp,this.updateRp),this.infoPanel()},e.prototype.updateRp=function(t){(!t||t.check(GuanJiWin))&&(this.redPoint.visible=RpSys.ins().getData(GuanJiWin,GuaJiPanel))},e.prototype.infoPanel=function(){this.dataModel=FbSys.ins().guajiData,this.updateGuan(),this.updateBoCount(),this.updateBtnAuto(),this.updateBagMax(),this.updateRp()},e.prototype.updateGuan=function(){this.lbAssist.text=Lang.gj_str10.replace("$count$",""+this.dataModel.challengeGuanId),this.btnAuto.visible=this.dataModel.guanId>=Cfg.getGuajiConstConfig().autochallenge},e.prototype.updateBoCount=function(){this.barBo.maximum=this.dataModel.getConfig().waves,this.barBo.value=this.dataModel.boCount,this.groupMC.visible=this.dataModel.boCount>=this.dataModel.getConfig().waves},e.prototype.updateBtnAuto=function(){var t=this.dataModel.isAutoChallenge;this.btnAuto.icon=t?"mianui_zycs_qxzd":"mianui_zycs_zdtz"},e.prototype.updateBagMax=function(){var t=0==BagSys.ins().getSurplusCount();t&&FbSys.ins().sendGuaJiAutoChallenge(!1)},e.prototype.onClick=function(t){switch(t.currentTarget){case this.btnSend:if(this.dataModel.isTongGuan())return void showtipsFail(Lang.gj_str29);openWin(GuanJiWin);break;case this.btnAuto:if(this.dataModel.isTongGuan())return void showtipsFail(Lang.gj_str29);if(this.dataModel.guanId<Cfg.getGuajiConstConfig().autochallenge)return void showtipsFail(Lang.gj_str19.replace("$count$",""+Cfg.getGuajiConstConfig().autochallenge));var e=this.dataModel.isAutoChallenge;FbSys.ins().sendGuaJiAutoChallenge(!e)}},e}(BasePanel);__reflect(GuaJiBtnPanel.prototype,"GuaJiBtnPanel"),window.GuaJiBtnPanel=GuaJiBtnPanel;var StarStoreConfig=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return __extends(e,t),e}(BossStoreConfig);__reflect(StarStoreConfig.prototype,"StarStoreConfig");var GuaJiPanelItem=function(t){function e(){var e=t.call(this)||this;return e.skinName="GuaJiPanelItemEUI",e}return __extends(e,t),e.prototype.dataChanged=function(){if(this.data instanceof RankDataGuaJi){var t=this.data.rank+"."+this.data.playerName+" "+addColor(this.data.guan+Lang.common_ceng,16777215);this.lbName.textFlow=addColorTF(t)}},e}(BaseItemRender);__reflect(GuaJiPanelItem.prototype,"GuaJiPanelItem"),window.GuaJiPanelItem=GuaJiPanelItem;var GuaJiRankItem=function(t){function e(){var e=t.call(this)||this;return e.touchEnabled=!0,e.skinName="GuaJiRankItemEUI",e}return __extends(e,t),e.prototype.dataChanged=function(){var t=this.data;t.rank<=3?this.currentState="max":this.currentState="min",this.validateNow(),t.rank<=3?(this.imgBg.source="cg_zycs_di"+t.rank,this.imgRank.source="jjc_zycs_no"+t.rank,this.imgRank.visible=!0,this.labelRank.visible=!1):(this.imgRank.visible=!1,this.labelRank.visible=!0,this.labelRank.text=t.rank.toString()),this.labelName.text=t.playerName,this.lbGuan.text=""+t.guan,this.imgVip.visible=t.vipLv>0||t.svipLv>0,this.imgVip.source=t.svipLv>0?"phb_zycs_V":"phb_zycs_V1"},e}(BaseItemRender);__reflect(GuaJiRankItem.prototype,"GuaJiRankItem"),window.GuaJiRankItem=GuaJiRankItem;var StoneAddConfig=function(){function t(){}return t}();__reflect(StoneAddConfig.prototype,"StoneAddConfig");var XianluTaskData=function(){function t(t){this.taskId=t.readShort();var e=t.readByte();0==e?this.taskState=1:1==e?this.taskState=2:2==e&&(this.taskState=0),this.selfValue=t.readInt(),this.herValue=t.readInt()}return t.prototype.getMateDailyQuestConfig=function(){var t=Cfg.getConfig(MateDailyQuestConfig,this.taskId);return t},t.prototype.getMateQuestConfig=function(){var t=Cfg.getConfig(MateQuestConfig,this.taskId);return t},t}();__reflect(XianluTaskData.prototype,"XianluTaskData");var XianYuanData=function(){function t(t){this.sex=0,this.headFrameId=1,this.svipLv=t.readByte(),this.vipLv=t.readByte(),this.actorId=t.readInt(),this.sex=t.readByte(),this.headFrameId=t.readInt(),this.actorName=t.readString(),this.giftId=t.readByte();var e=t.readByte();this.labelIds=[];for(var i=0;e>i;i++)this.labelIds.push(t.readShort());this.str=t.readString()}return t.prototype.getGift=function(){var t=Cfg.getConfig(MateGiftConfig,this.giftId);return t.xianyu},t}();__reflect(XianYuanData.prototype,"XianYuanData");var XianYuanHongBaoData=function(){function t(){}return t.prototype.parse=function(t){this.type=t.readByte();var e=t.readByte();this.rewards=[];for(var i=0;e>i;i++){var n=new ItemDataReward;n.parser(t),this.rewards.push(n)}2==this.type?(this.bondName1=t.readString(),this.bondName2=t.readString(),this.bondSex1=t.readByte(),this.bondSex2=t.readByte()):this.redPacketName=t.readString()},t}();__reflect(XianYuanHongBaoData.prototype,"XianYuanHongBaoData");var XianluFenliWin=function(t){function e(){var e=t.call(this)||this;return e.skinName="XianluFenliWinEUI",e.layer=LayerMgr.Popup,e.addBg(),e}return __extends(e,t),e.prototype.open=function(){t.prototype.open.call(this),this.addClickE(this.btn_sure,this.onClick),this._currCg=Cfg.getConfig(MateCommonConfig),this.updatePanel()},e.prototype.updatePanel=function(){var t=XianLuSys.ins().jieyuanType,e=DateUtil.formatTime(XianLuSys.ins().jieyuanTime,"dd",!1),i=""==e?"1":parseInt(e+1).toString(),n=DateUtil.formatTime(1e3*this._currCg.dismissTime,"dd",!1),a=this._currCg.dismissCost[0].count;
if(this.lb_tips.visible=this.group.visible=!1,1==t)this.lb_tips.visible=!0;else if(2==t){this.group.visible=!0;var o="结缘时长超过$1$天   "+addColor("($2$/$3$)",1071616),s=o.replace("$1$",n.toString()).replace("$2$",i.toString()).replace("$3$",n.toString());this.lb_cond.textFlow=addColorTF(s),o="支付$1$仙玉",this.lb_money.textFlow=addColorTF(o.replace("$1$",a.toString()))}},e.prototype.onClick=function(){var t,e=this,i=XianLuSys.ins().jieyuanTime,n="",a=this._currCg.dismissCost[0].count,o=XianLuSys.ins().xianLuName;return 1==XianLuSys.ins().jieyuanType?(XianLuSys.ins().sendDissolutionJieyuan(),closeWin(this),void showtipsFail("您与"+o+"分离成功")):void(i/1e3>=this._currCg.dismissTime?(n="是否确认与$name$分离",t=new PopupData(n.replace("$name$",o)),t.setFunction(this,function(){XianLuSys.ins().sendDissolutionJieyuan(),showtipsFail("您与"+o+"分离成功"),closeWin(e)}),openWin(CommonTipsWin,t)):(n="是否花费$money$仙玉与（$name$）分离？",t=new PopupData(n.replace("$money$",a.toString()).replace("$name$",o)),t.setFunction(this,function(){a>Actor.ins().getCurrency(CurType.yb)?showtipsFail(Lang.damon_str35):(XianLuSys.ins().sendDissolutionJieyuan(),closeWin(e),showtipsFail("您与"+o+"分离成功"))}),openWin(CommonTipsWin,t)))},e}(BaseWinSingle);__reflect(XianluFenliWin.prototype,"XianluFenliWin"),window.XianluFenliWin=XianluFenliWin;var XianluHBWin=function(t){function e(){var e=t.call(this)||this;return e.skinName="XianluHBWinEUI",e.layer=LayerMgr.Popup,e.addBg(),e.list.itemRenderer=ItemBaseReward,e.list.dataProvider=e.listData=new eui.ArrayCollection,e}return __extends(e,t),e.prototype.open=function(){t.prototype.open.call(this),this.addClickE(this.btn_sure,this.onClick),this.updatePanel()},e.prototype.updatePanel=function(){var t=XianLuSys.ins().xyHongBaodata;this.listData.source=t.rewards,this.headicon1.source=ResMgr.getHeadIcon(t.bondSex1),this.headicon2.source=ResMgr.getHeadIcon(t.bondSex2);var e=addColor(t.bondName1,16777215)+"和"+addColor(t.bondName2,16777215)+"\n互结仙缘激活义戒和信物，战力共同暴涨";this.lb_name.textFlow=addColorTF(e)},e.prototype.onClick=function(){closeWin(this)},e}(BaseWinSingle);__reflect(XianluHBWin.prototype,"XianluHBWin"),window.XianluHBWin=XianluHBWin;var XianluJieYuanWin=function(t){function e(){var e=t.call(this)||this;return e.skinName="XianluJieYuanWinEUI",e.layer=LayerMgr.Popup,e.addBg(),e}return __extends(e,t),e.prototype.open=function(e){t.prototype.open.call(this),this.xyData=e,this.addClickE(this.btnSearch,this.onRequestJY),this.addClickE(this.item0,this.onTapRing),this.addLsn(XianLuRingWin.selectRing,this.updateRing),this.updateView()},e.prototype.onTapRing=function(){var t=this.getRingItem();if(!t.length){var e=GFunc.creatRewardDataById(830102,1);return void GFunc.checkConsumeEnough(e)}openWin(XianLuRingWin,t.reverse())},e.prototype.onRequestJY=function(){var t=this.item0.getData();if(!t)return void showtipsFail("戒指不足，无法结缘");var e=this.item1.data;GFunc.checkConsumeEnough1(e)&&XianLuSys.ins().sendRequestJieyuan(this.xyData.actorId,t.id)},e.prototype.updateRing=function(t){this.item0.setData(t)},e.prototype.updateView=function(){this.imgHead0.source=ResMgr.getHeadIcon(Actor.ins().sex),this.imgHead1.source=ResMgr.getHeadIcon(this.xyData.sex),this.lbName0.text=Actor.ins().myName,this.lbName1.text=this.xyData.actorName;var t=GFunc.creatRewardDataById(CurType.yb,this.xyData.getGift());this.item1.data=t;var e=this.getRingItem();this.item0.setData(e.length?e[e.length-1]:null)},e.prototype.getRingItem=function(){for(var t=Cfg.getConfigs(MateRingConfig),e=[],i=0,n=t;i<n.length;i++){var a=n[i],o=BagSys.ins().getItemById(a.id);o&&e.push(o)}return e},e}(BaseWinSingle);__reflect(XianluJieYuanWin.prototype,"XianluJieYuanWin"),window.XianluJieYuanWin=XianluJieYuanWin;var StoneConfig=function(){function t(){}return t.type="type",t}();__reflect(StoneConfig.prototype,"StoneConfig");var XianluQmRewardWin=function(t){function e(){var e=t.call(this)||this;return e.skinName="XianluQmRewardWinEUI",e.layer=LayerMgr.Popup,e.addBg(),e.itemList.itemRenderer=ItemBaseRewardName,e.itemList.dataProvider=e.listData=new eui.ArrayCollection,e}return __extends(e,t),e.prototype.open=function(){t.prototype.open.call(this),this.addClickE(this.getRewardBtn,this.onClick),this.addLsn(XianLuSys.ins().updateXianyuanInfo,this.updatePanel),this.updatePanel()},e.prototype.updatePanel=function(){var t=XianLuSys.ins().getCurrCg(),e=XianLuSys.ins().qmLv;if(this.lb_tips.visible=this.getRewardBtn.visible=!1,t)this.listData.source=t.award,this.lb_title.text="亲密度Lv."+t.lv+"奖励",t.lv>e?(this.lb_tips.visible=!0,this.lb_tips.text="亲密度达到"+t.lv+"级可领取"):this.getRewardBtn.visible=!0;else{var i=XianLuSys.ins().rewardLv,n=Cfg.getConfig(MateLevelConfig,i);this.listData.source=n.award,this.lb_tips.visible=!0,this.lb_title.text="亲密度奖励",this.lb_tips.text="奖励已领完"}},e.prototype.onClick=function(){var t=XianLuSys.ins().getCurrCg(),e=XianLuSys.ins().qmLv;t.lv>e?closeWin(this):XianLuSys.ins().sendGetReward()},e}(BaseWinSingle);__reflect(XianluQmRewardWin.prototype,"XianluQmRewardWin"),window.XianluQmRewardWin=XianluQmRewardWin;var XianluReleaseWin=function(t){function e(){return t.call(this)||this}return __extends(e,t),e.prototype.initUI=function(){t.prototype.initUI.call(this),this.skinName="XianluReleaseWinEUI",this.addBg(),this.labelList=[this.item0,this.item1,this.item2,this.item3,this.item4,this.item5,this.item6,this.item7],this.pricelList=[this.pricel0,this.pricel1,this.pricel2],this.checkList=[this.check0,this.check1,this.check2]},e.prototype.addDisplay=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];this.addClickE(this,this.onClick),this.updateView(),this.updateLabelList()},e.prototype.updateLabelList=function(){for(var t=Cfg.getConfig(MateCommonConfig).labelList,e=this.labelList.length,i=0;e>i;i++)t[i]&&(this.labelList[i].data=t[i])},e.prototype.updateView=function(){for(var t=Cfg.getConfigs(MateGiftConfig),e=0;e<t.length;e++){var i=t[e];this.pricelList[e].setType(CurType.yb),this.pricelList[e].setPrice(i.xianyu)}this.checkList[0].selected=!0,this.strConf=MathUtil.randomArray(Cfg.getConfigs(MateReqStrConfig)),this.inputText.text=this.strConf.msg},e.prototype.onClick=function(t){var e=Cfg.getConfig(MateCommonConfig),i=XianLuSys.ins(),n=t.target;if(~this.labelList.indexOf(n))if(n.getSelect())n.setSelect(!1);else{for(var a=0,o=0;o<this.labelList.length;o++)this.labelList[o].getSelect()&&a++;a>=e.labellimit[1]?showtipsFail("最多可选中"+e.labellimit[1]+"个标签"):n.setSelect()}else{if(~this.checkList.indexOf(n)){for(var o=0;o<this.checkList.length;o++)this.checkList[o].selected=!1;n.selected=!0}switch(n){case this.btnOk:if(i.isJieYuan())return void showtipsFail("您已结缘，不可发布");for(var s=0,o=0;o<this.checkList.length;o++)if(this.checkList[o].selected){s=o+1;break}for(var r=[],o=0;o<this.labelList.length;o++)this.labelList[o].getSelect()&&r.push(o+1);var u=XianLuSys.ins().checkIsEdit(this.inputText.text);i.sendReleaseXianyuan(s,r,u,this.inputText.text),closeWin(this);break;case this.btnOk0:for(var o=0;o<this.labelList.length;o++)this.labelList[o].setSelect(!1);break;case this.inputText:var h=e.needSvip;h>Actor.ins().sVipLv?(urlParam.isShenhe||showtipsFail("SVIP"+h+"可编辑信息"),this.inputText.type=egret.TextFieldType.DYNAMIC):(this.inputText.maxChars=120,this.inputText.type=egret.TextFieldType.INPUT,this.inputText.setFocus())}}},e}(BaseWinSingle);__reflect(XianluReleaseWin.prototype,"XianluReleaseWin"),window.XianluReleaseWin=XianluReleaseWin;var XianluRingItem=function(t){function e(){var e=t.call(this)||this;return e.skinName="XianluRingItemEUI",e}return __extends(e,t),e.prototype.setData=function(t){this.currentState=t?"equip":"notEquip",this.item.data=t},e.prototype.getData=function(){return this.item.data},e}(BaseItemRender);__reflect(XianluRingItem.prototype,"XianluRingItem"),window.XianluRingItem=XianluRingItem;var XianluRingTipsItem=function(t){function e(){var e=t.call(this)||this;return e.skinName="XianluRingTipsItemEUI",e}return __extends(e,t),e.prototype.dataChanged=function(){var t=this.data;t.level>0?(this.lb_skillTips.textFlow=addColorTF(t.getConfig().name+addColor("Lv."+t.level+"："+t.getConfig().skinname,5767068)),this.filters=null):(this.lb_skillTips.text=t.getConfig().name+"Lv.0",this.filters=DisUtil.grayFilter()),this.skillIcon.source=ResMgr.getSkillPassivityItemName(this.data.id,this.data.level>0)},e}(BaseItemRender);__reflect(XianluRingTipsItem.prototype,"XianluRingTipsItem"),window.XianluRingTipsItem=XianluRingTipsItem;var XianluRingTipsWin=function(t){function e(){var e=t.call(this)||this;return e.skinName="XianluRingTipsWinEUI",e.layer=LayerMgr.Popup,e.addBg(),e.itemList.itemRenderer=XianluRingTipsItem,e.itemList.dataProvider=e.listData=new eui.ArrayCollection,e}return __extends(e,t),e.prototype.open=function(e){t.prototype.open.call(this),this.updatPanel(e)},e.prototype.updatPanel=function(t){var e,i;t?(this.currentState="jieyuan",e=Actor.ins().seePlayModel.xianluRingId,i=Actor.ins().seePlayModel.getSkills(),this.lb_name1.text=Actor.ins().seePlayModel.myName,this.lb_name2.text=Actor.ins().seePlayModel.xianLuName):(XianLuSys.ins().isJieYuan()?this.currentState="jieyuan":this.currentState="weijieyuan",e=XianLuSys.ins().ringId,i=XianLuSys.ins().getSkills(),this.lb_name1.text=Actor.ins().myName,this.lb_name2.text=XianLuSys.ins().xianLuName);var n=GFunc.creatRewardDataById(e);this.item.data=n,this.lb_name.text=n.config.getName();for(var a=n.config.pattr,o=AttrData.getFm(14216959,14216959,"","："),s=-28,r="",u=0;u<a.length;u++){var h=a[u].value;h>0&&(r+=AttrData.parse([a[u]],{fm:o}).join("\n")+"\n",s+=28)}this.lb_attrs.textFlow=addColorTF(r,14216959),SortUtil.sortOn(i,["isOpen","id"],[SortType.down,SortType.up]),this.listData.source=i;for(var l=GFunc.getPower(a),p=0,c=i;p<c.length;p++){var d=c[p];l+=d.getConfig().power}this.bmpLabelPower.text=l.toString()},e}(BaseWinSingle);__reflect(XianluRingTipsWin.prototype,"XianluRingTipsWin"),window.XianluRingTipsWin=XianluRingTipsWin;var XianLuRingWin=function(t){function e(){var e=t.call(this)||this;return e.skinName="XianLuRingWinEUI",e.layer=LayerMgr.Popup,e.addBg(),e.itemList.itemRenderer=XianluRingWinItem,e.itemList.dataProvider=e.listArr=new eui.ArrayCollection,e}return __extends(e,t),e.prototype.open=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];this.addItemTapE(this.itemList,this.onListTap),this.addClickE(this.closeBtn1,this.onClose),this.listArr.source=t,this.updateView()},e.selectRing=function(t){return t},e.prototype.onClose=function(){closeWin(this)},e.prototype.onListTap=function(){e.selectRing(this.itemList.selectedItem),this.onClose()},e.prototype.updateView=function(){for(var t=Cfg.getConfigs(MateRingConfig),e=[],i=0,n=t;i<n.length;i++){var a=n[i],o=BagSys.ins().getItemById(a.id);o&&e.push(o)}this.listArr.source=e},__decorate([post()],e,"selectRing",null),e}(BaseWinSingle);__reflect(XianLuRingWin.prototype,"XianLuRingWin"),window.XianLuRingWin=XianLuRingWin;var XianluRingWinItem=function(t){function e(){return t.call(this)||this}return __extends(e,t),e.prototype.dataChanged=function(){var t=this.data;this.item.data=t;var e=t.cfg;this.lbName.text=e.getName(),this.lbName.textColor=GConst.PZColor[e.quality]},e}(BaseItemRender);__reflect(XianluRingWinItem.prototype,"XianluRingWinItem"),window.XianluRingWinItem=XianluRingWinItem;var XianluSearchWin=function(t){function e(){return t.call(this)||this}return __extends(e,t),e.prototype.initUI=function(){t.prototype.initUI.call(this),this.skinName="XianluSearchWinEUI",this.layer=LayerMgr.Popup,this.addBg()},e.prototype.addDisplay=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];this.initInputStr=this.inputText.text,this.addClickE(this.btnOk,this.onClick),this.addEvent(egret.FocusEvent.FOCUS_IN,this.inputText,this.onFocusIn)},e.prototype.onFocusIn=function(){this.initInputStr==this.inputText.text&&(this.inputText.text="")},e.prototype.onClick=function(){if(this.initInputStr!=this.inputText.text){var t=this.inputText.text,i=t.trim();i.length&&(XianLuSys.ins().sendSearch(t),closeWin(e))}},e}(BaseWinSingle);__reflect(XianluSearchWin.prototype,"XianluSearchWin"),window.XianluSearchWin=XianluSearchWin;var XianLuWin=function(t){function e(){var e=t.call(this)||this;return e.winType=WinType.MainWin,e}return __extends(e,t),e.prototype.setSkinName=function(){this.skinName="BaseWinSkin2"},e.panelNames=[XianluPanel],e}(BaseDuoPanelWin);__reflect(XianLuWin.prototype,"XianLuWin"),window.XianLuWin=XianLuWin;var XianluTaskItem=function(t){function e(){var e=t.call(this)||this;return e.mcBtnOk=new MC,e.skinName="XianluTaskItemEUI",e.addClickE(e.btn_reward,e.onClick),e.addClickE(e.btnGoto,e.onClick),e.addClickE(e.btnGet,e.onClick),e.mcBtnOk.x=e.btnGet.width/2,e.mcBtnOk.y=e.btnGet.height/2,e.btnGet.addChild(e.mcBtnOk),e.mcBtnOk.playFile(ResMgr.getEffName("public_zycs_button01"),-1),e}return __extends(e,t),e.prototype.onClick=function(t){var e=this.data;switch(t.target){case this.btnGet:XianLuSys.ins().sendGetTaskReward(1,e.taskId);break;case this.btnGoto:var i=GFunc.createTaskNavData(e.getMateDailyQuestConfig().controlTarget);i.setsucceedFrontFun(function(){closeWin(JobWin)}),i["goto"]();break;case this.btn_reward:var n=e.getMateDailyQuestConfig();openWin(ComRewardTipsWin,n.reward)}},e.prototype.dataChanged=function(){var t=this.data,e=t.getMateDailyQuestConfig();this.lb_task.text=e.desc;var i=t.selfValue;this.lb_myNum.text="我的："+i;var n=i+t.herValue;1==e.mateType?this.proBar.value=n:2==e.mateType&&(this.proBar.value=i),this.proBar.maximum=e.target,this.lb_herNum.text="对方："+t.herValue,this.currentState=t.taskState.toString()},e}(BaseItemRender);__reflect(XianluTaskItem.prototype,"XianluTaskItem"),window.XianluTaskItem=XianluTaskItem;var StoneLevelConfig=function(){function t(){}return t}();__reflect(StoneLevelConfig.prototype,"StoneLevelConfig");var StoneLevelCostConfig=function(){function t(){}return t}();__reflect(StoneLevelCostConfig.prototype,"StoneLevelCostConfig");var XianluTaskWin=function(t){function e(){var e=t.call(this)||this;return e.redPointHead=[],e.winType=WinType.NeverCloseWin,e}return __extends(e,t),e.prototype.initUI=function(){t.prototype.initUI.call(this),this.addBg("background_zycs_bg_jpg",null)},e.prototype.setSkinName=function(){this.skinName="BaseWinSkin2"},e.panelNames=[XianluTaskMainPanel],e}(BaseWinAutoTab);__reflect(XianluTaskWin.prototype,"XianluTaskWin"),window.XianluTaskWin=XianluTaskWin;var XianluTaskZSItem=function(t){function e(){var e=t.call(this)||this;return e.mcBtnOk=new MC,e.skinName="XianluTaskZSItemEUI",e.addClickE(e.btn_reward,e.onClick),e.addClickE(e.btnGoto,e.onClick),e.addClickE(e.btnGet,e.onClick),e.mcBtnOk.x=e.btnGet.width/2,e.mcBtnOk.y=e.btnGet.height/2,e.btnGet.addChild(e.mcBtnOk),e.mcBtnOk.playFile(ResMgr.getEffName("public_zycs_button01"),-1),e}return __extends(e,t),e.prototype.onClick=function(t){var e=this.data;switch(t.target){case this.btnGet:XianLuSys.ins().sendGetTaskReward(2,e.taskId);break;case this.btnGoto:var i=GFunc.createTaskNavData(e.getMateQuestConfig().controlTarget);i.setsucceedFrontFun(function(){closeWin(JobWin)}),i["goto"]();break;case this.btn_reward:var n=e.getMateQuestConfig();openWin(ComRewardTipsWin,n.reward)}},e.prototype.dataChanged=function(){var t=this.data,e=t.getMateQuestConfig();if(this.lb_task.text=e.desc,this.currentState=t.taskState.toString(),2==e.mateType){var i=void 0,n=void 0;3==e.tasktype?(i=this.getZSLevel(t.selfValue),n=this.getZSLevel(t.herValue)):(i=t.selfValue,n=t.herValue),this.myPro.value=i,this.herPro.value=n,this.myPro.maximum=e.target,this.herPro.maximum=e.target}},e.prototype.getZSLevel=function(t){var e=Cfg.getConfig(ZhuanShengLevelConfig,t);return e.cslevel},e}(BaseItemRender);__reflect(XianluTaskZSItem.prototype,"XianluTaskZSItem"),window.XianluTaskZSItem=XianluTaskZSItem;var StoneSlotConfig=function(){function t(){}return t}();__reflect(StoneSlotConfig.prototype,"StoneSlotConfig");var XianluLabelItem=function(t){function e(){var e=t.call(this)||this;return e.isSelect=!1,e.skinName="XianluListPanelLabelItemEUI",e.touchChildren=!1,e}return __extends(e,t),e.prototype.setSelect=function(t){"undefined"==typeof t&&(t=!this.getSelect()),this.currentState=t?"down":"up",this.isSelect=t},e.prototype.getSelect=function(){return this.isSelect},e}(BaseItemRender);__reflect(XianluLabelItem.prototype,"XianluLabelItem"),window.XianluLabelItem=XianluLabelItem;var XianluLabelItem2=function(t){function e(){var e=t.call(this)||this;return e.skinName="XianluListLabeItemEUI",e.touchChildren=!1,e}return __extends(e,t),e}(BaseItemRender);__reflect(XianluLabelItem2.prototype,"XianluLabelItem2"),window.XianluLabelItem2=XianluLabelItem2;var StoreCamp=function(){function t(){}return t}();__reflect(StoreCamp.prototype,"StoreCamp");var XianluListPanelItem=function(t){function e(){var e=t.call(this)||this;return e.skinName="XianluListPanelItemEUI",e.list.itemRenderer=XianluLabelItem2,e.list.touchChildren=!1,e.list.dataProvider=e.listArr=new eui.ArrayCollection,e.addClickE(e.btnOk,e.onClick),e}return __extends(e,t),e.prototype.onClick=function(){var t=this;if(XianLuSys.ins().isJieYuan())return void showtipsFail("您已结缘，不可结缘");if(this.data.actorId==Actor.ins().actorID)return void showtipsFail("无法与自己结缘");if(!GFunc.isInCity()){var e=10001,i=Cfg.getConfig(NPCConfig,e),n=new PopupData;return n.desc="需前往"+i.name+"才可结缘，是否立即前往？",n.setFunction(this,function(){isShowWin(XianLuListWin)&&closeWin(XianLuListWin),isShowWin(XianLuWin)&&closeWin(XianLuWin),LogicSys.ins().centerEntity.AI.startfindNpc(i.id)}),void openWin(CommonTipsWin,n)}isShowWin(XianLuListWin)&&closeWin(XianLuListWin),isShowWin(XianLuWin)&&closeWin(XianLuWin),LogicSys.ins().centerEntity.AI.startfindNpc(10001,function(){isShowWin(XianLuListWin)||openWin(XianLuListWin),openWin(XianluJieYuanWin,t.data)})},e.prototype.dataChanged=function(){var t=this.data;this.imgHead.source=ResMgr.getHeadIcon(t.sex);var e=Cfg.getConfig(ChatFrameConfig,2,t.headFrameId);this.headFrame.source=ResMgr.getFrameIcon(e.icon),this.lbName.text=t.actorName,this.lbDesc.textFlow=addColorTF(t.str),this.item0.setType(CurType.yb),this.item0.setPrice(t.getGift());for(var i=Cfg.getConfig(MateCommonConfig).labelList,n=[],a=0,o=t.labelIds;a<o.length;a++){var s=o[a];n.push(i[s-1])}this.listArr.source=n},e}(BaseItemRender);__reflect(XianluListPanelItem.prototype,"XianluListPanelItem"),window.XianluListPanelItem=XianluListPanelItem;var StoreHonor=function(){function t(){}return t}();__reflect(StoreHonor.prototype,"StoreHonor");var StoreItemConfig=function(){function t(){}return t.itemId="itemId",t}();__reflect(StoreItemConfig.prototype,"StoreItemConfig");var XingHunAttrWin=function(t){function e(){return t.call(this)||this}return __extends(e,t),e.prototype.initUI=function(){this.skinName="XingHunAttrWinEUI",this.addBg(),t.prototype.initUI.call(this),this.layer=LayerMgr.Popup},e.prototype.open=function(e){t.prototype.open.call(this),this.addClickE(this.btnUp,this.onClick),this.addLsn(XingHunSys.ins().patchUpRank,this.update),this.addLsn(RpSys.ins().patchRp,this.updateRp),this.xingHunData=e,this.update(),this.updateRp()},e.prototype.updateRp=function(t){void 0===t&&(t=null),(!t||t.check(e))&&(this.btnUp.redPoint.visible=RpSys.ins().getData(RoleWin,RolePanel,MoJieWin,XingHunPanel,e))},e.prototype.update=function(){var t=this.xingHunData;this.totalPower.text=t.getMoJiePlusPower().toFixed(0);var e=Math.ceil((t.level+1)/9),i=Cfg.getConfig(StarsoulStageConfig,t.rank),n=Cfg.getConfig(StarsoulStageConfig,t.noActRank()?0:t.rank-1),a=Cfg.getConfig(StarsoulLevelConfig,n.needstar).rank,o=t.canRank(),s=t.rank>=n.stage,r=s?addColor(Lang.common_str40,12704255):addColor("("+e+"/"+a+")",o?9094450:15733780);this.lbCurLevel.textFlow=t.noActRank()?addColorTF(Lang.xh_str4,15129784):addColorTF(Lang.xh_str4+" "+Lang.xh_str6+a+Lang.common_jie+r);var u=""+Lang.xh_str7+addColor("+"+i.atkper/100+"%",12704255)+"\n"+Lang.xh_str8+addColor("+"+i.hpper/100+"%",12704255);if(this.lbCurAttr.textFlow=t.noActRank()?addColorTF(Lang.xh_str9,15129784):addColorTF(u),!t.isMaxRank()){var h=Cfg.getConfig(StarsoulStageConfig,t.rank+1),l=Cfg.getConfig(StarsoulStageConfig,t.noActRank()?0:t.rank),p=""+Lang.xh_str7+addColor("+"+h.atkper/100+"%",12704255)+"\n"+Lang.xh_str8+addColor("+"+h.hpper/100+"%",12704255);this.lbNextAttr.textFlow=addColorTF(p);var c=Cfg.getConfig(StarsoulLevelConfig,l.needstar).rank,d=e>=c,g=addColor("("+e+"/"+c+")",d?5949490:15733780);this.lbNextLevel.textFlow=addColorTF(Lang.xh_str5+" "+Lang.xh_str6+c+Lang.common_jie+g)}t.noActRank()?this.currentState=o?"canAct":"noAct":t.isMaxRank()?this.currentState="max":o?this.currentState="upRank":this.currentState="noRank"},e.prototype.onClick=function(t){switch(t.currentTarget){case this.btnUp:this.xingHunData.canRank()&&XingHunSys.ins().sendUpRank()}},e}(BaseWinSingle);__reflect(XingHunAttrWin.prototype,"XingHunAttrWin"),window.XingHunAttrWin=XingHunAttrWin;var XingHunBarEff=function(t){function e(){var e=t.call(this)||this;return e.skinName="XingHuanBarEffEUI",e.mc=new MC,e.mc.x=52,e.mc.y=55,e.mc.touchEnabled=!1,e.groupMc1.addChild(e.mc),e.mc.playFile(getEffName("jypoor2"),-1),e.mcmax=new MC,e.mcmax.x=58,e.mcmax.y=65,e.mcmax.touchEnabled=!1,e.addChild(e.mcmax),e.dimc=new MC,e.dimc.x=72,e.dimc.y=95,e.dimc.touchEnabled=!1,e.groupShuiPing.addChild(e.dimc),e.hpShape=DisUtil.drawCirByAngle(e.hpShape,53.5,0,360,!0),e.hpShape.x=74.5,e.hpShape.y=60.5,e.groupShuiPing.addChild(e.hpShape),e.dimc.touchEnabled=!1,e.dimc.mask=e.hpShape,e.dimc.playFile(getEffName("jypoor1"),-1),e}return __extends(e,t),e.prototype.setData=function(t,e){this.lbValue.text=t+"/"+e;var i=Math.min(107,t/e*107);this.groupMc.height=i,this.dimc.y=107-i+4,t>=e?this.dimc.visible=!1:this.dimc.visible=t>0},e}(BaseItemRender);__reflect(XingHunBarEff.prototype,"XingHunBarEff"),window.XingHunBarEff=XingHunBarEff;var XingHunData=function(){function t(){this.level=0,this.rank=1}return t.prototype.parser=function(t){this.rank=t.readInt(),this.level=t.readInt()},t.prototype.isJinJie=function(){return(this.level+1)%9==0},t.prototype.noActRank=function(){return 0==this.rank},t.prototype.isMaxRank=function(){return this.rank>=Cfg.getMaxConfig(StarsoulStageConfig).stage},t.prototype.isMaxLevel=function(){return this.level>=Cfg.getConfig(StarsoulCommonConfig).max_level},t.prototype.canRank=function(){var t=Cfg.getConfig(StarsoulStageConfig,this.rank);return!this.isMaxRank()&&this.level>=t.needstar},t.prototype.getMoJiePlusAttr=function(){for(var t=Cfg.getConfig(StarsoulStageConfig,this.rank),e=Cfg.getConfig(StarsoulLevelConfig,this.level),i=[],n=0;n<e.attr.length;n++){var a=e.attr[n];if(a.type==AttrType.atAtkMin||a.type==AttrType.atAtkMax){var o=new AttrData;o.type=a.type,o.value=a.value*t.atkper/1e4,i.push(o)}if(a.type==AttrType.atHpMax){var o=new AttrData;o.type=AttrType.atHpMax,o.value=a.value*t.hpper/1e4,i.push(o)}}return i},t.prototype.getMoJiePlusPower=function(){return GFunc.getPower(this.getMoJiePlusAttr())},t.prototype.getLevelAttrDatas=function(){for(var t=[],e=Cfg.getConfig(StarsoulLevelConfig,this.level),i=Cfg.getConfig(StarsoulLevelConfig,this.isMaxLevel()?this.level:this.level+1),n=e.attr.length,a=0;n>a;a++){var o=e.attr[a],s=i.attr[a],r=new ComAttrData(o,s,e.level>=i.level);t.push(r)}return t},t}();__reflect(XingHunData.prototype,"XingHunData");var SuitAttrConfig=function(){function t(){}return t}();__reflect(SuitAttrConfig.prototype,"SuitAttrConfig");var XingHunSys=function(t){function e(){var e=t.call(this)||this;return e.sysId=PackId.Starsoul,e.reg(1,e.patchUpdate),e.reg(2,e.patchUpLevel),e.reg(3,e.patchUpRank),e.starsouData=new XingHunData,e}return __extends(e,t),e.ins=function(){return t.getIns.call(this,e)},e.prototype.patchUpdate=function(t){this.starsouData.parser(t)},e.prototype.sendUpLevel=function(){var t=this.getBytes(2);this.send(t)},e.prototype.patchUpLevel=function(t){var e=t.readInt();this.starsouData.level=e,RpFun.showStarRedPoint()},e.prototype.sendUpRank=function(){var t=this.getBytes(3);this.send(t)},e.prototype.patchUpRank=function(t){var e=t.readInt();this.starsouData.rank=e,RpFun.showStarRedPoint()},e.prototype.getData=function(t){return this.starsouData},e}(BaseSys);__reflect(XingHunSys.prototype,"XingHunSys");var System;!function(t){t.xingHunSys=XingHunSys.ins.bind(XingHunSys)}(System||(System={})),window.XingHunSys=XingHunSys;var XJHBItem=function(t){function e(){var e=t.call(this)||this;return e.skinName="XJHBItemEUI",e}return __extends(e,t),e.prototype.dataChanged=function(){var t="";ComUtil.isXianYuApp?(t="通过开启仙玉红包，",this.lb_text.textFlow=addColorTF(addColor(this.data.name,16701539)+t+addColor("获得"+MathUtil.toFixed(100*this.data.mVlaue,0)+"仙玉",4255085))):(t="通过开启现金红包，",this.lb_text.textFlow=addColorTF(addColor(this.data.name,16701539)+t+addColor("获得"+this.data.mVlaue+"元",4255085)))},e}(BaseItemRender);__reflect(XJHBItem.prototype,"XJHBItem"),window.XJHBItem=XJHBItem;var XJHBSubWin=function(t){function e(){var e=t.call(this)||this;return e.value=0,e.skinName="XJHBSubWinEUI",e.layer=LayerMgr.Popup,e.addBg(),e}return __extends(e,t),e.prototype.open=function(){t.prototype.open.call(this);var e=VipSys.ins().xjhbData.xjhbNum,i="xjhb_title";ComUtil.isXianYuApp?(i+="30009",this.lb_money&&(this.lb_money.text=MathUtil.toFixed(100*e,0).toString()),this.lb_yuan&&(this.lb_yuan.text=Lang.common_zs)):(this.lb_money&&(this.lb_money.text=e.toString()),this.lb_yuan&&(this.lb_yuan.text=Lang.common_yuan)),this.img_title&&(this.img_title.source=i),this.updateVip()},e.prototype.updateVip=function(){var t=VipSys.ins(),e=Cfg.getVipMaxLv(),i=XJHBWin.isVip;this.vipImg.source=i?"vf":"svf";var n,a,o=100*t.xjhbData.xjhbNum,s=0,r=0,u=XJHBWin.oldLv;if(i){var h=Cfg.getConfig(VipConfig,u);if(u>1){var l=Cfg.getConfig(VipConfig,u-1);n=h.needYb-l.needYb,r=l.needYb}else n=h.needYb;s=XJHBWin.oldExp-r+o,a=s>n?n:s}else{var p=u<Cfg.getSVipMaxLv()?u+1:u,c=Cfg.getConfig(SVipConfig,p);if(p>1){var l=Cfg.getConfig(SVipConfig,p-1);n=c.needYb-l.needYb,r=l.needYb}else n=c.needYb;s=XJHBWin.oldExp-r+o,a=s>n?n:s}this.barExp.slideDuration=0,this.barExp.maximum=n,this.barExp.value=XJHBWin.oldExp-r,this.bmpLabelLv0.text=u+"",this.barExp.slideDuration=1e3,this.barExp.value=a,s>n?(i&&u+1>=e?this.value=s-this.barExp.maximum:this.value=s,this.nextVip(u)):this.openTime()},e.prototype.nextVip=function(t){var e=!0,i=0;XJHBWin.isVip?t+1<Cfg.getVipMaxLv()?(i=t+1,e=!0):(e=!1,t=0):(e=!1,i=t+1),this.bmpLabelLv0.text=i+"",this.vipImg.source=e?"vf":"svf";var n,a=this.value;if(e){var o=Cfg.getConfig(VipConfig,t+1);if(t>1){var s=Cfg.getConfig(VipConfig,t);n=o.needYb-s.needYb}else n=o.needYb;n=o.needYb}else{var r=t<Cfg.getSVipMaxLv()?t+1:t,u=Cfg.getConfig(SVipConfig,r);n=u.needYb}this.barExp.slideDuration=0,this.barExp.maximum=n,this.barExp.slideDuration=1e3,this.barExp.value=a,this.openTime()},e.prototype.openTime=function(){this.vipBg.visible=this.vipGroup.visible=!1,Timer.ins()["do"](0,1e3,5,this.updateLabel,this)},e.prototype.updateLabel=function(t){0>=t&&closeWin(this),this.closeBtn.label=Lang.common_str48.replace("$second$",t.toString())},e.prototype.close=function(){t.prototype.close.call(this),VipSys.ins().xjhbData.redTimes<=0&&closeWin(XJHBWin)},__decorate([callDelay(1e3)],e.prototype,"nextVip",null),__decorate([callDelay(1e3)],e.prototype,"openTime",null),e}(BaseWinSingle);__reflect(XJHBSubWin.prototype,"XJHBSubWin"),window.XJHBSubWin=XJHBSubWin;var XJHBWin=function(t){function e(){var e=t.call(this)||this;return e.skinName="XJHBWinEUI",e.layer=LayerMgr.Popup,e.addBg(),e.comGunDong=new ComGunDongBase,e.comGunDong.width=e.group.width,e.comGunDong.height=e.group.height,e.group.addChild(e.comGunDong),e.lab1.visible=!urlParam.isShenhe,e}return __extends(e,t),e.prototype.getBtn=function(){return this.btn_open},e.prototype.open=function(e){t.prototype.open.call(this),this.exCloseFun=e,VipSys.ins().sendVipRedpacketInfo(),this.addClickE(this.btn_open,this.onClick),this.addLsn(VipSys.ins().vipRedpacketInfoBack,this.updatePanel),this.updatePanel();var i=!!getLocation("redFirstDuider",2);if(!i&&VipSys.ins().xjhbData.redTimes){var n=Cfg.getConfig(GuideConfig,GuiderId.Id9989);Guider.ins().show(GFunc.creatGuideData(n.content[0].type,GuiderId.Id9989)),setLocation("redFirstDuider","true")}},e.prototype.close=function(){t.prototype.close.call(this),this.exCloseFun&&this.exCloseFun(),this.comGunDong.close()},e.prototype.updatePanel=function(){var t=VipSys.ins().xjhbData;if(ComUtil.isXianYuApp?(this.lb_num.text=(100*t.totalMoney).toString(),this.lab1&&(this.lab1.text="首冲立即获得全部闯关仙玉红包奖励")):(this.lb_num.text=t.totalMoney+"元",this.lab1&&(this.lab1.text="首冲立即获得全部闯关现金红包奖励")),this.lb_times.text="拥有红包数量："+t.redTimes,this.comGunDong.iniData(t.redList,"XJHBItem",10,ArrowDir.dirV),this.comGunDong.open(),this.lb_tips.text="",t.redTimes>0)this.btn_open.redPoint.visible=!0,this.btnMc||(this.btnMc=MC.create(getEffName("hbopen"),-1)),this.btnMc.x=56,this.btnMc.y=56,this.btn_open.addChild(this.btnMc);else{this.btn_open.redPoint.visible=!1;var e=Actor.ins().vipLv,i=VipSys.ins().xjhbData.totalNum,n=Cfg.getConfig(VipHongbaoConfig,i),a="闯关达到第$guan$关，可获得下一个现金红包奖励";ComUtil.isXianYuApp&&(a="闯关达到第$guan$关，可获得下一个仙玉红包奖励");var o=e<Cfg.getVipMaxLv();o?this.lb_tips.text=a.replace("$guan$",n.needCustom.toString()):this.lb_tips.text="已获得全部红包",this.btnMc&&DisUtil.remove(this.btnMc)}},e.prototype.onClick=function(){var t=VipSys.ins(),i=t.xjhbData.redTimes;if(0>=i)return void showtipsFail("剩余红包不足");t.sendVipRedpacket();var n=Actor.ins().vipLv<Cfg.getVipMaxLv();e.oldExp=n?t.vipExp:t.sVipExp,e.oldLv=n?Actor.ins().vipLv:Actor.ins().sVipLv,e.isVip=n},e.getSysId=function(){return 356},e.oldExp=0,e.oldLv=0,e.isVip=!1,e}(BaseWinSingle);__reflect(XJHBWin.prototype,"XJHBWin"),window.XJHBWin=XJHBWin;var XJHBData=function(){function t(){this.redList=[]}return t.prototype.parseUpdate=function(t){var e=t.readInt();this.totalMoney=MathUtil.toInteger(e/100),this.openNum=t.readByte(),this.totalNum=t.readByte(),this.redTimes=this.totalNum-this.openNum;var i=t.readInt();this.xjhbNum=MathUtil.toFixed(i/100,2);var n=t.readByte();this.redList.length=0;for(var a=0;n>a;a++){var o=new XJHBItemData;o.parse(t),this.redList.push(o)}},t.prototype.isShowIcon=function(){var t=Actor.ins().vipLv,e=t<Cfg.getVipMaxLv();return e?!0:this.redTimes>0?!0:!1},t}();__reflect(XJHBData.prototype,"XJHBData");var XJHBItemData=function(){function t(){}return t.prototype.parse=function(t){this.name=t.readString();var e=t.readInt();this.mVlaue=MathUtil.toFixed(e/100,2)},t}();__reflect(XJHBItemData.prototype,"XJHBItemData");var XunBaoSys=function(t){function e(){var e=t.call(this)||this;return e.xunbaoDatas=[],e.xunBaoBagItemDatas=[],e.tipsDatas=[],e.sysId=PackId.XunBao,e.reg(1,e.patchXunBaoData),e.reg(2,e.patchXunBaoChouJiang),e.reg(3,e.patchXunBaoJiLu),e.reg(4,e.patchXunBaoDuiHuan),e.reg(5,e.patchXunBaoRemind),e.xunbaoDatas.push(new XunBaoEquipData),e.xunbaoDatas.push(new XunBaoHunQiData),e.xunbaoDatas.push(new XunBaoFuWenData),e.xunbaoDatas.push(new XunBaoDianFengData),e.xunbaoDatas.push(new XunBaoZhiZungData),e}return __extends(e,t),e.ins=function(){return t.getIns.call(this,e)},e.prototype.patchXunBaoData=function(t){for(var e=t.readByte(),i=0;e>i;i++){var n=this.xunbaoDatas[i];t.readByte();n.parser(t)}},e.prototype.sendXunBaoChouJiang=function(t,e,i){void 0===i&&(i=0);var n=this.getBytes(2);n.writeByte(t),n.writeByte(e),n.writeByte(i),this.send(n)},e.prototype.showJiPingItem=function(){if(this.tipsDatas.length>0){var t=this.tipsDatas[0];openWin(XunBaoJiPingItemTipsWin,t,this.showJiPingItem,this,XunBaoJiPingItemTipsWin.XUN_BAO),this.tipsDatas.splice(0,1)}},e.prototype.patchXunBaoChouJiang=function(t){for(var e=t.readByte(),i=t.readByte(),n=this.getXunBaoDataByType(e),a=[],o=0;i>o;o++){var s=new ItemDataReward;s.parser2(t);var r=GFunc.creatItemDataById(s.id);r.count=s.count,a.push(r);var u=1==t.readByte();u&&(this.tipsDatas.push(r),isShowWin(XunBaoJiPingItemTipsWin)||this.showJiPingItem())}var h=t.readInt(),l=t.readShort(),p=t.readByte(),c=t.readByte();if(n&&(n.setScore(h),n.setXingYun(l),n.setBiDe(c),n.setMianFei(p)),a.length>=10){var d=getWin(XunBaoRewardListTipsWin);d?d.updateData(a,n):openWin(XunBaoRewardListTipsWin,a,n)
}else if(a.length>0){var g=a[0].id,f=new eui.Image;f.source=ResMgr.getItemIcon(Cfg.getItemCfg(g).getIcon(),IconType.IT_80x80),f.anchorOffsetX=37,f.anchorOffsetY=37,f.x=LayerMgr.Popup.width/2+40,f.y=LayerMgr.Popup.height/2-200,LayerMgr.Popup.addChild(f);var d=getWin(XunBaoWin);if(d){var y=d.getBagTab();GFunc.flyToBag1(f,y)}}RpFun.showXunBaoRedPoint(),RpFun.showXunBaoDuiHuanRedPoint()},e.prototype.sendXunBaoJiLu=function(t,e){var i=this.getBytes(3);i.writeByte(t),i.writeByte(e),this.send(i)},e.prototype.patchXunBaoJiLu=function(t){var e=t.readByte(),i=t.readByte(),n=t.readByte(),a=this.getXunBaoDataByType(e),o=[],s=0;o=0==i?a.xunBaoJiLuMyDatas:a.xunBaoJiLuOtherDatas,s=o.length;for(var r=0;n>r;r++)if(r>s-1){var u=new XunBaoJiLuData;u.parser(t),o.push(u),1==i&&this.patchXunBaoOtherJiLuUpdate(u)}},e.prototype.patchXunBaoOtherJiLuUpdate=function(t){return t},e.prototype.sendXunBaoDuiHuan=function(t,e){var i=this.getBytes(4);i.writeByte(t),i.writeByte(e),this.send(i)},e.prototype.patchXunBaoDuiHuan=function(t){var e=t.readByte(),i=(t.readByte(),t.readInt()),n=this.getXunBaoDataByType(e);n&&n.setScore(i),RpFun.showXunBaoDuiHuanRedPoint()},e.prototype.sendXunBaoRemind=function(t,e){var i=this.getBytes(5);i.writeByte(t),i.writeByte(e),this.send(i)},e.prototype.patchXunBaoRemind=function(t){var e=t.readByte(),i=t.readInt(),n=this.getXunBaoDataByType(e);n&&n.setRemind(i),RpFun.showXunBaoDuiHuanRedPoint()},e.prototype.doBagData=function(t){this.xunBaoBagItemDatas=[];for(var e,i=t.readInt(),n=0;i>n;n++)e=new ItemDataBase,e.parser(t),this.xunBaoBagItemDatas.push(e)},e.prototype.doDeleteItem=function(t){for(var e=t.readDouble(),i=this.xunBaoBagItemDatas.length-1;i>=0;i--)if(this.xunBaoBagItemDatas[i].handle==e){this.xunBaoBagItemDatas.splice(i,1);break}this.patchDeleteItem(),RpFun.showXunBaobagRedPoint()},e.prototype.patchDeleteItem=function(){},e.prototype.patchAddItem=function(t){var e=new ItemDataBase;e.parser(t),this.xunBaoBagItemDatas.unshift(e);t.readByte(),t.readByte();RpFun.showXunBaobagRedPoint()},e.prototype.patchUpDateItem=function(t){for(var e,i=t.readDouble(),n=t.readInt(),a=(t.readByte(),t.readByte(),0);a<this.xunBaoBagItemDatas.length;a++)if(e=this.xunBaoBagItemDatas[a],e.handle==i){e.count=n;break}},e.prototype.getXunBaoDataByType=function(t){for(var e=0;e<this.xunbaoDatas.length;e++){var i=this.xunbaoDatas[e];if(i.type==t)return i}return null},e.prototype.getDoubleTimer=function(){var t=Cfg.getConfig(XunbaoConstConfig).openday[0],e=new Date(Actor.ins().serverOpenTimer);e.setHours(0),e.setMinutes(0),e.setSeconds(0);var i=e.getTime()+t*DateUtil.MS_PER_DAY,n=Actor.ins().serverTime,a=i>n;if(a){var o=(i-n)/1e3;return o}return 0},e.prototype.isDoubleTimer=function(){var t=Cfg.getConfig(XunbaoConstConfig).openday[0],e=new Date(Actor.ins().serverOpenTimer);e.setHours(0),e.setMinutes(0),e.setSeconds(0);var i=e.getTime()+t*DateUtil.MS_PER_DAY,n=Actor.ins().serverTime;return i>n},e.prototype.hasFreeCount=function(){for(var t=!1,e=0;e<this.xunbaoDatas.length;e++){var i=this.xunbaoDatas[e];if(0==i.mianFei){t=!0;break}}return t},__decorate([callDelay(100)],e.prototype,"patchDeleteItem",null),e}(BaseSys);__reflect(XunBaoSys.prototype,"XunBaoSys");var System;!function(t){t.xunBaoSys=XunBaoSys.ins.bind(XunBaoSys)}(System||(System={})),window.XunBaoSys=XunBaoSys;var SuitConditionConfig=function(){function t(){}return t}();__reflect(SuitConditionConfig.prototype,"SuitConditionConfig");var XunBaoDianFengData=function(t){function e(){var e=t.call(this)||this;return e.tabName="龙宫寻宝",e.type=XunbaoType.DianFeng,e}return __extends(e,t),e.prototype.parser=function(e){t.prototype.parser.call(this,e)},e.prototype.getConfig=function(){return Cfg.getConfigs(XunbaoDianfengConfig,0,CondType.MoreEqual,"show",1)},e.prototype.getXunbaoEquipConfigById=function(t,e){return Cfg.getConfig(XunbaoDianfengConfig,t,1)},e.prototype.getXunbaoEquipByPondid=function(){return Cfg.getConfigs(XunbaoDianfengConfig,0,CondType.ALL)},e.prototype.getPanelName=function(){return egret.getQualifiedClassName(XunBaoDianFengPanel)},e}(XunBaoEquipData);__reflect(XunBaoDianFengData.prototype,"XunBaoDianFengData");var XunBaoDuiHuanData=function(){function t(){this._remind=0}return t.prototype.parser=function(t){},Object.defineProperty(t.prototype,"remind",{get:function(){return this._remind},set:function(t){this._remind=t},enumerable:!0,configurable:!0}),t}();__reflect(XunBaoDuiHuanData.prototype,"XunBaoDuiHuanData");var SuitConfig=function(){function t(){}return t}();__reflect(SuitConfig.prototype,"SuitConfig");var XunBaoFuWenData=function(t){function e(){var e=t.call(this)||this;return e.tabName="符文寻宝",e.type=XunbaoType.FuWen,e}return __extends(e,t),Object.defineProperty(e.prototype,"showItemDatas",{get:function(){if(0==this._showItemDatas.length){var t=this.getConfig();SortUtil.sortOn(t,["show"],[SortType.up]);for(var e=0;e<t.length;e++){var i=t[e],n=i.item,a=GFunc.creatItemDataById(n.id);this._showItemDatas.push(a)}}return this._showItemDatas},enumerable:!0,configurable:!0}),e.prototype.getConfig=function(){return Cfg.getConfigs(XunbaoElementConfig,0,CondType.MoreEqual,"show",1)},Object.defineProperty(e.prototype,"costitem",{get:function(){return Cfg.getConfig(XunbaoConstConfig).elementcost},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"bideItemData",{get:function(){var t;if(this.isBiDe){var e=Cfg.getConfig(XunbaoConstConfig).elementcost[2][0],i=Cfg.getConfig(XunbaoElementConfig,e,1);if(1==i.status){var n=i.item.id;t=GFunc.creatItemDataById(n)}}return t},enumerable:!0,configurable:!0}),e.prototype.getPanelName=function(){return egret.getQualifiedClassName(XunBaoFuWenPanel)},e}(XunBaoBaseData);__reflect(XunBaoFuWenData.prototype,"XunBaoFuWenData");var XunBaoHunQiData=function(t){function e(){var e=t.call(this)||this;return e.tabName="法器寻宝",e.type=XunbaoType.HunQi,e}return __extends(e,t),Object.defineProperty(e.prototype,"showItemDatas",{get:function(){if(0==this._showItemDatas.length){var t=this.getConfig();SortUtil.sortOn(t,["show"],[SortType.up]);for(var e=0;e<t.length;e++){var i=t[e],n=i.item,a=GFunc.creatItemDataById(n.id);this._showItemDatas.push(a)}}return this._showItemDatas},enumerable:!0,configurable:!0}),e.prototype.getConfig=function(){return Cfg.getConfigs(XunbaoHunqiConfig,0,CondType.MoreEqual,"show",1)},Object.defineProperty(e.prototype,"bideItemData",{get:function(){var t;if(this.isBiDe){var e=Cfg.getConfig(XunbaoConstConfig).costcount[2][0],i=Cfg.getConfig(XunbaoHunqiConfig,e,1);if(1==i.status){var n=i.item.id;t=GFunc.creatItemDataById(n)}}return t},enumerable:!0,configurable:!0}),e.prototype.getPanelName=function(){return egret.getQualifiedClassName(XunBaoFaBaoPanel)},e}(XunBaoBaseData);__reflect(XunBaoHunQiData.prototype,"XunBaoHunQiData");var XunBaoJiLuData=function(){function t(){this.playName="",this.itemId=1,this.count=1}return t.prototype.parser=function(t){this.playName=t.readString(),this.itemId=t.readInt(),this.count=t.readInt()},t}();__reflect(XunBaoJiLuData.prototype,"XunBaoJiLuData");var XunBaoZhiZungData=function(t){function e(){var e=t.call(this)||this;return e.tabName="仙宫寻宝",e.type=XunbaoType.ZhiZun,e}return __extends(e,t),e.prototype.parser=function(e){t.prototype.parser.call(this,e)},e.prototype.getConfig=function(){return Cfg.getConfigs(XunbaoZhizhunConfig,0,CondType.MoreEqual,"show",1)},e.prototype.getXunbaoEquipConfigById=function(t,e){return Cfg.getConfig(XunbaoZhizhunConfig,t,1)},e.prototype.getXunbaoEquipByPondid=function(){return Cfg.getConfigs(XunbaoZhizhunConfig,0,CondType.ALL)},e.prototype.getPanelName=function(){return egret.getQualifiedClassName(XunBaoZhiZunPanel)},e}(XunBaoEquipData);__reflect(XunBaoZhiZungData.prototype,"XunBaoZhiZungData");var SuitXLConfig=function(){function t(){}return t}();__reflect(SuitXLConfig.prototype,"SuitXLConfig");var SVipConfig=function(){function t(){}return t}();__reflect(SVipConfig.prototype,"SVipConfig");var SVipGiftConfig=function(){function t(){}return t}();__reflect(SVipGiftConfig.prototype,"SVipGiftConfig");var XunBaoBiDeTips=function(t){function e(){var e=t.call(this)||this;return e.skinName="XunBaoBiDeTipsEUI",e.setSkinPart("item",new ItemBase),e.addClickE(e.btnClose,e.onClick),e}return __extends(e,t),e.prototype.dataChanged=function(){var t=this.data;t&&(this.item.data=t)},e.prototype.onClick=function(t){this.visible=!1},e}(BaseItemRender);__reflect(XunBaoBiDeTips.prototype,"XunBaoBiDeTips"),window.XunBaoBiDeTips=XunBaoBiDeTips;var SVipLimitGiftConfig=function(){function t(){}return t}();__reflect(SVipLimitGiftConfig.prototype,"SVipLimitGiftConfig");var SVIPMSConfig=function(){function t(){}return t}();__reflect(SVIPMSConfig.prototype,"SVIPMSConfig");var XunBaoDuiHuanPanelItem=function(t){function e(){var e=t.call(this)||this;return e.skinName="XunBaoDuiHuanPanelItemEUI",e.setSkinPart("itemIcon",new ItemBase),e.btnDuiHuan.name="btnDuiHuan",e.checkBoxTiXing.name="checkBoxTiXing",e}return __extends(e,t),e.prototype.dataChanged=function(){var t=this.data,e=t.config,i=GFunc.creatItemDataById(e.item.id);i.count=e.item.count,this.itemIcon.data=i,this.lbName.text=i.cfg.getName(),this.lbName.textColor=GConst.PZColor[i.cfg.quality],this.updateItem()},e.prototype.updateItem=function(){var t=this.data,e=t.config,i=XunBaoSys.ins().getXunBaoDataByType(e.type).score,n=i>=e.score?3821938:15733780;this.lbJiFen.textFlow=addColorTF(""+(e.score+"积分"),n),this.updateRemind(),this.updateRedPoint()},e.prototype.updateRemind=function(){var t=this.data;this.checkBoxTiXing.selected=1==t.remind},e.prototype.updateRedPoint=function(){var t=this.data,i=t.config,n=RpSys.ins().getData(ExtCom,XunBaoWin,XunBaoDuiHuanPanel,e,i.type,i.index);this.btnDuiHuan.redPoint.visible=n},e}(BaseItemRender);__reflect(XunBaoDuiHuanPanelItem.prototype,"XunBaoDuiHuanPanelItem"),window.XunBaoDuiHuanPanelItem=XunBaoDuiHuanPanelItem;var SvipStoreConfig=function(){function t(){}return t}();__reflect(SvipStoreConfig.prototype,"SvipStoreConfig");var SzConstConfig=function(){function t(){}return t}();__reflect(SzConstConfig.prototype,"SzConstConfig");var SzHuanhuaBaseConfig=function(){function t(){}return t}();__reflect(SzHuanhuaBaseConfig.prototype,"SzHuanhuaBaseConfig");var XunBaoEquipPanelItem2=function(t){function e(){return t.call(this)||this}return __extends(e,t),e.prototype.setSkinName=function(){this.skinName="XunBaoEquipPanelItem1EUI"},e.prototype.dataChanged=function(){t.prototype.dataChanged.call(this),this.item.setItemKuangEffect(!0,"eff6"),this.item.setItemEffect(!0,"eff7")},e}(XunBaoEquipPanelItem1);__reflect(XunBaoEquipPanelItem2.prototype,"XunBaoEquipPanelItem2"),window.XunBaoEquipPanelItem2=XunBaoEquipPanelItem2;var SzHuanhuaGroupConfig=function(){function t(){}return t}();__reflect(SzHuanhuaGroupConfig.prototype,"SzHuanhuaGroupConfig");var XunBaoFaBaoPanelGunDongItem=function(t){function e(){var e=t.call(this)||this;return e.skinName="XunBaoFaBaoPanelGunDongItemEUI",e.mc=new MC,e.groupMc.addChild(e.mc),e.addClickE(e,e.onClick),e}return __extends(e,t),e.prototype.dataChanged=function(){var t=this.data,e=t.cfg;this.imgIcon.source=ResMgr.getItemIcon(e.getIcon(),IconType.IT_80x80),this.lbName.text=t.cfg.getName(),this.lbName.textColor=GConst.PZColor[t.cfg.quality]},e.prototype.onClick=function(t){var e=this.data;GFunc.openItemTips(e)},e}(BaseItemRender);__reflect(XunBaoFaBaoPanelGunDongItem.prototype,"XunBaoFaBaoPanelGunDongItem"),window.XunBaoFaBaoPanelGunDongItem=XunBaoFaBaoPanelGunDongItem;var SzLevelConfig=function(){function t(){}return t}();__reflect(SzLevelConfig.prototype,"SzLevelConfig");var SzPillConfig=function(){function t(){}return t}();__reflect(SzPillConfig.prototype,"SzPillConfig");var XunBaoFuWenPanelMaxItem=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return __extends(e,t),e}(XunBaoFuWenPanelItem);__reflect(XunBaoFuWenPanelMaxItem.prototype,"XunBaoFuWenPanelMaxItem"),window.XunBaoFuWenPanelMaxItem=XunBaoFuWenPanelMaxItem;var XunBaoGaiLvTipsWin=function(t){function e(){var e=t.call(this)||this;return e.skinName="XunBaoGaiLvTipsWinEUI",e.layer=LayerMgr.Popup,e.addBg(),e}return __extends(e,t),e.prototype.open=function(e){void 0===e&&(e=""),t.prototype.open.call(this),this.lbContent.textFlow=StrUtil.toTF(e)},e}(BaseWinSingle);__reflect(XunBaoGaiLvTipsWin.prototype,"XunBaoGaiLvTipsWin"),window.XunBaoGaiLvTipsWin=XunBaoGaiLvTipsWin;var XunBaoJiLuItem=function(t){function e(){var e=t.call(this)||this;return e.skinName="XunBaoJiLuItemEUI",e}return __extends(e,t),e.prototype.dataChanged=function(){var t=this.data,e=Cfg.getItemCfg(t.itemId);this.lbDesc.textFlow=addColorTF("运气爆棚,"+addColor(t.playName,10244109)+"获得了"+addColor(e.getName(),GConst.PZColor[e.quality]))},e}(BaseItemRender);__reflect(XunBaoJiLuItem.prototype,"XunBaoJiLuItem"),window.XunBaoJiLuItem=XunBaoJiLuItem;var XunBaoJiPingItemTipsWin=function(t){function e(){var e=t.call(this)||this;return e.mc=new MC,e.type=0,e.closeCaller=new Caller,e.useType=0,e.layer=LayerMgr.Tips,e.skinName="XunBaoJiPingItemTipsEUI",e.addBg(),e.setSkinPart("itemIcon",new ItemBase),e.mc.x=111,e.mc.y=119,e.mc.touchEnabled=!1,e.group.touchEnabled=!1,e}return __extends(e,t),e.prototype.initUI=function(){t.prototype.initUI.call(this)},e.prototype.open=function(t,e,i,n){this.addClickE(this.closeBtn0,this.onClick),this.addClickE(this.checkBox,this.onClick),this.data=t,this.closeCaller.func=e,this.closeCaller.obj=i,this.type=n,this.mc.playFile(getEffName("jlcq"),-1),this.setData(),Timer.ins()["do"](5e3,1,1,this.countDown1,this)},e.openCheck=function(t,i,n,a){return 1==e.tishiData[a]?!1:!0},e.prototype.countDown1=function(){Timer.ins().remove(this.countDown1,this),closeWin(this),this.closeCaller.call()},e.prototype.close=function(){t.prototype.close.call(this)},e.prototype.setData=function(){this.itemIcon.data=this.data,this.lbName.text=this.data.cfg.getName(),this.lbName.textColor=GConst.PZColor[this.data.cfg.quality]},e.prototype.onClick=function(t){switch(t.currentTarget){case this.closeBtn0:this.countDown1();break;case this.checkBox:e.tishiData[this.type]=this.checkBox.selected}},e.JIN_ZUAN=0,e.XUN_BAO=1,e.ACT_6_1=2,e.ACT_DW=3,e.tishiData={},e}(BaseWinSingle);__reflect(XunBaoJiPingItemTipsWin.prototype,"XunBaoJiPingItemTipsWin"),window.XunBaoJiPingItemTipsWin=XunBaoJiPingItemTipsWin;var SzPillMaxConfig=function(){function t(){}return Object.defineProperty(t,"max",{get:function(){return"max"},enumerable:!0,configurable:!0}),t}();__reflect(SzPillMaxConfig.prototype,"SzPillMaxConfig");var XunBaoRewardListTipsWin=function(t){function e(){var e=t.call(this)||this;return e.init(),e}return __extends(e,t),e.prototype.init=function(){this.skinName="XunBaoRewardListTipsWinEUI",this.addBg(),this.list.itemRenderer=ItemBaseColor,this.list.dataProvider=this.listArray=new eui.ArrayCollection,this.list.useVirtualLayout=!0},e.prototype.open=function(e,i){t.prototype.open.call(this),this.addClickE(this.buyXunBao10,this.onClick),this.addClickE(this.buyXunBao50,this.onClick),this.addLsn(BagSys.ins().patchItemChange,this.updateConsume),this.updateData(e,i),this.updateConsume(),this.updateBtn()},e.prototype.updateData=function(t,e){this.data=e;for(var i=[],n=0,a=t;n<a.length;n++){var o=a[n];o.tempColor=16775602,i.push(o)}this.listArray.source=i,Timer.ins()["do"](100,1,1,this.flyItemList,this)},e.prototype.updateBtn=function(){this.buyXunBao10.labelDisplay.text="寻宝"+this.data.costitem[1][0]+"次",this.buyXunBao50.labelDisplay.text="寻宝"+this.data.costitem[2][0]+"次"},e.prototype.flyItemList=function(){for(var t=this.list.numElements,e=0;t>e;e++){var i=this.list.getElementAt(e);if(i&&i.visible){var n=i.data,a=i.getImgIcon().localToGlobal(),o=n.id,s=ObjPool.pop(BaseImage);s.source=ResMgr.getItemIcon(Cfg.getItemCfg(o).getIcon(),IconType.IT_80x80),s.anchorOffsetX=0,s.anchorOffsetY=0,s.x=a.x-10,s.y=a.y,LayerMgr.Popup.addChild(s);var r=getWin(XunBaoWin);if(r){var u=r.getBagTab();GFunc.flyToBag1(s,u)}if(9==e)break}}},e.prototype.onClick=function(t){switch(t.currentTarget){case this.buyXunBao10:this.sendChouJiang(1);break;case this.buyXunBao50:this.sendChouJiang(2)}},e.prototype.updateConsume=function(){this.updateSingleConsume(1,this.imgXunBao10,this.lbXunBao10),this.updateSingleConsume(2,this.imgXunBao50,this.lbXunBao50)},e.prototype.updateSingleConsume=function(t,e,i){var n=this.data.equipid,a=BagSys.ins().getItemCount(n),o=Cfg.getItemCfg(n),s=Cfg.getConfig(StoreItemConfig,CondType.Equal,StoreItemConfig.itemId,this.data.equipid),r=s.price,u=ResMgr.getItemIcon(o.getIcon()),h=ResMgr.getItemIcon(Cfg.getItemCfg(CurType.yb).getIcon()),l=(this.data.costitem,this.data.costitem[t][1]),p=l>a&&this.isUseYb,c=(l-a)*r;i.text=p?""+c:a+"/"+l,e.source=p?h:u},Object.defineProperty(e.prototype,"isUseYb",{get:function(){return 1==TipsSys.ins().saveReminds[this.data.getPanelName()]},enumerable:!0,configurable:!0}),e.prototype.sendChouJiang=function(t){var e=this,i=this.data.costitem[t][1],n=new ItemDataReward;n.id=this.data.equipid,n.count=i;var a=BagSys.ins().getItemCount(this.data.equipid),o=i-a;if(GFunc.isConsumeEnough(n))XunBaoSys.ins().sendXunBaoChouJiang(this.data.type,t+1);else if(this.isUseYb){var s=Cfg.getConfig(StoreItemConfig,CondType.Equal,StoreItemConfig.itemId,this.data.equipid);GFunc.checkCurrency(CurType.yb,s.price*i)&&XunBaoSys.ins().sendXunBaoChouJiang(this.data.type,t+1,1)}else{var s=Cfg.getConfig(StoreItemConfig,CondType.Equal,StoreItemConfig.itemId,this.data.equipid);if(GFunc.checkCurrency(CurType.yb,s.price)){var r=new BuyData;r.setBuyFun(function(t){var i=Cfg.getConfig(StoreItemConfig,CondType.Equal,StoreItemConfig.itemId,e.data.equipid);ShopSys.ins().sendItemShopBuy([[i.index,t]])}),r.price=s.price,r.itemId=this.data.equipid,r.limitCount=0,r.count=o,r.consumeItemId=CurType.yb,r.saveKey=this.data.getPanelName(),openWin(BuyWin1,r)}}},e}(BaseWin);__reflect(XunBaoRewardListTipsWin.prototype,"XunBaoRewardListTipsWin"),window.XunBaoRewardListTipsWin=XunBaoRewardListTipsWin;var XunBaoTab=function(t){function e(){var e=t.call(this)||this;return e.skinName="BtnTab5ZYCSSkin",e}return __extends(e,t),e.prototype.dataChanged=function(){var t=this.data;this.labelDisplay.text=""+t.tabName},e.prototype.updateRedPoint=function(t){this.redPoint.visible=t},e}(BaseItemRender);__reflect(XunBaoTab.prototype,"XunBaoTab"),window.XunBaoTab=XunBaoTab;var TclyConfig=function(){function t(){}return t}();__reflect(TclyConfig.prototype,"TclyConfig");var TianMoAttrConfig=function(){function t(){}return t}();__reflect(TianMoAttrConfig.prototype,"TianMoAttrConfig");var YdssTabItem=function(t){function e(){var e=t.call(this)||this;return e.skinName="YdssTabEUI",e.redPoint.visible=!1,e}return __extends(e,t),e.prototype.dataChanged=function(){if(this.btn_name.source="xianyuanhd_title"+(this.itemIndex+1),this.lbYuan.visible=!1,this.priceNum.visible=!1,2!=this.itemIndex){var t=this.data,e=t.config;this.priceNum.visible=!0,this.priceNum.setType(e.currencyType),this.priceNum.setPrice(e.price),this.priceNum.labelColor=16768995,this.redPoint.visible=t.redPoint()}else{var i=ActSys.ins().getActDataById(2002),n=i.getItemDatas();this.redPoint.visible=n[0].status==ActRewardState.CanGet,this.lbYuan.visible=!0;var a=MathUtil.toInteger(n[0].dabiao/100);this.lbYuan.textFlow=addColorTF("累充"+a+"元")}},e}(BaseItemRender);__reflect(YdssTabItem.prototype,"YdssTabItem"),window.YdssTabItem=YdssTabItem;var TianMoRankConfig=function(){function t(){}return t}();__reflect(TianMoRankConfig.prototype,"TianMoRankConfig");var YdssData=function(){function t(){}return t}();__reflect(YdssData.prototype,"YdssData");var YongZheFirstData=function(){function t(){this.playname="",this._state=0}return t.prototype.setState=function(t){this._state=t},t.prototype.getState=function(){var t=this._state;return!t&&FbSys.ins().yongZheModel.firstFloor>=this.id?1:1==t?2:0},t}();__reflect(YongZheFirstData.prototype,"YongZheFirstData");var YongZheFirstRewardWinItemData=function(){function t(){this.state=0}return Object.defineProperty(t.prototype,"conf",{get:function(){return Cfg.getConfig(YongzheFubenConfig,this.id)},enumerable:!0,configurable:!0}),t}();__reflect(YongZheFirstRewardWinItemData.prototype,"YongZheFirstRewardWinItemData");var YongZheModel=function(){function t(){this.floorId=0,this.firstFloor=0,this.firstDatas=[],this.gqStates=[],this.challengeResult=!0}return t.prototype.parser=function(t){this.floorId=t.readShort(),this.firstFloor=t.readShort();for(var e=Cfg.getConfigLength(YongzheFubenConfig),i=t.readShort(),n=0;e>n;n++){var a=i>n?t.readByte():0;this.gqStates[n]=a}i=t.readShort();for(var n=0;e>n;n++){var a=i>n?t.readByte():0,o=new YongZheFirstData;this.firstDatas[n]=o,o.id=n+1,o.setState(a)}},t.prototype.updateFirstPlayName=function(t){for(var e=t.readShort(),i=0;e>i;i++){var n=this.firstDatas[i];n||(this.firstDatas[i]=n=new YongZheFirstData,n.id=i+1),n.playname=t.readString()}},t.prototype.getGQState=function(t){var e=this.gqStates[t-1];if(e)e=2;else{var i=Cfg.getConfig(YongzheFubenConfig,t);i.customReward&&i.customReward.length&&this.floorId>t&&(e=1)}return isNaN(e)?0:e},t.prototype.isChallenge=function(){var t=Cfg.getConfigLength(YongzheFubenConfig);if(t<this.floorId)return!1;var e=Cfg.getConfig(YongzheFubenConfig,this.floorId);if(e.zslevel>Actor.ins().zsId){Cfg.getConfig(ZhuanShengLevelConfig,e.zslevel);return!1}return!0},t}();__reflect(YongZheModel.prototype,"YongZheModel");var YongZheBossInfo=function(t){function e(){var e=t.call(this)||this;return e.skinName="YongZheBossInfoEUI",e.list.itemRenderer=ItemBaseReward,e.list.dataProvider=e.listArr=new eui.ArrayCollection,e.btn.name="bossbtn",e}return __extends(e,t),e.prototype.setData=function(t){this.conf=t,this.udpateView()},e.prototype.getData=function(){return this.conf},e.prototype.udpateView=function(){this.listArr.source=this.conf.bossReward.concat();var t=FbSys.ins().yongZheModel;this.btn.enabled=t.floorId==this.conf.id&&t.isChallenge()},e}(eui.Component);__reflect(YongZheBossInfo.prototype,"YongZheBossInfo"),window.YongZheBossInfo=YongZheBossInfo;var YongZheBossItem=function(t){function e(){var e=t.call(this)||this;return e.skinName="YongZheBossItemEUI",e.touchChildren=!1,e}return __extends(e,t),e.prototype.setData=function(t){this.conf=t,this.headIcon.source=ResMgr.getMonsterHead(t.head),this.lbgq.text=Lang.fb_str380.replace("$guan$",""+t.index),this.setActivate()},e.prototype.getData=function(){return this.conf},e.prototype.setActivate=function(){this.headIcon.filters=this.conf.id<=FbSys.ins().yongZheModel.floorId?null:DisUtil.grayFilter(),this.imgytg.visible=this.conf.id<FbSys.ins().yongZheModel.floorId},e.prototype.setSelect=function(t){this.selectImg.visible=t},e.prototype.getSelect=function(){return this.selectImg.visible},e}(eui.Component);__reflect(YongZheBossItem.prototype,"YongZheBossItem"),window.YongZheBossItem=YongZheBossItem;var YongZheBossList=function(t){function e(){var e=t.call(this)||this;e.skinName="YongZheBossListEUI",e.bosslist=[e.boss0,e.boss1,e.boss2];for(var i=0,n=e.bosslist;i<n.length;i++){var a=n[i];e.addClickE(a,e.onClick)}return e}return __extends(e,t),e.prototype.onClick=function(t){e.clickCheng(t.target)},e.clickCheng=function(t){return t},e.prototype.setData=function(t){for(var e=0;e<t.length;e++){var i=t[e];if(this.bosslist[e].setData(i),t[e].customReward&&t[e].customReward.length){var n=FbSys.ins().yongZheModel.getGQState(i.id);this.gqReward.setData([i,n])}}},e.prototype.setSelect=function(t,e){this.bosslist[t].setSelect(e)},e.prototype.getSelectData=function(){for(var t=0,e=this.bosslist;t<e.length;t++){var i=e[t];if(i.getSelect())return i.getData()}},__decorate([post()],e,"clickCheng",null),e}(BaseEUI);__reflect(YongZheBossList.prototype,"YongZheBossList"),window.YongZheBossList=YongZheBossList;var YongZheFirstRewardWin=function(t){function e(){var e=t.call(this)||this;return e.layer=LayerMgr.Popup,e.skinName="YongZheFirstRewardWinEUI",e.addBg(),e.list.itemRenderer=YongZheFirstRewardWinItem,e.list.dataProvider=e.listArr=new eui.ArrayCollection,e}return __extends(e,t),e.prototype.open=function(){t.prototype.open.call(this);var e=FbSys.ins();this.addClickE(this.list,this.onClickList),this.addLsn(e.patchYongZheFirstPlayInfo,this.updateView),this.addLsn(e.patchYongZheReceiveReward,this.updateView),e.sendYongZheFirstPlayInfo()},e.prototype.udpateReceiveReward=function(t){},e.prototype.updateView=function(){var t=FbSys.ins().yongZheModel,e=Cfg.getConfigs(YongzheFubenConfig),i=[],n=t.firstDatas,a=-1,o=-1;for(var s in e){var r=e[s];if(!(t.firstFloor+2<r.id)){var u=r.id-1,h=n[u],l=new YongZheFirstRewardWinItemData;l.id=r.id,h&&(l.playname=h.playname,l.state=h.getState()),-1==a&&1==l.state&&(a=u),-1==o&&0==l.state&&(o=u),i[u]=l}}-1==a&&(a=-1==o?0:o),this.listArr.source=i,this.list.validateNow(),this.updatescroller(a)},e.prototype.updatescroller=function(t){var e=164,i=3,n=t+1,a=n*e+(n-1)*i,o=a-e;this.scroller.viewport.scrollV=o},e.prototype.onClickList=function(t){if("btn"==t.target.name){var e=this.list.selectedItem;FbSys.ins().sendYongZheReceiveReward(2,e.id)}},e}(BaseWinSingle);__reflect(YongZheFirstRewardWin.prototype,"YongZheFirstRewardWin"),window.YongZheFirstRewardWin=YongZheFirstRewardWin;var YongZheFirstRewardWinItem=function(t){function e(){var e=t.call(this)||this;return e.skinName="YongZheFirstRewardItemEUI",e.list.itemRenderer=ItemBaseReward,e.list.dataProvider=e.listArr=new eui.ArrayCollection,e.btn.name="btn",e}return __extends(e,t),e.prototype.dataChanged=function(){if(this.data instanceof YongZheFirstRewardWinItemData){this.lbName.text=this.data.playname,this.lbName.visible=!!this.data.playname,this.imgxwyd.visible=!this.data.playname;var t=this.data.conf;switch(this.lbFloor.text=""+t.name+t.index+Lang.common_guan,this.listArr.source=t.firstReward.concat(),this.data.state){case 0:this.lbreceive.visible=this.btn.visible=!1;break;case 1:this.btn.visible=!0,this.btn.redPoint.visible=!0,this.lbreceive.visible=!1;break;case 2:this.btn.visible=!1,this.lbreceive.visible=!0}}},e}(BaseItemRender);__reflect(YongZheFirstRewardWinItem.prototype,"YongZheFirstRewardWinItem"),window.YongZheFirstRewardWinItem=YongZheFirstRewardWinItem;var YongZheGQReward=function(t){function e(){var e=t.call(this)||this;return e.skinName="YongZheGQRewardEUI",e.mc=GFunc.playUIMovie("eff7",42,40,e.gqReward2,-1),e.touchChildren=!1,e}return __extends(e,t),e.prototype.setData=function(t){this._datas=t,this.updateView()},e.prototype.getData=function(){return this._datas},e.prototype.updateView=function(){var t=this._datas[0],e=t.customReward[0];this.gqReward2.data=e;var i=this._datas[1],n=Cfg.getItemCfg(e.id);this.itemname.text=n.getName(),this.itemname.textColor=16708501;var a=addColor(Lang.fb_str379.replace("$guan$",""+t.index),14969600);this.lbgq2.textFlow=addColorTF(a),this.imgState.visible=0!=i,(2==i||1==i)&&(this.imgState.source=2==i?"lilian_zycs_ylq1":"jzhd_zycs_klq");var o=2!=i;o&&(this.gqReward2.setItemKuangEffect(!0,"eff6"),this.gqReward2.setItemEffect(!1)),this.mc.visible=o,this.red.visible=1==i},e}(BaseEUI);__reflect(YongZheGQReward.prototype,"YongZheGQReward"),window.YongZheGQReward=YongZheGQReward;var TianTiConstConfig=function(){function t(){}return t}();__reflect(TianTiConstConfig.prototype,"TianTiConstConfig");var YZZHData=function(){function t(){this.saiji=1,this.jieduan=1,this.buyShengHui=!1,this.isGetExp=!1,this.exp=0,this.level=0,this.taskData1=[],this.taskData2=[],this.rewardDatas=[],this.expDatas=[]}return t.prototype.iniData=function(){for(var t=Cfg.getConfigs(YongZheLevelConfig,this.jieduan),e=0;e<t.length;e++){t[e]}},t.prototype.parser=function(t){this.saiji=t.readByte(),this.saiji<=0||(this.jieduan=t.readByte(),this.buyShengHui=1==t.readByte(),this.parserExpReward(t),this.level=t.readShort(),this.exp=t.readInt(),this.parserReward(t),this.parserJieDuanTask(t),this.parserSaiJiTask(t))},t.prototype.parserReward=function(t){this.rewardDatas.length=0;for(var e=Cfg.getConfigs(YongZheRewardConfig,this.saiji),i=0;i<e.length;i++){var n=e[i],a=new YZZHRewardData;a.level=n.level,a.saiji=this.saiji,this.rewardDatas.push(a)}for(var o=t.readShort(),i=0;o>i;i++){var a=this.rewardDatas[i];a.parser(t)}},t.prototype.parserJieDuanTask=function(t){var e=t.readShort();this.taskData1.length=0;for(var i=0;e>i;i++){var n=new YZZHJieDuanTaskData;n.parser(t),n.taskId=i+1,n.saiji=this.saiji,n.jieduan=this.jieduan,this.taskData1.push(n)}},t.prototype.parserSaiJiTask=function(t){var e=t.readShort();this.taskData2.length=0;for(var i=0;e>i;i++){var n=new YZZHSaiJiTaskData;n.parser(t),n.taskId=i+1,n.saiji=this.saiji,this.taskData2.push(n)}},t.prototype.parserExpReward=function(t){var e=t.readByte();this.expDatas.length=0;for(var i=Cfg.getConfig(YongZheSaiJiConfig,this.saiji).exp,n=0;e>n;n++){var a=new YZZHExpData;a.parser(t),a.id=n+1,a.jieduan=this.jieduan,a.saiji=this.saiji,a.exp=i[n],this.expDatas.push(a)}},t.prototype.parserJieDuanTaskUpdate=function(t){var e=t.readByte(),i=t.readInt(),n=t.readInt(),a=t.readInt(),o=t.readByte(),s=1==e?this.getTackJieDuanDataById(i):this.getTackSaiJiDataById(i);s?(s.value=n,s.finishCount=a,s.state=o):console.log("27-93 任务不存在 type:"+e+"  id "+i)},t.prototype.parserJieDuanTaskGet=function(t){var e=t.readByte(),i=t.readInt(),n=t.readByte(),a=t.readShort();this.level=t.readShort(),this.exp=t.readInt();var o=1==e?this.getTackJieDuanDataById(i):this.getTackSaiJiDataById(i);o?(o.state=n,o.finishCount=a,showtipsSuc("经验+"+o.config.exp)):console.log("27-94 任务不存在 type:"+e+"  id "+i)},t.prototype.getTackJieDuanDataById=function(t){for(var e,i=(this.taskData1.length,0);i<this.taskData1.length;i++){var n=this.taskData1[i];if(n.taskId==t){e=n;break}}return e},t.prototype.getTackSaiJiDataById=function(t){for(var e,i=(this.taskData2.length,0);i<this.taskData2.length;i++){var n=this.taskData2[i];if(n.taskId==t){e=n;break}}return e},t.prototype.parserGetExp=function(t){this.level=t.readShort(),this.exp=t.readInt();var e=t.readByte(),i=t.readByte();this.expDatas[e-1].state=i},t.prototype.parserGetReward=function(t){var e=t.readByte(),i=t.readInt(),n=t.readByte(),a=this.rewardDatas[i-1];return a?1==e?a.state1=n:a.state2=n:console.log("27-96 奖励id不存在:"+i),a},Object.defineProperty(t.prototype,"nextExp",{get:function(){return 0},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"isMax",{get:function(){return this.level>=Cfg.getMaxConfig(YongZheLevelConfig).level},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"openTime",{get:function(){var t=Cfg.getConfig(YongZheConfig),e=t.openTime+this.saiji*GConst.saijiZhouqi;return e-GConst.saijiZhouqi},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"endTime",{get:function(){var t=Cfg.getConfig(YongZheConfig),e=t.openTime+this.saiji*GConst.saijiZhouqi;return 1e3*e-Actor.ins().serverTime},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"jieduanEndTime",{get:function(){var t=(Cfg.getConfig(YongZheConfig),this.openTime+GConst.jieduanZhouqi*this.jieduan);return 1e3*t-Actor.ins().serverTime},enumerable:!0,configurable:!0}),t.prototype.getExp=function(){for(var t=this.taskData1.length,e=0,i=0;t>i;i++){var n=this.taskData1[i];e+=n.config.exp*n.finishCount}return e},t.prototype.maxExp=function(){for(var t=this.taskData1.length,e=0,i=0;t>i;i++){var n=this.taskData1[i];e+=n.config.exp*n.config.done}return e},t.prototype.saijiTaskExp=function(){for(var t=this.taskData2.length,e=0,i=0;t>i;i++){var n=this.taskData2[i];2==n.state&&(e+=n.config.exp)}return e},t.prototype.saijiTaskMaxExp=function(){for(var t=this.taskData2.length,e=0,i=0;t>i;i++){var n=this.taskData2[i];e+=n.config.exp}return e},t.prototype.getCanGetIndex=function(){var t=this.getCanGetIndexxxx();return-1==t?0==this.level?0:this.level-1:t},t.prototype.getCanGetIndexxxx=function(){for(var t=this.rewardDatas.length,e=-1,i=0;t>i;i++){var n=this.rewardDatas[i];if(n.canGet1||n.canGet2){e=i;break}}return e},t.prototype.getCanGetIndex1=function(){for(var t=this.rewardDatas.length,e=-1,i=0;t>i;i++){var n=this.rewardDatas[i];if(n.canGet1){e=i;break}}return e},t.prototype.getCanGetIndex2=function(){var t=this.rewardDatas.length,e=-1;if(this.buyShengHui)for(var i=0;t>i;i++){var n=this.rewardDatas[i];
if(n.canGet2){e=i;break}}return e},t.prototype.getShengHuiExp=function(){for(var t=0,e=0;e<this.expDatas.length;e++){var i=this.expDatas[e];2==i.status&&(t+=i.exp)}return t},t.prototype.getShengHuiSumExp=function(){for(var t=0,e=0;e<this.expDatas.length;e++){var i=this.expDatas[e];t+=i.exp}return t},Object.defineProperty(t.prototype,"nextLevel",{get:function(){var t=Cfg.getMaxConfig(YongZheLevelConfig).level;return this.level>=t?t:this.level+1},enumerable:!0,configurable:!0}),t.prototype.isOpen=function(){return this.saiji>0},t}();__reflect(YZZHData.prototype,"YZZHData");var YZZHExpData=function(){function t(){this.saiji=1,this.jieduan=1,this.id=0,this.exp=0,this.state=0,this.clickRedPint=!0}return t.prototype.parser=function(t){this.state=t.readByte()},t.prototype.getOpenTime=function(){var t=Cfg.getConfig(YongZheConfig),e=t.openTime+this.saiji*GConst.saijiZhouqi-GConst.saijiZhouqi;return e+(this.id-1)*GConst.jieduanZhouqi},t.prototype.isAct=function(){return 1==this.state},t.prototype.canGet=function(){return 0==this.state&&Actor.ins().serverTime/1e3>this.getOpenTime()},t.prototype.noGet=function(){return Actor.ins().serverTime/1e3<this.getOpenTime()},Object.defineProperty(t.prototype,"status",{get:function(){return Actor.ins().serverTime/1e3<this.getOpenTime()?0:1==this.state?2:1},enumerable:!0,configurable:!0}),t}();__reflect(YZZHExpData.prototype,"YZZHExpData");var YZZHJieDuanTaskData=function(){function t(){this.taskId=1,this.type=1,this.saiji=1,this.jieduan=1,this.state=0,this.value=0,this.finishCount=0}return t.prototype.parser=function(t){this.state=t.readByte(),this.value=t.readInt(),this.finishCount=t.readShort()},Object.defineProperty(t.prototype,"config",{get:function(){return(null==this._config||this._config.id!=this.taskId)&&(this._config=Cfg.getConfig(YongZheTaskConfig,this.jieduan,this.taskId)),this._config},enumerable:!0,configurable:!0}),t.prototype.isAct=function(){return 2==this.state},t.prototype.canAct=function(){return 1==this.state},Object.defineProperty(t.prototype,"sort",{get:function(){return 2==this.state?0:1==this.state?2:1},enumerable:!0,configurable:!0}),t}();__reflect(YZZHJieDuanTaskData.prototype,"YZZHJieDuanTaskData");var YZZHRewardData=function(){function t(){this.level=1,this.saiji=1,this.jieduan=1,this.state1=0,this.state2=0}return t.prototype.parser=function(t){this.state1=t.readByte(),this.state2=t.readByte()},Object.defineProperty(t.prototype,"configReward",{get:function(){return this._configReward||(this._configReward=Cfg.getConfig(YongZheRewardConfig,this.saiji,this.level))},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"canGet1",{get:function(){return 0==this.state1&&RechargeActSys.ins().yzzhData.level>=this.configReward.level},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"canGet2",{get:function(){var t=RechargeActSys.ins().yzzhData;return t.buyShengHui&&0==this.state2&&t.level>=this.configReward.level},enumerable:!0,configurable:!0}),t}();__reflect(YZZHRewardData.prototype,"YZZHRewardData");var YZZHSaiJiTaskData=function(){function t(){this.taskId=1,this.type=2,this.saiji=1,this.state=0,this.value=0,this.finishCount=0}return t.prototype.parser=function(t){this.state=t.readByte(),this.value=t.readInt(),this.finishCount=t.readShort()},Object.defineProperty(t.prototype,"config",{get:function(){return(null==this._config||this._config.id!=this.taskId)&&(this._config=Cfg.getConfig(YongZheSeasonTaskConfig,this.saiji,this.taskId)),this._config},enumerable:!0,configurable:!0}),t.prototype.isAct=function(){return 2==this.state},t.prototype.canAct=function(){return 1==this.state},Object.defineProperty(t.prototype,"sort",{get:function(){return 2==this.state?0:1==this.state?2:1},enumerable:!0,configurable:!0}),t}();__reflect(YZZHSaiJiTaskData.prototype,"YZZHSaiJiTaskData");var YZZHActWin=function(t){function e(){var e=t.call(this)||this;return e.init(),e}return __extends(e,t),e.prototype.init=function(){this.skinName="YZZHActWinEUI",this.addBg(),this.mcBg=new MC,this.groupMC.addChild(this.mcBg),this.mcIcon=new McIcon,this.mcIcon.touchEnabled=!1,this.mcIcon.touchChildren=!1,this.groupMC.addChild(this.mcIcon),this.list.itemRenderer=ItemBase},e.prototype.open=function(){t.prototype.open.call(this),this.addClickE(this,this.onClick),this.addLsn(RechargeActSys.ins().patchYZZHBuyUpdate,this.updatePanel),this.updatePanel()},e.prototype.close=function(){for(var e=[],i=0;i<arguments.length;i++)e[i]=arguments[i];t.prototype.close.call(this),this.mcIcon.close()},e.prototype.updatePanel=function(){var t=RechargeActSys.ins().yzzhData,e=Cfg.getConfig(YongZheConfig),i=Cfg.getConfigs(YongZheRewardConfig,RechargeActSys.ins().yzzhData.saiji,CondType.LessEqual,YongZheRewardConfig.level,80);SortUtil.sortOn(i,["sort"],[SortType.up]);for(var n=[],a=0;a<i.length;a++){var o=i[a];n.push(GFunc.creatItemDataByReward(o.reward2))}this.list.dataProvider=new eui.ArrayCollection(n);var s=Cfg.getConfig(YongZheSaiJiConfig,t.saiji);this.lblRewardName1.textFlow=StrUtil.toTF(s.rewardName),this.lblRewardDesc.textFlow=StrUtil.toTF(s.rewardDesc),this.lbDianQuan.text=e.dianquan.toString(),this.btnBuy.label=Cfg.getPayMoneyRMBByYb(e.vipExp)+"元激活",this.mcIcon.open(s.mcIcon),this.lb_name.text=s.rewardName},e.prototype.onClick=function(t){switch(t.target){case this.btnBuy:var e=Cfg.getConfig(YongZheConfig);VipSys.ins().showReCharge(e.vipExp),closeWin(this)}},e}(BaseWin);__reflect(YZZHActWin.prototype,"YZZHActWin"),window.YZZHActWin=YZZHActWin;var YZZHBuyLevelWin=function(t){function e(){return t.call(this)||this}return __extends(e,t),e.prototype.initUI=function(){t.prototype.initUI.call(this),this.addBg(),this.list1.itemRenderer=ItemBase,this.list1.dataProvider=this.list1Array=new eui.ArrayCollection,this.list2.itemRenderer=ItemBase,this.list2.dataProvider=this.list2Array=new eui.ArrayCollection},e.prototype.setSkinName=function(){this.skinName="YZZHBuyLevelWinEUI"},e.prototype.open=function(){var e=new BuyDataNoLimit;e.setBuyFun(function(t){RechargeActSys.ins().sendYZZHBuyLevel(RechargeActSys.ins().yzzhData.level+t)}),e.itemId=0,e.price=0,e.consumeItemId=CurType.JinZuan,e.limitCount=80-RechargeActSys.ins().yzzhData.level,t.prototype.open.call(this,e),this.num=this.defaultBuyLevel(),this.updateView(),this.addClickE(this.add10Btn,this.onTap),this.addClickE(this.sub10Btn,this.onTap),this.addEvent(egret.TouchEvent.TOUCH_BEGIN,this.add10Btn,this.onAddBegin),this.addEvent(egret.TouchEvent.TOUCH_BEGIN,this.sub10Btn,this.onAddBegin),this.addEvent(egret.TouchEvent.TOUCH_END,this,this.onAddend)},e.prototype.defaultBuyLevel=function(){for(var t=1,e=RechargeActSys.ins().yzzhData,i=e.rewardDatas,n=0;n<i.length;n++){var a=i[n];if(a.level>e.level&&a.level%10==0){t=a.level;break}}return t-e.level},e.prototype.updatePanel=function(){var t=RechargeActSys.ins().yzzhData,e=(this.num+t.level,this.getConfigs());SortUtil.sortOn(e,["sort"],[SortType.up]);for(var i=[],n=[],a=0;a<e.length;a++){var o=e[a];i.push(GFunc.creatItemDataByReward(o.reward)),n.push(GFunc.creatItemDataByReward(o.reward2))}this.list1Array.source=i,this.list2Array.source=n},e.prototype.getConfigs=function(){for(var t=RechargeActSys.ins().yzzhData,e=this.num+t.level,i=Cfg.getConfigs(YongZheRewardConfig,RechargeActSys.ins().yzzhData.saiji,CondType.LessEqual,YongZheRewardConfig.level,e).concat(),n=(i.length,t.level-1);n>=0;n--){i[n];i.splice(n,1)}return i},e.prototype.updatePrice=function(){this.allPrice.setType(CurType.JinZuan),this.allPrice.setPrice(this.price),this.updatePanel(),this.lbDesc.visible=!0,this.lbDesc.textFlow=addColorTF("购买"+addColor(this.num.toString(),13967392)+"级升到"+(this.num+RechargeActSys.ins().yzzhData.level)+"级"),this.lbLevelDesc.textFlow=addColorTF("升至"+(this.num+RechargeActSys.ins().yzzhData.level)+"级立即获得以下奖励")},Object.defineProperty(e.prototype,"price",{get:function(){for(var t=RechargeActSys.ins().yzzhData,e=this.num+t.level,i=Cfg.getConfigs(YongZheLevelConfig,CondType.LessEqual,YongZheLevelConfig.level,e),n=0,a=t.level;a<i.length-1;a++){var o=i[a];n+=o.price}return n},enumerable:!0,configurable:!0}),e.prototype.AddNum=function(e){switch(t.prototype.AddNum.call(this,e),e){case this.sub10Btn:this.num-=10;break;case this.add10Btn:this.num<this.buyData.limitCount?this.num<this.buyData.maxBuyCount?this.num+=10:showtipsFail(Lang.shop_str18.replace("$name$",Cfg.getItemCfg(this.buyData.consumeItemId).getName())):(this.isAutoAdd=!1,Timer.ins().remove(this.AddNum,this),showtipsFail(Lang.shop_str2))}this.numLabel.text=this.num.toString(),this.updatePrice()},e.prototype.buy=function(t){var e=GFunc.creatRewardDataById(this.buyData.consumeItemId,this.price);this.buyData.limitCount>0?GFunc.checkConsumeEnough(e)&&(this.buyData.buyFun.obj=this,this.buyData.buyFun.param=[this.num],this.buyData.buyFun.call(),closeWin(this)):showtipsFail(Lang.shop_str2)},e}(BuyWinBase);__reflect(YZZHBuyLevelWin.prototype,"YZZHBuyLevelWin"),window.YZZHBuyLevelWin=YZZHBuyLevelWin;var TianTiDanConfig=function(){function t(){}return t}();__reflect(TianTiDanConfig.prototype,"TianTiDanConfig");var TianTiRankAwardConfig=function(){function t(){}return t}();__reflect(TianTiRankAwardConfig.prototype,"TianTiRankAwardConfig");var YZZHPanelRewardItem=function(t){function e(){var e=t.call(this)||this;return e.skinName="YZZHPanelRewardItemEUI",e.comItem1.touchChildren=!1,e.comItem2.touchChildren=!1,e.comItem1.name="comItem1",e.comItem2.name="comItem2",e}return __extends(e,t),e.prototype.dataChanged=function(){var t=this.data,e=t.configReward;this.bitLevel.text=""+e.level,this.comItem1.data=e.reward,this.comItem1.visible=null!=e.reward,this.comItem2.data=e.reward2,this.comItem2.visible=null!=e.reward2,this.lbNoReward1.visible=null==e.reward,this.lbNoReward2.visible=null==e.reward2,this.updateRedPoint()},e.prototype.updateData=function(){this.dataChanged()},e.prototype.updateRedPoint=function(){var t=this.data;this.imgKlq1.visible=t.canGet1,this.imgYlq1.visible=1==t.state1,this.imgKlq2.visible=t.canGet2,this.imgYlq2.visible=1==t.state2,this.imgLock.visible=!RechargeActSys.ins().yzzhData.buyShengHui,this.imgLevelBg.visible=1==t.state1||t.canGet1,RechargeActSys.ins().yzzhData.level>t.level?(this.imgBg.source="qianglong_bg2",this.imgXian.visible=!1,this.imgLvSeXian.source="yzsh_zycs_jdt3"):RechargeActSys.ins().yzzhData.level==t.level?(this.imgBg.source="qianglong_bg2",this.imgXian.visible=!0,this.imgLvSeXian.source="yzsh_zycs_jdt3"):(this.imgXian.visible=!1,this.imgBg.source="qianlong_bg6",this.imgLvSeXian.source="yzsh_zycs_jdt4")},e}(BaseItemRender);__reflect(YZZHPanelRewardItem.prototype,"YZZHPanelRewardItem"),window.YZZHPanelRewardItem=YZZHPanelRewardItem;var YZZHRewardViewWin=function(t){function e(){var e=t.call(this)||this;return e.init(),e}return __extends(e,t),e.prototype.init=function(){this.skinName="YZZHRewardViewWinEUI",this.addBg(),this.list1.itemRenderer=ItemBaseReward,this.list2.itemRenderer=ItemBaseReward},e.prototype.open=function(){t.prototype.open.call(this),this.addClickE(this,this.onClick);var e=Cfg.getConfig(YongZheSaiJiConfig,RechargeActSys.ins().yzzhData.saiji);this.list2.dataProvider=new eui.ArrayCollection(e.maxReward1),this.list1.dataProvider=new eui.ArrayCollection(e.maxReward2);var i=RechargeActSys.ins().yzzhData;this.btnGotoAct.visible=!i.buyShengHui,this.lbAct.visible=i.buyShengHui},e.prototype.onClick=function(t){switch(t.target){case this.btnGotoAct:openWin(YZZHActWin),closeWin(this)}},e}(BaseWin);__reflect(YZZHRewardViewWin.prototype,"YZZHRewardViewWin"),window.YZZHRewardViewWin=YZZHRewardViewWin;var TitleConfig=function(){function t(){}return t}();__reflect(TitleConfig.prototype,"TitleConfig");var YZZHTaskPanelExpItem=function(t){function e(){var e=t.call(this)||this;return e.mcBtnOk=new MC,e.skinName="YZZHTaskPanelExpItemEUI",e.btnOk.redPoint.visible=!0,e.mcBtnOk.x=e.btnOk.width/2,e.mcBtnOk.y=e.btnOk.height/2,e.mcBtnOk.scaleX=.9,e.mcBtnOk.scaleY=.8,e.btnOk.addChildAt(e.mcBtnOk,e.btnOk.numChildren-1),e.addClickE(e.btnOk,e.onClick),e}return __extends(e,t),e.prototype.onClick=function(t){var e=this.data,i=RechargeActSys.ins().yzzhData;if(i.buyShengHui)RechargeActSys.ins().sendYZZHGetExp(e.id),YZZHTaskPanel.playPiao(this.btnOk.localToGlobal(0,0));else{var n=Cfg.getConfig(YongZheSaiJiConfig,i.saiji),a=new PopupData,o=n.exp[i.jieduan-1];a.desc="激活"+addColor("[神龙令]",16751375)+"每阶段可以免费领取"+addColor(o.toString(),5767068)+"点"+addColor("额外升级经验",16751375)+",是否前往激活?",a.setFunction(this,function(){openWin(YZZHActWin)}),openWin(CommonTipsWin,a),e.clickRedPint=!1,RpFun.showYZZHBoxRedPoint()}},e.prototype.dataChanged=function(){var t=this.data;this.lbExp.text="+"+t.exp,this.lbName.textFlow=addColorTF("赛季阶段"+GFunc.getChineseNum(t.id)),this.lbDesc.text="购买神龙令可领取"+t.exp+"exp",this.lbTime.text=DateUtil.formatDayTime(1e3*t.getOpenTime(),"yy.mo.dd")+"可领取",this.updateRedPoint()},e.prototype.updateRedPoint=function(){var t=this.data;this.currentState=t.status.toString();var i=RpSys.ins().getData(YZZHWin,YZZHMainPanel,YZZHTaskPanel,e,t.id);i?(this.mcBtnOk.playFile(ResMgr.getEffName("pubbtn"),-1),this.btnOk.redPoint.visible=!0):(this.btnOk.redPoint.visible=!1,this.mcBtnOk.visible=!1,this.mcBtnOk.stop())},e}(BaseItemRender);__reflect(YZZHTaskPanelExpItem.prototype,"YZZHTaskPanelExpItem"),window.YZZHTaskPanelExpItem=YZZHTaskPanelExpItem;var YZZHTaskPanelJieDuanItem=function(t){function e(){var e=t.call(this)||this;return e.mcBtnOk=new MC,e.skinName="YZZHTaskPaneTaskItemEUI",e.btnOk.redPoint.visible=!0,e.mcBtnOk.x=e.btnOk.width/2,e.mcBtnOk.y=e.btnOk.height/2,e.mcBtnOk.scaleX=.9,e.mcBtnOk.scaleY=.8,e.btnOk.addChildAt(e.mcBtnOk,e.btnOk.numChildren-1),e.addClickE(e,e.onClick),e}return __extends(e,t),e.prototype.onClick=function(t){var e=this.data;switch(t.target){case this.btnOk:RechargeActSys.ins().sendYZZHJieDuanTaskGet(e.type,e.taskId),YZZHTaskPanel.playPiao(this.btnOk.localToGlobal(0,0));break;case this.btnGoto:var i=e.config,n=GFunc.createTaskNavData(i.controlTarget);n.setsucceedFrontFun(function(){closeWin(YZZHWin)}),n["goto"]()}},e.prototype.dataChanged=function(){var t=this.data,e=t.config;this.lbExp.text="+"+e.exp;var i=addColor("("+t.value+"/"+e.target+")",t.value>=e.target?5767068:16727614);this.lbName.textFlow=addColorTF(""+e.name+i),this.lbDesc.text=e.desc,this.lbCount.textFlow=addColorTF("完成次数:"+addColor("("+t.finishCount+"/"+e.done+")",5767068)),this.currentState=t.state.toString(),1==t.state?this.mcBtnOk.playFile(ResMgr.getEffName("pubbtn"),-1):(this.mcBtnOk.visible=!1,this.mcBtnOk.stop())},e}(BaseItemRender);__reflect(YZZHTaskPanelJieDuanItem.prototype,"YZZHTaskPanelJieDuanItem"),window.YZZHTaskPanelJieDuanItem=YZZHTaskPanelJieDuanItem;var YZZHTaskPanelSaijiItem=function(t){function e(){var e=t.call(this)||this;return e.mcBtnOk=new MC,e.skinName="YZZHTaskPaneTaskSaiJiItemEUI",e.btnOk.redPoint.visible=!0,e.mcBtnOk.x=e.btnOk.width/2,e.mcBtnOk.y=e.btnOk.height/2,e.mcBtnOk.scaleX=.9,e.mcBtnOk.scaleY=.8,e.btnOk.addChildAt(e.mcBtnOk,e.btnOk.numChildren-1),e.addClickE(e,e.onClick),e}return __extends(e,t),e.prototype.onClick=function(t){var e=this.data;switch(t.target){case this.btnOk:RechargeActSys.ins().sendYZZHJieDuanTaskGet(e.type,e.taskId),YZZHTaskPanel.playPiao(this.btnOk.localToGlobal(0,0));break;case this.btnGoto:var i=e.config,n=GFunc.createTaskNavData(i.controlTarget);n.setsucceedFrontFun(function(){closeWin(YZZHWin)}),n["goto"]()}},e.prototype.dataChanged=function(){var t=this.data,e=t.config;this.lbExp.text="+"+e.exp;var i=addColor("("+t.value+"/"+e.target+")",t.value>=e.target?5767068:15733780);this.lbName.textFlow=addColorTF(""+e.name+i),this.lbDesc.text=e.desc,this.currentState=t.state.toString(),1==t.state?this.mcBtnOk.playFile(ResMgr.getEffName("pubbtn"),-1):(this.mcBtnOk.visible=!1,this.mcBtnOk.stop()),this.lbCount.text=""},e}(BaseItemRender);__reflect(YZZHTaskPanelSaijiItem.prototype,"YZZHTaskPanelSaijiItem"),window.YZZHTaskPanelSaijiItem=YZZHTaskPanelSaijiItem;var TotalSigninConfig=function(){function t(){}return t}();__reflect(TotalSigninConfig.prototype,"TotalSigninConfig");var TouxianConfig=function(){function t(){}return t}();__reflect(TouxianConfig.prototype,"TouxianConfig");var ChengHaoInfo=function(){function t(t){this.endTime=0,this.power=0,this.config=t}return t.prototype.getPower=function(){return this.power<=0&&(this.power=GFunc.getPower(this.config.attrs)),this.power},t}();__reflect(ChengHaoInfo.prototype,"ChengHaoInfo");var ChengHaoItem=function(t){function e(){var e=t.call(this)||this;return e.skinName="ChengHaoItemEUI",e.attrs.dataProvider=e.attrDatas=new eui.ArrayCollection([]),e.timeTxt.visible=!1,e.addClickE(e,e.onClick),e}return __extends(e,t),e.prototype.onClick=function(t){switch(t.target){case this.btnSet:case this.btnSet1:var e=this.data;e.config.Id!=ChengHaoSys.ins().showID?ChengHaoSys.ins().sendChangeShow(e.config.Id):ChengHaoSys.ins().sendChangeShow(0)}},e.prototype.dataChanged=function(){if(this.data instanceof ChengHaoInfo){var t=this.data;if(this.imgMC=getEffName("ch_zycs_"+t.config.img),this.labRare.textFlow=addColorTF(""+Lang.zb_str2+StrUtil.addColor(Lang.common_xiyoudu[t.config.rare],GConst.rareColor[t.config.rare])),this.totalPower.text=t.getPower().toFixed(0),this.updateTime(),this.attrDatas.replaceAll(StrUtil.strsToTF(AttrData.parse(t.config.attrs))),t.endTime>=0){t.config.Id==ChengHaoSys.ins().showID?(this.btnSet.label=Lang.fuwen_str1,this.btnSet.visible=!0,this.btnSet1.visible=!1):(ChengHaoSys.ins().showID?this.btnSet1.label=Lang.zb_str3:this.btnSet1.label=Lang.zb_str4,this.btnSet1.visible=!0,this.btnSet.visible=!1),this.lackImg.visible=!1;var e=DateUtil.formatMiniDateTime(t.endTime);this.timeTxt.text=""+Lang.zb_str5+(0==t.endTime?Lang.common_str87:new Date(e).toLocaleDateString())}else this.btnSet.visible=!1,this.btnSet1.visible=!1,this.lackImg.visible=!0}},e.prototype.updateTime=function(){var t=this.data,e=""+t.config.condition;if(t.endTime>0){var i=DateUtil.formatMiniDateTime(t.endTime)-Actor.ins().serverTime;i>0&&(e+="\n"+StrUtil.addColor(Lang.common_str11+getFormatTime(i/1e3,"dd天hh小时mm分钟ss秒"),5949490))}this.frontTxt.textFlow=addColorTF(e)},e}(BaseItemRender);__reflect(ChengHaoItem.prototype,"ChengHaoItem"),window.ChengHaoItem=ChengHaoItem;var TouxianTaskConfig=function(){function t(){}return t}();__reflect(TouxianTaskConfig.prototype,"TouxianTaskConfig");var logicSys=System.logicSys,ChengHaoSys=function(t){function e(){var e=t.call(this)||this;return e.showID=0,e.infoList=[],e.infoDict={},e.timeDict={},e._totalAttrs={},e.sysId=PackId.Title,e.reg(1,e.patchListUpdate),e.reg(2,e.doAdd),e.reg(3,e.doRemove),e.reg(4,e.patchUpdateShow),e}return __extends(e,t),e.ins=function(){return t.getIns.call(this,e)},e.prototype.sendGetList=function(){this.sendBase(1)},e.prototype.patchListUpdate=function(t){for(var e={},i=t.readInt(),n=0;i>n;++n)e[t.readInt()]=t.readUnsignedInt();this.initList(e),this.showID=t.readInt()},e.prototype.doAdd=function(t){this.change(t.readInt(),t.readUnsignedInt())},e.prototype.doRemove=function(t){this.change(t.readInt(),-1)},e.prototype.sendChangeShow=function(t){var e=this.getBytes(4);e.writeInt(t),this.send(e)},e.prototype.patchUpdateShow=function(t){var e=t.readInt();this.showID=e;var i=LogicSys.ins().centerEntity;return i.data.title=e,i.setTitle(e),e},e.prototype.sortFunc=function(t,e){return t.endTime<0==e.endTime<0?t.config.Id>e.config.Id?1:-1:t.endTime<0?1:-1},e.prototype.initList=function(t){this.timeDict=t,this.infoDict={},this._totalAttrs={},this.infoList=[];var e=Cfg.getConfigs(TitleConfig,CondType.NONE);for(var i in e){var n=new ChengHaoInfo(e[i]);if(n.config.Id in t){n.endTime=t[n.config.Id];for(var a in n.config.attrs)this._totalAttrs[n.config.attrs[a].type]=(this._totalAttrs[n.config.attrs[a].type]||0)+n.config.attrs[a].value}else n.endTime=-1;e[i].isShow&&(this.infoList[this.infoList.length]=this.infoDict[n.config.Id]=n)}this.infoList.sort(this.sortFunc)},e.prototype.change=function(t,e){if(this.infoDict&&t in this.infoDict&&t in this.timeDict!=e>=0){var i=this.infoDict[t];i.endTime=e,0>e?delete this.timeDict[t]:this.timeDict[t]=e,this.infoList.sort(this.sortFunc);for(var n=0>e?-1:1,a=0,o=i.config.attrs;a<o.length;a++){var s=o[a];this._totalAttrs[s.type]=(this._totalAttrs[s.type]||0)+n*s.value}}},e.prototype.getTotalAttrs=function(){for(var t=[],e=this.infoDict[1].config.attrs,i=0,n=e;i<n.length;i++){var a=n[i],o=this._totalAttrs[a.type]?this._totalAttrs[a.type]:0;t.push(new AttrData(a.type,o))}return t},e}(BaseSys);__reflect(ChengHaoSys.prototype,"ChengHaoSys");var System;!function(t){t.chengHaoSys=BagSys.ins.bind(ChengHaoSys)}(System||(System={})),window.ChengHaoSys=ChengHaoSys;var ZhuZaiBossItem=function(t){function e(){var e=t.call(this)||this;return e.skinName="ZhuZaiBossItemEUI",e.listArray=new eui.ArrayCollection,e.list.dataProvider=e.listArray,e.list.itemRenderer=ItemBaseReward,e.lbPaiMin.textFlow=addColorTF(Lang.sjbs_str0,5949490,!0),e.lbPaiMin.name="rank",e}return __extends(e,t),e.prototype.dataChanged=function(){var t=this.data;this.listArray.source=t.getConfig().rewards,this.lbLv.text=GFunc.getZSName(t.getConfig().zslvmin)+"-"+GFunc.getZSName(t.getConfig().zslvmax),this.imgState.visible=!t.isLive,this.imgHead.source=ResMgr.getMonsterHead("monhead"+t.getConfig().head),this.lbBossName.text=t.getConfig().name,FbSys.ins().zhuzaiMode.isCurSelect(t.id)?this.bg.source="zz_zycs_k2":this.bg.source="zz_zycs_k1"},e}(BaseItemRender);__reflect(ZhuZaiBossItem.prototype,"ZhuZaiBossItem"),window.ZhuZaiBossItem=ZhuZaiBossItem;var TSSZConfig=function(){function t(){}return t}();__reflect(TSSZConfig.prototype,"TSSZConfig");var ZhuZaiDamageItem=function(t){function e(){var e=t.call(this)||this;return e.skinName="ZhuZaiDamageItemEUI",e}return __extends(e,t),e.prototype.dataChanged=function(){var t=this.data;this.txt0.text=t.ranl.toString(),this.txt1.text=t.name.toString(),this.txt2.text=t.hurt.toString()},e}(BaseItemRender);__reflect(ZhuZaiDamageItem.prototype,"ZhuZaiDamageItem"),window.ZhuZaiDamageItem=ZhuZaiDamageItem;var ZhuZaiDamageWin=function(t){function e(){return t.call(this)||this}return __extends(e,t),e.prototype.initUI=function(){t.prototype.initUI.call(this),this.skinName="ZhuZaiDamageWinEUI",this.layer=LayerMgr.Popup,this.addBg(),this.list.itemRenderer=ZhuZaiDamageItem,this.arrCollect=new eui.ArrayCollection,this.list.dataProvider=this.arrCollect},e.prototype.open=function(e){t.prototype.open.call(this),this.updateRank(e)},e.prototype.updateRank=function(t){this.arrCollect.source=t,this.lbZanWu.visible=0==t.length},e}(BaseWinSingle);__reflect(ZhuZaiDamageWin.prototype,"ZhuZaiDamageWin"),window.ZhuZaiDamageWin=ZhuZaiDamageWin;var ZhuZaiFbPanel=function(t){function e(){var e=t.call(this)||this;return e.mcBtnOk=new MC,e.initUI(),e}return __extends(e,t),e.prototype.initUI=function(){this.skinName="ZhuZaiFbPanelEUI",this.list.itemRenderer=ItemBaseRewardEvent},e.prototype.open=function(){t.prototype.open.call(this),this.addClickE(this.lbOk,this.onClick),this.addClickE(this.list,this.onClick),this.addLsn(FbSys.ins().patchZhuZaiReward,this.updateData),this.addLsn(FbSys.ins().patchZhuZaiMyHurt,this.updateHurt),this.addLsn(LogicSys.ins().patchEnterMap,this.updataMapName),this.addLsn(FbSys.ins().patchUpdateFbTime,this.updataMapName),this.addItemTapE(this.list,this.onMenuClick),this.updateData(),this.updataMapName()},e.prototype.updateData=function(){var t=FbSys.ins().zhuzaiMode.getCurRewarData(),e=t.config;this.list.dataProvider=new eui.ArrayCollection(e.rewards),this.updateHurt()},e.prototype.updateHurt=function(){var t=FbSys.ins().zhuzaiMode,e=FbSys.ins().zhuzaiMode.getCurRewarData();this.lbDesc.textFlow=addColorTF(Lang.fb_str372+"·"+e.index);var i=e.config,n=t.getZhuZaiBossData().getConfig().bossId,a=Cfg.getConfig(MonstersConfig,n);(t.myHurt/a.HpMax*100).toFixed(2),(i.damage/a.HpMax*100).toFixed(2);this.lbHurt.textFlow=addColorTF(Lang.fb_str373.replace("$damge$",GFunc.overLength(i.damage,2))),1==e.state?this.currentState="get":this.currentState=t.myHurt>=i.damage?"canget":"noget"},e.prototype.updataMapName=function(){FbSys.ins().commonEndTick>0&&Timer.ins()["do"](0,1e3,0,this.SweepCountDown,this,TimerType.LAST)},e.prototype.SweepCountDown=function(t){this.bmpTime.text=FbSys.ins().surplusTime+"s"},e.prototype.onMenuClick=function(t){var e=FbSys.ins().zhuzaiMode,i=FbSys.ins().zhuzaiMode.getCurRewarData(),n=t.itemRenderer,a=n.data;0==i.state&&e.myHurt>=i.config.damage?(FbSys.ins().sendZhuZaiReward(i.zhuzaiid,i.index),t.stopImmediatePropagation()):GFunc.openItemTips(a)},e.prototype.onClick=function(t){switch(t.target){case this.lbOk:var e=FbSys.ins().zhuzaiMode.getCurRewarData();FbSys.ins().sendZhuZaiReward(e.zhuzaiid,e.index)}},e}(BasePanel);__reflect(ZhuZaiFbPanel.prototype,"ZhuZaiFbPanel"),window.ZhuZaiFbPanel=ZhuZaiFbPanel;var UpItemConfig=function(){function t(){}return t}();__reflect(UpItemConfig.prototype,"UpItemConfig");var ZhuZaiRewardItem=function(t){function e(){var e=t.call(this)||this;return e.skinName="ZhuZaiRewardItemEUI",e.listArray=new eui.ArrayCollection,e.list.dataProvider=e.listArray,e.list.itemRenderer=ItemBaseReward,e}return __extends(e,t),e.prototype.dataChanged=function(){var t=this.data;this.listArray.source=t.rewards,this.rankTxt.text=t.rankdesc},e}(BaseItemRender);__reflect(ZhuZaiRewardItem.prototype,"ZhuZaiRewardItem"),window.ZhuZaiRewardItem=ZhuZaiRewardItem;var ZhuZaiRewardWin=function(t){function e(){return t.call(this)||this}return __extends(e,t),e.prototype.initUI=function(){this.winType=WinType.OverlayWin,this.skinName="ZhuZaiRewardWinEUI",this.list.itemRenderer=ZhuZaiRewardItem,this.list.dataProvider=this.listArray=new eui.ArrayCollection,t.prototype.initUI.call(this)},e.prototype.open=function(){t.prototype.open.call(this),this.tab.dataProvider=new eui.ArrayCollection(["bqz_zycs_syml","bqz_zycs_zxz","bqz_zycs_phs","bqz_zycs_ygtm"]),this.updateData(1)},e.prototype.updateData=function(t){var e=Cfg.getConfigs(ZhuZaiRankRewardConfig,t),i=Cfg.getConfig(ZhuZaiFubenConfig,t);this.listArray.source=e,this.itemReward1.data=i.killDropshow[0],this.itemReward2.data=i.lotteryDropshow[0],this.lbName.text=i.name+" "+GFunc.getZSName(i.zslvmin)},e.prototype.onTabClicked=function(t){if(void 0===t&&(t=null),this.tab.selectedIndex>=0){var e=this.tab.selectedIndex+1;this.updateData(e)}},e}(BaseWinSingle);__reflect(ZhuZaiRewardWin.prototype,"ZhuZaiRewardWin"),window.ZhuZaiRewardWin=ZhuZaiRewardWin;var ZhuZaiBossData=function(){function t(){}return t.prototype.parser=function(t){this.isLive=t.readBoolean(),this.id=t.readInt()},t.prototype.getConfig=function(){return this.zhuZaiFubenConfig||(this.zhuZaiFubenConfig=Cfg.getConfig(ZhuZaiFubenConfig,this.id)),this.zhuZaiFubenConfig},t}();__reflect(ZhuZaiBossData.prototype,"ZhuZaiBossData");var ZhuZaiDiceData=function(){function t(){}return t.prototype.parser=function(t){this.name=t.readString(),this.point=t.readShort()},t}();__reflect(ZhuZaiDiceData.prototype,"ZhuZaiDiceData");var ZhuZaiHurtRankData=function(){function t(){}return t.prototype.parser=function(t){this.ranl=t.readInt(),this.name=t.readString(),this.hurt=t.readDouble()},t}();__reflect(ZhuZaiHurtRankData.prototype,"ZhuZaiHurtRankData");var SortUtil=function(){function t(){}return t.sortOn=function(t,e,i){var n=this;return void 0===i&&(i=null),t.sort(function(t,a){for(var o=0,s=0,r=e.length,u=0;r>u;u++){var h=e[u];i&&i[u]==SortType.down?(t[h]>a[h]&&(o|=1<<r-1-u),t[h]<a[h]&&(s|=1<<r-1-u)):(t[h]<a[h]&&(o|=1<<r-1-u),t[h]>a[h]&&(s|=1<<r-1-u))}return n.sortDesc(o,s)}),t},t.insertionSort=function(t,e,i){void 0===i&&(i=null);for(var n=t.length,a=1;n>a;a++){for(var o=t[a],s=a-1;s>=0&&1==this.sortFun(t[s],o,e,i);)t[s+1]=t[s],s--;t[s+1]=o}},t.sortFun=function(t,e,i,n){void 0===n&&(n=null);for(var a=0,o=0,s=i.length,r=0;s>r;r++){var u=i[r];n&&n[r]==SortType.down?(t[u]>e[u]&&(a|=1<<s-1-r),t[u]<e[u]&&(o|=1<<s-1-r)):(t[u]<e[u]&&(a|=1<<s-1-r),t[u]>e[u]&&(o|=1<<s-1-r))}return this.sortDesc(a,o)},t.sortAsc=function(t,e){return e>t?-1:t>e?1:0},t.sortDesc=function(t,e){return t>e?-1:e>t?1:0},t.binSearch=function(e,i,n){if(void 0===n&&(n=null),!e||0==e.length)return 0;n||(n=t.sortAsc);for(var a=0,o=e.length-1;o>=a;){var s=o+a>>1,r=e[s];-1==n(r,i)?a=s+1:o=s-1}return a},t}();__reflect(SortUtil.prototype,"SortUtil");var UseArg1=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return __extends(e,t),e}(UseArg);__reflect(UseArg1.prototype,"UseArg1");var TemplatePanelWin=function(t){function e(){var e=t.call(this)||this;return e.winType=WinType.MainWin,e}return __extends(e,t),e.panelNames=[TemplatePanel],e}(BaseWinAutoTab);__reflect(TemplatePanelWin.prototype,"TemplatePanelWin"),window.TemplatePanelWin=TemplateItem;var TemplateWin=function(t){function e(){var e=t.call(this)||this;return e.layer=LayerMgr.Popup,e}return __extends(e,t),e.prototype.setSkinName=function(){this.skinName=""},e.prototype.open=function(){t.prototype.open.call(this),this.addClickE(this,this.onClick),this.addLsn(RpSys.ins().patchRp,this.updateRp),this.updatePanel()},e.prototype.updatePanel=function(){},e.prototype.updateStatus=function(){},e.prototype.onClick=function(t){t.target},e}(BaseWinSingle);__reflect(TemplateWin.prototype,"TemplateWin"),window.TemplateWin=TemplateWin;var Server=function(t){function e(){return t.call(this)||this}return __extends(e,t),e.ins=function(){return t.getIns.call(this,e)},e.send=function(t,e,i){void 0===i&&(i=-1);var n=Socket.ins().creatBytes(t,e);n.writeHead(t,e),-1!=i&&n.writeInt(i),Socket.ins().send(n)},e.gms=function(t){LogicSys.ins().sendGMCommad(t),console.log(t)},e.addMonster=function(t){var e=LogicSys.ins().createEntityByType(EntityType.MONSTER_CLIENT),i=new EntityGatherMonsterData;i.configID=t,e.setData(i),e.x=LogicSys.ins().centerEntity.x+100,e.y=LogicSys.ins().centerEntity.y,LogicSys.ins().addEntity(e)},e.stopAI=function(){for(var t=LogicSys.ins().getEntityList(),e=0,i=t;e<i.length;e++){var n=i[e];n.AI.stop()}},e.atkMonster=function(t){var e=SkillSys.ins().getSkillDataById(t);if(e){var i=LogicSys.ins().getNearestEnemyByAI(LogicSys.ins().centerEntity.AI),n=new Damage;VirtualServer.ins().calDamage(LogicSys.ins().centerEntity,i,e,n),console.log(LogicSys.ins().centerEntity.getName()+"攻击力:"+n.selfAtk+" "+this.getDamageTypeName(n.damageType)+" "+i.getName()+"造成了  "+n.value+"  点伤害,反伤  "+n.fs)}else console.log("你没有这个仙术!")},e.atkPlayer=function(t){var e=new SkillData;e.skillId=t;var i=LogicSys.ins().getNearestEnemyByAI(LogicSys.ins().centerEntity.AI),n=new Damage;VirtualServer.ins().calDamage(i,LogicSys.ins().centerEntity,e,n),console.log(i.getName()+"攻击力:"+n.selfAtk+" "+this.getDamageTypeName(n.damageType)+" "+LogicSys.ins().centerEntity.getName()+"造成了  "+n.value+"  点伤害,反伤  "+n.fs)},e.atkMe=function(){var t=LogicSys.ins().getNearestEntity(LogicSys.ins().centerEntity),e=new SkillDamageRange;e.senderPos=t,e.targetPos=t,e.damageType=DamageTypes.FS,e.value=1,SkillSys.ins().showBlood(1,e)},e.getDamageTypeName=function(t){var e="";switch(t){case DamageTypes.BLANK:e="不显示";break;case DamageTypes.HIT:e="命中";break;case DamageTypes.WSYJ:e="无视一击";break;case DamageTypes.MISS:e="MISS";break;case DamageTypes.HXYJ:e="会心一击";break;case DamageTypes.ZYYJ:e="卓越一击";break;case DamageTypes.ZMYJ:e="暴击一击";break;case DamageTypes.FS:e="反伤";break;case DamageTypes.TSYJ:e="天使一击";break;case DamageTypes.SSYJ:e="神圣一击";break;case DamageTypes.WWSH:e="威望伤害"}return e},e.item=function(t,e){void 0===e&&(e=100),this.gms("@additem "+t+" "+e)},e.map=function(){e.openMap?MapContainer.ins().clearDrawGrid():MapContainer.ins().drawGrid(),e.openMap=!e.openMap},e.guide=function(t,e,i){void 0===e&&(e=1),void 0===i&&(i=1);var n=new GuideData;n.id=t,n.content=[],n.steps=[],n.endstep=5,n.params=[],Guider.ins().show(n)},e.yb=function(t){void 0===t&&(t=1e8),this.gms("@addyuanbao "+t)},e.gold=function(t){void 0===t&&(t=1e8),this.gms("@addgold "+t)},e.mt=function(t){this.gms("@maintaskSet "+t)},e.exp=function(t){this.gms("@addexp "+t)},e.lv=function(t){this.gms("@setlevel "+t)},e.pos=function(){for(var t=LogicSys.ins().getEntityList(),e="",i=0,n=0,a=t;n<a.length;n++){var o=a[n];if(o instanceof EntityRole){i++;var s=(o.x/MapBase.CELL_SIZE).toFixed(1),r=(o.y/MapBase.CELL_SIZE).toFixed(1),u=o.masterHandle==Actor.ins().handle?"自己":"敌人";
e+=o.getName()+"-"+u+"--坐标:("+s+","+r+"),("+o.x.toFixed(1)+","+o.y.toFixed(1)+")\n",MapContainer.ins().checkWalkable(parseInt(s),parseInt(r))||(e+="(不可行走)");var h=o.AI.getCurTarget();h&&(e+="目标:"+h.getName()+","+h.handle)}}e="人物数量:"+i+"\n"+e+"\n";var l="";i=0;for(var p=0,c=t;p<c.length;p++){var o=c[p];if(o instanceof EntityMonster){i++;var s=Math.floor(o.x/MapBase.CELL_SIZE),r=Math.floor(o.y/MapBase.CELL_SIZE);l+=o.getName()+","+o.handle+"--类型:"+o.entityType+"--坐标:"+LogicSys.ins().getXYStr(o,1)+"\n",MapContainer.ins().checkWalkable(s,r)||(l+="(不可行走)")}}l="怪物数量:"+i+"\n"+l+"\n",console.log(e+l),this.gms("@monpos")},e.showName=function(){for(var t=LogicSys.ins().getEntityList(),e=0,i=t;e<i.length;e++){var n=i[e];n.setHpAndNameVisible(!0)}},e.msglog=function(t){ChatSys.ins().patchLogMsg(t)},e.vip=function(t){this.gms("@setvip "+t)},e.wudi=function(){e.gms("@clearbag 0"),e.gms("@clearbag 1"),e.lv(3e3);for(var t=1,i=t;3>=i;i++)LogicSys.ins().sendCreateSunRole(i,0);for(var i=0;i<CurType.max;i++)e.gms("@additem "+i+" 100000000");e.gms("@enhanceAll 15"),e.gms("@setWingstar 175 0"),e.gms("@setWingstar 175 1"),e.gms("@setWingstar 175 2"),e.gms("@appendAll 200"),e.gms("@cultureFull"),e.gms("@setstarsoullevel 863 0"),e.gms("@setstarsoullevel 863 1"),e.gms("@setstarsoullevel 863 2");for(var i=0;i<ItemType.Max;i++)e.Sitemtype(i+1,10)},e.Sitemtype=function(t,i){void 0===i&&(i=1);var n=Cfg.getConfigs(ItemConfig,CondType.NONE);for(var a in n){var o=n[a];o.type==t&&e.gms("@additem "+a+" "+i)}},e.hide=function(){for(var t=LogicSys.ins().getEntityList(),e=0,i=t;e<i.length;e++){var n=i[e];n.visible=!n.visible}},e.hideui=function(){LayerMgr.Main.visible=!LayerMgr.Main.visible,LayerMgr.Main_UP.visible=!LayerMgr.Main_UP.visible,LayerMgr.Popup.visible=!LayerMgr.Popup.visible,LayerMgr.Tips.visible=!LayerMgr.Tips.visible},e.showScale=function(){for(var t=LogicSys.ins().getEntityList(),e=0,i=t;e<i.length;e++){var n=i[e];console.log(n.getName()+"缩放:"+n.getBodyScale())}},e.test=function(){for(var t=0;1e3>t;t++)TipsSys.ins().showtipsNew("123",16711680,0)},e.nc=function(t,e){var i=this;void 0===e&&(e=100),Timer.ins()["do"](0,600,e,function(){openWin(t),Timer.ins()["do"](300,0,1,function(){closeWin(t)},i,TimerType.NONE)},this,TimerType.NONE)},e.rp=function(){console.log(RpSys.ins().getDatas())},e.open=function(t){for(var e=[],i=1;i<arguments.length;i++)e[i-1]=arguments[i];openWin.apply(void 0,[t].concat(e))},e.loger=function(){var t="";for(var e in LogicSys.ins().loger){var i=LogicSys.ins().getEntityByHandle(parseFloat(e));i||(t+=e+"添加但是未删除,场景也无此实体")}console.log(t)},e.slog=function(){Socket.ins().isLog=!Socket.ins().isLog},e.createManyNpc=function(t){void 0===t&&(t=1);for(var e=0;t>e;e++){var i=[10011,10012,10013][Math.floor(MathUtil.radom(0,3))],n=LogicSys.ins().createSingleNpc(i);n.x=MathUtil.radom(500,3e3),n.y=MathUtil.radom(500,3e3)}},e.setDistance=function(t){void 0===t&&(t=8),this.distanceGrid=t},e.Sguale=function(){var t=Cfg.getConfigs(ItemConfig,CondType.NONE);for(var i in t)e.gms("@additem "+i+" 1")},e.updateLog=function(){},e.JJCLog=function(){var t=SkillSys.ins().tongji;for(var e in t.log){var i=t.log[e];i.isMy&&console.log(this.getStrByTongji(i))}for(var e in t.log){var i=t.log[e];i.isMy||console.log(this.getStrByTongji(i))}},e.getStrByTongji=function(t){var e="",i=t.isMy?"我":"敌";return e+=t.name+"("+i+")-职业"+t.job+"-仙术次数"+t.skillCount+"-总伤"+t.damageTotle+"-伤害次数"+t.damageCount+"-平均伤害"+t.damageAvg+"-受到伤害次数"+t.beDamageCount+"-受到伤害平均"+t.beDamageAvg},e.qianghua=function(t){ResMgr.strengthMax=t},e.skillEditor=function(){openWinToLayer(SkillEditorWin,LayerMgr.Top)},e.logFunc=function(){logFunc(RpFun)},e.getGMCommand=function(t){return"@chongzhi "+t.yb},e.loginSkillEditor=function(){LoginEditor.ins().login()},e.loginLabelEditor=function(){LoginLabelEditor.ins().login()},e.testTimer=function(){Timer.ins()["do"](1e3,1e3,1,this.callback,this,TimerType.NONE,10,"str")},e.callback=function(t,e,i){console.log(t,e,i)},e.testLHJ=function(t){void 0===t&&(t=1);var e=new LHJ(new egret.DisplayObject);e.start(0,720,1e3*t)},e.testHashCount=function(){var t=egret.$hashCount;setInterval(function(){var e=egret.$hashCount,i=e-t;t=e,console.log("创建对象:"+i)},1e3)},e.showLv=function(t,e){void 0===e&&(e=1e3);var i=new RoleUpLevelTipsWin;i.x=LayerMgr.Tips.width/2-i.width/2,i.bottom=350,i.alpha=0,i.open(t);var n=egret.Tween.get(i);n.to({y:320,alpha:1},300).wait(e).to({alpha:0},300).call(function(){DisUtil.remove(i)}),LayerMgr.Tips.addChild(i)},e.SGuanQia=function(t){e.gms("@custom "+t)},e.testText=function(){var t=addColor("文字1",16777215),e=addColor("文字2",16711680),i=addColor("文字0"+t+e+"文字1",0),n=addColorTF(i+"文字5");console.log(n)},e.testBolood=function(){var t=new SkillDamageRange;t.senderPos=LogicSys.ins().centerEntity,t.targetPos=LogicSys.ins().centerEntity,t.damageType=DamageTypes.HUIXUE,t.value=100,SkillSys.ins().showBlood1(100,t)},e.ok=function(){gms("@zslevel 20"),Slv(3e3),Sgq(100)},e.fuhuoboss=function(){for(var t=0;30>t;t++)gms("@bossRefresh "+t)},e.openMyDamage=function(){this.isOpenMyDamage=!this.isOpenMyDamage},e.showhp=function(t,e){void 0===t&&(t=814),void 0===e&&(e=1600);var i=new BossBloodData;i.bossId=100010,i.hp=t,i.playerList.length=0,i.fbId=10001,i.bossName="殇骨",i.bossHead="monhead10001",i.bossLv=1,i.hpMax=e,FbSys.ins().bossBloodData=i,openWin(BossBloodWin)},e.testSocket=function(t){var e=egret.Base64Util.decode(t),i=new ByteArray(e);i.setArrayBuffer(e),i.position=Socket.HEAD_SIZE,Socket.ins().delBytes(i)},e.testCfg=function(){Cfg.getConfig(SkillsLevelConfig,0,0)},e.act=function(t){var e=ActSys.ins().getActDataById(t);if(e){var i="",n="";switch(e.getActOpenState()){case ActOpenState.Unenabled:n="未开启";break;case ActOpenState.End:n="已结束";break;case ActOpenState.Jiesuan:n="已结算";break;case ActOpenState.Open:n="已开启"}switch(i+="活动开启状态:"+n+"\n",n=""+e.onPlace,e.onPlace){case ActOnPlace.huodong:n+=" 活动大厅 ActWin";break;case ActOnPlace.openserver:n+=" 开服冲榜(七天排行) ActRankWin";break;case ActOnPlace.hefu:n+=" 活合服活动 ActHeFuWin";break;case ActOnPlace.juezhan:n+=" 决战活动 ActJueZhanWin";break;case ActOnPlace.YiYuanHaoLi:n+=" 1元豪礼 ActYiYuanHaoLiWin";break;case ActOnPlace.QMKH:n+=" 全民狂欢 ActQMKHWin";break;case ActOnPlace.CSK:n+=" 超时空 ActCSKWin";break;case ActOnPlace.KFLC:n+=" 开服累充 ActKFLCWin";break;case ActOnPlace.CZCB:n+=" 次周活动冲榜 ActRankWin2"}i+="活动显示位置:"+n+"\n",i+="活动类型:"+e.type+"_"+e.subType+"\n",i+="活动开始时间:"+new Date(e.startTime).toLocaleString()+" 时间戳"+e.startTime+"\n",i+="活动结算时间:"+new Date(e.jiesuanTime).toLocaleString()+" 时间戳"+e.jiesuanTime+"\n",i+="活动结束时间:"+new Date(e.endTime).toLocaleString()+" 时间戳"+e.endTime+"\n",i+="服务器时间:"+new Date(Actor.ins().serverTime).toLocaleString()+" 时间戳"+Actor.ins().serverTime+"\n",console.log(i)}else console.log("服务器未下发此活动ID:"+t+"，请检查活动ID是否正确，或活动配置是否正确")},e.openMap=!1,e.distanceGrid=8,e.isOpenMyDamage=!1,e}(BaseSys);__reflect(Server.prototype,"Server");var System;!function(t){t.server=Server.ins.bind(Server)}(System||(System={}));var Sgq=Server.SGuanQia,gms=Server.gms,Sitem=Server.item,Smap=Server.map,Sguide=Server.guide,Syb=Server.yb,Smt=Server.mt,Sexp=Server.exp,Sgold=Server.gold,Slv=Server.lv,Spos=Server.pos,SshowName=Server.showName,Svip=Server.vip,Swudi=Server.wudi,Shide=Server.hide,Shideui=Server.hideui,SshowScale=Server.showScale,Srp=Server.rp,Sopen=Server.open,Sitemtype=Server.Sitemtype,Slock=Server.slog,Sgl=Server.Sguale,Sloger=Server.loger,SupdateLog=Server.updateLog,Sqianghua=Server.qianghua,SJJCLog=Server.JJCLog.bind(Server),SSkillEditor=Server.skillEditor,SlogFunc=Server.logFunc,Sok=Server.ok,Sfuhuoboss=Server.fuhuoboss,Sshowhp=Server.showhp,StestSocket=Server.testSocket,Sact=Server.act,SopenMyDamage=Server.openMyDamage.bind(Server);window.Server=Server;var ShowEffWin=function(t){function e(){var e=t.call(this)||this;return e.layer=LayerMgr.Popup,e.winType=WinType.NormalWin,e.aotuPlay=!0,e.effDic=[ResDir.EFF,ResDir.BODY,ResDir.SHENMO,ResDir.MONSTER,ResDir.NPC],e}return __extends(e,t),e.prototype.initUI=function(){t.prototype.initUI.call(this),this.skinName="ShowEffWinEUI",this.setSkinPart("dropDownBodyFoder",new DropDown),this.addBg(),this.mc=new MC,this.groupMc.addChild(this.mc),this.dropDownBodyFoder.bindData(this.effDic),this.dropDownBodyFoder.text=this.effDic[0],this.checkLoopPlay.selected=this.aotuPlay},e.prototype.open=function(){t.prototype.open.call(this),this.addClickE(this.btnShowEff,this.ShowEffWin),this.addChangeE(this.checkLoopPlay,this.onCheckBox0)},e.prototype.ShowEffWin=function(){var t="res/"+this.dropDownBodyFoder.text+"/"+this.textEffName.text;this.mc.playFile(t,this.aotuPlay?-1:1,function(){},!1)},e.prototype.onCheckBox0=function(t){var e=this.checkLoopPlay.selected;this.aotuPlay=e},e}(BaseWinSingle);__reflect(ShowEffWin.prototype,"ShowEffWin"),window.ShowEffWin=ShowEffWin;var CompressTextureProcessor=function(){function t(t,e){this.usePackEtc1Ktx=!1,this.ignoreResource=t,this.usePackEtc1Ktx=e}return t.prototype.convertURL=function(e,i){for(var n=t.fileSuffix,a=0,o=n;a<o.length;a++){var s=o[a];if(-1!==e.indexOf(s))return e.replace(s,i)}return e},t.prototype.createCompressTextureResourceInfo=function(t){if(this.ignoreResource&&this.ignoreResource(t))return t;var e=egret.Capabilities.supportedCompressedTexture;if(e.pvrtc){var i=this.convertURL(t.url,".pvr.ktx");return{name:i,url:i,type:"pvrtc.ktx",root:t.root}}if(e.etc1){var i=this.convertURL(t.url,".ktx"),n={name:i,url:i,type:"etc1.ktx",root:t.root};return this.usePackEtc1Ktx&&(n.url=this.convertURL(t.url,".pack.etc1.ktx"),n.type="pack.etc1.ktx"),-1!==t.url.indexOf(".png")&&(n.etc1_alpha_url=this.convertURL(t.url,"_alpha.ktx")),n}return t},t.prototype.onLoadStart=function(t,e){var i=this.createCompressTextureResourceInfo(e);return"pvrtc.ktx"===i.type||"etc1.ktx"===i.type||"pack.etc1.ktx"===i.type?t.load(i,i.type):t.load(e,RES.processor.ImageProcessor)},t.prototype.onRemoveStart=function(t,e){var i=this.createCompressTextureResourceInfo(e);if("pvrtc.ktx"===i.type||"etc1.ktx"===i.type||"pack.etc1.ktx"===i.type)return t.unload(i);var n=t.get(e);n?n.dispose():egret.warn("CompressTextureProcessor: onRemoveStart lose resource = "+e.name)},t.fileSuffix=[".png",".jpg","jpeg"],t}();__reflect(CompressTextureProcessor.prototype,"CompressTextureProcessor",["RES.processor.Processor"]);var GFunc=function(){function t(){}return t.iniClearMovieClipDatasUI=function(){this.clearMovieClipDatasUI.rwjx=1,this.clearMovieClipDatasUI.rwk=1,this.clearMovieClipDatasUI.rwtx=1,this.clearMovieClipDatasUI.qjzlzjm=1,this.clearMovieClipDatasUI.actIconCircle=1,this.clearMovieClipDatasUI.actIconCircle=1,this.clearMovieClipDatasUI.jlgl=1,this.clearMovieClipDatasUI.shenmojdt1=1,this.clearMovieClipDatasUI.shenmojdt2=1},t.setItemDataRewardValue=function(t,e,i){for(var n=[],a=0;a<t.length;a++){var o=ItemDataReward.clone(t[a]);o[e]=i,n.push(o)}return n},t.creatItemDataByReward=function(t){var e=this.creatItemDataById(t.id);return e.count=t.count,e},t.creatItemDataById=function(t,e){var i=new ItemData;if(i.id=t,!isNaN(e)&&(i.count=e),ItemType.isEquip(i.cfg.type))for(var n=0;n<i.cfg.exattr.length;n++){var a=i.cfg.exattr[n],o=new AttrData(a.type,a.value);i.attZY.push(o)}return i},t.creatItemsDataById=function(e){for(var i=[],n=0;n<e.length;n++)i[n]=t.creatItemDataById(e[n]);return i},t.creatRewardDatasById=function(t,e){void 0===e&&(e=0);var i=[];i=t instanceof Array?t:[t];var n=[];n=e instanceof Array?e:[e];for(var a=[],o=0;o<i.length;o++)a[o]=this.creatRewardDataById(i[o],n[o]||0);return a},t.creatUnknown=function(t,e){var i=new ItemData;return i.id=t,i.count=e,i},t.creatRewardDataById=function(t,e){void 0===e&&(e=0);var i=(Cfg.getItemCfg(t),new ItemDataReward);return i.id=t,i.count=e,i},t.creatRewardByItemData=function(t){var e=new ItemDataReward;return e.id=t.id,e.count=t.count,e},t.creatGuideData=function(t,e,i){void 0===i&&(i=[]);var n=new GuideData,a=Cfg.getConfig(GuideConfig,e);return n.id=a.id,n.content=a.content,n.steps=a.steps,n.endstep=a.content.length,n.params=i,n},t.getItemName=function(t,e){var i;return i=t instanceof ItemDataReward?Cfg.getItemCfg(t.id):t instanceof ItemData?t.cfg:Cfg.getItemCfg(t),e||(e=GConst.PZColor[i.quality]),StrUtil.addColor(i.getName(),e)},t.getItemName1=function(t){return addColorTF(this.getItemName(t,5205383))},t.getItemCount=function(e){return t.isCur(e)?Actor.ins().getCurrency(e):BagSys.ins().getItemCount(e)},t.isCur=function(t){return t<CurType.max},t.isConsumeEnoughByItemId=function(t,e){var i=new ItemDataReward;return i.id=t,i.count=e,this.isConsumeEnough(i)},t.isConsumeEnough=function(t){for(var e=t instanceof Array?t:[t],i=!0,n=0;n<e.length;n++){var a=e[n];if(i=i&&this.getItemCount(a.id)>=a.count,!i)return!1}return i},t.checkConsumeEnough1=function(t){for(var e=t instanceof Array?t:[t],i=!0,n=0;n<e.length;n++){var a=e[n];if(i=i&&this.isConsumeEnough(a),!i){showtipsFail(Cfg.getItemCfg(a.id).getName()+Lang.common_str92);break}}return i},t.checkConsumeEnough=function(t){for(var e=t instanceof Array?t:[t],i=!0,n=0;n<e.length;n++){var a=e[n];if(i=i&&this.isConsumeEnough(a),!i){var o=Cfg.getConfigs(GainItemWayConfig,CondType.Equal,GainItemWayConfig.itemId,a.id);if(o.length>0){var s=this.getItemCount(a.id),r=Cfg.getConfig(StoreItemConfig,CondType.Equal,StoreItemConfig.itemId,a.id),u=a.count-s;r&&(u=Math.ceil((a.count-this.getItemCount(a.id))/r.count)),isShowWin(ShopGoodsWarn)?showtipsFail(Cfg.getItemCfg(a.id).getName()+Lang.common_str92):TipsSys.ins().setBuyGoodsWarn(a.id,u)}else showtipsFail(Cfg.getItemCfg(a.id).getName()+Lang.common_str92);break}}return i},t.checkCurrency=function(t,e){if(t!=CurType.exp){if(t==CurType.yb){if(this.getItemCount(t)<e){if(urlParam.isShenhe)showtipsFail("仙玉不足");else{var i=new PopupData("仙玉不足,是否前往充值?");i.setFunction(this,function(){openWin(RechargeWin)}),openWin(CommonTipsWin1,i)}return!1}return!0}var n=new ItemDataReward;n.id=t,n.count=e;var a=this.checkConsumeEnough(n);return a}},t.isCurrency=function(t,e){if(t!=CurType.exp){var i=new ItemDataReward;return i.id=t,i.count=e,this.isConsumeEnough(i)}},t.checkSVIP=function(t){return Actor.ins().sVipLv>=t?!0:(urlParam.isShenhe||showtipsFail(Lang.common_str10),openWin(RechargeWin),!1)},t.isInCity=function(){return FbSys.ins().fbId==GConst.MainCityFbId},t.isGuaJiFb=function(t){return void 0===t&&(t=FbSys.ins().fbId),t<Cfg.getConfig(EnumConfig).GUAJI_FUBEN_MAX_ID&&t>GConst.MainCityFbId},t.isFb=function(t){return t>Cfg.getConfig(EnumConfig).GUAJI_FUBEN_MAX_ID},t.isCurExpFb=function(){return FbSys.ins().fubenGroupConfig&&FbSys.ins().fubenGroupConfig.group==FbGroup.Emo},t.isInGuaJiFb=function(){return this.isGuaJiFb(FbSys.ins().fbId)},t.isInEquipBossFb=function(){return FbSys.ins().fubenGroupConfig.group==FbGroup.EQUIP},t.isGuildWar=function(){var t=Cfg.getConfig(FubenConfig,FbSys.ins().fbId);return t.group==FbGroup.GuildWarPVE||t.group==FbGroup.GuildWarPVP},t.isJJCGroup=function(t){return t==FbGroup.JJC||t==FbGroup.MineBattle||t==FbGroup.TianTi},t.GetLvStrByLv=function(t,e){void 0===e&&(e=!1);var i,n=e?"\n":"";if(t>400){var a=Math.ceil(t/400)-1;i=""+this.lvName[this.getChineseNum(a)]+n+"(Lv."+(t-400*a)+")"}else i="Lv."+t;return i},t.GetLvStrColorByLv=function(t,e,i){void 0===e&&(e=15849237),void 0===i&&(i=15849237);var n=StrUtil.addColor(this.GetLvStrByLv(t),i);return n},t.getZSBackLv=function(t){return t},t.getZSLevel=function(t){return 0},t.getEquipTypeByPos=function(t){return t},t.checkFbCondition=function(e){var i=Cfg.getConfig(FubenConfig,e);return e==GConst.MainCityFbId?Actor.ins().level<i.condition.level?(showtipsFail(Lang.fb_str258.replace("$lv$",""+i.condition.level)),!1):!0:Actor.ins().level<i.condition.level?(showtipsFail(Cfg.getFubenName(e)+Lang.fb_str259.replace("$lv$",""+t.GetLvStrByLv(i.condition.level))),openWin(MeNeedLevelWin,1),!1):FbSys.ins().fbId==e?!1:!0},t.showRewardTips=function(e){if(e){var i=t.creatItemDataById(e.id);t.openItemTips(i)}},t.getItemDataRewardByJob=function(t){for(var e=[],i=0;i<t.length;i++)t[i].job&&t[i].job!=JobConst.ZhanShi||e.push(t[i]);return e},t.getJobNameByJob=function(t){return Lang.common_jobName1[t]},t.getshenmoEquipNameByType=function(t){return Lang.common_shenmoequipName[t]},t.getEquipNameByType=function(t){return Lang.common_equipName[t]},t.getZuJiNameByType=function(t){return Lang.common_zuJiName[t]},t.getTypeName=function(t){return Lang.common_attrTypeName[t]},t.getColorName=function(t){return Lang.common_quality[t]+Lang.common_se},t.getEquipAttrTypeName=function(t){return["基础属性","特殊属性","铸造属性","精炼属性","灵石属性"][t]},t.getEquipAttrTypeColor=function(t){return[14668213,5949490,14668213,14668213,14668213][t]},t.getEquipAttr=function(t,e){var i=GConst.SXColor[t],n=AttrData.getFm(i,i," ","+");return""+AttrData.parse([e],{fm:n}).join("")},t.getEquipAttrColor=function(t,e){var i=AttrData.getFm(e,e," ","+");return""+AttrData.parse([t],{fm:i}).join("")},t.getEquipAttrNoColor=function(t,e,i,n){var a=AttrData.getFm(i,n," ","+"),o=this.getTypeName(t)+"（"+AttrData.parse([e],{fm:a}).join("\n")+"）";return o},t.getChineseNum=function(t,e){if(void 0===e&&(e=!1),!e&&20>t)return this.getChineseNum2(t);for(var i=Lang.common_number,n=Lang.common_sign,a=Lang.common_sign2,o="",s=1,r=t.toString(),u=[],h=Math.ceil(r.length/4),l=0;h>l;l++){var p=r.length-4*l,c=p-4>0?p-4:0;u.unshift(r.substring(c,p))}for(var d=0;d<u.length;d++){var g=u[d];if(!(parseInt(g)<=0)){for(var f=0;f<g.length;f++){var y=parseInt(g.charAt(f));0!=y?0==s&&y>0?(o+=i[s]+i[y]+n[g.length-f-1],s=y):o+=i[y]+n[g.length-f-1]:s=y}o+=a[u.length-d-1]}}return o},t.getChineseNum2=function(t){var e="";return e=10>t?Lang.common_number[t]:10==t?Lang.common_sign[1]:Lang.common_sign[1]+Lang.common_number[t%10]},t.isSysUpdate=function(t){var e=!1;if(Cfg.hasConfig(LimitConfig,t)){var i=Cfg.getConfig(LimitConfig,t),n=void 0;n=0==i.isOpen||!isNaN(i.isShenHe)&&urlParam.isShenhe&&!i.isShenHe||i.openPfids&&i.openPfids.length&&!~i.openPfids.indexOf(+urlParam.apptype)||i.hideAppids&&i.hideAppids.length&&~i.hideAppids.indexOf(+urlParam.appid)?!1:Actor.ins().isLocation?i.isOpen>=1:i.isOpen>=2;var a=Actor.ins().serverOpenDay<i.closeday,o=Actor.ins().sVipLv>=i.svipLv,s=Actor.ins().serverOpenDay>=i.day,r=FbSys.ins().guajiData.guanId>=i.custom,u=Actor.ins().zsId>=i.zslevel;if(n&&a&&(e=i.svipLv>0&&o?!0:s&&r&&u),259==t){var h=Actor.ins().vipLv,l=h>=Cfg.getVipMaxLv(),p=e&&l;e=p}}return e},t.isSysOpen=function(t){var e=this.getSysOpenCode(t);return e==SysCheckCode.code0},t.checkSysOpen=function(t){var e=this.getSysOpenCode(t),i=Cfg.getConfig(LimitConfig,t);return e==SysCheckCode.code1&&showtipsFail(Lang.npc_str21),e==SysCheckCode.code2&&showtipsFail(Lang.fb_str260),e==SysCheckCode.code3&&showtipsFail(Lang.fb_str262),e==SysCheckCode.code4&&showtipsFail(Lang.fb_str262),e==SysCheckCode.code5&&showtipsFail(i.sysName+Lang.fb_str261.replace("$day$",""+(i.day+1))),e==SysCheckCode.code6&&showtipsFail(""+i.sysName+this.getZSNameBydb(i.zslevel)+Lang.common_str43),e==SysCheckCode.code7&&showtipsFail(Lang.gj_str24.replace("$count$",""+i.custom)),e==SysCheckCode.code8&&showtipsFail(Lang.common_str122.replace("$lv$",""+Cfg.getVipMaxLv())),e==SysCheckCode.code0},t.getSysOpenCode=function(t){if(Cfg.hasConfig(LimitConfig,t)){var e=Cfg.getConfig(LimitConfig,t);if(!e)return SysCheckCode.code0;if(0==e.isOpen||!Actor.ins().isLocation&&e.isOpen<2||!isNaN(e.isShenHe)&&urlParam.isShenhe&&!e.isShenHe||e.openPfids&&e.openPfids.length&&!~e.openPfids.indexOf(+urlParam.apptype)||e.hideAppids&&e.hideAppids.length&&~e.hideAppids.indexOf(+urlParam.appid))return SysCheckCode.code4;if(259==t){var i=Actor.ins().vipLv,n=i>=Cfg.getVipMaxLv();return n?SysCheckCode.code0:SysCheckCode.code8}if(0==e.fubenopen&&FbSys.ins().fbId>Cfg.getConfig(EnumConfig).GUAJI_FUBEN_MAX_ID)return SysCheckCode.code1;if(e.kuafuhihe&&this.isKuaFu())return SysCheckCode.code2;if(Actor.ins().serverOpenDay>=e.closeday)return SysCheckCode.code3;if(e.svipLv>0&&Actor.ins().sVipLv>=e.svipLv)return SysCheckCode.code0;if(Actor.ins().zsId<e.zslevel)return SysCheckCode.code6;if(FbSys.ins().guajiData.guanId<e.custom)return SysCheckCode.code7;if(Actor.ins().serverOpenDay<e.day)return SysCheckCode.code5}return SysCheckCode.code0},t.getFbRate=function(t){return t>=GConst.fbrate.length&&(t=GConst.fbrate.length-1),GConst.fbrate[t]},t.isEquip=function(t){return t>EquipPos.WEAPON&&t<EquipPos.EMBLEM},t.playUIMovie=function(t,e,i,n,a,o){void 0===a&&(a=1),void 0===o&&(o=null);var s=new MC;return s.x=e,s.y=i,s.playFile(getEffName(t),a,o),n&&n.addChild(s),s},t.playUIMC=function(t,e,i,n,a,o,s){void 0===a&&(a=1),void 0===o&&(o=null);var r=new s;return r.x=e,r.y=i,r.playFile(getEffName(t),a,o),n&&n.addChild(r),r},t.playMapMovie=function(t,e,i,n,a,o){void 0===n&&(n=null),void 0===a&&(a=1),void 0===o&&(o=null);var s=new MC;return s.x=e,s.y=i,s.playFile(getEffName(t),a,o),n&&n.addChild(s),s},t.playMovieOnLayer=function(t){this.playUIMovie(t,LayerMgr.Tips.width/2,350,LayerMgr.Tips)},t.flyTo=function(t,e,i,n,a,o,s){void 0===n&&(n=1e3),t.x=e.x,t.y=e.y;var r=new XY;r.x=i.x,r.y=i.y;var u=i.x-e.x,h=i.y-e.y,l=Math.sqrt(u*u+h*h),p=l/n*1e3,c=egret.Tween.get(t);c.to({x:r.x,y:r.y},p,a).call(function(){o&&o.call(s)},this)},t.flyToBag=function(t,e,i,n){void 0===i&&(i=0),void 0===n&&(n=0);var a=getWin(MainUIButton);if(a){var o=e.localToGlobal(0,0).clone(),s=ObjPool.pop(BaseImage);s.source=ResMgr.getItemIcon(Cfg.getItemCfg(t).getIcon()),s.anchorOffsetX=32,s.anchorOffsetY=32,s.touchEnabled=!1,s.x=o.x+i,s.y=o.y+n,LayerMgr.Popup.addChild(s);var r=a.getToggleBtn(MainUIButton.NAV_BAG);this.flyToBag1(s,r)}},t.flyToBag1=function(t,e){var i=e.localToGlobal(0,0).clone(),n=t.localToGlobal(0,0).clone();i.x=i.x+e.width/2,i.y=i.y+e.height/2,this.flyTo(t,n,i,1e3,egret.Ease.sineInOut,function(){var i=egret.Tween.get(t);i.to({scaleX:0,scaleY:0},350).call(function(){DisUtil.remove(t),DisUtil.flashAnObj(e,200)})})},t.move=function(t,e,i,n,a){var o=this;void 0===n&&(n=1e3),void 0===a&&(a=!0),egret.Tween.removeTweens(t);var s=egret.Tween.get(t);t.x=e.x,t.y=e.y,s.to({x:i.x,y:i.y,alpha:1},n,egret.Ease.sineInOut).call(function(){o.move(t,i,e,n)}),a&&!t.hasEventListener(egret.Event.REMOVED_FROM_STAGE)&&t.once(egret.Event.REMOVED_FROM_STAGE,function(){egret.Tween.removeTweens(t)},t)},t.zoom=function(t,e,i,n,a,o){var s=this;void 0===o&&(o=!0);var r=egret.Tween.get(t);return t.scaleX=t.scaleY=e,n&&t.$count>=n?(egret.Tween.removeTweens(t),void delete t.$count):(r.to({scaleX:i,scaleY:i},a,egret.Ease.sineInOut).call(function(){s.zoom(t,i,e,n,a),t.$count?t.$count=Number(t.$count)+1:t.$count=1}),void(o&&!t.hasEventListener(egret.Event.REMOVED_FROM_STAGE)&&t.once(egret.Event.REMOVED_FROM_STAGE,function(){egret.Tween.removeTweens(t)},t)))},t.getDamageName=function(t){return Lang.common_damageTypeName[t]},t.getDirBy2Point=function(t,e,i){void 0===i&&(i=!1);var n;return n=1!=Cfg.getConfig(FubenConfig,FbSys.ins().fbId).dirType||i?DirUtil.get4Dir(t,e):DirUtil.get8Dir(t,e)},t.getSmeltIndex=function(t,e){var i=Cfg.getItemCfg(e);return 1e4*t+1e3*i.rank+100*i.quality+10*i.subType+i.star},t.isKuaFu=function(){return GameLogin.ins().loginType!=CrossLoginType.COMMON},t.isBenFu=function(){return GameLogin.ins().loginType==CrossLoginType.COMMON},t.randomArr=function(t,e){void 0===e&&(e=!0);var i,n=[];if(e)for(i=0;t>i;i++)n.push(i);else for(i=0;t>i;i++)n.push(i+1);for(i=0;t>i;i++){var a=MathUtil.toInteger(Math.random()*t),o=n[i];n.splice(i,1,n[a]),n.splice(a,1,o)}return n},t.playLight=function(t){void 0===t&&(t=180);var e=this.shapeLight;if(!e||null==e.parent){(!e||e.width!=LayerMgr.getStage().stageWidth&&e.width!=LayerMgr.getStage().stageHeight)&&(e=this.shapeLight=new egret.Shape,e.graphics.beginFill(16777215,.8),e.graphics.drawRect(0,0,LayerMgr.getStage().stageWidth,LayerMgr.getStage().stageHeight),e.graphics.endFill()),LayerMgr.Top.addChild(e);egret.Tween.get(new egret.Shape).wait(300).call(function(){DisUtil.shakeIt(MapContainer.ins(),40,200)}),egret.Tween.get(e).to({alpha:0},t).to({alpha:.8},50).to({alpha:0},t).to({alpha:.8},50).to({alpha:0},t).call(function(){e.alpha=.8,DisUtil.remove(e)})}},t.getDayServerDownTimer=function(t){void 0===t&&(t=Actor.ins().serverTime);var e=new Date(Actor.ins().serverTime);e.setHours(0,0,0);var i=Actor.ins().serverTime-e.getTime(),n=(DateUtil.MS_PER_DAY-i)/1e3;return n},t.isAutoBianShenFuBen=function(t){var e=Cfg.getConfig(FubenConstConfig).changeFubenGroup;return e.indexOf(t)>=0},t.isPkFuben=function(t){var e=[FbGroup.RedFortress,FbGroup.GuildWarPVP];return e.indexOf(t)>-1},t.overLength=function(t,e){void 0===e&&(e=1);var i=null;return i=1e5>t?t:1e8>t?MathUtil.getNumber(t/1e4,e)+Lang.common_wan:MathUtil.getNumber(t/1e8,e)+Lang.common_yi},t.openItemTips=function(e){if(e){var i=void 0;if(e instanceof ItemData)i=e;else{i=t.creatItemDataById(e.id);var n=t.getItemCount(e.id);i.count=n}if(ItemType.isEquip(i.cfg.type))openWin(EquipTipsWin,i,BagSys.ins().getEquipByIndex1(i.cfg.subType));else if(i.cfg.type==ItemType.baoxiang&&0!=i.handle)openWin(ItemUseBoxWin,i);else if(i.cfg.type==ItemType.SelectBox)openWin(ItemTipsWin,i);else if(i.cfg.type==ItemType.title)openWin(TitleTipsWin,i);else if(i.cfg.type==ItemType.ShenqiHuanHua)openWin(ItemTipsMCWin,new TipsMcShenqiData(i));else if(i.cfg.type==ItemType.WingHuanHua)openWin(ItemTipsMCWin,new TipsMcWingData(i));else if(i.cfg.type==ItemType.SzHuanHua)openWin(ItemTipsMCWin,new TipsMcSzData(i));else if(i.cfg.type==ItemType.MeilinHuanHua)openWin(ItemTipsMCWin,new TipsMcMeilinData(i));else if(i.cfg.type==ItemType.DamonHuanHua)openWin(ItemTipsMCWin,new TipsMcDamonData(i));else if(i.cfg.type==ItemType.YongbingHuanHua)openWin(ItemTipsMCWin,new TipsMcYongbingData(i));else if(i.cfg.type==ItemType.ShenmoHuanHua)openWin(ItemTipsMCWin,new TipsMcShenmoData(i));else if(i.cfg.type==ItemType.DamonMozhen)openWin(ItemTipsMCWin,new TipsMcDamonMozhenData(i));else if(i.cfg.type==ItemType.YongbingMozhen)openWin(ItemTipsMCWin,new TipsMcYongbingMozhenData(i));else if(i.cfg.type==ItemType.ShenmoMozhen)openWin(ItemTipsMCWin,new TipsMcShenmoMozhenData(i));else if(i.cfg.type==ItemType.FootEquip){var a=FootSys.ins().getTipsDatas(i);openWin(FootEquipTipsWin,a[0],a[1])}else i.cfg.type==ItemType.ShengLingYinJi?openWin(ShengLingYinJiTipsWin,i):openWin(ItemTipsWin,i)}},t.getItemTipsMCData=function(t){var e;return t.cfg.type==ItemType.ShenqiHuanHua?e=new TipsMcShenqiData(t):t.cfg.type==ItemType.WingHuanHua?e=new TipsMcWingData(t):t.cfg.type==ItemType.SzHuanHua?e=new TipsMcSzData(t):t.cfg.type==ItemType.MeilinHuanHua?e=new TipsMcMeilinData(t):t.cfg.type==ItemType.DamonHuanHua?e=new TipsMcDamonData(t):t.cfg.type==ItemType.YongbingHuanHua?e=new TipsMcYongbingData(t):t.cfg.type==ItemType.ShenmoHuanHua?e=new TipsMcShenmoData(t):t.cfg.type==ItemType.DamonMozhen?e=new TipsMcDamonMozhenData(t):t.cfg.type==ItemType.YongbingMozhen?e=new TipsMcYongbingMozhenData(t):t.cfg.type==ItemType.ShenmoMozhen&&(e=new TipsMcShenmoMozhenData(t)),e},t.createEntityUI=function(){var t=new EntityRoleUI;return t},t.getPower=function(t){var e=0;for(var i in t)e+=this.getPower1(t[i].type,t[i].value);return e>>0},t.getPower1=function(t,e){var i=0;return t==AttrType.Atk?(i+=Cfg.getConfig(AttrPowerConfig,AttrType.atAtkMin).power*e/100,i+=Cfg.getConfig(AttrPowerConfig,AttrType.atAtkMax).power*e/100):t<AttrType.atCount&&(i=Cfg.getConfig(AttrPowerConfig,t).power*e/100),i},t.createTaskNavData=function(t){var e=new TaskNavDataBase(t),i=getDefinitionByName("TaskNavDataType"+e.type);return i?new i(t):null},t.playShenmoHanZhao=function(t){isShowWin(MainWin)&&getWin(MainWin).playShenmoHanZhao(t)},t.getGainItemWayConfig=function(e){for(var i=[],n=Cfg.getConfigs(GainItemWayConfig,CondType.Equal,GainItemWayConfig.itemId,e),a=0,o=n;a<o.length;a++){var s=o[a];if(s.sysid>0)i.push(s);else{var r=ActSys.ins().getActDataById(s.actid);if(r&&r.isSeeActivity()){var u=!1;r.onPlace==ActOnPlace.huodong?u=t.isSysOpen(45):r.onPlace==ActOnPlace.openserver?u=t.isSysOpen(276):r.onPlace==ActOnPlace.KFLC?u=t.isSysOpen(266):r.onPlace==ActOnPlace.CZCB?u=t.isSysOpen(308):r.onPlace==ActOnPlace.juezhan?u=t.isSysOpen(999):r.onPlace==ActOnPlace.TCLY?u=t.isSysOpen(352)&&ActSys.ins().getBtnConfigs(ActOnPlace.TCLY).length>0:r.onPlace==ActOnPlace.YDSS||r.onPlace==ActOnPlace.YDSS2?u=XianLuSys.ins().ShowYdssRule():r.onPlace==ActOnPlace.ActHefu&&(u=t.isSysOpen(332)),u&&i.push(s)}}}return SortUtil.sortOn(i,["sort"],[SortType.down]),i},t.itemDataRewardBeishu=function(t,e){for(var i=[],n=0;n<t.length;n++){var a=new ItemDataReward;a.id=t[n].id,a.count=MathUtil.toInteger(t[n].count*e,0),a["double"]=e,i.push(a)}return i},t.mergeItemDataReward=function(t,e){for(var i=0;i<e.length;i++)this.mergeItemDataReward1(t,e[i]);return t},t.mergeItemDataReward1=function(t,e){for(var i=null,n=0;n<t.length;n++)t[n].id==e.id&&(i=t[n],i.count=i.count+e.count);if(!i){var a=new ItemDataReward;a.id=e.id,a.count=e.count,a.eff=e.eff,t.push(a)}},t.createEquipTipsAttrData=function(t,e){for(var i=[],n=0;n<t.length;n++){var a=new EquipTipsAttrData;a.attr.value=t[n].value,a.attr.type=t[n].type,a.type=e,i.push(a)}return i},t.createEquipTipsAttrData2=function(t,e,i,n){void 0===n&&(n=EquipTipsAttrType.strengthen);for(var a=[],o=0;o<t.length;o++){var s=new EquipTipsAttrData;s.attr.value=t[o].value,s.attr.type=t[o].type,n==EquipTipsAttrType.strengthen?(s.strengthenAttr=e[o]?e[o]:null,s.levelUpAttr=null):n==EquipTipsAttrType.levelUp&&(s.levelUpAttr=e[o]?e[o]:null,s.strengthenAttr=null),s.type=i,a.push(s)}return a},t.createEquipTipsAttrData1=function(t,e,i){for(var n=[],a=0;a<t.length;a++){var o=t[a].value,s=e[a]?e[a].value:0,r=new EquipTipsAttrData;r.attr.value=Math.abs(o-s),r.attr.type=t[a].type,r.type=i,t[a].value>s?r.contrastSize=ContrastSize.More:t[a].value==s?r.contrastSize=ContrastSize.Equal:r.contrastSize=ContrastSize.None,n.push(r)}return n},t.getEquipName=function(e){var i=e.star>0?""+e.star+Lang.common_xing:"",n=e.rank+Lang.common_jie+Lang.common_quality[e.quality]+i+t.getEquipNameByType(e.subType);return n},t.getZSName=function(t){var e=Cfg.getConfig(ZhuanShengLevelConfig,t);return 0==t?"未转生":e.cslevel+"重"+e.zslevel+"转"},t.getZSNameBydb=function(t){var e=Cfg.getConfig(ZhuanShengLevelConfig,t);return 1e4==t?"未转生":e.cslevel+"转"+e.zslevel+"重"},t.getZSName1=function(t){var e=Cfg.getConfig(ZhuanShengLevelConfig,t);return e.cslevel+"z"+e.zslevel+"c"},t.isRing=function(t){return[EquipPos.RING1,EquipPos.RING2].indexOf(t)>-1},t.enterCityOrGuaJi=function(){var e=FbSys.ins().fbId;if(t.isInCity()){var i;if(LogicSys.ins().isFirstEnterCity){i=[];var n=Cfg.getConfig(ScenesConfig,GConst.MainCityMapId);for(var a in n.npcPos){var o=new EntityNPC,s=n.npcPos[a],r=new EntityData;r.configID=s,o.setData(r),o.AI.startStand(),i.push(o)}}t.checkFbCondition(FbSys.ins().guajiFbId)&&GameBlackCom.ins().showBlackMapEff(function(){if(i)for(var t=0,e=i;t<e.length;t++){var n=e[t];n.reset()}LogicSys.ins().sendEnterFb(FbSys.ins().guajiFbId)})}else e<=Cfg.getConfig(EnumConfig).GUAJI_FUBEN_MAX_ID?t.checkFbCondition(GConst.MainCityFbId)&&GameBlackCom.ins().showBlackMapEff(function(){LogicSys.ins().sendEnterFb(GConst.MainCityFbId)}):openWin(WarnWin,Lang.fb_str26,function(){FbSys.ins().sendExitFb(),closeWin(CommonTipsWin)},this)},t.checkGotoFuben=function(){return t.isInGuaJiFb()||t.isInCity()?!0:(showtipsFail("当前正在副本中，请稍后再试"),!1)},t.sevenBrothersAutoAct=function(e){var i=e.cfg.type,n=GConst.SevenBrothersSysIds[GConst.SevenBrothersItemTypes.indexOf(i)];-1==n||t.isSysOpen(n)||this.appearanceAutoAct(e)},t.sevenBrothersAutoAct2=function(t){var e=Cfg.getConfig(EnumConfig).huanHuaItemIds,i=t.cfg.type;if(-1!=e.indexOf(t.id)){var n=void 0;i==ItemType.ShenqiHuanHua?n=SqXySys.ins().shenQiModel.getHuanHuaDataById(t.cfg.huanhuaId):i==ItemType.WingHuanHua?n=SqXySys.ins().wingModel.getHuanHuaDataById(t.cfg.huanhuaId):i==ItemType.SzHuanHua?n=SqXySys.ins().szModel.getHuanHuaDataById(t.cfg.huanhuaId):i==ItemType.MeilinHuanHua?n=SqXySys.ins().meilinModel.getHuanHuaDataById(t.cfg.huanhuaId):i==ItemType.DamonHuanHua?n=ShouHuNewSys.ins().damonModel.getHuanHuaDataById(t.cfg.huanhuaId):i==ItemType.YongbingHuanHua?n=ShouHuNewSys.ins().yongbingModel.getHuanHuaDataById(t.cfg.huanhuaId):i==ItemType.ShenmoHuanHua&&(n=ShouHuNewSys.ins().shenmoModel.getHuanHuaDataById(t.cfg.huanhuaId)),n.isAct()||this.appearanceAutoAct(t)
}},t.appearanceAutoAct=function(t){var e=t.cfg.type;e==ItemType.ShenqiHuanHua?SqXySys.ins().snedShenQiHuanHuaUp(t.cfg.huanhuaId):e==ItemType.WingHuanHua?SqXySys.ins().snedWingHuanHuaUp(t.cfg.huanhuaId):e==ItemType.SzHuanHua?SqXySys.ins().snedSzHuanHuaUp(t.cfg.huanhuaId):e==ItemType.MeilinHuanHua?SqXySys.ins().snedMeilinHuanHuaUp(t.cfg.huanhuaId):e==ItemType.DamonHuanHua?ShouHuNewSys.ins().sendDamonHuanHuaUp(t.cfg.huanhuaId):e==ItemType.YongbingHuanHua?ShouHuNewSys.ins().sendYongbingHuanHuaUp(t.cfg.huanhuaId):e==ItemType.ShenmoHuanHua&&ShouHuNewSys.ins().sendShenmoHuanHuaUp(t.cfg.huanhuaId)},t.moZhenAutoAct=function(e){var i=e.cfg.type,n=GConst.moZhenMainSysIds[GConst.moZhenItemTypes.indexOf(i)],a=GConst.moZhenSysIds[GConst.moZhenItemTypes.indexOf(i)];-1!=a&&!t.isSysOpen(a)&&t.isSysOpen(n)&&(i==ItemType.DamonMozhen?ShouHuNewSys.ins().sendDamonMoZhenUp(e.cfg.huanhuaId):i==ItemType.YongbingMozhen?ShouHuNewSys.ins().sendYongbingMoZhenUp(e.cfg.huanhuaId):i==ItemType.ShenmoMozhen&&ShouHuNewSys.ins().sendShenmoMoZhenUp(e.cfg.huanhuaId))},t.OpenSqXyActTipsWin=function(t,e,i){var n=new DuiLieOpenWinData;n.setData(function(){openWin(t,e,i,n.call.bind(n))},this),n.setOrder(1),DuiLieSys.ins().flyData.addFlyData(n)},t.getItemListByReward=function(t){for(var e=[],i=0;i<t.length;i++)e.push(t[i].id);return e},t.isDailyFb=function(t){switch(t){case FbGroup.Exp:case FbGroup.Gold:case FbGroup.Mojing:case FbGroup.Qizhi:case FbGroup.TianFu:case FbGroup.Damon:case FbGroup.Yongbing:case FbGroup.Shenmo:case FbGroup.Shenqi:case FbGroup.Wing:case FbGroup.Sz:case FbGroup.Meilin:return!0}return!1},t.getFootEquipNameByType=function(t){return Lang.common_footequipName[t]},t.checkSkillDis=function(t,e,i,n){if(void 0===n&&(n=0),!e||!t)return!1;var a=MathUtil.getDistanceX2ByObject(t,e);return n&&a<Math.pow(n*MapBase.CELL_SIZE,2)?!1:a<Math.pow(i*MapBase.CELL_SIZE,2)},t.getDayCountName=function(t){return 1==t?"每日限购":2==t?"每周限购":"限购"},t.isShowExtActIcon=!0,t.clearMovieClipDatasUI={},t.lvName=(_a={},_a[Lang.common_number[1]]="剑师",_a[Lang.common_number[2]]="剑主",_a[Lang.common_number[3]]="剑王",_a[Lang.common_number[4]]="剑皇",_a[Lang.common_number[5]]="剑帝",_a[Lang.common_number[6]]="剑仙",_a[Lang.common_number[7]]="剑神",_a),t}();__reflect(GFunc.prototype,"GFunc");var _a,ResMgr=function(){function t(){}return t.addResFilter=function(t,e){this.resFilter[e]=t},t.initBmp=function(){var t=egret.Bitmap.prototype,e=t.$onAddToStage;t.$onAddToStage=function(t,i){e.call(this,t,i),this instanceof eui.Image&&(this.texture&&this.texture.bitmapData&&this.texture.bitmapData.source||this.parseSource())},GFunc.iniClearMovieClipDatasUI()},t.initKTX=function(){var t=function(t){var e=t.name,i=e.indexOf(ResDir.RES_DIR_SKILLEFF)>-1||e.indexOf(ResDir.RES_DIR_BODY)>-1||e.indexOf(ResDir.RES_DIR_WEAPON)>-1||e.indexOf(ResDir.RES_DIR_WING)>-1||e.indexOf(ResDir.RES_DIR_JUHUN)>-1;return!i};RES.processor.map("image",new CompressTextureProcessor(t,!1))},t.addPreload=function(t){this.preloadUrls.push(t),this.startLoad()},t.loadNext=function(t){RES.getResByUrl(t,this.startLoad,this)},t.startLoad=function(){this.preloadUrls.length?(this.isLoading=!0,this.loadNext(this.preloadUrls.shift())):this.isLoading=!1},t.getYingziRes=function(){return ResDir.RES_DIR+"/yingzi.png"},t.getEntityBodyRes=function(t,e,i,n,a,o){void 0===a&&(a=!1);var s="";switch(t){case EntityType.BIANSHEN:case EntityType.CLONEBIANSHEN:s=this.getRoleBodySource(e,i,n,!1);break;case EntityType.ROLE:case EntityType.ROLE_CLONE:case EntityType.NPC:case EntityType.MONSTER_SIEGE_ROLE:case EntityType.MINER:case EntityType.YONGBING:case EntityType.YONGBING_CLONE:s=this.getRoleBodySource(e,i,n,a,o);break;case EntityType.ROLEUIC:case EntityType.YONGBINGUIC:s=this.getRoleBodyUISource(e,i,n,!1);break;case EntityType.MONSTER_SERVER:case EntityType.COLLECTION:case EntityType.OTHER:case EntityType.MONSTER_SIEGE:case EntityType.MINE_DIAMOND:case EntityType.MONSTER_CLIENT:default:s=this.getMonsterSource(e,i,n);break;case EntityType.DAMON:s=this.getDamonBodyRes(e,i,n);break;case EntityType.DAMONUIC:s=this.getDamonUIBodyRes(e,i,n);break;case EntityType.MEILIN:s=this.getMeilinRes(e,i,n)}return s},t.getEntityWeaponRes=function(t,e,i,n,a,o){void 0===a&&(a=!1),void 0===o&&(o=0);var s="";switch(t){case EntityType.BIANSHEN:case EntityType.CLONEBIANSHEN:case EntityType.ROLE:case EntityType.ROLE_CLONE:case EntityType.NPC:case EntityType.MONSTER_SIEGE_ROLE:case EntityType.MINER:s=this.getWeaponResource(e,i,n,a);break;case EntityType.ROLEUIC:s=this.getWeaponUIResource(e,i,n,!1);break;case EntityType.MONSTER_SERVER:case EntityType.COLLECTION:case EntityType.OTHER:case EntityType.MONSTER_SIEGE:case EntityType.MINE_DIAMOND:case EntityType.MONSTER_CLIENT:default:s="";break;case EntityType.DAMON:s=""}return s},t.getEntityShengLingRes=function(e,i,n,a,o){var s="";switch(e){case EntityType.ROLEUIC:s=t.getShengLingUIResource(i,n,a,!1);break;default:s=t.getShengLingResource(i,n,a,o)}return s},t.getEntityHuDunRes=function(e,i){var n="";switch(e){case EntityType.ROLEUIC:n=t.getHuDunUISource(i);break;default:n=t.getHuDunSource(i)}return n},t.getEntityWingRes=function(t,e,i,n){var a="";switch(t){case EntityType.ROLEUIC:a=this.getWingUIEFFResource(e);break;default:a=this.getWingResource(e,i,n)}return a},t.getEntityJuhunRes=function(e,i,n,a,o,s,r){var u="";switch(e){case EntityType.ROLEUIC:u=t.getJuhunUIResource(i,n,a,o,s,r);break;default:u=t.getJuhunResource(i,n,a,o,s,r)}return u},t.getRoleBodySource=function(t,e,i,n,a){return ResDir.RES_DIR_BODY+this.getBodyResName(t,e,i,n,a)},t.getRoleBodyUISource=function(t,e,i,n){return ResDir.RES_DIR_UIBODY+this.getBodyResName(t,e,i,n)},t.getBodyResName=function(t,e,i,n,a){return isNaN(a)?t+"_"+this.getResourceDir(e)+this.getAction(i,n):t+"_"+a+"_"+this.getResourceDir(e)+this.getAction(i,n)},t.getFootSource=function(t){return ResDir.RES_DIR_FOOT+t},t.getUIFootSource=function(t){return ResDir.RES_DIR_UIFOOT+t},t.getStrengthenSource=function(t,e){return void 0===e&&(e=EntityAction.STAND),e==EntityAction.DIE?0:t},t.getAction=function(t,e){var i=t;return i==EntityAction.RUN?e&&(i=EntityAction.RUN_FLY):i==EntityAction.STAND&&e&&(i=EntityAction.STAND_FLY),i},t.getMonsterSource=function(t,e,i){return ResDir.RES_DIR_BODY+this.getMonsterResName(t,e,i)},t.getMountSource=function(t,e,i){return i!=EntityAction.RUN&&(i=EntityAction.STAND),ResDir.RES_DIR_FAIRY_BODY+this.getMonsterResName(t,e,i)},t.getMount2Source=function(t,e,i){return i!=EntityAction.RUN&&(i=EntityAction.STAND),ResDir.RES_DIR_FAIRY_BODY.slice(0,-1)+"/up_"+this.getMonsterResName(t,e,i)},t.getMonsterResName=function(t,e,i){return t+"_"+this.getResourceDir(e)+i},t.getDamonBodyRes=function(t,e,i){return ResDir.RES_DIR_FAIRY_BODY+t+"_"+this.getResourceDir(e)+i},t.getDamonUIBodyRes=function(t,e,i){return ResDir.RES_DIR_FAIRY_UIBODY+t+"_"+this.getResourceDir(e)+i},t.getUIMeilinRes=function(t){return ResDir.RES_DIR_UIMEILIN+t},t.getMeilinRes=function(t,e,i){return ResDir.RES_DIR_MEILIN+t+"_"+this.getResourceDir(e)+i},t.getResourceDir=function(t){var e=2*(t-4);return 0>e&&(e=0),t-e},t.getWingResource=function(t,e,i){return ResDir.RES_DIR_WING+t+"_"+this.getResourceDir(e)+this.getAction(i,!0)},t.getWingUIEFFResource=function(t){return ResDir.RES_DIR_WINGEFFUI+t},t.getWeaponResource=function(t,e,i,n){return this.getWeaponBaseResource(t,e,i,n,ResDir.RES_DIR_WEAPON)},t.getWeaponUIResource=function(t,e,i,n){return this.getWeaponBaseResource(t,e,i,n,ResDir.RES_DIR_UIWEAPON)},t.getWeaponBaseResource=function(t,e,i,n,a){var o="";return o=-1!=t.indexOf(GConst.FASHION)?a+t+"_"+this.getResourceDir(e)+this.getAction(i,n):a+t+"_"+this.getStrengthenSource(0,i)+"_"+this.getResourceDir(e)+this.getAction(i,n)},t.getWeaponUIEFFResource=function(t){return ResDir.RES_DIR_UIWEAPONEFF+t},t.getJuhunBaseResource=function(t,e,i,n,a,o,s){var r=-1!=GConst.FASHION.indexOf(o),u=r?1:0,h=""+s+n+"0"+a+"_"+u+"_"+this.getResourceDir(t)+this.getAction(e,i);return h},t.getJuhunResource=function(t,e,i,n,a,o){return ResDir.RES_DIR_JUHUN+this.getJuhunBaseResource(t,e,i,n,a,o,"juhun")},t.getJuhunUIResource=function(t,e,i,n,a,o){return ResDir.RES_DIR_UIJUHUN+this.getJuhunBaseResource(t,e,i,n,a,o,"jhweapon")},t.getSkillPassivityItemName=function(t,e){return void 0===e&&(e=!1),ResDir.RES_DIR_SKILLICON+"icon_"+t+(e?"":"a")+".png"},t.getSkillResourceItemName=function(t,e,i){return void 0===i&&(i=!1),ResDir.RES_DIR_SKILL+""+t+(e?"":"_a")+(i?"_c":"")+".png"},t.getSkillResourceItemName1=function(t){return ResDir.RES_DIR_SKILL+""+t+".png"},t.getGuildSkillResource=function(t){return ResDir.RES_DIR_SKILL+""+t+".png"},t.getShengLingUIResource=function(t,e,i,n){return ResDir.RES_DIR_UIJUHUN+this.getShenglingBaseResource(t,e,i,n)},t.getShenglingBaseResource=function(t,e,i,n){var a=t+"_0_"+this.getResourceDir(e)+this.getAction(i,n);return a},t.getShengLingResource=function(t,e,i,n){return ResDir.RES_DIR_JUHUN+this.getShenglingBaseResource(t,e,i,n)},t.getShengLingUIEFFResource=function(t){return ResDir.RES_DIR_UIJUHUNEFF+t+"_0"},t.getBuffResource=function(t){return ResDir.RES_DIR_SKILLEFF+t},t.getFuHunIcon=function(t){return""+ResDir.RES_DIR_FUHUN+t+".png"},t.getAtkedResource=function(t){return ResDir.RES_DIR_SKILLEFF+t},t.getEffName=function(t){return ResDir.RES_DIR_EFF+t},t.getParticleRes=function(t){return ResDir.RES_DIR+"/particle/"+t},t.getEffFullName=function(t){return this.getEffName(t)+".png"},t.getEquipEffResource=function(t){return this.getEffName(this.getEquipEffName(t))},t.getEquipEffName=function(t){return"equip_clothes_"+(t+1)},t.getItemIcon=function(t,e){return void 0===e&&(e=""),ResDir.RES_DIR_ITEM+t+e+".png"},t.getItemIconEff=function(t,e){return void 0===e&&(e=""),this.getEffName(""+t+e)},t.getFrameIcon=function(t){return ResDir.RES_DIR+"/chatFrame/"+t+".png"},t.getEmojiIcon=function(t){return ResDir.RES_DIR+"/emoji/"+t+".png"},t.getElementIconRes=function(t){return ResDir.RES_DIR_ITEM+t+".png"},t.getDamageWord0Resource=function(t){var e="";switch(t){case 1:e="sm";break;case 2:e="yb";break;default:e=""}return e},t.getDamagerWordResource=function(t){var e="";switch(t){case DamageTypes.MISS:e="miss";break;case DamageTypes.FS:e="fs";break;case DamageTypes.HXYJ:e="hx";break;case DamageTypes.WSYJ:e="ws";break;case DamageTypes.ZMYJ:e="zm";break;case DamageTypes.ZYYJ:e="zy";break;case DamageTypes.EXP:e="jy";break;case DamageTypes.ZD:e="zd";break;case DamageTypes.TSYJ:e="tsyj";break;case DamageTypes.SSYJ:e="ssyj";break;case DamageTypes.WWSH:e="zd";break;case DamageTypes.CFYS:e="cfys";break;case DamageTypes.CFPJ:e="cfpj";break;case DamageTypes.CFJS:e="cfjs";break;case DamageTypes.CFZD:e="zd";break;case DamageTypes.HUIXUE:}return e},t.getDamageTweenB=function(t){var e;switch(t.senderType){case 1:e="sm"+this.getDamagerTween(t.damageType);break;default:e=this.getDamagerTween(t.damageType)}return e},t.getDamagerTween=function(t){var e;switch(t){case DamageTypes.FS:e="fanshe";break;case DamageTypes.HXYJ:e="huixinyiji";break;case DamageTypes.WSYJ:e="wushiyiji";break;case DamageTypes.ZMYJ:e="zhimingyiji";break;case DamageTypes.ZYYJ:e="zhuoyueyiji";break;case DamageTypes.EXP:e="jingyan";break;case DamageTypes.SSYJ:e="shenshengyiji";break;case DamageTypes.TSYJ:e="tianshiyiji";break;case DamageTypes.HIT:e="mingzhong";break;case DamageTypes.HUIXUE:e="huixue";break;case DamageTypes.MISS:default:e="miss"}return e},t.getEntityDamageNumType=function(t,e){var i;switch(t){case 1:i=this.getSmDamageNumberType(e);break;case 2:i=this.getYbDamageNumberType(e);break;default:i=this.getDamageNumberType(e)}return i},t.getSmDamageNumberType=function(t){return NumberType.DamageSm},t.getYbDamageNumberType=function(t){return NumberType.DamageYb},t.getDamageNumberType=function(t){var e;switch(t){case DamageTypes.FS:e=NumberType.DamageFanShe;break;case DamageTypes.HXYJ:e=NumberType.DamageHuiXin;break;case DamageTypes.WSYJ:e=NumberType.DamageWuShi;break;case DamageTypes.ZMYJ:e=NumberType.DamageZhiMing;break;case DamageTypes.ZYYJ:e=NumberType.DamageZhuoYue;break;case DamageTypes.HIT:e=NumberType.DamagePuTong;break;case DamageTypes.EXP:e=NumberType.Exp;break;case DamageTypes.ZD:e=NumberType.DamagePoision;break;case DamageTypes.TSYJ:e=NumberType.DamageTianshi;break;case DamageTypes.SSYJ:e=NumberType.DamageShensheng;break;case DamageTypes.HUIXUE:e=NumberType.DamageHuixue}return e},t.getItemqualityResource=function(t){return"public_zycs_pinzhi_0"+(t+1)},t.getMapTitleResourceByEff=function(t){return"mt_zycs_"+t+"_png"},t.getMapIconResource=function(t,e){return"map_zycs_icon"+t+(e?"a":"b")},t.getJobImgBG=function(t){return["","role_zycs_j","role_zycs_m","role_zycs_g"][t]},t.getHeadIcon=function(t){return["mianui_zycs_zhanshi0","mianui_zycs_sheshou0"][t]},t.getHeadIconGray=function(t){return["mianui_zycs_zhanshi1","mianui_zycs_sheshou1","mianui_zycs_fashi1","mianui_zycs_sheshou1"][t]},t.getMonsterHead=function(t,e){return void 0===e&&(e=!0),""==t?(console.log("错误:读取怪物头像name:"+t),""):ResDir.RES_DIR_MONHEAD+t+(e?"":"_a")+".png"},t.getAchieveTabIcon=function(t){return["","chengjiu_zycs_juesechengzhang_01","chengjiu_zycs_zhuangbeishouji_01","chengjiu_zycs_duanzaodashi_01","chengjiu_zycs_guaiwulieren_01","chengjiu_zycs_chuangguanzhuanjia_01"][t]},t.getAchieveTabSelectIcon=function(t){return["","chengjiu_zycs_juesechengzhang_02","chengjiu_zycs_zhuangbeishouji_02","chengjiu_zycs_duanzaodashi_02","chengjiu_zycs_guaiwulieren_02","chengjiu_zycs_chuangguanzhuanjia_02"][t]},t.getQijiIconRes1=function(t,e){void 0===e&&(e=!1);var i="zyzl_icon_";return i+t+"_png"},t.getQijiNameRes1=function(t,e){void 0===e&&(e=!1);var i="zyzl_zycs_title";return i+t+(""+(e?"_a_":"_"))+"png"},t.touxianMCBystage=function(t){return t>0?"touxian_zycs_a"+t:""},t.touxianEntityMCBystage=function(t){return t>0?"touxian_zycs_b"+t:""},t.getSevendayTitle=function(t,e){return"sd_zycs_t"+(t+1)+"0"+e},t.getFontByNumberType=function(t){return t+"fnt"},t.getEquipDefaultIcon=function(t,e){return void 0===e&&(e=!1),"role_zycs_"+t+(e?"a":"")},t.getEquipQualityBg=function(t,e){return void 0===e&&(e=!1),"public_zycs_pinzhidi_0"+(t+1)+(e?"a":"")},t.getSmallMapName=function(t){return ResDir.MAP_DIR+"/"+t+"/small.jpg"},t.getMapSourceName=function(t,e,i){return"map/"+t+"/image/"+e+"_"+i+".jpg"},t.getBuffIcon=function(t){return""+ResDir.RES_DIR_BUFFICON+t+".png"},t.getConfigSourceName=function(t){return void 0===t&&(t=!1),"cfg1_json"},t.getItemIconMin=function(t){return"zycs_"+t},t.getItemEff=function(t,e,i){return void 0===i&&(i=!1),"item_"+e+(i?"b":"")},t.getFirstRechargeRes=function(t){return t?"zycs_sc"+t:""},t.getEquipAttrContrastIcon=function(t){return["public_zycs_hj","public_zycs_hx","shenqi_zycs_up"][t]},t.getEquipAttrContrastIcon1=function(t,e){var i;return i=t>e?ContrastSize.More:t==e?ContrastSize.Equal:ContrastSize.None,["public_zycs_hj","public_zycs_hx","shenqi_zycs_up"][i]},t.getEquipAttrContrastColor=function(t,e){var i;return i=t>=e?5949490:15129784},t.getEquipTipsQualityBg=function(t){return"zbxx_zycs_"+t},t.TianMoNameIcons=function(t){return"sz_zycs_dl"+t},t.TianMoIcons=function(t){return"duoluo_zycs_pic"+t+"_png"},t.getHuDunSource=function(t){return ResDir.RES_DIR_HUDUN+t},t.getHuDunUISource=function(t){return ResDir.RES_DIR_HUDUN_UI+t},t.getFootPrintNameUI=function(t){return ResDir.RES_DIR_UIFOOTPRINT+t},t.getCampIcon=function(t){return["","smsz_zycs_shen1","smsz_zycs_mo1"][t]},t.getRoleIcon=function(t,e){var i=["","myzt_zycs_tx1","myzt_zycs_tx2","myzt_zycs_tx3"][t];return i=e?i+"a":i},t.resFilter={},t.preloadUrls=[],t.isLoading=!1,t.strengthMax=0,t.sources=["login_zycs_sm3_jpg","login_zycs_mg3_jpg"],t.imgFbScore=["em_zycs_c","em_zycs_b","em_zycs_a","em_zycs_s","em_zycs_ss","em_zycs_sss"],t.imgScore=["","js_zycs_C","js_zycs_B","js_zycs_A","js_zycs_S","js_zycs_SS","js_zycs_SSS"],t.dropmc=["","greengz","bluegz","purpletgz","orangegz","redgz","redgz"],t.RewardDropType=["","qm_zycs_bd","qm_zycs_ggl","qm_zycs_dgl"],t.tipsQualityRes=["","tips_zycs_2","tips_zycs_3","tips_zycs_4","tips_zycs_5","tips_zycs_6"],t}();__reflect(ResMgr.prototype,"ResMgr");var ServerErrorCode={0:"正常登录","-1":"sql错误","-2":"用户没登陆","-3":"游戏服务没准备好","-4":"角色上一次保存数据是否出现异常","-5":"客户端选择角色的常规错误","-6":"角色名称重复","-7":"角色不存在","-8":"错误的性别","-9":"随机生成的名字已经分配完","-10":"客户端上传的角色阵营参数错误","-11":"客户端上传的角色职业参数错误","-12":"您输入的文字中有违禁词汇,请重新编辑！","-13":"如果玩家是帮主，不能删除该角色，需要玩家退帮","-14":"已经登陆到其他服务器","-15":"已经超过最大可建角色数量","-16":"防沉迷到期"},AccountErrorCode={0:"正常登录",1:"密码错误",2:"没有该账号",3:"账号已从其他设备登录，点击确定退出游戏",4:"服务器忙",5:"服务器维护中",6:"数据库未连接",7:"服务器不存在",8:"账号已纳入防沉迷系统，是否需要进行身份证信息填写？"},GameLogin=function(t){function e(){var e=t.call(this)||this;return e.loginType=CrossLoginType.COMMON,e.sysId=PackId.Login,e.reg(1,e.doCheckAccount),e.reg(2,e.doCreateRole),e.reg(4,e.doRoleList),e.reg(5,e.doEnterGame),e.reg(6,e.doRandomName),e.reg(9,e.patchSKuafuLogin),e.reg(11,e.onServerError),e.addLsn(LogicSys.ins().patchEnterMap,function(){e.enterGameOK&&(e.enterGameOK(),e.enterGameOK=null)}),e}return __extends(e,t),e.ins=function(){return t.getIns.call(this,e)},e.prototype.initGame=function(){return __awaiter(this,void 0,void 0,function(){var t;return __generator(this,function(e){switch(e.label){case 0:return[4,Cfg.init(ResMgr.getConfigSourceName(!!urlParam.isnew))];case 1:e.sent();for(t in System)System[t]();return ResMgr.initBmp(),WinMgr.ins().startTimer(),egret.lifecycle.onPause=function(){SoundUtil.enable=!1},egret.lifecycle.onResume=function(){SoundUtil.enable=!!getLocation("sound",2)},[2]}})})},e.prototype.loginServer=function(){var t=this;return Socket.ins().setOnConnected(this.sendCheckAccount,this.onConnectFail,this),Socket.ins().reLogin(urlParam.wss),new Promise(function(e){return t.connectOK=e})},e.prototype.sendCheckAccount=function(){var t=this.getBytes(1);t.writeInt(parseInt(urlParam.srvid)),t.writeString(urlParam.openId),t.writeString(urlParam.openKey||"qianmeng"),this.send(t)},e.prototype.doCheckAccount=function(t){var e=t.readUnsignedByte();0==e?this.sendRoleList():this.showErrorWin(AccountErrorCode[e],3==e?1:void 0)},e.prototype.sendCreateRole=function(t,e,i,n,a,o){var s=this.getBytes(2);s.writeString(t),s.writeByte(e),s.writeByte(i),s.writeByte(n),s.writeByte(a),s.writeString(urlParam.apptype),s.writeString(urlParam.apptype),s.writeString(urlParam.appid),s.writeByte(+urlParam.isnew),this.send(s)},e.prototype.sendCreateRole1=function(t,e,i,n,a,o){var s=this.getBytes(10);s.writeString(t),s.writeByte(e),s.writeByte(i),s.writeByte(n),s.writeByte(a),s.writeString(urlParam.apptype),s.writeString(urlParam.apptype),s.writeString(urlParam.appid),s.writeByte(+urlParam.isnew),this.send(s)},e.prototype.doCreateRole=function(t){var e=t.readByte();if(e)return void this.showServerError(e);Actor.ins().actorID=t.readInt(),Actor.ins().myName=t.readString();var i=DateUtil.formatMiniDateTime(t.readUnsignedInt())/1e3;Actor.ins().createRoleTime=DateUtil.formatDayTime(i,"yy-mo-dd hh:mm:ss"),WinMgr.ins().closeEasy(CreateRoleWin),this.createOK()},e.prototype.sendRoleList=function(){var t=this.getBytes(4);t.writeString(urlParam.apptype),t.writeString(urlParam.apptype),t.writeString(urlParam.appid),t.writeByte(+urlParam.isnew),this.send(t)},e.prototype.doRoleList=function(t){return __awaiter(this,void 0,void 0,function(){var e,i,n;return __generator(this,function(a){return e=this.roleSelectData=new RoleSelectData(t),i=e.code,n=e.roleSelectRoleDatas,-1==i?(showtipsFail(ServerErrorCode[i]),[2]):(this.connectOK(n.length),[2])})})},e.prototype.createRole=function(){var t=this;return new Promise(function(e){openWin(CreateRoleWin),t.createOK=e})},e.prototype.selectRole=function(){var t=this;return new Promise(function(e){return __awaiter(t,void 0,void 0,function(){var t,i;return __generator(this,function(n){switch(n.label){case 0:return t=this.roleSelectData,t.roleSelectRoleDatas.length?[3,1]:(this.sendEnterGame(Actor.ins().actorID),[3,4]);case 1:return t.isMoreRole()?[4,openWin(RoleSelectWin,t).select()]:[3,3];case 2:return i=n.sent(),this.doSelectRole(i),[3,4];case 3:this.doSelectRole(t.getFirstRoleData()),n.label=4;case 4:return this.enterGameOK=e,[2]}})})})},e.prototype.doSelectRole=function(t){Actor.ins().actorID=t.actorid,Actor.ins().myName=t.actorName,Actor.ins().level=t.level,Actor.ins().createRoleTime=t.createRoleTime,this.sendEnterGame(t.actorid)},e.prototype.sendEnterGame=function(t){var e=this.getBytes(5);e.writeInt(t),e.writeString(urlParam.apptype),e.writeString(urlParam.apptype),e.writeString(urlParam.appid),e.writeByte(+urlParam.isnew),this.send(e)},e.prototype.doEnterGame=function(t){var e=t.readUnsignedByte();return e?void alert("进入游戏错误码:"+e):(this.addLsn(WinMgr.ins().patchTopWinOpen,this.winOpen),this.addLsn(WinMgr.ins().patchTopWinClose,this.winClose),void MapContainer.ins().addToParent(LayerMgr.MAP))},e.prototype.winOpen=function(){closeWin(MainWin),DisUtil.remove(MapContainer.ins())},e.prototype.winClose=function(){WinMgr.ins().hasTopWinNotClose()||(openWin(MainWin),MapContainer.ins().addToParent())},e.prototype.sendRandomName=function(t){var e=this.getBytes(6);e.writeByte(t),this.send(e)},e.prototype.doRandomName=function(t){var e=t.readUnsignedByte();if(0==e){var i=(t.readUnsignedByte(),t.readString());getWin(CreateRoleWin).setName(i)}},e.prototype.showServerError=function(t){0!=t&&showtipsFail(ServerErrorCode[t])},e.prototype.patchSKuafuLogin=function(t){var e=t.readInt().toString(),i=t.readString();t.readInt(),this.key=t.readString(),this.loginType=t.readInt(),console.log("下发跨服登录:"+Actor.ins().actorID+","+this.key+",serverId:"+e+","+i+",loginType:"+this.loginType),Socket.ins().patchSocketClose(),Socket.ins().setOnConnected(this.sendkuafuLogin,this.onConnectFail,this),Socket.ins().reLogin(i)},e.prototype.sendkuafuLogin=function(){var t=this.getBytes(9);t.writeInt(Actor.ins().actorID),t.writeString(this.key),t.writeString(urlParam.apptype),t.writeString(urlParam.apptype),t.writeString(urlParam.appid),console.log("请求跨服登录:"+Actor.ins().actorID+","+this.key+","+urlParam.apptype+","+urlParam.appid+","),this.send(t)},e.prototype.onConnectFail=function(){this.showErrorWin("服务器断开连接,点击确定退出游戏",1)},e.prototype.showErrorWin=function(t,e){var i=this;if(!isShowWin(ErrorTipsWin)){var n=new PopupData(t);n.setFunction(this,function(){return __awaiter(i,void 0,void 0,function(){var t;return __generator(this,function(e){switch(e.label){case 0:return LayerMgr.clear(),t=LayerMgr.getStage(),t.removeChildren(),urlParam.srvid=void 0,window.isLoginDebugWin&&(urlParam.openId=void 0),LogicSys.ins().firstCreateMap=!0,[4,Main.startLogin()];case 1:return e.sent(),t.addChild(Main.ins),[2]}})})}),openWin(ErrorTipsWin,n,e)}},e.prototype.onServerError=function(t){var e=t.readUnsignedByte();0!=e&&this.showErrorWin(AccountErrorCode[e],3==e?1:void 0)},__decorate([post()],e.prototype,"doCreateRole",null),e}(BaseSys);__reflect(GameLogin.prototype,"GameLogin");var System;!function(t){t.gameLogin=GameLogin.ins.bind(GameLogin)}(System||(System={})),window.GameLogin=GameLogin;var GameMain=function(){function t(){}return t.prototype.init=function(){return __awaiter(this,void 0,void 0,function(){var t;return __generator(this,function(e){switch(e.label){case 0:return window.isEditor?(Server.loginSkillEditor(),[2]):(LayerMgr.init(),[4,GameLogin.ins().loginServer()]);case 1:return t=e.sent(),[2,t]}})})},t.prototype.createRole=function(){return __awaiter(this,void 0,void 0,function(){return __generator(this,function(t){switch(t.label){case 0:return[4,GameLogin.ins().createRole()];case 1:return t.sent(),window.platform.report("createRoleOK"),[2]}})})},t.prototype.enterGame=function(){return __awaiter(this,void 0,void 0,function(){return __generator(this,function(t){switch(t.label){case 0:return[4,GameLogin.ins().initGame()];case 1:return t.sent(),[4,GameLogin.ins().selectRole()];case 2:return t.sent(),window.platform.report("enterGame"),[2]}})})},t}();__reflect(GameMain.prototype,"GameMain");var PayItem=function(){function t(){this.itemName="itemName未填写",this.desc="desc未填写",this.amount=0,this.pxId=0,this.yb=0,this.vipExp=0}return t.prototype.readConfig=function(t){this.itemName=t.desc,this.desc=t.desc;var e=Cfg.getPayMoneyRMBByYb(t.yb);this.amount=100*e,this.yb=t.yb,this.vipExp=Cfg.getPayMoneyVipExpByYb(t.yb)},t}();__reflect(PayItem.prototype,"PayItem"),window.GameMain=new GameMain;var CreateRoleWin=function(t){function e(){var e=t.call(this)||this;return e.roleIndex=0,e.sourcesIcon=["cj_zycs_js","cj_zycs_mfs","cj_zycs_gjs"],e.bgShape=new egret.Shape,e.roleUrls=["nanjuese","nvjuese"],e.isTimeEnd=!1,e.particleRes=[["star"],["flower","flower1"]],e.mcffPos=[[-40,-300],[35,-350]],e.imgRoles=[],e}return __extends(e,t),e.prototype.initUI=function(){return __awaiter(this,void 0,void 0,function(){return __generator(this,function(e){return t.prototype.initUI.call(this),this.skinName="CreateRoleWinEUI",this.addBg("public_zycs_greybg0"),this.imgRoles=[this.imgRole1,this.imgRole2],[2]})})},e.prototype.addBg=function(t){void 0===t&&(t="public_zycs_greybg2"),this.backGround||(this.bgShapeResize(),LayerMgr.getStage().addEventListener(eui.UIEvent.RESIZE,this.bgShapeResize,this),this.addChildAt(this.bgShape,0))},e.prototype.addDisplay=function(){this.addLsn(GameLogin.ins().doCreateRole,this.removeLoading)},e.prototype.open=function(){window.platform.report("enterCreateRole"),this.roleIndex=0,this.roleIndex>=2&&(this.roleIndex=1),this.addClickE(this.createBtn,this.onClick),this.addClickE(this.diceBtn,this.onClick),this.addClickE(this.imgRole1,this.onTap),this.addClickE(this.imgRole2,this.onTap),this.AutoSelectRoles(),this.topIcon=this.imgIcon1;var t=urlParam.nickName;t?this.setName(decodeURIComponent(t)):GameLogin.ins().sendRandomName(this.roleIndex%2),Timer.ins()["do"](0,1e3,30,this.onEnd,this)},e.prototype.bgShapeResize=function(){this.bgShape.graphics.beginFill(0,1),this.bgShape.graphics.drawRect(0,0,LayerMgr.getStage().stageWidth,LayerMgr.getStage().stageHeight),this.bgShape.graphics.endFill()},e.prototype.onEnd=function(t){this.isTimeEnd=0>=t,t>0?this.timerLabel.text=Lang.common_str99.replace("$count$",t.toString()):(this.sendCreateRole(),this.timerLabel.text=Lang.common_str100,this.timerLabel.visible=!1)},e.prototype.AutoSelectRoles=function(){for(var t=0;t<this.imgRoles.length;t++)this.imgRoles[t].source=this.sourcesIcon[t]+"h";this.imgRoles[this.roleIndex].source=this.sourcesIcon[this.roleIndex]+"l",this.imgRoles[this.roleIndex].source=this.sourcesIcon[this.roleIndex]+"l",this.createRole()},e.prototype.createRole=function(t){return void 0===t&&(t=1),__awaiter(this,void 0,void 0,function(){var e,i,n,a,o,s,r,u,h;return __generator(this,function(l){switch(l.label){case 0:return e=this.roleUrls[this.roleIndex],[4,DraginBonesUtil.get("res/db/"+e)];case 1:for(i=l.sent(),n=i[0],a=i[1],a=a,a.animation.play("daiji",0),this.dragonGroup.addChild(n),a.alpha=t,this.curRole1=a,o=MC.create("res/eff/"+e+"Eff",-1),s=this.mcffPos[this.roleIndex],o.x=s[0],o.y=s[1],this.dragonGroup.addChild(o),this.particleGuoup.removeChildren(),r=this.particleRes[this.roleIndex],u=0;u<r.length;u++)h=new ParticlePlayer,this.particleGuoup.addChild(h),h.playFile(ResMgr.getParticleRes(r[u]));return[2]}})})},e.prototype.close=function(){t.prototype.close.call(this),DisUtil.removeInput(this.nameInput),Timer.ins().remove(this.onEnd,this),this.removeLoading()},e.prototype.onTap=function(t){var e=this.imgRoles.indexOf(t.currentTarget),i=t.target;if(-1!=e){this.playMovie(e);for(var n=0;n<this.imgRoles.length;n++)this.imgRoles[n].source=this.sourcesIcon[n]+"h";i.source=this.sourcesIcon[e]+"l"}else switch(t.currentTarget){case this.btnOk:LogicSys.ins().sendCreateSunRole(this.roleIndex+1,0),closeWin(this);break;case this.btnClose:closeWin(this)}},e.prototype.playMovie=function(t){return __awaiter(this,void 0,void 0,function(){var e,i,n;return __generator(this,function(a){switch(a.label){case 0:return this.roleIndex==t?[2]:(this.roleIndex=t,this.serverName&&this.serverName!=this.nameInput.text||GameLogin.ins().sendRandomName(this.roleIndex%2),this.dragonGroup.removeChildren(),e=400,i=egret.Tween.get(this.curRole1),i.to({alpha:0},e,egret.Ease.cubicIn),[4,this.createRole(0)]);case 1:return a.sent(),n=egret.Tween.get(this.curRole1),n.to({alpha:1},e,egret.Ease.cubicIn),[2]}})})},e.prototype.onClick=function(t){switch(t.currentTarget){case this.createBtn:this.sendCreateRole();break;case this.diceBtn:GameLogin.ins().sendRandomName(this.roleIndex%2)}},e.prototype.setName=function(t){this.serverName=t,this.nameInput.text=t},e.prototype.sendCreateRole=function(){return __awaiter(this,void 0,void 0,function(){var t,e;return __generator(this,function(i){switch(i.label){case 0:if(!this.nameInput.text)return showtipsFail("请输入角色名字"),this.timerLabel.visible=!this.isTimeEnd,[2];LoadingWait.showWait(),i.label=1;case 1:return i.trys.push([1,3,,4]),[4,platform.checkStr(this.nameInput.text,2)];case 2:return t=i.sent(),[3,4];case 3:return e=i.sent(),this.removeLoading(),showtipsFail(e),[2];case 4:return window.platform.report("clickCreateRole"),GameLogin.ins().sendCreateRole(t,this.roleIndex%2,1,0,0,""),[2]}})})},e.prototype.removeLoading=function(){LoadingWait.hideWait()},e}(BaseWinSingle);__reflect(CreateRoleWin.prototype,"CreateRoleWin"),window.CreateRoleWin=CreateRoleWin;var LabelEditorColorItem=function(t){function e(){var e=t.call(this)||this;return e.initUI(),e}return __extends(e,t),e.prototype.initUI=function(){this.skinName="LabelEditorColorItemEUI"},e.prototype.dataChanged=function(){var t=this.data;this.rectColor.graphics.beginFill(t,.9),this.rectColor.graphics.drawRect(0,0,this.width,this.height),this.rectColor.graphics.endFill()},e}(BaseItemRender);__reflect(LabelEditorColorItem.prototype,"LabelEditorColorItem");var LabelEditorTextData=function(){function t(){this.beginIndex=-1,this.endIndex=-1,this.text=""}return t}();__reflect(LabelEditorTextData.prototype,"LabelEditorTextData");var LabelEditorWin=function(t){function e(){var e=t.call(this)||this;return e.winType=WinType.OverlayWin,e.layer=LayerMgr.Tips,e.textArr=[],e}return __extends(e,t),e.prototype.setSkinName=function(){this.skinName="LabelEditorWinEUI"},e.prototype.initUI=function(){t.prototype.initUI.call(this),this.top=0,this.bottom=0,this.right=0,this.left=0,this.setSkinPart("item",new ItemBaseReward),this.listColor.itemRenderer=LabelEditorColorItem,this.listColor.dataProvider=new eui.ArrayCollection(GConst.PZColor.slice(0,6))},e.prototype.open=function(){t.prototype.open.call(this),this.stage.addEventListener(egret.Event.RESIZE,this.onResize,this),this.addItemTapE(this.listColor,this.onListColorClick),this.tiPrev.addEventListener(egret.TextEvent.FOCUS_IN,this.onFocusIn,this),this.tiPrev.addEventListener(egret.TextEvent.FOCUS_IN,this.onFocusOut,this),this.onResize()},e.prototype.onFocusIn=function(t){},e.prototype.onFocusOut=function(t){this.saveBeginIndex=this.tiPrev.selectionBeginIndex,this.saveEndIndex=this.tiPrev.selectionEndIndex},e.prototype.onListColorClick=function(t){var e=this.tiPrev.text;e.slice(this.saveBeginIndex,this.saveEndIndex)},e.prototype.onResize=function(){},e}(BaseWinSingle);__reflect(LabelEditorWin.prototype,"LabelEditorWin");var UseArg10=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return __extends(e,t),e}(UseArg);__reflect(UseArg10.prototype,"UseArg10");var LoginLabelEditor=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return __extends(e,t),e.ins=function(){return t.getIns.call(this,LoginEditor)},e.prototype.openWin=function(){openWin(LabelEditorWin)},e}(LoginEditor);__reflect(LoginLabelEditor.prototype,"LoginLabelEditor"),window.LoginLabelEditor=LoginLabelEditor;var UseArg2=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return __extends(e,t),e}(UseArg);__reflect(UseArg2.prototype,"UseArg2");var SkillEditorFlyItem=function(t){function e(){var e=t.call(this)||this;return e.init(),e}return __extends(e,t),e.prototype.init=function(){this.skinName="SkillEditorFlyItemEUI"},e.prototype.dataChanged=function(){if(this.data){var t=this.data,e=new TweenConfig;this.labelIndex.text=this.itemIndex.toString(),this.tiTweenStartTime.text=(null!=t.startDelay?t.startDelay:e.startDelay).toString(),this.tiTweenEndTime.text=(null!=t.endDelay?t.endDelay:e.endDelay).toString(),this.tiTweenX1.text=(null!=t.x?t.x:e.x).toString(),this.tiTweenY1.text=(null!=t.y?t.y:e.y).toString(),this.tiTweenR1.text=(null!=t.r?t.r:e.r).toString(),this.tiTweenX2.text=(null!=t.endX?t.endX:e.endX).toString(),this.tiTweenY2.text=(null!=t.endY?t.endY:e.endY).toString(),this.tiTweenR2.text=(null!=t.endR?t.endR:e.endR).toString(),this.tiTweenScaleX.text=(null!=t.scaleX?t.scaleX:e.scaleX).toString(),this.tiTweenScaleY.text=(null!=t.scaleY?t.scaleY:e.scaleY).toString(),this.tiTweenAlpha.text=(null!=t.alpha?t.alpha:e.alpha).toString(),this.tiTweenRotation.text=(null!=t.rotation?t.rotation:e.rotation).toString(),this.radioIsSelected.selected=this.itemIndex==SkillEditorWin.selectedIndexFly
}},e.prototype.save=function(){this.saveTo(this.data)},e.prototype.saveTo=function(t){new TweenConfig;(null!=t.startDelay||t.startDelay!=parseInt(this.tiTweenStartTime.text))&&(t.startDelay=parseInt(this.tiTweenStartTime.text)),(null!=t.endDelay||t.endDelay!=parseInt(this.tiTweenEndTime.text))&&(t.endDelay=parseInt(this.tiTweenEndTime.text)),(null!=t.x||t.x!=parseInt(this.tiTweenX1.text))&&(t.x=parseInt(this.tiTweenX1.text)),(null!=t.y||t.y!=parseInt(this.tiTweenY1.text))&&(t.y=parseInt(this.tiTweenY1.text)),(null!=t.r||t.r!=parseInt(this.tiTweenR1.text))&&(t.r=parseInt(this.tiTweenR1.text)),(null!=t.endX||t.endX!=parseInt(this.tiTweenX2.text))&&(t.endX=parseInt(this.tiTweenX2.text)),(null!=t.endY||t.endY!=parseInt(this.tiTweenY2.text))&&(t.endY=parseInt(this.tiTweenY2.text)),(null!=t.endR||t.endR!=parseInt(this.tiTweenR2.text))&&(t.endR=parseInt(this.tiTweenR2.text)),(null!=t.scaleX||t.scaleX!=parseInt(this.tiTweenScaleX.text))&&(t.scaleX=parseFloat(this.tiTweenScaleX.text)),(null!=t.scaleY||t.scaleY!=parseInt(this.tiTweenScaleY.text))&&(t.scaleY=parseFloat(this.tiTweenScaleY.text)),(null!=t.alpha||t.alpha!=parseInt(this.tiTweenAlpha.text))&&(t.alpha=parseFloat(this.tiTweenAlpha.text)),(null!=t.rotation||t.rotation!=parseInt(this.tiTweenRotation.text))&&(t.rotation=parseInt(this.tiTweenRotation.text))},Object.defineProperty(e.prototype,"isSelected",{get:function(){return this.radioIsSelected.selected},enumerable:!0,configurable:!0}),e}(SkillEditorBaseItem);__reflect(SkillEditorFlyItem.prototype,"SkillEditorFlyItem");var SkillEditorTypeDetailItem=function(t){function e(){return t.call(this)||this}return __extends(e,t),e.prototype.dataChanged=function(){this.data&&this.updateData(this.data)},e}(SkillEditorTypeItem);__reflect(SkillEditorTypeDetailItem.prototype,"SkillEditorTypeDetailItem");var SkillEditorTypeItemDetailWin=function(t){function e(){var e=t.call(this)||this;return e.winType=WinType.OverlayWin,e.layer=LayerMgr.Top,e}return __extends(e,t),e.prototype.setSkinName=function(){this.skinName="SkillEditorTypeDetailWinEUI"},e.prototype.initUI=function(){t.prototype.initUI.call(this),this.setSkinPart("item",new SkillEditorTypeDetailItem),this.addBg()},e.prototype.open=function(e){t.prototype.open.call(this),this.fromItem=e,this.item.currentState="win",this.validateNow(),this.item.data=this.fromItem.data,this.item.updateIndex(this.fromItem.itemIndex)},e.prototype.close=function(){this.item.save(),this.fromItem.updateData(),t.prototype.close.call(this)},e}(BaseWinSingle);__reflect(SkillEditorTypeItemDetailWin.prototype,"SkillEditorTypeItemDetailWin");var VipConfig=function(){function t(){}return t}();__reflect(VipConfig.prototype,"VipConfig");var SkillEditorWin=function(t){function e(){var e=t.call(this)||this;return e.winType=WinType.NeverCloseWin,e.layer=LayerMgr.Tips,e.entityX=0,e.isMobileMode=!1,e.isOpenMouseXY=!1,e.isShowMap=!1,e.strengthArr=[0,7,9,11,13,15],e.damageTypes=[DamageTypes.HIT,DamageTypes.WSYJ,DamageTypes.MISS,DamageTypes.HXYJ,DamageTypes.ZYYJ,DamageTypes.ZMYJ,DamageTypes.FS,DamageTypes.TSYJ,DamageTypes.SSYJ,DamageTypes.WWSH,DamageTypes.EXP,DamageTypes.HUIXUE],e.damageNames=["命中","无视一击","MISS","会心一击","卓越一击","暴击一击","反射","天使一击","神圣一击","威望伤害","经验","回血"],e.curClickXY=new XY,e}return __extends(e,t),e.prototype.setSkinName=function(){this.skinName="SkillEditorWinEUI"},e.prototype.initUI=function(){t.prototype.initUI.call(this),this.addBg(""),this.top=0,this.bottom=0,this.right=0,this.left=0,this.groupEntity=new ContainerSort,this.groupEntity.x=this.groupEffUp1.left,this.groupEntity.y=this.groupEffUp1.top;var e=this.getChildIndex(this.groupEffUp1);this.addChildAt(this.groupEntity,e),this.labelMouseXY=DisUtil.createEuiLabelText(this.groupEffUp1,"",0,0,30),DisUtil.remove(this.labelMouseXY);var i=[],n=Cfg.getConfigs2(SkillEditorConfig,CondType.NONE);for(var a in n)i.push(a);this.dropDownSkill.bindData(i),this.dropDownAction.bindData(EntityAction.ALL),this.dropDownBodyStrength.bindData(this.strengthArr),this.dropDownXishu.bindData([1,.67,.28,.44,.3]),this.dropDownRadomType.bindData(["x","y","scaleX","delay","rate","rotation"]),this.dropDownFly.bindData(this.damageNames);for(var o=[],s=10;30>=s;s++)o.push((s/10).toString());this.dropDownScale.bindData(o);for(var r=Cfg.getConfigs(ScenesConfig),u=[],h=0,l=r;h<l.length;h++){var p=l[h];u.push(p.sceneid)}this.dropDownMap.bindData(u),this.dropDownBodyFoder.text=egret.localStorage.getItem(location.href+"dropDownBodyFoder"),this.dropDownSkill.text=egret.localStorage.getItem(location.href+"dropDownSkill")||i[0],this.dropDownAction.text=egret.localStorage.getItem(location.href+"dropDownAction")||EntityAction.ALL[0],this.dropDownWeapon.text=egret.localStorage.getItem(location.href+"dropDownWeapon")||"",this.dropDownBodyStrength.text=egret.localStorage.getItem(location.href+"dropDownBodyStrength")||this.strengthArr[0].toString(),this.dropDownWing.text=egret.localStorage.getItem(location.href+"dropDownWing")||"",this.dropDownWeaponStrength.text=egret.localStorage.getItem(location.href+"dropDownWeaponStrength"),this.dropDownXishu.text=egret.localStorage.getItem(location.href+"dropDownXishu")||"1",this.dropDownFly.text=egret.localStorage.getItem(location.href+"dropDownFly")||this.damageNames[0],this.dropDownScale.text=egret.localStorage.getItem(location.href+"dropDownScale")||o[0],this.dropDownMap.text=egret.localStorage.getItem(location.href+"dropDownMap")||u[0].toString(),this.entity=new EntityRole,this.entity.data=new EntityData,this.entity.setHpAndNameVisible(!1),this.entity.AI.startNone(),this.groupEntity.addChild(this.entity),this.listType.itemRenderer=SkillEditorTypeItem,this.listType.dataProvider=this.listTypeArr=new eui.ArrayCollection,this.listTypeArr.source=this.skillEditorConfigs=[],this.listFly.itemRenderer=SkillEditorFlyItem,this.listFly.dataProvider=this.listFlyArr=new eui.ArrayCollection,this.listFlyArr.source=this.flyConfigs=[],this.scrollerFly.visible=!1},e.prototype.open=function(){t.prototype.open.call(this),this.stage.addEventListener(egret.Event.RESIZE,this.onResize,this),this.addClickE(this.btnSetAppereance,this.onSetAppereance),this.addClickE(this.btnReloadSkill,this.onReloadSkill),this.addClickE(this.btnAddSkill,this.onAddSkill),this.addClickE(this.btnMobileMode,this.onMobileMode),this.addClickE(this.btnShowList,this.onShowList),this.addClickE(this.btnPrev,this.onPrev),this.addClickE(this.btnNext,this.onNext),this.addClickE(this.btnResult,this.onResult),this.addClickE(this.btnSaveGame,this.onSaveGame),this.addClickE(this.btnClean,this.onClean),this.addClickE(this.btnReset,this.onReset),this.addClickE(this.btnImport,this.onImport),this.addClickE(this.btnRadom,this.onRadom),this.addClickE(this.btnResultFly,this.onResultFly),this.addClickE(this.btnLoadFly,this.onLoadFly),this.addClickE(this.btnShowFlyPlay,this.onFlyPlay),this.addClickE(this.btnShowFlyList,this.onShowFlyList),this.addClickE(this.btnAddType,this.onAdd),this.addClickE(this.btnDelType,this.onDel),this.addClickE(this.stage,this.onClick),this.addClickBeginE(this.stage,this.onMouseDown),this.addClickEndE(this.stage,this.onMouseUp),this.addClickE(this.labelBody,this.onShowOrHide),this.addClickE(this.labelWeapon,this.onShowOrHide),this.addClickE(this.labelWing,this.onShowOrHide),this.addClickE(this.btnMouseXY,this.onMouseXY),this.addClickE(this.btnMap,this.onMapLoad),this.addClickE(this.btnMapPos,this.onMapPos),this.addClickE(this.btnMcRate,this.onMcRate),this.addClickE(this.btnMcRateNext,this.onMcRateNext),this.addClickE(this,this.onThisClick),this.onResize(),this.onUpdateEntity(),this.onUpdateLit()},e.prototype.onResize=function(){this.entity.x=this.entityX?this.entityX:LayerMgr.getStage().stageWidth>>1,this.entity.y=LayerMgr.getStage().stageHeight>>1,this.isShowMap&&this.onMapLoad(),this.isOpenMouseXY&&this.drawPosLine()},e.prototype.onSetAppereance=function(t){void 0===t&&(t=null),this.onUpdateEntity(),this.saveLocalData()},e.prototype.onReloadSkill=function(t){var e=this;void 0===t&&(t=null);var i=function(){e.curSkillId="",e.onUpdateLit(),e.saveLocalData()};this.checkFunc("是否确定重载仙术",i)},e.prototype.onAddSkill=function(t){var e=this;void 0===t&&(t=null);var i=this.dropDownSkill.text,n=""+ResDir.RES_DIR_SKILL+i+".json";RES.getResByUrl(n,function(t){e.skillLoadedCallback(t,!1)},this)},e.prototype.onAdd=function(t){if(this.scroller.visible){this.onSave();for(var e=new SkillEditorConfig,i=0;i<this.listType.numElements;i++){var n=this.listType.getElementAt(i);if(n&&n.isSelected){e.copy(n.data);break}}this.listTypeArr.source.push(e),this.listTypeArr.refresh()}else if(this.scrollerFly.visible){this.onSaveFly();for(var e=new TweenConfig,i=0;i<this.listFly.numElements;i++){var n=this.listFly.getElementAt(i);if(n&&n.isSelected){e.copy(n.data);break}}this.listFlyArr.source.push(e),this.listFlyArr.refresh()}},e.prototype.onDel=function(t){var i=this;if(this.scroller.visible){var n=function(){i.onSave();for(var t=i.listType.numElements,n=0;t>n;n++){var a=i.listType.getElementAt(n);if(a&&a.isSelected)return i.listTypeArr.source.splice(n,1),i.listTypeArr.refresh(),void(n==t-1&&(e.baseSelectedIndex=t-2))}i.listTypeArr.source.pop(),i.listTypeArr.refresh()};this.checkFunc("是否确定删除",n)}else if(this.scrollerFly.visible){var n=function(){i.onSaveFly();for(var t=i.listFly.numElements,n=0;t>n;n++){var a=i.listFly.getElementAt(n);if(a&&a.isSelected)return i.listFlyArr.source.splice(n,1),i.listFlyArr.refresh(),void(n==t-1&&(e.selectedIndexFly=t-2))}i.listFlyArr.source.pop(),i.listFlyArr.refresh()};this.checkFunc("是否确定删除",n)}},e.prototype.onPrev=function(t){if(this.scroller.visible){this.onSave();for(var i=0;i<this.listType.numElements;i++){var n=this.listType.getElementAt(i);if(n&&n.isSelected){if(0!=i){var a=this.listTypeArr.source,o=a[i-1];a[i-1]=a[i],a[i]=o,e.baseSelectedIndex=i-1,this.listTypeArr.refresh()}else showtipsFail("已到最前");break}}}else if(this.scrollerFly.visible){this.onSaveFly();for(var i=0;i<this.listFly.numElements;i++){var n=this.listFly.getElementAt(i);if(n&&n.isSelected){if(0!=i){var a=this.listFlyArr.source,s=a[i-1];a[i-1]=a[i],a[i]=s,e.selectedIndexFly=i-1,this.listFlyArr.refresh()}else showtipsFail("已到最前");break}}}},e.prototype.onNext=function(t){if(this.scroller.visible){this.onSave();for(var i=0;i<this.listType.numElements;i++){var n=this.listType.getElementAt(i);if(n&&n.isSelected){if(i<this.listTypeArr.length-1){var a=this.listTypeArr.source,o=a[i+1];a[i+1]=a[i],a[i]=o,e.baseSelectedIndex=i+1,this.listTypeArr.refresh()}else showtipsFail("已到最后");break}}}else if(this.scrollerFly.visible){this.onSaveFly();for(var i=0;i<this.listFly.numElements;i++){var n=this.listFly.getElementAt(i);if(n&&n.isSelected){if(i<this.listFlyArr.length-1){var a=this.listFlyArr.source,s=a[i+1];a[i+1]=a[i],a[i]=s,e.selectedIndexFly=i+1,this.listFlyArr.refresh()}else showtipsFail("已到最后");break}}}},e.prototype.onShowList=function(t){this.scroller.visible=!this.scroller.visible,this.scroller.visible&&(this.scrollerFly.visible=!1)},e.prototype.onShowFlyList=function(t){this.scrollerFly.visible=!this.scrollerFly.visible,this.scrollerFly.visible&&(this.scroller.visible=!1)},e.prototype.onSave=function(t){void 0===t&&(t=null);for(var e=0;e<this.listType.numElements;e++){var i=this.listType.getElementAt(e);i&&i.save()}},e.prototype.onSaveFly=function(){for(var t=0;t<this.listFly.numElements;t++){var e=this.listFly.getElementAt(t);e&&e.save()}},e.prototype.onUpdateEntity=function(){var t,e=this.dropDownBodyFoder.text;-1!=this.dropDownBodyFoder.text.indexOf(ResDir.MONSTER)?t=EntityType.MONSTER_SERVER:-1!=this.dropDownBodyFoder.text.indexOf(ResDir.SHENMO)?t=EntityType.BIANSHEN:-1!=this.dropDownBodyFoder.text.indexOf(ResDir.UIBODY)?(t=EntityType.ROLEUIC,e="body"):t=EntityType.ROLE,this.entity.entityType=t,this.entity.data.setBodyFileName(e),this.entity.data.setWeaponFileName(this.dropDownWeapon.text),this.entity.data.setWingFileName(this.dropDownWing.text),this.entity.data._mountFileName=this.dropDownWeaponStrength.text,this.entity.setDir(this.getCurDir()),this.entity.playAction(this.dropDownAction.text,!0),this.entity.scaleX=this.entity.scaleY=parseFloat(this.dropDownScale.text)},e.prototype.onUpdateLit=function(){var t=this;if(this.curSkillId!=this.dropDownSkill.text){this.curSkillId=this.dropDownSkill.text;var e=Cfg.getConfigs2(SkillEditorConfig,CondType.NONE);if(e)if(e){var i=e[this.curSkillId];this.skillLoadedCallback(i,!0)}else RES.getResAsync(Cfg.getSkillEditorSourceName(),function(e){var i=e[t.curSkillId];t.skillLoadedCallback(i,!0)},this)}},e.prototype.skillLoadedCallback=function(t,e){var i=this;void 0===e&&(e=!0);var n=new SkillEditorConfig;if(!t){showtipsFail("没有这个仙术效果的配置!"+this.curSkillId);var a=new PopupData("是否从当前复制创建一个新仙术？");return a.setFunction(this,function(){i.listTypeArr.refresh()}),void openWinToLayer(CommonTipsWin,LayerMgr.Top,a)}for(var o=0,s=t;o<s.length;o++){var r=s[o];r.__proto__=n}e&&(this.skillEditorConfigs.length=0);for(var u=[],h=0,l=t;h<l.length;h++){var r=l[h],p=new SkillEditorConfig;p.read(r),r.hit&&u.push(t.indexOf(r)),this.skillEditorConfigs.push(p)}if(this.listTypeArr.refresh(),u.length>1){for(var c="",d=0;d<u.length;d++)c+=u[d]+",";openWin(ErrorWin,"仙术命中超过1个,配置索引:"+c)}},e.prototype.onLoadFly=function(){var t=this,e=this.tiFlyUrl.text,i=Cfg.getTweenSourceName();if(RES.hasRes(i)){var n=RES.getRes(i);if(n){var a=n[e];this.pushflyConfigs(a)}else RES.getResAsync(i,function(i){var n=i[e];t.pushflyConfigs(n)},this)}},e.prototype.pushflyConfigs=function(t){if(!t)return void showtipsFail("没有这个飘字配置"+this.tiFlyUrl.text);this.flyConfigs.length=0;for(var e=0,i=t;e<i.length;e++){var n=i[e],a=new TweenConfig;a.copy(n),this.flyConfigs.push(a)}this.listFlyArr.refresh()},e.prototype.onResult=function(){for(var t=[],e=0;e<this.skillEditorConfigs.length;e++){var i=this.skillEditorConfigs[e];i.hit&&t.push(e)}if(t.length>1){for(var n="",e=0;e<t.length;e++)n+=t[e]+",";openWin(ErrorWin,"仙术命中超过一个,索引:"+n)}for(var a=this.getCopySkillEditorConfigs(),o="",e=0;e<a.length;e++)o+=JSON.stringify(a[e]),e<a.length-1&&(o+=",");var s='{"'+this.curSkillId+'":['+o+"]}";this.copyResult(s)},e.prototype.onResultFly=function(){for(var t="",e=0;e<this.flyConfigs.length;e++)t+=JSON.stringify(this.flyConfigs[e].getSaveCopy()),e<this.flyConfigs.length-1&&(t+=",");var i='"'+this.tiFlyUrl.text+'":['+t+"],";this.copyResult(i)},e.prototype.copyResult=function(t){ComUtil.copyResult(t),showtipsSuc("复制成功")},e.prototype.onFlyPlay=function(){this.onSaveFly();for(var t=Math.min(10,parseInt(this.tiFlyCount.text)),e=Math.max(0,this.damageNames.indexOf(this.dropDownFly.text)),i=this.damageTypes[e],n=0;t>n;n++){var a=new BitmapNumber;this.groupEffUp1.addChild(a),i==DamageTypes.MISS?a.setWordSource("greymiss"):(a.setWordSource(ResMgr.getDamagerWordResource(i)),a.setNumber(this.tiFlyNum.text,ResMgr.getDamageNumberType(i)));var o=new EntityXY;o.x=this.entity.x,o.y=this.entity.y,o.dir=DirUtil.dirOpposit(this.entity.dir),SkillEditor.ins().playFlyNumberByCfg(a,o,this.flyConfigs)}},e.prototype.onSaveGame=function(){var t=Cfg.getConfigs2(SkillEditorConfig,CondType.NONE);t[this.curSkillId]=this.getCopySkillEditorConfigs(),showtipsSuc("成功设置到游戏")},e.prototype.getCopySkillEditorConfigs=function(){for(var t=[],e=0;e<this.skillEditorConfigs.length;e++){var i=this.skillEditorConfigs[e].getSaveCopy();t.push(i)}return t},e.prototype.onClean=function(){this.groupEffDown1.removeChildren(),this.groupEffDown2.removeChildren(),this.groupEffUp1.removeChildren(),this.groupEffUp2.removeChildren(),this.groupEntity.removeChildren(),this.groupEntity.addChild(this.entity),this.groupMap.removeChildren(),this.isShowMap=!1},e.prototype.onReset=function(){var t=this,i=function(){e.baseSelectedIndex>0&&(t.onSave(),t.skillEditorConfigs[e.baseSelectedIndex].read(new SkillEditorConfig),t.listTypeArr.refresh())};this.checkFunc("是否确定重置",i)},e.prototype.onImport=function(){var t=this.dropDownRadomType.text,e=parseFloat(this.tiRadomMin.text)||0,i=parseFloat(this.tiRadomMax.text)||0,n=t+"#"+e+"#"+i,a=this.tiRadomResult.text||"";a.length>0&&(a+=","),a+=n,this.tiRadomResult.text=a},e.prototype.onRadom=function(){var t=this,e=function(){var e=[];if(t.tiRadomIndex.text)e=t.tiRadomIndex.text.split(",");else for(var i=0;i<t.skillEditorConfigs.length;i++)e.push(i.toString());for(var n=new SkillEditorConfig,a=Object.getOwnPropertyNames(n),o=t.tiRadomResult.text||"",s=o.split(","),r=0,u=s;r<u.length;r++){var h=u[r],l=h.split("#"),p=l[0];if(-1==a.indexOf(p))return void showtipsFail(p+"不存在");for(var c=parseFloat(l[1])||0,d=parseFloat(l[2])||0,g=Math.abs(c)==Math.abs(c)>>0&&Math.abs(d)==Math.abs(d)>>0,i=0;i<e.length;i++){var f=parseInt(e[i]),y=t.skillEditorConfigs[f];if(y){var m=void 0;m=g?MathUtil.randomInteger(c,d):parseFloat(MathUtil.radom(c,d).toFixed(1)),y[p]=m}}}t.listTypeArr.refresh()};this.checkFunc("是否确定随机",e)},e.prototype.onMouseXY=function(){this.isOpenMouseXY=!this.isOpenMouseXY,SkillEditor.ins().isEditorMode=this.isOpenMouseXY,this.isOpenMouseXY?this.drawPosLine():this.groupPos.removeChildren()},e.prototype.drawPosLine=function(){this.groupPos.removeChildren();var t=new egret.Shape,e=t.graphics;e.lineStyle(1,16711680,1),e.moveTo(0,this.entity.y),e.lineTo(2*this.entity.x,this.entity.y),e.moveTo(this.entity.x,0),e.lineTo(this.entity.x,2*this.entity.y),this.groupPos.addChild(t)},e.prototype.onShowOrHide=function(t){},e.prototype.onMcRate=function(){var t=parseFloat(this.tiMcRate.text);Timer.ins().setTimeRate(t),this.onClean(),SkillEditor.ins().clear(0)},e.prototype.onMcRateNext=function(){if(Timer.ins().isPause){var t=parseInt(this.tiMcFrame.text);Timer.ins().nextFrame(33.33*t)}else showtipsFail("帧率设为0才能逐帧播放")},e.prototype.onThisClick=function(t){if("btnDetail"==t.target.name){var i=t.target.parent;openWin(SkillEditorTypeItemDetailWin,i)}if("btnPlay"==t.target.name){var i=t.target.parent;i.save();var n=new SkillEditorData;n.isEditor=!0,n.sender.copy(this.entity),n.target.x=this.curClickXY.x,n.target.y=this.curClickXY.y,n.setLayer(this.groupEffDown1,this.groupEffDown2,this.groupEffUp1,this.groupEffUp2,this.groupEntity),n.selectIndex=e.baseSelectedIndex,n.configs=[i.data],SkillEditor.ins().play(n)}},e.prototype.onMouseDown=function(t){var e=this;if(this.isOpenMouseXY){var i=this.groupEffUp1.globalToLocal(t.stageX,t.stageY),n=Math.atan2(i.y-this.entity.y,i.x-this.entity.x),a=0>n?-1*MathUtil.getAngle(n):360-MathUtil.getAngle(n),o="("+(i.x-this.entity.x)+", "+(i.y-this.entity.y)+") ("+MathUtil.toFixed(a,0)+"°)",s=new egret.Rectangle(this.groupEffUp1.x,this.groupEffUp1.y,this.groupEffUp1.width,this.groupEffUp1.height);if(this.toggleRecordPos.selected&&s.contains(i.x,i.y)){var r=new eui.Group;r.touchEnabled=r.touchChildren=!0,r.touchThrough=!1,r.x=i.x,r.y=i.y,r.width=45,r.height=22,this.groupEffUp2.addChild(r);var u=new egret.Shape;u.graphics.beginFill(16711680,1),u.graphics.drawCircle(0,0,Math.max(parseInt(this.tiRecordPosR.text)||0,3)),u.graphics.endFill(),r.addChild(u);var h=DisUtil.createEuiLabelText(r,"",0,0,20);h.text=o,h.touchEnabled=!1;var l=function(){r.removeEventListener(egret.TouchEvent.TOUCH_BEGIN,l,e),DisUtil.remove(r)};r.addEventListener(egret.TouchEvent.TOUCH_BEGIN,function(t){l(),t.stopImmediatePropagation()},this),r.addChild(h),r.once(egret.Event.REMOVED_FROM_STAGE,function(t){l()},this)}else this.labelMouseXY.x=i.x+15,this.labelMouseXY.y=i.y,this.labelMouseXY.text=o,this.groupEffUp1.addChild(this.labelMouseXY)}},e.prototype.onMouseUp=function(t){DisUtil.remove(this.labelMouseXY)},e.prototype.onClick=function(t){if(t.target instanceof eui.Group){var e=t.target.localToGlobal(t.localX,t.localY),i=this.groupEntity.globalToLocal(e.x,e.y);this.curClickXY.x=i.x,this.curClickXY.y=i.y,this.entity.setDir(this.getCurDir()),this.entity.playAction(this.dropDownAction.text,!0),this.playEff()}},e.prototype.getCurDir=function(){var t=this.curClickXY.x-this.entity.x,e=this.curClickXY.y-this.entity.y,i=180*Math.atan2(e,t)/Math.PI;-90>i&&(i+=360);var n=Math.round((i+90)/45)%8;return n},e.prototype.checkFunc=function(t,e){if(e.bind(this),this.toggleTips.selected){var i=new PopupData(t);i.setFunction(this,e),openWin(CommonTipsWin,i)}else e()},e.prototype.onMapLoad=function(t){void 0===t&&(t=null);var e=parseInt(this.dropDownMap.text),i=Cfg.getConnectConfig(MapInfo,ScenesConfig,e);i&&(this.isShowMap=!0,this.groupMap.addChild(MapContainer.ins()),MapContainer.ins().changeMap(e,0,0))},e.prototype.onMapPos=function(t){if(void 0===t&&(t=null),this.isShowMap){var e=parseInt(this.dropDownMap.text),i=MapContainer.CELL_SIZE*parseFloat(this.tiMapPosX.text)||0,n=MapContainer.CELL_SIZE*parseFloat(this.tiMapPosY.text)||0;MapContainer.ins().changeMap(e,i,n)}},e.prototype.onMobileMode=function(t){if(this.isMobileMode=!this.isMobileMode,this.isMobileMode){this.btnMobileMode.label="电脑模式",this.entityX=360,this.scroller.left=720,this.onResize();var e=this.entity.localToGlobal(),i=e.x-360,n=e.y-640;this.maskRects=DisUtil.drawMasks(new egret.Rectangle(i,n,720,1280),new egret.Rectangle(0,0,this.groupMask.width,this.groupMask.height),this.groupMask,.8)}else{this.btnMobileMode.label="手机模式",this.entityX=0,this.scroller.left=0;for(var a=0,o=this.maskRects;a<o.length;a++){var s=o[a];s.graphics.clear(),DisUtil.remove(s)}this.maskRects=null,this.onResize()}},e.prototype.saveLocalData=function(){egret.localStorage.setItem(location.href+"dropDownBodyFoder",this.dropDownBodyFoder.text),egret.localStorage.setItem(location.href+"dropDownSkill",this.dropDownSkill.text),egret.localStorage.setItem(location.href+"dropDownAction",this.dropDownAction.text),egret.localStorage.setItem(location.href+"dropDownWeapon",this.dropDownWeapon.text),egret.localStorage.setItem(location.href+"dropDownBodyStrength",this.dropDownBodyStrength.text),egret.localStorage.setItem(location.href+"dropDownWing",this.dropDownWing.text),egret.localStorage.setItem(location.href+"dropDownWeaponStrength",this.dropDownWeaponStrength.text)},e.prototype.playEff=function(){var t=this;this.onSave();var i=new XY;if(i.x=this.curClickXY.x,i.y=this.curClickXY.y,this.skillEditorConfigs.length){var n=new SkillEditorData;n.isEditor=!0,n.sender.copy(this.entity),n.target.x=this.curClickXY.x,n.target.y=this.curClickXY.y,n.setLayer(this.groupEffDown1,this.groupEffDown2,this.groupEffUp1,this.groupEffUp2,this.groupEntity),n.selectIndex=e.baseSelectedIndex,n.configs=this.skillEditorConfigs,n.canPlaySound=!0,n.hitFun=function(){var e=new eui.Label;e.text="命中",e.x=n.target.x,e.y=n.target.y,t.groupEntity.addChild(e),Timer.ins()["do"](500,0,1,function(){e.parent&&e.parent.removeChild(e)},t)},SkillEditor.ins().play(n)}},e.baseSelectedIndex=-1,e.selectedIndexFly=-1,e}(BaseWinSingle);__reflect(SkillEditorWin.prototype,"SkillEditorWin");var RoleSelectData=function(){function t(t){if(this.roleSelectRoleDatas=[],this.id=t.readInt(),this.code=t.readByte(),0==this.code)for(var e=t.readByte(),i=0;e>i;i++){var n=new RoleSelectRoleData;n.parser(t),this.roleSelectRoleDatas.push(n)}}return t.prototype.isMoreRole=function(){return this.roleSelectRoleDatas.length>1},t.prototype.isCreateRole=function(){return 0==this.roleSelectRoleDatas.length},t.prototype.getFirstRoleData=function(){return this.roleSelectRoleDatas[0]},t}();__reflect(RoleSelectData.prototype,"RoleSelectData");var RoleSelectRoleData=function(){function t(){this.sex=0}return t.prototype.parser=function(t){this.actorid=t.readInt(),this.actorName=t.readString(),this.job=t.readInt(),this.sex=t.readInt(),this.level=t.readInt(),this.power=t.readDouble(),this.vip=t.readInt(),this.createRoleTime=t.readString()},t}();__reflect(RoleSelectRoleData.prototype,"RoleSelectRoleData");var RoleSelectWin=function(t){function e(){return t.call(this)||this}return __extends(e,t),e.prototype.select=function(){var t=this;return new Promise(function(e){return t.cb=e})},e.prototype.initUI=function(){t.prototype.initUI.call(this),this.skinName="RoleSelectWinEUI",this.list.itemRenderer=RoleSelectWinItem,this.list.dataProvider=this.listCollection=new eui.ArrayCollection,this.addBg()},e.prototype.open=function(e){t.prototype.open.call(this),this.roleSelectData=e,this.addClickE(this.btnEnterGame,this.onClick),this.addItemTapE(this.list,this.onMenuClick),this.listCollection.source=e.roleSelectRoleDatas,this.curData=e.roleSelectRoleDatas[0],this.list.selectedIndex=0},e.prototype.onMenuClick=function(t){var e=t.item;e.actorid!=this.curData.actorid&&(this.curData=e)},e.prototype.onClick=function(t){switch(t.currentTarget){case this.btnEnterGame:this.cb(this.curData),closeWin(this)}},e}(BaseWinSingle);__reflect(RoleSelectWin.prototype,"RoleSelectWin"),window.RoleSelectWin=RoleSelectWin;var RoleSelectWinItem=function(t){function e(){var e=t.call(this)||this;return e.skinName="RoleSelectWinItemEUI",e}return __extends(e,t),e.prototype.dataChanged=function(){var t=this.data;this.lbName.text="名称:"+t.actorName,this.lbLevel.text="等级:"+GFunc.GetLvStrByLv(t.level),this.lbPower.text="战斗力:"+t.power,this.imgHead.source=ResMgr.getHeadIcon(t.sex)},e}(BaseItemRender);__reflect(RoleSelectWinItem.prototype,"RoleSelectWinItem"),window.RoleSelectWinItem=RoleSelectWinItem;