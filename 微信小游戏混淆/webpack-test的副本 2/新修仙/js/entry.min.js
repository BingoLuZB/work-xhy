function showWarnTips(t,e,i,r){void 0===r&&(r="确定");var n=new EntryWarnWin;t.addChild(n),n.show(e,i,r)}function callDelay(t){return function(e,i,r){var n=r.value,o="$isDelay"+i,s=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];this[o]=!1,n.call.apply(n,[this].concat(t))},a=function(){for(var e=[],i=0;i<arguments.length;i++)e[i]=arguments[i];this[o]||(this[o]=!0,t?egret.setTimeout.apply(egret,[s,this,t].concat(e)):egret.callLater.apply(egret,[s,this].concat(e)))};return r.value=a,r}}function callTime(t){return void 0===t&&(t=100),function(e,i,r){var n=r.value,o=!1,s=[];return r.value=function(){for(var e=this,i=[],r=0;r<arguments.length;r++)i[r]=arguments[r];if(s.push(i),!o){o=!0;var a=egret.setInterval(function(){n.call.apply(n,[e].concat(s.shift())),s.length||(egret.clearInterval(a),o=!1)},this,t)}},r}}function setLocationDef(t,e,i){i&&(_locationFun[t]=i);var r=getLocation(t);r?i&&i(r):setLocation(t,e)}function setLocation(t,e){var i=urlParam.actorid+"";!i&&location.origin&&(i=location.origin+location.pathname),localStorage.setItem(""+i+t,e),_locationFun[t]&&_locationFun[t](e)}function getLocation(t,e){var i=urlParam.actorid+"";!i&&location.origin&&(i=location.origin+location.pathname);var r=localStorage.getItem(""+i+t);switch(e){case 2:return"true"===r;case 1:return+r;default:return r}}var __reflect=this&&this.__reflect||function(t,e,i){t.__class__=e,i?i.push(e):i=[e],t.__types__=t.__types__?i.concat(t.__types__):i},__extends=this&&this.__extends||function(t,e){function i(){this.constructor=t}for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r]);i.prototype=e.prototype,t.prototype=new i},__awaiter=this&&this.__awaiter||function(t,e,i,r){return new(i||(i=Promise))(function(n,o){function s(t){try{l(r.next(t))}catch(e){o(e)}}function a(t){try{l(r["throw"](t))}catch(e){o(e)}}function l(t){t.done?n(t.value):new i(function(e){e(t.value)}).then(s,a)}l((r=r.apply(t,e||[])).next())})},__generator=this&&this.__generator||function(t,e){function i(t){return function(e){return r([t,e])}}function r(i){if(n)throw new TypeError("Generator is already executing.");for(;l;)try{if(n=1,o&&(s=o[2&i[0]?"return":i[0]?"throw":"next"])&&!(s=s.call(o,i[1])).done)return s;switch(o=0,s&&(i=[0,s.value]),i[0]){case 0:case 1:s=i;break;case 4:return l.label++,{value:i[1],done:!1};case 5:l.label++,o=i[1],i=[0];continue;case 7:i=l.ops.pop(),l.trys.pop();continue;default:if(s=l.trys,!(s=s.length>0&&s[s.length-1])&&(6===i[0]||2===i[0])){l=0;continue}if(3===i[0]&&(!s||i[1]>s[0]&&i[1]<s[3])){l.label=i[1];break}if(6===i[0]&&l.label<s[1]){l.label=s[1],s=i;break}if(s&&l.label<s[2]){l.label=s[2],l.ops.push(i);break}s[2]&&l.ops.pop(),l.trys.pop();continue}i=e.call(t,l)}catch(r){i=[6,r],o=0}finally{n=s=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}var n,o,s,a,l={label:0,sent:function(){if(1&s[0])throw s[1];return s[1]},trys:[],ops:[]};return a={next:i(0),"throw":i(1),"return":i(2)},"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a},BaseWinEntry=function(t){function e(){var e=t.call(this)||this;return e.shapeAlpha=.5,e.event=[],e.percentWidth=100,e.percentHeight=100,e.initUI(),e}return __extends(e,t),e.prototype.initUI=function(){this.group=new eui.Group,this.group.width=720,this.group.height=1280,this.group.horizontalCenter=0,this.group.verticalCenter=0,this.addChild(this.group)},e.prototype.addBg=function(t){void 0===t&&(t=.5),this.shapeBg||(this.shapeAlpha=t,this.shapeBg=new egret.Shape,this.shapeBg.graphics.beginFill(0,t),this.shapeBg.graphics.drawRect(0,0,egret.MainContext.instance.stage.stageWidth,egret.MainContext.instance.stage.stageHeight),this.shapeBg.graphics.endFill(),this.addChildAt(this.shapeBg,0))},e.prototype.open=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];this.onStageResize(),egret.MainContext.instance.stage.addEventListener(egret.Event.RESIZE,this.onStageResize,this)},e.prototype.close=function(){this.removeEs(),egret.MainContext.instance.stage.removeEventListener(egret.Event.RESIZE,this.onStageResize,this),this.parent&&this.parent.removeChild(this)},e.prototype.onStageResize=function(){this.shapeBg&&(this.shapeBg.graphics.clear(),this.removeChild(this.shapeBg),this.shapeBg=null,this.addBg(this.shapeAlpha))},e.prototype.addClickE=function(t,e){this.addEvent(egret.TouchEvent.TOUCH_TAP,t,e)},e.prototype.addClickEndE=function(t,e){this.addEvent(egret.TouchEvent.TOUCH_END,t,e)},e.prototype.addClickBeginE=function(t,e){this.addEvent(egret.TouchEvent.TOUCH_BEGIN,t,e)},e.prototype.addChangeE=function(t,e){this.addEvent(egret.TouchEvent.CHANGE,t,e)},e.prototype.addChangingE=function(t,e){this.addEvent(egret.TouchEvent.CHANGING,t,e)},e.prototype.addItemTapE=function(t,e){this.addEvent(eui.ItemTapEvent.ITEM_TAP,t,e)},e.prototype.addLinkE=function(t,e){this.addEvent(egret.TextEvent.LINK,t,e)},e.prototype.addEvent=function(t,e,i){if(!e)return void console.log(egret.getQualifiedClassName(this)+"不存在绑定的显示对象，BaseView.addEvent");for(var r=!1,n=0,o=this.event;n<o.length;n++){var s=o[n];if(t==s[0]&&e==s[2]&&i==s[1]){r=!0;break}}r||(e.addEventListener(t,i,this),this.event.push([t,i,e]))},e.prototype.removeClickE=function(t,e){for(var i=0;i<this.event.length;i++){var r=this.event[i];if(t==r[2]&&r[0]==egret.TouchEvent.TOUCH_TAP&&r[1]==e)return t.removeEventListener(r[0],e,this),void this.event.splice(i,1)}},e.prototype.removeEs=function(){for(var t=0,e=this.event;t<e.length;t++){var i=e[t];i[2].removeEventListener(i[0],i[1],this),i[2].hasEventListener(i[0]),!1}this.event.length=0},e.prototype.createButton=function(t,e,i,r,n,o){void 0===n&&(n=0),void 0===o&&(o=0);var s=new eui.Button;return s.label=e,r&&(s.skinName=r),i&&(s.icon=i),t.addChild(s),s.x=n,s.y=o,s},e.prototype.createEuiImage=function(t,e,i,r){void 0===i&&(i=0),void 0===r&&(r=0);var n=new eui.Image;return n.x=i,n.y=r,n.source=e,t.addChild(n),n},e.prototype.createEuiLabelText=function(t,e,i,r,n){void 0===i&&(i=0),void 0===r&&(r=0),void 0===n&&(n=20);var o=new eui.Label;return o.x=i,o.y=r,o.textFlow=this.addColorTF(e),o.size=n,o.fontFamily="SimHei",t&&t.addChild(o),o},e.prototype.createEuiTextInput=function(t,e,i,r,n){void 0===e&&(e=0),void 0===i&&(i=0);var o=new eui.EditableText;return o.x=e,o.y=i,o.width=r,o.height=n,t.addChild(o),o},e.prototype.addColorTF=function(t,e,i){return void 0===i&&(i=!1),i&&(t=this.addUnderLine(t.toString())),e?(new egret.HtmlTextParser).parser(this.addColor(t.toString(),e)):(new egret.HtmlTextParser).parser(t.toString())},e.prototype.addColor=function(t,e){var i;return"string"==typeof e?i=String(e):"number"==typeof e&&(i=Number(e).toString(10)),'<font color="'+i+'">'+t+"</font>"},e.prototype.addLink=function(t,e,i){void 0===i&&(i=!1);var r=i?this.addUnderLine(t):t;return"<a href='event:"+e+"'>"+r+"</a>"},e.prototype.addUnderLine=function(t){return"<u>"+t+"</u>"},e}(eui.Component);__reflect(BaseWinEntry.prototype,"BaseWinEntry");var LoginTextItem=function(t){function e(){var e=t.call(this)||this;return e.label=new eui.Label,e.label.size=20,e.label.width=148,e.label.height=20,e.label.fontFamily="黑体",e.width=25,e.height=30,e.addChild(e.label),e}return __extends(e,t),e.prototype.dataChanged=function(){var t=this.data;this.label.text=t},e.prototype.isSelect=function(t){this.label.textColor=t?5949490:16777215},e}(eui.ItemRenderer);__reflect(LoginTextItem.prototype,"LoginTextItem");var LangEntry=function(){function t(){}return t.str2="适龄提示：本游戏适合18周岁以上者参与",t.str3="抵制不良游戏，拒绝盗版游戏，注意自我保护，谨防受骗上当。\n适度游戏益脑，沉迷游戏伤身，合理安排时间，享受健康生活。",t.str4="",t.str5="你的账号已经被禁止登录游戏,请联系客服",t.str6="服务器维护中,请选择其他服务器",t.str7=["只有装备寻宝才能获得仙戒和魔戒","参与百倍返利，各种奖励领不停","0元购可以免费获得绝版时装~","购买仙玉月卡，每天都可以领取大量仙玉","1元秒杀，小投资大回报，打包购买还能再打折哦","获得六道神镜就能体验无限暴击的快感啦！","幽冥地宫副本记得鼓舞，不然就亏大了"],t.str8="最近登录",t.str9="服",t.str10="暂无公告!",t.str11="您选择的服务器与原服务器版本不同,请重新进入app",t.str12="充值已关闭!",t.str13="服务器已满,请选择其他服务器!",t}();__reflect(LangEntry.prototype,"LangEntry");var Main=function(t){function e(){var i=t.call(this)||this;e.ins=i,RES.registerVersionController(new VersionController);var r=egret.MainContext.instance.stage;return r.registerImplementation("eui.IAssetAdapter",new AssetAdapter),r.registerImplementation("eui.IThemeAdapter",new ThemeAdapter),egret.Capabilities.isMobile||(r.orientation=egret.OrientationMode.AUTO),RES.setMaxLoadingThread(6),egret.ImageLoader.crossOrigin="anonymous",i.start(),i}return __extends(e,t),e.prototype.start=function(){return __awaiter(this,void 0,void 0,function(){var t,i=this;return __generator(this,function(r){switch(r.label){case 0:return[4,RES.loadConfig("icon/entry.res.json","/")];case 1:return r.sent(),t=new eui.Image,t.horizontalCenter=0,t.verticalCenter=0,t.source="icon/"+(window.platform.getLoadingBg()||"bg1.jpg"),this.addChild(t),RES.getResByUrl("icon/first.mp3").then(function(t){i.stage.once(egret.TouchEvent.TOUCH_TAP,function(){t.play(0,1).volume=0},i,!0)}),[4,window.platform.sdkInit()];case 2:return r.sent(),[4,e.startLogin()];case 3:return r.sent(),[2]}})})},e.startLogin=function(){return __awaiter(this,void 0,void 0,function(){var t;return __generator(this,function(i){switch(i.label){case 0:return t=e.ins,LoadingWait.showWait(),[4,window.platform.login()];case 1:return i.sent(),platform.report("loginOK"),window.platform.reportRegister(),LoadingWait.hideWait(),[4,e.enterGameMain(0,!0)];case 2:return i.sent()?[2]:urlParam.openId||urlParam.loginSys?(t.addChild(new ServerWin),[2]):(window.isLoginDebugWin=!0,t.removeChildren(),t.addChild(new LoginDebugWin),[2])}})})},e.enterGameMain=function(t,i,r){return void 0===t&&(t=0),void 0===i&&(i=!1),void 0===r&&(r=!0),__awaiter(this,void 0,void 0,function(){var n,o,s,a;return __generator(this,function(l){switch(l.label){case 0:return n=urlParam.openId,o=urlParam.srvid,!r||isNaN(+o)?[3,2]:[4,window.platform.getServerInfo(+o,t)];case 1:l.sent(),l.label=2;case 2:return s=urlParam.wss,n&&s&&o?(e.ins.removeChildren(),e.ins.addChild(new ServerLoadingWin),window.platform.report("enterLoading"),[2,!0]):(a="登录失败，参数 "+JSON.stringify({openId:n+"",wss:s+"",srvid:o+""}),i?console.warn(a):showWarnTips(e.ins,a),[2,!1])}})})},e}(eui.UILayer);__reflect(Main.prototype,"Main"),window.Main=Main;var ParticlePlayer=function(t){function e(){return t.call(this)||this}return __extends(e,t),e.prototype.playFile=function(t,e,i){return void 0===e&&(e=null),void 0===i&&(i=!0),this.compFun=e,this.remove=i,this.name==t&&this.system&&this.jsonData?(this.addChild(this.system),this.system.addEventListener(egret.Event.COMPLETE,this.playComp,this),void this.system.start(this.jsonData.duration)):(this.name=t,RES.getResByUrl(this.name+".json",this.loadJson,this,RES.ResourceItem.TYPE_JSON),void RES.getResByUrl(this.name+".png",this.loadPng,this,RES.ResourceItem.TYPE_IMAGE))},e.prototype.loadJson=function(t,e){var i=e.split(".")[0];this.name==i&&t&&(this.jsonData=t,this.createBody())},e.prototype.loadPng=function(t,e){var i=e.split(".")[0];this.name==i&&t&&(this.texture=t,this.createBody())},e.prototype.createBody=function(){this.jsonData&&this.texture&&(this.system&&(this.system.stop(!0),this.removeChild(this.system)),this.system=new particle.GravityParticleSystem(this.texture,this.jsonData),this.system.addEventListener(egret.Event.COMPLETE,this.playComp,this),this.addChild(this.system),this.system.touchEnabled=!1,this.touchEnabled=!1,this.touchChildren=!1,this.system.start(this.jsonData.duration))},e.prototype.playComp=function(){this.system.removeEventListener(egret.Event.COMPLETE,this.playComp,this),this.stage&&this.compFun&&this.compFun(),this.remove&&this.parent&&this.parent.removeChild(this)},e.prototype.stop=function(t){this.system&&this.system.stop(t)},e}(egret.DisplayObjectContainer);__reflect(ParticlePlayer.prototype,"ParticlePlayer"),particle.GravityParticleSystem.prototype.$hitTest=function(){return null},window.ParticlePlayer=ParticlePlayer;var ResEntrance=function(){function t(){}return t.getResSource=function(t){return"icon/"+t},t}();__reflect(ResEntrance.prototype,"ResEntrance");var _a=RES.host,save=_a.save,remove=_a.remove;RES.gpuMemory=0,RES.picDic={},RES.host.save=function(t,e){save(t,e),t.type==RES.ResourceItem.TYPE_IMAGE&&(RES.picDic[t.name]||(RES.picDic[t.name]=e,RES.gpuMemory+=e.$bitmapWidth*e.$bitmapHeight*4))},RES.host.remove=function(t){var e=RES.host.get(t);remove(t),t.type==RES.ResourceItem.TYPE_IMAGE&&RES.picDic[t.name]&&(delete RES.picDic[t.name],RES.gpuMemory-=e.$bitmapWidth*e.$bitmapHeight*4)};var ResourceMgr=function(){function t(){}return t.init=function(){egret.setInterval(this.destroyRes,this,5e3)},t.destroyRes=function(){if(!(RES.gpuMemory<314572800))for(var t in RES.picDic){var e=RES.picDic[t];if(this.checkCanDestroy(e)){if(!~t.indexOf("png")){this.destroy(t);continue}if(~t.indexOf("piaozi1_zycs"))continue;if(~t.indexOf(".")){var i=t.split("/").pop(),r=i.replace(".png","_json");if(RES.getResourceInfo(r)){this.destroy(r);continue}if(r=r.replace(".png",".fnt"),RES.getResourceInfo(r)){console.log("字体--- ",t);continue}}var n=t.replace(".png",".fnt");if(RES.getResourceInfo(n))continue;this.destroy(t)}}},t.destroy=function(t){RES.destroyRes(t)},t.checkCanDestroy=function(t){if(!t)return!1;var e=t.bitmapData;if(!e)return!1;var i=e.hashCode;if(!i)return!1;var r=egret.BitmapData._displayList[i],n=window.MC?window.MC.displayList[i]:[];return!(r&&r.length||n&&n.length)},t}();__reflect(ResourceMgr.prototype,"ResourceMgr"),ResourceMgr.init();var ThemeAdapter=function(){function t(){}return t.prototype.getTheme=function(t,e,i,r){function n(t){e.call(r,t)}function o(e){e.resItem.url==t&&(RES.removeEventListener(RES.ResourceEvent.ITEM_LOAD_ERROR,o,null),i.call(r))}var s=this;if("undefined"!=typeof generateEUI)egret.callLater(function(){e.call(r,generateEUI)},this);else if("undefined"!=typeof generateEUI2)RES.getResByUrl("resource/gameEui.json",function(t,i){window.JSONParseClass.setData(t),egret.callLater(function(){e.call(r,generateEUI2)},s)},this,RES.ResourceItem.TYPE_JSON);else if("undefined"!=typeof generateJSON)if(t.indexOf(".exml")>-1){var a=t.split("/");a.pop();var l=a.join("/")+"_EUI.json";generateJSON.paths[t]?egret.callLater(function(){e.call(r,generateJSON.paths[t])},this):RES.getResByUrl(l,function(i){window.JSONParseClass.setData(i),egret.callLater(function(){e.call(r,generateJSON.paths[t])},s)},this,RES.ResourceItem.TYPE_JSON)}else egret.callLater(function(){e.call(r,generateJSON)},this);else RES.addEventListener(RES.ResourceEvent.ITEM_LOAD_ERROR,o,null),RES.getResByUrl(t,n,this,RES.ResourceItem.TYPE_TEXT)},t}();__reflect(ThemeAdapter.prototype,"ThemeAdapter",["eui.IThemeAdapter"]);var VersionController=function(){function t(){}return t.prototype.init=function(){return Promise.resolve()},t.prototype.getVirtualUrl=function(t){return window.getUrl(t)},t}();__reflect(VersionController.prototype,"VersionController",["RES.IVersionController"]);var AssetAdapter=function(){function t(){}return t.prototype.getAsset=function(t,e,i){function r(r){e.call(i,r,t)}if(RES.hasRes(t)){var n=RES.getRes(t);n?r(n):RES.getResAsync(t,r,this)}else RES.getResByUrl(t,r,this,RES.ResourceItem.TYPE_IMAGE)},t}();__reflect(AssetAdapter.prototype,"AssetAdapter",["eui.IAssetAdapter"]);var EntryWarnWin=function(t){function e(){return t.call(this)||this}return __extends(e,t),e.prototype.initUI=function(){t.prototype.initUI.call(this),this.addBg(),this.group.width=void 0,this.group.height=void 0,this.createEuiImage(this.group,ResEntrance.getResSource("selserbg.png"));var e=this.createEuiImage(this.group,ResEntrance.getResSource("viewbg.png"));e.scale9Grid=new egret.Rectangle(150,90,2,2),e.top=40,e.bottom=90,e.left=e.right=30;var i=this.createEuiImage(this.group,ResEntrance.getResSource("sertitlebg.png"),0,-13);i.horizontalCenter=0;var r=this.createEuiLabelText(this.group,"提 示",0,-2,22);r.horizontalCenter=0,this.content=this.createEuiLabelText(this.group,"",0,0,20),this.content.textAlign="center",this.content.verticalAlign="middle",this.content.textColor=15794098,this.content.left=this.content.right=40,this.content.top=50,this.content.bottom=100,this.content.width=200;var n='<e:Skin class="skins.ButtonSkin" states="up,down,disabled" minHeight="50" minWidth="80" xmlns:e="http://ns.egret.com/eui">\n    						<e:Image id="iconDisplay" horizontalCenter="0" verticalCenter="0"/>\n    						 <e:Label id="labelDisplay" top="1" bottom="1" left="1" right="1"\n						 		size="20" fontFamily="SimHei" textColor="0xFFFFFF" verticalAlign="middle" textAlign="center"/>\n						</e:Skin>';this.btn=this.createButton(this.group,"确定",ResEntrance.getResSource("button05.png"),n),this.btn.horizontalCenter=0,this.btn.bottom=30,this.addClickE(this.btn,this.onClick)},e.prototype.show=function(t,e,i){this.callback=e,this.content.textFlow=this.addColorTF(t),this.btn.label=i},e.prototype.removeDisplay=function(){this.close()},e.prototype.onClick=function(){this.parent&&this.parent.removeChild(this),this.callback&&this.callback()},e}(BaseWinEntry);__reflect(EntryWarnWin.prototype,"EntryWarnWin"),window.EntryWarnWin=EntryWarnWin,window.showWarnTips=showWarnTips;var LoadingWait=function(t){function e(){var e=t.call(this)||this;e.isshowWait=!1;var i=new eui.Rect;return i.graphics.beginFill(0),i.alpha=.3,i.right=i.left=i.top=i.bottom=0,e.addChild(i),e.group=new eui.Group,e.group.verticalCenter=0,e.group.horizontalCenter=0,e.addChild(e.group),e}return __extends(e,t),e.showWait=function(){this.waitwin||(this.waitwin=new e),egret.MainContext.instance.stage.addChild(this.waitwin),this.waitwin.show()},e.hideWait=function(){this.waitwin&&this.waitwin.hideWait()},e.prototype.show=function(){return __awaiter(this,void 0,void 0,function(){var t,e,i,r,n,o,s=this;return __generator(this,function(a){switch(a.label){case 0:return this.isshowWait=!0,this.mc?[3,2]:(t="res/eff/loading.json",e="res/eff/loading.png",[4,new Promise(function(n){RES.getResByUrl(t,function(t){t&&(i=t,r&&n())},s,RES.ResourceItem.TYPE_JSON),RES.getResByUrl(e,function(t){t&&(r=t,i&&n())},s,RES.ResourceItem.TYPE_IMAGE)})]);case 1:a.sent(),n=new egret.MovieClipDataFactory,n.mcDataSet=i,n.texture=r,o=new egret.MovieClip(n.generateMovieClipData("loading")),this.mc=o,a.label=2;case 2:return this.isshowWait&&(this.group.addChild(this.mc),this.mc.gotoAndPlay(1,-1)),[2]}})})},e.prototype.hideWait=function(){this.isshowWait=!1,this.parent&&this.parent.removeChild(this)},e}(eui.UILayer);__reflect(LoadingWait.prototype,"LoadingWait"),window.LoadingWait=LoadingWait;var LoginDebugWin=function(t){function e(){var e=t.call(this)||this;return e.group0=new eui.Group,e.group1=new eui.Group,e.group2=new eui.Group,e.group3=new eui.Group,e.isShowFPS=!0,e.clientList=[],e.onBackShowFPSClick(),e}return __extends(e,t),e.prototype.initUI1=function(){this.width=720,this.height=1280,this.left=0,this.right=0,this.group1.width=this.width,this.group1.y=10,this.group1.touchEnabled=!1,this.group2.touchEnabled=!1,this.group0.width=this.width,this.group0.touchEnabled=!1,this.group0.touchEnabled=!1,this.addChild(this.group0),this.group0.horizontalCenter=0,this.addChild(this.group1),this.group1.horizontalCenter=0,this.group1.addChild(this.group2),this.addChild(this.group3),this.group1.addChild(this.group3),this.selectServer=this.createEuiLabelText(this.group2,"服务器:",10,10,20),this.selectRes=this.createEuiLabelText(this.group2,"资源:",10,37,20),this.selectClient=this.createEuiLabelText(this.group2,"客户端",10,63,20);var t=new egret.Sprite;t.graphics.beginFill(47103,.5),t.graphics.drawRect(0,0,200,50),t.graphics.endFill(),t.x=140,t.y=0,this.group3.addChild(t);var e=new egret.Sprite;e.graphics.beginFill(47103,1),e.graphics.drawRect(0,0,100,40),e.graphics.endFill(),e.x=185,e.y=70,this.group3.addChild(e),this.input=this.createEuiTextInput(this.group3,150,10,241,43);var i=this.createEuiLabelText(this.group3,"游戏账号：",0,10,30);i.textFlow=this.addColorTF("游戏账号：",16777215),this.lbIntoGame=this.createEuiLabelText(this.group3,"进入游戏",195,80,20),this.lbIntoGame.textFlow=this.addColorTF("进入游戏",16777215);var r=this.createEuiLabelText(this.group2,"",10,228,20);r.textFlow=this.addColorTF(this.addUnderLine("服务器操作"),5949490),r.addEventListener(egret.TouchEvent.TOUCH_TAP,function(){location.href=urlParam.serOp},this),this.lbSkillEditor=this.createEuiLabelText(this.group2,"技能编辑",210,228,20),this.lbSkillEditor.textFlow=this.addColorTF(this.addUnderLine("技能编辑"),5949490),this.lbLabelEditor=this.createEuiLabelText(this.group2,"文本编辑",340,228,20),this.lbLabelEditor.textFlow=this.addColorTF(this.addUnderLine("文本编辑"),5949490),this.lbShowFps=this.createEuiLabelText(this.group2,"显示FPS",450,228,20),this.lbShowFps.textFlow=this.addColorTF(this.addUnderLine("显示FPS"),5949490),this.lbBack=this.createEuiLabelText(this.group2,"返回",550,228,20),this.lbBack.textFlow=this.addColorTF(this.addUnderLine("返回"),5949490);var n=this.createEuiLabelText(this.group1,"健康游戏公告",350,1020,20);n.horizontalCenter=0;var o=this.createEuiLabelText(this.group1,"抵制不良游戏，拒绝盗版游戏。注意自我保护，谨防受骗上当。\r\n适度游戏益脑，沉迷游戏伤身。合理安排时间，享受健康生活。",50,1050,20);o.horizontalCenter=0;this.createEuiLabelText(this.group2,"服务器列表:",10,267,20),this.createEuiLabelText(this.group2,"资源列表:",210,267,20),this.createEuiLabelText(this.group2,"客户端列表",390,267,20);this.eServer=new eui.List,this.eServer.x=10,this.eServer.y=299,this.eServer.itemRenderer=LoginTextItem,this.eRes=new eui.List,this.eRes.x=210,this.eRes.y=299,this.eRes.itemRenderer=LoginTextItem,this.eClient=new eui.List,this.eClient.x=390,this.eClient.y=299,this.eClient.itemRenderer=LoginTextItem,this.group2.addChild(this.eServer),this.group2.addChild(this.eRes),this.group2.addChild(this.eClient),this.addClickE(this.lbIntoGame,this.onEnterClick),this.addClickE(this.lbSkillEditor,this.onSkillEdiorClick),this.addClickE(this.lbLabelEditor,this.onLabelEdiorClick),this.addClickE(this.lbBack,this.onBackClick),this.addClickE(this.lbShowFps,this.onBackShowFPSClick),this.addItemTapE(this.eServer,this.onServerListClick),this.addItemTapE(this.eRes,this.onResClick),this.addItemTapE(this.eClient,this.onClientClick)},e.prototype.updateStatsu=function(){var t=void 0==window.showurl||1==window.showurl;this.group2.visible=t,t?(this.group3.x=10,this.group3.y=100):(this.group3.x=120,this.group3.y=450)},e.prototype.addDisplay=function(){return __awaiter(this,void 0,void 0,function(){var t,e,i,r,n,o,s,a,l,h,c,u,p,g=this;return __generator(this,function(d){switch(d.label){case 0:return urlParam.privacy?(t=window.platform.getPrivacy(),!t[0]||getLocation(6,2)?[3,2]:[4,new Promise(function(t){g.addChild(new PrivacyWin(t))})]):[3,2];case 1:d.sent(),d.label=2;case 2:return this.initUI1(),e=window,i=e.serverList,r=e.resList,i?[3,4]:[4,RES.getResByUrl("list.json")];case 3:return n=d.sent(),this.resList=n.resList,this.serverList=n.serverList,[3,5];case 4:this.resList=r,this.serverList=i,d.label=5;case 5:for(o in this.resList)this.clientList.push(this.resList[o]+"main.min.js");return this.eServer.dataProvider=new eui.ArrayCollection(this.serverList),this.eRes.dataProvider=new eui.ArrayCollection(this.resList),this.eClient.dataProvider=new eui.ArrayCollection(this.clientList),s=setTimeout(function(){g.onSelectServer(),g.onSelectRes(),g.onSelectClient(),clearTimeout(s)},500),a=getLocation(0,1),l=getLocation(1,1),h=getLocation(2,1),c=this.serverList[a]||this.serverList[0],u=this.resList[l]||this.resList[0],p=this.clientList[h]||this.clientList[0],this.selectServer.text="服务器:"+c,this.selectRes.text="资源:"+u,this.selectClient.text="客户端:"+p,this.input.text=getLocation(3,0)||urlParam.openId,c&&this.setServer(c,a),u&&this.setRes(u,l),p&&this.setClient(p),this.updateStatsu(),[2]}})})},e.prototype.onSelectServer=function(){for(var t=this.serverList[+getLocation(0,1)],e=this.eServer.numElements,i=0;e>i;i++){var r=this.eServer.getElementAt(i);if(r&&r.data==t){r.isSelect(!0),this.eServer.selectedIndex=i;break}}},e.prototype.onSelectRes=function(){for(var t=this.resList[getLocation(1)],e=this.eRes.numElements,i=0;e>i;i++){var r=this.eRes.getElementAt(i);if(r&&r.data==t){r.isSelect(!0);break}}},e.prototype.onSelectClient=function(){var t=this.selectClient.text.split(":");t.shift();for(var e=t.join(":"),i=this.eClient.numElements,r=0;i>r;r++){var n=this.eClient.getElementAt(r);if(n&&n.data==e){n.isSelect(!0);break}}},e.prototype.onServerListClick=function(t){var e=t.itemRenderer,i=t.item;this.setServer(i,t.itemIndex);for(var r=this.eServer.numElements,n=0;r>n;n++){var o=this.eServer.getElementAt(n);o&&o.isSelect(!1)}e.isSelect(!0)},e.prototype.setServer=function(t,e){var i=t.split("|");urlParam.srvid=i[1],urlParam.wss=i[2],this.selectServer.text="服务器:"+t,setLocation(0,e+"")},e.prototype.onResClick=function(t){var e=t.itemRenderer,i=t.item;this.setRes(i,t.itemIndex);for(var r=this.eRes.numElements,n=0;r>n;n++){var o=this.eRes.getElementAt(n);o&&o.isSelect(!1)}e.isSelect(!0)},e.prototype.setRes=function(t,e){this.selectRes.text="资源:"+t,setLocation(1,e+"")},e.prototype.onClientClick=function(t){var e=t.itemRenderer,i=t.item;this.setClient(i);for(var r=this.eClient.numElements,n=0;r>n;n++){var o=this.eClient.getElementAt(n);o&&o.isSelect(!1)}e.isSelect(!0),setLocation(2,this.eClient.selectedIndex+"")},e.prototype.setClient=function(t){this.selectClient.text="客户端:"+t},e.prototype.onEnterClick=function(t){return __awaiter(this,void 0,void 0,function(){var t;return __generator(this,function(e){return t=this.input.text,urlParam.openId=t,setLocation(3,t),urlParam.root=this.selectRes.text.split("|")[1],Main.enterGameMain(this.eServer.selectedIndex),[2]})})},e.prototype.onSkillEdiorClick=function(t){var e=this.input.text;urlParam.openId=e,setLocation(3,e),urlParam.root=this.selectRes.text.split("|")[1],window.isEditor=!0,Main.enterGameMain()},e.prototype.onLabelEdiorClick=function(t){var e=this.input.text;urlParam.openId=e,setLocation(3,e),urlParam.root=this.selectRes.text.split("|")[1],window.isEditor=!0,Main.enterGameMain()},e.prototype.onBackClick=function(t){window.history.back()},e.prototype.onBackShowFPSClick=function(){this.onDisplayFPS()},e.prototype.onDisplayFPS=function(){this.isShowFPS=!this.isShowFPS;var t=document.getElementById("egret-fps-panel");t&&(t.style.visibility=this.isShowFPS?"visible":"hidden"),this.lbShowFps&&(this.lbShowFps.textFlow=this.addColorTF(this.addUnderLine(this.isShowFPS?"隐藏FPS":"显示FPS"),5949490))},e.openCheck=function(){return!0},e}(BaseWinEntry);__reflect(LoginDebugWin.prototype,"LoginDebugWin");var HttpRequester=function(){function t(){this.requester=new egret.HttpRequest,this.errorCount=0,this.maxErrorCount=3}return t.prototype.setMaxErrorCount=function(t){this.maxErrorCount=t},t.prototype.sendUrl=function(){this.requester.addEventListener(egret.Event.COMPLETE,this.onGetComplete,this),this.requester.addEventListener(egret.IOErrorEvent.IO_ERROR,this.onGetIOError,this),this.requester.send()},t.prototype.open=function(t,e,i,r){void 0===e&&(e=egret.HttpMethod.GET),void 0===i&&(i=null),void 0===r&&(r=null),this.url=t,this.method=e,this.onSuccessCallback=i,this.onFailCallback=r||this.log.bind(this),this.requester.open(this.url,this.method)},t.prototype.send=function(){this.sendUrl()},t.prototype.onGetComplete=function(t){this.errorCount=0,this.clear(),this.onSuccessCallback&&this.onSuccessCallback(t)},t.prototype.onGetIOError=function(t){this.clear(),this.errorCount<this.maxErrorCount?(this.requester.open(this.url,this.method),this.send(),this.errorCount+=1):(this.errorCount=0,this.onFailCallback(t),this.log())},t.prototype.clear=function(){this.requester.removeEventListener(egret.Event.COMPLETE,this.onGetComplete,this),this.requester.removeEventListener(egret.IOErrorEvent.IO_ERROR,this.onGetIOError,this)},t.prototype.log=function(){console.log("url:"+this.url+"请求失败")},t}();__reflect(HttpRequester.prototype,"HttpRequester"),window.HttpRequester=HttpRequester;var Http=function(){function t(){}return t.get=function(t){var e=this;return new Promise(function(i,r){var n=new egret.HttpRequest;n.responseType=egret.HttpResponseType.TEXT,n.open(t,egret.HttpMethod.GET),n.once(egret.Event.COMPLETE,function(t){i(n.response)},e),n.once(egret.IOErrorEvent.IO_ERROR,function(t){i(null)},e),n.send()})},t.post=function(t,e){var i=this;return new Promise(function(r,n){var o=new egret.HttpRequest;o.open(t,egret.HttpMethod.POST),o.once(egret.Event.COMPLETE,function(t){r(o.response)},i),o.once(egret.IOErrorEvent.IO_ERROR,function(t){r(null)},i),o.send(e)})},t}();__reflect(Http.prototype,"Http"),window.Http=Http;var LoginWin=function(t){function e(e){var i=t.call(this)||this;i.cb=e,i.inputs=[],i.horizontalCenter=0,i.verticalCenter=0,i.group.width=void 0,i.group.height=void 0,i.group.verticalCenter=-20;var r=getLocation(urlParam.loginSys+"account"),n=getLocation(urlParam.loginSys+"pass"),o=getLocation(urlParam.loginSys+"autoLogin");return o&&r&&n?(i.login(r,n,!0),i):(i.createUI(),i)}return __extends(e,t),e.prototype.createUI=function(){this.createEuiImage(this.group,ResEntrance.getResSource("loginBg.png"));var t=getLocation(urlParam.loginSys+"account"),e=getLocation(urlParam.loginSys+"pass");this.createEuiLabelText(this.group,"账号",50,135,24),this.createEuiLabelText(this.group,"密码",50,195,24),this.createEuiImage(this.group,ResEntrance.getResSource("textBg.png"),115,125),this.createEuiImage(this.group,ResEntrance.getResSource("textBg.png"),115,185);var i=this.createEuiTextInput(this.group,125,132,270,30);i.size=24,i.textColor=16764278,i.text=t,i.textAlign="center",i.verticalAlign="middle",this.inputs.push(i);var r=this.createEuiTextInput(this.group,125,193,270,30);r.size=24,r.textColor=16764278,r.textAlign="center",r.verticalAlign="middle",r.text=e,this.inputs.push(r);var n='<e:Skin class="skins.ButtonSkin" states="up,down,disabled" minHeight="50" minWidth="80" xmlns:e="http://ns.egret.com/eui">\n    						<e:Image id="iconDisplay" horizontalCenter="0" verticalCenter="0"/>\n						</e:Skin>',o=this.createButton(this.group,"",ResEntrance.getResSource("logonBtn1.png"),n,52,292);o.name="btn0";var s=this.createButton(this.group,"",ResEntrance.getResSource("logonBtn0.png"),n,264,292);s.name="btn1",this.addClickE(o,this.onClick),this.addClickE(s,this.onClick)},e.prototype.onClick=function(t){switch(t.currentTarget.name){case"btn0":var e=this.inputs[0].text,i=this.inputs[1].text;e&&i?this.login(e,i):showWarnTips(this,"账号密码不能为空");break;case"btn1":this.login()}},e.prototype.login=function(t,e,i){return __awaiter(this,void 0,void 0,function(){var r,n,o,s,a=this;return __generator(this,function(l){switch(l.label){case 0:return LoadingWait.showWait(),[4,Http.post(urlParam.loginSys+"api/reg"+(e?"":2),JSON.stringify({account:t,pass:e}))];case 1:if(r=l.sent(),LoadingWait.hideWait(),!r)return showWarnTips(this,"无法连接网络",function(){i&&a.createUI()}),[2];if(n=JSON.parse(r),n.err)return showWarnTips(this,n.err),[2];n.create&&(this.inputs[0].text=n.account,this.inputs[1].text=n.pass,o=new egret.RenderTexture,o.drawToTexture(this.parent),o.saveToFile("image/png",n.openId+".png")),setLocation(urlParam.loginSys+"account",t||n.account),setLocation(urlParam.loginSys+"pass",e||n.pass),setLocation(urlParam.loginSys+"autoLogin","1");for(s in n)urlParam[s]=n[s];return showWarnTips(this,"登录成功!"+(n.create?"账号已截图保存":""),function(){a.cb(),a.parent&&a.parent.removeChild(a)}),[2]}})})},e}(BaseWinEntry);__reflect(LoginWin.prototype,"LoginWin"),window.LoginWin=LoginWin;var Platform=function(){function t(){}return t.prototype.getUserInfo=function(){return __awaiter(this,void 0,void 0,function(){return __generator(this,function(t){return[2,{nickName:"username"}]})})},t.prototype.sdkInit=function(){return __awaiter(this,void 0,void 0,function(){return __generator(this,function(t){return[2]})})},t.prototype.login=function(){return __awaiter(this,void 0,void 0,function(){return __generator(this,function(t){return[2]})})},t.prototype.loadJs=function(t){return __awaiter(this,void 0,void 0,function(){return __generator(this,function(e){return[2,new Promise(function(e){window.loadSingleScript(RES.getVirtualUrl(t),e)})]})})},t.prototype.getServerInfo=function(t,e){return __awaiter(this,void 0,void 0,function(){var i,r,n,o,s,a;return __generator(this,function(l){switch(l.label){case 0:return e=e||0,i=urlParam.openId,(r=urlParam.apiRoot)?(s=(o=JSON).parse,[4,Http.post(r+"api/use",JSON.stringify({srvid:t,openId:i,idx:e}))]):[3,2];
case 1:n=s.apply(o,[l.sent()]);for(a in n)urlParam[a]=n[a];l.label=2;case 2:return this.reportSelectServer(),[2]}})})},t.prototype.getServerList=function(t){return __awaiter(this,void 0,void 0,function(){var e,i,r,n,o,s;return __generator(this,function(a){switch(a.label){case 0:return e=urlParam.openId,i=urlParam.apiRoot,r=urlParam.apptype,s=(o=JSON).parse,[4,Http.post(i+"api/list",JSON.stringify({openId:e,apptype:r,page:t}))];case 1:return n=s.apply(o,[a.sent()]),[2,n[t].reverse()]}})})},t.prototype.getNotice=function(){return __awaiter(this,void 0,void 0,function(){var t,e,i,r,n;return __generator(this,function(o){switch(o.label){case 0:return t=urlParam.appid,e=urlParam.apiRoot,n=(r=JSON).parse,[4,Http.post(e+"api/notice",JSON.stringify({appid:t}))];case 1:return i=n.apply(r,[o.sent()]),[2,i.notice]}})})},t.prototype.pay=function(t,e,i,r,n){return void 0===i&&(i=0),void 0===r&&(r=""),void 0===n&&(n=""),__awaiter(this,void 0,void 0,function(){var o,s,a,l,h,c,u,p;return __generator(this,function(g){switch(g.label){case 0:return o=urlParam.openId,s=urlParam.apiRoot,a=urlParam.appid,l=urlParam.apptype,h=urlParam.actorid,p=(u=JSON).parse,[4,Http.post(s+"fee/order",JSON.stringify({openId:o,actorid:h,serverId:urlParam.srvid,money:e,yb:t,funcid:i,apptype:l,appid:a}))];case 1:return c=p.apply(u,[g.sent()]).order,this.paySDK(e,c,r,n,t+""),[2]}})})},t.prototype.paySDK=function(t,e,i,r,n){},t.prototype.report=function(t){return __awaiter(this,void 0,void 0,function(){var e,i,r,n,o,s,a;return __generator(this,function(l){return e=urlParam.openId,i=urlParam.reportRoot,r=urlParam.srvid,n=urlParam.isnew,o=urlParam.actorid,s=urlParam.apptype,a=urlParam.appid,i&&Http.post(i+"backlog/log?type=client",JSON.stringify({flag:t,srvid:r,openId:e,isnew:!!n,actorid:o,apptype:s,appid:a})),"loginOK"==t&&this.reportLogin(),"createRoleOK"==t&&this.reportCreateRole(),[2]})})},t.prototype.reportLogin=function(){},t.prototype.reportLevelup=function(){},t.prototype.reportCreateRole=function(){},t.prototype.reportSelectServer=function(){},t.prototype.reportRegister=function(){},t.prototype.reportLogout=function(){},t.prototype.setShareInfo=function(){},t.prototype.shareAppMessage=function(){},t.prototype.checkStr=function(t,e,i){return void 0===e&&(e=0),void 0===i&&(i=0),new Promise(function(e){e(t)})},t.prototype.checkLogout=function(){return{open:!1,fun:function(){}}},t.prototype.getFocus=function(){return __awaiter(this,void 0,void 0,function(){return __generator(this,function(t){return[2,[!1,!1,function(){}]]})})},t.prototype.getVerify=function(){return __awaiter(this,void 0,void 0,function(){return __generator(this,function(t){return[2,[{},function(t){}]]})})},t.prototype.getVerifyApi=function(){return __awaiter(this,void 0,void 0,function(){var t,e,i,r,n,o,s,a=this;return __generator(this,function(l){switch(l.label){case 0:return t=urlParam.openId,e=urlParam.reportRoot,i=urlParam.appid,e?[4,Http.post(e+"back/realname/check",JSON.stringify({openId:t,appid:i}))]:[2];case 1:return r=l.sent(),console.log("请求check",r),n=JSON.parse(r),o=n.code,s=n.auth,[2,[1==o&&!s,function(r,n){return __awaiter(a,void 0,void 0,function(){var o;return __generator(this,function(s){switch(s.label){case 0:return[4,Http.post(e+"back/realname/verify",JSON.stringify({openId:t,appid:i,name:r,idcard:n}))];case 1:return o=s.sent(),console.log("收到verify：",o),[2,new Promise(function(t){t(JSON.parse(o))})]}})})}]]}})})},t.prototype.getShare=function(t){return __awaiter(this,void 0,void 0,function(){return __generator(this,function(t){return[2,[!1,!1,function(){return!0}]]})})},t.prototype.getKeFu=function(){return __awaiter(this,void 0,void 0,function(){return __generator(this,function(t){return[2,!1]})})},t.prototype.optios=function(){},t.prototype.getUserInfoBtn=function(t){return __awaiter(this,void 0,void 0,function(){return __generator(this,function(t){return[2,[!1,function(){},function(){}]]})})},t.prototype.getLoadingBg=function(){return""},t.prototype.getPrivacy=function(){if(urlParam.privacy){var t='　侠行天下文网游备字〔2016〕Ｍ-RPG 0332 号\n请你务必认真阅读、充分理解“隐私政策”各条款，包括但不限于：为了向你提供数据、分享等服务所要获取的权限信息。\n你可以阅读|E:1:《隐私政策》|了解详细信息。如您同意，请点击"同意"开始接受我们的服务。';return[!0,t,"https://passcdn.mengkegame.cn/privacyPolicy.html"]}return[!1,"",""]},t}();__reflect(Platform.prototype,"Platform"),window.platform?window.platform.__proto__=new Platform:window.platform=new Platform;var PrivacyWin=function(t){function e(e){var i=t.call(this)||this;return i.cb=e,i.horizontalCenter=0,i.verticalCenter=0,i}return __extends(e,t),e.prototype.initUI=function(){return __awaiter(this,void 0,void 0,function(){var e,i,r,n,o,s,a,l,h,c;return __generator(this,function(u){switch(u.label){case 0:return t.prototype.initUI.call(this),this.group.width=552,this.group.height=492,[4,RES.getResByUrl("resource/sheet/sksk_zycs.png",null,null,RES.ResourceItem.TYPE_IMAGE)];case 1:return e=u.sent(),[4,RES.getResByUrl("resource/sheet/sksk_zycs.json",null,null,RES.ResourceItem.TYPE_JSON)];case 2:return i=u.sent(),r=i.frames,n=new eui.Group,n.width=520,n.height=450,n.horizontalCenter=0,this.group.addChild(n),o=new egret.Bitmap(e),s=CutAtlasTools,a=new eui.Image(s.getSlice2Atlas(o,r.sksk_zycs_bg)),a.bottom=10,a.top=10,a.horizontalCenter=0,n.addChild(a),a=new eui.Image(s.getSlice2Atlas(o,r.sksk_zycs_bg_top)),a.top=0,n.addChild(a),a=new eui.Image(s.getSlice2Atlas(o,r.sksk_zycs_bg_bottom)),a.bottom=0,n.addChild(a),a=new eui.Image(s.getSlice2Atlas(o,r.sksk_zycs_bg_tittle)),a.horizontalCenter=0,a.y=20,n.addChild(a),a=new eui.Image(s.getSlice2Atlas(o,r.sksk_zycs_bg2)),a.left=30,a.right=30,a.horizontalCenter=0,a.y=88,a.height=244,n.addChild(a),l=new eui.Label,l.textFlow=this.addColorTF("隐私政策",16056315),l.fontFamily="SimHei",l.size=22,l.y=23,l.horizontalCenter=0,this.group.addChild(l),h=window.platform.getPrivacy(),this.openHttp=h[2],l=new eui.Label,l.textColor=3821938,l.textFlow=StringUtil.toTF(h[1]),l.fontFamily="SimHei",l.y=98,l.x=48,l.size=20,l.width=456,l.lineSpacing=15,l.verticalAlign="middle",this.group.addChild(l),this.addLinkE(l,this.onLink),c=new eui.Button,a=this.createEuiImage(c,ResEntrance.getResSource("button05.png")),a.verticalCenter=a.horizontalCenter=0,c.iconDisplay=a,c.y=362,c.x=100,c.width=124,c.height=61,l=this.createEuiLabelText(c,"退出",0,0,22),l.verticalCenter=l.horizontalCenter=0,l.height=25,l.textColor=9329221,c.labelDisplay=l,this.group.addChild(c),this.btnClose=c,c=new eui.Button,a=this.createEuiImage(c,ResEntrance.getResSource("button05.png")),a.verticalCenter=a.horizontalCenter=0,c.iconDisplay=a,c.x=320,c.y=362,c.width=124,c.height=61,l=this.createEuiLabelText(c,"同意",0,0,22),l.verticalCenter=l.horizontalCenter=0,l.height=25,l.textColor=9329221,c.labelDisplay=l,this.group.addChild(c),this.btnOk=c,this.addClickE(this.btnClose,this.onClick),this.addClickE(this.btnOk,this.onClick),[2]}})})},e.prototype.onClick=function(t){switch(t.currentTarget){case this.btnClose:this.removeParent();break;case this.btnOk:setLocation(6,"true"),this.cb(),this.removeParent()}},e.prototype.removeParent=function(){this.parent&&this.parent.removeChild(this)},e.prototype.onLink=function(t){window.open(this.openHttp)},e}(BaseWinEntry);__reflect(PrivacyWin.prototype,"PrivacyWin"),window.PrivacyWin=PrivacyWin;var CutAtlasTools=function(){function t(){}return t.getSlice2Atlas=function(t,e){var i=new egret.Rectangle(e.x,e.y,e.w,e.h),r=new egret.RenderTexture;return r.drawToTexture(t,i),r},t}();__reflect(CutAtlasTools.prototype,"CutAtlasTools"),window.CutAtlasTools=CutAtlasTools;var ServerBgWin=function(t){function e(){return t.call(this)||this}return __extends(e,t),e.prototype.initUI=function(){t.prototype.initUI.call(this),this.imgBg=new eui.Image,this.imgBg.source=ResEntrance.getResSource("bg.jpg"),this.addChild(this.imgBg)},e.prototype.open=function(){t.prototype.open.call(this)},e.prototype.onStageResize=function(){this.imgBg.scaleX=this.imgBg.scaleY=egret.MainContext.instance.stage.stageWidth/900},e}(BaseWinEntry);__reflect(ServerBgWin.prototype,"ServerBgWin");var ServerGonggaoWin=function(t){function e(){return t.call(this)||this}return __extends(e,t),e.prototype.initUI=function(){t.prototype.initUI.call(this),this.group.width=638,this.group.height=1047,this.group.verticalCenter=-8,this.group.horizontalCenter=4,this.imgBg=new eui.Image,this.imgBg.source=ResEntrance.getResSource("ntcbg.png"),this.group.addChild(this.imgBg);var e=new eui.Image;e.source=ResEntrance.getResSource("ntctitlebg.png"),e.horizontalCenter=0,e.y=25,this.group.addChild(e);var i=new eui.Label("更新公告");i.size=22,i.textColor=16772280,i.horizontalCenter=0,i.y=31,this.group.addChild(i);var r=new eui.Image;r.source=ResEntrance.getResSource("viewbg.png"),r.scale9Grid=new egret.Rectangle(150,90,2,2),r.width=570,r.height=920,r.x=34,r.y=64,this.group.addChild(r),this.scroller=new eui.Scroller,this.scroller.x=70,this.scroller.y=80,this.scroller.width=500,this.scroller.height=880,this.scroller.scrollPolicyV="on";var n=new eui.Group;this.scroller.addChild(n),this.scroller.viewport=n,this.group.addChild(this.scroller),this.labelGG=new eui.Label,this.labelGG.size=22,this.labelGG.width=this.scroller.width,this.labelGG.text="",this.labelGG.fontFamily="黑体",this.labelGG.textColor=4676726,this.labelGG.lineSpacing=5,this.labelGG.wordWrap=!0,this.labelGG.multiline=!0,n.addChild(this.labelGG),this.btnClose0=new eui.Image,this.btnClose0.source=ResEntrance.getResSource("closeImg.png"),this.btnClose0.right=-8,this.btnClose0.top=13,this.group.addChild(this.btnClose0),this.addBg()},e.prototype.addDisplay=function(){return __awaiter(this,void 0,void 0,function(){return __generator(this,function(t){return this.addClickE(this,this.onClick),[2]})})},e.prototype.setNotice=function(t){setLocation(5,t),this.labelGG.textFlow=StringUtil.toTF(t)},e.prototype.onClick=function(t){switch(t.target){case this.btnClose0:this.close()}if(t.currentTarget==this){var e=this.globalToLocal(t.stageX,t.stageY);this.group.hitTestPoint(e.x,e.y)||this.close()}},e}(BaseWinEntry);__reflect(ServerGonggaoWin.prototype,"ServerGonggaoWin");var ServerListWin=function(t){function e(){return t.call(this)||this}return __extends(e,t),e.prototype.initUI=function(){t.prototype.initUI.call(this),this.group.width=580,this.group.height=892,this.group.verticalCenter=-128,this.group.horizontalCenter=0,this.imgBg=new eui.Image,this.imgBg.left=this.imgBg.right=this.imgBg.top=this.imgBg.bottom=0,this.imgBg.source=ResEntrance.getResSource("selserbg.png"),this.imgBg.scale9Grid=new egret.Rectangle(224,157,2,1),this.group.addChild(this.imgBg);var e=new eui.Image;e.source=ResEntrance.getResSource("viewbg.png"),e.scale9Grid=new egret.Rectangle(150,90,2,2),e.width=205,e.height=834,e.x=30,e.y=30,this.group.addChild(e),e=new eui.Image,e.source=ResEntrance.getResSource("viewbg.png"),e.scale9Grid=new egret.Rectangle(150,90,2,2),e.width=303,e.height=834,e.x=241,e.y=30,this.group.addChild(e);var i=new eui.Image;i.source=ResEntrance.getResSource("sertitlebg.png"),i.horizontalCenter=0,i.y=-13,this.group.addChild(i);var r=new eui.Image;r.source=ResEntrance.getResSource("sertitle.png"),r.horizontalCenter=0,r.y=-6,this.group.addChild(r),this.tab=new eui.TabBar,this.tab.x=34,this.tab.y=40;var n=this.tab.layout=new eui.VerticalLayout;n.gap=6,this.tab.itemRenderer=ServerListWinTabItem,this.group.addChild(this.tab),this.list=new eui.List,this.scroller=new eui.Scroller,this.scroller.x=248,this.scroller.y=42,this.scroller.width=290,this.scroller.height=810,this.scroller.scrollPolicyV="on",this.scroller.viewport=this.list,this.group.addChild(this.scroller);var o=this.list.layout=new eui.VerticalLayout;o.gap=6,this.list.itemRenderer=ServerListWinItem,this.list.dataProvider=this.listCollection=new eui.ArrayCollection,this.scroller.addChild(this.list),this.btnClose0=new eui.Label,this.btnClose0.size=20,this.btnClose0.bottom=-30,this.btnClose0.horizontalCenter=0,this.btnClose0.text="点击空白返回",this.group.addChild(this.btnClose0),this.addBg()},e.prototype.addDisplay=function(){for(var t=urlParam.page,e=["最近登录"],i=0;t>i;i++)e.push(20*i+1+"-"+20*(i+1)+"区");this.tab.dataProvider=new eui.ArrayCollection(e),this.tab.selectedIndex=0,this.addItemTapE(this.list,this.onItemClick),this.addItemTapE(this.tab,this.onTabClickChange),this.addClickE(this,this.onClick),this.onTabClickChange()},e.prototype.onItemClick=function(t){var e=this.list.selectedItem;return 0==e.status||3==e.status?void alert(LangEntry.str6):void this.selectedCB(this.list.selectedItem)},e.prototype.onTabClickChange=function(){return __awaiter(this,void 0,void 0,function(){var t,e;return __generator(this,function(i){switch(i.label){case 0:return t=this.tab.selectedIndex,[4,window.platform.getServerList(t)];case 1:return e=i.sent(),this.listCollection.source=e,[2]}})})},e.prototype.onClick=function(t){switch(t.target){case this.btnClose0:this.close()}if(t.currentTarget==this){var e=this.globalToLocal(t.stageX,t.stageY);this.group.hitTestPoint(e.x,e.y)||this.close()}},e.prototype.selected=function(){var t=this;return new Promise(function(e){return t.selectedCB=e})},e}(BaseWinEntry);__reflect(ServerListWin.prototype,"ServerListWin");var ServerListWinItem=function(t){function e(){var e=t.call(this)||this;return e.width=289,e.height=46,e.imgBg=new eui.Image,e.imgBg.source=ResEntrance.getResSource("serbg.png"),e.addChild(e.imgBg),e.imgState=new eui.Image,e.imgState.x=9,e.imgState.y=13,e.addChild(e.imgState),e.labelServerName=new eui.Label,e.labelServerName.size=20,e.labelServerName.textColor=4612489,e.labelServerName.horizontalCenter=0,e.labelServerName.fontFamily="黑体",e.labelServerName.verticalCenter=0,e.addChild(e.labelServerName),e}return __extends(e,t),e.prototype.dataChanged=function(){this.imgState.source=ResEntrance.getResSource(["check_small.png","new_small.png","hot_small.png","check_small.png"][this.data.status]);var t=this.data.entryname||this.data.idx+"区",e=0==this.data.status||3==this.data.status;this.labelServerName.text=e?t+"(维护中)":t,this.labelServerName.textColor=e?14625579:4612489},e}(eui.ItemRenderer);__reflect(ServerListWinItem.prototype,"ServerListWinItem");var ServerListWinTabItem=function(t){function e(){var e=t.call(this)||this;e.width=193,e.height=48,e.imgBg=new eui.Image,e.imgBg.source=ResEntrance.getResSource("catebg.png"),e.addChild(e.imgBg),e.imgSelect=new eui.Image,e.imgSelect.source=ResEntrance.getResSource("serbg1.png"),e.imgSelect.visible=!1,e.addChild(e.imgSelect);var i=e.labelDisplay=new eui.Label;return i.size=20,i.textColor=4612489,i.horizontalCenter=0,i.fontFamily="黑体",i.x=81,i.verticalCenter=0,e.addChild(i),e}return __extends(e,t),e.prototype.dataChanged=function(){this.labelDisplay.text=this.data},e.prototype.invalidateState=function(){t.prototype.invalidateState.call(this),this.invalidateProperties()},e.prototype.invalidateProperties=function(){t.prototype.invalidateProperties.call(this),this.selected?this.imgSelect&&(this.imgSelect.visible=!0):this.imgSelect&&(this.imgSelect.visible=!1)},e}(eui.ItemRenderer);__reflect(ServerListWinTabItem.prototype,"ServerListWinTabItem");var ServerLoadingWin=function(t){function e(){var e=t.call(this)||this;e.oldIndexDesc=0,e.descs=LangEntry.str7,e.intervalId=0,e.intervalId1=0;var i=new eui.Group;i.horizontalCenter=0,i.verticalCenter=0,e.addChildAt(i,0);var r=new eui.Image,n=window.platform.getLoadingBg();r.source=ResEntrance.getResSource(n?n:"bg1.jpg"),r.width=1445,r.height=1722,r.horizontalCenter=0,i.addChild(r),e.tampbg=new eui.Image,i.addChild(e.tampbg);var o=new eui.Group;o.horizontalCenter=0;var s=egret.MainContext.instance.stage.stageHeight,a=s<r.height?r.height-s:0;o.bottom=a/2,i.addChild(o),e.group.verticalCenter=88,e.labelDesc=e.createEuiLabelText(e.group,"描述",0,0,20),e.labelDesc.horizontalCenter=0,e.labelDesc.top=1e3,e.labelDesc.textColor=16775602,e.labelGG1=e.createEuiLabelText(o,LangEntry.str3,0,0,20),e.labelGG1.width=720,e.labelGG1.textAlign="center",e.labelGG1.horizontalCenter=0,e.labelGG1.bottom=82,e.labelGG1.lineSpacing=5,e.labelGG1.textColor=10132122;var l=e.createEuiLabelText(o,LangEntry.str4,0,0,20);l.textAlign="center",l.textColor=10132122,l.horizontalCenter=0,l.lineSpacing=5,l.bottom=20,e.imgDescBg=new eui.Image,e.imgDescBg.source=ResEntrance.getResSource("login_zycs_d.png"),e.imgDescBg.horizontalCenter=0,e.imgDescBg.top=806,e.group.addChild(e.imgDescBg),e.labelLoad=e.createEuiLabelText(e.group,"加载中...",0,0,20),e.labelLoad.horizontalCenter=0,e.labelLoad.top=831,e.labelLoad.lineSpacing=5,e.labelLoad.textColor=16775602,e.labelLoad1=e.createEuiLabelText(e.group,"首次加载会比较慢,请耐心等待",0,0,20),e.labelLoad1.horizontalCenter=0,e.labelLoad1.top=910,e.labelLoad1.lineSpacing=5,e.labelLoad1.textColor=16775602,e.progressBar1=new eui.ProgressBar;var h=new eui.Image;return h.source=ResEntrance.getResSource("login_zycs_y.png"),e.progressBar1.slideDuration=1,e.progressBar1.thumb=h,e.progressBar1.maximum=100,e.progressBar1.value=0,e.progressBar1.top=863,e.progressBar1.horizontalCenter=0,e.progressBar1.addChild(h),e.group.addChild(e.progressBar1),e.progressBar2=new eui.ProgressBar,h=new eui.Image,h.source=ResEntrance.getResSource("login_zycs_g.png"),e.progressBar2.thumb=h,e.progressBar2.maximum=100,e.progressBar2.value=0,e.progressBar2.top=890,e.progressBar2.slideDuration=1,e.progressBar2.horizontalCenter=0,e.progressBar2.addChild(h),e.group.addChild(e.progressBar2),e.labelLoad2=e.createEuiLabelText(e.group,"游戏主程序 加载中...[0%]",0,0,18),e.labelLoad2.horizontalCenter=0,e.labelLoad2.top=863,e.labelLoad2.lineSpacing=5,e.labelLoad2.textColor=16775602,e}return __extends(e,t),e.prototype.setBg=function(){this.tampbg.source=ResEntrance.getResSource("backBg.png"),this.tampbg.width=egret.MainContext.instance.stage.stageWidth,this.tampbg.horizontalCenter=0,this.tampbg.height=500,this.tampbg.bottom=0},e.prototype.addDisplay=function(){return __awaiter(this,void 0,void 0,function(){var t,e,i=this;return __generator(this,function(r){switch(r.label){case 0:return this.labelDesc.visible=!urlParam.isShenhe,0==this.intervalId&&(this.intervalId=setInterval(this.onInterval.bind(this),2e3),this.onInterval()),this.setBg(),this.intervalId1=setInterval(this.onIntervalPro.bind(this),20),this.onIntervalPro(),t=urlParam.gv,isNaN(t)?[3,2]:[4,RES.getResByUrl("/ver.json")];case 1:verData=r.sent(),r.label=2;case 2:return this.showLoadProgress(0,"res"),[4,RES.loadConfig("default.res.json","resource/")];case 3:return r.sent(),window.platform.report("load_RES"),this.showLoadProgress(20,"thm"),[4,window.platform.loadJs("resource/default.thm.js")];case 4:return r.sent(),window.platform.report("load_THM"),e=new eui.Theme("resource/default.thm.json",this.stage),e.addEventListener(eui.UIEvent.COMPLETE,function(){return __awaiter(i,void 0,void 0,function(){var t;return __generator(this,function(e){switch(e.label){case 0:return this.showLoadProgress(40,"main"),window.GameMain?[3,2]:[4,window.platform.loadJs("main.min.js")];case 1:e.sent(),e.label=2;case 2:return window.platform.report("load_MAIN"),this.showLoadProgress(60,"connect"),[4,window.GameMain.init()];case 3:return t=e.sent(),void 0===t&&this.parent&&this.parent.removeChildren(),0!=t?[3,5]:[4,window.GameMain.createRole()];case 4:e.sent(),e.label=5;case 5:return this.showLoadProgress(90,"preload"),[4,RES.loadGroup("preloadAll")];case 6:return e.sent(),window.platform.report("loaded"),[4,window.GameMain.enterGame()];case 7:return e.sent(),this.parent&&this.parent.removeChildren(),[2]}})})},this),[2]}})})},e.prototype.onInterval=function(){var t=Math.floor(Math.random()*this.descs.length);this.oldIndexDesc!=t?(this.oldIndexDesc=t,this.labelDesc.text=this.descs[t]):this.onInterval()},e.prototype.onIntervalPro=function(){this.progressBar2.value>=100&&(this.progressBar2.value=0,this.onIntervalPro()),this.progressBar2.value=this.progressBar2.value+1},e.prototype.removeDisplay=function(){clearInterval(this.intervalId),clearInterval(this.intervalId1)},e.prototype.showLoadProgress=function(t,e){this.progressBar1.value=t,this.labelLoad2.text=t+"%"},e}(BaseWinEntry);__reflect(ServerLoadingWin.prototype,"ServerLoadingWin");var ServerWin=function(t){function e(){var e=t.call(this)||this;return e.noticeStr="",e}return __extends(e,t),e.prototype.initUI=function(){t.prototype.initUI.call(this),this.init()},e.prototype.init=function(){return __awaiter(this,void 0,void 0,function(){var t,e,i,r,n,o,s,a,l,h,c,u,p,g=this;return __generator(this,function(d){switch(d.label){case 0:return t=new eui.Group,t.horizontalCenter=0,t.verticalCenter=0,this.addChildAt(t,0),this.addBg(),e=this.createEuiImage(t,ResEntrance.getResSource("bg.jpg")),e.width=1445,e.height=1722,e.horizontalCenter=0,i=window.platform.getPrivacy(),!i[0]||getLocation(6,2)?[3,2]:[4,new Promise(function(t){g.addChild(new PrivacyWin(t))})];case 1:d.sent(),d.label=2;case 2:return this.tampbg=new eui.Image,t.addChild(this.tampbg),r=new eui.Group,r.horizontalCenter=0,n=egret.MainContext.instance.stage.stageHeight,o=n<e.height?e.height-n:0,r.bottom=o/2,t.addChild(r),s=this.createEuiLabelText(r,LangEntry.str4,0,0,20),s.textAlign="center",s.textColor=10132122,s.horizontalCenter=0,s.lineSpacing=5,s.bottom=20,this.labelGG1=this.createEuiLabelText(r,LangEntry.str3,0,0,20),this.labelGG1.width=720,this.labelGG1.textAlign="center",this.labelGG1.text=LangEntry.str3,this.labelGG1.textColor=10132122,this.labelGG1.horizontalCenter=0,this.labelGG1.lineSpacing=5,this.labelGG1.bottom=82,this.labelGG1.touchEnabled=!1,urlParam.loginSys?[4,new Promise(function(t){g.addChild(new LoginWin(t))})]:[3,5];case 3:return d.sent(),[4,Main.enterGameMain(0,!0,!1)];case 4:if(d.sent())return[2];a=this.createEuiImage(this.group,ResEntrance.getResSource("logoutBtn.png")),a.top=a.left=20,a.touchEnabled=!0,this.addClickE(a,this.onLogout),d.label=5;case 5:return l=urlParam.last,h=l.idx,c=l.status,u=l.entryname,this.btnGonggao=new eui.Image,this.btnGonggao.right=20,this.btnGonggao.top=20,this.btnGonggao.source=ResEntrance.getResSource("notice.png"),this.group.addChild(this.btnGonggao),this.groupServer=new eui.Group,this.groupServer.horizontalCenter=0,this.groupServer.bottom=290,this.group.addChild(this.groupServer),this.imgServerDi=new eui.Image,this.imgServerDi.source=ResEntrance.getResSource("curbg.png"),this.groupServer.addChild(this.imgServerDi),this.imgState=new eui.Image,this.imgState.x=13,this.imgState.verticalCenter=0,this.imgState.source=ResEntrance.getResSource(["check_small.png","new_small.png","hot_small.png","check_small.png"][c]),this.groupServer.addChild(this.imgState),p=u||h+"区",this.labelServerName=this.createEuiLabelText(this.groupServer,p,0,0,20),this.labelServerName.horizontalCenter=-18,this.labelServerName.verticalCenter=0,this.labelServerName.textColor=16773573,this.btnSelectServer=this.createEuiLabelText(this.groupServer,"换区>",331,0,20),this.btnSelectServer.verticalCenter=0,this.btnSelectServer.textColor=16773573,s=this.createEuiLabelText(this.group,LangEntry.str2,0,0,20),s.textColor=15132390,s.horizontalCenter=0,s.bottom=363,this.btnStartGame=this.createEuiImage(this.group,ResEntrance.getResSource("start.png")),this.btnStartGame.horizontalCenter=0,this.btnStartGame.bottom=164,this.addClickE(this.btnStartGame,this.onClick),this.addClickE(this.btnGonggao,this.onClick),this.addClickE(this.groupServer,this.onClick),this.setBg(),this.autoOpenNotice(),[2]}})})},e.prototype.autoOpenNotice=function(){return __awaiter(this,void 0,void 0,function(){var t,e;return __generator(this,function(i){switch(i.label){case 0:return[4,window.platform.getNotice()];case 1:return t=i.sent(),this.noticeStr=t,t?(e=getLocation(5,0),t==e?[2]:(this.openGongGao(),[2])):[2]}})})},e.prototype.setBg=function(){return __awaiter(this,void 0,void 0,function(){return __generator(this,function(t){switch(t.label){case 0:return[4,this.tampbg.source=ResEntrance.getResSource("backBg.png")];case 1:return t.sent(),this.tampbg.width=egret.MainContext.instance.stage.stageWidth,this.tampbg.horizontalCenter=0,this.tampbg.height=500,this.tampbg.bottom=0,[2]}})})},e.prototype.onLogout=function(){setLocation(urlParam.loginSys+"autoLogin",""),this.removeChildren(),this.initUI()},e.prototype.onClick=function(t){return __awaiter(this,void 0,void 0,function(){var e,i,r,n,o,s,a,l,h,c;return __generator(this,function(u){switch(u.label){case 0:switch(e=t.currentTarget){case this.btnStartGame:return[3,1];case this.btnGonggao:return[3,3];case this.groupServer:return[3,4]}return[3,6];case 1:return LoadingWait.showWait(),this.btnStartGame.touchEnabled=!1,i=urlParam.last,r=i.status,n=i.srvid,o=i.idx,r&&0!=r&&3!=r?(urlParam.srvid=n+"",[4,Main.enterGameMain(o)]):(alert(LangEntry.str6),[2]);case 2:return s=u.sent(),this.btnStartGame.touchEnabled=!s,LoadingWait.hideWait(),[3,6];case 3:return this.openGongGao(),[3,6];case 4:return a=new ServerListWin,this.addChild(a),[4,a.selected()];case 5:return l=u.sent(),h=l.srvid,c=l.idx,urlParam.srvid=h+"",Main.enterGameMain(c),[3,6];case 6:return[2]}})})},e.prototype.openGongGao=function(){this.ggwin||(this.ggwin=new ServerGonggaoWin),this.ggwin.setNotice(this.noticeStr),this.addChild(this.ggwin)},e}(BaseWinEntry);__reflect(ServerWin.prototype,"ServerWin"),window.callDelay=callDelay;var _locationFun={};window.setLocationDef=setLocationDef,window.setLocation=setLocation,window.getLocation=getLocation;var DraginBonesUtil=function(){function t(){}return t.get=function(t){return __awaiter(this,void 0,void 0,function(){var e,i,r,n,o,s,a;return __generator(this,function(l){switch(l.label){case 0:return e=new eui.Group,i=dragonBones.EgretFactory.factory,this.data[t]?[3,4]:[4,RES.getResByUrl(t+"_ske.json")];case 1:return r=l.sent(),[4,RES.getResByUrl(t+"_tex.json")];case 2:return n=l.sent(),[4,RES.getResByUrl(t+"_tex.png")];case 3:o=l.sent(),i.parseDragonBonesData(r),i.parseTextureAtlasData(n,o),this.data[t]=1,l.label=4;case 4:return s=t.split("/"),a=i.buildArmatureDisplay(s[s.length-1]),e.addChild(a),[2,[e,a]]}})})},t.data={},t}();__reflect(DraginBonesUtil.prototype,"DraginBonesUtil"),window.DraginBonesUtil=DraginBonesUtil;var cls=eui.Component.prototype;cls.defaultRect=!0,cls.rectClose=!0,cls.isAddDis=!1,cls.onExmlLoaded=function(t,e){if(this.skinName==e&&t){var i=new t;this.setSkin(i)}};var tf=cls.initializeUIValues;cls.initializeUIValues=function(){tf.call(this),this.addEventListener(egret.Event.ADDED_TO_STAGE,this.atStage,this),this.addEventListener(egret.Event.REMOVED_FROM_STAGE,this.rfStage,this),this.addEventListener(egret.Event.COMPLETE,this.skinCom,this)},cls.atStage=function(){return __awaiter(this,void 0,void 0,function(){return __generator(this,function(t){return this.visible?(this.isAddDis=!0,this.beforOpen&&this.beforOpen.apply(this,this.$param),this.addDisplay&&this.addDisplay.apply(this,this.$param),delete this.$param,this.enterFrame&&this.addEventListener(egret.Event.ENTER_FRAME,this.enterFrame,this),[2]):[2]})})},cls.rfStage=function(){this.isAddDis=!1,this.enterFrame&&this.removeEventListener(egret.Event.ENTER_FRAME,this.enterFrame,this),this.removeDisplay&&this.removeDisplay(),this.hasLsn&&window.MessageMgr.ins().removeAll(this)},cls.skinCom=function(){this.skin&&(this.invalidateState(),this.skinComplete&&this.skinComplete())};var tf1=cls.$setVisible;cls.$setVisible=function(t){var e=this.$visible;if(tf1.call(this,t),this.parent&&!e&&t){if(this.parent instanceof eui.ViewStack&&this.parent.selectedIndex!=this.parent.getChildIndex(this))return;this.atStage()}this.parent&&e&&!t&&this.rfStage()};var StringUtil=function(){function t(){}return t.getSingleTextFlow1=function(t){for(var e,i,r="<font",n=t.split("&"),o=0,s=n.length;s>o;o++)e=n[o].split(":"),e[0]==this.PROP_TEXT?i=e[1]:e[0]==this.STYLE_SIZE?r+=' size="'+parseInt(e[1])+'"':e[0]==this.STYLE_COLOR?r+=' color="'+parseInt(e[1])+'"':i=e[0]==this.STYPE_EVENT?"<u><a href='event:"+e[1]+"'>"+e[2]+"</a></u>":e[0];return i||(i=""),r+=">"+i+"</font>"},t.toTF=function(e){e||(e="");for(var i=e.split("|"),r="",n=0,o=i.length;o>n;n++)r+=t.getSingleTextFlow1(i[n]);return(new egret.HtmlTextParser).parser(r)},t.STYLE_COLOR="C",t.STYLE_SIZE="S",t.PROP_TEXT="T",t.STYPE_EVENT="E",t}();__reflect(StringUtil.prototype,"StringUtil"),window.StringUtil=StringUtil;