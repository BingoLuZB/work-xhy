(function(){return function o(r,s,g){function l(t,e){if(!s[t]){if(!r[t]){var n="function"==typeof require&&require;if(!e&&n)return n(t,!0);if(c)return c(t,!0);var a=new Error("Cannot find module '"+t+"'");throw a.code="MODULE_NOT_FOUND",a}var i=s[t]={exports:{}};r[t][0].call(i.exports,function(e){return l(r[t][1][e]||e)},i,i.exports,o,r,s,g)}return s[t].exports}for(var c="function"==typeof require&&require,e=0;e<g.length;e++)l(g[e]);return l}})()({1:[function(e,t,n){"use strict";(function(){var e;b8e.macro.IS_IOS_TISHEN=!1,b8e.macro.IS_COCOS_CREATOR=!0,b8e.macro.UI_LOAD_DEPENDS=!0,b8e.SoundMgr.AUTOPLAY=!0,game.VERSION="2.1.0",game.ENGINE_VERSION="4.2.1_smart03_rc07_2020031718",game.BUILD_LOG=!0,game.CONFIG_DEBUG=!1,game.VERSION_NAME="beta",b8e.enc=b8e.Event.nextCode,bui.Label.DEFAULT_IS_BOLD=!1,b8e.TextureCache.MAX_MEMORY=512e6,b8e.SizeMode=bui.SizeMode,b8e.SpriteStyle=bui.SpriteStyle,b8e.EditBox=bui.EditBox,b8e.Graphics=bui.Graphics,b8e.Sprite=bui.Sprite,b8e.Label=bui.Label,b8e.RichText=bui.RichText,b8e.SkinWidget=bui.SkinWidget,b8e.Texture2D.ENABLE_BLOCK_COMPACT=!1,game.IS_SHIELD_MODEL=!1,game.IS_SHIELD_SKILL=!1,game.IS_SHIELD_PLAYBACK_MODEL=!1,game.isApplyApp=!1,e=b8e.Object.extends({_startup:null,_processRun:null,ctor:function(){this._super()},init:function(t){var n=this;if(!n._startup){n._startup=new b8e.Startup,b8e.settings.resolutionPolicy=b8e.ResolutionPolicy.FULL_HEIGHT,game.isApplyApp=void 0!==b8e.params.iosReleaseVersion;var a={width:720,height:1280,maxWidth:960,maxHeight:2272};game.isApplyApp?game.IosSdk.initBridge(function(e){game.LoginConfig.buildVersion=+e,n._startup.init(t,a,n.initChannel,n)},n):n._startup.init(t,a,n.initChannel,n)}},loadBaseUIUrl:function(e){if(!e){var t=game.LoginConfig.baseUIUrl?game.LoginConfig.baseUIUrl:"config/baseUIUrl.json";b8e.res.loadRes(t,null,this._onUIUrlLoaded,this)}},_onUIUrlLoaded:function(e,t){if(e){var n=e.message;b8e.error(n)}else game.baseUIUrl=t,this.onInited()},initChannel:function(){var e=this;if(b8e.macro.IS_RELEASE){var t="assets/resources/channel/"+game.PLATFORM_NAME+"/config."+b8e.res.getVersion()+".json";b8e.res.loadRes(t,null,e._onChannelLoaded,e,null,{noCache:!0})}else e.setChannelInfo()},_onChannelLoaded:function(e,t){if(e){var n=e.message;b8e.warn(n)}else b8e.JsUtil.applyAlias(t,{$$bcid:!0,$$pfid:!0,$$title:!0,$$is_audit:!0,$$apilist:!0,$$apilist_audit:!0,$$sdk_type:!0,$$ab_switch:!0,$$web_url:!0,$$open_story:!0,$$open_mobile_bind:!0,$$close_story_list:[],$$images:{$$logo:!0,$$login:!0,$$loading:!0,$$banner:!0,$$create_role:!0,$$copyright:!0,$$loading_ad:!0},$$share_info:{$$title:!0,$$message:!0,$$img_url:!0,$$qzone_img_url:!0}}),game.channelInfo=t;this.setChannelInfo()},setChannelInfo:function(){var e=game.LoginConfig,t=game.channelInfo;t||((t=game.channelInfo={}).apilist="39.108.175.45:3911/tribes/account/apilist",t.images={logo:"images/image/loading/logo.png",login:"images/image/loading/bg.jpg",loading:"images/image/loading/bg.jpg",banner:"images/image/loading/banner.png",create_role:"images/image/loading/createRole.jpg",copyright:"images/image/loading/bottom_txt.png",loading_ad:[]},t.baseUIUrl="config/baseUIUrl.json",t.MainBottomUrl="mainui/",t.ab_switch=!1,t.is_audit=!1,t.open_story=!0,t.open_mobile_bind=!1,t.close_story_list=[]),e.loginBgUrl=t.images.login,e.loadBgUrl=t.images.loading,e.bottomUrl=t.images.copyright,e.logoUrl=t.images.logo,e.banner=t.images.banner,e.createBgUrl=t.images.create_role,e.MainBottomUrl=t.MainBottomUrl?t.MainBottomUrl:"mainui/";var n=t.images.loading_ad;if(n&&0<n.length){var a=Math.floor(Math.random()*n.length);e.loadingAd=n[a]}e.baseUIUrl=t.baseUIUrl?t.baseUIUrl:"config/baseUIUrl.json",this.loadBaseUIUrl()},onInited:function(){var e=this;if(game.LangLabel.injection(),b8e.isWeChatGame){if(game.channelInfo.ab_switch)return window.miniGameMain(),game.MiniGameMain=new game.MiniGameMain,void game.MiniGameMain.onInited(!1)}else game.IS_WANBA=100004==game.channelInfo.bcid;if(b8e.macro.IS_RELEASE&&!b8e.isWeChatGame){b8e.LogReport.init(b8e.getProtocol()+"//client.tribes.black8.com.cn/clientLog",e.reportDataGetter)}b8e.macro.BEFORE_UNLOAD_MSG=null==game.PLATFORM_NAME?b8e.macro.BEFORE_UNLOAD_MSG:null,game.VERSION_NAME=null!=b8e.params.versionName?b8e.params.versionName:game.VERSION_NAME,e.setApiList(),e.initPlatform(),e.initProfiler(),e._processRun=new game.BaseProcessRun,game.baseProcess=e._processRun,e._processRun.initProcess(),e._processRun.runProcess(),e._webGlTip()},_webGlTip:function(){b8e.isWeChatGame||b8e.renderType===b8e.RenderType.CANVAS&&game.alert.showMsg("\u5f53\u524d\u6d4f\u89c8\u5668\u4e0d\u652f\u6301\u6216\u5df2\u7981\u7528WebGL\uff0c\n\u4e3a\u4e86\u60a8\u66f4\u6d41\u7545\u5730\u4f53\u9a8c\u6e38\u620f\uff0c\n\u8bf7\u4f7f\u7528\u652f\u6301WebGL\u7684\u6d4f\u89c8\u5668\u8fd0\u884c\uff01"),game.IS_WANBA&&!b8e.isWeChatGame&&cc.renderer.canvas.addEventListener("webglcontextlost",this.webglContextLost)},webglContextLost:function(){mqq&&mqq.ui&&mqq.ui.showDialog&&mqq.ui.showDialog({title:"\u63d0\u793a",text:"\u9875\u9762\u5d29\u6e83\u4e86,\u8bf7\u5237\u65b0\u6e38\u620f",needOkBtn:!0,needCancelBtn:!1,okBtnText:"\u786e\u5b9a"},function(e){b8e.startup.reload()})},setApiList:function(){var e=game.LoginConfig,t=game.channelInfo,n=t.is_audit||b8e.isWeChatGame&&b8e.weChatEnv!=b8e.WeChatEnv.RELEASE||game.isApplyApp&&e.buildVersion>b8e.params.iosReleaseVersion;e.apiListUrl=n?t.apilist_audit:t.apilist},initPlatform:function(){var e=game.LoginConfig,t={$$keepScreenOn:!0};b8e.JsUtil.applyAlias(t,!0),e.isApplePay=b8e.os===b8e.OS.IOS&&e.openApplePay||game.isApplyApp,game.RECHARGE_PLATFORM=game.RechargePlatformType.COMMON,b8e.isWeChatGame?wx&&wx.setKeepScreenOn&&wx.setKeepScreenOn(t):b8e.params.isVivoGame?(qg&&qg.setKeepScreenOn&&qg.setKeepScreenOn({keepData:t,success:function(){b8e.log("b8e.params.isVivoGame handling success")},fail:function(e,t){b8e.log("b8e.params.isVivoGame handling fail, code = "+t)}}),this.addQgEvent()):b8e.params.isQuickGame&&this.addQgEvent(),b8e.params.uncaughtException&&b8e.params.isQuickGame&&qg&&qg.onError&&qg.onError(function(e){setTimeout(function(){e&&e.message&&b8e.onUncaughtException("qg message is "+e.message,"","")},0)})},addQgEvent:function(){qg&&qg.onShow&&qg.onShow(function(){b8e.startup.activate()}),qg&&qg.onHide&&qg.onHide(function(){b8e.startup.deactivate()})},initProfiler:function(){var e=this;b8e.macro.IS_DEBUG?e._startup.showProfiler(e.onProfilerLoaded,e):(b8e.startup.addDummyHot("2589AB"),b8e.evt.addG(e,"clickDummyHot",e.debugShowProfiler))},debugShowProfiler:function(){b8e.macro.IS_DEBUG=!0,this.initProfiler()},onProfilerLoaded:function(){var t=this;b8e.profiler.ERROR_CAUTION=b8e.profiler.WARN_CAUTION=null==b8e.params.debugType||2!=b8e.params.debugType,b8e.profiler.addWatch("obCount","Ob Count",t.obCount),b8e.profiler.addCtrl("\u89e6\u53d1","1",function(e){t._initDemo||(b8e.module.initModule(game.ME.Demo),b8e.module.initModule(game.ME.DemoChild),t._initDemo=!0),b8e.evt.dptG(game.DemoEvts.OPEN_DEMO_PANEL)},t),b8e.profiler.addCtrl("\u89e6\u53d1\u6307\u5f15","1",function(e){game.GameGuideMgr.inst().trigger(e,!0)},t),b8e.profiler.addCtrl("\u5207\u573a\u666f","1",function(e){game.mainProcess.runSceneProcess(parseInt(e))},t),b8e.profiler.addCtrl("GM",null,function(e){game.module.show(game.ME.GM,null,!1)},t),b8e.profiler.addCtrl("\u8df3   \u8f6c","192.168.0.178",function(e){window&&window.location&&(window.location.href="http://"+e+":8000/preview")},t),b8e.profiler.show()},obCount:function(){return 0},reportDataGetter:function(e){var t=game.LoginConfig;if(e.uid=t.uid,e.pfid=t.pfid,e.serverId=t.serverId,e.roleId=0,e.roleName="",game.mainRoleData){var n=game.mainRoleData;n&&(e.roleId=n.roleId,e.roleName=n.name)}return e}}),b8e.RC("$$game","$$GameMain",e)})(),(game.LanguageData={}).get=function(e){if(!game.ClientTextCfg||!game.ClientTextCfg.getData)return"";var t=game.ClientTextCfg.getData(e);if(!t)return"";var n=b8e.params.area?b8e.params.area:"cn";return"undefined"==n&&(n="cn"),b8e.getDPV(t,n)},function(){var g;g=b8e.Enum({WHITE:4294967295,GREEN:4278894336,BLUE:4278226656,PURPLE:4292477144,YELLOW:4294932224,RED:4293525761,GRAY:4286085240,PINK:4294786149,BLACK:4281479730,GOLD:4291008035});var l=game.HtmlUtil={};l.getText=function(e,t){return"<color="+b8e.ColorUtil.toHEX(e,"#rrggbb")+">"+t+"</color>"},l.getStrByQuality=function(e){var t="";return e<=game.Quality.Q_COLORFUL?t=game.Lang.get(9374+e):e===game.Quality.Q_COLORFUL_HIGH&&(t=game.Lang.get(53317)),t},l.getulText=function(e){return"<u>"+e+"</u>"},l.getImgText=function(e){return"<img src='"+e+"'/>"},l.EMOTION_PATTERN=/(\#[0-9]{2}\#)/,l.analyzeEmotion=function(e){for(var t=e.split(l.EMOTION_PATTERN),n="",a=0,i=t.length;a<i;a++){var o=t[a];if(4===o.length&&0===o.indexOf("#")&&3===o.indexOf("#",2)){var r=o.charAt(1),s=o.charAt(2);if(!(r<"0"||"9"<r)&&!(s<"0"||"9"<s)){var g=r+s;t[a]=game.HtmlUtil.getImgText(g)}}n+=t[a]}return n},l.getColorByQuality=function(e){var t=1<arguments.length&&void 0!==arguments[1]&&arguments[1],n=g.WHITE;switch(e){case game.Quality.Q_WHITE:n=t?g.BLACK:g.WHITE;break;case game.Quality.Q_GREEN:n=g.GREEN;break;case game.Quality.Q_BLUE:n=g.BLUE;break;case game.Quality.Q_PURPLE:n=g.PURPLE;break;case game.Quality.Q_YELLOW:n=g.YELLOW;break;case game.Quality.Q_RED:n=g.RED;break;case game.Quality.Q_UNPARALLELED:case game.Quality.Q_COLORFUL_HIGH:n=g.GOLD;break;default:n=t?g.BLACK:g.WHITE}return n},l.IsEnoughGOR=function(e){return e?g.GREEN:g.RED},l.getColorStrByQuality=function(e,t){var n,a=2<arguments.length&&void 0!==arguments[2]&&arguments[2],i="",o=0,r=g.WHITE;if(e===game.Quality.Q_COLORFUL||e===game.Quality.Q_COLORFUL_HIGH)for(var s=0;s<t.length;s++)n=t[s],o=3-s%4+2,r=game.HtmlUtil.getColorByQuality(o,a),i+=game.HtmlUtil.getText(r,n);else{r=game.HtmlUtil.getColorByQuality(e,a);i=game.HtmlUtil.getText(r,t)}return i},l.getClickableText=function(e,t,n,a,i){return(!(5<arguments.length&&void 0!==arguments[5])||arguments[5])&&(n=l.getulText(n)),n},l.getColorByRank=function(e){switch(e){case 1:return g.RED;case 2:return g.BLUE;case 3:return g.GREEN;default:return g.WHITE}},l.getColorStrByRank=function(e,t){var n=game.HtmlUtil.getColorByRank(e);return game.HtmlUtil.getText(n,t)},l.getClickableText2=function(e,t,n,a,i){return t&&(t.thisArg=e,t.clickFunc&&t.removeLinkHandler(a),t.clickFunc=i,t.addLinkHandler(a,t)),'<on click = "'+a+'">'+n+"</on>"},b8e.RC("$$game","$$Color",g)}(),function(){var e;e=b8e.SkinWidget.extends({ctor:function(){this._super(game.baseUIUrl[10]),this.fadeEnabel=!0},init:function(){var e=this;e.skin.title.setAnchor(0,.5),e.skin.title.setFontSize(44),e.skin.title.lineHeight=48,e.skin.title.setScale(.5,.5),e.skin.title.y-=3,e.skin.title.isBold(!0),e.skin.lab_content.setFontSize(22),e.skin.lab_content.setSize(e.skin.lab_content.width,e.skin.lab_content.height),e.skin.lab_content.string=""},onShow:function(){var e=this;e.onUpdeteContent(),e.onStageResize(),game.viewModule.addModule(e),b8e.evt.addG(e,b8e.Event.STAGE_RESIZE,e.onStageResize),b8e.evt.addG(e,game.ZoneEvents.UPDATE_ANNOUNCEMENT,e.onUpdeteContent)},onUpdeteContent:function(){var t=this;if(!t._contents||t._contents.length<1){var e=game.LoginConfig.announcementContents;if(!e)return;t._contents=[],e.forEach(function(e){e&&1==e.type&&t._contents.push(e.content)},t),t.skin.title.string=t._contents[0];var n=t._contents[1];n=(n=n.replace(/\\r/g,"")).replace(/\\n/g,"<br/>"),t.skin.lab_content.string=n,t.skin.content.height=t.skin.lab_content.height}},closeBtn:function(){this.closePanle()},returnBtn:function(){this.closePanle()},closePanle:function(){var e=this;game.viewModule.removeModule(e),b8e.evt.rmvG(e,b8e.Event.STAGE_RESIZE,e.onStageResize),b8e.evt.rmvG(e,game.ZoneEvents.UPDATE_ANNOUNCEMENT,e.onUpdeteContent),e.removeFromParent(),e.hide()},getModelTouchClose:function(){return!1},onStageResize:function(){this.setPosition(.5*(b8e.stageWidth-this.width),b8e.stageHeight-.5*(b8e.stageHeight-this.height))},dispose:function(){this.closePanle(),this._contents&&(this._contents=null),this._super()}}),b8e.RC("$$game","$$GameAnnouncementPanel",e)}(),function(){var e;e=b8e.Enum({NONE:0,TEST:1,FOSTER_DISCOUNT_SHOP:2,SHOP_IMPORTANT_NOTICE:3,CS_FESTIVAL_BOSS:4,HUNTING_CONTEST:5}),b8e.RC("$$game","$$AlertKey",e)}(),function(){var e=b8e.Object.extends({ctor:function(){this.waitAlert=[],this.alertTipsMap={},this._msgOptions={}},showTwo:function(e){e&&(e.btn=game.LanguageData.get(34),this.show(e))},showMsg:function(e){this._msgOptions.msg=e,this.show(this._msgOptions)},showLang:function(e,t){this._msgOptions.lang=e,this._msgOptions.langArgs=t,this.show(this._msgOptions)},show:function(e,t){var n=1<arguments.length&&void 0!==t?t:null;if(e)if(e.msg||e.lang){e.lang&&(e.msg=game.Lang.get(e.lang,e.langArgs));var a=this,i=e.key;if(i){var o=a.alertTipsMap[i];if(o&&o.dontShow)return void a.clickAlert("_$okcb",e,!0)}a.inShow?a.waitAlert.push(e):(a.alertView||(a.alertView=new game.GameAlertWidget),null!=e.isTouchClose&&0==e.isTouchClose&&a.alertView.setModelTouchClose(e.isTouchClose),a.options=e,n?n.addChild(a.alertView):(n=b8e.layer.getGuiBottomLayer()).addChild(a.alertView))}else b8e.error("alerterror\uff1aoptions msg null");else b8e.error("alerterror\uff1aoptions null")},hide:function(){var e=this;if(e.alertView&&e.alertView.parent&&e.alertView.removeFromParent(),game.gamePopupMgr&&game.gamePopupMgr.hide(game.ME.GuajiTips),!(e.waitAlert.length<1)){var t=e.waitAlert.shift();e.show(t)}},clickAlert:function(e,t,n){if(t){e=b8e.getNormP(e);var a=b8e.getNormP("_$okcb"),i=b8e.getNormP("_$cancelcb");if(e==a||e==i){var o=t[e];if(o){if(!t.thisArg)return void b8e.error("alerterror\uff1a",t.msg,"\u5b58\u5728\u56de\u8c03\u4e0d\u5b58\u5728thisArg");var r;t.args&&(r=t.args instanceof Array?t.args:[t.args]),r?r.push(n):r=[n],o.apply(t.thisArg,r)}}}},saveTipsData:function(e,t){if(e&&e.showtips&&e.key){var n=this.alertTipsMap[e.key];(n=n||(this.alertTipsMap[e.key]={})).dontShow=t}},getTipsDontShowByKey:function(e){return!!this.alertTipsMap[e]&&this.alertTipsMap[e].dontShow}});game.alert=game.alert||new e}(),function(){var e;e=b8e.SkinWidget.extends({_showModel:!1,_modelTouchClose:!0,_addNodeTouch:!1,leftSpriteFrame:null,rightSpriteFrame:null,ctor:function(){this._super(game.baseUIUrl[8]),this.fadeEnabel=!0,this.setLocalZOrder(700)},init:function(){var e=this,t=e.skin;e.leftSpriteAtlasUrl=t.twoBtnSure._atlasUrl,e.leftSpriteFrameUrl=t.twoBtnSure._frameName,e.rightSpriteAtlasUrl=t.twoBtnCancel._atlasUrl,e.rightSpriteFrameUrl=t.twoBtnCancel._frameName},onShow:function(){var e=this,t=game.alert.options,n=(t.btn?t.btn:game.LanguageData.get(28)).split("|"),a=e,i=a.skin;switch(a.btnReverse=!!t.btnReverse&&t.btnReverse,a.cancelCloseCb=!!t.cancelCloseCb&&t.cancelCloseCb,a.cancelIsSaveTips=!!t.cancelIsSaveTips&&t.cancelIsSaveTips,a.defaultSelect=!!t.defaultSelect&&t.defaultSelect,a.closeNotCallCancel=!!t.closeNotCallCancel&&t.closeNotCallCancel,n.length){case 1:i.oneBtn.active=!0,i.twoBtn.active=!1,i.oneBtnSureLbl.string=n[0];break;case 2:i.oneBtn.active=!1,i.twoBtn.active=!0,i.twoBtnSureLbl.string=n[0],i.twoBtnCancelLbl.string=n[1];break;default:b8e.error("alerterror:\u5927\u5144\u5f1f\u4f60\u6709\u51e0\u4e2a\u6309\u94ae\uff1f")}a.btnReverse?(i.twoBtnSure.loadAtlasFrame(a.rightSpriteAtlasUrl,a.rightSpriteFrameUrl),i.twoBtnCancel.loadAtlasFrame(a.leftSpriteAtlasUrl,a.leftSpriteFrameUrl)):(i.twoBtnSure.loadAtlasFrame(a.leftSpriteAtlasUrl,a.leftSpriteFrameUrl),i.twoBtnCancel.loadAtlasFrame(a.rightSpriteAtlasUrl,a.rightSpriteFrameUrl)),i.msgLbl.string=t.msg,i.titleLbl.string=t.title?t.title:game.LanguageData.get(35),i.tipsBtn.node.active=t.showtips,t.showtips&&!a.defaultSelect?(i.tipsSelect.node.active=!0,i.msgLbl.y=5):(i.tipsSelect.node.active=!1,i.msgLbl.y=-34);var o=null!=t.align&&null!=t.align?t.align:b8e.HorizontalAlign.CENTER;i.msgLbl.setHorizontalAlign(o),e.onStageResize(),game.viewModule.addModule(e),0==e._addNodeTouch&&(b8e.evt.onC(e.skin.node,e.onTouchNode,e),e._addNodeTouch=!0)},onStageResize:function(){var e=b8e.stageHeight,t=b8e.stageWidth;this.setPosition(.5*t,.5*e)},tipsBtn:function(){this.skin.tipsSelect.node.active=!this.skin.tipsSelect.node.active},oneBtnSure:function(){this.sure()},twoBtnSure:function(){this.sure()},twoBtnCancel:function(){this.cancel()},sure:function(){var e=game.alert.options,t=this.skin.tipsSelect.node.active,n=game.alert;n.saveTipsData(e,t),n.hide(),n.clickAlert("_$okcb",e,t)},cancel:function(e){var t=0<arguments.length&&void 0!==e&&e,n=game.alert.options,a=this.skin.tipsSelect.node.active,i=game.alert;this.cancelIsSaveTips&&i.saveTipsData(n,a),i.hide(),t||i.clickAlert("_$cancelcb",n,a)},hide:function(){game.viewModule.removeModule(this),b8e.evt.rmvG(this,b8e.Event.STAGE_RESIZE,this.onStageResize),this._super()},show:function(){b8e.evt.addG(this,b8e.Event.STAGE_RESIZE,this.onStageResize),this._super()},getModelTouchClose:function(){return this._modelTouchClose},setModelTouchClose:function(e){this._modelTouchClose=e},onTouchNode:function(){},closeBtn:function(){this.closeNotCallCancel?game.alert.hide():this.cancel(this.cancelCloseCb)},returnBtn:function(){this.cancel(this.cancelCloseCb)}}),b8e.RC("$$game","$$GameAlertWidget",e)}(),function(){var e=b8e.Object.extends({name:"HeartBeatMgr",_heartBeatTimer:null,_isStopHeartBeat:!1,_checkStopHeartBeatTimer:null,ctor:function(){this._super()},startHeartBeat:function(){var e=this;b8e.sendN(game.pb.ProtoId.Ping),e._isStopHeartBeat=!1,e._heartBeatTimer||(e._heartBeatTimer=b8e.Timer.add(e,e.onSendHeartBeat,3e4,0,0,null,2)),e._heartBeatTimer.reset(),e._heartBeatTimer.start()},onSendHeartBeat:function(){var e=this;b8e.sendN(game.pb.ProtoId.Ping),e._checkStopHeartBeatTimer||(e._checkStopHeartBeatTimer=b8e.Timer.add(e,e.onCheckHeartBeatState,3e4,0,0,null,2)),e._checkStopHeartBeatTimer.reset(),e._checkStopHeartBeatTimer.start()},onHeartBeatResponse:function(){this._isStopHeartBeat=!1,this._checkStopHeartBeatTimer&&this._checkStopHeartBeatTimer.stop()},onCheckHeartBeatState:function(){this._isStopHeartBeat?this.stopHeartBeat():this._isStopHeartBeat=!0},stopHeartBeat:function(){var e=this;e._isStopHeartBeat=!1,e._heartBeatTimer&&(b8e.Timer.remove(e,e.onSendHeartBeat),e._heartBeatTimer=null),e._checkStopHeartBeatTimer&&e._checkStopHeartBeatTimer.running&&(b8e.Timer.remove(e,e.onCheckHeartBeatState),e._checkStopHeartBeatTimer=null)}});game.heartBeat=game.heartBeat||new e}(),function(){var e,t=e=b8e.Object.extends({_tryAgainCount:0,_tryAgainMaxCount:5,_timeout:5e3,reconnectClosed:!1,isLoginAgain:!1,isCanLoginAgain:!1,ctor:function(){if(t._singleton)throw new Error("\u53ea\u80fd\u901a\u8fc7getInstance()\u6765\u83b7\u53d6ReconnectMgr\u5b9e\u4f8b\uff01");this._super()},tryReconnect:function(){var e=this;game.heartBeat.stopHeartBeat(),e.reconnectClosed||(b8e.net.closeConnection(),e._onConnectTry(),e._tryAgainCount++,0<e._tryAgainMaxCount&&e._tryAgainCount>e._tryAgainMaxCount?e._onShowAlert():(e.isLoginAgain=!0,game.IS_JUNHAI?e.junHaiLogin():game.IS_XUANDONG?e.xuanDongLogin():game.IS_XUANDONG2?e.xuanDong2Login():game.IS_IOS_SDK?e.iosLogin():e.otherLogin()))},junHaiLogin:function(){var n=this,a=game.LoginConfig,e={$$pfid:a.pfid,$$detail:{$$game_channel_id:a.gameChannelId+"",$$user_id:a.userId+"",$$channel_id:a.channelId+"",$$time:a.time+"",$$sign:a.lH5Sign+"",$$session_id:a.sessionId?a.sessionId+"":"",$$access_token:game.JunHaiSdk.token}};b8e.layer.showLoading(game.LanguageData.get(25)),game.sdk.sdkNet.requestData(a.loginUrl,e,function(e,t){n._clearConnectTimer(),e?n.tryReconnect():0==t.code?(a.uid=t.data.uid,a.channelId=t.data.channel_id,a.newAccount=t.data.new_account,game.baseProcess.runConnectProcess()):n._showLoginError(t)},game.JunHaiSdk,null,!0,{struct:{$$code:!0,$$msg:!0,$$data:{$$uid:!0,$$channel_id:!0,$$new_account:!0}},isJson:!0})},xuanDongLogin:function(){var n=this,a=game.LoginConfig,e={$$pfid:a.pfid,$$detail:{$$app_id:game.XuanDongSdk.getAppId(),$$open_id:a.openId,$$login_platform:game.XuanDongSdk.loginPlatform,$$nickname:game.XuanDongSdk.nickName}};b8e.layer.showLoading(game.LanguageData.get(25)),game.sdk.sdkNet.requestData(a.loginUrl,e,function(e,t){n._clearConnectTimer(),e?n.tryReconnect():0==t.code?(a.uid=t.data.uid,a.channelId=t.data.channel_id,a.gameChannelId=t.data.channel_id,a.newAccount=t.data.new_account,a.newAccount&&game.sdk.deviceActive(a.openId),game.baseProcess.runConnectProcess()):n._showLoginError(t)},game.XuanDongSdk,null,!0,{struct:{$$code:!0,$$data:{$$uid:!0,$$channel_id:!0,$$new_account:!0}},isJson:!0})},xuanDong2Login:function(){var n=this,e=game.XuanDong2Sdk,t=e.initDataObj;if(t){var a=game.LoginConfig,i=e.getStrByObj(t),o={$$pfid:a.pfid,$$detail:{$$app_id:e.getAppId()+"",$$open_id:a.openId+"",$$source:i,$$sign:e.initSign}};b8e.layer.showLoading(game.LanguageData.get(25)),game.sdk.sdkNet.requestData(a.loginUrl,o,function(e,t){n._clearConnectTimer(),e?n.tryReconnect():0==t.code?(a.uid=t.data.uid,a.channelId=t.data.channel_id,a.gameChannelId=t.data.channel_id,a.newAccount=t.data.new_account,a.newAccount&&game.sdk.deviceActive(a.openId),game.baseProcess.runConnectProcess()):n._showLoginError(t)},e,null,!0,{struct:{$$code:!0,$$data:{$$uid:!0,$$channel_id:!0,$$new_account:!0}},isJson:!0})}},iosLogin:function(){var n=this,e=game.IosSdk.loginData;if(e){if(1==e.code)return game.loadingPage.setErrorText(game.LanguageData.get(26)+e.code+":"+e.msg),void b8e.error("SDK login Error:"+e.code+":"+e.msg);var a=game.LoginConfig;a.BundleIdentifier=e.bundle_id;var t={$$pfid:a.pfid,$$detail:e};b8e.layer.showLoading(game.LanguageData.get(25)),game.sdk.sdkNet.requestData(a.loginUrl,t,function(e,t){n._clearConnectTimer(),e?n.tryAotuLogin():0==t.code?(a.uid=t.data.uid,a.channelId=t.data.channel_id,a.newAccount=t.data.new_account,game.baseProcess.runConnectProcess()):n._showLoginError(t)},game.IosSdk,null,!0,{struct:{$$code:!0,$$data:{$$uid:!0,$$channel_id:!0,$$new_account:!0}},isJson:!0})}else b8e.error("SDK iosLogin Error:"+e)},otherLogin:function(){var n=this,a=game.LoginConfig,e={$$pfid:a.pfid,$$detail:{$$username:a.username+"",$$password:a.password+""}};b8e.layer.showLoading(game.LanguageData.get(25)),game.sdk.sdkNet.requestData(a.loginUrl,e,function(e,t){n._clearConnectTimer(),e?n.tryReconnect():0==t.code?(a.uid=t.data.uid,a.channelId=t.data.channel_id,a.gameChannelId=t.data.channel_id,a.newAccount=t.data.new_account,a.userId=t.data.open_id,a.newAccount&&game.sdk.deviceActive(),game.baseProcess.runConnectProcess()):n._showLoginError(t)},n,null,!0,{struct:{$$code:!0,$$data:{$$uid:!0,$$channel_id:!0,$$new_account:!0,$$open_id:!0}},isJson:!0})},_showLoginError:function(e){var t=game.LanguageData.get(26)+e.code+":"+e.msg;b8e.layer.showError(t),b8e.layer.showReload()},_onConnectTry:function(){var e=this;e._connectTimer||(e._connectTimer=b8e.setTimeout(e._onConnectTimeOut,e,e._timeout))},_onConnectTimeOut:function(){this._clearConnectTimer(),this.onTimeOut()},_clearConnectTimer:function(){this._connectTimer&&(b8e.clearTimeout(this._connectTimer),this._connectTimer=void 0)},onTimeOut:function(){this._tryAgainMaxCount<0?this.tryReconnect():this._onShowAlert()},_onShowAlert:function(){var e=this;b8e.layer.hideLoading();var t={msg:game.LanguageData.get(27),btn:game.LanguageData.get(28),thisArg:e,okcb:function(){e._tryAgainCount=0,e.tryReconnect()},cancelcb:function(){e._tryAgainCount=0,e.tryReconnect()},showtips:!1,isTouchClose:!1},n=b8e.layer.getTopLayer();game.alert.show(t,n)}});t._instance=null,t._singleton=!0,t.inst=function(){return null==t._instance&&(t._singleton=!1,t._instance=new t,t._singleton=!0),t._instance},game.reconnect=t.inst(),b8e.RC("$$game","$$ReconnectMgr",e)}(),function(){var e;e=b8e.BaseDisplay.extends({_container:null,_bg:null,_proContainer:null,_proBg:null,_proImg:null,_proLab:null,_proDescLab:null,_progress:0,ctor:function(){this._super(),this.init()},init:function(){var e=this;(e._container=b8e.BaseDisplay.get()).setAnchor(.5,.5);var t=e._bg=b8e.Sprite.get();t.setAnchor(.5,.5),e._container.addChild(t);var n=e._proContainer=b8e.BaseDisplay.get();e._container.addChild(n),n.setAnchor(.5,.5),e._initProgressBg(),e._initProgressImg(),e._initProgressLabel(),e._initProgressDescLab(),b8e.evt.addG(e,b8e.Event.STAGE_RESIZE,e._onlayout),e._onlayout()},_initProgressBg:function(){var e=this._proBg=b8e.Sprite.get();this._proContainer.addChild(e),e.setAnchor(.5,.5),e.setStyle(b8e.SpriteStyle.SLICED),e.scale9Inset={top:0,bottom:0,left:10,right:10},e.loadTexture("assets/resources/proBg.png",null,null,{version:b8e.version,format:"bti"}),e.setSize(b8e.stageWidth,60)},_initProgressImg:function(){var e=this._proImg=b8e.Sprite.get();this._proContainer.addChild(e),e.setAnchor(0,.5),e.setSize(1,28),e.setStyle(b8e.SpriteStyle.SLICED),e.scale9Inset={top:0,bottom:0,left:10,right:50},e.loadTexture("assets/resources/proImg.png",null,null,{version:b8e.version,format:"bti"})},_initProgressLabel:function(){var e=this._proLab=b8e.Label.get();this._proContainer.addChild(e),e.setStroke(2,0),e.setAnchor(.5,.5),e.setPosition(0,-7),e.setFontSize(18),e.setLineHeight(20)},_initProgressDescLab:function(){var e=this._proDescLab=b8e.Label.get();this._proContainer.addChild(e),e.setStroke(2,0),e.setAnchor(.5,.5),e.setPosition(0,16),e.setFontSize(16),e.setLineHeight(20)},_onlayout:function(){var e=this;if(e._container&&e._proContainer){var t=b8e.stageWidth,n=b8e.stageHeight+b8e.topSpace+b8e.bottomSpace,a=t>>1,i=n>>1;e._container.setSize(t,n),e._container.setPosition(a,i),e._proBg&&e._proBg.setSize(b8e.stageWidth,60),e._setProgress();var o=30;e._proBg&&(o=e._proBg.height>>1),i=-i+o,e._proContainer.y=i}},show:function(e){var t=this;t._container&&!t._container.parent&&t.addChild(t._container),t._proContainer&&!t._proContainer.parent&&t._container.addChild(t._proContainer);var n="assets/resources/splash.jpg";t._bg&&(e&&(n=e),t._bg.loadTexture(n,null,null,{version:b8e.version,format:"bti"}))},setProgress:function(e){this._proContainer.parent&&(this._progress=e,this._setProgress())},_setProgress:function(){var e=this._proImg;if(e){e.setPosition(-(b8e.stageWidth>>1),-10);var t=b8e.stageWidth+24,n=this._progress,a=b8e.stageWidth*n+24*n;t<a&&(a=t),e.width=a}},setProgressText:function(e,t){this._updateLabelString(this._proLab,e,t)},setPromptText:function(e,t){this._updateLabelString(this._proDescLab,e,t)},setErrorText:function(e){this._updateLabelString(this._proDescLab,e,4294901760)},_updateLabelString:function(e,t,n){this._proContainer.parent&&e&&(n=n||4294967295,e.setText(t),e.setColor(n))},hide:function(){var e=this;e._container&&e._container.parent&&e._container.removeFromParent(),e._proImg&&(e._proImg.width=0),e._proLab&&e._proLab.setText(""),e._proDescLab&&e._proDescLab.setText(""),e._proContainer&&e._proContainer.parent&&e._proContainer.removeFromParent(),e.parent&&e.removeFromParent(),e._progress=0},dispose:function(){var e=this;e.hide(),e._proImg&&(e._proImg.removeFromParent(),e._proImg=null),e._proBg&&(e._proBg.removeFromParent(),e._proBg=null),e._bg&&(e._bg.removeFromParent(),e._bg=null),e._proLab&&(e._proLab.removeFromParent(),e._proLab=null),e._proDescLab&&(e._proDescLab.removeFromParent(),e._proDescLab=null),e._proContainer=null,e._container=null,e._progress=null,e._super()}}),b8e.RC("$$game","$$LoadingComponent",e)}(),function(){var e=void 0,t=e=b8e.Object.extends({_loadingComponent:null,ctor:function(){if(t._singleton)throw new Error("\u53ea\u80fd\u901a\u8fc7inst()\u6765\u83b7\u53d6Loading\u5b9e\u4f8b\uff01");this._super()},show:function(e){var t=this;t._loadingComponent||(t._loadingComponent=new game.LoadingComponent),t._loadingComponent.parent||(b8e.layer.getTopLayer().addChild(t._loadingComponent),t._loadingComponent.setLocalZOrder(999));t._loadingComponent.show(e)},hide:function(){this._loadingComponent&&this._loadingComponent.hide()},setProgressText:function(e,t){this._loadingComponent&&this._loadingComponent.setProgressText(e,t)},setPromptText:function(e,t){this._loadingComponent&&this._loadingComponent.setPromptText(e,t)},setErrorText:function(e){this._loadingComponent&&this._loadingComponent.setErrorText(e)},setProgress:function(e){this._loadingComponent&&this._loadingComponent.setProgress(e)}});t._instance=null,t._singleton=!0,t.inst=function(){return null==t._instance&&(t._singleton=!1,t._instance=new t,t._singleton=!0),t._instance},game.loading=e.inst(),b8e.RC("$$game","$$Loading",e)}(),function(){var e;e=b8e.Object.extends({start:function(){b8e.addNH(game.pb.ProtoId.CreateRoleResp,this._onCreateRoleResp,this)},_onCreateRoleResp:function(e){var t=e.readProtobuf(game.pb.CreateRoleResponse);if(0==t.code)game.LoginConfig.heroData=t.role,game.LoginConfig.hasHeroData||(game.sdk.createRoleLog(game.LoginConfig.heroData),game.sdk.traceLog(1)),game.baseProcess.main.completeHangUpProcess(game.BaseProcessTypes.CREATE_CHAR);else{game.LoginConfig.creatRoleIsLock=!1;var n=game.ServerCodeCfg.get(t.code);b8e.Toast.launch(n)}}}),b8e.RC("$$game","$$BaseLoginCmd",e)}(),function(){var e;e=b8e.SkinWidget.extends({ctor:function(){this._super(game.baseUIUrl[7])},onShow:function(){game.loadingPage.hide();var e=this,t=e.skin,n=game.LoginConfig.createBgUrl;n&&""!=n&&t.bgImg.loadTexture(n,null,null,{noCache:!0}),e._selectedRoleId=0<.5-Math.random()?1001:1002;var a=1001==e._selectedRoleId,i=t.roleNameInput;i.color=game.Color.BLACK,i.string=game.GlobalCfg.getRandomName(a),e._time=15,e._updateInfo(),e._startTime(),i.onEditingBegan(e._stopTime,e),i.onTextChanged(e._stopTime,e),i.onEditingEnded(e._onEditingEnded,e),e._onStageResize(),b8e.evt.addG(e,b8e.Event.STAGE_RESIZE,e._onStageResize)},onHide:function(){var e=this.skin;e.roleNameInput.onEditingBegan(null),e.roleNameInput.onTextChanged(null),e.roleNameInput.onEditingEnded(null),b8e.evt.rmvG(this,b8e.Event.STAGE_RESIZE,this._onStageResize)},check_bg1:function(){this._onSelect(1001)},check_bg2:function(){this._onSelect(1002)},_onSelect:function(e){this._selectedRoleId!=e&&(this._selectedRoleId=e,this._updateName(),this._updateInfo())},_updateInfo:function(){var e=this.skin,t=1001==this._selectedRoleId;e.ok1.active=t,e.ok2.active=!t},roleNameRandomBtn:function(){this._updateName()},_updateName:function(){this._resetTime();var e=1001==this._selectedRRoleId;this.skin.roleNameInput.string=game.GlobalCfg.getRandomName(e)},startBtn:function(){if(!game.LoginConfig.creatRoleIsLock){var a=this,i=a.skin.roleNameInput.string.trim();0!=i.length?game.sdk.msgSecCheck(i,function(e){if(e){game.LoginConfig.creatRoleIsLock=!0;var t=a._selectedRoleId,n=1001==a._selectedRoleId;game.RoleLoginSender.CreateRoleRequest(i,t,n),a._clearTime()}},a):b8e.Toast.launch(game.LanguageData.get(36))}},_onEditingEnded:function(){0!=this.skin.roleNameInput.string.trim().length&&this._resetTime()},_startTime:function(){var e=this;e._timerObj||(e._timerObj=b8e.Timer.add(e,e._updateTime,1e3)),e._timerObj.start()},_updateTime:function(){var e=this,t=e.skin;t.lab_time.node.active=0<e._time,0<e._time?t.lab_time.string=e._time+game.LanguageData.get(40):(t.lab_time.string="",e.startBtn()),e._time--},_clearTime:function(){this._timerObj&&(b8e.Timer.remove(this,this._updateTime),this._timerObj=null)},_stopTime:function(){var e=this.skin;this._timerObj&&this._timerObj.stop(),e.lab_time.node.active=!1,e.lab_time.string=""},_resetTime:function(){var e=this;e._time=15,e.skin.lab_time.string=e._time+game.LanguageData.get(40),e._timerObj&&(e._timerObj.reset(),e._timerObj.start())},_onStageResize:function(){var e=this,t=b8e.stageWidth,n=b8e.stageHeight+b8e.topSpace+b8e.bottomSpace;e.setPosition((t-e.width>>1)+e.anchorX*e.width,e.anchorY*e.height+(n-e.height>>1)-b8e.bottomSpace)},dispose:function(){var e=this;e._clearTime(),e._timerObj&&(b8e.Timer.remove(e,e._updateTime),e._timerObj=null),e._bgImg&&(e._bgImg.unloadTexture(),e._bgImg=null),e._super()}}),b8e.RC("$$game","$$CreateRole",e)}(),function(){var e;e=b8e.SkinWidget.extends({ctor:function(){var e=game.baseUIUrl[12];this._super(e)},startBtn:function(){this._onClickStartBtn()},init:function(){var e=this,t=game.LoginConfig,n=(t.getGameChannelId(),t.logoUrl),a=t.loginBgUrl,i=t.bottomUrl;a&&""!=a&&e.skin.bg.loadTexture(a,null,null,{noCache:!0}),n&&""!=n&&e.skin.logoImg.loadTexture(n,null,null,{noCache:!0}),i&&""!=i&&e.skin.bottomTxt.loadTexture(i,null,null,{noCache:!0});var o=b8e.LocalStorage.getItem("username"),r=b8e.LocalStorage.getItem("password");e.skin.usernameInput.string=o||"",e.skin.passwordInput.string=r||""},onShow:function(){b8e.evt.addG(this,b8e.Event.STAGE_RESIZE,this.onResize),this.onResize()},onHide:function(){b8e.evt.rmvG(this,b8e.Event.STAGE_RESIZE,this.onResize)},onResize:function(){var e=this,t=b8e.stageWidth,n=b8e.stageHeight+b8e.topSpace+b8e.bottomSpace;this.setPosition((t-e.width>>1)+e.anchorX*e.width,e.anchorY*e.height+(n-e.height>>1)-b8e.bottomSpace),this.skin.bottom.y=-e.y},onStageResize:function(){this.onResize()},_onClickStartBtn:function(){var e=this;if(e.skin){var t=e.skin.usernameInput.string.trim();if(0!=t.length){var n=e.skin.passwordInput.string.trim();if(0!=n.length){var a=e.data.onRegister;a&&a.call(e.data.thisArg,t,n)}else b8e.Toast.launch("\u8bf7\u8f93\u5165\u5bc6\u7801\uff01")}else b8e.Toast.launch("\u8bf7\u8f93\u5165\u7528\u6237\u540d\uff01")}}}),b8e.RC("$$game","$$RegisterView",e)}(),function(){var e;e=b8e.SkinWidget.extends({_selectedId:0,_isAgree:!0,ctor:function(){var e=game.baseUIUrl[11];this._super(e)},init:function(){var e=this,t=game.LoginConfig,n=(t.getGameChannelId(),t.logoUrl),a=t.loginBgUrl,i=t.bottomUrl;a&&""!=a&&e.skin.bgImg.loadTexture(a,null,null,{noCache:!0}),n&&""!=n&&e.skin.logoImg.loadTexture(n,null,null,{noCache:!0}),i&&""!=i&&e.skin.bottomTxt.loadTexture(i,null,null,{noCache:!0});var o="V"+b8e.res.getInitVersion()+"."+b8e.res.getVersion()+"."+b8e.res.getResVersion()+e.getWeChatEnv();e.skin.verLab.setText(o)},getWeChatEnv:function(){if(!b8e.isWeChatGame)return"";switch(b8e.weChatEnv){case 1:return" Develop";case 2:return" Trial";case 3:return" Release";default:return" UnKnown"}},onShow:function(){game.loadingPage.hide();var e=this;e.skin.selectedZone.node.active=!1,e.skin.UserAgreement.active=b8e.isWeChatGame&&game.IS_XUANDONG,e.skin.checked.active=e._isAgree,e.onRefresh(),e.onStageResize(),e.queryAnnouncement(),b8e.evt.addG(e,b8e.Event.STAGE_RESIZE,e.onStageResize)},onHide:function(){b8e.evt.rmvG(this,b8e.Event.STAGE_RESIZE,this.onStageResize)},startBtn:function(){this._onClickStartBtn()},selectedZone:function(){this._onClickSelectedZoneNode()},btn_bulletin:function(){this.onShowAnnouncement()},_onClickStartBtn:function(){if(this._isAgree){var e=game.LoginConfig.getOpenGameLimit();if(game.LoginConfig.needVerify&&1==game.LoginConfig.fcm&&e){var t=game.GlobalCfg.getFcmTips("fcmTips1");game.alert.showMsg(t)}else{var n=this.data.onSelectServer;n&&n.call(this.data.thisArg,this._selectedId)}}else b8e.Toast.launch(game.LanguageData.get(41))},checkBtn:function(){this._isAgree=!this._isAgree,this.skin.checked.active=this._isAgree},agreementBtn:function(){var e=this;e._userAgreement||(e._userAgreement=new game.UserAgreement),e._userAgreement.parent||b8e.layer.getGuiBottomLayer().addChild(e._userAgreement)},queryAnnouncement:function(){var e={$$uid:game.LoginConfig.uid};game.sdk.sdkNet.requestData(game.LoginConfig.queryAnnouncementListUrl,e,function(e,t){if(e)return b8e.error(e),void b8e.Toast.launch(game.LanguageData.get(42),4294901760);t&&0==t.code&&(game.LoginConfig.announcementContents=t.data.list,game.LoginConfig.announcementContents&&(this.onShowAnnouncement(),b8e.evt.dptG(this,game.ZoneEvents.UPDATE_ANNOUNCEMENT)))},this,null,!0,{struct:{$$code:!0,$$data:{$$list:[{$$type:!0,$$content:!0}]}},isJson:!0})},onRefresh:function(){var e=this,t=e.skin,n="",a=e.data&&e.data.recommededInfo?e.data.recommededInfo:null;if(a){if(t.selectedZone.node.active=!0,!e.data.serverList)return;e._selectedId=a.id;var i=game.zone.getNewZoneInfo();n=i?game.LanguageData.get(43)+game.HtmlUtil.getText(game.Color.GREEN,i.name):game.LanguageData.get(43)+game.HtmlUtil.getText(game.Color.GREEN,a.name),t.lb_new.string=n,e.onSelected(a.id)}else n=game.HtmlUtil.getText(game.Color.RED,game.LanguageData.get(44)),t.lb_new.string=n;t.changeTip.x=t.selectedZoneNameLabel.width+t.selectedZoneNameLabel.x+30},_onClickSelectedZoneNode:function(){var e=this,t=e.data.serverList;t&&(e._zonePanel||(e._zonePanel=new game.ZonePanel),e._zonePanel.data={serverList:t,recommededInfo:e.data.recommededInfo,onSelected:e.onSelected,thisArg:e},e._zonePanel.parent||b8e.layer.getGuiBottomLayer().addChild(e._zonePanel))},onSelected:function(e){var t=this,n=t.data.serverList;if(n){t._selectedId=e;var a=n.get(t._selectedId);if(a)if(game.zone.allClose)t.skin.selectedZoneNameLabel.string=game.HtmlUtil.getText(game.Color.RED,game.LanguageData.get(44));else{var i=game.Color.GREEN;switch(a.state){case game.ZoneStateType.DEFEND_ZONE:i=game.Color.GRAY;break;case game.ZoneStateType.NEW_ZONE:i=game.Color.GREEN}t.skin.selectedZoneNameLabel.string=game.HtmlUtil.getText(i,a.name)}}},onShowAnnouncement:function(){var e=this;e._announcement||(e._announcement=new game.GameAnnouncementPanel),e._announcement.parent||b8e.layer.getGuiBottomLayer().addChild(e._announcement)},onStageResize:function(){var e=this,t=b8e.stageWidth,n=b8e.stageHeight+b8e.topSpace+b8e.bottomSpace;e.setPosition((t-e.width>>1)+e.anchorX*e.width,e.anchorY*e.height+(n-e.height>>1)-b8e.bottomSpace),e.skin.bottom.y=-e.y,e.skin.btn_bulletin.x=(640-t)/2+20,e.skin.btn_bulletin.y=(n-1136)/2-20,e.skin.verLab.x=(640-t)/2+2,e.skin.verLab.y=16-e.y},dispose:function(){var e=this;e._announcement&&(e._announcement.removeFromParent(),e._announcement.destroy(),e._announcement=null),e._zonePanel&&(e._zonePanel.removeFromParent(),e._zonePanel.destroy(),e._zonePanel=null),e._super()}}),b8e.RC("$$game","$$ServerListView",e)}(),function(){var e;e=b8e.SkinWidget.extends({ctor:function(){this._super(game.baseUIUrl[5])},loadImage:function(){var e,t,n=this,a=n.skin;a.content.height=0,n._sprites||(n._sprites=[]);for(var i=0;i<15;i++)(e=b8e.Sprite.get()).setAnchor(.5,1),e.setPosition(0,-1024*i),a.content.addChild(e),t="images/image/userAgreement/xuandong/"+i+".png",e.loadTexture(t,n._onSpComplete,n),n._sprites.push(e)},_onSpComplete:function(e){this.skin.content.height+=e.height},onShow:function(){var e=this;e.loadImage(),e.onStageResize(),game.viewModule.addModule(e),b8e.evt.addG(e,b8e.Event.STAGE_RESIZE,e.onStageResize)},closeBtn:function(){this.closePanle()},returnBtn:function(){this.closePanle()},closePanle:function(){var e=this;e.clearSp(),game.viewModule.removeModule(e),b8e.evt.rmvG(e,b8e.Event.STAGE_RESIZE,e.onStageResize),e.removeFromParent(),e.hide()},clearSp:function(){if(this._sprites)for(var e=0,t=this._sprites.length;e<t;e++)this._sprites[e].unloadTexture()},getModelTouchClose:function(){return!1},onStageResize:function(){this.setPosition(.5*(b8e.stageWidth-this.width),b8e.stageHeight-.5*(b8e.stageHeight-this.height))},dispose:function(){this.closePanle(),this._super()}}),b8e.RC("$$game","$$UserAgreement",e)}(),function(){var e=game.RoleLoginSender=function(){};e.CreateRoleRequest=function(e,t,n){var a=game.pb.CreateRoleRequest;a.name=e,a.zone=game.LoginConfig.serverId,a.isMale=n,a.pfId=game.LoginConfig.pfid,a.channelId=game.LoginConfig.channelId;var i=+game.LoginConfig.gameChannelId;a.gameChannelId=i,a.userId=game.LoginConfig.userId+"",a.device=game.LoginConfig.getDeviceInfo(),b8e.NetSender.getBytes().writeProtobuf(a);var o=game.pb.ProtoId.CreateRoleReq;b8e.sendN(o)},e.rename=function(e){var t=game.pbmsg.RenameRequest;t.name=e,b8e.NetSender.getBytes().writeProtobuf(t);var n=game.pb.ProtoId.RenameRequest;b8e.sendN(n)}}(),function(){var e=b8e.Object.extends({_showModules:null,_moduleNode:null,_isShowModule:!1,ctor:function(){this._super(),this._showModules=[]},addModule:function(e){var t=this;if(e&&!(-1<t._showModules.indexOf(e))){if(t._showModules.push(e),b8e.evt.dptG(game.ViewModuleEvts.MODULE_CHANGE,t._showModules.length),0==t._isShowModule){b8e.evt.addG(t,b8e.Event.STAGE_RESIZE,t._onStageResize);var n=b8e.LayerMgr.inst().getGuiBottomLayer();t._moduleNode||t._initModule(),n.addChild(t._moduleNode),t._onStageResize(),t._isShowModule=!0}t._moduleNode.removeFromParent(),t._moduleNode.addToParent(e),t._moduleNode.setPosition(-e.x,-e.y)}},removeModule:function(e){var t=this,n=t._showModules.indexOf(e);-1<n&&(t._showModules.splice(n,1),b8e.evt.dptG(game.ViewModuleEvts.MODULE_CHANGE,t._showModules.length),t._showModules.length<=0?(b8e.evt.rmvG(t,b8e.Event.STAGE_RESIZE,t._onStageResize),t._moduleNode.removeFromParent(),t._isShowModule=!1):(e=t._showModules[t._showModules.length-1])&&(t._moduleNode.removeFromParent(),t._moduleNode.addToParent(e),t._moduleNode.setPosition(-e.x,-e.y)))},_initModule:function(){var e=this;e._moduleNode=b8e.Graphics.get(),e._moduleNode.setAnchor(0,0),e._moduleNode.setLocalZOrder(-11e3),b8e.evt.onC(e._moduleNode,e._onHideView,e)},_onHideView:function(){var e=this._showModules[this._showModules.length-1];e&&e.getModelTouchClose()&&(e.removeFromParent(),e.bindEnum&&game.gamePopupMgr.hide(e.bindEnum))},_onStageResize:function(){var e,t,n=this,a=b8e.stageWidth,i=b8e.stageHeight+b8e.topSpace+b8e.bottomSpace,o=0,r=0,s=0,g=0;if(n._showModules&&0<n._showModules.length){var l=n._showModules[n._showModules.length-1];l&&(o=l.node.width,r=l.node.height,s=-l.x,g=-l.y)}n._moduleNode.clear(),n._moduleNode.fillColor(2986344448),e=a-o>>1,t=i-r>>1,n._moduleNode.setSize(a,i),n._moduleNode.fillRect(-e,-t,a+e+200,i+t),n._moduleNode.setPosition(s-100,g)},updateLayout:function(e){this._moduleNode.setPosition(-e.x,-e.y)},hasShowModule:function(){return 0<this.getShowModuleCount()},getShowModules:function(){return this._showModules},getShowModuleCount:function(){return this._showModules.length}});game.viewModule=game.viewModule||new e}(),function(){var e;e=b8e.Enum({ZONE_SELECT:b8e.enc(),SERVER_GROUP_SELECT:b8e.enc(),UPDATE_ANNOUNCEMENT:b8e.enc(),UPDATE_VERIFY:b8e.enc()}),b8e.RC("$$game","$$ZoneEvents",e)}(),function(){var e=b8e.Object.extends({name:"ZoneMgr",curGroup:-1,curId:-1,allClose:!1,ctor:function(){this._super()},setData:function(e){if(e){var t=this;t.setServerGroup(e.groups),t.setRecommededInfo(e.recommended),t.setAllLoggedIn(e),t.setSelctInfo(t.curGroup)}},setServerGroup:function(e){if(e&&!(e.length<1)){var t,i,n=this,o=0,r=0;n.newZoneId=0,e.forEach(function(e){var n=this;if(e){r++;var a=[];(t=e.list)&&t.forEach(function(e){o++;var t=new game.ServerInfo;t.index=o,t.groupIndex=r,t.id=e.id,t.name=e.name,t.state=e.state,n._serverList||(n._serverList=b8e.HashMap.get()),n._serverList.set(t.id,t),n.newZoneId<t.id&&2==t.state&&(n.newZoneId=t.id),a.push(t)},n),e.list=a,e.index=r,(i=new game.ServerGroupInfo).setup(e),n._serverGroupMap||(n._serverGroupMap=b8e.HashMap.get()),n._serverGroupMap.set(i.index,i)}},n),n._serverList&&(n._newZoneInfo=n._serverList.get(n.newZoneId))}},setRecommededInfo:function(e){var t=this,n=t.getServerList();if(n&&!(n.count()<1)){var a,i=n.get(e);if(i||(a=n.keys())&&0<a.length&&(i=n.get(a[0])),i&&i.state==game.ZoneStateType.DEFEND_ZONE&&(t.allClose=!0,(a=a||n.keys())&&0<a.length))for(var o=void 0,r=void 0,s=a.length-1;0<=s;s--)if(o=a[s],(r=n.get(o))&&r.state!=game.ZoneStateType.DEFEND_ZONE){t.allClose=!1;break}t._recommededInfo=i,t.curGroup=t._recommededInfo.groupIndex}},setAllLoggedIn:function(e){if(e){var t=this.allLoggedIns=e.all_logged_in;if(t&&0<t.length){var n,a,i=this,o=0,r=[],s=i.getServerList();t.forEach(function(e){(a=s.get(e))&&(o++,(n=new game.ServerInfo).setup(a),n.index=o,n.groupIndex=0,r.push(n))},i),-1!=t.indexOf(e.recommended)&&(i.curGroup=0);var g=i.getServerGroupMap();if(g){var l=new game.ServerGroupInfo;l.index=0,l.group_name=game.LanguageData.get(45),l.list=r,g.set(l.index,l)}}}},setSelctInfo:function(e){var t=this;if(t.selectInfo&&(t.selectInfo.select=!1),t._serverGroupMap){var n=t._serverGroupMap.get(e);n&&((t.selectInfo=n).select=!0)}},getServerGroupMap:function(){return this._serverGroupMap},getServerList:function(){return this._serverList},getRecommededInfo:function(){return this._recommededInfo},getNewZoneInfo:function(){return this._newZoneInfo},getServerInfoById:function(e){return this._serverList?this._serverList.get(e):null},getIsLoggedIn:function(e){return!(!this.allLoggedIns||this.allLoggedIns.length<1)&&-1<this.allLoggedIns.indexOf(e)},canCreateRole:function(){var e=game.LoginConfig.getGameChannelId();return game.GlobalCfg.canCreateRole(e)}});game.zone=game.zone||new e}(),function(){var e;e=b8e.ListItem.extends({ctor:function(){this._super(game.baseUIUrl[4])},getHeight:function(){return 85},getWidth:function(){return 144},show:function(){var e=this;1!=e.__isShow&&e._super()},hide:function(){var e=this;1==e.__isShow&&e._super()},onShow:function(){var e=this;e.setData(e._data),e._isRegister||(e._isRegister=!0,b8e.evt.onC(e,e.onClick,e))},onHide:function(){var e=this;e._isRegister&&(e._isRegister=!1,b8e.evt.offC(e,e.onClick,e)),e.skin.img_select.node.active=!1},onClick:function(){this._data&&(game.zone.curGroup=this._data.index),b8e.evt.dptG(game.ZoneEvents.SERVER_GROUP_SELECT)},setData:function(e){var t=this;if(t._data=e,t._data&&t.skin){t.skin.lab_zone_range.string=t._data.group_name;var n=game.zone.curGroup;t.skin.img_select.node.active=t._data.index==n}}}),b8e.RC("$$game","$$ZoneListBookItem",e)}(),function(){var e;e=b8e.ListItem.extends({ctor:function(){this._super(game.baseUIUrl[3]),this.setSize(446,121),this.setAnchor(.5,1)},onShow:function(){var e=this;e.setData(e._data),e._isRegister||(e._isRegister=!0,b8e.evt.onC(e,e.onClick,e))},onHide:function(){var e=this;e._isRegister&&(e._isRegister=!1,b8e.evt.offC(e,e.onClick,e))},onClick:function(){game.zone.curId=this._zoneId,b8e.evt.dptG(game.ZoneEvents.ZONE_SELECT)},setData:function(e){var t=this;if(t._data=e,t.skin&&t._data){var n=t.skin;switch(t._zoneId=t._data.id,n.defendState.node.active=!1,n.newState.node.active=!1,n.hotState.node.active=!1,n.gray.node.active=!1,n.green.node.active=!1,n.red.node.active=!1,t._data.state){case game.ZoneStateType.DEFEND_ZONE:n.defendState.node.active=!0,n.gray.node.active=!0;break;case game.ZoneStateType.NEW_ZONE:n.newState.node.active=!0,n.green.node.active=!0;break;case game.ZoneStateType.HOT_ZONE:n.hotState.node.active=!0,n.red.node.active=!0}n.nameLabel.string=t._data.name}}}),b8e.RC("$$game","$$ZoneListItem",e)}(),function(){var e;e=b8e.SkinWidget.extends({ctor:function(){this._super(game.baseUIUrl[2]),this.fadeEnabel=!0},onShow:function(){var e=this;e._groupList||(e._groupList=new b8e.List(e.skin.groupList,game.ZoneListBookItem)),e._groupList.show(),e.showServerGroup(),e._serverList||(e._serverList=new b8e.List(e.skin.serverList,game.ZoneListItem)),e._serverList.show(),e.showServer(),e.onStageResize(),game.viewModule.addModule(e),b8e.evt.addG(e,game.ZoneEvents.ZONE_SELECT,e.onItemSelected),b8e.evt.addG(e,game.ZoneEvents.SERVER_GROUP_SELECT,e.onServerGroupSelected),b8e.evt.addG(e,b8e.Event.STAGE_RESIZE,e.onStageResize)},closeBtn:function(){this.closePanel()},returnBtn:function(){this.closePanel()},getModelTouchClose:function(){return!1},closePanel:function(){var e=this;e._groupList&&e._groupList.hide(),e._serverList&&e._serverList.hide(),e._modal&&e._modal.removeFromParent(),game.viewModule.removeModule(e),b8e.evt.rmvG(e,game.ZoneEvents.ZONE_SELECT,e.onItemSelected),b8e.evt.rmvG(e,game.ZoneEvents.SERVER_GROUP_SELECT,e.onServerGroupSelected),b8e.evt.rmvG(e,b8e.Event.STAGE_RESIZE,e.onStageResize),e.removeFromParent()},onItemSelected:function(){var e=this,t=e.data.onSelected,n=game.zone.curId,a=e.data.thisArg;t&&t.call(a,n),e.closePanel()},onServerGroupSelected:function(){this.showServerGroup(),this.showServer()},showServer:function(){var e=game.zone.getServerGroupMap();if(e){var t=game.zone.curGroup,n=e.get(t);if(n){var a=n.list;if(a&&!(a.length<1)){var i=this;a.sort(i.onSort),i._serverList&&i._serverList.setData(a)}}}},showServerGroup:function(){var e=game.zone.getServerGroupMap();if(e){var t=e.values();if(t&&!(t.length<1)){var n=this;t.sort(n.onSort),n._groupList&&n._groupList.setData(t)}}},onSort:function(e,t){return e.index-t.index},onStageResize:function(){var e=this,t=b8e.stageWidth,n=b8e.stageHeight,a=t-e.width>>1,i=n-e.height>>1;e.setPosition(a,n-i)},dispose:function(){var e=this;e._groupList&&(e._groupList.destroy(),e._groupList=null),e._serverList&&(e._serverList.destroy(),e._serverList=null),e._super()}}),b8e.RC("$$game","$$ZonePanel",e)}(),function(){var e,t=e=b8e.Object.extends({index:0,group_name:0,list:null,select:!1,ctor:function(){this._super()},setup:function(e){e&&(this.index=e.index,this.group_name=e.group_name,this.list=e.list)}});b8e.BindingUtil.bind(t),b8e.RC("$$game","$$ServerGroupInfo",e)}(),function(){var e,t=e=b8e.Object.extends({name:"",id:0,index:0,groupIndex:0,state:0,ctor:function(){this._super(),this.state=game.ZoneStateType.HIDE_ZONE},setup:function(e){if(e){var t=this;t.index=e.index,t.name=e.name,t.groupIndex=e.groupIndex,t.state=e.state,t.id=e.id}}});b8e.BindingUtil.bind(t),b8e.RC("$$game","$$ServerInfo",e)}(),function(){var e;e=b8e.Enum({HIDE_ZONE:0,DEFEND_ZONE:1,NEW_ZONE:2,HOT_ZONE:3,FULL_ZONE:4}),b8e.RC("$$game","$$ZoneStateType",e)}(),function(){var e;e=b8e.GameConfig.extends({ctor:function(){this._super("name")},getValue:function(e){var t=this.getData(e);return t?t.value:null},getRandomName:function(e){var t=this,n=game.LanguageData,a=n.get(37),i="";return i=e?(a=t.getPartByKey("nanxing"),(i=t.getPartByKey("nanming"))||n.get(38)):(a=t.getPartByKey("nvxing"),(i=t.getPartByKey("nvming"))||n.get(39)),t.getSpecialSymbolName(a,i)},getPartByKey:function(e){var t=this,n=void 0,a="";if(t._nList&&(n=t._nList[e],a=t._getPart(n)))return a;t._nList||(t._nList=[]),(n=t._nList[e])||(n=t.getValue(e).split(","),t._nList[e]=n);return a=t._getPart(n)},_getPart:function(e){var t="";e&&0<e.length&&(t=e[e.length*Math.random()>>0]);return t},getAutoCreateRoleList:function(){var e=this,t=e.getValue("autoCreateRoleList");if(t&&!e.autoCreateRoleList){e.autoCreateRoleList=t.split(",");for(var n=e.autoCreateRoleList.length,a=0;a<n;a++)e.autoCreateRoleList[a]=+e.autoCreateRoleList[a]}return e.autoCreateRoleList},getShowQrcode:function(e){var t=this,n=t.getValue("showQrcodeList");if(n&&!t.qrcodeList){t.qrcodeList=n.split(",");for(var a=t.qrcodeList.length,i=0;i<a;i++)t.qrcodeList[i]=+t.qrcodeList[i]}return!(!t.qrcodeList||t.qrcodeList.length<1)&&-1<t.qrcodeList.indexOf(e)},getSpecialSymbolName:function(e,t){var n=this,a=e+t;if(!e||!t)return a;if(!+n.getValue("openSymbol"))return a;if(!n.specialSymbolList){var i=n.getValue("specialSymbol");n.specialSymbolList=i.split(",")}if(!n.specialSymbolList||n.specialSymbolList.length<1)return a;var o=6-a.length;o=1+(o*Math.random()>>0);for(var r=void 0,s=n.specialSymbolList.length,g=void 0,l=0;l<o;l++)r=s*Math.random()>>0,g=n.specialSymbolList[r],r%2?t+=g:t=g+t;return e+t},getNeedVerify:function(e){var t=this.getValue("fcmGameChannelId");if(!t)return!1;this.ids||(this.ids=t.split(","));var n=this.ids;return!(!n||n.length<1)&&(e+="",-1<n.indexOf(e))},getOpenShare:function(e){var t=this.getValue("shareGameChannelId");if(!t)return!1;var n=this.sids;return!(!(n=n||(this.sids=t.split(",")))||n.length<1)&&(e+="",-1<n.indexOf(e))},getFcmTips:function(e){var t=this.getValue(e);return t||""},getFcmLimitByKey:function(e){return"1"==this.getValue(e)},canCreateRole:function(e){var t=this;if(t.isAllCloseCreateRole())return!1;if(!t.notCreateRoleList){var n=t.getValue("notCreateRole");n&&(t.notCreateRoleList=n.split(","))}var a=t.notCreateRoleList;return!a||(e+="",!(-1<a.indexOf(e)))},isAllCloseCreateRole:function(){return"1"==this.getValue("allCloseCreateRole")},isOpenStory:function(){return"1"==this.getValue("openStory")},plotTime:function(){return this.getValue("plotTime")},enterHome:function(){return this.getValue("enterHome")}}),b8e.RC("$$game","$$GlobalCfg",e)}(),function(){var e;e=b8e.GameConfig.extends({ctor:function(){this._super()},get:function(e){var t=this.getData(e);return t&&t.desc?t.desc:game.LanguageData.get(85)+e}}),b8e.RC("$$game","$$ServerCodeCfg",e)}(),function(){var n=game.LoginConfig={};n.apiListUrl=null,n.registerUrl=null,n.loginUrl=null,n.serverListUrl=null,n.serverSelectUrl=null,n.logReportUrl=null,n.queryAnnouncementListUrl=null,n.queryZoneAnnouncementListUrl=null,n.needLogin=!1,n.hasHeroData=!1,n.oleRole=!1,n.heroData=null,n.isSingle=!1,n.gateSvrAddr=null,n.serverArea=1,n.serverId=1,n.serverName="",n.token=null,n.loginAddr=null,n.openId=0,n.uid=0,n.secret="",n.pfid=0,n.wanbaGiftId=0,n.channelId=0,n.newAccount=!1,n.createOrderUrl=null,n.rechargeCallbackUrl=null,n.signrechargeUrl=null,n.queryWanbaPayUrl=null,n.wanbaFriendsUrl=null,n.wanbaSendMsgUrl=null,n.wanbaVipLevelUrl=null,n.isMicroLogin=!1,n.canDownloadMicro=!1,n.canShare=!1,n.openApplePay=!1,n.isApplePay=!1,n.canAddShortcut=!1,n.isSwitch=!1,n.canFocus=!1,n.isFocus=!1,n.announcementContents=null,n.zoneAnnouncementContents=null,n.hasRealVerify=!1,n.realVerifyComplete=!1,n.gameChannelId="",n.userId="",n.time=0,n.lH5Sign="",n.creatRoleIsLock=!1,n.showTip=0,n.wanBaGameVipLevel=0,n.autoCreateRole=!1,n.canSendMsg=!1,n.suggestUrl=null,n.changeLoginBg=!1,n.loginBgType=0,n.loginBgUrl="",n.loadBgType=0,n.loadBgUrl="",n.logoType=0,n.logoUrl="",n.canBindPhone=!1,n.isBindMobile=!1,n.isQQWeChatGame=!1,n.BundleIdentifier="",n.fcm=0,n.verifyUrl=null,n.age=0,n.lowestAge=!1,n.needVerify=!1,n.visitor=!1,n.traceUrl="",n.traceSteps=null,n.localClient=!1,n.isColorTicketIn=!1,n.isDesktopIn=!1,n.isStory=!1,n.getOpenFcmOnlineTips=function(){return null==n.openFcmOnlineTips&&(n.openFcmOnlineTips=game.GlobalCfg.getFcmLimitByKey("openFcmOnlineTips")),n.openFcmOnlineTips},n.getOpenRechargeLimit=function(){return null==n.openRechargeLimit&&(n.openRechargeLimit=game.GlobalCfg.getFcmLimitByKey("openRechargeLimit")),n.openRechargeLimit},n.getOpenGameLimit=function(){return null==n.openGameLimit&&(n.openGameLimit=game.GlobalCfg.getFcmLimitByKey("openGameLimit")),n.openGameLimit},n.getFcm=function(){var e=n.age;return e<=0?9:0<e&&e<8?1:8<=e&&e<18?2:0},n.getLimitRecharge=function(){var e=n.age;return e<8?0:8<=e&&e<16?50:16<=e&&e<18?100:0},n.getMaxRecharge=function(){var e=n.age;return e<8?0:8<=e&&e<16?200:16<=e&&e<18?400:0},n.getOpenFcmOnlineTips=function(){return null==n.openFcmOnlineTips&&(n.openFcmOnlineTips=game.GlobalCfg.getFcmLimitByKey("openFcmOnlineTips")),n.openFcmOnlineTips},n.getOpenRechargeLimit=function(){return null==n.openRechargeLimit&&(n.openRechargeLimit=game.GlobalCfg.getFcmLimitByKey("openRechargeLimit")),n.openRechargeLimit},n.getOpenGameLimit=function(){return null==n.openGameLimit&&(n.openGameLimit=game.GlobalCfg.getFcmLimitByKey("openGameLimit")),n.openGameLimit},n.getFcm=function(){var e=n.age;return e<=0?9:0<e&&e<8?1:8<=e&&e<18?2:0},n.getLimitRecharge=function(){var e=n.age;return e<8?0:8<=e&&e<16?50:16<=e&&e<18?100:0},n.getMaxRecharge=function(){var e=n.age;return e<8?0:8<=e&&e<16?200:16<=e&&e<18?400:0},n.getDeviceInfo=function(){var e=n.getDeviceParam(),t=game.pb.DeviceData;return t.deviceName=e.device_name,t.osType=e.os_type,t.netType=e.net_type,t.osVer=e.os_ver,t.iosIdfa=e.ios_idfa,t.androidImei=e.android_imei,t.packageName=e.package_name,t.screenWidth=e.screen_width,t.screenHeight=e.screen_height,t.userAgent=e.user_agent,t},n.getDeviceParam=function(){var e={device_name:""};switch(b8e.os){case"iOS":e.os_type="ios";break;case"Android":e.os_type="android";break;default:e.os_type="pc"}return e.net_type="",e.os_ver="",e.ios_idfa="",e.android_imei="",e.package_name="",e.screen_width=b8e.screenWidth+"",e.screen_height=b8e.screenHeight+"",e.user_agent=window.navigator.userAgent,e},n.getDeviceParam2=function(){var e={$$device_name:""},t="";switch(b8e.os){case"iOS":t="ios";break;case"Android":t="android";break;default:t="pc"}return e.$$os_type=t,e.$$net_type="",e.$$os_ver="",e.$$ios_idfa="",e.$$android_imei="",e.$$package_name="",e.$$screen_width=b8e.screenWidth+"",e.$$screen_height=b8e.screenHeight+"",e.$$user_agent=window.navigator.userAgent,e},n.getGameChannelId=function(){if(!n.gameChannelId&&window&&window.location&&window.location.href){var e=b8e.getQueryString("game_channel_id");n.gameChannelId=e?+e:0}return n.gameChannelId},n.isOpenStory=function(){if(!game.channelInfo.close_story_list||!game.channelInfo.close_story_list.length)return!0;for(var e=game.channelInfo.close_story_list.length,t=0;t<e;t++)if(game.LoginConfig.gameChannelId==game.channelInfo.close_story_list[t])return!1;return!0},n.bgUrl="images/image/loading/bg10.jpg",n.bottomUrl="images/image/loading/bottom_txt2.png",n.banner="images/image/loading/banner.png"}(),function(){var e;e=b8e.Enum({COMMON:1,IOS_WECHATGAME:2}),b8e.RC("$$game","$$RechargePlatformType",e)}(),function(){var e;e=b8e.Enum({MODULE_CHANGE:b8e.enc()}),b8e.RC("$$game","$$ViewModuleEvts",e)}(),function(){var e,t=e=b8e.Object.extends({_loadingView:null,_loadComplete:!1,ctor:function(){if(t._singleton)throw new Error("\u53ea\u80fd\u901a\u8fc7inst()\u6765\u83b7\u53d6LoadingPage\u5b9e\u4f8b\uff01");this._super()},show:function(e){var t=this;t.parent||(t._loadingComponent||(t._loadingComponent=new game.LoadingComponent),t._loadingComponent.parent||(b8e.layer.getTopLayer().addChild(t._loadingComponent),t._loadingComponent.setLocalZOrder(600),t._loadingComponent.show(game.LoginConfig.loadBgUrl),t._loadingView||(t._loadingView=new game.LoadingView),t._loadingView.parent||(t._loadingComponent.addChild(t._loadingView),t._loadingView.plot=!!e)))},hide:function(){this._loadingView&&this._loadingView.removeFromParent(),this._loadingComponent&&this._loadingComponent.hide()},setPromptText:function(e){this._loadingView&&this._loadingView.setTextTipLabel(e,4294967295),this._loadingComponent&&this._loadingComponent.setPromptText("")},setErrorText:function(e){this._loadingComponent&&this._loadingComponent.setPromptText(e,4294901760)},setProgress:function(e){this._loadingComponent&&(this._loadingComponent.setProgress(e),e=100*e|0,this._loadingComponent.setProgressText(e+"%",4294967295))},setLoginBtnShow:function(){this._loadingView&&this._loadingView.setLoginBtnShow()}});t._instance=null,t._singleton=!0,t.inst=function(){return null==t._instance&&(t._singleton=!1,t._instance=new t,t._singleton=!0),t._instance},game.loadingPage=t.inst(),b8e.RC("$$game","$$LoadingPage",e)}(),function(){var e;e=b8e.SkinWidget.extends({_progress:0,_modelTouchClose:!1,_tipText:null,_textColor:null,_curIndex:0,_plotTime:500,ctor:function(){this._super(game.baseUIUrl[1])},init:function(){var e=this,t=e.skin,n=game.LoginConfig;e._loadTexture(t.bottomTxt,n.bottomUrl),e._loadTexture(t.logoImg,n.logoUrl),e._loadTexture(t.banner,n.banner),e._loadTexture(t.loadingAd,n.loadingAd)},onShow:function(){var e=this,t=e.skin;t.textTipLabel.string=e._tipText,t.textTipLabel.color=e._textColor,t.banner.active=1==game.LoginConfig.showTip;var n=!b8e.params.isWeChatGame;t.lab_refresh.active=n,t.btn_refresh.active=n,b8e.evt.addG(e,b8e.Event.STAGE_RESIZE,e.onStageResize),e.onStageResize(),t.loadingAd.active=!0,t.loginBtn.active=!1,e.showPlot()},onHide:function(){b8e.evt.rmvG(this,b8e.Event.STAGE_RESIZE,this.onStageResize)},_loadTexture:function(e,t){t&&""!=t&&e.loadTexture(t,null,null,{noCache:!0})},showPlot:function(){var e=this,t=e.skin;if(e.plot){for(var n=0;n<9;n++){e.getComponent("desc"+(n+1)).setAlpha(0)}e._curIndex=0,t.plotNode.active=!0,e._moduleNode||(e._moduleNode=b8e.Graphics.get(),e._moduleNode.setAnchor(.5,.5),e._moduleNode.clear(),e._moduleNode.fillColor(2986344448),e._moduleNode.setSize(960,1600),e._moduleNode.fillRect(-480,-800,960,1600)),e._moduleNode.addToParent(t.maskNode),e._plotTime||(e._plotTime=game.GlobalCfg.plotTime()),e.updatePlot()}else t.plotNode.active=!1,e._moduleNode&&e._moduleNode.removeFromParent()},updatePlot:function(){var e=this;if(!(9<=e._curIndex)){e._curIndex++;var t=e.getComponent("desc"+e._curIndex);b8e.Tween.get(t).to({alpha:1},e._plotTime).call(e._onTweenKill,e,[t])}},_onTweenKill:function(e){e&&b8e.Tween.kill(e),this.updatePlot()},refreshGame:function(){b8e.startup&&b8e.startup.reload()},plot:{get:function(){return this._plot},set:function(e){this._plot=e}},setTextTipLabel:function(e,t){this._tipText=e,this._textColor=t;var n=this.skin;n&&(n.textTipLabel.string=e,n.textTipLabel.color=t)},setLoginBtnShow:function(){var e=this.skin;e.loginBtn.active=!0,e.loadingAd.active=!1},loginBtn:function(){game.JunHaiSdkN.login()},btn_refresh:function(){this.refreshGame()},dispose:function(){var e=this;e._moduleNode&&(e._moduleNode.removeFromParent(),e._moduleNode=null),e._progress=null,e._modelTouchClose=null,e._tipText=null,e._textColor=null,e._curIndex=null,e._plotTime=null,e._super()},onStageResize:function(){var e=this,t=b8e.stageWidth,n=b8e.stageHeight+b8e.topSpace+b8e.bottomSpace,a=(t-e.width>>1)+e.anchorX*e.width,i=e.anchorY*e.height+(n-e.height>>1)-b8e.bottomSpace;e.setPosition(a,i),e.skin.bottom.y=-i}});b8e.RC("$$game","$$LoadingView",e)}(),function(){var e;e=b8e.Object.extends({main:null,_isPreloaded:!1,initProcess:function(){var e=this;e.main=new b8e.ProcessStateMachine,e.main.pushProcess(new game.LoadBaseConfig),e.main.pushProcess(new game.LoadSDK),e.main.pushProcess(new game.Register),e.main.pushProcess(new game.ServerList),e.main.pushProcess(new game.ServerConnect),e.main.pushProcess(new game.BasePreload),e.main.pushProcess(new game.CreateChar),e.main.pushProcess(new game.LoadModule)},runProcess:function(){var e=this;e.main.free(),e.main.addPreProcess(game.BaseProcessTypes.LOAD_BASE_CONFIG,.02,.05),e.main.addPreProcess(game.BaseProcessTypes.BASE_PRELOAD,.1,.2),e.main.addPreProcess(game.BaseProcessTypes.LOAD_SDK,0,.02),e.main.addPreProcess(game.BaseProcessTypes.REGISTER,.05,1),e.main.addPreProcess(game.BaseProcessTypes.SERVER_LIST,.05,.1),e.main.addPreProcess(game.BaseProcessTypes.SERVER_CONNECT,.2,.25),e.main.addPreProcess(game.BaseProcessTypes.CREATE_CHAR,.25,.35),e.main.addPreProcess(game.BaseProcessTypes.LOAD_MODULE,.35,.5),e.main.run()},runConnectProcess:function(){var e=this;e.main.free(),e.main.addPreProcess(game.BaseProcessTypes.SERVER_CONNECT,.1,.15),e.main.addPreProcess(game.BaseProcessTypes.CREATE_CHAR,.15,.2),e.main.addPreProcess(game.BaseProcessTypes.LOAD_MODULE,.2,.5),e.main.run()},preload:function(){this._isPreloaded||(this._isPreloaded=!0)},loadModule:function(){this.main.getProcess(game.BaseProcessTypes.LOAD_MODULE).preProcess(this.loadMainConfig,this)},loadMainConfig:function(){game.module&&(game.module.initMainProcess(),game.mainProcess.main.getProcess(game.MainProcessTypes.LOAD_CONFIG).preProcess(this.loadMainUI,this))},loadMainUI:function(){game.mainProcess.main.getProcess(game.MainProcessTypes.LOAD_MAIN_UI).preProcess()}}),b8e.RC("$$game","$$BaseProcessRun",e)}(),function(){var e;e=b8e.Enum({NONE:0,LOAD_SDK:1,REGISTER:2,LOAD_BASE_CONFIG:3,BASE_PRELOAD:4,SERVER_LIST:5,SERVER_CONNECT:6,CREATE_CHAR:7,LOAD_MODULE:8}),b8e.RC("$$game","$$BaseProcessTypes",e)}(),function(){var e;e=b8e.BaseProcess.extends({_createRole:null,skinUrl:null,ctor:function(){this._super()},getState:function(){return game.BaseProcessTypes.CREATE_CHAR},processHandler:function(e){game.loadingPage.setProgress(e)},startProcess:function(){var e=this;e._super();var t=game.LoginConfig;if(t.hasHeroData)game.reconnect.isLoginAgain||(game.loadingPage.show(),game.loadingPage.setPromptText(game.LanguageData.get(22))),e.completeProcess();else{var n=game.GlobalCfg.getAutoCreateRoleList();if(n&&0<n.length){var a=+t.gameChannelId;t.autoCreateRole=-1<n.indexOf(a)}if(t.autoCreateRole)e.autoCreateRole();else{game.loadingPage.show();var i=game.LanguageData.get(7);game.loadingPage.setPromptText(i),e.setProcessPercent(1,3e3),e.skinUrl=game.baseUIUrl[13],b8e.res.loadRes(e.skinUrl,b8e.UIAsset,e.onResComplete,e,null,{loadDepends:!0})}}},randomIndex:0,autoCreateRole:function(){var t=this,n=0<.5-Math.random()?1001:1002,a=1001==n,i=game.GlobalCfg.getRandomName(a);game.sdk.msgSecCheck(i,function(e){e?(game.LoginConfig.creatRoleIsLock=!0,game.RoleLoginSender.CreateRoleRequest(i,n,a),b8e.setTimeout(t.timeoutFunc,t,1e3)):t.randomIndex<8&&(t.randomIndex++,t.autoCreateRole())},t)},timeoutFunc:function(){game.LoginConfig.creatRoleIsLock||game.LoginConfig.heroData||(this.randomIndex++,this.autoCreateRole())},onResComplete:function(){this._createRole||(this._createRole=new game.CreateRole,b8e.layer.getGuiBottomLayer().addChild(this._createRole));game.JunHaiSdk.completeProgress(),this.recordLostTime()},completeProcess:function(){var e=this;e.skinUrl&&(b8e.res.unloadRes(e.skinUrl,e.onResComplete,e),e.skinUrl=null),e._createRole&&(e._createRole.removeFromParent(),e._createRole.destroy(),e._createRole=null),game.JunHaiSdk.completeProgress(),game.sdk.loginRoleLog(),e._super()}}),b8e.RC("$$game","$$CreateChar",e)}(),function(){var e;e=b8e.BaseProcess.extends({ctor:function(){this._super()},getState:function(){return game.BaseProcessTypes.LOAD_SDK},processHandler:function(e){game.loadingPage.setProgress(e)},startProcess:function(){if(this._super(),game.reconnect.isLoginAgain||(game.loadingPage.show(),game.loadingPage.setPromptText(game.LanguageData.get(1))),this.setProcessPercent(1,3e3),game.SDKMgr)game.sdk=game.SDKMgr.inst(),game.sdk.init(this.onSdkInited,this);else{var e=game.LanguageData.get(2);b8e.error(e),game.loadingPage.show(),game.loadingPage.setErrorText(e)}},onSdkInited:function(){this.completeProcess()}}),b8e.RC("$$game","$$LoadSDK",e)}(),function(){var t=void 0;(t=b8e.BaseProcess.extends({_configProto:null,_configUrl:null,ctor:function(){this._configUrl="config/base_config.bcd",this._super()},getState:function(){return game.BaseProcessTypes.LOAD_BASE_CONFIG},processHandler:function(e){game.loadingPage.setProgress(e)},startProcess:function(){this._super(),game.loadingPage.show();var e=game.LanguageData.get(16);game.loadingPage.setPromptText(e),this.setProcessPercent(.5,3e3),this.loadConfig()},loadConfig:function(){var e=[{url:this._configUrl,type:b8e.ConfigData,ns:"base_conf"},{url:"proto/base_proto.bpd"}];b8e.res.loadBatchRes(e,this.batchLoadProcess,this,null,100,!1)},batchLoadProcess:function(e,t,n,a,i){var o,r=this;e?(o=game.LanguageData.get(17),game.loadingPage.setErrorText(o)):i==r._configUrl?(game.loadingPage.setPromptText(game.LanguageData.get(18)),r.setProcessPercent(1,3e3),r._splitConfig(t)):"proto/base_proto.bpd"==i&&(r._protoCompleted=!0,r._configCompleted&&r.completeProcess())},_splitConfig:function(e){t._config=e,this._initModuleConfig()},_initModuleConfig:function(){var e=t._config;e.allot("_$GlobalCfg","ClientGlobal","_$GlobalCfg"),e.allot("_$ClientTextCfg","ClientText"),e.allot("_$ServerCodeCfg","ServerCode","_$ServerCodeCfg"),e.allot("_$PreLoadCfg","PreLoad"),e.allot("_$AnimatorPreLoadCfg","AnimatorPreLoad"),e.runAllot(function(){this._configCompleted=!0,this._protoCompleted&&this.completeProcess()},this)}}))._config=null,b8e.RC("$$game","$$LoadBaseConfig",t)}(),function(){var e;e=b8e.BaseProcess.extends({ctor:function(){this._super()},getState:function(){return game.BaseProcessTypes.BASE_PRELOAD},processHandler:function(e){game.loadingPage.setProgress(e)},startProcess:function(){this._super(),game.loadingPage.show();var e=game.LanguageData.get(19);game.loadingPage.setPromptText(e),this.setProcessPercent(1,3e3),this.preload()},preload:function(){var e=["ui/base/prefabs/gameAlert/GameAlertView.bui"];if(!b8e.isWeChatGame){for(var t=game.PreLoadCfg.getDatas(),n=0,a=t.length;n<a;n++)e.push(t[n].url);for(var i=0,o=(t=game.AnimatorPreLoadCfg.getDatas()).length;i<o;i++)for(var r=t[i],s=0,g=r.actionName.length;s<g;s++){var l=r.url+"/"+r.actionName[s]+"/sequence_"+r.directionType[s]+".btf";e.push({url:l,type:b8e.FrameAtlas})}}b8e.res.preloadReses(e),this.stopProcess()}}),game.LoadBaseConfig._config=null,b8e.RC("$$game","$$BasePreload",e)}(),function(){var e;e=b8e.BaseProcess.extends({_moduleLoading:!1,getState:function(){return game.BaseProcessTypes.LOAD_MODULE},processHandler:function(e){game.loadingPage.setProgress(e)},onPreProcess:function(){var e=this;b8e.macro.IS_RELEASE||b8e.macro.IS_PRE_RELEASE?game.module?e.stopProcess():e._moduleLoading||(e._moduleLoading=!0,e.loadModule()):e.stopProcess()},startProcess:function(){if(this._super(),!game.reconnect.isLoginAgain){game.loadingPage.show(!game.LoginConfig.hasHeroData);var e=game.LanguageData.get(23);game.loadingPage.setPromptText(e)}this.setProcessPercent(1,2e3),b8e.res.loadAppBuiltin(this._loadApp,this)},_loadApp:function(){var e=this;b8e.macro.IS_RELEASE||b8e.macro.IS_PRE_RELEASE?game.module?e.stopProcess():e._moduleLoading||(e._moduleLoading=!0,e.loadModule()):e.stopProcess()},onRuntimeComplete:function(){this.loadModule()},loadModule:function(){b8e.res.loadAppModules(this.onModuleComplete,this)},onModuleComplete:function(){this._moduleLoading=!1,this.stopProcess()},completeProcess:function(){if(this._super(),game.module)b8e.UIDisplay.allowUseAppRes=!0,game.module.runMainProcess(),b8e.startup.removeDummyHot();else{var e=game.LanguageData.get(24);game.loadingPage.setErrorText(e),b8e.error(e)}}}),b8e.RC("$$game","$$LoadModule",e)}(),function(){var e;e=b8e.BaseProcess.extends({_registerView:null,_registerNet:null,skinUrl:null,ctor:function(){this._super(),this._registerNet=b8e.NetMgr.createMgr("register")},getState:function(){return game.BaseProcessTypes.REGISTER},processHandler:function(e){game.loadingPage.setProgress(e)},startProcess:function(){var t=this;t._super(),game.LoginConfig.needLogin?(game.loadingPage.show(),game.loadingPage.setPromptText(game.LanguageData.get(3)),t.setProcessPercent(1,3e3),t.skinUrl="ui/base/prefabs/roleLogin/RegisterSkin.bui",b8e.res.loadRes(t.skinUrl,b8e.UIAsset,t.onResComplete,t)):(game.loadingPage.show(),t.setProcessPercent(1,3e3),game.sdk.login(null,function(e){0==e&&t.completeProcess()},t))},onResComplete:function(){var e=this;e._registerView||(e._registerView=new game.RegisterView,b8e.layer.getGuiBottomLayer().addChild(e._registerView),e._registerView.data={onRegister:e.registerAndLogin,thisArg:e},game.loadingPage.hide());e.skinUrl&&(b8e.res.unloadRes(e.skinUrl,e.onResComplete,e),e.skinUrl=null),e.recordLostTime()},registerAndLogin:function(e,t){b8e.layer.showLoading(game.LanguageData.get(4)),this.login(e,t)},login:function(n,a){var i=this,e={username:n,password:a};game.LoginConfig.username=n,game.LoginConfig.password=a,game.sdk.login(e,function(e){var t=e.code;0==t?(b8e.layer.hideLoading(),b8e.LocalStorage.setItem("username",n),b8e.LocalStorage.setItem("password",a),i.completeProcess()):2==t?(b8e.layer.showLoading(game.LanguageData.get(5)),i.register(n,a)):(b8e.layer.hideLoading(),b8e.Toast.launch(game.LanguageData.get(26)+"code:"+t+" "+e.msg,4294901760))},i)},register:function(n,a){var i=this,e={$$username:n,$$password:a};i._registerNet.requestData(game.LoginConfig.registerUrl,e,function(e,t){e?(b8e.error(e),b8e.Toast.launch(game.LanguageData.get(29))):(b8e.layer.hideLoading(),0==t.code?i.login(n,a):b8e.Toast.launch(game.LanguageData.get(30)+t.msg))},i,null,!0,{struct:{$$code:!0,$$msg:!0},isJson:!0})},completeProcess:function(){var e=this;e._registerView&&(e._registerView.removeFromParent(),e._registerView.destroy(),e._registerView=null),e._super()}}),b8e.RC("$$game","$$Register",e)}(),function(){var e;e=b8e.BaseProcess.extends({_loginServer:null,_loginConnected:!1,_loginCmd:null,ctor:function(){this._super(),this._loginConfig=game.LoginConfig,this._reconnect=game.reconnect,this._loadingPage=game.loadingPage},getState:function(){return game.BaseProcessTypes.SERVER_CONNECT},processHandler:function(e){this._loadingPage.setProgress(e)},startProcess:function(){var e=this;e._super(),e._loginCmd||(e._loginCmd=new game.BaseLoginCmd,e._loginCmd.start(),b8e.addNH(game.pb.ProtoId.AuthResp,e._onReceiveGateAuthResponse,e),b8e.addNH(game.pb.ProtoId.QueryRoleResp,e._onReceiveQryHasRoleResponse,e),b8e.addNH(game.pb.ProtoId.Pong,e._onHeartBeatResponse,e)),e._loginConfig.isSingle?(e._loginConfig.heroData=null,e.completeProcess()):e.startConnect()},_onHeartBeatResponse:function(){game.heartBeat.onHeartBeatResponse()},startConnect:function(){var e=this;e._reconnect.isLoginAgain||(e._loadingPage.show(),e._loadingPage.setPromptText(game.LanguageData.get(10))),e.setProcessPercent(1,3e3);var t=e._loginConfig.loginAddr;e._loginServer&&(e._loginServer.clear(),e._loginServer=null),e._loginServer=b8e.NetMgr.createMgr("login"),e._loginServer.initSocket(b8e.Socket.TYPE_JSON),b8e.log("\u767b\u9646\u670d\u52a1\u5668\u5730\u5740:"+t),e._loginServer.connectServer(t,0,e._onConnectedToLoginServer,e.onLoginClose,e.onLoginError,e._onReceiveDataFromLoginServer,e,e._onTimeOut,{struct:{$$code:!0,$$msg:!0,$$gate_addr:!0,$$secret:!0,$$uid:!0}})},_onConnectedToLoginServer:function(){var e=this;e._reconnect.isLoginAgain||e._loadingPage.setPromptText(game.LanguageData.get(11)),e._loginConnected=!0;var t={$$token:e._loginConfig.token};e._loginServer.sendString(t)},onLoginClose:function(){this._loginConnected=!1},onLoginError:function(){this._loginConnected&&this._loginServer&&this._loginServer.closeConnection()},_onReceiveDataFromLoginServer:function(e){var t=this;if(0==e.code)t._reconnect.isLoginAgain||t._loadingPage.setPromptText(game.LanguageData.get(12)),t._loginConfig.uid=e.uid,t._loginConfig.secret=e.secret,t._loginConfig.gateSvrAddr=e.gate_addr,b8e.net.connectServer(t._loginConfig.gateSvrAddr,0,t._onConnectedToGateServer,t._onGateConnectionClosed,t._onGateSocketError,null,t,t._onTimeOut);else{var n=game.LanguageData.get(31)+e.msg;b8e.Toast.launch(n,4294901760,0),b8e.error(n)}},_onConnectedToGateServer:function(){this._reconnect.isLoginAgain||(this._loadingPage.setPromptText(game.LanguageData.get(13)),b8e.layer.showInfo(game.LanguageData.get(14)));var e=game.pb.AuthRequest;e.secret=this._loginConfig.secret,e.uid=this._loginConfig.uid,b8e.NetSender.getBytes().writeProtobuf(e);var t=game.pb.ProtoId.AuthReq;b8e.sendN(t)},_onReceiveGateAuthResponse:function(e){var t=this,n=e.readProtobuf(game.pb.AuthResponse);if(0!=n.code){t._loginConfig.msgCode=n.code;var a=game.ServerCodeCfg.get(n.code);if(10==n.code)return b8e.log("\u5e10\u53f7\u88ab\u9876"),void game.sdk.logout(!1,a);t._onServerError(a)}else{var i=game.pb.QueryRoleRequest;i.zone=t._loginConfig.serverId,i.device=t._loginConfig.getDeviceInfo();var o=game.LoginConfig.getOpenGameLimit();i.fcm=o?t._loginConfig.fcm:0,b8e.NetSender.getBytes().writeProtobuf(i);var r=game.pb.ProtoId.QueryRoleReq;b8e.sendN(r),game.heartBeat.startHeartBeat()}},_onReceiveQryHasRoleResponse:function(e){var t=this,n=e.readProtobuf(game.pb.QueryRoleResponse);if(0==n.code)n.role?(t._reconnect.isCanLoginAgain=!0,t._tryAgainCount=0,t._loginConfig.heroData=n.role,t._loginConfig.oleRole=t._loginConfig.hasHeroData=!0,t._reconnect.isLoginAgain&&(game.SceneEffectMgr&&game.SceneEffectMgr.inst()&&game.SceneEffectMgr.inst().stop(),game.SceneGEvts&&b8e.evt.dptG(game.SceneGEvts.CLEAR_SCENE),game.mainRoleData&&(game.mainRoleData.mapId=n.role.map))):t._loginConfig.showTip=1,t.completeProcess();else{var a=game.ServerCodeCfg.get(n.code);t._onServerError(a,!1)}},_onGateSocketError:function(){b8e.log("main socket Error"),this._onGateConnectionClosed()},_onTimeOut:function(){this._reconnect.onTimeOut()},_onGateConnectionClosed:function(){b8e.log("main socket close"),b8e.isWeChatGame?b8e.setTimeout(this._onGateClosed,this,1e3):this._onGateClosed()},_onGateClosed:function(){var e=this;e._codeArr||(e._codeArr=[10,11,12,13,14,15]);var t=e._loginConfig.msgCode;if(!(-1<e._codeArr.indexOf(t)))return 10==t?(b8e.log("\u5e10\u53f7\u88ab\u9876"),void game.sdk.logout(!1,game.ServerCodeCfg.get(t))):void(e._reconnect.isCanLoginAgain?(b8e.log("main socket Reconnect1"),e._reconnect.tryReconnect()):(b8e.log("main socket Connect error"),e._onServerError(game.LanguageData.get(15))))},_onServerError:function(e,t){var n=!(1<arguments.length&&void 0!==t)||t;this._reconnect.reconnectClosed=!0,this._reconnect.isLoginAgain=!1,this._reconnect.isCanLoginAgain=!1,n&&b8e.net.closeConnection(),b8e.layer.hideLoading();var a={msg:e,btn:game.LanguageData.get(28),thisArg:this,okcb:function(){game.sdk.logout(!0)},cancelcb:function(){game.sdk.logout(!0)},showtips:!1,isTouchClose:!1},i=b8e.layer.getTopLayer();game.alert.show(a,i)}}),b8e.RC("$$game","$$ServerConnect",e)}(),function(){var e;e=b8e.BaseProcess.extends({_serverListNet:null,ctor:function(){this._super(),this._serverListNet=b8e.NetMgr.createMgr("serverList")},getState:function(){return game.BaseProcessTypes.SERVER_LIST},processHandler:function(e){game.loadingPage.setProgress(e)},startProcess:function(){var s=this;s._super(),game.loadingPage.show(),game.loadingPage.setPromptText(game.LanguageData.get(6)),s.setProcessPercent(1,3e3);var e={$$uid:game.LoginConfig.uid};s._serverListNet.requestData(game.LoginConfig.serverListUrl,e,function(e,t){if(e)b8e.error(e);else if(t&&0==t.code){var n=t.data.all_logged_in,a=t.data.groups;s.setServerListData(t.data);var i=game.zone.allClose,o=game.LoginConfig.needVerify;if(game.zone.canCreateRole()&&!o&&!i&&(!n||n.length<=0)&&a&&0<a.length)game.LoginConfig.showTip=1,r=game.LanguageData.get(7),game.loadingPage.setPromptText(r),s.onSelectServer(t.data.recommended),game.sdk.serverChooseLog();else{game.LoginConfig.showTip=2,r=game.LanguageData.get(8),game.loadingPage.setPromptText(r);b8e.res.loadBatchRes([],s.onResComplete,s)}s.checkFW()}else{var r=game.LanguageData.get(32)+t.msg;b8e.Toast.launch(r,4294901760,0)}},s,null,!0,{struct:{$$code:!0,$$msg:!0,$$data:{$$all_logged_in:[],$$groups:[{$$group_name:!0,$$list:[{$$id:!0,$$name:!0,$$state:!0}]}],$$recommended:!0}},isJson:!0})},checkFW:function(){if(112477==game.LoginConfig.gameChannelId){if(this._floatingwindow||(this._floatingwindow=new game.FloatingWindow),!this._floatingwindow.parent)b8e.layer.getTopLayer().addChild(this._floatingwindow)}},setServerListData:function(e){game.zone.setData(e);var t=this,n=game.zone.getServerList(),a=game.zone.getRecommededInfo();t._serverListView&&(t._serverListView.data={serverList:n,recommededInfo:a,onSelectServer:t.onSelectServer,thisArg:t},t._serverListView.onRefresh())},onSelectServer:function(e){if(!game.zone.getIsLoggedIn(e)){var t=game.zone.canCreateRole(),n=game.zone.getServerInfoById(e);if(!n)return;if(n.state==game.ZoneStateType.FULL_ZONE)return void game.alert.showMsg(game.LanguageData.get(115));if(!t)return void game.alert.showMsg(game.LanguageData.get(116))}b8e.layer.showLoading(game.LanguageData.get(9));var o=this,a={$$uid:game.LoginConfig.uid,$$server_id:e};o._serverListNet.requestData(game.LoginConfig.serverSelectUrl,a,function(e,t){if(e)b8e.error(e);else if(t&&0==t.code){game.LoginConfig.serverId=t.data.server_id;var n=game.zone.getServerList();if(n){var a=n.get(t.data.server_id);game.LoginConfig.serverName=a.name}game.LoginConfig.token=t.data.token,game.LoginConfig.loginAddr=t.data.login_addr,b8e.layer.hideLoading(),o.completeProcess()}else{var i=t.msg;b8e.Toast.launch(i,4294901760)}},o,null,!0,{struct:{$$code:!0,$$msg:!0,$$data:{$$server_id:!0,$$token:!0,$$login_addr:!0}},isJson:!0})},onResComplete:function(e,t,n,a){var i=this;if(n==a&&!i._serverListView){var o=game.zone.getServerList(),r=game.zone.getRecommededInfo(),s=b8e.layer.getGuiBottomLayer();i._serverListView=new game.ServerListView,i._serverListView.data={serverList:o,recommededInfo:r,onSelectServer:i.onSelectServer,thisArg:i},s.addChild(i._serverListView),game.sdk.serverChooseLog(),game.JunHaiSdk.completeProgress(),i.recordLostTime(),setTimeout(function(){game.baseProcess.preload()},200)}},completeProcess:function(){var e=this;e._serverListView&&(e._serverListView.removeFromParent(),e._serverListView.destroy(),e._serverListView=null),game.JunHaiSdk.completeProgress(),e._super()}}),b8e.RC("$$game","$$ServerList",e)}(),function(){var s=game.JunHaiSdk=function(){};s.user_id=0,s.token=0,s.game_id=0,s.shareEvtEnum=null,s.shareList=["","",""],s.shareTitle="",s.isOpenYYPay=!1,s.loadingBool=!1;var g=b8e.getFPV(window,"MirInterRuntime"),l=game.LoginConfig;s.init=function(e,t){if(s._onSdkInited={callback:e,thisArg:t},b8e.isWeChatGame||b8e.params.isQuickGame||b8e.params.isUcGame)l.canShare=!0,s.sdkInit(),b8e.log("\u767b\u5f55  login\xb7\xb7\xb7\xb7\xb7\xb7\xb7");else{var n=void 0;n="//static.ijunhai.com/mir/MirInterRuntimeV2.js",s.loadScript(b8e.getProtocol()+n)}if(window.addEventListener("MIR_JH",function(e){if(e.data){var t=b8e.getFPV(e,"data");switch(b8e.getFPV(t,"action")){case"showMessage":game.alert.showMsg(b8e.getFPV(t,"msg"));break;case"share":"success"==b8e.getFPV(t,"result")&&s.shareEvtEnum&&b8e.evt.dptG(s.shareEvtEnum);break;case"desktop":"success"==b8e.getFPV(t,"result")&&b8e.evt.dptG(game.VerifyAwardGEvts.ADD_SHORTCUT_SUCCESS);break;case"gift":b8e.getFPV(t,"result");break;case"certification":"success"==b8e.getFPV(t,"result")&&(l.realVerifyComplete=!0,b8e.evt.dptG(game.VerifyAwardGEvts.REAL_NAME_SUCCESS));break;case"certificationChange":var n=b8e.getFPV(t,"result");if(n&&1==n.code&&n.data){var a=b8e.getFPV(n,"data"),i=b8e.getFPV(a,"age");game.sdk.checkFcm(!1,i)}break;case"follow":"success"==b8e.getFPV(t,"result")&&(l.canFocus=!0,l.isFocus=!0,b8e.evt.dptG(game.VerifyAwardGEvts.FOCUS_SUCCESS));break;case"balanceChange":case"foreGround":case"backGround":break;case"client":"success"==b8e.getFPV(t,"result")&&(l.canDownloadMicro=!0,l.isMicroLogin=!0,b8e.evt.dptG(game.VerifyAwardGEvts.DOWNLOAD_MICRO_CLIENT_SUCCESS));break;case"bindphone":"success"==b8e.getFPV(t,"result")&&(l.canBindPhone=!0,l.isBindMobile=!0,b8e.evt.dptG(game.VerifyAwardGEvts.BIND_MOBILE_SUCCESS));break;case"logout":"success"==b8e.getFPV(t,"result")&&b8e.startup.reload()}}}),game.IS_WANBA){s.setScreenStatus(),l.openApplePay=!0;var a=s.getPlatform();l.isApplePay=2==a&&l.openApplePay;var i=s.getGiftId();i&&(l.wanbaGiftId=0|i)}},s.loadScript=function(e){game.loadingPage.setPromptText("\u6b63\u5728\u521d\u59cb\u5316\u4e2d..."),b8e.res.loadScript(e,function(e,t){s.sdkInit()},s,!0)};var a=null;function i(e){var t=s.shareList.length,n=Math.random()*t>>0,a=b8e.res.getResVersion(),i="/res/images/image/yunyouShare/"+n+"."+a+".img.jpg";game.IS_YUNYOU_MZ&&(i="/res/images/image/yunyouShare/yunyouMZ/"+n+"."+a+".img.jpg"),i=b8e.params.remoteServerRoot+i,e.title=s.shareList[n],e.img_url=i}s.setNotchScreenHeight=function(){if(g&&b8e.getFPV(g,"getNotchScreenHeight")){var e=b8e.getFPV(g,"getNotchScreenHeight")();if(e){var t=b8e.getFPV(e,"notchSize")||0;b8e.setNotchScreenHeight(t),b8e.updateStageSize()}}else console.log("== getNotchScreenHeight undefined ==")},s.sdkInit=function(){g=b8e.getFPV(window,"MirInterRuntime");if(game.loadingPage.setPromptText("\u6b63\u5728\u521d\u59cb\u5316\u4e2d..."),b8e.isWeChatGame&&(game.IS_YUNYOU||game.IS_YUNYOU_MZ)){var e={$$shareinfo:a={},$$agent_domain:"agent1.ijunhai.com"};b8e.JsUtil.applyAlias(e,!0),i(a);b8e.getFPV(g,"junhai_init")(function(e){1==b8e.getFPV(e,"ret")?(l.canShare=!0,s._onSdkInited.callback.call(s._onSdkInited.thisArg),b8e.log("\u767b\u5f55  login\xb7\xb7\xb7\xb7\xb7\xb7\xb7")):b8e.error("SDK init Error:"+e.ret+":"+e.msg)},e,function(e){b8e.log(e)})}else{var t=game.channelInfo.share_info;t?b8e.params&&b8e.params.remoteServerRoot&&(t.img_url=b8e.params.remoteServerRoot+"/"+t.img_url,t.qzone_img_url=b8e.params.remoteServerRoot+"/"+t.qzone_img_url):t={};var n={$$shareinfo:t,$$agent_domain:"agent1.ijunhai.com"};b8e.JsUtil.applyAlias(n,!0),b8e.getFPV(g,"junhai_init")(function(e){1==b8e.getFPV(e,"ret")?(game.IS_HUDIE&&hgameSdk&&hgameSdk.loadingProgress(0),s.checkRefreshFunc(),b8e.getFPV(g,"check_h5_login_bg")&&(l.changeLoginBg=b8e.getFPV(g,"check_h5_login_bg")(),l.changeLoginBg&&b8e.getFPV(g,"h5_login_bg")(function(e){var t=b8e.getTimer();l.loginBgType=b8e.getFPV(e,"login_bg_type"),l.loginBgUrl=b8e.getFPV(e,"login_bg_url")+"?V"+t,l.loadBgType=b8e.getFPV(e,"load_bg_type"),l.loadBgUrl=b8e.getFPV(e,"load_bg_url")+"?V"+t,l.logoType=b8e.getFPV(e,"logotype"),l.logoUrl=b8e.getFPV(e,"logo_url")+"?V"+t})),l.isQQWeChatGame=game.IS_WANBA&&b8e.isWeChatGame&&b8e.getFPV(g,"h5_get_balance"),s._onSdkInited.callback.call(s._onSdkInited.thisArg)):b8e.error("SDK init Error:"+e.ret+":"+e.msg)},n)}},s.getJumpurl=function(){return window.OPEN_DATA?window.OPEN_DATA.jumpurl:""},s.getAppicon=function(){return window.OPEN_DATA?window.OPEN_DATA.appicon:""},s.getBanner=function(){return window.OPEN_DATA?window.OPEN_DATA.appicon:""},s.requestRechargeSignature=function(a,i,o,r,e){var t=JSON.stringify(o),n={$$extra:JSON.stringify(r),$$order:t,$$game_id:s.game_id+"",$$time:e+"",$$user_id:s.user_id+""};game.sdk.sdkNet.requestData(l.junhaiRechargeSign,n,function(e,t){if(e)b8e.error(e),b8e.Toast.launch("\u8bf7\u6c42\u7b7e\u540d IO\u9519\u8bef",4294901760);else if(0==t.code){var n=t.data;a.call(i,n.signature,o,r)}else b8e.Toast.launch("\u8bf7\u6c42\u7b7e\u540dError:"+t.code+":"+t.msg,4294901760),b8e.error("\u8bf7\u6c42\u7b7e\u540dError:"+t.code+":"+t.msg)},s,null,!0,{struct:{$$code:!0,$$msg:!0,$$data:{$$signature:!0}},isJson:!0})},s.login=function(o,r){game.loadingPage.setPromptText("\u6b63\u5728\u8fdb\u884c\u8d26\u53f7\u767b\u5f55...");b8e.getFPV(g,"h5_login")(function(e){if(1==b8e.getFPV(e,"ret")){var a=b8e.getFPV(e,"content");s.user_id=b8e.getFPV(a,"user_id"),l.userId=s.user_id+"",s.token=b8e.getFPV(a,"token"),s.game_id=b8e.getFPV(a,"game_id"),l.channelId=b8e.getFPV(a,"channel_id"),l.gameChannelId=b8e.getFPV(a,"game_channel_id"),l.time=b8e.getFPV(a,"time"),l.lH5Sign=b8e.getFPV(a,"l_h5_sign"),l.sessionId=b8e.getFPV(a,"session_id");var t=0|l.gameChannelId;if(114276==t&&b8e.os===b8e.OS.IOS&&b8e.isWeChatGame&&(game.RECHARGE_PLATFORM=game.RechargePlatformType.IOS_WECHATGAME),b8e.isWeChatGame){var n=b8e.getFPV(g,"check_h5_pay")?b8e.getFPV(g,"check_h5_pay")():null,i=b8e.getFPV(n,"can_pay");n&&void 0!==i&&(game.RECHARGE_PLATFORM=i?game.RechargePlatformType.COMMON:game.RechargePlatformType.IOS_WECHATGAME)}if(111779==t&&(l.canAddShortcut=!1),l.needVerify=game.GlobalCfg.getNeedVerify(t),l.needVerify)if(b8e.getFPV(g,"h5_get_certification_info")){b8e.getFPV(g,"h5_get_certification_info")(function(e){if(e){switch(b8e.getFPV(e,"code")){case 1:var t=b8e.getFPV(e,"data");l.needVerify=!0,l.clientFcm=!1;var n=l.age=b8e.getFPV(t,"age");game.sdk.checkFcm(!1,n),b8e.getFPV(g,"check_h5_certification")&&b8e.getFPV(g,"check_h5_certification")()&&b8e.getFPV(g,"h5_certification")();break;case 2:case 3:l.needVerify=!0,l.clientFcm=!0;break;default:l.needVerify=!1,l.fcm=0}s.GameLogin(a,l.needVerify,o,r)}else s.GameLogin(a,l.needVerify,o,r)})}else l.clientFcm=!0,s.GameLogin(a,l.needVerify,o,r);else s.GameLogin(a,l.needVerify,o,r)}else{game.loadingPage.setErrorText("\u6e38\u620f\u8d26\u53f7\u767b\u5f55\u9519\u8bef\uff1a"+b8e.getFPV(e,"ret")+":"+b8e.getFPV(e,"msg")),b8e.error("SDK login Error:"+b8e.getFPV(e,"ret")+":"+b8e.getFPV(e,"msg"))}})},s.GameLogin=function(e,t,i,o){var n={$$pfid:l.pfid,$$detail:{$$game_channel_id:b8e.getFPV(e,"game_channel_id")+"",$$user_id:s.user_id+"",$$channel_id:b8e.getFPV(e,"channel_id")+"",$$time:b8e.getFPV(e,"time")+"",$$sign:b8e.getFPV(e,"l_h5_sign")+"",$$session_id:b8e.getFPV(e,"session_id")?b8e.getFPV(e,"session_id")+"":"",$$access_token:b8e.getFPV(e,"token")},$$need_verify:l.needVerify};game.loadingPage.setPromptText("\u6b63\u5728\u8fdb\u884c\u8d26\u53f7\u767b\u5f55..."),game.sdk.sdkNet.requestData(l.loginUrl,n,function(e,t){if(e)b8e.error(e);else{if(0==t.code){var n=t.data;if(l.uid=n.uid,l.channelId=n.channel_id,l.newAccount=n.new_account,l.needVerify&&l.clientFcm){var a=-1==n.verify;l.hasRealVerify=!a,l.realVerifyComplete=!a,game.sdk.checkFcm(a,n.verify)}}else game.loadingPage.setErrorText("\u8d26\u53f7\u767b\u5f55\u9519\u8bef\uff1a"+t.code+":"+t.msg),b8e.error("SDK login Error:"+t.code+":"+t.msg);s.completeProgress(),i.call(o,t.code)}},s,null,!0,{struct:{$$code:!0,$$data:{$$uid:!0,$$channel_id:!0,$$new_account:!0,$$verify:!0}},isJson:!0})},s.lockTime=0,s.pay=function(e){var t=game.SysTime.unixTime;if(b8e.getFPV(g,"check_h5_pay")){var n=b8e.getFPV(g,"check_h5_pay")(),a=e.payment_amount;if(a<n.min_payment||n.max_payment&&a>n.max_payment)b8e.Toast.launch("\u8d85\u51fa\u5145\u503c\u9650\u989d\uff01",4294901760);else if(s.lockTime>game.SysTime.curTime)b8e.warn("\u5145\u503c\u64cd\u4f5c\u8fc7\u4e8e\u9891\u7e41");else{s.lockTime=game.SysTime.curTime+1e3;var i=100*e.payment_amount,o={$$uid_in_game:e.role_id,$$user_name_in_game:e.roleName,$$order_id:e.game_payorder,$$callback_url:l.rechargeCallbackUrl,$$product_name:e.object_name,$$product_id:e.item_id,$$server_id:e.game_server,$$pay_money:i,$$product_count:e.product_count};b8e.JsUtil.applyAlias(o,!0);var r={$$game_area:e.game_area,$$rgrade:e.role_level,$$desc:e.desc,$$user_id:s.user_id,$$time:t,$$token:s.token};b8e.JsUtil.applyAlias(r,!0),s.requestRechargeSignature(function(e,t,n){b8e.getFPV(g,"h5_pay")(t,n,e,function(e){if(game.GlobalCfg.getShowQrcode(+game.LoginConfig.gameChannelId)){var t=b8e.getFPV(e,"response");if(t&&0==b8e.getFPV(t,"code")&&b8e.getFPV(t,"qrcode"))if(111491==+game.LoginConfig.gameChannelId){var n=b8e.getFPV(t,"qrcode")+"";b8e.isWeChatGame&&wx.previewImage&&wx.previewImage({current:n,urls:[n]})}else game.rechargeData.qrcode=t.qrcode,game.module.show(game.ME.QrcodeView)}else 0==b8e.getFPV(e,"ret")&&b8e.error("SDK pay Error:"+b8e.getFPV(e,"ret")+":"+b8e.getFPV(e,"msg"))})},s,o,r,t)}}},s.logout=function(){if(b8e.getFPV(g,"check_h5_logout"))if(b8e.getFPV(g,"check_h5_logout")()){var e={$$user_id:s.user_id+"",$$token:s.token+""};b8e.JsUtil.applyAlias(e,!0),b8e.getFPV(g,"h5_logout")(e,function(e){1==b8e.getFPV(e,"ret")?b8e.startup.reload():b8e.error("SDK logout Error:"+b8e.getFPV(e,"ret")+":"+b8e.getFPV(e,"msg"))})}else b8e.startup.reload();else b8e.startup.reload()},s.share=function(e){if(b8e.getFPV(g,"check_h5_share")){var t=b8e.getFPV(g,"check_h5_share")();if(t)if(t&&3==b8e.getFPV(t,"share_type")&&game.ShareArrow)s._shareArrow||(s._shareArrow=new game.ShareArrow),s._shareArrow.parent||b8e.layer.getTopLayer().addChild(s._shareArrow);else s.shareEvtEnum=e,b8e.isWeChatGame&&(game.IS_YUNYOU||game.IS_YUNYOU_MZ)?s.onShare4Yunyou():b8e.isWeChatGame&&(game.IS_BAIZE2||game.IS_BAIZE3)?(a=s.baize2SetShareInfo(a),s.baizeShareInfo||(s.baizeShareInfo={}),s.baizeShareInfo.shareinfo=a,b8e.getFPV(g,"h5_share")(s.baizeShareInfo,function(){})):b8e.getFPV(g,"h5_share")(),b8e.isWeChatGame&&game.IS_WANBA&&s.shareEvtEnum&&b8e.evt.dptG(s.shareEvtEnum)}},s.supportLogout=function(){return!!b8e.getFPV(g,"check_h5_logout")&&!!b8e.getFPV(g,"check_h5_logout")()},s.getLogBaseData=function(e,t){var n={$$action:e,$$user_id:s.user_id,$$role_id:t.role_id,$$role_name:t.role_name,$$server:t.server_id,$$area:t.area,$$is_new:t.is_new?1:0,$$fight:t.score,$$server_name:t.server_name,$$party_name:t.party_name};return b8e.JsUtil.applyAlias(n,!0),n},s.enterGameLog=function(e){var t={};b8e.isWeChatGame||b8e.params.isQuickGame||(t=document.createEvent("HTMLEvents")).initEvent("MIR_JH_ANALYSIS_FROM_CP",!1,!1);var n=s.getLogBaseData("loginEvent",e),a={$$level:e.level,$$vip_level:e.vip_level,$$golds:e.golds,$$score:e.score,$$fight:e.score,$$role_create_time:e.role_create_time,$$role_update_time:e.role_update_time};b8e.JsUtil.applyAlias(a,!0);var i={$$action:"loginEvent",$$base_data:n,$$extend_data:a};if(b8e.JsUtil.applyAlias(i,!0),t.data=i,b8e.isWeChatGame||b8e.params.isQuickGame){if(!b8e.getFPV(g,"cp_notify_junhai"))return;b8e.getFPV(g,"cp_notify_junhai")(t);var o=b8e.getFPV(g,"check_h5_pay")();b8e.setTimeout(function(){o=b8e.getFPV(g,"check_h5_pay")(),s.isOpenYYPay=o.can_pay},this,5e3)}else window.dispatchEvent(t)},s.levelUpLog=function(e){var t={};b8e.isWeChatGame||b8e.params.isQuickGame||(t=document.createEvent("HTMLEvents")).initEvent("MIR_JH_ANALYSIS_FROM_CP",!1,!1);var n=s.getLogBaseData("levelEvent",e),a={$$level:e.level,$$vip_level:e.vip_level,$$golds:e.golds,$$score:e.score,$$fight:e.score,$$role_create_time:e.role_create_time,$$role_update_time:e.role_update_time};b8e.JsUtil.applyAlias(a,!0);var i={$$action:"levelEvent",$$base_data:n,$$extend_data:a};if(b8e.JsUtil.applyAlias(i,!0),t.data=i,(b8e.isWeChatGame||b8e.params.isQuickGame)&&b8e.getFPV(g,"cp_notify_junhai")){b8e.getFPV(g,"cp_notify_junhai")(t);var o=b8e.getFPV(g,"check_h5_pay")();s.isOpenYYPay=o.can_pay}else window.dispatchEvent(t)},s.payLog=function(e,t){var n=void 0;b8e.isWeChatGame||b8e.params.isQuickGame||(n=document.createEvent("HTMLEvents")).initEvent("MIR_JH_ANALYSIS_FROM_CP",!1,!1),n=n||{};var a=s.getLogBaseData("payEvent",e),i={$$consume_coin:t.consume_coin,$$consume_bind_coin:t.consume_bind_coin,$$remain_coin:t.remain_coin,$$remain_bind_coin:t.remain_bind_coin,$$item_count:t.item_count,$$item_name:t.item_name,$$item_desc:t.item_desc};n.data={$$action:"payEvent",$$base_data:a,$$extend_data:i},b8e.JsUtil.applyAlias(n.data,!0),window.dispatchEvent(n)},s.addShortcut=function(e,t){if(b8e.getFPV(g,"check_h5_desktop")&&b8e.getFPV(g,"check_h5_desktop")()){game.IS_WANBA&&b8e.os===b8e.OS.IOS&&b8e.evt.dptG(game.VerifyAwardGEvts.ADD_SHORTCUT_SUCCESS);var n={$$title:"",$$game_url:s.getJumpurl(),$$pic_url:s.getAppicon()};b8e.JsUtil.applyAlias(n),b8e.getFPV(g,"h5_desktop")(n,null)}},s.openInterestTribeUrl=function(){game.IS_WANBA},s.sendGamebarMsg=function(i){var o=1<arguments.length&&void 0!==arguments[1]?arguments[1]:3,e={$$open_id:s.getOpenid()+"",$$open_key:s.getOpenkey()+"",$$pf:s.getPf()+""},t=game.LoginConfig.wanbaFriendsUrl;game.sdk.sdkNet.requestData(t,e,function(e,t){if(e)b8e.error("\u83b7\u53d6\u5173\u7cfb\u94feIO\u9519\u8bef\uff1a"+e);else if(0==t.code){t.msg;if(t.data)t.data.items.forEach(function(e){var t=e.openid;b8e.log("SDK sendFriend frdOpenId:"+t);var n={$$open_id:s.getOpenid()+"",$$open_key:s.getOpenkey()+"",$$pf:s.getPf()+"",$$frd:t,$$msgtype:o,$$content:i,$$qua:s.getQua()};b8e.JsUtil.applyAlias(n);var a=game.LoginConfig.wanbaSendMsgUrl;game.sdk.sdkNet.requestData(a,n,function(e,t){if(e)b8e.error("\u53d1\u9001\u597d\u53cb\u6d88\u606fIO\u9519\u8bef\uff1a"+e);else if(0==t.code)t.msg;else b8e.error("SDK sendGamebarMsg Error:"+t.code+":"+t.msg)},this,null,!0,{struct:{$$code:!0,$$msg:!0},isJson:!0})},this);else b8e.error("SDK sendFriends Error data.data is:"+t.data)}else b8e.error("SDK sendFriends Error:"+t.code+":"+t.msg)},this,null,!0,{struct:{$$code:!0,$$data:{}},isJson:!0})},s.reportRegister=function(){window.reportRegister&&window.reportRegister()},s.reportLogin=function(){window.reportLogin&&window.reportLogin()},s.getGameVipLevel=function(n,a){if(game.IS_WANBA){var e={$$open_id:s.getOpenid()+"",$$open_key:s.getOpenkey()+"",$$pf:s.getPf()+""};b8e.JsUtil.applyAlias(e);var t=game.LoginConfig.wanbaVipLevelUrl;game.sdk.sdkNet.requestData(t,e,function(e,t){e?b8e.error("\u83b7\u53d6\u5c0f\u6e38\u620fvip IO\u9519\u8bef\uff1a"+e):"-1"==t?b8e.error("SDK getGameVipLevel Error:"+t):(game.LoginConfig.wanBaGameVipLevel=parseInt(t),b8e.log("\u73a9\u5427\u6e38\u620fVIP Level:"+game.LoginConfig.wanBaGameVipLevel),n&&n.call(a))},this,null,!0,{isJson:!0,dataFormat:b8e.URLLoaderDataFormat.TEXT})}},s.realVerify=function(){b8e.getFPV(g,"check_h5_certification")&&b8e.getFPV(g,"check_h5_certification")()&&b8e.getFPV(g,"h5_certification")()},s.focus=function(){b8e.getFPV(g,"check_h5_follow")&&b8e.getFPV(g,"check_h5_follow")()&&b8e.getFPV(g,"h5_follow")()},s.bindPhone=function(){b8e.getFPV(g,"check_h5_bindphone")&&b8e.getFPV(g,"check_h5_bindphone")()&&b8e.getFPV(g,"h5_bindphone")()},s.downloadMicroClient=function(){b8e.getFPV(g,"check_h5_client")&&b8e.getFPV(g,"check_h5_client")()&&b8e.getFPV(g,"h5_client")()},s.getPlatform=function(){return window.OPEN_DATA?window.OPEN_DATA.platform:0},s.getApp=function(){return window.OPEN_DATA&&window.OPEN_DATA.qua?window.OPEN_DATA.qua.app:""},s.onRegisterWXEvent=function(){wx&&wx.onShow&&wx.onShow(function(e){e&&(l.wxScene=e.scene)})},s.onShare4Yunyou=function(e){e&&(i(e),b8e.getFPV(g,"h5_share")&&b8e.getFPV(g,"h5_share")(e))},s.baize2SetShareInfo=function(e){if(e){s.baizeShareList||(s.baizeShareList=["","",""]);var t=s.baizeShareList.length,n=Math.random()*t>>0,a=b8e.res.getResVersion(),i=b8e.params.remoteServerRoot+"/res/images/image/baize2/"+n+"."+a+".img.jpg";return e.title=s.baizeShareList[n],e.qzone_img_url=i,e}},s.getQua=function(){return window.OPEN_DATA&&window.OPEN_DATA.qua?window.OPEN_DATA.qua.meybeQua:""},s.getPf=function(){if(game.IS_QQ_GAME&&b8e.isWeChatGame){var e=b8e.getFPV(window,"qq");return e.getLaunchOptionsSync().scene?e.getLaunchOptionsSync().scene:0}return window.OPEN_DATA?window.OPEN_DATA.pf:""},s.getOpenkey=function(){return window.OPEN_DATA?window.OPEN_DATA.openkey:""},s.getOpenid=function(){return window.OPEN_DATA?window.OPEN_DATA.openid:""},s.getGiftId=function(){return b8e.getQueryString("GIFT")},s.setScreenStatus=function(){if("SQ"===game.JunHaiSdk.getApp()&&"undefined"!=typeof mqq&&mqq.device&&mqq.device.setScreenStatus){mqq.device.setScreenStatus({status:1},function(e,t){b8e.log("result"+e+"message"+t)})}},s.openXinyueUrl=function(){game.IS_WANBA&&"xinYueClub"==game.JunHaiSdk.getApp()&&"undefined"!=typeof mqq&&mqq.ui&&mqq.ui.openUrl&&mqq.ui.openUrl({url:"http://xinyue.qq.com/act/a20181130xyh5game/index.html",target:1,style:1,callback:function(){b8e.log("\u5fc3\u60a6\u66f4\u591a\u793c\u5305\u8df3\u8f6c\u6210\u529f")}})},s.getCanIShow=function(e){return"undefined"==typeof mqq||(!mqq.data||!mqq.data.canIShow||mqq.data.canIShow(e))},s.wanbaViewCanShow=function(e){return!game.IS_WANBA||s.getCanIShow(e)},s.getChannel=function(){return window&&window.OPEN_DATA?window.OPEN_DATA.channel:""},s.gotoExploreUrl=function(){game.IS_WANBA&&"QQLive"==game.JunHaiSdk.getApp()&&"undefined"!=typeof mqq&&mqq.ui&&mqq.ui.openUrl&&mqq.ui.openUrl({url:"https://iwan.qq.com/fun/mindex?ADTAG=txsp.wd.xyx&hidetitlebar=1&autoplay=1",target:1,style:1,callback:function(){b8e.log("\u817e\u8baf\u89c6\u9891\u524d\u5f80\u63a2\u7d22\u6210\u529f")}})},s.checkSetState=function(){if(l.canFocus=b8e.getFPV(g,"check_h5_follow")&&b8e.getFPV(g,"check_h5_follow")(),l.isSwitch=b8e.getFPV(g,"check_h5_logout")&&b8e.getFPV(g,"check_h5_logout")(),l.canShare=b8e.getFPV(g,"check_h5_share")&&b8e.getFPV(g,"check_h5_share")(),l.canAddShortcut=b8e.getFPV(g,"check_h5_desktop")&&b8e.getFPV(g,"check_h5_desktop")(),l.canBindPhone=b8e.getFPV(g,"check_h5_bindphone")&&b8e.getFPV(g,"check_h5_bindphone")(),l.canDownloadMicro||(l.canDownloadMicro=b8e.getFPV(g,"check_h5_client")&&b8e.getFPV(g,"check_h5_client")()),l.hasRealVerify||(l.hasRealVerify=b8e.getFPV(g,"check_h5_certification")&&b8e.getFPV(g,"check_h5_certification")()),game.IS_QQ_GAME&&b8e.isWeChatGame){b8e.getFPV(g,"setQQGameShowCallback")(s.setQQGameShowCallback);var e=b8e.getFPV(window,"qq");if(!e||!e.getLaunchOptionsSync)return;var t=e.getLaunchOptionsSync();if(!t)return;s.setQQGameShowCallback(t.scene)}},s.setQQGameShowCallback=function(e){var t=game.LoginConfig.isColorTicketIn=1131==e;t&&b8e.evt.dptG(game.VerifyAwardGEvts.ADD_COLOR_TICKET_SUCCESS),(t=game.LoginConfig.isDesktopIn=1023==e)&&b8e.evt.dptG(game.VerifyAwardGEvts.ADD_SHORTCUT_SUCCESS)},s.completeProgress=function(){game.IS_JUNHAI&&game.IS_HUDIE&&hgameSdk&&!s.loadingBool&&(s.loadingBool=!0,hgameSdk.loadingProgress(100))},s.checkRefreshFunc=function(){if(game.IS_JUNHAI){if(!b8e.getFPV(g,"h5_refresh"))return;b8e.getFPV(g,"h5_refresh")&&(b8e.startup.reload=function(){b8e.getFPV(g,"h5_refresh")()})}},s.getQQBalance=function(t,n){if(game.IS_WANBA&&b8e.isWeChatGame&&b8e.getFPV(g,"h5_get_balance")){b8e.getFPV(g,"h5_get_balance")(function(e){1==e.ret?t.call(n,e.content):(t.call(n,0),b8e.error("SDK getQQBalance Error:"+e.ret+":"+e.msg))})}},s.closewebview=function(){b8e.getFPV(g,"h5_closewebview")&&b8e.getFPV(g,"h5_closewebview")()},s.updateFightScoreLog=function(e){if(b8e.isWeChatGame){var t=b8e.getFPV(window,"qq");if(t&&t.setUserCloudStorage){var n={$$qqgame:{$$score:e,$$update_time:game.SysTime.curTime/1e3>>0}};b8e.JsUtil.applyAlias(n);var a={$$key:"power",$$value:JSON.stringify(n)};b8e.JsUtil.applyAlias(a);var i={$$KVDataList:[a],$$success:function(){b8e.log("\u4e0a\u699c\u6210\u529f")},$$fail:function(){b8e.log("\u4e0a\u699c\u5931\u8d25")},$$complete:function(){b8e.log("\u4e0a\u699c\u5b8c\u6210")}};b8e.JsUtil.applyAlias(i),t.setUserCloudStorage(i)}}},s.qqGameExtra=function(e,t){b8e.getFPV(g,"h5_qqgame_extra")&&b8e.getFPV(g,"h5_qqgame_extra")(e,t)},s.subscribeApp=function(){s.qqGameExtra("subscribeAppMsg",function(){})},s.addColorSign=function(){s.qqGameExtra("addColorSign",function(){})},s.userMobileBind=function(e,t,n,a){b8e.getFPV(g,"user_mobile_bind")&&b8e.getFPV(g,"user_mobile_bind")(n,a,e,t)},s.sendMobileCaptcha=function(e,t,n){b8e.getFPV(g,"send_mobile_captcha")&&b8e.getFPV(g,"send_mobile_captcha")(t,n,e)},s.checkMobileBind=function(e,t){b8e.getFPV(g,"check_mobile_bind")&&b8e.getFPV(g,"check_mobile_bind")(e,t)},s.canMobileBind=function(){return!!b8e.getFPV(g,"user_mobile_bind")&&(!!b8e.getFPV(g,"send_mobile_captcha")&&!!b8e.getFPV(g,"check_mobile_bind"))}}();var a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};(function(){var g=game.XuanDongSdk=function(){};g.xdSdk=null,g.wxSceneData=null,g.nickName=null,g.isGuest=null,g.loginPlatform=null,g.has_micro_client=null,g._onSdkInited=null,g.is_share=null,g.is_apple_pay=null,g.is_focus=null,g.is_desktop=null,g.is_switch_account=null,g.is_qqvip=null,g.qqvip=null,g.is_activity=null,g.is_activeApp=!0,g.exchange_type=null,g.is_coupon_remark=!1,g.is_bindphone=!1,g.shareEvtEnum=null;var l=game.LoginConfig;g.init=function(e,t){g._onSdkInited={callback:e,thisArg:t},b8e.isWeChatGame?(g.xdSdk=lib.extend||("undefined"!=typeof xd?xd:null),g.xdSdk?(b8e.params.scene&&"undefined"!==b8e.params.scene&&(g.wxSceneData=JSON.parse(b8e.params.scene)),g.xdSdk.xdInit(),l.canShare=!0,g._onSdkInited.callback.call(g._onSdkInited.thisArg)):b8e.error("\u70ab\u52a8SDK\u672a\u627e\u5230\uff01"),g.onRegisterWXEvent()):g.loadScript(b8e.getProtocol()+"//d.fire2333.com/h5sdkload")},g.onRegisterWXEvent=function(){wx&&wx.onShow&&wx.onShow(function(e){e&&(l.wxScene=e.scene)})},g.loadScript=function(e){var t=game.isApplyApp?"\u6b63\u5728\u521d\u59cb\u5316\u4e2d...":"\u6b63\u5728\u52a0\u8f7dSDK...";game.loadingPage.setPromptText(t),b8e.res.loadScript(e,function(e,t){g.sdkInit()},g,!0)},g.sdkInit=function(){var t=game.isApplyApp?"\u6b63\u5728\u521d\u59cb\u5316\u4e2d...":"\u6b63\u5728\u521d\u59cb\u5316SDK...";if(game.loadingPage.setPromptText(t),"undefined"!=typeof xdGame){try{g.xdSdk=new xdGame({game_id:g.getGameId(),app_id:g.getAppId(),game_key:g.getGameKey(),open_id:g.getOpenId()}),g._onSdkInited.callback.call(g._onSdkInited.thisArg)}catch(e){t=game.isApplyApp?"\u521d\u59cb\u5316\u5931\u8d25...":"\u521d\u59cb\u5316SDK\u5931\u8d25...";game.loadingPage.setErrorText(t),b8e.error("\u521d\u59cb\u5316fire Error:"+e.message)}g.isActiveApp()}else{t=game.isApplyApp?"\u521d\u59cb\u5316\u5931\u8d25...":"\u521d\u59cb\u5316SDK\u5931\u8d25...";game.loadingPage.setErrorText(t),b8e.error("HuoShu SDK Load Error!")}},g.isActiveApp=function(){var e=g.getAppId();"2038"!=e&&"2066"!=e||(document.addEventListener("XLH5SDKbackground",function(e){g.is_activeApp&&(g.is_activeApp=!1,b8e.startup.deactivate())},!1),document.addEventListener("XLH5SDKforeground",function(e){g.is_activeApp||(g.is_activeApp=!0,b8e.startup.activate())},!1),document.addEventListener("XLH5SDKdiamondchanged",function(e){e&&e.data&&(null!=e.data.balance&&(l.coinRemain=e.data.balance),b8e.evt.dptG(game.PayEvents.PAY_EVENT_XIAN_LAI_UPDATE_COIN_REMAIN))},!1))},g.getTicketUserInfo=function(i){game.loadingPage.setPromptText("\u6b63\u5728\u8ba4\u8bc1\u7528\u6237fire...");var e={$$game_id:g.getGameId(),$$app_id:g.getAppId(),$$game_key:g.getGameKey(),$$timestamp:g.getTimestamp(),$$nonce:g.getNonce(),$$ticket:g.getTicket(),$$signature:g.getLoginSignature(),$$login_type:g.getLoginType()};game.sdk.sdkNet.requestData(b8e.getProtocol()+"//game.fire2333.com/user/getticketuserinfo",e,function(e,t){if(e)game.loadingPage.setErrorText("SDK IO\u9519\u8bef"),b8e.error("SDK IO\u9519\u8bef");else if(0==t.code){var n=t.data;l.openId=n.open_id,l.userId=l.openId,g.nickName=n.nickname,g.isGuest=n.is_guest,g.loginPlatform=n.login_platform,i.call()}else{var a="\u7528\u6237\u4fe1\u606f\u9519\u8bef\uff1a"+t.code+":"+t.message;game.loadingPage.setErrorText(a),b8e.error(a)}},g,null,{struct:{$$code:!0,$$message:!0,$$data:{$$open_id:!0,$$nickname:!0,$$is_guest:!0,$$login_platform:!0}}})},g.requestLogSignature=function(i,o){var r=game.SysTime.unixTime,e={$$game_key:g.getGameKey(),$$open_id:l.openId,$$timestamp:r};game.sdk.sdkNet.requestData(l.huoshuLoginSign,e,function(e,t){if(e){b8e.error("\u8bf7\u6c42\u7b7e\u540d IO\u9519\u8bef")}else if(0==t.code){var n=t.data;i.call(o,n.signature,r)}else{var a="\u8bf7\u6c42\u7b7e\u540dError:"+t.code+":"+t.msg;b8e.error(a)}},g,null,!0,{struct:{$$code:!0,$$msg:!0,$$data:{$$signature:!0}},isJson:!0})},g.requestRechargeSignature=function(a,i,e,t,n){var o=game.SysTime.unixTime,r={$$game_id:g.getGameId()+"",$$game_key:g.getGameKey()+"",$$open_id:l.openId+"",$$payment_amount:e+"",$$game_payorder:t+"",$$timestamp:o+"",$$role_id:n+""};game.sdk.sdkNet.requestData(l.huoshuRechargeSign,r,function(e,t){if(e)b8e.error(e),b8e.Toast.launch("\u8bf7\u6c42\u7b7e\u540d IO\u9519\u8bef",4294901760);else if(0==t.code){var n=t.data;a.call(i,n.signature,o)}else b8e.Toast.launch("\u8bf7\u6c42\u7b7e\u540dError:"+t.code+":"+t.msg,4294901760),b8e.error("\u8bf7\u6c42\u7b7e\u540dError:"+t.code+":"+t.msg)},g,null,!0,{struct:{$$code:!0,$$msg:!0,$$data:{$$signature:!0}},isJson:!0})},g.login=function(i,o){var e=game.isApplyApp?"\u6b63\u5728\u8fdb\u884c\u70ab\u52a8\u8d26\u53f7\u767b\u5f55...":"\u6b63\u5728\u8fdb\u884c\u70ab\u52a8SDK\u8d26\u53f7\u767b\u5f55...";if(game.loadingPage.setPromptText(e),b8e.isWeChatGame){if(g.xdSdk){var t=g.getGameId();g.xdSdk.xdLoginWithNoAuth(t,function(e){if("object"==(void 0===e?"undefined":a(e))){var t=game.isApplyApp?"\u70ab\u52a8\u8d26\u53f7\u767b\u5f55\u5b8c\u6210":"\u70ab\u52a8SDK\u8d26\u53f7\u767b\u5f55\u5b8c\u6210";if(game.loadingPage.setPromptText(t),l.openId=e.openid,l.userId=l.openId,l.sessionKey=e.session_key,l.wxOpenId=e.wx_openid,l.shareTitle=e.share_title,l.shareImage=e.share_image,l.isWhite=e.is_w,l.shareList=e.share_list,l.canFocus=1==e.is_show_f,l.isFocus=1==e.is_f,b8e.isWeChatGame){b8e.os===b8e.OS.IOS&&b8e.isWeChatGame&&(1==l.isWhite?game.RECHARGE_PLATFORM=game.RechargePlatformType.COMMON:game.RECHARGE_PLATFORM=game.RechargePlatformType.IOS_WECHATGAME),game.XuanDongSdk.xdSdk.xdonShare(l.shareTitle,l.shareImage,function(e){0==e.code?b8e.scene&&l.isSentReady:b8e.error("SDK xdonShare Error:"+e.code+":"+e.message)})}var n={$$pfid:l.pfid,$$detail:{$$app_id:g.getAppId(),$$open_id:l.openId,$$login_platform:g.loginPlatform,$$nickname:g.nickName}};game.loadingPage.setPromptText("\u6b63\u5728\u8fdb\u884c\u8d26\u53f7\u767b\u5f55..."),game.sdk.sdkNet.requestData(l.loginUrl,n,function(e,t){if(e){var n="\u8d26\u53f7\u767b\u5f55IO\u9519\u8bef";game.loadingPage.setErrorText(n),b8e.error(n)}else{if(0==t.code)l.uid=t.data.uid,l.channelId=t.data.channel_id,l.gameChannelId=t.data.channel_id,l.newAccount=t.data.new_account,l.newAccount&&game.sdk.deviceActive(l.openId);else{var a="\u8d26\u53f7\u767b\u5f55\u9519\u8bef\uff1a"+t.code+":"+t.msg;game.loadingPage.setErrorText(a),b8e.error(a)}i.call(o,t.code)}},g,null,!0,{struct:{$$code:!0,$$msg:!0,$$data:{$$uid:!0,$$channel_id:!0,$$new_account:!0}},isJson:!0})}else{t=game.isApplyApp?"\u70ab\u52a8\u8d26\u53f7\u767b\u5f55\u9519\u8bef\uff1a":"\u70ab\u52a8SDK\u8d26\u53f7\u767b\u5f55\u9519\u8bef\uff1a"+e;game.loadingPage.setErrorText(t),b8e.error(t)}})}}else g.getTicketUserInfo(function(){g.getGameSetting(function(){var e={$$pfid:l.pfid,$$detail:{$$app_id:g.getAppId(),$$open_id:l.openId,$$login_platform:g.loginPlatform,$$nickname:g.nickName}};game.sdk.sdkNet.requestData(l.loginUrl,e,function(e,t){if(e){var n="\u8d26\u53f7\u767b\u5f55IO\u9519\u8bef";game.loadingPage.setErrorText(n),b8e.error(n)}else{if(0==t.code)l.uid=t.data.uid,l.channelId=t.data.channel_id,l.gameChannelId=t.data.channel_id,l.newAccount=t.data.new_account,l.newAccount&&game.sdk.deviceActive(l.openId);else{var a="\u8d26\u53f7\u767b\u5f55\u9519\u8bef\uff1a"+t.code+":"+t.msg;game.loadingPage.setErrorText(a),b8e.error(a)}i.call(o,t.code)}},g,null,!0,{struct:{$$code:!0,$$msg:!0,$$data:{$$uid:!0,$$channel_id:!0,$$new_account:!0}},isJson:!0})})})},g.pay=function(a){g.requestRechargeSignature(function(e,t){var n={game_id:g.getGameId(),game_key:g.getGameKey(),open_id:l.openId,payment_amount:a.payment_amount,original_fee:a.original_fee,game_payorder:a.game_payorder,object_name:a.object_name,desc:a.desc,timestamp:t,nonce:g.getNonce(),game_area:a.game_area,game_server:a.game_server,role_id:a.role_id,role_level:a.role_level,callback_url:l.rechargeCallbackUrl,signature:e,vip_level:a.vip_level,nickname:a.roleName};b8e.isWeChatGame?g.xdSdk.xdPay(n):g.xdSdk.pay(n,function(e){0==e.code||(b8e.Toast.launch("\u5145\u503cError:"+e.code+":"+e.message,4294901760),b8e.error("SDK pay Error:"+e.code+":"+e.message))})},g,a.payment_amount,a.game_payorder,a.role_id)},g.getGameSetting=function(n){game.loadingPage.setPromptText("\u6b63\u5728\u8bbe\u7f6efire...");var e={game_id:g.getGameId(),game_key:g.getGameKey(),app_id:g.getAppId(),open_id:l.openId};g.xdSdk.getGameSetting(e,function(e){if(0==e.code){var t=e.data;g.has_micro_client=t.has_micro_client,1==g.has_micro_client?(l.canDownloadMicro=!0,l.isMicroLogin=!1):2==g.has_micro_client?(l.canDownloadMicro=!0,l.isMicroLogin=!0):(l.canDownloadMicro=!1,l.isMicroLogin=!1),g.is_share=t.is_share,1==g.is_share?l.canShare=!0:l.canShare=!1,g.is_apple_pay=t.is_apple_pay,1==g.is_apple_pay?l.openApplePay=!0:l.openApplePay=!1,game.LoginConfig.isApplePay=b8e.os===b8e.OS.IOS&&game.LoginConfig.openApplePay,g.is_focus=t.is_focus,1==g.is_focus?(l.canFocus=!0,l.isFocus=!1):2==g.is_focus?(l.canFocus=!0,l.isFocus=!0):(l.canFocus=!1,l.isFocus=!1),g.is_desktop=t.is_desktop,1==g.is_desktop?l.canAddShortcut=!0:l.canAddShortcut=!1,g.is_switch_account=t.is_switch_account,1==g.is_switch_account?l.isSwitch=!0:l.isSwitch=!1,1==t.is_realverify?(l.hasRealVerify=!0,l.realVerifyComplete=!1):2==t.is_realverify?(l.hasRealVerify=!0,l.realVerifyComplete=!0):(l.hasRealVerify=!1,l.realVerifyComplete=!1),g.is_qqvip=t.is_qqvip,l.qqvip=t.qqvip,0==g.is_qqvip?l.isQQvip=!1:l.isQQvip=!0,g.is_activity=t.is_activity,l.activityUrl=t.activity_url,0==g.is_activity?l.isActivity=!1:l.isActivity=!0,g.exchange_type=t.exchange_type,0==g.exchange_type?l.isExchangeType=!1:1==g.exchange_type&&(l.isExchangeType=!0),l.exchange_num=t.exchange_num,l.exchange_name=t.exchange_name,g.is_coupon_remark=t.is_coupon_remark,0==g.is_coupon_remark?l.isCouponRemark=!1:1==g.is_coupon_remark&&(l.isCouponRemark=!0),g.is_bindphone=t.is_bindphone,1==g.is_bindphone?(l.isHasBindPhone=!0,l.isBindPhone=!1):2==g.is_bindphone?(l.isHasBindPhone=!0,l.isBindPhone=!0):(l.isHasBindPhone=!1,l.isBindPhone=!1),n.call()}else b8e.error("SDK getGameSetting Error:"+e.code+":"+e.message)})},g.downloadMicroClient=function(){var e={game_id:g.getGameId(),game_key:g.getGameKey(),app_id:g.getAppId()};g.xdSdk.downloadMicroClient(e,function(e){if(0==e.code){var t=new game.GameAlertInfo;t.alertType=game.GameAlertType.OneBtn,t.string="\u8bf7\u8fdb\u5165\u5fae\u7aef\u9886\u53d6\u5956\u52b1\uff01",t.isShowTips=!1,game.gameAlert.showAlert(g,null,t)}else b8e.error("SDK downloadMicroClient Error:"+e.code+":"+e.message)})},g.share=function(e){g.shareEvtEnum=e;function t(e){0==e.code&&g.shareEvtEnum&&b8e.evt.dptG(g.shareEvtEnum)}var n={game_id:g.getGameId(),game_key:g.getGameKey(),app_id:g.getAppId(),title:game.shareAchievementData.getShareTitle(),pt:g.getPt(),url:"",message:game.shareAchievementData.getShareMessage(),imgurl:""};if(b8e.isWeChatGame){var a=l.shareList.length,i=Math.random()*a>>0,o=l.shareList[i],r=l.shareTitle,s=l.shareImage;o&&(r=o.share_title,s=o.share_image),g.xdSdk.xdShare(r,s,t)}else g.xdSdk.share(n,t)},g.addShortcut=function(){g.xdSdk.saveToDesktop(function(e){0==e.code?b8e.evt.dptG(game.VerifyAwardGEvts.ADD_SHORTCUT_SUCCESS):b8e.error("SDK addShortcut Error:"+e.code+":"+e.message)})},g.switchAccount=function(){},g.serverChooseLog=function(){g.requestLogSignature(function(e,t){var n={game_id:g.getGameId(),game_key:g.getGameKey(),app_id:g.getAppId(),open_id:l.openId,timestamp:t,signature:e};b8e.isWeChatGame||g.xdSdk.serverChooseLog(n,function(){})},g)},g.enterGameLog=function(a){g.requestLogSignature(function(e,t){var n={game_id:g.getGameId(),game_key:g.getGameKey(),app_id:g.getAppId(),open_id:l.openId,timestamp:t,role_id:a.role_id,nickname:a.role_name,level:a.level,vip_level:a.vip_level,area:a.area,server_id:a.server_id,is_new:a.is_new,score:a.score,role_level_reborn:a.role_level_reborn,signature:e};b8e.isWeChatGame?g.xdSdk.xdEnterGameLog(n):g.xdSdk.enterGameLog(n,function(){})},g)},g.stepLog=function(a){g.requestLogSignature(function(e,t){var n={game_id:g.getGameId(),game_key:g.getGameKey(),app_id:g.getAppId(),open_id:l.openId,timestamp:t,role_id:a.role_id,area:a.area,server_id:a.server_id,progress:a.progress,signature:e};b8e.isWeChatGame||g.xdSdk.stepLog(n,function(){})},g)},g.createRoleLog=function(a){g.requestLogSignature(function(e,t){var n={game_id:g.getGameId(),game_key:g.getGameKey(),app_id:g.getAppId(),open_id:l.openId,timestamp:t,role_id:a.role_id,nickname:a.role_name,area:a.area,server_id:a.server_id,signature:e};b8e.isWeChatGame?g.xdSdk.xdCreateRoleLog(n):g.xdSdk.createRoleLog(n,function(){})},g)},g.levelUpLog=function(a){g.requestLogSignature(function(e,t){var n={game_id:g.getGameId(),game_key:g.getGameKey(),app_id:g.getAppId(),open_id:l.openId,timestamp:t,role_id:a.role_id,nickname:a.role_name,area:a.area,server_id:a.server_id,level:a.level,role_level_reborn:a.role_level_reborn,score:a.score,vip_level:a.vip_level,signature:e};b8e.isWeChatGame?g.xdSdk.xdLevelUpLog(n):g.xdSdk.levelUpLog(n,function(){})},g)},g.msgSecCheck=function(e,t,n){g.xdSdk.xdMsgSecCheck?g.xdSdk.xdMsgSecCheck(g.getGameId(),e,function(e){t.call(n,1==e)}):t.call(n,!0)},g.processLog=function(a){g.requestLogSignature(function(e,t){var n={game_id:g.getGameId(),game_key:g.getGameKey(),app_id:g.getAppId(),open_id:l.openId,timestamp:t,role_id:a.role_id,nickname:a.role_name,area:a.area,server_id:a.server_id,level:a.level,process:a.process,signature:e};b8e.isWeChatGame||g.xdSdk.processLog(n,function(){})},g)},g.updateFightScoreLog=function(i){g.requestLogSignature(function(e,t){if(b8e.isWeChatGame){var n={wxgame:{score:i.score,update_time:t}},a={KVDataList:[{key:"fight",value:JSON.stringify(n)}],success:function(){b8e.log("\u4e0a\u699c\u6210\u529f")},fail:function(){b8e.log("\u4e0a\u699c\u5931\u8d25")},complete:function(){b8e.log("\u4e0a\u699c\u5b8c\u6210")}};wx.setUserCloudStorage(a)}},g)},g.sceneLog=function(e){},g.NewOpenGameVIPService=function(){if(g.xdSdk){g.xdSdk.NewOpenGameVIPService(function(){})}else b8e.error("NewOpenGameVIPService,SDK\u672a\u521d\u59cb\u5316\u6210\u529f\uff01")},g.focus=function(t){b8e.isWeChatGame||g.xdSdk.focus(function(e){0==e.code?t.call():b8e.error("SDK focus Error:"+e.code+":"+e.message)})},g.isFocus=function(){if(!b8e.isWeChatGame)return game.LoginConfig.isFocus;g.xdSdk.xdisFocus(l.gameId,l.openId,function(e){l.isFocus=1==e,b8e.evt.dptG(game.VerifyAwardGEvts.FOCUS_SUCCESS)})},g.sdkBindPhone=function(t){b8e.isWeChatGame||g.xdSdk.sdkBindPhone(function(e){0==e.code?t.call():b8e.error("SDK sdkBindPhone Error:"+e.code+":"+e.message)})},g.realVerify=function(){b8e.isWeChatGame||g.xdSdk.realVerify(function(e){0==e.code?(l.realVerifyComplete=!0,b8e.evt.dptG(game.VerifyAwardGEvts.REAL_NAME_SUCCESS)):b8e.error("SDK realVerify Error:"+e.code+":"+e.message)})},g.getCoinRemain=function(){g.xdSdk.getCoinRemain(function(e){0==e.code?l.coinRemain=e.data:b8e.error("SDK getCoinRemain Error:"+e.code+":"+e.message)})},g.getGameId=function(){return b8e.isWeChatGame?"200104":b8e.getQueryString("game_id")},g.getPt=function(){return b8e.isWeChatGame?g.wxSceneData&&g.wxSceneData.pt?g.wxSceneData.pt:"1000":""},g.getAppId=function(){return b8e.isWeChatGame?"2063":b8e.getQueryString("app_id")},g.getOpenId=function(){return b8e.getQueryString("open_id")},g.getGameKey=function(){return b8e.isWeChatGame?"b0be07a2023fb613":b8e.getQueryString("game_key")},g.getTimestamp=function(){return b8e.getQueryString("timestamp")},g.getNonce=function(){return b8e.getQueryString("nonce")},g.getTicket=function(){return b8e.getQueryString("ticket")},g.getLoginSignature=function(){return b8e.getQueryString("signature")},g.getGameUrl=function(){return b8e.getQueryString("game_url")},g.getLoginType=function(){return b8e.getQueryString("login_type")}})(),function(){var a=game.IosSdk=function(){},i=game.LoginConfig;a.bridge=null,a.loginData=null,a.initBridge=function(t,n){(function(e){if(window.WebViewJavascriptBridge)return e(WebViewJavascriptBridge);if(window.WVJBCallbacks)return window.WVJBCallbacks.push(e);window.WVJBCallbacks=[e];var t=document.createElement("iframe");t.style.display="none",t.src="https://__bridge_loaded__",document.documentElement.appendChild(t),setTimeout(function(){document.documentElement.removeChild(t)},0)})(function(e){(a.bridge=e).registerHandler("loginCallback",function(e){a.loginCallback(e)}),e.callHandler("getBuildVersion",null,function(e){t&&n&&t.call(n,e)})})},a.init=function(e,t){e&&t&&e.call(t)},a.login=function(e,t){a.loginOnCallback=e,a.loginThisArg=t,a.bridge&&a.bridge.callHandler("login")},a.loginCallback=function(e){if(1==(a.loginData=e).code)return game.loadingPage.setErrorText("\u8d26\u53f7\u767b\u5f55\u9519\u8bef\uff1a"+e.code+":"+e.msg),void b8e.error("SDK login Error:"+e.code+":"+e.msg);i.BundleIdentifier=e.bundle_id;var t={$$pfid:i.pfid,$$detail:e};game.sdk.sdkNet.requestData(i.loginUrl,t,function(e,t){e?b8e.error(e):(0==t.code?(i.uid=t.data.uid,i.channelId=t.data.channel_id,i.gameChannelId=t.data.game_channel_id,i.newAccount=t.data.new_account,game.loadingPage.setPromptText(i.channelId)):(game.loadingPage.setErrorText("\u8d26\u53f7\u767b\u5f55\u9519\u8bef\uff1a"+t.code+":"+t.msg),b8e.error("SDK login Error:"+t.code+":"+t.msg)),a.loginOnCallback&&a.loginThisArg&&a.loginOnCallback.call(a.loginThisArg,t.code))},a,null,!0,{struct:{$$code:!0,$$data:{$$uid:!0,$$channel_id:!0,$$game_channel_id:!0,$$new_account:!0,$$channelId:!0}},isJson:!0})},a.enterGameLog=function(e){a.bridge&&a.bridge.callHandler("enterGameLog",e)},a.roleInfoChange=function(e){a.bridge&&a.bridge.callHandler("roleInfoChange",e)},a.pay=function(e){if(a.bridge){var t=this;t.keys||(t.keys={}),t.keys.money=e.payment_amount,t.keys.bundleId=i.BundleIdentifier,t._payParams=e;var n=game.IOSRechargeCfg.getData(t.keys.money,t.keys.bundleId,!1,!1);t._payParams.product_id=n?n.productId:"",a.bridge.callHandler("pay",t._payParams)}},a._cfgCallback=function(e){e&&this._payParams},a.logout=function(e){e&&b8e.startup.reload()}}(),function(){var g=game.XuanDong2Sdk=function(){};g.objH5sdk=null,g.wxSceneData=null,g._onSdkInited=null,g.shareEvtEnum=null,g.appid=0;var l=game.LoginConfig;g.init=function(e,t){g._onSdkInited={callback:e,thisArg:t},b8e.isWeChatGame&&(g.objH5sdk=lib.extend||("undefined"!=typeof objH5sdk?objH5sdk:null),g.objH5sdk?(b8e.params.scene&&"undefined"!==b8e.params.scene&&(g.wxSceneData=JSON.parse(b8e.params.scene)),g.sdkInit(),l.canShare=!0):b8e.error("\u70ab\u52a82SDK\u672a\u627e\u5230\uff01"),g.onRegisterWXEvent())},g.onRegisterWXEvent=function(){"undefined"!=typeof wx&&wx.onShow&&wx.onShow(function(e){e&&(l.wxScene=e.scene)})},g.sdkInit=function(){var e=game.isApplyApp?"\u6b63\u5728\u521d\u59cb\u5316\u4e2d...":"\u6b63\u5728\u521d\u59cb\u5316SDK...";game.loadingPage.setPromptText(e);var s={game_id:"4100006",game_key:"5e517c68878851ea",wx_appid:"wxabd8b805e6f39688"};g.objH5sdk.init(s,function e(t){if(408==t.code)g.objH5sdk.init(s,e);else if(0!=t.code){var n="sdk\u521d\u59cb\u5316\u9519\u8bef\uff1a"+t.code+":"+t.msg;game.loadingPage.setErrorText(n),b8e.error("XuanDong2SDK doInit Error:"+t.code+":"+t.message)}else{var a=t.data;g.wxAppid=a.wx_appid,l.openId=a.sdk_openid,g.appid=a.sdk_appid,g.gameId=a.sdk_gameid,g.gameKey=a.sdk_gamekey,g.adId=a.sdk_adid,game.RECHARGE_PLATFORM=1==a.sdk_is_pyt?game.RechargePlatformType.COMMON:game.RechargePlatformType.IOS_WECHATGAME,l.canShare=1==a.sdk_is_share;var i=a.sdk_shareconf;for(var o in g.shareList=i,g.initSign=a.sdk_sign,g.initDataObj={},a)"sdk_shareconf"!=o&&"sdk_ext"!=o&&"sdk_sign"!=o&&(g.initDataObj[o]=a[o]);if(i&&0<i.length){var r=i[Math.floor(i.length*Math.random())];r&&g.objH5sdk.shareInit(r.share_id,r.share_title,r.share_image,"")}g._onSdkInited.callback.call(g._onSdkInited.thisArg)}})},g.requestLogSignature=function(i,e,t,o){var n={$$source:g.getStrByObj(e),$$is_pay:t};game.sdk.sdkNet.requestData(l.huoshu2CommSign,n,function(e,t){if(e){b8e.error("\u8bf7\u6c42\u7b7e\u540d IO\u9519\u8bef")}else if(0==t.code){var n=t.data;i.call(o,n.signature)}else{var a="\u8bf7\u6c42\u7b7e\u540dError:"+t.code+":"+t.msg;b8e.error(a)}},g,null,!0,{struct:{$$code:!0,$$msg:!0},isJson:!0})},g.getStrByObj=function(e){if(!e)return"";g.signList?g.signList.length=0:g.signList=[];var t=g.signList,n="";for(var a in e)t.push(a);if(t.sort(),!t||t.length<1)return n;for(var i=void 0,o=t.length,r=0;r<o;r++)null===e[i=t[r]]||void 0===e[i]?n+=i+"=&":n+=i+"="+e[i]+"&";return n&&1<n.length&&(n=n.substring(0,n.length-1)),n},g.login=function(i,o){var e=game.isApplyApp?"\u6b63\u5728\u8fdb\u884c\u70ab\u52a8\u8d26\u53f7\u767b\u5f55...":"\u6b63\u5728\u8fdb\u884c\u70ab\u52a8SDK\u8d26\u53f7\u767b\u5f55...";game.loadingPage.setPromptText(e);var t=g.initDataObj;if(t){var n=g.getStrByObj(t),a={$$pfid:l.pfid,$$detail:{$$app_id:g.getAppId()+"",$$open_id:l.openId+"",$$source:n,$$sign:g.initSign}};game.loadingPage.setPromptText("\u6b63\u5728\u8fdb\u884c\u8d26\u53f7\u767b\u5f55..."),game.sdk.sdkNet.requestData(l.loginUrl,a,function(e,t){if(e){var n="\u8d26\u53f7\u767b\u5f55IO\u9519\u8bef";game.loadingPage.setErrorText(n),b8e.error(n)}else{if(0==t.code)l.uid=t.data.uid,l.channelId=t.data.channel_id,l.gameChannelId=t.data.channel_id,l.newAccount=t.data.new_account,l.newAccount&&game.sdk.deviceActive(l.openId);else{var a="\u8d26\u53f7\u767b\u5f55\u9519\u8bef\uff1a"+t.code+":"+t.msg;game.loadingPage.setErrorText(a),b8e.error(a)}i.call(o,t.code)}},g,null,!0,{struct:{$$code:!0,$$msg:!0},isJson:!0})}},g.pay=function(e){if(e){var t="";"number"==typeof e.payment_amount&&(t=e.payment_amount.toFixed(2));for(var n="",a=Math.floor(8*Math.random()),i=0;i<a;i++)n+=Math.floor(10*Math.random())+"";var o={app_id:g.getAppId(),game_id:g.getGameId(),game_key:g.getGameKey(),open_id:l.openId,server_id:e.game_server,server_name:e.server_name,role_id:e.role_id,role_name:e.roleName,role_level:e.role_level,role_vip_level:e.vip_level,role_level_reborn:e.role_level_reborn,score:e.power,total_fee:t,cp_orderno:e.game_payorder+"",object_id:e.item_id,object_name:e.object_name,object_desc:e.desc,timestamp:e.timestamp,nonce:n,currency_type:"RMB",cp_callback_url:l.rechargeCallbackUrl};g.requestLogSignature(function(e){o.sign=e,g.objH5sdk.pay(o,function(e){0==e.code||(b8e.Toast.launch("\u5145\u503cError:"+e.code+":"+e.message,4294901760),b8e.error("SDK pay Error:"+e.code+":"+e.message))})},o,!0,g)}},g.share=function(e){g.shareEvtEnum=e;var t=g.shareList;if(l.canShare&&t&&0<t.length){var n=t[Math.floor(t.length*Math.random())];n&&g.objH5sdk.share(n.share_id,n.share_title,n.share_image,"")}},g.enterGameLog=function(e){var t=e&&20<=e.level?1:0,n={app_id:g.getAppId(),game_id:g.getGameId(),game_key:g.getGameKey(),open_id:l.openId,server_id:e.server_id,server_name:e.server_name,role_id:e.role_id,role_name:e.role_name,role_level:e.level,role_vip_level:e.vip_level,role_level_reborn:e.role_level_reborn,score:e.score,is_new:e.is_new,is_finish_newcomer:t};g.requestLogSignature(function(e,t){n.sign=e,g.objH5sdk.enterGameLog(n,function(e){b8e.log(e)})},n,!1,g)},g.createRoleLog=function(e){var t={app_id:g.getAppId(),game_id:g.getGameId(),game_key:g.getGameKey(),open_id:l.openId,server_id:e.server_id,server_name:e.server_name,role_id:e.role_id,role_name:e.role_name,role_level:e.level,role_vip_level:e.vip_level,role_level_reborn:e.role_level_reborn,score:e.score};g.requestLogSignature(function(e){t.sign=e;g.objH5sdk.createRoleLog(t,function(e){b8e.log(e)})},t,!1,g)},g.levelUpLog=function(e){var t=e&&20<=e.level?1:0,n={app_id:g.getAppId(),game_id:g.getGameId(),game_key:g.getGameKey(),open_id:l.openId,server_id:e.server_id,server_name:e.server_name,role_id:e.role_id,role_name:e.role_name,role_level:e.level,role_vip_level:e.vip_level,role_level_reborn:e.role_level_reborn,score:e.score,is_finish_newcomer:t};g.requestLogSignature(function(e){n.sign=e;g.objH5sdk.levelUpLog(n,function(e){b8e.log(e)})},n,!1,g)},g.focus=function(e){},g.isFocus=function(){},g.getGameId=function(){return b8e.isWeChatGame?g.gameId:b8e.getQueryString("game_id")},g.getPt=function(){return b8e.isWeChatGame?g.wxSceneData&&g.wxSceneData.pt?g.wxSceneData.pt:"1000":""},g.getAppId=function(){return b8e.isWeChatGame?g.appid:b8e.getQueryString("app_id")},g.getOpenId=function(){return l.openId},g.getGameKey=function(){return b8e.isWeChatGame?g.gameKey:b8e.getQueryString("game_key")}}(),function(){var e=void 0,p=game.LoginConfig;(e=b8e.Object.extends({sdkNet:null,_onSdkInited:null,_isJunHai:!1,_isXuanDong:!1,_isIos:!1,_isReportLog:!0,ctor:function(){this._super(),this.sdkNet=b8e.NetMgr.createMgr("sdk")},init:function(e,t){this._onSdkInited={callback:e,thisArg:t},this.initSdk()},initSdk:function(){var e=this,t=game.channelInfo,n=t.sdk_type;switch(p.pfid=t.pfid,p.needLogin=!1,n){case 1:e._isJunHai=!0,game.IS_JUNHAI=!0,100004==game.channelInfo.bcid&&b8e.isWeChatGame&&(game.IS_QQ_GAME=!0),game.JunHaiSdk.init(e.requestApiList,e);break;case 2:e._isIos=!0,game.IS_IOS_SDK=!0,game.IosSdk.init(e.requestApiList,e);break;case 3:e._isXuanDong=!0,game.IS_XUANDONG=!0,game.XuanDongSdk.init(e.requestApiList,e);break;case 4:e._isXuanDong2=!0,game.IS_XUANDONG2=!0,game.XuanDong2Sdk.init(e.requestApiList,e);break;default:p.pfid=1;var a=e.getToken();a?p.token=a:p.needLogin=!0,e.requestApiList()}},requestApiList:function(){game.loadingPage.setPromptText(game.LanguageData.get(46));var e={$$pf_id:p.pfid};this.sdkNet.requestData(b8e.getProtocol()+"//"+p.apiListUrl,e,function(e,t){if(e){var n=game.LanguageData.get(47);game.loadingPage.setErrorText(n),b8e.Toast.launch(n,4294901760,0),b8e.error(n),this.refreshGame()}else if(0==t.code){var a=t.data;p.registerUrl=a.register_url,p.loginUrl=a.login_url,p.serverListUrl=a.server_list_url,p.serverSelectUrl=a.server_select_url,p.logReportUrl=a.log_report_url,p.createOrderUrl=a.create_order_url,p.rechargeCallbackUrl=a.recharge_callback_url,""!=a.query_announcement_list_url&&a.query_announcement_list_url&&(p.queryAnnouncementListUrl=a.query_announcement_list_url),p.junhaiRechargeSign=a.junhai_recharge_sign,p.junhaiActiveLog=a.junhai_active_log,p.huoshuLoginSign=a.huoshu_login_sign,p.huoshuRechargeSign=a.huoshu_recharge_sign,p.suggestUrl=a.suggest_url,p.wanbaFriendsUrl=a.wanba_friends_url,p.wanbaSendMsgUrl=a.wanba_send_msg_url,p.wanbaVipLevelUrl=a.wanba_vip_level_url,p.huoshu2CommSign=a.huoshu2_comm_sign,p.verifyUrl=a.verify_url,p.traceUrl=a.trace_url,game.loadingPage.setPromptText(game.LanguageData.get(48)),this._onSdkInited.callback.call(this._onSdkInited.thisArg)}else{var i=game.LanguageData.get(49)+t.code+":"+t.msg;b8e.Toast.launch(i,4294901760,0),game.loadingPage.setErrorText(i),b8e.error(i),this.refreshGame()}},this,null,!0,{struct:{$$code:!0,$$msg:!0,$$data:{$$register_url:!0,$$login_url:!0,$$server_list_url:!0,$$server_select_url:!0,$$log_report_url:!0,$$create_order_url:!0,$$recharge_callback_url:!0,$$query_announcement_list_url:!0,$$junhai_recharge_sign:!0,$$junhai_active_log:!0,$$huoshu_login_sign:!0,$$huoshu_recharge_sign:!0,$$suggest_url:!0,$$wanba_friends_url:!0,$$wanba_send_msg_url:!0,$$wanba_vip_level_url:!0,$$comm_sign:!0,$$huoshu2_comm_sign:!0,$$verify_url:!0,$$trace_url:!0}},isJson:!0})},refreshGame:function(){var e={msg:game.LanguageData.get(50),thisArg:this,okcb:function(){b8e.startup&&b8e.startup.reload()}},t=b8e.layer.getTopLayer();game.alert.show(e,t)},getToken:function(){return b8e.getQueryString("token")},login:function(e,i,o){var t=this;if(t._isJunHai)game.JunHaiSdk.login(i,o);else if(t._isXuanDong)game.XuanDongSdk.login(i,o);else if(t._isIos)game.IosSdk.login(i,o);else if(t._isXuanDong2)game.XuanDong2Sdk.login(i,o);else{p.localClient=!0,p.needVerify=game.GlobalCfg.getNeedVerify(1);var n=+game.GlobalCfg.getValue("IntranetChannelId");n=n||1;var a=+game.GlobalCfg.getValue("IntranetGmaeChannelId");a=a||1;var r={$$pfid:p.pfid,$$detail:{$$username:e.username,$$password:e.password,$$channel_id:n,$$game_channel_id:a},$$need_verify:p.needVerify};game.loadingPage.setPromptText(game.LanguageData.get(51)),t.sdkNet.requestData(p.loginUrl,r,function(e,t){if(e)b8e.Toast.launch(game.LanguageData.get(52),4294901760,0),b8e.error(game.LanguageData.get(52));else{if(0==t.code){var n=t.data;if(p.uid=n.uid,p.channelId=n.channel_id,p.gameChannelId=n.game_channel_id,p.newAccount=n.new_account,p.userId=n.open_id,p.newAccount&&game.sdk.deviceActive(),p.needVerify){var a=-1==n.verify;p.hasRealVerify=!a,p.realVerifyComplete=!a,game.sdk.checkFcm(a,n.verify)}}i.call(o,t)}},t,null,!0,{struct:{$$code:!0,$$data:{$$uid:!0,$$channel_id:!0,$$game_channel_id:!0,$$new_account:!0,$$open_id:!0,$$verify:!0,$$access_token:!0}},isJson:!0})}},logout:function(e,t){var n=1<arguments.length&&void 0!==t?t:"";0<arguments.length&&void 0!==e&&e?b8e.startup.reload():game.alert.show({msg:n||game.LanguageData.get(53),okcb:function(){this._isJunHai?game.JunHaiSdk.logout():this._isXuanDong?game.XuanDongSdk.switchAccount():b8e.startup.reload()},cancelcb:function(){},align:1,thisArg:this})},supportLogout:function(){return this._isJunHai?game.JunHaiSdk.supportLogout():(this._isXuanDong,!0)},addShortcut:function(){this._isJunHai?game.JunHaiSdk.addShortcut():this._isXuanDong&&game.XuanDongSdk.addShortcut()},switchAccount:function(){var e={msg:game.LanguageData.get(54),btn:game.LanguageData.get(28),thisArg:this,showtips:!1};game.alert.show(e)},focus:function(){this._isJunHai?game.JunHaiSdk.focus():this._isXuanDong&&game.XuanDongSdk.focus(function(){p.isFocus=!0,b8e.evt.dptG(game.VerifyAwardGEvts.FOCUS_SUCCESS)})},isFocus:function(){if(!this._isXuanDong)return game.LoginConfig.isFocus;game.XuanDongSdk.isFocus()},sdkBindPhone:function(){this._isXuanDong?game.XuanDongSdk.sdkBindPhone(function(){p.isBindPhone=!0,b8e.evt.dptG(game.ActiveBarEvent.ACTIVE_BAR_CHANGE),b8e.evt.dptG(game.WelfareEvents.BIND_PHONE_SUCCESS)}):this._isJunHai&&game.JunHaiSdk.bindPhone()},downloadMicroClient:function(){this._isXuanDong?game.XuanDongSdk.downloadMicroClient():this._isJunHai&&game.JunHaiSdk.downloadMicroClient()},share:function(e){this._isXuanDong?game.XuanDongSdk.share(e):this._isJunHai?game.JunHaiSdk.share(e):this._isXuanDong2&&game.XuanDong2Sdk.share(e)},openInterestTribeUrl:function(){this._isJunHai&&game.JunHaiSdk.openInterestTribeUrl()},realVerify:function(){this._isJunHai?game.JunHaiSdk.realVerify():this._isXuanDong&&game.XuanDongSdk.realVerify()},pay:function(e){var t=this,n=game.LoginConfig.getOpenRechargeLimit();if(p.needVerify&&n){var a=void 0;if(1==p.fcm)return a=game.Lang.get(9675),void game.alert.showMsg(a);if(9==p.fcm)return a=game.Lang.get(9675),void game.alert.showMsg(a);if(2==p.fcm){var i=p.getLimitRecharge(),o=e.itemId,r=game.RechargeCfg.getDataById(o);if(!r)return;if(r.money>i){var s=p.age<16?9677:9678;return a=game.Lang.get(s),void game.alert.showMsg(a)}var g=p.getMaxRecharge(),l=game.rechargeData.rechargeMoneyMonthly;if(l+r.money>g){var c=p.age<16?9679:9680;return a=game.Lang.get(c),void game.alert.showMsg(a)}t._alertOptions||(t._alertOptions={msg:"",okcb:t.createOrderAndPay,thisArg:t,align:b8e.HorizontalAlign.CENTER});var d=game.Lang.get(9646,l,g);return t._alertOptions.msg=d,t._alertOptions.args=e,void game.alert.show(t._alertOptions)}}t.createOrderAndPay(e)},createOrderAndPay:function(e){var t=this,n=p.heroData;if(n&&n.id){game.mainRoleData.lv,game.mainRoleData.vipLevel,game.mainRoleData.rebirthLevel,game.mainRoleData.power;var a=game.mainRoleData.name;p.uid,p.serverId,n.id,e.itemId;if(1==p.pfid)t.gmData||(t.gmData=new game.GMItemData),t.gmData.cmd="recharge",t.gmData.args=e.itemId,b8e.evt.dptG(game.GMGEvts.GM_UPDATE,t.gmData);else{t.registerCmd||(t.registerCmd=!0,b8e.net.addMsgHandler(game.protoId.CreateOrderResp,t.createOrderResponse,this));var i=game.RechargeCfg.getDataById(e.itemId);i&&t.createOrderRequest(e.itemId,i.money)}}else b8e.warn("\u521b\u5efa\u8ba2\u5355\u5931\u8d25:",n)},getModelTouchClose:function(){return!1},_delayFunc:function(){var e=this;e._timeSpace-=500,e._delayLab?e._timeSpace<=0?e.stopTimer():e._delayLab.string="\u6b63\u5728\u83b7\u53d6\u8ba2\u5355...":e.stopTimer()},stopTimer:function(){var e=this;e._delayLab&&(e._delayLab.removeFromParent(),game.viewModule.removeModule(e._delayLab)),e._timerObj&&e._timerObj.stop()},createOrderResponse:function(e){var t=this,n=e.readProtobuf(game.pb.CreateOrderResponse);if(n)if(t.stopTimer(),0<n.code)game.notice.noticeError(n.code);else{var a=n.itemId,i=game.RechargeCfg.getDataById(a);if(i){var o="",r="",s=1,g=game.mainRoleData,l=g.id,c=g.lv,d=g.vipLevel,u=g.rebirthLevel,m=g.power,_=g.name;switch(i.rechargeType){case game.RechargeType.NORMAL:o=game.LanguageData.get(58),s=i.addAccuGold,r=game.LanguageData.get(59)+s+o;break;case game.RechargeType.SALE:case game.RechargeType.TIMELIMITPRIZE:case game.RechargeType.DAILY_SALE_PRIZE:case game.RechargeType.GROWTH_PRIZE:case game.RechargeType.KEEP_PRIZE:o=game.LanguageData.get(60),s=1,r=game.LanguageData.get(59)+o;break;case game.RechargeType.CARD:o=i.name,s=1,r=game.LanguageData.get(59)+o;break;default:o=game.LanguageData.get(58),s=i.addAccuGold,r=game.LanguageData.get(59)+s+o}(t._isXuanDong||t._isXuanDong2)&&(o=game.LanguageData.get(61)+i.money+game.LanguageData.get(62));var h={payment_amount:i.money,game_payorder:n.orderId,object_name:o,desc:r,timestamp:n.orderTime,game_area:p.serverArea,game_server:p.serverId,role_id:l,role_level:c,vip_level:d,roleName:_,item_id:a,product_count:s,server_name:p.serverName,role_level_reborn:u,power:m};t._isJunHai?game.JunHaiSdk.pay(h):t._isXuanDong?game.XuanDongSdk.pay(h):t._isIos?game.IosSdk.pay(h):t._isXuanDong2&&game.XuanDong2Sdk.pay(h)}}},createOrderRequest:function(e,t){var n=game.pb.CreateOrderRequest;n.itemId=e,n.money=t,b8e.net.getBytes().writeProtobuf(n),b8e.sendN(game.protoId.CreateOrderReq)},getBaseData:function(e){var t=0<arguments.length&&void 0!==e?e:null;if(!t&&!game.mainRoleData)return b8e.error("\u4e3b\u89d2\u6ca1\u6709\u6570\u636e\uff0c\u4e0d\u5fc5\u8981\u53d1\u9001\u521b\u89d2\u6570\u636e!!!"),null;var n,a=0,i="",o="",r=0,s=0,g=0,l=0,c=0,d=0,u=0,m=p.heroData;return a=(r=t?(n=t).level:(n=game.mainRoleData).lv,n.id),m&&m.id!=a?null:(n&&(i=n.name,o=n.guildName,s=n.vipLevel,g=n.power,l=n.createTime,c=n.levelUpTime?n.levelUpTime:n.createTime,u=n.rebirthLevel),game.amount&&(d=game.amount.get(game.AmountType.YUAN_BAO)),{role_id:a,role_name:i,level:r,vip_level:s,area:p.serverArea,server_id:p.serverId,is_new:!p.oleRole,score:g,server_name:p.serverName,party_name:o,golds:d,role_create_time:l,role_update_time:c,role_level_reborn:u})},serverChooseLog:function(){this._isXuanDong&&game.XuanDongSdk.serverChooseLog()},enterGameLog:function(){var e=this,t=e.getBaseData();t&&(e._isJunHai?(t.is_new=game.LoginConfig.newAccount,game.JunHaiSdk.enterGameLog(t)):e._isXuanDong?game.XuanDongSdk.enterGameLog(t):e._isIos?game.IosSdk.enterGameLog(t):e._isXuanDong2&&(t.is_new=t.is_new?1:0,game.XuanDong2Sdk.enterGameLog(t)))},stepLog:function(e){if(this._isXuanDong){var t=this.getBaseData();if(!e)return;t.progress=e.progress,game.XuanDongSdk.stepLog(t)}},createRoleLog:function(e){var t=this.getBaseData(e);t&&(this._isXuanDong?game.XuanDongSdk.createRoleLog(t):this._isJunHai?game.IS_WANBA&&game.JunHaiSdk.reportRegister():this._isXuanDong2&&game.XuanDong2Sdk.createRoleLog(t))},loginRoleLog:function(){this._isJunHai&&game.IS_WANBA&&game.JunHaiSdk.reportLogin()},levelUpLog:function(){var e=this,t=e.getBaseData();t&&(e._isJunHai?game.JunHaiSdk.levelUpLog(t):e._isXuanDong?game.XuanDongSdk.levelUpLog(t):e._isIos?game.IosSdk.roleInfoChange(t):e._isXuanDong2&&game.XuanDong2Sdk.levelUpLog(t))},processLog:function(e){if(this._isXuanDong){var t=this.getBaseData();if(!t)return;t.process=e.process,game.XuanDongSdk.processLog(t)}},updateFightScoreLog:function(){if(this._isXuanDong){var e=this.getBaseData();if(!e)return;game.XuanDongSdk.updateFightScoreLog(e)}else if(this._isJunHai&&game.IS_WANBA&&b8e.isWeChatGame){var t=game.mainRoleData.power;game.JunHaiSdk.updateFightScoreLog(t)}},sceneLog:function(){},payLog:function(e,t){if(this._isJunHai){var n=game.ShopItemCfg.getDataByGoodsId(e);if(!n)return void b8e.warn("\u6ca1\u6709\u627e\u5230\u5bf9\u5e94\u7684\u5546\u54c1id\u914d\u7f6e"+e);if(n.shopId!=game.ShopIdEnum.YUANBAO_SHOP&&n.shopId!=game.ShopIdEnum.BANGYUAN_SHOP)return;if(!n.costItems||n.costItems.length<1)return;var a=game.ItemInfoCfg.getData(n.itemId);if(!a)return void b8e.warn("\u6ca1\u6709\u627e\u5230\u5bf9\u5e94\u7684\u9053\u5177id\u914d\u7f6e"+n.itemId);var i=0,o=0,r=game.amount.getAmountTypeById(n.costItems[0].Id);if(r==game.AmountType.YUAN_BAO)i=n.costItems[0].Num*t;else{if(r!=game.AmountType.BIND_YUAN_BAO)return void b8e.warn("\u5143\u5b9d\u5546\u5e97/\u7ed1\u5143\u5546\u5e97\u91cc\u9762\u914d\u7f6e\u4e86\u4e0d\u9700\u8981\u5143\u5b9d/\u7ed1\u5143\u8d2d\u4e70\u7684\u9053\u5177:goodId"+goodId);o=n.costItems[0].Num*t}var s=game.amount.get(game.AmountType.YUAN_BAO)-i,g=game.amount.get(game.AmountType.BIND_YUAN_BAO)-o,l=a.name,c=a.des,d=this.getBaseData();if(!d)return;var u={consume_coin:i,consume_bind_coin:o,remain_coin:s,remain_bind_coin:g,item_count:t,item_name:l,item_desc:c};game.JunHaiSdk.payLog(d,u)}},msgSecCheck:function(e,t,n,a){var i=!(3<arguments.length&&void 0!==a)||a,o=e;this._isXuanDong?game.XuanDongSdk.msgSecCheck(o,function(e){e?t.call(n,!0,o):i&&b8e.Toast.launch(game.LanguageData.get(64))},this):game.IS_BEIBAO2&&b8e.isWeChatGame?huoShuSdk&&huoShuSdk.checkMsg&&huoShuSdk.checkMsg({data:{content:e}}).then(function(e){e&&"success"==e.msg?t.call(n,!0,o):b8e.Toast.launch(game.LanguageData.get(64))},function(e){b8e.Toast.launch(game.LanguageData.get(64))}):t.call(n,!0,e)},deviceActive:function(e){var t={$$user_id:0<arguments.length&&void 0!==e?e:"",$$device:p.getDeviceParam2(),$$channel_id:p.channelId,$$game_channel_id:p.getGameChannelId()};game.sdk.sdkNet.requestData(p.junhaiActiveLog,t,function(e,t){e?b8e.error("\u63a8\u9001\u8bbe\u5907\u6fc0\u6d3b\u65e5\u5fd7IO\u9519\u8bef"):0==t.code||b8e.error("\u63a8\u9001\u8bbe\u5907\u6fc0\u6d3b\u65e5\u5fd7\u9519\u8bef\uff1a",t.msg)},this,null,!0,{struct:{$$code:!0,$$msg:!0},isJson:!0})},checkSetState:function(){this._isJunHai&&game.JunHaiSdk.checkSetState()},getQQBalance:function(e,t){this._isJunHai&&game.IS_WANBA&&b8e.isWeChatGame&&game.JunHaiSdk.getQQBalance(e,t)},closeGame:function(){this._isJunHai&&112477==p.gameChannelId&&game.JunHaiSdk.closewebview()},checkFcm:function(e,t){var n=this;if(!p.needVerify)return!0;if(e){if(!n._fcmView)n._fcmView=new game.FcmView,b8e.layer.getGuiBottomLayer().addChild(n._fcmView),n._fcmView.data={submitFcm:n.submitFcm,thisArg:n};return!1}p.age=t;var a=game.LoginConfig.getOpenGameLimit(),i=p.fcm=p.getFcm();if(a){var o=void 0;1==i&&(o=game.GlobalCfg.getFcmTips("fcmTips1"),game.alert.showMsg(o)),2==i&&(o=game.GlobalCfg.getFcmTips("fcmTips2"),game.alert.showMsg(o))}return!0},submitFcm:function(e,t,n,a){var i=this;if(e&&t){var o={$$user_id:p.userId,$$channel_id:p.channelId,$$game_channel_id:+p.gameChannelId,$$id_card:t,$$real_name:e};game.sdk.sdkNet.requestData(p.verifyUrl,o,function(e,t){if(e)return b8e.error(e),void b8e.Toast.launch(game.LanguageData.get(65),4294901760);if(t)if(0==t.code){if(0==t.code){if(p.hasRealVerify=!0,p.realVerifyComplete=!0,p.age=t.data.age,!i.checkFcm(!1,p.age))return;n.call(a)}}else game.alert.showMsg(t.msg)},i,null,!0,{struct:{$$code:!0,$$msg:!0,$$data:{$$age:!0}},isJson:!0})}},traceLog:function(e){if(!p.localClient&&!p.oleRole){var t=p.heroData;if(t&&(p.traceSteps||(p.traceSteps=[]),!(-1<p.traceSteps.indexOf(e)))){p.traceSteps.push(e);var n={$$uid:p.uid,$$role_id:t.id,$$step:e,$$zone:p.serverId,$$game_channel_id:+p.gameChannelId};game.sdk.sdkNet.requestData(p.traceUrl,n,function(e,t){e?b8e.error(e):t&&(0==t.code||b8e.warn("\u4e0a\u62a5\u8e29\u70b9\u65e5\u5fd7"+t.msg+"code:"+t.code))},this,null,!0,{struct:{$$code:!0,$$msg:!0},isJson:!0})}}},subscribeApp:function(){this._isJunHai&&game.IS_QQ_GAME&&b8e.isWeChatGame&&game.JunHaiSdk.subscribeApp()},addColorSign:function(){this._isJunHai&&game.IS_QQ_GAME&&b8e.isWeChatGame&&game.JunHaiSdk.addColorSign()},userMobileBind:function(e,t,n,a){this._isJunHai&&this.canMobileBind()&&game.JunHaiSdk.userMobileBind(e,t,n,a)},sendMobileCaptcha:function(e,t,n){this._isJunHai&&this.canMobileBind()&&game.JunHaiSdk.sendMobileCaptcha(e,t,n)},checkMobileBind:function(e,t){this._isJunHai&&this.canMobileBind()&&game.JunHaiSdk.checkMobileBind(e,t)},canMobileBind:function(){return!!this._isJunHai&&game.JunHaiSdk.canMobileBind()}}))._instance=null,e._singleton=!0,e.inst=function(){return null==e._instance&&(e._singleton=!1,e._instance=new e,e._singleton=!0),e._instance},b8e.RC("$$game","$$SDKMgr",e)}(),function(){var e=b8e.Object.extends({_timer:null,curTime:{get:function(){return b8e.startup.getServerTime()}},ping:{get:function(){return b8e.startup.getPing()}},unixTime:{get:function(){return.001*this.curTime>>0}},reqServerTime:function(){b8e.startup.reqServerTime(),b8e.sendN(game.pb.ProtoId.QryServerTimeReq)},syncTime:function(){var e=this;e.reqServerTime(),e._timer||(e._timer=b8e.Timer.add(e,e.reqServerTime,6e4)),e._timer.reset(),e._timer.start()}});game.SysTime=game.SysTime||new e}(),function(){var e;e=b8e.Enum({UPDATE_WX_ADD_SHORTCUT_BTN_STATE:b8e.enc(),ADD_SHORTCUT_SUCCESS:b8e.enc(),FOCUS_SUCCESS:b8e.enc(),REAL_NAME_SUCCESS:b8e.enc(),SHARE_TYPEA_SUCCESS:b8e.enc(),SHARE_TYPEB_SUCCESS:b8e.enc(),BIND_MOBILE_SUCCESS:b8e.enc(),DOWNLOAD_MICRO_CLIENT_SUCCESS:b8e.enc(),ADD_COLOR_TICKET_SUCCESS:b8e.enc(),SUBSCRIBE_APP_SUCCESS:b8e.enc()}),b8e.RC("$$game","$$VerifyAwardGEvts",e)}(),function(){var e;e=b8e.Enum({G_UPDATE_CAN_PAY:b8e.enc()}),b8e.RC("$$game","$$SdkGEvts",e)}(),function(){var e;e=b8e.SkinWidget.extends({ctor:function(){this._super(game.baseUIUrl[9]),this.fadeEnabel=!0},init:function(){},onShow:function(){var e=this;e.onStageResize();var t=e.skin.touchBtn;b8e.evt.onTouchStart(t,e._onTouchBegan,e),b8e.evt.onTouchEnd(t,e._onTouchEnd,e),b8e.evt.onTouchCancel(t,e._onTouchCancelled,e),b8e.evt.onTouchMove(t,e._onTouchMove,e)},closeBtn:function(){var e=this;e._alertOptions||(e._alertOptions={msg:game.LanguageData.get(33),okcb:e.onClickGameAlert,thisArg:e}),game.alert.showTwo(e._alertOptions)},onClickGameAlert:function(){game.sdk.closeGame()},closePanle:function(){var e=this,t=e.skin.touchBtn;b8e.evt.offTouchStart(t,e._onTouchBegan,e),b8e.evt.offTouchEnd(t,e._onTouchEnd,e),b8e.evt.offTouchCancel(t,e._onTouchCancelled,e),b8e.evt.offTouchMove(t,e._onTouchMove,e),e.removeFromParent(),e.hide()},_onTouchBegan:function(e){var t=e.target,n=e.touch.getLocation();t.hitTest(n)&&(this._startTouch||(this._startTouch=!0,this._lastPos=this._startPos=n))},_onTouchEnd:function(e){var t=this,n=e.target,a=e.touch.getLocation();n.hitTest(a)&&(t._lastPos=null,t._touchMoved&&e.stopPropagation(),t._startTouch=!1,t._touchMoved&&(t._touchMoved=!1))},_onTouchCancelled:function(){this._lastPos=null,this._startTouch=!1,this._touchMoved&&(this._touchMoved=!1)},_onTouchMove:function(e){var t=this,n=e.touch.getLocation();if(t._lastPos){t.location=n,t.offsetX=t._lastPos.x-n.x,t.offsetY=n.y-t._lastPos.y,t._lastPos=t.location,t._endPos=t.location,t._touchMoved=!0;var a=t.x-t.offsetX,i=t.y+t.offsetY,o=a>t.maxX?t.maxX:a,r=i>t.maxY?t.maxY:i;o<0&&(o=0),r<t.height&&(r=t.height),t.setPosition(o,r)}},getModelTouchClose:function(){return!1},onStageResize:function(){var e=this;e.maxX=b8e.stageWidth-e.width,e.maxY=b8e.stageHeight,e.setPosition(b8e.stageWidth-e.width-20,b8e.stageHeight-e.height-20)},dispose:function(){this.closePanle(),this._super()}}),b8e.RC("$$game","$$FloatingWindow",e)}(),function(){var e;e=b8e.SkinWidget.extends({ctor:function(){this._super(game.baseUIUrl[6]),this.fadeEnabel=!0,this.setLocalZOrder(600)},init:function(){this.skin.lab_content.string=game.GlobalCfg.getValue("fcmTips7"),this.skin.content.height=this.skin.lab_content.height},onShow:function(){this.onStageResize(),game.viewModule.addModule(this),b8e.evt.addG(this,b8e.Event.STAGE_RESIZE,this.onStageResize)},closeBtn:function(){this.check()},returnBtn:function(){this.check()},check:function(){var e=void 0;if(!game.LoginConfig.realVerifyComplete)return e=game.GlobalCfg.getFcmTips("fcmTips3"),void game.alert.showMsg(e);this.closePanel()},view_submitBtn:function(){var e=void 0,t=this.skin.name.string,n=this.skin.idCard.string;return t&&n?game.LoginConfig.realVerifyComplete?(e=game.GlobalCfg.getFcmTips("fcmTips6"),void game.alert.showMsg(e)):void game.sdk.submitFcm(t,n,this.closePanel,this):(e=game.GlobalCfg.getFcmTips("fcmTips5"),void game.alert.showMsg(e))},view_visitorBtn:function(){var e=game.LoginConfig;e.visitor=!0,e.fcm=9,this.closePanel()},getModelTouchClose:function(){return!1},closePanel:function(){var e=this;e._modal&&e._modal.removeFromParent(),game.viewModule.removeModule(e),b8e.evt.rmvG(e,b8e.Event.STAGE_RESIZE,e.onStageResize),e.removeFromParent()},onStageResize:function(){var e=b8e.stageWidth,t=b8e.stageHeight,n=e-this.width>>1,a=t-this.height>>1;this.setPosition(n,t-a)}}),b8e.RC("$$game","$$FcmView",e)}(),(game.LangLabel=function(){}).injection=function(){function e(e){if(e){return e.langKey&&game.UILang?game.UILang.get(e.langKey.key):e.text}}bui.Label.prototype.getDefaultText=e,bui.RichText.prototype.getDefaultText=e}},{}]},{},[1]);